# Issue 29701: Replace use of module_list and OptionalExtension by extending find_python_sources

archive/issues_029464.json:
```json
{
    "body": "We add two new features to `find_python_sources`: finding Cython extensions, and filtering by \"distributions\".\n\nWe remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n\nWe remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n\nFollow-up tickets:\n- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages that provide namespace packages (#28925)\n- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)\n\n\n\n\nCC:  @kiwifb @isuruf @videlec @dcoudert @dimpase @kliem @vbraun\n\nBranch/Commit: [55c3fbc565fd7884f3df9555de83dd326ace276e](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)\n\nReviewer: Jonathan Kliem\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29701\n\n",
    "closed_at": "2020-08-10T18:50:17Z",
    "created_at": "2020-05-17T16:26:04Z",
    "labels": [
        "component: refactoring",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Replace use of module_list and OptionalExtension by extending find_python_sources",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29701",
    "user": "https://github.com/mkoeppe"
}
```
We add two new features to `find_python_sources`: finding Cython extensions, and filtering by "distributions".

We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)

We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.

Follow-up tickets:
- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages that provide namespace packages (#28925)
- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)




CC:  @kiwifb @isuruf @videlec @dcoudert @dimpase @kliem @vbraun

Branch/Commit: [55c3fbc565fd7884f3df9555de83dd326ace276e](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)

Reviewer: Jonathan Kliem

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29701





---

archive/issue_events_085700.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "rename": {
        "from": "Replace use of OptionalExtension by namespace packages",
        "to": "Meta-ticket: Replace use of OptionalExtension by namespace packages"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29701#event-85700"
}
```



---

archive/issue_comments_582371.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n+Preparation:\n+- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages\n \n+\n``````\n",
    "created_at": "2020-05-17T17:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582371",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
+Preparation:
+- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages
 
+
``````




---

archive/issue_comments_582372.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Preparation:\n - #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages\n+- #29702 Move all code from src/setup.py to sage_setup\n \n-\n``````\n",
    "created_at": "2020-05-17T17:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582372",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Preparation:
 - #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages
+- #29702 Move all code from src/setup.py to sage_setup
 
-
``````




---

archive/issue_comments_582373.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,16 @@\n Preparation:\n-- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages\n-- #29702 Move all code from src/setup.py to sage_setup\n+- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages\n+- #29702 Move all code from `src/setup.py` to `sage_setup`\n \n+Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n+- `sage.graphs.mcqd`\n+- `sage.graphs.bliss`\n+- `sage.graphs.graph_decompositions.tdlib`\n+- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)\n+- `sage.libs.coxeter3.coxeter`\n+- `sage.libs.fes`\n+- `sage.libs.sirocco`\n+- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`\n+\n+\n+\n``````\n",
    "created_at": "2020-05-17T19:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582373",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,16 @@
 Preparation:
-- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages
-- #29702 Move all code from src/setup.py to sage_setup
+- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages
+- #29702 Move all code from `src/setup.py` to `sage_setup`
 
+Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
+- `sage.graphs.mcqd`
+- `sage.graphs.bliss`
+- `sage.graphs.graph_decompositions.tdlib`
+- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)
+- `sage.libs.coxeter3.coxeter`
+- `sage.libs.fes`
+- `sage.libs.sirocco`
+- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`
+
+
+
``````




---

archive/issue_comments_582374.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n - `sage.graphs.mcqd`\n - `sage.graphs.bliss`\n-- `sage.graphs.graph_decompositions.tdlib`\n+- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)\n - `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)\n - `sage.libs.coxeter3.coxeter`\n - `sage.libs.fes`\n``````\n",
    "created_at": "2020-05-17T21:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582374",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
 - `sage.graphs.mcqd`
 - `sage.graphs.bliss`
-- `sage.graphs.graph_decompositions.tdlib`
+- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)
 - `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)
 - `sage.libs.coxeter3.coxeter`
 - `sage.libs.fes`
``````




---

archive/issue_comments_582375.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n Preparation:\n - #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages\n+- Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n``````\n",
    "created_at": "2020-05-18T00:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582375",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
 Preparation:
 - #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages
+- Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
 Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
``````




---

archive/issue_comments_582376.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,9 @@\n+Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.\n+\n+With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).\n+\n Preparation:\n-- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages\n+- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-05-19T04:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582376",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,9 @@
+Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.
+
+With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).
+
 Preparation:
-- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages
+- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_582377.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).\n \n Preparation:\n-- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)\n+- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-05-19T04:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582377",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).
 
 Preparation:
-- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)
+- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_582378.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,7 @@\n \n Preparation:\n - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n+- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-05-20T22:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582378",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,7 @@
 
 Preparation:
 - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
+- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_582379.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n Preparation:\n - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n-- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.\n+- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-06-03T18:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582379",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 Preparation:
 - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
-- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.
+- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_582380.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925\"",
    "created_at": "2020-06-03T22:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582380",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925"



---

archive/issue_events_085701.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "rename": {
        "from": "Meta-ticket: Replace use of OptionalExtension by namespace packages",
        "to": "Replace use of module_list and OptionalExtension by extending find_python_sources"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29701#event-85701"
}
```



---

archive/issue_comments_582381.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,22 +1,7 @@\n-Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.\n+Using the extended `find_python_sources` from #28925, \n+we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n \n-With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).\n+We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n-Preparation:\n-- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n-- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.\n-- Remove empty  `__init__.py` files to convert packages to native namespace packages\n-- #29702 Move all code from `src/setup.py` to `sage_setup`\n+(In a follow-up ticket, part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages.)\n \n-Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n-- `sage.graphs.mcqd`\n-- `sage.graphs.bliss`\n-- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)\n-- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)\n-- `sage.libs.coxeter3.coxeter`\n-- `sage.libs.fes`\n-- `sage.libs.sirocco`\n-- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`\n-\n-\n-\n``````\n",
    "created_at": "2020-06-03T22:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582381",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,22 +1,7 @@
-Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.
+Using the extended `find_python_sources` from #28925, 
+we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
 
-With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).
+We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
-Preparation:
-- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
-- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.
-- Remove empty  `__init__.py` files to convert packages to native namespace packages
-- #29702 Move all code from `src/setup.py` to `sage_setup`
+(In a follow-up ticket, part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages.)
 
-Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
-- `sage.graphs.mcqd`
-- `sage.graphs.bliss`
-- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)
-- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)
-- `sage.libs.coxeter3.coxeter`
-- `sage.libs.fes`
-- `sage.libs.sirocco`
-- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`
-
-
-
``````




---

archive/issue_comments_582382.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/replace_use_of_module_list_optionalextension\"",
    "created_at": "2020-06-03T22:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582382",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/replace_use_of_module_list_optionalextension"



---

archive/issue_comments_582383.json:
```json
{
    "body": "Changing commit from \"\" to \"891d12aeacd439cd72e31d42399826f48dae624f\"",
    "created_at": "2020-06-03T22:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582383",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "891d12aeacd439cd72e31d42399826f48dae624f"



---

archive/issue_comments_582384.json:
```json
{
    "body": "<a id='comment:12'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                                                                                                                                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|[4365e5d](https://github.com/sagemath/sagetrac-mirror/commit/4365e5d772cabee22c9eb269b44eeed5788ae5ea)|`Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29705/META-modularize-sagelib`|\n|[9dc7022](https://github.com/sagemath/sagetrac-mirror/commit/9dc702211964cd029cb26bc78db645be22ac4416)|`Merge branch 't/29706/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files' into t/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_`|\n|[f78b06d](https://github.com/sagemath/sagetrac-mirror/commit/f78b06db0842b68a30310ad5471845478eb10e10)|`src/module_list.py: Move options for Extensions in sage.libs to distutils directives`|\n|[1b0e29d](https://github.com/sagemath/sagetrac-mirror/commit/1b0e29d6a6001a0d1e5a56161e0df3d80da3118a)|`src/module_list.py: Move options for Extensions in sage.matrix to distutils directives`|\n|[6421e2c](https://github.com/sagemath/sagetrac-mirror/commit/6421e2c85409fef5a539299d96145e3a088826bf)|`src/module_list.py: Move remaining options for Extensions in sage.libs, sage.rings to distutils directives`|\n|[b3d3d2f](https://github.com/sagemath/sagetrac-mirror/commit/b3d3d2f3baa0e1700c51b7df58a5af1aeba5acc4)|`Merge branch 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29705/META-modularize-sagelib`|\n|[2821934](https://github.com/sagemath/sagetrac-mirror/commit/28219340dd0eb3d939dcd0c7e9fbc89133490a0c)|`Fix sage_setup directives: Use distribution, not package`|\n|[9052db4](https://github.com/sagemath/sagetrac-mirror/commit/9052db45107872fd3683097061ee0b4edeefdaf4)|`Merge branch 't/29720/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_2___optionalextensions_' into t/29705/META-modularize-sagelib`|\n|[ff710ee](https://github.com/sagemath/sagetrac-mirror/commit/ff710ee3e994c26f0a7619438f94b218f0bcb406)|`src/sage_setup/optional_extension.py (is_package_installed_and_updated): Factor out from OptionalExtension`|\n|[891d12a](https://github.com/sagemath/sagetrac-mirror/commit/891d12aeacd439cd72e31d42399826f48dae624f)|`src/setup.py: Remove use of module_list.py; filter by distributions`|",
    "created_at": "2020-06-03T22:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582384",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Last 10 new commits:
|                                                                                                                                          |                                                                                                                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|[4365e5d](https://github.com/sagemath/sagetrac-mirror/commit/4365e5d772cabee22c9eb269b44eeed5788ae5ea)|`Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29705/META-modularize-sagelib`|
|[9dc7022](https://github.com/sagemath/sagetrac-mirror/commit/9dc702211964cd029cb26bc78db645be22ac4416)|`Merge branch 't/29706/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files' into t/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_`|
|[f78b06d](https://github.com/sagemath/sagetrac-mirror/commit/f78b06db0842b68a30310ad5471845478eb10e10)|`src/module_list.py: Move options for Extensions in sage.libs to distutils directives`|
|[1b0e29d](https://github.com/sagemath/sagetrac-mirror/commit/1b0e29d6a6001a0d1e5a56161e0df3d80da3118a)|`src/module_list.py: Move options for Extensions in sage.matrix to distutils directives`|
|[6421e2c](https://github.com/sagemath/sagetrac-mirror/commit/6421e2c85409fef5a539299d96145e3a088826bf)|`src/module_list.py: Move remaining options for Extensions in sage.libs, sage.rings to distutils directives`|
|[b3d3d2f](https://github.com/sagemath/sagetrac-mirror/commit/b3d3d2f3baa0e1700c51b7df58a5af1aeba5acc4)|`Merge branch 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29705/META-modularize-sagelib`|
|[2821934](https://github.com/sagemath/sagetrac-mirror/commit/28219340dd0eb3d939dcd0c7e9fbc89133490a0c)|`Fix sage_setup directives: Use distribution, not package`|
|[9052db4](https://github.com/sagemath/sagetrac-mirror/commit/9052db45107872fd3683097061ee0b4edeefdaf4)|`Merge branch 't/29720/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_2___optionalextensions_' into t/29705/META-modularize-sagelib`|
|[ff710ee](https://github.com/sagemath/sagetrac-mirror/commit/ff710ee3e994c26f0a7619438f94b218f0bcb406)|`src/sage_setup/optional_extension.py (is_package_installed_and_updated): Factor out from OptionalExtension`|
|[891d12a](https://github.com/sagemath/sagetrac-mirror/commit/891d12aeacd439cd72e31d42399826f48dae624f)|`src/setup.py: Remove use of module_list.py; filter by distributions`|



---

archive/issue_comments_582385.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n-Using the extended `find_python_sources` from #28925, \n-we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n+We add two new features to `find_python_sources`: finding Cython extensions, and filtering by \"distributions\".\n+ \n+We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n \n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n``````\n",
    "created_at": "2020-06-03T22:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582385",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
-Using the extended `find_python_sources` from #28925, 
-we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
+We add two new features to `find_python_sources`: finding Cython extensions, and filtering by "distributions".
+ 
+We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
 
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
``````




---

archive/issue_comments_582386.json:
```json
{
    "body": "Changing dependencies from \"#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925\" to \"#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791\"",
    "created_at": "2020-06-03T22:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582386",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925" to "#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791"



---

archive/issue_comments_582387.json:
```json
{
    "body": "Changing dependencies from \"#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791\" to \"#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791\"",
    "created_at": "2020-06-03T22:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582387",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791" to "#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791"



---

archive/issue_comments_582388.json:
```json
{
    "body": "Changing commit from \"891d12aeacd439cd72e31d42399826f48dae624f\" to \"ec7e9c599aebbec9b8a9227399cf6b8793dccd72\"",
    "created_at": "2020-06-03T22:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "891d12aeacd439cd72e31d42399826f48dae624f" to "ec7e9c599aebbec9b8a9227399cf6b8793dccd72"



---

archive/issue_comments_582389.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|\n|[0295c8f](https://github.com/sagemath/sagetrac-mirror/commit/0295c8f09cb6e01f60694084cfe758152041b68b)|`src/module_list.py: Move options for Extensions in sage.graphs.graph_decompositions to distutils directives`|\n|[b582789](https://github.com/sagemath/sagetrac-mirror/commit/b582789cc861ab8231236e33de8c1e400b1b864a)|`src/sage_setup/find.py: Filter by directive 'sage_setup: distribution = PKG', find Cython modules`|\n|[63c64d5](https://github.com/sagemath/sagetrac-mirror/commit/63c64d515784312451586e9930393a2d575b5d0e)|`Merge branches 't/29720/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_2___optionalextensions_', 't/29721/spkg_configure_m4_for_coxeter3', 't/29785/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_3__get_rid_of_uname_specific_', 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_', 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' and 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29701/replace_use_of_module_list_optionalextension`|\n|[ae70c81](https://github.com/sagemath/sagetrac-mirror/commit/ae70c81c7a3a8c2713330cb407bbc08dac27bb5e)|`src/sage_setup/optional_extension.py (is_package_installed_and_updated): Factor out from OptionalExtension`|\n|[ec7e9c5](https://github.com/sagemath/sagetrac-mirror/commit/ec7e9c599aebbec9b8a9227399cf6b8793dccd72)|`src/setup.py: Remove use of module_list.py; filter by distributions`|",
    "created_at": "2020-06-03T22:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582389",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|
|[0295c8f](https://github.com/sagemath/sagetrac-mirror/commit/0295c8f09cb6e01f60694084cfe758152041b68b)|`src/module_list.py: Move options for Extensions in sage.graphs.graph_decompositions to distutils directives`|
|[b582789](https://github.com/sagemath/sagetrac-mirror/commit/b582789cc861ab8231236e33de8c1e400b1b864a)|`src/sage_setup/find.py: Filter by directive 'sage_setup: distribution = PKG', find Cython modules`|
|[63c64d5](https://github.com/sagemath/sagetrac-mirror/commit/63c64d515784312451586e9930393a2d575b5d0e)|`Merge branches 't/29720/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_2___optionalextensions_', 't/29721/spkg_configure_m4_for_coxeter3', 't/29785/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_3__get_rid_of_uname_specific_', 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_', 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' and 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29701/replace_use_of_module_list_optionalextension`|
|[ae70c81](https://github.com/sagemath/sagetrac-mirror/commit/ae70c81c7a3a8c2713330cb407bbc08dac27bb5e)|`src/sage_setup/optional_extension.py (is_package_installed_and_updated): Factor out from OptionalExtension`|
|[ec7e9c5](https://github.com/sagemath/sagetrac-mirror/commit/ec7e9c599aebbec9b8a9227399cf6b8793dccd72)|`src/setup.py: Remove use of module_list.py; filter by distributions`|



---

archive/issue_comments_582390.json:
```json
{
    "body": "<a id='comment:15'></a>\nNo longer on top of #28925, so no namespace package are involved any more for this ticket.",
    "created_at": "2020-06-03T22:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582390",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
No longer on top of #28925, so no namespace package are involved any more for this ticket.



---

archive/issue_comments_582391.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,9 @@\n \n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n-(In a follow-up ticket, part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages.)\n+Follow-up tickets:\n+- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages\n+- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)\n \n+\n+\n``````\n",
    "created_at": "2020-06-03T22:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582391",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,9 @@
 
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
-(In a follow-up ticket, part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages.)
+Follow-up tickets:
+- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages
+- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)
 
+
+
``````




---

archive/issue_comments_582392.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-06-03T22:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582392",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_582393.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-03T22:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582393",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_582394.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n We add two new features to `find_python_sources`: finding Cython extensions, and filtering by \"distributions\".\n- \n+\n We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n \n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n``````\n",
    "created_at": "2020-06-03T22:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582394",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 We add two new features to `find_python_sources`: finding Cython extensions, and filtering by "distributions".
- 
+
 We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
 
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
``````




---

archive/issue_comments_582395.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n Follow-up tickets:\n-- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages\n+- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages that provide namespace packages (#28925)\n - remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)\n \n \n``````\n",
    "created_at": "2020-06-03T23:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582395",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
 Follow-up tickets:
-- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages
+- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages that provide namespace packages (#28925)
 - remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)
 
 
``````




---

archive/issue_comments_582396.json:
```json
{
    "body": "Changing commit from \"ec7e9c599aebbec9b8a9227399cf6b8793dccd72\" to \"25a234059991c56df9b046700980cb1d194a32e5\"",
    "created_at": "2020-06-04T00:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ec7e9c599aebbec9b8a9227399cf6b8793dccd72" to "25a234059991c56df9b046700980cb1d194a32e5"



---

archive/issue_comments_582397.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|\n|[38b6bcf](https://github.com/sagemath/sagetrac-mirror/commit/38b6bcfa65c52d0cc07d1eaf66ece3e6d586dc05)|`Merge tag '9.2.beta0' into t/29411/make_sagelib_a_script_package`|\n|[f9a30f6](https://github.com/sagemath/sagetrac-mirror/commit/f9a30f60f7bcd47b5e3c781f0ad625e315765cea)|`build/pkgs/sagelib/spkg-install: Fix up error exits`|\n|[00a1d57](https://github.com/sagemath/sagetrac-mirror/commit/00a1d57d06a8b3e4bbf67876900e8c6d24a33cc2)|`Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|\n|[25a2340](https://github.com/sagemath/sagetrac-mirror/commit/25a234059991c56df9b046700980cb1d194a32e5)|`Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension`|",
    "created_at": "2020-06-04T00:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
|[38b6bcf](https://github.com/sagemath/sagetrac-mirror/commit/38b6bcfa65c52d0cc07d1eaf66ece3e6d586dc05)|`Merge tag '9.2.beta0' into t/29411/make_sagelib_a_script_package`|
|[f9a30f6](https://github.com/sagemath/sagetrac-mirror/commit/f9a30f60f7bcd47b5e3c781f0ad625e315765cea)|`build/pkgs/sagelib/spkg-install: Fix up error exits`|
|[00a1d57](https://github.com/sagemath/sagetrac-mirror/commit/00a1d57d06a8b3e4bbf67876900e8c6d24a33cc2)|`Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|
|[25a2340](https://github.com/sagemath/sagetrac-mirror/commit/25a234059991c56df9b046700980cb1d194a32e5)|`Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension`|



---

archive/issue_comments_582398.json:
```json
{
    "body": "Changing commit from \"25a234059991c56df9b046700980cb1d194a32e5\" to \"2d866a3bab2a1d55bc85fcae4f30d384498bcc12\"",
    "created_at": "2020-06-04T02:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "25a234059991c56df9b046700980cb1d194a32e5" to "2d866a3bab2a1d55bc85fcae4f30d384498bcc12"



---

archive/issue_comments_582399.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[2d866a3](https://github.com/sagemath/sagetrac-mirror/commit/2d866a3bab2a1d55bc85fcae4f30d384498bcc12)|`src/sage/graphs/graph_decompositions/tdlib.pyx: Fixup`|",
    "created_at": "2020-06-04T02:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[2d866a3](https://github.com/sagemath/sagetrac-mirror/commit/2d866a3bab2a1d55bc85fcae4f30d384498bcc12)|`src/sage/graphs/graph_decompositions/tdlib.pyx: Fixup`|



---

archive/issue_comments_582400.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|\n|[b1b3787](https://github.com/sagemath/sagetrac-mirror/commit/b1b378712d10cb15555889e8235d089f3cf0e391)|`sage.env.cython_aliases: Fix for systems without zlib pc`|\n|[802356a](https://github.com/sagemath/sagetrac-mirror/commit/802356ae870f2e798a223df2f3fc5512b4aeb693)|`Merge branch 't/29706/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files' into t/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_`|\n|[3beb5b7](https://github.com/sagemath/sagetrac-mirror/commit/3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319)|`Merge branch 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29701/replace_use_of_module_list_optionalextension`|",
    "created_at": "2020-06-07T18:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582400",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
|[b1b3787](https://github.com/sagemath/sagetrac-mirror/commit/b1b378712d10cb15555889e8235d089f3cf0e391)|`sage.env.cython_aliases: Fix for systems without zlib pc`|
|[802356a](https://github.com/sagemath/sagetrac-mirror/commit/802356ae870f2e798a223df2f3fc5512b4aeb693)|`Merge branch 't/29706/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files' into t/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_`|
|[3beb5b7](https://github.com/sagemath/sagetrac-mirror/commit/3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319)|`Merge branch 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29701/replace_use_of_module_list_optionalextension`|



---

archive/issue_comments_582401.json:
```json
{
    "body": "Changing commit from \"2d866a3bab2a1d55bc85fcae4f30d384498bcc12\" to \"3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319\"",
    "created_at": "2020-06-07T18:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582401",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2d866a3bab2a1d55bc85fcae4f30d384498bcc12" to "3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319"



---

archive/issue_comments_582402.json:
```json
{
    "body": "Changing commit from \"3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319\" to \"7f8850adc52d8798852646b550f4f9c88b30b468\"",
    "created_at": "2020-06-07T18:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582402",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319" to "7f8850adc52d8798852646b550f4f9c88b30b468"



---

archive/issue_comments_582403.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[7f8850a](https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468)|`src/module_list.py: Document that it is obsolete`|",
    "created_at": "2020-06-07T18:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582403",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[7f8850a](https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468)|`src/module_list.py: Document that it is obsolete`|



---

archive/issue_comments_582404.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[5db5318](https://github.com/sagemath/sagetrac-mirror/commit/5db53186b9ae9a546bc78fc9107cc1af713b7e24)|`Trac #29345: remove \"break\" statements from AC_SEARCH_LIBS.`|\n|[e810ad1](https://github.com/sagemath/sagetrac-mirror/commit/e810ad1596d527c832bf43d3aac745407c9ba98d)|`Trac #29345: don't use sage's config.status for the lrcalc build.`|\n|[93c9921](https://github.com/sagemath/sagetrac-mirror/commit/93c9921cc5ff461cd1f02f441b46cea4400dcd85)|`Trac #29345: replace the function that populates the CVXOPT_* variables.`|\n|[0e66a0a](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)|`Trac #29345: add Dima's SPKG patches for ksh compatibility.`|\n|[df3f05e](https://github.com/sagemath/sagetrac-mirror/commit/df3f05e03ba671dd6be502ccae96d2a6162d29d4)|`build/make/Makefile.in [SCRIPT_PACKAGE_templ]: cd into the SPKG directory; adjust spkg-install scripts`|\n|[5372065](https://github.com/sagemath/sagetrac-mirror/commit/5372065710668ae1b36d059c2cbf9b6f325239c7)|`Merge branch 't/29793/script_packages_should_cd_into_the_spkg_directory' into t/29411/make_sagelib_a_script_package`|\n|[c166b97](https://github.com/sagemath/sagetrac-mirror/commit/c166b976775cdcd61e2b5c52a6585426f47646db)|`Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|\n|[cc30471](https://github.com/sagemath/sagetrac-mirror/commit/cc304711ef42f25733f1ca861801d87f58fa1118)|`build/bin/write-dockerfile.sh: Do not ADD removed file src/Makefile.in`|\n|[8a41326](https://github.com/sagemath/sagetrac-mirror/commit/8a41326ac22243bbf7f0fe57d3e8e5bc5246b436)|`Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|\n|[26a85a4](https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926)|`Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension`|",
    "created_at": "2020-06-07T20:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[5db5318](https://github.com/sagemath/sagetrac-mirror/commit/5db53186b9ae9a546bc78fc9107cc1af713b7e24)|`Trac #29345: remove "break" statements from AC_SEARCH_LIBS.`|
|[e810ad1](https://github.com/sagemath/sagetrac-mirror/commit/e810ad1596d527c832bf43d3aac745407c9ba98d)|`Trac #29345: don't use sage's config.status for the lrcalc build.`|
|[93c9921](https://github.com/sagemath/sagetrac-mirror/commit/93c9921cc5ff461cd1f02f441b46cea4400dcd85)|`Trac #29345: replace the function that populates the CVXOPT_* variables.`|
|[0e66a0a](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)|`Trac #29345: add Dima's SPKG patches for ksh compatibility.`|
|[df3f05e](https://github.com/sagemath/sagetrac-mirror/commit/df3f05e03ba671dd6be502ccae96d2a6162d29d4)|`build/make/Makefile.in [SCRIPT_PACKAGE_templ]: cd into the SPKG directory; adjust spkg-install scripts`|
|[5372065](https://github.com/sagemath/sagetrac-mirror/commit/5372065710668ae1b36d059c2cbf9b6f325239c7)|`Merge branch 't/29793/script_packages_should_cd_into_the_spkg_directory' into t/29411/make_sagelib_a_script_package`|
|[c166b97](https://github.com/sagemath/sagetrac-mirror/commit/c166b976775cdcd61e2b5c52a6585426f47646db)|`Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|
|[cc30471](https://github.com/sagemath/sagetrac-mirror/commit/cc304711ef42f25733f1ca861801d87f58fa1118)|`build/bin/write-dockerfile.sh: Do not ADD removed file src/Makefile.in`|
|[8a41326](https://github.com/sagemath/sagetrac-mirror/commit/8a41326ac22243bbf7f0fe57d3e8e5bc5246b436)|`Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|
|[26a85a4](https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926)|`Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension`|



---

archive/issue_comments_582405.json:
```json
{
    "body": "Changing commit from \"7f8850adc52d8798852646b550f4f9c88b30b468\" to \"26a85a4303d4774427d173cae932ad48b5ac5926\"",
    "created_at": "2020-06-07T20:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7f8850adc52d8798852646b550f4f9c88b30b468" to "26a85a4303d4774427d173cae932ad48b5ac5926"



---

archive/issue_comments_582406.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|\n|[5d5803e](https://github.com/sagemath/sagetrac-mirror/commit/5d5803ef5920f894bcac69ed1268e1e03ea9dd5e)|`src/sage/graphs/planarity.pyx: Add forgotten distutils directive`|\n|[a0be9b6](https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7)|`Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29701/replace_use_of_module_list_optionalextension`|",
    "created_at": "2020-06-08T02:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582406",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
|[5d5803e](https://github.com/sagemath/sagetrac-mirror/commit/5d5803ef5920f894bcac69ed1268e1e03ea9dd5e)|`src/sage/graphs/planarity.pyx: Add forgotten distutils directive`|
|[a0be9b6](https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7)|`Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29701/replace_use_of_module_list_optionalextension`|



---

archive/issue_comments_582407.json:
```json
{
    "body": "Changing commit from \"26a85a4303d4774427d173cae932ad48b5ac5926\" to \"a0be9b64ce3623fe4470d7b2483d21f343225ca7\"",
    "created_at": "2020-06-08T02:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582407",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "26a85a4303d4774427d173cae932ad48b5ac5926" to "a0be9b64ce3623fe4470d7b2483d21f343225ca7"



---

archive/issue_comments_582408.json:
```json
{
    "body": "<a id='comment:25'></a>\nTests run at https://github.com/mkoeppe/sage/actions/runs/128112212",
    "created_at": "2020-06-08T02:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582408",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Tests run at https://github.com/mkoeppe/sage/actions/runs/128112212



---

archive/issue_comments_582409.json:
```json
{
    "body": "Changing commit from \"a0be9b64ce3623fe4470d7b2483d21f343225ca7\" to \"14396af45af31c8f3a48d934d0e1ad424712ba4c\"",
    "created_at": "2020-06-26T16:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a0be9b64ce3623fe4470d7b2483d21f343225ca7" to "14396af45af31c8f3a48d934d0e1ad424712ba4c"



---

archive/issue_comments_582410.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|\n|[14396af](https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c)|`Merge tag '9.2.beta2' into t/29701/replace_use_of_module_list_optionalextension`|",
    "created_at": "2020-06-26T16:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582410",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
|[14396af](https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c)|`Merge tag '9.2.beta2' into t/29701/replace_use_of_module_list_optionalextension`|



---

archive/issue_comments_582411.json:
```json
{
    "body": "Changing dependencies from \"#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791\" to \"#29702 (#29411), #29786, #29790, #29791\"",
    "created_at": "2020-06-26T16:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582411",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791" to "#29702 (#29411), #29786, #29790, #29791"



---

archive/issue_comments_582412.json:
```json
{
    "body": "<a id='comment:27'></a>\nMerged in latest beta. Needs review",
    "created_at": "2020-06-26T16:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582412",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Merged in latest beta. Needs review



---

archive/issue_comments_582413.json:
```json
{
    "body": "Changing commit from \"14396af45af31c8f3a48d934d0e1ad424712ba4c\" to \"d62da1559ca1448b07962ea69fcde212cfea75f0\"",
    "created_at": "2020-06-28T22:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582413",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "14396af45af31c8f3a48d934d0e1ad424712ba4c" to "d62da1559ca1448b07962ea69fcde212cfea75f0"



---

archive/issue_comments_582414.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[d62da15](https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0)|`sage_setup.command.sage_build: Add the extensions to the distribution`|",
    "created_at": "2020-06-28T22:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582414",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[d62da15](https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0)|`sage_setup.command.sage_build: Add the extensions to the distribution`|



---

archive/issue_comments_582415.json:
```json
{
    "body": "<a id='comment:29'></a>\nI'm a bit confused:\n\n`find_python_sources` gives you all sources including all with optional packages if `distributions=None`.\n\nHowever, if distributions is `sage-tdlib`, you get only one source file.\n\nDon't we want `find_python_sources` to contain everything except for not installed optional packages?",
    "created_at": "2020-06-29T09:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582415",
    "user": "https://github.com/kliem"
}
```

<a id='comment:29'></a>
I'm a bit confused:

`find_python_sources` gives you all sources including all with optional packages if `distributions=None`.

However, if distributions is `sage-tdlib`, you get only one source file.

Don't we want `find_python_sources` to contain everything except for not installed optional packages?



---

archive/issue_comments_582416.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [gh-kliem](#comment%3A29):\n> `find_python_sources` gives you all sources including all with optional packages if `distributions=None`.\n> \n> However, if distributions is `sage-tdlib`, you get only one source file.\n\n\nThat's right. This is a feature for modularization as in #29864 (Modularization of sagelib: Break out a separate package sage-tdlib).\n\n> Don't we want `find_python_sources` to contain everything except for not installed optional packages?\n\n\nFor this, one passes `distributions=['', 'sage-tdlib']`. The empty string designates all source files without a `sage_setup: distribution` directive. This list of distributions is computed in `src/setup.py`.",
    "created_at": "2020-06-29T17:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582416",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Replying to [gh-kliem](#comment%3A29):
> `find_python_sources` gives you all sources including all with optional packages if `distributions=None`.
> 
> However, if distributions is `sage-tdlib`, you get only one source file.


That's right. This is a feature for modularization as in #29864 (Modularization of sagelib: Break out a separate package sage-tdlib).

> Don't we want `find_python_sources` to contain everything except for not installed optional packages?


For this, one passes `distributions=['', 'sage-tdlib']`. The empty string designates all source files without a `sage_setup: distribution` directive. This list of distributions is computed in `src/setup.py`.



---

archive/issue_comments_582417.json:
```json
{
    "body": "<a id='comment:31'></a>\nI see.\n\nI would suggest updating the benchmark. Also I can confirm this, it is not really meaningful, as this is not the normal use case, isn't it. The normal use case would be with `distributions=['']` and this takes about 500 ms and not 20 ms. Still no problem I think, but much longer.",
    "created_at": "2020-06-29T18:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582417",
    "user": "https://github.com/kliem"
}
```

<a id='comment:31'></a>
I see.

I would suggest updating the benchmark. Also I can confirm this, it is not really meaningful, as this is not the normal use case, isn't it. The normal use case would be with `distributions=['']` and this takes about 500 ms and not 20 ms. Still no problem I think, but much longer.



---

archive/issue_comments_582418.json:
```json
{
    "body": "<a id='comment:32'></a>\nOtherwise the source code looks fine. Do we have any test runs? Should I run them?",
    "created_at": "2020-06-29T18:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582418",
    "user": "https://github.com/kliem"
}
```

<a id='comment:32'></a>
Otherwise the source code looks fine. Do we have any test runs? Should I run them?



---

archive/issue_comments_582419.json:
```json
{
    "body": "<a id='comment:33'></a>\nI have tested the branch of this ticket on macOS and also as part of #29950 and other tickets.",
    "created_at": "2020-06-29T19:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582419",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
I have tested the branch of this ticket on macOS and also as part of #29950 and other tickets.



---

archive/issue_comments_582420.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [gh-kliem](#comment%3A31):\n> I would suggest updating the benchmark. \n\n\nGood idea, will do",
    "created_at": "2020-06-29T19:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582420",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
Replying to [gh-kliem](#comment%3A31):
> I would suggest updating the benchmark. 


Good idea, will do



---

archive/issue_comments_582421.json:
```json
{
    "body": "<a id='comment:35'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[06a3609](https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9)|`sage_setup.find.find_python_sources: Add benchmark doctest`|",
    "created_at": "2020-06-29T19:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[06a3609](https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9)|`sage_setup.find.find_python_sources: Add benchmark doctest`|



---

archive/issue_comments_582422.json:
```json
{
    "body": "Changing commit from \"d62da1559ca1448b07962ea69fcde212cfea75f0\" to \"06a360974cc56699a85f291494a493fed041dbc9\"",
    "created_at": "2020-06-29T19:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d62da1559ca1448b07962ea69fcde212cfea75f0" to "06a360974cc56699a85f291494a493fed041dbc9"



---

archive/issue_comments_582423.json:
```json
{
    "body": "<a id='comment:36'></a>\nAs I have capacities I started test for only this ticket:\n\nhttps://github.com/kliem/sage/pull/18/checks",
    "created_at": "2020-06-29T19:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582423",
    "user": "https://github.com/kliem"
}
```

<a id='comment:36'></a>
As I have capacities I started test for only this ticket:

https://github.com/kliem/sage/pull/18/checks



---

archive/issue_comments_582424.json:
```json
{
    "body": "<a id='comment:37'></a>\nThere is that annoying failure of sageinspect again\n\nubuntu-bionic, minimal (for example, but looks like it is anywhere)\n\n```\nFile \"src/sage/misc/sageinspect.py\", line 28, in sage.misc.sageinspect\nFailed example:\n    sage_getsource(sage.rings.rational)[5:]\nExpected:\n    'Rational Numbers...'\nGot:\n    'tutils: libraries = ntl\\nr\"\"\"\\nRational Numbers\\n\\nAUTHORS:\\n\\n- William Stein (2005): first version\\n\\n- William Stein (2006-02-22): floor and ceil (pure fast GMP versions).\\n\\n- Gonzalo Tornaria and William Stein (2006-03-02): greatly improved\\n  python/GMP conversion; hashing\\n\\n- William Stein and Naqi Jaffery (2006-03-06): height, sqrt examples,\\n  and improve behavior of sqrt.\\n\\n- David Harvey (2006-09-15): added nth_root\\n\\n- Pablo De Napoli (2007-04-01): corrected the implementations of\\n  multiplicative_order, is_one; optimized __nonzero__ ; documented:\\n  lcm,gcd\\n\\n- John Cremona (2009-05-15): added support for local and global\\n  logarithmic heights.\\n\\n- Travis Scrimshaw (2012-10-18): Added doctests for full coverage.\\n\\n- Vincent Delecroix (2013): continued fraction\\n\\n- Vincent Delecroix (2017-05-03): faster integer-rational comparison\\n\\n- Vincent Klein (2017-05-11): add __mpq__() to class Rational\\n\\n- Vincent Klein (2017-05-22): Rational constructor support gmpy2.mpq\\n  or gmpy2.mpz parameter. Add __mpz__ to class Rational.\\n\\nTESTS::\\n\\n    sage: a = -2/3\\n    sage: a == loads(dumps(a))\\n    True\\n\"\"\"\\n\\n# ****************************************************************************\\n#       Copyright (C) 2004, 2006 William Stein <wstein@gmail.com>\\n#       Copyright (C) 2017 Vincent Delecroix <20100.delecroix@gmail.com>\\n#\\n#  Distributed under the terms of the GNU General Public License (GPL)\\n#  as published by the Free Software Foundation; either version 2 of\\n#  the License, or (at your option) any later version.\\n#                  https://www.gnu.org/licenses/\\n# ****************************************************************************\\n\\ncimport cython\\nfrom cpython cimport *\\nfrom cpython.object cimport Py_EQ, Py_NE\\n\\nfrom cysignals.signals cimport sig_on, sig_off\\n\\nimport operator\\nimport fractions\\n\\nfrom sage.misc.mathml import mathml\\nfrom sage.arith.long cimport pyobject_to_long, integer_check_long_py\\nfrom sage.cpython.string cimport char_to_str, str_to_bytes\\n\\nimport sage.misc.misc as misc\\nfrom sage.structure.sage_object cimport SageObject\\nfrom sage.structure.richcmp cimport rich_to_bool_sgn\\nimport sage.rings.rational_field\\n\\ncimport sage.rings.integer as integer\\nfrom .integer cimport Integer\\n\\nfrom cypari2.paridecl cimport *\\nfrom cypari2.gen cimport Gen as pari_gen\\nfrom sage.libs.pari.convert_gmp cimport INT_to_mpz, INTFRAC_to_mpq, new_gen_from_mpq_t\\n\\nfrom .integer_ring import ZZ\\nfrom sage.arith.rational_reconstruction cimport mpq_rational_reconstruction\\n\\nfrom sage.structure.coerce cimport is_numpy_type\\n\\nfrom sage.libs.gmp.pylong cimport mpz_set_pylong\\n\\nfrom sage.structure.coerce cimport coercion_model\\nfrom sage.structure.element cimport Element\\nfrom sage.structure.element import coerce_binop\\nfrom sage.structure.parent cimport Parent\\nfrom sage.categories.morphism cimport Morphism\\nfrom sage.categories.map cimport Map\\n\\n\\n\\nimport sage.rings.real_mpfr\\nimport sage.rings.real_double\\nfrom libc.stdint cimport uint64_t\\nfrom sage.libs.gmp.binop cimport mpq_add_z, mpq_mul_z, mpq_div_zz\\n\\nfrom cpython.int cimport PyInt_AS_LONG\\n\\ncimport sage.rings.fast_arith\\nimport  sage.rings.fast_arith\\n\\ncdef sage.rings.fast_arith.arith_int ai\\nai = sage.rings.fast_arith.arith_int()\\n\\ncdef object numpy_long_interface = {\\'typestr\\': \\'=i4\\' if sizeof(long) == 4 else \\'=i8\\' }\\ncdef object numpy_int64_interface = {\\'typestr\\': \\'=i8\\'}\\ncdef object numpy_object_interface = {\\'typestr\\': \\'|O\\'}\\ncdef object numpy_double_interface = {\\'typestr\\': \\'=f8\\'}\\n\\nfrom libc.math cimport ldexp\\nfrom sage.libs.gmp.all cimport *\\n\\ncimport gmpy2\\ngmpy2.import_gmpy2()\\n\\n\\ncdef class Rational(sage.structure.element.FieldElement)\\n'\n```",
    "created_at": "2020-07-01T15:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582424",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>
There is that annoying failure of sageinspect again

ubuntu-bionic, minimal (for example, but looks like it is anywhere)

```
File "src/sage/misc/sageinspect.py", line 28, in sage.misc.sageinspect
Failed example:
    sage_getsource(sage.rings.rational)[5:]
Expected:
    'Rational Numbers...'
Got:
    'tutils: libraries = ntl\nr"""\nRational Numbers\n\nAUTHORS:\n\n- William Stein (2005): first version\n\n- William Stein (2006-02-22): floor and ceil (pure fast GMP versions).\n\n- Gonzalo Tornaria and William Stein (2006-03-02): greatly improved\n  python/GMP conversion; hashing\n\n- William Stein and Naqi Jaffery (2006-03-06): height, sqrt examples,\n  and improve behavior of sqrt.\n\n- David Harvey (2006-09-15): added nth_root\n\n- Pablo De Napoli (2007-04-01): corrected the implementations of\n  multiplicative_order, is_one; optimized __nonzero__ ; documented:\n  lcm,gcd\n\n- John Cremona (2009-05-15): added support for local and global\n  logarithmic heights.\n\n- Travis Scrimshaw (2012-10-18): Added doctests for full coverage.\n\n- Vincent Delecroix (2013): continued fraction\n\n- Vincent Delecroix (2017-05-03): faster integer-rational comparison\n\n- Vincent Klein (2017-05-11): add __mpq__() to class Rational\n\n- Vincent Klein (2017-05-22): Rational constructor support gmpy2.mpq\n  or gmpy2.mpz parameter. Add __mpz__ to class Rational.\n\nTESTS::\n\n    sage: a = -2/3\n    sage: a == loads(dumps(a))\n    True\n"""\n\n# ****************************************************************************\n#       Copyright (C) 2004, 2006 William Stein <wstein@gmail.com>\n#       Copyright (C) 2017 Vincent Delecroix <20100.delecroix@gmail.com>\n#\n#  Distributed under the terms of the GNU General Public License (GPL)\n#  as published by the Free Software Foundation; either version 2 of\n#  the License, or (at your option) any later version.\n#                  https://www.gnu.org/licenses/\n# ****************************************************************************\n\ncimport cython\nfrom cpython cimport *\nfrom cpython.object cimport Py_EQ, Py_NE\n\nfrom cysignals.signals cimport sig_on, sig_off\n\nimport operator\nimport fractions\n\nfrom sage.misc.mathml import mathml\nfrom sage.arith.long cimport pyobject_to_long, integer_check_long_py\nfrom sage.cpython.string cimport char_to_str, str_to_bytes\n\nimport sage.misc.misc as misc\nfrom sage.structure.sage_object cimport SageObject\nfrom sage.structure.richcmp cimport rich_to_bool_sgn\nimport sage.rings.rational_field\n\ncimport sage.rings.integer as integer\nfrom .integer cimport Integer\n\nfrom cypari2.paridecl cimport *\nfrom cypari2.gen cimport Gen as pari_gen\nfrom sage.libs.pari.convert_gmp cimport INT_to_mpz, INTFRAC_to_mpq, new_gen_from_mpq_t\n\nfrom .integer_ring import ZZ\nfrom sage.arith.rational_reconstruction cimport mpq_rational_reconstruction\n\nfrom sage.structure.coerce cimport is_numpy_type\n\nfrom sage.libs.gmp.pylong cimport mpz_set_pylong\n\nfrom sage.structure.coerce cimport coercion_model\nfrom sage.structure.element cimport Element\nfrom sage.structure.element import coerce_binop\nfrom sage.structure.parent cimport Parent\nfrom sage.categories.morphism cimport Morphism\nfrom sage.categories.map cimport Map\n\n\n\nimport sage.rings.real_mpfr\nimport sage.rings.real_double\nfrom libc.stdint cimport uint64_t\nfrom sage.libs.gmp.binop cimport mpq_add_z, mpq_mul_z, mpq_div_zz\n\nfrom cpython.int cimport PyInt_AS_LONG\n\ncimport sage.rings.fast_arith\nimport  sage.rings.fast_arith\n\ncdef sage.rings.fast_arith.arith_int ai\nai = sage.rings.fast_arith.arith_int()\n\ncdef object numpy_long_interface = {\'typestr\': \'=i4\' if sizeof(long) == 4 else \'=i8\' }\ncdef object numpy_int64_interface = {\'typestr\': \'=i8\'}\ncdef object numpy_object_interface = {\'typestr\': \'|O\'}\ncdef object numpy_double_interface = {\'typestr\': \'=f8\'}\n\nfrom libc.math cimport ldexp\nfrom sage.libs.gmp.all cimport *\n\ncimport gmpy2\ngmpy2.import_gmpy2()\n\n\ncdef class Rational(sage.structure.element.FieldElement)\n'
```



---

archive/issue_comments_582425.json:
```json
{
    "body": "<a id='comment:38'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|\n|[43a9b16](https://github.com/sagemath/sagetrac-mirror/commit/43a9b169f4030b9a036f3c0e3f94214dbc4f6ab7)|`src/sage/misc/sageinspect.py: Fix up doctest that depends on a modified source file`|\n|[a5bc828](https://github.com/sagemath/sagetrac-mirror/commit/a5bc828338393e248e1d9e9e9719f9ba22aa7b4e)|`src/sage/misc/sageinspect.py: Fixup fixup`|\n|[1baaa68](https://github.com/sagemath/sagetrac-mirror/commit/1baaa68a0fde79d25081c463fed8657c44a43762)|`src/sage/misc/sageinspect.py: Remove unused import`|\n|[174626c](https://github.com/sagemath/sagetrac-mirror/commit/174626c7f81e7b9417bbad49fd110144a07165a6)|`Merge branch 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_' into t/29701/replace_use_of_module_list_optionalextension`|\n|[a56dc35](https://github.com/sagemath/sagetrac-mirror/commit/a56dc35031486df9378f17c2d2ae6405946fac25)|`Merge tag '9.2.beta1' into t/29702/public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|\n|[034a7f7](https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825)|`Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/29701/replace_use_of_module_list_optionalextension`|",
    "created_at": "2020-07-02T03:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582425",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|
|[43a9b16](https://github.com/sagemath/sagetrac-mirror/commit/43a9b169f4030b9a036f3c0e3f94214dbc4f6ab7)|`src/sage/misc/sageinspect.py: Fix up doctest that depends on a modified source file`|
|[a5bc828](https://github.com/sagemath/sagetrac-mirror/commit/a5bc828338393e248e1d9e9e9719f9ba22aa7b4e)|`src/sage/misc/sageinspect.py: Fixup fixup`|
|[1baaa68](https://github.com/sagemath/sagetrac-mirror/commit/1baaa68a0fde79d25081c463fed8657c44a43762)|`src/sage/misc/sageinspect.py: Remove unused import`|
|[174626c](https://github.com/sagemath/sagetrac-mirror/commit/174626c7f81e7b9417bbad49fd110144a07165a6)|`Merge branch 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_' into t/29701/replace_use_of_module_list_optionalextension`|
|[a56dc35](https://github.com/sagemath/sagetrac-mirror/commit/a56dc35031486df9378f17c2d2ae6405946fac25)|`Merge tag '9.2.beta1' into t/29702/public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|
|[034a7f7](https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825)|`Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/29701/replace_use_of_module_list_optionalextension`|



---

archive/issue_comments_582426.json:
```json
{
    "body": "Changing commit from \"06a360974cc56699a85f291494a493fed041dbc9\" to \"034a7f71a52fffc9a6566bda3e63abccdb5d6825\"",
    "created_at": "2020-07-02T03:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582426",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "06a360974cc56699a85f291494a493fed041dbc9" to "034a7f71a52fffc9a6566bda3e63abccdb5d6825"



---

archive/issue_comments_582427.json:
```json
{
    "body": "<a id='comment:39'></a>\nThanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.",
    "created_at": "2020-07-02T04:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582427",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.



---

archive/issue_comments_582428.json:
```json
{
    "body": "<a id='comment:40'></a>\nI was wondering, where this error came from now. Good to know that it is entirely harmless.\n\nReplying to [mkoeppe](#comment%3A39):\n> Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.",
    "created_at": "2020-07-02T05:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582428",
    "user": "https://github.com/kliem"
}
```

<a id='comment:40'></a>
I was wondering, where this error came from now. Good to know that it is entirely harmless.

Replying to [mkoeppe](#comment%3A39):
> Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.



---

archive/issue_comments_582429.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-02T05:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582429",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_582430.json:
```json
{
    "body": "<a id='comment:41'></a>\nLGTM.",
    "created_at": "2020-07-02T05:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582430",
    "user": "https://github.com/kliem"
}
```

<a id='comment:41'></a>
LGTM.



---

archive/issue_comments_582431.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jonathan Kliem\"",
    "created_at": "2020-07-02T05:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582431",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "" to "Jonathan Kliem"



---

archive/issue_comments_582432.json:
```json
{
    "body": "<a id='comment:43'></a>\nThank you!",
    "created_at": "2020-07-02T19:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582432",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>
Thank you!



---

archive/issue_comments_582433.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|\n|[d3c608b](https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8)|`Merge tag '9.2.beta3' into t/29701/replace_use_of_module_list_optionalextension`|",
    "created_at": "2020-07-04T16:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
|[d3c608b](https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8)|`Merge tag '9.2.beta3' into t/29701/replace_use_of_module_list_optionalextension`|



---

archive/issue_comments_582434.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-07-04T16:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_582435.json:
```json
{
    "body": "Changing commit from \"034a7f71a52fffc9a6566bda3e63abccdb5d6825\" to \"d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8\"",
    "created_at": "2020-07-04T16:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "034a7f71a52fffc9a6566bda3e63abccdb5d6825" to "d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8"



---

archive/issue_comments_582436.json:
```json
{
    "body": "<a id='comment:45'></a>\nMerged 9.2.beta3",
    "created_at": "2020-07-04T16:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582436",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>
Merged 9.2.beta3



---

archive/issue_comments_582437.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-04T16:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582437",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_582438.json:
```json
{
    "body": "<a id='comment:47'></a>\nVolker, is there something missing on this ticket that keeps it from being merged?",
    "created_at": "2020-07-26T22:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582438",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
Volker, is there something missing on this ticket that keeps it from being merged?



---

archive/issue_comments_582439.json:
```json
{
    "body": "Changing dependencies from \"#29702 (#29411), #29786, #29790, #29791\" to \"#29702, #29786, #29790, #29791\"",
    "created_at": "2020-08-02T18:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582439",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "#29702 (#29411), #29786, #29790, #29791" to "#29702, #29786, #29790, #29791"



---

archive/issue_comments_582440.json:
```json
{
    "body": "<a id='comment:49'></a>\n#29411 isn't merged (the release script can only check whether a ticket has been merged if you think about it; Do not depend on invalid/duplicate/meta-tickets, or anything else that doesn't actually contribute commits). Also `(#29411)` isn't supported as dependency, whatever the parens are supposed to mean.",
    "created_at": "2020-08-02T18:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582440",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:49'></a>
#29411 isn't merged (the release script can only check whether a ticket has been merged if you think about it; Do not depend on invalid/duplicate/meta-tickets, or anything else that doesn't actually contribute commits). Also `(#29411)` isn't supported as dependency, whatever the parens are supposed to mean.



---

archive/issue_comments_582441.json:
```json
{
    "body": "<a id='comment:50'></a>\n#29411 is a real ticket with 9.2 as milestone, marked as closed, with a branch which looks like a merged branch. Is it the same kind of issue as with #21226 ?",
    "created_at": "2020-08-02T18:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582441",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'></a>
#29411 is a real ticket with 9.2 as milestone, marked as closed, with a branch which looks like a merged branch. Is it the same kind of issue as with #21226 ?



---

archive/issue_comments_582442.json:
```json
{
    "body": "<a id='comment:51'></a>\nThanks for cleaning up the dependency list. \n\nUnfortunately the format does not seem to be documented anywhere.\n\n(#29411 is a regular merged ticket. You merged it in 0bcd001f760ff724832c32b4f65fa575fd82e000)",
    "created_at": "2020-08-02T18:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582442",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>
Thanks for cleaning up the dependency list. 

Unfortunately the format does not seem to be documented anywhere.

(#29411 is a regular merged ticket. You merged it in 0bcd001f760ff724832c32b4f65fa575fd82e000)



---

archive/issue_comments_582443.json:
```json
{
    "body": "<a id='comment:52'></a>\nYes, in this case it was the parens.",
    "created_at": "2020-08-02T22:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582443",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:52'></a>
Yes, in this case it was the parens.



---

archive/issue_comments_582444.json:
```json
{
    "body": "<a id='comment:53'></a>\n\n```\nsage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 83, in sage_setup.clean._find_stale_files\nFailed example:\n    python_packages, python_modules = find_python_sources(\n        SAGE_SRC, ['sage', 'sage_setup'])\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[3]>\", line 2, in <module>\n        SAGE_SRC, ['sage', 'sage_setup'])\n    ValueError: too many values to unpack (expected 2)\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 92, in sage_setup.clean._find_stale_files\nFailed example:\n    stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[6]>\", line 1, in <module>\n        stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)\n    NameError: name 'python_packages' is not defined\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 95, in sage_setup.clean._find_stale_files\nFailed example:\n    for f in stale_iter:\n        if f.endswith(skip_extensions): continue\n        if '/ext_data/' in f: continue\n        print('Found stale file: ' + f)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[9]>\", line 1, in <module>\n        for f in stale_iter:\n    NameError: name 'stale_iter' is not defined\n**********************************************************************\n1 item had failures:\n   3 of  11 in sage_setup.clean._find_stale_files\n    [17 tests, 3 failures, 0.03 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py  # 3 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-02T22:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582444",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:53'></a>

```
sage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py
**********************************************************************
File "src/sage_setup/clean.py", line 83, in sage_setup.clean._find_stale_files
Failed example:
    python_packages, python_modules = find_python_sources(
        SAGE_SRC, ['sage', 'sage_setup'])
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[3]>", line 2, in <module>
        SAGE_SRC, ['sage', 'sage_setup'])
    ValueError: too many values to unpack (expected 2)
**********************************************************************
File "src/sage_setup/clean.py", line 92, in sage_setup.clean._find_stale_files
Failed example:
    stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[6]>", line 1, in <module>
        stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)
    NameError: name 'python_packages' is not defined
**********************************************************************
File "src/sage_setup/clean.py", line 95, in sage_setup.clean._find_stale_files
Failed example:
    for f in stale_iter:
        if f.endswith(skip_extensions): continue
        if '/ext_data/' in f: continue
        print('Found stale file: ' + f)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[9]>", line 1, in <module>
        for f in stale_iter:
    NameError: name 'stale_iter' is not defined
**********************************************************************
1 item had failures:
   3 of  11 in sage_setup.clean._find_stale_files
    [17 tests, 3 failures, 0.03 s]
----------------------------------------------------------------------
sage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py  # 3 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_582445.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-02T22:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582445",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_582446.json:
```json
{
    "body": "Changing commit from \"d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8\" to \"55c3fbc565fd7884f3df9555de83dd326ace276e\"",
    "created_at": "2020-08-03T00:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8" to "55c3fbc565fd7884f3df9555de83dd326ace276e"



---

archive/issue_comments_582447.json:
```json
{
    "body": "<a id='comment:54'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|\n|[fcad518](https://github.com/sagemath/sagetrac-mirror/commit/fcad5184daba6a9d1d347950b3908fc98ec856ce)|`Merge tag '9.2.beta7' into t/29701/replace_use_of_module_list_optionalextension`|\n|[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)|`src/sage_setup/clean.py: Fix doctest`|",
    "created_at": "2020-08-03T00:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
|[fcad518](https://github.com/sagemath/sagetrac-mirror/commit/fcad5184daba6a9d1d347950b3908fc98ec856ce)|`Merge tag '9.2.beta7' into t/29701/replace_use_of_module_list_optionalextension`|
|[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)|`src/sage_setup/clean.py: Fix doctest`|



---

archive/issue_comments_582448.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-03T00:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582448",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_582449.json:
```json
{
    "body": "Changing dependencies from \"#29702, #29786, #29790, #29791\" to \"\"",
    "created_at": "2020-08-03T00:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582449",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29702, #29786, #29790, #29791" to ""



---

archive/issue_comments_582450.json:
```json
{
    "body": "<a id='comment:57'></a>\nBack to positive.",
    "created_at": "2020-08-03T05:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582450",
    "user": "https://github.com/kliem"
}
```

<a id='comment:57'></a>
Back to positive.



---

archive/issue_comments_582451.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-03T05:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582451",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_582452.json:
```json
{
    "body": "<a id='comment:58'></a>\nThanks!",
    "created_at": "2020-08-03T17:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582452",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'></a>
Thanks!



---

archive/issue_comments_582453.json:
```json
{
    "body": "<a id='comment:59'></a>\n\n```\n[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds\n[dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed\n[dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n[dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.\n[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n[dochtml]     \"__main__\", mod_spec)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 85, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1721, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n[dochtml]     build_many(build_ref_doc, non_references)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n[dochtml]     _build_many(target, args, processes=NUM_THREADS)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n[dochtml]     raise worker_exc.original_exception\n[dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n[dochtml] \n[dochtml]     Note: incremental documentation builds sometimes cause spurious\n[dochtml]     error messages. To be certain that these are real errors, run\n[dochtml]     \"make doc-clean\" first and try again.\nmake[3]: *** [Makefile:1816: doc-html] Error 1\nmake[3]: Leaving directory '/home/release/Sage/build/make'\nmake[2]: *** [Makefile:1707: all-start] Error 2\nmake[2]: Leaving directory '/home/release/Sage/build/make'\n```",
    "created_at": "2020-08-04T22:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582453",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:59'></a>

```
[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds
[dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed
[dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
[dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.
[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
[dochtml]     "__main__", mod_spec)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 85, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1721, in main
[dochtml]     builder()
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
[dochtml]     build_many(build_ref_doc, non_references)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
[dochtml]     _build_many(target, args, processes=NUM_THREADS)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
[dochtml]     raise worker_exc.original_exception
[dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
[dochtml] 
[dochtml]     Note: incremental documentation builds sometimes cause spurious
[dochtml]     error messages. To be certain that these are real errors, run
[dochtml]     "make doc-clean" first and try again.
make[3]: *** [Makefile:1816: doc-html] Error 1
make[3]: Leaving directory '/home/release/Sage/build/make'
make[2]: *** [Makefile:1707: all-start] Error 2
make[2]: Leaving directory '/home/release/Sage/build/make'
```



---

archive/issue_comments_582454.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-04T22:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582454",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_582455.json:
```json
{
    "body": "<a id='comment:60'></a>\nReplying to [vbraun](#comment%3A59):\n> {{{\n> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds\n> [dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed\n> [dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n> [dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.\n> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup\n> [dochtml] Error building the documentation.\n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n> [dochtml]     \"__main__\", mod_spec)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 85, in _run_code\n> [dochtml]     exec(code, run_globals)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n> [dochtml]     main()\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1721, in main\n> [dochtml]     builder()\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n> [dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n> [dochtml]     build_many(build_ref_doc, non_references)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n> [dochtml]     _build_many(target, args, processes=NUM_THREADS)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n> [dochtml]     raise worker_exc.original_exception\n> [dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n> [dochtml] \n> [dochtml]     Note: incremental documentation builds sometimes cause spurious\n> [dochtml]     error messages. To be certain that these are real errors, run\n> [dochtml]     \"make doc-clean\" first and try again.\n> make[3]: *** [Makefile:1816: doc-html] Error 1\n> make[3]: Leaving directory '/home/release/Sage/build/make'\n> make[2]: *** [Makefile:1707: all-start] Error 2\n> make[2]: Leaving directory '/home/release/Sage/build/make'\n> }}}\n\n\nAre you sure? I thought it would have come from either #30240 or #30260 since they both touch \"distance_regular\".",
    "created_at": "2020-08-04T22:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582455",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:60'></a>
Replying to [vbraun](#comment%3A59):
> {{{
> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds
> [dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed
> [dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
> [dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.
> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup
> [dochtml] Error building the documentation.
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
> [dochtml]     "__main__", mod_spec)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 85, in _run_code
> [dochtml]     exec(code, run_globals)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
> [dochtml]     main()
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1721, in main
> [dochtml]     builder()
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
> [dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
> [dochtml]     build_many(build_ref_doc, non_references)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
> [dochtml]     _build_many(target, args, processes=NUM_THREADS)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
> [dochtml]     raise worker_exc.original_exception
> [dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
> [dochtml] 
> [dochtml]     Note: incremental documentation builds sometimes cause spurious
> [dochtml]     error messages. To be certain that these are real errors, run
> [dochtml]     "make doc-clean" first and try again.
> make[3]: *** [Makefile:1816: doc-html] Error 1
> make[3]: Leaving directory '/home/release/Sage/build/make'
> make[2]: *** [Makefile:1707: all-start] Error 2
> make[2]: Leaving directory '/home/release/Sage/build/make'
> }}}


Are you sure? I thought it would have come from either #30240 or #30260 since they both touch "distance_regular".



---

archive/issue_comments_582456.json:
```json
{
    "body": "<a id='comment:61'></a>\n#30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`",
    "created_at": "2020-08-04T22:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582456",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>
#30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`



---

archive/issue_comments_582457.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-04T22:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582457",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_582458.json:
```json
{
    "body": "<a id='comment:63'></a>\nReplying to [mkoeppe](#comment%3A61):\n> #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`\n> \n\nit used to be broken, but IMHO it's fixed by #30240#comment:32",
    "created_at": "2020-08-04T22:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582458",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:63'></a>
Replying to [mkoeppe](#comment%3A61):
> #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`
> 

it used to be broken, but IMHO it's fixed by #30240#comment:32



---

archive/issue_comments_582459.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [dimpase](#comment%3A63):\n> Replying to [mkoeppe](#comment%3A61):\n> > #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`\n> > \n\n> it used to be broken, but IMHO it's fixed by #30240#comment:32\n\nUnfortunately Volker merged before that.",
    "created_at": "2020-08-04T22:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582459",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:64'></a>
Replying to [dimpase](#comment%3A63):
> Replying to [mkoeppe](#comment%3A61):
> > #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`
> > 

> it used to be broken, but IMHO it's fixed by #30240#comment:32

Unfortunately Volker merged before that.



---

archive/issue_comments_582460.json:
```json
{
    "body": "<a id='comment:65'></a>\n#30240 does not even have #30260 as a dependency...",
    "created_at": "2020-08-04T23:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582460",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>
#30240 does not even have #30260 as a dependency...



---

archive/issue_comments_582461.json:
```json
{
    "body": "<a id='comment:66'></a>\nReplying to [mkoeppe](#comment%3A65):\n> #30240 does not even have #30260 as a dependency...\n\nShould it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.\nI apologise for the confusion but when #30240 went from \"positive review\" to \"needs work\" and I forgot to update #30260.",
    "created_at": "2020-08-05T09:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582461",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:66'></a>
Replying to [mkoeppe](#comment%3A65):
> #30240 does not even have #30260 as a dependency...

Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.
I apologise for the confusion but when #30240 went from "positive review" to "needs work" and I forgot to update #30260.



---

archive/issue_comments_582462.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [gh-Ivo-Maffei](#comment%3A66):\n> Replying to [mkoeppe](#comment%3A65):\n> > #30240 does not even have #30260 as a dependency...\n\n> Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.\n> I apologise for the confusion but when #30240 went from \"positive review\" to \"needs work\" and I forgot to update #30260.\n\nThat's alright -- thanks for the fast reaction and fix!",
    "created_at": "2020-08-05T14:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582462",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:67'></a>
Replying to [gh-Ivo-Maffei](#comment%3A66):
> Replying to [mkoeppe](#comment%3A65):
> > #30240 does not even have #30260 as a dependency...

> Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.
> I apologise for the confusion but when #30240 went from "positive review" to "needs work" and I forgot to update #30260.

That's alright -- thanks for the fast reaction and fix!



---

archive/issue_comments_582463.json:
```json
{
    "body": "<a id='comment:68'></a>\n\n```\nsage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py\n**********************************************************************\nFile \"src/sage_setup/find.py\", line 215, in sage_setup.find.find_extra_files\nFailed example:\n    extras[\"sage/ext/interpreters\"]\nExpected:\n    ['.../src/sage/ext/interpreters/wrapper_cdf.pxd', ...wrapper_cdf.h...]\nGot:\n    ['/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pyx']\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage_setup.find.find_extra_files\n    [36 tests, 1 failure, 0.27 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-08T09:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582463",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:68'></a>

```
sage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py
**********************************************************************
File "src/sage_setup/find.py", line 215, in sage_setup.find.find_extra_files
Failed example:
    extras["sage/ext/interpreters"]
Expected:
    ['.../src/sage/ext/interpreters/wrapper_cdf.pxd', ...wrapper_cdf.h...]
Got:
    ['/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pyx']
**********************************************************************
1 item had failures:
   1 of   7 in sage_setup.find.find_extra_files
    [36 tests, 1 failure, 0.27 s]
----------------------------------------------------------------------
sage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_582464.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-08T09:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582464",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_582465.json:
```json
{
    "body": "<a id='comment:69'></a>\nMight have been from #29950",
    "created_at": "2020-08-08T12:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582465",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:69'></a>
Might have been from #29950



---

archive/issue_comments_582466.json:
```json
{
    "body": "<a id='comment:70'></a>\nYes, it's #29950 that broke it.",
    "created_at": "2020-08-08T20:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582466",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>
Yes, it's #29950 that broke it.



---

archive/issue_comments_582467.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-08T20:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582467",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_582468.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-10T18:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582468",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_085702.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-10T18:50:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29701#event-85702"
}
```



---

archive/issue_comments_582469.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/replace_use_of_module_list_optionalextension\" to \"55c3fbc565fd7884f3df9555de83dd326ace276e\"",
    "created_at": "2020-08-10T18:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-582469",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/replace_use_of_module_list_optionalextension" to "55c3fbc565fd7884f3df9555de83dd326ace276e"
