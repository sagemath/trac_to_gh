# Issue 29701: Replace use of module_list and OptionalExtension by extending find_python_sources

archive/issues_029464.json:
```json
{
    "body": "We add two new features to `find_python_sources`: finding Cython extensions, and filtering by \"distributions\".\n\nWe remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n\nWe remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n\nFollow-up tickets:\n- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages that provide namespace packages (#28925)\n- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)\n\n\n\n\nCC:  @kiwifb @isuruf @videlec @dcoudert @dimpase @kliem @vbraun\n\nBranch/Commit: 55c3fbc565fd7884f3df9555de83dd326ace276e\n\nReviewer: Jonathan Kliem\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29701\n\n",
    "closed_at": "2020-08-10T18:50:17Z",
    "created_at": "2020-05-17T16:26:04Z",
    "labels": [
        "component: refactoring",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Replace use of module_list and OptionalExtension by extending find_python_sources",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29701",
    "user": "https://github.com/mkoeppe"
}
```
We add two new features to `find_python_sources`: finding Cython extensions, and filtering by "distributions".

We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)

We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.

Follow-up tickets:
- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages that provide namespace packages (#28925)
- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)




CC:  @kiwifb @isuruf @videlec @dcoudert @dimpase @kliem @vbraun

Branch/Commit: 55c3fbc565fd7884f3df9555de83dd326ace276e

Reviewer: Jonathan Kliem

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29701





---

archive/issue_comments_581472.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n+Preparation:\n+- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages\n \n+\n``````\n",
    "created_at": "2020-05-17T17:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581472",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
+Preparation:
+- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages
 
+
``````




---

archive/issue_comments_581473.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Preparation:\n - #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages\n+- #29702 Move all code from src/setup.py to sage_setup\n \n-\n``````\n",
    "created_at": "2020-05-17T17:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581473",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Preparation:
 - #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages
+- #29702 Move all code from src/setup.py to sage_setup
 
-
``````




---

archive/issue_comments_581474.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,16 @@\n Preparation:\n-- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages\n-- #29702 Move all code from src/setup.py to sage_setup\n+- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages\n+- #29702 Move all code from `src/setup.py` to `sage_setup`\n \n+Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n+- `sage.graphs.mcqd`\n+- `sage.graphs.bliss`\n+- `sage.graphs.graph_decompositions.tdlib`\n+- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)\n+- `sage.libs.coxeter3.coxeter`\n+- `sage.libs.fes`\n+- `sage.libs.sirocco`\n+- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`\n+\n+\n+\n``````\n",
    "created_at": "2020-05-17T19:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581474",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,16 @@
 Preparation:
-- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages
-- #29702 Move all code from src/setup.py to sage_setup
+- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages
+- #29702 Move all code from `src/setup.py` to `sage_setup`
 
+Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
+- `sage.graphs.mcqd`
+- `sage.graphs.bliss`
+- `sage.graphs.graph_decompositions.tdlib`
+- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)
+- `sage.libs.coxeter3.coxeter`
+- `sage.libs.fes`
+- `sage.libs.sirocco`
+- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`
+
+
+
``````




---

archive/issue_comments_581475.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n - `sage.graphs.mcqd`\n - `sage.graphs.bliss`\n-- `sage.graphs.graph_decompositions.tdlib`\n+- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)\n - `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)\n - `sage.libs.coxeter3.coxeter`\n - `sage.libs.fes`\n``````\n",
    "created_at": "2020-05-17T21:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581475",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
 - `sage.graphs.mcqd`
 - `sage.graphs.bliss`
-- `sage.graphs.graph_decompositions.tdlib`
+- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)
 - `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)
 - `sage.libs.coxeter3.coxeter`
 - `sage.libs.fes`
``````




---

archive/issue_comments_581476.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n Preparation:\n - #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages\n+- Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n``````\n",
    "created_at": "2020-05-18T00:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581476",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
 Preparation:
 - #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages
+- Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
 Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
``````




---

archive/issue_comments_581477.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,9 @@\n+Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.\n+\n+With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).\n+\n Preparation:\n-- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages\n+- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-05-19T04:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581477",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,9 @@
+Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.
+
+With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).
+
 Preparation:
-- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages
+- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_581478.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).\n \n Preparation:\n-- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)\n+- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-05-19T04:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581478",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).
 
 Preparation:
-- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)
+- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_581479.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,7 @@\n \n Preparation:\n - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n+- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-05-20T22:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581479",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,7 @@
 
 Preparation:
 - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
+- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_581480.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n Preparation:\n - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n-- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.\n+- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-06-03T18:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581480",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 Preparation:
 - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
-- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.
+- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_581481.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925\"",
    "created_at": "2020-06-03T22:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581481",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925"



---

archive/issue_comments_581482.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,22 +1,7 @@\n-Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.\n+Using the extended `find_python_sources` from #28925, \n+we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n \n-With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).\n+We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n-Preparation:\n-- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n-- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.\n-- Remove empty  `__init__.py` files to convert packages to native namespace packages\n-- #29702 Move all code from `src/setup.py` to `sage_setup`\n+(In a follow-up ticket, part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages.)\n \n-Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n-- `sage.graphs.mcqd`\n-- `sage.graphs.bliss`\n-- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)\n-- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)\n-- `sage.libs.coxeter3.coxeter`\n-- `sage.libs.fes`\n-- `sage.libs.sirocco`\n-- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`\n-\n-\n-\n``````\n",
    "created_at": "2020-06-03T22:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581482",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,22 +1,7 @@
-Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.
+Using the extended `find_python_sources` from #28925, 
+we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
 
-With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).
+We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
-Preparation:
-- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
-- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.
-- Remove empty  `__init__.py` files to convert packages to native namespace packages
-- #29702 Move all code from `src/setup.py` to `sage_setup`
+(In a follow-up ticket, part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages.)
 
-Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
-- `sage.graphs.mcqd`
-- `sage.graphs.bliss`
-- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)
-- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)
-- `sage.libs.coxeter3.coxeter`
-- `sage.libs.fes`
-- `sage.libs.sirocco`
-- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`
-
-
-
``````




---

archive/issue_comments_581483.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/replace_use_of_module_list_optionalextension\"",
    "created_at": "2020-06-03T22:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581483",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/replace_use_of_module_list_optionalextension"



---

archive/issue_comments_581484.json:
```json
{
    "body": "Changing commit from \"\" to \"891d12aeacd439cd72e31d42399826f48dae624f\"",
    "created_at": "2020-06-03T22:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581484",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "891d12aeacd439cd72e31d42399826f48dae624f"



---

archive/issue_comments_581485.json:
```json
{
    "body": "<a id='comment:12'></a>Last 10 new commits:",
    "created_at": "2020-06-03T22:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581485",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Last 10 new commits:



---

archive/issue_comments_581486.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n-Using the extended `find_python_sources` from #28925, \n-we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n+We add two new features to `find_python_sources`: finding Cython extensions, and filtering by \"distributions\".\n+ \n+We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n \n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n``````\n",
    "created_at": "2020-06-03T22:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581486",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
-Using the extended `find_python_sources` from #28925, 
-we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
+We add two new features to `find_python_sources`: finding Cython extensions, and filtering by "distributions".
+ 
+We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
 
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
``````




---

archive/issue_comments_581487.json:
```json
{
    "body": "Changing dependencies from \"#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925\" to \"#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791\"",
    "created_at": "2020-06-03T22:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581487",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925" to "#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791"



---

archive/issue_comments_581488.json:
```json
{
    "body": "Changing dependencies from \"#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791\" to \"#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791\"",
    "created_at": "2020-06-03T22:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581488",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791" to "#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791"



---

archive/issue_comments_581489.json:
```json
{
    "body": "Changing commit from \"891d12aeacd439cd72e31d42399826f48dae624f\" to \"ec7e9c599aebbec9b8a9227399cf6b8793dccd72\"",
    "created_at": "2020-06-03T22:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "891d12aeacd439cd72e31d42399826f48dae624f" to "ec7e9c599aebbec9b8a9227399cf6b8793dccd72"



---

archive/issue_comments_581490.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-06-03T22:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_581491.json:
```json
{
    "body": "<a id='comment:15'></a>No longer on top of #28925, so no namespace package are involved any more for this ticket.",
    "created_at": "2020-06-03T22:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581491",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>No longer on top of #28925, so no namespace package are involved any more for this ticket.



---

archive/issue_comments_581492.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,9 @@\n \n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n-(In a follow-up ticket, part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages.)\n+Follow-up tickets:\n+- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages\n+- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)\n \n+\n+\n``````\n",
    "created_at": "2020-06-03T22:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581492",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,9 @@
 
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
-(In a follow-up ticket, part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages.)
+Follow-up tickets:
+- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages
+- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)
 
+
+
``````




---

archive/issue_comments_581493.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-06-03T22:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581493",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_581494.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-03T22:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581494",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_581495.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n We add two new features to `find_python_sources`: finding Cython extensions, and filtering by \"distributions\".\n- \n+\n We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n \n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n``````\n",
    "created_at": "2020-06-03T22:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581495",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 We add two new features to `find_python_sources`: finding Cython extensions, and filtering by "distributions".
- 
+
 We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
 
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
``````




---

archive/issue_comments_581496.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n Follow-up tickets:\n-- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages\n+- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages that provide namespace packages (#28925)\n - remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)\n \n \n``````\n",
    "created_at": "2020-06-03T23:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581496",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
 Follow-up tickets:
-- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages
+- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages that provide namespace packages (#28925)
 - remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)
 
 
``````




---

archive/issue_comments_581497.json:
```json
{
    "body": "Changing commit from \"ec7e9c599aebbec9b8a9227399cf6b8793dccd72\" to \"25a234059991c56df9b046700980cb1d194a32e5\"",
    "created_at": "2020-06-04T00:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ec7e9c599aebbec9b8a9227399cf6b8793dccd72" to "25a234059991c56df9b046700980cb1d194a32e5"



---

archive/issue_comments_581498.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-04T00:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581499.json:
```json
{
    "body": "Changing commit from \"25a234059991c56df9b046700980cb1d194a32e5\" to \"2d866a3bab2a1d55bc85fcae4f30d384498bcc12\"",
    "created_at": "2020-06-04T02:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "25a234059991c56df9b046700980cb1d194a32e5" to "2d866a3bab2a1d55bc85fcae4f30d384498bcc12"



---

archive/issue_comments_581500.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-04T02:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581501.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-07T18:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581502.json:
```json
{
    "body": "Changing commit from \"2d866a3bab2a1d55bc85fcae4f30d384498bcc12\" to \"3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319\"",
    "created_at": "2020-06-07T18:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581502",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2d866a3bab2a1d55bc85fcae4f30d384498bcc12" to "3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319"



---

archive/issue_comments_581503.json:
```json
{
    "body": "Changing commit from \"3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319\" to \"7f8850adc52d8798852646b550f4f9c88b30b468\"",
    "created_at": "2020-06-07T18:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319" to "7f8850adc52d8798852646b550f4f9c88b30b468"



---

archive/issue_comments_581504.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-07T18:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581505.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-06-07T20:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_581506.json:
```json
{
    "body": "Changing commit from \"7f8850adc52d8798852646b550f4f9c88b30b468\" to \"26a85a4303d4774427d173cae932ad48b5ac5926\"",
    "created_at": "2020-06-07T20:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7f8850adc52d8798852646b550f4f9c88b30b468" to "26a85a4303d4774427d173cae932ad48b5ac5926"



---

archive/issue_comments_581507.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-08T02:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581508.json:
```json
{
    "body": "Changing commit from \"26a85a4303d4774427d173cae932ad48b5ac5926\" to \"a0be9b64ce3623fe4470d7b2483d21f343225ca7\"",
    "created_at": "2020-06-08T02:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "26a85a4303d4774427d173cae932ad48b5ac5926" to "a0be9b64ce3623fe4470d7b2483d21f343225ca7"



---

archive/issue_comments_581509.json:
```json
{
    "body": "<a id='comment:25'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/128112212",
    "created_at": "2020-06-08T02:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581509",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/128112212



---

archive/issue_comments_581510.json:
```json
{
    "body": "Changing commit from \"a0be9b64ce3623fe4470d7b2483d21f343225ca7\" to \"14396af45af31c8f3a48d934d0e1ad424712ba4c\"",
    "created_at": "2020-06-26T16:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a0be9b64ce3623fe4470d7b2483d21f343225ca7" to "14396af45af31c8f3a48d934d0e1ad424712ba4c"



---

archive/issue_comments_581511.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-26T16:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581512.json:
```json
{
    "body": "Changing dependencies from \"#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791\" to \"#29702 (#29411), #29786, #29790, #29791\"",
    "created_at": "2020-06-26T16:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581512",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791" to "#29702 (#29411), #29786, #29790, #29791"



---

archive/issue_comments_581513.json:
```json
{
    "body": "<a id='comment:27'></a>Merged in latest beta. Needs review",
    "created_at": "2020-06-26T16:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581513",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Merged in latest beta. Needs review



---

archive/issue_comments_581514.json:
```json
{
    "body": "Changing commit from \"14396af45af31c8f3a48d934d0e1ad424712ba4c\" to \"d62da1559ca1448b07962ea69fcde212cfea75f0\"",
    "created_at": "2020-06-28T22:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "14396af45af31c8f3a48d934d0e1ad424712ba4c" to "d62da1559ca1448b07962ea69fcde212cfea75f0"



---

archive/issue_comments_581515.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-28T22:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581516.json:
```json
{
    "body": "<a id='comment:29'></a>I'm a bit confused:\n\n`find_python_sources` gives you all sources including all with optional packages if `distributions=None`.\n\nHowever, if distributions is `sage-tdlib`, you get only one source file.\n\nDon't we want `find_python_sources` to contain everything except for not installed optional packages?",
    "created_at": "2020-06-29T09:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581516",
    "user": "https://github.com/kliem"
}
```

<a id='comment:29'></a>I'm a bit confused:

`find_python_sources` gives you all sources including all with optional packages if `distributions=None`.

However, if distributions is `sage-tdlib`, you get only one source file.

Don't we want `find_python_sources` to contain everything except for not installed optional packages?



---

archive/issue_comments_581517.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 gh-kliem]:\n> `find_python_sources` gives you all sources including all with optional packages if `distributions=None`.\n> \n> However, if distributions is `sage-tdlib`, you get only one source file.\n\n\nThat's right. This is a feature for modularization as in #29864 (Modularization of sagelib: Break out a separate package sage-tdlib).\n\n> Don't we want `find_python_sources` to contain everything except for not installed optional packages?\n\n\nFor this, one passes `distributions=['', 'sage-tdlib']`. The empty string designates all source files without a `sage_setup: distribution` directive. This list of distributions is computed in `src/setup.py`.",
    "created_at": "2020-06-29T17:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581517",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>Replying to [comment:29 gh-kliem]:
> `find_python_sources` gives you all sources including all with optional packages if `distributions=None`.
> 
> However, if distributions is `sage-tdlib`, you get only one source file.


That's right. This is a feature for modularization as in #29864 (Modularization of sagelib: Break out a separate package sage-tdlib).

> Don't we want `find_python_sources` to contain everything except for not installed optional packages?


For this, one passes `distributions=['', 'sage-tdlib']`. The empty string designates all source files without a `sage_setup: distribution` directive. This list of distributions is computed in `src/setup.py`.



---

archive/issue_comments_581518.json:
```json
{
    "body": "<a id='comment:31'></a>I see.\n\nI would suggest updating the benchmark. Also I can confirm this, it is not really meaningful, as this is not the normal use case, isn't it. The normal use case would be with `distributions=['']` and this takes about 500 ms and not 20 ms. Still no problem I think, but much longer.",
    "created_at": "2020-06-29T18:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581518",
    "user": "https://github.com/kliem"
}
```

<a id='comment:31'></a>I see.

I would suggest updating the benchmark. Also I can confirm this, it is not really meaningful, as this is not the normal use case, isn't it. The normal use case would be with `distributions=['']` and this takes about 500 ms and not 20 ms. Still no problem I think, but much longer.



---

archive/issue_comments_581519.json:
```json
{
    "body": "<a id='comment:32'></a>Otherwise the source code looks fine. Do we have any test runs? Should I run them?",
    "created_at": "2020-06-29T18:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581519",
    "user": "https://github.com/kliem"
}
```

<a id='comment:32'></a>Otherwise the source code looks fine. Do we have any test runs? Should I run them?



---

archive/issue_comments_581520.json:
```json
{
    "body": "<a id='comment:33'></a>I have tested the branch of this ticket on macOS and also as part of #29950 and other tickets.",
    "created_at": "2020-06-29T19:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581520",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>I have tested the branch of this ticket on macOS and also as part of #29950 and other tickets.



---

archive/issue_comments_581521.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:31 gh-kliem]:\n> I would suggest updating the benchmark. \n\n\nGood idea, will do",
    "created_at": "2020-06-29T19:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581521",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>Replying to [comment:31 gh-kliem]:
> I would suggest updating the benchmark. 


Good idea, will do



---

archive/issue_comments_581522.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-29T19:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581522",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581523.json:
```json
{
    "body": "Changing commit from \"d62da1559ca1448b07962ea69fcde212cfea75f0\" to \"06a360974cc56699a85f291494a493fed041dbc9\"",
    "created_at": "2020-06-29T19:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581523",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d62da1559ca1448b07962ea69fcde212cfea75f0" to "06a360974cc56699a85f291494a493fed041dbc9"



---

archive/issue_comments_581524.json:
```json
{
    "body": "<a id='comment:36'></a>As I have capacities I started test for only this ticket:\n\nhttps://github.com/kliem/sage/pull/18/checks",
    "created_at": "2020-06-29T19:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581524",
    "user": "https://github.com/kliem"
}
```

<a id='comment:36'></a>As I have capacities I started test for only this ticket:

https://github.com/kliem/sage/pull/18/checks



---

archive/issue_comments_581525.json:
```json
{
    "body": "<a id='comment:37'></a>There is that annoying failure of sageinspect again\n\nubuntu-bionic, minimal (for example, but looks like it is anywhere)\n\n```\nFile \"src/sage/misc/sageinspect.py\", line 28, in sage.misc.sageinspect\nFailed example:\n    sage_getsource(sage.rings.rational)[5:]\nExpected:\n    'Rational Numbers...'\nGot:\n    'tutils: libraries = ntl\\nr\"\"\"\\nRational Numbers\\n\\nAUTHORS:\\n\\n- William Stein (2005): first version\\n\\n- William Stein (2006-02-22): floor and ceil (pure fast GMP versions).\\n\\n- Gonzalo Tornaria and William Stein (2006-03-02): greatly improved\\n  python/GMP conversion; hashing\\n\\n- William Stein and Naqi Jaffery (2006-03-06): height, sqrt examples,\\n  and improve behavior of sqrt.\\n\\n- David Harvey (2006-09-15): added nth_root\\n\\n- Pablo De Napoli (2007-04-01): corrected the implementations of\\n  multiplicative_order, is_one; optimized __nonzero__ ; documented:\\n  lcm,gcd\\n\\n- John Cremona (2009-05-15): added support for local and global\\n  logarithmic heights.\\n\\n- Travis Scrimshaw (2012-10-18): Added doctests for full coverage.\\n\\n- Vincent Delecroix (2013): continued fraction\\n\\n- Vincent Delecroix (2017-05-03): faster integer-rational comparison\\n\\n- Vincent Klein (2017-05-11): add __mpq__() to class Rational\\n\\n- Vincent Klein (2017-05-22): Rational constructor support gmpy2.mpq\\n  or gmpy2.mpz parameter. Add __mpz__ to class Rational.\\n\\nTESTS::\\n\\n    sage: a = -2/3\\n    sage: a == loads(dumps(a))\\n    True\\n\"\"\"\\n\\n# ****************************************************************************\\n#       Copyright (C) 2004, 2006 William Stein <wstein@gmail.com>\\n#       Copyright (C) 2017 Vincent Delecroix <20100.delecroix@gmail.com>\\n#\\n#  Distributed under the terms of the GNU General Public License (GPL)\\n#  as published by the Free Software Foundation; either version 2 of\\n#  the License, or (at your option) any later version.\\n#                  https://www.gnu.org/licenses/\\n# ****************************************************************************\\n\\ncimport cython\\nfrom cpython cimport *\\nfrom cpython.object cimport Py_EQ, Py_NE\\n\\nfrom cysignals.signals cimport sig_on, sig_off\\n\\nimport operator\\nimport fractions\\n\\nfrom sage.misc.mathml import mathml\\nfrom sage.arith.long cimport pyobject_to_long, integer_check_long_py\\nfrom sage.cpython.string cimport char_to_str, str_to_bytes\\n\\nimport sage.misc.misc as misc\\nfrom sage.structure.sage_object cimport SageObject\\nfrom sage.structure.richcmp cimport rich_to_bool_sgn\\nimport sage.rings.rational_field\\n\\ncimport sage.rings.integer as integer\\nfrom .integer cimport Integer\\n\\nfrom cypari2.paridecl cimport *\\nfrom cypari2.gen cimport Gen as pari_gen\\nfrom sage.libs.pari.convert_gmp cimport INT_to_mpz, INTFRAC_to_mpq, new_gen_from_mpq_t\\n\\nfrom .integer_ring import ZZ\\nfrom sage.arith.rational_reconstruction cimport mpq_rational_reconstruction\\n\\nfrom sage.structure.coerce cimport is_numpy_type\\n\\nfrom sage.libs.gmp.pylong cimport mpz_set_pylong\\n\\nfrom sage.structure.coerce cimport coercion_model\\nfrom sage.structure.element cimport Element\\nfrom sage.structure.element import coerce_binop\\nfrom sage.structure.parent cimport Parent\\nfrom sage.categories.morphism cimport Morphism\\nfrom sage.categories.map cimport Map\\n\\n\\n\\nimport sage.rings.real_mpfr\\nimport sage.rings.real_double\\nfrom libc.stdint cimport uint64_t\\nfrom sage.libs.gmp.binop cimport mpq_add_z, mpq_mul_z, mpq_div_zz\\n\\nfrom cpython.int cimport PyInt_AS_LONG\\n\\ncimport sage.rings.fast_arith\\nimport  sage.rings.fast_arith\\n\\ncdef sage.rings.fast_arith.arith_int ai\\nai = sage.rings.fast_arith.arith_int()\\n\\ncdef object numpy_long_interface = {\\'typestr\\': \\'=i4\\' if sizeof(long) == 4 else \\'=i8\\' }\\ncdef object numpy_int64_interface = {\\'typestr\\': \\'=i8\\'}\\ncdef object numpy_object_interface = {\\'typestr\\': \\'|O\\'}\\ncdef object numpy_double_interface = {\\'typestr\\': \\'=f8\\'}\\n\\nfrom libc.math cimport ldexp\\nfrom sage.libs.gmp.all cimport *\\n\\ncimport gmpy2\\ngmpy2.import_gmpy2()\\n\\n\\ncdef class Rational(sage.structure.element.FieldElement)\\n'\n```",
    "created_at": "2020-07-01T15:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581525",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>There is that annoying failure of sageinspect again

ubuntu-bionic, minimal (for example, but looks like it is anywhere)

```
File "src/sage/misc/sageinspect.py", line 28, in sage.misc.sageinspect
Failed example:
    sage_getsource(sage.rings.rational)[5:]
Expected:
    'Rational Numbers...'
Got:
    'tutils: libraries = ntl\nr"""\nRational Numbers\n\nAUTHORS:\n\n- William Stein (2005): first version\n\n- William Stein (2006-02-22): floor and ceil (pure fast GMP versions).\n\n- Gonzalo Tornaria and William Stein (2006-03-02): greatly improved\n  python/GMP conversion; hashing\n\n- William Stein and Naqi Jaffery (2006-03-06): height, sqrt examples,\n  and improve behavior of sqrt.\n\n- David Harvey (2006-09-15): added nth_root\n\n- Pablo De Napoli (2007-04-01): corrected the implementations of\n  multiplicative_order, is_one; optimized __nonzero__ ; documented:\n  lcm,gcd\n\n- John Cremona (2009-05-15): added support for local and global\n  logarithmic heights.\n\n- Travis Scrimshaw (2012-10-18): Added doctests for full coverage.\n\n- Vincent Delecroix (2013): continued fraction\n\n- Vincent Delecroix (2017-05-03): faster integer-rational comparison\n\n- Vincent Klein (2017-05-11): add __mpq__() to class Rational\n\n- Vincent Klein (2017-05-22): Rational constructor support gmpy2.mpq\n  or gmpy2.mpz parameter. Add __mpz__ to class Rational.\n\nTESTS::\n\n    sage: a = -2/3\n    sage: a == loads(dumps(a))\n    True\n"""\n\n# ****************************************************************************\n#       Copyright (C) 2004, 2006 William Stein <wstein@gmail.com>\n#       Copyright (C) 2017 Vincent Delecroix <20100.delecroix@gmail.com>\n#\n#  Distributed under the terms of the GNU General Public License (GPL)\n#  as published by the Free Software Foundation; either version 2 of\n#  the License, or (at your option) any later version.\n#                  https://www.gnu.org/licenses/\n# ****************************************************************************\n\ncimport cython\nfrom cpython cimport *\nfrom cpython.object cimport Py_EQ, Py_NE\n\nfrom cysignals.signals cimport sig_on, sig_off\n\nimport operator\nimport fractions\n\nfrom sage.misc.mathml import mathml\nfrom sage.arith.long cimport pyobject_to_long, integer_check_long_py\nfrom sage.cpython.string cimport char_to_str, str_to_bytes\n\nimport sage.misc.misc as misc\nfrom sage.structure.sage_object cimport SageObject\nfrom sage.structure.richcmp cimport rich_to_bool_sgn\nimport sage.rings.rational_field\n\ncimport sage.rings.integer as integer\nfrom .integer cimport Integer\n\nfrom cypari2.paridecl cimport *\nfrom cypari2.gen cimport Gen as pari_gen\nfrom sage.libs.pari.convert_gmp cimport INT_to_mpz, INTFRAC_to_mpq, new_gen_from_mpq_t\n\nfrom .integer_ring import ZZ\nfrom sage.arith.rational_reconstruction cimport mpq_rational_reconstruction\n\nfrom sage.structure.coerce cimport is_numpy_type\n\nfrom sage.libs.gmp.pylong cimport mpz_set_pylong\n\nfrom sage.structure.coerce cimport coercion_model\nfrom sage.structure.element cimport Element\nfrom sage.structure.element import coerce_binop\nfrom sage.structure.parent cimport Parent\nfrom sage.categories.morphism cimport Morphism\nfrom sage.categories.map cimport Map\n\n\n\nimport sage.rings.real_mpfr\nimport sage.rings.real_double\nfrom libc.stdint cimport uint64_t\nfrom sage.libs.gmp.binop cimport mpq_add_z, mpq_mul_z, mpq_div_zz\n\nfrom cpython.int cimport PyInt_AS_LONG\n\ncimport sage.rings.fast_arith\nimport  sage.rings.fast_arith\n\ncdef sage.rings.fast_arith.arith_int ai\nai = sage.rings.fast_arith.arith_int()\n\ncdef object numpy_long_interface = {\'typestr\': \'=i4\' if sizeof(long) == 4 else \'=i8\' }\ncdef object numpy_int64_interface = {\'typestr\': \'=i8\'}\ncdef object numpy_object_interface = {\'typestr\': \'|O\'}\ncdef object numpy_double_interface = {\'typestr\': \'=f8\'}\n\nfrom libc.math cimport ldexp\nfrom sage.libs.gmp.all cimport *\n\ncimport gmpy2\ngmpy2.import_gmpy2()\n\n\ncdef class Rational(sage.structure.element.FieldElement)\n'
```



---

archive/issue_comments_581526.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-02T03:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581527.json:
```json
{
    "body": "Changing commit from \"06a360974cc56699a85f291494a493fed041dbc9\" to \"034a7f71a52fffc9a6566bda3e63abccdb5d6825\"",
    "created_at": "2020-07-02T03:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "06a360974cc56699a85f291494a493fed041dbc9" to "034a7f71a52fffc9a6566bda3e63abccdb5d6825"



---

archive/issue_comments_581528.json:
```json
{
    "body": "<a id='comment:39'></a>Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.",
    "created_at": "2020-07-02T04:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581528",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.



---

archive/issue_comments_581529.json:
```json
{
    "body": "<a id='comment:40'></a>I was wondering, where this error came from now. Good to know that it is entirely harmless.\n\nReplying to [comment:39 mkoeppe]:\n> Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.",
    "created_at": "2020-07-02T05:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581529",
    "user": "https://github.com/kliem"
}
```

<a id='comment:40'></a>I was wondering, where this error came from now. Good to know that it is entirely harmless.

Replying to [comment:39 mkoeppe]:
> Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.



---

archive/issue_comments_581530.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-02T05:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581530",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_581531.json:
```json
{
    "body": "<a id='comment:41'></a>LGTM.",
    "created_at": "2020-07-02T05:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581531",
    "user": "https://github.com/kliem"
}
```

<a id='comment:41'></a>LGTM.



---

archive/issue_comments_581532.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jonathan Kliem\"",
    "created_at": "2020-07-02T05:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581532",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "" to "Jonathan Kliem"



---

archive/issue_comments_581533.json:
```json
{
    "body": "<a id='comment:43'></a>Thank you!",
    "created_at": "2020-07-02T19:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581533",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Thank you!



---

archive/issue_comments_581534.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-07-04T16:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_581535.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-07-04T16:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_581536.json:
```json
{
    "body": "Changing commit from \"034a7f71a52fffc9a6566bda3e63abccdb5d6825\" to \"d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8\"",
    "created_at": "2020-07-04T16:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "034a7f71a52fffc9a6566bda3e63abccdb5d6825" to "d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8"



---

archive/issue_comments_581537.json:
```json
{
    "body": "<a id='comment:45'></a>Merged 9.2.beta3",
    "created_at": "2020-07-04T16:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581537",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>Merged 9.2.beta3



---

archive/issue_comments_581538.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-04T16:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581538",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_581539.json:
```json
{
    "body": "<a id='comment:47'></a>Volker, is there something missing on this ticket that keeps it from being merged?",
    "created_at": "2020-07-26T22:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581539",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Volker, is there something missing on this ticket that keeps it from being merged?



---

archive/issue_comments_581540.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-08-02T10:27:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581540",
    "user": "https://github.com/dimpase"
}
```

Changing priority from major to critical.



---

archive/issue_comments_581541.json:
```json
{
    "body": "Changing dependencies from \"#29702 (#29411), #29786, #29790, #29791\" to \"#29702, #29786, #29790, #29791\"",
    "created_at": "2020-08-02T18:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581541",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "#29702 (#29411), #29786, #29790, #29791" to "#29702, #29786, #29790, #29791"



---

archive/issue_comments_581542.json:
```json
{
    "body": "<a id='comment:49'></a>#29411 isn't merged (the release script can only check whether a ticket has been merged if you think about it; Do not depend on invalid/duplicate/meta-tickets, or anything else that doesn't actually contribute commits). Also `(#29411)` isn't supported as dependency, whatever the parens are supposed to mean.",
    "created_at": "2020-08-02T18:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581542",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:49'></a>#29411 isn't merged (the release script can only check whether a ticket has been merged if you think about it; Do not depend on invalid/duplicate/meta-tickets, or anything else that doesn't actually contribute commits). Also `(#29411)` isn't supported as dependency, whatever the parens are supposed to mean.



---

archive/issue_comments_581543.json:
```json
{
    "body": "<a id='comment:50'></a>#29411 is a real ticket with 9.2 as milestone, marked as closed, with a branch which looks like a merged branch. Is it the same kind of issue as with #21226 ?",
    "created_at": "2020-08-02T18:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581543",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'></a>#29411 is a real ticket with 9.2 as milestone, marked as closed, with a branch which looks like a merged branch. Is it the same kind of issue as with #21226 ?



---

archive/issue_comments_581544.json:
```json
{
    "body": "<a id='comment:51'></a>Thanks for cleaning up the dependency list. \n\nUnfortunately the format does not seem to be documented anywhere.\n\n(#29411 is a regular merged ticket. You merged it in 0bcd001f760ff724832c32b4f65fa575fd82e000)",
    "created_at": "2020-08-02T18:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581544",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>Thanks for cleaning up the dependency list. 

Unfortunately the format does not seem to be documented anywhere.

(#29411 is a regular merged ticket. You merged it in 0bcd001f760ff724832c32b4f65fa575fd82e000)



---

archive/issue_comments_581545.json:
```json
{
    "body": "<a id='comment:52'></a>Yes, in this case it was the parens.",
    "created_at": "2020-08-02T22:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581545",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:52'></a>Yes, in this case it was the parens.



---

archive/issue_comments_581546.json:
```json
{
    "body": "<a id='comment:53'></a>\n```\nsage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 83, in sage_setup.clean._find_stale_files\nFailed example:\n    python_packages, python_modules = find_python_sources(\n        SAGE_SRC, ['sage', 'sage_setup'])\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[3]>\", line 2, in <module>\n        SAGE_SRC, ['sage', 'sage_setup'])\n    ValueError: too many values to unpack (expected 2)\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 92, in sage_setup.clean._find_stale_files\nFailed example:\n    stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[6]>\", line 1, in <module>\n        stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)\n    NameError: name 'python_packages' is not defined\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 95, in sage_setup.clean._find_stale_files\nFailed example:\n    for f in stale_iter:\n        if f.endswith(skip_extensions): continue\n        if '/ext_data/' in f: continue\n        print('Found stale file: ' + f)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[9]>\", line 1, in <module>\n        for f in stale_iter:\n    NameError: name 'stale_iter' is not defined\n**********************************************************************\n1 item had failures:\n   3 of  11 in sage_setup.clean._find_stale_files\n    [17 tests, 3 failures, 0.03 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py  # 3 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-02T22:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581546",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:53'></a>
```
sage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py
**********************************************************************
File "src/sage_setup/clean.py", line 83, in sage_setup.clean._find_stale_files
Failed example:
    python_packages, python_modules = find_python_sources(
        SAGE_SRC, ['sage', 'sage_setup'])
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[3]>", line 2, in <module>
        SAGE_SRC, ['sage', 'sage_setup'])
    ValueError: too many values to unpack (expected 2)
**********************************************************************
File "src/sage_setup/clean.py", line 92, in sage_setup.clean._find_stale_files
Failed example:
    stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[6]>", line 1, in <module>
        stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)
    NameError: name 'python_packages' is not defined
**********************************************************************
File "src/sage_setup/clean.py", line 95, in sage_setup.clean._find_stale_files
Failed example:
    for f in stale_iter:
        if f.endswith(skip_extensions): continue
        if '/ext_data/' in f: continue
        print('Found stale file: ' + f)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[9]>", line 1, in <module>
        for f in stale_iter:
    NameError: name 'stale_iter' is not defined
**********************************************************************
1 item had failures:
   3 of  11 in sage_setup.clean._find_stale_files
    [17 tests, 3 failures, 0.03 s]
----------------------------------------------------------------------
sage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py  # 3 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_581547.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-02T22:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581547",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_581548.json:
```json
{
    "body": "Changing commit from \"d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8\" to \"55c3fbc565fd7884f3df9555de83dd326ace276e\"",
    "created_at": "2020-08-03T00:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8" to "55c3fbc565fd7884f3df9555de83dd326ace276e"



---

archive/issue_comments_581549.json:
```json
{
    "body": "<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-03T00:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_581550.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-03T00:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581550",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_581551.json:
```json
{
    "body": "Changing dependencies from \"#29702, #29786, #29790, #29791\" to \"\"",
    "created_at": "2020-08-03T00:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581551",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29702, #29786, #29790, #29791" to ""



---

archive/issue_comments_581552.json:
```json
{
    "body": "<a id='comment:57'></a>Back to positive.",
    "created_at": "2020-08-03T05:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581552",
    "user": "https://github.com/kliem"
}
```

<a id='comment:57'></a>Back to positive.



---

archive/issue_comments_581553.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-03T05:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581553",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_581554.json:
```json
{
    "body": "<a id='comment:58'></a>Thanks!",
    "created_at": "2020-08-03T17:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581554",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'></a>Thanks!



---

archive/issue_comments_581555.json:
```json
{
    "body": "<a id='comment:59'></a>\n```\n[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds\n[dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed\n[dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n[dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.\n[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n[dochtml]     \"__main__\", mod_spec)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 85, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1721, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n[dochtml]     build_many(build_ref_doc, non_references)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n[dochtml]     _build_many(target, args, processes=NUM_THREADS)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n[dochtml]     raise worker_exc.original_exception\n[dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n[dochtml] \n[dochtml]     Note: incremental documentation builds sometimes cause spurious\n[dochtml]     error messages. To be certain that these are real errors, run\n[dochtml]     \"make doc-clean\" first and try again.\nmake[3]: *** [Makefile:1816: doc-html] Error 1\nmake[3]: Leaving directory '/home/release/Sage/build/make'\nmake[2]: *** [Makefile:1707: all-start] Error 2\nmake[2]: Leaving directory '/home/release/Sage/build/make'\n```",
    "created_at": "2020-08-04T22:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581555",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:59'></a>
```
[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds
[dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed
[dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
[dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.
[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
[dochtml]     "__main__", mod_spec)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 85, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1721, in main
[dochtml]     builder()
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
[dochtml]     build_many(build_ref_doc, non_references)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
[dochtml]     _build_many(target, args, processes=NUM_THREADS)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
[dochtml]     raise worker_exc.original_exception
[dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
[dochtml] 
[dochtml]     Note: incremental documentation builds sometimes cause spurious
[dochtml]     error messages. To be certain that these are real errors, run
[dochtml]     "make doc-clean" first and try again.
make[3]: *** [Makefile:1816: doc-html] Error 1
make[3]: Leaving directory '/home/release/Sage/build/make'
make[2]: *** [Makefile:1707: all-start] Error 2
make[2]: Leaving directory '/home/release/Sage/build/make'
```



---

archive/issue_comments_581556.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-04T22:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581556",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_581557.json:
```json
{
    "body": "<a id='comment:60'></a>Replying to [comment:59 vbraun]:\n> {{{\n> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds\n> [dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed\n> [dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n> [dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.\n> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup\n> [dochtml] Error building the documentation.\n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n> [dochtml]     \"__main__\", mod_spec)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 85, in _run_code\n> [dochtml]     exec(code, run_globals)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n> [dochtml]     main()\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1721, in main\n> [dochtml]     builder()\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n> [dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n> [dochtml]     build_many(build_ref_doc, non_references)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n> [dochtml]     _build_many(target, args, processes=NUM_THREADS)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n> [dochtml]     raise worker_exc.original_exception\n> [dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n> [dochtml] \n> [dochtml]     Note: incremental documentation builds sometimes cause spurious\n> [dochtml]     error messages. To be certain that these are real errors, run\n> [dochtml]     \"make doc-clean\" first and try again.\n> make[3]: *** [Makefile:1816: doc-html] Error 1\n> make[3]: Leaving directory '/home/release/Sage/build/make'\n> make[2]: *** [Makefile:1707: all-start] Error 2\n> make[2]: Leaving directory '/home/release/Sage/build/make'\n> }}}\n\n\nAre you sure? I thought it would have come from either #30240 or #30260 since they both touch \"distance_regular\".",
    "created_at": "2020-08-04T22:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581557",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:60'></a>Replying to [comment:59 vbraun]:
> {{{
> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds
> [dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed
> [dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
> [dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.
> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup
> [dochtml] Error building the documentation.
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
> [dochtml]     "__main__", mod_spec)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 85, in _run_code
> [dochtml]     exec(code, run_globals)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
> [dochtml]     main()
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1721, in main
> [dochtml]     builder()
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
> [dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
> [dochtml]     build_many(build_ref_doc, non_references)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
> [dochtml]     _build_many(target, args, processes=NUM_THREADS)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
> [dochtml]     raise worker_exc.original_exception
> [dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
> [dochtml] 
> [dochtml]     Note: incremental documentation builds sometimes cause spurious
> [dochtml]     error messages. To be certain that these are real errors, run
> [dochtml]     "make doc-clean" first and try again.
> make[3]: *** [Makefile:1816: doc-html] Error 1
> make[3]: Leaving directory '/home/release/Sage/build/make'
> make[2]: *** [Makefile:1707: all-start] Error 2
> make[2]: Leaving directory '/home/release/Sage/build/make'
> }}}


Are you sure? I thought it would have come from either #30240 or #30260 since they both touch "distance_regular".



---

archive/issue_comments_581558.json:
```json
{
    "body": "<a id='comment:61'></a>#30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`",
    "created_at": "2020-08-04T22:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581558",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>#30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`



---

archive/issue_comments_581559.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-04T22:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581559",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_581560.json:
```json
{
    "body": "<a id='comment:63'></a>Replying to [comment:61 mkoeppe]:\n> #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`\n> \n\nit used to be broken, but IMHO it's fixed by #30240#comment:32",
    "created_at": "2020-08-04T22:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581560",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:63'></a>Replying to [comment:61 mkoeppe]:
> #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`
> 

it used to be broken, but IMHO it's fixed by #30240#comment:32



---

archive/issue_comments_581561.json:
```json
{
    "body": "<a id='comment:64'></a>Replying to [comment:63 dimpase]:\n> Replying to [comment:61 mkoeppe]:\n> > #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`\n> > \n\n> it used to be broken, but IMHO it's fixed by #30240#comment:32\n\nUnfortunately Volker merged before that.",
    "created_at": "2020-08-04T22:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581561",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:64'></a>Replying to [comment:63 dimpase]:
> Replying to [comment:61 mkoeppe]:
> > #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`
> > 

> it used to be broken, but IMHO it's fixed by #30240#comment:32

Unfortunately Volker merged before that.



---

archive/issue_comments_581562.json:
```json
{
    "body": "<a id='comment:65'></a>#30240 does not even have #30260 as a dependency...",
    "created_at": "2020-08-04T23:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581562",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>#30240 does not even have #30260 as a dependency...



---

archive/issue_comments_581563.json:
```json
{
    "body": "<a id='comment:66'></a>Replying to [comment:65 mkoeppe]:\n> #30240 does not even have #30260 as a dependency...\n\nShould it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.\nI apologise for the confusion but when #30240 went from \"positive review\" to \"needs work\" and I forgot to update #30260.",
    "created_at": "2020-08-05T09:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581563",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:66'></a>Replying to [comment:65 mkoeppe]:
> #30240 does not even have #30260 as a dependency...

Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.
I apologise for the confusion but when #30240 went from "positive review" to "needs work" and I forgot to update #30260.



---

archive/issue_comments_581564.json:
```json
{
    "body": "<a id='comment:67'></a>Replying to [comment:66 gh-Ivo-Maffei]:\n> Replying to [comment:65 mkoeppe]:\n> > #30240 does not even have #30260 as a dependency...\n\n> Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.\n> I apologise for the confusion but when #30240 went from \"positive review\" to \"needs work\" and I forgot to update #30260.\n\nThat's alright -- thanks for the fast reaction and fix!",
    "created_at": "2020-08-05T14:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581564",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:67'></a>Replying to [comment:66 gh-Ivo-Maffei]:
> Replying to [comment:65 mkoeppe]:
> > #30240 does not even have #30260 as a dependency...

> Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.
> I apologise for the confusion but when #30240 went from "positive review" to "needs work" and I forgot to update #30260.

That's alright -- thanks for the fast reaction and fix!



---

archive/issue_comments_581565.json:
```json
{
    "body": "<a id='comment:68'></a>\n```\nsage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py\n**********************************************************************\nFile \"src/sage_setup/find.py\", line 215, in sage_setup.find.find_extra_files\nFailed example:\n    extras[\"sage/ext/interpreters\"]\nExpected:\n    ['.../src/sage/ext/interpreters/wrapper_cdf.pxd', ...wrapper_cdf.h...]\nGot:\n    ['/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pyx']\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage_setup.find.find_extra_files\n    [36 tests, 1 failure, 0.27 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-08T09:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581565",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:68'></a>
```
sage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py
**********************************************************************
File "src/sage_setup/find.py", line 215, in sage_setup.find.find_extra_files
Failed example:
    extras["sage/ext/interpreters"]
Expected:
    ['.../src/sage/ext/interpreters/wrapper_cdf.pxd', ...wrapper_cdf.h...]
Got:
    ['/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pyx']
**********************************************************************
1 item had failures:
   1 of   7 in sage_setup.find.find_extra_files
    [36 tests, 1 failure, 0.27 s]
----------------------------------------------------------------------
sage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_581566.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-08T09:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581566",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_581567.json:
```json
{
    "body": "<a id='comment:69'></a>Might have been from #29950",
    "created_at": "2020-08-08T12:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581567",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:69'></a>Might have been from #29950



---

archive/issue_comments_581568.json:
```json
{
    "body": "<a id='comment:70'></a>Yes, it's #29950 that broke it.",
    "created_at": "2020-08-08T20:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581568",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>Yes, it's #29950 that broke it.



---

archive/issue_comments_581569.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-08T20:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581569",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_581570.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-10T18:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581570",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075950.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-10T18:50:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29701#event-75950"
}
```



---

archive/issue_comments_581571.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/replace_use_of_module_list_optionalextension\" to \"55c3fbc565fd7884f3df9555de83dd326ace276e\"",
    "created_at": "2020-08-10T18:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29701#issuecomment-581571",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/replace_use_of_module_list_optionalextension" to "55c3fbc565fd7884f3df9555de83dd326ace276e"
