# Issue 29701: Replace use of module_list and OptionalExtension by extending find_python_sources

archive/issues_029464.json:
```json
{
    "assignees": [],
    "body": "We add two new features to `find_python_sources`: finding Cython extensions, and filtering by \"distributions\".\n\nWe remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n\nWe remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n\nFollow-up tickets:\n- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages that provide namespace packages (#28925)\n- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)\n\n\n\n\nCC:  @kiwifb @isuruf @videlec @dcoudert @dimpase @kliem @vbraun\n\nBranch/Commit: **[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)**\n\nReviewer: **Jonathan Kliem**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29701_\n\n",
    "closed_at": "2020-08-10T18:50:17Z",
    "created_at": "2020-05-17T16:26:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Replace use of module_list and OptionalExtension by extending find_python_sources",
    "type": "issue",
    "updated_at": "2020-08-10T18:50:17Z",
    "url": "https://github.com/sagemath/sage/issues/29701",
    "user": "https://github.com/mkoeppe"
}
```
We add two new features to `find_python_sources`: finding Cython extensions, and filtering by "distributions".

We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)

We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.

Follow-up tickets:
- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages that provide namespace packages (#28925)
- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)




CC:  @kiwifb @isuruf @videlec @dcoudert @dimpase @kliem @vbraun

Branch/Commit: **[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)**

Reviewer: **Jonathan Kliem**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/29701_





---

archive/issue_events_390398.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T16:26:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390398"
}
```



---

archive/issue_events_390399.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T16:26:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390399"
}
```



---

archive/issue_events_390400.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T16:26:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390400"
}
```



---

archive/issue_events_390401.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T16:26:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390401"
}
```



---

archive/issue_events_390402.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T17:30:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "title_is": "Meta-ticket: Replace use of OptionalExtension by namespace packages",
    "title_was": "Replace use of OptionalExtension by namespace packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390402"
}
```



---

archive/issue_comments_470979.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n+Preparation:\n+- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages\n \n+\n``````\n",
    "created_at": "2020-05-17T17:30:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470979",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
+Preparation:
+- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages
 
+
``````




---

archive/issue_comments_470980.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Preparation:\n - #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages\n+- #29702 Move all code from src/setup.py to sage_setup\n \n-\n``````\n",
    "created_at": "2020-05-17T17:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470980",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Preparation:
 - #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages
+- #29702 Move all code from src/setup.py to sage_setup
 
-
``````




---

archive/issue_comments_470981.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,16 @@\n Preparation:\n-- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages\n-- #29702 Move all code from src/setup.py to sage_setup\n+- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages\n+- #29702 Move all code from `src/setup.py` to `sage_setup`\n \n+Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n+- `sage.graphs.mcqd`\n+- `sage.graphs.bliss`\n+- `sage.graphs.graph_decompositions.tdlib`\n+- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)\n+- `sage.libs.coxeter3.coxeter`\n+- `sage.libs.fes`\n+- `sage.libs.sirocco`\n+- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`\n+\n+\n+\n``````\n",
    "created_at": "2020-05-17T19:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470981",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,16 @@
 Preparation:
-- #28925 Modify clean_stale_files to support modularization of sagelib by namespace packages
-- #29702 Move all code from src/setup.py to sage_setup
+- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages
+- #29702 Move all code from `src/setup.py` to `sage_setup`
 
+Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
+- `sage.graphs.mcqd`
+- `sage.graphs.bliss`
+- `sage.graphs.graph_decompositions.tdlib`
+- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)
+- `sage.libs.coxeter3.coxeter`
+- `sage.libs.fes`
+- `sage.libs.sirocco`
+- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`
+
+
+
``````




---

archive/issue_comments_470982.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n - `sage.graphs.mcqd`\n - `sage.graphs.bliss`\n-- `sage.graphs.graph_decompositions.tdlib`\n+- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)\n - `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)\n - `sage.libs.coxeter3.coxeter`\n - `sage.libs.fes`\n``````\n",
    "created_at": "2020-05-17T21:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470982",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
 - `sage.graphs.mcqd`
 - `sage.graphs.bliss`
-- `sage.graphs.graph_decompositions.tdlib`
+- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)
 - `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)
 - `sage.libs.coxeter3.coxeter`
 - `sage.libs.fes`
``````




---

archive/issue_comments_470983.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n Preparation:\n - #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages\n+- Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n``````\n",
    "created_at": "2020-05-18T00:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470983",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
 Preparation:
 - #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages
+- Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
 Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
``````




---

archive/issue_comments_470984.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,9 @@\n+Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.\n+\n+With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).\n+\n Preparation:\n-- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages\n+- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-05-19T04:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470984",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,9 @@
+Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.
+
+With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).
+
 Preparation:
-- #28925 Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages
+- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_470985.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).\n \n Preparation:\n-- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)\n+- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-05-19T04:41:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470985",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).
 
 Preparation:
-- #28925 Modify find_python_sources, clean_stale_files to support modularization of sagelib by native namespace packages (PEP 420)
+- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_470986.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,7 @@\n \n Preparation:\n - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n+- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-05-20T22:54:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470986",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,7 @@
 
 Preparation:
 - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
+- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_470987.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n Preparation:\n - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n-- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.\n+- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.\n - Remove empty  `__init__.py` files to convert packages to native namespace packages\n - #29702 Move all code from `src/setup.py` to `sage_setup`\n \n``````\n",
    "created_at": "2020-06-03T18:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470987",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 Preparation:
 - #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
-- Map installed packages/features to virtual `sage_packages` (for example, `tdlib` -> `sage_tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `sage_packages` to `find_python_sources`.
+- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.
 - Remove empty  `__init__.py` files to convert packages to native namespace packages
 - #29702 Move all code from `src/setup.py` to `sage_setup`
 
``````




---

archive/issue_comments_470988.json:
```json
{
    "body": "Dependencies: **#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925**",
    "created_at": "2020-06-03T22:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470988",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925**



---

archive/issue_events_390403.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-03T22:09:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "title_is": "Replace use of module_list and OptionalExtension by extending find_python_sources",
    "title_was": "Meta-ticket: Replace use of OptionalExtension by namespace packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390403"
}
```



---

archive/issue_comments_470989.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,22 +1,7 @@\n-Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.\n+Using the extended `find_python_sources` from #28925, \n+we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n \n-With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).\n+We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n-Preparation:\n-- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)\n-- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.\n-- Remove empty  `__init__.py` files to convert packages to native namespace packages\n-- #29702 Move all code from `src/setup.py` to `sage_setup`\n+(In a follow-up ticket, part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages.)\n \n-Tickets for individual `OptionalExtension`s (see `src/module_list.py`):\n-- `sage.graphs.mcqd`\n-- `sage.graphs.bliss`\n-- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)\n-- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)\n-- `sage.libs.coxeter3.coxeter`\n-- `sage.libs.fes`\n-- `sage.libs.sirocco`\n-- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`\n-\n-\n-\n``````\n",
    "created_at": "2020-06-03T22:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470989",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,22 +1,7 @@
-Currently, a user would install, for example, the optional package `tdlib` and then rebuild `sagelib` so that the `OptionalExtension` `sage.graphs.graph_decompositions.tdlib` is built and installed.
+Using the extended `find_python_sources` from #28925, 
+we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
 
-With this ticket, the user would instead install a new optional package `sage_tdlib` (which has `tdlib` as a dependency); this installs the `Extension` `sage.graphs.graph_decompositions.tdlib` (as a namespace package).
+We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
-Preparation:
-- #28925 Modify `find_python_sources`, `clean_stale_files` to support modularization of sagelib by native namespace packages (PEP 420)
-- Map installed packages/features to virtual `distributions` (for example, `tdlib` -> `sage-tdlib`), replace `module_list.py` and the `OptionalExtension` mechanism by passing `distributions` to `find_python_sources`.
-- Remove empty  `__init__.py` files to convert packages to native namespace packages
-- #29702 Move all code from `src/setup.py` to `sage_setup`
+(In a follow-up ticket, part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages.)
 
-Tickets for individual `OptionalExtension`s (see `src/module_list.py`):
-- `sage.graphs.mcqd`
-- `sage.graphs.bliss`
-- `sage.graphs.graph_decompositions.tdlib` (used as an example in #28925)
-- `sage.interfaces.primecount` (how come this is not in `sage.libs`, where `primecount.pxd` lives?)
-- `sage.libs.coxeter3.coxeter`
-- `sage.libs.fes`
-- `sage.libs.sirocco`
-- `sage.libs.meataxe`, `sage.matrix.matrix_gfpn_dense`
-
-
-
``````




---

archive/issue_comments_470990.json:
```json
{
    "body": "Branch: **[u/mkoeppe/replace_use_of_module_list_optionalextension](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/replace_use_of_module_list_optionalextension)**",
    "created_at": "2020-06-03T22:10:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470990",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/replace_use_of_module_list_optionalextension](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/replace_use_of_module_list_optionalextension)**



---

archive/issue_comments_470991.json:
```json
{
    "body": "Commit: **[891d12a](https://github.com/sagemath/sagetrac-mirror/commit/891d12aeacd439cd72e31d42399826f48dae624f)**",
    "created_at": "2020-06-03T22:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470991",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[891d12a](https://github.com/sagemath/sagetrac-mirror/commit/891d12aeacd439cd72e31d42399826f48dae624f)**



---

archive/issue_comments_470992.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4365e5d772cabee22c9eb269b44eeed5788ae5ea\">4365e5d</a></td><td><code>Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29705/META-modularize-sagelib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9dc702211964cd029cb26bc78db645be22ac4416\">9dc7022</a></td><td><code>Merge branch 't/29706/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files' into t/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f78b06db0842b68a30310ad5471845478eb10e10\">f78b06d</a></td><td><code>src/module_list.py: Move options for Extensions in sage.libs to distutils directives</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b0e29d6a6001a0d1e5a56161e0df3d80da3118a\">1b0e29d</a></td><td><code>src/module_list.py: Move options for Extensions in sage.matrix to distutils directives</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6421e2c85409fef5a539299d96145e3a088826bf\">6421e2c</a></td><td><code>src/module_list.py: Move remaining options for Extensions in sage.libs, sage.rings to distutils directives</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3d3d2f3baa0e1700c51b7df58a5af1aeba5acc4\">b3d3d2f</a></td><td><code>Merge branch 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29705/META-modularize-sagelib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28219340dd0eb3d939dcd0c7e9fbc89133490a0c\">2821934</a></td><td><code>Fix sage_setup directives: Use distribution, not package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9052db45107872fd3683097061ee0b4edeefdaf4\">9052db4</a></td><td><code>Merge branch 't/29720/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_2___optionalextensions_' into t/29705/META-modularize-sagelib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff710ee3e994c26f0a7619438f94b218f0bcb406\">ff710ee</a></td><td><code>src/sage_setup/optional_extension.py (is_package_installed_and_updated): Factor out from OptionalExtension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/891d12aeacd439cd72e31d42399826f48dae624f\">891d12a</a></td><td><code>src/setup.py: Remove use of module_list.py; filter by distributions</code></td></tr></table>\n",
    "created_at": "2020-06-03T22:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470992",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">Comment 12</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4365e5d772cabee22c9eb269b44eeed5788ae5ea">4365e5d</a></td><td><code>Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29705/META-modularize-sagelib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9dc702211964cd029cb26bc78db645be22ac4416">9dc7022</a></td><td><code>Merge branch 't/29706/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files' into t/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f78b06db0842b68a30310ad5471845478eb10e10">f78b06d</a></td><td><code>src/module_list.py: Move options for Extensions in sage.libs to distutils directives</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b0e29d6a6001a0d1e5a56161e0df3d80da3118a">1b0e29d</a></td><td><code>src/module_list.py: Move options for Extensions in sage.matrix to distutils directives</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6421e2c85409fef5a539299d96145e3a088826bf">6421e2c</a></td><td><code>src/module_list.py: Move remaining options for Extensions in sage.libs, sage.rings to distutils directives</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3d3d2f3baa0e1700c51b7df58a5af1aeba5acc4">b3d3d2f</a></td><td><code>Merge branch 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29705/META-modularize-sagelib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28219340dd0eb3d939dcd0c7e9fbc89133490a0c">2821934</a></td><td><code>Fix sage_setup directives: Use distribution, not package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9052db45107872fd3683097061ee0b4edeefdaf4">9052db4</a></td><td><code>Merge branch 't/29720/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_2___optionalextensions_' into t/29705/META-modularize-sagelib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff710ee3e994c26f0a7619438f94b218f0bcb406">ff710ee</a></td><td><code>src/sage_setup/optional_extension.py (is_package_installed_and_updated): Factor out from OptionalExtension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/891d12aeacd439cd72e31d42399826f48dae624f">891d12a</a></td><td><code>src/setup.py: Remove use of module_list.py; filter by distributions</code></td></tr></table>




---

archive/issue_comments_470993.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n-Using the extended `find_python_sources` from #28925, \n-we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n+We add two new features to `find_python_sources`: finding Cython extensions, and filtering by \"distributions\".\n+ \n+We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n \n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n``````\n",
    "created_at": "2020-06-03T22:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470993",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
-Using the extended `find_python_sources` from #28925, 
-we remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
+We add two new features to `find_python_sources`: finding Cython extensions, and filtering by "distributions".
+ 
+We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
 
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
``````




---

archive/issue_comments_470994.json:
```json
{
    "body": "Changed dependencies from **#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925** to **#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791**",
    "created_at": "2020-06-03T22:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470994",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791, #28925** to **#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791**



---

archive/issue_comments_470995.json:
```json
{
    "body": "Changed dependencies from **#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791** to **#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791**",
    "created_at": "2020-06-03T22:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470995",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29411, #29702, #29706, #29720, #29721, #29785, #29786, #29790, #29791** to **#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791**



---

archive/issue_comments_470996.json:
```json
{
    "body": "Changed commit from **[891d12a](https://github.com/sagemath/sagetrac-mirror/commit/891d12aeacd439cd72e31d42399826f48dae624f)** to **[ec7e9c5](https://github.com/sagemath/sagetrac-mirror/commit/ec7e9c599aebbec9b8a9227399cf6b8793dccd72)**",
    "created_at": "2020-06-03T22:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470996",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[891d12a](https://github.com/sagemath/sagetrac-mirror/commit/891d12aeacd439cd72e31d42399826f48dae624f)** to **[ec7e9c5](https://github.com/sagemath/sagetrac-mirror/commit/ec7e9c599aebbec9b8a9227399cf6b8793dccd72)**



---

archive/issue_comments_470997.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0295c8f09cb6e01f60694084cfe758152041b68b\">0295c8f</a></td><td><code>src/module_list.py: Move options for Extensions in sage.graphs.graph_decompositions to distutils directives</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b582789cc861ab8231236e33de8c1e400b1b864a\">b582789</a></td><td><code>src/sage_setup/find.py: Filter by directive 'sage_setup: distribution = PKG', find Cython modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63c64d515784312451586e9930393a2d575b5d0e\">63c64d5</a></td><td><code>Merge branches 't/29720/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_2___optionalextensions_', 't/29721/spkg_configure_m4_for_coxeter3', 't/29785/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_3__get_rid_of_uname_specific_', 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_', 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' and 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae70c81c7a3a8c2713330cb407bbc08dac27bb5e\">ae70c81</a></td><td><code>src/sage_setup/optional_extension.py (is_package_installed_and_updated): Factor out from OptionalExtension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec7e9c599aebbec9b8a9227399cf6b8793dccd72\">ec7e9c5</a></td><td><code>src/setup.py: Remove use of module_list.py; filter by distributions</code></td></tr></table>\n",
    "created_at": "2020-06-03T22:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470997",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0295c8f09cb6e01f60694084cfe758152041b68b">0295c8f</a></td><td><code>src/module_list.py: Move options for Extensions in sage.graphs.graph_decompositions to distutils directives</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b582789cc861ab8231236e33de8c1e400b1b864a">b582789</a></td><td><code>src/sage_setup/find.py: Filter by directive 'sage_setup: distribution = PKG', find Cython modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63c64d515784312451586e9930393a2d575b5d0e">63c64d5</a></td><td><code>Merge branches 't/29720/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_2___optionalextensions_', 't/29721/spkg_configure_m4_for_coxeter3', 't/29785/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_3__get_rid_of_uname_specific_', 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_', 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' and 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae70c81c7a3a8c2713330cb407bbc08dac27bb5e">ae70c81</a></td><td><code>src/sage_setup/optional_extension.py (is_package_installed_and_updated): Factor out from OptionalExtension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec7e9c599aebbec9b8a9227399cf6b8793dccd72">ec7e9c5</a></td><td><code>src/setup.py: Remove use of module_list.py; filter by distributions</code></td></tr></table>




---

archive/issue_comments_470998.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nNo longer on top of #28925, so no namespace package are involved any more for this ticket.",
    "created_at": "2020-06-03T22:54:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470998",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">Comment 15</div>

No longer on top of #28925, so no namespace package are involved any more for this ticket.



---

archive/issue_comments_470999.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,9 @@\n \n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n-(In a follow-up ticket, part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages.)\n+Follow-up tickets:\n+- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages\n+- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)\n \n+\n+\n``````\n",
    "created_at": "2020-06-03T22:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-470999",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,9 @@
 
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
-(In a follow-up ticket, part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages.)
+Follow-up tickets:
+- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages
+- remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)
 
+
+
``````




---

archive/issue_comments_471000.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-06-03T22:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471000",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_390404.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-03T22:56:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390404"
}
```



---

archive/issue_comments_471001.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n We add two new features to `find_python_sources`: finding Cython extensions, and filtering by \"distributions\".\n- \n+\n We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)\n \n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n``````\n",
    "created_at": "2020-06-03T22:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471001",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 We add two new features to `find_python_sources`: finding Cython extensions, and filtering by "distributions".
- 
+
 We remove the use of `module_list`, finding Cython extensions instead in the source tree.  (This is prepared by #29706 and follow-up tickets by moving Extension options to directives in the source files.)
 
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
``````




---

archive/issue_comments_471002.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n We remove `OptionalExtension`s as follows. We map installed packages to \"distributions\" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.\n \n Follow-up tickets:\n-- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages\n+- as part of Meta-ticket #29705, we will make these \"distributions\" actually separate distutils packages that provide namespace packages (#28925)\n - remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)\n \n \n``````\n",
    "created_at": "2020-06-03T23:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471002",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 We remove `OptionalExtension`s as follows. We map installed packages to "distributions" (for example, `tdlib` -> `sage-tdlib`) and then filter by distribution.
 
 Follow-up tickets:
-- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages
+- as part of Meta-ticket #29705, we will make these "distributions" actually separate distutils packages that provide namespace packages (#28925)
 - remove the file `module_list.py` (not done on this ticket to avoid possible merge conflicts), deprecate `OptionalExtension` (which may be in use by user packages?)
 
 
``````




---

archive/issue_comments_471003.json:
```json
{
    "body": "Changed commit from **[ec7e9c5](https://github.com/sagemath/sagetrac-mirror/commit/ec7e9c599aebbec9b8a9227399cf6b8793dccd72)** to **[25a2340](https://github.com/sagemath/sagetrac-mirror/commit/25a234059991c56df9b046700980cb1d194a32e5)**",
    "created_at": "2020-06-04T00:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471003",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ec7e9c5](https://github.com/sagemath/sagetrac-mirror/commit/ec7e9c599aebbec9b8a9227399cf6b8793dccd72)** to **[25a2340](https://github.com/sagemath/sagetrac-mirror/commit/25a234059991c56df9b046700980cb1d194a32e5)**



---

archive/issue_comments_471004.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38b6bcfa65c52d0cc07d1eaf66ece3e6d586dc05\">38b6bcf</a></td><td><code>Merge tag '9.2.beta0' into t/29411/make_sagelib_a_script_package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9a30f60f7bcd47b5e3c781f0ad625e315765cea\">f9a30f6</a></td><td><code>build/pkgs/sagelib/spkg-install: Fix up error exits</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00a1d57d06a8b3e4bbf67876900e8c6d24a33cc2\">00a1d57</a></td><td><code>Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25a234059991c56df9b046700980cb1d194a32e5\">25a2340</a></td><td><code>Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>\n",
    "created_at": "2020-06-04T00:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471004",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19" align="right">Comment 19</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38b6bcfa65c52d0cc07d1eaf66ece3e6d586dc05">38b6bcf</a></td><td><code>Merge tag '9.2.beta0' into t/29411/make_sagelib_a_script_package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9a30f60f7bcd47b5e3c781f0ad625e315765cea">f9a30f6</a></td><td><code>build/pkgs/sagelib/spkg-install: Fix up error exits</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00a1d57d06a8b3e4bbf67876900e8c6d24a33cc2">00a1d57</a></td><td><code>Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25a234059991c56df9b046700980cb1d194a32e5">25a2340</a></td><td><code>Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>




---

archive/issue_comments_471005.json:
```json
{
    "body": "Changed commit from **[25a2340](https://github.com/sagemath/sagetrac-mirror/commit/25a234059991c56df9b046700980cb1d194a32e5)** to **[2d866a3](https://github.com/sagemath/sagetrac-mirror/commit/2d866a3bab2a1d55bc85fcae4f30d384498bcc12)**",
    "created_at": "2020-06-04T02:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471005",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[25a2340](https://github.com/sagemath/sagetrac-mirror/commit/25a234059991c56df9b046700980cb1d194a32e5)** to **[2d866a3](https://github.com/sagemath/sagetrac-mirror/commit/2d866a3bab2a1d55bc85fcae4f30d384498bcc12)**



---

archive/issue_comments_471006.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d866a3bab2a1d55bc85fcae4f30d384498bcc12\">2d866a3</a></td><td><code>src/sage/graphs/graph_decompositions/tdlib.pyx: Fixup</code></td></tr></table>\n",
    "created_at": "2020-06-04T02:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471006",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d866a3bab2a1d55bc85fcae4f30d384498bcc12">2d866a3</a></td><td><code>src/sage/graphs/graph_decompositions/tdlib.pyx: Fixup</code></td></tr></table>




---

archive/issue_comments_471007.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1b378712d10cb15555889e8235d089f3cf0e391\">b1b3787</a></td><td><code>sage.env.cython_aliases: Fix for systems without zlib pc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/802356ae870f2e798a223df2f3fc5512b4aeb693\">802356a</a></td><td><code>Merge branch 't/29706/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files' into t/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319\">3beb5b7</a></td><td><code>Merge branch 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>\n",
    "created_at": "2020-06-07T18:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471007",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1b378712d10cb15555889e8235d089f3cf0e391">b1b3787</a></td><td><code>sage.env.cython_aliases: Fix for systems without zlib pc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/802356ae870f2e798a223df2f3fc5512b4aeb693">802356a</a></td><td><code>Merge branch 't/29706/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files' into t/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319">3beb5b7</a></td><td><code>Merge branch 't/29791/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_6__last_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>




---

archive/issue_comments_471008.json:
```json
{
    "body": "Changed commit from **[2d866a3](https://github.com/sagemath/sagetrac-mirror/commit/2d866a3bab2a1d55bc85fcae4f30d384498bcc12)** to **[3beb5b7](https://github.com/sagemath/sagetrac-mirror/commit/3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319)**",
    "created_at": "2020-06-07T18:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471008",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2d866a3](https://github.com/sagemath/sagetrac-mirror/commit/2d866a3bab2a1d55bc85fcae4f30d384498bcc12)** to **[3beb5b7](https://github.com/sagemath/sagetrac-mirror/commit/3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319)**



---

archive/issue_comments_471009.json:
```json
{
    "body": "Changed commit from **[3beb5b7](https://github.com/sagemath/sagetrac-mirror/commit/3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319)** to **[7f8850a](https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468)**",
    "created_at": "2020-06-07T18:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471009",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3beb5b7](https://github.com/sagemath/sagetrac-mirror/commit/3beb5b71e8a04fd932aaa0d83d50b2ef11d7c319)** to **[7f8850a](https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468)**



---

archive/issue_comments_471010.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468\">7f8850a</a></td><td><code>src/module_list.py: Document that it is obsolete</code></td></tr></table>\n",
    "created_at": "2020-06-07T18:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471010",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468">7f8850a</a></td><td><code>src/module_list.py: Document that it is obsolete</code></td></tr></table>




---

archive/issue_comments_471011.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5db53186b9ae9a546bc78fc9107cc1af713b7e24\">5db5318</a></td><td><code>Trac #29345: remove \"break\" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e810ad1596d527c832bf43d3aac745407c9ba98d\">e810ad1</a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93c9921cc5ff461cd1f02f441b46cea4400dcd85\">93c9921</a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc\">0e66a0a</a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df3f05e03ba671dd6be502ccae96d2a6162d29d4\">df3f05e</a></td><td><code>build/make/Makefile.in [SCRIPT_PACKAGE_templ]: cd into the SPKG directory; adjust spkg-install scripts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5372065710668ae1b36d059c2cbf9b6f325239c7\">5372065</a></td><td><code>Merge branch 't/29793/script_packages_should_cd_into_the_spkg_directory' into t/29411/make_sagelib_a_script_package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c166b976775cdcd61e2b5c52a6585426f47646db\">c166b97</a></td><td><code>Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc304711ef42f25733f1ca861801d87f58fa1118\">cc30471</a></td><td><code>build/bin/write-dockerfile.sh: Do not ADD removed file src/Makefile.in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a41326ac22243bbf7f0fe57d3e8e5bc5246b436\">8a41326</a></td><td><code>Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926\">26a85a4</a></td><td><code>Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>\n",
    "created_at": "2020-06-07T20:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471011",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23" align="right">Comment 23</div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5db53186b9ae9a546bc78fc9107cc1af713b7e24">5db5318</a></td><td><code>Trac #29345: remove "break" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e810ad1596d527c832bf43d3aac745407c9ba98d">e810ad1</a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93c9921cc5ff461cd1f02f441b46cea4400dcd85">93c9921</a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc">0e66a0a</a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df3f05e03ba671dd6be502ccae96d2a6162d29d4">df3f05e</a></td><td><code>build/make/Makefile.in [SCRIPT_PACKAGE_templ]: cd into the SPKG directory; adjust spkg-install scripts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5372065710668ae1b36d059c2cbf9b6f325239c7">5372065</a></td><td><code>Merge branch 't/29793/script_packages_should_cd_into_the_spkg_directory' into t/29411/make_sagelib_a_script_package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c166b976775cdcd61e2b5c52a6585426f47646db">c166b97</a></td><td><code>Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc304711ef42f25733f1ca861801d87f58fa1118">cc30471</a></td><td><code>build/bin/write-dockerfile.sh: Do not ADD removed file src/Makefile.in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a41326ac22243bbf7f0fe57d3e8e5bc5246b436">8a41326</a></td><td><code>Merge branch 't/29411/make_sagelib_a_script_package' into t/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926">26a85a4</a></td><td><code>Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>




---

archive/issue_comments_471012.json:
```json
{
    "body": "Changed commit from **[7f8850a](https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468)** to **[26a85a4](https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926)**",
    "created_at": "2020-06-07T20:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471012",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7f8850a](https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468)** to **[26a85a4](https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926)**



---

archive/issue_comments_471013.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d5803ef5920f894bcac69ed1268e1e03ea9dd5e\">5d5803e</a></td><td><code>src/sage/graphs/planarity.pyx: Add forgotten distutils directive</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7\">a0be9b6</a></td><td><code>Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>\n",
    "created_at": "2020-06-08T02:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471013",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24" align="right">Comment 24</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d5803ef5920f894bcac69ed1268e1e03ea9dd5e">5d5803e</a></td><td><code>src/sage/graphs/planarity.pyx: Add forgotten distutils directive</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7">a0be9b6</a></td><td><code>Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>




---

archive/issue_comments_471014.json:
```json
{
    "body": "Changed commit from **[26a85a4](https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926)** to **[a0be9b6](https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7)**",
    "created_at": "2020-06-08T02:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471014",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[26a85a4](https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926)** to **[a0be9b6](https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7)**



---

archive/issue_comments_471015.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nTests run at https://github.com/mkoeppe/sage/actions/runs/128112212",
    "created_at": "2020-06-08T02:39:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471015",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">Comment 25</div>

Tests run at https://github.com/mkoeppe/sage/actions/runs/128112212



---

archive/issue_comments_471016.json:
```json
{
    "body": "Changed commit from **[a0be9b6](https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7)** to **[14396af](https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c)**",
    "created_at": "2020-06-26T16:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a0be9b6](https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7)** to **[14396af](https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c)**



---

archive/issue_comments_471017.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c\">14396af</a></td><td><code>Merge tag '9.2.beta2' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>\n",
    "created_at": "2020-06-26T16:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471017",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26" align="right">Comment 26</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c">14396af</a></td><td><code>Merge tag '9.2.beta2' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>




---

archive/issue_comments_471018.json:
```json
{
    "body": "Changed dependencies from **#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791** to **#29702 (#29411), #29786, #29790, #29791**",
    "created_at": "2020-06-26T16:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471018",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29702 (#29411), #29706, #29720, #29721, #29785, #29786, #29790, #29791** to **#29702 (#29411), #29786, #29790, #29791**



---

archive/issue_comments_471019.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nMerged in latest beta. Needs review",
    "created_at": "2020-06-26T16:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471019",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">Comment 27</div>

Merged in latest beta. Needs review



---

archive/issue_comments_471020.json:
```json
{
    "body": "Changed commit from **[14396af](https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c)** to **[d62da15](https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0)**",
    "created_at": "2020-06-28T22:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471020",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[14396af](https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c)** to **[d62da15](https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0)**



---

archive/issue_comments_471021.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0\">d62da15</a></td><td><code>sage_setup.command.sage_build: Add the extensions to the distribution</code></td></tr></table>\n",
    "created_at": "2020-06-28T22:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471021",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28" align="right">Comment 28</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0">d62da15</a></td><td><code>sage_setup.command.sage_build: Add the extensions to the distribution</code></td></tr></table>




---

archive/issue_comments_471022.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI'm a bit confused:\n\n`find_python_sources` gives you all sources including all with optional packages if `distributions=None`.\n\nHowever, if distributions is `sage-tdlib`, you get only one source file.\n\nDon't we want `find_python_sources` to contain everything except for not installed optional packages?",
    "created_at": "2020-06-29T09:37:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471022",
    "user": "https://github.com/kliem"
}
```

<div id="comment:29" align="right">Comment 29</div>

I'm a bit confused:

`find_python_sources` gives you all sources including all with optional packages if `distributions=None`.

However, if distributions is `sage-tdlib`, you get only one source file.

Don't we want `find_python_sources` to contain everything except for not installed optional packages?



---

archive/issue_comments_471023.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nReplying to [@kliem](#comment%3A29):\n> `find_python_sources` gives you all sources including all with optional packages if `distributions=None`.\n> \n> However, if distributions is `sage-tdlib`, you get only one source file.\n\nThat's right. This is a feature for modularization as in #29864 (Modularization of sagelib: Break out a separate package sage-tdlib).\n\n> Don't we want `find_python_sources` to contain everything except for not installed optional packages?\n\nFor this, one passes `distributions=['', 'sage-tdlib']`. The empty string designates all source files without a `sage_setup: distribution` directive. This list of distributions is computed in `src/setup.py`.",
    "created_at": "2020-06-29T17:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471023",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">Comment 30</div>

Replying to [@kliem](#comment%3A29):
> `find_python_sources` gives you all sources including all with optional packages if `distributions=None`.
> 
> However, if distributions is `sage-tdlib`, you get only one source file.

That's right. This is a feature for modularization as in #29864 (Modularization of sagelib: Break out a separate package sage-tdlib).

> Don't we want `find_python_sources` to contain everything except for not installed optional packages?

For this, one passes `distributions=['', 'sage-tdlib']`. The empty string designates all source files without a `sage_setup: distribution` directive. This list of distributions is computed in `src/setup.py`.



---

archive/issue_comments_471024.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nI see.\n\nI would suggest updating the benchmark. Also I can confirm this, it is not really meaningful, as this is not the normal use case, isn't it. The normal use case would be with `distributions=['']` and this takes about 500 ms and not 20 ms. Still no problem I think, but much longer.",
    "created_at": "2020-06-29T18:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471024",
    "user": "https://github.com/kliem"
}
```

<div id="comment:31" align="right">Comment 31</div>

I see.

I would suggest updating the benchmark. Also I can confirm this, it is not really meaningful, as this is not the normal use case, isn't it. The normal use case would be with `distributions=['']` and this takes about 500 ms and not 20 ms. Still no problem I think, but much longer.



---

archive/issue_comments_471025.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nOtherwise the source code looks fine. Do we have any test runs? Should I run them?",
    "created_at": "2020-06-29T18:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471025",
    "user": "https://github.com/kliem"
}
```

<div id="comment:32" align="right">Comment 32</div>

Otherwise the source code looks fine. Do we have any test runs? Should I run them?



---

archive/issue_comments_471026.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nI have tested the branch of this ticket on macOS and also as part of #29950 and other tickets.",
    "created_at": "2020-06-29T19:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471026",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">Comment 33</div>

I have tested the branch of this ticket on macOS and also as part of #29950 and other tickets.



---

archive/issue_comments_471027.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@kliem](#comment%3A31):\n> I would suggest updating the benchmark. \n\nGood idea, will do",
    "created_at": "2020-06-29T19:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471027",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@kliem](#comment%3A31):
> I would suggest updating the benchmark. 

Good idea, will do



---

archive/issue_comments_471028.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9\">06a3609</a></td><td><code>sage_setup.find.find_python_sources: Add benchmark doctest</code></td></tr></table>\n",
    "created_at": "2020-06-29T19:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471028",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35" align="right">Comment 35</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9">06a3609</a></td><td><code>sage_setup.find.find_python_sources: Add benchmark doctest</code></td></tr></table>




---

archive/issue_comments_471029.json:
```json
{
    "body": "Changed commit from **[d62da15](https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0)** to **[06a3609](https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9)**",
    "created_at": "2020-06-29T19:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471029",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d62da15](https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0)** to **[06a3609](https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9)**



---

archive/issue_comments_471030.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nAs I have capacities I started test for only this ticket:\n\nhttps://github.com/kliem/sage/pull/18/checks",
    "created_at": "2020-06-29T19:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471030",
    "user": "https://github.com/kliem"
}
```

<div id="comment:36" align="right">Comment 36</div>

As I have capacities I started test for only this ticket:

https://github.com/kliem/sage/pull/18/checks



---

archive/issue_comments_471031.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nThere is that annoying failure of sageinspect again\n\nubuntu-bionic, minimal (for example, but looks like it is anywhere)\n\n```\nFile \"src/sage/misc/sageinspect.py\", line 28, in sage.misc.sageinspect\nFailed example:\n    sage_getsource(sage.rings.rational)[5:]\nExpected:\n    'Rational Numbers...'\nGot:\n    'tutils: libraries = ntl\\nr\"\"\"\\nRational Numbers\\n\\nAUTHORS:\\n\\n- William Stein (2005): first version\\n\\n- William Stein (2006-02-22): floor and ceil (pure fast GMP versions).\\n\\n- Gonzalo Tornaria and William Stein (2006-03-02): greatly improved\\n  python/GMP conversion; hashing\\n\\n- William Stein and Naqi Jaffery (2006-03-06): height, sqrt examples,\\n  and improve behavior of sqrt.\\n\\n- David Harvey (2006-09-15): added nth_root\\n\\n- Pablo De Napoli (2007-04-01): corrected the implementations of\\n  multiplicative_order, is_one; optimized __nonzero__ ; documented:\\n  lcm,gcd\\n\\n- John Cremona (2009-05-15): added support for local and global\\n  logarithmic heights.\\n\\n- Travis Scrimshaw (2012-10-18): Added doctests for full coverage.\\n\\n- Vincent Delecroix (2013): continued fraction\\n\\n- Vincent Delecroix (2017-05-03): faster integer-rational comparison\\n\\n- Vincent Klein (2017-05-11): add __mpq__() to class Rational\\n\\n- Vincent Klein (2017-05-22): Rational constructor support gmpy2.mpq\\n  or gmpy2.mpz parameter. Add __mpz__ to class Rational.\\n\\nTESTS::\\n\\n    sage: a = -2/3\\n    sage: a == loads(dumps(a))\\n    True\\n\"\"\"\\n\\n# ****************************************************************************\\n#       Copyright (C) 2004, 2006 William Stein <wstein@gmail.com>\\n#       Copyright (C) 2017 Vincent Delecroix <20100.delecroix@gmail.com>\\n#\\n#  Distributed under the terms of the GNU General Public License (GPL)\\n#  as published by the Free Software Foundation; either version 2 of\\n#  the License, or (at your option) any later version.\\n#                  https://www.gnu.org/licenses/\\n# ****************************************************************************\\n\\ncimport cython\\nfrom cpython cimport *\\nfrom cpython.object cimport Py_EQ, Py_NE\\n\\nfrom cysignals.signals cimport sig_on, sig_off\\n\\nimport operator\\nimport fractions\\n\\nfrom sage.misc.mathml import mathml\\nfrom sage.arith.long cimport pyobject_to_long, integer_check_long_py\\nfrom sage.cpython.string cimport char_to_str, str_to_bytes\\n\\nimport sage.misc.misc as misc\\nfrom sage.structure.sage_object cimport SageObject\\nfrom sage.structure.richcmp cimport rich_to_bool_sgn\\nimport sage.rings.rational_field\\n\\ncimport sage.rings.integer as integer\\nfrom .integer cimport Integer\\n\\nfrom cypari2.paridecl cimport *\\nfrom cypari2.gen cimport Gen as pari_gen\\nfrom sage.libs.pari.convert_gmp cimport INT_to_mpz, INTFRAC_to_mpq, new_gen_from_mpq_t\\n\\nfrom .integer_ring import ZZ\\nfrom sage.arith.rational_reconstruction cimport mpq_rational_reconstruction\\n\\nfrom sage.structure.coerce cimport is_numpy_type\\n\\nfrom sage.libs.gmp.pylong cimport mpz_set_pylong\\n\\nfrom sage.structure.coerce cimport coercion_model\\nfrom sage.structure.element cimport Element\\nfrom sage.structure.element import coerce_binop\\nfrom sage.structure.parent cimport Parent\\nfrom sage.categories.morphism cimport Morphism\\nfrom sage.categories.map cimport Map\\n\\n\\n\\nimport sage.rings.real_mpfr\\nimport sage.rings.real_double\\nfrom libc.stdint cimport uint64_t\\nfrom sage.libs.gmp.binop cimport mpq_add_z, mpq_mul_z, mpq_div_zz\\n\\nfrom cpython.int cimport PyInt_AS_LONG\\n\\ncimport sage.rings.fast_arith\\nimport  sage.rings.fast_arith\\n\\ncdef sage.rings.fast_arith.arith_int ai\\nai = sage.rings.fast_arith.arith_int()\\n\\ncdef object numpy_long_interface = {\\'typestr\\': \\'=i4\\' if sizeof(long) == 4 else \\'=i8\\' }\\ncdef object numpy_int64_interface = {\\'typestr\\': \\'=i8\\'}\\ncdef object numpy_object_interface = {\\'typestr\\': \\'|O\\'}\\ncdef object numpy_double_interface = {\\'typestr\\': \\'=f8\\'}\\n\\nfrom libc.math cimport ldexp\\nfrom sage.libs.gmp.all cimport *\\n\\ncimport gmpy2\\ngmpy2.import_gmpy2()\\n\\n\\ncdef class Rational(sage.structure.element.FieldElement)\\n'\n```",
    "created_at": "2020-07-01T15:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471031",
    "user": "https://github.com/kliem"
}
```

<div id="comment:37" align="right">Comment 37</div>

There is that annoying failure of sageinspect again

ubuntu-bionic, minimal (for example, but looks like it is anywhere)

```
File "src/sage/misc/sageinspect.py", line 28, in sage.misc.sageinspect
Failed example:
    sage_getsource(sage.rings.rational)[5:]
Expected:
    'Rational Numbers...'
Got:
    'tutils: libraries = ntl\nr"""\nRational Numbers\n\nAUTHORS:\n\n- William Stein (2005): first version\n\n- William Stein (2006-02-22): floor and ceil (pure fast GMP versions).\n\n- Gonzalo Tornaria and William Stein (2006-03-02): greatly improved\n  python/GMP conversion; hashing\n\n- William Stein and Naqi Jaffery (2006-03-06): height, sqrt examples,\n  and improve behavior of sqrt.\n\n- David Harvey (2006-09-15): added nth_root\n\n- Pablo De Napoli (2007-04-01): corrected the implementations of\n  multiplicative_order, is_one; optimized __nonzero__ ; documented:\n  lcm,gcd\n\n- John Cremona (2009-05-15): added support for local and global\n  logarithmic heights.\n\n- Travis Scrimshaw (2012-10-18): Added doctests for full coverage.\n\n- Vincent Delecroix (2013): continued fraction\n\n- Vincent Delecroix (2017-05-03): faster integer-rational comparison\n\n- Vincent Klein (2017-05-11): add __mpq__() to class Rational\n\n- Vincent Klein (2017-05-22): Rational constructor support gmpy2.mpq\n  or gmpy2.mpz parameter. Add __mpz__ to class Rational.\n\nTESTS::\n\n    sage: a = -2/3\n    sage: a == loads(dumps(a))\n    True\n"""\n\n# ****************************************************************************\n#       Copyright (C) 2004, 2006 William Stein <wstein@gmail.com>\n#       Copyright (C) 2017 Vincent Delecroix <20100.delecroix@gmail.com>\n#\n#  Distributed under the terms of the GNU General Public License (GPL)\n#  as published by the Free Software Foundation; either version 2 of\n#  the License, or (at your option) any later version.\n#                  https://www.gnu.org/licenses/\n# ****************************************************************************\n\ncimport cython\nfrom cpython cimport *\nfrom cpython.object cimport Py_EQ, Py_NE\n\nfrom cysignals.signals cimport sig_on, sig_off\n\nimport operator\nimport fractions\n\nfrom sage.misc.mathml import mathml\nfrom sage.arith.long cimport pyobject_to_long, integer_check_long_py\nfrom sage.cpython.string cimport char_to_str, str_to_bytes\n\nimport sage.misc.misc as misc\nfrom sage.structure.sage_object cimport SageObject\nfrom sage.structure.richcmp cimport rich_to_bool_sgn\nimport sage.rings.rational_field\n\ncimport sage.rings.integer as integer\nfrom .integer cimport Integer\n\nfrom cypari2.paridecl cimport *\nfrom cypari2.gen cimport Gen as pari_gen\nfrom sage.libs.pari.convert_gmp cimport INT_to_mpz, INTFRAC_to_mpq, new_gen_from_mpq_t\n\nfrom .integer_ring import ZZ\nfrom sage.arith.rational_reconstruction cimport mpq_rational_reconstruction\n\nfrom sage.structure.coerce cimport is_numpy_type\n\nfrom sage.libs.gmp.pylong cimport mpz_set_pylong\n\nfrom sage.structure.coerce cimport coercion_model\nfrom sage.structure.element cimport Element\nfrom sage.structure.element import coerce_binop\nfrom sage.structure.parent cimport Parent\nfrom sage.categories.morphism cimport Morphism\nfrom sage.categories.map cimport Map\n\n\n\nimport sage.rings.real_mpfr\nimport sage.rings.real_double\nfrom libc.stdint cimport uint64_t\nfrom sage.libs.gmp.binop cimport mpq_add_z, mpq_mul_z, mpq_div_zz\n\nfrom cpython.int cimport PyInt_AS_LONG\n\ncimport sage.rings.fast_arith\nimport  sage.rings.fast_arith\n\ncdef sage.rings.fast_arith.arith_int ai\nai = sage.rings.fast_arith.arith_int()\n\ncdef object numpy_long_interface = {\'typestr\': \'=i4\' if sizeof(long) == 4 else \'=i8\' }\ncdef object numpy_int64_interface = {\'typestr\': \'=i8\'}\ncdef object numpy_object_interface = {\'typestr\': \'|O\'}\ncdef object numpy_double_interface = {\'typestr\': \'=f8\'}\n\nfrom libc.math cimport ldexp\nfrom sage.libs.gmp.all cimport *\n\ncimport gmpy2\ngmpy2.import_gmpy2()\n\n\ncdef class Rational(sage.structure.element.FieldElement)\n'
```



---

archive/issue_comments_471032.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43a9b169f4030b9a036f3c0e3f94214dbc4f6ab7\">43a9b16</a></td><td><code>src/sage/misc/sageinspect.py: Fix up doctest that depends on a modified source file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5bc828338393e248e1d9e9e9719f9ba22aa7b4e\">a5bc828</a></td><td><code>src/sage/misc/sageinspect.py: Fixup fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1baaa68a0fde79d25081c463fed8657c44a43762\">1baaa68</a></td><td><code>src/sage/misc/sageinspect.py: Remove unused import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/174626c7f81e7b9417bbad49fd110144a07165a6\">174626c</a></td><td><code>Merge branch 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a56dc35031486df9378f17c2d2ae6405946fac25\">a56dc35</a></td><td><code>Merge tag '9.2.beta1' into t/29702/public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825\">034a7f7</a></td><td><code>Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>\n",
    "created_at": "2020-07-02T03:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471032",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38" align="right">Comment 38</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43a9b169f4030b9a036f3c0e3f94214dbc4f6ab7">43a9b16</a></td><td><code>src/sage/misc/sageinspect.py: Fix up doctest that depends on a modified source file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5bc828338393e248e1d9e9e9719f9ba22aa7b4e">a5bc828</a></td><td><code>src/sage/misc/sageinspect.py: Fixup fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1baaa68a0fde79d25081c463fed8657c44a43762">1baaa68</a></td><td><code>src/sage/misc/sageinspect.py: Remove unused import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/174626c7f81e7b9417bbad49fd110144a07165a6">174626c</a></td><td><code>Merge branch 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a56dc35031486df9378f17c2d2ae6405946fac25">a56dc35</a></td><td><code>Merge tag '9.2.beta1' into t/29702/public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825">034a7f7</a></td><td><code>Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>




---

archive/issue_comments_471033.json:
```json
{
    "body": "Changed commit from **[06a3609](https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9)** to **[034a7f7](https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825)**",
    "created_at": "2020-07-02T03:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471033",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[06a3609](https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9)** to **[034a7f7](https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825)**



---

archive/issue_comments_471034.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nThanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.",
    "created_at": "2020-07-02T04:00:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471034",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">Comment 39</div>

Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.



---

archive/issue_comments_471035.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nI was wondering, where this error came from now. Good to know that it is entirely harmless.\n\nReplying to [@mkoeppe](#comment%3A39):\n> Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.",
    "created_at": "2020-07-02T05:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471035",
    "user": "https://github.com/kliem"
}
```

<div id="comment:40" align="right">Comment 40</div>

I was wondering, where this error came from now. Good to know that it is entirely harmless.

Replying to [@mkoeppe](#comment%3A39):
> Thanks for catching this. I have merged in the latest branches of the dependencies. The updated #29786 where this error came from should fix this.



---

archive/issue_events_390405.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-02T05:53:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390405"
}
```



---

archive/issue_events_390406.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-02T05:53:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390406"
}
```



---

archive/issue_comments_471036.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nLGTM.",
    "created_at": "2020-07-02T05:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471036",
    "user": "https://github.com/kliem"
}
```

<div id="comment:41" align="right">Comment 41</div>

LGTM.



---

archive/issue_comments_471037.json:
```json
{
    "body": "Reviewer: **Jonathan Kliem**",
    "created_at": "2020-07-02T05:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471037",
    "user": "https://github.com/kliem"
}
```

Reviewer: **Jonathan Kliem**



---

archive/issue_comments_471038.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nThank you!",
    "created_at": "2020-07-02T19:53:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471038",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">Comment 43</div>

Thank you!



---

archive/issue_comments_471039.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8\">d3c608b</a></td><td><code>Merge tag '9.2.beta3' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>\n",
    "created_at": "2020-07-04T16:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471039",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44" align="right">Comment 44</div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8">d3c608b</a></td><td><code>Merge tag '9.2.beta3' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr></table>




---

archive/issue_events_390407.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-07-04T16:18:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390407"
}
```



---

archive/issue_events_390408.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-07-04T16:18:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390408"
}
```



---

archive/issue_comments_471040.json:
```json
{
    "body": "Changed commit from **[034a7f7](https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825)** to **[d3c608b](https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8)**",
    "created_at": "2020-07-04T16:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471040",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[034a7f7](https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825)** to **[d3c608b](https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8)**



---

archive/issue_comments_471041.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nMerged 9.2.beta3",
    "created_at": "2020-07-04T16:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471041",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">Comment 45</div>

Merged 9.2.beta3



---

archive/issue_events_390409.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-04T16:18:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390409"
}
```



---

archive/issue_events_390410.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-04T16:18:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390410"
}
```



---

archive/issue_comments_471042.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nVolker, is there something missing on this ticket that keeps it from being merged?",
    "created_at": "2020-07-26T22:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471042",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">Comment 47</div>

Volker, is there something missing on this ticket that keeps it from being merged?



---

archive/issue_events_390411.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-02T10:27:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390411"
}
```



---

archive/issue_events_390412.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-02T10:27:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390412"
}
```



---

archive/issue_comments_471043.json:
```json
{
    "body": "Changed dependencies from **#29702 (#29411), #29786, #29790, #29791** to **#29702, #29786, #29790, #29791**",
    "created_at": "2020-08-02T18:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471043",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **#29702 (#29411), #29786, #29790, #29791** to **#29702, #29786, #29790, #29791**



---

archive/issue_comments_471044.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\n#29411 isn't merged (the release script can only check whether a ticket has been merged if you think about it; Do not depend on invalid/duplicate/meta-tickets, or anything else that doesn't actually contribute commits). Also `(#29411)` isn't supported as dependency, whatever the parens are supposed to mean.",
    "created_at": "2020-08-02T18:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471044",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:49" align="right">Comment 49</div>

#29411 isn't merged (the release script can only check whether a ticket has been merged if you think about it; Do not depend on invalid/duplicate/meta-tickets, or anything else that doesn't actually contribute commits). Also `(#29411)` isn't supported as dependency, whatever the parens are supposed to mean.



---

archive/issue_comments_471045.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\n#29411 is a real ticket with 9.2 as milestone, marked as closed, with a branch which looks like a merged branch. Is it the same kind of issue as with #21226 ?",
    "created_at": "2020-08-02T18:13:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471045",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:50" align="right">Comment 50</div>

#29411 is a real ticket with 9.2 as milestone, marked as closed, with a branch which looks like a merged branch. Is it the same kind of issue as with #21226 ?



---

archive/issue_comments_471046.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nThanks for cleaning up the dependency list. \n\nUnfortunately the format does not seem to be documented anywhere.\n\n(#29411 is a regular merged ticket. You merged it in 0bcd001f760ff724832c32b4f65fa575fd82e000)",
    "created_at": "2020-08-02T18:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471046",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:51" align="right">Comment 51</div>

Thanks for cleaning up the dependency list. 

Unfortunately the format does not seem to be documented anywhere.

(#29411 is a regular merged ticket. You merged it in 0bcd001f760ff724832c32b4f65fa575fd82e000)



---

archive/issue_comments_471047.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nYes, in this case it was the parens.",
    "created_at": "2020-08-02T22:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471047",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:52" align="right">Comment 52</div>

Yes, in this case it was the parens.



---

archive/issue_comments_471048.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\n\n```\nsage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 83, in sage_setup.clean._find_stale_files\nFailed example:\n    python_packages, python_modules = find_python_sources(\n        SAGE_SRC, ['sage', 'sage_setup'])\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[3]>\", line 2, in <module>\n        SAGE_SRC, ['sage', 'sage_setup'])\n    ValueError: too many values to unpack (expected 2)\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 92, in sage_setup.clean._find_stale_files\nFailed example:\n    stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[6]>\", line 1, in <module>\n        stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)\n    NameError: name 'python_packages' is not defined\n**********************************************************************\nFile \"src/sage_setup/clean.py\", line 95, in sage_setup.clean._find_stale_files\nFailed example:\n    for f in stale_iter:\n        if f.endswith(skip_extensions): continue\n        if '/ext_data/' in f: continue\n        print('Found stale file: ' + f)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.clean._find_stale_files[9]>\", line 1, in <module>\n        for f in stale_iter:\n    NameError: name 'stale_iter' is not defined\n**********************************************************************\n1 item had failures:\n   3 of  11 in sage_setup.clean._find_stale_files\n    [17 tests, 3 failures, 0.03 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py  # 3 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-02T22:58:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471048",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:53" align="right">Comment 53</div>


```
sage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py
**********************************************************************
File "src/sage_setup/clean.py", line 83, in sage_setup.clean._find_stale_files
Failed example:
    python_packages, python_modules = find_python_sources(
        SAGE_SRC, ['sage', 'sage_setup'])
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[3]>", line 2, in <module>
        SAGE_SRC, ['sage', 'sage_setup'])
    ValueError: too many values to unpack (expected 2)
**********************************************************************
File "src/sage_setup/clean.py", line 92, in sage_setup.clean._find_stale_files
Failed example:
    stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[6]>", line 1, in <module>
        stale_iter = _find_stale_files(SAGE_LIB, python_packages, python_modules, [], extra_files)
    NameError: name 'python_packages' is not defined
**********************************************************************
File "src/sage_setup/clean.py", line 95, in sage_setup.clean._find_stale_files
Failed example:
    for f in stale_iter:
        if f.endswith(skip_extensions): continue
        if '/ext_data/' in f: continue
        print('Found stale file: ' + f)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.clean._find_stale_files[9]>", line 1, in <module>
        for f in stale_iter:
    NameError: name 'stale_iter' is not defined
**********************************************************************
1 item had failures:
   3 of  11 in sage_setup.clean._find_stale_files
    [17 tests, 3 failures, 0.03 s]
----------------------------------------------------------------------
sage -t --long --warn-long 40.4 --random-seed=0 src/sage_setup/clean.py  # 3 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_events_390413.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-02T22:58:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390413"
}
```



---

archive/issue_events_390414.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-02T22:58:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390414"
}
```



---

archive/issue_comments_471049.json:
```json
{
    "body": "Changed commit from **[d3c608b](https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8)** to **[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)**",
    "created_at": "2020-08-03T00:26:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471049",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d3c608b](https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8)** to **[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)**



---

archive/issue_comments_471050.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcad5184daba6a9d1d347950b3908fc98ec856ce\">fcad518</a></td><td><code>Merge tag '9.2.beta7' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e\">55c3fbc</a></td><td><code>src/sage_setup/clean.py: Fix doctest</code></td></tr></table>\n",
    "created_at": "2020-08-03T00:26:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471050",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54" align="right">Comment 54</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcad5184daba6a9d1d347950b3908fc98ec856ce">fcad518</a></td><td><code>Merge tag '9.2.beta7' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e">55c3fbc</a></td><td><code>src/sage_setup/clean.py: Fix doctest</code></td></tr></table>




---

archive/issue_events_390415.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-03T00:27:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390415"
}
```



---

archive/issue_events_390416.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-03T00:27:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390416"
}
```



---

archive/issue_comments_471051.json:
```json
{
    "body": "Changed dependencies from **#29702, #29786, #29790, #29791** to none",
    "created_at": "2020-08-03T00:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471051",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29702, #29786, #29790, #29791** to none



---

archive/issue_comments_471052.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nBack to positive.",
    "created_at": "2020-08-03T05:38:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471052",
    "user": "https://github.com/kliem"
}
```

<div id="comment:57" align="right">Comment 57</div>

Back to positive.



---

archive/issue_events_390417.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-08-03T05:38:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390417"
}
```



---

archive/issue_events_390418.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-08-03T05:38:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390418"
}
```



---

archive/issue_comments_471053.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nThanks!",
    "created_at": "2020-08-03T17:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471053",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">Comment 58</div>

Thanks!



---

archive/issue_comments_471054.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\n\n```\n[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds\n[dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed\n[dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n[dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.\n[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n[dochtml]     \"__main__\", mod_spec)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 85, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1721, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n[dochtml]     build_many(build_ref_doc, non_references)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n[dochtml]     _build_many(target, args, processes=NUM_THREADS)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n[dochtml]     raise worker_exc.original_exception\n[dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n[dochtml] \n[dochtml]     Note: incremental documentation builds sometimes cause spurious\n[dochtml]     error messages. To be certain that these are real errors, run\n[dochtml]     \"make doc-clean\" first and try again.\nmake[3]: *** [Makefile:1816: doc-html] Error 1\nmake[3]: Leaving directory '/home/release/Sage/build/make'\nmake[2]: *** [Makefile:1707: all-start] Error 2\nmake[2]: Leaving directory '/home/release/Sage/build/make'\n```",
    "created_at": "2020-08-04T22:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471054",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:59" align="right">Comment 59</div>


```
[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds
[dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed
[dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
[dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.
[dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
[dochtml]     "__main__", mod_spec)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 85, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1721, in main
[dochtml]     builder()
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
[dochtml]     build_many(build_ref_doc, non_references)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
[dochtml]     _build_many(target, args, processes=NUM_THREADS)
[dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
[dochtml]     raise worker_exc.original_exception
[dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
[dochtml] 
[dochtml]     Note: incremental documentation builds sometimes cause spurious
[dochtml]     error messages. To be certain that these are real errors, run
[dochtml]     "make doc-clean" first and try again.
make[3]: *** [Makefile:1816: doc-html] Error 1
make[3]: Leaving directory '/home/release/Sage/build/make'
make[2]: *** [Makefile:1707: all-start] Error 2
make[2]: Leaving directory '/home/release/Sage/build/make'
```



---

archive/issue_events_390419.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-04T22:17:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390419"
}
```



---

archive/issue_events_390420.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-04T22:17:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390420"
}
```



---

archive/issue_comments_471055.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nReplying to [@vbraun](#comment%3A59):\n> \n> ```\n> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds\n> [dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed\n> [dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n> [dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.\n> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup\n> [dochtml] Error building the documentation.\n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n> [dochtml]     \"__main__\", mod_spec)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 85, in _run_code\n> [dochtml]     exec(code, run_globals)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n> [dochtml]     main()\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1721, in main\n> [dochtml]     builder()\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n> [dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n> [dochtml]     build_many(build_ref_doc, non_references)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n> [dochtml]     _build_many(target, args, processes=NUM_THREADS)\n> [dochtml]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n> [dochtml]     raise worker_exc.original_exception\n> [dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)\n> [dochtml] \n> [dochtml]     Note: incremental documentation builds sometimes cause spurious\n> [dochtml]     error messages. To be certain that these are real errors, run\n> [dochtml]     \"make doc-clean\" first and try again.\n> make[3]: *** [Makefile:1816: doc-html] Error 1\n> make[3]: Leaving directory '/home/release/Sage/build/make'\n> make[2]: *** [Makefile:1707: all-start] Error 2\n> make[2]: Leaving directory '/home/release/Sage/build/make'\n> ```\n\nAre you sure? I thought it would have come from either #30240 or #30260 since they both touch \"distance_regular\".",
    "created_at": "2020-08-04T22:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471055",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:60" align="right">Comment 60</div>

Replying to [@vbraun](#comment%3A59):
> 
> ```
> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/manifolds
> [dochtml] [algebras ] updating environment: 0 added, 5 changed, 0 removed
> [dochtml] Warning: Could not import sage.graphs.graph_generators cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
> [dochtml] [arithgrou] The inventory files are in local/share/doc/sage/inventory/en/reference/arithgroup.
> [dochtml] Build finished. The built documents can be found in /home/release/Sage/local/share/doc/sage/inventory/en/reference/arithgroup
> [dochtml] Error building the documentation.
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
> [dochtml]     "__main__", mod_spec)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 85, in _run_code
> [dochtml]     exec(code, run_globals)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
> [dochtml]     main()
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1721, in main
> [dochtml]     builder()
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
> [dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
> [dochtml]     build_many(build_ref_doc, non_references)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
> [dochtml]     _build_many(target, args, processes=NUM_THREADS)
> [dochtml]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
> [dochtml]     raise worker_exc.original_exception
> [dochtml] ImportError: cannot import name 'distance_regular' from 'sage.graphs' (/home/release/Sage/local/lib/python3.7/site-packages/sage/graphs/__init__.py)
> [dochtml] 
> [dochtml]     Note: incremental documentation builds sometimes cause spurious
> [dochtml]     error messages. To be certain that these are real errors, run
> [dochtml]     "make doc-clean" first and try again.
> make[3]: *** [Makefile:1816: doc-html] Error 1
> make[3]: Leaving directory '/home/release/Sage/build/make'
> make[2]: *** [Makefile:1707: all-start] Error 2
> make[2]: Leaving directory '/home/release/Sage/build/make'
> ```

Are you sure? I thought it would have come from either #30240 or #30260 since they both touch "distance_regular".



---

archive/issue_comments_471056.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\n#30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`",
    "created_at": "2020-08-04T22:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471056",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">Comment 61</div>

#30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`



---

archive/issue_events_390421.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-04T22:39:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390421"
}
```



---

archive/issue_events_390422.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-04T22:39:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390422"
}
```



---

archive/issue_comments_471057.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nReplying to [@mkoeppe](#comment%3A61):\n> #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`\n> \n\nit used to be broken, but IMHO it's fixed by [#30240 comment:32](https://github.com/sagemath/sage/issues/30240#comment:32)",
    "created_at": "2020-08-04T22:56:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471057",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:63" align="right">Comment 63</div>

Replying to [@mkoeppe](#comment%3A61):
> #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`
> 

it used to be broken, but IMHO it's fixed by [#30240 comment:32](https://github.com/sagemath/sage/issues/30240#comment:32)



---

archive/issue_comments_471058.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nReplying to [@dimpase](#comment%3A63):\n> Replying to [@mkoeppe](#comment%3A61):\n> > #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`\n> > \n\n> it used to be broken, but IMHO it's fixed by [#30240 comment:32](https://github.com/sagemath/sage/issues/30240#comment:32)\n\nUnfortunately Volker merged before that.",
    "created_at": "2020-08-04T22:58:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471058",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:64" align="right">Comment 64</div>

Replying to [@dimpase](#comment%3A63):
> Replying to [@mkoeppe](#comment%3A61):
> > #30260 is broken. It is confused about whether it wants  `sage.graphs.distance_regular` or `sage.graphs.generators.distance_regular`
> > 

> it used to be broken, but IMHO it's fixed by [#30240 comment:32](https://github.com/sagemath/sage/issues/30240#comment:32)

Unfortunately Volker merged before that.



---

archive/issue_comments_471059.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\n#30240 does not even have #30260 as a dependency...",
    "created_at": "2020-08-04T23:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471059",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:65" align="right">Comment 65</div>

#30240 does not even have #30260 as a dependency...



---

archive/issue_comments_471060.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nReplying to [@mkoeppe](#comment%3A65):\n> #30240 does not even have #30260 as a dependency...\n\nShould it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.\nI apologise for the confusion but when #30240 went from \"positive review\" to \"needs work\" and I forgot to update #30260.",
    "created_at": "2020-08-05T09:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471060",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:66" align="right">Comment 66</div>

Replying to [@mkoeppe](#comment%3A65):
> #30240 does not even have #30260 as a dependency...

Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.
I apologise for the confusion but when #30240 went from "positive review" to "needs work" and I forgot to update #30260.



---

archive/issue_comments_471061.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nReplying to [@Ivo-Maffei](#comment%3A66):\n> Replying to [@mkoeppe](#comment%3A65):\n> > #30240 does not even have #30260 as a dependency...\n\n> Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.\n> I apologise for the confusion but when #30240 went from \"positive review\" to \"needs work\" and I forgot to update #30260.\n\nThat's alright -- thanks for the fast reaction and fix!",
    "created_at": "2020-08-05T14:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471061",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:67" align="right">Comment 67</div>

Replying to [@Ivo-Maffei](#comment%3A66):
> Replying to [@mkoeppe](#comment%3A65):
> > #30240 does not even have #30260 as a dependency...

> Should it? #30260 is a later ticket and it depends on #30240, but #30240 doesn't rely on #30260.
> I apologise for the confusion but when #30240 went from "positive review" to "needs work" and I forgot to update #30260.

That's alright -- thanks for the fast reaction and fix!



---

archive/issue_comments_471062.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\n\n```\nsage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py\n**********************************************************************\nFile \"src/sage_setup/find.py\", line 215, in sage_setup.find.find_extra_files\nFailed example:\n    extras[\"sage/ext/interpreters\"]\nExpected:\n    ['.../src/sage/ext/interpreters/wrapper_cdf.pxd', ...wrapper_cdf.h...]\nGot:\n    ['/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pyx',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pxd',\n     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pyx']\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage_setup.find.find_extra_files\n    [36 tests, 1 failure, 0.27 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-08T09:16:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471062",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:68" align="right">Comment 68</div>


```
sage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py
**********************************************************************
File "src/sage_setup/find.py", line 215, in sage_setup.find.find_extra_files
Failed example:
    extras["sage/ext/interpreters"]
Expected:
    ['.../src/sage/ext/interpreters/wrapper_cdf.pxd', ...wrapper_cdf.h...]
Got:
    ['/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cc.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_cdf.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_el.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_py.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rdf.pyx',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pxd',
     '/home/release/Sage/src/sage/ext/interpreters/wrapper_rr.pyx']
**********************************************************************
1 item had failures:
   1 of   7 in sage_setup.find.find_extra_files
    [36 tests, 1 failure, 0.27 s]
----------------------------------------------------------------------
sage -t --long --warn-long 42.4 --random-seed=0 src/sage_setup/find.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_events_390423.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-08T09:16:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390423"
}
```



---

archive/issue_events_390424.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-08T09:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390424"
}
```



---

archive/issue_comments_471063.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nMight have been from #29950",
    "created_at": "2020-08-08T12:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471063",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:69" align="right">Comment 69</div>

Might have been from #29950



---

archive/issue_comments_471064.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nYes, it's #29950 that broke it.",
    "created_at": "2020-08-08T20:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471064",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:70" align="right">Comment 70</div>

Yes, it's #29950 that broke it.



---

archive/issue_events_390425.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-08T20:41:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390425"
}
```



---

archive/issue_events_390426.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-08T20:41:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390426"
}
```



---

archive/issue_events_390427.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-10T18:50:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390427"
}
```



---

archive/issue_events_390428.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2c85de4715ce66e3930a68d924457b33079bf919",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-08-10T18:50:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29701#event-390428"
}
```



---

archive/issue_comments_471065.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/replace_use_of_module_list_optionalextension](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/replace_use_of_module_list_optionalextension)** to **[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)**",
    "created_at": "2020-08-10T18:50:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29701#issuecomment-471065",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/replace_use_of_module_list_optionalextension](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/replace_use_of_module_list_optionalextension)** to **[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)**
