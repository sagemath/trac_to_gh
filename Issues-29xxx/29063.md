# Issue 29063: spkg-configure.m4 for planarity

archive/issues_028826.json:
```json
{
    "body": "this is a relatively stable C library, the only problem is that there are also very old versions (2.2.0 on Fedora 26) around, and it's not quite clear whether they work and how to distinguish them.\n\nWe do the latter by checking for `link` member in `vertexRec` from `planarity/graphStructures.h`\n\nCC:  @kiwifb @embray @tobihan @infinity0 @isuruf @mkoeppe\n\nBranch/Commit: 604dfac2084115b322653dc36b5dc7a2c96eb2f0\n\nReviewer: Isuru Fernando\n\nAuthor: Dima Pasechnik\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29063\n\n",
    "closed_at": "2020-01-25T17:27:34Z",
    "created_at": "2020-01-21T19:27:43Z",
    "labels": [
        "component: build: configure"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "spkg-configure.m4 for planarity",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29063",
    "user": "https://github.com/dimpase"
}
```
this is a relatively stable C library, the only problem is that there are also very old versions (2.2.0 on Fedora 26) around, and it's not quite clear whether they work and how to distinguish them.

We do the latter by checking for `link` member in `vertexRec` from `planarity/graphStructures.h`

CC:  @kiwifb @embray @tobihan @infinity0 @isuruf @mkoeppe

Branch/Commit: 604dfac2084115b322653dc36b5dc7a2c96eb2f0

Reviewer: Isuru Fernando

Author: Dima Pasechnik

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29063





---

archive/issue_comments_558674.json:
```json
{
    "body": "<a id='comment:1'></a>\npackage names: \n\nplanarity libplanarity-dev (Debian)\n\nplanarity planarity-devel (Fedora)",
    "created_at": "2020-01-21T19:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558674",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>
package names: 

planarity libplanarity-dev (Debian)

planarity planarity-devel (Fedora)



---

archive/issue_comments_558675.json:
```json
{
    "body": "Changing author from \"\" to \"Dima Pasechnik\"",
    "created_at": "2020-01-21T19:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558675",
    "user": "https://github.com/dimpase"
}
```

Changing author from "" to "Dima Pasechnik"



---

archive/issue_comments_558676.json:
```json
{
    "body": "<a id='comment:2'></a>\n2.2.0 prevents sagelib building, as `planarity/graphStructures.h` should have\n\n```\ntypedef struct\n{\n        int  link[2];\n        int  index;\n        unsigned flags;\n} vertexRec;\n```\nand not\n\n```\ntypedef struct\n{\n        int DFSParent, leastAncestor, Lowpoint, adjacentTo;\n        int pertinentBicompList, separatedDFSChildList, fwdArcList;\n} vertexRec;\n```\n\nSo we can write a test using `AC_COMPILE_IFELSE()`.",
    "created_at": "2020-01-21T19:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558676",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>
2.2.0 prevents sagelib building, as `planarity/graphStructures.h` should have

```
typedef struct
{
        int  link[2];
        int  index;
        unsigned flags;
} vertexRec;
```
and not

```
typedef struct
{
        int DFSParent, leastAncestor, Lowpoint, adjacentTo;
        int pertinentBicompList, separatedDFSChildList, fwdArcList;
} vertexRec;
```

So we can write a test using `AC_COMPILE_IFELSE()`.



---

archive/issue_comments_558677.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dimpase/packages/planarity-config\"",
    "created_at": "2020-01-21T23:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558677",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "" to "u/dimpase/packages/planarity-config"



---

archive/issue_comments_558678.json:
```json
{
    "body": "Changing commit from \"\" to \"604dfac2084115b322653dc36b5dc7a2c96eb2f0\"",
    "created_at": "2020-01-21T23:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558678",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "" to "604dfac2084115b322653dc36b5dc7a2c96eb2f0"



---

archive/issue_comments_558679.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n this is a relatively stable C library, the only problem is that there are also very old versions (2.2.0 on Fedora 26) around, and it's not quite clear whether they work and how to distinguish them.\n \n-(one way to distinguish is to test for macro gp_IsArc - present in old 2.2.0 headers, but then gone)\n-\n+We do the latter by checking for `link` member in `vertexRec` from `planarity/graphStructures.h`\n``````\n",
    "created_at": "2020-01-21T23:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558679",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
 this is a relatively stable C library, the only problem is that there are also very old versions (2.2.0 on Fedora 26) around, and it's not quite clear whether they work and how to distinguish them.
 
-(one way to distinguish is to test for macro gp_IsArc - present in old 2.2.0 headers, but then gone)
-
+We do the latter by checking for `link` member in `vertexRec` from `planarity/graphStructures.h`
``````




---

archive/issue_comments_558680.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-21T23:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558680",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_558681.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[604dfac](https://github.com/sagemath/sagetrac-mirror/commit/604dfac2084115b322653dc36b5dc7a2c96eb2f0)|`spkg-configure.m4 for planarity`|",
    "created_at": "2020-01-21T23:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558681",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[604dfac](https://github.com/sagemath/sagetrac-mirror/commit/604dfac2084115b322653dc36b5dc7a2c96eb2f0)|`spkg-configure.m4 for planarity`|



---

archive/issue_comments_558682.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Isuru Fernando\"",
    "created_at": "2020-01-22T04:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558682",
    "user": "https://github.com/isuruf"
}
```

Changing reviewer from "" to "Isuru Fernando"



---

archive/issue_comments_558683.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-01-22T04:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558683",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_558684.json:
```json
{
    "body": "Changing branch from \"u/dimpase/packages/planarity-config\" to \"604dfac2084115b322653dc36b5dc7a2c96eb2f0\"",
    "created_at": "2020-01-25T17:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558684",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dimpase/packages/planarity-config" to "604dfac2084115b322653dc36b5dc7a2c96eb2f0"



---

archive/issue_comments_558685.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-01-25T17:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29063#issuecomment-558685",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_091074.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-25T17:27:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29063",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29063#event-91074"
}
```
