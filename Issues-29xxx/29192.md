# Issue 29192: MR41: Add option to persist camera state to three.js viewer.

archive/issues_028955.json:
```json
{
    "body": "Joshua Campbell ([`@`jcamp0x2a](https://gitlab.com/jcamp0x2a)) opened a merge request at https://gitlab.com/sagemath/sage/-/merge_requests/41:\n\n---\n\n```markdown\nAt present, when using [interact](https://wiki.sagemath.org/interact) with three.js plots in the Jupyter notebook, the camera gets reset to its default position each time the plot is regenerated. If the default camera position isn't ideal for whatever is being plotted, it's cumbersome to have to re-adjust the camera after every change.\n\nThis MR adds a boolean `persist` viewing option for three.js that will persist the camera state between viewings of the plot using local storage. In a Jupyter notebook, it's keyed off of the current notebook and cell; otherwise the URL. It defaults to `False` so as not to interfere with the existing behavior that users may rely upon.\n\nWithout persist, if you don't like where you've moved the camera to, it's easy enough to reload the page or regenerate the plot to get back to the default. With persist, however, that becomes more difficult; so this MR also adds a \"Reset Camera\" feature to the bottom-right pop-up menu . (+ some minor hover highlighting and cursor fixes to the menu)\n```\n\n\n\nCC:  @paulmasson\n\nKeywords: threejs camera persist\n\nReviewer: Joshua Campbell\n\nAuthor: Paul Masson\n\nBranch: u/paulmasson/mrs/41/threejs-persist-camera\n\nDependencies: #28672 #29250\n\nCommit: 3b7fc0c1b3c2131cd5a904737e62914ab4b1a540\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29192\n\n",
    "closed_at": "2020-07-08T23:18:12Z",
    "created_at": "2020-02-13T17:31:11Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "MR41: Add option to persist camera state to three.js viewer.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29192",
    "user": "https://trac.sagemath.org/admin/accounts/users/galois"
}
```
Joshua Campbell ([`@`jcamp0x2a](https://gitlab.com/jcamp0x2a)) opened a merge request at https://gitlab.com/sagemath/sage/-/merge_requests/41:

---

```markdown
At present, when using [interact](https://wiki.sagemath.org/interact) with three.js plots in the Jupyter notebook, the camera gets reset to its default position each time the plot is regenerated. If the default camera position isn't ideal for whatever is being plotted, it's cumbersome to have to re-adjust the camera after every change.

This MR adds a boolean `persist` viewing option for three.js that will persist the camera state between viewings of the plot using local storage. In a Jupyter notebook, it's keyed off of the current notebook and cell; otherwise the URL. It defaults to `False` so as not to interfere with the existing behavior that users may rely upon.

Without persist, if you don't like where you've moved the camera to, it's easy enough to reload the page or regenerate the plot to get back to the default. With persist, however, that becomes more difficult; so this MR also adds a "Reset Camera" feature to the bottom-right pop-up menu . (+ some minor hover highlighting and cursor fixes to the menu)
```



CC:  @paulmasson

Keywords: threejs camera persist

Reviewer: Joshua Campbell

Author: Paul Masson

Branch: u/paulmasson/mrs/41/threejs-persist-camera

Dependencies: #28672 #29250

Commit: 3b7fc0c1b3c2131cd5a904737e62914ab4b1a540

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29192





---

archive/issue_comments_436454.json:
```json
{
    "body": "Description changed:\n```diff\n\n```\n",
    "created_at": "2020-02-13T17:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436454",
    "user": "https://github.com/jcamp0x2a"
}
```

Description changed:
```diff

```




---

archive/issue_comments_436455.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2020-02-13T17:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436455",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_436456.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2020-02-13T17:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436456",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing priority from major to minor.



---

archive/issue_comments_436457.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graphics.",
    "created_at": "2020-02-13T17:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436457",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing component from PLEASE CHANGE to graphics.



---

archive/issue_comments_436458.json:
```json
{
    "body": "Changing keywords from \"\" to \"threejs camera persist\".",
    "created_at": "2020-02-13T17:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436458",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing keywords from "" to "threejs camera persist".



---

archive/issue_comments_436459.json:
```json
{
    "body": "<a id='comment:3'></a>I wonder if it would be better to actually change default behaviour to be persistent. If there is an easy to discover way to reset the camera, I don't see any drawbacks.",
    "created_at": "2020-02-13T20:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436459",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:3'></a>I wonder if it would be better to actually change default behaviour to be persistent. If there is an easy to discover way to reset the camera, I don't see any drawbacks.



---

archive/issue_comments_436460.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-02-13T22:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436460",
    "user": "https://github.com/paulmasson"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_436461.json:
```json
{
    "body": "<a id='comment:4'></a>Joshua, while I certainly appreciate all of the effort you put into this feature, there is a much simpler approach. #28672 already makes the camera viewpoint available on the clipboard. This can simply be passed into the plot through a new keyword named `viewpoint` which will keep the camera at that set position on regeneration. That's how I'm setting the camera in my own JavaScript [library](https://github.com/paulmasson/mathcell/blob/master/src/plot/threejs-template.js#L131) that embeds virtually the same viewer in web pages.\n\nWhile this approach requires a manual step, it avoids the overhead of local storage and the dependence you note on the future structure of Jupyter notebooks. As soon as #28672 is merged, then either you or I can add the new keyword. Please be aware that I handle aspect multipliers a bit differently in my library. I left them more explicit in this viewer so that they don't get forgotten.",
    "created_at": "2020-02-13T22:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436461",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:4'></a>Joshua, while I certainly appreciate all of the effort you put into this feature, there is a much simpler approach. #28672 already makes the camera viewpoint available on the clipboard. This can simply be passed into the plot through a new keyword named `viewpoint` which will keep the camera at that set position on regeneration. That's how I'm setting the camera in my own JavaScript [library](https://github.com/paulmasson/mathcell/blob/master/src/plot/threejs-template.js#L131) that embeds virtually the same viewer in web pages.

While this approach requires a manual step, it avoids the overhead of local storage and the dependence you note on the future structure of Jupyter notebooks. As soon as #28672 is merged, then either you or I can add the new keyword. Please be aware that I handle aspect multipliers a bit differently in my library. I left them more explicit in this viewer so that they don't get forgotten.



---

archive/issue_comments_436462.json:
```json
{
    "body": "<a id='comment:5'></a>Hi Paul!\n\nYes, a `viewpoint` option does seem like it would solve the use case I mentioned (keeping a fixed camera with `interact`). \n\nAnother reason I implemented this feature is because I've been experimenting with adding support for three.js-based animation to Sage: discrete keyframes like the existing `animate` function at present, with the goal of adding some interpolation or image morphing between the frames later on. I'd like to be able to persist the playback state of the animation as well, preferably tied to the same `persist` option.\n\nLaying the foundation with a persistent camera first seemed the way to go. With the animation state changing on its own every frame, a manual approach similar to `viewpoint` would be more cumbersome.\n\nI'm open to scrapping persistence for the camera and re-introducing it for the animation. Of course, that presumes that the animation stuff gets accepted later on; there may be better alternatives that I'm unaware of. Or perhaps a hybrid approach: if a `viewpoint` has been provided, then ignore `persist` as regards the initial camera state?\n\nThanks for taking a look at this. :)",
    "created_at": "2020-02-14T00:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436462",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:5'></a>Hi Paul!

Yes, a `viewpoint` option does seem like it would solve the use case I mentioned (keeping a fixed camera with `interact`). 

Another reason I implemented this feature is because I've been experimenting with adding support for three.js-based animation to Sage: discrete keyframes like the existing `animate` function at present, with the goal of adding some interpolation or image morphing between the frames later on. I'd like to be able to persist the playback state of the animation as well, preferably tied to the same `persist` option.

Laying the foundation with a persistent camera first seemed the way to go. With the animation state changing on its own every frame, a manual approach similar to `viewpoint` would be more cumbersome.

I'm open to scrapping persistence for the camera and re-introducing it for the animation. Of course, that presumes that the animation stuff gets accepted later on; there may be better alternatives that I'm unaware of. Or perhaps a hybrid approach: if a `viewpoint` has been provided, then ignore `persist` as regards the initial camera state?

Thanks for taking a look at this. :)



---

archive/issue_comments_436463.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:3 novoselt]:\n> I wonder if it would be better to actually change default behaviour to be persistent. If there is an easy to discover way to reset the camera, I don't see any drawbacks.\n\n\nI don't speed a lot of time in the Jupyter notebook, preferring the console, except recently in order to use `interact`, so I wasn't sure what the commons workflows in it might be and whether this change could interfere with them. So, I opted for the cautious route.",
    "created_at": "2020-02-14T00:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436463",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:6'></a>Replying to [comment:3 novoselt]:
> I wonder if it would be better to actually change default behaviour to be persistent. If there is an easy to discover way to reset the camera, I don't see any drawbacks.


I don't speed a lot of time in the Jupyter notebook, preferring the console, except recently in order to use `interact`, so I wasn't sure what the commons workflows in it might be and whether this change could interfere with them. So, I opted for the cautious route.



---

archive/issue_comments_436464.json:
```json
{
    "body": "<a id='comment:7'></a>Joshua, just took a look at your animation branch on [GitLab](GitLab). Looks like you're deep into it! Are there any active examples online? And don't forget that Three.js has an animation system already, which you don't appear to be using.\n\nAlthough keyframes are one way to approach the topic, keep in mind that we can manipulate data directly using JavaScript. We haven't yet added a basic spin animation, but that's easily done by updating the rotation parameters of the object. If the object is to be moved along a trajectory, we could pass in a line or function describing the location of its center over time. For more complex alterations, we could pass in a function describing the locations of all vertices over time. Lots of possibilities without thinking in terms of saving a movie frame by frame.\n\nPlease also try not to add anything to the viewer that will be dependent on a given environment, in this case a Jupyter notebook. I'd rather the viewer be as portable as possible.",
    "created_at": "2020-02-14T01:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436464",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:7'></a>Joshua, just took a look at your animation branch on [GitLab](GitLab). Looks like you're deep into it! Are there any active examples online? And don't forget that Three.js has an animation system already, which you don't appear to be using.

Although keyframes are one way to approach the topic, keep in mind that we can manipulate data directly using JavaScript. We haven't yet added a basic spin animation, but that's easily done by updating the rotation parameters of the object. If the object is to be moved along a trajectory, we could pass in a line or function describing the location of its center over time. For more complex alterations, we could pass in a function describing the locations of all vertices over time. Lots of possibilities without thinking in terms of saving a movie frame by frame.

Please also try not to add anything to the viewer that will be dependent on a given environment, in this case a Jupyter notebook. I'd rather the viewer be as portable as possible.



---

archive/issue_comments_436465.json:
```json
{
    "body": "<a id='comment:8'></a>Paul, I gathered the examples I've put in my documentation so far and thrown them up on [GitHub](GitHub) pages: \n\n[https://jcamp0x2a.github.io/threejs-animation-example/](https://jcamp0x2a.github.io/threejs-animation-example/)\n\nI opted not to use Three.js's animation system since I wanted to support multiple \"times\", one per variable being animated. Three.js would allow me to use multiple mixers to blend linearly between several sets of keyframes, but that wouldn't be appropriate for plotting a function f(x,y,...) that's not some linear combination c1*f1(x)+c2*f2(y)+...\n\nAgreed that keyframes aren't necessarily the best approach, but it has two enourmous benefits:\n\n1. It was quite easy to work into the existing Graphics3d system. No need to, for example, go into the implicit_plot3d code and modify the algorithm (marching cubes I think) to produce a mesh suitable for morphing. Nor worrying about topological changes like holes forming or components pinching off. I love math, but I'm a software developer, not a mathematician! So that kind of stuff is beyond my paygrade. :) Instead, I just plot the keyframes, sum them all up into a single Graphics3d object, attach some metadata as to when each object should be visible, and voila!: animation.\n\n2. It's very general: it can animate a rigidbody moving along a trajectory up to a vector field representing fluid flow with the same amount of code on both the back- and front-ends.\n\nPerhaps I should create a new ticket for the animation to continue the conversation there? I'll hold off on the persistence stuff then if it's not desired.\n\nThanks!",
    "created_at": "2020-02-14T02:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436465",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:8'></a>Paul, I gathered the examples I've put in my documentation so far and thrown them up on [GitHub](GitHub) pages: 

[https://jcamp0x2a.github.io/threejs-animation-example/](https://jcamp0x2a.github.io/threejs-animation-example/)

I opted not to use Three.js's animation system since I wanted to support multiple "times", one per variable being animated. Three.js would allow me to use multiple mixers to blend linearly between several sets of keyframes, but that wouldn't be appropriate for plotting a function f(x,y,...) that's not some linear combination c1*f1(x)+c2*f2(y)+...

Agreed that keyframes aren't necessarily the best approach, but it has two enourmous benefits:

1. It was quite easy to work into the existing Graphics3d system. No need to, for example, go into the implicit_plot3d code and modify the algorithm (marching cubes I think) to produce a mesh suitable for morphing. Nor worrying about topological changes like holes forming or components pinching off. I love math, but I'm a software developer, not a mathematician! So that kind of stuff is beyond my paygrade. :) Instead, I just plot the keyframes, sum them all up into a single Graphics3d object, attach some metadata as to when each object should be visible, and voila!: animation.

2. It's very general: it can animate a rigidbody moving along a trajectory up to a vector field representing fluid flow with the same amount of code on both the back- and front-ends.

Perhaps I should create a new ticket for the animation to continue the conversation there? I'll hold off on the persistence stuff then if it's not desired.

Thanks!



---

archive/issue_comments_436466.json:
```json
{
    "body": "<a id='comment:9'></a>Joshua, the animations are great! Definitely new ticket for that. Will study the code more in the near future.\n\nRather than inspecting the notebook for a unique ID, why not generate a random large number? That's what I've done in my [library](https://github.com/paulmasson/mathcell/blob/master/src/core.js#L259) and haven't had any problems yet, even with pages with lots of embedded content.",
    "created_at": "2020-02-14T03:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436466",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:9'></a>Joshua, the animations are great! Definitely new ticket for that. Will study the code more in the near future.

Rather than inspecting the notebook for a unique ID, why not generate a random large number? That's what I've done in my [library](https://github.com/paulmasson/mathcell/blob/master/src/core.js#L259) and haven't had any problems yet, even with pages with lots of embedded content.



---

archive/issue_events_074147.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29192#event-74147"
}
```



---

archive/issue_comments_436467.json:
```json
{
    "body": "<a id='comment:11'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436467",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_436468.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-06-10T00:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436468",
    "user": "https://github.com/paulmasson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_436469.json:
```json
{
    "body": "<a id='comment:13'></a>Joshua, here at long last is the `viewpoint` option we discussed above. Use the 'Get Viewpoint' menu option to obtain the value that is passed as a string in the graphic object.\n\n---\nNew commits:",
    "created_at": "2020-06-10T00:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436469",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:13'></a>Joshua, here at long last is the `viewpoint` option we discussed above. Use the 'Get Viewpoint' menu option to obtain the value that is passed as a string in the graphic object.

---
New commits:



---

archive/issue_comments_436470.json:
```json
{
    "body": "<a id='comment:14'></a>Hi Paul, I've verified that setting the `viewpoint` option to a string containing the output of *Get Viewpoint* correctly re-creates that camera orientation in the new plot.\n\nI'm wary of passing structured data like this as a string parameter, though. It works fine for the *Get Viewpoint* use case, but one may imagine wanting to set the viewpoint to a specific axis-angle or have the axis-angle computed in some way. In the former case a typo (like forgetting a comma) would produce a blank plot instead of a syntax error, and in the latter case you'd have to take the extra step of building up a string.\n\nAs *Get Viewpoint* is currently implemented, we have to surround its output with something to avoid a syntax error, but why not parentheses instead of quotes? `([x,y,z],angle)` opposed to `\"[x,y,z],angle\"`. That way Python can validate the syntax, and we can validate the types/contents.\n\nWhile testing, I forgot to surround the output with quotes a... non-zero... number of times. Ideally, and I apologize for not thinking of this when reviewing the code that introduced it, *Get Viewpoint* would do the surrounding for us to avoid this perhaps not uncommon occurrence among some subset of users ;)\n\nAlso, do we want the zoom / camera distance to be included as well? Perhaps by letting the length of the axis vector represent the zoom/distance?\n\nMany thanks!",
    "created_at": "2020-06-11T17:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436470",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:14'></a>Hi Paul, I've verified that setting the `viewpoint` option to a string containing the output of *Get Viewpoint* correctly re-creates that camera orientation in the new plot.

I'm wary of passing structured data like this as a string parameter, though. It works fine for the *Get Viewpoint* use case, but one may imagine wanting to set the viewpoint to a specific axis-angle or have the axis-angle computed in some way. In the former case a typo (like forgetting a comma) would produce a blank plot instead of a syntax error, and in the latter case you'd have to take the extra step of building up a string.

As *Get Viewpoint* is currently implemented, we have to surround its output with something to avoid a syntax error, but why not parentheses instead of quotes? `([x,y,z],angle)` opposed to `"[x,y,z],angle"`. That way Python can validate the syntax, and we can validate the types/contents.

While testing, I forgot to surround the output with quotes a... non-zero... number of times. Ideally, and I apologize for not thinking of this when reviewing the code that introduced it, *Get Viewpoint* would do the surrounding for us to avoid this perhaps not uncommon occurrence among some subset of users ;)

Also, do we want the zoom / camera distance to be included as well? Perhaps by letting the length of the axis vector represent the zoom/distance?

Many thanks!



---

archive/issue_comments_436471.json:
```json
{
    "body": "<a id='comment:15'></a>The *Get Viewpoint* feature was added to support how TikZ interfaces with Sage: see this [tutorial](https://doc.sagemath.org/html/en/thematic_tutorials/geometry/polytope_tikz.html) for more information. See also the general [rotate](https://doc.sagemath.org/html/en/reference/plot3d/sage/plot/plot3d/base.html) command in the base class for 3D objects. Adding anything else to the string here might require changes to other interfaces, so I don't think we should do that.\n\nI agree that requiring a structured string for input is not ideal, and I like the idea of using parentheses or square brackets. That is a better way to structure the input for later handling and either can be used in Python. I'll put together a version for testing.",
    "created_at": "2020-06-11T23:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436471",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:15'></a>The *Get Viewpoint* feature was added to support how TikZ interfaces with Sage: see this [tutorial](https://doc.sagemath.org/html/en/thematic_tutorials/geometry/polytope_tikz.html) for more information. See also the general [rotate](https://doc.sagemath.org/html/en/reference/plot3d/sage/plot/plot3d/base.html) command in the base class for 3D objects. Adding anything else to the string here might require changes to other interfaces, so I don't think we should do that.

I agree that requiring a structured string for input is not ideal, and I like the idea of using parentheses or square brackets. That is a better way to structure the input for later handling and either can be used in Python. I'll put together a version for testing.



---

archive/issue_comments_436472.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-12T00:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_436473.json:
```json
{
    "body": "<a id='comment:17'></a>Here's a more stable version, where `viewpoint` must be a list of the form [[x,y,z],angle] or it will raise a warning. Couple questions:\n\n1) Lots of Sage inputs are allowed to be either lists or tuples, but need to be converted to lists for the JSONing lines. Do we want to allow tuples here?\n\n2) The angle value for TikZ is in degrees, while the angle for the base-class `rotate()` is in radians. Not sure how to reconcile the two. Maybe just document what's happening?",
    "created_at": "2020-06-12T00:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436473",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:17'></a>Here's a more stable version, where `viewpoint` must be a list of the form [[x,y,z],angle] or it will raise a warning. Couple questions:

1) Lots of Sage inputs are allowed to be either lists or tuples, but need to be converted to lists for the JSONing lines. Do we want to allow tuples here?

2) The angle value for TikZ is in degrees, while the angle for the base-class `rotate()` is in radians. Not sure how to reconcile the two. Maybe just document what's happening?



---

archive/issue_comments_436474.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-12T01:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_436475.json:
```json
{
    "body": "<a id='comment:19'></a>Added support for tuples and clarified angle variable in documentation.\n\nLet's add the zoom feature once we get some feedback from users.",
    "created_at": "2020-06-12T01:12:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436475",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:19'></a>Added support for tuples and clarified angle variable in documentation.

Let's add the zoom feature once we get some feedback from users.



---

archive/issue_comments_436476.json:
```json
{
    "body": "<a id='comment:20'></a>I checked that the viewpoint is still set correctly, that lists/tuples are both supported, and that a helpful warning message is displayed if the `viewpoint` option is not of the correct form.\n\nOne very minor note: the documentation still states \"string of the form...\". Otherwise looks good and can give positive review.\n\nThank you for adding this option. Will make using `interact` in notebooks with three.js plots much more convenient.",
    "created_at": "2020-06-12T02:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436476",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:20'></a>I checked that the viewpoint is still set correctly, that lists/tuples are both supported, and that a helpful warning message is displayed if the `viewpoint` option is not of the correct form.

One very minor note: the documentation still states "string of the form...". Otherwise looks good and can give positive review.

Thank you for adding this option. Will make using `interact` in notebooks with three.js plots much more convenient.



---

archive/issue_comments_436477.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-12T02:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_436478.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-12T02:35:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_436479.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:20 gh-jcamp0x2a]:\n> One very minor note: the documentation still states \"string of the form...\". Otherwise looks good and can give positive review.\n\nDone!",
    "created_at": "2020-06-12T02:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436479",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:23'></a>Replying to [comment:20 gh-jcamp0x2a]:
> One very minor note: the documentation still states "string of the form...". Otherwise looks good and can give positive review.

Done!



---

archive/issue_comments_436480.json:
```json
{
    "body": "<a id='comment:24'></a>Thanks!",
    "created_at": "2020-06-12T02:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436480",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:24'></a>Thanks!



---

archive/issue_comments_436481.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-12T02:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436481",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_074148.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-08T23:18:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29192#event-74148"
}
```



---

archive/issue_comments_436482.json:
```json
{
    "body": "<a id='comment:26'></a>These have been merged into 9.2.beta4",
    "created_at": "2020-07-08T23:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436482",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>These have been merged into 9.2.beta4



---

archive/issue_comments_436483.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-08T23:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29192#issuecomment-436483",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: fixed
