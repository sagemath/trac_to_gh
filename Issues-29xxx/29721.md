# Issue 29721: coxeter3: Add spkg-configure.m4, use coxeter/ prefix for includes, move OptionalExtension options to .pyx file directives

archive/issues_029484.json:
```json
{
    "body": "Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions; they install coxeter in a compatible way, i.e., headers with the prefix `coxeter/`.\n\nIn this ticket we change the includes in `src/sage/libs/coxeter3/decl.pxd` to use the prefix `coxeter/`, which allows us to get rid of `include_dirs` in `src/module_list.py`:\n\n```\n    OptionalExtension('sage.libs.coxeter3.coxeter',\n              sources = ['sage/libs/coxeter3/coxeter.pyx'],\n              language=\"c++\",\n              include_dirs = [os.path.join(SAGE_INC, 'coxeter')],\n              package = 'coxeter3'),\n```\n\nThis simplifies the work in #29720.\n\n\n\nCC:  @tscrim @dimpase @orlitzky @antonio-rojas @isuruf\n\nKeywords: sd109, spkg-configure\n\nBranch/Commit: 1497f3f08d580fb6579e8316f3e4b05d5e8d81b8\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29721\n\n",
    "closed_at": "2020-06-22T22:34:15Z",
    "created_at": "2020-05-21T06:28:23Z",
    "labels": [
        "component: build: configure"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "coxeter3: Add spkg-configure.m4, use coxeter/ prefix for includes, move OptionalExtension options to .pyx file directives",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29721",
    "user": "https://github.com/mkoeppe"
}
```
Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions; they install coxeter in a compatible way, i.e., headers with the prefix `coxeter/`.

In this ticket we change the includes in `src/sage/libs/coxeter3/decl.pxd` to use the prefix `coxeter/`, which allows us to get rid of `include_dirs` in `src/module_list.py`:

```
    OptionalExtension('sage.libs.coxeter3.coxeter',
              sources = ['sage/libs/coxeter3/coxeter.pyx'],
              language="c++",
              include_dirs = [os.path.join(SAGE_INC, 'coxeter')],
              package = 'coxeter3'),
```

This simplifies the work in #29720.



CC:  @tscrim @dimpase @orlitzky @antonio-rojas @isuruf

Keywords: sd109, spkg-configure

Branch/Commit: 1497f3f08d580fb6579e8316f3e4b05d5e8d81b8

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29721





---

archive/issue_comments_446055.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Package exist on Arch and Fedora according to https://repology.org/project/coxeter/versions\n+Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions\n \n It should be checked that all distributions that package the library install the headers with the same prefix \\`coxeter/\\`.\n \n@@ -14,7 +14,9 @@\n \n It should be checked whether we can get rid of \\`include_dirs\\` by changing \\`src/sage/libs/coxeter3/decl.pxd\\`.\n \n-This would simply the work in #29720.\n+This would simplify the work in #29720.\n+\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2020-05-21T06:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446055",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Package exist on Arch and Fedora according to https://repology.org/project/coxeter/versions
+Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions
 
 It should be checked that all distributions that package the library install the headers with the same prefix \`coxeter/\`.
 
@@ -14,7 +14,9 @@
 
 It should be checked whether we can get rid of \`include_dirs\` by changing \`src/sage/libs/coxeter3/decl.pxd\`.
 
-This would simply the work in #29720.
+This would simplify the work in #29720.
+
+
 
 Comment: 1
 
```




---

archive/issue_comments_446056.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2020-05-27T18:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446056",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_446057.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd109\".",
    "created_at": "2020-05-27T18:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446057",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd109".



---

archive/issue_comments_446058.json:
```json
{
    "body": "<a id='comment:5'></a>Help with this ticket would be very welcome",
    "created_at": "2020-05-29T18:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446058",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Help with this ticket would be very welcome



---

archive/issue_comments_446059.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-03T05:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_446060.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-03T05:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446060",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_446061.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions; they install coxeter in a compatible way, i.e., headers with the prefix \\`coxeter/\\`.\n+\n+In this ticket we change the includes in \\`src/sage/libs/coxeter3/decl.pxd\\` to use the prefix \\`coxeter/\\`, which allows us to get rid of \\`include_dirs\\` in \\`src/module_list.py\\`:\n+\n+\\`\\`\\`\n+    OptionalExtension('sage.libs.coxeter3.coxeter',\n+              sources = ['sage/libs/coxeter3/coxeter.pyx'],\n+              language=\"c++\",\n+              include_dirs = [os.path.join(SAGE_INC, 'coxeter')],\n+              package = 'coxeter3'),\n+\\`\\`\\`\n+\n+This simplifies the work in #29720.\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2020-06-03T15:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446061",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,17 @@
+Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions; they install coxeter in a compatible way, i.e., headers with the prefix \`coxeter/\`.
+
+In this ticket we change the includes in \`src/sage/libs/coxeter3/decl.pxd\` to use the prefix \`coxeter/\`, which allows us to get rid of \`include_dirs\` in \`src/module_list.py\`:
+
+\`\`\`
+    OptionalExtension('sage.libs.coxeter3.coxeter',
+              sources = ['sage/libs/coxeter3/coxeter.pyx'],
+              language="c++",
+              include_dirs = [os.path.join(SAGE_INC, 'coxeter')],
+              package = 'coxeter3'),
+\`\`\`
+
+This simplifies the work in #29720.
+
 
 
 Comment: 1
```




---

archive/issue_comments_446062.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-06-03T16:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446062",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_446063.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions; they install coxeter in a compatible way, i.e., headers with the prefix \\`coxeter/\\`.\n+\n+There is no .pc file. We add an \\`spkg-configure.m4\\` using \\`AC_LINK_IFELSE\\`.\n+\n+We also change the includes in \\`src/sage/libs/coxeter3/decl.pxd\\` to use the prefix \\`coxeter/\\`, which allows us to get rid of \\`include_dirs\\` in \\`src/module_list.py\\`:\n+\n+\\`\\`\\`\n+    OptionalExtension('sage.libs.coxeter3.coxeter',\n+              sources = ['sage/libs/coxeter3/coxeter.pyx'],\n+              language=\"c++\",\n+              include_dirs = [os.path.join(SAGE_INC, 'coxeter')],\n+              package = 'coxeter3'),\n+\\`\\`\\`\n+(This simplifies the work in #29720.)\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2020-06-03T16:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446063",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,18 @@
+Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions; they install coxeter in a compatible way, i.e., headers with the prefix \`coxeter/\`.
+
+There is no .pc file. We add an \`spkg-configure.m4\` using \`AC_LINK_IFELSE\`.
+
+We also change the includes in \`src/sage/libs/coxeter3/decl.pxd\` to use the prefix \`coxeter/\`, which allows us to get rid of \`include_dirs\` in \`src/module_list.py\`:
+
+\`\`\`
+    OptionalExtension('sage.libs.coxeter3.coxeter',
+              sources = ['sage/libs/coxeter3/coxeter.pyx'],
+              language="c++",
+              include_dirs = [os.path.join(SAGE_INC, 'coxeter')],
+              package = 'coxeter3'),
+\`\`\`
+(This simplifies the work in #29720.)
+
 
 
 Comment: 1
```




---

archive/issue_comments_446064.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-03T16:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446064",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_446065.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions; they install coxeter in a compatible way, i.e., headers with the prefix \\`coxeter/\\`.\n+\n+In this ticket we change the includes in \\`src/sage/libs/coxeter3/decl.pxd\\` to use the prefix \\`coxeter/\\`, which allows us to get rid of \\`include_dirs\\` in \\`src/module_list.py\\`:\n+\n+\\`\\`\\`\n+    OptionalExtension('sage.libs.coxeter3.coxeter',\n+              sources = ['sage/libs/coxeter3/coxeter.pyx'],\n+              language=\"c++\",\n+              include_dirs = [os.path.join(SAGE_INC, 'coxeter')],\n+              package = 'coxeter3'),\n+\\`\\`\\`\n+\n+This simplifies the work in #29720.\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2020-06-03T17:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446065",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,17 @@
+Package exists on Arch and Fedora according to https://repology.org/project/coxeter/versions; they install coxeter in a compatible way, i.e., headers with the prefix \`coxeter/\`.
+
+In this ticket we change the includes in \`src/sage/libs/coxeter3/decl.pxd\` to use the prefix \`coxeter/\`, which allows us to get rid of \`include_dirs\` in \`src/module_list.py\`:
+
+\`\`\`
+    OptionalExtension('sage.libs.coxeter3.coxeter',
+              sources = ['sage/libs/coxeter3/coxeter.pyx'],
+              language="c++",
+              include_dirs = [os.path.join(SAGE_INC, 'coxeter')],
+              package = 'coxeter3'),
+\`\`\`
+
+This simplifies the work in #29720.
+
 
 
 Comment: 1
```




---

archive/issue_comments_446066.json:
```json
{
    "body": "Changing keywords from \"sd109\" to \"sd109, spkg-configure\".",
    "created_at": "2020-06-03T17:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446066",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "sd109" to "sd109, spkg-configure".



---

archive/issue_comments_446067.json:
```json
{
    "body": "<a id='comment:14'></a>coxeter3 builds on my system. So LGTM.\n\nOne of these days I will actually get back to converting coxeter3 to full C++ and doing some additional cleanup...",
    "created_at": "2020-06-03T23:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446067",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>coxeter3 builds on my system. So LGTM.

One of these days I will actually get back to converting coxeter3 to full C++ and doing some additional cleanup...



---

archive/issue_comments_446068.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-03T23:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446068",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_446069.json:
```json
{
    "body": "<a id='comment:15'></a>Thank you!",
    "created_at": "2020-06-03T23:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446069",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Thank you!



---

archive/issue_events_076035.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-22T22:34:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29721#event-76035"
}
```



---

archive/issue_comments_446070.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-06-22T22:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29721#issuecomment-446070",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
