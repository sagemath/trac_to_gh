# Issue 32528: use â„¤ in repr of SL(2,Z)

archive/issues_032528.json:
```json
{
    "body": "CC:  @davidayotte tscrim slelievre @kliem cremona roed\n\nalso for congruence subgroups\n\nIssue created by migration from https://trac.sagemath.org/ticket/32765\n\n",
    "created_at": "2021-10-25T15:48:54Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "use \u2124 in repr of SL(2,Z)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32528",
    "user": "chapoton"
}
```
CC:  @davidayotte tscrim slelievre @kliem cremona roed

also for congruence subgroups

Issue created by migration from https://trac.sagemath.org/ticket/32765





---

archive/issue_comments_464087.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-10-25T15:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464087",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_464088.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-25T15:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464088",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_464089.json:
```json
{
    "body": "LGTM. I tested your ticket and ran \n\n`./sage -t src/sage/modular` \n\nwithout any failed doctest. Do you prefer to wait until the pathbots results before I put this in positive review?",
    "created_at": "2021-10-25T16:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464089",
    "user": "@DavidAyotte"
}
```

LGTM. I tested your ticket and ran 

`./sage -t src/sage/modular` 

without any failed doctest. Do you prefer to wait until the pathbots results before I put this in positive review?



---

archive/issue_comments_464090.json:
```json
{
    "body": "Merci.\n\nJe lance mon patchbot sur l'affaire tout de suite. R\u00e9sultat dans quelques heures.",
    "created_at": "2021-10-25T16:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464090",
    "user": "chapoton"
}
```

Merci.

Je lance mon patchbot sur l'affaire tout de suite. RÃ©sultat dans quelques heures.



---

archive/issue_comments_464091.json:
```json
{
    "body": "This is not really an improvement. Writing `SL(2,ZZ)` would be, since that is something that can actually easily be entered on a keyboard and actually produces sensible results when input into sage.",
    "created_at": "2021-10-25T17:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464091",
    "user": "nbruin"
}
```

This is not really an improvement. Writing `SL(2,ZZ)` would be, since that is something that can actually easily be entered on a keyboard and actually produces sensible results when input into sage.



---

archive/issue_comments_464092.json:
```json
{
    "body": "Replying to [comment:5 nbruin]:\n> This is not really an improvement. Writing `SL(2,ZZ)` would be, since that is something that can actually easily be entered on a keyboard and actually produces sensible results when input into sage.\n\nThis is a good point. Funny thing, the full modular group and the special linear group SL(2, ZZ) are not considered the same object in [SageMath](SageMath):\n\n\n```\nsage: SL(2, ZZ)\nSpecial Linear Group of degree 2 over Integer Ring\nsage: SL2Z\nModular Group SL(2,Z)\nsage: SL2Z == SL(2, ZZ)\nFalse\n```\n\n\nMoreover:\n\n\n```\nsage: ModularForms(SL(2, ZZ), 12)\nTraceback (most recent call last):\n...\nTypeError: group of unknown type.\n```\n\n\nI believe that, from a user point of view, this could be confusing.",
    "created_at": "2021-10-25T17:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464092",
    "user": "@DavidAyotte"
}
```

Replying to [comment:5 nbruin]:
> This is not really an improvement. Writing `SL(2,ZZ)` would be, since that is something that can actually easily be entered on a keyboard and actually produces sensible results when input into sage.

This is a good point. Funny thing, the full modular group and the special linear group SL(2, ZZ) are not considered the same object in [SageMath](SageMath):


```
sage: SL(2, ZZ)
Special Linear Group of degree 2 over Integer Ring
sage: SL2Z
Modular Group SL(2,Z)
sage: SL2Z == SL(2, ZZ)
False
```


Moreover:


```
sage: ModularForms(SL(2, ZZ), 12)
Traceback (most recent call last):
...
TypeError: group of unknown type.
```


I believe that, from a user point of view, this could be confusing.



---

archive/issue_comments_464093.json:
```json
{
    "body": "For what it worth, i am also in favor of a copy-pastable `SL(2, ZZ)`. People willing to have a non-text display could always do `%display latex`.",
    "created_at": "2021-10-25T18:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464093",
    "user": "tmonteil"
}
```

For what it worth, i am also in favor of a copy-pastable `SL(2, ZZ)`. People willing to have a non-text display could always do `%display latex`.



---

archive/issue_comments_464094.json:
```json
{
    "body": "\ud83c\udf83 Mazette, quel enthousiasme.. \ud83c\udf83\n\nI think one should not confuse string representation and copy-pastable things. The input commands are copy-pastable. The use of unicode in the string representations should become a normal thing. This is purely text display.",
    "created_at": "2021-10-25T18:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464094",
    "user": "chapoton"
}
```

ðŸŽƒ Mazette, quel enthousiasme.. ðŸŽƒ

I think one should not confuse string representation and copy-pastable things. The input commands are copy-pastable. The use of unicode in the string representations should become a normal thing. This is purely text display.



---

archive/issue_comments_464095.json:
```json
{
    "body": "Replying to [comment:8 chapoton]:\n> I think one should not confuse string representation and copy-pastable things. The input commands are copy-pastable. The use of unicode in the string representations should become a normal thing. This is purely text display.\n\nI suppose the underlying issue here is that Sage does (in many cases) not properly implement `str` and `repr`. Indeed, `str` should be human-readable as much as possible (which I agree includes the use of Unicode whenever appropriate), while `repr` should ideally return a Sage expression that `eval`uates to an identical object.\n\nBy the way, `\u2124` even works as an identifier in Python and Sage (but it seems to get canonicalized into `Z`).",
    "created_at": "2021-10-26T03:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464095",
    "user": "lorenz"
}
```

Replying to [comment:8 chapoton]:
> I think one should not confuse string representation and copy-pastable things. The input commands are copy-pastable. The use of unicode in the string representations should become a normal thing. This is purely text display.

I suppose the underlying issue here is that Sage does (in many cases) not properly implement `str` and `repr`. Indeed, `str` should be human-readable as much as possible (which I agree includes the use of Unicode whenever appropriate), while `repr` should ideally return a Sage expression that `eval`uates to an identical object.

By the way, `â„¤` even works as an identifier in Python and Sage (but it seems to get canonicalized into `Z`).



---

archive/issue_comments_464096.json:
```json
{
    "body": "so, can we please reach a decision there ?\n\nWe have already plenty of unicode in the repr of many objects. This move is just one further step in this direction.",
    "created_at": "2021-11-03T12:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464096",
    "user": "chapoton"
}
```

so, can we please reach a decision there ?

We have already plenty of unicode in the repr of many objects. This move is just one further step in this direction.



---

archive/issue_comments_464097.json:
```json
{
    "body": "I have negative feelings about this though not strong ones. Reading the trac message and this ticket on an old android tablet I cannot even see the character which is being proposed as a replacement.  Is the plan to do the same for Q and Qbar and R or C?  Not the last two surely as they are represented by several different types?   \n\nI really find it surprising that anyone cares enough about such things!",
    "created_at": "2021-11-03T13:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464097",
    "user": "cremona"
}
```

I have negative feelings about this though not strong ones. Reading the trac message and this ticket on an old android tablet I cannot even see the character which is being proposed as a replacement.  Is the plan to do the same for Q and Qbar and R or C?  Not the last two surely as they are represented by several different types?   

I really find it surprising that anyone cares enough about such things!



---

archive/issue_comments_464098.json:
```json
{
    "body": "Possible solution (cf. my other comment above):\n\n- Keep `_repr_` more or less as is, encouraging output that can be copied back into a Sage shell.\n- Add an optional `_str_` method which returns a human-readable (possibly Unicode) string.\n- Add a global switch to let users choose between the two display modes.\n\nOverall though, I agree that this is not a very important issue.",
    "created_at": "2021-11-04T07:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464098",
    "user": "lorenz"
}
```

Possible solution (cf. my other comment above):

- Keep `_repr_` more or less as is, encouraging output that can be copied back into a Sage shell.
- Add an optional `_str_` method which returns a human-readable (possibly Unicode) string.
- Add a global switch to let users choose between the two display modes.

Overall though, I agree that this is not a very important issue.



---

archive/issue_comments_464099.json:
```json
{
    "body": "see also the release notes for 9.4:\n\nhttps://wiki.sagemath.org/ReleaseTours/sage-9.4#Unicode_characters_for_various_symbols_in_plain_text_outputs",
    "created_at": "2021-11-10T18:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464099",
    "user": "chapoton"
}
```

see also the release notes for 9.4:

https://wiki.sagemath.org/ReleaseTours/sage-9.4#Unicode_characters_for_various_symbols_in_plain_text_outputs



---

archive/issue_comments_464100.json:
```json
{
    "body": "Hello,\n\nI think that everybody here has made some good points. I had some thought in favor about this ticket and I wanted to share them. \n\nFirst, I don't think that the changes in this ticket would negatively affect that much the general [SageMath](SageMath) user. Indeed, in all my years of using [SageMath](SageMath) for my studies or research, I have never copied/pasted the representation of an object to the console. Take for example:\n\n```\nsage: ModularForms(1, 12)\nModular Forms space of dimension 2 for Modular Group SL(2,Z) of weight 12 over Rational Field\n```\n\nThe representation of the modular forms spaces does not display (almost) anything that could be copied back into the console (except maybe \"SL(2, Z)\").\n\nNext, if a user is confused about the syntax because the output is \"\u2124\" and not \"ZZ\", then I think that the fault goes back to the Sage tutorial/reference manuals for doing a poor job of educating the user (but I strongly don't think that's the case). Again, in all the years I used Sage (mostly for modular forms), I always knew that `ZZ` stands for the ring of integers.\n\nFinally, these days many machines are able to display unicode characters, except maybe an old tablet or my smartwatch, but it is very unlikely that a user would install the software on these machines.",
    "created_at": "2021-11-11T20:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464100",
    "user": "@DavidAyotte"
}
```

Hello,

I think that everybody here has made some good points. I had some thought in favor about this ticket and I wanted to share them. 

First, I don't think that the changes in this ticket would negatively affect that much the general [SageMath](SageMath) user. Indeed, in all my years of using [SageMath](SageMath) for my studies or research, I have never copied/pasted the representation of an object to the console. Take for example:

```
sage: ModularForms(1, 12)
Modular Forms space of dimension 2 for Modular Group SL(2,Z) of weight 12 over Rational Field
```

The representation of the modular forms spaces does not display (almost) anything that could be copied back into the console (except maybe "SL(2, Z)").

Next, if a user is confused about the syntax because the output is "â„¤" and not "ZZ", then I think that the fault goes back to the Sage tutorial/reference manuals for doing a poor job of educating the user (but I strongly don't think that's the case). Again, in all the years I used Sage (mostly for modular forms), I always knew that `ZZ` stands for the ring of integers.

Finally, these days many machines are able to display unicode characters, except maybe an old tablet or my smartwatch, but it is very unlikely that a user would install the software on these machines.



---

archive/issue_comments_464101.json:
```json
{
    "body": "I've just tried out pasting \"\u2124\" into a terminal window and indeed it displays properly in a modern terminal and, curiously, even in xterm (although it looks awful, but so do most characters there).\n\nHowever, it actually looks a lot like a \"Z\", but it isn't. I really have to stare at my screen for a bit to see the difference, and if I wouldn't know to look for the difference, I could easily miss it. The python interpreter rounds it to a Z in identifiers, but not in strings. So:\n\n```\n>>> dict(\u2124 = 1)\n{'Z': 1}\n>>> {'\u2124' : 1}\n{'\u2124': 1}\n```\n\nyield dictionaries with different keys. Mathematical formulas produced by computer algebra systems usually look awful, and a few unicode characters don't really improve that. Having the capability of producing a LaTeX representation helps, but generally needs editing for inclusion in manuscripts anyway. I don't think it's worth the extra burden of confusion.\n\nUsing fancy symbols and arrows in maps and tensor products concerns me less, because those characters won't be accepted by the Python lexer anyway (and they won't easily be mistaken for a similar looking but different character)",
    "created_at": "2021-11-11T22:30:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464101",
    "user": "nbruin"
}
```

I've just tried out pasting "â„¤" into a terminal window and indeed it displays properly in a modern terminal and, curiously, even in xterm (although it looks awful, but so do most characters there).

However, it actually looks a lot like a "Z", but it isn't. I really have to stare at my screen for a bit to see the difference, and if I wouldn't know to look for the difference, I could easily miss it. The python interpreter rounds it to a Z in identifiers, but not in strings. So:

```
>>> dict(â„¤ = 1)
{'Z': 1}
>>> {'â„¤' : 1}
{'â„¤': 1}
```

yield dictionaries with different keys. Mathematical formulas produced by computer algebra systems usually look awful, and a few unicode characters don't really improve that. Having the capability of producing a LaTeX representation helps, but generally needs editing for inclusion in manuscripts anyway. I don't think it's worth the extra burden of confusion.

Using fancy symbols and arrows in maps and tensor products concerns me less, because those characters won't be accepted by the Python lexer anyway (and they won't easily be mistaken for a similar looking but different character)



---

archive/issue_comments_464102.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-12-06T15:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464102",
    "user": "chapoton"
}
```

Resolution: invalid



---

archive/issue_comments_464103.json:
```json
{
    "body": "closing that as invalid, given the opposition.",
    "created_at": "2021-12-06T15:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32528#issuecomment-464103",
    "user": "chapoton"
}
```

closing that as invalid, given the opposition.
