# Issue 32528: use â„¤ in repr of SL(2,Z)

Issue created by migration from https://trac.sagemath.org/ticket/32765

Original creator: chapoton

Original creation time: 2021-10-25 15:48:54

CC:  @davidayotte tscrim slelievre @kliem cremona roed

also for congruence subgroups


---

Comment by chapoton created at 2021-10-25 15:49:22

New commits:


---

Comment by chapoton created at 2021-10-25 15:49:22

Changing status from new to needs_review.


---

Comment by @DavidAyotte created at 2021-10-25 16:09:11

LGTM. I tested your ticket and ran 

`./sage -t src/sage/modular` 

without any failed doctest. Do you prefer to wait until the pathbots results before I put this in positive review?


---

Comment by chapoton created at 2021-10-25 16:34:34

Merci.

Je lance mon patchbot sur l'affaire tout de suite. RÃ©sultat dans quelques heures.


---

Comment by nbruin created at 2021-10-25 17:09:05

This is not really an improvement. Writing `SL(2,ZZ)` would be, since that is something that can actually easily be entered on a keyboard and actually produces sensible results when input into sage.


---

Comment by @DavidAyotte created at 2021-10-25 17:20:50

Replying to [comment:5 nbruin]:
> This is not really an improvement. Writing `SL(2,ZZ)` would be, since that is something that can actually easily be entered on a keyboard and actually produces sensible results when input into sage.

This is a good point. Funny thing, the full modular group and the special linear group SL(2, ZZ) are not considered the same object in [SageMath](SageMath):


```
sage: SL(2, ZZ)
Special Linear Group of degree 2 over Integer Ring
sage: SL2Z
Modular Group SL(2,Z)
sage: SL2Z == SL(2, ZZ)
False
```


Moreover:


```
sage: ModularForms(SL(2, ZZ), 12)
Traceback (most recent call last):
...
TypeError: group of unknown type.
```


I believe that, from a user point of view, this could be confusing.


---

Comment by tmonteil created at 2021-10-25 18:08:18

For what it worth, i am also in favor of a copy-pastable `SL(2, ZZ)`. People willing to have a non-text display could always do `%display latex`.


---

Comment by chapoton created at 2021-10-25 18:40:04

ðŸŽƒ Mazette, quel enthousiasme.. ðŸŽƒ

I think one should not confuse string representation and copy-pastable things. The input commands are copy-pastable. The use of unicode in the string representations should become a normal thing. This is purely text display.


---

Comment by lorenz created at 2021-10-26 03:01:33

Replying to [comment:8 chapoton]:
> I think one should not confuse string representation and copy-pastable things. The input commands are copy-pastable. The use of unicode in the string representations should become a normal thing. This is purely text display.

I suppose the underlying issue here is that Sage does (in many cases) not properly implement `str` and `repr`. Indeed, `str` should be human-readable as much as possible (which I agree includes the use of Unicode whenever appropriate), while `repr` should ideally return a Sage expression that `eval`uates to an identical object.

By the way, `â„¤` even works as an identifier in Python and Sage (but it seems to get canonicalized into `Z`).


---

Comment by chapoton created at 2021-11-03 12:57:24

so, can we please reach a decision there ?

We have already plenty of unicode in the repr of many objects. This move is just one further step in this direction.


---

Comment by cremona created at 2021-11-03 13:50:10

I have negative feelings about this though not strong ones. Reading the trac message and this ticket on an old android tablet I cannot even see the character which is being proposed as a replacement.  Is the plan to do the same for Q and Qbar and R or C?  Not the last two surely as they are represented by several different types?   

I really find it surprising that anyone cares enough about such things!


---

Comment by lorenz created at 2021-11-04 07:03:09

Possible solution (cf. my other comment above):

- Keep `_repr_` more or less as is, encouraging output that can be copied back into a Sage shell.
- Add an optional `_str_` method which returns a human-readable (possibly Unicode) string.
- Add a global switch to let users choose between the two display modes.

Overall though, I agree that this is not a very important issue.


---

Comment by chapoton created at 2021-11-10 18:47:23

see also the release notes for 9.4:

https://wiki.sagemath.org/ReleaseTours/sage-9.4#Unicode_characters_for_various_symbols_in_plain_text_outputs


---

Comment by @DavidAyotte created at 2021-11-11 20:29:18

Hello,

I think that everybody here has made some good points. I had some thought in favor about this ticket and I wanted to share them. 

First, I don't think that the changes in this ticket would negatively affect that much the general [SageMath](SageMath) user. Indeed, in all my years of using [SageMath](SageMath) for my studies or research, I have never copied/pasted the representation of an object to the console. Take for example:

```
sage: ModularForms(1, 12)
Modular Forms space of dimension 2 for Modular Group SL(2,Z) of weight 12 over Rational Field
```

The representation of the modular forms spaces does not display (almost) anything that could be copied back into the console (except maybe "SL(2, Z)").

Next, if a user is confused about the syntax because the output is "â„¤" and not "ZZ", then I think that the fault goes back to the Sage tutorial/reference manuals for doing a poor job of educating the user (but I strongly don't think that's the case). Again, in all the years I used Sage (mostly for modular forms), I always knew that `ZZ` stands for the ring of integers.

Finally, these days many machines are able to display unicode characters, except maybe an old tablet or my smartwatch, but it is very unlikely that a user would install the software on these machines.


---

Comment by nbruin created at 2021-11-11 22:30:51

I've just tried out pasting "â„¤" into a terminal window and indeed it displays properly in a modern terminal and, curiously, even in xterm (although it looks awful, but so do most characters there).

However, it actually looks a lot like a "Z", but it isn't. I really have to stare at my screen for a bit to see the difference, and if I wouldn't know to look for the difference, I could easily miss it. The python interpreter rounds it to a Z in identifiers, but not in strings. So:

```
>>> dict(â„¤ = 1)
{'Z': 1}
>>> {'â„¤' : 1}
{'â„¤': 1}
```

yield dictionaries with different keys. Mathematical formulas produced by computer algebra systems usually look awful, and a few unicode characters don't really improve that. Having the capability of producing a LaTeX representation helps, but generally needs editing for inclusion in manuscripts anyway. I don't think it's worth the extra burden of confusion.

Using fancy symbols and arrows in maps and tensor products concerns me less, because those characters won't be accepted by the Python lexer anyway (and they won't easily be mistaken for a similar looking but different character)


---

Comment by chapoton created at 2021-12-06 15:23:29

Resolution: invalid


---

Comment by chapoton created at 2021-12-06 15:23:29

closing that as invalid, given the opposition.
