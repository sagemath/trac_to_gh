# Issue 23248: Ring morphisms should not override __richcmp__

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2017-07-19 23:36:24

CC:  roed

But only override `_richcmp_` instead.

Overwriting `__richcmp__` used to be necessary to override `__hash__`. This is not the case anymore it seems.


---

Comment by saraedum created at 2017-07-19 23:38:06

Changing keywords from "" to "sd87".


---

Comment by saraedum created at 2017-07-19 23:38:06

New commits:


---

Comment by saraedum created at 2017-07-19 23:39:34

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-07-20 07:31:27

These blocks of code should go away:

```
        if not isinstance(other, RingHomomorphism_cover):
            return (op == Py_NE)
```


I disagree with them in the first place and they are just pointless now.


---

Comment by jdemeyer created at 2017-07-20 07:31:27

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-07-20 21:29:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2017-07-20 21:29:43

Changing status from needs_work to needs_review.


---

Comment by aly.deines created at 2017-07-20 22:29:50

Passes all doctests now too.


---

Comment by aly.deines created at 2017-07-20 22:29:50

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2017-07-21 08:09:12

Sorry, I was wrong. At least some of the type checks are still needed, because equal parents does not imply equal types here. For example:

```
sage: R.<x,y> = PolynomialRing(QQ, 2)
sage: S.<a,b> = R.quo(x^2 + y^2)
sage: phi = S.cover()
sage: alpha = R.hom(R, (0,0))
sage: psi = phi.pre_compose(alpha)
sage: parent(psi) is parent(phi)
True
sage: type(psi) is type(phi)
False
```



---

Comment by jdemeyer created at 2017-07-21 08:09:12

Changing status from positive_review to needs_work.


---

Comment by git created at 2017-07-21 22:43:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2017-07-21 22:44:50

Changing status from needs_work to needs_review.


---

Comment by roed created at 2017-07-22 02:18:46

Changing status from needs_review to positive_review.


---

Comment by roed created at 2017-07-22 02:18:46

Looks good to me.


---

Comment by vbraun created at 2017-08-05 23:26:46

Resolution: fixed
