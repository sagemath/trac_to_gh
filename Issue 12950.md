# Issue 12950: Remove last vestiges of darcs from Sage

Issue created by migration from https://trac.sagemath.org/ticket/13122

Original creator: kcrisman

Original creation time: 2012-06-16 03:19:47

Assignee: leif

CC:  kini robertwb

#9257 removed one of the last remnants of the darcs revision control system from Sage.   Currently we have

```
$ grep -r darcs Downloads/sage-4.8/devel/sage/
Binary file Downloads/sage-4.8/devel/sage/.hg/store/00manifest.d matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/changes.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/commit.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/doc/new.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/new.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/notes.txt.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/sage/misc/darcs.py.i matches
```

which is fine, all repo history.  But apparently we still have a file named sage-mirror-darcs-script:

```
$ grep -r darcs Downloads/sage-5.0/local/bin/
Binary file Downloads/sage-5.0/local/bin/.hg/dirstate matches
Downloads/sage-5.0/local/bin/.hg/store/fncache:data/sage-mirror-darcs-scripts.i
Binary file Downloads/sage-5.0/local/bin/.hg/undo.dirstate matches
Downloads/sage-5.0/local/bin/.hgignore:(^|/)\_darcs($|/)
Downloads/sage-5.0/local/bin/.hgignore:darcs
Downloads/sage-5.0/local/bin/sage-mirror:rsync -axLH --rsh=ssh --delete -r -v  bin/sage-* bin/_darcs modular:/home/was/www/sage/dist/src/scripts-darcs/
Downloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:cd _darcs/
Downloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:rsync -axLH --rsh=ssh --delete -r -v  * was@modular.math.washington.edu:www/sage/dist/src/scripts-darcs/_darcs/
```

and it's even still in spkg/bin/sage (the old sage-sage)!

```
$ grep -r darcs Downloads/sage-5.0/spkg/bin/
Downloads/sage-5.0/spkg/bin/sage:if [ "$1" = '-darcs'  -o "$1" = '--darcs' ]; then
Downloads/sage-5.0/spkg/bin/sage:    darcs "$@"
```

Needless to say,

```
$ sage -darcs
/Users/.../sage-5.0/spkg/bin/sage: line 606: darcs: command not found
```

So let's get rid of these last things.  Especially if we might be migrating to git in the mid-range future...


---

Attachment


---

Attachment


---

Attachment

This is all of the stuff that I found that is related to darcs. There are other useless scripts that are unused, but that is for another ticket :).


---

Comment by ohanar created at 2012-06-18 05:58:58

Changing status from new to needs_review.


---

Comment by kcrisman created at 2012-06-18 13:48:49

Should we also remove them from `.hgignore`?  Heck, why not.  Patch coming up for one of them, and I've submitted [an upstream pull request](https://github.com/sagemath/sagenb/pull/70) which you should be happy I figured out how to do :)


---

Attachment

Otherwise I guess this is fine.  Everything I find now is either directly related to the changes made here (in .hg/patches etc.), part of the revision history, or part of unrelated files (like Pygments and hgext in our Python).

Patchbot, apply [attachment: trac13122_scripts.patch], [attachment:trac13122_root.patch], [attachment:trac13122_extcode.patch], and [attachment:trac_13122-reviewer1.patch].


---

Comment by kcrisman created at 2012-06-18 13:59:23

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2012-06-21 00:26:32

Just FYI, sagenb upstream has just merged the pull request.


---

Comment by jdemeyer created at 2012-06-23 21:46:03

Resolution: fixed
