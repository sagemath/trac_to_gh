# Issue 12950: Remove last vestiges of darcs from Sage

archive/issues_012950.json:
```json
{
    "body": "Assignee: leif\n\nCC:  kini robertwb\n\n#9257 removed one of the last remnants of the darcs revision control system from Sage.   Currently we have\n\n```\n$ grep -r darcs Downloads/sage-4.8/devel/sage/\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/00manifest.d matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/changes.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/commit.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/doc/new.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/new.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/notes.txt.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/sage/misc/darcs.py.i matches\n```\n\nwhich is fine, all repo history.  But apparently we still have a file named sage-mirror-darcs-script:\n\n```\n$ grep -r darcs Downloads/sage-5.0/local/bin/\nBinary file Downloads/sage-5.0/local/bin/.hg/dirstate matches\nDownloads/sage-5.0/local/bin/.hg/store/fncache:data/sage-mirror-darcs-scripts.i\nBinary file Downloads/sage-5.0/local/bin/.hg/undo.dirstate matches\nDownloads/sage-5.0/local/bin/.hgignore:(^|/)\\_darcs($|/)\nDownloads/sage-5.0/local/bin/.hgignore:darcs\nDownloads/sage-5.0/local/bin/sage-mirror:rsync -axLH --rsh=ssh --delete -r -v  bin/sage-* bin/_darcs modular:/home/was/www/sage/dist/src/scripts-darcs/\nDownloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:cd _darcs/\nDownloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:rsync -axLH --rsh=ssh --delete -r -v  * was@modular.math.washington.edu:www/sage/dist/src/scripts-darcs/_darcs/\n```\n\nand it's even still in spkg/bin/sage (the old sage-sage)!\n\n```\n$ grep -r darcs Downloads/sage-5.0/spkg/bin/\nDownloads/sage-5.0/spkg/bin/sage:if [ \"$1\" = '-darcs'  -o \"$1\" = '--darcs' ]; then\nDownloads/sage-5.0/spkg/bin/sage:    darcs \"$@\"\n```\n\nNeedless to say,\n\n```\n$ sage -darcs\n/Users/.../sage-5.0/spkg/bin/sage: line 606: darcs: command not found\n```\n\nSo let's get rid of these last things.  Especially if we might be migrating to git in the mid-range future...\n\nIssue created by migration from https://trac.sagemath.org/ticket/13122\n\n",
    "created_at": "2012-06-16T03:19:47Z",
    "labels": [
        "scripts",
        "minor",
        "enhancement"
    ],
    "title": "Remove last vestiges of darcs from Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12950",
    "user": "kcrisman"
}
```
Assignee: leif

CC:  kini robertwb

#9257 removed one of the last remnants of the darcs revision control system from Sage.   Currently we have

```
$ grep -r darcs Downloads/sage-4.8/devel/sage/
Binary file Downloads/sage-4.8/devel/sage/.hg/store/00manifest.d matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/changes.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/commit.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/doc/new.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/new.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/notes.txt.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/sage/misc/darcs.py.i matches
```

which is fine, all repo history.  But apparently we still have a file named sage-mirror-darcs-script:

```
$ grep -r darcs Downloads/sage-5.0/local/bin/
Binary file Downloads/sage-5.0/local/bin/.hg/dirstate matches
Downloads/sage-5.0/local/bin/.hg/store/fncache:data/sage-mirror-darcs-scripts.i
Binary file Downloads/sage-5.0/local/bin/.hg/undo.dirstate matches
Downloads/sage-5.0/local/bin/.hgignore:(^|/)\_darcs($|/)
Downloads/sage-5.0/local/bin/.hgignore:darcs
Downloads/sage-5.0/local/bin/sage-mirror:rsync -axLH --rsh=ssh --delete -r -v  bin/sage-* bin/_darcs modular:/home/was/www/sage/dist/src/scripts-darcs/
Downloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:cd _darcs/
Downloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:rsync -axLH --rsh=ssh --delete -r -v  * was@modular.math.washington.edu:www/sage/dist/src/scripts-darcs/_darcs/
```

and it's even still in spkg/bin/sage (the old sage-sage)!

```
$ grep -r darcs Downloads/sage-5.0/spkg/bin/
Downloads/sage-5.0/spkg/bin/sage:if [ "$1" = '-darcs'  -o "$1" = '--darcs' ]; then
Downloads/sage-5.0/spkg/bin/sage:    darcs "$@"
```

Needless to say,

```
$ sage -darcs
/Users/.../sage-5.0/spkg/bin/sage: line 606: darcs: command not found
```

So let's get rid of these last things.  Especially if we might be migrating to git in the mid-range future...

Issue created by migration from https://trac.sagemath.org/ticket/13122





---

archive/issue_comments_156142.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-06-18T05:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12950#issuecomment-156142",
    "user": "ohanar"
}
```

Attachment



---

archive/issue_comments_156143.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-06-18T05:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12950#issuecomment-156143",
    "user": "ohanar"
}
```

Attachment



---

archive/issue_comments_156144.json:
```json
{
    "body": "Attachment\n\nThis is all of the stuff that I found that is related to darcs. There are other useless scripts that are unused, but that is for another ticket :).",
    "created_at": "2012-06-18T05:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12950#issuecomment-156144",
    "user": "ohanar"
}
```

Attachment

This is all of the stuff that I found that is related to darcs. There are other useless scripts that are unused, but that is for another ticket :).



---

archive/issue_comments_156145.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-06-18T05:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12950#issuecomment-156145",
    "user": "ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_156146.json:
```json
{
    "body": "Should we also remove them from `.hgignore`?  Heck, why not.  Patch coming up for one of them, and I've submitted [an upstream pull request](https://github.com/sagemath/sagenb/pull/70) which you should be happy I figured out how to do :)",
    "created_at": "2012-06-18T13:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12950#issuecomment-156146",
    "user": "kcrisman"
}
```

Should we also remove them from `.hgignore`?  Heck, why not.  Patch coming up for one of them, and I've submitted [an upstream pull request](https://github.com/sagemath/sagenb/pull/70) which you should be happy I figured out how to do :)



---

archive/issue_comments_156147.json:
```json
{
    "body": "Attachment\n\nOtherwise I guess this is fine.  Everything I find now is either directly related to the changes made here (in .hg/patches etc.), part of the revision history, or part of unrelated files (like Pygments and hgext in our Python).\n\nPatchbot, apply [attachment: trac13122_scripts.patch], [attachment:trac13122_root.patch], [attachment:trac13122_extcode.patch], and [attachment:trac_13122-reviewer1.patch].",
    "created_at": "2012-06-18T13:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12950#issuecomment-156147",
    "user": "kcrisman"
}
```

Attachment

Otherwise I guess this is fine.  Everything I find now is either directly related to the changes made here (in .hg/patches etc.), part of the revision history, or part of unrelated files (like Pygments and hgext in our Python).

Patchbot, apply [attachment: trac13122_scripts.patch], [attachment:trac13122_root.patch], [attachment:trac13122_extcode.patch], and [attachment:trac_13122-reviewer1.patch].



---

archive/issue_comments_156148.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-18T13:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12950#issuecomment-156148",
    "user": "kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_156149.json:
```json
{
    "body": "Just FYI, sagenb upstream has just merged the pull request.",
    "created_at": "2012-06-21T00:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12950#issuecomment-156149",
    "user": "kcrisman"
}
```

Just FYI, sagenb upstream has just merged the pull request.



---

archive/issue_comments_156150.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-06-23T21:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12950#issuecomment-156150",
    "user": "jdemeyer"
}
```

Resolution: fixed
