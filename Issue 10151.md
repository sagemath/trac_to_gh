# Issue 10151: bug in integral_points (for elliptic curves over Q)

Issue created by migration from https://trac.sagemath.org/ticket/10152

Original creator: cremona

Original creation time: 2010-10-21 19:58:16

Assignee: cremona

CC:  gaganskehon weigandt

Keywords: integral points


```
sage: E = EllipticCurve('2082a1')
sage: [P[0] for P in E.integral_points()]
[-11, -2, 4, 13]
```

but

```
sage: E.lift_x(507525709)
(507525709 : 11433453531221 : 1)
```

so we miss one point.  Note that this point is 13*P where P is the generator, and our code computes the bound to be 12.

John Cannon is sending me a complete list of integral points for all curves in the Cremona database, computed using Magma, using some recent enhancements.  Previously I had checked that Sage and Magma agreed to conductor 10000, so their enhancements must also fix bugs.


```

Magma V2.15-15    Thu Oct 21 2010 20:56:33 on John-laptop [Seed = 2704111428]
Type ? for help.  Type <Ctrl>-D to quit.

Loading startup file "/home/john/magma/Startup/startup.m"

> E:=EllipticCurve([1,0,1,-118,584]);
> IntegralPoints(E);
[ (13 : 29 : 1), (4 : 11 : 1), (-11 : 29 : 1), (-2 : -28 : 1), (507525709 : -11433961056931
: 1) ]
[
    [ <(13 : 29 : 1), 1> ],
    [ <(13 : 29 : 1), 2> ],
    [ <(13 : 29 : 1), 3> ],
    [ <(13 : 29 : 1), 4> ],
    [ <(13 : 29 : 1), 13> ]
]
19
```




---

Comment by cremona created at 2010-10-23 11:46:36

More data points:  with E=2082a1 and using the S_integral_points function, with S=[2] or S=[3] the coefficient bound used is 11, while with S=[2,3] it is 13 and the extra integral point is found!  Clearly, a priori, enlarging S should not ever reduce this bound, so something is wrong there.  This shows that both integral_points() and S_integral_points() need fixing.


---

Comment by cremona created at 2011-01-25 15:11:04

Here is a list of curves and integral x-coordinates not found by Sage, as provided by John Cannon.  It is not necessarily complete, but is a minimal set of test cases for any patch fixing this.

```

   Curve        Points found by Magma not in JC tables
 --------------------------
   2082a1       507525709
   6104b1       23036693
   8470g1       1681690
   8470g2       18888968
   13578j1      106398748
   16560w2      102492113
   23808e1      22259471153
   35739g1      148611521
   36094c1      1733011457
   36600bd1     880839998
   38646bd1     633070349
   38752c1      71243131
   39270x2      15427732395
   39330bu2     28736032507
   39715e1      367032124
   43050c2      127290394
   43770f1      247
   44282b1      704349106
   48294d1      26406701298449
   51414v1      649726
   51825h1      29581907
   52200e1      62128741241070
   56355b4      9817312168
   56392b1      49071409
   60610w2      81996154
   60648bm2     63137880         Curves missing around here
   63099e1      37015368
   65481c2      21083414         Curves missing around here
   75730a1      3786617429
   76128p1      50684407
   78078by1     1361015 5344835475
   83490r2      87561186
   90870a2      72592777212
   95337a1      167959
   100096h1     3318161
   101320f2     14134787
   103520a1     94894808
   108990cb2    71041501977
   109330k2     377482949
   109968f1     135059618524
   110976h2     116239257
   113706i1     1945 9319420657
   114240ev1    938125
   115920bb2    184673663
   116088n1     1374364421
   116511b1     1375325
   124110y1     37815783
   129420b1     1172841435
```



---

Comment by justin created at 2011-03-25 00:23:56

See #10973.  The patch there finds the missing integral points mentioned here.


---

Comment by aly.deines created at 2011-08-24 05:50:19

This is fixed by #10973.  It should be closed as duplicate.


---

Comment by was created at 2011-08-24 05:51:32

Resolution: duplicate


---

Comment by leif created at 2011-09-29 02:37:23

Changing keywords from "integral points" to "integral points sd32".
