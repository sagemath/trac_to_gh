# Issue 28942: Small bug in PHC interface

Issue created by migration from https://trac.sagemath.org/ticket/29179

Original creator: kcrisman

Original creation time: 2020-02-11 14:39:50

While trying to fix things on https://wiki.sagemath.org/interact/algebra I noticed the following problem if one doesn't have PHC installed:

```
sage: print(os.system('which phc') + '  PHC needs to be installed and in your path')
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-1-f9a470112020> in <module>()
----> 1 print(os.system('which phc') + '  PHC needs to be installed and in your path')

TypeError: unsupported operand type(s) for +: 'int' and 'str'
sage: os.system('which phc') 
256
```

This is from https://github.com/sagemath/sage/blob/develop/src/sage/interfaces/phc.py#L939 

```
        if e:
            from sage.misc.sage_ostools import have_program
            if not have_program('phc'):
                print(os.system('which phc') + '  PHC needs to be installed and in your path')
                raise RuntimeError
            # todo -- why? etc.
            with open(log_filename) as f:
                msg = f.read()
            raise RuntimeError(msg + "\nError running phc.")
```

But it is never tested because all the optional tests are, well, optional!  Anyway, the fix should be pretty easy, make it a string - presumably something left over from the py3 switch.

But we should also _test_ this, somehow.  How do you test for when a package is _not_ installed?


---

Comment by chapoton created at 2020-02-11 18:48:27

see #29163 ?


---

Comment by kcrisman created at 2020-02-11 22:42:34

> see #29163 ?
Hilarious!  I probably saw that email and said, "I don't know anything about PHC" and ignored it ... please accept my apologies, and thanks for fixing it!


---

Comment by kcrisman created at 2020-02-11 22:42:34

Changing status from new to needs_review.


---

Comment by kcrisman created at 2020-02-11 22:42:46

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2020-02-11 22:43:37

Though my comment about testing still stands ... is there some ticket open about testing for the _non_-presence of a package?  This is a desideratum.  I can open one if you don't know of one.


---

Comment by chapoton created at 2020-02-12 08:42:50

Resolution: duplicate
