# Issue 19255: Cleaning linear codes: __eq__, dual_code and commented debug lines

archive/issues_019255.json:
```json
{
    "body": "Some code in `LinearCode.py` is quite old and/or slow, and could be optimized.\nThis tickets proposes a faster implementation for `__eq__` and `dual_code` methods.\nIt also removes a lot of commented debug lines.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19492\n\n",
    "created_at": "2015-10-28T14:42:41Z",
    "labels": [
        "coding theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.0",
    "title": "Cleaning linear codes: __eq__, dual_code and commented debug lines",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19255",
    "user": "dlucas"
}
```
Some code in `LinearCode.py` is quite old and/or slow, and could be optimized.
This tickets proposes a faster implementation for `__eq__` and `dual_code` methods.
It also removes a lot of commented debug lines.

Issue created by migration from https://trac.sagemath.org/ticket/19492





---

archive/issue_comments_264233.json:
```json
{
    "body": "Let `C` be a linear code with `H` a parity check matrix of `C`. The generator matrix of `C`'s dual is `H`. I made changes in `AbstractLinearCode`'s `dual_code` method to use that property instead of the old implementation and got something faster.\n\nI also rewrote `AbstractLinearCode`'s `__eq__` which is now less heavy and a bit faster.\n\nFinally, I removed a lot of old debug prints that were still present in this file as commented lines.\n\nThis is now ready for review.\n----\nNew commits:",
    "created_at": "2015-10-28T14:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264233",
    "user": "dlucas"
}
```

Let `C` be a linear code with `H` a parity check matrix of `C`. The generator matrix of `C`'s dual is `H`. I made changes in `AbstractLinearCode`'s `dual_code` method to use that property instead of the old implementation and got something faster.

I also rewrote `AbstractLinearCode`'s `__eq__` which is now less heavy and a bit faster.

Finally, I removed a lot of old debug prints that were still present in this file as commented lines.

This is now ready for review.
----
New commits:



---

archive/issue_comments_264234.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-10-28T14:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264234",
    "user": "dlucas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_264235.json:
```json
{
    "body": "The following would be cleaner on two lines.\n\n```\n+        Ks, rbas = self.parity_check_matrix().right_kernel(), right.gens()\n```\n\nOtherwise it looks good.",
    "created_at": "2016-01-02T21:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264235",
    "user": "vdelecroix"
}
```

The following would be cleaner on two lines.

```
+        Ks, rbas = self.parity_check_matrix().right_kernel(), right.gens()
```

Otherwise it looks good.



---

archive/issue_comments_264236.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-02T21:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264236",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_264237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-05T09:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264237",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264238.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-05T09:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264238",
    "user": "dlucas"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_264239.json:
```json
{
    "body": "Thanks for your input.\n\nI changed the code to what you suggested. I also fixed a silly copy-paste mistake two lines below the one you mentioned.\n\nDavid",
    "created_at": "2016-01-05T09:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264239",
    "user": "dlucas"
}
```

Thanks for your input.

I changed the code to what you suggested. I also fixed a silly copy-paste mistake two lines below the one you mentioned.

David



---

archive/issue_comments_264240.json:
```json
{
    "body": "While you are at it, the print statements like\n\n```\nprint \" t = \",t,\" , v = \",n,\" , k = \",w,\" , lambda = \",wts[w]*binomial(w,t)/binomial(n,t)\n```\n\nare really ugly. Could you do something cleaner like\n\n```\nprint \"t={} v={} k={} lambda={}\".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t))\n```\n",
    "created_at": "2016-01-05T22:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264240",
    "user": "vdelecroix"
}
```

While you are at it, the print statements like

```
print " t = ",t," , v = ",n," , k = ",w," , lambda = ",wts[w]*binomial(w,t)/binomial(n,t)
```

are really ugly. Could you do something cleaner like

```
print "t={} v={} k={} lambda={}".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t))
```




---

archive/issue_comments_264241.json:
```json
{
    "body": "Even better would be\n\n```\nprint(\"t={} v={} k={} lambda={}\".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t)))\n```\n\nsince that's compatible with Python 2 and 3.",
    "created_at": "2016-01-06T07:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264241",
    "user": "jdemeyer"
}
```

Even better would be

```
print("t={} v={} k={} lambda={}".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t)))
```

since that's compatible with Python 2 and 3.



---

archive/issue_comments_264242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-06T12:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264242",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264243.json:
```json
{
    "body": "It's done.\nI picked Jeroen's suggestion for the new statements.",
    "created_at": "2016-01-06T12:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264243",
    "user": "dlucas"
}
```

It's done.
I picked Jeroen's suggestion for the new statements.



---

archive/issue_comments_264244.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-06T23:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264244",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_264245.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-07T22:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19255#issuecomment-264245",
    "user": "vbraun"
}
```

Resolution: fixed
