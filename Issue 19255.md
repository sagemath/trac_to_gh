# Issue 19255: Cleaning linear codes: __eq__, dual_code and commented debug lines

Issue created by migration from https://trac.sagemath.org/ticket/19492

Original creator: dlucas

Original creation time: 2015-10-28 14:42:41

Some code in `LinearCode.py` is quite old and/or slow, and could be optimized.
This tickets proposes a faster implementation for `__eq__` and `dual_code` methods.
It also removes a lot of commented debug lines.


---

Comment by dlucas created at 2015-10-28 14:49:41

Let `C` be a linear code with `H` a parity check matrix of `C`. The generator matrix of `C`'s dual is `H`. I made changes in `AbstractLinearCode`'s `dual_code` method to use that property instead of the old implementation and got something faster.

I also rewrote `AbstractLinearCode`'s `__eq__` which is now less heavy and a bit faster.

Finally, I removed a lot of old debug prints that were still present in this file as commented lines.

This is now ready for review.
----
New commits:


---

Comment by dlucas created at 2015-10-28 14:49:41

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2016-01-02 21:18:03

The following would be cleaner on two lines.

```
+        Ks, rbas = self.parity_check_matrix().right_kernel(), right.gens()
```

Otherwise it looks good.


---

Comment by vdelecroix created at 2016-01-02 21:18:03

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-01-05 09:18:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dlucas created at 2016-01-05 09:20:09

Changing status from needs_work to needs_review.


---

Comment by dlucas created at 2016-01-05 09:20:09

Thanks for your input.

I changed the code to what you suggested. I also fixed a silly copy-paste mistake two lines below the one you mentioned.

David


---

Comment by vdelecroix created at 2016-01-05 22:17:40

While you are at it, the print statements like

```
print " t = ",t," , v = ",n," , k = ",w," , lambda = ",wts[w]*binomial(w,t)/binomial(n,t)
```

are really ugly. Could you do something cleaner like

```
print "t={} v={} k={} lambda={}".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t))
```



---

Comment by jdemeyer created at 2016-01-06 07:11:46

Even better would be

```
print("t={} v={} k={} lambda={}".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t)))
```

since that's compatible with Python 2 and 3.


---

Comment by git created at 2016-01-06 12:46:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dlucas created at 2016-01-06 12:48:27

It's done.
I picked Jeroen's suggestion for the new statements.


---

Comment by vdelecroix created at 2016-01-06 23:49:35

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-01-07 22:41:06

Resolution: fixed
