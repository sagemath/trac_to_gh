# Issue 26196: Slowness in generic quo_rem

Issue created by migration from https://trac.sagemath.org/ticket/26433

Original creator: caruso

Original creation time: 2018-10-08 22:19:29

While working on #26405, I noticed that the generic implementation of `quo_rem` is very slow. Indeed, compare:


```
sage: R = Zp(2)
sage: S.<x> = R[]
sage: P = S.random_element(degree=100)
sage: a = R.random_element()
sage: %timeit _ = P % (x-a)
1000 loops, best of 3: 1.64 ms per loop
sage: %timeit _ = P(a)
10000 loops, best of 3: 81.9 µs per loop
```



---

Comment by git created at 2018-10-08 23:16:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by caruso created at 2018-10-08 23:16:49

Timings are now:


```
sage: %timeit _ = P % Q
1000 loops, best of 3: 210 µs per loop
```



---

Comment by caruso created at 2018-10-08 23:16:59

Changing status from new to needs_review.


---

Comment by git created at 2018-10-08 23:32:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-10-10 00:56:54

I made a few Cython improvements. I also pulled out the `if` statement because I felt the code duplication was minimal and it would be better to avoid doing the if check every time in the loop.

If my changes are good, then positive review (with the author name is filled in).


---

Comment by git created at 2018-10-10 00:58:28

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by caruso created at 2018-10-10 14:50:57

LGTM.


---

Comment by caruso created at 2018-10-10 14:50:57

Changing status from needs_review to positive_review.


---

Comment by caruso created at 2018-10-11 01:24:42

The patchbot reports one failing doctest in `src/sage/geometry/polyhedron/library.py` but I guess it is not related to this ticket (and the test passes on my computer).


---

Comment by vbraun created at 2018-10-20 11:58:12

Resolution: fixed


---

Comment by embray created at 2018-10-28 14:52:23

This should be re-targeted for 8.5.


---

Comment by mmezzarobba created at 2018-12-17 11:38:00

A regression that may be due to this change: #26433.


---

Comment by tscrim created at 2018-12-17 11:44:56

See #26907.
