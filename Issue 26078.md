# Issue 26078: Upgrade to Giac 1.5

archive/issues_026078.json:
```json
{
    "body": "CC:  @antonio-rojas @kiwifb @frederichan-IMJPRG @infinity0 @saraedum @tobihan @timokau\n\nKeywords: upgrade, giac\n\nThis ticket is to upgrade to Giac 1.5.\n\nA preliminary version \"1.5.0 unstable\" is available for testing:\n\n- [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)\n- [source tarball for giac-1.5.0](https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac-1.5.0.tar.gz)\n\nThis upgrade should solve #25822 and #25324 since the issues reported there are fixed upstream.\n\nAll that will be left to do in those tickets is add doctests.\n\nIssue created by migration from https://trac.sagemath.org/ticket/26315\n\n",
    "created_at": "2018-09-19T16:29:24Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Upgrade to Giac 1.5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26078",
    "user": "https://github.com/slel"
}
```
CC:  @antonio-rojas @kiwifb @frederichan-IMJPRG @infinity0 @saraedum @tobihan @timokau

Keywords: upgrade, giac

This ticket is to upgrade to Giac 1.5.

A preliminary version "1.5.0 unstable" is available for testing:

- [announcement on Giac / Xcas forum](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=8&t=2134)
- [source tarball for giac-1.5.0](https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac-1.5.0.tar.gz)

This upgrade should solve #25822 and #25324 since the issues reported there are fixed upstream.

All that will be left to do in those tickets is add doctests.

Issue created by migration from https://trac.sagemath.org/ticket/26315





---

archive/issue_comments_367312.json:
```json
{
    "body": "NB: I have  reported in giac's forum that without glpk the built of:\n\nhttp://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-1.tar.gz\n\nis broken.\nThis is a minor change in src/graphe.cc, but may be we could wait 1.5.0-2?\n\nWhatever, we never use the \"unstable\" file https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac-1.5.0.tar.gz for packaging because it changes often.\n\ncf: http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/README",
    "created_at": "2018-09-19T17:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367312",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

NB: I have  reported in giac's forum that without glpk the built of:

http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-1.tar.gz

is broken.
This is a minor change in src/graphe.cc, but may be we could wait 1.5.0-2?

Whatever, we never use the "unstable" file https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac-1.5.0.tar.gz for packaging because it changes often.

cf: http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/README



---

archive/issue_comments_367313.json:
```json
{
    "body": "Thanks frederichan for your comments and the link to the readme.\n\nOf course it does not seem reasonable to upgrade to giac-1.5.0-1.\n\nBut I thought I'd at least open the ticket if only to point out that\nupgrading to giac 1.5 should fix two other tickets.",
    "created_at": "2018-09-20T02:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367313",
    "user": "https://github.com/slel"
}
```

Thanks frederichan for your comments and the link to the readme.

Of course it does not seem reasonable to upgrade to giac-1.5.0-1.

But I thought I'd at least open the ticket if only to point out that
upgrading to giac 1.5 should fix two other tickets.



---

archive/issue_comments_367314.json:
```json
{
    "body": "From 21 sep I can now see a 1.5.0-3 version:\n\nhttp://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-3.tar.gz",
    "created_at": "2018-09-22T12:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367314",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

From 21 sep I can now see a 1.5.0-3 version:

http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/giac_1.5.0-3.tar.gz



---

archive/issue_comments_367315.json:
```json
{
    "body": "Looking at 1.5.0-3 here. I have libsamplerate-0.1.9 installed on the machine and I discovered that it is one of the new automagically detected configure option (on if you have it). Building giac failed until I passed `--disable-samplerate` at configure time. Unstable indeed.",
    "created_at": "2018-09-27T00:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367315",
    "user": "https://github.com/kiwifb"
}
```

Looking at 1.5.0-3 here. I have libsamplerate-0.1.9 installed on the machine and I discovered that it is one of the new automagically detected configure option (on if you have it). Building giac failed until I passed `--disable-samplerate` at configure time. Unstable indeed.



---

archive/issue_comments_367316.json:
```json
{
    "body": "Hi Francois, \nI didn't knew about this one. Should I report something? (if yes what?)\n\nBut I  know that glpk and nauty are new possible dependencies. As they standard sage packages, may be we should add them to giac's deps in sage?\n\nFrederic",
    "created_at": "2018-09-27T08:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367316",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Hi Francois, 
I didn't knew about this one. Should I report something? (if yes what?)

But I  know that glpk and nauty are new possible dependencies. As they standard sage packages, may be we should add them to giac's deps in sage?

Frederic



---

archive/issue_comments_367317.json:
```json
{
    "body": "Replying to [comment:6 frederichan]:\n> Hi Francois, \n> I didn't knew about this one. Should I report something? (if yes what?)\n> \n\nPossibly. It may be also be because gcc-8 is more strict about some stuff. \n\n```\nlibtool: compile:  x86_64-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I.. -DIN_GIAC -I. -I.. -I. -I.. -g -O2 -fno-strict-aliasing -DGIAC_GENERIC_CONSTANTS -c signalprocessing.cc  -fPIC -DPIC -o .libs/signalprocessing.o\nsignalprocessing.cc: In function \u2018giac::gen giac::_resample(const giac::gen&, const giac::context*)\u2019:\nsignalprocessing.cc:637:77: error: assignment of read-only location \u2018*(data.SRC_DATA::data_in + ((sizetype)(((long unsigned int)((i * nc) + j)) * 4)))\u2019\n             data.data_in[i*nc+j]=_evalf(chdata[j][i],contextptr).DOUBLE_val();\n```\n\n\n> But I  know that glpk and nauty are new possible dependencies. As they standard sage packages, may be we should add them to giac's deps in sage?\n> \n\nglpk has been a dependency in the 1.4 series too. I hadn't noticed, seems to build fine with or without but it means sage installations of giac may be inconsistent which each others so I am in favor to just add it - regardless of this ticket.\n\nThe nauty dependency is new to me. Looking at `configure.in` I can see\n\n```\nAC_CHECK_LIB(nauty,main)\nAC_CHECK_HEADERS(nauty/naututil.h)\n```\n\n\nso it is not fatal if it is not there. Which is just as well because that stuff looks for a library and as far as I know the nauty we have only install a bunch of executables, no libraries or headers.\n\nSo at this stage do not add nauty - may be we are thinking of the wrong package.",
    "created_at": "2018-09-27T08:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367317",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:6 frederichan]:
> Hi Francois, 
> I didn't knew about this one. Should I report something? (if yes what?)
> 

Possibly. It may be also be because gcc-8 is more strict about some stuff. 

```
libtool: compile:  x86_64-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I.. -DIN_GIAC -I. -I.. -I. -I.. -g -O2 -fno-strict-aliasing -DGIAC_GENERIC_CONSTANTS -c signalprocessing.cc  -fPIC -DPIC -o .libs/signalprocessing.o
signalprocessing.cc: In function ‘giac::gen giac::_resample(const giac::gen&, const giac::context*)’:
signalprocessing.cc:637:77: error: assignment of read-only location ‘*(data.SRC_DATA::data_in + ((sizetype)(((long unsigned int)((i * nc) + j)) * 4)))’
             data.data_in[i*nc+j]=_evalf(chdata[j][i],contextptr).DOUBLE_val();
```


> But I  know that glpk and nauty are new possible dependencies. As they standard sage packages, may be we should add them to giac's deps in sage?
> 

glpk has been a dependency in the 1.4 series too. I hadn't noticed, seems to build fine with or without but it means sage installations of giac may be inconsistent which each others so I am in favor to just add it - regardless of this ticket.

The nauty dependency is new to me. Looking at `configure.in` I can see

```
AC_CHECK_LIB(nauty,main)
AC_CHECK_HEADERS(nauty/naututil.h)
```


so it is not fatal if it is not there. Which is just as well because that stuff looks for a library and as far as I know the nauty we have only install a bunch of executables, no libraries or headers.

So at this stage do not add nauty - may be we are thinking of the wrong package.



---

archive/issue_comments_367318.json:
```json
{
    "body": "nauty 2.6.7 has libraries. We are at 2.6.1 I think.",
    "created_at": "2018-09-27T09:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367318",
    "user": "https://github.com/kiwifb"
}
```

nauty 2.6.7 has libraries. We are at 2.6.1 I think.



---

archive/issue_comments_367319.json:
```json
{
    "body": "Plain upstream nauty doesn't compile shared libraries. It is a (huge) Debian specific patch, also used in Fedora.",
    "created_at": "2018-09-28T07:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367319",
    "user": "https://github.com/antonio-rojas"
}
```

Plain upstream nauty doesn't compile shared libraries. It is a (huge) Debian specific patch, also used in Fedora.



---

archive/issue_comments_367320.json:
```json
{
    "body": "Replying to [comment:9 arojas]:\n> Plain upstream nauty doesn't compile shared libraries. It is a (huge) Debian specific patch, also used in Fedora.\n\nThe Gentoo maintainer has adopted that patch too for 2.6.7 that fooled me.",
    "created_at": "2018-09-28T07:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367320",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:9 arojas]:
> Plain upstream nauty doesn't compile shared libraries. It is a (huge) Debian specific patch, also used in Fedora.

The Gentoo maintainer has adopted that patch too for 2.6.7 that fooled me.



---

archive/issue_comments_367321.json:
```json
{
    "body": "There are still (easy) patches needed to build with clang 6.\n\nAny idea about what would be the best way to get them in?",
    "created_at": "2018-10-24T09:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367321",
    "user": "https://github.com/dimpase"
}
```

There are still (easy) patches needed to build with clang 6.

Any idea about what would be the best way to get them in?



---

archive/issue_comments_367322.json:
```json
{
    "body": "One way would be to suggest these patches on the XCas \"bugs\" forum:\nhttps://xcas.univ-grenoble-alpes.fr/forum/viewforum.php?f=3&sid=c49dc6cf44516f78a1ef24e838c65904",
    "created_at": "2018-10-24T09:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367322",
    "user": "https://github.com/slel"
}
```

One way would be to suggest these patches on the XCas "bugs" forum:
https://xcas.univ-grenoble-alpes.fr/forum/viewforum.php?f=3&sid=c49dc6cf44516f78a1ef24e838c65904



---

archive/issue_comments_367323.json:
```json
{
    "body": "NB: I can post on this forum for you if you don't have an account or if it is long to answer.",
    "created_at": "2018-10-24T11:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367323",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

NB: I can post on this forum for you if you don't have an account or if it is long to answer.



---

archive/issue_comments_367324.json:
```json
{
    "body": "patch needed for giac to build with clang 6.0.1 (possibly incomplete)",
    "created_at": "2018-10-25T07:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367324",
    "user": "https://github.com/dimpase"
}
```

patch needed for giac to build with clang 6.0.1 (possibly incomplete)



---

archive/issue_comments_367325.json:
```json
{
    "body": "Attachment [giac-1.5.0-3.clang601.patch](tarball://root/attachments/some-uuid/ticket26315/giac-1.5.0-3.clang601.patch) by @dimpase created at 2018-10-25 07:56:44\n\nReplying to [comment:13 frederichan]:\n> NB: I can post on this forum for you if you don't have an account or if it is long to answer.\n\nI requested an account on the forum at least once, to no avail.\nAnyhow, I just posted the patch here as an attachment.",
    "created_at": "2018-10-25T07:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367325",
    "user": "https://github.com/dimpase"
}
```

Attachment [giac-1.5.0-3.clang601.patch](tarball://root/attachments/some-uuid/ticket26315/giac-1.5.0-3.clang601.patch) by @dimpase created at 2018-10-25 07:56:44

Replying to [comment:13 frederichan]:
> NB: I can post on this forum for you if you don't have an account or if it is long to answer.

I requested an account on the forum at least once, to no avail.
Anyhow, I just posted the patch here as an attachment.



---

archive/issue_comments_367326.json:
```json
{
    "body": "I have reported it there:\nhttps://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2176",
    "created_at": "2018-10-25T11:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367326",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

I have reported it there:
https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2176



---

archive/issue_comments_367327.json:
```json
{
    "body": "Another bug in giac - it does not work with newer versions of libcurl, which don't have\n`curl/curlbuild.h` header, see curl's [commit](https://github.com/curl/curl/commit/73a2fcea0b4adea6ba342cd7ed1149782c214ae3)\n\nSo since curl version 7.55 or so one needs to use `curl/system.h` instead.\n\nCould you also report this on giac list?",
    "created_at": "2018-10-25T21:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367327",
    "user": "https://github.com/dimpase"
}
```

Another bug in giac - it does not work with newer versions of libcurl, which don't have
`curl/curlbuild.h` header, see curl's [commit](https://github.com/curl/curl/commit/73a2fcea0b4adea6ba342cd7ed1149782c214ae3)

So since curl version 7.55 or so one needs to use `curl/system.h` instead.

Could you also report this on giac list?



---

archive/issue_comments_367328.json:
```json
{
    "body": "Replying to [comment:16 dimpase]:\n> Another bug in giac - it does not work with newer versions of libcurl, which don't have\n> `curl/curlbuild.h` header, see curl's [commit](https://github.com/curl/curl/commit/73a2fcea0b4adea6ba342cd7ed1149782c214ae3)\n> \n> So since curl version 7.55 or so one needs to use `curl/system.h` instead.\n> \n> Could you also report this on giac list?\n> \n\nWe've know this one for a while. It was present in the last 1.4 releases. In distro we just removed the include line following arch's lead (I believe it originated in arch - correct me if it has prior history).",
    "created_at": "2018-10-25T21:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367328",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:16 dimpase]:
> Another bug in giac - it does not work with newer versions of libcurl, which don't have
> `curl/curlbuild.h` header, see curl's [commit](https://github.com/curl/curl/commit/73a2fcea0b4adea6ba342cd7ed1149782c214ae3)
> 
> So since curl version 7.55 or so one needs to use `curl/system.h` instead.
> 
> Could you also report this on giac list?
> 

We've know this one for a while. It was present in the last 1.4 releases. In distro we just removed the include line following arch's lead (I believe it originated in arch - correct me if it has prior history).



---

archive/issue_comments_367329.json:
```json
{
    "body": "curlbuild.h is reported there:\nhttps://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2180\n\nby the way, was the clang problem a warning or does the compilation stop?",
    "created_at": "2018-10-26T10:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367329",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

curlbuild.h is reported there:
https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2180

by the way, was the clang problem a warning or does the compilation stop?



---

archive/issue_comments_367330.json:
```json
{
    "body": "Replying to [comment:18 frederichan]:\n> curlbuild.h is reported there:\n> https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2180\n> \n> by the way, was the clang problem a warning or does the compilation stop?\n\nI only reported errors. There are surely lots of warnings too, e.g. the one about `register` keyword being ignored and deprecated in C++11, and that it will be an error in C++17 standard.\n\nAs a matter of fact I am trying to get giac built on FreeBSD 12.0, and I am not yet there.",
    "created_at": "2018-10-26T17:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367330",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:18 frederichan]:
> curlbuild.h is reported there:
> https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2180
> 
> by the way, was the clang problem a warning or does the compilation stop?

I only reported errors. There are surely lots of warnings too, e.g. the one about `register` keyword being ignored and deprecated in C++11, and that it will be an error in C++17 standard.

As a matter of fact I am trying to get giac built on FreeBSD 12.0, and I am not yet there.



---

archive/issue_comments_367331.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2018-10-26T18:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367331",
    "user": "https://github.com/dimpase"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_367332.json:
```json
{
    "body": "One further patch that was needed for clang 6/freebsd 12.0 is as follows:\n\n```\n--- a/src/misc.h\n+++ b/src/misc.h\n@@ -23,6 +23,7 @@\n #include \"gen.h\"\n #include \"unary.h\"\n #include \"symbolic.h\"\n+#include <sys/time.h>\n \n #ifndef NO_NAMESPACE_GIAC\n namespace giac {\n```\n\nwithout it there are errors related to a forward declaration of `giac::timespec`, as follows:\n\n```\nIn file included from misc.cc:8744:\nIn file included from /usr/local/include/curl/curl.h:87:\n/usr/include/sys/time.h:267:25: error: variable has incomplete type 'struct timespec'\ntstosbt(struct timespec _ts)\n                        ^\n/usr/include/sys/socket.h:676:8: note: forward declaration of 'giac::timespec'\nstruct timespec;\n       ^\n```\n",
    "created_at": "2018-10-30T11:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367332",
    "user": "https://github.com/dimpase"
}
```

One further patch that was needed for clang 6/freebsd 12.0 is as follows:

```
--- a/src/misc.h
+++ b/src/misc.h
@@ -23,6 +23,7 @@
 #include "gen.h"
 #include "unary.h"
 #include "symbolic.h"
+#include <sys/time.h>
 
 #ifndef NO_NAMESPACE_GIAC
 namespace giac {
```

without it there are errors related to a forward declaration of `giac::timespec`, as follows:

```
In file included from misc.cc:8744:
In file included from /usr/local/include/curl/curl.h:87:
/usr/include/sys/time.h:267:25: error: variable has incomplete type 'struct timespec'
tstosbt(struct timespec _ts)
                        ^
/usr/include/sys/socket.h:676:8: note: forward declaration of 'giac::timespec'
struct timespec;
       ^
```




---

archive/issue_comments_367333.json:
```json
{
    "body": "OK, I can post to the giac forum now...",
    "created_at": "2018-10-30T11:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367333",
    "user": "https://github.com/dimpase"
}
```

OK, I can post to the giac forum now...



---

archive/issue_comments_367334.json:
```json
{
    "body": "the giac unstable version (1.5.0-11 (?)) of 18/10/18 builds on clang 6.0.1 out of the box (there is now an issue with doc/el, which seems to be broken, and the need to have hevea installed).",
    "created_at": "2018-11-21T17:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367334",
    "user": "https://github.com/dimpase"
}
```

the giac unstable version (1.5.0-11 (?)) of 18/10/18 builds on clang 6.0.1 out of the box (there is now an issue with doc/el, which seems to be broken, and the need to have hevea installed).



---

archive/issue_comments_367335.json:
```json
{
    "body": "I never saw that one but I see 1.5.0-17 from 2018-11-20. I will give it a go later.",
    "created_at": "2018-11-21T20:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367335",
    "user": "https://github.com/kiwifb"
}
```

I never saw that one but I see 1.5.0-17 from 2018-11-20. I will give it a go later.



---

archive/issue_comments_367336.json:
```json
{
    "body": "\n```\n$ grep -r curlbuild src/*\nsrc/giac/misc.cc:  //#include <curl/curlbuild.h>\nsrc/misc.cc:  //#include <curl/curlbuild.h>\n```\n\nSo the curl issue has been dealt with. clang is going mad spitting that \"register\" is deprecated and is incompatible with C++17.",
    "created_at": "2018-11-21T20:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367336",
    "user": "https://github.com/kiwifb"
}
```


```
$ grep -r curlbuild src/*
src/giac/misc.cc:  //#include <curl/curlbuild.h>
src/misc.cc:  //#include <curl/curlbuild.h>
```

So the curl issue has been dealt with. clang is going mad spitting that "register" is deprecated and is incompatible with C++17.



---

archive/issue_comments_367337.json:
```json
{
    "body": "When building sage with giac 1.5.0-21 I get this test failure:\n\n```\nFile \"/nix/store/kb25pb31a6i47sjm5nsjgii7n7jpilgb-sage-src-8.4/src/sage/interfaces/giac.py\", line 619, in sage.interfaces.giac.Giac.eval\nFailed example:\n    giac(s)\nExpected:\n    (x)->{\n    x+1;\n    x+2;\n    }\nGot:\n    (x)->[x+1,x+2]\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.interfaces.giac.Giac.eval\n```\n\n\nUpstream said wontfix: https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2221",
    "created_at": "2018-12-08T09:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367337",
    "user": "https://github.com/symphorien"
}
```

When building sage with giac 1.5.0-21 I get this test failure:

```
File "/nix/store/kb25pb31a6i47sjm5nsjgii7n7jpilgb-sage-src-8.4/src/sage/interfaces/giac.py", line 619, in sage.interfaces.giac.Giac.eval
Failed example:
    giac(s)
Expected:
    (x)->{
    x+1;
    x+2;
    }
Got:
    (x)->[x+1,x+2]
**********************************************************************
1 item had failures:
   1 of   6 in sage.interfaces.giac.Giac.eval
```


Upstream said wontfix: https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2221



---

archive/issue_comments_367338.json:
```json
{
    "body": "We'd just change this doctest, such things happen often with many packages",
    "created_at": "2018-12-08T09:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367338",
    "user": "https://github.com/dimpase"
}
```

We'd just change this doctest, such things happen often with many packages



---

archive/issue_comments_367339.json:
```json
{
    "body": "It is already present with the latest 1.4.x. It is just formatting, nothing serious.",
    "created_at": "2018-12-08T09:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367339",
    "user": "https://github.com/kiwifb"
}
```

It is already present with the latest 1.4.x. It is just formatting, nothing serious.



---

archive/issue_comments_367340.json:
```json
{
    "body": "Attachment [giac-1.5.0.patch](tarball://root/attachments/some-uuid/ticket26315/giac-1.5.0.patch) by @symphorien created at 2018-12-09 11:59:46\n\nOk. Then with the attached patch I can build sage with giac 1.5.0-21.",
    "created_at": "2018-12-09T11:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367340",
    "user": "https://github.com/symphorien"
}
```

Attachment [giac-1.5.0.patch](tarball://root/attachments/some-uuid/ticket26315/giac-1.5.0.patch) by @symphorien created at 2018-12-09 11:59:46

Ok. Then with the attached patch I can build sage with giac 1.5.0-21.



---

archive/issue_comments_367341.json:
```json
{
    "body": "> Attachment giac-1.5.0-3.clang601.patch\u200b added\n\n> patch needed for giac to build with clang 6.0.1 (possibly incomplete)\n\nBTW this is also needed for the current giac-1.4.9.45.p4 and clang++-6/7 because:\n\n```\nsolve.cc:5751:23: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]\n      order_t order_={order,lexvars};\n                      ^~~~~\nsolve.cc:5751:23: note: insert an explicit cast to silence this issue\n      order_t order_={order,lexvars};\n                      ^~~~~\n                      static_cast<short>( )\nsolve.cc:5751:29: error: non-constant-expression cannot be narrowed from type 'int' to 'unsigned char' in initializer list [-Wc++11-narrowing]\n      order_t order_={order,lexvars};\n                            ^~~~~~~\nsolve.cc:5751:29: note: insert an explicit cast to silence this issue\n      order_t order_={order,lexvars};\n                            ^~~~~~~\n                            static_cast<unsigned char>( )\nsolve.cc:6962:21: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]\n    order_t order_={order.val,0};\n                    ^~~~~~~~~\nsolve.cc:6962:21: note: insert an explicit cast to silence this issue\n    order_t order_={order.val,0};\n                    ^~~~~~~~~\n                    static_cast<short>( )\n```\n",
    "created_at": "2018-12-10T15:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367341",
    "user": "https://github.com/rwst"
}
```

> Attachment giac-1.5.0-3.clang601.patch​ added

> patch needed for giac to build with clang 6.0.1 (possibly incomplete)

BTW this is also needed for the current giac-1.4.9.45.p4 and clang++-6/7 because:

```
solve.cc:5751:23: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]
      order_t order_={order,lexvars};
                      ^~~~~
solve.cc:5751:23: note: insert an explicit cast to silence this issue
      order_t order_={order,lexvars};
                      ^~~~~
                      static_cast<short>( )
solve.cc:5751:29: error: non-constant-expression cannot be narrowed from type 'int' to 'unsigned char' in initializer list [-Wc++11-narrowing]
      order_t order_={order,lexvars};
                            ^~~~~~~
solve.cc:5751:29: note: insert an explicit cast to silence this issue
      order_t order_={order,lexvars};
                            ^~~~~~~
                            static_cast<unsigned char>( )
solve.cc:6962:21: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]
    order_t order_={order.val,0};
                    ^~~~~~~~~
solve.cc:6962:21: note: insert an explicit cast to silence this issue
    order_t order_={order.val,0};
                    ^~~~~~~~~
                    static_cast<short>( )
```




---

archive/issue_comments_367342.json:
```json
{
    "body": "Replying to [comment:30 rws]:\n> > Attachment giac-1.5.0-3.clang601.patch\u200b added\n> \n> > patch needed for giac to build with clang 6.0.1 (possibly incomplete)\n> \n> BTW this is also needed for the current giac-1.4.9.45.p4 and clang++-6/7 because:\n> {{{\n> solve.cc:5751:23: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]\n>       order_t order_={order,lexvars};\n>                       ^~~~~\n> solve.cc:5751:23: note: insert an explicit cast to silence this issue\n>       order_t order_={order,lexvars};\n>                       ^~~~~\n>                       static_cast<short>( )\n> solve.cc:5751:29: error: non-constant-expression cannot be narrowed from type 'int' to 'unsigned char' in initializer list [-Wc++11-narrowing]\n>       order_t order_={order,lexvars};\n>                             ^~~~~~~\n> solve.cc:5751:29: note: insert an explicit cast to silence this issue\n>       order_t order_={order,lexvars};\n>                             ^~~~~~~\n>                             static_cast<unsigned char>( )\n> solve.cc:6962:21: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]\n>     order_t order_={order.val,0};\n>                     ^~~~~~~~~\n> solve.cc:6962:21: note: insert an explicit cast to silence this issue\n>     order_t order_={order.val,0};\n>                     ^~~~~~~~~\n>                     static_cast<short>( )\n> }}}\n\ndoes the current https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac_unstable.tgz\nwork for you with new clangs?\n(this should be giac-1.5.0-21 or even later version)",
    "created_at": "2018-12-10T17:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367342",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:30 rws]:
> > Attachment giac-1.5.0-3.clang601.patch​ added
> 
> > patch needed for giac to build with clang 6.0.1 (possibly incomplete)
> 
> BTW this is also needed for the current giac-1.4.9.45.p4 and clang++-6/7 because:
> {{{
> solve.cc:5751:23: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]
>       order_t order_={order,lexvars};
>                       ^~~~~
> solve.cc:5751:23: note: insert an explicit cast to silence this issue
>       order_t order_={order,lexvars};
>                       ^~~~~
>                       static_cast<short>( )
> solve.cc:5751:29: error: non-constant-expression cannot be narrowed from type 'int' to 'unsigned char' in initializer list [-Wc++11-narrowing]
>       order_t order_={order,lexvars};
>                             ^~~~~~~
> solve.cc:5751:29: note: insert an explicit cast to silence this issue
>       order_t order_={order,lexvars};
>                             ^~~~~~~
>                             static_cast<unsigned char>( )
> solve.cc:6962:21: error: non-constant-expression cannot be narrowed from type 'int' to 'short' in initializer list [-Wc++11-narrowing]
>     order_t order_={order.val,0};
>                     ^~~~~~~~~
> solve.cc:6962:21: note: insert an explicit cast to silence this issue
>     order_t order_={order.val,0};
>                     ^~~~~~~~~
>                     static_cast<short>( )
> }}}

does the current https://www-fourier.ujf-grenoble.fr/~parisse/giac/giac_unstable.tgz
work for you with new clangs?
(this should be giac-1.5.0-21 or even later version)



---

archive/issue_comments_367343.json:
```json
{
    "body": "should we go forward and upgrade?",
    "created_at": "2018-12-17T16:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367343",
    "user": "https://github.com/dimpase"
}
```

should we go forward and upgrade?



---

archive/issue_comments_367344.json:
```json
{
    "body": "Who says it's stable but why not. Spotted in my log while testing `-27`, anyone knows when `ecm` became an automagic dependency (like glpk and friends)? Never mind, I have past logs, it happened in `-21` and `-19` didn't have it.\n\nWho said it was stable again?",
    "created_at": "2018-12-17T20:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367344",
    "user": "https://github.com/kiwifb"
}
```

Who says it's stable but why not. Spotted in my log while testing `-27`, anyone knows when `ecm` became an automagic dependency (like glpk and friends)? Never mind, I have past logs, it happened in `-21` and `-19` didn't have it.

Who said it was stable again?



---

archive/issue_comments_367345.json:
```json
{
    "body": "Replying to [comment:33 fbissey]:\n> Who says it's stable but why not. Spotted in my log while testing `-27`, anyone knows when `ecm` became an automagic dependency (like glpk and friends)? Never mind, I have past logs, it happened in `-21` and `-19` didn't have it.\n> \n> Who said it was stable again?\n\nthat's one that made it into this particular directory, which I think means \"it's not too bad to be released\".",
    "created_at": "2018-12-18T05:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367345",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:33 fbissey]:
> Who says it's stable but why not. Spotted in my log while testing `-27`, anyone knows when `ecm` became an automagic dependency (like glpk and friends)? Never mind, I have past logs, it happened in `-21` and `-19` didn't have it.
> 
> Who said it was stable again?

that's one that made it into this particular directory, which I think means "it's not too bad to be released".



---

archive/issue_comments_367346.json:
```json
{
    "body": "Right, if someone pushes a branch, I can review it. If you want me to do the branch I can probably squeeze it before Christmas.",
    "created_at": "2018-12-18T05:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367346",
    "user": "https://github.com/kiwifb"
}
```

Right, if someone pushes a branch, I can review it. If you want me to do the branch I can probably squeeze it before Christmas.



---

archive/issue_comments_367347.json:
```json
{
    "body": "Here is a first tentative of branch. Patches need to be checked. I removed 3 conflicting ones and did not add any new one.\n----\nNew commits:",
    "created_at": "2019-01-01T19:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367347",
    "user": "https://github.com/fchapoton"
}
```

Here is a first tentative of branch. Patches need to be checked. I removed 3 conflicting ones and did not add any new one.
----
New commits:



---

archive/issue_comments_367348.json:
```json
{
    "body": "needs an update to the latest version 1.5.0-37",
    "created_at": "2019-01-15T09:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367348",
    "user": "https://github.com/dimpase"
}
```

needs an update to the latest version 1.5.0-37



---

archive/issue_comments_367349.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-15T10:00:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367349",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_367350.json:
```json
{
    "body": "Now, linking to libz is broken (on Linux). Instead of linking to Sage's libz, it links to the system one, getting\n\n```\n$ ldd local/bin/giac | grep libz\nlocal/bin/giac: /lib/x86_64-linux-gnu/libz.so.1: version `ZLIB_1.2.9' not found (required by /home/dimpase/sage/local/lib/libpng16.so.16)\n        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f49c3ac8000)\n```\n\nwhereas\n\n```\n$ ldd local/lib/libpng16.so\n        linux-vdso.so.1 (0x00007ffe74fe5000)\n        libz.so.1 => /home/dimpase/sage/local/lib/libz.so.1 (0x00007effe8642000)\n        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007effe833e000)\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007effe7f9f000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007effe8a9f000)\n```\n",
    "created_at": "2019-01-15T11:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367350",
    "user": "https://github.com/dimpase"
}
```

Now, linking to libz is broken (on Linux). Instead of linking to Sage's libz, it links to the system one, getting

```
$ ldd local/bin/giac | grep libz
local/bin/giac: /lib/x86_64-linux-gnu/libz.so.1: version `ZLIB_1.2.9' not found (required by /home/dimpase/sage/local/lib/libpng16.so.16)
        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f49c3ac8000)
```

whereas

```
$ ldd local/lib/libpng16.so
        linux-vdso.so.1 (0x00007ffe74fe5000)
        libz.so.1 => /home/dimpase/sage/local/lib/libz.so.1 (0x00007effe8642000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007effe833e000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007effe7f9f000)
        /lib64/ld-linux-x86-64.so.2 (0x00007effe8a9f000)
```




---

archive/issue_comments_367351.json:
```json
{
    "body": "Fact, libpng is only used by giac when the fltk interface is built. Otherwise libpng is not used at all as revealed by using `-Wl,--as-needed` in `LDFLAGS`. If we disable the gui (fltk) we can disable png safely.",
    "created_at": "2019-01-15T19:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367351",
    "user": "https://github.com/kiwifb"
}
```

Fact, libpng is only used by giac when the fltk interface is built. Otherwise libpng is not used at all as revealed by using `-Wl,--as-needed` in `LDFLAGS`. If we disable the gui (fltk) we can disable png safely.



---

archive/issue_comments_367352.json:
```json
{
    "body": "I'm currently trying to build it with `--enable-png=no`. It seems to work better.",
    "created_at": "2019-01-15T19:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367352",
    "user": "https://github.com/dimpase"
}
```

I'm currently trying to build it with `--enable-png=no`. It seems to work better.



---

archive/issue_comments_367353.json:
```json
{
    "body": "It does not pick up libpng any more, and ldd does not show errors, but the system's libz.so is stil there, from some other dependency:\n\n```\n$ ldd local/bin/giac\n        linux-vdso.so.1 (0x00007fff8efa6000)\n        libgiac.so.0 => /home/dimpase/sage/local/lib/libgiac.so.0 (0x00007fe5550d4000)\n        libntl.so.33 => /home/dimpase/sage/local/lib/libntl.so.33 (0x00007fe554cbd000)\n        libpari-gmp.so.6 => /home/dimpase/sage/local/lib/libpari-gmp.so.6 (0x00007fe554210000)\n        libreadline.so.6 => /home/dimpase/sage/local/lib/libreadline.so.6 (0x00007fe553fc7000)\n        libgsl.so.23 => /home/dimpase/sage/local/lib/libgsl.so.23 (0x00007fe553b45000)\n        libgslcblas.so.0 => /home/dimpase/sage/local/lib/libgslcblas.so.0 (0x00007fe553908000)\n        librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007fe553700000)\n        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fe5534e3000)\n        libcurl.so.4 => /usr/lib/x86_64-linux-gnu/libcurl.so.4 (0x00007fe553263000)\n        libglpk.so.40 => /home/dimpase/sage/local/lib/libglpk.so.40 (0x00007fe552f8a000)\n        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fe552d86000)\n        libmpfi.so.0 => /home/dimpase/sage/local/lib/libmpfi.so.0 (0x00007fe552b6f000)\n        libmpfr.so.6 => /home/dimpase/sage/local/lib/libmpfr.so.6 (0x00007fe5528f9000)\n        libgmp.so.23 => /home/dimpase/sage/local/lib/libgmp.so.23 (0x00007fe552685000)\n        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fe552303000)\n        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fe551fff000)\n        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fe551de8000)\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fe551a49000)\n        libgf2x.so.1 => /home/dimpase/sage/local/lib/libgf2x.so.1 (0x00007fe551833000)\n        libtinfo.so.6 => /home/dimpase/sage/local/lib/libtinfo.so.6 (0x00007fe5515fb000)\n        libopenblas.so.0 => /home/dimpase/sage/local/lib/libopenblas.so.0 (0x00007fe550748000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007fe556a11000)\n        libnghttp2.so.14 => /usr/lib/x86_64-linux-gnu/libnghttp2.so.14 (0x00007fe550522000)\n        libidn2.so.0 => /usr/lib/x86_64-linux-gnu/libidn2.so.0 (0x00007fe550300000)\n        librtmp.so.1 => /usr/lib/x86_64-linux-gnu/librtmp.so.1 (0x00007fe5500e3000)\n        libssh2.so.1 => /usr/lib/x86_64-linux-gnu/libssh2.so.1 (0x00007fe54feb7000)\n        libpsl.so.5 => /usr/lib/x86_64-linux-gnu/libpsl.so.5 (0x00007fe54fca9000)\n        libssl.so.1.0.2 => /usr/lib/x86_64-linux-gnu/libssl.so.1.0.2 (0x00007fe54fa40000)\n        libcrypto.so.1.0.2 => /usr/lib/x86_64-linux-gnu/libcrypto.so.1.0.2 (0x00007fe54f5da000)\n        libgssapi_krb5.so.2 => /usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2 (0x00007fe54f38f000)\n        libkrb5.so.3 => /usr/lib/x86_64-linux-gnu/libkrb5.so.3 (0x00007fe54f0b5000)\n        libk5crypto.so.3 => /usr/lib/x86_64-linux-gnu/libk5crypto.so.3 (0x00007fe54ee82000)\n        libcom_err.so.2 => /lib/x86_64-linux-gnu/libcom_err.so.2 (0x00007fe54ec7e000)\n        liblber-2.4.so.2 => /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2 (0x00007fe54ea6f000)\n        libldap_r-2.4.so.2 => /usr/lib/x86_64-linux-gnu/libldap_r-2.4.so.2 (0x00007fe54e81e000)\n        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007fe54e604000)\n        libgfortran.so.3 => /usr/lib/x86_64-linux-gnu/libgfortran.so.3 (0x00007fe54e2de000)\n        libunistring.so.0 => /usr/lib/x86_64-linux-gnu/libunistring.so.0 (0x00007fe54dfc7000)\n        libgnutls.so.30 => /usr/lib/x86_64-linux-gnu/libgnutls.so.30 (0x00007fe54dc2e000)\n        libhogweed.so.4 => /usr/lib/x86_64-linux-gnu/libhogweed.so.4 (0x00007fe54d9f9000)\n        libnettle.so.6 => /usr/lib/x86_64-linux-gnu/libnettle.so.6 (0x00007fe54d7c2000)\n        libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007fe54d53f000)\n        libgcrypt.so.20 => /lib/x86_64-linux-gnu/libgcrypt.so.20 (0x00007fe54d22f000)\n        libkrb5support.so.0 => /usr/lib/x86_64-linux-gnu/libkrb5support.so.0 (0x00007fe54d023000)\n        libkeyutils.so.1 => /lib/x86_64-linux-gnu/libkeyutils.so.1 (0x00007fe54ce1f000)\n        libresolv.so.2 => /lib/x86_64-linux-gnu/libresolv.so.2 (0x00007fe54cc08000)\n        libsasl2.so.2 => /usr/lib/x86_64-linux-gnu/libsasl2.so.2 (0x00007fe54c9ed000)\n        libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0 (0x00007fe54c7ae000)\n        libp11-kit.so.0 => /usr/lib/x86_64-linux-gnu/libp11-kit.so.0 (0x00007fe54c549000)\n        libidn.so.11 => /lib/x86_64-linux-gnu/libidn.so.11 (0x00007fe54c315000)\n        libtasn1.so.6 => /usr/lib/x86_64-linux-gnu/libtasn1.so.6 (0x00007fe54c102000)\n        libgpg-error.so.0 => /lib/x86_64-linux-gnu/libgpg-error.so.0 (0x00007fe54beee000)\n        libffi.so.6 => /usr/lib/x86_64-linux-gnu/libffi.so.6 (0x00007fe54bce5000)\n```\n",
    "created_at": "2019-01-15T19:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367353",
    "user": "https://github.com/dimpase"
}
```

It does not pick up libpng any more, and ldd does not show errors, but the system's libz.so is stil there, from some other dependency:

```
$ ldd local/bin/giac
        linux-vdso.so.1 (0x00007fff8efa6000)
        libgiac.so.0 => /home/dimpase/sage/local/lib/libgiac.so.0 (0x00007fe5550d4000)
        libntl.so.33 => /home/dimpase/sage/local/lib/libntl.so.33 (0x00007fe554cbd000)
        libpari-gmp.so.6 => /home/dimpase/sage/local/lib/libpari-gmp.so.6 (0x00007fe554210000)
        libreadline.so.6 => /home/dimpase/sage/local/lib/libreadline.so.6 (0x00007fe553fc7000)
        libgsl.so.23 => /home/dimpase/sage/local/lib/libgsl.so.23 (0x00007fe553b45000)
        libgslcblas.so.0 => /home/dimpase/sage/local/lib/libgslcblas.so.0 (0x00007fe553908000)
        librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007fe553700000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fe5534e3000)
        libcurl.so.4 => /usr/lib/x86_64-linux-gnu/libcurl.so.4 (0x00007fe553263000)
        libglpk.so.40 => /home/dimpase/sage/local/lib/libglpk.so.40 (0x00007fe552f8a000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fe552d86000)
        libmpfi.so.0 => /home/dimpase/sage/local/lib/libmpfi.so.0 (0x00007fe552b6f000)
        libmpfr.so.6 => /home/dimpase/sage/local/lib/libmpfr.so.6 (0x00007fe5528f9000)
        libgmp.so.23 => /home/dimpase/sage/local/lib/libgmp.so.23 (0x00007fe552685000)
        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fe552303000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fe551fff000)
        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fe551de8000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fe551a49000)
        libgf2x.so.1 => /home/dimpase/sage/local/lib/libgf2x.so.1 (0x00007fe551833000)
        libtinfo.so.6 => /home/dimpase/sage/local/lib/libtinfo.so.6 (0x00007fe5515fb000)
        libopenblas.so.0 => /home/dimpase/sage/local/lib/libopenblas.so.0 (0x00007fe550748000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fe556a11000)
        libnghttp2.so.14 => /usr/lib/x86_64-linux-gnu/libnghttp2.so.14 (0x00007fe550522000)
        libidn2.so.0 => /usr/lib/x86_64-linux-gnu/libidn2.so.0 (0x00007fe550300000)
        librtmp.so.1 => /usr/lib/x86_64-linux-gnu/librtmp.so.1 (0x00007fe5500e3000)
        libssh2.so.1 => /usr/lib/x86_64-linux-gnu/libssh2.so.1 (0x00007fe54feb7000)
        libpsl.so.5 => /usr/lib/x86_64-linux-gnu/libpsl.so.5 (0x00007fe54fca9000)
        libssl.so.1.0.2 => /usr/lib/x86_64-linux-gnu/libssl.so.1.0.2 (0x00007fe54fa40000)
        libcrypto.so.1.0.2 => /usr/lib/x86_64-linux-gnu/libcrypto.so.1.0.2 (0x00007fe54f5da000)
        libgssapi_krb5.so.2 => /usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2 (0x00007fe54f38f000)
        libkrb5.so.3 => /usr/lib/x86_64-linux-gnu/libkrb5.so.3 (0x00007fe54f0b5000)
        libk5crypto.so.3 => /usr/lib/x86_64-linux-gnu/libk5crypto.so.3 (0x00007fe54ee82000)
        libcom_err.so.2 => /lib/x86_64-linux-gnu/libcom_err.so.2 (0x00007fe54ec7e000)
        liblber-2.4.so.2 => /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2 (0x00007fe54ea6f000)
        libldap_r-2.4.so.2 => /usr/lib/x86_64-linux-gnu/libldap_r-2.4.so.2 (0x00007fe54e81e000)
        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007fe54e604000)
        libgfortran.so.3 => /usr/lib/x86_64-linux-gnu/libgfortran.so.3 (0x00007fe54e2de000)
        libunistring.so.0 => /usr/lib/x86_64-linux-gnu/libunistring.so.0 (0x00007fe54dfc7000)
        libgnutls.so.30 => /usr/lib/x86_64-linux-gnu/libgnutls.so.30 (0x00007fe54dc2e000)
        libhogweed.so.4 => /usr/lib/x86_64-linux-gnu/libhogweed.so.4 (0x00007fe54d9f9000)
        libnettle.so.6 => /usr/lib/x86_64-linux-gnu/libnettle.so.6 (0x00007fe54d7c2000)
        libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007fe54d53f000)
        libgcrypt.so.20 => /lib/x86_64-linux-gnu/libgcrypt.so.20 (0x00007fe54d22f000)
        libkrb5support.so.0 => /usr/lib/x86_64-linux-gnu/libkrb5support.so.0 (0x00007fe54d023000)
        libkeyutils.so.1 => /lib/x86_64-linux-gnu/libkeyutils.so.1 (0x00007fe54ce1f000)
        libresolv.so.2 => /lib/x86_64-linux-gnu/libresolv.so.2 (0x00007fe54cc08000)
        libsasl2.so.2 => /usr/lib/x86_64-linux-gnu/libsasl2.so.2 (0x00007fe54c9ed000)
        libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0 (0x00007fe54c7ae000)
        libp11-kit.so.0 => /usr/lib/x86_64-linux-gnu/libp11-kit.so.0 (0x00007fe54c549000)
        libidn.so.11 => /lib/x86_64-linux-gnu/libidn.so.11 (0x00007fe54c315000)
        libtasn1.so.6 => /usr/lib/x86_64-linux-gnu/libtasn1.so.6 (0x00007fe54c102000)
        libgpg-error.so.0 => /lib/x86_64-linux-gnu/libgpg-error.so.0 (0x00007fe54beee000)
        libffi.so.6 => /usr/lib/x86_64-linux-gnu/libffi.so.6 (0x00007fe54bce5000)
```




---

archive/issue_comments_367354.json:
```json
{
    "body": "Ca you do `readelf -d` to see if it needs directly libz or if it is from somewhere else. Here libglpk brings libz. It is possible that there is a stray `-lz` somewhere in a makefile.",
    "created_at": "2019-01-15T19:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367354",
    "user": "https://github.com/kiwifb"
}
```

Ca you do `readelf -d` to see if it needs directly libz or if it is from somewhere else. Here libglpk brings libz. It is possible that there is a stray `-lz` somewhere in a makefile.



---

archive/issue_comments_367355.json:
```json
{
    "body": "I checked, there is no `lz` anywhere in the log.",
    "created_at": "2019-01-15T19:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367355",
    "user": "https://github.com/dimpase"
}
```

I checked, there is no `lz` anywhere in the log.



---

archive/issue_comments_367356.json:
```json
{
    "body": "So that means someone else is bringing that library or someone has a rpath not properly set.",
    "created_at": "2019-01-15T19:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367356",
    "user": "https://github.com/kiwifb"
}
```

So that means someone else is bringing that library or someone has a rpath not properly set.



---

archive/issue_comments_367357.json:
```json
{
    "body": "indeed, here is the readelf result (on libgiac, which also has (wrong) libz linked in\n {{{\n$ readelf -d local/lib/libgiac.so.0.0.0\n\nDynamic section at offset 0x11e0b68 contains 41 entries:\n  Tag        Type                         Name/Value\n 0x0000000000000001 (NEEDED)             Shared library: [libntl.so.33]\n 0x0000000000000001 (NEEDED)             Shared library: [libpari-gmp.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libgsl.so.23]\n 0x0000000000000001 (NEEDED)             Shared library: [libgslcblas.so.0]\n 0x0000000000000001 (NEEDED)             Shared library: [librt.so.1]\n 0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]\n 0x0000000000000001 (NEEDED)             Shared library: [libcurl.so.4]\n 0x0000000000000001 (NEEDED)             Shared library: [libglpk.so.40]\n 0x0000000000000001 (NEEDED)             Shared library: [libdl.so.2]\n 0x0000000000000001 (NEEDED)             Shared library: [libmpfi.so.0]\n 0x0000000000000001 (NEEDED)             Shared library: [libmpfr.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libgmp.so.23]\n 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]\n 0x000000000000000e (SONAME)             Library soname: [libgiac.so.0]\n 0x000000000000001d (RUNPATH)            Library runpath: [/home/dimpase/sage/local/lib]\n 0x000000000000000c (INIT)               0x1a4f38\n 0x000000000000000d (FINI)               0xf4b6ec\n 0x0000000000000019 (INIT_ARRAY)         0x13b29a8\n 0x000000000000001b (INIT_ARRAYSZ)       424 (bytes)\n 0x000000000000001a (FINI_ARRAY)         0x13b2b50\n 0x000000000000001c (FINI_ARRAYSZ)       8 (bytes)\n 0x000000006ffffef5 (GNU_HASH)           0x1f0\n 0x0000000000000005 (STRTAB)             0x5b4e0\n 0x0000000000000006 (SYMTAB)             0x15268\n 0x000000000000000a (STRSZ)              617616 (bytes)\n 0x000000000000000b (SYMENT)             24 (bytes)\n 0x0000000000000003 (PLTGOT)             0x13e7000\n 0x0000000000000002 (PLTRELSZ)           150600 (bytes)\n 0x0000000000000014 (PLTREL)             RELA\n 0x0000000000000017 (JMPREL)             0x1802f0\n 0x0000000000000007 (RELA)               0xf80c0\n 0x0000000000000008 (RELASZ)             557616 (bytes)\n 0x0000000000000009 (RELAENT)            24 (bytes)\n 0x000000006ffffffe (VERNEED)            0xf7f00\n 0x000000006fffffff (VERNEEDNUM)         8\n 0x000000006ffffff0 (VERSYM)             0xf2170\n 0x000000006ffffff9 (RELACOUNT)          19508\n 0x0000000000000000 (NULL)               0x0\n}}}",
    "created_at": "2019-01-15T19:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367357",
    "user": "https://github.com/dimpase"
}
```

indeed, here is the readelf result (on libgiac, which also has (wrong) libz linked in
 {{{
$ readelf -d local/lib/libgiac.so.0.0.0

Dynamic section at offset 0x11e0b68 contains 41 entries:
  Tag        Type                         Name/Value
 0x0000000000000001 (NEEDED)             Shared library: [libntl.so.33]
 0x0000000000000001 (NEEDED)             Shared library: [libpari-gmp.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libgsl.so.23]
 0x0000000000000001 (NEEDED)             Shared library: [libgslcblas.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [librt.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libcurl.so.4]
 0x0000000000000001 (NEEDED)             Shared library: [libglpk.so.40]
 0x0000000000000001 (NEEDED)             Shared library: [libdl.so.2]
 0x0000000000000001 (NEEDED)             Shared library: [libmpfi.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libmpfr.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libgmp.so.23]
 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]
 0x000000000000000e (SONAME)             Library soname: [libgiac.so.0]
 0x000000000000001d (RUNPATH)            Library runpath: [/home/dimpase/sage/local/lib]
 0x000000000000000c (INIT)               0x1a4f38
 0x000000000000000d (FINI)               0xf4b6ec
 0x0000000000000019 (INIT_ARRAY)         0x13b29a8
 0x000000000000001b (INIT_ARRAYSZ)       424 (bytes)
 0x000000000000001a (FINI_ARRAY)         0x13b2b50
 0x000000000000001c (FINI_ARRAYSZ)       8 (bytes)
 0x000000006ffffef5 (GNU_HASH)           0x1f0
 0x0000000000000005 (STRTAB)             0x5b4e0
 0x0000000000000006 (SYMTAB)             0x15268
 0x000000000000000a (STRSZ)              617616 (bytes)
 0x000000000000000b (SYMENT)             24 (bytes)
 0x0000000000000003 (PLTGOT)             0x13e7000
 0x0000000000000002 (PLTRELSZ)           150600 (bytes)
 0x0000000000000014 (PLTREL)             RELA
 0x0000000000000017 (JMPREL)             0x1802f0
 0x0000000000000007 (RELA)               0xf80c0
 0x0000000000000008 (RELASZ)             557616 (bytes)
 0x0000000000000009 (RELAENT)            24 (bytes)
 0x000000006ffffffe (VERNEED)            0xf7f00
 0x000000006fffffff (VERNEEDNUM)         8
 0x000000006ffffff0 (VERSYM)             0xf2170
 0x000000006ffffff9 (RELACOUNT)          19508
 0x0000000000000000 (NULL)               0x0
}}}



---

archive/issue_comments_367358.json:
```json
{
    "body": "After some thinking `libcurl` is probably your culprit because you are using the system one and it would be linked to the system's `libz`.",
    "created_at": "2019-01-15T22:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367358",
    "user": "https://github.com/kiwifb"
}
```

After some thinking `libcurl` is probably your culprit because you are using the system one and it would be linked to the system's `libz`.



---

archive/issue_comments_367359.json:
```json
{
    "body": "system's libz is linked by system's libcurl, indeed. Any way out?",
    "created_at": "2019-01-15T22:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367359",
    "user": "https://github.com/dimpase"
}
```

system's libz is linked by system's libcurl, indeed. Any way out?



---

archive/issue_comments_367360.json:
```json
{
    "body": "Apart from \n* not linking libpng (in this case - since it almost never needed `--disable-gui --disable-png`)\n* LD_PRELOAD of sage's libz\n* good old (DYLIB)LD_LIBRARY_PATH\nI don't think so. Something worthy of inspection in that regard is `R` on the same system.",
    "created_at": "2019-01-15T22:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367360",
    "user": "https://github.com/kiwifb"
}
```

Apart from 
* not linking libpng (in this case - since it almost never needed `--disable-gui --disable-png`)
* LD_PRELOAD of sage's libz
* good old (DYLIB)LD_LIBRARY_PATH
I don't think so. Something worthy of inspection in that regard is `R` on the same system.



---

archive/issue_comments_367361.json:
```json
{
    "body": "after\n\n```\n--- a/build/pkgs/giac/spkg-install\n+++ b/build/pkgs/giac/spkg-install\n@@ -44,7 +44,7 @@ if [ \"$UNAME\" = \"Darwin\" ]; then\n     DISABLENLS=\"--disable-nls\"\n fi\n \n-sdh_configure --disable-gui --disable-ao --disable-lapack \"$DISABLENLS\"\n+sdh_configure --disable-gui --disable-ao --disable-lapack \"$DISABLENLS\" --enable-png=no\n \n #############################################################\n #   Build\n```\n\n\nI get just one test failure (due to giac output format change) in ptestlong \n\n\n```\nsage -t --long --warn-long 44.2 src/sage/interfaces/giac.py\n**********************************************************************\nFile \"src/sage/interfaces/giac.py\", line 619, in sage.interfaces.giac.Giac.eval\nFailed example:\n    giac(s)\nExpected:\n    (x)->{\n    x+1;\n    x+2;\n    }\nGot:\n    (x)->[x+1,x+2]\n```\n\n\nI am not 100% sure, but it looks like a good enough indication that everything works as expected. I'll try giac with `SAGE_CHECK=yes` now.",
    "created_at": "2019-01-16T07:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367361",
    "user": "https://github.com/dimpase"
}
```

after

```
--- a/build/pkgs/giac/spkg-install
+++ b/build/pkgs/giac/spkg-install
@@ -44,7 +44,7 @@ if [ "$UNAME" = "Darwin" ]; then
     DISABLENLS="--disable-nls"
 fi
 
-sdh_configure --disable-gui --disable-ao --disable-lapack "$DISABLENLS"
+sdh_configure --disable-gui --disable-ao --disable-lapack "$DISABLENLS" --enable-png=no
 
 #############################################################
 #   Build
```


I get just one test failure (due to giac output format change) in ptestlong 


```
sage -t --long --warn-long 44.2 src/sage/interfaces/giac.py
**********************************************************************
File "src/sage/interfaces/giac.py", line 619, in sage.interfaces.giac.Giac.eval
Failed example:
    giac(s)
Expected:
    (x)->{
    x+1;
    x+2;
    }
Got:
    (x)->[x+1,x+2]
```


I am not 100% sure, but it looks like a good enough indication that everything works as expected. I'll try giac with `SAGE_CHECK=yes` now.



---

archive/issue_comments_367362.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-16T07:49:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367362",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_367363.json:
```json
{
    "body": "Replying to [comment:51 fbissey]:\n> Apart from \n> * not linking libpng (in this case - since it almost never needed `--disable-gui --disable-png`)\n> * LD_PRELOAD of sage's libz\n> * good old (DYLIB)LD_LIBRARY_PATH\n> I don't think so. Something worthy of inspection in that regard is `R` on the same system.\n\nlibR.so links to Sage's version of libz here. I don't know how this happens.",
    "created_at": "2019-01-16T07:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367363",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:51 fbissey]:
> Apart from 
> * not linking libpng (in this case - since it almost never needed `--disable-gui --disable-png`)
> * LD_PRELOAD of sage's libz
> * good old (DYLIB)LD_LIBRARY_PATH
> I don't think so. Something worthy of inspection in that regard is `R` on the same system.

libR.so links to Sage's version of libz here. I don't know how this happens.



---

archive/issue_comments_367364.json:
```json
{
    "body": "Yes I was thinking that R uses curl, but unlike giac, it uses zlib directly rather than through another library. So sage's zlib is probably loaded before libcurl's one.",
    "created_at": "2019-01-16T08:03:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367364",
    "user": "https://github.com/kiwifb"
}
```

Yes I was thinking that R uses curl, but unlike giac, it uses zlib directly rather than through another library. So sage's zlib is probably loaded before libcurl's one.



---

archive/issue_comments_367365.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-16T09:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367365",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_367366.json:
```json
{
    "body": "well, everything seems to be in order after this change. Reviews?",
    "created_at": "2019-01-16T09:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367366",
    "user": "https://github.com/dimpase"
}
```

well, everything seems to be in order after this change. Reviews?



---

archive/issue_comments_367367.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-01-16T09:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367367",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_367368.json:
```json
{
    "body": "I would like `--disable-samplerate ` passed to configure as well. It breaks on some system because the version of `samplerate` is too new.",
    "created_at": "2019-01-16T09:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367368",
    "user": "https://github.com/kiwifb"
}
```

I would like `--disable-samplerate ` passed to configure as well. It breaks on some system because the version of `samplerate` is too new.



---

archive/issue_comments_367369.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-16T13:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367369",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_367370.json:
```json
{
    "body": "done.",
    "created_at": "2019-01-16T13:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367370",
    "user": "https://github.com/dimpase"
}
```

done.



---

archive/issue_comments_367371.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-01-16T13:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367371",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_367372.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-01-16T16:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367372",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_367373.json:
```json
{
    "body": "1. You're not using `spkg-src` to create the new tarball, resulting in a huge tarball size.\n\n2. I'm not convinced that we can remove `alloca.patch`. It doesn't seem like upstream has applied that.",
    "created_at": "2019-01-16T16:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367373",
    "user": "https://github.com/jdemeyer"
}
```

1. You're not using `spkg-src` to create the new tarball, resulting in a huge tarball size.

2. I'm not convinced that we can remove `alloca.patch`. It doesn't seem like upstream has applied that.



---

archive/issue_comments_367374.json:
```json
{
    "body": "Maybe the alloca patch is fine after all. Upstream didn't literally apply our patch, but it's close enough.",
    "created_at": "2019-01-16T16:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367374",
    "user": "https://github.com/jdemeyer"
}
```

Maybe the alloca patch is fine after all. Upstream didn't literally apply our patch, but it's close enough.



---

archive/issue_comments_367375.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-16T21:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367375",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_367376.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-01-16T22:06:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367376",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_367377.json:
```json
{
    "body": "Let's get on with this one.",
    "created_at": "2019-02-04T00:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367377",
    "user": "https://github.com/kiwifb"
}
```

Let's get on with this one.



---

archive/issue_comments_367378.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-02-04T00:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367378",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_024234.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-05T16:57:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26078#event-24234"
}
```



---

archive/issue_comments_367379.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-02-05T16:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367379",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_367380.json:
```json
{
    "body": "I just got this change on my Ubuntu 14.04 system and giac does not build:\n\n\n```\n[giac-1.5.0.37] global.cc: In function 'bool giac::my_isnan(double)':\n[giac-1.5.0.37] global.cc:4145:19: error: call of overloaded 'isnan(double&)' is ambiguous\n[giac-1.5.0.37]      return isnan(d);\n[giac-1.5.0.37]                    ^\n[giac-1.5.0.37] global.cc:4145:19: note: candidates are:\n[giac-1.5.0.37] In file included from /usr/include/math.h:69:0,\n[giac-1.5.0.37]                  from /usr/include/c++/4.8/cmath:44,\n[giac-1.5.0.37]                  from first.h:498,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/x86_64-linux-gnu/bits/mathcalls.h:234:12: note: int isnan(double)\n[giac-1.5.0.37]  __MATHDECL_1 (int,isnan,, (_Mdouble_ __value)) __attribute__ ((__const__));\n[giac-1.5.0.37]             ^\n[giac-1.5.0.37] In file included from first.h:498:0,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:626:3: note: constexpr bool std::isnan(long double)\n[giac-1.5.0.37]    isnan(long double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:622:3: note: constexpr bool std::isnan(double)\n[giac-1.5.0.37]    isnan(double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)\n[giac-1.5.0.37]    isnan(float __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] global.cc: In function 'bool giac::my_isinf(double)':\n[giac-1.5.0.37] global.cc:4158:19: error: call of overloaded 'isinf(double&)' is ambiguous\n[giac-1.5.0.37]      return isinf(d);\n[giac-1.5.0.37]                    ^\n[giac-1.5.0.37] global.cc:4158:19: note: candidates are:\n[giac-1.5.0.37] In file included from /usr/include/math.h:69:0,\n[giac-1.5.0.37]                  from /usr/include/c++/4.8/cmath:44,\n[giac-1.5.0.37]                  from first.h:498,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/x86_64-linux-gnu/bits/mathcalls.h:201:12: note: int isinf(double)\n[giac-1.5.0.37]  __MATHDECL_1 (int,isinf,, (_Mdouble_ __value)) __attribute__ ((__const__));\n[giac-1.5.0.37]             ^\n[giac-1.5.0.37] In file included from first.h:498:0,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:608:3: note: constexpr bool std::isinf(long double)\n[giac-1.5.0.37]    isinf(long double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:604:3: note: constexpr bool std::isinf(double)\n[giac-1.5.0.37]    isinf(double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.8/cmath:600:3: note: constexpr bool std::isinf(float)\n[giac-1.5.0.37]    isinf(float __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] make[4]: *** [global.lo] Error 1\n```\n",
    "created_at": "2019-02-12T13:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367380",
    "user": "https://github.com/embray"
}
```

I just got this change on my Ubuntu 14.04 system and giac does not build:


```
[giac-1.5.0.37] global.cc: In function 'bool giac::my_isnan(double)':
[giac-1.5.0.37] global.cc:4145:19: error: call of overloaded 'isnan(double&)' is ambiguous
[giac-1.5.0.37]      return isnan(d);
[giac-1.5.0.37]                    ^
[giac-1.5.0.37] global.cc:4145:19: note: candidates are:
[giac-1.5.0.37] In file included from /usr/include/math.h:69:0,
[giac-1.5.0.37]                  from /usr/include/c++/4.8/cmath:44,
[giac-1.5.0.37]                  from first.h:498,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/x86_64-linux-gnu/bits/mathcalls.h:234:12: note: int isnan(double)
[giac-1.5.0.37]  __MATHDECL_1 (int,isnan,, (_Mdouble_ __value)) __attribute__ ((__const__));
[giac-1.5.0.37]             ^
[giac-1.5.0.37] In file included from first.h:498:0,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:626:3: note: constexpr bool std::isnan(long double)
[giac-1.5.0.37]    isnan(long double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:622:3: note: constexpr bool std::isnan(double)
[giac-1.5.0.37]    isnan(double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)
[giac-1.5.0.37]    isnan(float __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] global.cc: In function 'bool giac::my_isinf(double)':
[giac-1.5.0.37] global.cc:4158:19: error: call of overloaded 'isinf(double&)' is ambiguous
[giac-1.5.0.37]      return isinf(d);
[giac-1.5.0.37]                    ^
[giac-1.5.0.37] global.cc:4158:19: note: candidates are:
[giac-1.5.0.37] In file included from /usr/include/math.h:69:0,
[giac-1.5.0.37]                  from /usr/include/c++/4.8/cmath:44,
[giac-1.5.0.37]                  from first.h:498,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/x86_64-linux-gnu/bits/mathcalls.h:201:12: note: int isinf(double)
[giac-1.5.0.37]  __MATHDECL_1 (int,isinf,, (_Mdouble_ __value)) __attribute__ ((__const__));
[giac-1.5.0.37]             ^
[giac-1.5.0.37] In file included from first.h:498:0,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:608:3: note: constexpr bool std::isinf(long double)
[giac-1.5.0.37]    isinf(long double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:604:3: note: constexpr bool std::isinf(double)
[giac-1.5.0.37]    isinf(double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.8/cmath:600:3: note: constexpr bool std::isinf(float)
[giac-1.5.0.37]    isinf(float __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] make[4]: *** [global.lo] Error 1
```




---

archive/issue_comments_367381.json:
```json
{
    "body": "Replying to [comment:67 embray]:\n> I just got this change on my Ubuntu 14.04 system and giac does not build:\n> \n> {{{\n...\n> [giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)\n...\n> }}}\nhmm, blacklist gcc 4.8.* ? With EOL of 14.04 in April 2019, why bother fixing this?",
    "created_at": "2019-02-12T13:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367381",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:67 embray]:
> I just got this change on my Ubuntu 14.04 system and giac does not build:
> 
> {{{
...
> [giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)
...
> }}}
hmm, blacklist gcc 4.8.* ? With EOL of 14.04 in April 2019, why bother fixing this?



---

archive/issue_comments_367382.json:
```json
{
    "body": "Apparently this may actually be a bug in some older libstdc++ https://stackoverflow.com/a/33770775/982257",
    "created_at": "2019-02-12T13:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367382",
    "user": "https://github.com/embray"
}
```

Apparently this may actually be a bug in some older libstdc++ https://stackoverflow.com/a/33770775/982257



---

archive/issue_comments_367383.json:
```json
{
    "body": "Replying to [comment:68 dimpase]:\n> Replying to [comment:67 embray]:\n> > I just got this change on my Ubuntu 14.04 system and giac does not build:\n> > \n> > {{{\n> ...\n> > [giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)\n> ...\n> > }}}\n> hmm, blacklist gcc 4.8.* ? With EOL of 14.04 in April 2019, why bother fixing this?\n> \n\nIt's definitely getting up there.  I'll be annoyed if I have to distupgrade this machine, but at the same time it may be inevitable quite soon anyways.  Regardless, I've made it this far, and if a simple `::isnan` is enough to fix it...",
    "created_at": "2019-02-12T13:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367383",
    "user": "https://github.com/embray"
}
```

Replying to [comment:68 dimpase]:
> Replying to [comment:67 embray]:
> > I just got this change on my Ubuntu 14.04 system and giac does not build:
> > 
> > {{{
> ...
> > [giac-1.5.0.37] /usr/include/c++/4.8/cmath:618:3: note: constexpr bool std::isnan(float)
> ...
> > }}}
> hmm, blacklist gcc 4.8.* ? With EOL of 14.04 in April 2019, why bother fixing this?
> 

It's definitely getting up there.  I'll be annoyed if I have to distupgrade this machine, but at the same time it may be inevitable quite soon anyways.  Regardless, I've made it this far, and if a simple `::isnan` is enough to fix it...



---

archive/issue_comments_367384.json:
```json
{
    "body": "Interestingly, the code where this is coming up is already in a `my_isnan` function defined in `src/global.cc` like:\n\n\n```\n#if defined(FIR_LINUX) || defined(FIR_ANDROID)\n    return std::isnan(d);\n#else\n    return isnan(d);\n#endif\n```\n\n\nwhere if `FIR_LINUX` is defined it will do the right thing I think.  But I have no idea what this macro `FIR_LINUX` means, or what `FIR` means, nor is it at all clear how it gets set.",
    "created_at": "2019-02-12T14:13:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367384",
    "user": "https://github.com/embray"
}
```

Interestingly, the code where this is coming up is already in a `my_isnan` function defined in `src/global.cc` like:


```
#if defined(FIR_LINUX) || defined(FIR_ANDROID)
    return std::isnan(d);
#else
    return isnan(d);
#endif
```


where if `FIR_LINUX` is defined it will do the right thing I think.  But I have no idea what this macro `FIR_LINUX` means, or what `FIR` means, nor is it at all clear how it gets set.



---

archive/issue_comments_367385.json:
```json
{
    "body": "IMO we should never \"upgrade\" packages that don't even have publicly accessible source code repositories.  It makes it impossible to debug what changed between versions if something goes wrong.  Incredible.",
    "created_at": "2019-02-12T14:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367385",
    "user": "https://github.com/embray"
}
```

IMO we should never "upgrade" packages that don't even have publicly accessible source code repositories.  It makes it impossible to debug what changed between versions if something goes wrong.  Incredible.



---

archive/issue_comments_367386.json:
```json
{
    "body": "The source code repository of Giac is available as part of the Geogebra one:\n\n- https://dev.geogebra.org/trac/browser/trunk/geogebra/giac/",
    "created_at": "2019-02-12T15:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367386",
    "user": "https://github.com/slel"
}
```

The source code repository of Giac is available as part of the Geogebra one:

- https://dev.geogebra.org/trac/browser/trunk/geogebra/giac/



---

archive/issue_comments_367387.json:
```json
{
    "body": "Replying to [comment:73 slelievre]:\n> The source code repository of Giac is available as part of the Geogebra one:\n> \n> - https://dev.geogebra.org/trac/browser/trunk/geogebra/giac/\n\nFor some reason I thought they were just vendoring giac on a version-by-version basis, but it turns out I'm wrong.  ~~This seems to actually *be* the repository for giac.  Nice find!!~~\n\nUpon closer inspection no, it can't be.  It seems like somehow bits of giac are being synced into this repository, but it's not the full source code for giac.  So I'm really confused.",
    "created_at": "2019-02-21T13:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367387",
    "user": "https://github.com/embray"
}
```

Replying to [comment:73 slelievre]:
> The source code repository of Giac is available as part of the Geogebra one:
> 
> - https://dev.geogebra.org/trac/browser/trunk/geogebra/giac/

For some reason I thought they were just vendoring giac on a version-by-version basis, but it turns out I'm wrong.  ~~This seems to actually *be* the repository for giac.  Nice find!!~~

Upon closer inspection no, it can't be.  It seems like somehow bits of giac are being synced into this repository, but it's not the full source code for giac.  So I'm really confused.



---

archive/issue_comments_367388.json:
```json
{
    "body": "I think this might have also broken something on Cygwin.  After fixing all the other blocking issues on Cygwin, the tests for `sage.interfaces.giac` now hang.",
    "created_at": "2019-02-28T10:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367388",
    "user": "https://github.com/embray"
}
```

I think this might have also broken something on Cygwin.  After fixing all the other blocking issues on Cygwin, the tests for `sage.interfaces.giac` now hang.



---

archive/issue_comments_367389.json:
```json
{
    "body": "Replying to [comment:75 embray]:\n> I think this might have also broken something on Cygwin.  After fixing all the other blocking issues on Cygwin, the tests for `sage.interfaces.giac` now hang.\n\nWell, I tried it a few more times and it worked, so if there *is* a problem it's not easy to reproduce. At the very least, then, there's nothing to do for now until and unless I can reproduce the problem again.  If so, I'll just open a new ticket about it.",
    "created_at": "2019-02-28T10:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367389",
    "user": "https://github.com/embray"
}
```

Replying to [comment:75 embray]:
> I think this might have also broken something on Cygwin.  After fixing all the other blocking issues on Cygwin, the tests for `sage.interfaces.giac` now hang.

Well, I tried it a few more times and it worked, so if there *is* a problem it's not easy to reproduce. At the very least, then, there's nothing to do for now until and unless I can reproduce the problem again.  If so, I'll just open a new ticket about it.



---

archive/issue_comments_367390.json:
```json
{
    "body": "For #25822 and #25324 are there specific fixes from upstream that we know of that could easily be applied as patches?  I'm wondering if we couldn't partially revert back to the old giac, plus patches for any specific known issues that this was meant to fix, until and unless I can figure out what's going on with #27385.",
    "created_at": "2019-03-04T14:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367390",
    "user": "https://github.com/embray"
}
```

For #25822 and #25324 are there specific fixes from upstream that we know of that could easily be applied as patches?  I'm wondering if we couldn't partially revert back to the old giac, plus patches for any specific known issues that this was meant to fix, until and unless I can figure out what's going on with #27385.



---

archive/issue_comments_367391.json:
```json
{
    "body": "I don't know about any specific patches - it took several iterations of communicating with Giac's author to fix Clang 6.0-specific bugs on giac's forum.",
    "created_at": "2019-03-04T14:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26078#issuecomment-367391",
    "user": "https://github.com/dimpase"
}
```

I don't know about any specific patches - it took several iterations of communicating with Giac's author to fix Clang 6.0-specific bugs on giac's forum.
