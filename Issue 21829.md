# Issue 21829: implement MacMahon's Omega operator

archive/issues_021829.json:
```json
{
    "body": "CC:  @cheuberg\n\nMacMahon's Omega operator takes a quotient of laurent polynomials and removes all negative exponents in the corresponding power series.\n\nThe aim of this ticket is to implement it.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22066\n\n",
    "created_at": "2016-12-16T08:18:29Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "implement MacMahon's Omega operator",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21829",
    "user": "@dkrenn"
}
```
CC:  @cheuberg

MacMahon's Omega operator takes a quotient of laurent polynomials and removes all negative exponents in the corresponding power series.

The aim of this ticket is to implement it.

Issue created by migration from https://trac.sagemath.org/ticket/22066





---

archive/issue_comments_302860.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-12-16T08:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302860",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_302861.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-12-16T09:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302861",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_302862.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-12-16T09:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302862",
    "user": "@dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_302863.json:
```json
{
    "body": "see also #10669",
    "created_at": "2016-12-16T09:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302863",
    "user": "@fchapoton"
}
```

see also #10669



---

archive/issue_comments_302864.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-16T10:03:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302864",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302865.json:
```json
{
    "body": "Replying to [comment:8 chapoton]:\n> see also #10669\n\nThank you for mentioning this. (I have never thought anyone already created a ticket for this.) ;)",
    "created_at": "2016-12-16T10:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302865",
    "user": "@dkrenn"
}
```

Replying to [comment:8 chapoton]:
> see also #10669

Thank you for mentioning this. (I have never thought anyone already created a ticket for this.) ;)



---

archive/issue_comments_302866.json:
```json
{
    "body": "Removed duplicate dependency #21833",
    "created_at": "2016-12-19T13:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302866",
    "user": "@cheuberg"
}
```

Removed duplicate dependency #21833



---

archive/issue_comments_302867.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-22T08:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302867",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302868.json:
```json
{
    "body": "Merged in changed dependencies.",
    "created_at": "2016-12-22T08:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302868",
    "user": "@dkrenn"
}
```

Merged in changed dependencies.



---

archive/issue_comments_302869.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-26T17:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302869",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302870.json:
```json
{
    "body": "This is a review of this ticket modulo its dependencies.\n\nGeneral:\n\n1. I am not happy to have `Omega` in the global name space. There might be other uses of the upper case greek letter Omega which might as well live in the global name space, e.g., in context with asymptotics. Thus I suggest to have it as `MacMahonOmega` or something like that, perhaps with an alias in the docstring.\n\n2. Is there a reason why some of the auxiliary functions are visible and some others are hidden (e.g., for #22067?). In that case, I suggest to have one example in the module documentation which demonstrates how to use `Omega` and perhaps one other example there which demonstrates how to use the other functions efficiently.\n\n3. I think that \"laurent\" should be capitalized throughout, cf. [the Wikipedia article](https://en.wikipedia.org/wiki/Laurent_polynomial).\n\n4. Nowadays, the developers guide wants us to store all bibliographical references in `SAGE_ROOT/src/doc/en/reference/references/index.rst`.\n\n5. Long descriptions in docstrings: The developer guide does not give clear indications; nevertheless, I suggest to use the same command form as in the short description block above. Otherwise, it seems to be strange to have \"Return ...\" ... \"this calculates\".\n\nFunction `Omega`:\n\n6. `expression` is allowed to be a `Factorization` (as per the Tests), but this is not documented.\n\n7. Add examples demonstrating all allowed input variants (`expression` only, without denominator; `denominator` as a non-factorized Polynomial); perhaps use a simple example to demonstrate all useful variations.\n\n8. There are two consecutive lines of imports from `sage.rings.polynomial.laurent_polynomial_ring` which could be done in one import; the second line is too long anyway\n\n9. Document and test `NotImplementedError` for `op != operator.ge`.\n\n10. Test `ValueError` for `not denominator.is_integral()`.\n\n21. The line `numerator *= denominator.unit()` seems to be suspicious. Shouldn't it be `/=`?\n\n32. Test `ValueError` \"... is not a variable\".\n\n43. Test `ZeroDivisionError`\n\n54. Test `NotImplementedError` \"... is not normalized\"\n\n65. Test `NotImplementedError` \"Cannot handle factor\"\n\nFunction `_Omega_`:\n\n16. Although main testing is done in `Omega`, it would be nice to have one non-trivial example to see how the input and output looks like.\n\nFunction `Omega_ge`:\n\n17. State in docstring that `z_1`, ..., `z_n` do *not* appear in the input, but *do* appear in the output.\n\n28. State the parent of the output in the docstring (The function `_Omega_` uses the fact that the parent does *not* depend on `a` and uses a specific order of the variables)\n\n39. Is there a reason not to use `CyclotomicField`?\n\n20. Is there a reason to actually give the number of variables in `LaurentPolynomialRing`?\n\n21. `subs_power`: this is never called with `value != None` but is only documented with `value != None`. Thus remove the parameter `value` and adapt documentation.\n\n22. `subs_power`: The line `p = tuple(var.dict().popitem()[0]).index(1)` is rather hard to understand, document that this actually just means that `var` is the `p`th generator of the parent.\n\n23. `subs_power`: also state that it is assumed that `var` only occurs with exponents divisible by `exponent`\n\nFunction `Omega_numerator`:\n\n24. Document that the numerator is normalized in such a way that the corresponding denominator has constant term 1.\n\n25. In `Omega_numerator` it is not clear why the input is not assumed to be flattened beforehand. Add a pointer to `Omega_denumerator`.\n\nFunction `_Omega_numerator_P`:\n\n26. When reading [APR2001] one would assume that `_Omega_numerator_P_` should be a cached function. I assume that performance tuning showed that this does not help. Document this.\n\n27. Add a meaningful description; currently, one must find out that these are the polynomials `P` in [APR2001].\n\n28. The last component of the input `x` is never used; `t` is used instead. Consider removing the last component of `x`. Explain the situation.\n\nFunction `Omega_factors_denominator`:\n\n29. Document that the denominator is normalized such that it has constant term 1 (cf. 24)\n\n30. The implicit assumption is that the `x` and `y` are collected in such a way that one entry of `x` corresponds to the orbit of some `x_j` under multiplication by `d`th roots of unity and that the output is collected in a corresponding way.\n\nFunction `partition`:\n\n31. Perhaps use an \"ALGORITHM\" block for the link to the source code.\n\nFunction `homogeneous_symmetric_function`:\n\n32. Give definition (or a link to a definition) of homogeneous symmetric polynomials\n\n33. \"whose type is determined by the input `x`\": what does this mean?",
    "created_at": "2017-01-02T19:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302870",
    "user": "@cheuberg"
}
```

This is a review of this ticket modulo its dependencies.

General:

1. I am not happy to have `Omega` in the global name space. There might be other uses of the upper case greek letter Omega which might as well live in the global name space, e.g., in context with asymptotics. Thus I suggest to have it as `MacMahonOmega` or something like that, perhaps with an alias in the docstring.

2. Is there a reason why some of the auxiliary functions are visible and some others are hidden (e.g., for #22067?). In that case, I suggest to have one example in the module documentation which demonstrates how to use `Omega` and perhaps one other example there which demonstrates how to use the other functions efficiently.

3. I think that "laurent" should be capitalized throughout, cf. [the Wikipedia article](https://en.wikipedia.org/wiki/Laurent_polynomial).

4. Nowadays, the developers guide wants us to store all bibliographical references in `SAGE_ROOT/src/doc/en/reference/references/index.rst`.

5. Long descriptions in docstrings: The developer guide does not give clear indications; nevertheless, I suggest to use the same command form as in the short description block above. Otherwise, it seems to be strange to have "Return ..." ... "this calculates".

Function `Omega`:

6. `expression` is allowed to be a `Factorization` (as per the Tests), but this is not documented.

7. Add examples demonstrating all allowed input variants (`expression` only, without denominator; `denominator` as a non-factorized Polynomial); perhaps use a simple example to demonstrate all useful variations.

8. There are two consecutive lines of imports from `sage.rings.polynomial.laurent_polynomial_ring` which could be done in one import; the second line is too long anyway

9. Document and test `NotImplementedError` for `op != operator.ge`.

10. Test `ValueError` for `not denominator.is_integral()`.

21. The line `numerator *= denominator.unit()` seems to be suspicious. Shouldn't it be `/=`?

32. Test `ValueError` "... is not a variable".

43. Test `ZeroDivisionError`

54. Test `NotImplementedError` "... is not normalized"

65. Test `NotImplementedError` "Cannot handle factor"

Function `_Omega_`:

16. Although main testing is done in `Omega`, it would be nice to have one non-trivial example to see how the input and output looks like.

Function `Omega_ge`:

17. State in docstring that `z_1`, ..., `z_n` do *not* appear in the input, but *do* appear in the output.

28. State the parent of the output in the docstring (The function `_Omega_` uses the fact that the parent does *not* depend on `a` and uses a specific order of the variables)

39. Is there a reason not to use `CyclotomicField`?

20. Is there a reason to actually give the number of variables in `LaurentPolynomialRing`?

21. `subs_power`: this is never called with `value != None` but is only documented with `value != None`. Thus remove the parameter `value` and adapt documentation.

22. `subs_power`: The line `p = tuple(var.dict().popitem()[0]).index(1)` is rather hard to understand, document that this actually just means that `var` is the `p`th generator of the parent.

23. `subs_power`: also state that it is assumed that `var` only occurs with exponents divisible by `exponent`

Function `Omega_numerator`:

24. Document that the numerator is normalized in such a way that the corresponding denominator has constant term 1.

25. In `Omega_numerator` it is not clear why the input is not assumed to be flattened beforehand. Add a pointer to `Omega_denumerator`.

Function `_Omega_numerator_P`:

26. When reading [APR2001] one would assume that `_Omega_numerator_P_` should be a cached function. I assume that performance tuning showed that this does not help. Document this.

27. Add a meaningful description; currently, one must find out that these are the polynomials `P` in [APR2001].

28. The last component of the input `x` is never used; `t` is used instead. Consider removing the last component of `x`. Explain the situation.

Function `Omega_factors_denominator`:

29. Document that the denominator is normalized such that it has constant term 1 (cf. 24)

30. The implicit assumption is that the `x` and `y` are collected in such a way that one entry of `x` corresponds to the orbit of some `x_j` under multiplication by `d`th roots of unity and that the output is collected in a corresponding way.

Function `partition`:

31. Perhaps use an "ALGORITHM" block for the link to the source code.

Function `homogeneous_symmetric_function`:

32. Give definition (or a link to a definition) of homogeneous symmetric polynomials

33. "whose type is determined by the input `x`": what does this mean?



---

archive/issue_comments_302871.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-02T19:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302871",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302872.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2017-01-04T08:24:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302872",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_302873.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2017-01-04T17:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302873",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_302874.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-04T17:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302874",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302875.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-01-04T17:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302875",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_302876.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2017-01-04T17:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302876",
    "user": "@dkrenn"
}
```

Last 10 new commits:



---

archive/issue_comments_302877.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-04T18:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302877",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302878.json:
```json
{
    "body": "I've addressed all issues mentioned earlier; comments below.\n\nReplying to [comment:15 cheuberg]:\n> 1. I am not happy to have `Omega` in the global name space. There might be other uses of the upper case greek letter Omega which might as well live in the global name space, e.g., in context with asymptotics. Thus I suggest to have it as `MacMahonOmega` or something like that, perhaps with an alias in the docstring.\n\nChanged to MacMahonOmega everywhere.\n\n> 2. Is there a reason why some of the auxiliary functions are visible and some others are hidden (e.g., for #22067?). In that case, I suggest to have one example in the module documentation which demonstrates how to use `Omega` and perhaps one other example there which demonstrates how to use the other functions efficiently.\n\nI am not sure here, what should be hidden and what not. The idea was, hide everything that for sure is a helper function. But I guess in some sense everything except for the main function is a helper somehow.\nAny suggestions how to proceed?\n\n> 4. Nowadays, the developers guide wants us to store all bibliographical references in `SAGE_ROOT/src/doc/en/reference/references/index.rst`.\n\nDone, but my docs are still compiling (had to do `make doc-clean` as the references were not recognized...). I comment when I have a pass.\n\n> 20. Is there a reason to actually give the number of variables in `LaurentPolynomialRing`?\n\nYes, so that the univariate polynomial ring is represented as multi-variate ring as well.",
    "created_at": "2017-01-04T18:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302878",
    "user": "@dkrenn"
}
```

I've addressed all issues mentioned earlier; comments below.

Replying to [comment:15 cheuberg]:
> 1. I am not happy to have `Omega` in the global name space. There might be other uses of the upper case greek letter Omega which might as well live in the global name space, e.g., in context with asymptotics. Thus I suggest to have it as `MacMahonOmega` or something like that, perhaps with an alias in the docstring.

Changed to MacMahonOmega everywhere.

> 2. Is there a reason why some of the auxiliary functions are visible and some others are hidden (e.g., for #22067?). In that case, I suggest to have one example in the module documentation which demonstrates how to use `Omega` and perhaps one other example there which demonstrates how to use the other functions efficiently.

I am not sure here, what should be hidden and what not. The idea was, hide everything that for sure is a helper function. But I guess in some sense everything except for the main function is a helper somehow.
Any suggestions how to proceed?

> 4. Nowadays, the developers guide wants us to store all bibliographical references in `SAGE_ROOT/src/doc/en/reference/references/index.rst`.

Done, but my docs are still compiling (had to do `make doc-clean` as the references were not recognized...). I comment when I have a pass.

> 20. Is there a reason to actually give the number of variables in `LaurentPolynomialRing`?

Yes, so that the univariate polynomial ring is represented as multi-variate ring as well.



---

archive/issue_comments_302879.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-05T09:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302879",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302880.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-05T09:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302880",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302881.json:
```json
{
    "body": "Replying to [comment:23 dkrenn]:\n> > 2. Is there a reason why some of the auxiliary functions are visible and some others are hidden (e.g., for #22067?). In that case, I suggest to have one example in the module documentation which demonstrates how to use `Omega` and perhaps one other example there which demonstrates how to use the other functions efficiently.\n> \n> I am not sure here, what should be hidden and what not. The idea was, hide everything that for sure is a helper function. But I guess in some sense everything except for the main function is a helper somehow.\n> Any suggestions how to proceed?\n\nNow I've added an example at the top to show what MacMahon's Omega does and how it is applied.\n\n> > 4. Nowadays, the developers guide wants us to store all bibliographical references in `SAGE_ROOT/src/doc/en/reference/references/index.rst`.\n> \n> Done, but my docs are still compiling (had to do `make doc-clean` as the references were not recognized...). I comment when I have a pass.\n\nPassed.",
    "created_at": "2017-01-05T09:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302881",
    "user": "@dkrenn"
}
```

Replying to [comment:23 dkrenn]:
> > 2. Is there a reason why some of the auxiliary functions are visible and some others are hidden (e.g., for #22067?). In that case, I suggest to have one example in the module documentation which demonstrates how to use `Omega` and perhaps one other example there which demonstrates how to use the other functions efficiently.
> 
> I am not sure here, what should be hidden and what not. The idea was, hide everything that for sure is a helper function. But I guess in some sense everything except for the main function is a helper somehow.
> Any suggestions how to proceed?

Now I've added an example at the top to show what MacMahon's Omega does and how it is applied.

> > 4. Nowadays, the developers guide wants us to store all bibliographical references in `SAGE_ROOT/src/doc/en/reference/references/index.rst`.
> 
> Done, but my docs are still compiling (had to do `make doc-clean` as the references were not recognized...). I comment when I have a pass.

Passed.



---

archive/issue_comments_302882.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-05T13:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302882",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302883.json:
```json
{
    "body": "Replying to [comment:15 cheuberg]:\n> 2. Is there a reason why some of the auxiliary functions are visible and some others are hidden (e.g., for #22067?). In that case, I suggest to have one example in the module documentation which demonstrates how to use `Omega` and perhaps one other example there which demonstrates how to use the other functions efficiently.\n\nare we sure that the interface for the low level functions will remain stable?\n\n> Function `Omega`:\n> \n> 7. Add examples demonstrating all allowed input variants (`expression` only, without denominator; `denominator` as a non-factorized Polynomial); perhaps use a simple example to demonstrate all useful variations.\n\n\n```\nsage: MacMahonOmega(mu, mu^2, (1 - x*mu)*(1 - y/mu))\nTraceback (most recent call last):\n...\nTypeError: unable to factor n\n```\n\nseems to be a strange error message (What is \"n\"?)\n\n> 14. Test `NotImplementedError` \"... is not normalized\"\n\nI think that the documentation should clearly state how the denominator must be factored.\n\n34. I am not happy that `MacMahonOmega(mu, mu^2 / ((1 - x*mu)*(1 - y/mu)))` does not work. This implies that the input method \"expression \u2013 an element of the quotient field of some Laurent polynomials\" only works in trivial cases. After all, just entering a rational function would be the most natural input format.\n\n35. What happens if the input is formulated in terms of polynomial rings instead of Laurent polynomial rings?",
    "created_at": "2017-01-05T13:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302883",
    "user": "@cheuberg"
}
```

Replying to [comment:15 cheuberg]:
> 2. Is there a reason why some of the auxiliary functions are visible and some others are hidden (e.g., for #22067?). In that case, I suggest to have one example in the module documentation which demonstrates how to use `Omega` and perhaps one other example there which demonstrates how to use the other functions efficiently.

are we sure that the interface for the low level functions will remain stable?

> Function `Omega`:
> 
> 7. Add examples demonstrating all allowed input variants (`expression` only, without denominator; `denominator` as a non-factorized Polynomial); perhaps use a simple example to demonstrate all useful variations.


```
sage: MacMahonOmega(mu, mu^2, (1 - x*mu)*(1 - y/mu))
Traceback (most recent call last):
...
TypeError: unable to factor n
```

seems to be a strange error message (What is "n"?)

> 14. Test `NotImplementedError` "... is not normalized"

I think that the documentation should clearly state how the denominator must be factored.

34. I am not happy that `MacMahonOmega(mu, mu^2 / ((1 - x*mu)*(1 - y/mu)))` does not work. This implies that the input method "expression – an element of the quotient field of some Laurent polynomials" only works in trivial cases. After all, just entering a rational function would be the most natural input format.

35. What happens if the input is formulated in terms of polynomial rings instead of Laurent polynomial rings?



---

archive/issue_comments_302884.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-05T15:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302884",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302885.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-05T16:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302885",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302886.json:
```json
{
    "body": "Replying to [comment:26 cheuberg]:\n> Branch changed from u/dkrenn/omega-7.5.rc1 to u/cheuberg/omega-7.5.rc1\n\nCross-reviewed (LGTM)",
    "created_at": "2017-01-05T16:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302886",
    "user": "@dkrenn"
}
```

Replying to [comment:26 cheuberg]:
> Branch changed from u/dkrenn/omega-7.5.rc1 to u/cheuberg/omega-7.5.rc1

Cross-reviewed (LGTM)



---

archive/issue_comments_302887.json:
```json
{
    "body": "Replying to [comment:28 cheuberg]:\n> Replying to [comment:15 cheuberg]:\n> are we sure that the interface for the low level functions will remain stable?\n\n`Omega_numerator` and `Omega_factors_denominator` are now private.\n\n> {{{\n> sage: MacMahonOmega(mu, mu^2, (1 - x*mu)*(1 - y/mu))\n> Traceback (most recent call last):\n> ...\n> TypeError: unable to factor n\n> }}}\n> seems to be a strange error message (What is \"n\"?)\n\nThis is hardcoded in `factor` and appears as Laurent polynomials have not method `factor`.\n\n> > 14. Test `NotImplementedError` \"... is not normalized\"\n> \n> I think that the documentation should clearly state how the denominator must be factored.\n> \n> 34. I am not happy that `MacMahonOmega(mu, mu^2 / ((1 - x*mu)*(1 - y/mu)))` does not work. This implies that the input method \"expression \u2013 an element of the quotient field of some Laurent polynomials\" only works in trivial cases. After all, just entering a rational function would be the most natural input format.\n> \n> 35. What happens if the input is formulated in terms of polynomial rings instead of Laurent polynomial rings?  \n\nI've removed inputing a quotient from the docs as it is not functioning correctly in some cases. (Refactoring one of the factors in the denominator is not trivial and may change the result. To come around this, one has to know something on the coefficients of a factor; this should all go to a follow-up ticket.)",
    "created_at": "2017-01-05T16:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302887",
    "user": "@dkrenn"
}
```

Replying to [comment:28 cheuberg]:
> Replying to [comment:15 cheuberg]:
> are we sure that the interface for the low level functions will remain stable?

`Omega_numerator` and `Omega_factors_denominator` are now private.

> {{{
> sage: MacMahonOmega(mu, mu^2, (1 - x*mu)*(1 - y/mu))
> Traceback (most recent call last):
> ...
> TypeError: unable to factor n
> }}}
> seems to be a strange error message (What is "n"?)

This is hardcoded in `factor` and appears as Laurent polynomials have not method `factor`.

> > 14. Test `NotImplementedError` "... is not normalized"
> 
> I think that the documentation should clearly state how the denominator must be factored.
> 
> 34. I am not happy that `MacMahonOmega(mu, mu^2 / ((1 - x*mu)*(1 - y/mu)))` does not work. This implies that the input method "expression – an element of the quotient field of some Laurent polynomials" only works in trivial cases. After all, just entering a rational function would be the most natural input format.
> 
> 35. What happens if the input is formulated in terms of polynomial rings instead of Laurent polynomial rings?  

I've removed inputing a quotient from the docs as it is not functioning correctly in some cases. (Refactoring one of the factors in the denominator is not trivial and may change the result. To come around this, one has to know something on the coefficients of a factor; this should all go to a follow-up ticket.)



---

archive/issue_comments_302888.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-05T16:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302888",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302889.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-12T10:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302889",
    "user": "@cheuberg"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_302890.json:
```json
{
    "body": "ok. Dependencies are rather orthogonal to this ticket, so I set this one to positive. At some stage, it might be good to implement other algorithms (cf. #10669) and to compare speed.",
    "created_at": "2017-01-12T10:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302890",
    "user": "@cheuberg"
}
```

ok. Dependencies are rather orthogonal to this ticket, so I set this one to positive. At some stage, it might be good to implement other algorithms (cf. #10669) and to compare speed.



---

archive/issue_comments_302891.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2017-02-09T09:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302891",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_302892.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-02-09T09:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302892",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_302893.json:
```json
{
    "body": "Merged in #21976 (and thus 7.6.beta2) to make this patch work again.",
    "created_at": "2017-02-09T09:24:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302893",
    "user": "@dkrenn"
}
```

Merged in #21976 (and thus 7.6.beta2) to make this patch work again.



---

archive/issue_comments_302894.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-09T09:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302894",
    "user": "@dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_302895.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-03-02T14:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302895",
    "user": "@tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_302896.json:
```json
{
    "body": "Needs another rebasing.",
    "created_at": "2017-03-02T14:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302896",
    "user": "@tscrim"
}
```

Needs another rebasing.



---

archive/issue_comments_302897.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-02T14:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302897",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302898.json:
```json
{
    "body": "Replying to [comment:39 tscrim]:\n> Needs another rebasing.\n\nMerged in dependency #21976. Once the patchbot is happy, this can be positive again.",
    "created_at": "2017-03-02T14:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302898",
    "user": "@dkrenn"
}
```

Replying to [comment:39 tscrim]:
> Needs another rebasing.

Merged in dependency #21976. Once the patchbot is happy, this can be positive again.



---

archive/issue_comments_302899.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-02T14:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302899",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302900.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-03T07:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302900",
    "user": "@dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_302901.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-05T15:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21829#issuecomment-302901",
    "user": "@vbraun"
}
```

Resolution: fixed
