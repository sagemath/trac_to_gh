# Issue 25621: mpir build failures with some Haswell CPUs

Issue created by migration from https://trac.sagemath.org/ticket/25858

Original creator: embray

Original creation time: 2018-07-13 13:12:43

See https://github.com/wbhart/mpir/pull/252


---

Comment by embray created at 2018-07-13 13:49:24

New commits:


---

Comment by embray created at 2018-07-13 13:49:24

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-07-13 14:40:36

You can set this to a positive review if upstream accepts the PR.


---

Comment by embray created at 2018-07-18 11:47:03

I believe this issue can reasonably be addressed for Sage 8.4.


---

Comment by embray created at 2018-07-23 10:08:56

Got confirmation from Odile that this patch works.

If possible I'd like to get this in 8.3 actually, but admittedly adding a patch to MPIR is a big rebuild, and it also affects only a few rare machines and has an easy workaround e.g. building MPIR with `--build=skylake` or some other earlier architecture.


---

Comment by tscrim created at 2018-07-23 10:59:42

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-07-23 10:59:42

I am much more split on this ticket (than the one that only affects Cygwin) as it could have more unintended side-effects. I am slightly on the side of waiting until 8.4 and having this go through beta cycles. If we get posts on sage-devel, you have at least seen the error and know the workaround. Plus this will only affect people building it from source on these rare machines, so the chances of someone being afflicted are marginal.


---

Comment by embray created at 2018-07-23 13:59:24

I agree, it's pretty marginal.


---

Comment by vbraun created at 2018-08-05 08:16:11

Resolution: fixed
