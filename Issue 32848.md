# Issue 32848: adjust dochtml label so doctests pass when html doc is not built/installed

Issue created by migration from https://trac.sagemath.org/ticket/33085

Original creator: tornaria

Original creation time: 2021-12-26 21:32:44

CC:  jhpalmieri

This includes
 - #33064: do not fail when docbuild cache cannot be saved
 - remove dochtml label from some tests that don't need docs installed
 - add dochtml label to some tests that need docs installed
 - use dochtml as default option only when html docs are installed


---

Comment by tornaria created at 2021-12-26 21:32:59

Changing status from new to needs_review.


---

Comment by tornaria created at 2021-12-26 21:32:59

New commits:


---

Comment by mkoeppe created at 2021-12-26 21:37:29

This should be redone on top of #32759, which changes the optional tag


---

Comment by mkoeppe created at 2021-12-27 18:15:38

Changing status from needs_review to needs_work.


---

Comment by jhpalmieri created at 2022-01-05 23:49:27

In particular with #32759, if docbuilding has been disabled, then `sage_docbuild/*` won't get doctested by default, so it may not need any special tags. (If someone explicitly doctests that directory, tests will fail, but if they run `make ptest` or similar, the files in that directory will be skipped.)


---

Comment by git created at 2022-01-09 20:37:02

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tornaria created at 2022-01-09 20:38:40

Rebased to 9.5.rc0, changing `dochtml` tags for `sagemath_doc_html`.

Removed the last commit which is now unnecessary.


---

Comment by git created at 2022-01-09 20:44:40

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-01-09 20:58:35

Ready for review? Looks fine to me


---

Comment by tornaria created at 2022-01-09 21:01:14

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2022-01-09 21:08:15

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-02-13 10:17:48

Resolution: fixed
