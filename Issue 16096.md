# Issue 16096: Game Theory: Build class for normal form games as well as ability to obtain Nash equilibria

Issue created by migration from Trac.

Original creator: vinceknight

Original creation time: 2014-05-12 08:27:11

Keywords: Game Theory, Normal Form Games

Include class for 2 by 2 normal form games.

A method to solve these games will be built (this is the main difficulty). 3 approaches will be considered:

1. Write implementation of lrs nash algorithm in cython;
2. Liaise with lrs library
3. Use Gambit (this approach will be investigated)

A summer student at Cardiff University will be working on this during Summer 2014.

Should be efficient to code in pure python/cython.


---

Comment by ncohen created at 2014-05-12 08:29:05

(being curious)


---

Comment by kcrisman created at 2014-05-12 13:37:41

Changing component from relocation to PLEASE CHANGE.


---

Comment by kcrisman created at 2014-05-12 13:37:41

Putting to no listed component because truly non fits.  Also, author is really for actual author of any changes (which may well be vinceknight! but isn't yet).


---

Comment by vinceknight created at 2014-05-12 13:43:03

Thanks kcrisman: that all makes a lot more sense than what I had put down. I'll go check if you have changed the other related tickets and if not will change myself.


---

Comment by kcrisman created at 2014-05-16 15:38:48

Here is a relevant paper: http://math.berkeley.edu/~datta/msprojectreport.pdf


---

Comment by vinceknight created at 2014-05-16 15:59:04

Replying to [comment:4 kcrisman]:
Here is a link to the lrs page (which has relevant papers there): http://cgm.cs.mcgill.ca/~avis/C/lrslib/USERGUIDE.html

This is what I would think as best way to go (as stated in Gambit FAQ: lrs is more robust) but that paper (pointed out by kcrisman) which points at Gambit will be super useful to evaluate the best way to go.


---

Comment by kcrisman created at 2014-05-28 21:16:13

> This is what I would think as best way to go (as stated in Gambit FAQ: lrs is more robust) but that paper (pointed out by kcrisman) which points at Gambit will be super useful to evaluate the best way to go.
Where is this FAQ?  I couldn't find it easily.

----
Thinking out loud below:

* lrs seems to just be about polytopes - useful, to be sure, but I'm just wondering whether reinventing the entire rest of the Gambit wheel is a great idea.  For instance, Gambit's McKelvey was THE McKelvey.  How much of lrs do we really need for finding equilibria, as opposed to all the other many things one does in game theory?
* However, Gambit doesn't talk about cooperative or matching game theory (tickets #16332, #16331)
* Maybe it would be worth talking to the Gambit folks [directly](https://maps.google.com/maps?q=Cardiff+University,+Cardiff,+United+Kingdom+to+University+of+East+Anglia,+Norwich,+United+Kingdom&saddr=Cardiff+University,+Cardiff,+United+Kingdom&daddr=University+of+East+Anglia,+Norwich,+United+Kingdom&hl=en&sll=42.515595,-70.847233&sspn=0.092114,0.149517&geocode=FaOfEQMdkH7P_yHKInGeCcdt4CmvKwE2vRxuSDHKInGeCcdt4A%3BFWLyIgMdiOgSACFz5UQH8Hu5uSkBWIB72ODZRzFz5UQH8Hu5uQ&oq=Cardiff+University,+Cardiff,+United+Kingdom+to+university+of+east+a&t=h&z=8) about how/whether any common work would be useful?  Especially if we could both use the same formats (if they are useful formats) - having a common base would be very valuable, especially as other software doesn't seem to have gotten into a standard format or even into game theory at all.


---

Comment by vinceknight created at 2014-05-28 21:32:17

Replying to [comment:6 kcrisman]:
> > This is what I would think as best way to go (as stated in Gambit FAQ: lrs is more robust) but that paper (pointed out by kcrisman) which points at Gambit will be super useful to evaluate the best way to go.
> Where is this FAQ?  I couldn't find it easily.
> 
> ----
> Thinking out loud below:
> 
> * lrs seems to just be about polytopes - useful, to be sure, but I'm just wondering whether reinventing the entire rest of the Gambit wheel is a great idea.  For instance, Gambit's McKelvey was THE McKelvey.  How much of lrs do we really need for finding equilibria, as opposed to all the other many things one does in game theory?
> * However, Gambit doesn't talk about cooperative or matching game theory (tickets #16332, #16331)
> * Maybe it would be worth talking to the Gambit folks [directly](https://maps.google.com/maps?q=Cardiff+University,+Cardiff,+United+Kingdom+to+University+of+East+Anglia,+Norwich,+United+Kingdom&saddr=Cardiff+University,+Cardiff,+United+Kingdom&daddr=University+of+East+Anglia,+Norwich,+United+Kingdom&hl=en&sll=42.515595,-70.847233&sspn=0.092114,0.149517&geocode=FaOfEQMdkH7P_yHKInGeCcdt4CmvKwE2vRxuSDHKInGeCcdt4A%3BFWLyIgMdiOgSACFz5UQH8Hu5uSkBWIB72ODZRzFz5UQH8Hu5uQ&oq=Cardiff+University,+Cardiff,+United+Kingdom+to+university+of+east+a&t=h&z=8) about how/whether any common work would be useful?  Especially if we could both use the same formats (if they are useful formats) - having a common base would be very valuable, especially as other software doesn't seem to have gotten into a standard format or even into game theory at all.

Yeah all fair comments: I'll get in touch with the Gambit folk (they're a very short drive from where I am) and see what they think. It was my understanding that lrs 'kind of' exists within Sage already as some sort of 'extra library'? Is that something I've made up? I think I've seen it somewhere... 

With regards to matching games and cooperative games they basically involve very straightforward algorithms so I was just thinking of coding those in Sage itself. A combination of cython and python should do the trick and one of those would be a nice warm up exercise for my student. If we decide to go the Gambit way we can still have all these things side by side I suppose?


---

Comment by kcrisman created at 2014-05-29 01:32:10

> Yeah all fair comments: I'll get in touch with the Gambit folk (they're a very short drive from where I am) and see what they think. It was my understanding that lrs 'kind of' exists within Sage already as some sort of 'extra library'? Is that something I've made up? I think I've seen it somewhere... 

I've commented on [your old sage-support thread](https://groups.google.com/forum/#!topic/sage-support/AZRzY7JyG_Y) on this.  Also a very interesting [sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/oH6Jrjs-HUY) on this is out there.

> With regards to matching games and cooperative games they basically involve very straightforward algorithms so I was just thinking of coding those in Sage itself. A combination of cython and python should do the trick and one of those would be a nice warm up exercise for my student. If we decide to go the Gambit way we can still have all these things side by side I suppose?
Oh, of course.  And it will be very useful to have a "one-stop shop" for this.  Just trying to figure things out.


---

Comment by vinceknight created at 2014-05-29 12:39:30

Replying to [comment:8 kcrisman]:
> > Yeah all fair comments: I'll get in touch with the Gambit folk (they're a very short drive from where I am) and see what they think. It was my understanding that lrs 'kind of' exists within Sage already as some sort of 'extra library'? Is that something I've made up? I think I've seen it somewhere... 
> 
> I've commented on [your old sage-support thread](https://groups.google.com/forum/#!topic/sage-support/AZRzY7JyG_Y) on this.  Also a very interesting [sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/oH6Jrjs-HUY) on this is out there.

Thanks! I'll take a closer look.
 
> > With regards to matching games and cooperative games they basically involve very straightforward algorithms so I was just thinking of coding those in Sage itself. A combination of cython and python should do the trick and one of those would be a nice warm up exercise for my student. If we decide to go the Gambit way we can still have all these things side by side I suppose?
> Oh, of course.  And it will be very useful to have a "one-stop shop" for this.  Just trying to figure things out.

Yeah it's really helpful (and appreciated) to talk this over with you :)


---

Comment by jcampbell created at 2014-06-05 15:25:10

We've been in contact with the man from Gambit and he seems quite keen on potentially being included in Sage. He appears to be fairly familiar with Sage and understands that some things may need to be tidied up before it becomes a standard package.


---

Comment by kcrisman created at 2014-06-05 15:42:13

> We've been in contact with the man from Gambit and he seems quite keen on potentially being included in Sage. He appears to be fairly familiar with Sage and understands that some things may need to be tidied up before it becomes a standard package.
Great - and in any case it would have to start as optional.  But that isn't a total hurdle, as one could have wrapper classes or stand-alone, depending on what Gambit actually does.  I'm most interested in compatibility - it would be nice for there to be a standard format for representing things, you know?


---

Comment by jcampbell created at 2014-06-05 15:49:06

> But that isn't a total hurdle, as one could have wrapper classes or stand-alone, depending on what Gambit actually does.
I like the idea of having wrapper classes that could make use of Sage's ability to show things in an aesthetically pleasing way, anything involving latex would be great for example.
> it would be nice for there to be a standard format for representing things, you know?
I agree, gambit actually uses its own .efg and .nfg file formats for representing games with the aim of them being easily readable by humans. Given that there isn't much else out there they may become a standard themselves.


---

Comment by kcrisman created at 2014-06-05 17:08:59

Originally posted on the wrong ticket...

----

I **really** like the idea you had [here](https://github.com/theref/sage-game-theory/issues/19#issuecomment-45208259):
> with normal form games, we might have a prebuilt Matching Pennies game that the user could load, 
Yes!  Just like

```
sage: graphs.[tab]
graphs.Balaban10Cage
graphs.Balaban11Cage
graphs.BalancedTree
graphs.BarbellGraph
graphs.BidiakisCube
graphs.BiggsSmithGraph
graphs.BishopGraph
graphs.BrinkmannGraph
<snip>
sage: matroids.[tab]
matroids.AG               matroids.Uniform          matroids.named_matroids
matroids.CompleteGraphic  matroids.Wheel            
matroids.PG               matroids.Whirl            
```

This would be awesome, a built-in library one could explore of basic examples.


---

Comment by vinceknight created at 2014-06-05 17:45:17

Replying to [comment:11 kcrisman]:
> > We've been in contact with the man from Gambit and he seems quite keen on potentially being included in Sage. He appears to be fairly familiar with Sage and understands that some things may need to be tidied up before it becomes a standard package.
> Great - and in any case it would have to start as optional.  But that isn't a total hurdle, as one could have wrapper classes or stand-alone, depending on what Gambit actually does.  I'm most interested in compatibility - it would be nice for there to be a standard format for representing things, you know?

Yeah completely agree. Structure is something we're going to be carefully thinking about over the next week or two. I'm hoping we get to meet with Ted (Gambit) to talk about stuff.

I don't suppose `@`kcrisman that you would have a spare 15 minutes for us to chat (via hangout or something) just to get your thoughts? Perhaps when we have an initial/draft architecture written down we could talk? We want to make sure we future proof things as much as possible and also that we're thinking of the right stuff... Completely understand that you are busy and really appreciate the time you're giving on here so no problem if that doesn't work :)

(I replied to the email I got about this on my phone with this message about 2 hours ago hoping it would automagically appear here but that doesn't look like it happened)


---

Comment by vinceknight created at 2014-06-05 17:47:02

Replying to [comment:12 jcampbell]:
> > But that isn't a total hurdle, as one could have wrapper classes or stand-alone, depending on what Gambit actually does.
> I like the idea of having wrapper classes that could make use of Sage's ability to show things in an aesthetically pleasing way, anything involving latex would be great for example.
> > it would be nice for there to be a standard format for representing things, you know?
> I agree, gambit actually uses its own .efg and .nfg file formats for representing games with the aim of them being easily readable by humans. Given that there isn't much else out there they may become a standard themselves.

The LaTeX representation of things will be minor tweaks I imagine. It's all about making sure we get the general structure of Gambit games and 'our games' aligned so that we can talk to 'Gambit' in the right way... We won't rush this: important to get it right.


---

Comment by kcrisman created at 2014-06-05 18:21:55

> I don't suppose `@`kcrisman that you would have a spare 15 minutes for us to chat (via hangout or something) just to get your thoughts? Perhaps when we have an initial/draft architecture written down we could talk? We want to make sure we future proof things as much as possible and also that we're thinking of the right stuff... Completely understand that you are busy and really appreciate the time you're giving on here so no problem if that doesn't work :)
Actually, today for the next couple hours would be good.
> (I replied to the email I got about this on my phone with this message about 2 hours ago hoping it would automagically appear here but that doesn't look like it happened)
No, I don't think you can reply to Trac tickets that way.  (Can you?  I mean, it's possible you could...)


---

Comment by jcampbell created at 2014-06-16 14:02:45

There is some discussion on Github about how we should model our Normal Form Game class. The main question being should we inherit from Gambit with methods written for other representation and algorithms, or should we inherit from SageObject and have different representations as different attributes.

The relevant issue can be found [here](https://github.com/theref/sage-game-theory/issues/48). Please could people take a read through what has been said so far and any comments, all help is greatly appreciated!


---

Comment by jcampbell created at 2014-07-01 16:38:14

Last 10 new commits:


---

Comment by jcampbell created at 2014-07-01 16:38:14

Changing status from new to needs_review.


---

Comment by vinceknight created at 2014-07-01 16:48:01

Hi!

James has just pushed a pretty substantial piece of work. This creates a `NormalFormGame` class that brings with it 3 algorithms to compute equilibria:

1. LCP (a gambit algorithm)
2. lrs
3. A bespoke support enumeration algorithm (this is the slowest of algorithms but allows users to find equilibria if the above two packages aren't installed).

There is also a lot of documentation that has been written (and it builds! :)). Finally, if it's of interest we're actively continuously testing this by generating random games and trying all 3 algorithms. You can find a bunch of plots (and the raw data) here: https://github.com/theref/sage-game-theory.


---

Comment by git created at 2014-07-04 17:41:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2014-07-06 10:28:08

Changing component from PLEASE CHANGE to game theory.


---

Comment by kcrisman created at 2014-08-28 17:37:43

Hi!  I don't see anything at https://github.com/theref/sage-game-theory except the readme, which I am pretty sure is not what it was earlier in the summer.

Also, have you tested this with and without gambit installed?  (I'm having difficult finding the code right now because of some broken links on Trac as well, so my apologies.)
----
New commits:


---

Comment by kcrisman created at 2014-08-28 17:50:15

Very broad comments:
 * The following file seems unhelpful - src/sage/game_theory/installing_gambit.md

```
    mv gambit-14.0.2.tar.gz SAGE_ROOT/upstream
    cd SAGE_ROOT
    ./sage -i gambit
```

   would that even work without #16466?
 * old.py is always a frightening name for a file in a professional package ;-)
Maybe there is a more updated version of this stuff coming?  I don't see anything from August, for instance.


---

Comment by vinceknight created at 2014-08-28 21:13:40

I'm having to do this on my phone as my laptop has just died which is a bit of a nightmare as I'm at my mother's all weekend so won't be able to work on this like I was hoping! 

Re github, if you click on the branches you can see that we've set the landing page to be the read me branch with nothing in it. If you look at branch 16333 you'll see the relevant code for this ticket. If you look through the issues on there also you'll see that James and I tried to document this whole process so any decisions that were not obvious are on there :) 

Re with and without gambit: this was tricky to test as 'uninstalling' an optional Sage package proved to be difficult. We did however test on various machines with and without Gambit installed and I'm pretty sure that it works just fine. If it doesn't it's just that we ran out of Gambit-less machines and made a tweak that might be missing a try except statement. So it would be an easy fix but we certainly tried our best (and I'm almost 100% sure we succeeded) to make sure that Gambit is not a requirement but an enhancement. 

Replying to [comment:28 kcrisman]:
> Very broad comments:
>  * The following file seems unhelpful - src/sage/game_theory/installing_gambit.md
> {{{
>     mv gambit-14.0.2.tar.gz SAGE_ROOT/upstream
>     cd SAGE_ROOT
>     ./sage -i gambit
> }}}
>    would that even work without #16466?

That is in fact there to help if anyone wanted to get Gambit working prior to 16466 being fixed (which it needs to be)  and approved. It would/should work if the instructions are followed (I tested this on my own machine). We thought that this is mainly useful for devs/reviewers. 

>  * old.py is always a frightening name for a file in a professional package ;-)
> Maybe there is a more updated version of this stuff coming?  I don't see anything from August, for instance.

Yeah old.py should be deleted (I'll call that a lazy relic). A part from that issue this is pretty much just waiting for a review (I've been too busy with other things this month to bug people :)). 

Thanks again, and really sorry if I'm unable to work on things immediately. Currently having my heart broken by a flashing hard disk error...


---

Comment by git created at 2014-08-29 10:38:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2014-09-09 17:00:30

Changing status from needs_review to needs_work.


---

Comment by kcrisman created at 2014-11-24 21:30:55

> I **really** like the idea you had [here](https://github.com/theref/sage-game-theory/issues/19#issuecomment-45208259):
> > with normal form games, we might have a prebuilt Matching Pennies game that the user could load, 
> Yes!  Just like
> {{{
> sage: graphs.[tab]
> graphs.Balaban10Cage
> graphs.Balaban11Cage
> graphs.BalancedTree
> graphs.BarbellGraph
> graphs.BidiakisCube
> graphs.BiggsSmithGraph
> graphs.BishopGraph
> graphs.BrinkmannGraph
> <snip>
> sage: matroids.[tab]
> matroids.AG               matroids.Uniform          matroids.named_matroids
> matroids.CompleteGraphic  matroids.Wheel            
> matroids.PG               matroids.Whirl            
> }}}
> This would be awesome, a built-in library one could explore of basic examples.
This is now #17392.


---

Comment by kcrisman created at 2014-12-03 14:50:05

Ping.  No worries if this won't be coming soon, but just checking in.


---

Comment by vinceknight created at 2014-12-03 15:02:57

I'm basically ready to start moving on this: waiting for #16466 to be merged in to develop. Completely realise that we could get going without waiting on that but am just not completely confident in my ability to not make a mess. Once it's in develop I'll branch from that and it'll be ready to rock n roll! :) (A lot of the code is ready, it'll just take some time making sure docs and tests are up to standard).


---

Comment by kcrisman created at 2014-12-15 19:11:35

Okay, #16466 is merged.


---

Comment by vinceknight created at 2014-12-15 19:14:46

Replying to [comment:35 kcrisman]:
> Okay, #16466 is merged.

Yup: way ahead of you :) Really is just waiting on me finding a spare day over the break to tidy everything up and double check a couple of things (the parser is re-written, tests are re-written etc...). If it's not pushed by the end of the week (am working on a revisions to a paper) it certainly will be by the end of the christmas break.


---

Comment by vinceknight created at 2014-12-20 11:48:06

Have just pushed this. Note that I've left the `gambit_docs.py` as a separate set of docs.
----
Last 10 new commits:


---

Comment by vinceknight created at 2014-12-20 11:48:06

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2014-12-20 11:58:56

Hello Vince ! It would be really cool if you made your branch a bit more 'reviewer-friendly'. Right now it seems to follow the development history, but you want this to be re-read by somebody and it would be nice to not have a commit that fixes a bug introduced in a previous commit.

With git, you can very easily merge commits together, as part of the rebase command. Try something like that:

- Checkout your branch, and type 'git checkout -b rebased_version'. This, to make sure that we do not touch your old branch so nothing can go wrong.
- 'git rebase -i develop'. This will 'replay' all your commits on top of the latest develop version. It will open a text editor, and you will see how easy it is to merge two commits, or reorder them.

At the end of this procedure, the branch `rebased_version` will be on top of the latest develop version, and its history should be cleaner. You can call 'git rebase -i develop' several times if needed.

Hope that will help.

Nathann


---

Comment by ncohen created at 2014-12-20 12:00:49

p.s.: do you use 'tig' ? It is a text-mode viewer for tig branches. It helps a *LOT*. If you don't use it already, download it and type 'tig' in Sage's source directory.


---

Comment by vinceknight created at 2014-12-20 12:04:44

Replying to [comment:38 ncohen]:
> Hello Vince ! It would be really cool if you made your branch a bit more 'reviewer-friendly'. Right now it seems to follow the development history, but you want this to be re-read by somebody and it would be nice to not have a commit that fixes a bug introduced in a previous commit.

Yeah, sorry: this was the subject of a long discussion on another thread... Will fix it now (or at least try to: rebase is a thing I can't pretend to understand). :)

> 
> With git, you can very easily merge commits together, as part of the rebase command. Try something like that:
> 
> - Checkout your branch, and type 'git checkout -b rebased_version'. This, to make sure that we do not touch your old branch so nothing can go wrong.
> - 'git rebase -i develop'. This will 'replay' all your commits on top of the latest develop version. It will open a text editor, and you will see how easy it is to merge two commits, or reorder them.
> 
> At the end of this procedure, the branch `rebased_version` will be on top of the latest develop version, and its history should be cleaner. You can call 'git rebase -i develop' several times if needed.
> 
> Hope that will help.

Yeah that looks really helpful, thanks!
> 
> Nathann


---

Comment by vinceknight created at 2014-12-20 12:04:52

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-12-20 12:38:51

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vinceknight created at 2014-12-20 12:40:56

Changing status from needs_work to needs_review.


---

Comment by vinceknight created at 2014-12-20 12:40:56

I KNOW KUNG-FU!!! :)

(Or I've made a complete mess)

Thanks for that initial explanation of rebase `@`ncohen. So ridiculously powerful! :) I am 75% confident that I've used it correctly (which is way above the 5% I've gotten to the previous 3 times I've braved the rebase command).


---

Comment by vinceknight created at 2014-12-20 12:43:00

No: it looks like I've managed to make a mess (the messages don't match what they were supposed to do). I thought I had checked, apologies - will fix and get back to you all :)


---

Comment by vinceknight created at 2014-12-20 12:43:00

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-12-20 13:00:53

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vinceknight created at 2014-12-20 13:04:18

Changing status from needs_work to needs_review.


---

Comment by vinceknight created at 2014-12-20 13:04:18

Ok :) Pretty sure I got it that time (tig is pretty sweet!). Thanks again.


---

Comment by jdemeyer created at 2014-12-20 16:16:47

Never use a bare `except:`, catch specific exceptions instead.

Also: fill in your Author name.


---

Comment by jdemeyer created at 2014-12-20 16:16:47

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2014-12-20 16:22:33

Without `gambit` installed:

```
sage -t --long src/sage/game_theory/normal_form_game.py                                                                                                                 
**********************************************************************                                                                                                  
File "src/sage/game_theory/normal_form_game.py", line 632, in sage.game_theory.normal_form_game.NormalFormGame.__init__                                                 
Failed example:                                                                                                                                                         
    error = NormalFormGame({4:6, 6:9})
Expected:
    Traceback (most recent call last):
    ...
    TypeError: Generator function must be a list, gambit game or nothing
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 850, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.game_theory.normal_form_game.NormalFormGame.__init__[35]>", line 1, in <module>
        error = NormalFormGame({Integer(4):Integer(6), Integer(6):Integer(9)})
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/game_theory/normal_form_game.py", line 652, in __init__
        raise TypeError("Generator function must be a list or nothing")
    TypeError: Generator function must be a list or nothing
**********************************************************************
File "src/sage/game_theory/normal_form_game.py", line 1154, in sage.game_theory.normal_form_game.NormalFormGame.obtain_nash
Failed example:
    g.obtain_nash(algorithm='lrs')
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 850, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.game_theory.normal_form_game.NormalFormGame.obtain_nash[11]>", line 1, in <module>
        g.obtain_nash(algorithm='lrs')
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/game_theory/normal_form_game.py", line 1236, in obtain_nash
        raise NotImplementedError("lrs is not installed")
    NotImplementedError: lrs is not installed
**********************************************************************
File "src/sage/game_theory/normal_form_game.py", line 1156, in sage.game_theory.normal_form_game.NormalFormGame.obtain_nash
Failed example:
    g.obtain_nash(algorithm='LCP')
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 850, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.game_theory.normal_form_game.NormalFormGame.obtain_nash[12]>", line 1, in <module>
        g.obtain_nash(algorithm='LCP')
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/game_theory/normal_form_game.py", line 1242, in obtain_nash
        raise NotImplementedError("gambit is not installed")
    NotImplementedError: gambit is not installed
**********************************************************************
```



---

Comment by git created at 2014-12-20 16:40:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-12-20 16:47:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-12-20 16:54:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-12-20 16:56:08

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2014-12-20 17:01:32

> Thanks for that initial explanation of rebase `@`ncohen. So ridiculously powerful! :)

http://www.clipartbest.com/cliparts/LcK/75X/LcK75Xpca.jpeg

Nathann


---

Comment by vinceknight created at 2014-12-20 17:26:18

Just looked through those commits (tig for the win! <- you have seriously upgrading my git today). Thanks!

I'm correct in saying that we're now waiting for someone other than you to review right? (I don't review the changes you just made do I? Although I guess I've just done that...).


---

Comment by vinceknight created at 2014-12-20 17:30:53

Should I/you add you as an author based on those commits? Apologies for the noobish questions. http://s3-ec.buzzfed.com/static/2014-10/26/6/enhanced/webdr08/enhanced-14836-1414320930-8.jpg


---

Comment by jdemeyer created at 2014-12-20 17:39:04

I don't feel like I should be author, consider my patches as "reviewer patches" even though I have no intention to actually review this ticket. I only looked at this ticket because of the `is_package_installed()` discussion we had. I noticed a few obvious opportunities for improvement, so I fixed those.


---

Comment by vinceknight created at 2014-12-20 17:41:32

Great: thanks for clarifying and thanks for the help :)


---

Comment by kcrisman created at 2014-12-20 20:18:01

Don't worry, a review is coming, I was off internet all day yesterday but will probably look at this tonight :)


---

Comment by kcrisman created at 2014-12-21 03:29:32

Quite minor comments:
* ` # optional - LCP` - should this be gambit?
* `the output differs to the other algorithms` - _from_ the other ones?

I ended up wrapping presents long enough that I won't get to a final review until Monday, but on the surface it looks like everything is just fine, I just want to make sure there isn't some edge case in the parsing and that the equilibria are okay.  I am really surprised I missed so many formatting things before - thanks, Jeroen!


---

Comment by vinceknight created at 2014-12-21 07:17:10

New commits:


---

Comment by git created at 2014-12-21 07:18:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2014-12-21 07:20:33

Replying to [comment:61 kcrisman]:
> Quite minor comments:
> * ` # optional - LCP` - should this be gambit?
> * `the output differs to the other algorithms` - _from_ the other ones?

Correct on both accounts. Both fixed now (thanks!).

> 
> I ended up wrapping presents long enough that I won't get to a final review until Monday, but on the surface it looks like everything is just fine, I just want to make sure there isn't some edge case in the parsing and that the equilibria are okay.  I am really surprised I missed so many formatting things before - thanks, Jeroen!

Thanks both and if this waits till after Christmas it's not the end of the world :) Happy holidays both :)


---

Comment by kcrisman created at 2014-12-22 13:43:21

> > * ` # optional - LCP` - should this be gambit?
There were two of these, one still is there ;-)
> Thanks both and if this waits till after Christmas it's not the end of the world :) Happy holidays both :)
I have something else to take care of first but hope to get to it before the end of today.


---

Comment by kcrisman created at 2014-12-22 20:48:38


```
+It is also possible to generate a Normal Form Game from a gambit Game::
+
```

This would be a good place to refer to the gambit document or remind why there are all these `int`s.

> is evidenced by the two algorithms returning different solutions::

Maybe better now is "the various algorithms"?

Finally, I think the parser is working fine but could use a little extra tlc if and when games with more than 2 players are implemented, as it is a very long series of things to parse for the reader (I mean the code like `profile.append(tuple(gambitstrategy[previousplayerstrategylength: previousplayerstrategylength + len(player.strategies)]))`) though I agree it should work correctly.

I don't see any other issues.  Thanks for breaking all of these tickets apart!  It really made it a lot easier to get figured out.


---

Comment by git created at 2014-12-23 11:29:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2014-12-23 11:33:31

Replying to [comment:66 kcrisman]:
> {{{
> +It is also possible to generate a Normal Form Game from a gambit Game::
> +
> }}}
> This would be a good place to refer to the gambit document or remind why there are all these `int`s.

I've added a pointer to the gambit documentation. Let me know if you think I've said too much/little.

> 
> > is evidenced by the two algorithms returning different solutions::
> 
> Maybe better now is "the various algorithms"?

Yup: have put that in.

> 
> Finally, I think the parser is working fine but could use a little extra tlc if and when games with more than 2 players are implemented, as it is a very long series of things to parse for the reader (I mean the code like `profile.append(tuple(gambitstrategy[previousplayerstrategylength: previousplayerstrategylength + len(player.strategies)]))`) though I agree it should work correctly.

I agree, I'm hoping that future dev will further integrate all the gambit algorithms, as this happens the parser will be in turn expanded. The next thing I'll be working on is #17392 though :)

> 
> I don't see any other issues.  Thanks for breaking all of these tickets apart!  It really made it a lot easier to get figured out. 

Thank you for all your help: I'm planning on finding time to try and review some tickets myself :)


---

Comment by kcrisman created at 2014-12-24 02:41:53

A few more things, largely about the gambit docs document.
* It's capitalized `IPython`, for whatever reason - the gambit docs thing is not correct that way, I missed it earlier.
* Here

```
The `python API documentation for gambit
<http://www.gambit-project.org/gambit14/pyapi.html>_` 
```

  I think the syntax needs to put the underscore after the backtick.
* There are several things in single backticks (like ``LCP``, but look for them, it's not the only one) that should be in double backticks ```LCP```.

Otherwise I think we are okay.


---

Comment by git created at 2015-01-02 10:19:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-01-02 10:25:10

Sorry for the late reply to this: I've had a pretty nice internet fast :) Hope you all had a great holiday season and happy new year!

Replying to [comment:69 kcrisman]:
> A few more things, largely about the gambit docs document.
> * It's capitalized `IPython`, for whatever reason - the gambit docs thing is not correct that way, I missed it earlier.

Pretty sure I caught these now.

> * Here
> {{{
> The `python API documentation for gambit
> <http://www.gambit-project.org/gambit14/pyapi.html>_` 
> }}}

Yup: have fixed.

>   I think the syntax needs to put the underscore after the backtick.
> * There are several things in single backticks (like ``LCP``, but look for them, it's not the only one) that should be in double backticks ```LCP```.

Looked for these and think there was just that one that I recognised. I did find various things in single back ticks but I think there done so correctly, I might well be confused by the syntax though: if you could point out one that is not right that should clarify what I'm misunderstanding and I'll go ahead and fix all the rest. (Apologies for not finding these, have built the docs and read through but think I'm just missing it).

Thanks again :)
> 
> Otherwise I think we are okay.


---

Comment by kcrisman created at 2015-01-04 01:29:38

> Sorry for the late reply to this: I've had a pretty nice internet fast :) 

A good idea!   I also (nearly) did that.

> > * It's capitalized `IPython`, for whatever reason - the gambit docs thing is not correct that way, I missed it earlier.
> Pretty sure I caught these now.
[This commit](http://git.sagemath.org/sage.git/commit/?id=70b61ab33aef1500ded86d5c750c7fe379f76b0c) actually makes it worse; it changes one `IPython` and then doesn't correctly fix an `ipython`.  Why don't you back up to before that commit and fix them correctly - all should be first two letters caps, rest lowercase.
> Looked for these and think there was just that one that I recognised. 
I think you got 'em.


---

Comment by kcrisman created at 2015-01-04 01:58:20

Just had to check the look of the docs again.  In addition to getting the `IPython` thing right (there are two total in the gambit docs and one in the normal form game file), I notice that in the gambit docs file
> Here is how to use the ExternalEnumPureSolver
has ExternalEnumPureSolver in single backticks, but this makes it look like a math variable instead of code.  I recommend double backticks or nothing; similarly for 
> If one really wants to use gambit directly in Sage (without using the NormalFormGame class as a wrapper) 
Not sure why I didn't mention those before, I did see them.


---

Comment by git created at 2015-01-04 08:12:29

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vinceknight created at 2015-01-04 08:18:30

I _think I caught everything_ although I made a slight mess with the rebase (Still learning... Will get it eventually) so apologies if the commits do not make the most sense. If it's confusing just let me know and I'll fix them.


---

Comment by kcrisman created at 2015-01-05 15:06:51

You unfortunately reverted or something the fix for one of the lcp optional tests (should be gambit):

```
+            sage: LCP_eqs == sorted(LCP_eqs)  # optional - LCP
+            True
```

Sorry, I shouldn't have asked you for some wacky thing, just trying to save a commit...

Otherwise all set!


---

Comment by git created at 2015-01-05 16:29:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-01-05 16:31:23

Replying to [comment:77 kcrisman]:
> You unfortunately reverted or something the fix for one of the lcp optional tests (should be gambit):
> {{{
> +            sage: LCP_eqs == sorted(LCP_eqs)  # optional - LCP
> +            True
> }}}
> Sorry, I shouldn't have asked you for some wacky thing, just trying to save a commit...

Not at all: I appreciate the opportunity to try and learn :) Haven't quite gotten it (this push is a single commit for example that seems to have grabbed more...) but I will!

> 
> Otherwise all set!

Awesome! The next thing will be that list of games :)


---

Comment by kcrisman created at 2015-01-05 16:39:43

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-01-12 18:11:43

Resolution: fixed


---

Comment by kcrisman created at 2015-02-23 13:48:55

Vince, I guess you are Vince from now on if we want to keep credit to the same individual :)
