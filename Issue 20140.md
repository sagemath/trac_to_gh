# Issue 20140: minimizing the use of is_package_install at runtime

Issue created by migration from https://trac.sagemath.org/ticket/20377

Original creator: fbissey

Original creation time: 2016-04-07 01:21:35

CC:  slelievre

Keywords: sagedays 77

This is helpful for sage-on-distributions. Typically sage-on-distribution do not want, or need, to call sage's internal packaging system.

I raised this as part of sage days 77.


---

Comment by fbissey created at 2016-04-07 01:21:49

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2016-04-07 07:25:53

Your branch points to the latest beta, did you forget to push or something?


---

Comment by mmezzarobba created at 2016-04-07 07:25:53

Changing component from PLEASE CHANGE to packages: optional.


---

Comment by jdemeyer created at 2016-04-07 07:28:23

Changing status from needs_review to needs_work.


---

Comment by fbissey created at 2016-04-07 07:37:29

I forgot to commit :(


---

Comment by git created at 2016-04-07 07:39:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by fbissey created at 2016-04-07 07:54:11

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2016-04-07 15:27:03

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2016-04-07 15:27:03

You forget a colon

```
  File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/groups/generic.py", line 1407
    if not os.path.isfile(os.path.join(SAGE_LOCAL, "gap", "latest", "small", "readsml.g"))
```



---

Comment by git created at 2016-04-07 21:54:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by fbissey created at 2016-04-07 21:57:54

If that's all I forgot that's not a bad score. This particular one was different in sage-on-gentoo because I don't ship this database separately from `gap` like it is done in sage so it doesn't need testing.
I'll still need to patch that one one way or another because the path will be different on gentoo. Alternative proposal welcome.


---

Comment by git created at 2016-04-07 22:36:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2016-04-07 22:43:35

It seems we are working on the same issue ;)
#20382 does essentially the same, maybe you want to have a look.

It seems to me that my approach is slightly more generic but I am open for discussion.


---

Comment by jdemeyer created at 2018-03-19 20:15:16

Is this still relevant or should it be closed in the light of #20382?


---

Comment by fbissey created at 2018-03-19 20:18:24

Changing status from needs_work to needs_review.


---

Comment by fbissey created at 2018-03-19 20:18:24

Replying to [comment:13 jdemeyer]:
> Is this still relevant or should it be closed in the light of #20382?

I think I should have marked this one duplicate months ago. There is nothing in here that #20382 doesn't do better.


---

Comment by jdemeyer created at 2018-03-19 20:28:33

Resolution: duplicate
