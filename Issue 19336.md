# Issue 19336: Natural coercion from Integers(p*l) to GF(p) for prime p

Issue created by migration from Trac.

Original creator: switzel

Original creation time: 2015-11-12 10:24:52

CC:  tscrim

Keywords: coercion, rings

If `p` is a prime divisor of `m` there is currently no natural coercion morphism from `Integers(m)` to `GF(p)` when `p` is a prime that divides `m`:


```
sage: Integers(9).hom(GF(3))
---------------------------------------------------------------------------
TypeError [...]
```


I don't see why there shouldn't be: there is a natural coercion morphism from `Integers(p)` to `GF(p)` and there is one from `Integers(m)` to `Integers(p)`.

Also it seems like to change it would just involve changing one line of code.


---

Comment by switzel created at 2015-11-12 14:26:57

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-11-12 23:57:43

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-11-12 23:57:43

1. I would put the test you added in the `EXAMPLES` block, not `TESTS`.

2. Add a test showing that there is no coercion from `Integers(9)` to `GF(5)` for example.

3. Ideally it would also work for non-prime finite fields: there should be coercion from `Integers(p*k)` to `GF(p^n)` (I'm not saying you must fix this on this ticket, it's just a suggestion).


---

Comment by chapoton created at 2017-05-03 19:59:21

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-05-03 19:59:21

New commits:


---

Comment by vdelecroix created at 2017-05-04 06:50:49

Changing type from PLEASE CHANGE to enhancement.


---

Comment by chapoton created at 2017-05-09 19:08:37

green bot, please review


---

Comment by chapoton created at 2017-05-12 20:09:07

ping ?


---

Comment by jhpalmieri created at 2017-05-12 20:44:37

Do you understand the purpose of the check

```
(not isinstance(S, ResidueField_generic) or
                     S.degree() == 1)):
```

If `is_instance(S, IntegerModRing_generic)` is True, then I think `S.degree()==1` always, and furthermore I don't see how `not isinstance(S, ResidueField_generic)` could be False. I would be tempted to just delete this, but I don't know this code well.


---

Comment by jhpalmieri created at 2017-05-12 20:56:08

Well, I do see how `not isinstance(S, ResidueField_generic)` can be false: `R = ZZ.residue_field(2)` (but I still do not see how `S.degree() == 1` could be false). This residue field does not have good coercion properties, either: as far as I can tell, there is no coercion map from either `ZZ.residue_field(p)` to `Integers(p)`, or from `GF(p)` to `Integers(p)`. Not that this is directly part of this ticket...


---

Comment by jhpalmieri created at 2017-05-12 22:12:14

I also don't understand why `ZZ.residue_field(5)` does not just return the same thing as `Integers(5)`, but I'm not a number theorist.


---

Comment by tscrim created at 2017-05-21 06:03:21

So my very loose understanding is that they all should essentially be the same objects, but they are all considered as different constructions.

For comment:9, it could be something like `GF(5)`, but that also seems to force a degree of 1. So I think you're right, that we don't need that extra check. However, I also don't know the code enough, but we could just remove it and see if anything breaks.

I agree that the coercion issues should be dealt with, but on another ticket.


---

Comment by jdemeyer created at 2017-06-26 15:14:09

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-06-29 06:46:48

Resolution: fixed
