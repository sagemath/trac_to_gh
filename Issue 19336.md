# Issue 19336: Natural coercion from Integers(p*l) to GF(p) for prime p

archive/issues_019336.json:
```json
{
    "body": "CC:  @tscrim\n\nKeywords: coercion, rings\n\nIf `p` is a prime divisor of `m` there is currently no natural coercion morphism from `Integers(m)` to `GF(p)` when `p` is a prime that divides `m`:\n\n\n```\nsage: Integers(9).hom(GF(3))\n---------------------------------------------------------------------------\nTypeError [...]\n```\n\n\nI don't see why there shouldn't be: there is a natural coercion morphism from `Integers(p)` to `GF(p)` and there is one from `Integers(m)` to `Integers(p)`.\n\nAlso it seems like to change it would just involve changing one line of code.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19573\n\n",
    "created_at": "2015-11-12T10:24:52Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Natural coercion from Integers(p*l) to GF(p) for prime p",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19336",
    "user": "https://trac.sagemath.org/admin/accounts/users/switzel"
}
```
CC:  @tscrim

Keywords: coercion, rings

If `p` is a prime divisor of `m` there is currently no natural coercion morphism from `Integers(m)` to `GF(p)` when `p` is a prime that divides `m`:


```
sage: Integers(9).hom(GF(3))
---------------------------------------------------------------------------
TypeError [...]
```


I don't see why there shouldn't be: there is a natural coercion morphism from `Integers(p)` to `GF(p)` and there is one from `Integers(m)` to `Integers(p)`.

Also it seems like to change it would just involve changing one line of code.

Issue created by migration from https://trac.sagemath.org/ticket/19573





---

archive/issue_comments_265220.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-12T14:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265220",
    "user": "https://trac.sagemath.org/admin/accounts/users/switzel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_265221.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-12T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265221",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_265222.json:
```json
{
    "body": "1. I would put the test you added in the `EXAMPLES` block, not `TESTS`.\n\n2. Add a test showing that there is no coercion from `Integers(9)` to `GF(5)` for example.\n\n3. Ideally it would also work for non-prime finite fields: there should be coercion from `Integers(p*k)` to `GF(p^n)` (I'm not saying you must fix this on this ticket, it's just a suggestion).",
    "created_at": "2015-11-12T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265222",
    "user": "https://github.com/jdemeyer"
}
```

1. I would put the test you added in the `EXAMPLES` block, not `TESTS`.

2. Add a test showing that there is no coercion from `Integers(9)` to `GF(5)` for example.

3. Ideally it would also work for non-prime finite fields: there should be coercion from `Integers(p*k)` to `GF(p^n)` (I'm not saying you must fix this on this ticket, it's just a suggestion).



---

archive/issue_comments_265223.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-03T19:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265223",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_265224.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-05-03T19:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265224",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_265225.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2017-05-04T06:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265225",
    "user": "https://github.com/videlec"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_265226.json:
```json
{
    "body": "green bot, please review",
    "created_at": "2017-05-09T19:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265226",
    "user": "https://github.com/fchapoton"
}
```

green bot, please review



---

archive/issue_comments_265227.json:
```json
{
    "body": "ping ?",
    "created_at": "2017-05-12T20:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265227",
    "user": "https://github.com/fchapoton"
}
```

ping ?



---

archive/issue_comments_265228.json:
```json
{
    "body": "Do you understand the purpose of the check\n\n```\n(not isinstance(S, ResidueField_generic) or\n                     S.degree() == 1)):\n```\n\nIf `is_instance(S, IntegerModRing_generic)` is True, then I think `S.degree()==1` always, and furthermore I don't see how `not isinstance(S, ResidueField_generic)` could be False. I would be tempted to just delete this, but I don't know this code well.",
    "created_at": "2017-05-12T20:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265228",
    "user": "https://github.com/jhpalmieri"
}
```

Do you understand the purpose of the check

```
(not isinstance(S, ResidueField_generic) or
                     S.degree() == 1)):
```

If `is_instance(S, IntegerModRing_generic)` is True, then I think `S.degree()==1` always, and furthermore I don't see how `not isinstance(S, ResidueField_generic)` could be False. I would be tempted to just delete this, but I don't know this code well.



---

archive/issue_comments_265229.json:
```json
{
    "body": "Well, I do see how `not isinstance(S, ResidueField_generic)` can be false: `R = ZZ.residue_field(2)` (but I still do not see how `S.degree() == 1` could be false). This residue field does not have good coercion properties, either: as far as I can tell, there is no coercion map from either `ZZ.residue_field(p)` to `Integers(p)`, or from `GF(p)` to `Integers(p)`. Not that this is directly part of this ticket...",
    "created_at": "2017-05-12T20:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265229",
    "user": "https://github.com/jhpalmieri"
}
```

Well, I do see how `not isinstance(S, ResidueField_generic)` can be false: `R = ZZ.residue_field(2)` (but I still do not see how `S.degree() == 1` could be false). This residue field does not have good coercion properties, either: as far as I can tell, there is no coercion map from either `ZZ.residue_field(p)` to `Integers(p)`, or from `GF(p)` to `Integers(p)`. Not that this is directly part of this ticket...



---

archive/issue_comments_265230.json:
```json
{
    "body": "I also don't understand why `ZZ.residue_field(5)` does not just return the same thing as `Integers(5)`, but I'm not a number theorist.",
    "created_at": "2017-05-12T22:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265230",
    "user": "https://github.com/jhpalmieri"
}
```

I also don't understand why `ZZ.residue_field(5)` does not just return the same thing as `Integers(5)`, but I'm not a number theorist.



---

archive/issue_comments_265231.json:
```json
{
    "body": "So my very loose understanding is that they all should essentially be the same objects, but they are all considered as different constructions.\n\nFor comment:9, it could be something like `GF(5)`, but that also seems to force a degree of 1. So I think you're right, that we don't need that extra check. However, I also don't know the code enough, but we could just remove it and see if anything breaks.\n\nI agree that the coercion issues should be dealt with, but on another ticket.",
    "created_at": "2017-05-21T06:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265231",
    "user": "https://github.com/tscrim"
}
```

So my very loose understanding is that they all should essentially be the same objects, but they are all considered as different constructions.

For comment:9, it could be something like `GF(5)`, but that also seems to force a degree of 1. So I think you're right, that we don't need that extra check. However, I also don't know the code enough, but we could just remove it and see if anything breaks.

I agree that the coercion issues should be dealt with, but on another ticket.



---

archive/issue_comments_265232.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-26T15:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265232",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_018427.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-29T06:46:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19336#event-18427"
}
```



---

archive/issue_comments_265233.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-29T06:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19336#issuecomment-265233",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
