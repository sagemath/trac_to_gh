# Issue 24425: Upgrade scipoptsuite to 5.0.0

archive/issues_024425.json:
```json
{
    "body": "CC:  @mkoeppe @jplab @vinklein\n\nBefore working on #21003, it might be a good idea to get the current version of the scipoptsuite running. This ticket should be very similar to #22557.\n\n\nUpstream archive: \u200bhttp://scip.zib.de/download.php?fname=scipoptsuite-5.0.0.tgz (DO NOT put on sage servers -- we cannot redistribute this archive)\n\nIssue created by migration from https://trac.sagemath.org/ticket/24662\n\n",
    "created_at": "2018-02-05T18:10:39Z",
    "labels": [
        "component: packages: experimental"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Upgrade scipoptsuite to 5.0.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24425",
    "user": "https://github.com/mo271"
}
```
CC:  @mkoeppe @jplab @vinklein

Before working on #21003, it might be a good idea to get the current version of the scipoptsuite running. This ticket should be very similar to #22557.


Upstream archive: â€‹http://scip.zib.de/download.php?fname=scipoptsuite-5.0.0.tgz (DO NOT put on sage servers -- we cannot redistribute this archive)

Issue created by migration from https://trac.sagemath.org/ticket/24662





---

archive/issue_comments_342147.json:
```json
{
    "body": "There is some more work to be done. First it doesn't find the patches (some of which might need to be modified, and then SoPlex is not found)\n\n```\nOK, installing scipoptsuite-5.0.0 now...\n[scipoptsuite-5.0.0] Using cached file /home/moritz/sage/upstream/scipoptsuite-5.0.0.tgz\n[scipoptsuite-5.0.0] scipoptsuite-5.0.0\n[scipoptsuite-5.0.0] ====================================================\n[scipoptsuite-5.0.0] Setting up build directory for scipoptsuite-5.0.0\n[scipoptsuite-5.0.0] Finished extraction\n[scipoptsuite-5.0.0] No patch files found in ../patches\n[scipoptsuite-5.0.0] ****************************************************\n[scipoptsuite-5.0.0] Host system:\n[scipoptsuite-5.0.0] Linux knoe 4.14.0-3-amd64 #1 SMP Debian 4.14.13-1 (2018-01-14) x86_64 GNU/Linux\n[scipoptsuite-5.0.0] ****************************************************\n[scipoptsuite-5.0.0] C compiler: gcc\n[scipoptsuite-5.0.0] C compiler version:\n[scipoptsuite-5.0.0] Using built-in specs.\n[scipoptsuite-5.0.0] COLLECT_GCC=/usr/bin/gcc\n[scipoptsuite-5.0.0] COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/7/lto-wrapper\n[scipoptsuite-5.0.0] OFFLOAD_TARGET_NAMES=nvptx-none\n[scipoptsuite-5.0.0] OFFLOAD_TARGET_DEFAULT=1\n[scipoptsuite-5.0.0] Target: x86_64-linux-gnu\n[scipoptsuite-5.0.0] Configured with: ../src/configure -v --with-pkgversion='Debian 7.3.0-1' --with-bugurl=file:///usr/share/doc/gcc-7/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++ --prefix=/usr --with-gcc-major-version-only --program-suffix=-7 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --enable-default-pie --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\n[scipoptsuite-5.0.0] Thread model: posix\n[scipoptsuite-5.0.0] gcc version 7.3.0 (Debian 7.3.0-1) \n[scipoptsuite-5.0.0] ****************************************************\n[scipoptsuite-5.0.0] Could not find SoPlex tarball in the scipoptsuite tarball.  Something is wrong.\n```\n\n---\nNew commits:",
    "created_at": "2018-02-05T18:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342147",
    "user": "https://github.com/mo271"
}
```

There is some more work to be done. First it doesn't find the patches (some of which might need to be modified, and then SoPlex is not found)

```
OK, installing scipoptsuite-5.0.0 now...
[scipoptsuite-5.0.0] Using cached file /home/moritz/sage/upstream/scipoptsuite-5.0.0.tgz
[scipoptsuite-5.0.0] scipoptsuite-5.0.0
[scipoptsuite-5.0.0] ====================================================
[scipoptsuite-5.0.0] Setting up build directory for scipoptsuite-5.0.0
[scipoptsuite-5.0.0] Finished extraction
[scipoptsuite-5.0.0] No patch files found in ../patches
[scipoptsuite-5.0.0] ****************************************************
[scipoptsuite-5.0.0] Host system:
[scipoptsuite-5.0.0] Linux knoe 4.14.0-3-amd64 #1 SMP Debian 4.14.13-1 (2018-01-14) x86_64 GNU/Linux
[scipoptsuite-5.0.0] ****************************************************
[scipoptsuite-5.0.0] C compiler: gcc
[scipoptsuite-5.0.0] C compiler version:
[scipoptsuite-5.0.0] Using built-in specs.
[scipoptsuite-5.0.0] COLLECT_GCC=/usr/bin/gcc
[scipoptsuite-5.0.0] COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/7/lto-wrapper
[scipoptsuite-5.0.0] OFFLOAD_TARGET_NAMES=nvptx-none
[scipoptsuite-5.0.0] OFFLOAD_TARGET_DEFAULT=1
[scipoptsuite-5.0.0] Target: x86_64-linux-gnu
[scipoptsuite-5.0.0] Configured with: ../src/configure -v --with-pkgversion='Debian 7.3.0-1' --with-bugurl=file:///usr/share/doc/gcc-7/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++ --prefix=/usr --with-gcc-major-version-only --program-suffix=-7 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --enable-default-pie --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
[scipoptsuite-5.0.0] Thread model: posix
[scipoptsuite-5.0.0] gcc version 7.3.0 (Debian 7.3.0-1) 
[scipoptsuite-5.0.0] ****************************************************
[scipoptsuite-5.0.0] Could not find SoPlex tarball in the scipoptsuite tarball.  Something is wrong.
```

---
New commits:



---

archive/issue_comments_342148.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-04T20:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342148",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342149.json:
```json
{
    "body": "I changed this to using `cmake`. So this expects, that the user has `cmake` installed, but on the other hand otherwise it won't by possible to install PySCIPOpt later, which is what is needed for #21003. The Makefile system is not compatible with PySCIPOpt, see https://github.com/SCIP-Interfaces/PySCIPOpt/blob/master/INSTALL.rst.\n\nHere are the cmake-instructions for scip: http://scip.zib.de/doc/html/CMAKE.php\n\n---\nNew commits:",
    "created_at": "2018-04-04T22:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342149",
    "user": "https://github.com/mo271"
}
```

I changed this to using `cmake`. So this expects, that the user has `cmake` installed, but on the other hand otherwise it won't by possible to install PySCIPOpt later, which is what is needed for #21003. The Makefile system is not compatible with PySCIPOpt, see https://github.com/SCIP-Interfaces/PySCIPOpt/blob/master/INSTALL.rst.

Here are the cmake-instructions for scip: http://scip.zib.de/doc/html/CMAKE.php

---
New commits:



---

archive/issue_comments_342150.json:
```json
{
    "body": "Does compile on debian stretch with cmake.",
    "created_at": "2018-04-04T22:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342150",
    "user": "https://github.com/jplab"
}
```

Does compile on debian stretch with cmake.



---

archive/issue_comments_342151.json:
```json
{
    "body": "Please add `-DCMAKE_VERBOSE_MAKEFILE=ON` to the cmake invocation so that building is verbose by default.",
    "created_at": "2018-04-04T23:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342151",
    "user": "https://github.com/kiwifb"
}
```

Please add `-DCMAKE_VERBOSE_MAKEFILE=ON` to the cmake invocation so that building is verbose by default.



---

archive/issue_comments_342152.json:
```json
{
    "body": "Please add the dependency on cmake to the `dependencies` file...",
    "created_at": "2018-04-05T14:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342152",
    "user": "https://github.com/mkoeppe"
}
```

Please add the dependency on cmake to the `dependencies` file...



---

archive/issue_comments_342153.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-05T14:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342154.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-05T17:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342155.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-05T19:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342155",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342156.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-05T19:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342156",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342157.json:
```json
{
    "body": "Is this ready for reviewing?",
    "created_at": "2018-04-05T21:57:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342157",
    "user": "https://github.com/mkoeppe"
}
```

Is this ready for reviewing?



---

archive/issue_comments_342158.json:
```json
{
    "body": "Replying to [comment:15 mkoeppe]:\n> Is this ready for reviewing?\n\nyes!",
    "created_at": "2018-04-05T21:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342158",
    "user": "https://github.com/mo271"
}
```

Replying to [comment:15 mkoeppe]:
> Is this ready for reviewing?

yes!



---

archive/issue_comments_342159.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-05T22:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342159",
    "user": "https://github.com/mo271"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_342160.json:
```json
{
    "body": "The `/usr/local` business that I saw on my computer may have come in because the cmake scripts look too creatively for libgmp or other libraries. Let's see if it's possible to prescribe looking in SAGE_LOCAL to make it more robust.",
    "created_at": "2018-04-05T22:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342160",
    "user": "https://github.com/mkoeppe"
}
```

The `/usr/local` business that I saw on my computer may have come in because the cmake scripts look too creatively for libgmp or other libraries. Let's see if it's possible to prescribe looking in SAGE_LOCAL to make it more robust.



---

archive/issue_comments_342161.json:
```json
{
    "body": "Replying to [comment:18 mkoeppe]:\n> The `/usr/local` business that I saw on my computer may have come in because the cmake scripts look too creatively for libgmp or other libraries. Let's see if it's possible to prescribe looking in SAGE_LOCAL to make it more robust.\n> \n\nThat would be great!",
    "created_at": "2018-04-05T22:23:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342161",
    "user": "https://github.com/mo271"
}
```

Replying to [comment:18 mkoeppe]:
> The `/usr/local` business that I saw on my computer may have come in because the cmake scripts look too creatively for libgmp or other libraries. Let's see if it's possible to prescribe looking in SAGE_LOCAL to make it more robust.
> 

That would be great!



---

archive/issue_comments_342162.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-05T23:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342163.json:
```json
{
    "body": "Please try if this still works for you with my patches.\n\nThere are still unrelated problems on Mac OS X:\n\n```\n[scipoptsuite-5.0.1] -- Installing: /Users/mkoeppe/s/sage/some-sage-install-prefix/bin/scip\n[scipoptsuite-5.0.1] error: /Library/Developer/CommandLineTools/usr/bin/install_name_tool: for: /Users/mkoeppe/s/sage/some-sage-install-prefix/bin/scip (for architecture x86_64) option \"-add_rpath /Users/mkoeppe/s/sage/some-sage-install-prefix/lib\" would duplicate path, file already has LC_RPATH for: /Users/mkoeppe/s/sage/some-sage-install-prefix/lib\n\n$ otool -L /Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libscip.*\n/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libscip.5.0.1.0.dylib:\n\tlibscip.5.0.dylib (compatibility version 5.0.0, current version 5.0.1)\n\t/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.8)\n\t/usr/lib/libedit.3.dylib (compatibility version 2.0.0, current version 3.0.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libhistory.6.dylib (compatibility version 6.0.0, current version 6.3.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgmp.23.dylib (compatibility version 24.0.0, current version 24.3.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgmpxx.8.dylib (compatibility version 13.0.0, current version 13.3.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libbliss.2.dylib (compatibility version 3.0.0, current version 3.0.0)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1238.0.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.24.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)\n```",
    "created_at": "2018-04-05T23:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342163",
    "user": "https://github.com/mkoeppe"
}
```

Please try if this still works for you with my patches.

There are still unrelated problems on Mac OS X:

```
[scipoptsuite-5.0.1] -- Installing: /Users/mkoeppe/s/sage/some-sage-install-prefix/bin/scip
[scipoptsuite-5.0.1] error: /Library/Developer/CommandLineTools/usr/bin/install_name_tool: for: /Users/mkoeppe/s/sage/some-sage-install-prefix/bin/scip (for architecture x86_64) option "-add_rpath /Users/mkoeppe/s/sage/some-sage-install-prefix/lib" would duplicate path, file already has LC_RPATH for: /Users/mkoeppe/s/sage/some-sage-install-prefix/lib

$ otool -L /Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libscip.*
/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libscip.5.0.1.0.dylib:
	libscip.5.0.dylib (compatibility version 5.0.0, current version 5.0.1)
	/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.8)
	/usr/lib/libedit.3.dylib (compatibility version 2.0.0, current version 3.0.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libhistory.6.dylib (compatibility version 6.0.0, current version 6.3.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgmp.23.dylib (compatibility version 24.0.0, current version 24.3.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgmpxx.8.dylib (compatibility version 13.0.0, current version 13.3.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libbliss.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1238.0.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.24.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
```



---

archive/issue_comments_342164.json:
```json
{
    "body": "On OS X it looks like using the rpath sets the install name so you have a complaint about doing something that's already been done. Could you run `otool -L` on the `scip` executable to see what's already there?",
    "created_at": "2018-04-05T23:29:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342164",
    "user": "https://github.com/kiwifb"
}
```

On OS X it looks like using the rpath sets the install name so you have a complaint about doing something that's already been done. Could you run `otool -L` on the `scip` executable to see what's already there?



---

archive/issue_comments_342165.json:
```json
{
    "body": "It still works with the new patches on debian unstable.",
    "created_at": "2018-04-05T23:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342165",
    "user": "https://github.com/mo271"
}
```

It still works with the new patches on debian unstable.



---

archive/issue_comments_342166.json:
```json
{
    "body": "Replying to [comment:22 fbissey]:\n> On OS X it looks like using the rpath sets the install name so you have a complaint about doing something that's already been done. Could you run `otool -L` on the `scip` executable to see what's already there?\n\n\nWell, the `scip` executable is not even linked against the shared library `libscip`. But here you go:\n\n```\n$ otool -L /Users/mkoeppe/s/sage/some-sage-install-prefix/bin/scip \n/Users/mkoeppe/s/sage/some-sage-install-prefix/bin/scip:\n\t/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.8)\n\t/usr/lib/libedit.3.dylib (compatibility version 2.0.0, current version 3.0.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libhistory.6.dylib (compatibility version 6.0.0, current version 6.3.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgmp.23.dylib (compatibility version 24.0.0, current version 24.3.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgmpxx.8.dylib (compatibility version 13.0.0, current version 13.3.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libbliss.2.dylib (compatibility version 3.0.0, current version 3.0.0)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1238.0.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.24.0)\n\t/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)\n```",
    "created_at": "2018-04-05T23:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342166",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:22 fbissey]:
> On OS X it looks like using the rpath sets the install name so you have a complaint about doing something that's already been done. Could you run `otool -L` on the `scip` executable to see what's already there?


Well, the `scip` executable is not even linked against the shared library `libscip`. But here you go:

```
$ otool -L /Users/mkoeppe/s/sage/some-sage-install-prefix/bin/scip 
/Users/mkoeppe/s/sage/some-sage-install-prefix/bin/scip:
	/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.8)
	/usr/lib/libedit.3.dylib (compatibility version 2.0.0, current version 3.0.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libhistory.6.dylib (compatibility version 6.0.0, current version 6.3.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgmp.23.dylib (compatibility version 24.0.0, current version 24.3.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgmpxx.8.dylib (compatibility version 13.0.0, current version 13.3.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libbliss.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1238.0.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.24.0)
	/Users/mkoeppe/s/sage/some-sage-install-prefix/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
```



---

archive/issue_comments_342167.json:
```json
{
    "body": "Well the complaint was never about `libscip` but about adding an rpath that was already set another way. I may have to look at the CMakeList.txt, something may be extra baggage in there.",
    "created_at": "2018-04-05T23:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342167",
    "user": "https://github.com/kiwifb"
}
```

Well the complaint was never about `libscip` but about adding an rpath that was already set another way. I may have to look at the CMakeList.txt, something may be extra baggage in there.



---

archive/issue_comments_342168.json:
```json
{
    "body": "`@`fbissey: can you install the package scipoptsuite using this ticket?",
    "created_at": "2018-04-06T00:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342168",
    "user": "https://github.com/mo271"
}
```

`@`fbissey: can you install the package scipoptsuite using this ticket?



---

archive/issue_comments_342169.json:
```json
{
    "body": "Replying to [comment:25 fbissey]:\n> Well the complaint was never about `libscip` but about adding an rpath that was already set another way. I may have to look at the CMakeList.txt, something may be extra baggage in there.\n\nI only showed you one of the errors, but there is also an identical one for the library.",
    "created_at": "2018-04-06T00:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342169",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:25 fbissey]:
> Well the complaint was never about `libscip` but about adding an rpath that was already set another way. I may have to look at the CMakeList.txt, something may be extra baggage in there.

I only showed you one of the errors, but there is also an identical one for the library.



---

archive/issue_comments_342170.json:
```json
{
    "body": "Replying to [comment:26 moritz]:\n> `@`fbissey: can you install the package scipoptsuite using this ticket?\n\n\nSorry, I haven't been testing the ticket, only providing technical input from my knowledge of OS X and cmake.",
    "created_at": "2018-04-06T02:12:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342170",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:26 moritz]:
> `@`fbissey: can you install the package scipoptsuite using this ticket?


Sorry, I haven't been testing the ticket, only providing technical input from my knowledge of OS X and cmake.



---

archive/issue_comments_342171.json:
```json
{
    "body": "#25109 upgrades cmake, perhaps this helps to fix these problems on Mac OS X.",
    "created_at": "2018-04-06T16:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342171",
    "user": "https://github.com/mkoeppe"
}
```

#25109 upgrades cmake, perhaps this helps to fix these problems on Mac OS X.



---

archive/issue_comments_342172.json:
```json
{
    "body": "Changing keywords from \"\" to \"IMA-PolyGeom\".",
    "created_at": "2018-04-08T20:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342172",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "IMA-PolyGeom".



---

archive/issue_comments_342173.json:
```json
{
    "body": "Installation works flawlessly on debian-stretch.",
    "created_at": "2018-04-11T21:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342173",
    "user": "https://github.com/jplab"
}
```

Installation works flawlessly on debian-stretch.



---

archive/issue_comments_342174.json:
```json
{
    "body": "also fine on archlinux!",
    "created_at": "2018-04-13T11:38:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342174",
    "user": "https://github.com/videlec"
}
```

also fine on archlinux!



---

archive/issue_comments_342175.json:
```json
{
    "body": "And I believe you want more dependencies like `bliss` and `mpir/gmp`.",
    "created_at": "2018-04-13T11:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342175",
    "user": "https://github.com/videlec"
}
```

And I believe you want more dependencies like `bliss` and `mpir/gmp`.



---

archive/issue_comments_342176.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-16T10:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342177.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-16T10:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342178.json:
```json
{
    "body": "Replying to [comment:29 mkoeppe]:\n> #25109 upgrades cmake, perhaps this helps to fix these problems on Mac OS X.\n\n\nI have put in a fix for the bad install name on Mac (but not the probably harmless warnings regarding the rpath). \nThe upgrade of cmake is not necessary (I backed it out again).",
    "created_at": "2018-04-16T10:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342178",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:29 mkoeppe]:
> #25109 upgrades cmake, perhaps this helps to fix these problems on Mac OS X.


I have put in a fix for the bad install name on Mac (but not the probably harmless warnings regarding the rpath). 
The upgrade of cmake is not necessary (I backed it out again).



---

archive/issue_comments_342179.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2018-04-16T11:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_342180.json:
```json
{
    "body": "I rebased and put the dependencies as suggested by Vincent. \n\nAlso, I reviewed the parts written by Matthias.",
    "created_at": "2018-04-16T11:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342180",
    "user": "https://github.com/mo271"
}
```

I rebased and put the dependencies as suggested by Vincent. 

Also, I reviewed the parts written by Matthias.



---

archive/issue_comments_342181.json:
```json
{
    "body": "cmake should be an order-only dependency. See my commit 737e606 that I put by mistake only on the branch for #21003",
    "created_at": "2018-04-16T11:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342181",
    "user": "https://github.com/mkoeppe"
}
```

cmake should be an order-only dependency. See my commit 737e606 that I put by mistake only on the branch for #21003



---

archive/issue_comments_342182.json:
```json
{
    "body": "For gmp/mpir you should use `$(MP_LIBRARY)` and not their names (that moreover do conflict: you can not install both gmp and mpir on a system).",
    "created_at": "2018-04-16T12:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342182",
    "user": "https://github.com/videlec"
}
```

For gmp/mpir you should use `$(MP_LIBRARY)` and not their names (that moreover do conflict: you can not install both gmp and mpir on a system).



---

archive/issue_comments_342183.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-16T12:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342183",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_342184.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-16T18:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342184",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342185.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-16T18:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342185",
    "user": "https://github.com/mo271"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_342186.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-16T18:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342186",
    "user": "https://github.com/mo271"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_342187.json:
```json
{
    "body": "When I run the checks with `./sage -f scipoptsuite -c`, it says:\n\n\n`44% tests passed, 23 tests failed out of 4`.\n\nI believe this is mainly due to the fact that IPOPT is not installed, but I am not sure.",
    "created_at": "2018-04-16T19:02:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342187",
    "user": "https://github.com/mo271"
}
```

When I run the checks with `./sage -f scipoptsuite -c`, it says:


`44% tests passed, 23 tests failed out of 4`.

I believe this is mainly due to the fact that IPOPT is not installed, but I am not sure.



---

archive/issue_comments_342188.json:
```json
{
    "body": "Replying to [comment:48 moritz]:\n> When I run the checks with `./sage -f scipoptsuite -c`, it says:\n> \n> \n> `44% tests passed, 23 tests failed out of 4`.\n> \n> I believe this is mainly due to the fact that IPOPT is not installed, but I am not sure.\n\n\nDon't you have a full log? You should always run the testsuite with verbosity at maximum.",
    "created_at": "2018-04-16T19:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342188",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:48 moritz]:
> When I run the checks with `./sage -f scipoptsuite -c`, it says:
> 
> 
> `44% tests passed, 23 tests failed out of 4`.
> 
> I believe this is mainly due to the fact that IPOPT is not installed, but I am not sure.


Don't you have a full log? You should always run the testsuite with verbosity at maximum.



---

archive/issue_comments_342189.json:
```json
{
    "body": "Attachment [scipoptsuitelog.txt](tarball://root/attachments/some-uuid/ticket24662/scipoptsuitelog.txt) by @mo271 created at 2018-04-16 20:42:38",
    "created_at": "2018-04-16T20:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342189",
    "user": "https://github.com/mo271"
}
```

Attachment [scipoptsuitelog.txt](tarball://root/attachments/some-uuid/ticket24662/scipoptsuitelog.txt) by @mo271 created at 2018-04-16 20:42:38



---

archive/issue_comments_342190.json:
```json
{
    "body": "I have a long full log.",
    "created_at": "2018-04-16T20:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342190",
    "user": "https://github.com/mo271"
}
```

I have a long full log.



---

archive/issue_comments_342191.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-16T21:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342191",
    "user": "https://github.com/mo271"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_342192.json:
```json
{
    "body": "I guess it is ok, at least scip is running. Perhaps we could do another automatic install of IPOPT in another ticket.",
    "created_at": "2018-04-16T21:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342192",
    "user": "https://github.com/mo271"
}
```

I guess it is ok, at least scip is running. Perhaps we could do another automatic install of IPOPT in another ticket.



---

archive/issue_comments_342193.json:
```json
{
    "body": "Looks fishy to me. We have segfault in free-ing pointers in several places. Some other fault may be due to something missing.",
    "created_at": "2018-04-16T21:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342193",
    "user": "https://github.com/kiwifb"
}
```

Looks fishy to me. We have segfault in free-ing pointers in several places. Some other fault may be due to something missing.



---

archive/issue_comments_342194.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-16T21:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342194",
    "user": "https://github.com/mo271"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_342195.json:
```json
{
    "body": "I will try to figure out what is going on and if the new dependencies are to blame.",
    "created_at": "2018-04-16T21:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342195",
    "user": "https://github.com/mo271"
}
```

I will try to figure out what is going on and if the new dependencies are to blame.



---

archive/issue_comments_342196.json:
```json
{
    "body": "We want to use `zlib` from sage rather than the system. Add `-DZLIB_ROOT=$SAGE_LOCAL` should do that trick. I am still investigating a few things.",
    "created_at": "2018-04-16T21:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342196",
    "user": "https://github.com/kiwifb"
}
```

We want to use `zlib` from sage rather than the system. Add `-DZLIB_ROOT=$SAGE_LOCAL` should do that trick. I am still investigating a few things.



---

archive/issue_comments_342197.json:
```json
{
    "body": "```\n1133/1133 Test #1133: applications-polyscip-tenfelde_podehl ............................................................   Passed    0.10 sec\n\n100% tests passed, 0 tests failed out of 1133\n```\n\nthis is a system install with pretty much the same stuff configured than you (optional: zlib, readline, gmp[real gmp not mpir] and bliss - no ipopt or criterion).\n\nI note that I have more tests than you (???).\n\nIn your log, the zlib identified in the tests is the one from sage (1.2.11) while the one spotted at configuration time was the system one (1.2.8) - that certainly could spell trouble.\n\nRunning tests after install really hurts. In any case you shouldn't have to do anything special to use the installed version of `scip` unless the testsuite has been badly written. cmake know to have different runtime path for tests and install.",
    "created_at": "2018-04-16T22:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342197",
    "user": "https://github.com/kiwifb"
}
```

```
1133/1133 Test #1133: applications-polyscip-tenfelde_podehl ............................................................   Passed    0.10 sec

100% tests passed, 0 tests failed out of 1133
```

this is a system install with pretty much the same stuff configured than you (optional: zlib, readline, gmp[real gmp not mpir] and bliss - no ipopt or criterion).

I note that I have more tests than you (???).

In your log, the zlib identified in the tests is the one from sage (1.2.11) while the one spotted at configuration time was the system one (1.2.8) - that certainly could spell trouble.

Running tests after install really hurts. In any case you shouldn't have to do anything special to use the installed version of `scip` unless the testsuite has been badly written. cmake know to have different runtime path for tests and install.



---

archive/issue_comments_342198.json:
```json
{
    "body": "Your config.log also shows that bliss and readline from the system rather than sage have been detected by cmake. This needs fixing.",
    "created_at": "2018-04-16T22:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342198",
    "user": "https://github.com/kiwifb"
}
```

Your config.log also shows that bliss and readline from the system rather than sage have been detected by cmake. This needs fixing.



---

archive/issue_comments_342199.json:
```json
{
    "body": "For readline set `-DReadline_ROOT_DIR=${SAGE_LOCAL}`. For bliss try `-DBLISS_DIR=${SAGE_ROOT}`.",
    "created_at": "2018-04-16T22:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342199",
    "user": "https://github.com/kiwifb"
}
```

For readline set `-DReadline_ROOT_DIR=${SAGE_LOCAL}`. For bliss try `-DBLISS_DIR=${SAGE_ROOT}`.



---

archive/issue_comments_342200.json:
```json
{
    "body": "Not sure how you managed things, `FindIPOPT.cmake` doesn't fail gracefully in case of missing IPOPT. Is there another patch somewhere or is it cmake version dependent (3.9.6 here)? In my first test directly on the system I used ccmake and didn't pay much attention to that error that was easily overcome from the menu. I had to pass `-DIPOPT=OFF` for the configuration to succeed from plain `cmake`.",
    "created_at": "2018-04-16T22:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342200",
    "user": "https://github.com/kiwifb"
}
```

Not sure how you managed things, `FindIPOPT.cmake` doesn't fail gracefully in case of missing IPOPT. Is there another patch somewhere or is it cmake version dependent (3.9.6 here)? In my first test directly on the system I used ccmake and didn't pay much attention to that error that was easily overcome from the menu. I had to pass `-DIPOPT=OFF` for the configuration to succeed from plain `cmake`.



---

archive/issue_comments_342201.json:
```json
{
    "body": "Replying to [comment:57 fbissey]:\n> For readline set `-DReadline_ROOT_DIR=${SAGE_LOCAL}`. For bliss try `-DBLISS_DIR=${SAGE_ROOT}`.\n\n\nSorry SAGE_LOCAL not SAGE_ROOT!",
    "created_at": "2018-04-16T22:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342201",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:57 fbissey]:
> For readline set `-DReadline_ROOT_DIR=${SAGE_LOCAL}`. For bliss try `-DBLISS_DIR=${SAGE_ROOT}`.


Sorry SAGE_LOCAL not SAGE_ROOT!



---

archive/issue_comments_342202.json:
```json
{
    "body": "So\n\n```\n(sage-sh) fbissey@moonloop:build$ cmake .. -DCMAKE_INSTALL_PREFIX=\"$SAGE_LOCAL\"/ -DCMAKE_VERBOSE_MAKEFILE=ON -DGMP_DIR=${SAGE_LOCAL} -DZLIB_ROOT=${SAGE_LOCAL} -DReadline_ROOT_DIR=${SAGE_LOCAL} -DBLISS_DIR=${SAGE_LOCAL} -DIPOPT=OFF\n-- The C compiler identification is Clang 5.0.1\n-- The CXX compiler identification is Clang 5.0.1\n-- Check for working C compiler: /usr/lib/llvm/5/bin/clang\n-- Check for working C compiler: /usr/lib/llvm/5/bin/clang -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /usr/lib/llvm/5/bin/clang++\n-- Check for working CXX compiler: /usr/lib/llvm/5/bin/clang++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Found BISON: /usr/bin/bison (found version \"3.0.4\") \n-- Found FLEX: /usr/bin/flex (found version \"2.6.4\") \n-- Found GMP: /home/fbissey/sandbox/git-fork/sage-clang5/local/include  \n-- Build type: Release\n-- Found ZLIB: /home/fbissey/sandbox/git-fork/sage-clang5/local/lib/libz.so (found version \"1.2.11\") \n-- Build shared libraries: ON\n-- Build type: Release\n-- LEGACY mode for old compilers: OFF\n-- Found Readline: /home/fbissey/sandbox/git-fork/sage-clang5/local/include  \n-- Found BLISS: /home/fbissey/sandbox/git-fork/sage-clang5/local/include  \n-- Looking for FE_DOWNWARD\n-- Looking for FE_DOWNWARD - found\n-- Could NOT find CRITERION (missing: CRITERION_LIBRARY CRITERION_INCLUDE_DIR) \n-- The following OPTIONAL packages have been found:\n\n * ZLIB\n * Readline\n * GMP\n * BLISS\n\n-- The following REQUIRED packages have been found:\n\n * BISON\n * FLEX\n * SOPLEX\n * SCIP\n\n-- The following OPTIONAL packages have not been found:\n\n * Criterion\n\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/fbissey/sandbox/git-fork/sage-clang5/scipoptsuite-5.0.1/build\n(sage-sh) fbissey@moonloop:build$ make -j8\n...\n(sage-sh) fbissey@moonloop:build$ make install\n...\n(sage-sh) fbissey@moonloop:build$ make -j8 test\n...\n1133/1133 Test #1133: applications-polyscip-tenfelde_podehl ............................................................   Passed    0.10 sec\n\n100% tests passed, 0 tests failed out of 1133\n\nTotal Test time (real) = 512.79 sec\n```\nNote: with cmake, one does `make test` not `make check` (that's autotools). That probably explains why you had not not quite 500 tests and I have 1133. `MAINFILE` was not useful in any way. I believe a number of your error were mismatched between detected system libraries and sage libraries found by runpath. The IPOPT detection problem needs to be addressed.",
    "created_at": "2018-04-16T23:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342202",
    "user": "https://github.com/kiwifb"
}
```

So

```
(sage-sh) fbissey@moonloop:build$ cmake .. -DCMAKE_INSTALL_PREFIX="$SAGE_LOCAL"/ -DCMAKE_VERBOSE_MAKEFILE=ON -DGMP_DIR=${SAGE_LOCAL} -DZLIB_ROOT=${SAGE_LOCAL} -DReadline_ROOT_DIR=${SAGE_LOCAL} -DBLISS_DIR=${SAGE_LOCAL} -DIPOPT=OFF
-- The C compiler identification is Clang 5.0.1
-- The CXX compiler identification is Clang 5.0.1
-- Check for working C compiler: /usr/lib/llvm/5/bin/clang
-- Check for working C compiler: /usr/lib/llvm/5/bin/clang -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /usr/lib/llvm/5/bin/clang++
-- Check for working CXX compiler: /usr/lib/llvm/5/bin/clang++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found BISON: /usr/bin/bison (found version "3.0.4") 
-- Found FLEX: /usr/bin/flex (found version "2.6.4") 
-- Found GMP: /home/fbissey/sandbox/git-fork/sage-clang5/local/include  
-- Build type: Release
-- Found ZLIB: /home/fbissey/sandbox/git-fork/sage-clang5/local/lib/libz.so (found version "1.2.11") 
-- Build shared libraries: ON
-- Build type: Release
-- LEGACY mode for old compilers: OFF
-- Found Readline: /home/fbissey/sandbox/git-fork/sage-clang5/local/include  
-- Found BLISS: /home/fbissey/sandbox/git-fork/sage-clang5/local/include  
-- Looking for FE_DOWNWARD
-- Looking for FE_DOWNWARD - found
-- Could NOT find CRITERION (missing: CRITERION_LIBRARY CRITERION_INCLUDE_DIR) 
-- The following OPTIONAL packages have been found:

 * ZLIB
 * Readline
 * GMP
 * BLISS

-- The following REQUIRED packages have been found:

 * BISON
 * FLEX
 * SOPLEX
 * SCIP

-- The following OPTIONAL packages have not been found:

 * Criterion

-- Configuring done
-- Generating done
-- Build files have been written to: /home/fbissey/sandbox/git-fork/sage-clang5/scipoptsuite-5.0.1/build
(sage-sh) fbissey@moonloop:build$ make -j8
...
(sage-sh) fbissey@moonloop:build$ make install
...
(sage-sh) fbissey@moonloop:build$ make -j8 test
...
1133/1133 Test #1133: applications-polyscip-tenfelde_podehl ............................................................   Passed    0.10 sec

100% tests passed, 0 tests failed out of 1133

Total Test time (real) = 512.79 sec
```
Note: with cmake, one does `make test` not `make check` (that's autotools). That probably explains why you had not not quite 500 tests and I have 1133. `MAINFILE` was not useful in any way. I believe a number of your error were mismatched between detected system libraries and sage libraries found by runpath. The IPOPT detection problem needs to be addressed.



---

archive/issue_comments_342203.json:
```json
{
    "body": "This is bad. `FindIPOPT.cmake` never defines `IPOPT_FOUND`. `scip/CMakeList.txt` relies on it being not false to enable `IPOPT`.\n\n```\nif(IPOPT_FOUND)\n    include_directories(${IPOPT_INCLUDE_DIRS})\n    #on debian IPOPT package needs this definition to work\n    add_definitions( -DHAVE_CSTDDEF )\n    set(NLPI_LIBRARIES ${IPOPT_LIBRARIES})\n    set(nlpi nlpi/nlpi_ipopt.cpp)\nelse()\n    set(nlpi nlpi/nlpi_ipopt_dummy.c)\nendif()\n```\nbecause `IPOPT_FOUND` is never set the behavior depends completely on camke implementation of unset variables. In its current state `IPOPT` detection is broken and can only work by luck or lack of it. This should be reported upstream.\n\nProposed patch\n\n```diff\ndiff --git a/scip/cmake/Modules/FindIPOPT.cmake b/scip/cmake/Modules/FindIPOPT.cmake\nindex 4d65120..00f4c34 100644\n--- a/scip/cmake/Modules/FindIPOPT.cmake\n+++ b/scip/cmake/Modules/FindIPOPT.cmake\n@@ -35,6 +35,7 @@\n # (To distribute this file outside of YCM, substitute the full\n #  License text for the above reference.)\n \n+SET(IPOPT_FOUND FALSE)\n \n if(NOT WIN32)\n   # On non Windows systems we use PkgConfig to find IPOPT\n@@ -62,6 +63,7 @@ if(NOT WIN32)\n                      PATHS ${_PC_IPOPT_LIBRARY_DIRS})\n         list(APPEND IPOPT_LIBRARIES ${${_LIBRARY}_PATH})\n       endforeach()\n+      set(IPOPT_FOUND TRUE)\n     else()\n       set(IPOPT_DEFINITIONS \"\")\n     endif()\n@@ -114,6 +116,7 @@ if(NOT WIN32)\n           endif()\n           mark_as_advanced(IPOPT_SEARCH_FOR_${LIB})\n         endforeach()\n+        set(IPOPT_FOUND TRUE)\n       endif()\n     endif()\n \n@@ -180,6 +183,7 @@ else()\n         endif()\n         mark_as_advanced(IPOPT_SEARCH_FOR_${LIB})\n       endforeach()\n+      set(IPOPT_FOUND TRUE)\n     endif()\n   endif()\n \n@@ -188,16 +192,18 @@ else()\n endif()\n \n # parse the version number\n-if(EXISTS ${IPOPT_INCLUDE_DIRS} )\n-  file(STRINGS ${IPOPT_INCLUDE_DIRS}/IpoptConfig.h CONFIGFILE)\n-\n-  foreach(STR ${CONFIGFILE})\n-    if(\"${STR}\" MATCHES \"^#define IPOPT_VERSION \")\n-      string(REGEX REPLACE \"#define IPOPT_VERSION \" \"\" IPOPT_VERSION ${STR})\n-      string(REGEX REPLACE \"\\\"\" \"\" IPOPT_VERSION ${IPOPT_VERSION})\n-    endif()\n-  endforeach()\n-  # MESSAGE(\"found Ipopt ${IPOPT_VERSION}\")\n+if(IPOPT_FOUND)\n+  if(EXISTS ${IPOPT_INCLUDE_DIRS} )\n+    file(STRINGS ${IPOPT_INCLUDE_DIRS}/IpoptConfig.h CONFIGFILE)\n+\n+    foreach(STR ${CONFIGFILE})\n+      if(\"${STR}\" MATCHES \"^#define IPOPT_VERSION \")\n+        string(REGEX REPLACE \"#define IPOPT_VERSION \" \"\" IPOPT_VERSION ${STR})\n+        string(REGEX REPLACE \"\\\"\" \"\" IPOPT_VERSION ${IPOPT_VERSION})\n+      endif()\n+    endforeach()\n+    # MESSAGE(\"found Ipopt ${IPOPT_VERSION}\")\n+  endif()\n endif()\n \n mark_as_advanced(IPOPT_INCLUDE_DIRS\n```",
    "created_at": "2018-04-17T02:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342203",
    "user": "https://github.com/kiwifb"
}
```

This is bad. `FindIPOPT.cmake` never defines `IPOPT_FOUND`. `scip/CMakeList.txt` relies on it being not false to enable `IPOPT`.

```
if(IPOPT_FOUND)
    include_directories(${IPOPT_INCLUDE_DIRS})
    #on debian IPOPT package needs this definition to work
    add_definitions( -DHAVE_CSTDDEF )
    set(NLPI_LIBRARIES ${IPOPT_LIBRARIES})
    set(nlpi nlpi/nlpi_ipopt.cpp)
else()
    set(nlpi nlpi/nlpi_ipopt_dummy.c)
endif()
```
because `IPOPT_FOUND` is never set the behavior depends completely on camke implementation of unset variables. In its current state `IPOPT` detection is broken and can only work by luck or lack of it. This should be reported upstream.

Proposed patch

```diff
diff --git a/scip/cmake/Modules/FindIPOPT.cmake b/scip/cmake/Modules/FindIPOPT.cmake
index 4d65120..00f4c34 100644
--- a/scip/cmake/Modules/FindIPOPT.cmake
+++ b/scip/cmake/Modules/FindIPOPT.cmake
@@ -35,6 +35,7 @@
 # (To distribute this file outside of YCM, substitute the full
 #  License text for the above reference.)
 
+SET(IPOPT_FOUND FALSE)
 
 if(NOT WIN32)
   # On non Windows systems we use PkgConfig to find IPOPT
@@ -62,6 +63,7 @@ if(NOT WIN32)
                      PATHS ${_PC_IPOPT_LIBRARY_DIRS})
         list(APPEND IPOPT_LIBRARIES ${${_LIBRARY}_PATH})
       endforeach()
+      set(IPOPT_FOUND TRUE)
     else()
       set(IPOPT_DEFINITIONS "")
     endif()
@@ -114,6 +116,7 @@ if(NOT WIN32)
           endif()
           mark_as_advanced(IPOPT_SEARCH_FOR_${LIB})
         endforeach()
+        set(IPOPT_FOUND TRUE)
       endif()
     endif()
 
@@ -180,6 +183,7 @@ else()
         endif()
         mark_as_advanced(IPOPT_SEARCH_FOR_${LIB})
       endforeach()
+      set(IPOPT_FOUND TRUE)
     endif()
   endif()
 
@@ -188,16 +192,18 @@ else()
 endif()
 
 # parse the version number
-if(EXISTS ${IPOPT_INCLUDE_DIRS} )
-  file(STRINGS ${IPOPT_INCLUDE_DIRS}/IpoptConfig.h CONFIGFILE)
-
-  foreach(STR ${CONFIGFILE})
-    if("${STR}" MATCHES "^#define IPOPT_VERSION ")
-      string(REGEX REPLACE "#define IPOPT_VERSION " "" IPOPT_VERSION ${STR})
-      string(REGEX REPLACE "\"" "" IPOPT_VERSION ${IPOPT_VERSION})
-    endif()
-  endforeach()
-  # MESSAGE("found Ipopt ${IPOPT_VERSION}")
+if(IPOPT_FOUND)
+  if(EXISTS ${IPOPT_INCLUDE_DIRS} )
+    file(STRINGS ${IPOPT_INCLUDE_DIRS}/IpoptConfig.h CONFIGFILE)
+
+    foreach(STR ${CONFIGFILE})
+      if("${STR}" MATCHES "^#define IPOPT_VERSION ")
+        string(REGEX REPLACE "#define IPOPT_VERSION " "" IPOPT_VERSION ${STR})
+        string(REGEX REPLACE "\"" "" IPOPT_VERSION ${IPOPT_VERSION})
+      endif()
+    endforeach()
+    # MESSAGE("found Ipopt ${IPOPT_VERSION}")
+  endif()
 endif()
 
 mark_as_advanced(IPOPT_INCLUDE_DIRS
```



---

archive/issue_comments_342204.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-17T10:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342204",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342205.json:
```json
{
    "body": "This now works fine for me, with all 1133 tests passed! \n\nHowever without IPOPT (I don't have it installed)",
    "created_at": "2018-04-17T10:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342205",
    "user": "https://github.com/mo271"
}
```

This now works fine for me, with all 1133 tests passed! 

However without IPOPT (I don't have it installed)



---

archive/issue_comments_342206.json:
```json
{
    "body": "If I have IPOPT installed if fails like this:\n\n```\n[scipoptsuite-5.0.1] gcc version 7.3.0 (Debian 7.3.0-16) \n[scipoptsuite-5.0.1] ****************************************************\n[scipoptsuite-5.0.1] Building scipoptsuite with cmake\n[scipoptsuite-5.0.1] -- The C compiler identification is GNU 7.3.0\n[scipoptsuite-5.0.1] -- The CXX compiler identification is GNU 7.3.0\n[scipoptsuite-5.0.1] -- Check for working C compiler: /home/moritz/sage/local/libexec/ccache/gcc\n[scipoptsuite-5.0.1] -- Check for working C compiler: /home/moritz/sage/local/libexec/ccache/gcc -- works\n[scipoptsuite-5.0.1] -- Detecting C compiler ABI info\n[scipoptsuite-5.0.1] -- Detecting C compiler ABI info - done\n[scipoptsuite-5.0.1] -- Detecting C compile features\n[scipoptsuite-5.0.1] -- Detecting C compile features - done\n[scipoptsuite-5.0.1] -- Check for working CXX compiler: /home/moritz/sage/local/libexec/ccache/g++\n[scipoptsuite-5.0.1] -- Check for working CXX compiler: /home/moritz/sage/local/libexec/ccache/g++ -- works\n[scipoptsuite-5.0.1] -- Detecting CXX compiler ABI info\n[scipoptsuite-5.0.1] -- Detecting CXX compiler ABI info - done\n[scipoptsuite-5.0.1] -- Detecting CXX compile features\n[scipoptsuite-5.0.1] -- Detecting CXX compile features - done\n[scipoptsuite-5.0.1] -- Found BISON: /usr/bin/bison (found version \"3.0.4\") \n[scipoptsuite-5.0.1] -- Found FLEX: /usr/bin/flex (found version \"2.6.4\") \n[scipoptsuite-5.0.1] -- Found GMP: /home/moritz/sage/local/include  \n[scipoptsuite-5.0.1] -- Build type: Release\n[scipoptsuite-5.0.1] -- Found ZLIB: /home/moritz/sage/local/lib/libz.so (found version \"1.2.11\") \n[scipoptsuite-5.0.1] -- Build shared libraries: ON\n[scipoptsuite-5.0.1] -- Build type: Release\n[scipoptsuite-5.0.1] -- LEGACY mode for old compilers: OFF\n[scipoptsuite-5.0.1] -- Found Readline: /home/moritz/sage/local/include  \n[scipoptsuite-5.0.1] -- Found BLISS: /home/moritz/sage/local/include  \n[scipoptsuite-5.0.1] CMake Error at scip/cmake/Modules/FindIPOPT.cmake:191 (if):\n[scipoptsuite-5.0.1]   if given arguments:\n[scipoptsuite-5.0.1] \n[scipoptsuite-5.0.1]     \"EXISTS\" \"/usr/local/include/coin\" \"/usr/local/include/coin/ThirdParty\"\n[scipoptsuite-5.0.1] \n[scipoptsuite-5.0.1]   Unknown arguments specified\n[scipoptsuite-5.0.1] Call Stack (most recent call first):\n[scipoptsuite-5.0.1]   scip/CMakeLists.txt:386 (find_package)\n\n```\n\nAnd this is also true with the patch suggested by fbissey (thanks for your efforts, by the way!)\nIt works fine with the flag `-DIPOPT=FALSE`.",
    "created_at": "2018-04-17T10:10:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342206",
    "user": "https://github.com/mo271"
}
```

If I have IPOPT installed if fails like this:

```
[scipoptsuite-5.0.1] gcc version 7.3.0 (Debian 7.3.0-16) 
[scipoptsuite-5.0.1] ****************************************************
[scipoptsuite-5.0.1] Building scipoptsuite with cmake
[scipoptsuite-5.0.1] -- The C compiler identification is GNU 7.3.0
[scipoptsuite-5.0.1] -- The CXX compiler identification is GNU 7.3.0
[scipoptsuite-5.0.1] -- Check for working C compiler: /home/moritz/sage/local/libexec/ccache/gcc
[scipoptsuite-5.0.1] -- Check for working C compiler: /home/moritz/sage/local/libexec/ccache/gcc -- works
[scipoptsuite-5.0.1] -- Detecting C compiler ABI info
[scipoptsuite-5.0.1] -- Detecting C compiler ABI info - done
[scipoptsuite-5.0.1] -- Detecting C compile features
[scipoptsuite-5.0.1] -- Detecting C compile features - done
[scipoptsuite-5.0.1] -- Check for working CXX compiler: /home/moritz/sage/local/libexec/ccache/g++
[scipoptsuite-5.0.1] -- Check for working CXX compiler: /home/moritz/sage/local/libexec/ccache/g++ -- works
[scipoptsuite-5.0.1] -- Detecting CXX compiler ABI info
[scipoptsuite-5.0.1] -- Detecting CXX compiler ABI info - done
[scipoptsuite-5.0.1] -- Detecting CXX compile features
[scipoptsuite-5.0.1] -- Detecting CXX compile features - done
[scipoptsuite-5.0.1] -- Found BISON: /usr/bin/bison (found version "3.0.4") 
[scipoptsuite-5.0.1] -- Found FLEX: /usr/bin/flex (found version "2.6.4") 
[scipoptsuite-5.0.1] -- Found GMP: /home/moritz/sage/local/include  
[scipoptsuite-5.0.1] -- Build type: Release
[scipoptsuite-5.0.1] -- Found ZLIB: /home/moritz/sage/local/lib/libz.so (found version "1.2.11") 
[scipoptsuite-5.0.1] -- Build shared libraries: ON
[scipoptsuite-5.0.1] -- Build type: Release
[scipoptsuite-5.0.1] -- LEGACY mode for old compilers: OFF
[scipoptsuite-5.0.1] -- Found Readline: /home/moritz/sage/local/include  
[scipoptsuite-5.0.1] -- Found BLISS: /home/moritz/sage/local/include  
[scipoptsuite-5.0.1] CMake Error at scip/cmake/Modules/FindIPOPT.cmake:191 (if):
[scipoptsuite-5.0.1]   if given arguments:
[scipoptsuite-5.0.1] 
[scipoptsuite-5.0.1]     "EXISTS" "/usr/local/include/coin" "/usr/local/include/coin/ThirdParty"
[scipoptsuite-5.0.1] 
[scipoptsuite-5.0.1]   Unknown arguments specified
[scipoptsuite-5.0.1] Call Stack (most recent call first):
[scipoptsuite-5.0.1]   scip/CMakeLists.txt:386 (find_package)

```

And this is also true with the patch suggested by fbissey (thanks for your efforts, by the way!)
It works fine with the flag `-DIPOPT=FALSE`.



---

archive/issue_comments_342207.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-17T10:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342208.json:
```json
{
    "body": "I did some test runs with ipopt installed or not after patching `FindIPOPT.cmake`. I tested no IPOPT, IPOTP-3.11.9 and 3.12.9. Detection worked as expected in all cases (no IPOTPT, version to low since 3.12.0 is minimum, and enabled with 3.12.9). But coinor packages can be messy so I am not sure all kinds of installs are properly supported. They may need hints like bliss, readline and zlib.\n\nOn a further note while it compiled all right with my install of IPOPT 3.12.9, numerous tests failed then. I am guessing my version was too high again.\n\nLastly the spkg-install on this branch is a bit messy we should standardise all the instances of SAGE_LOCAL in the cmake call to `\"${SAGE_LOCAL}\"` and not three different syntax.",
    "created_at": "2018-04-17T10:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342208",
    "user": "https://github.com/kiwifb"
}
```

I did some test runs with ipopt installed or not after patching `FindIPOPT.cmake`. I tested no IPOPT, IPOTP-3.11.9 and 3.12.9. Detection worked as expected in all cases (no IPOTPT, version to low since 3.12.0 is minimum, and enabled with 3.12.9). But coinor packages can be messy so I am not sure all kinds of installs are properly supported. They may need hints like bliss, readline and zlib.

On a further note while it compiled all right with my install of IPOPT 3.12.9, numerous tests failed then. I am guessing my version was too high again.

Lastly the spkg-install on this branch is a bit messy we should standardise all the instances of SAGE_LOCAL in the cmake call to `"${SAGE_LOCAL}"` and not three different syntax.



---

archive/issue_comments_342209.json:
```json
{
    "body": "Here is a suggestion: We simply pass `-DIPOPT=FALSE` and don't worry about including IPOPT. This can then be fixed as soon as a new scipoptsuite version comes out, where the detection of IPOPT with cmake is fixed.",
    "created_at": "2018-04-17T10:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342209",
    "user": "https://github.com/mo271"
}
```

Here is a suggestion: We simply pass `-DIPOPT=FALSE` and don't worry about including IPOPT. This can then be fixed as soon as a new scipoptsuite version comes out, where the detection of IPOPT with cmake is fixed.



---

archive/issue_comments_342210.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-04-17T10:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_342211.json:
```json
{
    "body": "Replying to [comment:68 moritz]:\n> Here is a suggestion: We simply pass `-DIPOPT=FALSE` and don't worry about including IPOPT. This can then be fixed as soon as a new scipoptsuite version comes out, where the detection of IPOPT with cmake is fixed. \n\n\nI am fine with that. Your install in `/usr/local` cannot be processed properly by the current `FindIPOPT.cmake`. Something more sophisticated needs to be done. I have some ideas but that's getting involved.",
    "created_at": "2018-04-17T10:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342211",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:68 moritz]:
> Here is a suggestion: We simply pass `-DIPOPT=FALSE` and don't worry about including IPOPT. This can then be fixed as soon as a new scipoptsuite version comes out, where the detection of IPOPT with cmake is fixed. 


I am fine with that. Your install in `/usr/local` cannot be processed properly by the current `FindIPOPT.cmake`. Something more sophisticated needs to be done. I have some ideas but that's getting involved.



---

archive/issue_comments_342212.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-17T10:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342212",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342213.json:
```json
{
    "body": "I accidentally pushed changes from #21003 in between. Now it is back on the correct branch",
    "created_at": "2018-04-17T10:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342213",
    "user": "https://github.com/mo271"
}
```

I accidentally pushed changes from #21003 in between. Now it is back on the correct branch



---

archive/issue_comments_342214.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-17T10:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342214",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342215.json:
```json
{
    "body": "Replying to [comment:70 fbissey]:\n> Replying to [comment:68 moritz]:\n> > Here is a suggestion: We simply pass `-DIPOPT=FALSE` and don't worry about including IPOPT. This can then be fixed as soon as a new scipoptsuite version comes out, where the detection of IPOPT with cmake is fixed. \n\n> \n> I am fine with that. Your install in `/usr/local` cannot be processed properly by the current `FindIPOPT.cmake`. Something more sophisticated needs to be done. I have some ideas but that's getting involved.\n\nOk, great! Thats what I did!\n\n---\nNew commits:",
    "created_at": "2018-04-17T10:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342215",
    "user": "https://github.com/mo271"
}
```

Replying to [comment:70 fbissey]:
> Replying to [comment:68 moritz]:
> > Here is a suggestion: We simply pass `-DIPOPT=FALSE` and don't worry about including IPOPT. This can then be fixed as soon as a new scipoptsuite version comes out, where the detection of IPOPT with cmake is fixed. 

> 
> I am fine with that. Your install in `/usr/local` cannot be processed properly by the current `FindIPOPT.cmake`. Something more sophisticated needs to be done. I have some ideas but that's getting involved.

Ok, great! Thats what I did!

---
New commits:



---

archive/issue_comments_342216.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-17T10:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342216",
    "user": "https://github.com/mo271"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_342217.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-17T10:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342217",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_342218.json:
```json
{
    "body": "I believe it is good to go.",
    "created_at": "2018-04-17T10:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342218",
    "user": "https://github.com/kiwifb"
}
```

I believe it is good to go.



---

archive/issue_events_062095.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:26:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24425#event-62095"
}
```



---

archive/issue_comments_342219.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24425#issuecomment-342219",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
