# Issue 14441: cvxopt 1.1.6.p0 fails to build with SAGE_SPKG_INSTALL_DOCS=yes

archive/issues_014441.json:
```json
{
    "body": "Assignee: @nexttime\n\nCC:  @dimpase @vbraun @haraldschilly mvngu\n\nKeywords: spkg\n\nThis is because the pre-built HTML docs have moved in cvxopt 1.1.6.\n\n`.p1` spkg on the way...\n\nIssue created by migration from https://trac.sagemath.org/ticket/14645\n\n",
    "created_at": "2013-05-25T22:53:33Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "cvxopt 1.1.6.p0 fails to build with SAGE_SPKG_INSTALL_DOCS=yes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14441",
    "user": "https://github.com/strogdon"
}
```
Assignee: @nexttime

CC:  @dimpase @vbraun @haraldschilly mvngu

Keywords: spkg

This is because the pre-built HTML docs have moved in cvxopt 1.1.6.

`.p1` spkg on the way...

Issue created by migration from https://trac.sagemath.org/ticket/14645





---

archive/issue_comments_182386.json:
```json
{
    "body": "Attachment [cvxopt-1.1.6.p0-p1.diff](tarball://root/attachments/some-uuid/ticket14645/cvxopt-1.1.6.p0-p1.diff) by @nexttime created at 2013-05-25 23:53:47\n\nDiff between the `.p0` and the `.p1`.  For reference / review only.",
    "created_at": "2013-05-25T23:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182386",
    "user": "https://github.com/nexttime"
}
```

Attachment [cvxopt-1.1.6.p0-p1.diff](tarball://root/attachments/some-uuid/ticket14645/cvxopt-1.1.6.p0-p1.diff) by @nexttime created at 2013-05-25 23:53:47

Diff between the `.p0` and the `.p1`.  For reference / review only.



---

archive/issue_comments_182387.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-05-26T00:00:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182387",
    "user": "https://github.com/nexttime"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_182388.json:
```json
{
    "body": "Replying to [ticket:14645 leif]:\n>  * Run more tests in `spkg-check` (i.e., those in `src/examples/book/` as well).\n\nP.S.:  Tested with `SAGE_CHECK=yes` on Ubuntu 10.04.4 x86 and x86_64 (FSF GCC 4.7.2 and 4.8.0, respectively).",
    "created_at": "2013-05-26T00:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182388",
    "user": "https://github.com/nexttime"
}
```

Replying to [ticket:14645 leif]:
>  * Run more tests in `spkg-check` (i.e., those in `src/examples/book/` as well).

P.S.:  Tested with `SAGE_CHECK=yes` on Ubuntu 10.04.4 x86 and x86_64 (FSF GCC 4.7.2 and 4.8.0, respectively).



---

archive/issue_comments_182389.json:
```json
{
    "body": "tested with `SAGE_CHECK=yes` on Sage 5.9 OSX10.6.8 (native lapack/blas), all good. \n\nI understand that cvxopt docs not integrated into Sage Reference manual, but are installed in `SAGE_LOCAL/share/`. Wouldn't it be good to add a link somewhere in Reference manual to `SAGE_LOCAL/share/` ? Otherwise it's quite hard to find, unless you know something either not really documented, IMHO.\n\nHow does one force doc building/installing? I tried \n\n```\nSAGE_SPKG_INSTALL_DOCS=yes sage -f cvxopt-1.1.6.p1.spkg\n```\n\nto no avail.",
    "created_at": "2013-05-26T02:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182389",
    "user": "https://github.com/dimpase"
}
```

tested with `SAGE_CHECK=yes` on Sage 5.9 OSX10.6.8 (native lapack/blas), all good. 

I understand that cvxopt docs not integrated into Sage Reference manual, but are installed in `SAGE_LOCAL/share/`. Wouldn't it be good to add a link somewhere in Reference manual to `SAGE_LOCAL/share/` ? Otherwise it's quite hard to find, unless you know something either not really documented, IMHO.

How does one force doc building/installing? I tried 

```
SAGE_SPKG_INSTALL_DOCS=yes sage -f cvxopt-1.1.6.p1.spkg
```

to no avail.



---

archive/issue_comments_182390.json:
```json
{
    "body": "Replying to [comment:3 dimpase]: \n> I understand that cvxopt docs not integrated into Sage Reference manual, but are installed in `SAGE_LOCAL/share/`. Wouldn't it be good to add a link somewhere in Reference manual to `SAGE_LOCAL/share/` ? Otherwise it's quite hard to find, unless you know something either not really documented, IMHO.\n> \n> How does one force doc building/installing? I tried \n> {{{\n> SAGE_SPKG_INSTALL_DOCS=yes sage -f cvxopt-1.1.6.p1.spkg\n> }}}\n> to no avail.\n\n?  They're in `$SAGE_ROOT/local/share/doc/cvxopt/html/`, indeed probably hard to find ...",
    "created_at": "2013-05-26T03:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182390",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:3 dimpase]: 
> I understand that cvxopt docs not integrated into Sage Reference manual, but are installed in `SAGE_LOCAL/share/`. Wouldn't it be good to add a link somewhere in Reference manual to `SAGE_LOCAL/share/` ? Otherwise it's quite hard to find, unless you know something either not really documented, IMHO.
> 
> How does one force doc building/installing? I tried 
> {{{
> SAGE_SPKG_INSTALL_DOCS=yes sage -f cvxopt-1.1.6.p1.spkg
> }}}
> to no avail.

?  They're in `$SAGE_ROOT/local/share/doc/cvxopt/html/`, indeed probably hard to find ...



---

archive/issue_comments_182391.json:
```json
{
    "body": "Replying to [comment:4 leif]:\n> Replying to [comment:3 dimpase]: \n> > I understand that cvxopt docs not integrated into Sage Reference manual, but are installed in `SAGE_LOCAL/share/`. Wouldn't it be good to add a link somewhere in Reference manual to `SAGE_LOCAL/share/` ? Otherwise it's quite hard to find, unless you know something either not really documented, IMHO.\n> > \n> > How does one force doc building/installing? I tried \n> > {{{\n> > SAGE_SPKG_INSTALL_DOCS=yes sage -f cvxopt-1.1.6.p1.spkg\n> > }}}\n> > to no avail.\n> \n> ?  They're in `$SAGE_ROOT/local/share/doc/cvxopt/html/`, indeed probably hard to find ...\n\nI looked at the install log, and it didn't say anything :-)\nPlease add a message saying that docs were installed (and where to)...",
    "created_at": "2013-05-26T04:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182391",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:4 leif]:
> Replying to [comment:3 dimpase]: 
> > I understand that cvxopt docs not integrated into Sage Reference manual, but are installed in `SAGE_LOCAL/share/`. Wouldn't it be good to add a link somewhere in Reference manual to `SAGE_LOCAL/share/` ? Otherwise it's quite hard to find, unless you know something either not really documented, IMHO.
> > 
> > How does one force doc building/installing? I tried 
> > {{{
> > SAGE_SPKG_INSTALL_DOCS=yes sage -f cvxopt-1.1.6.p1.spkg
> > }}}
> > to no avail.
> 
> ?  They're in `$SAGE_ROOT/local/share/doc/cvxopt/html/`, indeed probably hard to find ...

I looked at the install log, and it didn't say anything :-)
Please add a message saying that docs were installed (and where to)...



---

archive/issue_comments_182392.json:
```json
{
    "body": "Replying to [comment:3 dimpase]:\n\n>Wouldn't it be good to add a link somewhere in Reference manual to `SAGE_LOCAL/share/` ? \n\nrather, to `SAGE_LOCAL/share/doc/`, The main problem is how to add a relative link. One can in principle do `../../../../...../local/share/doc/`\nsomewhere in `doc/<LANG>/website/templates/index.html`, but I'm not sure it's a good idea (IMHO the idea to put any docs in `$SAGE_LOCAL/share/doc/` is not so good... )\n\nPerhaps at least there should be a symbolic link `sage/doc/local` pointing there, although I'm not sure how well this works with webservers. \n\nIf this is OK then I can create a patch (hmm, but how? Does hg understand symbolic links? Or it should be in some script, this link creation?)",
    "created_at": "2013-05-26T05:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182392",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:3 dimpase]:

>Wouldn't it be good to add a link somewhere in Reference manual to `SAGE_LOCAL/share/` ? 

rather, to `SAGE_LOCAL/share/doc/`, The main problem is how to add a relative link. One can in principle do `../../../../...../local/share/doc/`
somewhere in `doc/<LANG>/website/templates/index.html`, but I'm not sure it's a good idea (IMHO the idea to put any docs in `$SAGE_LOCAL/share/doc/` is not so good... )

Perhaps at least there should be a symbolic link `sage/doc/local` pointing there, although I'm not sure how well this works with webservers. 

If this is OK then I can create a patch (hmm, but how? Does hg understand symbolic links? Or it should be in some script, this link creation?)



---

archive/issue_comments_182393.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2013-05-26T05:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182393",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_182394.json:
```json
{
    "body": "Harald, as this is www-related (docs structure), could you comment please?",
    "created_at": "2013-05-26T05:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182394",
    "user": "https://github.com/dimpase"
}
```

Harald, as this is www-related (docs structure), could you comment please?



---

archive/issue_comments_182395.json:
```json
{
    "body": "Uhm, I can't really follow you, sorry \u2026 also, the website is rather independent from what you might want to do inside Sage. Is there anything already existing that's similar to what you try to do here? Also, the documentation is usually maintained by minh, I've CCed him.\n\nWhat I found is this dedicated page: http://www.sagemath.org/doc/numerical_sage/cvxopt.html",
    "created_at": "2013-05-26T08:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182395",
    "user": "https://github.com/haraldschilly"
}
```

Uhm, I can't really follow you, sorry … also, the website is rather independent from what you might want to do inside Sage. Is there anything already existing that's similar to what you try to do here? Also, the documentation is usually maintained by minh, I've CCed him.

What I found is this dedicated page: http://www.sagemath.org/doc/numerical_sage/cvxopt.html



---

archive/issue_comments_182396.json:
```json
{
    "body": "The docs should link to upstream (http://cvxopt.org) and not to a local file that isn't even installed unless you build with `SAGE_SPKG_INSTALL_DOCS=yes`. Also, the link in http://www.sagemath.org/doc/numerical_sage/cvxopt.html is broken.",
    "created_at": "2013-05-26T10:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182396",
    "user": "https://github.com/vbraun"
}
```

The docs should link to upstream (http://cvxopt.org) and not to a local file that isn't even installed unless you build with `SAGE_SPKG_INSTALL_DOCS=yes`. Also, the link in http://www.sagemath.org/doc/numerical_sage/cvxopt.html is broken.



---

archive/issue_comments_182397.json:
```json
{
    "body": "Replying to [comment:9 vbraun]:\n> The docs should link to upstream (http://cvxopt.org) and not to a local file that isn't even installed unless you build with `SAGE_SPKG_INSTALL_DOCS=yes`. Also, the link in http://www.sagemath.org/doc/numerical_sage/cvxopt.html is broken.\n\nwe can have `SAGE_LOCAL/share/doc/cvxopt/index.html` redirecting to  `cvxopt.org` by default, and overwrite it with the local docs if `SAGE_SPKG_INSTALL_DOCS=yes` during the cvxopt installation.\n\nBut there is much more stuff there than just cvxopt docs. E.g. I have currently, on Sage 5.9, \n\n```\nNTL\t\t\t\tipython\t\t\t\tppl\ncvxopt\t\t\t\tmpfr\t\t\t\tpwl\neclib\t\t\t\tnetworkx-1.7.dev_20130506064154\tsagetex\n```\n\nand again these docs are largely lost to a typical user. I wonder why are they (except cvxopt, that was explicitly installed with `SAGE_SPKG_INSTALL_DOCS` on) \nthere in the first place. It looks like the other packages ignore the value of `SAGE_SPKG_INSTALL_DOCS`, no?",
    "created_at": "2013-05-26T10:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182397",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:9 vbraun]:
> The docs should link to upstream (http://cvxopt.org) and not to a local file that isn't even installed unless you build with `SAGE_SPKG_INSTALL_DOCS=yes`. Also, the link in http://www.sagemath.org/doc/numerical_sage/cvxopt.html is broken.

we can have `SAGE_LOCAL/share/doc/cvxopt/index.html` redirecting to  `cvxopt.org` by default, and overwrite it with the local docs if `SAGE_SPKG_INSTALL_DOCS=yes` during the cvxopt installation.

But there is much more stuff there than just cvxopt docs. E.g. I have currently, on Sage 5.9, 

```
NTL				ipython				ppl
cvxopt				mpfr				pwl
eclib				networkx-1.7.dev_20130506064154	sagetex
```

and again these docs are largely lost to a typical user. I wonder why are they (except cvxopt, that was explicitly installed with `SAGE_SPKG_INSTALL_DOCS` on) 
there in the first place. It looks like the other packages ignore the value of `SAGE_SPKG_INSTALL_DOCS`, no?



---

archive/issue_comments_182398.json:
```json
{
    "body": "Replying to [comment:8 schilly]:\n> Uhm, I can't really follow you, sorry \u2026 also, the website is rather independent from what you might want to do inside Sage. \noops, I meant the setup when the sagenb server is run on a remote host (rather than on localhost); then the docs are served somehow via a web interface, isn't it?\n\nGenerally speaking, do  Unix webservers allow symbolic links in the docs they serve?",
    "created_at": "2013-05-26T10:20:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182398",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:8 schilly]:
> Uhm, I can't really follow you, sorry … also, the website is rather independent from what you might want to do inside Sage. 
oops, I meant the setup when the sagenb server is run on a remote host (rather than on localhost); then the docs are served somehow via a web interface, isn't it?

Generally speaking, do  Unix webservers allow symbolic links in the docs they serve?



---

archive/issue_comments_182399.json:
```json
{
    "body": "Any feature requests beyond installing cvxopt should go to a different ticket.\n\nSome packages just install their docs by default. Unfortunately, correct usage of autotools often eludes upsteam, requiring manual copying of documentation if desired. The latter is only attempted if `SAGE_SPKG_INSTALL_DOCS` is set.\n\nApache disallows symlinks by default. Not that that would help with http://sagemath.org, there we serve only the Sage docs and not a complete Sage installation afaik.",
    "created_at": "2013-05-26T10:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182399",
    "user": "https://github.com/vbraun"
}
```

Any feature requests beyond installing cvxopt should go to a different ticket.

Some packages just install their docs by default. Unfortunately, correct usage of autotools often eludes upsteam, requiring manual copying of documentation if desired. The latter is only attempted if `SAGE_SPKG_INSTALL_DOCS` is set.

Apache disallows symlinks by default. Not that that would help with http://sagemath.org, there we serve only the Sage docs and not a complete Sage installation afaik.



---

archive/issue_comments_182400.json:
```json
{
    "body": "Replying to [comment:11 dimpase]:\n> oops, I meant the setup when the sagenb server is run on a remote host (rather than on localhost); then the docs are served somehow via a web interface, isn't it?\n\nyes, but i don't know enough about sagenb/notebook server to give you any answer, sorry. there are also related issues, e.g. that the sagenb/notebook server doesn't show documentation in other languages \u2013 but that's in my eyes outside of the scope of this ticket.\n\n> Generally speaking, do  Unix webservers allow symbolic links in the docs they serve?\n\nyes and no. the documentation on the sage website is served as static file via apache. Following symlinks is explicitly enabled and it's basically just a copy/paste of the output files.\nWhat the notebook server does is different, because it serves the files via its own server \u2013 there is also this live-documentation served via /doc/live/\u2026 \n\nSo, in conclusion, there are (at least?) three independent things moving around:\n* local installation of Sage\n* Sage Documentation at sagemath.org/doc (that's where mvgnu and I can weight in, we also have our own script that updates sagemath.org/help.html) \n* sagenb.org [and others] /doc/live/ <- and the menu that's in the help popup window.",
    "created_at": "2013-05-26T10:39:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182400",
    "user": "https://github.com/haraldschilly"
}
```

Replying to [comment:11 dimpase]:
> oops, I meant the setup when the sagenb server is run on a remote host (rather than on localhost); then the docs are served somehow via a web interface, isn't it?

yes, but i don't know enough about sagenb/notebook server to give you any answer, sorry. there are also related issues, e.g. that the sagenb/notebook server doesn't show documentation in other languages – but that's in my eyes outside of the scope of this ticket.

> Generally speaking, do  Unix webservers allow symbolic links in the docs they serve?

yes and no. the documentation on the sage website is served as static file via apache. Following symlinks is explicitly enabled and it's basically just a copy/paste of the output files.
What the notebook server does is different, because it serves the files via its own server – there is also this live-documentation served via /doc/live/… 

So, in conclusion, there are (at least?) three independent things moving around:
* local installation of Sage
* Sage Documentation at sagemath.org/doc (that's where mvgnu and I can weight in, we also have our own script that updates sagemath.org/help.html) 
* sagenb.org [and others] /doc/live/ <- and the menu that's in the help popup window.



---

archive/issue_comments_182401.json:
```json
{
    "body": "Replying to [comment:9 vbraun]:\n> The docs should link to upstream (http://cvxopt.org) and not to a local file that isn't even installed unless you build with `SAGE_SPKG_INSTALL_DOCS=yes`. \n\nactually my idea about the main index.html is not listing individual packages, but just a general link to  `SAGE_LOCAL/share/doc` for \"more stuff\"... OK, I will open a separate ticket, and set this one to positive review, as soon as my request for a message saying that docs were installed (and where to) in `spkg-install` is honoured.\n\nPS. I've opened #14646 to deal with the main index.html, etc.",
    "created_at": "2013-05-26T10:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182401",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:9 vbraun]:
> The docs should link to upstream (http://cvxopt.org) and not to a local file that isn't even installed unless you build with `SAGE_SPKG_INSTALL_DOCS=yes`. 

actually my idea about the main index.html is not listing individual packages, but just a general link to  `SAGE_LOCAL/share/doc` for "more stuff"... OK, I will open a separate ticket, and set this one to positive review, as soon as my request for a message saying that docs were installed (and where to) in `spkg-install` is honoured.

PS. I've opened #14646 to deal with the main index.html, etc.



---

archive/issue_comments_182402.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-05-26T10:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182402",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_182403.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-05-26T10:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182403",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_182404.json:
```json
{
    "body": "Replying to [comment:14 dimpase]:\n> OK, I will open a separate ticket, and set this one to positive review, as soon as my request for a message saying that docs were installed (and where to) in `spkg-install` is honoured.\n\nI was actually first going to add that, but then did not for a couple of reasons:\n\n* I hate absolute paths there (as have unfortunately been added back to (additional) messages in the \"main\" docbuilding, although the messages there are even worse, since they claim the documents had been built even upon errors), but was 100% sure at least some would complain about a relative path in the message.\n\n* Most other packages don't.\n\n* Then I'd also added a message in case `SAGE_SPKG_INSTALL_DOCS!=yes`, telling that the [HTML] docs have not been installed (and why), and how one can change that, which is pretty redundant, as that *should be* the same for all spkgs.\n\nOrthogonal to that:\n\nShould I delete previous (potentially outdated) docs regardless of `SAGE_SPKG_INSTALL_DOCS`, which could probably be considered unexpected behaviour?  (E.g. if one reinstalls an spkg just with different flags, or in order to run its test suite, but forgets to set `SAGE_SPKG_INSTALL_DOCS` to the previous setting?  Does anyone use that variable on a per-package basis?  To me it seems a few people have it set in their shell rcs, and most people don't use it, probably just because they don't know about... B) )",
    "created_at": "2013-05-26T18:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182404",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:14 dimpase]:
> OK, I will open a separate ticket, and set this one to positive review, as soon as my request for a message saying that docs were installed (and where to) in `spkg-install` is honoured.

I was actually first going to add that, but then did not for a couple of reasons:

* I hate absolute paths there (as have unfortunately been added back to (additional) messages in the "main" docbuilding, although the messages there are even worse, since they claim the documents had been built even upon errors), but was 100% sure at least some would complain about a relative path in the message.

* Most other packages don't.

* Then I'd also added a message in case `SAGE_SPKG_INSTALL_DOCS!=yes`, telling that the [HTML] docs have not been installed (and why), and how one can change that, which is pretty redundant, as that *should be* the same for all spkgs.

Orthogonal to that:

Should I delete previous (potentially outdated) docs regardless of `SAGE_SPKG_INSTALL_DOCS`, which could probably be considered unexpected behaviour?  (E.g. if one reinstalls an spkg just with different flags, or in order to run its test suite, but forgets to set `SAGE_SPKG_INSTALL_DOCS` to the previous setting?  Does anyone use that variable on a per-package basis?  To me it seems a few people have it set in their shell rcs, and most people don't use it, probably just because they don't know about... B) )



---

archive/issue_comments_182405.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2013-05-26T18:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182405",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_182406.json:
```json
{
    "body": "Replying to [comment:16 leif]:\n> Replying to [comment:14 dimpase]:\n> > OK, I will open a separate ticket, and set this one to positive review, as soon as my request for a message saying that docs were installed (and where to) in `spkg-install` is honoured.\n> \n> I was actually first going to add that, but then did not for a couple of reasons:\n> \n>  * I hate absolute paths there (as have unfortunately been added back to (additional) messages in the \"main\" docbuilding, although the messages there are even worse, since they claim the documents had been built even upon errors), but was 100% sure at least some would complain about a relative path in the message.\n\nwell, how about just saying \"installed in SAGE_SHARE/doc\" ?\n \n> \n>  * Most other packages don't.\n\nfix them :\u2013) (not on this ticket...)\n\n> \n>  * Then I'd also added a message in case `SAGE_SPKG_INSTALL_DOCS!=yes`, telling that the [HTML] docs have not been installed (and why), and how one can change that, which is pretty redundant, as that *should be* the same for all spkgs.\n> \n> Orthogonal to that:\n> \n> Should I delete previous (potentially outdated) docs regardless of `SAGE_SPKG_INSTALL_DOCS`, which could probably be considered unexpected behaviour?  (E.g. if one reinstalls an spkg just with different flags, or in order to run its test suite, but forgets to set `SAGE_SPKG_INSTALL_DOCS` to the previous setting?  Does anyone use that variable on a per-package basis?  To me it seems a few people have it set in their shell rcs, and most people don't use it, probably just because they don't know about... B) )\n>  \nif they are in \"wrong\" location, yes. Otherwise, that's probably too much trouble --- although I as proposed on #14646, there ought to be a default `SAGE_SHARE/doc/cvxopt/index.html` forwarding to cvxopt website, so, ideally, `SAGE_SPKG_INSTALL_DOCS!=yes` would mean putting this forwarding back in place...  Well, even more ideally, this functionality shouldn't be on the `spkg-install` level, but above, at `sage -i` level.",
    "created_at": "2013-05-26T20:43:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182406",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:16 leif]:
> Replying to [comment:14 dimpase]:
> > OK, I will open a separate ticket, and set this one to positive review, as soon as my request for a message saying that docs were installed (and where to) in `spkg-install` is honoured.
> 
> I was actually first going to add that, but then did not for a couple of reasons:
> 
>  * I hate absolute paths there (as have unfortunately been added back to (additional) messages in the "main" docbuilding, although the messages there are even worse, since they claim the documents had been built even upon errors), but was 100% sure at least some would complain about a relative path in the message.

well, how about just saying "installed in SAGE_SHARE/doc" ?
 
> 
>  * Most other packages don't.

fix them :–) (not on this ticket...)

> 
>  * Then I'd also added a message in case `SAGE_SPKG_INSTALL_DOCS!=yes`, telling that the [HTML] docs have not been installed (and why), and how one can change that, which is pretty redundant, as that *should be* the same for all spkgs.
> 
> Orthogonal to that:
> 
> Should I delete previous (potentially outdated) docs regardless of `SAGE_SPKG_INSTALL_DOCS`, which could probably be considered unexpected behaviour?  (E.g. if one reinstalls an spkg just with different flags, or in order to run its test suite, but forgets to set `SAGE_SPKG_INSTALL_DOCS` to the previous setting?  Does anyone use that variable on a per-package basis?  To me it seems a few people have it set in their shell rcs, and most people don't use it, probably just because they don't know about... B) )
>  
if they are in "wrong" location, yes. Otherwise, that's probably too much trouble --- although I as proposed on #14646, there ought to be a default `SAGE_SHARE/doc/cvxopt/index.html` forwarding to cvxopt website, so, ideally, `SAGE_SPKG_INSTALL_DOCS!=yes` would mean putting this forwarding back in place...  Well, even more ideally, this functionality shouldn't be on the `spkg-install` level, but above, at `sage -i` level.



---

archive/issue_comments_182407.json:
```json
{
    "body": "Replying to [comment:18 dimpase]:\n> Replying to [comment:16 leif]:\n> > I was actually first going to add that, but then did not for a couple of reasons:\n> > \n> >  * I hate absolute paths there (as have unfortunately been added back to (additional) messages in the \"main\" docbuilding, although the messages there are even worse, since they claim the documents had been built even upon errors), but was 100% sure at least some would complain about a relative path in the message.\n> \n> well, how about just saying \"installed in SAGE_SHARE/doc\" ?\n\nThat's kind of a relative path... [I would have used] ;-)\n\n\n\n\n> > Orthogonal to that:\n> > \n> > Should I delete previous (potentially outdated) docs regardless of `SAGE_SPKG_INSTALL_DOCS`, which could probably be considered unexpected behaviour?  (E.g. if one reinstalls an spkg just with different flags, or in order to run its test suite, but forgets to set `SAGE_SPKG_INSTALL_DOCS` to the previous setting?  Does anyone use that variable on a per-package basis?  To me it seems a few people have it set in their shell rcs, and most people don't use it, probably just because they don't know about... B) )\n> >  \n> if they are in \"wrong\" location, yes. Otherwise, that's probably too much trouble --- although I as proposed on #14646, there ought to be a default `SAGE_SHARE/doc/cvxopt/index.html` forwarding to cvxopt website, so, ideally, `SAGE_SPKG_INSTALL_DOCS!=yes` would mean putting this forwarding back in place...  Well, even more ideally, this functionality shouldn't be on the `spkg-install` level, but above, at `sage -i` level.\n\nSo, should I move the `rm -rf ...` out of the `if [ \"$SAGE_SPKG_INSTALL_DOCS\" = yes ] ...` branch?  (With a separate message on what's going on ... :-) )",
    "created_at": "2013-05-26T20:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182407",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:18 dimpase]:
> Replying to [comment:16 leif]:
> > I was actually first going to add that, but then did not for a couple of reasons:
> > 
> >  * I hate absolute paths there (as have unfortunately been added back to (additional) messages in the "main" docbuilding, although the messages there are even worse, since they claim the documents had been built even upon errors), but was 100% sure at least some would complain about a relative path in the message.
> 
> well, how about just saying "installed in SAGE_SHARE/doc" ?

That's kind of a relative path... [I would have used] ;-)




> > Orthogonal to that:
> > 
> > Should I delete previous (potentially outdated) docs regardless of `SAGE_SPKG_INSTALL_DOCS`, which could probably be considered unexpected behaviour?  (E.g. if one reinstalls an spkg just with different flags, or in order to run its test suite, but forgets to set `SAGE_SPKG_INSTALL_DOCS` to the previous setting?  Does anyone use that variable on a per-package basis?  To me it seems a few people have it set in their shell rcs, and most people don't use it, probably just because they don't know about... B) )
> >  
> if they are in "wrong" location, yes. Otherwise, that's probably too much trouble --- although I as proposed on #14646, there ought to be a default `SAGE_SHARE/doc/cvxopt/index.html` forwarding to cvxopt website, so, ideally, `SAGE_SPKG_INSTALL_DOCS!=yes` would mean putting this forwarding back in place...  Well, even more ideally, this functionality shouldn't be on the `spkg-install` level, but above, at `sage -i` level.

So, should I move the `rm -rf ...` out of the `if [ "$SAGE_SPKG_INSTALL_DOCS" = yes ] ...` branch?  (With a separate message on what's going on ... :-) )



---

archive/issue_comments_182408.json:
```json
{
    "body": "Replying to [comment:19 leif]:\nright, go ahead :)",
    "created_at": "2013-05-27T01:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182408",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:19 leif]:
right, go ahead :)



---

archive/issue_comments_182409.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2016-08-03T20:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182409",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_182410.json:
```json
{
    "body": "This needs updating for the current (new-style package) 1.1.8p1.",
    "created_at": "2016-08-03T20:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182410",
    "user": "https://github.com/mkoeppe"
}
```

This needs updating for the current (new-style package) 1.1.8p1.



---

archive/issue_comments_182411.json:
```json
{
    "body": "Replying to [comment:25 mkoeppe]:\n> This needs updating for the current (new-style package) 1.1.8p1.\n\nYes, people keep updating packages without fixing long-standing issues.",
    "created_at": "2016-08-03T20:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182411",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:25 mkoeppe]:
> This needs updating for the current (new-style package) 1.1.8p1.

Yes, people keep updating packages without fixing long-standing issues.



---

archive/issue_comments_182412.json:
```json
{
    "body": "Let me add that I won't waste my time with rebasing more than three years old patches the next days.",
    "created_at": "2016-08-03T20:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182412",
    "user": "https://github.com/nexttime"
}
```

Let me add that I won't waste my time with rebasing more than three years old patches the next days.



---

archive/issue_comments_182413.json:
```json
{
    "body": "Right.",
    "created_at": "2016-08-03T21:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182413",
    "user": "https://github.com/mkoeppe"
}
```

Right.



---

archive/issue_comments_182414.json:
```json
{
    "body": "IMHO the idea is that html docs should be built, and then installed, not just copied from provided html/* ?",
    "created_at": "2016-08-07T15:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182414",
    "user": "https://github.com/dimpase"
}
```

IMHO the idea is that html docs should be built, and then installed, not just copied from provided html/* ?



---

archive/issue_comments_182415.json:
```json
{
    "body": "this is a minimal fix to docs being built/installed. Feel free to add more stuff, or just set it to positive review...\n----\nNew commits:",
    "created_at": "2016-08-07T22:27:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182415",
    "user": "https://github.com/dimpase"
}
```

this is a minimal fix to docs being built/installed. Feel free to add more stuff, or just set it to positive review...
----
New commits:



---

archive/issue_comments_182416.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-07T22:27:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182416",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_182417.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-30T19:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182417",
    "user": "https://github.com/koffie"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_182418.json:
```json
{
    "body": "Merge conflict with sage 8.1.beta3 needs to be resolved.",
    "created_at": "2017-08-30T19:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182418",
    "user": "https://github.com/koffie"
}
```

Merge conflict with sage 8.1.beta3 needs to be resolved.



---

archive/issue_comments_182419.json:
```json
{
    "body": "From experience on the sphinx upgrade ticket, you may want to add `typing` along with `sphinx`. And it should be on the other side of the `|` since you don't need to rebuild `cvxopt` each time `sphinx` or `typing` is upgraded.",
    "created_at": "2017-08-30T21:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182419",
    "user": "https://github.com/kiwifb"
}
```

From experience on the sphinx upgrade ticket, you may want to add `typing` along with `sphinx`. And it should be on the other side of the `|` since you don't need to rebuild `cvxopt` each time `sphinx` or `typing` is upgraded.



---

archive/issue_comments_182420.json:
```json
{
    "body": "You may have to depend on #23023 because of `typing`. The ticket is merged but not in a released beta yet.",
    "created_at": "2017-08-30T21:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182420",
    "user": "https://github.com/kiwifb"
}
```

You may have to depend on #23023 because of `typing`. The ticket is merged but not in a released beta yet.



---

archive/issue_comments_182421.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-08-30T23:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_182422.json:
```json
{
    "body": "rebased and merged with the branch on #23023, but I am getting now\n\n```\n[cvxopt-1.1.8.p2] pkg_resources.DistributionNotFound: The 'sphinxcontrib-websupport' distribution was not found and is required by Sphinx\n[cvxopt-1.1.8.p2] make[2]: *** [Makefile:30: html] Error 1\n```\n\nif I try to build with `SAGE_SPKG_INSTALL_DOCS=yes`\n\nAny idea what `sphinxcontrib-websupport` is all about? Is it another `sphinx` package we need to distribute, but we don't?",
    "created_at": "2017-08-30T23:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182422",
    "user": "https://github.com/dimpase"
}
```

rebased and merged with the branch on #23023, but I am getting now

```
[cvxopt-1.1.8.p2] pkg_resources.DistributionNotFound: The 'sphinxcontrib-websupport' distribution was not found and is required by Sphinx
[cvxopt-1.1.8.p2] make[2]: *** [Makefile:30: html] Error 1
```

if I try to build with `SAGE_SPKG_INSTALL_DOCS=yes`

Any idea what `sphinxcontrib-websupport` is all about? Is it another `sphinx` package we need to distribute, but we don't?



---

archive/issue_comments_182423.json:
```json
{
    "body": "Replying to [comment:36 dimpase]:\n> rebased and merged with the branch on #23023, but I am getting now\n> {{{\n> [cvxopt-1.1.8.p2] pkg_resources.DistributionNotFound: The 'sphinxcontrib-websupport' distribution was not found and is required by Sphinx\n> [cvxopt-1.1.8.p2] make[2]: *** [Makefile:30: html] Error 1\n> }}}\n> if I try to build with `SAGE_SPKG_INSTALL_DOCS=yes`\n> \n> Any idea what `sphinxcontrib-websupport` is all about? Is it another `sphinx` package we need to distribute, but we don't?\n\nYes it is a runtime dependency. It used to be part of sphinx proper. I had to write a new ebuild for it for Gentoo (actually it was a bit more complicated than that but I digress). So far we didn't appear to have a use for it in sage, cvxopt is the first package to require it.",
    "created_at": "2017-08-30T23:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182423",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:36 dimpase]:
> rebased and merged with the branch on #23023, but I am getting now
> {{{
> [cvxopt-1.1.8.p2] pkg_resources.DistributionNotFound: The 'sphinxcontrib-websupport' distribution was not found and is required by Sphinx
> [cvxopt-1.1.8.p2] make[2]: *** [Makefile:30: html] Error 1
> }}}
> if I try to build with `SAGE_SPKG_INSTALL_DOCS=yes`
> 
> Any idea what `sphinxcontrib-websupport` is all about? Is it another `sphinx` package we need to distribute, but we don't?

Yes it is a runtime dependency. It used to be part of sphinx proper. I had to write a new ebuild for it for Gentoo (actually it was a bit more complicated than that but I digress). So far we didn't appear to have a use for it in sage, cvxopt is the first package to require it.



---

archive/issue_comments_182424.json:
```json
{
    "body": "Indeed, build with `SAGE_SPKG_INSTALL_DOCS=yes` completes after\n\n```\n./sage --pip install sphinxcontrib-websupport\n```\n\nDo we thus open another ticket to make it a standard (pip) package?",
    "created_at": "2017-08-30T23:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182424",
    "user": "https://github.com/dimpase"
}
```

Indeed, build with `SAGE_SPKG_INSTALL_DOCS=yes` completes after

```
./sage --pip install sphinxcontrib-websupport
```

Do we thus open another ticket to make it a standard (pip) package?



---

archive/issue_comments_182425.json:
```json
{
    "body": "It would be acceptable to me for it to be part of this ticket.",
    "created_at": "2017-08-30T23:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182425",
    "user": "https://github.com/kiwifb"
}
```

It would be acceptable to me for it to be part of this ticket.



---

archive/issue_comments_182426.json:
```json
{
    "body": "#23764 deals with the apparent problem with adding `sphinxcontrib-websupport` as a package...",
    "created_at": "2017-08-31T09:37:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182426",
    "user": "https://github.com/dimpase"
}
```

#23764 deals with the apparent problem with adding `sphinxcontrib-websupport` as a package...



---

archive/issue_comments_182427.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-31T17:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_182428.json:
```json
{
    "body": "added `sphinxcontrib_websupport` as a standard package. (As I don't see how a standard package may depend on an optional one).",
    "created_at": "2017-08-31T17:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182428",
    "user": "https://github.com/dimpase"
}
```

added `sphinxcontrib_websupport` as a standard package. (As I don't see how a standard package may depend on an optional one).



---

archive/issue_comments_182429.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-31T17:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182429",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_182430.json:
```json
{
    "body": "1. The dependencies are not quite right: `sphinx` depends on `sphinxcontrib-websupport`, not the other way around. Also, it makes little sense to add `sphinxcontrib-websupport` as direct dependency of `cvxopt`. Adding `sphinx` should be sufficient.\n\nIn `cvxopt/spkg-install`:\n\n2. You can simplify\n\n```\n    if [ -d $SAGE_LOCAL/share/doc/cvxopt/html ] ; then\n       rm -rf $SAGE_LOCAL/share/doc/cvxopt/html\n    fi\n```\n\nto\n\n```\n       rm -rf \"$SAGE_LOCAL/share/doc/cvxopt/html\"\n```\n\n\n3. You should quote `\"$SAGE_LOCAL\"`\n\n4. It would be good to fix the indentation: use 4 spaces and also indent the comments.",
    "created_at": "2018-03-08T16:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182430",
    "user": "https://github.com/jdemeyer"
}
```

1. The dependencies are not quite right: `sphinx` depends on `sphinxcontrib-websupport`, not the other way around. Also, it makes little sense to add `sphinxcontrib-websupport` as direct dependency of `cvxopt`. Adding `sphinx` should be sufficient.

In `cvxopt/spkg-install`:

2. You can simplify

```
    if [ -d $SAGE_LOCAL/share/doc/cvxopt/html ] ; then
       rm -rf $SAGE_LOCAL/share/doc/cvxopt/html
    fi
```

to

```
       rm -rf "$SAGE_LOCAL/share/doc/cvxopt/html"
```


3. You should quote `"$SAGE_LOCAL"`

4. It would be good to fix the indentation: use 4 spaces and also indent the comments.



---

archive/issue_comments_182431.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-03-08T16:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182431",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_182432.json:
```json
{
    "body": "Replying to [comment:45 jdemeyer]:\n> 1. The dependencies are not quite right: `sphinx` depends on `sphinxcontrib-websupport`, not the other way around. \n\nI don't understand, are you saying one can install `sphinxcontrib-websupport` without installing `sphinx` first? This sounds strange to me, as the former is a component of the latter.\n\nAlso, it makes little sense to add `sphinxcontrib-websupport` as direct dependency of `cvxopt`. Adding `sphinx` should be sufficient.\n\nOnly if the dependencies are changed as you proposed.",
    "created_at": "2018-03-13T01:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182432",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:45 jdemeyer]:
> 1. The dependencies are not quite right: `sphinx` depends on `sphinxcontrib-websupport`, not the other way around. 

I don't understand, are you saying one can install `sphinxcontrib-websupport` without installing `sphinx` first? This sounds strange to me, as the former is a component of the latter.

Also, it makes little sense to add `sphinxcontrib-websupport` as direct dependency of `cvxopt`. Adding `sphinx` should be sufficient.

Only if the dependencies are changed as you proposed.



---

archive/issue_comments_182433.json:
```json
{
    "body": "Replying to [comment:46 gh-dimpase]:\n> I don't understand, are you saying one can install `sphinxcontrib-websupport` without installing `sphinx` first?\n\nYes indeed.\n\n> This sounds strange to me, as the former is a component of the latter.\n\nIt's not really a component. It's more like an extra package.",
    "created_at": "2018-03-13T08:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182433",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:46 gh-dimpase]:
> I don't understand, are you saying one can install `sphinxcontrib-websupport` without installing `sphinx` first?

Yes indeed.

> This sounds strange to me, as the former is a component of the latter.

It's not really a component. It's more like an extra package.



---

archive/issue_comments_182434.json:
```json
{
    "body": "Replying to [comment:47 jdemeyer]:\n> Replying to [comment:46 gh-dimpase]:\n> > I don't understand, are you saying one can install `sphinxcontrib-websupport` without installing `sphinx` first?\n> \n> Yes indeed.\n> \n> > This sounds strange to me, as the former is a component of the latter.\n> \n> It's not really a component. It's more like an extra package.\n\n\n```\nsphinxcontrib-webuspport provides a Python API to easily integrate \nSphinx documentation into your Web application.\n```\n\n\nFrom this one concludes that it is useless without sphinx, and thus it is its optional component. Do you know other uses for it? I don't.",
    "created_at": "2018-03-13T09:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182434",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:47 jdemeyer]:
> Replying to [comment:46 gh-dimpase]:
> > I don't understand, are you saying one can install `sphinxcontrib-websupport` without installing `sphinx` first?
> 
> Yes indeed.
> 
> > This sounds strange to me, as the former is a component of the latter.
> 
> It's not really a component. It's more like an extra package.


```
sphinxcontrib-webuspport provides a Python API to easily integrate 
Sphinx documentation into your Web application.
```


From this one concludes that it is useless without sphinx, and thus it is its optional component. Do you know other uses for it? I don't.



---

archive/issue_comments_182435.json:
```json
{
    "body": "Replying to [comment:48 gh-dimpase]:\n> From this one concludes that it is useless without sphinx, and thus it is its optional component.\n\nIt's not optional. Even if you don't use it, Sphinx won't run without `sphinxcontrib-websupport`.",
    "created_at": "2018-03-13T09:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182435",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:48 gh-dimpase]:
> From this one concludes that it is useless without sphinx, and thus it is its optional component.

It's not optional. Even if you don't use it, Sphinx won't run without `sphinxcontrib-websupport`.



---

archive/issue_comments_182436.json:
```json
{
    "body": "huh? This ticket adds sphinxcontrib-websupport as a package! We never shipped it before.",
    "created_at": "2018-03-13T09:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182436",
    "user": "https://github.com/dimpase"
}
```

huh? This ticket adds sphinxcontrib-websupport as a package! We never shipped it before.



---

archive/issue_comments_182437.json:
```json
{
    "body": "Because in sphinx 1.5.x and under it was a part of sphinx. It has been split off in 1.6.",
    "created_at": "2018-03-13T09:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182437",
    "user": "https://github.com/kiwifb"
}
```

Because in sphinx 1.5.x and under it was a part of sphinx. It has been split off in 1.6.



---

archive/issue_comments_182438.json:
```json
{
    "body": "Replying to [comment:51 fbissey]:\n> Because in sphinx 1.5.x and under it was a part of sphinx. It has been split off in 1.6.\n\nthanks for clarification. This seems to explain the mutual confusion over the dependence\nhierarchy.",
    "created_at": "2018-03-13T09:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182438",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:51 fbissey]:
> Because in sphinx 1.5.x and under it was a part of sphinx. It has been split off in 1.6.

thanks for clarification. This seems to explain the mutual confusion over the dependence
hierarchy.



---

archive/issue_comments_182439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-13T14:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_182440.json:
```json
{
    "body": "I have fixed spkg-install as requested, and left the deps as they were.",
    "created_at": "2018-03-13T14:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182440",
    "user": "https://github.com/dimpase"
}
```

I have fixed spkg-install as requested, and left the deps as they were.



---

archive/issue_comments_182441.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-13T14:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182441",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_182442.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-03-13T14:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182442",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_182443.json:
```json
{
    "body": "Replying to [comment:54 gh-dimpase]:\n> left the deps as they were.\n\nWhy? They are wrong!",
    "created_at": "2018-03-13T14:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182443",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:54 gh-dimpase]:
> left the deps as they were.

Why? They are wrong!



---

archive/issue_comments_182444.json:
```json
{
    "body": "Replying to [comment:55 jdemeyer]:\n> Replying to [comment:54 gh-dimpase]:\n> > left the deps as they were.\n> \n> Why? They are wrong!\n\nNo they are not! Why are you saying that Sphinx won't run without `sphinxcontrib-websupport` while it is perfectly doing this on the current beta?\nDo you think I have added a link to the tarball merely as work of art?",
    "created_at": "2018-03-13T22:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182444",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:55 jdemeyer]:
> Replying to [comment:54 gh-dimpase]:
> > left the deps as they were.
> 
> Why? They are wrong!

No they are not! Why are you saying that Sphinx won't run without `sphinxcontrib-websupport` while it is perfectly doing this on the current beta?
Do you think I have added a link to the tarball merely as work of art?



---

archive/issue_comments_182445.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-13T22:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182445",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_182446.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-03-14T06:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182446",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_182447.json:
```json
{
    "body": "English please.",
    "created_at": "2018-03-14T06:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182447",
    "user": "https://github.com/dimpase"
}
```

English please.



---

archive/issue_comments_182448.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-03-14T06:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182448",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_182449.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-03-14T08:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182449",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_182450.json:
```json
{
    "body": "Please wait... I will explain but you need to give me time to do that.",
    "created_at": "2018-03-14T08:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182450",
    "user": "https://github.com/jdemeyer"
}
```

Please wait... I will explain but you need to give me time to do that.



---

archive/issue_comments_182451.json:
```json
{
    "body": "I'm splitting the \"package `sphinxcontrib-websupport`\" part of this ticket as #24972.",
    "created_at": "2018-03-14T08:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182451",
    "user": "https://github.com/jdemeyer"
}
```

I'm splitting the "package `sphinxcontrib-websupport`" part of this ticket as #24972.



---

archive/issue_comments_182452.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-03-14T08:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_182453.json:
```json
{
    "body": "I would most appreciate no silent switches of the ticket status back to \"needs work\".\nI find this very rude.",
    "created_at": "2018-03-14T09:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182453",
    "user": "https://github.com/dimpase"
}
```

I would most appreciate no silent switches of the ticket status back to "needs work".
I find this very rude.



---

archive/issue_comments_182454.json:
```json
{
    "body": "Replying to [comment:66 dimpase]:\n> I would most appreciate no silent switches of the ticket status back to \"needs work\".\n\nI had to set it back to \"needs work\" because it was wrong and I didn't want anybody accidentally setting this to \"positive review\" in that state.\n\nThe reason for the silence is that I need more time to test things, gather evidence and explain you properly why it is wrong.",
    "created_at": "2018-03-14T09:11:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182454",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:66 dimpase]:
> I would most appreciate no silent switches of the ticket status back to "needs work".

I had to set it back to "needs work" because it was wrong and I didn't want anybody accidentally setting this to "positive review" in that state.

The reason for the silence is that I need more time to test things, gather evidence and explain you properly why it is wrong.



---

archive/issue_comments_182455.json:
```json
{
    "body": "How hard is to add a comment saying \"I need more time to explain\"? Otherwise I  take it as \"I have already explained this\" and it makes makes me feel stupid.\n\nAnd I am most probably not the only one who gets upset this way.",
    "created_at": "2018-03-14T09:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182455",
    "user": "https://github.com/dimpase"
}
```

How hard is to add a comment saying "I need more time to explain"? Otherwise I  take it as "I have already explained this" and it makes makes me feel stupid.

And I am most probably not the only one who gets upset this way.



---

archive/issue_comments_182456.json:
```json
{
    "body": "Sorry for that.",
    "created_at": "2018-03-14T09:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182456",
    "user": "https://github.com/jdemeyer"
}
```

Sorry for that.



---

archive/issue_comments_182457.json:
```json
{
    "body": "I tried to explain on #24972.",
    "created_at": "2018-03-14T09:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182457",
    "user": "https://github.com/jdemeyer"
}
```

I tried to explain on #24972.



---

archive/issue_comments_182458.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-03-14T09:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182458",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_182459.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-14T10:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182459",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_182460.json:
```json
{
    "body": "I wonder whether the call to the sphinx-build command needs some MathJax-specific options. This is cause I get source TeX formulas in e.g.\n`SAGE_LOCAL/share/doc/cvxopt/fftw.html` (compare it with http://cvxopt.org/userguide/fftw.html)\n\nIt could also be that some other things need to be done to get MathJax working here, I don't know (perhaps it's not relevant to this ticket)",
    "created_at": "2018-03-14T11:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182460",
    "user": "https://github.com/dimpase"
}
```

I wonder whether the call to the sphinx-build command needs some MathJax-specific options. This is cause I get source TeX formulas in e.g.
`SAGE_LOCAL/share/doc/cvxopt/fftw.html` (compare it with http://cvxopt.org/userguide/fftw.html)

It could also be that some other things need to be done to get MathJax working here, I don't know (perhaps it's not relevant to this ticket)



---

archive/issue_comments_182461.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-03-14T11:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182461",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_182462.json:
```json
{
    "body": "On  \u200bhttp://cvxopt.org/userguide/fftw.html there is no MathJax, they generate png images for formulae. E.g.\n\n```\n<dd><p>Replaces the columns of a dense complex matrix with their inverse\ndiscrete Fourier transforms: if <code class=\"docutils literal\"><span class=\"pre\">X</span></code> has <img class=\"math\" src=\"_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png\" alt=\"n\"/> rows,</p>\n<div class=\"math\">\n<p><img src=\"_images/math/ea898f4dc35c3010225ae66a6d7993bae88b3a56.png\" alt=\"X[k,:] :=\n    \\frac{1}{n} \\sum_{j=0}^{n-1} e^{2\\pi j k \\sqrt{-1}/n} X[j,:],\n    \\qquad k=0,\\ldots,n-1.\"/></p>\n</div></dd></dl>\n```\n\n\nI don't know whether we should follow the suit, or leave it as it is, or\nmake it use MathJax...",
    "created_at": "2018-03-14T11:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182462",
    "user": "https://github.com/dimpase"
}
```

On  ​http://cvxopt.org/userguide/fftw.html there is no MathJax, they generate png images for formulae. E.g.

```
<dd><p>Replaces the columns of a dense complex matrix with their inverse
discrete Fourier transforms: if <code class="docutils literal"><span class="pre">X</span></code> has <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/> rows,</p>
<div class="math">
<p><img src="_images/math/ea898f4dc35c3010225ae66a6d7993bae88b3a56.png" alt="X[k,:] :=
    \frac{1}{n} \sum_{j=0}^{n-1} e^{2\pi j k \sqrt{-1}/n} X[j,:],
    \qquad k=0,\ldots,n-1."/></p>
</div></dd></dl>
```


I don't know whether we should follow the suit, or leave it as it is, or
make it use MathJax...



---

archive/issue_comments_182463.json:
```json
{
    "body": "ping...",
    "created_at": "2018-10-17T16:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182463",
    "user": "https://github.com/dimpase"
}
```

ping...



---

archive/issue_comments_182464.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2020-06-11T09:30:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182464",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_182465.json:
```json
{
    "body": "it all works now.",
    "created_at": "2020-06-11T09:30:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182465",
    "user": "https://github.com/dimpase"
}
```

it all works now.



---

archive/issue_comments_182466.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-06-24T18:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14441#issuecomment-182466",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid
