# Issue 21191: AssertionError plotting real part of complex function with float coefficients

Issue created by migration from Trac.

Original creator: paulmasson

Original creation time: 2016-09-06 02:13:27

Attempting this plot produces the error:


```
sage: plot(real(sqrt(x - 1.*I)), (x,0,1))
...
/Users/Masson/Downloads/GitHub/sage/src/sage/symbolic/pynac.pyx in sage.symbolic.pynac.py_atan2 (/Users/Masson/Downloads/GitHub/sage/src/build/cythonized/sage/symbolic/pynac.cpp:18694)()
   1740     from sage.symbolic.constants import pi
   1741     parent = parent_c(x)
-> 1742     assert parent is parent_c(y)
   1743     if parent is ZZ:
   1744         parent = RR

AssertionError: 
```


Reported in this [ask](https://ask.sagemath.org/question/34735/atan2-assertionerror-while-plotting-complex-squareroot-function/) question.


---

Comment by rws created at 2016-09-18 08:43:59

New commits:


---

Comment by rws created at 2016-09-18 08:43:59

Changing status from new to needs_review.


---

Comment by paulmasson created at 2016-09-18 21:28:34

Solves the plot problem, but needs doctests for arguments with different parents to illustrate the change.

Also, there are uncommitted changes for Pynac 0.6.9.1 that get included when this branch is checked out. They belong on another branch and ticket.


---

Comment by paulmasson created at 2016-09-18 21:28:34

Changing status from needs_review to needs_work.


---

Comment by paulmasson created at 2016-09-18 21:42:47

This simple change is likely to have future repercussions. Wouldn't it make more sense to determine both parents and use whichever is more general?


---

Comment by paulmasson created at 2016-10-06 21:51:16

This modification allows plotting to function without invalidating existing doctests.
----
New commits:


---

Comment by paulmasson created at 2016-10-06 21:51:16

Changing status from needs_work to needs_review.


---

Comment by git created at 2016-11-13 23:47:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2016-12-04 08:59:13

Changing status from needs_review to positive_review.


---

Comment by rws created at 2016-12-04 08:59:13

I think this is okay, and it tests fine with ptestlong.
----
New commits:


---

Comment by vbraun created at 2016-12-05 22:35:05

Resolution: fixed
