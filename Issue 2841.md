# Issue 2841: maxima pukes on non-ascii filenames (terrible evil bug!)

Issue created by migration from https://trac.sagemath.org/ticket/2841

Original creator: was

Original creation time: 2008-04-07 08:16:31

Assignee: mabshoff


```
> Do you have any files anywhere in your filesystem that might not
> just use standard ascii characters in their names?

> I'm guessing a bug in Maxima is causing the problem.  Maxima tries
> to read various directories on startup and behaves very stupidly in
> the presence of filenames that contain characters that confuse it.

> Could you try making a new clean user account and running
>     sage -maxima
> from it?

Thank you!! On a new user account sage and its maxima worked
beautifully.

On my main account I found a folder called "Steuerfälle" generated by
a governement-software for calculating the taxes in Switzerland... I
changed that -> issue gone.

Thank you very much, William. I'm looking forward to having a great
time with sage.
```



---

Comment by cwitty created at 2008-04-10 03:17:11

Note that this was previously reported (and fixed, at least for me) as #276.

Perhaps the bug reporter has LANG set to an encoding that does not handle that particular file name; or perhaps LANG is not set, and en_US.UTF-8 does not work on that machine (or at least, that file name is not a valid UTF-8 string).


---

Comment by mabshoff created at 2008-04-26 00:45:11

Well, this is actually likely to be a clisp issue, so hopefully once we switch to ecls this issue will be gone regardless if this is actually an env issue or not.

Cheers,

Michael


---

Comment by kcrisman created at 2009-12-27 04:00:21

Changing priority from major to minor.


---

Comment by kcrisman created at 2009-12-27 04:00:21

Is this still an issue, given the comment above and #276, and the recent fix of ECL to not scan the filesystem (did that ever cause this problem?  Changing to minor with no complaints like this in two years.


---

Comment by kcrisman created at 2010-05-25 14:54:20

Suggesting that we might make a change to sage-env if this isn't a problem anymore.

```
# If the language encoding isn't set, set it to be US, since 
# Sage is currently mainly a US program, and leaving this off 
# leads to some really confusing errors -- see trac #276 
 
if [ "$LANG" = "" ]; then 
    LANG="en_US.UTF-8"  && export LANG 
fi  
}}} 
But Sage isn't anywhere near as much mainly a US program now, and hopefully this problem isn't possible anymore?  I did create a folder called "Steuerfälle" on my computer and that didn't cause problems, and LANG=en_US.UTF-8 still (even when I open a new terminal window).

So perhaps we should revert #276 - or at least close this ticket!


---

Comment by mpatel created at 2010-08-10 22:16:13

It appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.

Should we wait for reports about non-ASCII file/folder names?

[Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).


---

Comment by kcrisman created at 2010-08-11 00:53:11

Replying to [comment:5 mpatel]:
> It appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.
Hilarious!  Just goes to show that Sage is too big for any one person to know all about it - or at least to remember all tickets.
> Should we wait for reports about non-ASCII file/folder names?
No - this should be pointed out as fixed elsewhere and the ticket closed, imho.
> [Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).
If you agree, then I would say just put a note to that effect on that thread.


---

Comment by mpatel created at 2010-08-11 01:04:49

Resolution: invalid


---

Comment by mpatel created at 2010-08-11 01:04:49

I'm closing this ticket as "invalid," since our Maxima no longer "pukes on non-ascii filenames."  For background, see #276 and #2513.
