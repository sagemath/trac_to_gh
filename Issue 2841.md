# Issue 2841: maxima pukes on non-ascii filenames (terrible evil bug!)

archive/issues_002841.json:
```json
{
    "body": "Assignee: mabshoff\n\n\n```\n> Do you have any files anywhere in your filesystem that might not\n> just use standard ascii characters in their names?\n\n> I'm guessing a bug in Maxima is causing the problem.  Maxima tries\n> to read various directories on startup and behaves very stupidly in\n> the presence of filenames that contain characters that confuse it.\n\n> Could you try making a new clean user account and running\n>     sage -maxima\n> from it?\n\nThank you!! On a new user account sage and its maxima worked\nbeautifully.\n\nOn my main account I found a folder called \"Steuerf\u00e4lle\" generated by\na governement-software for calculating the taxes in Switzerland... I\nchanged that -> issue gone.\n\nThank you very much, William. I'm looking forward to having a great\ntime with sage.\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/2841\n\n",
    "created_at": "2008-04-07T08:16:31Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "maxima pukes on non-ascii filenames (terrible evil bug!)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2841",
    "user": "https://github.com/williamstein"
}
```
Assignee: mabshoff


```
> Do you have any files anywhere in your filesystem that might not
> just use standard ascii characters in their names?

> I'm guessing a bug in Maxima is causing the problem.  Maxima tries
> to read various directories on startup and behaves very stupidly in
> the presence of filenames that contain characters that confuse it.

> Could you try making a new clean user account and running
>     sage -maxima
> from it?

Thank you!! On a new user account sage and its maxima worked
beautifully.

On my main account I found a folder called "Steuerfälle" generated by
a governement-software for calculating the taxes in Switzerland... I
changed that -> issue gone.

Thank you very much, William. I'm looking forward to having a great
time with sage.
```


Issue created by migration from https://trac.sagemath.org/ticket/2841





---

archive/issue_comments_019451.json:
```json
{
    "body": "Note that this was previously reported (and fixed, at least for me) as #276.\n\nPerhaps the bug reporter has LANG set to an encoding that does not handle that particular file name; or perhaps LANG is not set, and en_US.UTF-8 does not work on that machine (or at least, that file name is not a valid UTF-8 string).",
    "created_at": "2008-04-10T03:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2841#issuecomment-19451",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```

Note that this was previously reported (and fixed, at least for me) as #276.

Perhaps the bug reporter has LANG set to an encoding that does not handle that particular file name; or perhaps LANG is not set, and en_US.UTF-8 does not work on that machine (or at least, that file name is not a valid UTF-8 string).



---

archive/issue_comments_019452.json:
```json
{
    "body": "Well, this is actually likely to be a clisp issue, so hopefully once we switch to ecls this issue will be gone regardless if this is actually an env issue or not.\n\nCheers,\n\nMichael",
    "created_at": "2008-04-26T00:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2841#issuecomment-19452",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Well, this is actually likely to be a clisp issue, so hopefully once we switch to ecls this issue will be gone regardless if this is actually an env issue or not.

Cheers,

Michael



---

archive/issue_comments_019453.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2009-12-27T04:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2841#issuecomment-19453",
    "user": "https://github.com/kcrisman"
}
```

Changing priority from major to minor.



---

archive/issue_comments_019454.json:
```json
{
    "body": "Is this still an issue, given the comment above and #276, and the recent fix of ECL to not scan the filesystem (did that ever cause this problem?  Changing to minor with no complaints like this in two years.",
    "created_at": "2009-12-27T04:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2841#issuecomment-19454",
    "user": "https://github.com/kcrisman"
}
```

Is this still an issue, given the comment above and #276, and the recent fix of ECL to not scan the filesystem (did that ever cause this problem?  Changing to minor with no complaints like this in two years.



---

archive/issue_comments_019455.json:
```json
{
    "body": "Suggesting that we might make a change to sage-env if this isn't a problem anymore.\n\n```\n# If the language encoding isn't set, set it to be US, since \n# Sage is currently mainly a US program, and leaving this off \n# leads to some really confusing errors -- see trac #276 \n \nif [ \"$LANG\" = \"\" ]; then \n    LANG=\"en_US.UTF-8\"  && export LANG \nfi  \n```\n \nBut Sage isn't anywhere near as much mainly a US program now, and hopefully this problem isn't possible anymore?  I did create a folder called \"Steuerf\u00e4lle\" on my computer and that didn't cause problems, and LANG=en_US.UTF-8 still (even when I open a new terminal window).\n\nSo perhaps we should revert #276 - or at least close this ticket!",
    "created_at": "2010-05-25T14:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2841#issuecomment-19455",
    "user": "https://github.com/kcrisman"
}
```

Suggesting that we might make a change to sage-env if this isn't a problem anymore.

```
# If the language encoding isn't set, set it to be US, since 
# Sage is currently mainly a US program, and leaving this off 
# leads to some really confusing errors -- see trac #276 
 
if [ "$LANG" = "" ]; then 
    LANG="en_US.UTF-8"  && export LANG 
fi  
```
 
But Sage isn't anywhere near as much mainly a US program now, and hopefully this problem isn't possible anymore?  I did create a folder called "Steuerfälle" on my computer and that didn't cause problems, and LANG=en_US.UTF-8 still (even when I open a new terminal window).

So perhaps we should revert #276 - or at least close this ticket!



---

archive/issue_comments_019456.json:
```json
{
    "body": "It appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.\n\nShould we wait for reports about non-ASCII file/folder names?\n\n[Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).",
    "created_at": "2010-08-10T22:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2841#issuecomment-19456",
    "user": "https://github.com/qed777"
}
```

It appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.

Should we wait for reports about non-ASCII file/folder names?

[Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).



---

archive/issue_comments_019457.json:
```json
{
    "body": "Replying to [comment:5 mpatel]:\n> It appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.\nHilarious!  Just goes to show that Sage is too big for any one person to know all about it - or at least to remember all tickets.\n> Should we wait for reports about non-ASCII file/folder names?\nNo - this should be pointed out as fixed elsewhere and the ticket closed, imho.\n> [Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).\nIf you agree, then I would say just put a note to that effect on that thread.",
    "created_at": "2010-08-11T00:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2841#issuecomment-19457",
    "user": "https://github.com/kcrisman"
}
```

Replying to [comment:5 mpatel]:
> It appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.
Hilarious!  Just goes to show that Sage is too big for any one person to know all about it - or at least to remember all tickets.
> Should we wait for reports about non-ASCII file/folder names?
No - this should be pointed out as fixed elsewhere and the ticket closed, imho.
> [Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).
If you agree, then I would say just put a note to that effect on that thread.



---

archive/issue_comments_019458.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2010-08-11T01:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2841#issuecomment-19458",
    "user": "https://github.com/qed777"
}
```

Resolution: invalid



---

archive/issue_events_003031.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-11T01:04:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2841#event-3031"
}
```



---

archive/issue_comments_019459.json:
```json
{
    "body": "I'm closing this ticket as \"invalid,\" since our Maxima no longer \"pukes on non-ascii filenames.\"  For background, see #276 and #2513.",
    "created_at": "2010-08-11T01:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2841#issuecomment-19459",
    "user": "https://github.com/qed777"
}
```

I'm closing this ticket as "invalid," since our Maxima no longer "pukes on non-ascii filenames."  For background, see #276 and #2513.
