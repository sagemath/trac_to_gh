# Issue 13628: Upgrade Cython to 0.17.3

archive/issues_013628.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @robertwb jpflori simonking\n\nNew Cython version\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/cython-0.17.3.spkg\n\nIssue created by migration from https://trac.sagemath.org/ticket/13832\n\n",
    "created_at": "2012-12-14T15:03:13Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.6",
    "title": "Upgrade Cython to 0.17.3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13628",
    "user": "@vbraun"
}
```
Assignee: tbd

CC:  @robertwb jpflori simonking

New Cython version

http://www.stp.dias.ie/~vbraun/Sage/spkg/cython-0.17.3.spkg

Issue created by migration from https://trac.sagemath.org/ticket/13832





---

archive/issue_comments_168616.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-12-14T15:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168616",
    "user": "@vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_168617.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2012-12-26T22:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168617",
    "user": "jpflori"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_168618.json:
```json
{
    "body": "I'm putting this as blocker as it definitely fix horribly broken code for C-Extension classes using weakrefs produced by previous Cython versions.",
    "created_at": "2012-12-26T22:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168618",
    "user": "jpflori"
}
```

I'm putting this as blocker as it definitely fix horribly broken code for C-Extension classes using weakrefs produced by previous Cython versions.



---

archive/issue_comments_168619.json:
```json
{
    "body": "Could you upload a diff please?\n(I'll have a look at the repo directly, but i think its better to have it posted here as well.)",
    "created_at": "2012-12-27T09:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168619",
    "user": "jpflori"
}
```

Could you upload a diff please?
(I'll have a look at the repo directly, but i think its better to have it posted here as well.)



---

archive/issue_comments_168620.json:
```json
{
    "body": "I literally only bumped the version:\n\n```\n[vbraun@volker-desktop cython-0.17.3]$ hg diff -r 16:\ndiff -r 3855e277e649 -r c54d12648e62 SPKG.txt\n--- a/SPKG.txt\tWed Nov 21 22:21:11 2012 +0000\n+++ b/SPKG.txt\tFri Dec 14 14:59:10 2012 +0000\n@@ -31,6 +31,9 @@\n \n == Changelog ==\n \n+=== cython-0.17.3 (Volker Braun, 14 December 2012) ===\n+ * Upgrade Cython 0.17.3\n+\n === cython-0.17.2 (Volker Braun, 21 November 2012) ===\n  * Upgrade Cython 0.17.2\n```\n",
    "created_at": "2012-12-27T10:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168620",
    "user": "@vbraun"
}
```

I literally only bumped the version:

```
[vbraun@volker-desktop cython-0.17.3]$ hg diff -r 16:
diff -r 3855e277e649 -r c54d12648e62 SPKG.txt
--- a/SPKG.txt	Wed Nov 21 22:21:11 2012 +0000
+++ b/SPKG.txt	Fri Dec 14 14:59:10 2012 +0000
@@ -31,6 +31,9 @@
 
 == Changelog ==
 
+=== cython-0.17.3 (Volker Braun, 14 December 2012) ===
+ * Upgrade Cython 0.17.3
+
 === cython-0.17.2 (Volker Braun, 21 November 2012) ===
  * Upgrade Cython 0.17.2
```




---

archive/issue_comments_168621.json:
```json
{
    "body": "If I really have to rant, I'd ask for the trac ticket number to be included in SPKG.txt (between * and U).\n\nIt's just that such information can sometimes save so much time, not that I think it will really be the case here, but...\nI've just wasted so much time understanding and reinventing the wheel at #13864...",
    "created_at": "2012-12-27T15:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168621",
    "user": "jpflori"
}
```

If I really have to rant, I'd ask for the trac ticket number to be included in SPKG.txt (between * and U).

It's just that such information can sometimes save so much time, not that I think it will really be the case here, but...
I've just wasted so much time understanding and reinventing the wheel at #13864...



---

archive/issue_comments_168622.json:
```json
{
    "body": "And/or put the ticket number in the hg changelog.",
    "created_at": "2012-12-27T15:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168622",
    "user": "jpflori"
}
```

And/or put the ticket number in the hg changelog.



---

archive/issue_comments_168623.json:
```json
{
    "body": "I'm against more red tape just for a trivial version bump. If you want to know the trac tickets where `pkg-x.y.z.spkg` was discussed then just use the search function.",
    "created_at": "2012-12-27T15:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168623",
    "user": "@vbraun"
}
```

I'm against more red tape just for a trivial version bump. If you want to know the trac tickets where `pkg-x.y.z.spkg` was discussed then just use the search function.



---

archive/issue_comments_168624.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-12-27T15:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168624",
    "user": "jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_168625.json:
```json
{
    "body": "Ok I won't fight over this, so positive_review.",
    "created_at": "2012-12-27T15:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168625",
    "user": "jpflori"
}
```

Ok I won't fight over this, so positive_review.



---

archive/issue_comments_168626.json:
```json
{
    "body": "Replying to [comment:9 vbraun]:\n> I'm against more red tape just for a trivial version bump. If you want to know the trac tickets where `pkg-x.y.z.spkg` was discussed then just use the search function.\n\nTrac ticket numbers belong into `SPKG.txt` (i.e., an spkg's changelog) as well as into the commit messages (at least the last one, in case there are a couple of for a single patch level), while for spkgs the first is IMHO more important (even if Trac's search functions were smart...).\n\nYou may save a few seconds omitting it, at the expense of N other developers later wasting much more time searching.",
    "created_at": "2012-12-27T23:29:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168626",
    "user": "@nexttime"
}
```

Replying to [comment:9 vbraun]:
> I'm against more red tape just for a trivial version bump. If you want to know the trac tickets where `pkg-x.y.z.spkg` was discussed then just use the search function.

Trac ticket numbers belong into `SPKG.txt` (i.e., an spkg's changelog) as well as into the commit messages (at least the last one, in case there are a couple of for a single patch level), while for spkgs the first is IMHO more important (even if Trac's search functions were smart...).

You may save a few seconds omitting it, at the expense of N other developers later wasting much more time searching.



---

archive/issue_comments_168627.json:
```json
{
    "body": "There is no mentioning of putting trac numbers into commit messages in the Sage developer guide. Also, the `SPKG.txt` is for human consumption, so appropriate references should be added but that can be a trac ticket, a mailinglist post, or something else. In this case there is just nothing to point to.\n\nEven the trac search engine is good enough to give you this ticket if you search for \"cython-0.17.3.spkg\". \n\nMore importantly, we should strive to make Sage development more agile and avoid making it look like filling out a German tax declaration. **Now go to trac and obtain your unique identifying number. Copy this number into the SPKG.txt and the Mercurial commit. Be careful to double-check your work as typographical errors are the main cause of rejected submissions.**",
    "created_at": "2012-12-28T09:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168627",
    "user": "@vbraun"
}
```

There is no mentioning of putting trac numbers into commit messages in the Sage developer guide. Also, the `SPKG.txt` is for human consumption, so appropriate references should be added but that can be a trac ticket, a mailinglist post, or something else. In this case there is just nothing to point to.

Even the trac search engine is good enough to give you this ticket if you search for "cython-0.17.3.spkg". 

More importantly, we should strive to make Sage development more agile and avoid making it look like filling out a German tax declaration. **Now go to trac and obtain your unique identifying number. Copy this number into the SPKG.txt and the Mercurial commit. Be careful to double-check your work as typographical errors are the main cause of rejected submissions.**



---

archive/issue_comments_168628.json:
```json
{
    "body": "Nice analogy. This is exactly the kind of busywork that I hope to be able to avoid with the new workflow. (In particular the actual switch to new upstream sources will simply be a commit itself, no need to keep track of the change in three or for separate places manually to record the fact that, in an unrelated process, a particular binary blob (the spkg) started getting bundled with a particular Sage release.)\n\nI, personally, wouldn't even think to look at the SPKG.txt for this information, which would necessarily send me to the trac site anyways. \n\nOn a lighter note, thanks to both of you for the spkg and review (both of which I made a mental note to do but never found the time for).",
    "created_at": "2012-12-28T18:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168628",
    "user": "@robertwb"
}
```

Nice analogy. This is exactly the kind of busywork that I hope to be able to avoid with the new workflow. (In particular the actual switch to new upstream sources will simply be a commit itself, no need to keep track of the change in three or for separate places manually to record the fact that, in an unrelated process, a particular binary blob (the spkg) started getting bundled with a particular Sage release.)

I, personally, wouldn't even think to look at the SPKG.txt for this information, which would necessarily send me to the trac site anyways. 

On a lighter note, thanks to both of you for the spkg and review (both of which I made a mental note to do but never found the time for).



---

archive/issue_comments_168629.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-12-29T19:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13628#issuecomment-168629",
    "user": "@jdemeyer"
}
```

Resolution: fixed
