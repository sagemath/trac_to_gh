# Issue 21320: Overconvergent Modular Symbols: implement random_element()

Issue created by migration from Trac.

Original creator: asteele

Original creation time: 2016-09-21 17:55:51

CC:  roed

Keywords: OMS, p-adic, L-function

The Overconvergent Modular Symbols package contains some (buggy) code for creating random overconvergent modular symbols, but currently raises NotImplementedError. The existing code needs to be fixed and modified to handle general congruence subgroups.


---

Comment by chapoton created at 2016-12-15 12:42:52

one failing doctest, because you should import DirichletGroup


---

Comment by git created at 2017-03-20 19:07:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-04-03 20:31:49

one failing doctest:

```
File "src/sage/modular/pollack_stevens/space.py", line 715, in sage.modular.pollack_stevens.space.PollackStevensModularSymbolspace.random_element
Failed example:
    M.random_element(10)
Expected:
    Traceback (most recent call last):
    ...
    NotImplementedError
Got:
    Modular symbol of level 11 with values in Space of 11-adic distributions with k=2 action and precision cap 20
```



---

Comment by chapoton created at 2017-04-04 19:05:19

Also you need to set the status to "needs_review" if you want this to enter sage.


---

Comment by chapoton created at 2017-05-13 19:30:40

ping ?


---

Comment by git created at 2017-07-20 22:15:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by asteele created at 2017-07-20 22:16:37

Changing status from new to needs_review.


---

Comment by roed created at 2017-07-22 07:51:10

Changing keywords from "OMS, p-adic, L-function" to "OMS, p-adic, L-function, sd87".


---

Comment by davidloeffler created at 2017-11-20 16:21:33

The first thing I tried resulted in an error message:

```
sage: F = PollackStevensModularSymbols(Gamma0(11), 2)
sage: F.random_element()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-4-074c74c306de> in <module>()
----> 1 F.random_element()
...
ValueError: You can only compute the valuation with respect to a integer larger than 1.
```

So did the second:

```
sage: D = OverconvergentDistributions(4, 7, prec_cap=10)
sage: F = PollackStevensModularSymbols(Gamma0(21), coefficients=D)
sage: F.random_element()
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-19-074c74c306de> in <module>()
----> 1 F.random_element()

/storage/masiao/sage/local/lib/python2.7/site-packages/sage/modular/pollack_stevens/space.pyc in random_element(self, M)
    758                 t += D[g] * manin.gammas[g] - D[g]
    759             else:
--> 760                 if g in MR.reps_with_two_torsion():  # What is MR ??
    761                     t -= D[g]
    762                 else:

NameError: global name 'MR' is not defined
```



---

Comment by davidloeffler created at 2017-11-20 16:21:33

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2018-08-20 08:09:47

New commits:
