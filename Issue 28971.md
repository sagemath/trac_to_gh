# Issue 28971: bug: RuntimeError: ECL says: -1 is not of type (INTEGER 0 2305843009213693951).

Issue created by migration from https://trac.sagemath.org/ticket/29208

Original creator: @Volker-Weissmann

Original creation time: 2020-02-16 16:09:35

Keywords: bug

This code:

```/usr/bin/env sage
from sage.all import *

h = var('h')
t = var('t')
x = function('x')(t)
DE = diff(x, t, t) - diff(x, t)**2 - diff(x, t) / (h-x)
```

outputs 

```
Traceback (most recent call last):
  File "./dgl.py", line 9, in <module>
    desolve(DE, [x,t])
  File "/usr/lib/python3.8/site-packages/sage/calculus/desolvers.py", line 586, in desolve
    if str(soln).strip() == 'false':
  File "/usr/lib/python3.8/site-packages/sage/interfaces/maxima_abstract.py", line 1120, in __str__
    return self.display2d(onscreen=False)
  File "/usr/lib/python3.8/site-packages/sage/interfaces/maxima_lib.py", line 1142, in display2d
    s = stdout_to_string('disp(%s)'%self.name())
  File "/usr/lib/python3.8/site-packages/sage/interfaces/maxima_lib.py", line 271, in stdout_to_string
    return ecl_eval(r"""(with-output-to-string (*standard-output*)
  File "sage/libs/ecl.pyx", line 1339, in sage.libs.ecl.ecl_eval (build/cythonized/sage/libs/ecl.c:10184)
  File "sage/libs/ecl.pyx", line 1354, in sage.libs.ecl.ecl_eval (build/cythonized/sage/libs/ecl.c:10123)
  File "sage/libs/ecl.pyx", line 363, in sage.libs.ecl.ecl_safe_eval (build/cythonized/sage/libs/ecl.c:5181)
RuntimeError: ECL says: -1 is not of type (INTEGER 0 2305843009213693951).

```


I used the following version:
Sage 9.0 commit 31cb54b77951c888af513734ca36ac045fa9ca86
OS: Arch Linux

Interestingly, it works if I replace h by an arbitrary number.


---

Comment by @Volker-Weissmann created at 2020-02-16 16:21:38

Changing type from PLEASE CHANGE to defect.


---

Comment by mkoeppe created at 2020-05-01 04:28:42

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.


---

Comment by mkoeppe created at 2020-07-19 07:16:03

Unchanged when upgrading to 5.44.0 (#30063).


---

Comment by mkoeppe created at 2021-03-29 03:38:43

Still present in 9.3.rc0 (after upgrade of ECL)


---

Comment by mkoeppe created at 2021-04-02 20:21:54

Moving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage
