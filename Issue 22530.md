# Issue 22530: py3: some care for division

archive/issues_022530.json:
```json
{
    "body": "CC:  @tscrim @jm58660 @a-andre @jdemeyer\n\ncorrect some of the remaining failures when division uses python3 behaviour\n\npart of #15995\n\nIssue created by migration from https://trac.sagemath.org/ticket/22767\n\n",
    "created_at": "2017-04-06T12:55:41Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3: some care for division",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22530",
    "user": "https://github.com/fchapoton"
}
```
CC:  @tscrim @jm58660 @a-andre @jdemeyer

correct some of the remaining failures when division uses python3 behaviour

part of #15995

Issue created by migration from https://trac.sagemath.org/ticket/22767





---

archive/issue_comments_313669.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-04-06T12:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313669",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_313670.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-06T12:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313670",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_313671.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2017-04-06T15:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313671",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_313672.json:
```json
{
    "body": "Why change `int` to `Integer` in various places? I don't think that is the right way to fix things.",
    "created_at": "2017-04-06T15:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313672",
    "user": "https://github.com/jdemeyer"
}
```

Why change `int` to `Integer` in various places? I don't think that is the right way to fix things.



---

archive/issue_comments_313673.json:
```json
{
    "body": "To which of the 3 changed file do you refer ?\n\nI must admit that I have made so that it works, but not tried to understand why.",
    "created_at": "2017-04-06T16:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313673",
    "user": "https://github.com/fchapoton"
}
```

To which of the 3 changed file do you refer ?

I must admit that I have made so that it works, but not tried to understand why.



---

archive/issue_comments_313674.json:
```json
{
    "body": "`@`tscrim: \"src/sage/combinat/crystals/virtual_crystal.py\" also needs care:\n\nTry adding `from __future__ import division` there, you will get 4 failures.",
    "created_at": "2017-04-06T17:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313674",
    "user": "https://github.com/fchapoton"
}
```

`@`tscrim: "src/sage/combinat/crystals/virtual_crystal.py" also needs care:

Try adding `from __future__ import division` there, you will get 4 failures.



---

archive/issue_comments_313675.json:
```json
{
    "body": "I know the rigged configuration code, so I made the necessary change there. I also fixed the issues in `virtual_crystals.py`. I have no idea for the other two.\n----\nNew commits:",
    "created_at": "2017-04-06T21:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313675",
    "user": "https://github.com/tscrim"
}
```

I know the rigged configuration code, so I made the necessary change there. I also fixed the issues in `virtual_crystals.py`. I have no idea for the other two.
----
New commits:



---

archive/issue_comments_313676.json:
```json
{
    "body": "may we also undo this change in rigged configurations ?\n\n```diff\n-        cc = 0\n-        rigging_sum = 0\n+        cc = ZZ.zero()\n+        rigging_sum = ZZ.zero()\n```\n",
    "created_at": "2017-04-07T06:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313676",
    "user": "https://github.com/fchapoton"
}
```

may we also undo this change in rigged configurations ?

```diff
-        cc = 0
-        rigging_sum = 0
+        cc = ZZ.zero()
+        rigging_sum = ZZ.zero()
```




---

archive/issue_comments_313677.json:
```json
{
    "body": "These are good to have as `cc` is eventually exposed to the user, and I think could remain an `int` in certain situations.",
    "created_at": "2017-04-07T07:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313677",
    "user": "https://github.com/tscrim"
}
```

These are good to have as `cc` is eventually exposed to the user, and I think could remain an `int` in certain situations.



---

archive/issue_comments_313678.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-04-07T07:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313678",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_313679.json:
```json
{
    "body": "ok, then setting back to needs review",
    "created_at": "2017-04-07T07:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313679",
    "user": "https://github.com/fchapoton"
}
```

ok, then setting back to needs review



---

archive/issue_comments_313680.json:
```json
{
    "body": "need to do something in the elliptic file",
    "created_at": "2017-04-07T07:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313680",
    "user": "https://github.com/fchapoton"
}
```

need to do something in the elliptic file



---

archive/issue_comments_313681.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-07T07:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313681",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_313682.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-07T12:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313682",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_313683.json:
```json
{
    "body": "New commits:\n----\nNew commits:",
    "created_at": "2017-04-07T12:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313683",
    "user": "https://github.com/fchapoton"
}
```

New commits:
----
New commits:



---

archive/issue_comments_313684.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-04-07T12:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313684",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_313685.json:
```json
{
    "body": "Perhaps this is bikeshedding, but I don't understand why this change\n\n```diff\n-                    r /= v.ramification_index() * v.residue_class_degree()\n+                    r = r / (v.ramification_index() * v.residue_class_degree())\n```\n\nYou don't need to change it back, but it just feels like it is slightly more complicated code to me.",
    "created_at": "2017-04-07T15:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313685",
    "user": "https://github.com/tscrim"
}
```

Perhaps this is bikeshedding, but I don't understand why this change

```diff
-                    r /= v.ramification_index() * v.residue_class_degree()
+                    r = r / (v.ramification_index() * v.residue_class_degree())
```

You don't need to change it back, but it just feels like it is slightly more complicated code to me.



---

archive/issue_comments_313686.json:
```json
{
    "body": "Well, yes, you are right. I was in doubt to what kind of division is performed by `/=`.",
    "created_at": "2017-04-07T15:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313686",
    "user": "https://github.com/fchapoton"
}
```

Well, yes, you are right. I was in doubt to what kind of division is performed by `/=`.



---

archive/issue_comments_313687.json:
```json
{
    "body": "If the patchbot comes back green, then you can set a positive review.",
    "created_at": "2017-04-07T15:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313687",
    "user": "https://github.com/tscrim"
}
```

If the patchbot comes back green, then you can set a positive review.



---

archive/issue_comments_313688.json:
```json
{
    "body": "ok,one bot was green",
    "created_at": "2017-04-11T12:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313688",
    "user": "https://github.com/fchapoton"
}
```

ok,one bot was green



---

archive/issue_comments_313689.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-11T12:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313689",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_059258.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-12T20:12:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22530#event-59258"
}
```



---

archive/issue_comments_313690.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-12T20:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313690",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_313691.json:
```json
{
    "body": "Changing keywords from \"\" to \"division\".",
    "created_at": "2018-02-23T13:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22530#issuecomment-313691",
    "user": "https://github.com/embray"
}
```

Changing keywords from "" to "division".
