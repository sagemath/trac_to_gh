# Issue 22206: Do not test the version of glpk

Issue created by migration from https://trac.sagemath.org/ticket/22443

Original creator: infinity0

Original creation time: 2017-02-25 15:30:58

CC:  thansen




---

Comment by infinity0 created at 2017-02-25 15:32:05

Changing component from PLEASE CHANGE to interfaces.


---

Comment by infinity0 created at 2017-02-25 15:32:05

Changing type from PLEASE CHANGE to defect.


---

Comment by infinity0 created at 2017-02-25 15:32:05

Changing status from new to needs_review.


---

Comment by infinity0 created at 2017-02-25 15:32:05

New commits:


---

Comment by vdelecroix created at 2017-02-25 17:21:07

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-02-27 07:46:53


```
sage -t --long src/sage/numerical/mip.pyx
**********************************************************************
File "src/sage/numerical/mip.pyx", line 2521, in sage.numerical.mip.MixedIntegerLinearProgram.number_of_variables.get_backend
Failed example:
    p.solve()  # rel tol 1e-5
Expected:
    GLPK Simplex Optimizer, v...
    2 rows, 2 columns, 4 non-zeros
    *     0: obj =   7.000000000e+00 inf =   0.000e+00 (2)
    *     2: obj =   9.400000000e+00 inf =   0.000e+00 (0)
    OPTIMAL LP SOLUTION FOUND
    9.4
Got:
    GLPK Simplex Optimizer, v4.60
    2 rows, 2 columns, 4 non-zeros
    *     0: obj =   7.000000000e+00 inf =   0.000e+00 (2)
    *     2: obj =   9.400000000e+00 inf =   0.000e+00 (0)
    OPTIMAL LP SOLUTION FOUND
    9.399999999999999
**********************************************************************
1 item had failures:
   1 of  10 in sage.numerical.mip.MixedIntegerLinearProgram.number_of_variables.get_backend
    [599 tests, 1 failure, 4.98 s]
```



---

Comment by vbraun created at 2017-02-27 07:46:58

Changing status from positive_review to needs_work.


---

Comment by vdelecroix created at 2017-02-27 08:27:11

Indeed, the `# rel tol 1e-5` blocks the correct interpretation of ellipsis! There is something broken in the Sage doctest framework.


---

Comment by vdelecroix created at 2017-02-27 08:32:43

However, the tolerance allows changing `v4.60` to `v4.59999999` ;-)


---

Comment by tscrim created at 2017-02-27 16:54:45

I don't think this has ever come up before (nor do I think it really will again). I would just work around this by storing the answer and manually comparing it with maybe (a big maybe) leaving a comment for anyone who is wondering about this later.


---

Comment by vbraun created at 2017-02-27 18:52:16

It can't really work when comparing with tolerance, you'd need to know how many floating point numbers are inside the ellipsis to match up want/have values.


---

Comment by vdelecroix created at 2017-02-27 22:09:45

I am pushing a fix in a minute.


---

Comment by vdelecroix created at 2017-02-27 22:11:23

New commits:


---

Comment by vdelecroix created at 2017-02-27 22:11:23

Changing keywords from "" to "days84".


---

Comment by vdelecroix created at 2017-02-27 22:11:23

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2017-03-10 17:50:45

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2017-03-11 02:45:51

Replying to [comment:8 tscrim]:
> I don't think this has ever come up before (nor do I think it really will again). I would just work around this by storing the answer and manually comparing it with maybe (a big maybe) leaving a comment for anyone who is wondering about this later.


Actually a few years back Christopher, my partner in crime for sage-on-gentoo, tried to fix this. Hopefully the current solution is imaginative enough as I have moved from 4.60 to 4.61 in sage-on-gentoo and I have the failing tests - again.


---

Comment by vbraun created at 2017-03-11 10:20:36

Resolution: fixed
