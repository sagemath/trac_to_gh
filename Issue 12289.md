# Issue 12289: Replace some deprecated python functions in sage/algebras

Issue created by migration from Trac.

Original creator: aapitzsch

Original creation time: 2012-02-07 11:11:24

Assignee: jason

We should prepare moving to Python3.

Execute

```
2to3 -f has_key -f except -f idioms -f ne -f raise
```

for each *.py in sage/algebras.

See http://docs.python.org/library/2to3.html#fixers for meaning of the parameters.


---

Comment by aapitzsch created at 2012-02-07 11:14:12

Changing status from new to needs_review.


---

Comment by davidloeffler created at 2012-03-12 10:27:59

This conflicts with #12484 (merged in 5.0.beta5) -- can you rebase it?


---

Comment by davidloeffler created at 2012-03-12 10:27:59

Changing status from needs_review to needs_work.


---

Attachment


---

Comment by aapitzsch created at 2012-03-12 12:34:48

Rebased.


---

Comment by aapitzsch created at 2012-03-12 12:34:48

Changing status from needs_work to needs_review.


---

Comment by davidloeffler created at 2012-03-12 12:37:28

I've added #12484 as a dependency (since there is a copy of the patchbot still running against 4.8)


---

Comment by davidloeffler created at 2012-03-12 21:11:29

I don't like the change at line 148 of `free_algebra_quotient`:

```
 	148	        return isinstance(self, type(right)) and \ 
149	149	               self.ngens() == right.ngens() and \ 
150	150	               self.rank() == right.rank() and \ 
151	151	               self.module() == right.module() and \ 
```


If `type(right)` was some very generic base class like SageObject, then the first statement would be True, but the remaining ones would be completely meaningless, so you'd get weird errors being raised. It should probably be ` isinstance(other, FreeAlgebraQuotient)` or something like that.

That is my only disagreement with this patch, so if you can do a tiny fix for that I'll happily give it a positive review.


---

Comment by davidloeffler created at 2012-03-12 21:11:29

Changing status from needs_review to needs_work.


---

Attachment

Apply after trac_12461.patch


---

Comment by aapitzsch created at 2012-03-12 23:13:49

Changing status from needs_work to needs_review.


---

Comment by aapitzsch created at 2012-03-12 23:13:49

Replying to [comment:5 davidloeffler]:
> If `type(right)` was some very generic base class like SageObject, then the first statement would be True, but the remaining ones would be completely meaningless, so you'd get weird errors being raised. It should probably be ` isinstance(other, FreeAlgebraQuotient)` or something like that.

You are right. I couldn't think of another possible type, so I used `FreeAlgebraQuotient`.


---

Comment by davidloeffler created at 2012-03-12 23:27:04

The double colon after EXAMPLES that your new patch adds shouldn't be there, and it causes an error in building the docs:

```
/storage/masiao/sage-5.0.beta7-patchbot/local/lib/python2.7/site-packages/sage/algebras/free_algebra_quotient.py:docstring of sage.algebras.free_algebra_quotient.FreeAlgebraQuotient:10: WARNING: Literal block expected; none found.
```



---

Comment by davidloeffler created at 2012-03-12 23:27:04

Changing status from needs_review to needs_work.


---

Comment by davidloeffler created at 2012-03-12 23:42:19

apply over trac_12461.patch


---

Attachment

Here's a strict subset of your patch (literally obtained by deleting one of the two hunks from your patch in a text editor). If you're happy with that, you can set this to positive review.


---

Comment by davidloeffler created at 2012-03-12 23:45:38

Changing status from needs_work to needs_review.


---

Comment by aapitzsch created at 2012-03-12 23:49:26

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-03-13 20:35:21

Please clarify which patches have to be added.


---

Comment by aapitzsch created at 2012-03-13 21:13:42

Add
 1. trac_12461.patch
 1. trac_12461_2b.patch


---

Comment by jdemeyer created at 2012-03-28 10:05:05

Resolution: fixed
