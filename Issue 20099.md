# Issue 20099: Add more features to mq.SBox

archive/issues_020099.json:
```json
{
    "body": "CC:  @malb\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/20336\n\n",
    "created_at": "2016-03-31T12:36:48Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "Add more features to mq.SBox",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20099",
    "user": "@rusydi"
}
```
CC:  @malb



Issue created by migration from https://trac.sagemath.org/ticket/20336





---

archive/issue_comments_276952.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to cryptography.",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276952",
    "user": "@rusydi"
}
```

Changing component from PLEASE CHANGE to cryptography.



---

archive/issue_comments_276953.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276953",
    "user": "@rusydi"
}
```

New commits:



---

archive/issue_comments_276954.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276954",
    "user": "@rusydi"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_276955.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276955",
    "user": "@rusydi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_276956.json:
```json
{
    "body": "Changing keywords from \"\" to \"SBox, cryptography\".",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276956",
    "user": "@rusydi"
}
```

Changing keywords from "" to "SBox, cryptography".



---

archive/issue_comments_276957.json:
```json
{
    "body": "I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:\n\n- Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)\n- Instead of `\\mathbb{F}_2`, you should use the macro `\\GF{2}` for consistency with the rest of Sage.\n- Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.\n- The input block should be formatted like this:\n  {{{\n        - ``b`` -- either an integer or a tuple of `\\GF{2}` elements of\n          length ``self.n``\n  }}}\n- Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.\n- It is better to use `\\mathrm{wt}` or `\\operatorname{wt}` instead of `\\text{wt}` (this is a latex thing having to do with spacing rules).\n- You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).\n- Try to keep lines less than 80 characters long\n- `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.\n- All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.\n- I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.\n- In the doc, do ```TypeError```.\n\nOtherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.\n\nAlso is this your first contribution to Sage?",
    "created_at": "2016-03-31T14:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276957",
    "user": "@tscrim"
}
```

I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:

- Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)
- Instead of `\mathbb{F}_2`, you should use the macro `\GF{2}` for consistency with the rest of Sage.
- Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.
- The input block should be formatted like this:
  {{{
        - ``b`` -- either an integer or a tuple of `\GF{2}` elements of
          length ``self.n``
  }}}
- Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.
- It is better to use `\mathrm{wt}` or `\operatorname{wt}` instead of `\text{wt}` (this is a latex thing having to do with spacing rules).
- You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).
- Try to keep lines less than 80 characters long
- `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.
- All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.
- I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.
- In the doc, do ```TypeError```.

Otherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.

Also is this your first contribution to Sage?



---

archive/issue_comments_276958.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-01T14:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276958",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_276959.json:
```json
{
    "body": "Hi,\n\nThanks, I have updated it according to the initial comment. And yes, this is my first contribution to SAGE.\n\n-- Rusydi\n\nReplying to [comment:4 tscrim]:\n> I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:\n> \n> - Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)\n> - Instead of `\\mathbb{F}_2`, you should use the macro `\\GF{2}` for consistency with the rest of Sage.\n> - Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.\n> - The input block should be formatted like this:\n>   {{{\n>         - ``b`` -- either an integer or a tuple of `\\GF{2}` elements of\n>           length ``self.n``\n>   }}}\n> - Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.\n> - It is better to use `\\mathrm{wt}` or `\\operatorname{wt}` instead of `\\text{wt}` (this is a latex thing having to do with spacing rules).\n> - You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).\n> - Try to keep lines less than 80 characters long\n> - `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.\n> - All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.\n> - I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.\n> - In the doc, do ```TypeError```.\n> \n> Otherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.\n> \n> Also is this your first contribution to Sage?",
    "created_at": "2016-04-01T14:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276959",
    "user": "@rusydi"
}
```

Hi,

Thanks, I have updated it according to the initial comment. And yes, this is my first contribution to SAGE.

-- Rusydi

Replying to [comment:4 tscrim]:
> I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:
> 
> - Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)
> - Instead of `\mathbb{F}_2`, you should use the macro `\GF{2}` for consistency with the rest of Sage.
> - Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.
> - The input block should be formatted like this:
>   {{{
>         - ``b`` -- either an integer or a tuple of `\GF{2}` elements of
>           length ``self.n``
>   }}}
> - Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.
> - It is better to use `\mathrm{wt}` or `\operatorname{wt}` instead of `\text{wt}` (this is a latex thing having to do with spacing rules).
> - You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).
> - Try to keep lines less than 80 characters long
> - `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.
> - All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.
> - I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.
> - In the doc, do ```TypeError```.
> 
> Otherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.
> 
> Also is this your first contribution to Sage?



---

archive/issue_comments_276960.json:
```json
{
    "body": "Welcome to Sage! This is a very well-done submission.\n\nNow that you are using ``@`cached_method`, you don't need the `_autocorrelation_matrix` attribute and can remove this code:\n\n```\n        try:\n            return self._autocorrelation_matrix\n        except AttributeError:\n            pass\n```\n\n(similarly for the `linearly_approximation_matrix`).\n\nMartin, will/can you be doing a review of the math parts?",
    "created_at": "2016-04-02T13:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276960",
    "user": "@tscrim"
}
```

Welcome to Sage! This is a very well-done submission.

Now that you are using ``@`cached_method`, you don't need the `_autocorrelation_matrix` attribute and can remove this code:

```
        try:
            return self._autocorrelation_matrix
        except AttributeError:
            pass
```

(similarly for the `linearly_approximation_matrix`).

Martin, will/can you be doing a review of the math parts?



---

archive/issue_comments_276961.json:
```json
{
    "body": "Hi all, I took a look at the ticket. It's very nice! The only thing I noticed is that you're adding new functions for `differential_uniformity`. Wouldn't an alias be sufficient, e.g. `differential_uniformity = maximal_difference_probability_absolute`?",
    "created_at": "2016-04-03T10:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276961",
    "user": "@malb"
}
```

Hi all, I took a look at the ticket. It's very nice! The only thing I noticed is that you're adding new functions for `differential_uniformity`. Wouldn't an alias be sufficient, e.g. `differential_uniformity = maximal_difference_probability_absolute`?



---

archive/issue_comments_276962.json:
```json
{
    "body": "PS: We should move mq.SBox to some other place. It has almost nothing to do with MQ any more, it's much more general now. But that's another ticket.",
    "created_at": "2016-04-03T10:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276962",
    "user": "@malb"
}
```

PS: We should move mq.SBox to some other place. It has almost nothing to do with MQ any more, it's much more general now. But that's another ticket.



---

archive/issue_comments_276963.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-03T20:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276963",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_276964.json:
```json
{
    "body": "This is good from my viewpoint.",
    "created_at": "2016-04-04T00:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276964",
    "user": "@tscrim"
}
```

This is good from my viewpoint.



---

archive/issue_comments_276965.json:
```json
{
    "body": "Same here.",
    "created_at": "2016-04-04T09:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276965",
    "user": "@malb"
}
```

Same here.



---

archive/issue_comments_276966.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-04-04T09:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276966",
    "user": "@malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_276967.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-04-05T12:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20099#issuecomment-276967",
    "user": "@vbraun"
}
```

Resolution: fixed
