# Issue 20099: Add more features to mq.SBox

Issue created by migration from https://trac.sagemath.org/ticket/20336

Original creator: ruhm

Original creation time: 2016-03-31 12:36:48

CC:  malb




---

Comment by ruhm created at 2016-03-31 12:43:49

Changing component from PLEASE CHANGE to cryptography.


---

Comment by ruhm created at 2016-03-31 12:43:49

New commits:


---

Comment by ruhm created at 2016-03-31 12:43:49

Changing type from PLEASE CHANGE to enhancement.


---

Comment by ruhm created at 2016-03-31 12:43:49

Changing status from new to needs_review.


---

Comment by ruhm created at 2016-03-31 12:43:49

Changing keywords from "" to "SBox, cryptography".


---

Comment by tscrim created at 2016-03-31 14:34:47

I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:

- Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)
- Instead of `\mathbb{F}_2`, you should use the macro `\GF{2}` for consistency with the rest of Sage.
- Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.
- The input block should be formatted like this:
  {{{
        - ``b`` -- either an integer or a tuple of `\GF{2}` elements of
          length ``self.n``
  }}}
- Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.
- It is better to use `\mathrm{wt}` or `\operatorname{wt}` instead of `\text{wt}` (this is a latex thing having to do with spacing rules).
- You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).
- Try to keep lines less than 80 characters long
- `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.
- All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.
- I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.
- In the doc, do ```TypeError```.

Otherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.

Also is this your first contribution to Sage?


---

Comment by git created at 2016-04-01 14:47:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ruhm created at 2016-04-01 14:50:20

Hi,

Thanks, I have updated it according to the initial comment. And yes, this is my first contribution to SAGE.

-- Rusydi

Replying to [comment:4 tscrim]:
> I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:
> 
> - Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)
> - Instead of `\mathbb{F}_2`, you should use the macro `\GF{2}` for consistency with the rest of Sage.
> - Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.
> - The input block should be formatted like this:
>   {{{
>         - ``b`` -- either an integer or a tuple of `\GF{2}` elements of
>           length ``self.n``
>   }}}
> - Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.
> - It is better to use `\mathrm{wt}` or `\operatorname{wt}` instead of `\text{wt}` (this is a latex thing having to do with spacing rules).
> - You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).
> - Try to keep lines less than 80 characters long
> - `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.
> - All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.
> - I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.
> - In the doc, do ```TypeError```.
> 
> Otherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.
> 
> Also is this your first contribution to Sage?


---

Comment by tscrim created at 2016-04-02 13:57:04

Welcome to Sage! This is a very well-done submission.

Now that you are using ``@`cached_method`, you don't need the `_autocorrelation_matrix` attribute and can remove this code:

```
        try:
            return self._autocorrelation_matrix
        except AttributeError:
            pass
```

(similarly for the `linearly_approximation_matrix`).

Martin, will/can you be doing a review of the math parts?


---

Comment by malb created at 2016-04-03 10:19:44

Hi all, I took a look at the ticket. It's very nice! The only thing I noticed is that you're adding new functions for `differential_uniformity`. Wouldn't an alias be sufficient, e.g. `differential_uniformity = maximal_difference_probability_absolute`?


---

Comment by malb created at 2016-04-03 10:21:23

PS: We should move mq.SBox to some other place. It has almost nothing to do with MQ any more, it's much more general now. But that's another ticket.


---

Comment by git created at 2016-04-03 20:11:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2016-04-04 00:40:55

This is good from my viewpoint.


---

Comment by malb created at 2016-04-04 09:00:09

Same here.


---

Comment by malb created at 2016-04-04 09:00:09

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-04-05 12:35:00

Resolution: fixed
