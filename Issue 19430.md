# Issue 19430: Export graphics objects to ipe

archive/issues_019430.json:
```json
{
    "body": "CC:  @saliola @jasongrout @williamstein @fchapoton @kwankyu\n\nKeywords: ipe, graphics\n\nThis ticket includes [https://github.com/otfried/ipe-tools/tree/master/matplotlib](https://github.com/otfried/ipe-tools/tree/master/matplotlib) into matplotlib's spkg and add the option to save graphics objects as .ipe files to be edited with ipe [http://ipe.otfried.org/](http://ipe.otfried.org/)\n\nFor some reason `figure.tight_layout()` fails with `FigureCanvasIpe` and I had to put it in the part of the code that runs conditionally.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19667\n\n",
    "created_at": "2015-12-03T23:01:01Z",
    "labels": [
        "graphics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Export graphics objects to ipe",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19430",
    "user": "@etn40ff"
}
```
CC:  @saliola @jasongrout @williamstein @fchapoton @kwankyu

Keywords: ipe, graphics

This ticket includes [https://github.com/otfried/ipe-tools/tree/master/matplotlib](https://github.com/otfried/ipe-tools/tree/master/matplotlib) into matplotlib's spkg and add the option to save graphics objects as .ipe files to be edited with ipe [http://ipe.otfried.org/](http://ipe.otfried.org/)

For some reason `figure.tight_layout()` fails with `FigureCanvasIpe` and I had to put it in the part of the code that runs conditionally.

Issue created by migration from https://trac.sagemath.org/ticket/19667





---

archive/issue_comments_267195.json:
```json
{
    "body": "if you want a review, you should put the ticket to needs_review !",
    "created_at": "2015-12-05T16:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267195",
    "user": "@fchapoton"
}
```

if you want a review, you should put the ticket to needs_review !



---

archive/issue_comments_267196.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-05T16:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267196",
    "user": "@etn40ff"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_267197.json:
```json
{
    "body": "Oops I forgot. \nNeed review now\nS.",
    "created_at": "2015-12-05T16:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267197",
    "user": "@etn40ff"
}
```

Oops I forgot. 
Need review now
S.



---

archive/issue_comments_267198.json:
```json
{
    "body": "The doctest of save as ipe is not formatted correctly (missing `::` and blank line after that)\n\nThere is a trivial failing doctest (see patchbot report)\n\nBut most importantly, changing matplotlib pkg without changing the version seems rather strange..",
    "created_at": "2015-12-06T00:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267198",
    "user": "@fchapoton"
}
```

The doctest of save as ipe is not formatted correctly (missing `::` and blank line after that)

There is a trivial failing doctest (see patchbot report)

But most importantly, changing matplotlib pkg without changing the version seems rather strange..



---

archive/issue_comments_267199.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-06T19:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267199",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267200.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-06T19:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267200",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267201.json:
```json
{
    "body": "Did you propose your enhancement to matplotlib? There is no point in making a patch that is not discussed upstream. If you did so, please fill the `Report Upstream:` field of the ticket and mention a link to the actual discussion.",
    "created_at": "2015-12-06T23:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267201",
    "user": "@videlec"
}
```

Did you propose your enhancement to matplotlib? There is no point in making a patch that is not discussed upstream. If you did so, please fill the `Report Upstream:` field of the ticket and mention a link to the actual discussion.



---

archive/issue_comments_267202.json:
```json
{
    "body": "I had not thought of doing so beforehand because the patch is basically\ncopy-paste from an ipe addons repository. I did report it upstream now, the\nrelevant discussion should happen here:\nhttps://github.com/matplotlib/matplotlib/issues/5630",
    "created_at": "2015-12-07T00:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267202",
    "user": "@etn40ff"
}
```

I had not thought of doing so beforehand because the patch is basically
copy-paste from an ipe addons repository. I did report it upstream now, the
relevant discussion should happen here:
https://github.com/matplotlib/matplotlib/issues/5630



---

archive/issue_comments_267203.json:
```json
{
    "body": "Replying to [comment:7 etn40ff]:\n> I had not thought of doing so beforehand because the patch is basically\n> copy-paste from an ipe addons repository. I did report it upstream now, the\n> relevant discussion should happen here:\n> https://github.com/matplotlib/matplotlib/issues/5630\n\nIf it is a copy-paste then:\n- mention from where it is copied\n- do you ask to the copied people whether they care about inclusion in matplotlib or Sage?",
    "created_at": "2015-12-08T18:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267203",
    "user": "@videlec"
}
```

Replying to [comment:7 etn40ff]:
> I had not thought of doing so beforehand because the patch is basically
> copy-paste from an ipe addons repository. I did report it upstream now, the
> relevant discussion should happen here:
> https://github.com/matplotlib/matplotlib/issues/5630

If it is a copy-paste then:
- mention from where it is copied
- do you ask to the copied people whether they care about inclusion in matplotlib or Sage?



---

archive/issue_comments_267204.json:
```json
{
    "body": "Isn't the mention in SPKG.txt not enough as mentioning goes?\n\nI did not contatct otfried (the developer of the file in question) yet but I did start a topic on this on matplotlib issue tracker; I am not at all affiliated with matplotlib so I think it is not my right to ask him about inclusion into matplotlib.",
    "created_at": "2015-12-08T19:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267204",
    "user": "@etn40ff"
}
```

Isn't the mention in SPKG.txt not enough as mentioning goes?

I did not contatct otfried (the developer of the file in question) yet but I did start a topic on this on matplotlib issue tracker; I am not at all affiliated with matplotlib so I think it is not my right to ask him about inclusion into matplotlib.



---

archive/issue_comments_267205.json:
```json
{
    "body": "Is there a particular reason why we need to be able to export in a specific file format of a particular graphics editor? Usually editors will ensure they can read the main interchange formats (SVG would be the appropriate format here and a brief look at IPE suggests that it can import SVG files). There is a cost in adopting the code proposed here: the code needs to be maintained/ported/updated/documented/tested for as long as it remains in sage. What's the benefit if one could also just save and SVG file and import that into IPE for further processing?\n\n(hint: briefly browsing the docs indicates that IPE7 cannot even read IPE6 files, so it doesn't seem the fileformat is very mature yet)",
    "created_at": "2015-12-08T20:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267205",
    "user": "@nbruin"
}
```

Is there a particular reason why we need to be able to export in a specific file format of a particular graphics editor? Usually editors will ensure they can read the main interchange formats (SVG would be the appropriate format here and a brief look at IPE suggests that it can import SVG files). There is a cost in adopting the code proposed here: the code needs to be maintained/ported/updated/documented/tested for as long as it remains in sage. What's the benefit if one could also just save and SVG file and import that into IPE for further processing?

(hint: briefly browsing the docs indicates that IPE7 cannot even read IPE6 files, so it doesn't seem the fileformat is very mature yet)



---

archive/issue_comments_267206.json:
```json
{
    "body": "As you said it should be the editor's job to be able to import from a standard format. This is not the case at the moment and I guess it will never be: if I understood correctly the idea is to keep the editor as minimal as possible. \n\nI personally am interested in post-processing images produced by sage and,\nthinking this might be interesting for others, I made a patch. Of course this\nintroduces a maintaining cost that we probably could avoid. On the other hand I\ndo not see this feature being implemented upstream any time soon so this is the\nonly reasonable option I could come up with. If you feel it goes beyond the\nguidelines of sage development I am ok with retiring this patch.",
    "created_at": "2015-12-08T22:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267206",
    "user": "@etn40ff"
}
```

As you said it should be the editor's job to be able to import from a standard format. This is not the case at the moment and I guess it will never be: if I understood correctly the idea is to keep the editor as minimal as possible. 

I personally am interested in post-processing images produced by sage and,
thinking this might be interesting for others, I made a patch. Of course this
introduces a maintaining cost that we probably could avoid. On the other hand I
do not see this feature being implemented upstream any time soon so this is the
only reasonable option I could come up with. If you feel it goes beyond the
guidelines of sage development I am ok with retiring this patch.



---

archive/issue_comments_267207.json:
```json
{
    "body": "does not longer apply\n\nand putting it in \"needs work\" will help avoid to spend patchbot time here",
    "created_at": "2016-03-02T16:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267207",
    "user": "@fchapoton"
}
```

does not longer apply

and putting it in "needs work" will help avoid to spend patchbot time here



---

archive/issue_comments_267208.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-02T16:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19430#issuecomment-267208",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.
