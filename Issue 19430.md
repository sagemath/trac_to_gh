# Issue 19430: Export graphics objects to ipe

Issue created by migration from https://trac.sagemath.org/ticket/19667

Original creator: etn40ff

Original creation time: 2015-12-03 23:01:01

CC:  saliola jason was chapoton klee

Keywords: ipe, graphics

This ticket includes [https://github.com/otfried/ipe-tools/tree/master/matplotlib](https://github.com/otfried/ipe-tools/tree/master/matplotlib) into matplotlib's spkg and add the option to save graphics objects as .ipe files to be edited with ipe [http://ipe.otfried.org/](http://ipe.otfried.org/)

For some reason `figure.tight_layout()` fails with `FigureCanvasIpe` and I had to put it in the part of the code that runs conditionally.


---

Comment by chapoton created at 2015-12-05 16:45:51

if you want a review, you should put the ticket to needs_review !


---

Comment by etn40ff created at 2015-12-05 16:49:02

Changing status from new to needs_review.


---

Comment by etn40ff created at 2015-12-05 16:49:02

Oops I forgot. 
Need review now
S.


---

Comment by chapoton created at 2015-12-06 00:45:16

The doctest of save as ipe is not formatted correctly (missing `::` and blank line after that)

There is a trivial failing doctest (see patchbot report)

But most importantly, changing matplotlib pkg without changing the version seems rather strange..


---

Comment by git created at 2015-12-06 19:05:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-12-06 19:09:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-12-06 23:41:43

Did you propose your enhancement to matplotlib? There is no point in making a patch that is not discussed upstream. If you did so, please fill the `Report Upstream:` field of the ticket and mention a link to the actual discussion.


---

Comment by etn40ff created at 2015-12-07 00:14:22

I had not thought of doing so beforehand because the patch is basically
copy-paste from an ipe addons repository. I did report it upstream now, the
relevant discussion should happen here:
https://github.com/matplotlib/matplotlib/issues/5630


---

Comment by vdelecroix created at 2015-12-08 18:06:48

Replying to [comment:7 etn40ff]:
> I had not thought of doing so beforehand because the patch is basically
> copy-paste from an ipe addons repository. I did report it upstream now, the
> relevant discussion should happen here:
> https://github.com/matplotlib/matplotlib/issues/5630

If it is a copy-paste then:
 - mention from where it is copied
 - do you ask to the copied people whether they care about inclusion in matplotlib or Sage?


---

Comment by etn40ff created at 2015-12-08 19:25:19

Isn't the mention in SPKG.txt not enough as mentioning goes?

I did not contatct otfried (the developer of the file in question) yet but I did start a topic on this on matplotlib issue tracker; I am not at all affiliated with matplotlib so I think it is not my right to ask him about inclusion into matplotlib.


---

Comment by nbruin created at 2015-12-08 20:13:08

Is there a particular reason why we need to be able to export in a specific file format of a particular graphics editor? Usually editors will ensure they can read the main interchange formats (SVG would be the appropriate format here and a brief look at IPE suggests that it can import SVG files). There is a cost in adopting the code proposed here: the code needs to be maintained/ported/updated/documented/tested for as long as it remains in sage. What's the benefit if one could also just save and SVG file and import that into IPE for further processing?

(hint: briefly browsing the docs indicates that IPE7 cannot even read IPE6 files, so it doesn't seem the fileformat is very mature yet)


---

Comment by etn40ff created at 2015-12-08 22:08:44

As you said it should be the editor's job to be able to import from a standard format. This is not the case at the moment and I guess it will never be: if I understood correctly the idea is to keep the editor as minimal as possible. 

I personally am interested in post-processing images produced by sage and,
thinking this might be interesting for others, I made a patch. Of course this
introduces a maintaining cost that we probably could avoid. On the other hand I
do not see this feature being implemented upstream any time soon so this is the
only reasonable option I could come up with. If you feel it goes beyond the
guidelines of sage development I am ok with retiring this patch.


---

Comment by chapoton created at 2016-03-02 16:12:06

does not longer apply

and putting it in "needs work" will help avoid to spend patchbot time here


---

Comment by chapoton created at 2016-03-02 16:12:06

Changing status from needs_review to needs_work.
