# Issue 17684: faster matching polynomial

archive/issues_017684.json:
```json
{
    "body": "CC:  @videlec @nathanncohen\n\nADD DESCRIPTION\n\nAdded ``matching_generating_poly``, modified ``matching_polynomial``\n\n``matching_generating_poly`` computes the matching generating polynomial\non (possibly weighted) graphs.\n\nThe algorithm (see [ButPer]) uses polynomials on nilpotent elements,\nimplemented in the class ``Hobj`` in matchpoly.pyx,\nand a greedy argument to order edges, contained in active_nodes.py\n\nThis algorithm is faster than the Godsil algorithm on large graphs.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17921\n\n",
    "created_at": "2015-03-09T19:35:02Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "faster matching polynomial",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17684",
    "user": "https://trac.sagemath.org/admin/accounts/users/pernici"
}
```
CC:  @videlec @nathanncohen

ADD DESCRIPTION

Added ``matching_generating_poly``, modified ``matching_polynomial``

``matching_generating_poly`` computes the matching generating polynomial
on (possibly weighted) graphs.

The algorithm (see [ButPer]) uses polynomials on nilpotent elements,
implemented in the class ``Hobj`` in matchpoly.pyx,
and a greedy argument to order edges, contained in active_nodes.py

This algorithm is faster than the Godsil algorithm on large graphs.

Issue created by migration from https://trac.sagemath.org/ticket/17921





---

archive/issue_comments_236100.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-11T15:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236100",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_236101.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-11T15:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236101",
    "user": "https://trac.sagemath.org/admin/accounts/users/pernici"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_236102.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-03-15T15:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236102",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_236103.json:
```json
{
    "body": "I clean the description of the ticket to make it readable. Could you try to make it understandable?",
    "created_at": "2015-03-15T15:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236103",
    "user": "https://github.com/videlec"
}
```

I clean the description of the ticket to make it readable. Could you try to make it understandable?



---

archive/issue_comments_236104.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-03-16T17:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236104",
    "user": "https://trac.sagemath.org/admin/accounts/users/pernici"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_236105.json:
```json
{
    "body": "I added an explanation on the use of nilpotent elements and two more examples.",
    "created_at": "2015-03-16T18:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236105",
    "user": "https://trac.sagemath.org/admin/accounts/users/pernici"
}
```

I added an explanation on the use of nilpotent elements and two more examples.



---

archive/issue_comments_236106.json:
```json
{
    "body": "The greedy argument to order edges in active_nodes.py orders edges in such a way that the graph\n`G_i` defined by `edges[:i]` has few nodes which have not the same degree as in `G` (active nodes).\nThis leads to few `\\eta_i` in the corresponding polynomial, so there are few terms.\nThe greedy algorithm adds edges without increasing the number of active nodes, if possible;\notherwise it adds a short path between two active nodes.\n\nThis algorithm can be probably improved using some\ngraph algorithm already in Sage, maybe an algorithm to reorder vertices used to visualize graphs.",
    "created_at": "2015-03-17T11:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236106",
    "user": "https://trac.sagemath.org/admin/accounts/users/pernici"
}
```

The greedy argument to order edges in active_nodes.py orders edges in such a way that the graph
`G_i` defined by `edges[:i]` has few nodes which have not the same degree as in `G` (active nodes).
This leads to few `\eta_i` in the corresponding polynomial, so there are few terms.
The greedy algorithm adds edges without increasing the number of active nodes, if possible;
otherwise it adds a short path between two active nodes.

This algorithm can be probably improved using some
graph algorithm already in Sage, maybe an algorithm to reorder vertices used to visualize graphs.



---

archive/issue_comments_236107.json:
```json
{
    "body": "Please try to get 100% coverage (`sage -coverage`) also in private methods. Please adhere to usual documentation guidelines: esp. start paragraphs with big caps, do not use `>>>` for examples.",
    "created_at": "2015-03-22T15:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236107",
    "user": "https://github.com/rwst"
}
```

Please try to get 100% coverage (`sage -coverage`) also in private methods. Please adhere to usual documentation guidelines: esp. start paragraphs with big caps, do not use `>>>` for examples.



---

archive/issue_comments_236108.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-03-24T21:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236108",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_236109.json:
```json
{
    "body": "failing doctests, see patchbot report\n\nplus very bad formatting of the doc",
    "created_at": "2015-03-24T21:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236109",
    "user": "https://github.com/fchapoton"
}
```

failing doctests, see patchbot report

plus very bad formatting of the doc



---

archive/issue_comments_236110.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-26T12:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236110",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_236111.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-03-26T12:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236111",
    "user": "https://trac.sagemath.org/admin/accounts/users/pernici"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_236112.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-02T10:26:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236112",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_236113.json:
```json
{
    "body": "I personally don't care about this ticket, but let me mention that it doesn't apply and that it should be rebased on top of #23126.",
    "created_at": "2017-06-02T10:26:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17684",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17684#issuecomment-236113",
    "user": "https://github.com/jdemeyer"
}
```

I personally don't care about this ticket, but let me mention that it doesn't apply and that it should be rebased on top of #23126.
