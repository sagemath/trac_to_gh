# Issue 15530: Upgrade PARI to 2.7

archive/issues_015530.json:
```json
{
    "body": "CC:  jpflori pbruin snark\n\nPARI 2.7 is not yet released, but we can prepare for the release by packaging PARI-2.6.2\n\nIssue created by migration from https://trac.sagemath.org/ticket/15767\n\n",
    "created_at": "2014-01-30T16:27:35Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Upgrade PARI to 2.7",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15530",
    "user": "jdemeyer"
}
```
CC:  jpflori pbruin snark

PARI 2.7 is not yet released, but we can prepare for the release by packaging PARI-2.6.2

Issue created by migration from https://trac.sagemath.org/ticket/15767





---

archive/issue_comments_200588.json:
```json
{
    "body": "Good plan; there have been quite a few changes (also in the interface) from 2.5 to 2.6, but 2.7 (being a stable release) will be close to 2.6.2.",
    "created_at": "2014-01-30T16:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200588",
    "user": "pbruin"
}
```

Good plan; there have been quite a few changes (also in the interface) from 2.5 to 2.6, but 2.7 (being a stable release) will be close to 2.6.2.



---

archive/issue_comments_200589.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-02-09T01:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200589",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_200590.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T12:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200590",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200591.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T14:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200591",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200592.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T14:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200592",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200593.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T14:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200593",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200594.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T15:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200594",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200595.json:
```json
{
    "body": "This version compiles fine, but there are about a million doctest failures :-(",
    "created_at": "2014-02-09T15:02:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200595",
    "user": "jdemeyer"
}
```

This version compiles fine, but there are about a million doctest failures :-(



---

archive/issue_comments_200596.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T16:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200596",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200597.json:
```json
{
    "body": "This is a serious regression:\n\n```\nsage: EllipticCurve('90c3').integral_points(both_signs=False)\n[(-15 : 7 : 1), (1 : 39 : 1), (21 : 79 : 1)]\n```\n",
    "created_at": "2014-02-09T17:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200597",
    "user": "jdemeyer"
}
```

This is a serious regression:

```
sage: EllipticCurve('90c3').integral_points(both_signs=False)
[(-15 : 7 : 1), (1 : 39 : 1), (21 : 79 : 1)]
```




---

archive/issue_comments_200598.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T17:55:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200598",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200599.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T20:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200599",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200600.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T20:59:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200600",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200601.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-09T21:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200601",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200602.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-10T09:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200602",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200603.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-11T09:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200603",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200604.json:
```json
{
    "body": "I know this isn't ready yet; I was just browsing the branch to see how many changes need to be made.  Are you sure the following is correct?  I think the purpose of the `ellinit()` call is to allow the user to specify the curve in short Weierstrass form (`ellinit([a, b]) --> y^2 = x^3 + a*x + b`).\n\n```diff\n@@ -1903,7 +1903,7 @@ bnfellrank(bnf,ell,help=[],bigflag=1,flag3=1) =\nlocal(urst,urst1,den,factden,eqtheta,rnfeq,bbnf,ext,rang);\nif( DEBUGLEVEL_ell >= 3, print(\"entree dans bnfellrank\"));\n- if( #ell <= 5, ell = ellinit(ell,1));\n+ ell = vector(5, i, ell[i]);\n\\\\ removes the coefficients a1 and a3\nurst = [1,0,0,0];\n```\n",
    "created_at": "2014-02-11T11:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200604",
    "user": "pbruin"
}
```

I know this isn't ready yet; I was just browsing the branch to see how many changes need to be made.  Are you sure the following is correct?  I think the purpose of the `ellinit()` call is to allow the user to specify the curve in short Weierstrass form (`ellinit([a, b]) --> y^2 = x^3 + a*x + b`).

```diff
@@ -1903,7 +1903,7 @@ bnfellrank(bnf,ell,help=[],bigflag=1,flag3=1) =
local(urst,urst1,den,factden,eqtheta,rnfeq,bbnf,ext,rang);
if( DEBUGLEVEL_ell >= 3, print("entree dans bnfellrank"));
- if( #ell <= 5, ell = ellinit(ell,1));
+ ell = vector(5, i, ell[i]);
\\ removes the coefficients a1 and a3
urst = [1,0,0,0];
```




---

archive/issue_comments_200605.json:
```json
{
    "body": "Replying to [comment:23 pbruin]:\n> I know this isn't ready yet; I was just browsing the branch to see how many changes need to be made.  Are you sure the following is correct?  I think the purpose of the `ellinit()` call is to allow the user to specify the curve in short Weierstrass form (`ellinit([a, b]) --> y^2 = x^3 + a*x + b`).\n> {{{\n> #!diff\n> `@``@` -1903,7 +1903,7 `@``@` bnfellrank(bnf,ell,help=[],bigflag=1,flag3=1) =\n> local(urst,urst1,den,factden,eqtheta,rnfeq,bbnf,ext,rang);\n> if( DEBUGLEVEL_ell >= 3, print(\"entree dans bnfellrank\"));\n> - if( #ell <= 5, ell = ellinit(ell,1));\n> + ell = vector(5, i, ell[i]);\n> \\\\ removes the coefficients a1 and a3\n> urst = [1,0,0,0];\n> }}}\n\nOK, I see what you mean. We could change it to\n\n```\nell = ellinit(ell);\nell = vector(5, i, ell[i]);\n```\n",
    "created_at": "2014-02-11T11:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200605",
    "user": "jdemeyer"
}
```

Replying to [comment:23 pbruin]:
> I know this isn't ready yet; I was just browsing the branch to see how many changes need to be made.  Are you sure the following is correct?  I think the purpose of the `ellinit()` call is to allow the user to specify the curve in short Weierstrass form (`ellinit([a, b]) --> y^2 = x^3 + a*x + b`).
> {{{
> #!diff
> `@``@` -1903,7 +1903,7 `@``@` bnfellrank(bnf,ell,help=[],bigflag=1,flag3=1) =
> local(urst,urst1,den,factden,eqtheta,rnfeq,bbnf,ext,rang);
> if( DEBUGLEVEL_ell >= 3, print("entree dans bnfellrank"));
> - if( #ell <= 5, ell = ellinit(ell,1));
> + ell = vector(5, i, ell[i]);
> \\ removes the coefficients a1 and a3
> urst = [1,0,0,0];
> }}}

OK, I see what you mean. We could change it to

```
ell = ellinit(ell);
ell = vector(5, i, ell[i]);
```




---

archive/issue_comments_200606.json:
```json
{
    "body": "We could also try to merge #11005 first, maybe that helps.",
    "created_at": "2014-02-11T11:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200606",
    "user": "jdemeyer"
}
```

We could also try to merge #11005 first, maybe that helps.



---

archive/issue_comments_200607.json:
```json
{
    "body": "Replying to [comment:25 jdemeyer]:\n> We could also try to merge #11005 first, maybe that helps.\nOK, I'll take a look at that one.",
    "created_at": "2014-02-11T11:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200607",
    "user": "pbruin"
}
```

Replying to [comment:25 jdemeyer]:
> We could also try to merge #11005 first, maybe that helps.
OK, I'll take a look at that one.



---

archive/issue_comments_200608.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-11T17:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200608",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200609.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-12T10:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200609",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200610.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-12T15:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200610",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200611.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-12T16:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200611",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200612.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-13T09:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200612",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200613.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-13T10:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200613",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200614.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-13T11:17:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200614",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200615.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-15T09:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200615",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200616.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-16T11:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200616",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200617.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-21T21:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200617",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200618.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-21T21:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200618",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200619.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-21T22:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200619",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200620.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-24T12:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200620",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200621.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-04T09:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200621",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200622.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-04T18:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200622",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200623.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-04T18:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200623",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200624.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-05T06:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200624",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200625.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-05T13:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200625",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200626.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-06T10:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200626",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200627.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-03-06T10:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200627",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_200628.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-06T10:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200628",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200629.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-06T10:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200629",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200630.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-06T12:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200630",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200631.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-18T08:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200631",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200632.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-03-18T08:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200632",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_200633.json:
```json
{
    "body": "Hi Jeroen,\n\nWhat's the status of this?\nAre there still hundreds of failing stuff?\nWith the forced pushes its not that easy to see how the situtation evolves.\nAnd I've not tested it yet.\n\nWhatsoever, thanks for the hard work.",
    "created_at": "2014-03-18T09:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200633",
    "user": "jpflori"
}
```

Hi Jeroen,

What's the status of this?
Are there still hundreds of failing stuff?
With the forced pushes its not that easy to see how the situtation evolves.
And I've not tested it yet.

Whatsoever, thanks for the hard work.



---

archive/issue_comments_200634.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-18T09:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200634",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200635.json:
```json
{
    "body": "Replying to [comment:60 jpflori]:\n> Hi Jeroen,\n> \n> What's the status of this?\n> Are there still hundreds of failing stuff?\n> With the forced pushes its not that easy to see how the situtation evolves.\n> And I've not tested it yet.\nIt's almost ready. The announcement of the PARI-2.7 release candidate gave me a good reason to finish this ticket. Sage doctests found many (10 or so) bugs in PARI, all of which have been fixed upstream.\n\nThe forced pushes are the most convenient way to develop this, otherwise I would have 100 commits and several merges in between. I will now look into the remaining doctest failures.",
    "created_at": "2014-03-18T09:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200635",
    "user": "jdemeyer"
}
```

Replying to [comment:60 jpflori]:
> Hi Jeroen,
> 
> What's the status of this?
> Are there still hundreds of failing stuff?
> With the forced pushes its not that easy to see how the situtation evolves.
> And I've not tested it yet.
It's almost ready. The announcement of the PARI-2.7 release candidate gave me a good reason to finish this ticket. Sage doctests found many (10 or so) bugs in PARI, all of which have been fixed upstream.

The forced pushes are the most convenient way to develop this, otherwise I would have 100 commits and several merges in between. I will now look into the remaining doctest failures.



---

archive/issue_comments_200636.json:
```json
{
    "body": "Sure, I wasn't criticizing your way of doing things.\nJust get a status report if possible at this point and know if it's worth having a look at it and potentially give you a hand.",
    "created_at": "2014-03-18T09:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200636",
    "user": "jpflori"
}
```

Sure, I wasn't criticizing your way of doing things.
Just get a status report if possible at this point and know if it's worth having a look at it and potentially give you a hand.



---

archive/issue_comments_200637.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-18T10:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200637",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200638.json:
```json
{
    "body": "This passes 64-bit doctests for me. Now building a 32-bit version to check that...",
    "created_at": "2014-03-18T18:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200638",
    "user": "jdemeyer"
}
```

This passes 64-bit doctests for me. Now building a 32-bit version to check that...



---

archive/issue_comments_200639.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-23T13:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200639",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200640.json:
```json
{
    "body": "Hi,\n\nI didn't see any changes in spkg-install in the last commit. Is there any? I am asking because in #16017 we noticed that pari doesn't have the right install_name for OS X. It turns out [http://trac.sagemath.org/ticket/16017#comment:43](http://trac.sagemath.org/ticket/16017#comment:43) that it is caused by cruft in spkg-install. I don't think it has any value and I am wondering if you could remove it as a part of this ticket.",
    "created_at": "2014-04-01T23:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200640",
    "user": "fbissey"
}
```

Hi,

I didn't see any changes in spkg-install in the last commit. Is there any? I am asking because in #16017 we noticed that pari doesn't have the right install_name for OS X. It turns out [http://trac.sagemath.org/ticket/16017#comment:43](http://trac.sagemath.org/ticket/16017#comment:43) that it is caused by cruft in spkg-install. I don't think it has any value and I am wondering if you could remove it as a part of this ticket.



---

archive/issue_comments_200641.json:
```json
{
    "body": "Replying to [comment:68 fbissey]:\n> Hi,\n> \n> I didn't see any changes in spkg-install in the last commit. Is there any?\nNo, this ticket does not change `spkg-install`. So you should make the changes you propose either on #16017 or on a new ticket.",
    "created_at": "2014-04-02T06:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200641",
    "user": "jdemeyer"
}
```

Replying to [comment:68 fbissey]:
> Hi,
> 
> I didn't see any changes in spkg-install in the last commit. Is there any?
No, this ticket does not change `spkg-install`. So you should make the changes you propose either on #16017 or on a new ticket.



---

archive/issue_comments_200642.json:
```json
{
    "body": "Let me also give a general status of this ticket: the single one remaining issue is the following doctest failure on 32-bit:\n\n```\nsage -t --long src/doc/en/reference/coercion/index.rst\n**********************************************************************\nFile \"src/doc/en/reference/coercion/index.rst\", line 65, in doc.en.reference.coercion.index\nFailed example:\n    f = EllipticCurve('37a').lseries().taylor_series(10); f\nExpected:\n    0.997997869801216 + 0.00140712894524925*z - 0.000498127610960097*z^2 + 0.000118835596665956*z^3 - 0.0000215906522442707*z^4 + (3.20363155418419e-6)*z^5 + O(z^6)\nGot:\n    -0.0000405744363329341 + 2.21638825958869*z - 2.40591010134898*z^2 + 1.70010490236379*z^3 - 0.876833052881789*z^4 + 0.350599228549426*z^5 + O(z^6)\n**********************************************************************\n```\n\n\nThe problem is that the result is totally wrong.\n\nI have been busy with other things lately, so I haven't looked into this issue.",
    "created_at": "2014-04-02T06:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200642",
    "user": "jdemeyer"
}
```

Let me also give a general status of this ticket: the single one remaining issue is the following doctest failure on 32-bit:

```
sage -t --long src/doc/en/reference/coercion/index.rst
**********************************************************************
File "src/doc/en/reference/coercion/index.rst", line 65, in doc.en.reference.coercion.index
Failed example:
    f = EllipticCurve('37a').lseries().taylor_series(10); f
Expected:
    0.997997869801216 + 0.00140712894524925*z - 0.000498127610960097*z^2 + 0.000118835596665956*z^3 - 0.0000215906522442707*z^4 + (3.20363155418419e-6)*z^5 + O(z^6)
Got:
    -0.0000405744363329341 + 2.21638825958869*z - 2.40591010134898*z^2 + 1.70010490236379*z^3 - 0.876833052881789*z^4 + 0.350599228549426*z^5 + O(z^6)
**********************************************************************
```


The problem is that the result is totally wrong.

I have been busy with other things lately, so I haven't looked into this issue.



---

archive/issue_comments_200643.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-11T08:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200643",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200644.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-11T13:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200644",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200645.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-11T13:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200645",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200646.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-15T08:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200646",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200647.json:
```json
{
    "body": "Any progress on the remaining doctest failure?  I don't have access to a 32-bit machine, otherwise I could try to look into it.",
    "created_at": "2014-05-01T17:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200647",
    "user": "pbruin"
}
```

Any progress on the remaining doctest failure?  I don't have access to a 32-bit machine, otherwise I could try to look into it.



---

archive/issue_comments_200648.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-05-03T08:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200648",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200649.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-05-03T21:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200649",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200650.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-05-05T08:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200650",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200651.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-07T11:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200651",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200652.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-05-07T11:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200652",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_200653.json:
```json
{
    "body": "Are there any obstacles to finishing this ticket soon?",
    "created_at": "2014-06-05T11:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200653",
    "user": "pbruin"
}
```

Are there any obstacles to finishing this ticket soon?



---

archive/issue_comments_200654.json:
```json
{
    "body": "Only [comment:70]...",
    "created_at": "2014-06-05T18:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200654",
    "user": "jdemeyer"
}
```

Only [comment:70]...



---

archive/issue_comments_200655.json:
```json
{
    "body": "Good news, I found one of my boxes is able to reproduce the problem of comment 70. Now I need to dig what happens... first step would be trying to see if I can reproduce it in gp, because at that point that could also be an upstream issue.",
    "created_at": "2014-06-09T17:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200655",
    "user": "Snark"
}
```

Good news, I found one of my boxes is able to reproduce the problem of comment 70. Now I need to dig what happens... first step would be trying to see if I can reproduce it in gp, because at that point that could also be an upstream issue.



---

archive/issue_comments_200656.json:
```json
{
    "body": "Using ~/.sage/dokchitser.log, I was able to check the computation against debian's pari-gp package, and find there is the same discrepancy between amd64 and i386, so I reported a problem in debian.",
    "created_at": "2014-06-09T19:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200656",
    "user": "Snark"
}
```

Using ~/.sage/dokchitser.log, I was able to check the computation against debian's pari-gp package, and find there is the same discrepancy between amd64 and i386, so I reported a problem in debian.



---

archive/issue_comments_200657.json:
```json
{
    "body": "I can reproduce this inside GP 2.7.1 (patched version of this ticket) on ARM using the following commands (also adapted from `dokchitser.log`):\n\n```\nread(\"local/share/sage/ext/pari/dokchitser/computel.gp\");\ndefault(realprecision, 19);\nconductor = 37;\ngammaV = [0, 1];\nweight = 2;\nsgn = -1;\nLpoles = [];\nLresidues = automatic;\ne = ellinit([0, 0, 1, -1, 0]);\na(k) = ellak(e, k);\ninitLdata(\"a(k)\", 1.0);\nv = Vec(Lseries(10.0, , 5));\nprint(v)\n```\n\nOne gets the correct answer after replacing 19 by 20 in the second line, presumably because this increases the precision by one word.",
    "created_at": "2014-06-09T20:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200657",
    "user": "pbruin"
}
```

I can reproduce this inside GP 2.7.1 (patched version of this ticket) on ARM using the following commands (also adapted from `dokchitser.log`):

```
read("local/share/sage/ext/pari/dokchitser/computel.gp");
default(realprecision, 19);
conductor = 37;
gammaV = [0, 1];
weight = 2;
sgn = -1;
Lpoles = [];
Lresidues = automatic;
e = ellinit([0, 0, 1, -1, 0]);
a(k) = ellak(e, k);
initLdata("a(k)", 1.0);
v = Vec(Lseries(10.0, , 5));
print(v)
```

One gets the correct answer after replacing 19 by 20 in the second line, presumably because this increases the precision by one word.



---

archive/issue_comments_200658.json:
```json
{
    "body": "According to `git bisect`, the bug is triggered by the following upstream change (PARI Git commit 8cfb9c6b, incorrect rounding in mulur):\n\n```diff\ndiff --git a/src/kernel/none/mp_indep.c b/src/kernel/none/mp_indep.c\nindex 522e8a6..63f3311 100644\n--- a/src/kernel/none/mp_indep.c\n+++ b/src/kernel/none/mp_indep.c\n@@ -143,10 +143,11 @@ mulur_2(ulong x, GEN y, long s)\n   y--; garde = mulll(x,y[lx]);\n   for (i=lx-1; i>=3; i--) z[i]=addmul(x,y[i]);\n   z[2]=hiremainder; /* != 0 since y normalized and |x| > 1 */\n-\n   sh = bfffo(hiremainder); m = BITS_IN_LONG-sh;\n   if (sh) shift_left(z,z, 2,lx-1, garde,sh);\n-  z[1] = evalsigne(s) | evalexpo(m+e); return z;\n+  z[1] = evalsigne(s) | evalexpo(m+e);\n+  if ((garde << sh) & HIGHBIT) roundr_up_ip(z, lx);\n+  return z;\n }\n \n INLINE GEN\n```\n",
    "created_at": "2014-06-09T23:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200658",
    "user": "pbruin"
}
```

According to `git bisect`, the bug is triggered by the following upstream change (PARI Git commit 8cfb9c6b, incorrect rounding in mulur):

```diff
diff --git a/src/kernel/none/mp_indep.c b/src/kernel/none/mp_indep.c
index 522e8a6..63f3311 100644
--- a/src/kernel/none/mp_indep.c
+++ b/src/kernel/none/mp_indep.c
@@ -143,10 +143,11 @@ mulur_2(ulong x, GEN y, long s)
   y--; garde = mulll(x,y[lx]);
   for (i=lx-1; i>=3; i--) z[i]=addmul(x,y[i]);
   z[2]=hiremainder; /* != 0 since y normalized and |x| > 1 */
-
   sh = bfffo(hiremainder); m = BITS_IN_LONG-sh;
   if (sh) shift_left(z,z, 2,lx-1, garde,sh);
-  z[1] = evalsigne(s) | evalexpo(m+e); return z;
+  z[1] = evalsigne(s) | evalexpo(m+e);
+  if ((garde << sh) & HIGHBIT) roundr_up_ip(z, lx);
+  return z;
 }
 
 INLINE GEN
```




---

archive/issue_comments_200659.json:
```json
{
    "body": "It seems to me that the function `SeriesToContFrac` in Dokchitser's `computel` program is affected by some numerical instability, so that the above rounding fix in PARI leads to wildly different output of this function for the same input.  It is probably possible to solve (or at least diminish) the problem by increasing the variable `asympdigits` in the script.",
    "created_at": "2014-06-10T23:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200659",
    "user": "pbruin"
}
```

It seems to me that the function `SeriesToContFrac` in Dokchitser's `computel` program is affected by some numerical instability, so that the above rounding fix in PARI leads to wildly different output of this function for the same input.  It is probably possible to solve (or at least diminish) the problem by increasing the variable `asympdigits` in the script.



---

archive/issue_comments_200660.json:
```json
{
    "body": "Indeed that's what Bill Allombert answered to my bug report in debian: the pari code is correct, and the computeL code looks like it uses catastrophic cancellation... hence it should really shoot for more precision. Either by increasing asymdigits at Peter suggests, or (notice that the following only solves that one example) change the line in dokchitser.py which sets the realprecision to `prec//3+2` to `prec//3+3`.",
    "created_at": "2014-06-11T05:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200660",
    "user": "Snark"
}
```

Indeed that's what Bill Allombert answered to my bug report in debian: the pari code is correct, and the computeL code looks like it uses catastrophic cancellation... hence it should really shoot for more precision. Either by increasing asymdigits at Peter suggests, or (notice that the following only solves that one example) change the line in dokchitser.py which sets the realprecision to `prec//3+2` to `prec//3+3`.



---

archive/issue_comments_200661.json:
```json
{
    "body": "This seems to be a minimal fix:\n\n```diff\ndiff --git a/src/ext/pari/dokchitser/computel.gp b/src/ext/pari/dokchitser/computel.gp\nindex 9768874..3494fc9 100644\n--- a/src/ext/pari/dokchitser/computel.gp\n+++ b/src/ext/pari/dokchitser/computel.gp\n@@ -297,7 +297,7 @@ SeriesToContFrac(vec,\n   while (1,\n     res=concat(res,[vec[1]]);\n     ind=0;\n-    until(ind==length(vec) || abs(vec[ind+1])>10^-asympdigits,ind++;vec[ind]=0);\n+    until(ind==length(vec) || abs(vec[ind+1])>10^(-asympdigits-1),ind++;vec[ind]=0);\n     if(ind>=length(vec),break);\n     res=concat(res,[ind]);\n     vec=Vec(x^ind/Ser(vec));\n```\n\nThere are also two doctest failures in `elliptic_curves/ell_number_field.py` and `elliptic_curves/height.py` (at least on 32-bit ARM), which appear to be related to `simon_two_descent`.",
    "created_at": "2014-06-15T00:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200661",
    "user": "pbruin"
}
```

This seems to be a minimal fix:

```diff
diff --git a/src/ext/pari/dokchitser/computel.gp b/src/ext/pari/dokchitser/computel.gp
index 9768874..3494fc9 100644
--- a/src/ext/pari/dokchitser/computel.gp
+++ b/src/ext/pari/dokchitser/computel.gp
@@ -297,7 +297,7 @@ SeriesToContFrac(vec,
   while (1,
     res=concat(res,[vec[1]]);
     ind=0;
-    until(ind==length(vec) || abs(vec[ind+1])>10^-asympdigits,ind++;vec[ind]=0);
+    until(ind==length(vec) || abs(vec[ind+1])>10^(-asympdigits-1),ind++;vec[ind]=0);
     if(ind>=length(vec),break);
     res=concat(res,[ind]);
     vec=Vec(x^ind/Ser(vec));
```

There are also two doctest failures in `elliptic_curves/ell_number_field.py` and `elliptic_curves/height.py` (at least on 32-bit ARM), which appear to be related to `simon_two_descent`.



---

archive/issue_comments_200662.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-27T10:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200662",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200663.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-27T10:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200663",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200664.json:
```json
{
    "body": "We have a new regression (in a doctest added by #8828):\n\n```\nsage: K.<a> = NumberField(x^3-2)\nsage: E = EllipticCurve([0,0,0,0,a])\nsage: E.gens()\n[]\n```\n\n\nThis used to return\n\n```\nsage: K.<a> = NumberField(x^3-2)\nsage: E = EllipticCurve([0,0,0,0,a])\nsage: E.gens()\n[(1/3*a^2 + a + 5/3 : -2*a^2 - 4/3*a - 5/3 : 1)]\n```\n",
    "created_at": "2014-06-27T15:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200664",
    "user": "jdemeyer"
}
```

We have a new regression (in a doctest added by #8828):

```
sage: K.<a> = NumberField(x^3-2)
sage: E = EllipticCurve([0,0,0,0,a])
sage: E.gens()
[]
```


This used to return

```
sage: K.<a> = NumberField(x^3-2)
sage: E = EllipticCurve([0,0,0,0,a])
sage: E.gens()
[(1/3*a^2 + a + 5/3 : -2*a^2 - 4/3*a - 5/3 : 1)]
```




---

archive/issue_comments_200665.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-27T15:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200665",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200666.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-27T15:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200666",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200667.json:
```json
{
    "body": "Replying to [comment:98 jdemeyer]:\n> We have a new regression (in a doctest added by #8828):\n> {{{\n> sage: K.<a> = NumberField(x^3-2)\n> sage: E = EllipticCurve([0,0,0,0,a])\n> sage: E.gens()\n> []\n> }}}\n> \n> This used to return\n> {{{\n> sage: K.<a> = NumberField(x^3-2)\n> sage: E = EllipticCurve([0,0,0,0,a])\n> sage: E.gens()\n> [(1/3*a^2 + a + 5/3 : -2*a^2 - 4/3*a - 5/3 : 1)]\n> }}}\nThe parameter `lim1` for Simon's 2-descent program needs to be adjusted (default is 2, minimal value for which a point is found is now apparently 5):\n\n```diff\ndiff --git a/src/sage/schemes/elliptic_curves/height.py b/src/sage/schemes/elliptic_curves/height.py\nindex 8d0ef41..6917594 100644\n--- a/src/sage/schemes/elliptic_curves/height.py\n+++ b/src/sage/schemes/elliptic_curves/height.py\n@@ -1800,7 +1800,7 @@ class EllipticCurveCanonicalHeight:\n         This curve does have a point of good reduction whose canonical\n         point is approximately 1.68::\n \n-            sage: P = E.gens()[0]\n+            sage: P = E.gens(lim1=5)[0]\n             sage: P.height()\n             1.68038085233673\n             sage: P.has_good_reduction()\n```\n",
    "created_at": "2014-07-15T12:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200667",
    "user": "pbruin"
}
```

Replying to [comment:98 jdemeyer]:
> We have a new regression (in a doctest added by #8828):
> {{{
> sage: K.<a> = NumberField(x^3-2)
> sage: E = EllipticCurve([0,0,0,0,a])
> sage: E.gens()
> []
> }}}
> 
> This used to return
> {{{
> sage: K.<a> = NumberField(x^3-2)
> sage: E = EllipticCurve([0,0,0,0,a])
> sage: E.gens()
> [(1/3*a^2 + a + 5/3 : -2*a^2 - 4/3*a - 5/3 : 1)]
> }}}
The parameter `lim1` for Simon's 2-descent program needs to be adjusted (default is 2, minimal value for which a point is found is now apparently 5):

```diff
diff --git a/src/sage/schemes/elliptic_curves/height.py b/src/sage/schemes/elliptic_curves/height.py
index 8d0ef41..6917594 100644
--- a/src/sage/schemes/elliptic_curves/height.py
+++ b/src/sage/schemes/elliptic_curves/height.py
@@ -1800,7 +1800,7 @@ class EllipticCurveCanonicalHeight:
         This curve does have a point of good reduction whose canonical
         point is approximately 1.68::
 
-            sage: P = E.gens()[0]
+            sage: P = E.gens(lim1=5)[0]
             sage: P.height()
             1.68038085233673
             sage: P.has_good_reduction()
```




---

archive/issue_comments_200668.json:
```json
{
    "body": "Replying to [comment:101 pbruin]:\n> The parameter `lim1` for Simon's 2-descent program needs to be adjusted (default is 2, minimal value for which a point is found is now apparently 5):\nActually the same can be done much more efficiently using `lim3` instead (with `lim1` it needlessly increases the search bound for quartics that are not everywhere locally soluble):\n\n```diff\ndiff --git a/src/sage/schemes/elliptic_curves/height.py b/src/sage/schemes/elliptic_curves/height.py\nindex 8d0ef41..6917594 100644\n--- a/src/sage/schemes/elliptic_curves/height.py\n+++ b/src/sage/schemes/elliptic_curves/height.py\n@@ -1800,7 +1800,7 @@ class EllipticCurveCanonicalHeight:\n         This curve does have a point of good reduction whose canonical\n         point is approximately 1.68::\n \n-            sage: P = E.gens()[0]\n+            sage: P = E.gens(lim3=5)[0]\n             sage: P.height()\n             1.68038085233673\n             sage: P.has_good_reduction()\n```\n",
    "created_at": "2014-07-15T14:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200668",
    "user": "pbruin"
}
```

Replying to [comment:101 pbruin]:
> The parameter `lim1` for Simon's 2-descent program needs to be adjusted (default is 2, minimal value for which a point is found is now apparently 5):
Actually the same can be done much more efficiently using `lim3` instead (with `lim1` it needlessly increases the search bound for quartics that are not everywhere locally soluble):

```diff
diff --git a/src/sage/schemes/elliptic_curves/height.py b/src/sage/schemes/elliptic_curves/height.py
index 8d0ef41..6917594 100644
--- a/src/sage/schemes/elliptic_curves/height.py
+++ b/src/sage/schemes/elliptic_curves/height.py
@@ -1800,7 +1800,7 @@ class EllipticCurveCanonicalHeight:
         This curve does have a point of good reduction whose canonical
         point is approximately 1.68::
 
-            sage: P = E.gens()[0]
+            sage: P = E.gens(lim3=5)[0]
             sage: P.height()
             1.68038085233673
             sage: P.has_good_reduction()
```




---

archive/issue_comments_200669.json:
```json
{
    "body": "The other remaining failure on 32-bit (see comment:94) is in the following doctest (in `ell_number_field.py`, introduced in #15483):\n\n```\nsage: K.<s> = QuadraticField(229)\nsage: c4 = 2173 - 235*(1 - s)/2\nsage: c6 = -124369 + 15988*(1 - s)/2\nsage: E = EllipticCurve([-c4/48, -c6/864])\nsage: E.simon_two_descent()\n(0, 0, [])\n```\n\nThis returns `(1, 1, [])` on 32-bit because a certain quartic is incorrectly determined to be locally soluble at infinity.  It appears to be caused by `polsturm` being called on a polynomial whose precision is too low.  This bug is similar to but different than the one in #15483, and seems somewhat harder to fix.",
    "created_at": "2014-07-15T19:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200669",
    "user": "pbruin"
}
```

The other remaining failure on 32-bit (see comment:94) is in the following doctest (in `ell_number_field.py`, introduced in #15483):

```
sage: K.<s> = QuadraticField(229)
sage: c4 = 2173 - 235*(1 - s)/2
sage: c6 = -124369 + 15988*(1 - s)/2
sage: E = EllipticCurve([-c4/48, -c6/864])
sage: E.simon_two_descent()
(0, 0, [])
```

This returns `(1, 1, [])` on 32-bit because a certain quartic is incorrectly determined to be locally soluble at infinity.  It appears to be caused by `polsturm` being called on a polynomial whose precision is too low.  This bug is similar to but different than the one in #15483, and seems somewhat harder to fix.



---

archive/issue_comments_200670.json:
```json
{
    "body": "It seems the above problem can be solved by computing the exact inequalities appearing in Sturm's method and checking them using the function `nfrealsign()` from the script.  I am uploading a patch that I also sent to Denis Simon.",
    "created_at": "2014-07-16T12:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200670",
    "user": "pbruin"
}
```

It seems the above problem can be solved by computing the exact inequalities appearing in Sturm's method and checking them using the function `nfrealsign()` from the script.  I am uploading a patch that I also sent to Denis Simon.



---

archive/issue_comments_200671.json:
```json
{
    "body": "Attachment [ell.gp.patch](tarball://root/attachments/some-uuid/ticket15767/ell.gp.patch) by pbruin created at 2014-07-16 12:03:49\n\nTrac 15767: more exact Archimedean computations in ell.gp",
    "created_at": "2014-07-16T12:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200671",
    "user": "pbruin"
}
```

Attachment [ell.gp.patch](tarball://root/attachments/some-uuid/ticket15767/ell.gp.patch) by pbruin created at 2014-07-16 12:03:49

Trac 15767: more exact Archimedean computations in ell.gp



---

archive/issue_comments_200672.json:
```json
{
    "body": "It seems that the link to the updated `genus2red` has broken.",
    "created_at": "2014-07-21T11:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200672",
    "user": "pbruin"
}
```

It seems that the link to the updated `genus2red` has broken.



---

archive/issue_comments_200673.json:
```json
{
    "body": "Yes indeed, note that I downloaded it a few days ago without problem.",
    "created_at": "2014-07-22T08:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200673",
    "user": "jpflori"
}
```

Yes indeed, note that I downloaded it a few days ago without problem.



---

archive/issue_comments_200674.json:
```json
{
    "body": "I have been away for 3 weeks without touching anything Sage-related, so I'm just coming back to this now.\n\nStrange that the boxen link doesn't work anymore, even this gives a 404: [http://boxen.math.washington.edu/home/jdemeyer](http://boxen.math.washington.edu/home/jdemeyer) (luckily, the directory on boxen still exists). Does anybody have a clue what could have caused this? If no, I should ask on sagemath-admins.",
    "created_at": "2014-07-30T20:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200674",
    "user": "jdemeyer"
}
```

I have been away for 3 weeks without touching anything Sage-related, so I'm just coming back to this now.

Strange that the boxen link doesn't work anymore, even this gives a 404: [http://boxen.math.washington.edu/home/jdemeyer](http://boxen.math.washington.edu/home/jdemeyer) (luckily, the directory on boxen still exists). Does anybody have a clue what could have caused this? If no, I should ask on sagemath-admins.



---

archive/issue_comments_200675.json:
```json
{
    "body": "Replying to [comment:107 jdemeyer]:\n> Strange that the boxen link doesn't work anymore, even this gives a 404: [http://boxen.math.washington.edu/home/jdemeyer](http://boxen.math.washington.edu/home/jdemeyer) (luckily, the directory on boxen still exists). Does anybody have a clue what could have caused this?\nThis could be relevant: https://groups.google.com/forum/#!topic/sage-devel/dhON2NJoSoc",
    "created_at": "2014-07-31T08:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200675",
    "user": "pbruin"
}
```

Replying to [comment:107 jdemeyer]:
> Strange that the boxen link doesn't work anymore, even this gives a 404: [http://boxen.math.washington.edu/home/jdemeyer](http://boxen.math.washington.edu/home/jdemeyer) (luckily, the directory on boxen still exists). Does anybody have a clue what could have caused this?
This could be relevant: https://groups.google.com/forum/#!topic/sage-devel/dhON2NJoSoc



---

archive/issue_comments_200676.json:
```json
{
    "body": "The issue with the links is fixed, so perhaps it's time to review this (e.g. #16165 depends on this).",
    "created_at": "2014-08-15T11:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200676",
    "user": "kcrisman"
}
```

The issue with the links is fixed, so perhaps it's time to review this (e.g. #16165 depends on this).



---

archive/issue_comments_200677.json:
```json
{
    "body": "Sure, I'll start with rebasing to the latest beta. Hold on...",
    "created_at": "2014-08-18T09:57:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200677",
    "user": "jdemeyer"
}
```

Sure, I'll start with rebasing to the latest beta. Hold on...



---

archive/issue_comments_200678.json:
```json
{
    "body": "Replying to [comment:101 pbruin]:\n> The parameter `lim1` for Simon's 2-descent program needs to be adjusted (default is 2, minimal value for which a point is found is now apparently 5):\nDo you happen to know the deeper reason why this needs to be changed?\n\nI'll make the change in the doctest.",
    "created_at": "2014-08-18T10:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200678",
    "user": "jdemeyer"
}
```

Replying to [comment:101 pbruin]:
> The parameter `lim1` for Simon's 2-descent program needs to be adjusted (default is 2, minimal value for which a point is found is now apparently 5):
Do you happen to know the deeper reason why this needs to be changed?

I'll make the change in the doctest.



---

archive/issue_comments_200679.json:
```json
{
    "body": "Did you get any answers from Denis Simon yet?",
    "created_at": "2014-08-18T10:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200679",
    "user": "jdemeyer"
}
```

Did you get any answers from Denis Simon yet?



---

archive/issue_comments_200680.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-08-18T10:14:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200680",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200681.json:
```json
{
    "body": "Replying to [comment:112 jdemeyer]:\n> Replying to [comment:101 pbruin]:\n> > The parameter `lim1` for Simon's 2-descent program needs to be adjusted (default is 2, minimal value for which a point is found is now apparently 5):\n> Do you happen to know the deeper reason why this needs to be changed?\nNo, I only found this experimentally.  I would guess some PARI number field function returns a more complicated or \"unlucky\" result than before in this example.\n> Did you get any answers from Denis Simon yet?\nSo far I didn't.",
    "created_at": "2014-08-18T11:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200681",
    "user": "pbruin"
}
```

Replying to [comment:112 jdemeyer]:
> Replying to [comment:101 pbruin]:
> > The parameter `lim1` for Simon's 2-descent program needs to be adjusted (default is 2, minimal value for which a point is found is now apparently 5):
> Do you happen to know the deeper reason why this needs to be changed?
No, I only found this experimentally.  I would guess some PARI number field function returns a more complicated or "unlucky" result than before in this example.
> Did you get any answers from Denis Simon yet?
So far I didn't.



---

archive/issue_comments_200682.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-08-18T13:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200682",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200683.json:
```json
{
    "body": "I rebased this ticket and added the fixes by Peter Bruin. It now again passes doctests on 64-bit.",
    "created_at": "2014-08-18T13:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200683",
    "user": "jdemeyer"
}
```

I rebased this ticket and added the fixes by Peter Bruin. It now again passes doctests on 64-bit.



---

archive/issue_comments_200684.json:
```json
{
    "body": "I am now running `make ptestlong` on ARM 32-bit.",
    "created_at": "2014-08-18T16:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200684",
    "user": "pbruin"
}
```

I am now running `make ptestlong` on ARM 32-bit.



---

archive/issue_comments_200685.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-18T20:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200685",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_200686.json:
```json
{
    "body": "Tests pass on 32-bit Linux! Party!",
    "created_at": "2014-08-18T20:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200686",
    "user": "jdemeyer"
}
```

Tests pass on 32-bit Linux! Party!



---

archive/issue_comments_200687.json:
```json
{
    "body": "And all the developers rejoiced!\n\nIf you agree with the (small) changes in the reviewer patch, this ticket is good to go as far as I'm concerned.",
    "created_at": "2014-08-18T22:34:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200687",
    "user": "pbruin"
}
```

And all the developers rejoiced!

If you agree with the (small) changes in the reviewer patch, this ticket is good to go as far as I'm concerned.



---

archive/issue_comments_200688.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-19T09:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200688",
    "user": "rws"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_200689.json:
```json
{
    "body": "Fails on OpenSuSE 12.3:\n\n```\nsage -t --long src/sage/libs/pari/gen.pyx\n**********************************************************************\nFile \"src/sage/libs/pari/gen.pyx\", line 2236, in sage.libs.pari.gen.gen.Ser\nFailed example:\n    pari(Mod(0, 7)).Ser()\nExpected:\n    O(x^16)\nGot:\n    Mod(0, 7) + O(x^16)\n**********************************************************************\n1 item had failures:\n   1 of   9 in sage.libs.pari.gen.gen.Ser\n    [1270 tests, 1 failure, 1.48 s]\n```\n",
    "created_at": "2014-08-19T09:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200689",
    "user": "rws"
}
```

Fails on OpenSuSE 12.3:

```
sage -t --long src/sage/libs/pari/gen.pyx
**********************************************************************
File "src/sage/libs/pari/gen.pyx", line 2236, in sage.libs.pari.gen.gen.Ser
Failed example:
    pari(Mod(0, 7)).Ser()
Expected:
    O(x^16)
Got:
    Mod(0, 7) + O(x^16)
**********************************************************************
1 item had failures:
   1 of   9 in sage.libs.pari.gen.gen.Ser
    [1270 tests, 1 failure, 1.48 s]
```




---

archive/issue_comments_200690.json:
```json
{
    "body": "Replying to [comment:121 rws]:\n> Fails on OpenSuSE 12.3\n\nIndeed, the last commit broke this.",
    "created_at": "2014-08-19T09:47:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200690",
    "user": "jdemeyer"
}
```

Replying to [comment:121 rws]:
> Fails on OpenSuSE 12.3

Indeed, the last commit broke this.



---

archive/issue_comments_200691.json:
```json
{
    "body": "Replying to [comment:121 rws]:\n> Fails on OpenSuSE 12.3:\nOuch, that is my fault.  The change to `Ser()` was the last thing I added to my reviewer patch; I tested everything that I thought might call this code, but inexplicably forgot to test the file itself.  I'll fix the doctest.",
    "created_at": "2014-08-19T09:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200691",
    "user": "pbruin"
}
```

Replying to [comment:121 rws]:
> Fails on OpenSuSE 12.3:
Ouch, that is my fault.  The change to `Ser()` was the last thing I added to my reviewer patch; I tested everything that I thought might call this code, but inexplicably forgot to test the file itself.  I'll fix the doctest.



---

archive/issue_comments_200692.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-19T09:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200692",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200693.json:
```json
{
    "body": "Peter, could you please add some documentation for the application of Sturm's Theorem in `ell.gp`? I checked the calculations by hand and it looks correct, but it would be nice to have the calculation as comment in the file.",
    "created_at": "2014-08-19T09:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200693",
    "user": "jdemeyer"
}
```

Peter, could you please add some documentation for the application of Sturm's Theorem in `ell.gp`? I checked the calculations by hand and it looks correct, but it would be nice to have the calculation as comment in the file.



---

archive/issue_comments_200694.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-19T11:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200694",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200695.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-19T11:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200695",
    "user": "pbruin"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_200696.json:
```json
{
    "body": "Replying to [comment:125 jdemeyer]:\n> Peter, could you please add some documentation for the application of Sturm's Theorem in `ell.gp`? I checked the calculations by hand and it looks correct, but it would be nice to have the calculation as comment in the file.\nDone in the above commit.",
    "created_at": "2014-08-19T11:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200696",
    "user": "pbruin"
}
```

Replying to [comment:125 jdemeyer]:
> Peter, could you please add some documentation for the application of Sturm's Theorem in `ell.gp`? I checked the calculations by hand and it looks correct, but it would be nice to have the calculation as comment in the file.
Done in the above commit.



---

archive/issue_comments_200697.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-19T11:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200697",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_200698.json:
```json
{
    "body": "Replying to [comment:127 pbruin]:\n> Done in the above commit.\nNice.",
    "created_at": "2014-08-19T11:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200698",
    "user": "jdemeyer"
}
```

Replying to [comment:127 pbruin]:
> Done in the above commit.
Nice.



---

archive/issue_comments_200699.json:
```json
{
    "body": "I'm getting merge failures, will release beta1 soon. Please merge with that release then.",
    "created_at": "2014-08-19T22:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200699",
    "user": "vbraun"
}
```

I'm getting merge failures, will release beta1 soon. Please merge with that release then.



---

archive/issue_comments_200700.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-08-19T22:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200700",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_200701.json:
```json
{
    "body": "Replying to [comment:129 vbraun]:\n> I'm getting merge failures, will release beta1 soon. Please merge with that release then.\nOK, I will do that. Unfortunately, this ticket tends to give a lot of conflicts because it touches so much code (in a way which cannot really be avoided). For beta2, I hope you will give this ticket priority and ask other branches to merge with this.",
    "created_at": "2014-08-20T09:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200701",
    "user": "jdemeyer"
}
```

Replying to [comment:129 vbraun]:
> I'm getting merge failures, will release beta1 soon. Please merge with that release then.
OK, I will do that. Unfortunately, this ticket tends to give a lot of conflicts because it touches so much code (in a way which cannot really be avoided). For beta2, I hope you will give this ticket priority and ask other branches to merge with this.



---

archive/issue_comments_200702.json:
```json
{
    "body": "I've released beta1, if you can resolve the conflicts soon then I'll merge this as the first ticket.",
    "created_at": "2014-08-20T10:29:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200702",
    "user": "vbraun"
}
```

I've released beta1, if you can resolve the conflicts soon then I'll merge this as the first ticket.



---

archive/issue_comments_200703.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-20T11:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200703",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_200704.json:
```json
{
    "body": "Done. I'm running doctests now to check that nothing got broken.",
    "created_at": "2014-08-20T11:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200704",
    "user": "jdemeyer"
}
```

Done. I'm running doctests now to check that nothing got broken.



---

archive/issue_comments_200705.json:
```json
{
    "body": "This branch agrees (up to whitespace) with a merge I did.  If it passes doctests, you can set it back to positive review.",
    "created_at": "2014-08-20T12:24:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200705",
    "user": "pbruin"
}
```

This branch agrees (up to whitespace) with a merge I did.  If it passes doctests, you can set it back to positive review.



---

archive/issue_comments_200706.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-20T14:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200706",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_200707.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-20T20:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15530#issuecomment-200707",
    "user": "vbraun"
}
```

Resolution: fixed
