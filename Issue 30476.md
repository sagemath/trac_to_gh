# Issue 30476: Narrow down import of SageObject

Issue created by migration from https://trac.sagemath.org/ticket/30713

Original creator: @tobiasdiez

Original creation time: 2020-10-03 20:29:19

CC:  mkoeppe tscrim

Small change of narrowing down the import of `SageObject` instead of importing the whole module.


---

Comment by git created at 2020-10-03 20:29:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @tobiasdiez created at 2020-10-03 20:29:39

Changing status from new to needs_review.


---

Comment by @tobiasdiez created at 2020-10-03 20:29:39

New commits:
----
New commits:


---

Comment by mkoeppe created at 2020-10-03 21:30:00

I also prefer the style that uses `from ... import ...`, but this is a cosmetic change. It still loads the whole module.


---

Comment by tscrim created at 2020-10-04 02:24:29

Replying to [comment:3 mkoeppe]:
> I also prefer the style that uses `from ... import ...`,

Same.

> but this is a cosmetic change. It still loads the whole module. 

It is not entirely cosmetic with how the imports work IIRC. But it does make is clear what is desired from that module, so I think it is a net improvement.


---

Comment by mkoeppe created at 2020-10-04 03:37:26

Changing status from needs_review to positive_review.


---

Comment by @tobiasdiez created at 2020-10-04 09:06:05

Thanks for the review!


---

Comment by vbraun created at 2020-10-25 23:28:51

docbuild fails:

```
[dochtml] [function_] building [inventory]: targets for 11 source files that are out of date
[dochtml] [function_] updating environment: [new config] 11 added, 0 changed, 0 removed
[dochtml] [combinat ] /home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/crystals/mv_polytopes.py:docstring of sage.combinat.crystals.mv_polytopes.MVPolytope.plot:22: WARNING: Exception occurred in plotting mv_polytopes-1
[dochtml] [combinat ]  from /home/release/Sage/src/doc/en/reference/combinat/sage/combinat/crystals/mv_polytopes.rst:
[dochtml] [combinat ] Traceback (most recent call last):
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/matplotlib/sphinxext/plot_directive.py", line 472, in run_code
[dochtml] [combinat ]     exec(code, ns)
[dochtml] [combinat ]   File "<string>", line 4, in <module>
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py", line 2053, in plot
[dochtml] [combinat ]     G += self.plot_roots(roots, plot_options=plot_options)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py", line 2299, in plot_roots
[dochtml] [combinat ]     roots = Family(roots, self)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage/sets/family.py", line 406, in Family
[dochtml] [combinat ]     return LazyFamily(indices, function, name)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage/sets/family.py", line 908, in __init__
[dochtml] [combinat ]     self.set = copy(set)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/copy.py", line 102, in copy
[dochtml] [combinat ]     return _reconstruct(x, None, *rv)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/copy.py", line 264, in _reconstruct
[dochtml] [combinat ]     y = func(*args)
[dochtml] [combinat ]   File "stringsource", line 7, in sage.structure.sage_object.__pyx_unpickle_SageObject (build/cythonized/sage/structure/sage_object.c:11737)
[dochtml] [combinat ] TypeError: sage.structure.sage_object.SageObject.__new__(FiniteFamily_with_category) is not safe, use FiniteFamily_with_category.__new__()
[dochtml] [combinat ] /home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/crystals/mv_polytopes.py:docstring of sage.combinat.crystals.mv_polytopes.MVPolytopes:101: WARNING: Exception occurred in plotting mv_polytopes-2
```



---

Comment by vbraun created at 2020-10-25 23:28:51

Changing status from positive_review to needs_work.


---

Comment by @tobiasdiez created at 2020-10-26 08:22:06

Thanks for testing, but I don't see how this error `TypeError: sage.structure.sage_object.SageObject.__new__(FiniteFamily_with_category) is not safe, use FiniteFamily_with_category.__new__()` is related to the changes in this branch. Do you have any suggestions on how to investigate this?


---

Comment by tscrim created at 2020-10-27 00:24:13

Something very subtle is likely happening if it is indeed related to this branch. The first thing to do would be to try and reproduce the error. You might want to try with Volker's current branch to see if it is coming from one of the already merged-but-not-released branches for the upcoming 9.3.beta0. However, I am at a loss as well for the error and reproducing it.


---

Comment by mkoeppe created at 2020-12-06 18:17:38

Changing keywords from "" to "sd111".


---

Comment by mkoeppe created at 2020-12-06 18:17:38

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.
