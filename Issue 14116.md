# Issue 14116: More doctests from the book "Calcul mathÃ©matique avec Sage"

Issue created by migration from Trac.

Original creator: tdumont

Original creation time: 2013-03-20 16:33:00

Assignee: mvngu

The attached file provides doctests for examples in the chapter "float" (floating point numbers). Tests pass with 5.8.


---

Attachment

doctets auto generated.


---

Comment by zimmerma created at 2013-08-23 10:20:01

Changing status from new to needs_review.


---

Comment by zimmerma created at 2013-08-23 10:20:01

Changing type from task to enhancement.


---

Comment by zimmerma created at 2013-08-23 10:20:01

I've attached a well-formed patch. I had to modify two things with respect to the book (which was with Sage 5.9), due to some recent changes in RDF:

* I added "abs tol 0.05" somewhere to avoid a failing test with 5.11

* `exact-sommation compensee` now gives 0.0 with 5.11 (instead of -0.001953125 with 5.9).
  I thus changed to 0.0 in the doctest. This will thus differ from the book, which should be
  updated to 5.11 (adding "abs tol" is not enough).

Paul


---

Comment by chapoton created at 2013-09-23 16:00:23

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2013-09-23 16:00:23

same remark about indentation: should be 4 spaces rather than 2


---

Comment by zimmerma created at 2013-09-24 12:19:27

Changing status from needs_work to needs_review.


---

Comment by zimmerma created at 2013-09-24 12:19:27

> same remark about indentation: should be 4 spaces rather than 2 

is it better with the new patch?

Paul


---

Comment by chapoton created at 2013-10-19 19:41:14

yes, it is much better that way.


---

Comment by chapoton created at 2013-10-19 20:06:35

Let me say that it is good to go.


---

Comment by chapoton created at 2013-10-19 20:06:35

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2013-10-19 20:06:35

Changing keywords from "" to "french book".


---

Comment by jdemeyer created at 2013-10-31 07:59:44

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-10-31 07:59:44

On `arando` (Linux 32-bit i686):

```
sage -t --long devel/sage/sage/tests/french_book/float_doctest.py
**********************************************************************
File "devel/sage/sage/tests/french_book/float_doctest.py", line 206, in sage.tests.french_book.float_doctest
Failed example:
    print "exact - sommation classique:", s-ii # abs tol 0.05
Expected:
    exact - sommation classique: -45.5
Got:
    exact - sommation classique: -45.591796875
Tolerance exceeded: 9e-02 > 5e-02
**********************************************************************
```



---

Comment by zimmerma created at 2013-10-31 08:59:06

I will have a look next week, unless someone beats me. However I wonder why the patchbot did not find this before. Did it work before on arando?

Paul


---

Comment by jdemeyer created at 2013-10-31 09:29:34

It seems the patchbot is having trouble itself... Also, I don't know whether we have any patchbots running on 32-bit i686.


---

Attachment

I increased the tolerance to 0.1, it should be ok now.

Paul


---

Comment by zimmerma created at 2013-11-04 10:51:05

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2013-11-04 10:55:46

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-11-04 10:55:46

Should be good.


---

Comment by jdemeyer created at 2013-11-06 12:49:20

Resolution: fixed
