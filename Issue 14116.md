# Issue 14116: More doctests from the book "Calcul mathÃ©matique avec Sage"

archive/issues_014116.json:
```json
{
    "body": "Assignee: mvngu\n\nThe attached file provides doctests for examples in the chapter \"float\" (floating point numbers). Tests pass with 5.8.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14320\n\n",
    "created_at": "2013-03-20T16:33:00Z",
    "labels": [
        "doctest coverage",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "More doctests from the book \"Calcul math\u00e9matique avec Sage\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14116",
    "user": "tdumont"
}
```
Assignee: mvngu

The attached file provides doctests for examples in the chapter "float" (floating point numbers). Tests pass with 5.8.

Issue created by migration from https://trac.sagemath.org/ticket/14320





---

archive/issue_comments_177020.json:
```json
{
    "body": "Attachment [float_doctest.sage](tarball://root/attachments/some-uuid/ticket14320/float_doctest.sage) by tdumont created at 2013-03-20 16:34:05\n\ndoctets auto generated.",
    "created_at": "2013-03-20T16:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177020",
    "user": "tdumont"
}
```

Attachment [float_doctest.sage](tarball://root/attachments/some-uuid/ticket14320/float_doctest.sage) by tdumont created at 2013-03-20 16:34:05

doctets auto generated.



---

archive/issue_comments_177021.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-23T10:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177021",
    "user": "@zimmermann6"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_177022.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2013-08-23T10:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177022",
    "user": "@zimmermann6"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_177023.json:
```json
{
    "body": "I've attached a well-formed patch. I had to modify two things with respect to the book (which was with Sage 5.9), due to some recent changes in RDF:\n\n* I added \"abs tol 0.05\" somewhere to avoid a failing test with 5.11\n\n* `exact-sommation compensee` now gives 0.0 with 5.11 (instead of -0.001953125 with 5.9).\n  I thus changed to 0.0 in the doctest. This will thus differ from the book, which should be\n  updated to 5.11 (adding \"abs tol\" is not enough).\n\nPaul",
    "created_at": "2013-08-23T10:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177023",
    "user": "@zimmermann6"
}
```

I've attached a well-formed patch. I had to modify two things with respect to the book (which was with Sage 5.9), due to some recent changes in RDF:

* I added "abs tol 0.05" somewhere to avoid a failing test with 5.11

* `exact-sommation compensee` now gives 0.0 with 5.11 (instead of -0.001953125 with 5.9).
  I thus changed to 0.0 in the doctest. This will thus differ from the book, which should be
  updated to 5.11 (adding "abs tol" is not enough).

Paul



---

archive/issue_comments_177024.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-09-23T16:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177024",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_177025.json:
```json
{
    "body": "same remark about indentation: should be 4 spaces rather than 2",
    "created_at": "2013-09-23T16:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177025",
    "user": "@fchapoton"
}
```

same remark about indentation: should be 4 spaces rather than 2



---

archive/issue_comments_177026.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-09-24T12:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177026",
    "user": "@zimmermann6"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_177027.json:
```json
{
    "body": "> same remark about indentation: should be 4 spaces rather than 2 \n\nis it better with the new patch?\n\nPaul",
    "created_at": "2013-09-24T12:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177027",
    "user": "@zimmermann6"
}
```

> same remark about indentation: should be 4 spaces rather than 2 

is it better with the new patch?

Paul



---

archive/issue_comments_177028.json:
```json
{
    "body": "yes, it is much better that way.",
    "created_at": "2013-10-19T19:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177028",
    "user": "@fchapoton"
}
```

yes, it is much better that way.



---

archive/issue_comments_177029.json:
```json
{
    "body": "Let me say that it is good to go.",
    "created_at": "2013-10-19T20:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177029",
    "user": "@fchapoton"
}
```

Let me say that it is good to go.



---

archive/issue_comments_177030.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-19T20:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177030",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_177031.json:
```json
{
    "body": "Changing keywords from \"\" to \"french book\".",
    "created_at": "2013-10-19T20:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177031",
    "user": "@fchapoton"
}
```

Changing keywords from "" to "french book".



---

archive/issue_comments_177032.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-10-31T07:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177032",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_177033.json:
```json
{
    "body": "On `arando` (Linux 32-bit i686):\n\n```\nsage -t --long devel/sage/sage/tests/french_book/float_doctest.py\n**********************************************************************\nFile \"devel/sage/sage/tests/french_book/float_doctest.py\", line 206, in sage.tests.french_book.float_doctest\nFailed example:\n    print \"exact - sommation classique:\", s-ii # abs tol 0.05\nExpected:\n    exact - sommation classique: -45.5\nGot:\n    exact - sommation classique: -45.591796875\nTolerance exceeded: 9e-02 > 5e-02\n**********************************************************************\n```\n",
    "created_at": "2013-10-31T07:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177033",
    "user": "@jdemeyer"
}
```

On `arando` (Linux 32-bit i686):

```
sage -t --long devel/sage/sage/tests/french_book/float_doctest.py
**********************************************************************
File "devel/sage/sage/tests/french_book/float_doctest.py", line 206, in sage.tests.french_book.float_doctest
Failed example:
    print "exact - sommation classique:", s-ii # abs tol 0.05
Expected:
    exact - sommation classique: -45.5
Got:
    exact - sommation classique: -45.591796875
Tolerance exceeded: 9e-02 > 5e-02
**********************************************************************
```




---

archive/issue_comments_177034.json:
```json
{
    "body": "I will have a look next week, unless someone beats me. However I wonder why the patchbot did not find this before. Did it work before on arando?\n\nPaul",
    "created_at": "2013-10-31T08:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177034",
    "user": "@zimmermann6"
}
```

I will have a look next week, unless someone beats me. However I wonder why the patchbot did not find this before. Did it work before on arando?

Paul



---

archive/issue_comments_177035.json:
```json
{
    "body": "It seems the patchbot is having trouble itself... Also, I don't know whether we have any patchbots running on 32-bit i686.",
    "created_at": "2013-10-31T09:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177035",
    "user": "@jdemeyer"
}
```

It seems the patchbot is having trouble itself... Also, I don't know whether we have any patchbots running on 32-bit i686.



---

archive/issue_comments_177036.json:
```json
{
    "body": "Attachment [trac_14320_doctests_from_french_book.patch](tarball://root/attachments/some-uuid/ticket14320/trac_14320_doctests_from_french_book.patch) by @zimmermann6 created at 2013-11-04 10:51:05\n\nI increased the tolerance to 0.1, it should be ok now.\n\nPaul",
    "created_at": "2013-11-04T10:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177036",
    "user": "@zimmermann6"
}
```

Attachment [trac_14320_doctests_from_french_book.patch](tarball://root/attachments/some-uuid/ticket14320/trac_14320_doctests_from_french_book.patch) by @zimmermann6 created at 2013-11-04 10:51:05

I increased the tolerance to 0.1, it should be ok now.

Paul



---

archive/issue_comments_177037.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-11-04T10:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177037",
    "user": "@zimmermann6"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_177038.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-11-04T10:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177038",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_177039.json:
```json
{
    "body": "Should be good.",
    "created_at": "2013-11-04T10:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177039",
    "user": "@jdemeyer"
}
```

Should be good.



---

archive/issue_comments_177040.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-11-06T12:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14116",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14116#issuecomment-177040",
    "user": "@jdemeyer"
}
```

Resolution: fixed
