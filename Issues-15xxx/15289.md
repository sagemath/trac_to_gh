# Issue 15289: Implement indexed monoids

archive/issues_015052.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-sage-combinat"
    ],
    "body": "Implements free (abelian) monoids whose generators are indexed by an arbitrary set. This also moves common code from `CombinatorialFreeModule` into a new class `sage.misc.indexed_generators.IndexedGenerators`. With this we can now create (noncommutative) polynomials whose generators are given by a combinatorial object.\n\nAlso implements a very crude and basic version for groups.\n\nDepends on #15309\nDepends on #15169\nDepends on #16349\n\nCC:  @sagetrac-sage-combinat @nthiery @sagetrac-mshimo @simon-king-jena\n\nComponent: **algebra**\n\nKeywords: **days54**\n\nAuthor: **Travis Scrimshaw**\n\nBranch: **[`69ec7b2`](https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065)**\n\nReviewer: **Nicolas M. Thi\u00e9ry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15289_\n\n",
    "closed_at": "2014-07-03T02:03:54Z",
    "created_at": "2013-10-16T16:13:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement indexed monoids",
    "type": "issue",
    "updated_at": "2015-02-08T02:43:51Z",
    "url": "https://github.com/sagemath/sage/issues/15289",
    "user": "https://github.com/tscrim"
}
```
Implements free (abelian) monoids whose generators are indexed by an arbitrary set. This also moves common code from `CombinatorialFreeModule` into a new class `sage.misc.indexed_generators.IndexedGenerators`. With this we can now create (noncommutative) polynomials whose generators are given by a combinatorial object.

Also implements a very crude and basic version for groups.

Depends on #15309
Depends on #15169
Depends on #16349

CC:  @sagetrac-sage-combinat @nthiery @sagetrac-mshimo @simon-king-jena

Component: **algebra**

Keywords: **days54**

Author: **Travis Scrimshaw**

Branch: **[`69ec7b2`](https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065)**

Reviewer: **Nicolas M. Thi√©ry**

_Issue created by migration from https://trac.sagemath.org/ticket/15289_





---

archive/issue_events_215358.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-10-16T16:13:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215358"
}
```



---

archive/issue_events_215359.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-10-16T16:13:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215359"
}
```



---

archive/issue_events_215360.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-10-16T16:13:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215360"
}
```



---

archive/issue_events_215361.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-10-16T16:13:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215361"
}
```



---

archive/issue_events_215362.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2013-10-16T16:13:40Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "subject": "https://github.com/tscrim",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215362"
}
```



---

archive/issue_events_215363.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-10-16T16:53:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215363"
}
```



---

archive/issue_comments_188845.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nInitial version. I might add a `_basis_keys` attribute to `CombinatorialFreeModule` for backwards compatibility...",
    "created_at": "2013-10-16T16:53:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188845",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">comment:1</div>

Initial version. I might add a `_basis_keys` attribute to `CombinatorialFreeModule` for backwards compatibility...



---

archive/issue_comments_188846.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHi Travis,\n\nThanks for working on this feature! I'll try to look at it, but that won't be immediately. I would have thought we already had a ticket about that, but I might be wrong. For the record, here is a link to a discussion we had (a long time ago) about such features:\n\n https://groups.google.com/forum/#!searchin/sage-combinat-devel/CombinatorialFreeModule$20free$20monoid/sage-combinat-devel/EH8M6bWPylk/a-FG4uFQm7AJ\n\nThanks again!\n\nCheers,\n                                         Nicolas",
    "created_at": "2013-10-16T17:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188846",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:2" align="right">comment:2</div>

Hi Travis,

Thanks for working on this feature! I'll try to look at it, but that won't be immediately. I would have thought we already had a ticket about that, but I might be wrong. For the record, here is a link to a discussion we had (a long time ago) about such features:

 https://groups.google.com/forum/#!searchin/sage-combinat-devel/CombinatorialFreeModule$20free$20monoid/sage-combinat-devel/EH8M6bWPylk/a-FG4uFQm7AJ

Thanks again!

Cheers,
                                         Nicolas



---

archive/issue_comments_188847.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHey Nicolas,\n\nI believe there is a ticket about making free abelian groups as `ZZ`-modules, and another one about converting between additive and multiplicative groups. However they currently don't apply to `CombinatorialFreeModule`, and none of the tickets on `CombinatorialFreeModule` would apply here as far as I remember.\n\nHere's a new version which gives a groups version so we can do Laurent polynomials. This is not are fancy as the discussion would like, but it serves my purposes for now.\n\nBest,\n\nTravis",
    "created_at": "2013-10-16T23:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188847",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

Hey Nicolas,

I believe there is a ticket about making free abelian groups as `ZZ`-modules, and another one about converting between additive and multiplicative groups. However they currently don't apply to `CombinatorialFreeModule`, and none of the tickets on `CombinatorialFreeModule` would apply here as far as I remember.

Here's a new version which gives a groups version so we can do Laurent polynomials. This is not are fancy as the discussion would like, but it serves my purposes for now.

Best,

Travis



---

archive/issue_comments_188848.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Implements free (abelian) monoids whose generators are indexed by an arbitrary set. This also moves common code from `CombinatorialFreeModule` into a new class `sage.misc.indexed_generators.IndexedGenerators`. With this we can now create (noncommutative) polynomials whose generators are given by a combinatorial object.\n+\n+Also implements a very crude and basic version for groups.\n``````\n",
    "created_at": "2013-10-16T23:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188848",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Implements free (abelian) monoids whose generators are indexed by an arbitrary set. This also moves common code from `CombinatorialFreeModule` into a new class `sage.misc.indexed_generators.IndexedGenerators`. With this we can now create (noncommutative) polynomials whose generators are given by a combinatorial object.
+
+Also implements a very crude and basic version for groups.
``````




---

archive/issue_comments_188849.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHere's with some more functionality additions. I did make one major change and made the iterator return `(generator, exp)`, as opposed to `(index, exp)` and similar to how `FreeMonoid` works.\n\nFrequently I'm finding myself calling `_sorted_items()`, but I'm needing to manipulate the indices of the generators. I'm wondering if we should make it into a public method (perhaps with a better name since there is no true sorting occurring when it is not free).",
    "created_at": "2013-10-23T01:49:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188849",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

Here's with some more functionality additions. I did make one major change and made the iterator return `(generator, exp)`, as opposed to `(index, exp)` and similar to how `FreeMonoid` works.

Frequently I'm finding myself calling `_sorted_items()`, but I'm needing to manipulate the indices of the generators. I'm wondering if we should make it into a public method (perhaps with a better name since there is no true sorting occurring when it is not free).



---

archive/issue_comments_188850.json:
```json
{
    "body": "Dependencies: **#15309**",
    "created_at": "2013-11-02T05:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188850",
    "user": "https://github.com/tscrim"
}
```

Dependencies: **#15309**



---

archive/issue_comments_188851.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nRebased to `5.13.beta2`.",
    "created_at": "2013-11-02T05:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188851",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

Rebased to `5.13.beta2`.



---

archive/issue_comments_188852.json:
```json
{
    "body": "Attachment: **[trac_15289-indexed_monoids-ts.patch.gz](https://github.com/sagemath/sage/files/ticket15289/trac_15289-indexed_monoids-ts.patch.gz)**",
    "created_at": "2013-11-02T21:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188852",
    "user": "https://github.com/tscrim"
}
```

Attachment: **[trac_15289-indexed_monoids-ts.patch.gz](https://github.com/sagemath/sage/files/ticket15289/trac_15289-indexed_monoids-ts.patch.gz)**



---

archive/issue_comments_188853.json:
```json
{
    "body": "Changed dependencies from **#15309** to **#15309 #15169**",
    "created_at": "2013-11-07T06:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188853",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#15309** to **#15309 #15169**



---

archive/issue_comments_188854.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAdded git version.\n\n---\nNew commits:\n<table><tr><td><code>[c1b5afe](https://github.com/sagemath/sagetrac-mirror/commit/c1b5afe)</code></td><td><code>#15289: Implemented indexed monoids and groups.</code></td></tr><tr><td><code>[6fd33b2](https://github.com/sagemath/sagetrac-mirror/commit/6fd33b2)</code></td><td><code>#15169: Fix FreeAlgebra element constructor from a base field.</code></td></tr></table>\n",
    "created_at": "2013-11-07T19:35:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188854",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Added git version.

---
New commits:
<table><tr><td><code>[c1b5afe](https://github.com/sagemath/sagetrac-mirror/commit/c1b5afe)</code></td><td><code>#15289: Implemented indexed monoids and groups.</code></td></tr><tr><td><code>[6fd33b2](https://github.com/sagemath/sagetrac-mirror/commit/6fd33b2)</code></td><td><code>#15169: Fix FreeAlgebra element constructor from a base field.</code></td></tr></table>




---

archive/issue_comments_188855.json:
```json
{
    "body": "Commit: **[`c1b5afe`](https://github.com/sagemath/sagetrac-mirror/commit/c1b5afea143f80ce6d68a4386ed6b410f8fcbb17)**",
    "created_at": "2013-11-07T19:35:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188855",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`c1b5afe`](https://github.com/sagemath/sagetrac-mirror/commit/c1b5afea143f80ce6d68a4386ed6b410f8fcbb17)**



---

archive/issue_comments_188856.json:
```json
{
    "body": "Branch: **[public/monoids/15289-indexed](https://github.com/sagemath/sagetrac-mirror/tree/public/monoids/15289-indexed)**",
    "created_at": "2013-11-07T19:35:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188856",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/monoids/15289-indexed](https://github.com/sagemath/sagetrac-mirror/tree/public/monoids/15289-indexed)**



---

archive/issue_comments_188857.json:
```json
{
    "body": "Changed keywords from none to **days54**",
    "created_at": "2013-11-09T00:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188857",
    "user": "https://github.com/tscrim"
}
```

Changed keywords from none to **days54**



---

archive/issue_comments_188858.json:
```json
{
    "body": "Changed commit from **[`c1b5afe`](https://github.com/sagemath/sagetrac-mirror/commit/c1b5afea143f80ce6d68a4386ed6b410f8fcbb17)** to **[`9dca526`](https://github.com/sagemath/sagetrac-mirror/commit/9dca526f5ab91f7d2777ba4f4e945a869b169bb9)**",
    "created_at": "2013-12-03T19:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188858",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c1b5afe`](https://github.com/sagemath/sagetrac-mirror/commit/c1b5afea143f80ce6d68a4386ed6b410f8fcbb17)** to **[`9dca526`](https://github.com/sagemath/sagetrac-mirror/commit/9dca526f5ab91f7d2777ba4f4e945a869b169bb9)**



---

archive/issue_comments_188859.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[9dca526](https://github.com/sagemath/sagetrac-mirror/commit/9dca526)</code></td><td><code>Added comparison operations.</code></td></tr><tr><td><code>[a493bee](https://github.com/sagemath/sagetrac-mirror/commit/a493bee)</code></td><td><code>Merge branch 'master' into public/monoids/15289-indexed</code></td></tr></table>\n",
    "created_at": "2013-12-03T19:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188859",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[9dca526](https://github.com/sagemath/sagetrac-mirror/commit/9dca526)</code></td><td><code>Added comparison operations.</code></td></tr><tr><td><code>[a493bee](https://github.com/sagemath/sagetrac-mirror/commit/a493bee)</code></td><td><code>Merge branch 'master' into public/monoids/15289-indexed</code></td></tr></table>




---

archive/issue_events_215364.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215364"
}
```



---

archive/issue_events_215365.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215365"
}
```



---

archive/issue_comments_188860.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/545a8df551ec5bd60191134a0222ddc6001279bb\"><code>545a8df</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2975c87c1d2638c5318336ba548fb28d0e03fb12\"><code>2975c87</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4002b0d12ad417ca7d87e6807720095afc91cc16\"><code>4002b0d</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e9b76956499d42fe3c38536e4eb8dae77fa49e7\"><code>9e9b769</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a278afa89bbac2a30cd8e9a982ed3c6463169019\"><code>a278afa</code></a></td><td><code>Added cardinality methods.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f681606006b81695f68deadfc913fd2069045edc\"><code>f681606</code></a></td><td><code>Added cardinality to free abelian monoid for consistancy.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a0e50b384ab7bacea8761594fd30fd37de6ac16\"><code>3a0e50b</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4606cc69aad90e8693190dafce1d4948db0c46c\"><code>d4606cc</code></a></td><td><code>Added more robustness to element creation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/991953a60536c9532590270183cfa100d3577b39\"><code>991953a</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>\n",
    "created_at": "2014-02-08T17:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188860",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/545a8df551ec5bd60191134a0222ddc6001279bb"><code>545a8df</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2975c87c1d2638c5318336ba548fb28d0e03fb12"><code>2975c87</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4002b0d12ad417ca7d87e6807720095afc91cc16"><code>4002b0d</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e9b76956499d42fe3c38536e4eb8dae77fa49e7"><code>9e9b769</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a278afa89bbac2a30cd8e9a982ed3c6463169019"><code>a278afa</code></a></td><td><code>Added cardinality methods.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f681606006b81695f68deadfc913fd2069045edc"><code>f681606</code></a></td><td><code>Added cardinality to free abelian monoid for consistancy.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a0e50b384ab7bacea8761594fd30fd37de6ac16"><code>3a0e50b</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4606cc69aad90e8693190dafce1d4948db0c46c"><code>d4606cc</code></a></td><td><code>Added more robustness to element creation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/991953a60536c9532590270183cfa100d3577b39"><code>991953a</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>




---

archive/issue_comments_188861.json:
```json
{
    "body": "Changed commit from **[`9dca526`](https://github.com/sagemath/sagetrac-mirror/commit/9dca526f5ab91f7d2777ba4f4e945a869b169bb9)** to **[`991953a`](https://github.com/sagemath/sagetrac-mirror/commit/991953a60536c9532590270183cfa100d3577b39)**",
    "created_at": "2014-02-08T17:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188861",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9dca526`](https://github.com/sagemath/sagetrac-mirror/commit/9dca526f5ab91f7d2777ba4f4e945a869b169bb9)** to **[`991953a`](https://github.com/sagemath/sagetrac-mirror/commit/991953a60536c9532590270183cfa100d3577b39)**



---

archive/issue_comments_188862.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56703ebf108d92562eee067ba90f156a1bfaa50c\"><code>56703eb</code></a></td><td><code>Made Indexed* have entry points through Free*.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/163df6e7f6b29e53c0844995389f52c198cffcc1\"><code>163df6e</code></a></td><td><code>Changed more _basis_keys to _indices, deprecated the former.</code></td></tr></table>\n",
    "created_at": "2014-02-11T21:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188862",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56703ebf108d92562eee067ba90f156a1bfaa50c"><code>56703eb</code></a></td><td><code>Made Indexed* have entry points through Free*.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/163df6e7f6b29e53c0844995389f52c198cffcc1"><code>163df6e</code></a></td><td><code>Changed more _basis_keys to _indices, deprecated the former.</code></td></tr></table>




---

archive/issue_comments_188863.json:
```json
{
    "body": "Changed commit from **[`991953a`](https://github.com/sagemath/sagetrac-mirror/commit/991953a60536c9532590270183cfa100d3577b39)** to **[`163df6e`](https://github.com/sagemath/sagetrac-mirror/commit/163df6e7f6b29e53c0844995389f52c198cffcc1)**",
    "created_at": "2014-02-11T21:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188863",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`991953a`](https://github.com/sagemath/sagetrac-mirror/commit/991953a60536c9532590270183cfa100d3577b39)** to **[`163df6e`](https://github.com/sagemath/sagetrac-mirror/commit/163df6e7f6b29e53c0844995389f52c198cffcc1)**



---

archive/issue_comments_188864.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8db8e0a07605c801a9a9974e043312061ee375c1\"><code>8db8e0a</code></a></td><td><code>Changed `_an_element_` to indexed_monoid.py.</code></td></tr></table>\n",
    "created_at": "2014-02-11T21:47:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188864",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8db8e0a07605c801a9a9974e043312061ee375c1"><code>8db8e0a</code></a></td><td><code>Changed `_an_element_` to indexed_monoid.py.</code></td></tr></table>




---

archive/issue_comments_188865.json:
```json
{
    "body": "Changed commit from **[`163df6e`](https://github.com/sagemath/sagetrac-mirror/commit/163df6e7f6b29e53c0844995389f52c198cffcc1)** to **[`8db8e0a`](https://github.com/sagemath/sagetrac-mirror/commit/8db8e0a07605c801a9a9974e043312061ee375c1)**",
    "created_at": "2014-02-11T21:47:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188865",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`163df6e`](https://github.com/sagemath/sagetrac-mirror/commit/163df6e7f6b29e53c0844995389f52c198cffcc1)** to **[`8db8e0a`](https://github.com/sagemath/sagetrac-mirror/commit/8db8e0a07605c801a9a9974e043312061ee375c1)**



---

archive/issue_comments_188866.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHey Nicolas,\n\nFrom your comments on #15726, I've made the appropriate changes here.\n\n* All `Indexed*` now goes through `Free*`, but as a special case, I have `IndexedFreeAbelianGroup` as `FreeGroup(index_set=X, abelian=True)`. Should we do the same for `FreeMonoid`?\n\n* I want to leave `__pow__` alone since they are more specialized for the data structures.\n\n* The `__contains__`, are you suggesting putting it into `Parent`? If so, that might be a can of worms and should be done on another ticket.\n\n* I'd like to keep `IndexedFreeAbelianGroup` as multiplicative since I want to use them as a basis indexing set for polynomials.\n\n* Similarly, the comparisons are using lex ordering, so it gives a nice default order on terms when modeling polynomial rings with indexed generators.\n\nThank you for looking at this (and #15726). As always, I appreciate your wisdom and insight.\n\nBest,\n\nTravis\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8db8e0a07605c801a9a9974e043312061ee375c1\"><code>8db8e0a</code></a></td><td><code>Changed `_an_element_` to indexed_monoid.py.</code></td></tr></table>\n",
    "created_at": "2014-02-11T21:54:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188866",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

Hey Nicolas,

From your comments on #15726, I've made the appropriate changes here.

* All `Indexed*` now goes through `Free*`, but as a special case, I have `IndexedFreeAbelianGroup` as `FreeGroup(index_set=X, abelian=True)`. Should we do the same for `FreeMonoid`?

* I want to leave `__pow__` alone since they are more specialized for the data structures.

* The `__contains__`, are you suggesting putting it into `Parent`? If so, that might be a can of worms and should be done on another ticket.

* I'd like to keep `IndexedFreeAbelianGroup` as multiplicative since I want to use them as a basis indexing set for polynomials.

* Similarly, the comparisons are using lex ordering, so it gives a nice default order on terms when modeling polynomial rings with indexed generators.

Thank you for looking at this (and #15726). As always, I appreciate your wisdom and insight.

Best,

Travis

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8db8e0a07605c801a9a9974e043312061ee375c1"><code>8db8e0a</code></a></td><td><code>Changed `_an_element_` to indexed_monoid.py.</code></td></tr></table>




---

archive/issue_comments_188867.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd82ed8074f75f95f09b5f0959da09da5781dd92\"><code>bd82ed8</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/760c939430fb0bc66cce8cd33dc2aca9cdef8a5e\"><code>760c939</code></a></td><td><code>Merge branch 'public/monoids/15289-indexed' of trac.sagemath.org:sage into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03057a45e8ea5db1e95622f5e889915be2e8d024\"><code>03057a4</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>\n",
    "created_at": "2014-03-04T17:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188867",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd82ed8074f75f95f09b5f0959da09da5781dd92"><code>bd82ed8</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/760c939430fb0bc66cce8cd33dc2aca9cdef8a5e"><code>760c939</code></a></td><td><code>Merge branch 'public/monoids/15289-indexed' of trac.sagemath.org:sage into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03057a45e8ea5db1e95622f5e889915be2e8d024"><code>03057a4</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>




---

archive/issue_comments_188868.json:
```json
{
    "body": "Changed commit from **[`8db8e0a`](https://github.com/sagemath/sagetrac-mirror/commit/8db8e0a07605c801a9a9974e043312061ee375c1)** to **[`03057a4`](https://github.com/sagemath/sagetrac-mirror/commit/03057a45e8ea5db1e95622f5e889915be2e8d024)**",
    "created_at": "2014-03-04T17:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188868",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8db8e0a`](https://github.com/sagemath/sagetrac-mirror/commit/8db8e0a07605c801a9a9974e043312061ee375c1)** to **[`03057a4`](https://github.com/sagemath/sagetrac-mirror/commit/03057a45e8ea5db1e95622f5e889915be2e8d024)**



---

archive/issue_comments_188869.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2996e0772eb50f4f973b04c2a85c8bb33cf3aa6\"><code>a2996e0</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>\n",
    "created_at": "2014-03-13T05:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188869",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2996e0772eb50f4f973b04c2a85c8bb33cf3aa6"><code>a2996e0</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>




---

archive/issue_comments_188870.json:
```json
{
    "body": "Changed commit from **[`03057a4`](https://github.com/sagemath/sagetrac-mirror/commit/03057a45e8ea5db1e95622f5e889915be2e8d024)** to **[`a2996e0`](https://github.com/sagemath/sagetrac-mirror/commit/a2996e0772eb50f4f973b04c2a85c8bb33cf3aa6)**",
    "created_at": "2014-03-13T05:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188870",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`03057a4`](https://github.com/sagemath/sagetrac-mirror/commit/03057a45e8ea5db1e95622f5e889915be2e8d024)** to **[`a2996e0`](https://github.com/sagemath/sagetrac-mirror/commit/a2996e0772eb50f4f973b04c2a85c8bb33cf3aa6)**



---

archive/issue_comments_188871.json:
```json
{
    "body": "Changed commit from **[`a2996e0`](https://github.com/sagemath/sagetrac-mirror/commit/a2996e0772eb50f4f973b04c2a85c8bb33cf3aa6)** to **[`49068b2`](https://github.com/sagemath/sagetrac-mirror/commit/49068b2389e4eae6d207288d14be466d95f84966)**",
    "created_at": "2014-04-02T01:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188871",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a2996e0`](https://github.com/sagemath/sagetrac-mirror/commit/a2996e0772eb50f4f973b04c2a85c8bb33cf3aa6)** to **[`49068b2`](https://github.com/sagemath/sagetrac-mirror/commit/49068b2389e4eae6d207288d14be466d95f84966)**



---

archive/issue_comments_188872.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1cc3417208898b510a0060de76de5d1425a35b1\"><code>c1cc341</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49068b2389e4eae6d207288d14be466d95f84966\"><code>49068b2</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>\n",
    "created_at": "2014-04-02T01:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188872",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1cc3417208898b510a0060de76de5d1425a35b1"><code>c1cc341</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49068b2389e4eae6d207288d14be466d95f84966"><code>49068b2</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>




---

archive/issue_comments_188873.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6875cfbae0f2fd90475e4ae1170fcf2444db03fb\"><code>6875cfb</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>\n",
    "created_at": "2014-04-09T01:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188873",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6875cfbae0f2fd90475e4ae1170fcf2444db03fb"><code>6875cfb</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>




---

archive/issue_comments_188874.json:
```json
{
    "body": "Changed commit from **[`49068b2`](https://github.com/sagemath/sagetrac-mirror/commit/49068b2389e4eae6d207288d14be466d95f84966)** to **[`6875cfb`](https://github.com/sagemath/sagetrac-mirror/commit/6875cfbae0f2fd90475e4ae1170fcf2444db03fb)**",
    "created_at": "2014-04-09T01:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188874",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`49068b2`](https://github.com/sagemath/sagetrac-mirror/commit/49068b2389e4eae6d207288d14be466d95f84966)** to **[`6875cfb`](https://github.com/sagemath/sagetrac-mirror/commit/6875cfbae0f2fd90475e4ae1170fcf2444db03fb)**



---

archive/issue_comments_188875.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1818a3efc4e4b28a005a833a05a66e7765280966\"><code>1818a3e</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>\n",
    "created_at": "2014-04-15T02:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188875",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1818a3efc4e4b28a005a833a05a66e7765280966"><code>1818a3e</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>




---

archive/issue_comments_188876.json:
```json
{
    "body": "Changed commit from **[`6875cfb`](https://github.com/sagemath/sagetrac-mirror/commit/6875cfbae0f2fd90475e4ae1170fcf2444db03fb)** to **[`1818a3e`](https://github.com/sagemath/sagetrac-mirror/commit/1818a3efc4e4b28a005a833a05a66e7765280966)**",
    "created_at": "2014-04-15T02:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188876",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6875cfb`](https://github.com/sagemath/sagetrac-mirror/commit/6875cfbae0f2fd90475e4ae1170fcf2444db03fb)** to **[`1818a3e`](https://github.com/sagemath/sagetrac-mirror/commit/1818a3efc4e4b28a005a833a05a66e7765280966)**



---

archive/issue_comments_188877.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@tscrim](#comment%3A14):\n> From your comments on #15726, I've made the appropriate changes here.\n\nArgl, two months already ... sorry for lagging behind so much. I know\nhow painful it is to get suggestions late in the process when\neverything is in a clean state ...\n\n> * All `Indexed*` now goes through `Free*`,\n\nNice! Thanks!\n\n> but as a special case, I have `IndexedFreeAbelianGroup` as `FreeGroup(index_set=X, abelian=True)`. Should we do the same for `FreeMonoid`?\n\nIt would be nice to be consistent indeed, but I have no preference for\none idiom or the other. Maybe ask on sage-devel?\n\nBy the way, for this ticket or later, I have been desiring for a long\ntime to have some systematic idiom like:\n\n```\n    sage: Groups().free(index_set={...})\n    sage: CommutativeAdditiveGroups().free(index_set={...})\n    sage: Algebras(QQ).free(index_set={...})\n```\n\nThen we could remove all the Free* from the global name space.\n\n> * The `__contains__`, are you suggesting putting it into `Parent`?\n> If so, that might be a can of worms and should be done on another ticket.\n\nI was thinking of putting it in the categories, but you are right,\ngiven the mro `Parent.__contains__` will take over.\n\nIn fact do you have a specific reason to override\n`Parent.__contains__`? Granted, the policy implemented in\n`Parent.__contains__` is unsatisfactory (it's doing too much stuff to\nmy taste, in particular stuff that can potentially be costly). And\nfixing it could indeed be a can of worm. On the other hand, having\nmany parents define their own containment policy is unsatisfactory as\nwell.\n\n> * I'd like to keep `IndexedFreeAbelianGroup` as multiplicative since I want to use them as a basis indexing set for polynomials.\n\nIt's customary as well to index polynomials by exponent vectors in the\nadditive group `NN^n`. Actually I would tend to prefer it. But that's\nprobably something to ask on sage-devel.\n\n> * Similarly, the comparisons are using lex ordering, so it gives a nice default order on terms when modeling polynomial rings with indexed generators.\n\nAs long as it's easy to customize it, I guess that's fine.\n\nIn term of code review, what should I look at at this point? Were some\ncommits already reviewed, or should I just look at the diff w.r.t\ndevelop?\n\nCheers,\n                         Nicolas",
    "created_at": "2014-04-18T15:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188877",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@tscrim](#comment%3A14):
> From your comments on #15726, I've made the appropriate changes here.

Argl, two months already ... sorry for lagging behind so much. I know
how painful it is to get suggestions late in the process when
everything is in a clean state ...

> * All `Indexed*` now goes through `Free*`,

Nice! Thanks!

> but as a special case, I have `IndexedFreeAbelianGroup` as `FreeGroup(index_set=X, abelian=True)`. Should we do the same for `FreeMonoid`?

It would be nice to be consistent indeed, but I have no preference for
one idiom or the other. Maybe ask on sage-devel?

By the way, for this ticket or later, I have been desiring for a long
time to have some systematic idiom like:

```
    sage: Groups().free(index_set={...})
    sage: CommutativeAdditiveGroups().free(index_set={...})
    sage: Algebras(QQ).free(index_set={...})
```

Then we could remove all the Free* from the global name space.

> * The `__contains__`, are you suggesting putting it into `Parent`?
> If so, that might be a can of worms and should be done on another ticket.

I was thinking of putting it in the categories, but you are right,
given the mro `Parent.__contains__` will take over.

In fact do you have a specific reason to override
`Parent.__contains__`? Granted, the policy implemented in
`Parent.__contains__` is unsatisfactory (it's doing too much stuff to
my taste, in particular stuff that can potentially be costly). And
fixing it could indeed be a can of worm. On the other hand, having
many parents define their own containment policy is unsatisfactory as
well.

> * I'd like to keep `IndexedFreeAbelianGroup` as multiplicative since I want to use them as a basis indexing set for polynomials.

It's customary as well to index polynomials by exponent vectors in the
additive group `NN^n`. Actually I would tend to prefer it. But that's
probably something to ask on sage-devel.

> * Similarly, the comparisons are using lex ordering, so it gives a nice default order on terms when modeling polynomial rings with indexed generators.

As long as it's easy to customize it, I guess that's fine.

In term of code review, what should I look at at this point? Were some
commits already reviewed, or should I just look at the diff w.r.t
develop?

Cheers,
                         Nicolas



---

archive/issue_comments_188878.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@nthiery](#comment%3A21): \n> > but as a special case, I have `IndexedFreeAbelianGroup` as `FreeGroup(index_set=X, abelian=True)`. Should we do the same for `FreeMonoid`?\n\n> \n> It would be nice to be consistent indeed, but I have no preference for\n> one idiom or the other. Maybe ask on sage-devel?\n\nI will do so.\n\n> By the way, for this ticket or later, I have been desiring for a long\n> time to have some systematic idiom like:\n> \n> ```\n>     sage: Groups().free(index_set={...})\n>     sage: CommutativeAdditiveGroups().free(index_set={...})\n>     sage: Algebras(QQ).free(index_set={...})\n> ```\n> \n> Then we could remove all the Free* from the global name space.\n\nI'll also ask about this on sage-devel, and will start the process here if there's no resistance.\n\n> I was thinking of putting it in the categories, but you are right,\n> given the mro `Parent.__contains__` will take over.\n> \n> In fact do you have a specific reason to override\n> `Parent.__contains__`? Granted, the policy implemented in\n> `Parent.__contains__` is unsatisfactory (it's doing too much stuff to\n> my taste, in particular stuff that can potentially be costly). And\n> fixing it could indeed be a can of worm. On the other hand, having\n> many parents define their own containment policy is unsatisfactory as\n> well.\n\nI don't have a good reason (the annoyance is the `self(x)` calls the coercion framework and makes it so we can't register any coercions thereafter, but that's not a problem in how I'm using these), so I'm fine with scraping it.\n \n> > * I'd like to keep `IndexedFreeAbelianGroup` as multiplicative since I want to use them as a basis indexing set for polynomials.\n\n> \n> It's customary as well to index polynomials by exponent vectors in the\n> additive group `NN^n`. Actually I would tend to prefer it. But that's\n> probably something to ask on sage-devel.\n\nI'm not quite sure what you're suggesting here.\n\n> As long as it's easy to customize it, I guess that's fine.\n\nYes it is by passing a parameter (`monomial_cmp`, which should be renamed to `generator_cmp`) with a cmp function.\n \n> In term of code review, what should I look at at this point? Were some\n> commits already reviewed, or should I just look at the diff w.r.t\n> develop?\n\nYou're the only one who's really looked at this code, so a diff w.r.t. develop.\n\nThank you!",
    "created_at": "2014-04-18T16:07:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188878",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@nthiery](#comment%3A21): 
> > but as a special case, I have `IndexedFreeAbelianGroup` as `FreeGroup(index_set=X, abelian=True)`. Should we do the same for `FreeMonoid`?

> 
> It would be nice to be consistent indeed, but I have no preference for
> one idiom or the other. Maybe ask on sage-devel?

I will do so.

> By the way, for this ticket or later, I have been desiring for a long
> time to have some systematic idiom like:
> 
> ```
>     sage: Groups().free(index_set={...})
>     sage: CommutativeAdditiveGroups().free(index_set={...})
>     sage: Algebras(QQ).free(index_set={...})
> ```
> 
> Then we could remove all the Free* from the global name space.

I'll also ask about this on sage-devel, and will start the process here if there's no resistance.

> I was thinking of putting it in the categories, but you are right,
> given the mro `Parent.__contains__` will take over.
> 
> In fact do you have a specific reason to override
> `Parent.__contains__`? Granted, the policy implemented in
> `Parent.__contains__` is unsatisfactory (it's doing too much stuff to
> my taste, in particular stuff that can potentially be costly). And
> fixing it could indeed be a can of worm. On the other hand, having
> many parents define their own containment policy is unsatisfactory as
> well.

I don't have a good reason (the annoyance is the `self(x)` calls the coercion framework and makes it so we can't register any coercions thereafter, but that's not a problem in how I'm using these), so I'm fine with scraping it.
 
> > * I'd like to keep `IndexedFreeAbelianGroup` as multiplicative since I want to use them as a basis indexing set for polynomials.

> 
> It's customary as well to index polynomials by exponent vectors in the
> additive group `NN^n`. Actually I would tend to prefer it. But that's
> probably something to ask on sage-devel.

I'm not quite sure what you're suggesting here.

> As long as it's easy to customize it, I guess that's fine.

Yes it is by passing a parameter (`monomial_cmp`, which should be renamed to `generator_cmp`) with a cmp function.
 
> In term of code review, what should I look at at this point? Were some
> commits already reviewed, or should I just look at the diff w.r.t
> develop?

You're the only one who's really looked at this code, so a diff w.r.t. develop.

Thank you!



---

archive/issue_comments_188879.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@tscrim](#comment%3A22):\n> > > * I'd like to keep `IndexedFreeAbelianGroup` as multiplicative since I want to use them as a basis indexing set for polynomials.\n\n> > \n> > It's customary as well to index polynomials by exponent vectors in the\n> > additive group `NN^n`. Actually I would tend to prefer it. But that's\n> > probably something to ask on sage-devel.\n\n> \n> I'm not quite sure what you're suggesting here.\n\nI guess I mean that I lean toward IndexedFreeAbelianGroup being\nadditive. But that's definitely debatable. Opinion anyone?\n\nBtw, for consistency with the naming of hte categories maybe a better\nname for the class could be IndexedFreeCommutativeGroup (or\nIndexedFreeCommutativeAdditiveGroup if we opt for additive).\n\n> You're the only one who's really looked at this code, so a diff w.r.t. develop.\n\nOk!",
    "created_at": "2014-04-18T17:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188879",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@tscrim](#comment%3A22):
> > > * I'd like to keep `IndexedFreeAbelianGroup` as multiplicative since I want to use them as a basis indexing set for polynomials.

> > 
> > It's customary as well to index polynomials by exponent vectors in the
> > additive group `NN^n`. Actually I would tend to prefer it. But that's
> > probably something to ask on sage-devel.

> 
> I'm not quite sure what you're suggesting here.

I guess I mean that I lean toward IndexedFreeAbelianGroup being
additive. But that's definitely debatable. Opinion anyone?

Btw, for consistency with the naming of hte categories maybe a better
name for the class could be IndexedFreeCommutativeGroup (or
IndexedFreeCommutativeAdditiveGroup if we opt for additive).

> You're the only one who's really looked at this code, so a diff w.r.t. develop.

Ok!



---

archive/issue_comments_188880.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nsage-devel thread: https://groups.google.com/forum/#!topic/sage-devel/yAvIvWxNgXE",
    "created_at": "2014-04-18T23:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188880",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">comment:24</div>

sage-devel thread: https://groups.google.com/forum/#!topic/sage-devel/yAvIvWxNgXE



---

archive/issue_comments_188881.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c1b4eb80425807e7edb96240f102629cc13f312\"><code>1c1b4eb</code></a></td><td><code>Changed monomial_cmp to generator_cmp and added free (static)method to monoids and groups category.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47b5be756efad8f784b4bdab01c5a37a70ebd849\"><code>47b5be7</code></a></td><td><code>Removed `__contains__` and fix monomial_cmp in indexed_monoid.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4097a8c781dfe63a3bc7e5090c709342d238530b\"><code>4097a8c</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23301a86c56549062b6441c7b2ac6336da0d1001\"><code>23301a8</code></a></td><td><code>Misc fixes and tweaks.</code></td></tr></table>\n",
    "created_at": "2014-04-25T16:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188881",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c1b4eb80425807e7edb96240f102629cc13f312"><code>1c1b4eb</code></a></td><td><code>Changed monomial_cmp to generator_cmp and added free (static)method to monoids and groups category.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47b5be756efad8f784b4bdab01c5a37a70ebd849"><code>47b5be7</code></a></td><td><code>Removed `__contains__` and fix monomial_cmp in indexed_monoid.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4097a8c781dfe63a3bc7e5090c709342d238530b"><code>4097a8c</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23301a86c56549062b6441c7b2ac6336da0d1001"><code>23301a8</code></a></td><td><code>Misc fixes and tweaks.</code></td></tr></table>




---

archive/issue_comments_188882.json:
```json
{
    "body": "Changed commit from **[`1818a3e`](https://github.com/sagemath/sagetrac-mirror/commit/1818a3efc4e4b28a005a833a05a66e7765280966)** to **[`23301a8`](https://github.com/sagemath/sagetrac-mirror/commit/23301a86c56549062b6441c7b2ac6336da0d1001)**",
    "created_at": "2014-04-25T16:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188882",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1818a3e`](https://github.com/sagemath/sagetrac-mirror/commit/1818a3efc4e4b28a005a833a05a66e7765280966)** to **[`23301a8`](https://github.com/sagemath/sagetrac-mirror/commit/23301a86c56549062b6441c7b2ac6336da0d1001)**



---

archive/issue_comments_188883.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHey Nicolas,\n\nI've changed `monomial_cmp` to `generator_cmp` and made some other fixes I encountered along the way (after merging in `6.2.rc0`). I've started adding in our idiom of `Category.free` for groups and monoids, the rest will be done in #16218 (along with possible deprecations). Back to ready for review.\n\nThanks,\n\nTravis",
    "created_at": "2014-04-26T04:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188883",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">comment:26</div>

Hey Nicolas,

I've changed `monomial_cmp` to `generator_cmp` and made some other fixes I encountered along the way (after merging in `6.2.rc0`). I've started adding in our idiom of `Category.free` for groups and monoids, the rest will be done in #16218 (along with possible deprecations). Back to ready for review.

Thanks,

Travis



---

archive/issue_comments_188884.json:
```json
{
    "body": "Changed commit from **[`23301a8`](https://github.com/sagemath/sagetrac-mirror/commit/23301a86c56549062b6441c7b2ac6336da0d1001)** to **[`81eede4`](https://github.com/sagemath/sagetrac-mirror/commit/81eede490c2d46a5875145b5ba1138e08605ffdd)**",
    "created_at": "2014-05-05T15:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188884",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`23301a8`](https://github.com/sagemath/sagetrac-mirror/commit/23301a86c56549062b6441c7b2ac6336da0d1001)** to **[`81eede4`](https://github.com/sagemath/sagetrac-mirror/commit/81eede490c2d46a5875145b5ba1138e08605ffdd)**



---

archive/issue_comments_188885.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81eede490c2d46a5875145b5ba1138e08605ffdd\"><code>81eede4</code></a></td><td><code>15289: Proofreading</code></td></tr></table>\n",
    "created_at": "2014-05-05T15:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188885",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81eede490c2d46a5875145b5ba1138e08605ffdd"><code>81eede4</code></a></td><td><code>15289: Proofreading</code></td></tr></table>




---

archive/issue_comments_188886.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHi Travis,\n\nFinally working on the review! Besides the little tidying I just\ncommitted here are some comments for the files I have been checking so\nfar:\n\nFreeGroup:\n\n- \u00abif specified then the optional keyword ``abelian`` can be used\u00bb\n   And not otherwise?\n\n- Rename indexed_group.py to indexed_free_group.py\n\n- Define group_generators rather than gens (or at the minimum define\n  group_generators as an alias to gens) and use it whenever\n  possible.\n\n- Element.__pow__: better use standard binary powering:\n\n  ```\n  sage: pow = x.__class__.__pow__\n  sage: pow_generic = Monoids().element_class.__pow__\n  sage: pow_generic(x,1000) == pow(x,1000)\n  True\n\n  sage: %timeit pow(x,1)\n  1000000 loops, best of 3: 827 ns per loop\n  sage: %timeit pow_generic(x,1)\n  1000000 loops, best of 3: 521 ns per loop\n\n  sage: %timeit pow(x,-1)\n  100000 loops, best of 3: 6.45 \u00b5s per loop\n  sage: %timeit pow_generic(x,-1)\n  100000 loops, best of 3: 6.85 \u00b5s per loop\n\n  sage: %timeit pow(x,2)\n  100000 loops, best of 3: 11.5 \u00b5s per loop\n  sage: %timeit pow_generic(x,2)\n  100000 loops, best of 3: 6.07 \u00b5s per loop\n\n  sage: %timeit pow(x,50)\n  1000 loops, best of 3: 844 \u00b5s per loop\n  sage: %timeit pow_generic(x,50)\n  10000 loops, best of 3: 80.2 \u00b5s per loop\n\n  sage: %timeit pow(x,1000)\n  10 loops, best of 3: 181 ms per loop\n  sage: %timeit pow_generic(x,1000)\n  1000 loops, best of 3: 1.04 ms per loop\n  ```\n\n- `__len__`, ... all the calls to sorted_items suggest that some\n  sorting is involved when this is not the case.\n\n- order, rank, is_finite are identical in all the free\n  (abelian) monoids/groups. Could we avoid the duplication?\n\nFreeAbelianGroup:\n\n- Element._mul_ could use sage.combinat.dict_addition\n\nMore later tonight!\n\nCheers,\n                                 Nicolas",
    "created_at": "2014-05-05T15:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188886",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:28" align="right">comment:28</div>

Hi Travis,

Finally working on the review! Besides the little tidying I just
committed here are some comments for the files I have been checking so
far:

FreeGroup:

- ¬´if specified then the optional keyword ``abelian`` can be used¬ª
   And not otherwise?

- Rename indexed_group.py to indexed_free_group.py

- Define group_generators rather than gens (or at the minimum define
  group_generators as an alias to gens) and use it whenever
  possible.

- Element.__pow__: better use standard binary powering:

  ```
  sage: pow = x.__class__.__pow__
  sage: pow_generic = Monoids().element_class.__pow__
  sage: pow_generic(x,1000) == pow(x,1000)
  True

  sage: %timeit pow(x,1)
  1000000 loops, best of 3: 827 ns per loop
  sage: %timeit pow_generic(x,1)
  1000000 loops, best of 3: 521 ns per loop

  sage: %timeit pow(x,-1)
  100000 loops, best of 3: 6.45 ¬µs per loop
  sage: %timeit pow_generic(x,-1)
  100000 loops, best of 3: 6.85 ¬µs per loop

  sage: %timeit pow(x,2)
  100000 loops, best of 3: 11.5 ¬µs per loop
  sage: %timeit pow_generic(x,2)
  100000 loops, best of 3: 6.07 ¬µs per loop

  sage: %timeit pow(x,50)
  1000 loops, best of 3: 844 ¬µs per loop
  sage: %timeit pow_generic(x,50)
  10000 loops, best of 3: 80.2 ¬µs per loop

  sage: %timeit pow(x,1000)
  10 loops, best of 3: 181 ms per loop
  sage: %timeit pow_generic(x,1000)
  1000 loops, best of 3: 1.04 ms per loop
  ```

- `__len__`, ... all the calls to sorted_items suggest that some
  sorting is involved when this is not the case.

- order, rank, is_finite are identical in all the free
  (abelian) monoids/groups. Could we avoid the duplication?

FreeAbelianGroup:

- Element._mul_ could use sage.combinat.dict_addition

More later tonight!

Cheers,
                                 Nicolas



---

archive/issue_comments_188887.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d27baacb4721ee041162cb280b7ee48d2b0da34\"><code>7d27baa</code></a></td><td><code>#15289: misc minor improvements to the doc</code></td></tr></table>\n",
    "created_at": "2014-05-05T20:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188887",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d27baacb4721ee041162cb280b7ee48d2b0da34"><code>7d27baa</code></a></td><td><code>#15289: misc minor improvements to the doc</code></td></tr></table>




---

archive/issue_comments_188888.json:
```json
{
    "body": "Changed commit from **[`81eede4`](https://github.com/sagemath/sagetrac-mirror/commit/81eede490c2d46a5875145b5ba1138e08605ffdd)** to **[`7d27baa`](https://github.com/sagemath/sagetrac-mirror/commit/7d27baacb4721ee041162cb280b7ee48d2b0da34)**",
    "created_at": "2014-05-05T20:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188888",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`81eede4`](https://github.com/sagemath/sagetrac-mirror/commit/81eede490c2d46a5875145b5ba1138e08605ffdd)** to **[`7d27baa`](https://github.com/sagemath/sagetrac-mirror/commit/7d27baacb4721ee041162cb280b7ee48d2b0da34)**



---

archive/issue_comments_188889.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nBack to work!\n\nI have been through the whole diff. Thanks for this big chunk of work!\nSome more comments:\n\nIndexedGenerators\n\n- Move to sage/structure\n\n- Detailed description of what the options do: this is probably best\n  done in the EXAMPLES section, with illustrations.\n\n- Avoid the duplication in the documentation for the print options,\n  (in CombinatorialFreeModule and IndexedGenerators). I probably would\n  put it in IndexedGenerators.\n\n- Side note: since the `cmp` function is phased out by Python 3, we\n  will have to start thinking about what would be the most natural way\n  to specify a total order in the context of Python 3.\n\nFreeAbelianMonoid / FreeMonoid:\n\n- Now or later: for consistency, could we use a class with\n  UniqueRepresentation and `__classcall__` instead of a factory\n  function?\n\n  If you decide for later, please open a ticket. Same for the items below.\n\n- Now or later: `__repr__` -> `_repr_`, `__call__` ->\n  `_element_constructor_`. The custom `__contains__` might not be\n  needed.\n\n- Now or later: initialize the category\n\n- is_FreeAbelianMonoid will return False for an\n  IndexedFreeAbelianMonoid. Do we care?\n\n- cardinality should be 1 for n=0. Same for all the following\n  cardinality methods later in the diff\n\n- TODO: same docstring changes as in my commit (e.g. for the\n  description of 'abelian')\n\nIndexedMonoid:\n\n- The description is useful; I now see the point of `sorted_items`. We\n  should search for a better name though. In particular the\n  description \"Return the items (i.e terms) of ``self``, sorted for\n  printing.\"  is misleading, as it's not only used for printing.\n\n- Same remarks as for IndexedGroups.\n\n- cancel: shouldn't this be // ?\n\n- Special cases for converting 1 or testing equality with 1: don't\n  bother for new monoids. That's an ugly habit in Sage and we should\n  steer away of it.\n\n- In _element_constructor_:\n  - The following line is not needed; this is already taken care of by `__call__`:\n\n    ```\n    if isinstance(x, IndexedFreeAbelianMonoidElement) and x.parent() is self:\n       return x\n    ```\n\n  - Construction of the generator indexed by `i` with `F(i)`: I'd\n    rather not enable this unless users come crying loud for\n    it. F.gen(i) is fine, and it's just an endless can of worm since,\n    as you point out later, it can be ambiguous. Besides containment\n    testing can be expensive.\n\nIndexedFreeAbelianMonoid:\n\n- Add an example in `_element_constructor_` illustrating the construction from a dictionary.\n\n- Don't we want to always call dict on `x` so as to avoid a reference\n  effect in case of a dict, throw appropriate errors if it can't be\n  made into a dict, and accept, e.g. iterables?",
    "created_at": "2014-05-05T20:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188889",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:30" align="right">comment:30</div>

Back to work!

I have been through the whole diff. Thanks for this big chunk of work!
Some more comments:

IndexedGenerators

- Move to sage/structure

- Detailed description of what the options do: this is probably best
  done in the EXAMPLES section, with illustrations.

- Avoid the duplication in the documentation for the print options,
  (in CombinatorialFreeModule and IndexedGenerators). I probably would
  put it in IndexedGenerators.

- Side note: since the `cmp` function is phased out by Python 3, we
  will have to start thinking about what would be the most natural way
  to specify a total order in the context of Python 3.

FreeAbelianMonoid / FreeMonoid:

- Now or later: for consistency, could we use a class with
  UniqueRepresentation and `__classcall__` instead of a factory
  function?

  If you decide for later, please open a ticket. Same for the items below.

- Now or later: `__repr__` -> `_repr_`, `__call__` ->
  `_element_constructor_`. The custom `__contains__` might not be
  needed.

- Now or later: initialize the category

- is_FreeAbelianMonoid will return False for an
  IndexedFreeAbelianMonoid. Do we care?

- cardinality should be 1 for n=0. Same for all the following
  cardinality methods later in the diff

- TODO: same docstring changes as in my commit (e.g. for the
  description of 'abelian')

IndexedMonoid:

- The description is useful; I now see the point of `sorted_items`. We
  should search for a better name though. In particular the
  description "Return the items (i.e terms) of ``self``, sorted for
  printing."  is misleading, as it's not only used for printing.

- Same remarks as for IndexedGroups.

- cancel: shouldn't this be // ?

- Special cases for converting 1 or testing equality with 1: don't
  bother for new monoids. That's an ugly habit in Sage and we should
  steer away of it.

- In _element_constructor_:
  - The following line is not needed; this is already taken care of by `__call__`:

    ```
    if isinstance(x, IndexedFreeAbelianMonoidElement) and x.parent() is self:
       return x
    ```

  - Construction of the generator indexed by `i` with `F(i)`: I'd
    rather not enable this unless users come crying loud for
    it. F.gen(i) is fine, and it's just an endless can of worm since,
    as you point out later, it can be ambiguous. Besides containment
    testing can be expensive.

IndexedFreeAbelianMonoid:

- Add an example in `_element_constructor_` illustrating the construction from a dictionary.

- Don't we want to always call dict on `x` so as to avoid a reference
  effect in case of a dict, throw appropriate errors if it can't be
  made into a dict, and accept, e.g. iterables?



---

archive/issue_comments_188890.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nRemaining two questions about the user interface.\n\nCurrently, the arguments passed to construct a free * are:\n\n```\n    def free(n=None, names='x', index_set=None, ...):\n```\n\nHere is a proposal for a variant:\n\n```\n    def free(index_set=None, names=None, prefix='x', ...)\n```\nwhere:\n\n- `index_set=n` is a short hand for `index_set=[0,...,n-1]` (or the\n  equivalent `IntegerRange`?)\n- `index_set='x,y,z'` is a short hand for `names='x,y,z'`\n- `names` can either be a string like `'x,y,z'` or a list or iterables\n  of `names`.\n\nAdvantages:\n\n- This supports simultaneously `C.free(I)`, `C.free('x,y,z')`, and\n  `C.free(3)`, which are the most common use cases.\n\n- This still supports `F.<x,y,z> = C.free()`.\n\n- This is consistent with both `FreeModule(QQ, 3)` and\n  `CombinatorialFreeModule(QQ, I)`, as well as with the upcoming\n  `FreeModule(QQ,I)` which will call `IndexedFreeModule(QQ, I)`.\n\n- There is a clear distinction between the prefix and the names.\n  Otherwise `names='x'` is ambiguous: a singleton list of names, or a\n  prefix?\n\nSecond point: I am hesitant about the `abelian` argument. With #10963,\nI definitely would prefer:\n\n```\n    Groups().Commutative().free()\n```\nto\n\n```\n    Groups().free(abelian=True)\n```\n\nMaybe, as a more consistent temporary measure, we could use:\n\n```\n    Groups().free(commutative=True)\n```\n\nOnce the above is settled, I guess this ticket is good to go!\n\nCheers,\n                                 Nicolas",
    "created_at": "2014-05-05T21:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188890",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:31" align="right">comment:31</div>

Remaining two questions about the user interface.

Currently, the arguments passed to construct a free * are:

```
    def free(n=None, names='x', index_set=None, ...):
```

Here is a proposal for a variant:

```
    def free(index_set=None, names=None, prefix='x', ...)
```
where:

- `index_set=n` is a short hand for `index_set=[0,...,n-1]` (or the
  equivalent `IntegerRange`?)
- `index_set='x,y,z'` is a short hand for `names='x,y,z'`
- `names` can either be a string like `'x,y,z'` or a list or iterables
  of `names`.

Advantages:

- This supports simultaneously `C.free(I)`, `C.free('x,y,z')`, and
  `C.free(3)`, which are the most common use cases.

- This still supports `F.<x,y,z> = C.free()`.

- This is consistent with both `FreeModule(QQ, 3)` and
  `CombinatorialFreeModule(QQ, I)`, as well as with the upcoming
  `FreeModule(QQ,I)` which will call `IndexedFreeModule(QQ, I)`.

- There is a clear distinction between the prefix and the names.
  Otherwise `names='x'` is ambiguous: a singleton list of names, or a
  prefix?

Second point: I am hesitant about the `abelian` argument. With #10963,
I definitely would prefer:

```
    Groups().Commutative().free()
```
to

```
    Groups().free(abelian=True)
```

Maybe, as a more consistent temporary measure, we could use:

```
    Groups().free(commutative=True)
```

Once the above is settled, I guess this ticket is good to go!

Cheers,
                                 Nicolas



---

archive/issue_comments_188891.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nBtw, I am wondering whether there would be a way to obtain, with minimum duplication of code, the additive versions? After all, it's just about the names of few methods (`_add_` vs `_mul_`, `intmul` vs `_pow_`,  `_neg_` vs `__invert__`).",
    "created_at": "2014-05-05T21:26:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188891",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:32" align="right">comment:32</div>

Btw, I am wondering whether there would be a way to obtain, with minimum duplication of code, the additive versions? After all, it's just about the names of few methods (`_add_` vs `_mul_`, `intmul` vs `_pow_`,  `_neg_` vs `__invert__`).



---

archive/issue_events_215366.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215366"
}
```



---

archive/issue_events_215367.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215367"
}
```



---

archive/issue_events_215368.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-09T14:50:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215368"
}
```



---

archive/issue_events_215369.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-09T14:50:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215369"
}
```



---

archive/issue_comments_188892.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\npatchbot:\n\n```\nsage -t --long src/sage/structure/sage_object.pyx  # 1 doctest failed\nsage -t --long src/sage/misc/indexed_generators.py  # 1 doctest failed\n```",
    "created_at": "2014-05-09T14:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188892",
    "user": "https://github.com/rwst"
}
```

<div id="comment:34" align="right">comment:34</div>

patchbot:

```
sage -t --long src/sage/structure/sage_object.pyx  # 1 doctest failed
sage -t --long src/sage/misc/indexed_generators.py  # 1 doctest failed
```



---

archive/issue_comments_188893.json:
```json
{
    "body": "Changed commit from **[`7d27baa`](https://github.com/sagemath/sagetrac-mirror/commit/7d27baacb4721ee041162cb280b7ee48d2b0da34)** to **[`1ff1a04`](https://github.com/sagemath/sagetrac-mirror/commit/1ff1a0483f5e61959a432371b701f593a5dee599)**",
    "created_at": "2014-05-12T00:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188893",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d27baa`](https://github.com/sagemath/sagetrac-mirror/commit/7d27baacb4721ee041162cb280b7ee48d2b0da34)** to **[`1ff1a04`](https://github.com/sagemath/sagetrac-mirror/commit/1ff1a0483f5e61959a432371b701f593a5dee599)**



---

archive/issue_comments_188894.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6589a09e1eea3c7c16e97ffd397317a741d2e320\"><code>6589a09</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27cbf34e15872bd03115071e0b640207e56089e3\"><code>27cbf34</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f667f47f42fbc78369b3b12edd104ac0cc0eca1\"><code>3f667f4</code></a></td><td><code>Merge branch 'public/monoids/15289-indexed' of trac.sagemath.org:sage into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90f339fae0a02a54f664940c7bd799e6138a2c30\"><code>90f339f</code></a></td><td><code>Doing some of the changes Nicolas requested.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fabaaf162b06a8072d2c3b2d3a9e525ec8f0bb1c\"><code>fabaaf1</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cca67e39f6113afa6fed74567ccf53c709d57a7\"><code>4cca67e</code></a></td><td><code>Some more fixes; still not done yet.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0231f73cbf7d50f9985e78a2dc20b80b52ba54a6\"><code>0231f73</code></a></td><td><code>Fixed the categories interface.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d8668295f3e49279219a4f45ae49a521680809e\"><code>0d86682</code></a></td><td><code>Fixed all doctests except for the pickling.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db57ef33cae183ca5657fa4a089853e6bdc734e3\"><code>db57ef3</code></a></td><td><code>More fixes for cardinality methods.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ff1a0483f5e61959a432371b701f593a5dee599\"><code>1ff1a04</code></a></td><td><code>Some whitespace fixes.</code></td></tr></table>\n",
    "created_at": "2014-05-12T00:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188894",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6589a09e1eea3c7c16e97ffd397317a741d2e320"><code>6589a09</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27cbf34e15872bd03115071e0b640207e56089e3"><code>27cbf34</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f667f47f42fbc78369b3b12edd104ac0cc0eca1"><code>3f667f4</code></a></td><td><code>Merge branch 'public/monoids/15289-indexed' of trac.sagemath.org:sage into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90f339fae0a02a54f664940c7bd799e6138a2c30"><code>90f339f</code></a></td><td><code>Doing some of the changes Nicolas requested.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fabaaf162b06a8072d2c3b2d3a9e525ec8f0bb1c"><code>fabaaf1</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cca67e39f6113afa6fed74567ccf53c709d57a7"><code>4cca67e</code></a></td><td><code>Some more fixes; still not done yet.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0231f73cbf7d50f9985e78a2dc20b80b52ba54a6"><code>0231f73</code></a></td><td><code>Fixed the categories interface.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d8668295f3e49279219a4f45ae49a521680809e"><code>0d86682</code></a></td><td><code>Fixed all doctests except for the pickling.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db57ef33cae183ca5657fa4a089853e6bdc734e3"><code>db57ef3</code></a></td><td><code>More fixes for cardinality methods.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ff1a0483f5e61959a432371b701f593a5dee599"><code>1ff1a04</code></a></td><td><code>Some whitespace fixes.</code></td></tr></table>




---

archive/issue_comments_188895.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nFixed everything mentioned above except I've run into a *major* pickling issue with `UniqueFactory` (which is why I've cc-ed Simon).\n\nThere is some precedence for creating a generator from an index:\n\n```\nsage: C = CombinatorialFree\nModule(ZZ, ['a','b','c'])\nsage: C('a')\nB['a']\n```\nSo I'd like to leave that in for now. However I made things like `F(1)` only return `F[1]`.\n\nI changed the input for `Monoids().free(...)` but I left `FreeMonoid(...)` as I had it before because I don't want to deal with deprecations there in this ticket (this is #16330). I'll do the cleanup of the factory functions in the followup #16329.\n\nI'm not doing anything to `FreeMonoid` or `FreeAbelianMonoid` other than redirecting input, so I'm not going to make these changes here:\n\n> * Now or later: `__repr__ -> _repr_`, `__call__ -> _element_constructor_`. The custom `__contains__` might not be needed.\n> * Now or later: initialize the category\n\nWe could probably also fit that in #16329 or another followup.\n\nSimon, so I've changed the `UniqueFactory` object `FreeMonoid` to a new factory function since it returns a class which I've designed as a `UniqueRepresentation`. However unpickling old `FreeMonoid` objects fails because of the unpickling mechanism of `UniqueFactory` redirects to `generic_factory_unpickle()` and has `FreeMonoid` from the global namespace as the first object. It is expecting it to be a `UniqueFactory` instance, so it errors out here. Furthermore because of the structure of the pickle, I'm unable to use `register_unpickle_override` or see anyway to redirect that specific pickle without changing the behavior of `generic_factory_unpickle()`.\n\nI'm thinking the best thing to do is to change `generic_factory_unpickle()` to accept a general object as input and if the first input is no longer a `UniqueFactory`, then call it with the arguments given as part of the pickle. Another option I see is to override `UniqueFactory.__call__`, but I really don't want to do that. The last option I see, and I absolutely don't like this, is to make my new factory function into a different name temporarily (or deprecate `FreeMonoid` construction altogether).  Any ideas?\n\nI'm also thinking we should change this behavior so we don't keep running into this problem.",
    "created_at": "2014-05-12T00:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188895",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:36" align="right">comment:36</div>

Fixed everything mentioned above except I've run into a *major* pickling issue with `UniqueFactory` (which is why I've cc-ed Simon).

There is some precedence for creating a generator from an index:

```
sage: C = CombinatorialFree
Module(ZZ, ['a','b','c'])
sage: C('a')
B['a']
```
So I'd like to leave that in for now. However I made things like `F(1)` only return `F[1]`.

I changed the input for `Monoids().free(...)` but I left `FreeMonoid(...)` as I had it before because I don't want to deal with deprecations there in this ticket (this is #16330). I'll do the cleanup of the factory functions in the followup #16329.

I'm not doing anything to `FreeMonoid` or `FreeAbelianMonoid` other than redirecting input, so I'm not going to make these changes here:

> * Now or later: `__repr__ -> _repr_`, `__call__ -> _element_constructor_`. The custom `__contains__` might not be needed.
> * Now or later: initialize the category

We could probably also fit that in #16329 or another followup.

Simon, so I've changed the `UniqueFactory` object `FreeMonoid` to a new factory function since it returns a class which I've designed as a `UniqueRepresentation`. However unpickling old `FreeMonoid` objects fails because of the unpickling mechanism of `UniqueFactory` redirects to `generic_factory_unpickle()` and has `FreeMonoid` from the global namespace as the first object. It is expecting it to be a `UniqueFactory` instance, so it errors out here. Furthermore because of the structure of the pickle, I'm unable to use `register_unpickle_override` or see anyway to redirect that specific pickle without changing the behavior of `generic_factory_unpickle()`.

I'm thinking the best thing to do is to change `generic_factory_unpickle()` to accept a general object as input and if the first input is no longer a `UniqueFactory`, then call it with the arguments given as part of the pickle. Another option I see is to override `UniqueFactory.__call__`, but I really don't want to do that. The last option I see, and I absolutely don't like this, is to make my new factory function into a different name temporarily (or deprecate `FreeMonoid` construction altogether).  Any ideas?

I'm also thinking we should change this behavior so we don't keep running into this problem.



---

archive/issue_comments_188896.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@tscrim](#comment%3A36):\n> Fixed everything mentioned above except I've run into a *major* pickling issue with `UniqueFactory` (which is why I've cc-ed Simon).\n\nCool, thanks!\n\n> There is some precedence for creating a generator from an index:\n> \n> ```\n> sage: C = CombinatorialFree\n> Module(ZZ, ['a','b','c'])\n> sage: C('a')\n> B['a']\n> ```\n> So I'd like to leave that in for now.\n\nPrecisely: we have made that mistake once, and been bitten by it. So\nI'd rather not redo it!\n\n> I changed the input for `Monoids().free(...)` but I left `FreeMonoid(...)` as I had it before because I don't want to deal with deprecations there in this ticket (this is #16330). I'll do the cleanup of the factory functions in the followup #16329.\n\nFair enough.\n\n> I'm not doing anything to `FreeMonoid` or `FreeAbelianMonoid` other than redirecting input, so I'm not going to make these changes here:\n> \n> > * Now or later: `__repr__ -> _repr_`, `__call__ -> _element_constructor_`. The custom `__contains__` might not be needed.\n> > * Now or later: initialize the category\n\n> \n> We could probably also fit that in #16329 or another followup.\n\nOk.\n\n> Simon, so I've changed the `UniqueFactory` object `FreeMonoid` to a new factory function since it returns a class which I've designed as a `UniqueRepresentation`. However unpickling old `FreeMonoid` objects fails because of the unpickling mechanism of `UniqueFactory` redirects to `generic_factory_unpickle()` and has `FreeMonoid` from the global namespace as the first object. It is expecting it to be a `UniqueFactory` instance, so it errors out here. Furthermore because of the structure of the pickle, I'm unable to use `register_unpickle_override` or see anyway to redirect that specific pickle without changing the behavior of `generic_factory_unpickle()`.\n> \n> I'm thinking the best thing to do is to change `generic_factory_unpickle()` to accept a general object as input and if the first input is no longer a `UniqueFactory`, then call it with the arguments given as part of the pickle. Another option I see is to override `UniqueFactory.__call__`, but I really don't want to do that. The last option I see, and I absolutely don't like this, is to make my new factory function into a different name temporarily (or deprecate `FreeMonoid` construction altogether).  Any ideas?\n> \n> I'm also thinking we should change this behavior so we don't keep running into this problem.\n\nMaybe, at least as a temporary solution, the FreeMonoid object from\nthe global namespace could remain a trivial factory function\ndelegating to a class, also called FreeMonoid, but in its own module?\n\nCheers,\n                                  Nicolas",
    "created_at": "2014-05-12T20:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188896",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@tscrim](#comment%3A36):
> Fixed everything mentioned above except I've run into a *major* pickling issue with `UniqueFactory` (which is why I've cc-ed Simon).

Cool, thanks!

> There is some precedence for creating a generator from an index:
> 
> ```
> sage: C = CombinatorialFree
> Module(ZZ, ['a','b','c'])
> sage: C('a')
> B['a']
> ```
> So I'd like to leave that in for now.

Precisely: we have made that mistake once, and been bitten by it. So
I'd rather not redo it!

> I changed the input for `Monoids().free(...)` but I left `FreeMonoid(...)` as I had it before because I don't want to deal with deprecations there in this ticket (this is #16330). I'll do the cleanup of the factory functions in the followup #16329.

Fair enough.

> I'm not doing anything to `FreeMonoid` or `FreeAbelianMonoid` other than redirecting input, so I'm not going to make these changes here:
> 
> > * Now or later: `__repr__ -> _repr_`, `__call__ -> _element_constructor_`. The custom `__contains__` might not be needed.
> > * Now or later: initialize the category

> 
> We could probably also fit that in #16329 or another followup.

Ok.

> Simon, so I've changed the `UniqueFactory` object `FreeMonoid` to a new factory function since it returns a class which I've designed as a `UniqueRepresentation`. However unpickling old `FreeMonoid` objects fails because of the unpickling mechanism of `UniqueFactory` redirects to `generic_factory_unpickle()` and has `FreeMonoid` from the global namespace as the first object. It is expecting it to be a `UniqueFactory` instance, so it errors out here. Furthermore because of the structure of the pickle, I'm unable to use `register_unpickle_override` or see anyway to redirect that specific pickle without changing the behavior of `generic_factory_unpickle()`.
> 
> I'm thinking the best thing to do is to change `generic_factory_unpickle()` to accept a general object as input and if the first input is no longer a `UniqueFactory`, then call it with the arguments given as part of the pickle. Another option I see is to override `UniqueFactory.__call__`, but I really don't want to do that. The last option I see, and I absolutely don't like this, is to make my new factory function into a different name temporarily (or deprecate `FreeMonoid` construction altogether).  Any ideas?
> 
> I'm also thinking we should change this behavior so we don't keep running into this problem.

Maybe, at least as a temporary solution, the FreeMonoid object from
the global namespace could remain a trivial factory function
delegating to a class, also called FreeMonoid, but in its own module?

Cheers,
                                  Nicolas



---

archive/issue_comments_188897.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThe `FreeMonoid` in the global namespace must be the `UniqueFactory` instance for the old pickles to work, irregardless of which module or the name of the class. That's the big problem. Or are you suggesting to just leave `FreeMonoid` alone (or perhaps give it some warnings and redirections when given other types of input)?\n\nThere is one other thing I thought of today, to implement a custom unpickle override for `UniqueFactory`. I'm thinking this might be the best way to work around this (and could easily create this on a separate ticket). Thoughts?",
    "created_at": "2014-05-12T21:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188897",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">comment:38</div>

The `FreeMonoid` in the global namespace must be the `UniqueFactory` instance for the old pickles to work, irregardless of which module or the name of the class. That's the big problem. Or are you suggesting to just leave `FreeMonoid` alone (or perhaps give it some warnings and redirections when given other types of input)?

There is one other thing I thought of today, to implement a custom unpickle override for `UniqueFactory`. I'm thinking this might be the best way to work around this (and could easily create this on a separate ticket). Thoughts?



---

archive/issue_comments_188898.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@tscrim](#comment%3A38):\n> The `FreeMonoid` in the global namespace must be the `UniqueFactory` instance for the old pickles to work,\n\nYes. But this UniqueFactory instance can probably be a fake one and just act as a delegator\nto whichever new class now implements `FreeMonoid`.\n\n> There is one other thing I thought of today, to implement a custom unpickle override for `UniqueFactory`. I'm thinking this might be the best way to work around this (and could easily create this on a separate ticket). Thoughts?\n\nI am not sure I see what you mean, but I can live with that if someone\nelse answers :-)",
    "created_at": "2014-05-12T22:00:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188898",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@tscrim](#comment%3A38):
> The `FreeMonoid` in the global namespace must be the `UniqueFactory` instance for the old pickles to work,

Yes. But this UniqueFactory instance can probably be a fake one and just act as a delegator
to whichever new class now implements `FreeMonoid`.

> There is one other thing I thought of today, to implement a custom unpickle override for `UniqueFactory`. I'm thinking this might be the best way to work around this (and could easily create this on a separate ticket). Thoughts?

I am not sure I see what you mean, but I can live with that if someone
else answers :-)



---

archive/issue_comments_188899.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@nthiery](#comment%3A39):\n> Replying to [@tscrim](#comment%3A38):\n> > The `FreeMonoid` in the global namespace must be the `UniqueFactory` instance for the old pickles to work,\n\n> \n> Yes. But this UniqueFactory instance can probably be a fake one and just act as a delegator\n> to whichever new class now implements `FreeMonoid`.\n\nSo do you mean doing something like this:\n\n```python\nclass DummyFactory(UniqueFactory):\n    def __call__(self, *args, **kwds):\n        return factory_function(*args, **kwds)\n    def get_object(self, the, ..., args):\n        return OriginalFactoryInstance.get_object(the, ..., args)\n```\nand `DummyFactory` would become the object in the global namespace?",
    "created_at": "2014-05-12T22:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188899",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@nthiery](#comment%3A39):
> Replying to [@tscrim](#comment%3A38):
> > The `FreeMonoid` in the global namespace must be the `UniqueFactory` instance for the old pickles to work,

> 
> Yes. But this UniqueFactory instance can probably be a fake one and just act as a delegator
> to whichever new class now implements `FreeMonoid`.

So do you mean doing something like this:

```python
class DummyFactory(UniqueFactory):
    def __call__(self, *args, **kwds):
        return factory_function(*args, **kwds)
    def get_object(self, the, ..., args):
        return OriginalFactoryInstance.get_object(the, ..., args)
```
and `DummyFactory` would become the object in the global namespace?



---

archive/issue_comments_188900.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nYeah. Not sure it's a good idea though. Do as you feel is right.",
    "created_at": "2014-05-13T05:28:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188900",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:41" align="right">comment:41</div>

Yeah. Not sure it's a good idea though. Do as you feel is right.



---

archive/issue_comments_188901.json:
```json
{
    "body": "Changed dependencies from **#15309 #15169** to **#15309, #15169**",
    "created_at": "2014-05-13T09:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188901",
    "user": "https://github.com/simon-king-jena"
}
```

Changed dependencies from **#15309 #15169** to **#15309, #15169**



---

archive/issue_comments_188902.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nIn order to checkout this ticket, I had to fix the list of dependencies (which is supposed to be comma-separated).",
    "created_at": "2014-05-13T09:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188902",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:43" align="right">comment:43</div>

In order to checkout this ticket, I had to fix the list of dependencies (which is supposed to be comma-separated).



---

archive/issue_comments_188903.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@tscrim](#comment%3A36):\n> Simon, so I've changed the `UniqueFactory` object `FreeMonoid` to a new factory function since it returns a class which I've designed as a `UniqueRepresentation`. However unpickling old `FreeMonoid` objects fails because of the unpickling mechanism of `UniqueFactory` redirects to `generic_factory_unpickle()` and has `FreeMonoid` from the global namespace as the first object.\n\nFirst thing I wonder: *Why* is that statically typed? Just to shave off a little calling overhead?\n\n> It is expecting it to be a `UniqueFactory` instance, so it errors out here. Furthermore because of the structure of the pickle, I'm unable to use `register_unpickle_override` or see anyway to redirect that specific pickle without changing the behavior of `generic_factory_unpickle()`.\n\nI don't really understand how `register_unpickle_override` is working. It seems that it can only work if `unpickle_global` is involved---and it is not clear to me if this is involved everywhere or only if there is no `__reduce__` method around.\n\n> I'm thinking the best thing to do is to change `generic_factory_unpickle()` to accept a general object as input and if the first input is no longer a `UniqueFactory`, then call it with the arguments given as part of the pickle.\n\nMakes sense to me. And I even think the following idiom would not be slower in terms of calling overhead than the current implementation:\n\n```\ndef generic_factory_unpickle(factory, *args):\n    cdef UniqueFactory F\n    try:\n        F = factory\n    except TypeError:\n        return factory(*args[1:])\n    return F.get_object(*args)\n```\n\nNote that I wrote `factory(*args[1:])`, since the first argument is the version information. So, either we need to shave it off here, or the new class (or function) replacing the old factory is required to take care of this.\n\n> I'm also thinking we should change this behavior so we don't keep running into this problem.\n\nI think with my suggestion above, unpickling of using factory would work as quickly as it used to, and it would relatively easily allow to replace the factory by something else (provided that this \"something else\" takes care of the argument mangling and the version information that is involved in the factory pickle).",
    "created_at": "2014-05-13T09:35:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188903",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@tscrim](#comment%3A36):
> Simon, so I've changed the `UniqueFactory` object `FreeMonoid` to a new factory function since it returns a class which I've designed as a `UniqueRepresentation`. However unpickling old `FreeMonoid` objects fails because of the unpickling mechanism of `UniqueFactory` redirects to `generic_factory_unpickle()` and has `FreeMonoid` from the global namespace as the first object.

First thing I wonder: *Why* is that statically typed? Just to shave off a little calling overhead?

> It is expecting it to be a `UniqueFactory` instance, so it errors out here. Furthermore because of the structure of the pickle, I'm unable to use `register_unpickle_override` or see anyway to redirect that specific pickle without changing the behavior of `generic_factory_unpickle()`.

I don't really understand how `register_unpickle_override` is working. It seems that it can only work if `unpickle_global` is involved---and it is not clear to me if this is involved everywhere or only if there is no `__reduce__` method around.

> I'm thinking the best thing to do is to change `generic_factory_unpickle()` to accept a general object as input and if the first input is no longer a `UniqueFactory`, then call it with the arguments given as part of the pickle.

Makes sense to me. And I even think the following idiom would not be slower in terms of calling overhead than the current implementation:

```
def generic_factory_unpickle(factory, *args):
    cdef UniqueFactory F
    try:
        F = factory
    except TypeError:
        return factory(*args[1:])
    return F.get_object(*args)
```

Note that I wrote `factory(*args[1:])`, since the first argument is the version information. So, either we need to shave it off here, or the new class (or function) replacing the old factory is required to take care of this.

> I'm also thinking we should change this behavior so we don't keep running into this problem.

I think with my suggestion above, unpickling of using factory would work as quickly as it used to, and it would relatively easily allow to replace the factory by something else (provided that this "something else" takes care of the argument mangling and the version information that is involved in the factory pickle).



---

archive/issue_comments_188904.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nPS: The documentation breaks. After repeated attempts of `make doc-clean` and `make`, I keep getting\n\n```\nOSError: [misc     ] /home/king/Sage/git/sage/src/doc/en/reference/misc/sage/misc/indexed_generators.rst:11: WARNING: autodoc can't import/find module 'sage.misc.indexed_generators', it reported error: \"No module named indexed_generators\", please check your spelling and sys.path\n```",
    "created_at": "2014-05-13T09:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188904",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:45" align="right">comment:45</div>

PS: The documentation breaks. After repeated attempts of `make doc-clean` and `make`, I keep getting

```
OSError: [misc     ] /home/king/Sage/git/sage/src/doc/en/reference/misc/sage/misc/indexed_generators.rst:11: WARNING: autodoc can't import/find module 'sage.misc.indexed_generators', it reported error: "No module named indexed_generators", please check your spelling and sys.path
```



---

archive/issue_comments_188905.json:
```json
{
    "body": "Changed dependencies from **#15309, #15169** to **#15309, #15169, #16349**",
    "created_at": "2014-05-13T15:44:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188905",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#15309, #15169** to **#15309, #15169, #16349**



---

archive/issue_comments_188906.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nThis is now #16349. Try `sage -sync-build` (there's probably the old file in the lib build folder which is getting picked up).",
    "created_at": "2014-05-13T15:44:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188906",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:46" align="right">comment:46</div>

This is now #16349. Try `sage -sync-build` (there's probably the old file in the lib build folder which is getting picked up).



---

archive/issue_comments_188907.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d570dda1f3ac6d9e878f3e9726cbd9f197fcd25a\"><code>d570dda</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/321a9e407ef260269f4d66159a787316440082e3\"><code>321a9e4</code></a></td><td><code>Unpickling when replacing an old UniqueFactory by something new</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/187d1aa8d95cf2b64ab2c45224844a709412127b\"><code>187d1aa</code></a></td><td><code>Fix arguments passed to the constructor that replaces an old UniqueFactory</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83c79ef5bfb02795e0c00cfd7ef39fc81b538fe6\"><code>83c79ef</code></a></td><td><code>Merge branch 'u/SimonKing/ticket/16349' of trac.sagemath.org:sage into public/pickling/unique_factories-16349</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2df09ed29ab772d4cca01d3c832140780536e0b9\"><code>2df09ed</code></a></td><td><code>Implemented an unpickle override for UniqueFactory.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7646c1a28493f94a5362212cf8bd089ffce3279\"><code>c7646c1</code></a></td><td><code>Fixed doctest caused by me forgetting the registration is global.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0c9eb3bd3a34539023f38d9c5ec80559404d4a7\"><code>d0c9eb3</code></a></td><td><code>Merge branch 'public/pickling/unique_factories-16349' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf161359d4c73aa81aa60cb77ea1d4a7a2c0473d\"><code>bf16135</code></a></td><td><code>Fixed pickling issues and now using index_set as 1st arg to Free*Monoid().</code></td></tr></table>\n",
    "created_at": "2014-05-15T22:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188907",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d570dda1f3ac6d9e878f3e9726cbd9f197fcd25a"><code>d570dda</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/321a9e407ef260269f4d66159a787316440082e3"><code>321a9e4</code></a></td><td><code>Unpickling when replacing an old UniqueFactory by something new</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/187d1aa8d95cf2b64ab2c45224844a709412127b"><code>187d1aa</code></a></td><td><code>Fix arguments passed to the constructor that replaces an old UniqueFactory</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83c79ef5bfb02795e0c00cfd7ef39fc81b538fe6"><code>83c79ef</code></a></td><td><code>Merge branch 'u/SimonKing/ticket/16349' of trac.sagemath.org:sage into public/pickling/unique_factories-16349</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2df09ed29ab772d4cca01d3c832140780536e0b9"><code>2df09ed</code></a></td><td><code>Implemented an unpickle override for UniqueFactory.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7646c1a28493f94a5362212cf8bd089ffce3279"><code>c7646c1</code></a></td><td><code>Fixed doctest caused by me forgetting the registration is global.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0c9eb3bd3a34539023f38d9c5ec80559404d4a7"><code>d0c9eb3</code></a></td><td><code>Merge branch 'public/pickling/unique_factories-16349' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf161359d4c73aa81aa60cb77ea1d4a7a2c0473d"><code>bf16135</code></a></td><td><code>Fixed pickling issues and now using index_set as 1st arg to Free*Monoid().</code></td></tr></table>




---

archive/issue_comments_188908.json:
```json
{
    "body": "Changed commit from **[`1ff1a04`](https://github.com/sagemath/sagetrac-mirror/commit/1ff1a0483f5e61959a432371b701f593a5dee599)** to **[`bf16135`](https://github.com/sagemath/sagetrac-mirror/commit/bf161359d4c73aa81aa60cb77ea1d4a7a2c0473d)**",
    "created_at": "2014-05-15T22:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188908",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1ff1a04`](https://github.com/sagemath/sagetrac-mirror/commit/1ff1a0483f5e61959a432371b701f593a5dee599)** to **[`bf16135`](https://github.com/sagemath/sagetrac-mirror/commit/bf161359d4c73aa81aa60cb77ea1d4a7a2c0473d)**



---

archive/issue_events_215370.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-15T22:36:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215370"
}
```



---

archive/issue_events_215371.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-15T22:36:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215371"
}
```



---

archive/issue_comments_188909.json:
```json
{
    "body": "Changed commit from **[`bf16135`](https://github.com/sagemath/sagetrac-mirror/commit/bf161359d4c73aa81aa60cb77ea1d4a7a2c0473d)** to **[`164fb4b`](https://github.com/sagemath/sagetrac-mirror/commit/164fb4beee6ce00064da5c59591cc5ecc94ef095)**",
    "created_at": "2014-05-16T19:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188909",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bf16135`](https://github.com/sagemath/sagetrac-mirror/commit/bf161359d4c73aa81aa60cb77ea1d4a7a2c0473d)** to **[`164fb4b`](https://github.com/sagemath/sagetrac-mirror/commit/164fb4beee6ce00064da5c59591cc5ecc94ef095)**



---

archive/issue_comments_188910.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/164fb4beee6ce00064da5c59591cc5ecc94ef095\"><code>164fb4b</code></a></td><td><code>Fixed documentation.</code></td></tr></table>\n",
    "created_at": "2014-05-16T19:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188910",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/164fb4beee6ce00064da5c59591cc5ecc94ef095"><code>164fb4b</code></a></td><td><code>Fixed documentation.</code></td></tr></table>




---

archive/issue_comments_188911.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nSorry that actually is my fault, I forgot to move the file over in the doc `index.rst` files.",
    "created_at": "2014-05-16T19:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188911",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:50" align="right">comment:50</div>

Sorry that actually is my fault, I forgot to move the file over in the doc `index.rst` files.



---

archive/issue_comments_188912.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\n\n```\n    AttributeError: 'FreeAbelianMonoid_class' object has no attribute 'monoid_generators'\n**********************************************************************\n6 items had failures:\n   3 of   7 in sage.monoids.indexed_free_monoid.IndexedFreeMonoidElement.__init__\n   1 of   8 in sage.monoids.indexed_free_monoid.IndexedMonoid.__classcall__\n   1 of   9 in sage.monoids.indexed_free_monoid.IndexedMonoid.__init__\n   1 of   5 in sage.monoids.indexed_free_monoid.IndexedMonoid._an_element_\n   1 of   5 in sage.monoids.indexed_free_monoid.IndexedMonoid.monoid_generators\n   3 of  11 in sage.monoids.indexed_free_monoid.IndexedMonoidElement.__init__\n    [213 tests, 10 failures, 0.29 s]\n----------------------------------------------------------------------\nsage -t src/sage/monoids/indexed_free_monoid.py  # 10 doctests failed\n```",
    "created_at": "2014-05-20T05:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188912",
    "user": "https://github.com/rwst"
}
```

<div id="comment:51" align="right">comment:51</div>


```
    AttributeError: 'FreeAbelianMonoid_class' object has no attribute 'monoid_generators'
**********************************************************************
6 items had failures:
   3 of   7 in sage.monoids.indexed_free_monoid.IndexedFreeMonoidElement.__init__
   1 of   8 in sage.monoids.indexed_free_monoid.IndexedMonoid.__classcall__
   1 of   9 in sage.monoids.indexed_free_monoid.IndexedMonoid.__init__
   1 of   5 in sage.monoids.indexed_free_monoid.IndexedMonoid._an_element_
   1 of   5 in sage.monoids.indexed_free_monoid.IndexedMonoid.monoid_generators
   3 of  11 in sage.monoids.indexed_free_monoid.IndexedMonoidElement.__init__
    [213 tests, 10 failures, 0.29 s]
----------------------------------------------------------------------
sage -t src/sage/monoids/indexed_free_monoid.py  # 10 doctests failed
```



---

archive/issue_events_215372.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-20T05:32:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215372"
}
```



---

archive/issue_events_215373.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-20T05:32:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215373"
}
```



---

archive/issue_comments_188913.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecdc00fd1e7edf706d8acfadc6325bed93e37843\"><code>ecdc00f</code></a></td><td><code>Fixed doctests because of different processing of input.</code></td></tr></table>\n",
    "created_at": "2014-05-20T05:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188913",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecdc00fd1e7edf706d8acfadc6325bed93e37843"><code>ecdc00f</code></a></td><td><code>Fixed doctests because of different processing of input.</code></td></tr></table>




---

archive/issue_comments_188914.json:
```json
{
    "body": "Changed commit from **[`164fb4b`](https://github.com/sagemath/sagetrac-mirror/commit/164fb4beee6ce00064da5c59591cc5ecc94ef095)** to **[`ecdc00f`](https://github.com/sagemath/sagetrac-mirror/commit/ecdc00fd1e7edf706d8acfadc6325bed93e37843)**",
    "created_at": "2014-05-20T05:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188914",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`164fb4b`](https://github.com/sagemath/sagetrac-mirror/commit/164fb4beee6ce00064da5c59591cc5ecc94ef095)** to **[`ecdc00f`](https://github.com/sagemath/sagetrac-mirror/commit/ecdc00fd1e7edf706d8acfadc6325bed93e37843)**



---

archive/issue_events_215374.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-20T05:50:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215374"
}
```



---

archive/issue_events_215375.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-20T05:50:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215375"
}
```



---

archive/issue_comments_188915.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/909196eb2cd8311897437f7212c6470cba80ee84\"><code>909196e</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>\n",
    "created_at": "2014-05-26T04:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188915",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/909196eb2cd8311897437f7212c6470cba80ee84"><code>909196e</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr></table>




---

archive/issue_comments_188916.json:
```json
{
    "body": "Changed commit from **[`ecdc00f`](https://github.com/sagemath/sagetrac-mirror/commit/ecdc00fd1e7edf706d8acfadc6325bed93e37843)** to **[`909196e`](https://github.com/sagemath/sagetrac-mirror/commit/909196eb2cd8311897437f7212c6470cba80ee84)**",
    "created_at": "2014-05-26T04:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188916",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ecdc00f`](https://github.com/sagemath/sagetrac-mirror/commit/ecdc00fd1e7edf706d8acfadc6325bed93e37843)** to **[`909196e`](https://github.com/sagemath/sagetrac-mirror/commit/909196eb2cd8311897437f7212c6470cba80ee84)**



---

archive/issue_comments_188917.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nHi Travis,\n\nSorry for being slow once again. Unless I missed it, you haven't commented on my suggestions for:\n- Using `dict_addition` whenever meaningful\n- Implementing `Groups().Commutative().free()` rather than `Groups().free(commutative=True)` now that #10963 is in (I can do that if you want)\n- Putting index_set as first argument to the `free` methods to make the following work properly:\n\n   ```\n       sage: C.free([1,2,3])\n       Free monoid indexed by None\n   ```\n  By the way, with no argument there should either be some reasonable default, or an error:\n\n   ```\n       sage: C.free()\n       Free monoid indexed by None\n   ```\n- Construction of the generators by `F(i)` (see [comment:37]).\n- [comment:32]\n\nCheers,\n                              Nicolas",
    "created_at": "2014-06-10T10:20:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188917",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:55" align="right">comment:55</div>

Hi Travis,

Sorry for being slow once again. Unless I missed it, you haven't commented on my suggestions for:
- Using `dict_addition` whenever meaningful
- Implementing `Groups().Commutative().free()` rather than `Groups().free(commutative=True)` now that #10963 is in (I can do that if you want)
- Putting index_set as first argument to the `free` methods to make the following work properly:

   ```
       sage: C.free([1,2,3])
       Free monoid indexed by None
   ```
  By the way, with no argument there should either be some reasonable default, or an error:

   ```
       sage: C.free()
       Free monoid indexed by None
   ```
- Construction of the generators by `F(i)` (see [comment:37]).
- [comment:32]

Cheers,
                              Nicolas



---

archive/issue_comments_188918.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1db7c1d5727883c2293b0c7a39a0ccd6ad50fada\"><code>1db7c1d</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73a4e48f890a31cafbf4e8d176ac69c3b3171cbb\"><code>73a4e48</code></a></td><td><code>Implemented other changes/improvements Nicolas suggested.</code></td></tr></table>\n",
    "created_at": "2014-06-11T03:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188918",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1db7c1d5727883c2293b0c7a39a0ccd6ad50fada"><code>1db7c1d</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73a4e48f890a31cafbf4e8d176ac69c3b3171cbb"><code>73a4e48</code></a></td><td><code>Implemented other changes/improvements Nicolas suggested.</code></td></tr></table>




---

archive/issue_comments_188919.json:
```json
{
    "body": "Changed commit from **[`909196e`](https://github.com/sagemath/sagetrac-mirror/commit/909196eb2cd8311897437f7212c6470cba80ee84)** to **[`73a4e48`](https://github.com/sagemath/sagetrac-mirror/commit/73a4e48f890a31cafbf4e8d176ac69c3b3171cbb)**",
    "created_at": "2014-06-11T03:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188919",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`909196e`](https://github.com/sagemath/sagetrac-mirror/commit/909196eb2cd8311897437f7212c6470cba80ee84)** to **[`73a4e48`](https://github.com/sagemath/sagetrac-mirror/commit/73a4e48f890a31cafbf4e8d176ac69c3b3171cbb)**



---

archive/issue_comments_188920.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nHey Nicolas,\n\nThanks for getting back to this ticket. I know how hard it can be to find time.\n\nReplying to [@nthiery](#comment%3A55):\n> - Using `dict_addition` whenever meaningful\n\nDone.\n\n> - Implementing `Groups().Commutative().free()` rather than `Groups().free(commutative=True)` now that #10963 is in (I can do that if you want)\n\nDone (now that #10963 is in; big yay!). I also cleaned up some of the logic and made the `*.free()` always return the indexed monoid/group except for `Groups.free(n, names)` since IMO (perhaps not-so-humble) the indexed version is better since it's a proper parent and more general. I can revert this if desired.\n\n> - Putting index_set as first argument to the `free` methods to make the following work properly:\n> \n>    ```\n>        sage: C.free([1,2,3])\n>        Free monoid indexed by None\n>    ```\n\nI had missed this somehow for monoids (but I had done it for groups).\n\n>   By the way, with no argument there should either be some reasonable default, or an error:\n> \n>    ```\n>        sage: C.free()\n>        Free monoid indexed by None\n>    ```\n\nNow it raises an error.\n\n> - Construction of the generators by `F(i)` (see [comment:37]).\n\nI've made it a forbidden construction.\n\n> - [comment:32]\n\nI think we should just use `CombinatorialFreeModule` over `ZZ` for this, or do you think it would be too heavy-handed? However I don't think it would be difficult to do (following your comment).\n\nBest,\n\nTravis",
    "created_at": "2014-06-11T03:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188920",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:57" align="right">comment:57</div>

Hey Nicolas,

Thanks for getting back to this ticket. I know how hard it can be to find time.

Replying to [@nthiery](#comment%3A55):
> - Using `dict_addition` whenever meaningful

Done.

> - Implementing `Groups().Commutative().free()` rather than `Groups().free(commutative=True)` now that #10963 is in (I can do that if you want)

Done (now that #10963 is in; big yay!). I also cleaned up some of the logic and made the `*.free()` always return the indexed monoid/group except for `Groups.free(n, names)` since IMO (perhaps not-so-humble) the indexed version is better since it's a proper parent and more general. I can revert this if desired.

> - Putting index_set as first argument to the `free` methods to make the following work properly:
> 
>    ```
>        sage: C.free([1,2,3])
>        Free monoid indexed by None
>    ```

I had missed this somehow for monoids (but I had done it for groups).

>   By the way, with no argument there should either be some reasonable default, or an error:
> 
>    ```
>        sage: C.free()
>        Free monoid indexed by None
>    ```

Now it raises an error.

> - Construction of the generators by `F(i)` (see [comment:37]).

I've made it a forbidden construction.

> - [comment:32]

I think we should just use `CombinatorialFreeModule` over `ZZ` for this, or do you think it would be too heavy-handed? However I don't think it would be difficult to do (following your comment).

Best,

Travis



---

archive/issue_comments_188921.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9f6f182b68d9545d3fc0330913ffc13a6b22570\"><code>b9f6f18</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4fe805fa2a815b902d8aa3809d4be9d362af7c6\"><code>d4fe805</code></a></td><td><code>Fixed documentation links.</code></td></tr></table>\n",
    "created_at": "2014-06-20T23:26:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188921",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9f6f182b68d9545d3fc0330913ffc13a6b22570"><code>b9f6f18</code></a></td><td><code>Merge branch 'develop' into public/monoids/15289-indexed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4fe805fa2a815b902d8aa3809d4be9d362af7c6"><code>d4fe805</code></a></td><td><code>Fixed documentation links.</code></td></tr></table>




---

archive/issue_comments_188922.json:
```json
{
    "body": "Changed commit from **[`73a4e48`](https://github.com/sagemath/sagetrac-mirror/commit/73a4e48f890a31cafbf4e8d176ac69c3b3171cbb)** to **[`d4fe805`](https://github.com/sagemath/sagetrac-mirror/commit/d4fe805fa2a815b902d8aa3809d4be9d362af7c6)**",
    "created_at": "2014-06-20T23:26:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188922",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`73a4e48`](https://github.com/sagemath/sagetrac-mirror/commit/73a4e48f890a31cafbf4e8d176ac69c3b3171cbb)** to **[`d4fe805`](https://github.com/sagemath/sagetrac-mirror/commit/d4fe805fa2a815b902d8aa3809d4be9d362af7c6)**



---

archive/issue_comments_188923.json:
```json
{
    "body": "Changed commit from **[`d4fe805`](https://github.com/sagemath/sagetrac-mirror/commit/d4fe805fa2a815b902d8aa3809d4be9d362af7c6)** to **[`56cd05d`](https://github.com/sagemath/sagetrac-mirror/commit/56cd05d2e6802c6c4359317b0c680eec3ad0a70f)**",
    "created_at": "2014-07-01T16:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d4fe805`](https://github.com/sagemath/sagetrac-mirror/commit/d4fe805fa2a815b902d8aa3809d4be9d362af7c6)** to **[`56cd05d`](https://github.com/sagemath/sagetrac-mirror/commit/56cd05d2e6802c6c4359317b0c680eec3ad0a70f)**



---

archive/issue_comments_188924.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56cd05d2e6802c6c4359317b0c680eec3ad0a70f\"><code>56cd05d</code></a></td><td><code>Some fixes discussed.</code></td></tr></table>\n",
    "created_at": "2014-07-01T16:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188924",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56cd05d2e6802c6c4359317b0c680eec3ad0a70f"><code>56cd05d</code></a></td><td><code>Some fixes discussed.</code></td></tr></table>




---

archive/issue_comments_188925.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1f5547fc531b78522ad51ba094414594fe69ee2\"><code>f1f5547</code></a></td><td><code>Fixed category issue.</code></td></tr></table>\n",
    "created_at": "2014-07-01T16:25:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188925",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1f5547fc531b78522ad51ba094414594fe69ee2"><code>f1f5547</code></a></td><td><code>Fixed category issue.</code></td></tr></table>




---

archive/issue_comments_188926.json:
```json
{
    "body": "Changed commit from **[`56cd05d`](https://github.com/sagemath/sagetrac-mirror/commit/56cd05d2e6802c6c4359317b0c680eec3ad0a70f)** to **[`f1f5547`](https://github.com/sagemath/sagetrac-mirror/commit/f1f5547fc531b78522ad51ba094414594fe69ee2)**",
    "created_at": "2014-07-01T16:25:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188926",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`56cd05d`](https://github.com/sagemath/sagetrac-mirror/commit/56cd05d2e6802c6c4359317b0c680eec3ad0a70f)** to **[`f1f5547`](https://github.com/sagemath/sagetrac-mirror/commit/f1f5547fc531b78522ad51ba094414594fe69ee2)**



---

archive/issue_comments_188927.json:
```json
{
    "body": "Changed commit from **[`f1f5547`](https://github.com/sagemath/sagetrac-mirror/commit/f1f5547fc531b78522ad51ba094414594fe69ee2)** to **[`f6a73fd`](https://github.com/sagemath/sagetrac-mirror/commit/f6a73fd57fdcb739ddf7ac4907fb3d67117af908)**",
    "created_at": "2014-07-01T16:37:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188927",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f1f5547`](https://github.com/sagemath/sagetrac-mirror/commit/f1f5547fc531b78522ad51ba094414594fe69ee2)** to **[`f6a73fd`](https://github.com/sagemath/sagetrac-mirror/commit/f6a73fd57fdcb739ddf7ac4907fb3d67117af908)**



---

archive/issue_comments_188928.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6a73fd57fdcb739ddf7ac4907fb3d67117af908\"><code>f6a73fd</code></a></td><td><code>Fixed failing doctests in categories due to new intermediate categories.</code></td></tr></table>\n",
    "created_at": "2014-07-01T16:37:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188928",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6a73fd57fdcb739ddf7ac4907fb3d67117af908"><code>f6a73fd</code></a></td><td><code>Fixed failing doctests in categories due to new intermediate categories.</code></td></tr></table>




---

archive/issue_comments_188929.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nI checked the recent commits, and we have been discussing side by side for the last ones today. doc and pdf doc compiles. Positive review assuming all long tests pass (running them now).\n\nThanks Travis!\n\nCheers,\n                          Nicolas",
    "created_at": "2014-07-01T17:20:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188929",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:62" align="right">comment:62</div>

I checked the recent commits, and we have been discussing side by side for the last ones today. doc and pdf doc compiles. Positive review assuming all long tests pass (running them now).

Thanks Travis!

Cheers,
                          Nicolas



---

archive/issue_events_215376.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-01T17:20:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215376"
}
```



---

archive/issue_events_215377.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-01T17:20:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215377"
}
```



---

archive/issue_comments_188930.json:
```json
{
    "body": "Reviewer: **Nicolas M. Thi\u00e9ry**",
    "created_at": "2014-07-01T17:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188930",
    "user": "https://github.com/nthiery"
}
```

Reviewer: **Nicolas M. Thi√©ry**



---

archive/issue_comments_188931.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nThank you for doing the review Nicolas.",
    "created_at": "2014-07-01T17:23:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188931",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:64" align="right">comment:64</div>

Thank you for doing the review Nicolas.



---

archive/issue_comments_188932.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065\"><code>69ec7b2</code></a></td><td><code>Fixed c3_controlled.pyx doctests.</code></td></tr></table>\n",
    "created_at": "2014-07-01T17:47:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188932",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065"><code>69ec7b2</code></a></td><td><code>Fixed c3_controlled.pyx doctests.</code></td></tr></table>




---

archive/issue_events_215378.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-07-01T17:47:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215378"
}
```



---

archive/issue_events_215379.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-07-01T17:47:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215379"
}
```



---

archive/issue_comments_188933.json:
```json
{
    "body": "Changed commit from **[`f6a73fd`](https://github.com/sagemath/sagetrac-mirror/commit/f6a73fd57fdcb739ddf7ac4907fb3d67117af908)** to **[`69ec7b2`](https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065)**",
    "created_at": "2014-07-01T17:47:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188933",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f6a73fd`](https://github.com/sagemath/sagetrac-mirror/commit/f6a73fd57fdcb739ddf7ac4907fb3d67117af908)** to **[`69ec7b2`](https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065)**



---

archive/issue_events_215380.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-01T17:48:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215380"
}
```



---

archive/issue_events_215381.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-01T17:48:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215381"
}
```



---

archive/issue_events_215382.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-03T02:03:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215382"
}
```



---

archive/issue_events_215383.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d1701a00e895b2b918aa89d01e7c58542d881eb5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-07-03T02:03:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15289#event-215383"
}
```



---

archive/issue_comments_188934.json:
```json
{
    "body": "Changed branch from **[public/monoids/15289-indexed](https://github.com/sagemath/sagetrac-mirror/tree/public/monoids/15289-indexed)** to **[`69ec7b2`](https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065)**",
    "created_at": "2014-07-03T02:03:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188934",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/monoids/15289-indexed](https://github.com/sagemath/sagetrac-mirror/tree/public/monoids/15289-indexed)** to **[`69ec7b2`](https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065)**



---

archive/issue_comments_188935.json:
```json
{
    "body": "Changed commit from **[`69ec7b2`](https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065)** to none",
    "created_at": "2015-02-08T02:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188935",
    "user": "https://github.com/kcrisman"
}
```

Changed commit from **[`69ec7b2`](https://github.com/sagemath/sagetrac-mirror/commit/69ec7b219d799ffa9263bc83364bc91bf07a8065)** to none



---

archive/issue_comments_188936.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nHi guys, please see http://ask.sagemath.org/question/25763/incorrect-parsing-of-docstring-of-sagestructureindexed_generatorsindexedgenerators/ where it seems that putting `\"\\left\"` becomes something quite different in html.  I assume this is not desired; see #17745.",
    "created_at": "2015-02-08T02:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15289#issuecomment-188936",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:68" align="right">comment:68</div>

Hi guys, please see http://ask.sagemath.org/question/25763/incorrect-parsing-of-docstring-of-sagestructureindexed_generatorsindexedgenerators/ where it seems that putting `"\left"` becomes something quite different in html.  I assume this is not desired; see #17745.
