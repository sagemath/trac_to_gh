# Issue 15386: Maxima is confused about limits at infinity

archive/issues_015149.json:
```json
{
    "body": "From https://groups.google.com/forum/#!topic/sage-support/dwR4kuBmiQo :\n\n```\nn = var('n')\nassume(n>0)\nseries = -(3*n^2 + 1)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)\nlimit(series, n=infinity)\n38/25*pi^2*und\n```\n...when the limit is clearly zero.\n\nThe problem seems related to the `n^2` in the numerator:\n\n```\nsage: series = -(1)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)\nsage: limit(series, n=infinity)\n0\nsage: series = (n^2)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)\nsage: limit(series, n=infinity)\n-38/75*pi^2*und\n```\n\nThis seems to be an upstream problem with Maxima (see the sage-support thread).\n\nCC:  @kcrisman\n\nKeywords: maxima limit\n\nBranch/Commit: b6657b95ff01453ef73afb8e5390840f9cc314f2\n\nUpstream: Fixed upstream, in a later stable release.\n\nReviewer: Travis Scrimshaw\n\nAuthor: Karl-Dieter Crisman\n\nDependencies: #13973, #11894, #13712\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15386\n\n",
    "closed_at": "2014-06-02T12:54:40Z",
    "created_at": "2013-11-08T21:57:44Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Maxima is confused about limits at infinity",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15386",
    "user": "https://github.com/dandrake"
}
```
From https://groups.google.com/forum/#!topic/sage-support/dwR4kuBmiQo :

```
n = var('n')
assume(n>0)
series = -(3*n^2 + 1)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)
limit(series, n=infinity)
38/25*pi^2*und
```
...when the limit is clearly zero.

The problem seems related to the `n^2` in the numerator:

```
sage: series = -(1)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)
sage: limit(series, n=infinity)
0
sage: series = (n^2)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)
sage: limit(series, n=infinity)
-38/75*pi^2*und
```

This seems to be an upstream problem with Maxima (see the sage-support thread).

CC:  @kcrisman

Keywords: maxima limit

Branch/Commit: b6657b95ff01453ef73afb8e5390840f9cc314f2

Upstream: Fixed upstream, in a later stable release.

Reviewer: Travis Scrimshaw

Author: Karl-Dieter Crisman

Dependencies: #13973, #11894, #13712

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15386





---

archive/issue_events_044712.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15386#event-44712"
}
```



---

archive/issue_events_044713.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15386#event-44713"
}
```



---

archive/issue_events_044714.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15386#event-44714"
}
```



---

archive/issue_comments_207294.json:
```json
{
    "body": "<a id='comment:3'></a>This is now fixed upstream, and after #13973 we get\n\n```\nsage: n = var('n')\nsage: assume(n>0)\nsage: series = -(3*n^2 + 1)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)\nsage: limit(series, n=infinity)\n0\n```",
    "created_at": "2014-05-17T14:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207294",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:3'></a>This is now fixed upstream, and after #13973 we get

```
sage: n = var('n')
sage: assume(n>0)
sage: series = -(3*n^2 + 1)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)
sage: limit(series, n=infinity)
0
```



---

archive/issue_comments_207295.json:
```json
{
    "body": "<a id='comment:4'></a>Can you add the doctest Peter (since you know which doctests have been added where)?",
    "created_at": "2014-05-30T03:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207295",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>Can you add the doctest Peter (since you know which doctests have been added where)?



---

archive/issue_comments_207296.json:
```json
{
    "body": "<a id='comment:5'></a>I hopefully should have something ready for this momentarily based on those tickets.",
    "created_at": "2014-05-30T12:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207296",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>I hopefully should have something ready for this momentarily based on those tickets.



---

archive/issue_comments_207297.json:
```json
{
    "body": "<a id='comment:6'></a>My apologies for adding the dependencies, I'm still figuring out how to use git properly in these situations and don't want to make things confusing.",
    "created_at": "2014-05-30T12:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207297",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>My apologies for adding the dependencies, I'm still figuring out how to use git properly in these situations and don't want to make things confusing.



---

archive/issue_comments_207298.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-30T12:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207298",
    "user": "https://github.com/kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_207299.json:
```json
{
    "body": "<a id='comment:7'></a>Last 10 new commits:",
    "created_at": "2014-05-30T12:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207299",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>Last 10 new commits:



---

archive/issue_comments_207300.json:
```json
{
    "body": "<a id='comment:8'></a>Again, sorry for this; only the last commit b6657b9 is relevant.  If someone has a better idea for how to make this work properly I'm all ears.",
    "created_at": "2014-05-30T12:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207300",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>Again, sorry for this; only the last commit b6657b9 is relevant.  If someone has a better idea for how to make this work properly I'm all ears.



---

archive/issue_comments_207301.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 kcrisman]:\n> Again, sorry for this; only the last commit b6657b9 is relevant.\n\n\nThat's all we [the reviewers] need to know (and we can also do `git diff <base_branch>` too).\n\nLGTM.",
    "created_at": "2014-05-30T13:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207301",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>Replying to [comment:8 kcrisman]:
> Again, sorry for this; only the last commit b6657b9 is relevant.


That's all we [the reviewers] need to know (and we can also do `git diff <base_branch>` too).

LGTM.



---

archive/issue_comments_207302.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-30T13:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207302",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_207303.json:
```json
{
    "body": "<a id='comment:10'></a>In hindsight you could have based the commit on #11894 (which includes the other dependencies), or even on #13973 (since #11894 and #13712 only make changes in a different file than your patch).  A \"minimalist\" solution would be to make the change on a clean development branch and to test with #13973 merged, but not to push this merge commit.  As I see it, the tickets in the \"dependencies\" field do not necessarily have to be merged into the branch for this ticket.\n\nIt is practically inevitable that many Trac tickets end up with more dependencies (and merge commits) than strictly necessary, so let's not worry about that too much.  I agree with Travis's positive review.",
    "created_at": "2014-05-30T13:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207303",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:10'></a>In hindsight you could have based the commit on #11894 (which includes the other dependencies), or even on #13973 (since #11894 and #13712 only make changes in a different file than your patch).  A "minimalist" solution would be to make the change on a clean development branch and to test with #13973 merged, but not to push this merge commit.  As I see it, the tickets in the "dependencies" field do not necessarily have to be merged into the branch for this ticket.

It is practically inevitable that many Trac tickets end up with more dependencies (and merge commits) than strictly necessary, so let's not worry about that too much.  I agree with Travis's positive review.



---

archive/issue_comments_207304.json:
```json
{
    "body": "<a id='comment:11'></a>Thanks.  The problem is that I don't know how to base things on other tickets.  I'm very naively following [the developer guide](http://www.sagemath.org/doc/developer/manual_git.html#pushing-your-changes-to-a-ticket).  I finally figured out how to do this efficiently with Mercurial queues only a year or two before the git switch, so now it will take time to figure this out...   No, you are right that the only reason they \"depend\" on the other tickets is because of this queue-like thing I did.\n\nI do think the minimalist solution would be confusing for testers, because ideally one would want to check out a branch and have it \"Just work\".  This was what I ran into while testing #13712. :-(",
    "created_at": "2014-05-30T13:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207304",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>Thanks.  The problem is that I don't know how to base things on other tickets.  I'm very naively following [the developer guide](http://www.sagemath.org/doc/developer/manual_git.html#pushing-your-changes-to-a-ticket).  I finally figured out how to do this efficiently with Mercurial queues only a year or two before the git switch, so now it will take time to figure this out...   No, you are right that the only reason they "depend" on the other tickets is because of this queue-like thing I did.

I do think the minimalist solution would be confusing for testers, because ideally one would want to check out a branch and have it "Just work".  This was what I ran into while testing #13712. :-(



---

archive/issue_comments_207305.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 kcrisman]:\n> Thanks.  The problem is that I don't know how to base things on other tickets.  I'm very naively following [the developer guide](http://www.sagemath.org/doc/developer/manual_git.html#pushing-your-changes-to-a-ticket).  I finally figured out how to do this efficiently with Mercurial queues only a year or two before the git switch, so now it will take time to figure this out...   No, you are right that the only reason they \"depend\" on the other tickets is because of this queue-like thing I did.\n  \nWhat I meant by \"basing a commit on another ticket\" is what is described in the section \"Branching out\" on the page you linked to.  When you create a branch, it will be based on the current branch, unless you specify an alternative base (with `git branch NAME BASE` or `git checkout -b NAME BASE`, where `NAME` is the name of the new branch and `BASE` the existing branch on which the new one should be based).  This can only take a single dependency into account; if there are multiple dependencies you still have to add them with `git merge` after creating the branch.\n> I do think the minimalist solution would be confusing for testers, because ideally one would want to check out a branch and have it \"Just work\".  This was what I ran into while testing #13712. :-(\n\nGood point.  It's probably confusing for the patchbot as well...",
    "created_at": "2014-05-30T13:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207305",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:12'></a>Replying to [comment:11 kcrisman]:
> Thanks.  The problem is that I don't know how to base things on other tickets.  I'm very naively following [the developer guide](http://www.sagemath.org/doc/developer/manual_git.html#pushing-your-changes-to-a-ticket).  I finally figured out how to do this efficiently with Mercurial queues only a year or two before the git switch, so now it will take time to figure this out...   No, you are right that the only reason they "depend" on the other tickets is because of this queue-like thing I did.
  
What I meant by "basing a commit on another ticket" is what is described in the section "Branching out" on the page you linked to.  When you create a branch, it will be based on the current branch, unless you specify an alternative base (with `git branch NAME BASE` or `git checkout -b NAME BASE`, where `NAME` is the name of the new branch and `BASE` the existing branch on which the new one should be based).  This can only take a single dependency into account; if there are multiple dependencies you still have to add them with `git merge` after creating the branch.
> I do think the minimalist solution would be confusing for testers, because ideally one would want to check out a branch and have it "Just work".  This was what I ran into while testing #13712. :-(

Good point.  It's probably confusing for the patchbot as well...



---

archive/issue_comments_207306.json:
```json
{
    "body": "<a id='comment:13'></a>> What I meant by \"basing a commit on another ticket\" is what is described in the section \"Branching out\" on the page you linked to.  When you create a branch, it will be based on the current branch, unless you specify an alternative base (with `git branch NAME BASE` or `git checkout -b NAME BASE`, where `NAME` is the name of the new branch and `BASE` the existing branch on which the new one should be based).  This can only take a single dependency into account; if there are multiple dependencies you still have to add them with `git merge` after creating the branch.\n\nAh, I see.  So rather than just making all of these tickets part of the same local branch on my computer, I should have\n* imported the Maxima branch\n* created a new branch based on that for ticket A\n* finished that\n* gone back to the Maxima branch\n* created a new branch for the next ticket B\n* done that\n* and so forth\nIs that right?  And that would have avoided some of the merges too.  Maybe.",
    "created_at": "2014-05-30T16:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207306",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>> What I meant by "basing a commit on another ticket" is what is described in the section "Branching out" on the page you linked to.  When you create a branch, it will be based on the current branch, unless you specify an alternative base (with `git branch NAME BASE` or `git checkout -b NAME BASE`, where `NAME` is the name of the new branch and `BASE` the existing branch on which the new one should be based).  This can only take a single dependency into account; if there are multiple dependencies you still have to add them with `git merge` after creating the branch.

Ah, I see.  So rather than just making all of these tickets part of the same local branch on my computer, I should have
* imported the Maxima branch
* created a new branch based on that for ticket A
* finished that
* gone back to the Maxima branch
* created a new branch for the next ticket B
* done that
* and so forth
Is that right?  And that would have avoided some of the merges too.  Maybe.



---

archive/issue_comments_207307.json:
```json
{
    "body": "<a id='comment:14'></a>Yes, that is the idea.  I'm not saying that you *should* have done that, but it's somewhat cleaner in the case that there are no dependencies between tickets A and B.",
    "created_at": "2014-05-30T16:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207307",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:14'></a>Yes, that is the idea.  I'm not saying that you *should* have done that, but it's somewhat cleaner in the case that there are no dependencies between tickets A and B.



---

archive/issue_events_044715.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-02T12:54:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15386#event-44715"
}
```



---

archive/issue_comments_207308.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-06-02T12:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15386#issuecomment-207308",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
