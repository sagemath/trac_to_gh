# Issue 15810: Immutable directed graphs should know that they are directed

archive/issues_015573.json:
```json
{
    "body": "Bug:\n\n```\nsage: Q = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}})\nsage: Q.is_directed_acyclic()\nTrue\nsage: I = Q.copy(immutable=True)\nsage: I.is_directed_acyclic()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-19-1dc52c5fb57c> in <module>()\n----> 1 I.is_directed_acyclic()\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/digraph.pyc in is_directed_acyclic(self, certificate)\n   1117             False\n   1118         \"\"\"\n-> 1119         return self._backend.is_directed_acyclic(certificate = certificate)\n   1120 \n   1121     def to_directed(self):\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.CGraphBackend.is_directed_acyclic (sage/graphs/base/c_graph.c:19314)()\n\nValueError: Input must be a directed graph.\n```\n\n**CC:**  @nathanncohen\n\n**Keywords:** immutable directed graph\n\n**Branch/Commit:** [d6ca86c1d6984bc7a468b80905ddec01323cc9b6](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)\n\n**Reviewer:** Simon King\n\n**Author:** Nathann Cohen\n\n**Dependencies:** #15623\n\nIssue created by migration from https://trac.sagemath.org/ticket/15810\n\n",
    "closed_at": "2014-02-14T19:44:54Z",
    "created_at": "2014-02-11T14:13:07Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Immutable directed graphs should know that they are directed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15810",
    "user": "https://github.com/simon-king-jena"
}
```
Bug:

```
sage: Q = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}})
sage: Q.is_directed_acyclic()
True
sage: I = Q.copy(immutable=True)
sage: I.is_directed_acyclic()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-19-1dc52c5fb57c> in <module>()
----> 1 I.is_directed_acyclic()

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/digraph.pyc in is_directed_acyclic(self, certificate)
   1117             False
   1118         """
-> 1119         return self._backend.is_directed_acyclic(certificate = certificate)
   1120 
   1121     def to_directed(self):

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.CGraphBackend.is_directed_acyclic (sage/graphs/base/c_graph.c:19314)()

ValueError: Input must be a directed graph.
```

**CC:**  @nathanncohen

**Keywords:** immutable directed graph

**Branch/Commit:** [d6ca86c1d6984bc7a468b80905ddec01323cc9b6](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)

**Reviewer:** Simon King

**Author:** Nathann Cohen

**Dependencies:** #15623

Issue created by migration from https://trac.sagemath.org/ticket/15810





---

archive/issue_comments_245202.json:
```json
{
    "body": "<a id='comment:1'></a>\nVariation of the theme:\n\n```\nsage: Q = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}}, immutable=True)\nsage: Q.is_directed_acyclic()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-3-a8ff599a3235> in <module>()\n----> 1 Q.is_directed_acyclic()\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/digraph.pyc in is_directed_acyclic(self, certificate)\n   1108             False\n   1109         \"\"\"\n-> 1110         return self._backend.is_directed_acyclic(certificate = certificate)\n   1111 \n   1112     def to_directed(self):\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.CGraphBackend.is_directed_acyclic (sage/graphs/base/c_graph.c:19328)()\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.bitset_init (sage/graphs/base/c_graph.c:3113)()\n\nValueError: bitset capacity must be greater than 0\n```",
    "created_at": "2014-02-11T14:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245202",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:1'></a>
Variation of the theme:

```
sage: Q = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}}, immutable=True)
sage: Q.is_directed_acyclic()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-3-a8ff599a3235> in <module>()
----> 1 Q.is_directed_acyclic()

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/digraph.pyc in is_directed_acyclic(self, certificate)
   1108             False
   1109         """
-> 1110         return self._backend.is_directed_acyclic(certificate = certificate)
   1111 
   1112     def to_directed(self):

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.CGraphBackend.is_directed_acyclic (sage/graphs/base/c_graph.c:19328)()

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.bitset_init (sage/graphs/base/c_graph.c:3113)()

ValueError: bitset capacity must be greater than 0
```



---

archive/issue_comments_245203.json:
```json
{
    "body": "<a id='comment:2'></a>\nPS: In that case, `Q.show()` barks, too.",
    "created_at": "2014-02-11T14:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245203",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:2'></a>
PS: In that case, `Q.show()` barks, too.



---

archive/issue_comments_245204.json:
```json
{
    "body": "<a id='comment:3'></a>\nThat's because in `static_sparse_backend` the binary variable for directed is `self.directed` instead of `self._directed`............\n\nNathann",
    "created_at": "2014-02-11T14:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245204",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>
That's because in `static_sparse_backend` the binary variable for directed is `self.directed` instead of `self._directed`............

Nathann



---

archive/issue_comments_245205.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [ncohen](#comment%3A3):\n> That's because in `static_sparse_backend` the binary variable for directed is `self.directed` instead of `self._directed`............\n\n\nSo, easy to fix, then? What are the dependencies of this ticket? Actually, the error with the master branch is as in [comment:1](#comment%3A1), whereas I get the error shown in the ticket description with a different branch (develop?).",
    "created_at": "2014-02-11T14:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245205",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>
Replying to [ncohen](#comment%3A3):
> That's because in `static_sparse_backend` the binary variable for directed is `self.directed` instead of `self._directed`............


So, easy to fix, then? What are the dependencies of this ticket? Actually, the error with the master branch is as in [comment:1](#comment%3A1), whereas I get the error shown in the ticket description with a different branch (develop?).



---

archive/issue_comments_245206.json:
```json
{
    "body": "**Branch:** [u/SimonKing/ticket/15810](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15810)",
    "created_at": "2014-02-11T14:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245206",
    "user": "https://github.com/simon-king-jena"
}
```

**Branch:** [u/SimonKing/ticket/15810](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15810)



---

archive/issue_comments_245207.json:
```json
{
    "body": "**Dependencies:** #15623",
    "created_at": "2014-02-11T14:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245207",
    "user": "https://github.com/simon-king-jena"
}
```

**Dependencies:** #15623



---

archive/issue_comments_245208.json:
```json
{
    "body": "<a id='comment:7'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/175027d2d3c94fc973c2100e8cc3576c0c06d0ef\">175027d</a></td><td><code>Merge branch 'u/SimonKing/ticket/15623' of git://trac.sagemath.org/sage into ticket/15810</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af\">1382f4f</a></td><td><code>Trac 15810: Replace ._directed by .directed for immutable graph backend</code></td></tr></table>\n",
    "created_at": "2014-02-11T14:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245208",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/175027d2d3c94fc973c2100e8cc3576c0c06d0ef">175027d</a></td><td><code>Merge branch 'u/SimonKing/ticket/15623' of git://trac.sagemath.org/sage into ticket/15810</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af">1382f4f</a></td><td><code>Trac 15810: Replace ._directed by .directed for immutable graph backend</code></td></tr></table>




---

archive/issue_comments_245209.json:
```json
{
    "body": "**Commit:** [1382f4f40bea6fbf32af4f0f745aa2f645a235af](https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af)",
    "created_at": "2014-02-11T14:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245209",
    "user": "https://github.com/simon-king-jena"
}
```

**Commit:** [1382f4f40bea6fbf32af4f0f745aa2f645a235af](https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af)



---

archive/issue_comments_245210.json:
```json
{
    "body": "**Author:** Simon King",
    "created_at": "2014-02-11T14:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245210",
    "user": "https://github.com/simon-king-jena"
}
```

**Author:** Simon King



---

archive/issue_comments_245211.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2014-02-11T14:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245211",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_245212.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2014-02-11T14:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245212",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_245213.json:
```json
{
    "body": "<a id='comment:8'></a>\nThere is more than this one type \"_directed  --> directed\" to fix.",
    "created_at": "2014-02-11T14:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245213",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>
There is more than this one type "_directed  --> directed" to fix.



---

archive/issue_comments_245214.json:
```json
{
    "body": "<a id='comment:9'></a>\nArg... I was uploading mine `:-/`\n\nNathann",
    "created_at": "2014-02-11T14:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245214",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>
Arg... I was uploading mine `:-/`

Nathann



---

archive/issue_comments_245215.json:
```json
{
    "body": "<a id='comment:10'></a>\nNOnonono it's not this one that should be changed. Give me a second.\n\nNathann",
    "created_at": "2014-02-11T14:35:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245215",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
NOnonono it's not this one that should be changed. Give me a second.

Nathann



---

archive/issue_comments_245216.json:
```json
{
    "body": "<a id='comment:11'></a>\nWTF?????\n\nWhen I generally replace _directed by directed for static graph backend, I get numerous errors!!",
    "created_at": "2014-02-11T14:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245216",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:11'></a>
WTF?????

When I generally replace _directed by directed for static graph backend, I get numerous errors!!



---

archive/issue_comments_245217.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [ncohen](#comment%3A10):\n> NOnonono it's not this one that should be changed. Give me a second.\n> \n> Nathann\n\n\nWhy not? It fixes it.",
    "created_at": "2014-02-11T14:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245217",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:12'></a>
Replying to [ncohen](#comment%3A10):
> NOnonono it's not this one that should be changed. Give me a second.
> 
> Nathann


Why not? It fixes it.



---

archive/issue_comments_245218.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2014-02-11T14:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245218",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_245219.json:
```json
{
    "body": "<a id='comment:13'></a>\nWith my branch, all tests in sage.graphs pass. So, what's the problem?",
    "created_at": "2014-02-11T14:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245219",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:13'></a>
With my branch, all tests in sage.graphs pass. So, what's the problem?



---

archive/issue_comments_245220.json:
```json
{
    "body": "<a id='comment:14'></a>\n> When I generally replace _directed by directed for static graph backend, I get numerous errors!!\n\n\nThe file `static_graph_backend` also contains a CGraph class, which uses `.directed` and not `_directed`. It's just a terrible choice. It has to be `._directed` for GraphBackend and `.directed` for CGraph. And if you change the value used in `is_directed_acyclic` that's going to fail when the backend is a `SparseGraph`. `:-/`\n\nNathann",
    "created_at": "2014-02-11T14:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245220",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
> When I generally replace _directed by directed for static graph backend, I get numerous errors!!


The file `static_graph_backend` also contains a CGraph class, which uses `.directed` and not `_directed`. It's just a terrible choice. It has to be `._directed` for GraphBackend and `.directed` for CGraph. And if you change the value used in `is_directed_acyclic` that's going to fail when the backend is a `SparseGraph`. `:-/`

Nathann



---

archive/issue_comments_245221.json:
```json
{
    "body": "<a id='comment:15'></a>\n> With my branch, all tests in sage.graphs pass. So, what's the problem?\n\n\n`O_o`\n\nNo problem with SparseGraph backends ? Then I don't get it either.\n\nNathann",
    "created_at": "2014-02-11T14:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245221",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>
> With my branch, all tests in sage.graphs pass. So, what's the problem?


`O_o`

No problem with SparseGraph backends ? Then I don't get it either.

Nathann



---

archive/issue_comments_245222.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [ncohen](#comment%3A15):\n> No problem with SparseGraph backends ? Then I don't get it either.\n\n\nApparently:\n\n```\nsage: D = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}})\nsage: D.is_directed_acyclic()\nTrue\nsage: I = D.copy(immutable=True)\nsage: I.is_directed_acyclic()\nTrue\nsage: D._backend\n<class 'sage.graphs.base.sparse_graph.SparseGraphBackend'>\nsage: I._backend\n<class 'sage.graphs.base.static_sparse_backend.StaticSparseBackend'>\n```",
    "created_at": "2014-02-11T14:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245222",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:16'></a>
Replying to [ncohen](#comment%3A15):
> No problem with SparseGraph backends ? Then I don't get it either.


Apparently:

```
sage: D = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}})
sage: D.is_directed_acyclic()
True
sage: I = D.copy(immutable=True)
sage: I.is_directed_acyclic()
True
sage: D._backend
<class 'sage.graphs.base.sparse_graph.SparseGraphBackend'>
sage: I._backend
<class 'sage.graphs.base.static_sparse_backend.StaticSparseBackend'>
```



---

archive/issue_comments_245223.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [ncohen](#comment%3A15):\n> No problem with SparseGraph backends ? Then I don't get it either.\n\n\nDid you not fix something of this kind in #15623 (which is a dependency)?",
    "created_at": "2014-02-11T14:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245223",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:17'></a>
Replying to [ncohen](#comment%3A15):
> No problem with SparseGraph backends ? Then I don't get it either.


Did you not fix something of this kind in #15623 (which is a dependency)?



---

archive/issue_comments_245224.json:
```json
{
    "body": "<a id='comment:18'></a>\n> Did you not fix something of this kind in #15623 (which is a dependency)?\n\n\nNo idea `O_o`\n\nIt's merged anyway, so what's the point ?\n\nI'm trying to find out why your branch works while I thought it wouldn't.\n\nNathann",
    "created_at": "2014-02-11T14:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245224",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
> Did you not fix something of this kind in #15623 (which is a dependency)?


No idea `O_o`

It's merged anyway, so what's the point ?

I'm trying to find out why your branch works while I thought it wouldn't.

Nathann



---

archive/issue_comments_245225.json:
```json
{
    "body": "<a id='comment:19'></a>\n\n```\nsage: d = DiGraph()       \nsage: d._backend.directed \nTrue\nsage: d._backend._directed\nTrue\n```\n\nI hate this code.\n\nNathann",
    "created_at": "2014-02-11T14:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245225",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>

```
sage: d = DiGraph()       
sage: d._backend.directed 
True
sage: d._backend._directed
True
```

I hate this code.

Nathann



---

archive/issue_comments_245226.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [ncohen](#comment%3A18):\n> It's merged anyway, so what's the point ?\n\n\nI think it is in \"develop\", but not in \"master\", which is the default branching point when you create a ticket.",
    "created_at": "2014-02-11T14:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245226",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:20'></a>
Replying to [ncohen](#comment%3A18):
> It's merged anyway, so what's the point ?


I think it is in "develop", but not in "master", which is the default branching point when you create a ticket.



---

archive/issue_comments_245227.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [ncohen](#comment%3A19):\n> \n> ```\n> sage: d = DiGraph()       \n> sage: d._backend.directed \n> True\n> sage: d._backend._directed\n> True\n> ```\n> \n> I hate this code.\n\n\nUnderstandably.\n> Nathann\n",
    "created_at": "2014-02-11T14:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245227",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:21'></a>
Replying to [ncohen](#comment%3A19):
> 
> ```
> sage: d = DiGraph()       
> sage: d._backend.directed 
> True
> sage: d._backend._directed
> True
> ```
> 
> I hate this code.


Understandably.
> Nathann




---

archive/issue_comments_245228.json:
```json
{
    "body": "<a id='comment:22'></a>\nOK, but this seems to indicate that `_backend.directed` and `_backend._directed` are both used and are out of sync. That's bad. Perhaps this can be cleaned up in this ticket.",
    "created_at": "2014-02-11T14:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245228",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:22'></a>
OK, but this seems to indicate that `_backend.directed` and `_backend._directed` are both used and are out of sync. That's bad. Perhaps this can be cleaned up in this ticket.



---

archive/issue_comments_245229.json:
```json
{
    "body": "<a id='comment:23'></a>\n> I think it is in \"develop\", but not in \"master\", which is the default branching point when you create a ticket.\n\n\nSimon, I don't want to antagonize anybody and I'm sorry enough that you have to deal with stupid errors like that in the graph code (even though these things are not my doing either), but I really believe that the develop/ branch exists for developpers to work with.\n\nNathann",
    "created_at": "2014-02-11T14:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245229",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>
> I think it is in "develop", but not in "master", which is the default branching point when you create a ticket.


Simon, I don't want to antagonize anybody and I'm sorry enough that you have to deal with stupid errors like that in the graph code (even though these things are not my doing either), but I really believe that the develop/ branch exists for developpers to work with.

Nathann



---

archive/issue_comments_245230.json:
```json
{
    "body": "<a id='comment:24'></a>\n> OK, but this seems to indicate that `_backend.directed` and `_backend._directed` are both used and are out of sync. That's bad. Perhaps this can be cleaned up in this ticket.\n\n\nYeah, the `.directed` variable is set explicitly in the `DiGraph` constructor. I will update my branch in a second and add a message here when it is done.\n\nNathann",
    "created_at": "2014-02-11T14:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245230",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>
> OK, but this seems to indicate that `_backend.directed` and `_backend._directed` are both used and are out of sync. That's bad. Perhaps this can be cleaned up in this ticket.


Yeah, the `.directed` variable is set explicitly in the `DiGraph` constructor. I will update my branch in a second and add a message here when it is done.

Nathann



---

archive/issue_comments_245231.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [ncohen](#comment%3A24):\n> Yeah, the `.directed` variable is set explicitly in the `DiGraph` constructor. I will update my branch in a second and add a message here when it is done.\n\n\nOK. Will your branch include #15623 (i.e., more than master)?",
    "created_at": "2014-02-11T14:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245231",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:25'></a>
Replying to [ncohen](#comment%3A24):
> Yeah, the `.directed` variable is set explicitly in the `DiGraph` constructor. I will update my branch in a second and add a message here when it is done.


OK. Will your branch include #15623 (i.e., more than master)?



---

archive/issue_comments_245232.json:
```json
{
    "body": "<a id='comment:26'></a>\n> OK. Will your branch include #15623 (i.e., more than master)?\n\n\nWell.... It will be based on develop, and include nothing else.\n\nNathann",
    "created_at": "2014-02-11T14:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245232",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:26'></a>
> OK. Will your branch include #15623 (i.e., more than master)?


Well.... It will be based on develop, and include nothing else.

Nathann



---

archive/issue_comments_245233.json:
```json
{
    "body": "<a id='comment:27'></a>\nBy the way if you use the dev scripts and if they use the master branch as a default then that's probably a bug that should be fixed. Could you write to sage-git if that's the case ?\n\nNathann",
    "created_at": "2014-02-11T15:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245233",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:27'></a>
By the way if you use the dev scripts and if they use the master branch as a default then that's probably a bug that should be fixed. Could you write to sage-git if that's the case ?

Nathann



---

archive/issue_comments_245234.json:
```json
{
    "body": "<a id='comment:28'></a>\nWhat do you think of the current public/15810 ? It removes the ugly definition of `.directed` in the constructor of `DiGraph`. Another part of the code used this `.directed` once, and I converted it too. Now, Backends only have a `._directed` flag, as indicated by the very first lines of GenericGraphBackend\n\nNathann",
    "created_at": "2014-02-11T15:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245234",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'></a>
What do you think of the current public/15810 ? It removes the ugly definition of `.directed` in the constructor of `DiGraph`. Another part of the code used this `.directed` once, and I converted it too. Now, Backends only have a `._directed` flag, as indicated by the very first lines of GenericGraphBackend

Nathann



---

archive/issue_comments_245235.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [ncohen](#comment%3A28):\n> What do you think of the current public/15810\n\n\nCan you remind me how to obtain that branch and how to set the default location for pushing a commit?",
    "created_at": "2014-02-11T15:29:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245235",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:29'></a>
Replying to [ncohen](#comment%3A28):
> What do you think of the current public/15810


Can you remind me how to obtain that branch and how to set the default location for pushing a commit?



---

archive/issue_comments_245236.json:
```json
{
    "body": "<a id='comment:30'></a>\n> Can you remind me how to obtain that branch and how to set the default location for pushing a commit?\n\n\ngit fetch trac `public/15810:local_branch` will fetch this branch and call it `local_branch` on your computer.\n\nI do not know if it is what you ask with your second question, but `git push trac local_branch:remote_branch` will upload `local_branch` on Trac where it will be called `remote_branch`. `remote_branch` can be something like `public/168543843` or `u/your_trac_login/7687687`.\n\nNathann",
    "created_at": "2014-02-11T15:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245236",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:30'></a>
> Can you remind me how to obtain that branch and how to set the default location for pushing a commit?


git fetch trac `public/15810:local_branch` will fetch this branch and call it `local_branch` on your computer.

I do not know if it is what you ask with your second question, but `git push trac local_branch:remote_branch` will upload `local_branch` on Trac where it will be called `remote_branch`. `remote_branch` can be something like `public/168543843` or `u/your_trac_login/7687687`.

Nathann



---

archive/issue_comments_245237.json:
```json
{
    "body": "<a id='comment:31'></a>\nThank you!\n\nSimon",
    "created_at": "2014-02-11T15:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245237",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:31'></a>
Thank you!

Simon



---

archive/issue_comments_245238.json:
```json
{
    "body": "<a id='comment:32'></a>\nIs the purpose of this ticket to remove the confusion between `_directed` and `directed`? Then it needs work, as both is still in the code.",
    "created_at": "2014-02-11T15:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245238",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:32'></a>
Is the purpose of this ticket to remove the confusion between `_directed` and `directed`? Then it needs work, as both is still in the code.



---

archive/issue_comments_245239.json:
```json
{
    "body": "<a id='comment:33'></a>\n> Is the purpose of this ticket to remove the confusion between `_directed` and `directed`? Then it needs work, as both is still in the code.\n\n\nWhere ? \n\n- There is a `Graph._directed` which cannot be renamed to .directed, for that's an internal variable\n- With this ticket there is a `CGraphBackend._directed`, and only that.\n- There is a `CGraph.directed`, as before.\n\nHow simple can it get ? We only store this boolean 3 times, and probably have as many functions that only return its value `>_<`\n\nNathann",
    "created_at": "2014-02-11T15:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245239",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:33'></a>
> Is the purpose of this ticket to remove the confusion between `_directed` and `directed`? Then it needs work, as both is still in the code.


Where ? 

- There is a `Graph._directed` which cannot be renamed to .directed, for that's an internal variable
- With this ticket there is a `CGraphBackend._directed`, and only that.
- There is a `CGraph.directed`, as before.

How simple can it get ? We only store this boolean 3 times, and probably have as many functions that only return its value `>_<`

Nathann



---

archive/issue_comments_245240.json:
```json
{
    "body": "<a id='comment:34'></a>\n\n```\nking@linux-etl7:~/Sage/git/sage> grep \"\\._directed\" -R src/sage/graphs/ | grep pyx:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        self._directed = cg.directed\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if self._directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if self._directed:\nsrc/sage/graphs/base/sparse_graph.pyx:        self._directed = directed\nsrc/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)\nsrc/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)\nsrc/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)\nsrc/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)\nsrc/sage/graphs/base/dense_graph.pyx:        self._directed = directed\nsrc/sage/graphs/base/c_graph.pyx:        if self._directed:\nsrc/sage/graphs/base/c_graph.pyx:                     (self._directed and\nsrc/sage/graphs/base/c_graph.pyx:        if not self._directed:\nsrc/sage/graphs/base/c_graph.pyx:        if not self._directed:\nsrc/sage/graphs/base/c_graph.pyx:        if not self.graph._directed:\nsrc/sage/graphs/graph_decompositions/vertex_separation.pyx:        if G._directed:\n```\nversus\n\n```\nking@linux-etl7:~/Sage/git/sage> grep \"\\.directed\" -R src/sage/graphs/ | grep pyx:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        self.directed = G.is_directed()\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if self.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        self._directed = cg.directed\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if not cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if cg.directed:\nsrc/sage/graphs/generic_graph_pyx.pyx:        self.directed = G.is_directed()\nsrc/sage/graphs/generic_graph_pyx.pyx:        if self.directed:\nsrc/sage/graphs/generic_graph_pyx.pyx:                    if is_admissible and self.directed:\nsrc/sage/graphs/generic_graph_pyx.pyx:        if self.directed:\n```",
    "created_at": "2014-02-11T15:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245240",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:34'></a>

```
king@linux-etl7:~/Sage/git/sage> grep "\._directed" -R src/sage/graphs/ | grep pyx:
src/sage/graphs/base/static_sparse_backend.pyx:        self._directed = cg.directed
src/sage/graphs/base/static_sparse_backend.pyx:        if self._directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if self._directed:
src/sage/graphs/base/sparse_graph.pyx:        self._directed = directed
src/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)
src/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)
src/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)
src/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)
src/sage/graphs/base/dense_graph.pyx:        self._directed = directed
src/sage/graphs/base/c_graph.pyx:        if self._directed:
src/sage/graphs/base/c_graph.pyx:                     (self._directed and
src/sage/graphs/base/c_graph.pyx:        if not self._directed:
src/sage/graphs/base/c_graph.pyx:        if not self._directed:
src/sage/graphs/base/c_graph.pyx:        if not self.graph._directed:
src/sage/graphs/graph_decompositions/vertex_separation.pyx:        if G._directed:
```
versus

```
king@linux-etl7:~/Sage/git/sage> grep "\.directed" -R src/sage/graphs/ | grep pyx:
src/sage/graphs/base/static_sparse_backend.pyx:        self.directed = G.is_directed()
src/sage/graphs/base/static_sparse_backend.pyx:        if self.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        self._directed = cg.directed
src/sage/graphs/base/static_sparse_backend.pyx:        if not cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if cg.directed:
src/sage/graphs/generic_graph_pyx.pyx:        self.directed = G.is_directed()
src/sage/graphs/generic_graph_pyx.pyx:        if self.directed:
src/sage/graphs/generic_graph_pyx.pyx:                    if is_admissible and self.directed:
src/sage/graphs/generic_graph_pyx.pyx:        if self.directed:
```



---

archive/issue_comments_245241.json:
```json
{
    "body": "<a id='comment:35'></a>\nPS: There are numerous hits for both directed and _directed in .py files, too.",
    "created_at": "2014-02-11T15:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245241",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:35'></a>
PS: There are numerous hits for both directed and _directed in .py files, too.



---

archive/issue_comments_245242.json:
```json
{
    "body": "<a id='comment:36'></a>\nOh. Looks like the CGraph do not insist on having a `_directed` or a `directed`. So I can change the instances of `static_sparse_backend` if you like. I don't think that those of SubgraphSearch matter to you, do they ? Those are the ones you find in `generic_graph_pyx.pyx`.",
    "created_at": "2014-02-11T15:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245242",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:36'></a>
Oh. Looks like the CGraph do not insist on having a `_directed` or a `directed`. So I can change the instances of `static_sparse_backend` if you like. I don't think that those of SubgraphSearch matter to you, do they ? Those are the ones you find in `generic_graph_pyx.pyx`.



---

archive/issue_comments_245243.json:
```json
{
    "body": "<a id='comment:37'></a>\nI updated the branch with a new commit. I set it as this ticket's branch so that you can see it more easily. The only `.directed` that remain are those of SubgraphSearch in `generic_graph_pyx.pyx`.\n\nNathann\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9796a13f5f8304f42cebc07728bcefb32c83e0a\">e9796a1</a></td><td><code>trac #15810: Immutable directed graphs should know that they are directed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6\">d6ca86c</a></td><td><code>trac #15810: The graph data structures may have a ._directed but no .directed</code></td></tr></table>\n",
    "created_at": "2014-02-11T15:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245243",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:37'></a>
I updated the branch with a new commit. I set it as this ticket's branch so that you can see it more easily. The only `.directed` that remain are those of SubgraphSearch in `generic_graph_pyx.pyx`.

Nathann

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9796a13f5f8304f42cebc07728bcefb32c83e0a">e9796a1</a></td><td><code>trac #15810: Immutable directed graphs should know that they are directed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6">d6ca86c</a></td><td><code>trac #15810: The graph data structures may have a ._directed but no .directed</code></td></tr></table>




---

archive/issue_comments_245244.json:
```json
{
    "body": "**Changing branch** from \"[u/SimonKing/ticket/15810](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15810)\" to \"[public/15810](https://github.com/sagemath/sagetrac-mirror/tree/public/15810)\".",
    "created_at": "2014-02-11T15:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245244",
    "user": "https://github.com/nathanncohen"
}
```

**Changing branch** from "[u/SimonKing/ticket/15810](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15810)" to "[public/15810](https://github.com/sagemath/sagetrac-mirror/tree/public/15810)".



---

archive/issue_comments_245245.json:
```json
{
    "body": "**Changing commit** from \"[1382f4f40bea6fbf32af4f0f745aa2f645a235af](https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af)\" to \"[d6ca86c1d6984bc7a468b80905ddec01323cc9b6](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)\".",
    "created_at": "2014-02-11T15:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245245",
    "user": "https://github.com/nathanncohen"
}
```

**Changing commit** from "[1382f4f40bea6fbf32af4f0f745aa2f645a235af](https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af)" to "[d6ca86c1d6984bc7a468b80905ddec01323cc9b6](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)".



---

archive/issue_comments_245246.json:
```json
{
    "body": "<a id='comment:38'></a>\nCould you elaborate why you *remove* one line in the following chunks, rather than replace `.directed` by `._directed`?\n\n```diff\ndiff --git a/src/sage/graphs/digraph.py b/src/sage/graphs/digraph.py\nindex f869bb0..d95e96e 100644\n--- a/src/sage/graphs/digraph.py\n+++ b/src/sage/graphs/digraph.py\n@@ -919,7 +919,6 @@ class DiGraph(GenericGraph):\n                 self._weighted = weighted\n                 self.allow_loops(loops, check=False)\n                 self.allow_multiple_edges(multiedges, check=False)\n-            self._backend.directed = True\n         else:\n             raise NotImplementedError(\"Supported implementations: networkx, c_graph.\")\n \ndiff --git a/src/sage/graphs/graph.py b/src/sage/graphs/graph.py\nindex a3f1dcd..4d15305 100644\n--- a/src/sage/graphs/graph.py\n+++ b/src/sage/graphs/graph.py\n@@ -1542,7 +1542,6 @@ class Graph(GenericGraph):\n                 self._weighted = weighted\n                 self.allow_loops(loops, check=False)\n                 self.allow_multiple_edges(multiedges, check=False)\n-            self._backend.directed = False\n         else:\n             raise NotImplementedError(\"Supported implementations: networkx, c_graph.\")\n```",
    "created_at": "2014-02-11T16:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245246",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:38'></a>
Could you elaborate why you *remove* one line in the following chunks, rather than replace `.directed` by `._directed`?

```diff
diff --git a/src/sage/graphs/digraph.py b/src/sage/graphs/digraph.py
index f869bb0..d95e96e 100644
--- a/src/sage/graphs/digraph.py
+++ b/src/sage/graphs/digraph.py
@@ -919,7 +919,6 @@ class DiGraph(GenericGraph):
                 self._weighted = weighted
                 self.allow_loops(loops, check=False)
                 self.allow_multiple_edges(multiedges, check=False)
-            self._backend.directed = True
         else:
             raise NotImplementedError("Supported implementations: networkx, c_graph.")
 
diff --git a/src/sage/graphs/graph.py b/src/sage/graphs/graph.py
index a3f1dcd..4d15305 100644
--- a/src/sage/graphs/graph.py
+++ b/src/sage/graphs/graph.py
@@ -1542,7 +1542,6 @@ class Graph(GenericGraph):
                 self._weighted = weighted
                 self.allow_loops(loops, check=False)
                 self.allow_multiple_edges(multiedges, check=False)
-            self._backend.directed = False
         else:
             raise NotImplementedError("Supported implementations: networkx, c_graph.")
```



---

archive/issue_comments_245247.json:
```json
{
    "body": "<a id='comment:39'></a>\nBecause several lines above those two lines, `self._backend` is created using the backend's constructor, which takes the value `True/False` as an input. \n\nAnd well, setting the value of a private variable of the backend is the backend's constructor's job. So this way, the constructors of !Graph and DiGraph do not mess with what they should not touch, the value of `_directed` is set only in the backend's constructor's code, and there is no fancy alias in the backend that is set where there should not be.\n\nNathann",
    "created_at": "2014-02-11T16:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245247",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:39'></a>
Because several lines above those two lines, `self._backend` is created using the backend's constructor, which takes the value `True/False` as an input. 

And well, setting the value of a private variable of the backend is the backend's constructor's job. So this way, the constructors of !Graph and DiGraph do not mess with what they should not touch, the value of `_directed` is set only in the backend's constructor's code, and there is no fancy alias in the backend that is set where there should not be.

Nathann



---

archive/issue_comments_245248.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [ncohen](#comment%3A39):\n> And well, setting the value of a private variable of the backend is the backend's constructor's job. So this way, the constructors of !Graph and DiGraph do not mess with what they should not touch, the value of `_directed` is set only in the backend's constructor's code, and there is no fancy alias in the backend that is set where there should not be.\n\n\nOK. Then, provided tests pass, it will be positive review.",
    "created_at": "2014-02-11T16:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245248",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:40'></a>
Replying to [ncohen](#comment%3A39):
> And well, setting the value of a private variable of the backend is the backend's constructor's job. So this way, the constructors of !Graph and DiGraph do not mess with what they should not touch, the value of `_directed` is set only in the backend's constructor's code, and there is no fancy alias in the backend that is set where there should not be.


OK. Then, provided tests pass, it will be positive review.



---

archive/issue_comments_245249.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-02-11T20:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245249",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_245250.json:
```json
{
    "body": "<a id='comment:41'></a>\nThank you, Nathann!\n\nSimon",
    "created_at": "2014-02-11T20:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245250",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:41'></a>
Thank you, Nathann!

Simon



---

archive/issue_comments_245251.json:
```json
{
    "body": "**Changing author** from \"Simon King\" to \"Nathann Cohen\".",
    "created_at": "2014-02-11T20:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245251",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing author** from "Simon King" to "Nathann Cohen".



---

archive/issue_comments_245252.json:
```json
{
    "body": "**Reviewer:** Simon King",
    "created_at": "2014-02-11T20:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245252",
    "user": "https://github.com/simon-king-jena"
}
```

**Reviewer:** Simon King



---

archive/issue_comments_245253.json:
```json
{
    "body": "<a id='comment:42'></a>\nThanks for the review `:-)`\n\nNathann",
    "created_at": "2014-02-11T20:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245253",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:42'></a>
Thanks for the review `:-)`

Nathann



---

archive/issue_comments_245254.json:
```json
{
    "body": "**Changing branch** from \"[public/15810](https://github.com/sagemath/sagetrac-mirror/tree/public/15810)\" to \"[d6ca86c1d6984bc7a468b80905ddec01323cc9b6](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)\".",
    "created_at": "2014-02-14T19:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15810#issuecomment-245254",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/15810](https://github.com/sagemath/sagetrac-mirror/tree/public/15810)" to "[d6ca86c1d6984bc7a468b80905ddec01323cc9b6](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)".



---

archive/issue_events_052624.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-14T19:44:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15810",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15810#event-52624"
}
```
