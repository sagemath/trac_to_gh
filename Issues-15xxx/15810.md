# Issue 15810: Immutable directed graphs should know that they are directed

archive/issues_015573.json:
```json
{
    "assignees": [],
    "body": "Bug:\n\n```\nsage: Q = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}})\nsage: Q.is_directed_acyclic()\nTrue\nsage: I = Q.copy(immutable=True)\nsage: I.is_directed_acyclic()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-19-1dc52c5fb57c> in <module>()\n----> 1 I.is_directed_acyclic()\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/digraph.pyc in is_directed_acyclic(self, certificate)\n   1117             False\n   1118         \"\"\"\n-> 1119         return self._backend.is_directed_acyclic(certificate = certificate)\n   1120 \n   1121     def to_directed(self):\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.CGraphBackend.is_directed_acyclic (sage/graphs/base/c_graph.c:19314)()\n\nValueError: Input must be a directed graph.\n```\n\nDepends on #15623\n\nCC:  @nathanncohen\n\nKeywords: **immutable directed graph**\n\nBranch/Commit: **[d6ca86c](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)**\n\nReviewer: **Simon King**\n\nAuthor: **Nathann Cohen**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15810_\n\n",
    "closed_at": "2014-02-14T19:44:54Z",
    "created_at": "2014-02-11T14:13:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Immutable directed graphs should know that they are directed",
    "type": "issue",
    "updated_at": "2014-02-14T19:44:54Z",
    "url": "https://github.com/sagemath/sage/issues/15810",
    "user": "https://github.com/simon-king-jena"
}
```
Bug:

```
sage: Q = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}})
sage: Q.is_directed_acyclic()
True
sage: I = Q.copy(immutable=True)
sage: I.is_directed_acyclic()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-19-1dc52c5fb57c> in <module>()
----> 1 I.is_directed_acyclic()

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/digraph.pyc in is_directed_acyclic(self, certificate)
   1117             False
   1118         """
-> 1119         return self._backend.is_directed_acyclic(certificate = certificate)
   1120 
   1121     def to_directed(self):

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.CGraphBackend.is_directed_acyclic (sage/graphs/base/c_graph.c:19314)()

ValueError: Input must be a directed graph.
```

Depends on #15623

CC:  @nathanncohen

Keywords: **immutable directed graph**

Branch/Commit: **[d6ca86c](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)**

Reviewer: **Simon King**

Author: **Nathann Cohen**

_Issue created by migration from https://trac.sagemath.org/ticket/15810_





---

archive/issue_events_208248.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T14:13:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208248"
}
```



---

archive/issue_events_208249.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T14:13:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208249"
}
```



---

archive/issue_events_208250.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T14:13:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208250"
}
```



---

archive/issue_events_208251.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T14:13:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208251"
}
```



---

archive/issue_comments_202107.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nVariation of the theme:\n\n```\nsage: Q = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}}, immutable=True)\nsage: Q.is_directed_acyclic()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-3-a8ff599a3235> in <module>()\n----> 1 Q.is_directed_acyclic()\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/digraph.pyc in is_directed_acyclic(self, certificate)\n   1108             False\n   1109         \"\"\"\n-> 1110         return self._backend.is_directed_acyclic(certificate = certificate)\n   1111 \n   1112     def to_directed(self):\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.CGraphBackend.is_directed_acyclic (sage/graphs/base/c_graph.c:19328)()\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.bitset_init (sage/graphs/base/c_graph.c:3113)()\n\nValueError: bitset capacity must be greater than 0\n```",
    "created_at": "2014-02-11T14:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202107",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">Comment 1</div>

Variation of the theme:

```
sage: Q = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}}, immutable=True)
sage: Q.is_directed_acyclic()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-3-a8ff599a3235> in <module>()
----> 1 Q.is_directed_acyclic()

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/digraph.pyc in is_directed_acyclic(self, certificate)
   1108             False
   1109         """
-> 1110         return self._backend.is_directed_acyclic(certificate = certificate)
   1111 
   1112     def to_directed(self):

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.CGraphBackend.is_directed_acyclic (sage/graphs/base/c_graph.c:19328)()

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/base/c_graph.so in sage.graphs.base.c_graph.bitset_init (sage/graphs/base/c_graph.c:3113)()

ValueError: bitset capacity must be greater than 0
```



---

archive/issue_comments_202108.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nPS: In that case, `Q.show()` barks, too.",
    "created_at": "2014-02-11T14:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202108",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">Comment 2</div>

PS: In that case, `Q.show()` barks, too.



---

archive/issue_comments_202109.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nThat's because in `static_sparse_backend` the binary variable for directed is `self.directed` instead of `self._directed`............\n\nNathann",
    "created_at": "2014-02-11T14:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202109",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">Comment 3</div>

That's because in `static_sparse_backend` the binary variable for directed is `self.directed` instead of `self._directed`............

Nathann



---

archive/issue_comments_202110.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nReplying to [@nathanncohen](#comment%3A3):\n> That's because in `static_sparse_backend` the binary variable for directed is `self.directed` instead of `self._directed`............\n\nSo, easy to fix, then? What are the dependencies of this ticket? Actually, the error with the master branch is as in [comment:1](#comment%3A1), whereas I get the error shown in the ticket description with a different branch (develop?).",
    "created_at": "2014-02-11T14:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202110",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">Comment 4</div>

Replying to [@nathanncohen](#comment%3A3):
> That's because in `static_sparse_backend` the binary variable for directed is `self.directed` instead of `self._directed`............

So, easy to fix, then? What are the dependencies of this ticket? Actually, the error with the master branch is as in [comment:1](#comment%3A1), whereas I get the error shown in the ticket description with a different branch (develop?).



---

archive/issue_comments_202111.json:
```json
{
    "body": "Branch: **[u/SimonKing/ticket/15810](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15810)**",
    "created_at": "2014-02-11T14:31:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202111",
    "user": "https://github.com/simon-king-jena"
}
```

Branch: **[u/SimonKing/ticket/15810](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15810)**



---

archive/issue_comments_202112.json:
```json
{
    "body": "Dependencies: **#15623**",
    "created_at": "2014-02-11T14:31:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202112",
    "user": "https://github.com/simon-king-jena"
}
```

Dependencies: **#15623**



---

archive/issue_comments_202113.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/175027d2d3c94fc973c2100e8cc3576c0c06d0ef\">175027d</a></td><td><code>Merge branch 'u/SimonKing/ticket/15623' of git://trac.sagemath.org/sage into ticket/15810</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af\">1382f4f</a></td><td><code>Trac 15810: Replace ._directed by .directed for immutable graph backend</code></td></tr></table>\n",
    "created_at": "2014-02-11T14:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202113",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">Comment 7</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/175027d2d3c94fc973c2100e8cc3576c0c06d0ef">175027d</a></td><td><code>Merge branch 'u/SimonKing/ticket/15623' of git://trac.sagemath.org/sage into ticket/15810</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af">1382f4f</a></td><td><code>Trac 15810: Replace ._directed by .directed for immutable graph backend</code></td></tr></table>




---

archive/issue_comments_202114.json:
```json
{
    "body": "Commit: **[1382f4f](https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af)**",
    "created_at": "2014-02-11T14:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202114",
    "user": "https://github.com/simon-king-jena"
}
```

Commit: **[1382f4f](https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af)**



---

archive/issue_comments_202115.json:
```json
{
    "body": "Author: **Simon King**",
    "created_at": "2014-02-11T14:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202115",
    "user": "https://github.com/simon-king-jena"
}
```

Author: **Simon King**



---

archive/issue_events_208252.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T14:32:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208252"
}
```



---

archive/issue_events_208253.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T14:34:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208253"
}
```



---

archive/issue_events_208254.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T14:34:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208254"
}
```



---

archive/issue_comments_202116.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThere is more than this one type \"_directed  --> directed\" to fix.",
    "created_at": "2014-02-11T14:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202116",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">Comment 8</div>

There is more than this one type "_directed  --> directed" to fix.



---

archive/issue_comments_202117.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nArg... I was uploading mine `:-/`\n\nNathann",
    "created_at": "2014-02-11T14:35:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202117",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">Comment 9</div>

Arg... I was uploading mine `:-/`

Nathann



---

archive/issue_comments_202118.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nNOnonono it's not this one that should be changed. Give me a second.\n\nNathann",
    "created_at": "2014-02-11T14:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202118",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">Comment 10</div>

NOnonono it's not this one that should be changed. Give me a second.

Nathann



---

archive/issue_comments_202119.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nWTF?????\n\nWhen I generally replace _directed by directed for static graph backend, I get numerous errors!!",
    "created_at": "2014-02-11T14:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202119",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">Comment 11</div>

WTF?????

When I generally replace _directed by directed for static graph backend, I get numerous errors!!



---

archive/issue_comments_202120.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@nathanncohen](#comment%3A10):\n> NOnonono it's not this one that should be changed. Give me a second.\n> \n> Nathann\n\nWhy not? It fixes it.",
    "created_at": "2014-02-11T14:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202120",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@nathanncohen](#comment%3A10):
> NOnonono it's not this one that should be changed. Give me a second.
> 
> Nathann

Why not? It fixes it.



---

archive/issue_events_208255.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T14:40:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208255"
}
```



---

archive/issue_events_208256.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T14:40:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208256"
}
```



---

archive/issue_comments_202121.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nWith my branch, all tests in sage.graphs pass. So, what's the problem?",
    "created_at": "2014-02-11T14:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202121",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">Comment 13</div>

With my branch, all tests in sage.graphs pass. So, what's the problem?



---

archive/issue_comments_202122.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\n> When I generally replace _directed by directed for static graph backend, I get numerous errors!!\n\nThe file `static_graph_backend` also contains a CGraph class, which uses `.directed` and not `_directed`. It's just a terrible choice. It has to be `._directed` for GraphBackend and `.directed` for CGraph. And if you change the value used in `is_directed_acyclic` that's going to fail when the backend is a `SparseGraph`. `:-/`\n\nNathann",
    "created_at": "2014-02-11T14:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202122",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">Comment 14</div>

> When I generally replace _directed by directed for static graph backend, I get numerous errors!!

The file `static_graph_backend` also contains a CGraph class, which uses `.directed` and not `_directed`. It's just a terrible choice. It has to be `._directed` for GraphBackend and `.directed` for CGraph. And if you change the value used in `is_directed_acyclic` that's going to fail when the backend is a `SparseGraph`. `:-/`

Nathann



---

archive/issue_comments_202123.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\n> With my branch, all tests in sage.graphs pass. So, what's the problem?\n\n`O_o`\n\nNo problem with SparseGraph backends ? Then I don't get it either.\n\nNathann",
    "created_at": "2014-02-11T14:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202123",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">Comment 15</div>

> With my branch, all tests in sage.graphs pass. So, what's the problem?

`O_o`

No problem with SparseGraph backends ? Then I don't get it either.

Nathann



---

archive/issue_comments_202124.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@nathanncohen](#comment%3A15):\n> No problem with SparseGraph backends ? Then I don't get it either.\n\nApparently:\n\n```\nsage: D = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}})\nsage: D.is_directed_acyclic()\nTrue\nsage: I = D.copy(immutable=True)\nsage: I.is_directed_acyclic()\nTrue\nsage: D._backend\n<class 'sage.graphs.base.sparse_graph.SparseGraphBackend'>\nsage: I._backend\n<class 'sage.graphs.base.static_sparse_backend.StaticSparseBackend'>\n```",
    "created_at": "2014-02-11T14:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202124",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@nathanncohen](#comment%3A15):
> No problem with SparseGraph backends ? Then I don't get it either.

Apparently:

```
sage: D = DiGraph({1:{2:['a','b'], 3:['c']}, 2:{3:['d']}})
sage: D.is_directed_acyclic()
True
sage: I = D.copy(immutable=True)
sage: I.is_directed_acyclic()
True
sage: D._backend
<class 'sage.graphs.base.sparse_graph.SparseGraphBackend'>
sage: I._backend
<class 'sage.graphs.base.static_sparse_backend.StaticSparseBackend'>
```



---

archive/issue_comments_202125.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@nathanncohen](#comment%3A15):\n> No problem with SparseGraph backends ? Then I don't get it either.\n\nDid you not fix something of this kind in #15623 (which is a dependency)?",
    "created_at": "2014-02-11T14:44:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202125",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@nathanncohen](#comment%3A15):
> No problem with SparseGraph backends ? Then I don't get it either.

Did you not fix something of this kind in #15623 (which is a dependency)?



---

archive/issue_comments_202126.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\n> Did you not fix something of this kind in #15623 (which is a dependency)?\n\nNo idea `O_o`\n\nIt's merged anyway, so what's the point ?\n\nI'm trying to find out why your branch works while I thought it wouldn't.\n\nNathann",
    "created_at": "2014-02-11T14:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202126",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">Comment 18</div>

> Did you not fix something of this kind in #15623 (which is a dependency)?

No idea `O_o`

It's merged anyway, so what's the point ?

I'm trying to find out why your branch works while I thought it wouldn't.

Nathann



---

archive/issue_comments_202127.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\n\n```\nsage: d = DiGraph()       \nsage: d._backend.directed \nTrue\nsage: d._backend._directed\nTrue\n```\n\nI hate this code.\n\nNathann",
    "created_at": "2014-02-11T14:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202127",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">Comment 19</div>


```
sage: d = DiGraph()       
sage: d._backend.directed 
True
sage: d._backend._directed
True
```

I hate this code.

Nathann



---

archive/issue_comments_202128.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@nathanncohen](#comment%3A18):\n> It's merged anyway, so what's the point ?\n\nI think it is in \"develop\", but not in \"master\", which is the default branching point when you create a ticket.",
    "created_at": "2014-02-11T14:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202128",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@nathanncohen](#comment%3A18):
> It's merged anyway, so what's the point ?

I think it is in "develop", but not in "master", which is the default branching point when you create a ticket.



---

archive/issue_comments_202129.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nReplying to [@nathanncohen](#comment%3A19):\n> \n> ```\n> sage: d = DiGraph()       \n> sage: d._backend.directed \n> True\n> sage: d._backend._directed\n> True\n> ```\n> \n> I hate this code.\n\nUnderstandably.\n> Nathann",
    "created_at": "2014-02-11T14:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202129",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:21" align="right">Comment 21</div>

Replying to [@nathanncohen](#comment%3A19):
> 
> ```
> sage: d = DiGraph()       
> sage: d._backend.directed 
> True
> sage: d._backend._directed
> True
> ```
> 
> I hate this code.

Understandably.
> Nathann



---

archive/issue_comments_202130.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nOK, but this seems to indicate that `_backend.directed` and `_backend._directed` are both used and are out of sync. That's bad. Perhaps this can be cleaned up in this ticket.",
    "created_at": "2014-02-11T14:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202130",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:22" align="right">Comment 22</div>

OK, but this seems to indicate that `_backend.directed` and `_backend._directed` are both used and are out of sync. That's bad. Perhaps this can be cleaned up in this ticket.



---

archive/issue_comments_202131.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\n> I think it is in \"develop\", but not in \"master\", which is the default branching point when you create a ticket.\n\nSimon, I don't want to antagonize anybody and I'm sorry enough that you have to deal with stupid errors like that in the graph code (even though these things are not my doing either), but I really believe that the develop/ branch exists for developpers to work with.\n\nNathann",
    "created_at": "2014-02-11T14:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202131",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">Comment 23</div>

> I think it is in "develop", but not in "master", which is the default branching point when you create a ticket.

Simon, I don't want to antagonize anybody and I'm sorry enough that you have to deal with stupid errors like that in the graph code (even though these things are not my doing either), but I really believe that the develop/ branch exists for developpers to work with.

Nathann



---

archive/issue_comments_202132.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\n> OK, but this seems to indicate that `_backend.directed` and `_backend._directed` are both used and are out of sync. That's bad. Perhaps this can be cleaned up in this ticket.\n\nYeah, the `.directed` variable is set explicitly in the `DiGraph` constructor. I will update my branch in a second and add a message here when it is done.\n\nNathann",
    "created_at": "2014-02-11T14:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202132",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">Comment 24</div>

> OK, but this seems to indicate that `_backend.directed` and `_backend._directed` are both used and are out of sync. That's bad. Perhaps this can be cleaned up in this ticket.

Yeah, the `.directed` variable is set explicitly in the `DiGraph` constructor. I will update my branch in a second and add a message here when it is done.

Nathann



---

archive/issue_comments_202133.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@nathanncohen](#comment%3A24):\n> Yeah, the `.directed` variable is set explicitly in the `DiGraph` constructor. I will update my branch in a second and add a message here when it is done.\n\nOK. Will your branch include #15623 (i.e., more than master)?",
    "created_at": "2014-02-11T14:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202133",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@nathanncohen](#comment%3A24):
> Yeah, the `.directed` variable is set explicitly in the `DiGraph` constructor. I will update my branch in a second and add a message here when it is done.

OK. Will your branch include #15623 (i.e., more than master)?



---

archive/issue_comments_202134.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\n> OK. Will your branch include #15623 (i.e., more than master)?\n\nWell.... It will be based on develop, and include nothing else.\n\nNathann",
    "created_at": "2014-02-11T14:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202134",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:26" align="right">Comment 26</div>

> OK. Will your branch include #15623 (i.e., more than master)?

Well.... It will be based on develop, and include nothing else.

Nathann



---

archive/issue_comments_202135.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBy the way if you use the dev scripts and if they use the master branch as a default then that's probably a bug that should be fixed. Could you write to sage-git if that's the case ?\n\nNathann",
    "created_at": "2014-02-11T15:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202135",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">Comment 27</div>

By the way if you use the dev scripts and if they use the master branch as a default then that's probably a bug that should be fixed. Could you write to sage-git if that's the case ?

Nathann



---

archive/issue_comments_202136.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nWhat do you think of the current public/15810 ? It removes the ugly definition of `.directed` in the constructor of `DiGraph`. Another part of the code used this `.directed` once, and I converted it too. Now, Backends only have a `._directed` flag, as indicated by the very first lines of GenericGraphBackend\n\nNathann",
    "created_at": "2014-02-11T15:18:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202136",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">Comment 28</div>

What do you think of the current public/15810 ? It removes the ugly definition of `.directed` in the constructor of `DiGraph`. Another part of the code used this `.directed` once, and I converted it too. Now, Backends only have a `._directed` flag, as indicated by the very first lines of GenericGraphBackend

Nathann



---

archive/issue_comments_202137.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nReplying to [@nathanncohen](#comment%3A28):\n> What do you think of the current public/15810\n\nCan you remind me how to obtain that branch and how to set the default location for pushing a commit?",
    "created_at": "2014-02-11T15:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202137",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:29" align="right">Comment 29</div>

Replying to [@nathanncohen](#comment%3A28):
> What do you think of the current public/15810

Can you remind me how to obtain that branch and how to set the default location for pushing a commit?



---

archive/issue_comments_202138.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\n> Can you remind me how to obtain that branch and how to set the default location for pushing a commit?\n\ngit fetch trac `public/15810:local_branch` will fetch this branch and call it `local_branch` on your computer.\n\nI do not know if it is what you ask with your second question, but `git push trac local_branch:remote_branch` will upload `local_branch` on Trac where it will be called `remote_branch`. `remote_branch` can be something like `public/168543843` or `u/your_trac_login/7687687`.\n\nNathann",
    "created_at": "2014-02-11T15:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202138",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:30" align="right">Comment 30</div>

> Can you remind me how to obtain that branch and how to set the default location for pushing a commit?

git fetch trac `public/15810:local_branch` will fetch this branch and call it `local_branch` on your computer.

I do not know if it is what you ask with your second question, but `git push trac local_branch:remote_branch` will upload `local_branch` on Trac where it will be called `remote_branch`. `remote_branch` can be something like `public/168543843` or `u/your_trac_login/7687687`.

Nathann



---

archive/issue_comments_202139.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nThank you!\n\nSimon",
    "created_at": "2014-02-11T15:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202139",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:31" align="right">Comment 31</div>

Thank you!

Simon



---

archive/issue_comments_202140.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nIs the purpose of this ticket to remove the confusion between `_directed` and `directed`? Then it needs work, as both is still in the code.",
    "created_at": "2014-02-11T15:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202140",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:32" align="right">Comment 32</div>

Is the purpose of this ticket to remove the confusion between `_directed` and `directed`? Then it needs work, as both is still in the code.



---

archive/issue_comments_202141.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\n> Is the purpose of this ticket to remove the confusion between `_directed` and `directed`? Then it needs work, as both is still in the code.\n\nWhere ? \n\n- There is a `Graph._directed` which cannot be renamed to .directed, for that's an internal variable\n- With this ticket there is a `CGraphBackend._directed`, and only that.\n- There is a `CGraph.directed`, as before.\n\nHow simple can it get ? We only store this boolean 3 times, and probably have as many functions that only return its value `>_<`\n\nNathann",
    "created_at": "2014-02-11T15:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202141",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:33" align="right">Comment 33</div>

> Is the purpose of this ticket to remove the confusion between `_directed` and `directed`? Then it needs work, as both is still in the code.

Where ? 

- There is a `Graph._directed` which cannot be renamed to .directed, for that's an internal variable
- With this ticket there is a `CGraphBackend._directed`, and only that.
- There is a `CGraph.directed`, as before.

How simple can it get ? We only store this boolean 3 times, and probably have as many functions that only return its value `>_<`

Nathann



---

archive/issue_comments_202142.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\n\n```\nking@linux-etl7:~/Sage/git/sage> grep \"\\._directed\" -R src/sage/graphs/ | grep pyx:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        self._directed = cg.directed\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if self._directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if self._directed:\nsrc/sage/graphs/base/sparse_graph.pyx:        self._directed = directed\nsrc/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)\nsrc/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)\nsrc/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)\nsrc/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)\nsrc/sage/graphs/base/dense_graph.pyx:        self._directed = directed\nsrc/sage/graphs/base/c_graph.pyx:        if self._directed:\nsrc/sage/graphs/base/c_graph.pyx:                     (self._directed and\nsrc/sage/graphs/base/c_graph.pyx:        if not self._directed:\nsrc/sage/graphs/base/c_graph.pyx:        if not self._directed:\nsrc/sage/graphs/base/c_graph.pyx:        if not self.graph._directed:\nsrc/sage/graphs/graph_decompositions/vertex_separation.pyx:        if G._directed:\n```\nversus\n\n```\nking@linux-etl7:~/Sage/git/sage> grep \"\\.directed\" -R src/sage/graphs/ | grep pyx:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        self.directed = G.is_directed()\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if self.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        self._directed = cg.directed\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if not cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if cg.directed:\nsrc/sage/graphs/base/static_sparse_backend.pyx:        if cg.directed:\nsrc/sage/graphs/generic_graph_pyx.pyx:        self.directed = G.is_directed()\nsrc/sage/graphs/generic_graph_pyx.pyx:        if self.directed:\nsrc/sage/graphs/generic_graph_pyx.pyx:                    if is_admissible and self.directed:\nsrc/sage/graphs/generic_graph_pyx.pyx:        if self.directed:\n```",
    "created_at": "2014-02-11T15:43:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202142",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:34" align="right">Comment 34</div>


```
king@linux-etl7:~/Sage/git/sage> grep "\._directed" -R src/sage/graphs/ | grep pyx:
src/sage/graphs/base/static_sparse_backend.pyx:        self._directed = cg.directed
src/sage/graphs/base/static_sparse_backend.pyx:        if self._directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if self._directed:
src/sage/graphs/base/sparse_graph.pyx:        self._directed = directed
src/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)
src/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)
src/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)
src/sage/graphs/base/sparse_graph.pyx:                      self._cg, self._cg_rev, self._directed)
src/sage/graphs/base/dense_graph.pyx:        self._directed = directed
src/sage/graphs/base/c_graph.pyx:        if self._directed:
src/sage/graphs/base/c_graph.pyx:                     (self._directed and
src/sage/graphs/base/c_graph.pyx:        if not self._directed:
src/sage/graphs/base/c_graph.pyx:        if not self._directed:
src/sage/graphs/base/c_graph.pyx:        if not self.graph._directed:
src/sage/graphs/graph_decompositions/vertex_separation.pyx:        if G._directed:
```
versus

```
king@linux-etl7:~/Sage/git/sage> grep "\.directed" -R src/sage/graphs/ | grep pyx:
src/sage/graphs/base/static_sparse_backend.pyx:        self.directed = G.is_directed()
src/sage/graphs/base/static_sparse_backend.pyx:        if self.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if not self.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        self._directed = cg.directed
src/sage/graphs/base/static_sparse_backend.pyx:        if not cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:            if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if cg.directed:
src/sage/graphs/base/static_sparse_backend.pyx:        if cg.directed:
src/sage/graphs/generic_graph_pyx.pyx:        self.directed = G.is_directed()
src/sage/graphs/generic_graph_pyx.pyx:        if self.directed:
src/sage/graphs/generic_graph_pyx.pyx:                    if is_admissible and self.directed:
src/sage/graphs/generic_graph_pyx.pyx:        if self.directed:
```



---

archive/issue_comments_202143.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nPS: There are numerous hits for both directed and _directed in .py files, too.",
    "created_at": "2014-02-11T15:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202143",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:35" align="right">Comment 35</div>

PS: There are numerous hits for both directed and _directed in .py files, too.



---

archive/issue_comments_202144.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nOh. Looks like the CGraph do not insist on having a `_directed` or a `directed`. So I can change the instances of `static_sparse_backend` if you like. I don't think that those of SubgraphSearch matter to you, do they ? Those are the ones you find in `generic_graph_pyx.pyx`.",
    "created_at": "2014-02-11T15:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202144",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:36" align="right">Comment 36</div>

Oh. Looks like the CGraph do not insist on having a `_directed` or a `directed`. So I can change the instances of `static_sparse_backend` if you like. I don't think that those of SubgraphSearch matter to you, do they ? Those are the ones you find in `generic_graph_pyx.pyx`.



---

archive/issue_comments_202145.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nI updated the branch with a new commit. I set it as this ticket's branch so that you can see it more easily. The only `.directed` that remain are those of SubgraphSearch in `generic_graph_pyx.pyx`.\n\nNathann\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9796a13f5f8304f42cebc07728bcefb32c83e0a\">e9796a1</a></td><td><code>trac #15810: Immutable directed graphs should know that they are directed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6\">d6ca86c</a></td><td><code>trac #15810: The graph data structures may have a ._directed but no .directed</code></td></tr></table>\n",
    "created_at": "2014-02-11T15:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202145",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:37" align="right">Comment 37</div>

I updated the branch with a new commit. I set it as this ticket's branch so that you can see it more easily. The only `.directed` that remain are those of SubgraphSearch in `generic_graph_pyx.pyx`.

Nathann

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9796a13f5f8304f42cebc07728bcefb32c83e0a">e9796a1</a></td><td><code>trac #15810: Immutable directed graphs should know that they are directed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6">d6ca86c</a></td><td><code>trac #15810: The graph data structures may have a ._directed but no .directed</code></td></tr></table>




---

archive/issue_comments_202146.json:
```json
{
    "body": "Changed branch from **[u/SimonKing/ticket/15810](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15810)** to **[public/15810](https://github.com/sagemath/sagetrac-mirror/tree/public/15810)**",
    "created_at": "2014-02-11T15:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202146",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[u/SimonKing/ticket/15810](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15810)** to **[public/15810](https://github.com/sagemath/sagetrac-mirror/tree/public/15810)**



---

archive/issue_comments_202147.json:
```json
{
    "body": "Changed commit from **[1382f4f](https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af)** to **[d6ca86c](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)**",
    "created_at": "2014-02-11T15:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202147",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[1382f4f](https://github.com/sagemath/sagetrac-mirror/commit/1382f4f40bea6fbf32af4f0f745aa2f645a235af)** to **[d6ca86c](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)**



---

archive/issue_comments_202148.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nCould you elaborate why you *remove* one line in the following chunks, rather than replace `.directed` by `._directed`?\n\n```diff\ndiff --git a/src/sage/graphs/digraph.py b/src/sage/graphs/digraph.py\nindex f869bb0..d95e96e 100644\n--- a/src/sage/graphs/digraph.py\n+++ b/src/sage/graphs/digraph.py\n@@ -919,7 +919,6 @@ class DiGraph(GenericGraph):\n                 self._weighted = weighted\n                 self.allow_loops(loops, check=False)\n                 self.allow_multiple_edges(multiedges, check=False)\n-            self._backend.directed = True\n         else:\n             raise NotImplementedError(\"Supported implementations: networkx, c_graph.\")\n \ndiff --git a/src/sage/graphs/graph.py b/src/sage/graphs/graph.py\nindex a3f1dcd..4d15305 100644\n--- a/src/sage/graphs/graph.py\n+++ b/src/sage/graphs/graph.py\n@@ -1542,7 +1542,6 @@ class Graph(GenericGraph):\n                 self._weighted = weighted\n                 self.allow_loops(loops, check=False)\n                 self.allow_multiple_edges(multiedges, check=False)\n-            self._backend.directed = False\n         else:\n             raise NotImplementedError(\"Supported implementations: networkx, c_graph.\")\n```",
    "created_at": "2014-02-11T16:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202148",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:38" align="right">Comment 38</div>

Could you elaborate why you *remove* one line in the following chunks, rather than replace `.directed` by `._directed`?

```diff
diff --git a/src/sage/graphs/digraph.py b/src/sage/graphs/digraph.py
index f869bb0..d95e96e 100644
--- a/src/sage/graphs/digraph.py
+++ b/src/sage/graphs/digraph.py
@@ -919,7 +919,6 @@ class DiGraph(GenericGraph):
                 self._weighted = weighted
                 self.allow_loops(loops, check=False)
                 self.allow_multiple_edges(multiedges, check=False)
-            self._backend.directed = True
         else:
             raise NotImplementedError("Supported implementations: networkx, c_graph.")
 
diff --git a/src/sage/graphs/graph.py b/src/sage/graphs/graph.py
index a3f1dcd..4d15305 100644
--- a/src/sage/graphs/graph.py
+++ b/src/sage/graphs/graph.py
@@ -1542,7 +1542,6 @@ class Graph(GenericGraph):
                 self._weighted = weighted
                 self.allow_loops(loops, check=False)
                 self.allow_multiple_edges(multiedges, check=False)
-            self._backend.directed = False
         else:
             raise NotImplementedError("Supported implementations: networkx, c_graph.")
```



---

archive/issue_comments_202149.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nBecause several lines above those two lines, `self._backend` is created using the backend's constructor, which takes the value `True/False` as an input. \n\nAnd well, setting the value of a private variable of the backend is the backend's constructor's job. So this way, the constructors of !Graph and DiGraph do not mess with what they should not touch, the value of `_directed` is set only in the backend's constructor's code, and there is no fancy alias in the backend that is set where there should not be.\n\nNathann",
    "created_at": "2014-02-11T16:20:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202149",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:39" align="right">Comment 39</div>

Because several lines above those two lines, `self._backend` is created using the backend's constructor, which takes the value `True/False` as an input. 

And well, setting the value of a private variable of the backend is the backend's constructor's job. So this way, the constructors of !Graph and DiGraph do not mess with what they should not touch, the value of `_directed` is set only in the backend's constructor's code, and there is no fancy alias in the backend that is set where there should not be.

Nathann



---

archive/issue_comments_202150.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@nathanncohen](#comment%3A39):\n> And well, setting the value of a private variable of the backend is the backend's constructor's job. So this way, the constructors of !Graph and DiGraph do not mess with what they should not touch, the value of `_directed` is set only in the backend's constructor's code, and there is no fancy alias in the backend that is set where there should not be.\n\nOK. Then, provided tests pass, it will be positive review.",
    "created_at": "2014-02-11T16:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202150",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@nathanncohen](#comment%3A39):
> And well, setting the value of a private variable of the backend is the backend's constructor's job. So this way, the constructors of !Graph and DiGraph do not mess with what they should not touch, the value of `_directed` is set only in the backend's constructor's code, and there is no fancy alias in the backend that is set where there should not be.

OK. Then, provided tests pass, it will be positive review.



---

archive/issue_events_208257.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T20:00:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208257"
}
```



---

archive/issue_events_208258.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-02-11T20:00:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208258"
}
```



---

archive/issue_comments_202151.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nThank you, Nathann!\n\nSimon",
    "created_at": "2014-02-11T20:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202151",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:41" align="right">Comment 41</div>

Thank you, Nathann!

Simon



---

archive/issue_comments_202152.json:
```json
{
    "body": "Changed author from **Simon King** to **Nathann Cohen**",
    "created_at": "2014-02-11T20:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202152",
    "user": "https://github.com/simon-king-jena"
}
```

Changed author from **Simon King** to **Nathann Cohen**



---

archive/issue_comments_202153.json:
```json
{
    "body": "Reviewer: **Simon King**",
    "created_at": "2014-02-11T20:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202153",
    "user": "https://github.com/simon-king-jena"
}
```

Reviewer: **Simon King**



---

archive/issue_comments_202154.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nThanks for the review `:-)`\n\nNathann",
    "created_at": "2014-02-11T20:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202154",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:42" align="right">Comment 42</div>

Thanks for the review `:-)`

Nathann



---

archive/issue_comments_202155.json:
```json
{
    "body": "Changed branch from **[public/15810](https://github.com/sagemath/sagetrac-mirror/tree/public/15810)** to **[d6ca86c](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)**",
    "created_at": "2014-02-14T19:44:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15810#issuecomment-202155",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/15810](https://github.com/sagemath/sagetrac-mirror/tree/public/15810)** to **[d6ca86c](https://github.com/sagemath/sagetrac-mirror/commit/d6ca86c1d6984bc7a468b80905ddec01323cc9b6)**



---

archive/issue_events_208259.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-14T19:44:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208259"
}
```



---

archive/issue_events_208260.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "df445cb46ee38f3508cb2cb164bd8224b8bad2d6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-02-14T19:44:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15810",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15810#event-208260"
}
```
