# Issue 15550: Implement the Kirchhoff-Symanzik polynomial for graphs

archive/issues_015313.json:
```json
{
    "body": "This is a polynomial in several variables, useful in the study of Feynman diagrams.\n\nDone using a determinant (like in the matrix-tree theorem)\n\nAlso implements cycle_basis for graphs with multiple edges\n\nand add an 'output' parameter to 'cycle_basis', 'is_tree' and 'is_forest'\n\nKeywords: symanzik polynomial\n\nReviewer: Nathann Cohen\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nBranch: public/15550\n\nCommit: 197a285efe203a92c3719e35a2b730616d56f94b\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15550\n\n",
    "closed_at": "2014-01-07T04:55:35Z",
    "created_at": "2013-12-19T14:53:13Z",
    "labels": [
        "component: graph theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.1",
    "title": "Implement the Kirchhoff-Symanzik polynomial for graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15550",
    "user": "https://github.com/fchapoton"
}
```
This is a polynomial in several variables, useful in the study of Feynman diagrams.

Done using a determinant (like in the matrix-tree theorem)

Also implements cycle_basis for graphs with multiple edges

and add an 'output' parameter to 'cycle_basis', 'is_tree' and 'is_forest'

Keywords: symanzik polynomial

Reviewer: Nathann Cohen

Author: Frédéric Chapoton

Branch: public/15550

Commit: 197a285efe203a92c3719e35a2b730616d56f94b

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15550





---

archive/issue_comments_196751.json:
```json
{
    "body": "Changing type from enhancement to task.",
    "created_at": "2013-12-19T16:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196751",
    "user": "https://github.com/fchapoton"
}
```

Changing type from enhancement to task.



---

archive/issue_comments_196752.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-21T13:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196752",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_196753.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2013-12-21T13:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196753",
    "user": "https://github.com/fchapoton"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_196754.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2013-12-21T13:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196754",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_196755.json:
```json
{
    "body": "<a id='comment:4'></a>Hello Frederic !\n\nI think you could replace your \"quasitree_to_cycle\" function by a call to `Graph.is_forest(certificate=True)`. Could you also merge all these patches into one ? It would make it a bit easier to review `^^;`\n\nNathann",
    "created_at": "2013-12-25T13:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196755",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>Hello Frederic !

I think you could replace your "quasitree_to_cycle" function by a call to `Graph.is_forest(certificate=True)`. Could you also merge all these patches into one ? It would make it a bit easier to review `^^;`

Nathann



---

archive/issue_comments_196756.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-12-25T13:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196756",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_196757.json:
```json
{
    "body": "<a id='comment:6'></a>Hello Nathann,\n\nthanks for the suggestion. But `is_forest` does not work correctly on graphs with multiple edges:\n\n```\n\nsage: G=graphs.CycleGraph(6)\nsage: G.is_forest()\nFalse\nsage: G.is_forest(certificate=True)\n(False, [5, 4, 3, 2, 1, 0])\nsage: G = Graph([(1,2,'a'),(1,2,'b')])\nsage: G.is_forest(certificate=True)\nsage: G.is_forest()\nFalse\n```\nand moreover I need the cycle as a sequence of signed edges.",
    "created_at": "2013-12-28T20:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196757",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>Hello Nathann,

thanks for the suggestion. But `is_forest` does not work correctly on graphs with multiple edges:

```

sage: G=graphs.CycleGraph(6)
sage: G.is_forest()
False
sage: G.is_forest(certificate=True)
(False, [5, 4, 3, 2, 1, 0])
sage: G = Graph([(1,2,'a'),(1,2,'b')])
sage: G.is_forest(certificate=True)
sage: G.is_forest()
False
```
and moreover I need the cycle as a sequence of signed edges.



---

archive/issue_comments_196758.json:
```json
{
    "body": "<a id='comment:7'></a>> thanks for the suggestion. But `is_forest` does not work correctly on graphs with multiple edges:\n\n\nOh. Well, multiple edges actually make no difference, unless you have a 2-cycle. In which case that is your certificate. I think that fixing that is still better than re-implementing it with a weird name.\n\n> and moreover I need the cycle as a sequence of signed edges.\n\n\nWhat does that mean ? Can't that be obtained with the certificate of `is_forest` ?\n\nNathann",
    "created_at": "2013-12-28T21:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196758",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>> thanks for the suggestion. But `is_forest` does not work correctly on graphs with multiple edges:


Oh. Well, multiple edges actually make no difference, unless you have a 2-cycle. In which case that is your certificate. I think that fixing that is still better than re-implementing it with a weird name.

> and moreover I need the cycle as a sequence of signed edges.


What does that mean ? Can't that be obtained with the certificate of `is_forest` ?

Nathann



---

archive/issue_comments_196759.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-29T20:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196759",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196760.json:
```json
{
    "body": "<a id='comment:9'></a>Hello Nathann,\n\nI have now made good use of the `is_tree` function.\n\nWould you prefer if I put my auxiliary function inside the new method ? I do not see how to avoid it completely. I need to choose an arbitray orientation of the graph, and for this I am using the way the edges are given by a pair (i,j). Then I need to know how every cycle is oriented, some arrows being in the wrong direction.\n\nIs this really necessary to smash all my commits (not patches) into one ? I would prefer not to.",
    "created_at": "2013-12-30T17:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196760",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>Hello Nathann,

I have now made good use of the `is_tree` function.

Would you prefer if I put my auxiliary function inside the new method ? I do not see how to avoid it completely. I need to choose an arbitray orientation of the graph, and for this I am using the way the edges are given by a pair (i,j). Then I need to know how every cycle is oriented, some arrows being in the wrong direction.

Is this really necessary to smash all my commits (not patches) into one ? I would prefer not to.



---

archive/issue_comments_196761.json:
```json
{
    "body": "<a id='comment:10'></a>Hellooooooooo !\n\n> Would you prefer if I put my auxiliary function inside the new method ? \n\n\nYour auxiliary method will not be in your final patch, that's for sure, because even if it were actually useful for your code it has no general use and has nothing to do has a Graph function. At the very least it should be made private. This being said, you still haven't explained to me what exactly this function does (neither is it explained in the function's docstring), so I do not understand how to help you remove it yet. Please tell me what exactly it does. Right now its docstring reads \"return the only cycle of a graph with one cycle\", and that's exactly what `is_forest` does for you, thus something is missing.\n\n> I do not see how to avoid it completely. I need to choose an arbitray orientation of the graph, and for this I am using the way the edges are given by a pair (i,j). Then I need to know how every cycle is oriented, some arrows being in the wrong direction.\n\n\nI do not know what you need this orientation for, but using the orientation given by `edges()` can be tricky. There is absolutely no certainty that the orientation of the edges given by `edges()` is consistent with the one given by `edges_incident()`.\n\n> Is this really necessary to smash all my commits (not patches) into one ? I would prefer not to.\n\n\nIt would make your patch clearer. There are 5 commits in your patch right now and most of what one does is undone in the other. This being said merging commits is *very easy* to do in git : you have to \"rebase\" your ticket's branch upon \"develop\" using the '-i' flag, for \"interactive\". In only one command you can merge commits together (I think 'git' uses the keyword 'meld' instead). That's actually quite cool `:-P`\n\nNathann",
    "created_at": "2013-12-30T22:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196761",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>Hellooooooooo !

> Would you prefer if I put my auxiliary function inside the new method ? 


Your auxiliary method will not be in your final patch, that's for sure, because even if it were actually useful for your code it has no general use and has nothing to do has a Graph function. At the very least it should be made private. This being said, you still haven't explained to me what exactly this function does (neither is it explained in the function's docstring), so I do not understand how to help you remove it yet. Please tell me what exactly it does. Right now its docstring reads "return the only cycle of a graph with one cycle", and that's exactly what `is_forest` does for you, thus something is missing.

> I do not see how to avoid it completely. I need to choose an arbitray orientation of the graph, and for this I am using the way the edges are given by a pair (i,j). Then I need to know how every cycle is oriented, some arrows being in the wrong direction.


I do not know what you need this orientation for, but using the orientation given by `edges()` can be tricky. There is absolutely no certainty that the orientation of the edges given by `edges()` is consistent with the one given by `edges_incident()`.

> Is this really necessary to smash all my commits (not patches) into one ? I would prefer not to.


It would make your patch clearer. There are 5 commits in your patch right now and most of what one does is undone in the other. This being said merging commits is *very easy* to do in git : you have to "rebase" your ticket's branch upon "develop" using the '-i' flag, for "interactive". In only one command you can merge commits together (I think 'git' uses the keyword 'meld' instead). That's actually quite cool `:-P`

Nathann



---

archive/issue_comments_196762.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-01T17:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196762",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196763.json:
```json
{
    "body": "<a id='comment:12'></a>Here is a smashed thing. And hopefully simpler, too.",
    "created_at": "2014-01-01T17:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196763",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>Here is a smashed thing. And hopefully simpler, too.



---

archive/issue_comments_196764.json:
```json
{
    "body": "<a id='comment:13'></a>(please set the ticket back to `needs_review` when it needs a review. Otherwise it does not appear in the list of tickets needing a review and nobody reads them. And I 'lost' tickets several times like that, finding them again years later, just because they were still in `needs_work` `:-P`)\n\nNathann",
    "created_at": "2014-01-02T14:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196764",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>(please set the ticket back to `needs_review` when it needs a review. Otherwise it does not appear in the list of tickets needing a review and nobody reads them. And I 'lost' tickets several times like that, finding them again years later, just because they were still in `needs_work` `:-P`)

Nathann



---

archive/issue_comments_196765.json:
```json
{
    "body": "<a id='comment:14'></a>Yes, sorry.\n\nI have made the auxiliary method into a private method, but it is now very small, so it could be put inside the main function. Tell me what you prefer and I will change accordingly.",
    "created_at": "2014-01-02T15:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196765",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>Yes, sorry.

I have made the auxiliary method into a private method, but it is now very small, so it could be put inside the main function. Tell me what you prefer and I will change accordingly.



---

archive/issue_comments_196766.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-01-02T15:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196766",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_196767.json:
```json
{
    "body": "<a id='comment:15'></a>Well, if it is 10 lines long I think it would be better to move it inside of your main function. But it would be very nice if you could explain what exactly it does, because I have to understand the code if I want to review it `^^;`\n\nNathann",
    "created_at": "2014-01-02T16:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196767",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>Well, if it is 10 lines long I think it would be better to move it inside of your main function. But it would be very nice if you could explain what exactly it does, because I have to understand the code if I want to review it `^^;`

Nathann



---

archive/issue_comments_196768.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-02T18:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196768",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196769.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-02T19:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196769",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196770.json:
```json
{
    "body": "<a id='comment:19'></a>I am still trying to understand this code (and it would clearly help if you could add comments to it). You are buildng a cycle basis for a graph, and we have a function named `Graph.cycle_basis`. The problem is that it does not work for graphs with multiedges. Shouldn't your code move there ? If there are differences in speed, it would be cool to keep the two implementations available.\n\nNathann",
    "created_at": "2014-01-03T09:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196770",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>I am still trying to understand this code (and it would clearly help if you could add comments to it). You are buildng a cycle basis for a graph, and we have a function named `Graph.cycle_basis`. The problem is that it does not work for graphs with multiedges. Shouldn't your code move there ? If there are differences in speed, it would be cool to keep the two implementations available.

Nathann



---

archive/issue_comments_196771.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-01-03T09:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196771",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_196772.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-03T10:58:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196772",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196773.json:
```json
{
    "body": "<a id='comment:21'></a>I have now added some code to cycle_basis\n\nBut one cannot reconstruct a cycle from its support in a graph with multiple edges, so I cannot use that, unless I change the output of cycle_basis to a list of edges.\n\nWhen you tell me you want more explanations, do you mean\n* here in trac\n* as comments in the code\n* in the doc of the code ?",
    "created_at": "2014-01-03T11:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196773",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>I have now added some code to cycle_basis

But one cannot reconstruct a cycle from its support in a graph with multiple edges, so I cannot use that, unless I change the output of cycle_basis to a list of edges.

When you tell me you want more explanations, do you mean
* here in trac
* as comments in the code
* in the doc of the code ?



---

archive/issue_comments_196774.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-01-03T11:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196774",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_196775.json:
```json
{
    "body": "<a id='comment:23'></a>Did you know that:\n\nhttp://git.sagemath.org/sage.git/diff/?h=u/chapoton/15550&id2=develop\n\nThis is a way to see all the changes at once.. No need to smash commits..",
    "created_at": "2014-01-03T11:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196775",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:23'></a>Did you know that:

http://git.sagemath.org/sage.git/diff/?h=u/chapoton/15550&id2=develop

This is a way to see all the changes at once.. No need to smash commits..



---

archive/issue_comments_196776.json:
```json
{
    "body": "<a id='comment:24'></a>Hello !\n\n> I have now added some code to cycle_basis\n> \n> But one cannot reconstruct a cycle from its support in a graph with multiple edges, so I cannot use that, unless I change the output of cycle_basis to a list of edges.\n\n\nWell, the best way would be to add a flag to `cycle_basis` to ask precisely this : how should the output be given ? While saying that of course the \"vertex\" output cannot be used if the graph has multiple edges.\n\n> When you tell me you want more explanations, do you mean\n> * here in trac\n> * as comments in the code\n> * in the doc of the code ?\n\n\nI would personally like it very much if you could answer the questions I ask here with real words and not only with git commits. Then, the problem is the following : the code is clearly not documented properly, as I cannot understand what it does, and I can swear this review costed me a lot of time already.\n\nI would like to understand clearly the orientation that you pick, and all steps that you use to build the matrix, then to compute the coefficients. Besides, this should be written somewhere, in the docstring or as comments in the code.\n\nNathann",
    "created_at": "2014-01-03T11:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196776",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>Hello !

> I have now added some code to cycle_basis
> 
> But one cannot reconstruct a cycle from its support in a graph with multiple edges, so I cannot use that, unless I change the output of cycle_basis to a list of edges.


Well, the best way would be to add a flag to `cycle_basis` to ask precisely this : how should the output be given ? While saying that of course the "vertex" output cannot be used if the graph has multiple edges.

> When you tell me you want more explanations, do you mean
> * here in trac
> * as comments in the code
> * in the doc of the code ?


I would personally like it very much if you could answer the questions I ask here with real words and not only with git commits. Then, the problem is the following : the code is clearly not documented properly, as I cannot understand what it does, and I can swear this review costed me a lot of time already.

I would like to understand clearly the orientation that you pick, and all steps that you use to build the matrix, then to compute the coefficients. Besides, this should be written somewhere, in the docstring or as comments in the code.

Nathann



---

archive/issue_comments_196777.json:
```json
{
    "body": "<a id='comment:25'></a>> Did you know that:\n> \n> http://git.sagemath.org/sage.git/diff/?h=u/chapoton/15550&id2=develop\n> \n> This is a way to see all the changes at once.. No need to smash commits..\n\n\nI knew. Git can also be used directly to output such things. But it does not help at all either when every commits contradicts the previous ones. Several commits can be very useful when each of the commit does some meaningful task, that actually helps the review. Commiting the mistakes one makes while writing the patch does not.\n\nI swear, I write and review things like #15623 these days, which contain far too many commits already without showing all mistakes done during the development `:-P`\n\nNathann",
    "created_at": "2014-01-03T11:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196777",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:25'></a>> Did you know that:
> 
> http://git.sagemath.org/sage.git/diff/?h=u/chapoton/15550&id2=develop
> 
> This is a way to see all the changes at once.. No need to smash commits..


I knew. Git can also be used directly to output such things. But it does not help at all either when every commits contradicts the previous ones. Several commits can be very useful when each of the commit does some meaningful task, that actually helps the review. Commiting the mistakes one makes while writing the patch does not.

I swear, I write and review things like #15623 these days, which contain far too many commits already without showing all mistakes done during the development `:-P`

Nathann



---

archive/issue_comments_196778.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-03T14:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196779.json:
```json
{
    "body": "<a id='comment:27'></a>Hello\n\nThank you Nathann for spending time on this, and sorry for not answering well-enough.\n\nI have now added a 'output' keyword to 'cycle_basis', 'is_tree' and 'is_forest'.\n\nStill I am not satisfied, because when output is set to 'edge', the cycle is not returned as a list of triples (vertex,vertex,label), but as a list of pairs [vertex,vertex]. It cannot therefore be recognized as an edge, i.e does not belongs to G.edges().\n\nI will try later to correct that.",
    "created_at": "2014-01-03T14:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196779",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>Hello

Thank you Nathann for spending time on this, and sorry for not answering well-enough.

I have now added a 'output' keyword to 'cycle_basis', 'is_tree' and 'is_forest'.

Still I am not satisfied, because when output is set to 'edge', the cycle is not returned as a list of triples (vertex,vertex,label), but as a list of pairs [vertex,vertex]. It cannot therefore be recognized as an edge, i.e does not belongs to G.edges().

I will try later to correct that.



---

archive/issue_comments_196780.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-01-03T14:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196780",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_196781.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-03T14:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196781",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196782.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-03T17:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196782",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196783.json:
```json
{
    "body": "<a id='comment:30'></a>Rewriting history again, here is a working version.",
    "created_at": "2014-01-03T17:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196783",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:30'></a>Rewriting history again, here is a working version.



---

archive/issue_comments_196784.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-01-03T17:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196784",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_196785.json:
```json
{
    "body": "<a id='comment:31'></a>Wow. Very good patch, thank you very much for this work `:-)`\n\nAll I could add are small modifications to the doc. I added one commit to your branch. If you agree with that, you can set the ticket to `positive_review`.\n\nHappy new yeaaaaaaaaar !\n\nNathann",
    "created_at": "2014-01-03T19:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196785",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:31'></a>Wow. Very good patch, thank you very much for this work `:-)`

All I could add are small modifications to the doc. I added one commit to your branch. If you agree with that, you can set the ticket to `positive_review`.

Happy new yeaaaaaaaaar !

Nathann



---

archive/issue_comments_196786.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-03T19:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196786",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196787.json:
```json
{
    "body": "<a id='comment:33'></a>Oops, soorry I forgot. I noticed that the `cycle_basis` function does not work for disconnected graphs. I'll fix that in a second.\n\nNathann",
    "created_at": "2014-01-03T19:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196787",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:33'></a>Oops, soorry I forgot. I noticed that the `cycle_basis` function does not work for disconnected graphs. I'll fix that in a second.

Nathann



---

archive/issue_comments_196788.json:
```json
{
    "body": "<a id='comment:34'></a>Hmmmmm... It was actually slightly more complicated than that. This, and supper in between.\n\nTechnically : \n* networkx refuses to work on a graph that allows multiple edges, even if it does not contain any\n* `cycle_basis` now handles disconnected graphs\n\nAaaaaaaaand I found a bug with those cursed multiple edges again :\n\n```\nsage: g = Graph({0:{1:[1,1]}}, multiedges=True)\nsage: g.edges()\n[(0, 1, 1), (0, 1, 1)]\nsage: (2*g).edges()\n[(0, 1, 1), (2, 3, 1)]\n```\n\nI hate these things...\n\nAnyway, branch updated. Tell me what you think !\n\nNathann",
    "created_at": "2014-01-03T20:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196788",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:34'></a>Hmmmmm... It was actually slightly more complicated than that. This, and supper in between.

Technically : 
* networkx refuses to work on a graph that allows multiple edges, even if it does not contain any
* `cycle_basis` now handles disconnected graphs

Aaaaaaaaand I found a bug with those cursed multiple edges again :

```
sage: g = Graph({0:{1:[1,1]}}, multiedges=True)
sage: g.edges()
[(0, 1, 1), (0, 1, 1)]
sage: (2*g).edges()
[(0, 1, 1), (2, 3, 1)]
```

I hate these things...

Anyway, branch updated. Tell me what you think !

Nathann



---

archive/issue_comments_196789.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-03T20:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196789",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196790.json:
```json
{
    "body": "<a id='comment:36'></a>Happy new year to you too, and thanks for the review !\n\nReview patch looks good to me. If you agree, please set to positive review.",
    "created_at": "2014-01-03T20:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196790",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:36'></a>Happy new year to you too, and thanks for the review !

Review patch looks good to me. If you agree, please set to positive review.



---

archive/issue_comments_196791.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-03T20:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196791",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_196792.json:
```json
{
    "body": "<a id='comment:38'></a>Doesn't merge, please resolve.",
    "created_at": "2014-01-05T00:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196792",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>Doesn't merge, please resolve.



---

archive/issue_comments_196793.json:
```json
{
    "body": "<a id='comment:39'></a>Hmmmm... It merges with 6.1.beta3, so it must be conflicting with some other patch you already merged.\n\nNathann",
    "created_at": "2014-01-05T08:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196793",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:39'></a>Hmmmm... It merges with 6.1.beta3, so it must be conflicting with some other patch you already merged.

Nathann



---

archive/issue_comments_196794.json:
```json
{
    "body": "<a id='comment:40'></a>Conflicts with beta4",
    "created_at": "2014-01-05T18:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196794",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>Conflicts with beta4



---

archive/issue_comments_196795.json:
```json
{
    "body": "<a id='comment:41'></a>Rebased ! (though there was no automatic git message)\n\nNathann\n\n---\nNew commits:",
    "created_at": "2014-01-05T18:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196795",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:41'></a>Rebased ! (though there was no automatic git message)

Nathann

---
New commits:



---

archive/issue_comments_196796.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-01-07T04:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15550#issuecomment-196796",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_045444.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-07T04:55:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15550",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15550#event-45444"
}
```
