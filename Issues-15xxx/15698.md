# Issue 15698: conversion from polynomial fraction to its power series expansion

archive/issues_015461.json:
```json
{
    "body": "Original description was:\n\nThe following behaviour is not implemented, example:\n\n```\n  sage: R.<t> = QQ[]; A=1/(1-t)\n  sage: A.expand(5)\n  1+t+t^2+t^3+t^4+t^5+O(t^6)\n  sage: A+O(t^6)\n  1+t+t^2+t^3+t^4+t^5+O(t^6)\n```\nAdd a parameter to specify the respective series variable (for derivation) then multivariate polynomial fractions can be handled. Result type being a power series. The pari function Ser() implements the same behaviour. Note: I would like to implement this.\n\nAssignee: @rwst\n\nKeywords: power series, expansion, fraction\n\nBranch/Commit: 25f819f748f64634177097da20cc9bbf1c2a68df\n\nReviewer: Marc Mezzarobba, Ralf Stephan\n\nAuthor: Ralf Stephan, Marc Mezzarobba\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15698\n\n",
    "closed_at": "2014-03-05T14:18:39Z",
    "created_at": "2014-01-20T11:00:32Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "conversion from polynomial fraction to its power series expansion",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15698",
    "user": "https://github.com/rwst"
}
```
Original description was:

The following behaviour is not implemented, example:

```
  sage: R.<t> = QQ[]; A=1/(1-t)
  sage: A.expand(5)
  1+t+t^2+t^3+t^4+t^5+O(t^6)
  sage: A+O(t^6)
  1+t+t^2+t^3+t^4+t^5+O(t^6)
```
Add a parameter to specify the respective series variable (for derivation) then multivariate polynomial fractions can be handled. Result type being a power series. The pari function Ser() implements the same behaviour. Note: I would like to implement this.

Assignee: @rwst

Keywords: power series, expansion, fraction

Branch/Commit: 25f819f748f64634177097da20cc9bbf1c2a68df

Reviewer: Marc Mezzarobba, Ralf Stephan

Author: Ralf Stephan, Marc Mezzarobba

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15698





---

archive/issue_comments_252648.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,9 +7,7 @@\n   sage: A+O(t^6)\n   1+t+t^2+t^3+t^4+t^5+O(t^6)\n ```\n-Result type being a power series. The pari function Ser() implements the same behaviour. Note: I would like to implement this.\n-\n-Keywords: series expansion fraction ogf\n+Add a parameter to specify the respective series variable (for derivation) then multivariate polynomial fractions can be handled. Result type being a power series. The pari function Ser() implements the same behaviour. Note: I would like to implement this.\n \n Comment: 1\n \n``````\n",
    "created_at": "2014-01-20T15:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252648",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,9 +7,7 @@
   sage: A+O(t^6)
   1+t+t^2+t^3+t^4+t^5+O(t^6)
 ```
-Result type being a power series. The pari function Ser() implements the same behaviour. Note: I would like to implement this.
-
-Keywords: series expansion fraction ogf
+Add a parameter to specify the respective series variable (for derivation) then multivariate polynomial fractions can be handled. Result type being a power series. The pari function Ser() implements the same behaviour. Note: I would like to implement this.
 
 Comment: 1
 
``````




---

archive/issue_comments_252649.json:
```json
{
    "body": "<a id='comment:2'></a>The \"canonical\" syntax for this kind of conversion would be\n\n```\nsage: S = QQ[['t']]  # construct power series ring\nsage: S(A)           # convert A into it, using default precision\nsage: S(A, prec=6)   # or using specified precision\n```\nHowever, the last two lines currently fail with\n\n```\nTypeError: denominator must be a unit\n```\nThe following does work:\n\n```\nsage: L=S.laurent_series_ring()\nsage: L(A)\n1 + t + t^2 + t^3 + t^4 + t^5 + t^6 + t^7 + t^8 + t^9 + t^10 + t^11 + t^12 + t^13 + t^14 + t^15 + t^16 + t^17 + t^18 + t^19 + O(t^20)\n```\nUnfortunately, this does not currently accept a precision argument.\n\nI think the easiest solution for `S(A)` is to fix `PowerSeriesRing._element_constructor_()` to accept rational functions.",
    "created_at": "2014-01-22T17:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252649",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:2'></a>The "canonical" syntax for this kind of conversion would be

```
sage: S = QQ[['t']]  # construct power series ring
sage: S(A)           # convert A into it, using default precision
sage: S(A, prec=6)   # or using specified precision
```
However, the last two lines currently fail with

```
TypeError: denominator must be a unit
```
The following does work:

```
sage: L=S.laurent_series_ring()
sage: L(A)
1 + t + t^2 + t^3 + t^4 + t^5 + t^6 + t^7 + t^8 + t^9 + t^10 + t^11 + t^12 + t^13 + t^14 + t^15 + t^16 + t^17 + t^18 + t^19 + O(t^20)
```
Unfortunately, this does not currently accept a precision argument.

I think the easiest solution for `S(A)` is to fix `PowerSeriesRing._element_constructor_()` to accept rational functions.



---

archive/issue_comments_252650.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/ticket/15698\"",
    "created_at": "2014-01-23T08:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252650",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/ticket/15698"



---

archive/issue_comments_252651.json:
```json
{
    "body": "Changing commit from \"\" to \"307871686f1f8be1ffe7ed0169b9bfa550878aef\"",
    "created_at": "2014-01-23T08:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "307871686f1f8be1ffe7ed0169b9bfa550878aef"



---

archive/issue_comments_252652.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-23T08:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252653.json:
```json
{
    "body": "<a id='comment:5'></a>Why is the first commit (creation of branch plus first patch) not viewable?\n\nAnyway, pbruin's example works now. `A.expand()` is then no longer necessary. The only thing that still does not work is addition of power series to fraction, where coercion is needed. I'll leave that for now and ask for your review.",
    "created_at": "2014-01-23T08:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252653",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>Why is the first commit (creation of branch plus first patch) not viewable?

Anyway, pbruin's example works now. `A.expand()` is then no longer necessary. The only thing that still does not work is addition of power series to fraction, where coercion is needed. I'll leave that for now and ask for your review.



---

archive/issue_comments_252654.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-23T08:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252654",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_252655.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-23T08:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252655",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252656.json:
```json
{
    "body": "Changing commit from \"307871686f1f8be1ffe7ed0169b9bfa550878aef\" to \"ae77b79a1bcd0cb1f69b5b5219814b9d9ccad028\"",
    "created_at": "2014-01-23T08:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252656",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "307871686f1f8be1ffe7ed0169b9bfa550878aef" to "ae77b79a1bcd0cb1f69b5b5219814b9d9ccad028"



---

archive/issue_comments_252657.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-01-24T07:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252657",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_252658.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-01-24T07:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252658",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_252659.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-01-24T07:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252659",
    "user": "https://github.com/rwst"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_252660.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,15 @@\n+Original description was:\n \n+The following behaviour is not implemented, example:\n+\n+```\n+  sage: R.<t> = QQ[]; A=1/(1-t)\n+  sage: A.expand(5)\n+  1+t+t^2+t^3+t^4+t^5+O(t^6)\n+  sage: A+O(t^6)\n+  1+t+t^2+t^3+t^4+t^5+O(t^6)\n+```\n+Add a parameter to specify the respective series variable (for derivation) then multivariate polynomial fractions can be handled. Result type being a power series. The pari function Ser() implements the same behaviour. Note: I would like to implement this.\n \n Comment: 1\n \n``````\n",
    "created_at": "2014-01-25T07:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252660",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,15 @@
+Original description was:
 
+The following behaviour is not implemented, example:
+
+```
+  sage: R.<t> = QQ[]; A=1/(1-t)
+  sage: A.expand(5)
+  1+t+t^2+t^3+t^4+t^5+O(t^6)
+  sage: A+O(t^6)
+  1+t+t^2+t^3+t^4+t^5+O(t^6)
+```
+Add a parameter to specify the respective series variable (for derivation) then multivariate polynomial fractions can be handled. Result type being a power series. The pari function Ser() implements the same behaviour. Note: I would like to implement this.
 
 Comment: 1
 
``````




---

archive/issue_comments_252661.json:
```json
{
    "body": "<a id='comment:12'></a>Shouldn't the following example throw an error?\n\n```\nsage: R.<x> = QQ[]\nsage: S = R.completion(x)\nsage: S(1/x)\nx^-1\n```",
    "created_at": "2014-01-28T19:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252661",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:12'></a>Shouldn't the following example throw an error?

```
sage: R.<x> = QQ[]
sage: S = R.completion(x)
sage: S(1/x)
x^-1
```



---

archive/issue_comments_252662.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-01-28T19:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252662",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_252663.json:
```json
{
    "body": "Changing commit from \"ae77b79a1bcd0cb1f69b5b5219814b9d9ccad028\" to \"58396dea4393b297b4c3d549156e010915eaaa33\"",
    "created_at": "2014-01-29T07:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ae77b79a1bcd0cb1f69b5b5219814b9d9ccad028" to "58396dea4393b297b4c3d549156e010915eaaa33"



---

archive/issue_comments_252664.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-29T07:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252665.json:
```json
{
    "body": "Changing keywords from \"series expansion fraction ogf\" to \"power series, expansion, fraction\".",
    "created_at": "2014-01-29T07:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252665",
    "user": "https://github.com/rwst"
}
```

Changing keywords from "series expansion fraction ogf" to "power series, expansion, fraction".



---

archive/issue_comments_252666.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-01-29T07:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252666",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_252667.json:
```json
{
    "body": "Changing commit from \"58396dea4393b297b4c3d549156e010915eaaa33\" to \"7913b6f9951e051e7f53e825e0e6d2de95af3730\"",
    "created_at": "2014-01-30T15:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252667",
    "user": "https://github.com/mezzarobba"
}
```

Changing commit from "58396dea4393b297b4c3d549156e010915eaaa33" to "7913b6f9951e051e7f53e825e0e6d2de95af3730"



---

archive/issue_comments_252668.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Marc Mezzarobba\"",
    "created_at": "2014-01-30T15:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252668",
    "user": "https://github.com/mezzarobba"
}
```

Changing reviewer from "" to "Marc Mezzarobba"



---

archive/issue_comments_252669.json:
```json
{
    "body": "Changing branch from \"u/rws/ticket/15698\" to \"u/mmezzarobba/15698-series_of_ratpoly\"",
    "created_at": "2014-01-30T15:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252669",
    "user": "https://github.com/mezzarobba"
}
```

Changing branch from "u/rws/ticket/15698" to "u/mmezzarobba/15698-series_of_ratpoly"



---

archive/issue_comments_252670.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-30T15:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252670",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_252671.json:
```json
{
    "body": "<a id='comment:15'></a>Ok, LGTM. I took the liberty of squashing your three patches and rebasing the whole on top of `develop`; please protest if you disagree.\n\nI had a doubt about the fact of computing the quotient (possibly as a Laurent series) in all cases and then checking that it was in fact a power series, but at least it helps keeping the logic that decides whether the quotient fo two power series is a power series in a single place. \n\n---\nNew commits:",
    "created_at": "2014-01-30T15:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252671",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:15'></a>Ok, LGTM. I took the liberty of squashing your three patches and rebasing the whole on top of `develop`; please protest if you disagree.

I had a doubt about the fact of computing the quotient (possibly as a Laurent series) in all cases and then checking that it was in fact a power series, but at least it helps keeping the logic that decides whether the quotient fo two power series is a power series in a single place. 

---
New commits:



---

archive/issue_events_046072.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15698#event-46072"
}
```



---

archive/issue_comments_252672.json:
```json
{
    "body": "Changing author from \"\" to \"rws, mmezzarobba\"",
    "created_at": "2014-01-31T04:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252672",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "rws, mmezzarobba"



---

archive/issue_comments_252673.json:
```json
{
    "body": "<a id='comment:18'></a>Please fill in real names under authors.",
    "created_at": "2014-02-08T14:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252673",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>Please fill in real names under authors.



---

archive/issue_comments_252674.json:
```json
{
    "body": "Changing author from \"rws, mmezzarobba\" to \"Ralf Stephan\"",
    "created_at": "2014-02-08T14:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252674",
    "user": "https://github.com/mezzarobba"
}
```

Changing author from "rws, mmezzarobba" to "Ralf Stephan"



---

archive/issue_comments_252675.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 vbraun]:\n> Please fill in real names under authors.\n\n\nDone. I also removed myself since I only reorganized the patches without changing the code at all.",
    "created_at": "2014-02-08T14:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252675",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:19'></a>Replying to [comment:18 vbraun]:
> Please fill in real names under authors.


Done. I also removed myself since I only reorganized the patches without changing the code at all.



---

archive/issue_comments_252676.json:
```json
{
    "body": "<a id='comment:20'></a>doctests fail with \n\n```\nsage -t --long src/sage/rings/power_series_poly.pyx\n**********************************************************************\nFile \"src/sage/rings/power_series_poly.pyx\", line 987, in sage.rings.power_series_poly.PowerSeries_poly.__richcmp__.reversion\nFailed example:\n    g(f)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.rings.power_series_poly.PowerSeries_poly.__richcmp__.reversion[32]>\", line 1, in <module>\n        g(f)\n      File \"power_series_poly.pyx\", line 373, in sage.rings.power_series_poly.PowerSeries_poly.__call__ (sage/rings/power_series_poly.c:4951)\n      File \"polynomial_element.pyx\", line 655, in sage.rings.polynomial.polynomial_element.Polynomial.__call__ (sage/rings/polynomial/polynomial_element.c:8408)\n      File \"element.pyx\", line 1539, in sage.structure.element.RingElement.__add__ (sage/structure/element.c:13873)\n      File \"coerce.pyx\", line 782, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7311)\n      File \"coerce.pyx\", line 900, in sage.structure.coerce.CoercionModel_cache_maps.canonical_coercion (sage/structure/coerce.c:8549)\n...\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element_generic.py\", line 734, in __init__\n        Polynomial_generic_dense.__init__(self, parent, x, check, is_gen)\n      File \"polynomial_element.pyx\", line 6914, in sage.rings.polynomial.polynomial_element.Polynomial_generic_dense.__init__ (sage/rings/polynomial/polynomial_element.c:48031)\n      File \"polynomial_element.pyx\", line 209, in sage.rings.polynomial.polynomial_element.Polynomial.__init__ (sage/rings/polynomial/polynomial_element.c:4700)\n    RuntimeError: maximum recursion depth exceeded while calling a Python object\n```",
    "created_at": "2014-02-08T17:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252676",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>doctests fail with 

```
sage -t --long src/sage/rings/power_series_poly.pyx
**********************************************************************
File "src/sage/rings/power_series_poly.pyx", line 987, in sage.rings.power_series_poly.PowerSeries_poly.__richcmp__.reversion
Failed example:
    g(f)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.rings.power_series_poly.PowerSeries_poly.__richcmp__.reversion[32]>", line 1, in <module>
        g(f)
      File "power_series_poly.pyx", line 373, in sage.rings.power_series_poly.PowerSeries_poly.__call__ (sage/rings/power_series_poly.c:4951)
      File "polynomial_element.pyx", line 655, in sage.rings.polynomial.polynomial_element.Polynomial.__call__ (sage/rings/polynomial/polynomial_element.c:8408)
      File "element.pyx", line 1539, in sage.structure.element.RingElement.__add__ (sage/structure/element.c:13873)
      File "coerce.pyx", line 782, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7311)
      File "coerce.pyx", line 900, in sage.structure.coerce.CoercionModel_cache_maps.canonical_coercion (sage/structure/coerce.c:8549)
...
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element_generic.py", line 734, in __init__
        Polynomial_generic_dense.__init__(self, parent, x, check, is_gen)
      File "polynomial_element.pyx", line 6914, in sage.rings.polynomial.polynomial_element.Polynomial_generic_dense.__init__ (sage/rings/polynomial/polynomial_element.c:48031)
      File "polynomial_element.pyx", line 209, in sage.rings.polynomial.polynomial_element.Polynomial.__init__ (sage/rings/polynomial/polynomial_element.c:4700)
    RuntimeError: maximum recursion depth exceeded while calling a Python object
```



---

archive/issue_comments_252677.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-02-08T18:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252677",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_252678.json:
```json
{
    "body": "Changing commit from \"7913b6f9951e051e7f53e825e0e6d2de95af3730\" to \"4c16ab0a03bcf158df0caa956863a0a805dcdba5\"",
    "created_at": "2014-02-08T18:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7913b6f9951e051e7f53e825e0e6d2de95af3730" to "4c16ab0a03bcf158df0caa956863a0a805dcdba5"



---

archive/issue_comments_252679.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-08T18:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_252680.json:
```json
{
    "body": "Changing commit from \"4c16ab0a03bcf158df0caa956863a0a805dcdba5\" to \"50defe27ea0129109f5c42213f98bd83b6d10eb8\"",
    "created_at": "2014-02-10T19:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4c16ab0a03bcf158df0caa956863a0a805dcdba5" to "50defe27ea0129109f5c42213f98bd83b6d10eb8"



---

archive/issue_comments_252681.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-10T19:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252682.json:
```json
{
    "body": "Changing author from \"Ralf Stephan\" to \"Ralf Stephan, Marc Mezzarobba\"",
    "created_at": "2014-02-10T19:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252682",
    "user": "https://github.com/mezzarobba"
}
```

Changing author from "Ralf Stephan" to "Ralf Stephan, Marc Mezzarobba"



---

archive/issue_comments_252683.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-02-10T19:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252683",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_252684.json:
```json
{
    "body": "<a id='comment:25'></a>Patchbot says:\n\n```\nFile \"src/sage/rings/power_series_ring.py\", line 671, in sage.rings.power_series_ring.PowerSeriesRing_generic._element_constructor_\nFailed example:\n    PowerSeriesRing(PowerSeriesRing(QQ,'x'),'y')(1/(1+x), 5)\nExpected:\n    1 - x + x^2 - x^3 + x^4 + O(x^5)\nGot:\n    1 - x + x^2 - x^3 + x^4 - x^5 + x^6 - x^7 + x^8 - x^9 + x^10 - x^11 + x^12 - x^13 + x^14 - x^15 + x^16 - x^17 + x^18 - x^19 + O(x^20) + O(y^5)\n```",
    "created_at": "2014-02-17T16:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252684",
    "user": "https://github.com/rwst"
}
```

<a id='comment:25'></a>Patchbot says:

```
File "src/sage/rings/power_series_ring.py", line 671, in sage.rings.power_series_ring.PowerSeriesRing_generic._element_constructor_
Failed example:
    PowerSeriesRing(PowerSeriesRing(QQ,'x'),'y')(1/(1+x), 5)
Expected:
    1 - x + x^2 - x^3 + x^4 + O(x^5)
Got:
    1 - x + x^2 - x^3 + x^4 - x^5 + x^6 - x^7 + x^8 - x^9 + x^10 - x^11 + x^12 - x^13 + x^14 - x^15 + x^16 - x^17 + x^18 - x^19 + O(x^20) + O(y^5)
```



---

archive/issue_comments_252685.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-02-17T16:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252685",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_252686.json:
```json
{
    "body": "Changing commit from \"50defe27ea0129109f5c42213f98bd83b6d10eb8\" to \"25f819f748f64634177097da20cc9bbf1c2a68df\"",
    "created_at": "2014-03-04T13:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "50defe27ea0129109f5c42213f98bd83b6d10eb8" to "25f819f748f64634177097da20cc9bbf1c2a68df"



---

archive/issue_comments_252687.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-03-04T13:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252687",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_252688.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:25 rws]:\n> Patchbot says:\n> \n> ```\n> File \"src/sage/rings/power_series_ring.py\", line 671, in sage.rings.power_series_ring.PowerSeriesRing_generic._element_constructor_\n> Failed example:\n>     PowerSeriesRing(PowerSeriesRing(QQ,'x'),'y')(1/(1+x), 5)\n> Expected:\n>     1 - x + x^2 - x^3 + x^4 + O(x^5)\n> Got:\n>     1 - x + x^2 - x^3 + x^4 - x^5 + x^6 - x^7 + x^8 - x^9 + x^10 - x^11 + x^12 - x^13 + x^14 - x^15 + x^16 - x^17 + x^18 - x^19 + O(x^20) + O(y^5)\n> ```\n\n\nThanks. That was a stupid copy-paste mistake, I believe.\n  \n---\nNew commits:",
    "created_at": "2014-03-04T13:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252688",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:28'></a>Replying to [comment:25 rws]:
> Patchbot says:
> 
> ```
> File "src/sage/rings/power_series_ring.py", line 671, in sage.rings.power_series_ring.PowerSeriesRing_generic._element_constructor_
> Failed example:
>     PowerSeriesRing(PowerSeriesRing(QQ,'x'),'y')(1/(1+x), 5)
> Expected:
>     1 - x + x^2 - x^3 + x^4 + O(x^5)
> Got:
>     1 - x + x^2 - x^3 + x^4 - x^5 + x^6 - x^7 + x^8 - x^9 + x^10 - x^11 + x^12 - x^13 + x^14 - x^15 + x^16 - x^17 + x^18 - x^19 + O(x^20) + O(y^5)
> ```


Thanks. That was a stupid copy-paste mistake, I believe.
  
---
New commits:



---

archive/issue_comments_252689.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-03-04T13:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252689",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_252690.json:
```json
{
    "body": "<a id='comment:29'></a>Thanks, it tested --long okay in rings/ so let's roll.",
    "created_at": "2014-03-05T08:50:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252690",
    "user": "https://github.com/rwst"
}
```

<a id='comment:29'></a>Thanks, it tested --long okay in rings/ so let's roll.



---

archive/issue_comments_252691.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-05T08:50:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252691",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_252692.json:
```json
{
    "body": "Changing reviewer from \"Marc Mezzarobba\" to \"Marc Mezzarobba, Ralf Stephan\"",
    "created_at": "2014-03-05T08:50:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252692",
    "user": "https://github.com/rwst"
}
```

Changing reviewer from "Marc Mezzarobba" to "Marc Mezzarobba, Ralf Stephan"



---

archive/issue_comments_252693.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-05T14:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252693",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_252694.json:
```json
{
    "body": "Changing branch from \"u/mmezzarobba/15698-series_of_ratpoly\" to \"25f819f748f64634177097da20cc9bbf1c2a68df\"",
    "created_at": "2014-03-05T14:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15698#issuecomment-252694",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mmezzarobba/15698-series_of_ratpoly" to "25f819f748f64634177097da20cc9bbf1c2a68df"



---

archive/issue_events_046073.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-05T14:18:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15698",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15698#event-46073"
}
```
