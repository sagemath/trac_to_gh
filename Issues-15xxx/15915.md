# Issue 15915: add discrete Gaussian samplers to Sage

archive/issues_015678.json:
```json
{
    "body": "This ticket adds samplers for discrete Gaussian distributions to Sage.\n\nKeywords: sd59\n\nReviewer: Julian Rueth\n\nAuthor: Martin Albrecht\n\nBranch: a1b711fb00192eb55212644e79c38bb0adc89a61\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15915\n\n",
    "closed_at": "2014-09-10T21:45:17Z",
    "created_at": "2014-03-10T12:52:46Z",
    "labels": [
        "component: statistics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "add discrete Gaussian samplers to Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15915",
    "user": "https://github.com/malb"
}
```
This ticket adds samplers for discrete Gaussian distributions to Sage.

Keywords: sd59

Reviewer: Julian Rueth

Author: Martin Albrecht

Branch: a1b711fb00192eb55212644e79c38bb0adc89a61

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15915





---

archive/issue_comments_257466.json:
```json
{
    "body": "Changing branch from \"\" to \"u/malb/15915_discrete_gaussians\"",
    "created_at": "2014-03-10T12:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257466",
    "user": "https://github.com/malb"
}
```

Changing branch from "" to "u/malb/15915_discrete_gaussians"



---

archive/issue_comments_257467.json:
```json
{
    "body": "Changing commit from \"\" to \"8872ac1a11592048416fe2283b473cc910fd2673\"",
    "created_at": "2014-03-10T12:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257467",
    "user": "https://github.com/malb"
}
```

Changing commit from "" to "8872ac1a11592048416fe2283b473cc910fd2673"



---

archive/issue_comments_257468.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[2978c29](http://git.sagemath.org/sage.git/commit/?id=2978c2948cf72fa7dca59b2e323d4436be608b6f)|`bernoulli distributions`|\n|[14f95a6](http://git.sagemath.org/sage.git/commit/?id=14f95a686402dbddf31cd7594e5cdcd2984bba88)|`first discrete gaussian sampler implemented`|\n|[3faa956](http://git.sagemath.org/sage.git/commit/?id=3faa9567d5d6b8a4e2d87cfe2ad8a46d2b8aa7a7)|`slow uniform+online implementation of discrete gaussians added`|\n|[6bb9421](http://git.sagemath.org/sage.git/commit/?id=6bb9421b788285f9a56eaf0a016ed8d91dd5a12d)|`first version of mp versions of discrete gausians done`|\n|[a94c2dd](http://git.sagemath.org/sage.git/commit/?id=a94c2dd558a5f24cdaece7b534d6bbf24dd4bf0b)|`added double precision variants, but these are not much faster`|\n|[c6d3491](http://git.sagemath.org/sage.git/commit/?id=c6d349136e71e66e0ed89bc2221aed6f7e27c4c8)|`added ZZ.random_element(gaussian) and fixed LWE to use new sampler`|\n|[8872ac1](http://git.sagemath.org/sage.git/commit/?id=8872ac1a11592048416fe2283b473cc910fd2673)|`added parameter c for discrete Gaussians`|",
    "created_at": "2014-03-10T12:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257468",
    "user": "https://github.com/malb"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[2978c29](http://git.sagemath.org/sage.git/commit/?id=2978c2948cf72fa7dca59b2e323d4436be608b6f)|`bernoulli distributions`|
|[14f95a6](http://git.sagemath.org/sage.git/commit/?id=14f95a686402dbddf31cd7594e5cdcd2984bba88)|`first discrete gaussian sampler implemented`|
|[3faa956](http://git.sagemath.org/sage.git/commit/?id=3faa9567d5d6b8a4e2d87cfe2ad8a46d2b8aa7a7)|`slow uniform+online implementation of discrete gaussians added`|
|[6bb9421](http://git.sagemath.org/sage.git/commit/?id=6bb9421b788285f9a56eaf0a016ed8d91dd5a12d)|`first version of mp versions of discrete gausians done`|
|[a94c2dd](http://git.sagemath.org/sage.git/commit/?id=a94c2dd558a5f24cdaece7b534d6bbf24dd4bf0b)|`added double precision variants, but these are not much faster`|
|[c6d3491](http://git.sagemath.org/sage.git/commit/?id=c6d349136e71e66e0ed89bc2221aed6f7e27c4c8)|`added ZZ.random_element(gaussian) and fixed LWE to use new sampler`|
|[8872ac1](http://git.sagemath.org/sage.git/commit/?id=8872ac1a11592048416fe2283b473cc910fd2673)|`added parameter c for discrete Gaussians`|



---

archive/issue_comments_257469.json:
```json
{
    "body": "Changing commit from \"8872ac1a11592048416fe2283b473cc910fd2673\" to \"03c6dc44903a22c2db5ec9f2b7608188b4e927a3\"",
    "created_at": "2014-03-12T16:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8872ac1a11592048416fe2283b473cc910fd2673" to "03c6dc44903a22c2db5ec9f2b7608188b4e927a3"



---

archive/issue_comments_257470.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[2413fcd](http://git.sagemath.org/sage.git/commit/?id=2413fcd6a5ac2e385ea740d552bb50999d07cd89)|`discrete gaussians (mp version) support arbitrary c now`|\n|[37049f7](http://git.sagemath.org/sage.git/commit/?id=37049f76150c0ad10d862e5c9b9f2c610bd1879d)|`more careful considerations of tau + documentation`|\n|[03c6dc4](http://git.sagemath.org/sage.git/commit/?id=03c6dc44903a22c2db5ec9f2b7608188b4e927a3)|`fixed precision='dp'`|",
    "created_at": "2014-03-12T16:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[2413fcd](http://git.sagemath.org/sage.git/commit/?id=2413fcd6a5ac2e385ea740d552bb50999d07cd89)|`discrete gaussians (mp version) support arbitrary c now`|
|[37049f7](http://git.sagemath.org/sage.git/commit/?id=37049f76150c0ad10d862e5c9b9f2c610bd1879d)|`more careful considerations of tau + documentation`|
|[03c6dc4](http://git.sagemath.org/sage.git/commit/?id=03c6dc44903a22c2db5ec9f2b7608188b4e927a3)|`fixed precision='dp'`|



---

archive/issue_comments_257471.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[853cff3](http://git.sagemath.org/sage.git/commit/?id=853cff35dfb88edcc31c545c6d80eed7496d5094)|`documentation clarification`|",
    "created_at": "2014-03-14T14:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[853cff3](http://git.sagemath.org/sage.git/commit/?id=853cff35dfb88edcc31c545c6d80eed7496d5094)|`documentation clarification`|



---

archive/issue_comments_257472.json:
```json
{
    "body": "Changing commit from \"03c6dc44903a22c2db5ec9f2b7608188b4e927a3\" to \"853cff35dfb88edcc31c545c6d80eed7496d5094\"",
    "created_at": "2014-03-14T14:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "03c6dc44903a22c2db5ec9f2b7608188b4e927a3" to "853cff35dfb88edcc31c545c6d80eed7496d5094"



---

archive/issue_comments_257473.json:
```json
{
    "body": "Changing commit from \"853cff35dfb88edcc31c545c6d80eed7496d5094\" to \"1829e2163227afc96245ae35459e0797a9ad2ac3\"",
    "created_at": "2014-03-15T11:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "853cff35dfb88edcc31c545c6d80eed7496d5094" to "1829e2163227afc96245ae35459e0797a9ad2ac3"



---

archive/issue_comments_257474.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|\n|[1829e21](http://git.sagemath.org/sage.git/commit/?id=1829e2163227afc96245ae35459e0797a9ad2ac3)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|",
    "created_at": "2014-03-15T11:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
|[1829e21](http://git.sagemath.org/sage.git/commit/?id=1829e2163227afc96245ae35459e0797a9ad2ac3)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|



---

archive/issue_comments_257475.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-03-15T11:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257475",
    "user": "https://github.com/malb"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_257476.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-03-15T11:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257476",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_257477.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[6aa658c](http://git.sagemath.org/sage.git/commit/?id=6aa658c1999c3f151b15a76f61f6c404bc347143)|`DDLL23 -> DDLL13`|",
    "created_at": "2014-03-27T16:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[6aa658c](http://git.sagemath.org/sage.git/commit/?id=6aa658c1999c3f151b15a76f61f6c404bc347143)|`DDLL23 -> DDLL13`|



---

archive/issue_comments_257478.json:
```json
{
    "body": "Changing commit from \"1829e2163227afc96245ae35459e0797a9ad2ac3\" to \"6aa658c1999c3f151b15a76f61f6c404bc347143\"",
    "created_at": "2014-03-27T16:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1829e2163227afc96245ae35459e0797a9ad2ac3" to "6aa658c1999c3f151b15a76f61f6c404bc347143"



---

archive/issue_comments_257479.json:
```json
{
    "body": "<a id='comment:7'></a>\nDaniel Cabarcas looked at the C part of the code, here is what he said (and my reply which I sent via e-mail)\n\n> I looked at the code and I think it is an important improvement over what we had \n> before. I looked in detail at the uniform+table and the uniform+online versions and I > think they are correct. I don't know the details of the logtable algorithms so I \n> didn't looked at the corresponding code. I have a few comments so far:\n\n\n> The name of the library is DGS for discrete Gaussian samplers. However, all \n> implementations are over the integers, and not over a more general lattice. I was \n> wondering if it would be wiser to call it discrete Gaussian over the integers, \n> foreseeing implementations over other lattices.\n\n\nMy idea was to include the discrete Gaussian sampler over lattices (+ cosets)\ninto this implementation. Hence the name. However, for that I needed to do #15976 first. I plan to go back to the samplers over the lattices once both tickets\nare merged (and I can rely on them).\n\n> Have you consider implementing other samplers? if you are looking for speed \n> Knuth-Yao is quite impressive, and if you are looking for a time-memory tradeoff the > discrete Ziggurat algorithm is nice. Moreover, in terms of flexibility of the library > design, do you think it would be easy to add other samplers in the future which \n> require perhaps other parameters?\n\n\nI haven't thought about Knuth-Yao or Ziggurat, do you have any good references at hand? I'm happy to implement more samplers, might as well be comprehensive. I was also thinking about extending the logtable approach to arbitrary Gaussian parameters sigma.\n\nAs for the interface, I guess I should check the two algorithms you mentioned above to see what would need to be generalised. If other parameters are needed in the future I can simply add another constructor which accepts those parameters, that was my thinking anyway.\n\n> I was wondering about the source of randomness. You use standard c functions, which > \n> is probably ok for many tests. However, you know for sure how critical is the source \n> of randomness in crypto implementations. Moreover, there are huge differences in \n> speed between the standard random c function and a secure random function, thus, for \n> testing efficiency of Gaussian samplers it is crucial to have the flexibility to \n> choose your source of randomness. For this reason, in some implementation we did, we \n> had the source of randomness as a parameter. Perhaps, you'd like to consider doing \n> that.\n\n\nI currently have two versions, one using GMP's randstate and one using libc. GMP should give cryptographically strong pseudorandom numbers. In my experience the difference in running time is - as you write - pretty much down to how long it takes to sample random numbers, so I figured I offer one with a good random number generator and one with a fast which is good enough for testing.",
    "created_at": "2014-03-29T14:12:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257479",
    "user": "https://github.com/malb"
}
```

<a id='comment:7'></a>
Daniel Cabarcas looked at the C part of the code, here is what he said (and my reply which I sent via e-mail)

> I looked at the code and I think it is an important improvement over what we had 
> before. I looked in detail at the uniform+table and the uniform+online versions and I > think they are correct. I don't know the details of the logtable algorithms so I 
> didn't looked at the corresponding code. I have a few comments so far:


> The name of the library is DGS for discrete Gaussian samplers. However, all 
> implementations are over the integers, and not over a more general lattice. I was 
> wondering if it would be wiser to call it discrete Gaussian over the integers, 
> foreseeing implementations over other lattices.


My idea was to include the discrete Gaussian sampler over lattices (+ cosets)
into this implementation. Hence the name. However, for that I needed to do #15976 first. I plan to go back to the samplers over the lattices once both tickets
are merged (and I can rely on them).

> Have you consider implementing other samplers? if you are looking for speed 
> Knuth-Yao is quite impressive, and if you are looking for a time-memory tradeoff the > discrete Ziggurat algorithm is nice. Moreover, in terms of flexibility of the library > design, do you think it would be easy to add other samplers in the future which 
> require perhaps other parameters?


I haven't thought about Knuth-Yao or Ziggurat, do you have any good references at hand? I'm happy to implement more samplers, might as well be comprehensive. I was also thinking about extending the logtable approach to arbitrary Gaussian parameters sigma.

As for the interface, I guess I should check the two algorithms you mentioned above to see what would need to be generalised. If other parameters are needed in the future I can simply add another constructor which accepts those parameters, that was my thinking anyway.

> I was wondering about the source of randomness. You use standard c functions, which > 
> is probably ok for many tests. However, you know for sure how critical is the source 
> of randomness in crypto implementations. Moreover, there are huge differences in 
> speed between the standard random c function and a secure random function, thus, for 
> testing efficiency of Gaussian samplers it is crucial to have the flexibility to 
> choose your source of randomness. For this reason, in some implementation we did, we 
> had the source of randomness as a parameter. Perhaps, you'd like to consider doing 
> that.


I currently have two versions, one using GMP's randstate and one using libc. GMP should give cryptographically strong pseudorandom numbers. In my experience the difference in running time is - as you write - pretty much down to how long it takes to sample random numbers, so I figured I offer one with a good random number generator and one with a fast which is good enough for testing.



---

archive/issue_comments_257480.json:
```json
{
    "body": "<a id='comment:8'></a>\nSo, any volunteer reviewers for the Sage part?",
    "created_at": "2014-03-29T14:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257480",
    "user": "https://github.com/malb"
}
```

<a id='comment:8'></a>
So, any volunteer reviewers for the Sage part?



---

archive/issue_events_046816.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15915#event-46816"
}
```



---

archive/issue_comments_257481.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|\n|[01bdc19](http://git.sagemath.org/sage.git/commit/?id=01bdc19639b35dc4b3a03fd72bd3d4840d0d1564)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|\n|[0b87bff](http://git.sagemath.org/sage.git/commit/?id=0b87bffff470b6ee0cf86cebf3dc0299bfeab651)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|\n|[dcfaf52](http://git.sagemath.org/sage.git/commit/?id=dcfaf524c406916d9bab959211f49035e9eb7015)|`document fact that some random bits are cached`|",
    "created_at": "2014-05-13T15:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
|[01bdc19](http://git.sagemath.org/sage.git/commit/?id=01bdc19639b35dc4b3a03fd72bd3d4840d0d1564)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|
|[0b87bff](http://git.sagemath.org/sage.git/commit/?id=0b87bffff470b6ee0cf86cebf3dc0299bfeab651)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|
|[dcfaf52](http://git.sagemath.org/sage.git/commit/?id=dcfaf524c406916d9bab959211f49035e9eb7015)|`document fact that some random bits are cached`|



---

archive/issue_comments_257482.json:
```json
{
    "body": "Changing commit from \"6aa658c1999c3f151b15a76f61f6c404bc347143\" to \"dcfaf524c406916d9bab959211f49035e9eb7015\"",
    "created_at": "2014-05-13T15:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257482",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6aa658c1999c3f151b15a76f61f6c404bc347143" to "dcfaf524c406916d9bab959211f49035e9eb7015"



---

archive/issue_comments_257483.json:
```json
{
    "body": "Changing commit from \"dcfaf524c406916d9bab959211f49035e9eb7015\" to \"32ba29ad1af185c4e55f9e4d4ba6359fe6844370\"",
    "created_at": "2014-05-13T16:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dcfaf524c406916d9bab959211f49035e9eb7015" to "32ba29ad1af185c4e55f9e4d4ba6359fe6844370"



---

archive/issue_comments_257484.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[32ba29a](http://git.sagemath.org/sage.git/commit/?id=32ba29ad1af185c4e55f9e4d4ba6359fe6844370)|`check for integer overflows`|",
    "created_at": "2014-05-13T16:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[32ba29a](http://git.sagemath.org/sage.git/commit/?id=32ba29ad1af185c4e55f9e4d4ba6359fe6844370)|`check for integer overflows`|



---

archive/issue_comments_257485.json:
```json
{
    "body": "Changing commit from \"32ba29ad1af185c4e55f9e4d4ba6359fe6844370\" to \"9ea5bc4d8373ac569b42207ea47619f1a42a3488\"",
    "created_at": "2014-05-14T09:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257485",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "32ba29ad1af185c4e55f9e4d4ba6359fe6844370" to "9ea5bc4d8373ac569b42207ea47619f1a42a3488"



---

archive/issue_comments_257486.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[9ea5bc4](http://git.sagemath.org/sage.git/commit/?id=9ea5bc4d8373ac569b42207ea47619f1a42a3488)|`documentation clean up`|",
    "created_at": "2014-05-14T09:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[9ea5bc4](http://git.sagemath.org/sage.git/commit/?id=9ea5bc4d8373ac569b42207ea47619f1a42a3488)|`documentation clean up`|



---

archive/issue_comments_257487.json:
```json
{
    "body": "<a id='comment:13'></a>\n\n```\nsage -t --long src/sage/rings/integer_ring.pyx  # 1 doctest failed\nsage -t --long src/sage/crypto/lwe.py  # 23 doctests failed\n```",
    "created_at": "2014-05-19T05:44:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257487",
    "user": "https://github.com/rwst"
}
```

<a id='comment:13'></a>

```
sage -t --long src/sage/rings/integer_ring.pyx  # 1 doctest failed
sage -t --long src/sage/crypto/lwe.py  # 23 doctests failed
```



---

archive/issue_comments_257488.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-19T05:44:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257488",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_257489.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|\n|[f37edb6](http://git.sagemath.org/sage.git/commit/?id=f37edb6937c7a0a5b1477b9b4f1d82773d72a10c)|`Merge branch 'u/malb/15915_discrete_gaussians' of trac.sagemath.org:sage into discrete_gaussian`|\n|[0746a4e](http://git.sagemath.org/sage.git/commit/?id=0746a4e14e08459a12c0d61b7ac5d18039cf70a7)|`fix doctest failures`|",
    "created_at": "2014-05-19T13:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
|[f37edb6](http://git.sagemath.org/sage.git/commit/?id=f37edb6937c7a0a5b1477b9b4f1d82773d72a10c)|`Merge branch 'u/malb/15915_discrete_gaussians' of trac.sagemath.org:sage into discrete_gaussian`|
|[0746a4e](http://git.sagemath.org/sage.git/commit/?id=0746a4e14e08459a12c0d61b7ac5d18039cf70a7)|`fix doctest failures`|



---

archive/issue_comments_257490.json:
```json
{
    "body": "Changing commit from \"9ea5bc4d8373ac569b42207ea47619f1a42a3488\" to \"0746a4e14e08459a12c0d61b7ac5d18039cf70a7\"",
    "created_at": "2014-05-19T13:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9ea5bc4d8373ac569b42207ea47619f1a42a3488" to "0746a4e14e08459a12c0d61b7ac5d18039cf70a7"



---

archive/issue_comments_257491.json:
```json
{
    "body": "<a id='comment:15'></a>\nDoctests fixed.",
    "created_at": "2014-05-19T13:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257491",
    "user": "https://github.com/malb"
}
```

<a id='comment:15'></a>
Doctests fixed.



---

archive/issue_comments_257492.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+This ticket adds samplers for discrete Gaussian distributions to Sage.\n``````\n",
    "created_at": "2014-05-19T13:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257492",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+This ticket adds samplers for discrete Gaussian distributions to Sage.
``````




---

archive/issue_comments_257493.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-19T13:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257493",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_257494.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[853cff3](http://git.sagemath.org/sage.git/commit/?id=853cff35dfb88edcc31c545c6d80eed7496d5094)|`documentation clarification`|\n|[1829e21](http://git.sagemath.org/sage.git/commit/?id=1829e2163227afc96245ae35459e0797a9ad2ac3)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|\n|[6aa658c](http://git.sagemath.org/sage.git/commit/?id=6aa658c1999c3f151b15a76f61f6c404bc347143)|`DDLL23 -> DDLL13`|\n|[01bdc19](http://git.sagemath.org/sage.git/commit/?id=01bdc19639b35dc4b3a03fd72bd3d4840d0d1564)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|\n|[0b87bff](http://git.sagemath.org/sage.git/commit/?id=0b87bffff470b6ee0cf86cebf3dc0299bfeab651)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|\n|[dcfaf52](http://git.sagemath.org/sage.git/commit/?id=dcfaf524c406916d9bab959211f49035e9eb7015)|`document fact that some random bits are cached`|\n|[32ba29a](http://git.sagemath.org/sage.git/commit/?id=32ba29ad1af185c4e55f9e4d4ba6359fe6844370)|`check for integer overflows`|\n|[9ea5bc4](http://git.sagemath.org/sage.git/commit/?id=9ea5bc4d8373ac569b42207ea47619f1a42a3488)|`documentation clean up`|\n|[f15c339](http://git.sagemath.org/sage.git/commit/?id=f15c3398c6f62adcf0a611aeb125be1f8bb0e0c0)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|\n|[fba8f61](http://git.sagemath.org/sage.git/commit/?id=fba8f6199c226f9b8162bace742c960c6c023224)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|",
    "created_at": "2014-06-25T01:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[853cff3](http://git.sagemath.org/sage.git/commit/?id=853cff35dfb88edcc31c545c6d80eed7496d5094)|`documentation clarification`|
|[1829e21](http://git.sagemath.org/sage.git/commit/?id=1829e2163227afc96245ae35459e0797a9ad2ac3)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|
|[6aa658c](http://git.sagemath.org/sage.git/commit/?id=6aa658c1999c3f151b15a76f61f6c404bc347143)|`DDLL23 -> DDLL13`|
|[01bdc19](http://git.sagemath.org/sage.git/commit/?id=01bdc19639b35dc4b3a03fd72bd3d4840d0d1564)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|
|[0b87bff](http://git.sagemath.org/sage.git/commit/?id=0b87bffff470b6ee0cf86cebf3dc0299bfeab651)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|
|[dcfaf52](http://git.sagemath.org/sage.git/commit/?id=dcfaf524c406916d9bab959211f49035e9eb7015)|`document fact that some random bits are cached`|
|[32ba29a](http://git.sagemath.org/sage.git/commit/?id=32ba29ad1af185c4e55f9e4d4ba6359fe6844370)|`check for integer overflows`|
|[9ea5bc4](http://git.sagemath.org/sage.git/commit/?id=9ea5bc4d8373ac569b42207ea47619f1a42a3488)|`documentation clean up`|
|[f15c339](http://git.sagemath.org/sage.git/commit/?id=f15c3398c6f62adcf0a611aeb125be1f8bb0e0c0)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|
|[fba8f61](http://git.sagemath.org/sage.git/commit/?id=fba8f6199c226f9b8162bace742c960c6c023224)|`Merge branch 'develop' of trac.sagemath.org:sage into discrete_gaussian`|



---

archive/issue_comments_257495.json:
```json
{
    "body": "Changing commit from \"0746a4e14e08459a12c0d61b7ac5d18039cf70a7\" to \"fba8f6199c226f9b8162bace742c960c6c023224\"",
    "created_at": "2014-06-25T01:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257495",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0746a4e14e08459a12c0d61b7ac5d18039cf70a7" to "fba8f6199c226f9b8162bace742c960c6c023224"



---

archive/issue_comments_257496.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n|[6dcd131](http://git.sagemath.org/sage.git/commit/?id=6dcd131da7c6ea35781c6a46b0bae59297a2609a)|`include stats dir`|\n|[bf03fd7](http://git.sagemath.org/sage.git/commit/?id=bf03fd71f5f009ad7b6db48de9565ac24ef7d2d7)|`fixed doctest failures`|\n|[8711050](http://git.sagemath.org/sage.git/commit/?id=8711050a5e38bad26ae2d24e0245866fd2b23f68)|`moved & renamed discrete gaussian samplers`|\n|[7926fae](http://git.sagemath.org/sage.git/commit/?id=7926fae85a045a1358563b4d5084f91405a913f1)|`added Gaussian samplers for polynomials and lattices`|",
    "created_at": "2014-06-25T19:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
|[6dcd131](http://git.sagemath.org/sage.git/commit/?id=6dcd131da7c6ea35781c6a46b0bae59297a2609a)|`include stats dir`|
|[bf03fd7](http://git.sagemath.org/sage.git/commit/?id=bf03fd71f5f009ad7b6db48de9565ac24ef7d2d7)|`fixed doctest failures`|
|[8711050](http://git.sagemath.org/sage.git/commit/?id=8711050a5e38bad26ae2d24e0245866fd2b23f68)|`moved & renamed discrete gaussian samplers`|
|[7926fae](http://git.sagemath.org/sage.git/commit/?id=7926fae85a045a1358563b4d5084f91405a913f1)|`added Gaussian samplers for polynomials and lattices`|



---

archive/issue_comments_257497.json:
```json
{
    "body": "Changing commit from \"fba8f6199c226f9b8162bace742c960c6c023224\" to \"7926fae85a045a1358563b4d5084f91405a913f1\"",
    "created_at": "2014-06-25T19:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fba8f6199c226f9b8162bace742c960c6c023224" to "7926fae85a045a1358563b4d5084f91405a913f1"



---

archive/issue_comments_257498.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd59\".",
    "created_at": "2014-06-25T19:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257498",
    "user": "https://github.com/saraedum"
}
```

Changing keywords from "" to "sd59".



---

archive/issue_comments_257499.json:
```json
{
    "body": "<a id='comment:19'></a>\nSome comments at https://github.com/sagemath/sage/pull/18 (I didn't look at the .c files yet.)",
    "created_at": "2014-06-25T20:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257499",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:19'></a>
Some comments at https://github.com/sagemath/sage/pull/18 (I didn't look at the .c files yet.)



---

archive/issue_comments_257500.json:
```json
{
    "body": "Changing commit from \"7926fae85a045a1358563b4d5084f91405a913f1\" to \"6ace4d7b5d71c61c5c07f6c72c3f097884870c4d\"",
    "created_at": "2014-06-25T21:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7926fae85a045a1358563b4d5084f91405a913f1" to "6ace4d7b5d71c61c5c07f6c72c3f097884870c4d"



---

archive/issue_comments_257501.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[6ace4d7](http://git.sagemath.org/sage.git/commit/?id=6ace4d7b5d71c61c5c07f6c72c3f097884870c4d)|`pass polynomial ring explicitly to distributions over polynomial rings`|",
    "created_at": "2014-06-25T21:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[6ace4d7](http://git.sagemath.org/sage.git/commit/?id=6ace4d7b5d71c61c5c07f6c72c3f097884870c4d)|`pass polynomial ring explicitly to distributions over polynomial rings`|



---

archive/issue_comments_257502.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[a910589](http://git.sagemath.org/sage.git/commit/?id=a910589878abe5f2fe13858f600a37d3d9eae0bb)|`addressed comments at https://github.com/sagemath/sage/pull/18`|",
    "created_at": "2014-06-26T00:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257502",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[a910589](http://git.sagemath.org/sage.git/commit/?id=a910589878abe5f2fe13858f600a37d3d9eae0bb)|`addressed comments at https://github.com/sagemath/sage/pull/18`|



---

archive/issue_comments_257503.json:
```json
{
    "body": "Changing commit from \"6ace4d7b5d71c61c5c07f6c72c3f097884870c4d\" to \"a910589878abe5f2fe13858f600a37d3d9eae0bb\"",
    "created_at": "2014-06-26T00:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6ace4d7b5d71c61c5c07f6c72c3f097884870c4d" to "a910589878abe5f2fe13858f600a37d3d9eae0bb"



---

archive/issue_comments_257504.json:
```json
{
    "body": "<a id='comment:22'></a>\nI don't feel able to review all the code, but testing it seems to work ok.\n\nI just think it would make sense for the samplers over the polynomials to accept the polynomial ring as an input.",
    "created_at": "2014-06-26T04:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257504",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:22'></a>
I don't feel able to review all the code, but testing it seems to work ok.

I just think it would make sense for the samplers over the polynomials to accept the polynomial ring as an input.



---

archive/issue_comments_257505.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [mmarco](#comment%3A22):\n> I just think it would make sense for the samplers over the polynomials to accept the polynomial ring as an input.\n\n\n\nAlready taken care off :)",
    "created_at": "2014-06-26T14:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257505",
    "user": "https://github.com/malb"
}
```

<a id='comment:23'></a>
Replying to [mmarco](#comment%3A22):
> I just think it would make sense for the samplers over the polynomials to accept the polynomial ring as an input.



Already taken care off :)



---

archive/issue_comments_257506.json:
```json
{
    "body": "Changing commit from \"a910589878abe5f2fe13858f600a37d3d9eae0bb\" to \"18279ac5309f770b26d912711bb2e27f1e2b752d\"",
    "created_at": "2014-06-27T18:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a910589878abe5f2fe13858f600a37d3d9eae0bb" to "18279ac5309f770b26d912711bb2e27f1e2b752d"



---

archive/issue_comments_257507.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[042530d](http://git.sagemath.org/sage.git/commit/?id=042530dcb257d5521b2fe9769c1c8f5db76e8fc4)|`added doctest for plotting histograms`|\n|[18279ac](http://git.sagemath.org/sage.git/commit/?id=18279ac5309f770b26d912711bb2e27f1e2b752d)|`faster discrete gaussians over lattices if lattice is trivial`|",
    "created_at": "2014-06-27T18:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[042530d](http://git.sagemath.org/sage.git/commit/?id=042530dcb257d5521b2fe9769c1c8f5db76e8fc4)|`added doctest for plotting histograms`|
|[18279ac](http://git.sagemath.org/sage.git/commit/?id=18279ac5309f770b26d912711bb2e27f1e2b752d)|`faster discrete gaussians over lattices if lattice is trivial`|



---

archive/issue_comments_257508.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[1112e41](http://git.sagemath.org/sage.git/commit/?id=1112e413bbad15d0b5cbb4f0f7b2eff0ec23a17f)|`ZZ[x]/<f> via FLINT`|\n|[45d0b44](http://git.sagemath.org/sage.git/commit/?id=45d0b44e7b578d30ca2aaa48199a523647532193)|`Merge branch 'discrete_gaussian' into flint_zz`|\n|[d5cc4a2](http://git.sagemath.org/sage.git/commit/?id=d5cc4a2126516cae336ff9c36e77ac4fb702ce65)|`added random_element method`|\n|[833723c](http://git.sagemath.org/sage.git/commit/?id=833723c6f826d2935c27d3b5d57261a79aaaab59)|`Merge branch 'discrete_gaussian' into flint_zz`|\n|[e6a80b2](http://git.sagemath.org/sage.git/commit/?id=e6a80b20962e2945dfc72f23bd4747bcfab89a73)|`implemented lift()`|",
    "created_at": "2014-06-27T19:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                     |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[1112e41](http://git.sagemath.org/sage.git/commit/?id=1112e413bbad15d0b5cbb4f0f7b2eff0ec23a17f)|`ZZ[x]/<f> via FLINT`|
|[45d0b44](http://git.sagemath.org/sage.git/commit/?id=45d0b44e7b578d30ca2aaa48199a523647532193)|`Merge branch 'discrete_gaussian' into flint_zz`|
|[d5cc4a2](http://git.sagemath.org/sage.git/commit/?id=d5cc4a2126516cae336ff9c36e77ac4fb702ce65)|`added random_element method`|
|[833723c](http://git.sagemath.org/sage.git/commit/?id=833723c6f826d2935c27d3b5d57261a79aaaab59)|`Merge branch 'discrete_gaussian' into flint_zz`|
|[e6a80b2](http://git.sagemath.org/sage.git/commit/?id=e6a80b20962e2945dfc72f23bd4747bcfab89a73)|`implemented lift()`|



---

archive/issue_comments_257509.json:
```json
{
    "body": "Changing commit from \"18279ac5309f770b26d912711bb2e27f1e2b752d\" to \"e6a80b20962e2945dfc72f23bd4747bcfab89a73\"",
    "created_at": "2014-06-27T19:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "18279ac5309f770b26d912711bb2e27f1e2b752d" to "e6a80b20962e2945dfc72f23bd4747bcfab89a73"



---

archive/issue_comments_257510.json:
```json
{
    "body": "<a id='comment:26'></a>\nSome comments/questions:\n\nIn the `fmpz_poly` linkage: What is the except -2 good for? Do these flint methods return -2 on error? Shouldn't you use sig_on()/sig_off() rather?\n\nWhat is the reason for the following in `Polynomial_integer_dense_flint`?\n\n```\n- elif not isinstance(x, list):\n-    x = [x] # constant polynomials\n+ else:\n+    try:\n+       x = list(x)\n+    except TypeError:\n+       x = [x] # constant polynomials\n```\n\nIn `polynomial_quotient_ring.py`, why don't you use `r\"\"\"` so you can write `\\ZZ`? Also, there are now a lot of unicode characters; even though you put an encoding in the header, my vim does not understand these characters (strangely) and they also confused the patchbot.\n\nI stopped reading at `dgs.h`. Would you mind relicensing this as GPLv2+? Should such things not be in an SPKG? I wonder if the amount of documentation is sufficient for including it directly in Sage and also if anybody can really review this (I cannot review that part I'm afraid.)",
    "created_at": "2014-06-28T07:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257510",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:26'></a>
Some comments/questions:

In the `fmpz_poly` linkage: What is the except -2 good for? Do these flint methods return -2 on error? Shouldn't you use sig_on()/sig_off() rather?

What is the reason for the following in `Polynomial_integer_dense_flint`?

```
- elif not isinstance(x, list):
-    x = [x] # constant polynomials
+ else:
+    try:
+       x = list(x)
+    except TypeError:
+       x = [x] # constant polynomials
```

In `polynomial_quotient_ring.py`, why don't you use `r"""` so you can write `\ZZ`? Also, there are now a lot of unicode characters; even though you put an encoding in the header, my vim does not understand these characters (strangely) and they also confused the patchbot.

I stopped reading at `dgs.h`. Would you mind relicensing this as GPLv2+? Should such things not be in an SPKG? I wonder if the amount of documentation is sufficient for including it directly in Sage and also if anybody can really review this (I cannot review that part I'm afraid.)



---

archive/issue_comments_257511.json:
```json
{
    "body": "Changing branch from \"u/malb/15915_discrete_gaussians\" to \"u/saraedum/ticket/15915\"",
    "created_at": "2014-06-28T07:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257511",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/malb/15915_discrete_gaussians" to "u/saraedum/ticket/15915"



---

archive/issue_comments_257512.json:
```json
{
    "body": "Changing commit from \"e6a80b20962e2945dfc72f23bd4747bcfab89a73\" to \"d57f528a2e79c700f72d6144a2b3045760284f70\"",
    "created_at": "2014-06-28T07:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257512",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "e6a80b20962e2945dfc72f23bd4747bcfab89a73" to "d57f528a2e79c700f72d6144a2b3045760284f70"



---

archive/issue_comments_257513.json:
```json
{
    "body": "<a id='comment:28'></a>\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[d57f528](http://git.sagemath.org/sage.git/commit/?id=d57f528a2e79c700f72d6144a2b3045760284f70)|`minor fixes in docstrings`|",
    "created_at": "2014-06-28T07:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257513",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:28'></a>
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[d57f528](http://git.sagemath.org/sage.git/commit/?id=d57f528a2e79c700f72d6144a2b3045760284f70)|`minor fixes in docstrings`|



---

archive/issue_comments_257514.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-06-28T07:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257514",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_257515.json:
```json
{
    "body": "<a id='comment:29'></a>\nIt seems you were working off the wrong branch. Your branch has \n\n   `polynomial_quotient_integer_dense_flint.pyx`\n\nin it, which it shouldn't ... oh, looks like I pushed to the wrong branch at some point. Sorry, I'll fix that.",
    "created_at": "2014-06-28T14:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257515",
    "user": "https://github.com/malb"
}
```

<a id='comment:29'></a>
It seems you were working off the wrong branch. Your branch has 

   `polynomial_quotient_integer_dense_flint.pyx`

in it, which it shouldn't ... oh, looks like I pushed to the wrong branch at some point. Sorry, I'll fix that.



---

archive/issue_comments_257516.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [saraedum](#comment%3A26):\n> Some comments/questions:\n> \n> In the `fmpz_poly` linkage: What is the except -2 good for? Do these flint methods return -2 on error? Shouldn't you use sig_on()/sig_off() rather?\n\n\nIt's the standard signature of `clement_*` functions used by polynomial templates. Specifiying -2 there allows to throw exceptions in C functions. This code wasn't meant to be in this ticket, though, see above. My apologies. The code in question belonged to #16574 but has been removed.\n \n> What is the reason for the following in `Polynomial_integer_dense_flint`?\n> \n> ```\n> - elif not isinstance(x, list):\n> -    x = [x] # constant polynomials\n> + else:\n> +    try:\n> +       x = list(x)\n> +    except TypeError:\n> +       x = [x] # constant polynomials\n> ```\n\n\nThis code wasn't meant to be in this ticket, my apologoies. It belongs in #16574. It allows `R(tuple(x))` and `R(vector(x))` to go through. \n\n> In `polynomial_quotient_ring.py`, why don't you use `r\"\"\"` so you can write `\\ZZ`? \n\n\nI could do that, I find the other notation more straight-forward, is there a particular reason why one is preferable to the other?\n\n> Also, there are now a lot of unicode characters; even though you put an encoding in the header, my vim does not understand these characters (strangely) and they also confused the patchbot.\n\n\nI can remove them but that'd make the code less readable IMHO.\n \n> I stopped reading at `dgs.h`. Would you mind relicensing this as GPLv2+? \n\n\nI have no strong feelings either way, what would be the advantage? I am quite happy with the code being BSD, it's not very sophisticated and BSD licensing it allows anyone to use it.\n\n> Should such things not be in an SPKG? \n\n\nThe C code really does only one thing, so an SPKG would be a bit of an overkill. Also, SPKG's take votes and extra bureaucracy. I'd like to avoid that, it's hard enough to get this stuff reviewed.\n\n> I wonder if the amount of documentation is sufficient for including it directly in Sage and also if anybody can really review this (I cannot review that part I'm afraid.)\n\n\nDaniel Cabarcas reviewed the C part. I can add more documentation.",
    "created_at": "2014-06-28T14:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257516",
    "user": "https://github.com/malb"
}
```

<a id='comment:30'></a>
Replying to [saraedum](#comment%3A26):
> Some comments/questions:
> 
> In the `fmpz_poly` linkage: What is the except -2 good for? Do these flint methods return -2 on error? Shouldn't you use sig_on()/sig_off() rather?


It's the standard signature of `clement_*` functions used by polynomial templates. Specifiying -2 there allows to throw exceptions in C functions. This code wasn't meant to be in this ticket, though, see above. My apologies. The code in question belonged to #16574 but has been removed.
 
> What is the reason for the following in `Polynomial_integer_dense_flint`?
> 
> ```
> - elif not isinstance(x, list):
> -    x = [x] # constant polynomials
> + else:
> +    try:
> +       x = list(x)
> +    except TypeError:
> +       x = [x] # constant polynomials
> ```


This code wasn't meant to be in this ticket, my apologoies. It belongs in #16574. It allows `R(tuple(x))` and `R(vector(x))` to go through. 

> In `polynomial_quotient_ring.py`, why don't you use `r"""` so you can write `\ZZ`? 


I could do that, I find the other notation more straight-forward, is there a particular reason why one is preferable to the other?

> Also, there are now a lot of unicode characters; even though you put an encoding in the header, my vim does not understand these characters (strangely) and they also confused the patchbot.


I can remove them but that'd make the code less readable IMHO.
 
> I stopped reading at `dgs.h`. Would you mind relicensing this as GPLv2+? 


I have no strong feelings either way, what would be the advantage? I am quite happy with the code being BSD, it's not very sophisticated and BSD licensing it allows anyone to use it.

> Should such things not be in an SPKG? 


The C code really does only one thing, so an SPKG would be a bit of an overkill. Also, SPKG's take votes and extra bureaucracy. I'd like to avoid that, it's hard enough to get this stuff reviewed.

> I wonder if the amount of documentation is sufficient for including it directly in Sage and also if anybody can really review this (I cannot review that part I'm afraid.)


Daniel Cabarcas reviewed the C part. I can add more documentation.



---

archive/issue_comments_257517.json:
```json
{
    "body": "Changing commit from \"d57f528a2e79c700f72d6144a2b3045760284f70\" to \"4681abea8f8c73f873b779dc16030fe49f259721\"",
    "created_at": "2014-06-28T18:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257517",
    "user": "https://github.com/malb"
}
```

Changing commit from "d57f528a2e79c700f72d6144a2b3045760284f70" to "4681abea8f8c73f873b779dc16030fe49f259721"



---

archive/issue_comments_257518.json:
```json
{
    "body": "<a id='comment:31'></a>\nNew commits:\n|                                                                                                                                          |                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[4681abe](http://git.sagemath.org/sage.git/commit/?id=4681abea8f8c73f873b779dc16030fe49f259721)|`cherry picked doctest fix from u/saraedum/ticket/15915`|",
    "created_at": "2014-06-28T18:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257518",
    "user": "https://github.com/malb"
}
```

<a id='comment:31'></a>
New commits:
|                                                                                                                                          |                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[4681abe](http://git.sagemath.org/sage.git/commit/?id=4681abea8f8c73f873b779dc16030fe49f259721)|`cherry picked doctest fix from u/saraedum/ticket/15915`|



---

archive/issue_comments_257519.json:
```json
{
    "body": "Changing branch from \"u/saraedum/ticket/15915\" to \"u/malb/t15915_discrete_gaussians\"",
    "created_at": "2014-06-28T18:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257519",
    "user": "https://github.com/malb"
}
```

Changing branch from "u/saraedum/ticket/15915" to "u/malb/t15915_discrete_gaussians"



---

archive/issue_comments_257520.json:
```json
{
    "body": "Changing commit from \"4681abea8f8c73f873b779dc16030fe49f259721\" to \"8ebe5c723444a22d4db66bb83cc59ac59db6ca92\"",
    "created_at": "2014-06-28T22:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4681abea8f8c73f873b779dc16030fe49f259721" to "8ebe5c723444a22d4db66bb83cc59ac59db6ca92"



---

archive/issue_comments_257521.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[8ebe5c7](http://git.sagemath.org/sage.git/commit/?id=8ebe5c723444a22d4db66bb83cc59ac59db6ca92)|`expanded documentation`|",
    "created_at": "2014-06-28T22:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[8ebe5c7](http://git.sagemath.org/sage.git/commit/?id=8ebe5c723444a22d4db66bb83cc59ac59db6ca92)|`expanded documentation`|



---

archive/issue_comments_257522.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-06-28T22:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257522",
    "user": "https://github.com/malb"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_257523.json:
```json
{
    "body": "<a id='comment:33'></a>\nBased on discussions locally at SD59 and the latest check in I am setting this back to *needs review*.",
    "created_at": "2014-06-28T22:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257523",
    "user": "https://github.com/malb"
}
```

<a id='comment:33'></a>
Based on discussions locally at SD59 and the latest check in I am setting this back to *needs review*.



---

archive/issue_comments_257524.json:
```json
{
    "body": "Changing branch from \"u/malb/t15915_discrete_gaussians\" to \"u/saraedum/ticket/15915\"",
    "created_at": "2014-06-29T06:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257524",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/malb/t15915_discrete_gaussians" to "u/saraedum/ticket/15915"



---

archive/issue_comments_257525.json:
```json
{
    "body": "<a id='comment:35'></a>\nA few questions (line numbers are all in the version I pushed):\n\n* Should it really be x-2 in line 518 of dgs_gauss.h?\n\n* What is the TODO in dgs_gauss_dp.c?\n\n* `self->c_r = 0.0;` after an abort() in line 114 and 130 of dgs_gaus_dp.c?\n\n* What is \"this B\" in line 186 of discrete_gaussian_lattice.py?",
    "created_at": "2014-06-29T06:08:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257525",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:35'></a>
A few questions (line numbers are all in the version I pushed):

* Should it really be x-2 in line 518 of dgs_gauss.h?

* What is the TODO in dgs_gauss_dp.c?

* `self->c_r = 0.0;` after an abort() in line 114 and 130 of dgs_gaus_dp.c?

* What is "this B" in line 186 of discrete_gaussian_lattice.py?



---

archive/issue_comments_257526.json:
```json
{
    "body": "Changing branch from \"u/saraedum/ticket/15915\" to \"u/malb/t15915_discrete_gaussians\"",
    "created_at": "2014-06-29T06:08:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257526",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/saraedum/ticket/15915" to "u/malb/t15915_discrete_gaussians"



---

archive/issue_comments_257527.json:
```json
{
    "body": "Changing author from \"\" to \"Martin Albrecht\"",
    "created_at": "2014-06-29T06:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257527",
    "user": "https://github.com/saraedum"
}
```

Changing author from "" to "Martin Albrecht"



---

archive/issue_comments_257528.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Julian Rueth\"",
    "created_at": "2014-06-29T06:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257528",
    "user": "https://github.com/saraedum"
}
```

Changing reviewer from "" to "Julian Rueth"



---

archive/issue_comments_257529.json:
```json
{
    "body": "Changing branch from \"u/malb/t15915_discrete_gaussians\" to \"u/saraedum/ticket/15915\"",
    "created_at": "2014-06-29T06:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257529",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/malb/t15915_discrete_gaussians" to "u/saraedum/ticket/15915"



---

archive/issue_comments_257530.json:
```json
{
    "body": "Changing commit from \"8ebe5c723444a22d4db66bb83cc59ac59db6ca92\" to \"193923913f78b59d0fed598d50cf46ad4177c2ea\"",
    "created_at": "2014-06-29T06:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257530",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "8ebe5c723444a22d4db66bb83cc59ac59db6ca92" to "193923913f78b59d0fed598d50cf46ad4177c2ea"



---

archive/issue_comments_257531.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [saraedum](#comment%3A35):\n> A few questions (line numbers are all in the version I pushed):\n> \n> * Should it really be x-2 in line 518 of dgs_gauss.h?\n\n\nIt should read x-c, fixed.\n\n> * What is the TODO in dgs_gauss_dp.c?\n\n\nThis was a left-over, removed.\n \n> * `self->c_r = 0.0;` after an abort() in line 114 and 130 of dgs_gaus_dp.c?\n\n\nRemoved.\n \n> * What is \"this B\" in line 186 of discrete_gaussian_lattice.py?\n\n\nself.B, fixed this.\n\n---\nNew commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[da3efcf](http://git.sagemath.org/sage.git/commit/?id=da3efcfb1bbb840f075e00ae8bc905944c9c2f81)|`fixed issues identified by Julian R\u00fcth`|",
    "created_at": "2014-06-29T17:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257531",
    "user": "https://github.com/malb"
}
```

<a id='comment:38'></a>
Replying to [saraedum](#comment%3A35):
> A few questions (line numbers are all in the version I pushed):
> 
> * Should it really be x-2 in line 518 of dgs_gauss.h?


It should read x-c, fixed.

> * What is the TODO in dgs_gauss_dp.c?


This was a left-over, removed.
 
> * `self->c_r = 0.0;` after an abort() in line 114 and 130 of dgs_gaus_dp.c?


Removed.
 
> * What is "this B" in line 186 of discrete_gaussian_lattice.py?


self.B, fixed this.

---
New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[da3efcf](http://git.sagemath.org/sage.git/commit/?id=da3efcfb1bbb840f075e00ae8bc905944c9c2f81)|`fixed issues identified by Julian Rüth`|



---

archive/issue_comments_257532.json:
```json
{
    "body": "Changing branch from \"u/saraedum/ticket/15915\" to \"u/malb/t15915_discrete_gaussians\"",
    "created_at": "2014-06-29T17:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257532",
    "user": "https://github.com/malb"
}
```

Changing branch from "u/saraedum/ticket/15915" to "u/malb/t15915_discrete_gaussians"



---

archive/issue_comments_257533.json:
```json
{
    "body": "Changing commit from \"193923913f78b59d0fed598d50cf46ad4177c2ea\" to \"da3efcfb1bbb840f075e00ae8bc905944c9c2f81\"",
    "created_at": "2014-06-29T17:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257533",
    "user": "https://github.com/malb"
}
```

Changing commit from "193923913f78b59d0fed598d50cf46ad4177c2ea" to "da3efcfb1bbb840f075e00ae8bc905944c9c2f81"



---

archive/issue_comments_257534.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-06-29T18:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257534",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_257535.json:
```json
{
    "body": "<a id='comment:40'></a>\nPDF docs don't build\n\n```\n! Missing $ inserted.\n<inserted text> \n                $\nl.2746 \n       \n? \n! Emergency stop.\n<inserted text> \n                $\nl.2746 \n```\nin ./src/doc/output/latex/en/reference/stats/stats.log",
    "created_at": "2014-06-30T03:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257535",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>
PDF docs don't build

```
! Missing $ inserted.
<inserted text> 
                $
l.2746 
       
? 
! Emergency stop.
<inserted text> 
                $
l.2746 
```
in ./src/doc/output/latex/en/reference/stats/stats.log



---

archive/issue_comments_257536.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-06-30T03:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257536",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_257537.json:
```json
{
    "body": "<a id='comment:41'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|\n|[025ac61](http://git.sagemath.org/sage.git/commit/?id=025ac61297d755d7a0fa3d3d8085e21d2f07dd1a)|`the future isn't now: removed some utf-8 stuff + fixed latex error`|",
    "created_at": "2014-06-30T14:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|
|[025ac61](http://git.sagemath.org/sage.git/commit/?id=025ac61297d755d7a0fa3d3d8085e21d2f07dd1a)|`the future isn't now: removed some utf-8 stuff + fixed latex error`|



---

archive/issue_comments_257538.json:
```json
{
    "body": "Changing commit from \"da3efcfb1bbb840f075e00ae8bc905944c9c2f81\" to \"025ac61297d755d7a0fa3d3d8085e21d2f07dd1a\"",
    "created_at": "2014-06-30T14:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "da3efcfb1bbb840f075e00ae8bc905944c9c2f81" to "025ac61297d755d7a0fa3d3d8085e21d2f07dd1a"



---

archive/issue_comments_257539.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-06-30T14:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257539",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_257540.json:
```json
{
    "body": "<a id='comment:42'></a>\nFixed. Setting it back to \"positive review\" (?)",
    "created_at": "2014-06-30T14:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257540",
    "user": "https://github.com/malb"
}
```

<a id='comment:42'></a>
Fixed. Setting it back to "positive review" (?)



---

archive/issue_comments_257541.json:
```json
{
    "body": "Changing branch from \"u/malb/t15915_discrete_gaussians\" to \"025ac61297d755d7a0fa3d3d8085e21d2f07dd1a\"",
    "created_at": "2014-06-30T16:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257541",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/malb/t15915_discrete_gaussians" to "025ac61297d755d7a0fa3d3d8085e21d2f07dd1a"



---

archive/issue_comments_257542.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-06-30T16:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257542",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_046817.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-30T16:33:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15915#event-46817"
}
```



---

archive/issue_comments_257543.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2014-07-01T01:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257543",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_046818.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-01T01:04:34Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15915#event-46818"
}
```



---

archive/issue_comments_257544.json:
```json
{
    "body": "<a id='comment:44'></a>\nVarious builbots report:\n\n```\nsage -t --long src/sage/stats/distributions/discrete_gaussian_integer.pyx\n**********************************************************************\nFile \"src/sage/stats/distributions/discrete_gaussian_integer.pyx\", line 263, in sage.stats.distributions.discrete_gaussian_integer.DiscreteGaussianIntegerSampler.__init__\nFailed example:\n    min(l), max(l), abs(mean(l)-2.5) < 0.01\nExpected:\n    (-2, 7, True)\nGot:\n    (-3, 7, True)\n```\nAlso, on 32-bit linux:\n\n```\n\nsage -t --long src/sage/stats/distributions/discrete_gaussian_integer.pyx\n**********************************************************************\nFile \"src/sage/stats/distributions/discrete_gaussian_integer.pyx\", line 38, in sage.stats.distributions.discrete_gaussian_integer\nFailed example:\n    x=0; l.count(x), ZZ(round(n*exp(-x^2/(2*sigma^2))/norm_factor))\nExpected:\n    (13350, 13298)\nGot:\n    (13355, 13298)\n**********************************************************************\nFile \"src/sage/stats/distributions/discrete_gaussian_integer.pyx\", line 40, in sage.stats.distributions.discrete_gaussian_integer\nFailed example:\n    x=4; l.count(x), ZZ(round(n*exp(-x^2/(2*sigma^2))/norm_factor))\nExpected:\n    (5543, 5467)\nGot:\n    (5479, 5467)\n**********************************************************************\nFile \"src/sage/stats/distributions/discrete_gaussian_integer.pyx\", line 42, in sage.stats.distributions.discrete_gaussian_integer\nFailed example:\n    x=-10; l.count(x), ZZ(round(n*exp(-x^2/(2*sigma^2))/norm_factor))\nExpected:\n    (46, 51)\nGot:\n    (53, 51)\n**********************************************************************\nFile \"src/sage/stats/distributions/discrete_gaussian_integer.pyx\", line 68, in sage.stats.distributions.discrete_gaussian_integer\nFailed example:\n    mean(l).n() # long time\nExpected:\n    0.48678000000...\nGot:\n    0.486650000000000\n**********************************************************************\n1 item had failures:\n   4 of  21 in sage.stats.distributions.discrete_gaussian_integer\n    [88 tests, 4 failures, 7.06 s]\nsage -t --long src/sage/schemes/toric/variety.py\n    [499 tests, 9.23 s]\nsage -t --long src/sage/stats/distributions/discrete_gaussian_polynomial.py\n**********************************************************************\nFile \"src/sage/stats/distributions/discrete_gaussian_polynomial.py\", line 70, in sage.stats.distributions.discrete_gaussian_polynomial.DiscreteGaussianPolynomialSampler\nFailed example:\n    [gs() for _ in xrange(3)]\nExpected:\n    [4*x^7 + 4*x^6 - 2*x^5 + x^4 + 4*x^2 - 2*x + 7, 5*x^7 - 4*x^6 + 3*x^4 - 4*x^3 + x^2 - 4, 2*x^7 + 2*x^6 + x^5 + 2*x^3 - 3*x^2 + x]\nGot:\n    [4*x^7 + 4*x^6 - 4*x^5 + 2*x^4 + x^3 - 4*x + 7, -5*x^6 + 4*x^5 - 3*x^3 + 4*x^2 + x, 2*x^7 + 2*x^6 + 2*x^5 - x^4 - 2*x^2 + 3*x + 1]\n**********************************************************************\nFile \"src/sage/stats/distributions/discrete_gaussian_polynomial.py\", line 97, in sage.stats.distributions.discrete_gaussian_polynomial.DiscreteGaussianPolynomialSampler.__init__\nFailed example:\n    [gs() for _ in xrange(3)]\nExpected:\n    [4*x^7 + 4*x^6 - 2*x^5 + x^4 + 4*x^2 - 2*x + 7, 5*x^7 - 4*x^6 + 3*x^4 - 4*x^3 + x^2 - 4, 2*x^7 + 2*x^6 + x^5 + 2*x^3 - 3*x^2 + x]\nGot:\n    [4*x^7 + 4*x^6 - 4*x^5 + 2*x^4 + x^3 - 4*x + 7, -5*x^6 + 4*x^5 - 3*x^3 + 4*x^2 + x, 2*x^7 + 2*x^6 + 2*x^5 - x^4 - 2*x^2 + 3*x + 1]\n**********************************************************************\n2 items had failures:\n   1 of   5 in sage.stats.distributions.discrete_gaussian_polynomial.DiscreteGaussianPolynomialSampler\n   1 of   5 in sage.stats.distributions.discrete_gaussian_polynomial.DiscreteGaussianPolynomialSampler.__init__\n    [18 tests, 2 failures, 0.76 s]\n```\nAlso some crypto stuff failed, though I don't know if it is related\n\n```\n4 items had failures:\n   4 of  15 in sage.crypto.lwe\n   1 of   7 in sage.crypto.lwe.RingLWE.__call__\n   2 of   7 in sage.crypto.lwe.balance_sample\n   3 of   7 in sage.crypto.lwe.samples\n    [100 tests, 10 failures, 0.60 s]\n```\nSee http://build.sagemath.org/sage/builders/%20%20fast%20Oxford%20arando%20%28Ubuntu%2013.04%20i686%29%20incremental/builds/172/steps/shell_4/logs/stdio",
    "created_at": "2014-07-01T01:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257544",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:44'></a>
Various builbots report:

```
sage -t --long src/sage/stats/distributions/discrete_gaussian_integer.pyx
**********************************************************************
File "src/sage/stats/distributions/discrete_gaussian_integer.pyx", line 263, in sage.stats.distributions.discrete_gaussian_integer.DiscreteGaussianIntegerSampler.__init__
Failed example:
    min(l), max(l), abs(mean(l)-2.5) < 0.01
Expected:
    (-2, 7, True)
Got:
    (-3, 7, True)
```
Also, on 32-bit linux:

```

sage -t --long src/sage/stats/distributions/discrete_gaussian_integer.pyx
**********************************************************************
File "src/sage/stats/distributions/discrete_gaussian_integer.pyx", line 38, in sage.stats.distributions.discrete_gaussian_integer
Failed example:
    x=0; l.count(x), ZZ(round(n*exp(-x^2/(2*sigma^2))/norm_factor))
Expected:
    (13350, 13298)
Got:
    (13355, 13298)
**********************************************************************
File "src/sage/stats/distributions/discrete_gaussian_integer.pyx", line 40, in sage.stats.distributions.discrete_gaussian_integer
Failed example:
    x=4; l.count(x), ZZ(round(n*exp(-x^2/(2*sigma^2))/norm_factor))
Expected:
    (5543, 5467)
Got:
    (5479, 5467)
**********************************************************************
File "src/sage/stats/distributions/discrete_gaussian_integer.pyx", line 42, in sage.stats.distributions.discrete_gaussian_integer
Failed example:
    x=-10; l.count(x), ZZ(round(n*exp(-x^2/(2*sigma^2))/norm_factor))
Expected:
    (46, 51)
Got:
    (53, 51)
**********************************************************************
File "src/sage/stats/distributions/discrete_gaussian_integer.pyx", line 68, in sage.stats.distributions.discrete_gaussian_integer
Failed example:
    mean(l).n() # long time
Expected:
    0.48678000000...
Got:
    0.486650000000000
**********************************************************************
1 item had failures:
   4 of  21 in sage.stats.distributions.discrete_gaussian_integer
    [88 tests, 4 failures, 7.06 s]
sage -t --long src/sage/schemes/toric/variety.py
    [499 tests, 9.23 s]
sage -t --long src/sage/stats/distributions/discrete_gaussian_polynomial.py
**********************************************************************
File "src/sage/stats/distributions/discrete_gaussian_polynomial.py", line 70, in sage.stats.distributions.discrete_gaussian_polynomial.DiscreteGaussianPolynomialSampler
Failed example:
    [gs() for _ in xrange(3)]
Expected:
    [4*x^7 + 4*x^6 - 2*x^5 + x^4 + 4*x^2 - 2*x + 7, 5*x^7 - 4*x^6 + 3*x^4 - 4*x^3 + x^2 - 4, 2*x^7 + 2*x^6 + x^5 + 2*x^3 - 3*x^2 + x]
Got:
    [4*x^7 + 4*x^6 - 4*x^5 + 2*x^4 + x^3 - 4*x + 7, -5*x^6 + 4*x^5 - 3*x^3 + 4*x^2 + x, 2*x^7 + 2*x^6 + 2*x^5 - x^4 - 2*x^2 + 3*x + 1]
**********************************************************************
File "src/sage/stats/distributions/discrete_gaussian_polynomial.py", line 97, in sage.stats.distributions.discrete_gaussian_polynomial.DiscreteGaussianPolynomialSampler.__init__
Failed example:
    [gs() for _ in xrange(3)]
Expected:
    [4*x^7 + 4*x^6 - 2*x^5 + x^4 + 4*x^2 - 2*x + 7, 5*x^7 - 4*x^6 + 3*x^4 - 4*x^3 + x^2 - 4, 2*x^7 + 2*x^6 + x^5 + 2*x^3 - 3*x^2 + x]
Got:
    [4*x^7 + 4*x^6 - 4*x^5 + 2*x^4 + x^3 - 4*x + 7, -5*x^6 + 4*x^5 - 3*x^3 + 4*x^2 + x, 2*x^7 + 2*x^6 + 2*x^5 - x^4 - 2*x^2 + 3*x + 1]
**********************************************************************
2 items had failures:
   1 of   5 in sage.stats.distributions.discrete_gaussian_polynomial.DiscreteGaussianPolynomialSampler
   1 of   5 in sage.stats.distributions.discrete_gaussian_polynomial.DiscreteGaussianPolynomialSampler.__init__
    [18 tests, 2 failures, 0.76 s]
```
Also some crypto stuff failed, though I don't know if it is related

```
4 items had failures:
   4 of  15 in sage.crypto.lwe
   1 of   7 in sage.crypto.lwe.RingLWE.__call__
   2 of   7 in sage.crypto.lwe.balance_sample
   3 of   7 in sage.crypto.lwe.samples
    [100 tests, 10 failures, 0.60 s]
```
See http://build.sagemath.org/sage/builders/%20%20fast%20Oxford%20arando%20%28Ubuntu%2013.04%20i686%29%20incremental/builds/172/steps/shell_4/logs/stdio



---

archive/issue_comments_257545.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2014-07-01T01:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257545",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_257546.json:
```json
{
    "body": "Changing commit from \"025ac61297d755d7a0fa3d3d8085e21d2f07dd1a\" to \"\"",
    "created_at": "2014-07-01T01:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257546",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "025ac61297d755d7a0fa3d3d8085e21d2f07dd1a" to ""



---

archive/issue_comments_257547.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [vbraun](#comment%3A44):\n> Various builbots report:\n> \n> ```\n> sage -t --long src/sage/stats/distributions/discrete_gaussian_integer.pyx\n> **********************************************************************\n> File \"src/sage/stats/distributions/discrete_gaussian_integer.pyx\", line 263, in sage.stats.distributions.discrete_gaussian_integer.DiscreteGaussianIntegerSampler.__init__\n> Failed example:\n>     min(l), max(l), abs(mean(l)-2.5) < 0.01\n> Expected:\n>     (-2, 7, True)\n> Got:\n>     (-3, 7, True)\n> ```\n\n\nOn what kind of machine is this on? I cannot reproduce it on either 64 or 32 bit Linux.\n\n> Also, on 32-bit linux:\n\n\nI can reproduce those and am currenly testing a fix (some default value was machine dependent).\n\n> Also some crypto stuff failed, though I don't know if it is related\n> \n> ```\n> 4 items had failures:\n>    4 of  15 in sage.crypto.lwe\n>    1 of   7 in sage.crypto.lwe.RingLWE.__call__\n>    2 of   7 in sage.crypto.lwe.balance_sample\n>    3 of   7 in sage.crypto.lwe.samples\n>     [100 tests, 10 failures, 0.60 s]\n> ```\n\n\nThese are related, thanks.",
    "created_at": "2014-07-01T18:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257547",
    "user": "https://github.com/malb"
}
```

<a id='comment:45'></a>
Replying to [vbraun](#comment%3A44):
> Various builbots report:
> 
> ```
> sage -t --long src/sage/stats/distributions/discrete_gaussian_integer.pyx
> **********************************************************************
> File "src/sage/stats/distributions/discrete_gaussian_integer.pyx", line 263, in sage.stats.distributions.discrete_gaussian_integer.DiscreteGaussianIntegerSampler.__init__
> Failed example:
>     min(l), max(l), abs(mean(l)-2.5) < 0.01
> Expected:
>     (-2, 7, True)
> Got:
>     (-3, 7, True)
> ```


On what kind of machine is this on? I cannot reproduce it on either 64 or 32 bit Linux.

> Also, on 32-bit linux:


I can reproduce those and am currenly testing a fix (some default value was machine dependent).

> Also some crypto stuff failed, though I don't know if it is related
> 
> ```
> 4 items had failures:
>    4 of  15 in sage.crypto.lwe
>    1 of   7 in sage.crypto.lwe.RingLWE.__call__
>    2 of   7 in sage.crypto.lwe.balance_sample
>    3 of   7 in sage.crypto.lwe.samples
>     [100 tests, 10 failures, 0.60 s]
> ```


These are related, thanks.



---

archive/issue_comments_257548.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2014-07-01T18:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257548",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_257549.json:
```json
{
    "body": "<a id='comment:46'></a>\nI should have fixed the 32-bit issues. \n\nI would guess these additional patches **need review** again as they are not mere documentation/doctest fixes, but changes to the code.\n\nI set the ticket to **needs info** because the first doctest failure is still unaccounted for (see above).\n\n---\nLast 10 new commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[a17b818](http://git.sagemath.org/sage.git/commit/?id=a17b8181a1dffc951dfc14a86a315ed4bf894f27)|`follow sage conventions for the author list`|\n|[7842276](http://git.sagemath.org/sage.git/commit/?id=78422768f0ba4b33bb1448ba167ada48d7df0ee6)|`added long time to long running doctests`|\n|[1939239](http://git.sagemath.org/sage.git/commit/?id=193923913f78b59d0fed598d50cf46ad4177c2ea)|`added sig_on()/sig_off() to dgs calls`|\n|[da3efcf](http://git.sagemath.org/sage.git/commit/?id=da3efcfb1bbb840f075e00ae8bc905944c9c2f81)|`fixed issues identified by Julian R\u00fcth`|\n|[025ac61](http://git.sagemath.org/sage.git/commit/?id=025ac61297d755d7a0fa3d3d8085e21d2f07dd1a)|`the future isn't now: removed some utf-8 stuff + fixed latex error`|\n|[85fd777](http://git.sagemath.org/sage.git/commit/?id=85fd777437d3fcfbc6dbd6ea6c517ddc749085bc)|`discrete_gaussian_integer depends on header files`|\n|[bae27bd](http://git.sagemath.org/sage.git/commit/?id=bae27bd83926219fda3182d117b51a003f9f9c1c)|`default choice is should be machine independent`|\n|[e791536](http://git.sagemath.org/sage.git/commit/?id=e79153658f2f50ff63ce15d02ebe57b0826fc9a0)|`all bern functions should return long only`|\n|[61359b0](http://git.sagemath.org/sage.git/commit/?id=61359b0bebe56a45fd9738404a1ca3fb9a00a954)|`C documentation fix`|\n|[2c11c5e](http://git.sagemath.org/sage.git/commit/?id=2c11c5ece1f3cfa9c09e6260f862ab4613d6bddb)|`doctest fixes due to changed code`|",
    "created_at": "2014-07-01T18:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257549",
    "user": "https://github.com/malb"
}
```

<a id='comment:46'></a>
I should have fixed the 32-bit issues. 

I would guess these additional patches **need review** again as they are not mere documentation/doctest fixes, but changes to the code.

I set the ticket to **needs info** because the first doctest failure is still unaccounted for (see above).

---
Last 10 new commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[a17b818](http://git.sagemath.org/sage.git/commit/?id=a17b8181a1dffc951dfc14a86a315ed4bf894f27)|`follow sage conventions for the author list`|
|[7842276](http://git.sagemath.org/sage.git/commit/?id=78422768f0ba4b33bb1448ba167ada48d7df0ee6)|`added long time to long running doctests`|
|[1939239](http://git.sagemath.org/sage.git/commit/?id=193923913f78b59d0fed598d50cf46ad4177c2ea)|`added sig_on()/sig_off() to dgs calls`|
|[da3efcf](http://git.sagemath.org/sage.git/commit/?id=da3efcfb1bbb840f075e00ae8bc905944c9c2f81)|`fixed issues identified by Julian Rüth`|
|[025ac61](http://git.sagemath.org/sage.git/commit/?id=025ac61297d755d7a0fa3d3d8085e21d2f07dd1a)|`the future isn't now: removed some utf-8 stuff + fixed latex error`|
|[85fd777](http://git.sagemath.org/sage.git/commit/?id=85fd777437d3fcfbc6dbd6ea6c517ddc749085bc)|`discrete_gaussian_integer depends on header files`|
|[bae27bd](http://git.sagemath.org/sage.git/commit/?id=bae27bd83926219fda3182d117b51a003f9f9c1c)|`default choice is should be machine independent`|
|[e791536](http://git.sagemath.org/sage.git/commit/?id=e79153658f2f50ff63ce15d02ebe57b0826fc9a0)|`all bern functions should return long only`|
|[61359b0](http://git.sagemath.org/sage.git/commit/?id=61359b0bebe56a45fd9738404a1ca3fb9a00a954)|`C documentation fix`|
|[2c11c5e](http://git.sagemath.org/sage.git/commit/?id=2c11c5ece1f3cfa9c09e6260f862ab4613d6bddb)|`doctest fixes due to changed code`|



---

archive/issue_comments_257550.json:
```json
{
    "body": "Changing commit from \"\" to \"2c11c5ece1f3cfa9c09e6260f862ab4613d6bddb\"",
    "created_at": "2014-07-01T18:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257550",
    "user": "https://github.com/malb"
}
```

Changing commit from "" to "2c11c5ece1f3cfa9c09e6260f862ab4613d6bddb"



---

archive/issue_comments_257551.json:
```json
{
    "body": "Changing branch from \"025ac61297d755d7a0fa3d3d8085e21d2f07dd1a\" to \"u/malb/t15915_discrete_gaussians\"",
    "created_at": "2014-07-01T18:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257551",
    "user": "https://github.com/malb"
}
```

Changing branch from "025ac61297d755d7a0fa3d3d8085e21d2f07dd1a" to "u/malb/t15915_discrete_gaussians"



---

archive/issue_comments_257552.json:
```json
{
    "body": "<a id='comment:47'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[bc732a2](http://git.sagemath.org/sage.git/commit/?id=bc732a2e0659c4204949dafea0970bc7709f831c)|`fixed silly typo`|",
    "created_at": "2014-07-01T19:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257552",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[bc732a2](http://git.sagemath.org/sage.git/commit/?id=bc732a2e0659c4204949dafea0970bc7709f831c)|`fixed silly typo`|



---

archive/issue_comments_257553.json:
```json
{
    "body": "Changing commit from \"2c11c5ece1f3cfa9c09e6260f862ab4613d6bddb\" to \"bc732a2e0659c4204949dafea0970bc7709f831c\"",
    "created_at": "2014-07-01T19:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257553",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2c11c5ece1f3cfa9c09e6260f862ab4613d6bddb" to "bc732a2e0659c4204949dafea0970bc7709f831c"



---

archive/issue_comments_257554.json:
```json
{
    "body": "<a id='comment:48'></a>\nHi Volker, any idea how I could reproduce that first doctest failure? I don't get it on the 64-bit and 32-bit Linux systems I tried.",
    "created_at": "2014-07-07T09:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257554",
    "user": "https://github.com/malb"
}
```

<a id='comment:48'></a>
Hi Volker, any idea how I could reproduce that first doctest failure? I don't get it on the 64-bit and 32-bit Linux systems I tried.



---

archive/issue_comments_257555.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|\n|[27af749](http://git.sagemath.org/sage.git/commit/?id=27af7495d04ac694b13a1847fa890a01171d3b3a)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|",
    "created_at": "2014-08-04T17:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
|[27af749](http://git.sagemath.org/sage.git/commit/?id=27af7495d04ac694b13a1847fa890a01171d3b3a)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|



---

archive/issue_comments_257556.json:
```json
{
    "body": "Changing commit from \"bc732a2e0659c4204949dafea0970bc7709f831c\" to \"27af7495d04ac694b13a1847fa890a01171d3b3a\"",
    "created_at": "2014-08-04T17:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bc732a2e0659c4204949dafea0970bc7709f831c" to "27af7495d04ac694b13a1847fa890a01171d3b3a"



---

archive/issue_comments_257557.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [malb](#comment%3A48):\n> Hi Volker, any idea how I could reproduce that first doctest failure? I don't get it on the 64-bit and 32-bit Linux systems I tried.\n\n\nIt seems my question slipped through the cracks.",
    "created_at": "2014-08-04T17:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257557",
    "user": "https://github.com/malb"
}
```

<a id='comment:50'></a>
Replying to [malb](#comment%3A48):
> Hi Volker, any idea how I could reproduce that first doctest failure? I don't get it on the 64-bit and 32-bit Linux systems I tried.


It seems my question slipped through the cracks.



---

archive/issue_events_046819.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15915#event-46819"
}
```



---

archive/issue_events_046820.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15915#event-46820"
}
```



---

archive/issue_comments_257558.json:
```json
{
    "body": "Changing commit from \"27af7495d04ac694b13a1847fa890a01171d3b3a\" to \"caa8ccf49a6ffd2794fd13f0933c47d26336ecbc\"",
    "created_at": "2014-08-11T10:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "27af7495d04ac694b13a1847fa890a01171d3b3a" to "caa8ccf49a6ffd2794fd13f0933c47d26336ecbc"



---

archive/issue_comments_257559.json:
```json
{
    "body": "<a id='comment:52'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|\n|[92e61fd](http://git.sagemath.org/sage.git/commit/?id=92e61fd20d76edec14233c8a698f8c29091a4042)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|\n|[caa8ccf](http://git.sagemath.org/sage.git/commit/?id=caa8ccf49a6ffd2794fd13f0933c47d26336ecbc)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|",
    "created_at": "2014-08-11T10:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257559",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
|[92e61fd](http://git.sagemath.org/sage.git/commit/?id=92e61fd20d76edec14233c8a698f8c29091a4042)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|
|[caa8ccf](http://git.sagemath.org/sage.git/commit/?id=caa8ccf49a6ffd2794fd13f0933c47d26336ecbc)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|



---

archive/issue_comments_257560.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-12T13:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257560",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_046821.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-12T13:18:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15915#event-46821"
}
```



---

archive/issue_comments_257561.json:
```json
{
    "body": "Changing branch from \"u/malb/t15915_discrete_gaussians\" to \"caa8ccf49a6ffd2794fd13f0933c47d26336ecbc\"",
    "created_at": "2014-08-12T13:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257561",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/malb/t15915_discrete_gaussians" to "caa8ccf49a6ffd2794fd13f0933c47d26336ecbc"



---

archive/issue_comments_257562.json:
```json
{
    "body": "<a id='comment:54'></a>\nI got this failure now on arando (32-bit linux). It worked on the previous test run, so the failure is non-deterministic. Try running tests in a loop to reproduce.\n\n```\nsage -t --long src/sage/stats/distributions/discrete_gaussian_integer.pyx\n**********************************************************************\nFile \"src/sage/stats/distributions/discrete_gaussian_integer.pyx\", line 251, in sage.stats.distributions.discrete_gaussian_integer.DiscreteGaussianIntegerSampler.__init__\nFailed example:\n    min(l) == 0-2*1.0, max(l) == 0+2*1.0, abs(mean(l)) < 0.01\nExpected:\n    (True, True, True)\nGot:\n    (True, True, False)\n**********************************************************************\n1 item had failures:\n   1 of  48 in sage.stats.distributions.discrete_gaussian_integer.DiscreteGaussianIntegerSampler.__init__\n    [88 tests, 1 failure, 7.14 s]\n```",
    "created_at": "2014-08-13T10:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257562",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:54'></a>
I got this failure now on arando (32-bit linux). It worked on the previous test run, so the failure is non-deterministic. Try running tests in a loop to reproduce.

```
sage -t --long src/sage/stats/distributions/discrete_gaussian_integer.pyx
**********************************************************************
File "src/sage/stats/distributions/discrete_gaussian_integer.pyx", line 251, in sage.stats.distributions.discrete_gaussian_integer.DiscreteGaussianIntegerSampler.__init__
Failed example:
    min(l) == 0-2*1.0, max(l) == 0+2*1.0, abs(mean(l)) < 0.01
Expected:
    (True, True, True)
Got:
    (True, True, False)
**********************************************************************
1 item had failures:
   1 of  48 in sage.stats.distributions.discrete_gaussian_integer.DiscreteGaussianIntegerSampler.__init__
    [88 tests, 1 failure, 7.14 s]
```



---

archive/issue_comments_257563.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2014-08-13T10:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257563",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_257564.json:
```json
{
    "body": "Changing commit from \"caa8ccf49a6ffd2794fd13f0933c47d26336ecbc\" to \"\"",
    "created_at": "2014-08-13T10:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257564",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "caa8ccf49a6ffd2794fd13f0933c47d26336ecbc" to ""



---

archive/issue_comments_257565.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2014-08-13T10:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257565",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_046822.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-13T10:41:54Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15915#event-46822"
}
```



---

archive/issue_comments_257566.json:
```json
{
    "body": "<a id='comment:55'></a>\nHi, thanks for providing this. I've just committed a \"fix\". With precision='dp' results are not reproducible (our random seed does not control C's random()). I clarified this a bit more in the documentation and increased the allowed bound. Unfortunately, on the only 32-bit machine I have access to, I cannot reproduce the doctest failure, so I can ask you to run it again?",
    "created_at": "2014-08-13T14:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257566",
    "user": "https://github.com/malb"
}
```

<a id='comment:55'></a>
Hi, thanks for providing this. I've just committed a "fix". With precision='dp' results are not reproducible (our random seed does not control C's random()). I clarified this a bit more in the documentation and increased the allowed bound. Unfortunately, on the only 32-bit machine I have access to, I cannot reproduce the doctest failure, so I can ask you to run it again?



---

archive/issue_comments_257567.json:
```json
{
    "body": "<a id='comment:56'></a>\nThe name `DiscreteGaussianIntegerSampler` might be a bit confusing to some people: at first reading it seems you're sampling from the Gaussian integers (which are discrete).\n\nWouldn't `DiscreteGaussianDistributionSampler` be a more descriptive name? I get the impression that Discrete Gaussian Distribution is normally used for the distributions on the integers you're referring to.\n\nThe fact that you truncate at `tau*sigma` also seems to disqualify this from legitimately being called \"sampling from a discrete gaussian distribution\", but I hope this is standard abuse of terminology in the field (and the difference is hard to see).\n\nIt also suggests that if the rejection rate is high (it would be for larger values of `tau`) it might be worth sampling from a binomial distribution with adapted rejection rates. The shape should be much closer to your desired distribution and hence should lead to a much lower rejection rate. It depends a bit on whether the new rejection probabilities are sufficiently easy to compute to be worth it.",
    "created_at": "2014-08-18T15:01:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257567",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:56'></a>
The name `DiscreteGaussianIntegerSampler` might be a bit confusing to some people: at first reading it seems you're sampling from the Gaussian integers (which are discrete).

Wouldn't `DiscreteGaussianDistributionSampler` be a more descriptive name? I get the impression that Discrete Gaussian Distribution is normally used for the distributions on the integers you're referring to.

The fact that you truncate at `tau*sigma` also seems to disqualify this from legitimately being called "sampling from a discrete gaussian distribution", but I hope this is standard abuse of terminology in the field (and the difference is hard to see).

It also suggests that if the rejection rate is high (it would be for larger values of `tau`) it might be worth sampling from a binomial distribution with adapted rejection rates. The shape should be much closer to your desired distribution and hence should lead to a much lower rejection rate. It depends a bit on whether the new rejection probabilities are sufficiently easy to compute to be worth it.



---

archive/issue_comments_257568.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [nbruin](#comment%3A56):\n> The name `DiscreteGaussianIntegerSampler` might be a bit confusing to some people: at first reading it seems you're sampling from the Gaussian integers (which are discrete).\n> Wouldn't `DiscreteGaussianDistributionSampler` be a more descriptive name? I get the impression that Discrete Gaussian Distribution is normally used for the distributions on the integers you're referring to.\n\n\nThe name was chosen to allow for samplers over lattices and polynomial rings as well: `DiscreteGaussianLatticeSampler` and `DiscreteGaussianPolynomialSampler`.\n\nI can change it to `DiscreteGaussianDistributionIntegerSampler` or something if I get a commitment that this change is reviewed in a timely fashion. This patch has had a hard time getting reviewed so I am not opening it up again lightly.\n\n> The fact that you truncate at `tau*sigma` also seems to disqualify this from legitimately being called \"sampling from a discrete gaussian distribution\", but I hope this is standard abuse of terminology in the field (and the difference is hard to see).\n\n\nThe difference is hard to see due to the tail bound. Roughly: Pr[x <- D | |x| > C*sigma] <= 2/(C sqrt(2*pi)) * exp(-C<sup>2</sup>/2). This is also the standard approach in the literature.\n\n> It also suggests that if the rejection rate is high (it would be for larger values of `tau`) it might be worth sampling from a binomial distribution with adapted rejection rates. The shape should be much closer to your desired distribution and hence should lead to a much lower rejection rate. It depends a bit on whether the new rejection probabilities are sufficiently easy to compute to be worth it.\n\n\nSampling from other distributions has been considered in the literature. The \"sigma2+logtable\" algorithm is a result of such an investigation in:\n\n   [DDLL13] L\u00e9o Ducas, Alain Durmus, Tancr\u00e8de Lepoint and Vadim\nLyubashevsky. *Lattice Signatures and Bimodal Gaussians*; in Advances in\n   Cryptology \u2013 CRYPTO 2013; Lecture Notes in Computer Science Volume 8042,\n   2013, pp 40-56 http://www.di.ens.fr/~lyubash/papers/bimodal.pdf",
    "created_at": "2014-08-18T16:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257568",
    "user": "https://github.com/malb"
}
```

<a id='comment:57'></a>
Replying to [nbruin](#comment%3A56):
> The name `DiscreteGaussianIntegerSampler` might be a bit confusing to some people: at first reading it seems you're sampling from the Gaussian integers (which are discrete).
> Wouldn't `DiscreteGaussianDistributionSampler` be a more descriptive name? I get the impression that Discrete Gaussian Distribution is normally used for the distributions on the integers you're referring to.


The name was chosen to allow for samplers over lattices and polynomial rings as well: `DiscreteGaussianLatticeSampler` and `DiscreteGaussianPolynomialSampler`.

I can change it to `DiscreteGaussianDistributionIntegerSampler` or something if I get a commitment that this change is reviewed in a timely fashion. This patch has had a hard time getting reviewed so I am not opening it up again lightly.

> The fact that you truncate at `tau*sigma` also seems to disqualify this from legitimately being called "sampling from a discrete gaussian distribution", but I hope this is standard abuse of terminology in the field (and the difference is hard to see).


The difference is hard to see due to the tail bound. Roughly: Pr[x <- D | |x| > C*sigma] <= 2/(C sqrt(2*pi)) * exp(-C<sup>2</sup>/2). This is also the standard approach in the literature.

> It also suggests that if the rejection rate is high (it would be for larger values of `tau`) it might be worth sampling from a binomial distribution with adapted rejection rates. The shape should be much closer to your desired distribution and hence should lead to a much lower rejection rate. It depends a bit on whether the new rejection probabilities are sufficiently easy to compute to be worth it.


Sampling from other distributions has been considered in the literature. The "sigma2+logtable" algorithm is a result of such an investigation in:

   [DDLL13] Léo Ducas, Alain Durmus, Tancrède Lepoint and Vadim
Lyubashevsky. *Lattice Signatures and Bimodal Gaussians*; in Advances in
   Cryptology – CRYPTO 2013; Lecture Notes in Computer Science Volume 8042,
   2013, pp 40-56 http://www.di.ens.fr/~lyubash/papers/bimodal.pdf



---

archive/issue_comments_257569.json:
```json
{
    "body": "<a id='comment:58'></a>\nRunning `sage -t --global-iterations 100 src/sage/stats/distributions/discrete_gaussian_integer.pyx` on 32-bit Archlinux passes.\n\nHere are the last circa 210 lines of output in abbreviated form:\n\n```\n...\nsage -t src/sage/stats/distributions/discrete_gaussian_integer.pyx\n   [82 tests, 16.02 s]\n----------------------------------------------------------------------\nDoctests interrupted: 1/1 files tested\nDoctests interrupted: 2/1 files tested\n...\nDoctests interrupted: 98/1 files tested\nDoctests interrupted: 99/1 files tested\n----------------------------------------------------------------------\nTotal time for all tests: 16.1 seconds\n    cpu time: 1625.9 seconds\n    cumulative wall time: 1627.1 seconds\nsage -t src/sage/stats/distributions/discrete_gaussian_integer.pyx\n    [82 tests, 15.99 s]\n----------------------------------------------------------------------\nDoctests interrupted: 1/1 files tested\nDoctests interrupted: 2/1 files tested\n...\nDoctests interrupted: 98/1 files tested\nDoctests interrupted: 99/1 files tested\n----------------------------------------------------------------------\nTotal time for all tests: 16.1 seconds\n    cpu time: 1641.9 seconds\n    cumulative wall time: 1643.1 seconds\n```\n\nApart from this ticket's branch, I have also merged those of tickets #15316 and #16480, as I need those for building.",
    "created_at": "2014-08-18T23:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257569",
    "user": "https://trac.sagemath.org/admin/accounts/users/emassop"
}
```

<a id='comment:58'></a>
Running `sage -t --global-iterations 100 src/sage/stats/distributions/discrete_gaussian_integer.pyx` on 32-bit Archlinux passes.

Here are the last circa 210 lines of output in abbreviated form:

```
...
sage -t src/sage/stats/distributions/discrete_gaussian_integer.pyx
   [82 tests, 16.02 s]
----------------------------------------------------------------------
Doctests interrupted: 1/1 files tested
Doctests interrupted: 2/1 files tested
...
Doctests interrupted: 98/1 files tested
Doctests interrupted: 99/1 files tested
----------------------------------------------------------------------
Total time for all tests: 16.1 seconds
    cpu time: 1625.9 seconds
    cumulative wall time: 1627.1 seconds
sage -t src/sage/stats/distributions/discrete_gaussian_integer.pyx
    [82 tests, 15.99 s]
----------------------------------------------------------------------
Doctests interrupted: 1/1 files tested
Doctests interrupted: 2/1 files tested
...
Doctests interrupted: 98/1 files tested
Doctests interrupted: 99/1 files tested
----------------------------------------------------------------------
Total time for all tests: 16.1 seconds
    cpu time: 1641.9 seconds
    cumulative wall time: 1643.1 seconds
```

Apart from this ticket's branch, I have also merged those of tickets #15316 and #16480, as I need those for building.



---

archive/issue_comments_257570.json:
```json
{
    "body": "<a id='comment:59'></a>\nThanks for running those. As far as I can tell, this means for you, too, doctests pass.",
    "created_at": "2014-08-19T09:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257570",
    "user": "https://github.com/malb"
}
```

<a id='comment:59'></a>
Thanks for running those. As far as I can tell, this means for you, too, doctests pass.



---

archive/issue_comments_257571.json:
```json
{
    "body": "<a id='comment:60'></a>\nI renamed `DiscreteGaussianIntegerSampler` to `DiscreteGaussianDistributionIntegerSampler`. Nils, can you review this commit?",
    "created_at": "2014-08-19T10:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257571",
    "user": "https://github.com/malb"
}
```

<a id='comment:60'></a>
I renamed `DiscreteGaussianIntegerSampler` to `DiscreteGaussianDistributionIntegerSampler`. Nils, can you review this commit?



---

archive/issue_comments_257572.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-19T10:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257572",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_257573.json:
```json
{
    "body": "Changing commit from \"\" to \"a1b711fb00192eb55212644e79c38bb0adc89a61\"",
    "created_at": "2014-08-26T15:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257573",
    "user": "https://github.com/malb"
}
```

Changing commit from "" to "a1b711fb00192eb55212644e79c38bb0adc89a61"



---

archive/issue_comments_257574.json:
```json
{
    "body": "<a id='comment:61'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[e791536](http://git.sagemath.org/sage.git/commit/?id=e79153658f2f50ff63ce15d02ebe57b0826fc9a0)|`all bern functions should return long only`|\n|[61359b0](http://git.sagemath.org/sage.git/commit/?id=61359b0bebe56a45fd9738404a1ca3fb9a00a954)|`C documentation fix`|\n|[2c11c5e](http://git.sagemath.org/sage.git/commit/?id=2c11c5ece1f3cfa9c09e6260f862ab4613d6bddb)|`doctest fixes due to changed code`|\n|[bc732a2](http://git.sagemath.org/sage.git/commit/?id=bc732a2e0659c4204949dafea0970bc7709f831c)|`fixed silly typo`|\n|[27af749](http://git.sagemath.org/sage.git/commit/?id=27af7495d04ac694b13a1847fa890a01171d3b3a)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|\n|[92e61fd](http://git.sagemath.org/sage.git/commit/?id=92e61fd20d76edec14233c8a698f8c29091a4042)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|\n|[caa8ccf](http://git.sagemath.org/sage.git/commit/?id=caa8ccf49a6ffd2794fd13f0933c47d26336ecbc)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|\n|[2051027](http://git.sagemath.org/sage.git/commit/?id=2051027d11d82c0511e4d082d9d00d7e0335eb9a)|`increase allowed bound in testcase and clarified documentation`|\n|[c9d3c9c](http://git.sagemath.org/sage.git/commit/?id=c9d3c9c2c1001261d81574e0261d644d967b4594)|`DiscreteGaussianIntegerSampler -> DiscreteGaussianDistributionIntegerSampler`|\n|[a1b711f](http://git.sagemath.org/sage.git/commit/?id=a1b711fb00192eb55212644e79c38bb0adc89a61)|`fixed bug in iter_vectors and wrong doctests which accepted its results`|",
    "created_at": "2014-08-26T15:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257574",
    "user": "https://github.com/malb"
}
```

<a id='comment:61'></a>
Last 10 new commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[e791536](http://git.sagemath.org/sage.git/commit/?id=e79153658f2f50ff63ce15d02ebe57b0826fc9a0)|`all bern functions should return long only`|
|[61359b0](http://git.sagemath.org/sage.git/commit/?id=61359b0bebe56a45fd9738404a1ca3fb9a00a954)|`C documentation fix`|
|[2c11c5e](http://git.sagemath.org/sage.git/commit/?id=2c11c5ece1f3cfa9c09e6260f862ab4613d6bddb)|`doctest fixes due to changed code`|
|[bc732a2](http://git.sagemath.org/sage.git/commit/?id=bc732a2e0659c4204949dafea0970bc7709f831c)|`fixed silly typo`|
|[27af749](http://git.sagemath.org/sage.git/commit/?id=27af7495d04ac694b13a1847fa890a01171d3b3a)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|
|[92e61fd](http://git.sagemath.org/sage.git/commit/?id=92e61fd20d76edec14233c8a698f8c29091a4042)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|
|[caa8ccf](http://git.sagemath.org/sage.git/commit/?id=caa8ccf49a6ffd2794fd13f0933c47d26336ecbc)|`Merge branch 'develop' of trac.sagemath.org:sage into u/malb/t15915_discrete_gaussians`|
|[2051027](http://git.sagemath.org/sage.git/commit/?id=2051027d11d82c0511e4d082d9d00d7e0335eb9a)|`increase allowed bound in testcase and clarified documentation`|
|[c9d3c9c](http://git.sagemath.org/sage.git/commit/?id=c9d3c9c2c1001261d81574e0261d644d967b4594)|`DiscreteGaussianIntegerSampler -> DiscreteGaussianDistributionIntegerSampler`|
|[a1b711f](http://git.sagemath.org/sage.git/commit/?id=a1b711fb00192eb55212644e79c38bb0adc89a61)|`fixed bug in iter_vectors and wrong doctests which accepted its results`|



---

archive/issue_comments_257575.json:
```json
{
    "body": "Changing branch from \"caa8ccf49a6ffd2794fd13f0933c47d26336ecbc\" to \"u/malb/t15915_discrete_gaussians\"",
    "created_at": "2014-08-26T15:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257575",
    "user": "https://github.com/malb"
}
```

Changing branch from "caa8ccf49a6ffd2794fd13f0933c47d26336ecbc" to "u/malb/t15915_discrete_gaussians"



---

archive/issue_comments_257576.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-09-09T22:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257576",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_046823.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-10T21:45:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15915#event-46823"
}
```



---

archive/issue_comments_257577.json:
```json
{
    "body": "Changing branch from \"u/malb/t15915_discrete_gaussians\" to \"a1b711fb00192eb55212644e79c38bb0adc89a61\"",
    "created_at": "2014-09-10T21:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257577",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/malb/t15915_discrete_gaussians" to "a1b711fb00192eb55212644e79c38bb0adc89a61"



---

archive/issue_comments_257578.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-09-10T21:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257578",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_257579.json:
```json
{
    "body": "Changing commit from \"a1b711fb00192eb55212644e79c38bb0adc89a61\" to \"\"",
    "created_at": "2014-09-11T15:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257579",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "a1b711fb00192eb55212644e79c38bb0adc89a61" to ""



---

archive/issue_comments_257580.json:
```json
{
    "body": "<a id='comment:64'></a>\nSee #16968 for a follow-up",
    "created_at": "2014-09-11T15:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15915#issuecomment-257580",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:64'></a>
See #16968 for a follow-up
