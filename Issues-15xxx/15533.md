# Issue 15533: Making the hash of cores depend on the parameter

archive/issues_015296.json:
```json
{
    "body": "Currently, a core does not hash its parameter, so having a dict with the two keys\n\n```\nsage: A = Core([2],4)\nsage: B = Core([2],5)\nsage: hash(A) == hash(B)\nTrue\n```\nfails to work.\n\nCC:  @tscrim @anneschilling @AndrewAtLarge sage-combinat\n\nKeywords: cores\n\nReviewer: Anne Schilling\n\nAuthor: Christian Stump\n\nBranch: public/combinat/cores/15533\n\nCommit: 017c101babe9d7edaa5a39e844de1d2988e0f810\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15533\n\n",
    "closed_at": "2014-02-08T14:02:39Z",
    "created_at": "2013-12-17T14:11:23Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Making the hash of cores depend on the parameter",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15533",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
Currently, a core does not hash its parameter, so having a dict with the two keys

```
sage: A = Core([2],4)
sage: B = Core([2],5)
sage: hash(A) == hash(B)
True
```
fails to work.

CC:  @tscrim @anneschilling @AndrewAtLarge sage-combinat

Keywords: cores

Reviewer: Anne Schilling

Author: Christian Stump

Branch: public/combinat/cores/15533

Commit: 017c101babe9d7edaa5a39e844de1d2988e0f810

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15533





---

archive/issue_comments_244953.json:
```json
{
    "body": "Changing branch from \"\" to \"u/stumpc5/ticket/15533\"",
    "created_at": "2013-12-17T14:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244953",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing branch from "" to "u/stumpc5/ticket/15533"



---

archive/issue_comments_244954.json:
```json
{
    "body": "Changing commit from \"\" to \"1faf2392b52f9a55a327c98d6e0729d738d1d3b9\"",
    "created_at": "2013-12-17T14:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244954",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing commit from "" to "1faf2392b52f9a55a327c98d6e0729d738d1d3b9"



---

archive/issue_comments_244955.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                         |                  |\n|---------------------------------------------------------------------------------------------------------|------------------|\n|[1faf239](https://github.com/sagemath/sagetrac-mirror/commit/1faf239)|new hash for cores|",
    "created_at": "2013-12-17T14:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244955",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                         |                  |
|---------------------------------------------------------------------------------------------------------|------------------|
|[1faf239](https://github.com/sagemath/sagetrac-mirror/commit/1faf239)|new hash for cores|



---

archive/issue_comments_244956.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-17T14:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244956",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_244957.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-12-17T17:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244957",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_244958.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Anne Schilling\"",
    "created_at": "2013-12-17T17:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244958",
    "user": "https://github.com/anneschilling"
}
```

Changing reviewer from "" to "Anne Schilling"



---

archive/issue_comments_244959.json:
```json
{
    "body": "<a id='comment:4'></a>\nLooks good to me!",
    "created_at": "2013-12-17T17:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244959",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:4'></a>
Looks good to me!



---

archive/issue_comments_244960.json:
```json
{
    "body": "<a id='comment:5'></a>\nIt is a requirement that if two objects compare `==` then they must have the same hash:\n\n```\nsage: A = Core([2],4)\nsage: B = Core([2],5)\nsage: A == B\nTrue\nsage: hash(A) == hash(B)\nFalse\n```\nSo if we want different hashes, then they must not compare `==`.",
    "created_at": "2013-12-17T22:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244960",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
It is a requirement that if two objects compare `==` then they must have the same hash:

```
sage: A = Core([2],4)
sage: B = Core([2],5)
sage: A == B
True
sage: hash(A) == hash(B)
False
```
So if we want different hashes, then they must not compare `==`.



---

archive/issue_comments_244961.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-12-17T22:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244961",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_244962.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [tscrim](#comment%3A5):\n> It is a requirement that if two objects compare `==` then they must have the same hash:\n> \n> ```\n> sage: A = Core([2],4)\n> sage: B = Core([2],5)\n> sage: A == B\n> True\n> sage: hash(A) == hash(B)\n> False\n> ```\n> So if we want different hashes, then they must not compare `==`.\n\n\nYes, Christian, please make two cores with different `k` unequal and I will set a positive review again!\n\nAnne",
    "created_at": "2014-01-28T21:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244962",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:6'></a>
Replying to [tscrim](#comment%3A5):
> It is a requirement that if two objects compare `==` then they must have the same hash:
> 
> ```
> sage: A = Core([2],4)
> sage: B = Core([2],5)
> sage: A == B
> True
> sage: hash(A) == hash(B)
> False
> ```
> So if we want different hashes, then they must not compare `==`.


Yes, Christian, please make two cores with different `k` unequal and I will set a positive review again!

Anne



---

archive/issue_comments_244963.json:
```json
{
    "body": "Changing commit from \"1faf2392b52f9a55a327c98d6e0729d738d1d3b9\" to \"ede1f5cd827ac168a4337baf2ed9634811837c81\"",
    "created_at": "2014-01-29T08:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1faf2392b52f9a55a327c98d6e0729d738d1d3b9" to "ede1f5cd827ac168a4337baf2ed9634811837c81"



---

archive/issue_comments_244964.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[ede1f5c](https://github.com/sagemath/sagetrac-mirror/commit/ede1f5cd827ac168a4337baf2ed9634811837c81)|`implemented proper equality testing`|",
    "created_at": "2014-01-29T08:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[ede1f5c](https://github.com/sagemath/sagetrac-mirror/commit/ede1f5cd827ac168a4337baf2ed9634811837c81)|`implemented proper equality testing`|



---

archive/issue_comments_244965.json:
```json
{
    "body": "<a id='comment:8'></a>\ndone, ready for review...",
    "created_at": "2014-01-29T08:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244965",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:8'></a>
done, ready for review...



---

archive/issue_comments_244966.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-01-29T20:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244966",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_059599.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15533#event-59599"
}
```



---

archive/issue_comments_244967.json:
```json
{
    "body": "<a id='comment:11'></a>\nThis breaks doctests, e.g.\n\n```\nFile \"src/sage/combinat/k_tableau.py\", line 3941, in sage.combinat.k_tableau.StrongTableaux._repr_\nFailed example:\n    StrongTableaux(3, [2,2], weight=[1,1,1,1])\nExpected:\n    Set of strong 3-tableaux of shape [2, 2] and of weight (1, 1, 1, 1)\nGot:\n    Set of strong 3-tableaux of shape [[2, 2], []] and of weight (1, 1, 1, 1)\n```",
    "created_at": "2014-02-02T14:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244967",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>
This breaks doctests, e.g.

```
File "src/sage/combinat/k_tableau.py", line 3941, in sage.combinat.k_tableau.StrongTableaux._repr_
Failed example:
    StrongTableaux(3, [2,2], weight=[1,1,1,1])
Expected:
    Set of strong 3-tableaux of shape [2, 2] and of weight (1, 1, 1, 1)
Got:
    Set of strong 3-tableaux of shape [[2, 2], []] and of weight (1, 1, 1, 1)
```



---

archive/issue_comments_244968.json:
```json
{
    "body": "<a id='comment:12'></a>\nOkay, the problem is that people use\n\n```\nsage: C == []\n```\nfor a core `C` elsewhere in the code. And this cannot work out if we want to make the hash (and thus the equality) dependent on the additional parameter.\n\nTravis (or someone else), could you take over and solve this issue how ever you think it is appropriate (including to decide that we do not want this ticket to be merged)?\n\nCheers, Christian",
    "created_at": "2014-02-03T12:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244968",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:12'></a>
Okay, the problem is that people use

```
sage: C == []
```
for a core `C` elsewhere in the code. And this cannot work out if we want to make the hash (and thus the equality) dependent on the additional parameter.

Travis (or someone else), could you take over and solve this issue how ever you think it is appropriate (including to decide that we do not want this ticket to be merged)?

Cheers, Christian



---

archive/issue_comments_244969.json:
```json
{
    "body": "<a id='comment:13'></a>\nNew commits:\n|                                                                                                                                          |                                                                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|\n|[bb50f0f](https://github.com/sagemath/sagetrac-mirror/commit/bb50f0f39f59324d3facdcbde06021f2ce96b684)|`Merge remote-tracking branch 'origin/u/stumpc5/ticket/15533' into public/combinat/cores/15533`|\n|[017c101](https://github.com/sagemath/sagetrac-mirror/commit/017c101babe9d7edaa5a39e844de1d2988e0f810)|`fixed comparison in strong tableaux code for empty core`|",
    "created_at": "2014-02-05T06:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244969",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:13'></a>
New commits:
|                                                                                                                                          |                                                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
|[bb50f0f](https://github.com/sagemath/sagetrac-mirror/commit/bb50f0f39f59324d3facdcbde06021f2ce96b684)|`Merge remote-tracking branch 'origin/u/stumpc5/ticket/15533' into public/combinat/cores/15533`|
|[017c101](https://github.com/sagemath/sagetrac-mirror/commit/017c101babe9d7edaa5a39e844de1d2988e0f810)|`fixed comparison in strong tableaux code for empty core`|



---

archive/issue_comments_244970.json:
```json
{
    "body": "Changing commit from \"ede1f5cd827ac168a4337baf2ed9634811837c81\" to \"017c101babe9d7edaa5a39e844de1d2988e0f810\"",
    "created_at": "2014-02-05T06:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244970",
    "user": "https://github.com/anneschilling"
}
```

Changing commit from "ede1f5cd827ac168a4337baf2ed9634811837c81" to "017c101babe9d7edaa5a39e844de1d2988e0f810"



---

archive/issue_comments_244971.json:
```json
{
    "body": "Changing branch from \"u/stumpc5/ticket/15533\" to \"public/combinat/cores/15533\"",
    "created_at": "2014-02-05T06:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244971",
    "user": "https://github.com/anneschilling"
}
```

Changing branch from "u/stumpc5/ticket/15533" to "public/combinat/cores/15533"



---

archive/issue_comments_244972.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [stumpc5](#comment%3A12):\n> Okay, the problem is that people use\n> \n> ```\n> sage: C == []\n> ```\n> for a core `C` elsewhere in the code. And this cannot work out if we want to make the hash (and thus the equality) dependent on the additional parameter.\n\n\nFixed! So hopefully this can be merged now!\n\nAnne",
    "created_at": "2014-02-05T06:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244972",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:14'></a>
Replying to [stumpc5](#comment%3A12):
> Okay, the problem is that people use
> 
> ```
> sage: C == []
> ```
> for a core `C` elsewhere in the code. And this cannot work out if we want to make the hash (and thus the equality) dependent on the additional parameter.


Fixed! So hopefully this can be merged now!

Anne



---

archive/issue_comments_244973.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-02-08T14:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15533#issuecomment-244973",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059600.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-08T14:02:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15533",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15533#event-59600"
}
```
