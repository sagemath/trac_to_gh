# Issue 15622: Immutable graphs must not be relabeled

archive/issues_015385.json:
```json
{
    "body": "Now \n\n```\nsage: Graph(graphs.PetersenGraph(), immutable=True).relabel({})\n...\nValueError: Thou shalt not relabel an immutable graph\n```\n\nBefore, the following happened \n\n```\nsage: Graph(graphs.PetersenGraph(), data_structure=\"static_sparse\").relabel({})\n...\nAttributeError: 'StaticSparseBackend' object has no attribute 'vertex_ints'\n```\n\nThis is actually another bug, as there should be a `vertex_ints` variable in static sparse graphs. But that's another problem to be addressed in another ticket `:-P`\n\nNathann\n\nCC:  simonking\n\nBranch: [u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)\n\nCommit: [6398780eca28da56527b3360d5fd597308517db9](https://github.com/sagemath/sagetrac-mirror/commit/6398780eca28da56527b3360d5fd597308517db9)\n\nReviewer: Simon King\n\nAuthor: Nathann Cohen\n\nDependencies: #15619\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15622\n\n",
    "closed_at": "2014-01-07T04:55:39Z",
    "created_at": "2014-01-02T21:20:19Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.1",
    "title": "Immutable graphs must not be relabeled",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15622",
    "user": "https://github.com/nathanncohen"
}
```
Now 

```
sage: Graph(graphs.PetersenGraph(), immutable=True).relabel({})
...
ValueError: Thou shalt not relabel an immutable graph
```

Before, the following happened 

```
sage: Graph(graphs.PetersenGraph(), data_structure="static_sparse").relabel({})
...
AttributeError: 'StaticSparseBackend' object has no attribute 'vertex_ints'
```

This is actually another bug, as there should be a `vertex_ints` variable in static sparse graphs. But that's another problem to be addressed in another ticket `:-P`

Nathann

CC:  simonking

Branch: [u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)

Commit: [6398780eca28da56527b3360d5fd597308517db9](https://github.com/sagemath/sagetrac-mirror/commit/6398780eca28da56527b3360d5fd597308517db9)

Reviewer: Simon King

Author: Nathann Cohen

Dependencies: #15619

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15622





---

archive/issue_comments_255603.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-02T21:20:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255603",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_255604.json:
```json
{
    "body": "Branch: [u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)",
    "created_at": "2014-01-02T21:20:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255604",
    "user": "https://github.com/nathanncohen"
}
```

Branch: [u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)



---

archive/issue_comments_255605.json:
```json
{
    "body": "Changing dependencies from \"#15603\" to \"#15619\"",
    "created_at": "2014-01-02T21:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255605",
    "user": "https://github.com/nathanncohen"
}
```

Changing dependencies from "#15603" to "#15619"



---

archive/issue_comments_255606.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                         |                                                     |\n|---------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[0f57805](https://github.com/sagemath/sagetrac-mirror/commit/0f57805)|`trac #15622: Immutable graphs must not be relabeled`|\n|[c441178](https://github.com/sagemath/sagetrac-mirror/commit/c441178)|`trac #15619: bug in the former definition; exception to avoid it in the future`|\n|[0229348](https://github.com/sagemath/sagetrac-mirror/commit/0229348)|`trac #15619: Pickling of immutable graphs`|\n|[7860f39](https://github.com/sagemath/sagetrac-mirror/commit/7860f39)|`trac #15603: \"immutable=True\" for Graph/Digraph __init__ and copy()`|\n|[2525d22](https://github.com/sagemath/sagetrac-mirror/commit/2525d22)|`Trac 15278: Fix syntax error in doc test`|\n|[fcf9e30](https://github.com/sagemath/sagetrac-mirror/commit/fcf9e30)|`Trac 15278: Only graphs that use the static backend are identical with their copy`|\n|[8fc9c94](https://github.com/sagemath/sagetrac-mirror/commit/8fc9c94)|`Merge branch 'develop' into ticket/15278`|\n|[51d6328](https://github.com/sagemath/sagetrac-mirror/commit/51d6328)|`Trac 15278: Error messages explain how to create (im)mutable graph copy`|\n|[2fc8a77](https://github.com/sagemath/sagetrac-mirror/commit/2fc8a77)|`Make digraphs using the static backend immutable and hashable`|\n|[07bad46](https://github.com/sagemath/sagetrac-mirror/commit/07bad46)|`Merge branch 'u/ncohen/15491' of git://trac.sagemath.org/sage into ticket/15278`|",
    "created_at": "2014-01-02T21:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255606",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                         |                                                     |
|---------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[0f57805](https://github.com/sagemath/sagetrac-mirror/commit/0f57805)|`trac #15622: Immutable graphs must not be relabeled`|
|[c441178](https://github.com/sagemath/sagetrac-mirror/commit/c441178)|`trac #15619: bug in the former definition; exception to avoid it in the future`|
|[0229348](https://github.com/sagemath/sagetrac-mirror/commit/0229348)|`trac #15619: Pickling of immutable graphs`|
|[7860f39](https://github.com/sagemath/sagetrac-mirror/commit/7860f39)|`trac #15603: "immutable=True" for Graph/Digraph __init__ and copy()`|
|[2525d22](https://github.com/sagemath/sagetrac-mirror/commit/2525d22)|`Trac 15278: Fix syntax error in doc test`|
|[fcf9e30](https://github.com/sagemath/sagetrac-mirror/commit/fcf9e30)|`Trac 15278: Only graphs that use the static backend are identical with their copy`|
|[8fc9c94](https://github.com/sagemath/sagetrac-mirror/commit/8fc9c94)|`Merge branch 'develop' into ticket/15278`|
|[51d6328](https://github.com/sagemath/sagetrac-mirror/commit/51d6328)|`Trac 15278: Error messages explain how to create (im)mutable graph copy`|
|[2fc8a77](https://github.com/sagemath/sagetrac-mirror/commit/2fc8a77)|`Make digraphs using the static backend immutable and hashable`|
|[07bad46](https://github.com/sagemath/sagetrac-mirror/commit/07bad46)|`Merge branch 'u/ncohen/15491' of git://trac.sagemath.org/sage into ticket/15278`|



---

archive/issue_comments_255607.json:
```json
{
    "body": "Commit: [0f578050749912c5f5c66824cf50475aa74c0f23](https://github.com/sagemath/sagetrac-mirror/commit/0f578050749912c5f5c66824cf50475aa74c0f23)",
    "created_at": "2014-01-02T21:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255607",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Commit: [0f578050749912c5f5c66824cf50475aa74c0f23](https://github.com/sagemath/sagetrac-mirror/commit/0f578050749912c5f5c66824cf50475aa74c0f23)



---

archive/issue_comments_255608.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe code looks good. Perhaps the error message should hint at how to create a mutable copy?",
    "created_at": "2014-01-02T22:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255608",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>
The code looks good. Perhaps the error message should hint at how to create a mutable copy?



---

archive/issue_comments_255609.json:
```json
{
    "body": "<a id='comment:5'></a>\nOKayyyyyyyy.. What about this ?\n\nNathann",
    "created_at": "2014-01-03T08:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255609",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
OKayyyyyyyy.. What about this ?

Nathann



---

archive/issue_comments_255610.json:
```json
{
    "body": "Changing commit from \"[0f578050749912c5f5c66824cf50475aa74c0f23](https://github.com/sagemath/sagetrac-mirror/commit/0f578050749912c5f5c66824cf50475aa74c0f23)\" to \"[529f7850c111c19522a8f18f9ce829e1e3a5b769](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)\"",
    "created_at": "2014-01-03T08:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255610",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[0f578050749912c5f5c66824cf50475aa74c0f23](https://github.com/sagemath/sagetrac-mirror/commit/0f578050749912c5f5c66824cf50475aa74c0f23)" to "[529f7850c111c19522a8f18f9ce829e1e3a5b769](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)"



---

archive/issue_comments_255611.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                         |                                                 |\n|---------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[529f785](https://github.com/sagemath/sagetrac-mirror/commit/529f785)|`trac #15622: More informative exception message`|",
    "created_at": "2014-01-03T08:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255611",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                         |                                                 |
|---------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[529f785](https://github.com/sagemath/sagetrac-mirror/commit/529f785)|`trac #15622: More informative exception message`|



---

archive/issue_comments_255612.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-01-03T13:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255612",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_255613.json:
```json
{
    "body": "<a id='comment:7'></a>\nOops:\n\n```\nsage -t --long src/sage/graphs/base/static_sparse_backend.pyx\n**********************************************************************\nFile \"src/sage/graphs/base/static_sparse_backend.pyx\", line 422, in sage.graphs.base.static_sparse_backend.StaticSparseBackend.relabel\nFailed example:\n    g.relabel([],True)\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: Thou shalt not remove a vertex from an immutable graph\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.graphs.base.static_sparse_backend.StaticSparseBackend.relabel[2]>\", line 1, in <module>\n        g.relabel([],True)\n    AttributeError: 'sage.graphs.base.static_sparse_backend.StaticSpars' object has no attribute 'relabel'\n```\nThat is the only error, and I'll probably fix it in a review commit.",
    "created_at": "2014-01-03T13:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255613",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>
Oops:

```
sage -t --long src/sage/graphs/base/static_sparse_backend.pyx
**********************************************************************
File "src/sage/graphs/base/static_sparse_backend.pyx", line 422, in sage.graphs.base.static_sparse_backend.StaticSparseBackend.relabel
Failed example:
    g.relabel([],True)
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Thou shalt not remove a vertex from an immutable graph
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.graphs.base.static_sparse_backend.StaticSparseBackend.relabel[2]>", line 1, in <module>
        g.relabel([],True)
    AttributeError: 'sage.graphs.base.static_sparse_backend.StaticSpars' object has no attribute 'relabel'
```
That is the only error, and I'll probably fix it in a review commit.



---

archive/issue_comments_255614.json:
```json
{
    "body": "<a id='comment:8'></a>\nWTF??????\n\nWhen I do the obvious and change `StaticSparseCGraph` into `StaticSparseBackend`, I get\n\n```\nFailed example:\n    g.relabel([],True)\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: Thou shalt not remove a vertex from an immutable graph\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.graphs.base.static_sparse_backend.StaticSparseBackend.relabel[2]>\", line 1, in <module>\n        g.relabel([],True)\n      File \"static_sparse_backend.pyx\", line 428, in sage.graphs.base.static_sparse_backend.StaticSparseBackend.relabel (sage/graphs/base/static_sparse_backend.c:4740)\n    ValueError: Thou shalt not relabel an immutable graph\n```\nWhere does the blankline come from? And why is there no blankline when doing the test interactively?",
    "created_at": "2014-01-03T13:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255614",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>
WTF??????

When I do the obvious and change `StaticSparseCGraph` into `StaticSparseBackend`, I get

```
Failed example:
    g.relabel([],True)
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Thou shalt not remove a vertex from an immutable graph
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.graphs.base.static_sparse_backend.StaticSparseBackend.relabel[2]>", line 1, in <module>
        g.relabel([],True)
      File "static_sparse_backend.pyx", line 428, in sage.graphs.base.static_sparse_backend.StaticSparseBackend.relabel (sage/graphs/base/static_sparse_backend.c:4740)
    ValueError: Thou shalt not relabel an immutable graph
```
Where does the blankline come from? And why is there no blankline when doing the test interactively?



---

archive/issue_comments_255615.json:
```json
{
    "body": "<a id='comment:9'></a>\nAhaaa! You had a wrong class *and* a wrong error message in your test (\"remove a vertex\" versus \"relabel\").",
    "created_at": "2014-01-03T13:11:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255615",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'></a>
Ahaaa! You had a wrong class *and* a wrong error message in your test ("remove a vertex" versus "relabel").



---

archive/issue_comments_255616.json:
```json
{
    "body": "<a id='comment:10'></a>\nI don't get what the \"obvious change from `StaticSparseCGraph` into `StaticSparseBackend`\" could be `O_o`\n\nNathann",
    "created_at": "2014-01-03T13:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255616",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
I don't get what the "obvious change from `StaticSparseCGraph` into `StaticSparseBackend`" could be `O_o`

Nathann



---

archive/issue_comments_255617.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [ncohen](#comment%3A10):\n> I don't get what the \"obvious change from `StaticSparseCGraph` into `StaticSparseBackend`\" could be `O_o`\n\n\n```diff\ndiff --git a/src/sage/graphs/base/static_sparse_backend.pyx b/src/sage/graphs/base/static_sparse_backend.pyx\nindex 9b5a8fe..e5b889e 100644\n--- a/src/sage/graphs/base/static_sparse_backend.pyx\n+++ b/src/sage/graphs/base/static_sparse_backend.pyx\n@@ -417,12 +417,12 @@ class StaticSparseBackend(CGraphBackend):\n \n         TEST::\n \n-            sage: from sage.graphs.base.static_sparse_backend import StaticSparseCGraph\n-            sage: g = StaticSparseCGraph(graphs.PetersenGraph())\n+            sage: from sage.graphs.base.static_sparse_backend import StaticSparseBackend\n+            sage: g = StaticSparseBackend(graphs.PetersenGraph())\n             sage: g.relabel([],True)\n             Traceback (most recent call last):\n             ...\n-            ValueError: Thou shalt not remove a vertex from an immutable graph\n+            ValueError: Thou shalt not relabel an immutable graph\n \n         \"\"\"\n         raise ValueError(\"Thou shalt not relabel an immutable graph\")\n```\n`StaticSparceCGraph` simply is the wrong class.",
    "created_at": "2014-01-03T13:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255617",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:11'></a>
Replying to [ncohen](#comment%3A10):
> I don't get what the "obvious change from `StaticSparseCGraph` into `StaticSparseBackend`" could be `O_o`


```diff
diff --git a/src/sage/graphs/base/static_sparse_backend.pyx b/src/sage/graphs/base/static_sparse_backend.pyx
index 9b5a8fe..e5b889e 100644
--- a/src/sage/graphs/base/static_sparse_backend.pyx
+++ b/src/sage/graphs/base/static_sparse_backend.pyx
@@ -417,12 +417,12 @@ class StaticSparseBackend(CGraphBackend):
 
         TEST::
 
-            sage: from sage.graphs.base.static_sparse_backend import StaticSparseCGraph
-            sage: g = StaticSparseCGraph(graphs.PetersenGraph())
+            sage: from sage.graphs.base.static_sparse_backend import StaticSparseBackend
+            sage: g = StaticSparseBackend(graphs.PetersenGraph())
             sage: g.relabel([],True)
             Traceback (most recent call last):
             ...
-            ValueError: Thou shalt not remove a vertex from an immutable graph
+            ValueError: Thou shalt not relabel an immutable graph
 
         """
         raise ValueError("Thou shalt not relabel an immutable graph")
```
`StaticSparceCGraph` simply is the wrong class.



---

archive/issue_comments_255618.json:
```json
{
    "body": "<a id='comment:12'></a>\nFor the record: It already takes 5 minutes to push my review commit.",
    "created_at": "2014-01-03T13:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255618",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:12'></a>
For the record: It already takes 5 minutes to push my review commit.



---

archive/issue_comments_255619.json:
```json
{
    "body": "Changing branch from \"[u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)\" to \"[u/SimonKing/ticket/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15622)\"",
    "created_at": "2014-01-03T13:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255619",
    "user": "https://github.com/simon-king-jena"
}
```

Changing branch from "[u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)" to "[u/SimonKing/ticket/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15622)"



---

archive/issue_comments_255620.json:
```json
{
    "body": "<a id='comment:14'></a>\nOh. Ahem. Right `O_O;;;;;;`\n\nSorryyyyyyyyyyyyyyyyyyyyyyyyyyy `O_O;;;;;`\n\nNathann\n\nReview commit : I often Ctrl+C it before it ends. Trac sends the mails almost instantaneously, the trac ticket is updated at the same time. I just have no idea what it does afterwards.",
    "created_at": "2014-01-03T13:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255620",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
Oh. Ahem. Right `O_O;;;;;;`

Sorryyyyyyyyyyyyyyyyyyyyyyyyyyy `O_O;;;;;`

Nathann

Review commit : I often Ctrl+C it before it ends. Trac sends the mails almost instantaneously, the trac ticket is updated at the same time. I just have no idea what it does afterwards.



---

archive/issue_comments_255621.json:
```json
{
    "body": "Changing branch from \"[u/SimonKing/ticket/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15622)\" to \"[u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)\"",
    "created_at": "2014-01-03T13:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255621",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "[u/SimonKing/ticket/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15622)" to "[u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)"



---

archive/issue_comments_255622.json:
```json
{
    "body": "<a id='comment:15'></a>\nIt seems that once more I have to manually upload the commit.",
    "created_at": "2014-01-03T13:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255622",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:15'></a>
It seems that once more I have to manually upload the commit.



---

archive/issue_comments_255623.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-01-03T13:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255623",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_255624.json:
```json
{
    "body": "Changing branch from \"[u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)\" to \"[u/SimonKing/ticket/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15622)\"",
    "created_at": "2014-01-03T13:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255624",
    "user": "https://github.com/simon-king-jena"
}
```

Changing branch from "[u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)" to "[u/SimonKing/ticket/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15622)"



---

archive/issue_comments_255625.json:
```json
{
    "body": "Changing commit from \"[529f7850c111c19522a8f18f9ce829e1e3a5b769](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)\" to \"[2245c020cd80a1d248cf0a453270f4dbd9d12f36](https://github.com/sagemath/sagetrac-mirror/commit/2245c020cd80a1d248cf0a453270f4dbd9d12f36)\"",
    "created_at": "2014-01-03T13:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255625",
    "user": "https://github.com/simon-king-jena"
}
```

Changing commit from "[529f7850c111c19522a8f18f9ce829e1e3a5b769](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)" to "[2245c020cd80a1d248cf0a453270f4dbd9d12f36](https://github.com/sagemath/sagetrac-mirror/commit/2245c020cd80a1d248cf0a453270f4dbd9d12f36)"



---

archive/issue_comments_255626.json:
```json
{
    "body": "<a id='comment:16'></a>\nI think it's because you should set the branch name *before* pushing the commit. Otherwise nothing is triggered on the trac server's side.\n\nNathann",
    "created_at": "2014-01-03T13:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255626",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>
I think it's because you should set the branch name *before* pushing the commit. Otherwise nothing is triggered on the trac server's side.

Nathann



---

archive/issue_comments_255627.json:
```json
{
    "body": "<a id='comment:17'></a>\nOkay. We are now in the Volker-Feared situation of a ticket which has a positive review, with a dependency which is still in `needs_review` `:-P`\n\nThanks for this commit !\n\nNathann",
    "created_at": "2014-01-03T13:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255627",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>
Okay. We are now in the Volker-Feared situation of a ticket which has a positive review, with a dependency which is still in `needs_review` `:-P`

Thanks for this commit !

Nathann



---

archive/issue_comments_255628.json:
```json
{
    "body": "<a id='comment:18'></a>\nBy the way, isn't the trac server 99999x times faster than yesterday ? Andrew said he would do something about it and it looks like he did `O_O`\n\nNathann",
    "created_at": "2014-01-03T13:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255628",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
By the way, isn't the trac server 99999x times faster than yesterday ? Andrew said he would do something about it and it looks like he did `O_O`

Nathann



---

archive/issue_events_052246.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-04T19:05:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15622#event-52246"
}
```



---

archive/issue_events_052247.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-05T07:19:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15622#event-52247"
}
```



---

archive/issue_events_052248.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-05T07:19:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15622#event-52248"
}
```



---

archive/issue_comments_255629.json:
```json
{
    "body": "Reviewer: Simon King",
    "created_at": "2014-01-05T07:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255629",
    "user": "https://github.com/vbraun"
}
```

Reviewer: Simon King



---

archive/issue_comments_255630.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-01-05T08:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255630",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_255631.json:
```json
{
    "body": "<a id='comment:22'></a>\nVarious doctests fail (see also patchbot)",
    "created_at": "2014-01-05T08:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255631",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
Various doctests fail (see also patchbot)



---

archive/issue_comments_255632.json:
```json
{
    "body": "<a id='comment:23'></a>\nGloops. Right.",
    "created_at": "2014-01-05T08:24:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255632",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>
Gloops. Right.



---

archive/issue_comments_255633.json:
```json
{
    "body": "Changing branch from \"[u/SimonKing/ticket/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15622)\" to \"[u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)\"",
    "created_at": "2014-01-05T09:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255633",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "[u/SimonKing/ticket/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15622)" to "[u/ncohen/15622](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15622)"



---

archive/issue_comments_255634.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-01-05T09:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255634",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_255635.json:
```json
{
    "body": "Changing commit from \"[2245c020cd80a1d248cf0a453270f4dbd9d12f36](https://github.com/sagemath/sagetrac-mirror/commit/2245c020cd80a1d248cf0a453270f4dbd9d12f36)\" to \"[529f7850c111c19522a8f18f9ce829e1e3a5b769](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)\"",
    "created_at": "2014-01-05T09:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255635",
    "user": "https://github.com/nathanncohen"
}
```

Changing commit from "[2245c020cd80a1d248cf0a453270f4dbd9d12f36](https://github.com/sagemath/sagetrac-mirror/commit/2245c020cd80a1d248cf0a453270f4dbd9d12f36)" to "[529f7850c111c19522a8f18f9ce829e1e3a5b769](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)"



---

archive/issue_comments_255636.json:
```json
{
    "body": "<a id='comment:24'></a>\nThat's the only way I found to make this work before #15623 is merged `T_T`\n\nNathann",
    "created_at": "2014-01-05T09:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255636",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>
That's the only way I found to make this work before #15623 is merged `T_T`

Nathann



---

archive/issue_comments_255637.json:
```json
{
    "body": "Changing commit from \"[529f7850c111c19522a8f18f9ce829e1e3a5b769](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)\" to \"[6398780eca28da56527b3360d5fd597308517db9](https://github.com/sagemath/sagetrac-mirror/commit/6398780eca28da56527b3360d5fd597308517db9)\"",
    "created_at": "2014-01-05T09:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255637",
    "user": "https://github.com/nathanncohen"
}
```

Changing commit from "[529f7850c111c19522a8f18f9ce829e1e3a5b769](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)" to "[6398780eca28da56527b3360d5fd597308517db9](https://github.com/sagemath/sagetrac-mirror/commit/6398780eca28da56527b3360d5fd597308517db9)"



---

archive/issue_comments_255638.json:
```json
{
    "body": "<a id='comment:25'></a>\nOkay, it looks like the automatic message does not work, but the branch is updated !\n\nNathann",
    "created_at": "2014-01-05T09:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255638",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:25'></a>
Okay, it looks like the automatic message does not work, but the branch is updated !

Nathann



---

archive/issue_comments_255639.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [vbraun](#comment%3A22):\n> Various doctests fail (see also patchbot)\n\n\nWTF? When I reviewed it, things worked. Or did I accidentally merge other tickets that aren't dependencies for this?",
    "created_at": "2014-01-05T09:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255639",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:26'></a>
Replying to [vbraun](#comment%3A22):
> Various doctests fail (see also patchbot)


WTF? When I reviewed it, things worked. Or did I accidentally merge other tickets that aren't dependencies for this?



---

archive/issue_comments_255640.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-06T15:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255640",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_255641.json:
```json
{
    "body": "<a id='comment:27'></a>\nHooray. After pulling from the ticket branch and merging with the current develop branch, `make ptest` results in\n\n```\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 3791.7 seconds\n    cpu time: 6340.1 seconds\n    cumulative wall time: 7304.6 seconds\n```\nNathann's last commit looks like the right thing to do. Hence, I hope this time my positive review will persist...",
    "created_at": "2014-01-06T15:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255641",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:27'></a>
Hooray. After pulling from the ticket branch and merging with the current develop branch, `make ptest` results in

```
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 3791.7 seconds
    cpu time: 6340.1 seconds
    cumulative wall time: 7304.6 seconds
```
Nathann's last commit looks like the right thing to do. Hence, I hope this time my positive review will persist...



---

archive/issue_comments_255642.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-01-07T04:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15622#issuecomment-255642",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_052249.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-07T04:55:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15622#event-52249"
}
```
