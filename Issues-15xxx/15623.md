# Issue 15623: Immutable graph backend for Posets

archive/issues_015386.json:
```json
{
    "body": "At long, long last, it passes all tests `:-P`\n\nThank you Simon for your help with all this !!!\n\nNathann\n\nCC:  simonking\n\nReviewer: Simon King\n\nAuthor: Nathann Cohen\n\nBranch: u/SimonKing/ticket/15623\n\nDependencies: #15622\n\nCommit: c5b6d591982ef3e8d5902ecd9f7bfbd05cbb85a4\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15623\n\n",
    "closed_at": "2014-02-01T19:39:14Z",
    "created_at": "2014-01-02T21:36:09Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Immutable graph backend for Posets",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15623",
    "user": "https://github.com/nathanncohen"
}
```
At long, long last, it passes all tests `:-P`

Thank you Simon for your help with all this !!!

Nathann

CC:  simonking

Reviewer: Simon King

Author: Nathann Cohen

Branch: u/SimonKing/ticket/15623

Dependencies: #15622

Commit: c5b6d591982ef3e8d5902ecd9f7bfbd05cbb85a4

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15623





---

archive/issue_comments_247510.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-02T21:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247510",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_247511.json:
```json
{
    "body": "Changing commit from \"\" to \"b6ed0387bb16a0102cc2792494d120df7b0fe292\"",
    "created_at": "2014-01-03T11:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247511",
    "user": "https://github.com/nathanncohen"
}
```

Changing commit from "" to "b6ed0387bb16a0102cc2792494d120df7b0fe292"



---

archive/issue_comments_247512.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ncohen/15623\"",
    "created_at": "2014-01-03T11:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247512",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "u/ncohen/15623"



---

archive/issue_comments_247513.json:
```json
{
    "body": "<a id='comment:2'></a>\nLast 10 new commits:\n|                                                                                                         |                                                 |\n|---------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[b6ed038](https://github.com/sagemath/sagetrac-mirror/commit/b6ed038)|`trac #15623: Immutable graph backend for Posets`|\n|[0f57805](https://github.com/sagemath/sagetrac-mirror/commit/0f57805)|`trac #15622: Immutable graphs must not be relabeled`|\n|[c441178](https://github.com/sagemath/sagetrac-mirror/commit/c441178)|`trac #15619: bug in the former definition; exception to avoid it in the future`|\n|[0229348](https://github.com/sagemath/sagetrac-mirror/commit/0229348)|`trac #15619: Pickling of immutable graphs`|\n|[7860f39](https://github.com/sagemath/sagetrac-mirror/commit/7860f39)|`trac #15603: \"immutable=True\" for Graph/Digraph __init__ and copy()`|\n|[2525d22](https://github.com/sagemath/sagetrac-mirror/commit/2525d22)|`Trac 15278: Fix syntax error in doc test`|\n|[fcf9e30](https://github.com/sagemath/sagetrac-mirror/commit/fcf9e30)|`Trac 15278: Only graphs that use the static backend are identical with their copy`|\n|[8fc9c94](https://github.com/sagemath/sagetrac-mirror/commit/8fc9c94)|`Merge branch 'develop' into ticket/15278`|\n|[51d6328](https://github.com/sagemath/sagetrac-mirror/commit/51d6328)|`Trac 15278: Error messages explain how to create (im)mutable graph copy`|\n|[2fc8a77](https://github.com/sagemath/sagetrac-mirror/commit/2fc8a77)|`Make digraphs using the static backend immutable and hashable`|",
    "created_at": "2014-01-03T11:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247513",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>
Last 10 new commits:
|                                                                                                         |                                                 |
|---------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[b6ed038](https://github.com/sagemath/sagetrac-mirror/commit/b6ed038)|`trac #15623: Immutable graph backend for Posets`|
|[0f57805](https://github.com/sagemath/sagetrac-mirror/commit/0f57805)|`trac #15622: Immutable graphs must not be relabeled`|
|[c441178](https://github.com/sagemath/sagetrac-mirror/commit/c441178)|`trac #15619: bug in the former definition; exception to avoid it in the future`|
|[0229348](https://github.com/sagemath/sagetrac-mirror/commit/0229348)|`trac #15619: Pickling of immutable graphs`|
|[7860f39](https://github.com/sagemath/sagetrac-mirror/commit/7860f39)|`trac #15603: "immutable=True" for Graph/Digraph __init__ and copy()`|
|[2525d22](https://github.com/sagemath/sagetrac-mirror/commit/2525d22)|`Trac 15278: Fix syntax error in doc test`|
|[fcf9e30](https://github.com/sagemath/sagetrac-mirror/commit/fcf9e30)|`Trac 15278: Only graphs that use the static backend are identical with their copy`|
|[8fc9c94](https://github.com/sagemath/sagetrac-mirror/commit/8fc9c94)|`Merge branch 'develop' into ticket/15278`|
|[51d6328](https://github.com/sagemath/sagetrac-mirror/commit/51d6328)|`Trac 15278: Error messages explain how to create (im)mutable graph copy`|
|[2fc8a77](https://github.com/sagemath/sagetrac-mirror/commit/2fc8a77)|`Make digraphs using the static backend immutable and hashable`|



---

archive/issue_comments_247514.json:
```json
{
    "body": "Changing work_issues from \"\" to \"doctest error related with hash of mutable graphs\"",
    "created_at": "2014-01-03T23:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247514",
    "user": "https://github.com/simon-king-jena"
}
```

Changing work_issues from "" to "doctest error related with hash of mutable graphs"



---

archive/issue_comments_247515.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-01-03T23:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247515",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_247516.json:
```json
{
    "body": "<a id='comment:3'></a>\nMerging all the dependencies (there are review commits that are not part of your branch), I get this error:\n\n```\nsage -t src/sage/combinat/posets/posets.py\n**********************************************************************\nFile \"src/sage/combinat/posets/posets.py\", line 1488, in sage.combinat.posets.posets.FinitePoset.to_graph\nFailed example:\n    hash(G) == hash(G)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.posets.posets.FinitePoset.to_graph[4]>\", line 1, in <module>\n        hash(G) == hash(G)\n      File \"cachefunc.pyx\", line 1790, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:9772)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py\", line 496, in __hash__\n        raise TypeError(\"This graph is mutable, and thus not hashable. \"\n    TypeError: This graph is mutable, and thus not hashable. Create an immutable copy by `g.copy(data_structure='static_sparse')`\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.combinat.posets.posets.FinitePoset.to_graph\n    [837 tests, 1 failure, 11.73 s]\n```\nI am wondering: Shouldn't the error message say `g.copy(immutable=False)`? What thing did I forgot to merge?\n\nBut in any case, this error needs fixing. I'll see what I can do about it.",
    "created_at": "2014-01-03T23:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247516",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>
Merging all the dependencies (there are review commits that are not part of your branch), I get this error:

```
sage -t src/sage/combinat/posets/posets.py
**********************************************************************
File "src/sage/combinat/posets/posets.py", line 1488, in sage.combinat.posets.posets.FinitePoset.to_graph
Failed example:
    hash(G) == hash(G)
Exception raised:
    Traceback (most recent call last):
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.posets.posets.FinitePoset.to_graph[4]>", line 1, in <module>
        hash(G) == hash(G)
      File "cachefunc.pyx", line 1790, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:9772)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py", line 496, in __hash__
        raise TypeError("This graph is mutable, and thus not hashable. "
    TypeError: This graph is mutable, and thus not hashable. Create an immutable copy by `g.copy(data_structure='static_sparse')`
**********************************************************************
1 item had failures:
   1 of   6 in sage.combinat.posets.posets.FinitePoset.to_graph
    [837 tests, 1 failure, 11.73 s]
```
I am wondering: Shouldn't the error message say `g.copy(immutable=False)`? What thing did I forgot to merge?

But in any case, this error needs fixing. I'll see what I can do about it.



---

archive/issue_comments_247517.json:
```json
{
    "body": "<a id='comment:4'></a>\nAha. This is about a function that returns\n\n```\n        from sage.graphs.graph import Graph\n        G = Graph(self.hasse_diagram())\n        return G\n```\nI suppose this should be\n\n```\n        from sage.graphs.graph import Graph\n        return Graph(self.hasse_diagram(), immutable=True)\n```\ninstead. The fact that the doctest is about hash shows that we want an immutable graph.",
    "created_at": "2014-01-03T23:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247517",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>
Aha. This is about a function that returns

```
        from sage.graphs.graph import Graph
        G = Graph(self.hasse_diagram())
        return G
```
I suppose this should be

```
        from sage.graphs.graph import Graph
        return Graph(self.hasse_diagram(), immutable=True)
```
instead. The fact that the doctest is about hash shows that we want an immutable graph.



---

archive/issue_comments_247518.json:
```json
{
    "body": "Changing branch from \"u/ncohen/15623\" to \"u/SimonKing/ticket/15623\"",
    "created_at": "2014-01-04T00:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247518",
    "user": "https://github.com/simon-king-jena"
}
```

Changing branch from "u/ncohen/15623" to "u/SimonKing/ticket/15623"



---

archive/issue_comments_247519.json:
```json
{
    "body": "<a id='comment:6'></a>\nWith the review commit I just added, all tests should pass. \"Should\". I'll hopefully finish review tomorrow. PS: Again I had to change the commit field manually.",
    "created_at": "2014-01-04T00:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247519",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>
With the review commit I just added, all tests should pass. "Should". I'll hopefully finish review tomorrow. PS: Again I had to change the commit field manually.



---

archive/issue_comments_247520.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-01-04T00:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247520",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_247521.json:
```json
{
    "body": "Changing commit from \"b6ed0387bb16a0102cc2792494d120df7b0fe292\" to \"ee8c39521a203a53876e435e271e59c38a4ca429\"",
    "created_at": "2014-01-04T00:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247521",
    "user": "https://github.com/simon-king-jena"
}
```

Changing commit from "b6ed0387bb16a0102cc2792494d120df7b0fe292" to "ee8c39521a203a53876e435e271e59c38a4ca429"



---

archive/issue_comments_247522.json:
```json
{
    "body": "<a id='comment:7'></a>\nPlease resolve the conflict with your new commit in #15622.",
    "created_at": "2014-01-06T15:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247522",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>
Please resolve the conflict with your new commit in #15622.



---

archive/issue_comments_247523.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-01-06T15:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247523",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_247524.json:
```json
{
    "body": "<a id='comment:8'></a>\nDone !\n\nNathann",
    "created_at": "2014-01-07T08:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247524",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Done !

Nathann



---

archive/issue_comments_247525.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-01-07T08:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247525",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_247526.json:
```json
{
    "body": "Changing commit from \"ee8c39521a203a53876e435e271e59c38a4ca429\" to \"\"",
    "created_at": "2014-01-07T08:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247526",
    "user": "https://github.com/nathanncohen"
}
```

Changing commit from "ee8c39521a203a53876e435e271e59c38a4ca429" to ""



---

archive/issue_comments_247527.json:
```json
{
    "body": "Changing branch from \"u/SimonKing/ticket/15623\" to \"public/15623\"",
    "created_at": "2014-01-07T08:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247527",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "u/SimonKing/ticket/15623" to "public/15623"



---

archive/issue_comments_247528.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[0f57805](https://github.com/sagemath/sagetrac-mirror/commit/0f578050749912c5f5c66824cf50475aa74c0f23)|`trac #15622: Immutable graphs must not be relabeled`|\n|[b6ed038](https://github.com/sagemath/sagetrac-mirror/commit/b6ed0387bb16a0102cc2792494d120df7b0fe292)|`trac #15623: Immutable graph backend for Posets`|\n|[ee8c395](https://github.com/sagemath/sagetrac-mirror/commit/ee8c39521a203a53876e435e271e59c38a4ca429)|`Trac 15623: Let to_graph return an immutable graph`|\n|[dcb8a0b](https://github.com/sagemath/sagetrac-mirror/commit/dcb8a0bae89c392a79d2dfcf149aaba8a8e68dd0)|`trac #15623: rebase on 6.1.beta4`|\n|[529f785](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)|`trac #15622: More informative exception message`|\n|[2245c02](https://github.com/sagemath/sagetrac-mirror/commit/2245c020cd80a1d248cf0a453270f4dbd9d12f36)|`Trac 15622: Review commit, fixing a misspelled doctest`|\n|[60ad575](https://github.com/sagemath/sagetrac-mirror/commit/60ad5755c94dd61d4573a623e3b0c5fe70020d0a)|`trac #15622: Rebase on 6.1.beta3`|\n|[6398780](https://github.com/sagemath/sagetrac-mirror/commit/6398780eca28da56527b3360d5fd597308517db9)|`trac #15622: bugfix before #15623 gets merged`|\n|[3531566](https://github.com/sagemath/sagetrac-mirror/commit/3531566070dbda71deb0864bf8bd86b4ee22960f)|`trac #15623: Rebase on updated #15622`|\n|[95cecd1](https://github.com/sagemath/sagetrac-mirror/commit/95cecd153d53a0666a3f1814831efc5cb15cb516)|`trac #15623: Removing the hack from #15622, update a variable's name`|",
    "created_at": "2014-01-07T08:10:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[0f57805](https://github.com/sagemath/sagetrac-mirror/commit/0f578050749912c5f5c66824cf50475aa74c0f23)|`trac #15622: Immutable graphs must not be relabeled`|
|[b6ed038](https://github.com/sagemath/sagetrac-mirror/commit/b6ed0387bb16a0102cc2792494d120df7b0fe292)|`trac #15623: Immutable graph backend for Posets`|
|[ee8c395](https://github.com/sagemath/sagetrac-mirror/commit/ee8c39521a203a53876e435e271e59c38a4ca429)|`Trac 15623: Let to_graph return an immutable graph`|
|[dcb8a0b](https://github.com/sagemath/sagetrac-mirror/commit/dcb8a0bae89c392a79d2dfcf149aaba8a8e68dd0)|`trac #15623: rebase on 6.1.beta4`|
|[529f785](https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769)|`trac #15622: More informative exception message`|
|[2245c02](https://github.com/sagemath/sagetrac-mirror/commit/2245c020cd80a1d248cf0a453270f4dbd9d12f36)|`Trac 15622: Review commit, fixing a misspelled doctest`|
|[60ad575](https://github.com/sagemath/sagetrac-mirror/commit/60ad5755c94dd61d4573a623e3b0c5fe70020d0a)|`trac #15622: Rebase on 6.1.beta3`|
|[6398780](https://github.com/sagemath/sagetrac-mirror/commit/6398780eca28da56527b3360d5fd597308517db9)|`trac #15622: bugfix before #15623 gets merged`|
|[3531566](https://github.com/sagemath/sagetrac-mirror/commit/3531566070dbda71deb0864bf8bd86b4ee22960f)|`trac #15623: Rebase on updated #15622`|
|[95cecd1](https://github.com/sagemath/sagetrac-mirror/commit/95cecd153d53a0666a3f1814831efc5cb15cb516)|`trac #15623: Removing the hack from #15622, update a variable's name`|



---

archive/issue_comments_247529.json:
```json
{
    "body": "Changing commit from \"\" to \"95cecd153d53a0666a3f1814831efc5cb15cb516\"",
    "created_at": "2014-01-07T08:10:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "95cecd153d53a0666a3f1814831efc5cb15cb516"



---

archive/issue_comments_247530.json:
```json
{
    "body": "<a id='comment:10'></a>\nI don't know how THIS could be read without the ticket numbers `:-P`",
    "created_at": "2014-01-07T08:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247530",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
I don't know how THIS could be read without the ticket numbers `:-P`



---

archive/issue_comments_247531.json:
```json
{
    "body": "<a id='comment:11'></a>\nThe merge was successful (looking at the code), and all tests pass.",
    "created_at": "2014-01-07T22:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247531",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:11'></a>
The merge was successful (looking at the code), and all tests pass.



---

archive/issue_comments_247532.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-07T22:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247532",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_247533.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Simon King\"",
    "created_at": "2014-01-07T22:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247533",
    "user": "https://github.com/simon-king-jena"
}
```

Changing reviewer from "" to "Simon King"



---

archive/issue_comments_247534.json:
```json
{
    "body": "<a id='comment:12'></a>\nWow. Done `:-P`\n\nThaaaaaaaaaaank you very much Simon for all these reviews !\n\nNathann",
    "created_at": "2014-01-07T22:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247534",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
Wow. Done `:-P`

Thaaaaaaaaaaank you very much Simon for all these reviews !

Nathann



---

archive/issue_comments_247535.json:
```json
{
    "body": "<a id='comment:13'></a>\nArggggggg !! Simon !! Simon !! `:-P`\n\nIt's because of these comments on the Tutte thread `:-P`\n\nNathann",
    "created_at": "2014-01-07T22:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247535",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
Arggggggg !! Simon !! Simon !! `:-P`

It's because of these comments on the Tutte thread `:-P`

Nathann



---

archive/issue_comments_247536.json:
```json
{
    "body": "Changing work_issues from \"doctest error related with hash of mutable graphs\" to \"\"",
    "created_at": "2014-01-12T16:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247536",
    "user": "https://github.com/nathanncohen"
}
```

Changing work_issues from "doctest error related with hash of mutable graphs" to ""



---

archive/issue_comments_247537.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-01-27T07:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247537",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_247538.json:
```json
{
    "body": "<a id='comment:15'></a>\nThis doesn't merge with the latest `develop` branch I'm afraid.",
    "created_at": "2014-01-27T07:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247538",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
This doesn't merge with the latest `develop` branch I'm afraid.



---

archive/issue_comments_247539.json:
```json
{
    "body": "Changing branch from \"public/15623\" to \"u/SimonKing/ticket/15623\"",
    "created_at": "2014-01-27T10:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247539",
    "user": "https://github.com/simon-king-jena"
}
```

Changing branch from "public/15623" to "u/SimonKing/ticket/15623"



---

archive/issue_comments_247540.json:
```json
{
    "body": "<a id='comment:17'></a>\nI attempted to merge the develop branch into the ticket branch. Nathann, could you check whether you think the merge was successful? I am running tests now. If it works, then I think it can be back to positive review\n\n---\nNew commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[dae53af](https://github.com/sagemath/sagetrac-mirror/commit/dae53af8e9fbc5b8cbf7da3de2eae92e2e9c0d56)|`Merge branch 'develop' into ticket/15623`|",
    "created_at": "2014-01-27T10:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247540",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:17'></a>
I attempted to merge the develop branch into the ticket branch. Nathann, could you check whether you think the merge was successful? I am running tests now. If it works, then I think it can be back to positive review

---
New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[dae53af](https://github.com/sagemath/sagetrac-mirror/commit/dae53af8e9fbc5b8cbf7da3de2eae92e2e9c0d56)|`Merge branch 'develop' into ticket/15623`|



---

archive/issue_comments_247541.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-01-27T10:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247541",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_247542.json:
```json
{
    "body": "Changing commit from \"95cecd153d53a0666a3f1814831efc5cb15cb516\" to \"dae53af8e9fbc5b8cbf7da3de2eae92e2e9c0d56\"",
    "created_at": "2014-01-27T10:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247542",
    "user": "https://github.com/simon-king-jena"
}
```

Changing commit from "95cecd153d53a0666a3f1814831efc5cb15cb516" to "dae53af8e9fbc5b8cbf7da3de2eae92e2e9c0d56"



---

archive/issue_comments_247543.json:
```json
{
    "body": "<a id='comment:18'></a>\nArrgh. It seems I did wrong.\n\n```\nFile \"src/sage/graphs/generic_graph.py\", line 845, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    hash(H)   # random\nException raised:\n    Traceback (most recent call last):\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.graphs.generic_graph.GenericGraph.?[32]>\", line 1, in <module>\n        hash(H)   # random\n      File \"cachefunc.pyx\", line 1790, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:9772)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py\", line 495, in __hash__\n        return hash((tuple(self.vertices()), tuple(self.edges())))\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py\", line 8770, in vertices\n        return sorted(list(self.vertex_iterator()), key=key)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/elements.py\", line 222, in __lt__\n        return self._cmp(other) == -1 or False\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/elements.py\", line 155, in _cmp\n        return self.parent().compare_elements(self,other)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/posets.py\", line 1851, in compare_elements\n        elif self._hasse_diagram.is_less_than(j, i):\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/hasse_diagram.py\", line 245, in is_less_than\n        return self.is_lequal(x,y)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/hasse_diagram.py\", line 219, in is_lequal\n        (i < j and j in self.breadth_first_search(i))\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py\", line 13335, in breadth_first_search\n        for v in self._backend.breadth_first_search(start, ignore_direction = ignore_direction):\n      File \"c_graph.pyx\", line 2636, in sage.graphs.base.c_graph.CGraphBackend.breadth_first_search (sage/graphs/base/c_graph.c:18478)\n      File \"c_graph.pyx\", line 3039, in sage.graphs.base.c_graph.Search_iterator.__init__ (sage/graphs/base/c_graph.c:20167)\n    AttributeError: 'StaticSparseBackend' object has no attribute 'vertex_ints'\n**********************************************************************\n1 item had failures:\n   1 of 307 in sage.graphs.generic_graph.GenericGraph.?\n    [2519 tests, 1 failure, 50.35 s]\n```",
    "created_at": "2014-01-27T11:17:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247543",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:18'></a>
Arrgh. It seems I did wrong.

```
File "src/sage/graphs/generic_graph.py", line 845, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    hash(H)   # random
Exception raised:
    Traceback (most recent call last):
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.graphs.generic_graph.GenericGraph.?[32]>", line 1, in <module>
        hash(H)   # random
      File "cachefunc.pyx", line 1790, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:9772)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py", line 495, in __hash__
        return hash((tuple(self.vertices()), tuple(self.edges())))
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py", line 8770, in vertices
        return sorted(list(self.vertex_iterator()), key=key)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/elements.py", line 222, in __lt__
        return self._cmp(other) == -1 or False
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/elements.py", line 155, in _cmp
        return self.parent().compare_elements(self,other)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/posets.py", line 1851, in compare_elements
        elif self._hasse_diagram.is_less_than(j, i):
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/hasse_diagram.py", line 245, in is_less_than
        return self.is_lequal(x,y)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/combinat/posets/hasse_diagram.py", line 219, in is_lequal
        (i < j and j in self.breadth_first_search(i))
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py", line 13335, in breadth_first_search
        for v in self._backend.breadth_first_search(start, ignore_direction = ignore_direction):
      File "c_graph.pyx", line 2636, in sage.graphs.base.c_graph.CGraphBackend.breadth_first_search (sage/graphs/base/c_graph.c:18478)
      File "c_graph.pyx", line 3039, in sage.graphs.base.c_graph.Search_iterator.__init__ (sage/graphs/base/c_graph.c:20167)
    AttributeError: 'StaticSparseBackend' object has no attribute 'vertex_ints'
**********************************************************************
1 item had failures:
   1 of 307 in sage.graphs.generic_graph.GenericGraph.?
    [2519 tests, 1 failure, 50.35 s]
```



---

archive/issue_comments_247544.json:
```json
{
    "body": "<a id='comment:19'></a>\nThere are more errors concerning the missing attribute 'vertex_ints'.\n\nNathann, do you have an idea what went wrong?",
    "created_at": "2014-01-27T11:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247544",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:19'></a>
There are more errors concerning the missing attribute 'vertex_ints'.

Nathann, do you have an idea what went wrong?



---

archive/issue_comments_247545.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-01-27T11:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247545",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_247546.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|\n|[c5b6d59](https://github.com/sagemath/sagetrac-mirror/commit/c5b6d591982ef3e8d5902ecd9f7bfbd05cbb85a4)|`Re-insert a bit of code that had been erroneously deleted in the previous merge commit`|",
    "created_at": "2014-01-27T11:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
|[c5b6d59](https://github.com/sagemath/sagetrac-mirror/commit/c5b6d591982ef3e8d5902ecd9f7bfbd05cbb85a4)|`Re-insert a bit of code that had been erroneously deleted in the previous merge commit`|



---

archive/issue_comments_247547.json:
```json
{
    "body": "Changing commit from \"dae53af8e9fbc5b8cbf7da3de2eae92e2e9c0d56\" to \"c5b6d591982ef3e8d5902ecd9f7bfbd05cbb85a4\"",
    "created_at": "2014-01-27T11:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247547",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dae53af8e9fbc5b8cbf7da3de2eae92e2e9c0d56" to "c5b6d591982ef3e8d5902ecd9f7bfbd05cbb85a4"



---

archive/issue_comments_247548.json:
```json
{
    "body": "<a id='comment:22'></a>\nAhaaaa! It seems that I did wrong when merging! Namely, I have removed the vertex_ints attribute.\n\nIn a second commit, I re-introduced it. Well, the joy of git. I don't dare to amend the merge commit and rather add an ugly second commit on top of a wrong first commit `:-P`\n\nAt least one of the failing doctests is now working. So, needs review again, and since I am the reviewer, I suppose I can revert to positive review as soon as `make ptest` passes for me!",
    "created_at": "2014-01-27T11:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247548",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:22'></a>
Ahaaaa! It seems that I did wrong when merging! Namely, I have removed the vertex_ints attribute.

In a second commit, I re-introduced it. Well, the joy of git. I don't dare to amend the merge commit and rather add an ugly second commit on top of a wrong first commit `:-P`

At least one of the failing doctests is now working. So, needs review again, and since I am the reviewer, I suppose I can revert to positive review as soon as `make ptest` passes for me!



---

archive/issue_comments_247549.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-01-27T11:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247549",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_247550.json:
```json
{
    "body": "<a id='comment:23'></a>\n`make ptest` does pass, hence, the merge seems to be successful, and hopefully I am entitled to revert to positive review.",
    "created_at": "2014-01-27T13:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247550",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:23'></a>
`make ptest` does pass, hence, the merge seems to be successful, and hopefully I am entitled to revert to positive review.



---

archive/issue_comments_247551.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-27T13:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247551",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_247552.json:
```json
{
    "body": "<a id='comment:24'></a>\nLooks good to me, but I wasn't able to see directly from git how the conflicts were manually solved. So it works, but it's a bit scary that there does not seem to be a way to see that `O_o`\n\nThank you Simon for doing this ! I was away for 4 days, and rather unreachable in cold cold Hungary. I was there because I had promised a pretty girl a braid of dried chili, and a friend told me they had nice ones in Hungary `:-P`\n\nNathann",
    "created_at": "2014-01-28T14:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247552",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>
Looks good to me, but I wasn't able to see directly from git how the conflicts were manually solved. So it works, but it's a bit scary that there does not seem to be a way to see that `O_o`

Thank you Simon for doing this ! I was away for 4 days, and rather unreachable in cold cold Hungary. I was there because I had promised a pretty girl a braid of dried chili, and a friend told me they had nice ones in Hungary `:-P`

Nathann



---

archive/issue_events_059989.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15623#event-59989"
}
```



---

archive/issue_comments_247553.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-02-01T19:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15623#issuecomment-247553",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059990.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-01T19:39:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15623",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15623#event-59990"
}
```
