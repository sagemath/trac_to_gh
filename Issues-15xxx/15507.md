# Issue 15507: Static sparse graphs on > 65536 vertices

archive/issues_015270.json:
```json
{
    "body": "On Sage-devel [1], Christian reported an humiliating error message :\n\n```\nsage: graphs.PathGraph(70000).diameter()       \n...\nValueError: The graph backend contains more than 65535 nodes\n```\n\nThis is because Sage's \"static_sparse_graphs\" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the \"all pairs shortest path\" (the distance between all pairs of vertices, i.e. a n<sup>2</sup> matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.\n\nSoooooooooo this patch changes these \"unsigned short\" to 32-bits unsigned integers (and note more, because that already doubles the memory requires), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.\n\nI have to mention that this does not make \"diameter\" answer very fast either on instances with more than 65536 vertices `:-/`\n\n```\nsage: %time graphs.PathGraph(70000).diameter()\nCPU times: user 132.41 s, sys: 0.16 s, total: 132.57 s\nWall time: 133.42 s\n69999\n```\n\nBut at least we can build them `T_T`\n\nWhat this patch does:\n* change the type of the static_sparse_graph data structure from ushort to uint32_t, as well as the functions that use it\n* change the `all_pairs_shortest_path_BFS` function to first compute the distance on a `int *` array of length `n`. The values are then copied into the `n^2` matrix of `ushort` if necessary. That's a loss of time, but it's either this or rewriting two versions of the function `:-/`\n* remove a useless `degree` variable in the same function\n* Some simplifications from place to place in the code\n\nNathann\n\n[1] https://groups.google.com/d/msg/sage-devel/2AI1CNdDm6w/jHKh26pMzqcJ\n\n**CC:**  @simon-king-jena @dcoudert stumpc5\n\n**Branch:** [u/ncohen/15507](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15507)\n\n**Commit:** [3b28d9f33d22b458ad21d525dbc55523332145ab](https://github.com/sagemath/sagetrac-mirror/commit/3b28d9f33d22b458ad21d525dbc55523332145ab)\n\n**Reviewer:** Christian Stump\n\n**Author:** Nathann Cohen\n\nIssue created by migration from https://trac.sagemath.org/ticket/15507\n\n",
    "closed_at": "2013-12-20T10:49:06Z",
    "created_at": "2013-12-10T13:38:43Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.1",
    "title": "Static sparse graphs on > 65536 vertices",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/15507",
    "user": "https://github.com/nathanncohen"
}
```
On Sage-devel [1], Christian reported an humiliating error message :

```
sage: graphs.PathGraph(70000).diameter()       
...
ValueError: The graph backend contains more than 65535 nodes
```

This is because Sage's "static_sparse_graphs" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the "all pairs shortest path" (the distance between all pairs of vertices, i.e. a n<sup>2</sup> matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.

Soooooooooo this patch changes these "unsigned short" to 32-bits unsigned integers (and note more, because that already doubles the memory requires), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.

I have to mention that this does not make "diameter" answer very fast either on instances with more than 65536 vertices `:-/`

```
sage: %time graphs.PathGraph(70000).diameter()
CPU times: user 132.41 s, sys: 0.16 s, total: 132.57 s
Wall time: 133.42 s
69999
```

But at least we can build them `T_T`

What this patch does:
* change the type of the static_sparse_graph data structure from ushort to uint32_t, as well as the functions that use it
* change the `all_pairs_shortest_path_BFS` function to first compute the distance on a `int *` array of length `n`. The values are then copied into the `n^2` matrix of `ushort` if necessary. That's a loss of time, but it's either this or rewriting two versions of the function `:-/`
* remove a useless `degree` variable in the same function
* Some simplifications from place to place in the code

Nathann

[1] https://groups.google.com/d/msg/sage-devel/2AI1CNdDm6w/jHKh26pMzqcJ

**CC:**  @simon-king-jena @dcoudert stumpc5

**Branch:** [u/ncohen/15507](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15507)

**Commit:** [3b28d9f33d22b458ad21d525dbc55523332145ab](https://github.com/sagemath/sagetrac-mirror/commit/3b28d9f33d22b458ad21d525dbc55523332145ab)

**Reviewer:** Christian Stump

**Author:** Nathann Cohen

Issue created by migration from https://trac.sagemath.org/ticket/15507





---

archive/issue_comments_195845.json:
```json
{
    "body": "**Branch:** [public/15507](https://github.com/sagemath/sagetrac-mirror/tree/public/15507)",
    "created_at": "2013-12-10T13:42:20Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195845",
    "user": "https://github.com/nathanncohen"
}
```

**Branch:** [public/15507](https://github.com/sagemath/sagetrac-mirror/tree/public/15507)



---

archive/issue_comments_195846.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,12 +1,23 @@\n On Sage-devel [1], Christian reported an humiliating error message :\n \n-\n+```\n+sage: graphs.PathGraph(70000).diameter()       \n+...\n+ValueError: The graph backend contains more than 65535 nodes\n+```\n \n This is because Sage's \"static_sparse_graphs\" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the \"all pairs shortest path\" (the distance between all pairs of vertices, i.e. a n^2 matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.\n \n Soooooooooo this patch changes these \"unsigned short\" to good old integers (which are not unsigned because it makes the code clearer and does not change much), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.\n \n I have to mention that this does not make \"diameter\" answer very fast either on instances with more than 65536 vertices `:-/`\n+\n+```\n+sage: %time graphs.PathGraph(70000).diameter()\n+CPU times: user 132.41 s, sys: 0.16 s, total: 132.57 s\n+Wall time: 133.42 s\n+69999\n+```\n \n But at least we can build them `T_T`\n \n``````\n",
    "created_at": "2013-12-10T13:42:20Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195846",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,12 +1,23 @@
 On Sage-devel [1], Christian reported an humiliating error message :
 
-
+```
+sage: graphs.PathGraph(70000).diameter()       
+...
+ValueError: The graph backend contains more than 65535 nodes
+```
 
 This is because Sage's "static_sparse_graphs" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the "all pairs shortest path" (the distance between all pairs of vertices, i.e. a n^2 matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.
 
 Soooooooooo this patch changes these "unsigned short" to good old integers (which are not unsigned because it makes the code clearer and does not change much), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.
 
 I have to mention that this does not make "diameter" answer very fast either on instances with more than 65536 vertices `:-/`
+
+```
+sage: %time graphs.PathGraph(70000).diameter()
+CPU times: user 132.41 s, sys: 0.16 s, total: 132.57 s
+Wall time: 133.42 s
+69999
+```
 
 But at least we can build them `T_T`
 
``````




---

archive/issue_events_137113.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-12-10T13:42:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15507#event-137113"
}
```



---

archive/issue_comments_195847.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n \n This is because Sage's \"static_sparse_graphs\" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the \"all pairs shortest path\" (the distance between all pairs of vertices, i.e. a n^2 matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.\n \n-Soooooooooo this patch changes these \"unsigned short\" to good old integers (which are not unsigned because it makes the code clearer and does not change much), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.\n+Soooooooooo this patch changes these \"unsigned short\" to 32-bits unsigned integers (and note more, because that already doubles the memory requires), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.\n \n I have to mention that this does not make \"diameter\" answer very fast either on instances with more than 65536 vertices `:-/`\n \n@@ -22,7 +22,7 @@\n But at least we can build them `T_T`\n \n What this patch does:\n-* change the type of the static_sparse_graph data structure from ushort to int, as well as the functions that use it\n+* change the type of the static_sparse_graph data structure from ushort to uint32_t, as well as the functions that use it\n * change the `all_pairs_shortest_path_BFS` function to first compute the distance on a `int *` array of length `n`. The values are then copied into the `n^2` matrix of `ushort` if necessary. That's a loss of time, but it's either this or rewriting two versions of the function `:-/`\n * remove a useless `degree` variable in the same function\n * Some simplifications from place to place in the code\n``````\n",
    "created_at": "2013-12-10T14:12:44Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195847",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 
 This is because Sage's "static_sparse_graphs" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the "all pairs shortest path" (the distance between all pairs of vertices, i.e. a n^2 matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.
 
-Soooooooooo this patch changes these "unsigned short" to good old integers (which are not unsigned because it makes the code clearer and does not change much), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.
+Soooooooooo this patch changes these "unsigned short" to 32-bits unsigned integers (and note more, because that already doubles the memory requires), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.
 
 I have to mention that this does not make "diameter" answer very fast either on instances with more than 65536 vertices `:-/`
 
@@ -22,7 +22,7 @@
 But at least we can build them `T_T`
 
 What this patch does:
-* change the type of the static_sparse_graph data structure from ushort to int, as well as the functions that use it
+* change the type of the static_sparse_graph data structure from ushort to uint32_t, as well as the functions that use it
 * change the `all_pairs_shortest_path_BFS` function to first compute the distance on a `int *` array of length `n`. The values are then copied into the `n^2` matrix of `ushort` if necessary. That's a loss of time, but it's either this or rewriting two versions of the function `:-/`
 * remove a useless `degree` variable in the same function
 * Some simplifications from place to place in the code
``````




---

archive/issue_comments_195848.json:
```json
{
    "body": "**Commit:** [fd4b4a5f81e6186b49ec270574393a4784ea45dd](https://github.com/sagemath/sagetrac-mirror/commit/fd4b4a5f81e6186b49ec270574393a4784ea45dd)",
    "created_at": "2013-12-10T14:13:16Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [fd4b4a5f81e6186b49ec270574393a4784ea45dd](https://github.com/sagemath/sagetrac-mirror/commit/fd4b4a5f81e6186b49ec270574393a4784ea45dd)



---

archive/issue_comments_195849.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[fd4b4a5](https://github.com/sagemath/sagetrac-mirror/commit/fd4b4a5)</td><td><code>trac #15507: Static sparse graphs on > 65536 vertices</code></td></tr></table>\n",
    "created_at": "2013-12-10T14:13:16Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195849",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[fd4b4a5](https://github.com/sagemath/sagetrac-mirror/commit/fd4b4a5)</td><td><code>trac #15507: Static sparse graphs on > 65536 vertices</code></td></tr></table>




---

archive/issue_comments_195850.json:
```json
{
    "body": "<a id='comment:4'></a>\nThanks for working on that - how do I find your branch, it doesn't seem to be valid, and I just fetched and do not see any branch containing \"15507\".\n\nCheers, C.",
    "created_at": "2013-12-10T14:14:56Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195850",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:4'></a>
Thanks for working on that - how do I find your branch, it doesn't seem to be valid, and I just fetched and do not see any branch containing "15507".

Cheers, C.



---

archive/issue_comments_195851.json:
```json
{
    "body": "<a id='comment:5'></a>\nAh, there it is...\n\nI still don't feel super comfortable, it more feels like git is using me rather than how it should be. E.g., in #15228 I don't know how to kick the patchbot. I also do not know how to get rid of branches I checked out once. Anyway, I will look at your changes now.\n\nBest, C.",
    "created_at": "2013-12-10T14:17:27Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195851",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:5'></a>
Ah, there it is...

I still don't feel super comfortable, it more feels like git is using me rather than how it should be. E.g., in #15228 I don't know how to kick the patchbot. I also do not know how to get rid of branches I checked out once. Anyway, I will look at your changes now.

Best, C.



---

archive/issue_comments_195852.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[16b4b26](https://github.com/sagemath/sagetrac-mirror/commit/16b4b26)</td><td><code>trac #15507: Static sparse graphs on > 65536 vertices</code></td></tr></table>\n",
    "created_at": "2013-12-10T14:21:05Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[16b4b26](https://github.com/sagemath/sagetrac-mirror/commit/16b4b26)</td><td><code>trac #15507: Static sparse graphs on > 65536 vertices</code></td></tr></table>




---

archive/issue_comments_195853.json:
```json
{
    "body": "**Changing commit** from \"[fd4b4a5f81e6186b49ec270574393a4784ea45dd](https://github.com/sagemath/sagetrac-mirror/commit/fd4b4a5f81e6186b49ec270574393a4784ea45dd)\" to \"[16b4b265b784192dab04950e8bd57060917d73a9](https://github.com/sagemath/sagetrac-mirror/commit/16b4b265b784192dab04950e8bd57060917d73a9)\".",
    "created_at": "2013-12-10T14:21:05Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fd4b4a5f81e6186b49ec270574393a4784ea45dd](https://github.com/sagemath/sagetrac-mirror/commit/fd4b4a5f81e6186b49ec270574393a4784ea45dd)" to "[16b4b265b784192dab04950e8bd57060917d73a9](https://github.com/sagemath/sagetrac-mirror/commit/16b4b265b784192dab04950e8bd57060917d73a9)".



---

archive/issue_comments_195854.json:
```json
{
    "body": "<a id='comment:7'></a>\n(sorry, I updated the branch since, as there were two broken doctests left. Some integers were printed as 1L instead of 1 `T_T`)\n\nNathann",
    "created_at": "2013-12-10T14:23:36Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195854",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
(sorry, I updated the branch since, as there were two broken doctests left. Some integers were printed as 1L instead of 1 `T_T`)

Nathann



---

archive/issue_comments_195855.json:
```json
{
    "body": "<a id='comment:8'></a>\nOut of curiosity: why do you now use `public/ticketnumber` after using `u/ncohen/ticketnumber` before?\n\nI cannot judge if you created any problems anywhere in the code, but I guess you know what you are doing...\n\nI just ran the doctest on all of graphs, and the only error I see is `AttributeError in doctesting framework` which is also there without having your changes applied.\n\nI didn't see any new doctest for the code testing the diameter for something bigger, line the line graph of 70000 vertices. Don't you think it would be nice to have such an example in the code?\n\nCheers, Christian",
    "created_at": "2013-12-10T14:36:33Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195855",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:8'></a>
Out of curiosity: why do you now use `public/ticketnumber` after using `u/ncohen/ticketnumber` before?

I cannot judge if you created any problems anywhere in the code, but I guess you know what you are doing...

I just ran the doctest on all of graphs, and the only error I see is `AttributeError in doctesting framework` which is also there without having your changes applied.

I didn't see any new doctest for the code testing the diameter for something bigger, line the line graph of 70000 vertices. Don't you think it would be nice to have such an example in the code?

Cheers, Christian



---

archive/issue_comments_195856.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n ValueError: The graph backend contains more than 65535 nodes\n ```\n \n-This is because Sage's \"static_sparse_graphs\" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the \"all pairs shortest path\" (the distance between all pairs of vertices, i.e. a n^2 matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.\n+This is because Sage's \"static_sparse_graphs\" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the \"all pairs shortest path\" (the distance between all pairs of vertices, i.e. a n<sup>2</sup> matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.\n \n Soooooooooo this patch changes these \"unsigned short\" to 32-bits unsigned integers (and note more, because that already doubles the memory requires), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.\n \n``````\n",
    "created_at": "2013-12-10T16:50:40Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195856",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 ValueError: The graph backend contains more than 65535 nodes
 ```
 
-This is because Sage's "static_sparse_graphs" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the "all pairs shortest path" (the distance between all pairs of vertices, i.e. a n^2 matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.
+This is because Sage's "static_sparse_graphs" are stored on `unsigned short` fields (and thus to 65536 vertices), and though this is a meaningful limitation for Sage's code to compute the "all pairs shortest path" (the distance between all pairs of vertices, i.e. a n<sup>2</sup> matrix of integers), it does not make any sense to refuse to compute the diameter of such graphs.
 
 Soooooooooo this patch changes these "unsigned short" to 32-bits unsigned integers (and note more, because that already doubles the memory requires), which is also good to have when Simon is about to use the same data structure for combinatorial graphs, which can be huge.
 
``````




---

archive/issue_comments_195857.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe syntax checker was around... in order to read n<sup>2</sup> you should write n caret 2 caret.",
    "created_at": "2013-12-10T16:50:40Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195857",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
The syntax checker was around... in order to read n<sup>2</sup> you should write n caret 2 caret.



---

archive/issue_comments_195858.json:
```json
{
    "body": "<a id='comment:10'></a>\nYooooooooooo !!\n\n> Out of curiosity: why do you now use `public/ticketnumber` after using `u/ncohen/ticketnumber` before?\n\n\nBecause I don't like it that people have to create their own branch to add a commit. Most of the time it's only typos or non-controversial stuff, so well, let's keep it simple and write on the same branches. I don't link this permission stuff anyway.\n\n> I just ran the doctest on all of graphs, and the only error I see is `AttributeError in doctesting framework` which is also there without having your changes applied.\n\n\nHmmmmmm... Perhaps you should report that somewhere, the git version should be the \"official\" version quite soon.\n\n> I didn't see any new doctest for the code testing the diameter for something bigger, line the line graph of 70000 vertices. Don't you think it would be nice to have such an example in the code?\n\n\nWell... It takes two minutes on its own. I thought that it was a bit too much for a doctest `O_o`\n\nNathann",
    "created_at": "2013-12-10T19:00:00Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195858",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
Yooooooooooo !!

> Out of curiosity: why do you now use `public/ticketnumber` after using `u/ncohen/ticketnumber` before?


Because I don't like it that people have to create their own branch to add a commit. Most of the time it's only typos or non-controversial stuff, so well, let's keep it simple and write on the same branches. I don't link this permission stuff anyway.

> I just ran the doctest on all of graphs, and the only error I see is `AttributeError in doctesting framework` which is also there without having your changes applied.


Hmmmmmm... Perhaps you should report that somewhere, the git version should be the "official" version quite soon.

> I didn't see any new doctest for the code testing the diameter for something bigger, line the line graph of 70000 vertices. Don't you think it would be nice to have such an example in the code?


Well... It takes two minutes on its own. I thought that it was a bit too much for a doctest `O_o`

Nathann



---

archive/issue_comments_195859.json:
```json
{
    "body": "<a id='comment:11'></a>\n> Well... It takes two minutes on its own. I thought that it was a bit too much for a doctest `O_o`\n\n\nagreed. So, how am I getting the patchbot off the couch to get to work?",
    "created_at": "2013-12-10T19:27:34Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195859",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:11'></a>
> Well... It takes two minutes on its own. I thought that it was a bit too much for a doctest `O_o`


agreed. So, how am I getting the patchbot off the couch to get to work?



---

archive/issue_comments_195860.json:
```json
{
    "body": "<a id='comment:12'></a>\n> agreed. So, how am I getting the patchbot off the couch to get to work?\n\n\nNoooooooooo Idea ! I ran the tests on my own computer `O_o`\n\nNathann",
    "created_at": "2013-12-10T20:01:50Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195860",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
> agreed. So, how am I getting the patchbot off the couch to get to work?


Noooooooooo Idea ! I ran the tests on my own computer `O_o`

Nathann



---

archive/issue_comments_195861.json:
```json
{
    "body": "<a id='comment:13'></a>\nWhat happened to the branch -- is it gone?",
    "created_at": "2013-12-12T20:10:21Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195861",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:13'></a>
What happened to the branch -- is it gone?



---

archive/issue_comments_195862.json:
```json
{
    "body": "**Changing branch** from \"[public/15507](https://github.com/sagemath/sagetrac-mirror/tree/public/15507)\" to \"[u/ncohen/15507](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15507)\".",
    "created_at": "2013-12-12T21:32:40Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195862",
    "user": "https://github.com/nathanncohen"
}
```

**Changing branch** from "[public/15507](https://github.com/sagemath/sagetrac-mirror/tree/public/15507)" to "[u/ncohen/15507](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15507)".



---

archive/issue_comments_195863.json:
```json
{
    "body": "<a id='comment:14'></a>\nWell, no... I can import it from trac, so it exists !\n\nI will reupload it under a different name, in my own folder.\n\nI wouldn' want it to disappear.\n\nNathann",
    "created_at": "2013-12-12T21:32:40Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195863",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
Well, no... I can import it from trac, so it exists !

I will reupload it under a different name, in my own folder.

I wouldn' want it to disappear.

Nathann



---

archive/issue_comments_195864.json:
```json
{
    "body": "**Changing commit** from \"[16b4b265b784192dab04950e8bd57060917d73a9](https://github.com/sagemath/sagetrac-mirror/commit/16b4b265b784192dab04950e8bd57060917d73a9)\" to \"\".",
    "created_at": "2013-12-12T21:32:40Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195864",
    "user": "https://github.com/nathanncohen"
}
```

**Changing commit** from "[16b4b265b784192dab04950e8bd57060917d73a9](https://github.com/sagemath/sagetrac-mirror/commit/16b4b265b784192dab04950e8bd57060917d73a9)" to "".



---

archive/issue_comments_195865.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td>[16b4b26](https://github.com/sagemath/sagetrac-mirror/commit/16b4b26)</td><td><code>trac #15507: Static sparse graphs on > 65536 vertices</code></td></tr></table>\n",
    "created_at": "2013-12-12T21:33:16Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195865",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td>[16b4b26](https://github.com/sagemath/sagetrac-mirror/commit/16b4b26)</td><td><code>trac #15507: Static sparse graphs on > 65536 vertices</code></td></tr></table>




---

archive/issue_comments_195866.json:
```json
{
    "body": "**Commit:** [16b4b265b784192dab04950e8bd57060917d73a9](https://github.com/sagemath/sagetrac-mirror/commit/16b4b265b784192dab04950e8bd57060917d73a9)",
    "created_at": "2013-12-12T21:33:16Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195866",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [16b4b265b784192dab04950e8bd57060917d73a9](https://github.com/sagemath/sagetrac-mirror/commit/16b4b265b784192dab04950e8bd57060917d73a9)



---

archive/issue_comments_195867.json:
```json
{
    "body": "<a id='comment:16'></a>\nThe doctests pass, the patch does what it is supposed to, so I am setting this to positive review.\n\nOnly trac seems to not to be knowing where the branch is, but I can import it from trac, so there should be a way out...",
    "created_at": "2013-12-13T15:15:53Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195867",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:16'></a>
The doctests pass, the patch does what it is supposed to, so I am setting this to positive review.

Only trac seems to not to be knowing where the branch is, but I can import it from trac, so there should be a way out...



---

archive/issue_events_137114.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/stumpc5",
    "created_at": "2013-12-13T15:15:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15507#event-137114"
}
```



---

archive/issue_events_137115.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/stumpc5",
    "created_at": "2013-12-13T15:15:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15507#event-137115"
}
```



---

archive/issue_comments_195868.json:
```json
{
    "body": "<a id='comment:17'></a>\nHMmmmmmmmmm weird `O_o`\n\nThanks for the review, though !!!\n\nNathann",
    "created_at": "2013-12-14T13:14:31Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195868",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>
HMmmmmmmmmm weird `O_o`

Thanks for the review, though !!!

Nathann



---

archive/issue_comments_195869.json:
```json
{
    "body": "<a id='comment:18'></a>\nDoesn't merge with sage-6.0, please fix.",
    "created_at": "2013-12-19T19:55:50Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195869",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>
Doesn't merge with sage-6.0, please fix.



---

archive/issue_comments_195870.json:
```json
{
    "body": "<a id='comment:19'></a>\nDone !\n\nNathann",
    "created_at": "2013-12-19T20:00:28Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195870",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>
Done !

Nathann



---

archive/issue_comments_195871.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bbb51b\">1bbb51b</a></td><td><code>trac #15507: rebase on 6.1.beta0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3735dfd\">3735dfd</a></td><td><code>Updated Sage version to 6.1.beta0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47c9c75\">47c9c75</a></td><td><code>Trac #15224: Iterate over the points of a toric variety</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f382aec\">f382aec</a></td><td><code>Trac #15403: knapsack's docstring doesn't document an useful feature</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c95d3d\">0c95d3d</a></td><td><code>Trac #15228: Default embedding of Ljubljana graph (typo)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09fd00b\">09fd00b</a></td><td><code>Trac #12217: Finite field polynomials allow division by zero</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9acb905\">9acb905</a></td><td><code>Trac 12217: correctly handle division by zero</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8094791\">8094791</a></td><td><code>Trac #14912: UniqueRepresentation tutorial could use more love</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ce6a49\">4ce6a49</a></td><td><code>Trac #15442: MILP solver CBC  : undefined symbol: dgetrf_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42d6141\">42d6141</a></td><td><code>#14912: fix leaking print statement when running doctests.</code></td></tr></table>\n",
    "created_at": "2013-12-19T20:00:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bbb51b">1bbb51b</a></td><td><code>trac #15507: rebase on 6.1.beta0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3735dfd">3735dfd</a></td><td><code>Updated Sage version to 6.1.beta0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47c9c75">47c9c75</a></td><td><code>Trac #15224: Iterate over the points of a toric variety</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f382aec">f382aec</a></td><td><code>Trac #15403: knapsack's docstring doesn't document an useful feature</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c95d3d">0c95d3d</a></td><td><code>Trac #15228: Default embedding of Ljubljana graph (typo)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09fd00b">09fd00b</a></td><td><code>Trac #12217: Finite field polynomials allow division by zero</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9acb905">9acb905</a></td><td><code>Trac 12217: correctly handle division by zero</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8094791">8094791</a></td><td><code>Trac #14912: UniqueRepresentation tutorial could use more love</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ce6a49">4ce6a49</a></td><td><code>Trac #15442: MILP solver CBC  : undefined symbol: dgetrf_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42d6141">42d6141</a></td><td><code>#14912: fix leaking print statement when running doctests.</code></td></tr></table>




---

archive/issue_comments_195872.json:
```json
{
    "body": "**Changing commit** from \"[16b4b265b784192dab04950e8bd57060917d73a9](https://github.com/sagemath/sagetrac-mirror/commit/16b4b265b784192dab04950e8bd57060917d73a9)\" to \"[1bbb51b9102baf68c80f8463abb96d879d952d39](https://github.com/sagemath/sagetrac-mirror/commit/1bbb51b9102baf68c80f8463abb96d879d952d39)\".",
    "created_at": "2013-12-19T20:00:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195872",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[16b4b265b784192dab04950e8bd57060917d73a9](https://github.com/sagemath/sagetrac-mirror/commit/16b4b265b784192dab04950e8bd57060917d73a9)" to "[1bbb51b9102baf68c80f8463abb96d879d952d39](https://github.com/sagemath/sagetrac-mirror/commit/1bbb51b9102baf68c80f8463abb96d879d952d39)".



---

archive/issue_events_137116.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2013-12-19T20:00:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15507#event-137116"
}
```



---

archive/issue_events_137117.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2013-12-19T20:00:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15507#event-137117"
}
```



---

archive/issue_comments_195873.json:
```json
{
    "body": "<a id='comment:21'></a>\nDoesn't actually work\n\n```\nCython.Compiler.Errors.InternalError: Internal compiler error: 'sage/misc/bitset_pxd.pxi' not found\n```",
    "created_at": "2013-12-19T21:45:06Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195873",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>
Doesn't actually work

```
Cython.Compiler.Errors.InternalError: Internal compiler error: 'sage/misc/bitset_pxd.pxi' not found
```



---

archive/issue_comments_195874.json:
```json
{
    "body": "<a id='comment:22'></a>\nArggggg... Must be because of Jeroen's patch on the bitset things.. Don't remember which one it was though `O_o`",
    "created_at": "2013-12-19T21:50:58Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195874",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>
Arggggg... Must be because of Jeroen's patch on the bitset things.. Don't remember which one it was though `O_o`



---

archive/issue_comments_195875.json:
```json
{
    "body": "<a id='comment:23'></a>\nYoooooooo ! Sorry 'bout that. It was because of #13352. Jeroen replaced these imports almost everywhere, but of course not in the patches needing review `:-P`\n\nI updated the last commit. This one compiles and passes tests.\n\nNathann",
    "created_at": "2013-12-19T22:14:38Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195875",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>
Yoooooooo ! Sorry 'bout that. It was because of #13352. Jeroen replaced these imports almost everywhere, but of course not in the patches needing review `:-P`

I updated the last commit. This one compiles and passes tests.

Nathann



---

archive/issue_comments_195876.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b28d9f\">3b28d9f</a></td><td><code>trac #15507: rebase on 6.1.beta0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16b4b26\">16b4b26</a></td><td><code>trac #15507: Static sparse graphs on > 65536 vertices</code></td></tr></table>\n",
    "created_at": "2013-12-19T22:15:49Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195876",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b28d9f">3b28d9f</a></td><td><code>trac #15507: rebase on 6.1.beta0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16b4b26">16b4b26</a></td><td><code>trac #15507: Static sparse graphs on > 65536 vertices</code></td></tr></table>




---

archive/issue_comments_195877.json:
```json
{
    "body": "**Changing commit** from \"[1bbb51b9102baf68c80f8463abb96d879d952d39](https://github.com/sagemath/sagetrac-mirror/commit/1bbb51b9102baf68c80f8463abb96d879d952d39)\" to \"[3b28d9f33d22b458ad21d525dbc55523332145ab](https://github.com/sagemath/sagetrac-mirror/commit/3b28d9f33d22b458ad21d525dbc55523332145ab)\".",
    "created_at": "2013-12-19T22:15:49Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195877",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1bbb51b9102baf68c80f8463abb96d879d952d39](https://github.com/sagemath/sagetrac-mirror/commit/1bbb51b9102baf68c80f8463abb96d879d952d39)" to "[3b28d9f33d22b458ad21d525dbc55523332145ab](https://github.com/sagemath/sagetrac-mirror/commit/3b28d9f33d22b458ad21d525dbc55523332145ab)".



---

archive/issue_events_137118.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-19T22:40:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15507#event-137118"
}
```



---

archive/issue_events_137119.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-19T22:40:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15507#event-137119"
}
```



---

archive/issue_comments_195878.json:
```json
{
    "body": "**Reviewer:** Christian Stump",
    "created_at": "2013-12-19T22:40:28Z",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15507#issuecomment-195878",
    "user": "https://github.com/vbraun"
}
```

**Reviewer:** Christian Stump



---

archive/issue_events_137120.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-20T10:49:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15507#event-137120"
}
```



---

archive/issue_events_137121.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-20T10:49:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15507",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15507#event-137121"
}
```
