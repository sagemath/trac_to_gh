# Issue 15060: The empty graph once again

archive/issues_014823.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: Graph({}).is_connected()\nTrue\n```\nIf my understanding of good terminology is correct, this should not be the case (see http://ncatlab.org/nlab/show/too+simple+to+be+simple ). Note that `Graph({}).is_tree()` correctly returns `False`.\n\n[EDIT: removed \"another issue\" which has been fixed in the meantime.]\n\nDepends on #10093\n\n**CC:**  sage-combinat @pelegm\n\n**Keywords:** graphs, border cases, bitset, memleak\n\n**Stopgaps:** inconsistencyIssue\n\nIssue created by migration from https://trac.sagemath.org/ticket/15060\n\n",
    "created_at": "2013-08-18T15:49:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "The empty graph once again",
    "type": "issue",
    "updated_at": "2018-08-03T19:20:18Z",
    "url": "https://github.com/sagemath/sage/issues/15060",
    "user": "https://github.com/darijgr"
}
```

```
sage: Graph({}).is_connected()
True
```
If my understanding of good terminology is correct, this should not be the case (see http://ncatlab.org/nlab/show/too+simple+to+be+simple ). Note that `Graph({}).is_tree()` correctly returns `False`.

[EDIT: removed "another issue" which has been fixed in the meantime.]

Depends on #10093

**CC:**  sage-combinat @pelegm

**Keywords:** graphs, border cases, bitset, memleak

**Stopgaps:** inconsistencyIssue

Issue created by migration from https://trac.sagemath.org/ticket/15060





---

archive/issue_events_181595.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-18T15:49:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181595"
}
```



---

archive/issue_events_181596.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-18T15:49:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "08517b",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181596"
}
```



---

archive/issue_events_181597.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-08-18T15:49:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181597"
}
```



---

archive/issue_comments_187376.json:
```json
{
    "body": "**Changing keywords** from \"graphs, border cases, memleak\" to \"graphs, border cases, bitset, memleak\".",
    "created_at": "2013-08-18T16:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187376",
    "user": "https://github.com/darijgr"
}
```

**Changing keywords** from "graphs, border cases, memleak" to "graphs, border cases, bitset, memleak".



---

archive/issue_comments_187377.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,4 +10,4 @@\n ```\n Graph({}).is_triangle_free()\n ```\n-seems to allocate lots of RAM and possibly die with a MemoryError (it did so on the Sage cell server; on my machine I had to ctrl-alt-del the VM). The culprit seems to be `Bitset(capacity=0)`. If I see other issues caused by this, I'll open up a new ticket for this.\n+seems to allocate lots of RAM and possibly die with a MemoryError (it did so on the Sage cell server; on my machine I had to ctrl-alt-del the VM). The culprit seems to be `Bitset(capacity=0)`. It looks like `is_triangle_free` is the only method ever using the `Bitset(capacity=X)` construction, so I'm not opening up a new ticket for this.\n``````\n",
    "created_at": "2013-08-18T16:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187377",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,4 +10,4 @@
 ```
 Graph({}).is_triangle_free()
 ```
-seems to allocate lots of RAM and possibly die with a MemoryError (it did so on the Sage cell server; on my machine I had to ctrl-alt-del the VM). The culprit seems to be `Bitset(capacity=0)`. If I see other issues caused by this, I'll open up a new ticket for this.
+seems to allocate lots of RAM and possibly die with a MemoryError (it did so on the Sage cell server; on my machine I had to ctrl-alt-del the VM). The culprit seems to be `Bitset(capacity=0)`. It looks like `is_triangle_free` is the only method ever using the `Bitset(capacity=X)` construction, so I'm not opening up a new ticket for this.
``````




---

archive/issue_comments_187378.json:
```json
{
    "body": "<a id='comment:2'></a>\nAhahah. I mostly agree with the first comment of http://math.stackexchange.com/questions/50551/is-the-empty-graph-connected : \"This is not mathematics, this is theology\".\n\nHonestly, why do you insist on putting those weird definitions in Sage ? Now you can make a disconnected graph connected by adding an isolated vertex to it ? `:-P`\nWhat's the point ? It's unnatural. It just confuses people. It will just create bugs. Why can't we just say that a graph is connected if any two vertices are linked by a path and be satisfied with that ?",
    "created_at": "2013-08-18T18:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187378",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>
Ahahah. I mostly agree with the first comment of http://math.stackexchange.com/questions/50551/is-the-empty-graph-connected : "This is not mathematics, this is theology".

Honestly, why do you insist on putting those weird definitions in Sage ? Now you can make a disconnected graph connected by adding an isolated vertex to it ? `:-P`
What's the point ? It's unnatural. It just confuses people. It will just create bugs. Why can't we just say that a graph is connected if any two vertices are linked by a path and be satisfied with that ?



---

archive/issue_comments_187379.json:
```json
{
    "body": "<a id='comment:3'></a>\nI noticed the issue when I tried to compute the chromatic polynomial of an empty graph and got a wrong answer with #14529 applied (and an error without). It starts by checking whether the graph is connected and if not, multiplying the characteristic polynomials of the connected components. I claim that most of the time, connectedness appears together with connected components, and from the viewpoint of connected components it is much more natural to have empty objects disconnected.\n\nIf you are saying it's theology, can't we rather output an error instead of claiming it is \"True\"?",
    "created_at": "2013-08-18T18:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187379",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:3'></a>
I noticed the issue when I tried to compute the chromatic polynomial of an empty graph and got a wrong answer with #14529 applied (and an error without). It starts by checking whether the graph is connected and if not, multiplying the characteristic polynomials of the connected components. I claim that most of the time, connectedness appears together with connected components, and from the viewpoint of connected components it is much more natural to have empty objects disconnected.

If you are saying it's theology, can't we rather output an error instead of claiming it is "True"?



---

archive/issue_comments_187380.json:
```json
{
    "body": "<a id='comment:4'></a>\n> I noticed the issue when I tried to compute the chromatic polynomial of an empty graph and got a wrong answer with #14529 applied (and an error without). It starts by checking whether the graph is connected and if not, multiplying the characteristic polynomials of the connected components. I claim that most of the time, connectedness appears together with connected components, and from the viewpoint of connected components it is much more natural to have empty objects disconnected.\n\n`O_o`\n\nWhat is wrong with \"a graph is connected if any two vertices are linked by a path\" ? An empty graph can be partitionned in connected component, i.e. only one : itself.\n\n> If you are saying it's theology, can't we rather output an error instead of claiming it is \"True\"?\n\nI would love it to be `\"ValueError: We don't know whether an empty graph is connected. We discussed it, and just never agreed on anything\"`\n\nIt would make it a very practical issue rather than a theoretical one, and emphasize that definitions are mostly what people agree on `:-P`\n\nThe same should hold for `Graph({}).is_tree()` of course `:-P`\n\nNathann",
    "created_at": "2013-08-18T18:46:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187380",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
> I noticed the issue when I tried to compute the chromatic polynomial of an empty graph and got a wrong answer with #14529 applied (and an error without). It starts by checking whether the graph is connected and if not, multiplying the characteristic polynomials of the connected components. I claim that most of the time, connectedness appears together with connected components, and from the viewpoint of connected components it is much more natural to have empty objects disconnected.

`O_o`

What is wrong with "a graph is connected if any two vertices are linked by a path" ? An empty graph can be partitionned in connected component, i.e. only one : itself.

> If you are saying it's theology, can't we rather output an error instead of claiming it is "True"?

I would love it to be `"ValueError: We don't know whether an empty graph is connected. We discussed it, and just never agreed on anything"`

It would make it a very practical issue rather than a theoretical one, and emphasize that definitions are mostly what people agree on `:-P`

The same should hold for `Graph({}).is_tree()` of course `:-P`

Nathann



---

archive/issue_comments_187381.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [@nathanncohen](#comment%3A4):\n> What is wrong with \"a graph is connected if any two vertices are linked by a path\" ? An empty graph can be partitionned in connected component, i.e. only one : itself.\n\nThen the factorization of a graph into disjoint connected components is not unique. You can add as many empty components as you wish then.\n\n> I would love it to be `\"ValueError: We don't know whether an empty graph is connected. We discussed it, and just never agreed on anything\"`\n\nSounds good :)",
    "created_at": "2013-08-18T19:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187381",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:5'></a>
Replying to [@nathanncohen](#comment%3A4):
> What is wrong with "a graph is connected if any two vertices are linked by a path" ? An empty graph can be partitionned in connected component, i.e. only one : itself.

Then the factorization of a graph into disjoint connected components is not unique. You can add as many empty components as you wish then.

> I would love it to be `"ValueError: We don't know whether an empty graph is connected. We discussed it, and just never agreed on anything"`

Sounds good :)



---

archive/issue_comments_187382.json:
```json
{
    "body": "<a id='comment:6'></a>\n> Then the factorization of a graph into disjoint connected components is not unique. You can add as many empty components as you wish then.\n\nahahaha. Well, at least I have no reason to ask for a decomposition of a connected graph into connected subgraphs. What would you answer for the empty graph ? `:-P`\n\n> > I would love it to be `\"ValueError: We don't know whether an empty graph is connected. We discussed it, and just never agreed on anything\"`\n\n> \n> Sounds good :)\n\nReally ? Great then ! I love when arbitrary decisions are claimed as such ! \"We had no idea. So let's not write anything we might regret\" `:-D`\n\nNathann",
    "created_at": "2013-08-18T19:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187382",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
> Then the factorization of a graph into disjoint connected components is not unique. You can add as many empty components as you wish then.

ahahaha. Well, at least I have no reason to ask for a decomposition of a connected graph into connected subgraphs. What would you answer for the empty graph ? `:-P`

> > I would love it to be `"ValueError: We don't know whether an empty graph is connected. We discussed it, and just never agreed on anything"`

> 
> Sounds good :)

Really ? Great then ! I love when arbitrary decisions are claimed as such ! "We had no idea. So let's not write anything we might regret" `:-D`

Nathann



---

archive/issue_comments_187383.json:
```json
{
    "body": "<a id='comment:7'></a>\n*Any* graph will have infinitely many decompositions in connected components once you say that the empty graph is connected. Not what I'd want. But since people disagree more than I expected, I'm completely fine with throwing a valueerror.",
    "created_at": "2013-08-18T19:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187383",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:7'></a>
*Any* graph will have infinitely many decompositions in connected components once you say that the empty graph is connected. Not what I'd want. But since people disagree more than I expected, I'm completely fine with throwing a valueerror.



---

archive/issue_comments_187384.json:
```json
{
    "body": "<a id='comment:8'></a>\nWell, as according to your definition the empty set doesn't have any decomposition into connected components either, let's just agree that a decomposition into connected components if only defined for nonempty connected components.\n\nAhahahah.\n\nYes, it's ugly. \n\nYour definition would be better there.\n\nBut honestly... The empty graph ? Disconnected? `:-PPPPP`\n\nNathann",
    "created_at": "2013-08-18T20:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187384",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Well, as according to your definition the empty set doesn't have any decomposition into connected components either, let's just agree that a decomposition into connected components if only defined for nonempty connected components.

Ahahahah.

Yes, it's ugly. 

Your definition would be better there.

But honestly... The empty graph ? Disconnected? `:-PPPPP`

Nathann



---

archive/issue_comments_187385.json:
```json
{
    "body": "<a id='comment:9'></a>\nAs a non graph-theorist... I was wondering whether the empty graph should be a connected graph with zero connected components.  Though one of the definitions on that math.SX question suggested one connected component is the definition of connected.\n\nSo... what do the various standard texts say about this?  Maybe they are silent on the question?\n\nNote that apparently there is still enough disagreement about the definition that the Wikipedia article on the related set question (connectedness) points it out, though without references.\n\nPerhaps it is better to *document* that we follow a certain convention (probably the more obvious one, in this case), and then in documentation for anything about connected components point it out again.  If we really have to.  I don't quite see why there are infinitely many decompositions, since the empty graph does not have any connected components (which is not quite the same as a connected graph) - or perhaps I err in thinking a component has to be non-empty.  Naturally, this is all just deciding on a definition.  But it's not quite the same as 1 not being a prime number (and note Conway's argument that 1 and -1 *do* count, but as prime *powers*, not \"primes\", whatever those are - perhaps something analogous could work with sets or graphs, who knows).",
    "created_at": "2013-08-19T02:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187385",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'></a>
As a non graph-theorist... I was wondering whether the empty graph should be a connected graph with zero connected components.  Though one of the definitions on that math.SX question suggested one connected component is the definition of connected.

So... what do the various standard texts say about this?  Maybe they are silent on the question?

Note that apparently there is still enough disagreement about the definition that the Wikipedia article on the related set question (connectedness) points it out, though without references.

Perhaps it is better to *document* that we follow a certain convention (probably the more obvious one, in this case), and then in documentation for anything about connected components point it out again.  If we really have to.  I don't quite see why there are infinitely many decompositions, since the empty graph does not have any connected components (which is not quite the same as a connected graph) - or perhaps I err in thinking a component has to be non-empty.  Naturally, this is all just deciding on a definition.  But it's not quite the same as 1 not being a prime number (and note Conway's argument that 1 and -1 *do* count, but as prime *powers*, not "primes", whatever those are - perhaps something analogous could work with sets or graphs, who knows).



---

archive/issue_comments_187386.json:
```json
{
    "body": "<a id='comment:10'></a>\nYooooooooooooo !!\n\n> As a non graph-theorist... I was wondering whether the empty graph should be a connected graph with zero connected components.  Though one of the definitions on that math.SX question suggested one connected component is the definition of connected.\n\nYou will also see at a lot of places that a graph is connected if and only if any two vertices are linked by a path.\n\n> So... what do the various standard texts say about this?  Maybe they are silent on the question?\n\nBecause there are moments when you want them to be connected, other when you don't want them to be. I just had a look at Diestel's book (page 2, http://www.math.uni-hamburg.de/home/diestel/books/graph.theory/preview/Ch1.pdf) :\n\n\"For the empty graph (\\emptyset,\\emptyset) we simply write \\emptyset. A graph of order 0 or 1 is called trivial. Sometimes, e.g. to start an induction, trivial graphs can be useful; at other times they form silly counterexamples and become a nuisance. To avoid cluttering the text with non-triviality conditions, we shall mostly trat the trivial graphs, and particularly the empty graph \\emptyset with generous disregard.\"\n\nAfter which he defines connectedness by : \"A non-empty graph G is called connected if [..]\".\n\n> Perhaps it is better to *document* that we follow a certain convention (probably the more obvious one, in this case),\n\nWe also disagree on the most obvious one I guess `:-P`\nWe had another battle like that about whether the complete graph and the empty graph are strongly regular. I was decided that they weren't because there is a theorem saying that strongly regular graphs have exactly 3 eigenvalues `:-PPPP`\n(needless to say I don't agree with that `:-P`)\n\n> and then in documentation for anything about connected components point it out again.  If we really have to.  \n\nCome on.. Nobody reads these things before finding a bug in the code, everybody assumes that his own definition of connectivity is right. To me any definition is a mistake.\n\n> I don't quite see why there are infinitely many decompositions,\n\nHe claims that you can add as many empty graphs to a \"connected subgraphs decomposition\" as soon as you assume the empty graph to be connected.\n\n> since the empty graph does not have any connected components (which is not quite the same as a connected graph) - or perhaps I err in thinking a component has to be non-empty.\n\nWell, if you add nonempty to the definition of connected components decomposition then everything is fine.\n\n> Naturally, this is all just deciding on a definition.  But it's not quite the same as 1 not being a prime number (and note Conway's argument that 1 and -1 *do* count, but as prime *powers*, not \"primes\", whatever those are - perhaps something analogous could work with sets or graphs, who knows).\n\nIt's a word play. It's theology `:-P`\n\nThe truth is that we could take any definition and explain at length why it's the best way to see it. And usually it is to make our favorite theorems work for the empty graph too `:-P`\n\nWe should just raise an exception when an empty graph is created : `ThisThingDoesNotExistException : it's safer to deny the existence of the empty graph. It really creates a lot of problems if you don't` `:-P`\n\nNathann",
    "created_at": "2013-08-19T06:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187386",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
Yooooooooooooo !!

> As a non graph-theorist... I was wondering whether the empty graph should be a connected graph with zero connected components.  Though one of the definitions on that math.SX question suggested one connected component is the definition of connected.

You will also see at a lot of places that a graph is connected if and only if any two vertices are linked by a path.

> So... what do the various standard texts say about this?  Maybe they are silent on the question?

Because there are moments when you want them to be connected, other when you don't want them to be. I just had a look at Diestel's book (page 2, http://www.math.uni-hamburg.de/home/diestel/books/graph.theory/preview/Ch1.pdf) :

"For the empty graph (\emptyset,\emptyset) we simply write \emptyset. A graph of order 0 or 1 is called trivial. Sometimes, e.g. to start an induction, trivial graphs can be useful; at other times they form silly counterexamples and become a nuisance. To avoid cluttering the text with non-triviality conditions, we shall mostly trat the trivial graphs, and particularly the empty graph \emptyset with generous disregard."

After which he defines connectedness by : "A non-empty graph G is called connected if [..]".

> Perhaps it is better to *document* that we follow a certain convention (probably the more obvious one, in this case),

We also disagree on the most obvious one I guess `:-P`
We had another battle like that about whether the complete graph and the empty graph are strongly regular. I was decided that they weren't because there is a theorem saying that strongly regular graphs have exactly 3 eigenvalues `:-PPPP`
(needless to say I don't agree with that `:-P`)

> and then in documentation for anything about connected components point it out again.  If we really have to.  

Come on.. Nobody reads these things before finding a bug in the code, everybody assumes that his own definition of connectivity is right. To me any definition is a mistake.

> I don't quite see why there are infinitely many decompositions,

He claims that you can add as many empty graphs to a "connected subgraphs decomposition" as soon as you assume the empty graph to be connected.

> since the empty graph does not have any connected components (which is not quite the same as a connected graph) - or perhaps I err in thinking a component has to be non-empty.

Well, if you add nonempty to the definition of connected components decomposition then everything is fine.

> Naturally, this is all just deciding on a definition.  But it's not quite the same as 1 not being a prime number (and note Conway's argument that 1 and -1 *do* count, but as prime *powers*, not "primes", whatever those are - perhaps something analogous could work with sets or graphs, who knows).

It's a word play. It's theology `:-P`

The truth is that we could take any definition and explain at length why it's the best way to see it. And usually it is to make our favorite theorems work for the empty graph too `:-P`

We should just raise an exception when an empty graph is created : `ThisThingDoesNotExistException : it's safer to deny the existence of the empty graph. It really creates a lot of problems if you don't` `:-P`

Nathann



---

archive/issue_comments_187387.json:
```json
{
    "body": "<a id='comment:11'></a>\n> > As a non graph-theorist... I was wondering whether the empty graph should be a connected graph with zero connected components.  Though one of the definitions on that math.SX question suggested one connected component is the definition of connected.\n\n> \n> You will also see at a lot of places that a graph is connected if and only if any two vertices are linked by a path.\n> \n\nWell, yes, that was the definition that I (and you) had in mind.  Just because I'm not a graph theorist doesn't mean I'm not fairly conversant with graph theory ;-)\n\n> Because there are moments when you want them to be connected, other when you don't want them to be. I just had a look at Diestel's book (page 2, http://www.math.uni-hamburg.de/home/diestel/books/graph.theory/preview/Ch1.pdf) :\n> \n> \"For the empty graph (\\emptyset,\\emptyset) we simply write \\emptyset. A graph of order 0 or 1 is called trivial. Sometimes, e.g. to start an induction, trivial graphs can be useful; at other times they form silly counterexamples and become a nuisance. To avoid cluttering the text with non-triviality conditions, we shall mostly trat the trivial graphs, and particularly the empty graph \\emptyset with generous disregard.\"\n\nThat sounds like a good approach, but one that doesn't work for computers :(\n\n> > since the empty graph does not have any connected components (which is not quite the same as a connected graph) - or perhaps I err in thinking a component has to be non-empty.\n\n> \n> Well, if you add nonempty to the definition of connected components decomposition then everything is fine.\n\nRight, that's what I meant.  Otherwise the notion of a connected component seems less useful.  But I suppose it's all a matter of one's favorite definition, as we all seem to agree.  Is the theorem what defines connectedness, or is the definition what leads to the theorem?  That's sort of what's going on here.\n\nWell, have fun resolving this!  I think that leaving it as it is, with a brief comment we can point to when people complain, is easiest.  If it really is a bug at #14529, that is different, but it probably just means that patch needs some slight adjustment.  After all, changing this could also lead to unintended consequences in other code that assumed implicitly that this worked.  I suppose it's also an API change in some ways.",
    "created_at": "2013-08-19T13:20:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187387",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
> > As a non graph-theorist... I was wondering whether the empty graph should be a connected graph with zero connected components.  Though one of the definitions on that math.SX question suggested one connected component is the definition of connected.

> 
> You will also see at a lot of places that a graph is connected if and only if any two vertices are linked by a path.
> 

Well, yes, that was the definition that I (and you) had in mind.  Just because I'm not a graph theorist doesn't mean I'm not fairly conversant with graph theory ;-)

> Because there are moments when you want them to be connected, other when you don't want them to be. I just had a look at Diestel's book (page 2, http://www.math.uni-hamburg.de/home/diestel/books/graph.theory/preview/Ch1.pdf) :
> 
> "For the empty graph (\emptyset,\emptyset) we simply write \emptyset. A graph of order 0 or 1 is called trivial. Sometimes, e.g. to start an induction, trivial graphs can be useful; at other times they form silly counterexamples and become a nuisance. To avoid cluttering the text with non-triviality conditions, we shall mostly trat the trivial graphs, and particularly the empty graph \emptyset with generous disregard."

That sounds like a good approach, but one that doesn't work for computers :(

> > since the empty graph does not have any connected components (which is not quite the same as a connected graph) - or perhaps I err in thinking a component has to be non-empty.

> 
> Well, if you add nonempty to the definition of connected components decomposition then everything is fine.

Right, that's what I meant.  Otherwise the notion of a connected component seems less useful.  But I suppose it's all a matter of one's favorite definition, as we all seem to agree.  Is the theorem what defines connectedness, or is the definition what leads to the theorem?  That's sort of what's going on here.

Well, have fun resolving this!  I think that leaving it as it is, with a brief comment we can point to when people complain, is easiest.  If it really is a bug at #14529, that is different, but it probably just means that patch needs some slight adjustment.  After all, changing this could also lead to unintended consequences in other code that assumed implicitly that this worked.  I suppose it's also an API change in some ways.



---

archive/issue_comments_187388.json:
```json
{
    "body": "<a id='comment:12'></a>\nYoooooooooooooo !!!\n\n> That sounds like a good approach, but one that doesn't work for computers :(\n\nDoes it ? Well, what do you think of this \"WeHaveNoIdeaException\" ? Do you think it's not a good way out ?\n\n> Right, that's what I meant.  Otherwise the notion of a connected component seems less useful.  But I suppose it's all a matter of one's favorite definition, as we all seem to agree.  Is the theorem what defines connectedness, or is the definition what leads to the theorem?  That's sort of what's going on here.\n\nI'd say that the theorems make the definitions they need `:-P`\n\n> Well, have fun resolving this!  I think that leaving it as it is, with a brief comment we can point to when people complain, is easiest.  If it really is a bug at #14529, that is different, but it probably just means that patch needs some slight adjustment. \n\nYepyep, it can be fixed with a `if G.order() == 0`.\n\n> After all, changing this could also lead to unintended consequences in other code that assumed implicitly that this worked.\n\nOr that assumed incorrectly that it worked and gave the other answer `:-P`\n\nNathann",
    "created_at": "2013-08-19T15:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187388",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
Yoooooooooooooo !!!

> That sounds like a good approach, but one that doesn't work for computers :(

Does it ? Well, what do you think of this "WeHaveNoIdeaException" ? Do you think it's not a good way out ?

> Right, that's what I meant.  Otherwise the notion of a connected component seems less useful.  But I suppose it's all a matter of one's favorite definition, as we all seem to agree.  Is the theorem what defines connectedness, or is the definition what leads to the theorem?  That's sort of what's going on here.

I'd say that the theorems make the definitions they need `:-P`

> Well, have fun resolving this!  I think that leaving it as it is, with a brief comment we can point to when people complain, is easiest.  If it really is a bug at #14529, that is different, but it probably just means that patch needs some slight adjustment. 

Yepyep, it can be fixed with a `if G.order() == 0`.

> After all, changing this could also lead to unintended consequences in other code that assumed implicitly that this worked.

Or that assumed incorrectly that it worked and gave the other answer `:-P`

Nathann



---

archive/issue_comments_187389.json:
```json
{
    "body": "<a id='comment:13'></a>\n> Does it ? Well, what do you think of this \"WeHaveNoIdeaException\" ? Do you think it's not a good way out ?\n\nNo, that seems silly to me.  We should just pick a definition.  But you could ask on sage-devel - I'm sure this comes up elsewhere (disagreement about definitions).\n> Yepyep, it can be fixed with a `if G.order() == 0`.\n\nI suspected as much.\n> > After all, changing this could also lead to unintended consequences in other code that assumed implicitly that this worked.\n\n> Or that assumed incorrectly that it worked and gave the other answer `:-P`\n\nI meant within the Sage library, but yes, that too.",
    "created_at": "2013-08-19T15:41:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187389",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>
> Does it ? Well, what do you think of this "WeHaveNoIdeaException" ? Do you think it's not a good way out ?

No, that seems silly to me.  We should just pick a definition.  But you could ask on sage-devel - I'm sure this comes up elsewhere (disagreement about definitions).
> Yepyep, it can be fixed with a `if G.order() == 0`.

I suspected as much.
> > After all, changing this could also lead to unintended consequences in other code that assumed implicitly that this worked.

> Or that assumed incorrectly that it worked and gave the other answer `:-P`

I meant within the Sage library, but yes, that too.



---

archive/issue_comments_187390.json:
```json
{
    "body": "<a id='comment:14'></a>\nhttps://groups.google.com/d/topic/sage-devel/WVJ6YIURESs/discussion\n\nDone ! `:-P`\n\nNathann",
    "created_at": "2013-08-19T15:52:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187390",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
https://groups.google.com/d/topic/sage-devel/WVJ6YIURESs/discussion

Done ! `:-P`

Nathann



---

archive/issue_comments_187391.json:
```json
{
    "body": "**Dependencies:** #10093",
    "created_at": "2013-12-10T15:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187391",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #10093



---

archive/issue_comments_187392.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,9 +5,25 @@\n ```\n If my understanding of good terminology is correct, this should not be the case (see http://ncatlab.org/nlab/show/too+simple+to+be+simple ). Note that `Graph({}).is_tree()` correctly returns `False`.\n \n-Another issue is that\n+Another issue is\n \n ```\n-Graph({}).is_triangle_free()\n+sage: Graph({}).is_triangle_free()\n+---------------------------------------------------------------------------\n+ValueError                                Traceback (most recent call last)\n+<ipython-input-2-70aaa16d3aa5> in <module>()\n+----> 1 Graph().is_triangle_free()\n+\n+/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/graphs/graph.pyc in is_triangle_free(self, algorithm)\n+   2287                 B[v].add(map[u])\n+   2288             # map lengths 2 paths to bitsets\n+-> 2289             BB = Bitset(capacity=N)\n+   2290             for u in self.vertex_iterator():\n+   2291                 BB.clear()\n+\n+/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/bitset.so in sage.misc.bitset.FrozenBitset.__cinit__ (sage/misc/bitset.c:5023)()             \n+                                                                                                                                                                        \n+/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/bitset.so in sage.misc.bitset.bitset_init (sage/misc/bitset.c:1256)()                        \n+                                                                                                                                                                        \n+ValueError: bitset capacity must be greater than 0\n ```\n-seems to allocate lots of RAM and possibly die with a MemoryError (it did so on the Sage cell server; on my machine I had to ctrl-alt-del the VM). The culprit seems to be `Bitset(capacity=0)`. It looks like `is_triangle_free` is the only method ever using the `Bitset(capacity=X)` construction, so I'm not opening up a new ticket for this.\n``````\n",
    "created_at": "2013-12-10T15:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187392",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,9 +5,25 @@
 ```
 If my understanding of good terminology is correct, this should not be the case (see http://ncatlab.org/nlab/show/too+simple+to+be+simple ). Note that `Graph({}).is_tree()` correctly returns `False`.
 
-Another issue is that
+Another issue is
 
 ```
-Graph({}).is_triangle_free()
+sage: Graph({}).is_triangle_free()
+---------------------------------------------------------------------------
+ValueError                                Traceback (most recent call last)
+<ipython-input-2-70aaa16d3aa5> in <module>()
+----> 1 Graph().is_triangle_free()
+
+/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/graphs/graph.pyc in is_triangle_free(self, algorithm)
+   2287                 B[v].add(map[u])
+   2288             # map lengths 2 paths to bitsets
+-> 2289             BB = Bitset(capacity=N)
+   2290             for u in self.vertex_iterator():
+   2291                 BB.clear()
+
+/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/bitset.so in sage.misc.bitset.FrozenBitset.__cinit__ (sage/misc/bitset.c:5023)()             
+                                                                                                                                                                        
+/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/bitset.so in sage.misc.bitset.bitset_init (sage/misc/bitset.c:1256)()                        
+                                                                                                                                                                        
+ValueError: bitset capacity must be greater than 0
 ```
-seems to allocate lots of RAM and possibly die with a MemoryError (it did so on the Sage cell server; on my machine I had to ctrl-alt-del the VM). The culprit seems to be `Bitset(capacity=0)`. It looks like `is_triangle_free` is the only method ever using the `Bitset(capacity=X)` construction, so I'm not opening up a new ticket for this.
``````




---

archive/issue_events_181598.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181598"
}
```



---

archive/issue_events_181599.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181599"
}
```



---

archive/issue_events_181600.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181600"
}
```



---

archive/issue_events_181601.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181601"
}
```



---

archive/issue_events_181602.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181602"
}
```



---

archive/issue_events_181603.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181603"
}
```



---

archive/issue_comments_187393.json:
```json
{
    "body": "**Stopgaps:** inconsistencyIssue",
    "created_at": "2016-07-09T16:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187393",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

**Stopgaps:** inconsistencyIssue



---

archive/issue_comments_187394.json:
```json
{
    "body": "<a id='comment:20'></a>\nI just thought, what about dropping the definition for graph connectedness at all.\nand introduce three different cases instead:\n\n- a graph has 0 components\n- a graph has exactly 1 component\n- a graph has 2 or more components\n\nAt least we are able to count ;-)\n\n\nI think If we cannot handle special cases consistently even in theory, we will never ever be able to implement it without getting tons of worms...\n\nsee also the discussion at \nhttps://groups.google.com/forum/#!msg/sage-devel/WVJ6YIURESs/cQi1U6M1QRMJ",
    "created_at": "2016-07-09T16:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187394",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<a id='comment:20'></a>
I just thought, what about dropping the definition for graph connectedness at all.
and introduce three different cases instead:

- a graph has 0 components
- a graph has exactly 1 component
- a graph has 2 or more components

At least we are able to count ;-)


I think If we cannot handle special cases consistently even in theory, we will never ever be able to implement it without getting tons of worms...

see also the discussion at 
https://groups.google.com/forum/#!msg/sage-devel/WVJ6YIURESs/cQi1U6M1QRMJ



---

archive/issue_events_181604.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-05-26T07:28:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181604"
}
```



---

archive/issue_events_181605.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-05-26T07:28:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181605"
}
```



---

archive/issue_comments_187395.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,25 +5,4 @@\n ```\n If my understanding of good terminology is correct, this should not be the case (see http://ncatlab.org/nlab/show/too+simple+to+be+simple ). Note that `Graph({}).is_tree()` correctly returns `False`.\n \n-Another issue is\n-\n-```\n-sage: Graph({}).is_triangle_free()\n----------------------------------------------------------------------------\n-ValueError                                Traceback (most recent call last)\n-<ipython-input-2-70aaa16d3aa5> in <module>()\n-----> 1 Graph().is_triangle_free()\n-\n-/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/graphs/graph.pyc in is_triangle_free(self, algorithm)\n-   2287                 B[v].add(map[u])\n-   2288             # map lengths 2 paths to bitsets\n--> 2289             BB = Bitset(capacity=N)\n-   2290             for u in self.vertex_iterator():\n-   2291                 BB.clear()\n-\n-/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/bitset.so in sage.misc.bitset.FrozenBitset.__cinit__ (sage/misc/bitset.c:5023)()             \n-                                                                                                                                                                        \n-/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/bitset.so in sage.misc.bitset.bitset_init (sage/misc/bitset.c:1256)()                        \n-                                                                                                                                                                        \n-ValueError: bitset capacity must be greater than 0\n-```\n+[EDIT: removed \"another issue\" which has been fixed in the meantime.]\n``````\n",
    "created_at": "2018-05-26T07:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187395",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,25 +5,4 @@
 ```
 If my understanding of good terminology is correct, this should not be the case (see http://ncatlab.org/nlab/show/too+simple+to+be+simple ). Note that `Graph({}).is_tree()` correctly returns `False`.
 
-Another issue is
-
-```
-sage: Graph({}).is_triangle_free()
----------------------------------------------------------------------------
-ValueError                                Traceback (most recent call last)
-<ipython-input-2-70aaa16d3aa5> in <module>()
-----> 1 Graph().is_triangle_free()
-
-/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/graphs/graph.pyc in is_triangle_free(self, algorithm)
-   2287                 B[v].add(map[u])
-   2288             # map lengths 2 paths to bitsets
--> 2289             BB = Bitset(capacity=N)
-   2290             for u in self.vertex_iterator():
-   2291                 BB.clear()
-
-/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/bitset.so in sage.misc.bitset.FrozenBitset.__cinit__ (sage/misc/bitset.c:5023)()             
-                                                                                                                                                                        
-/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/bitset.so in sage.misc.bitset.bitset_init (sage/misc/bitset.c:1256)()                        
-                                                                                                                                                                        
-ValueError: bitset capacity must be greater than 0
-```
+[EDIT: removed "another issue" which has been fixed in the meantime.]
``````




---

archive/issue_comments_187396.json:
```json
{
    "body": "<a id='comment:23'></a>\nupdate milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15060#issuecomment-187396",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>
update milestone 8.3 -> 8.4



---

archive/issue_events_181606.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181606"
}
```



---

archive/issue_events_181607.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15060",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15060#event-181607"
}
```
