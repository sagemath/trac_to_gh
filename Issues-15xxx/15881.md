# Issue 15881: Sage graphs often cut off loops

archive/issues_015644.json:
```json
{
    "body": "For a long time now, Sage graphs have often been drawn with loops cut off.  This is because the axes are decided based on the positions of the vertices, without accounting for loops.  This idea fixes it:\n\n```\ndef loop_graph_plot(g, **options):\n    p=g.graphplot()\n    loopsize=p._options['loop_size']\n    q=p.plot()\n    r=q.get_axes_range()\n    q.set_axes_range(xmin=r['xmin']-loopsize,xmax=r['xmax']+loopsize,ymin=r['ymin']-2*loopsize)\n    return q\n\ng = Graph({1:[0,1]})\nshow(loop_graph_plot(g))\n```\n\nI think the relevant changes should be made in `sage/graphs/graph_plot.py`.\n\nThanks to Leslie Hogben for pointing this out (among others over the years).\n\nReviewer: David Coudert\n\nResolution: worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/15881\n\n",
    "closed_at": "2020-09-16T09:29:21Z",
    "created_at": "2014-03-01T02:52:07Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Sage graphs often cut off loops",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15881",
    "user": "https://github.com/jasongrout"
}
```
For a long time now, Sage graphs have often been drawn with loops cut off.  This is because the axes are decided based on the positions of the vertices, without accounting for loops.  This idea fixes it:

```
def loop_graph_plot(g, **options):
    p=g.graphplot()
    loopsize=p._options['loop_size']
    q=p.plot()
    r=q.get_axes_range()
    q.set_axes_range(xmin=r['xmin']-loopsize,xmax=r['xmax']+loopsize,ymin=r['ymin']-2*loopsize)
    return q

g = Graph({1:[0,1]})
show(loop_graph_plot(g))
```

I think the relevant changes should be made in `sage/graphs/graph_plot.py`.

Thanks to Leslie Hogben for pointing this out (among others over the years).

Reviewer: David Coudert

Resolution: worksforme

Issue created by migration from https://trac.sagemath.org/ticket/15881





---

archive/issue_events_046728.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15881#event-46728"
}
```



---

archive/issue_events_046729.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15881#event-46729"
}
```



---

archive/issue_events_046730.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15881#event-46730"
}
```



---

archive/issue_comments_256893.json:
```json
{
    "body": "<a id='comment:3'></a>\nI did several trials (e.g., adding loops to a 2 by 2 grid) and don't see any cut off on loops.\n\nIf no-one can reproduce the issue, may be we can close this ticket.",
    "created_at": "2020-08-30T11:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15881#issuecomment-256893",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>
I did several trials (e.g., adding loops to a 2 by 2 grid) and don't see any cut off on loops.

If no-one can reproduce the issue, may be we can close this ticket.



---

archive/issue_comments_256894.json:
```json
{
    "body": "<a id='comment:4'></a>\nLikely outdated",
    "created_at": "2020-08-30T18:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15881#issuecomment-256894",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Likely outdated



---

archive/issue_events_046731.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-30T18:24:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15881#event-46731"
}
```



---

archive/issue_events_046732.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-30T18:24:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15881#event-46732"
}
```



---

archive/issue_comments_256895.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-30T18:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15881#issuecomment-256895",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_256896.json:
```json
{
    "body": "<a id='comment:5'></a>\nSo then.",
    "created_at": "2020-08-30T19:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15881#issuecomment-256896",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:5'></a>
So then.



---

archive/issue_comments_256897.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2020-08-30T19:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15881#issuecomment-256897",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_256898.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-30T19:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15881#issuecomment-256898",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_046733.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-09-16T09:29:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15881#event-46733"
}
```



---

archive/issue_comments_256899.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2020-09-16T09:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15881#issuecomment-256899",
    "user": "https://github.com/fchapoton"
}
```

Resolution: worksforme
