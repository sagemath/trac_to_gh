# Issue 15594: Use autotools for csage

archive/issues_015357.json:
```json
{
    "body": "Use autotools instead of scons to build `c_lib`. After this change, polybori is the only part of Sage using scons.\n\nCC:  @jdemeyer @vbraun @kiwifb\n\nReviewer: R. Andrew Ohana, Jeroen Demeyer\n\nBranch: u/ohanar/csage_autotools\n\nDependencies: #15604\n\nCommit: 440dcf13049208a3c650607a072ed1c49e4b02f1\n\nResolution: wontfix\n\nIssue created by migration from https://trac.sagemath.org/ticket/15594\n\n",
    "closed_at": "2014-12-11T20:31:38Z",
    "created_at": "2013-12-26T23:21:25Z",
    "labels": [
        "component: c_lib"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Use autotools for csage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15594",
    "user": "https://github.com/ohanar"
}
```
Use autotools instead of scons to build `c_lib`. After this change, polybori is the only part of Sage using scons.

CC:  @jdemeyer @vbraun @kiwifb

Reviewer: R. Andrew Ohana, Jeroen Demeyer

Branch: u/ohanar/csage_autotools

Dependencies: #15604

Commit: 440dcf13049208a3c650607a072ed1c49e4b02f1

Resolution: wontfix

Issue created by migration from https://trac.sagemath.org/ticket/15594





---

archive/issue_comments_197691.json:
```json
{
    "body": "<a id='comment:1'></a>Mainly threw this together to test python3 compatibility (since scons is not yet python3 compatible). I personally prefer autotools over scons, so I think it would be good to finish this, although I'm not sure what the best way to integrate it into the build system would be.",
    "created_at": "2013-12-26T23:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197691",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:1'></a>Mainly threw this together to test python3 compatibility (since scons is not yet python3 compatible). I personally prefer autotools over scons, so I think it would be good to finish this, although I'm not sure what the best way to integrate it into the build system would be.



---

archive/issue_comments_197692.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-26T23:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197692",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197693.json:
```json
{
    "body": "<a id='comment:3'></a>Sounds good to me. I guess that would make polybori the only scons user (but C++ only)",
    "created_at": "2013-12-26T23:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197693",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>Sounds good to me. I guess that would make polybori the only scons user (but C++ only)



---

archive/issue_comments_197694.json:
```json
{
    "body": "<a id='comment:4'></a>One important question is the following: are you going to track the autotools-generated files with git? If yes, that will enlarge the git repo by a significant amount. If no, you will require Sage *developers* to have *autotools* installed.",
    "created_at": "2013-12-27T09:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197694",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>One important question is the following: are you going to track the autotools-generated files with git? If yes, that will enlarge the git repo by a significant amount. If no, you will require Sage *developers* to have *autotools* installed.



---

archive/issue_comments_197695.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 jdemeyer]:\n> One important question is the following: are you going to track the autotools-generated files with git?\n\n\nNo.\n\n> If yes, that will enlarge the git repo by a significant amount. If no, you will require Sage *developers* to have *autotools* installed.\n\n\nThe source distribution will obviously have the autotools-generated output, but for those who are directly cloning the sage repository, they would need autotools (as is standard for most projects), or we would need to make autotools a standardish package (akin to gcc).\n\nIntegrating the prereq package runs into the same issue.",
    "created_at": "2013-12-28T09:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197695",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:5'></a>Replying to [comment:4 jdemeyer]:
> One important question is the following: are you going to track the autotools-generated files with git?


No.

> If yes, that will enlarge the git repo by a significant amount. If no, you will require Sage *developers* to have *autotools* installed.


The source distribution will obviously have the autotools-generated output, but for those who are directly cloning the sage repository, they would need autotools (as is standard for most projects), or we would need to make autotools a standardish package (akin to gcc).

Integrating the prereq package runs into the same issue.



---

archive/issue_events_045619.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15594#event-45619"
}
```



---

archive/issue_comments_197696.json:
```json
{
    "body": "<a id='comment:7'></a>Working on this.",
    "created_at": "2014-02-04T16:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197696",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>Working on this.



---

archive/issue_comments_197697.json:
```json
{
    "body": "<a id='comment:9'></a>It probably needs further testing, but this version should work.\n\n---\nNew commits:",
    "created_at": "2014-02-04T22:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197697",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>It probably needs further testing, but this version should work.

---
New commits:



---

archive/issue_comments_197698.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-05T09:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_197699.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-05T10:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_197700.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-05T11:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_197701.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-05T12:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_197702.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-05T12:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197702",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_197703.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-02-05T12:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197703",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_197704.json:
```json
{
    "body": "<a id='comment:17'></a>Despite what the plugin says, it merges cleanly for me...",
    "created_at": "2014-02-08T19:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197704",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>Despite what the plugin says, it merges cleanly for me...



---

archive/issue_comments_197705.json:
```json
{
    "body": "<a id='comment:18'></a>Andrew: can you review this?",
    "created_at": "2014-02-08T21:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197705",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>Andrew: can you review this?



---

archive/issue_comments_197706.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:17 jdemeyer]:\n> Despite what the plugin says, it merges cleanly for me...\n\nYes, I've been meaning to change that error message...\n\nReplying to [comment:18 vbraun]:\n> Andrew: can you review this?\n\nSure.",
    "created_at": "2014-02-08T23:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197706",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:19'></a>Replying to [comment:17 jdemeyer]:
> Despite what the plugin says, it merges cleanly for me...

Yes, I've been meaning to change that error message...

Replying to [comment:18 vbraun]:
> Andrew: can you review this?

Sure.



---

archive/issue_comments_197707.json:
```json
{
    "body": "<a id='comment:20'></a>Mostly looks fine. I just added a commit to reflect that on OS X the libtoolize binary is almost aways renamed to glibtoolize (so as not to conflict with OS X's libtool).\n\n---\nNew commits:",
    "created_at": "2014-02-09T01:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197707",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:20'></a>Mostly looks fine. I just added a commit to reflect that on OS X the libtoolize binary is almost aways renamed to glibtoolize (so as not to conflict with OS X's libtool).

---
New commits:



---

archive/issue_comments_197708.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-09T01:31:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197708",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_197709.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-02-09T11:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_197710.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-02-09T11:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197710",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_197711.json:
```json
{
    "body": "<a id='comment:26'></a>Doesn't work if you don't have autotools installed, e.g.: http://build.sagemath.org/sage/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.9%20x86_64%29%20incremental/builds/28/steps/compile/logs/stdio",
    "created_at": "2014-02-09T12:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197711",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>Doesn't work if you don't have autotools installed, e.g.: http://build.sagemath.org/sage/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.9%20x86_64%29%20incremental/builds/28/steps/compile/logs/stdio



---

archive/issue_comments_197712.json:
```json
{
    "body": "<a id='comment:28'></a>New commits:",
    "created_at": "2014-02-10T09:14:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197712",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>New commits:



---

archive/issue_comments_197713.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-14T03:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197713",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_197714.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-02-21T16:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197714",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_197715.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:",
    "created_at": "2014-02-21T16:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197715",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:



---

archive/issue_comments_197716.json:
```json
{
    "body": "<a id='comment:31'></a>Since this keeps conflicting, I squashed the whole branch.\n\n---\nNew commits:",
    "created_at": "2014-02-21T16:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197716",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>Since this keeps conflicting, I squashed the whole branch.

---
New commits:



---

archive/issue_comments_197717.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-21T16:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197717",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_197718.json:
```json
{
    "body": "<a id='comment:33'></a>Fails on snapperkob with\n\n```\n./bootstrap -d\nmake[1]: Entering directory `/home/buildbot/build/sage/snapperkob/sage_git/build'\nrm -rf config configure build/Makefile-auto.in\ncd src/c_lib && rm -f config.h.in* configure Makefile.in src/Makefile.in include/Makefile.in\nmake[1]: Leaving directory `/home/buildbot/build/sage/snapperkob/sage_git/build'\nconfigure.ac:61: installing `config/config.guess'\nconfigure.ac:61: installing `config/config.sub'\nconfigure.ac:30: installing `config/install-sh'\nconfigure.ac:30: installing `config/missing'\nlibtoolize: putting auxiliary files in AC_CONFIG_AUX_DIR, `../../config'.\nlibtoolize: copying file `../../config/ltmain.sh'\nlibtoolize: putting macros in AC_CONFIG_MACRO_DIR, `../../m4'.\nlibtoolize: copying file `../../m4/libtool.m4'\nlibtoolize: copying file `../../m4/ltoptions.m4'\nlibtoolize: copying file `../../m4/ltsugar.m4'\nlibtoolize: copying file `../../m4/ltversion.m4'\nlibtoolize: copying file `../../m4/lt~obsolete.m4'\nconfigure.ac:8: require Automake 1.13, but have 1.11.3\nmake: *** [src/c_lib/configure] Error 1\nmake: Target `start' not remade because of errors.\nprogram finished with exit code 2\n```\nand on eno\n\n```\n./bootstrap -d\nmake[1]: Entering directory `/home/buildbot/build/sage/eno-1/sage_git/build'\nrm -rf config configure build/Makefile-auto.in\ncd src/c_lib && rm -f config.h.in* configure Makefile.in src/Makefile.in include/Makefile.in\nmake[1]: Leaving directory `/home/buildbot/build/sage/eno-1/sage_git/build'\nconfigure.ac:61: installing `config/config.guess'\nconfigure.ac:61: installing `config/config.sub'\nconfigure.ac:30: installing `config/install-sh'\nconfigure.ac:30: installing `config/missing'\nlibtoolize: putting auxiliary files in AC_CONFIG_AUX_DIR, `../../config'.\nlibtoolize: copying file `../../config/ltmain.sh'\nlibtoolize: putting macros in AC_CONFIG_MACRO_DIR, `../../m4'.\nlibtoolize: copying file `../../m4/libtool.m4'\nlibtoolize: copying file `../../m4/ltoptions.m4'\nlibtoolize: copying file `../../m4/ltsugar.m4'\nlibtoolize: copying file `../../m4/ltversion.m4'\nlibtoolize: copying file `../../m4/lt~obsolete.m4'\nconfigure.ac:22: warning: macro `AM_PROG_AR' not found in library\nconfigure.ac:8: require Automake 1.13, but have 1.11.1\nmake: *** [src/c_lib/configure] Error 1\nmake: Target `start' not remade because of errors.\nprogram finished with exit code 2\n```\nThe confball version is 13.",
    "created_at": "2014-03-02T16:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197718",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>Fails on snapperkob with

```
./bootstrap -d
make[1]: Entering directory `/home/buildbot/build/sage/snapperkob/sage_git/build'
rm -rf config configure build/Makefile-auto.in
cd src/c_lib && rm -f config.h.in* configure Makefile.in src/Makefile.in include/Makefile.in
make[1]: Leaving directory `/home/buildbot/build/sage/snapperkob/sage_git/build'
configure.ac:61: installing `config/config.guess'
configure.ac:61: installing `config/config.sub'
configure.ac:30: installing `config/install-sh'
configure.ac:30: installing `config/missing'
libtoolize: putting auxiliary files in AC_CONFIG_AUX_DIR, `../../config'.
libtoolize: copying file `../../config/ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIR, `../../m4'.
libtoolize: copying file `../../m4/libtool.m4'
libtoolize: copying file `../../m4/ltoptions.m4'
libtoolize: copying file `../../m4/ltsugar.m4'
libtoolize: copying file `../../m4/ltversion.m4'
libtoolize: copying file `../../m4/lt~obsolete.m4'
configure.ac:8: require Automake 1.13, but have 1.11.3
make: *** [src/c_lib/configure] Error 1
make: Target `start' not remade because of errors.
program finished with exit code 2
```
and on eno

```
./bootstrap -d
make[1]: Entering directory `/home/buildbot/build/sage/eno-1/sage_git/build'
rm -rf config configure build/Makefile-auto.in
cd src/c_lib && rm -f config.h.in* configure Makefile.in src/Makefile.in include/Makefile.in
make[1]: Leaving directory `/home/buildbot/build/sage/eno-1/sage_git/build'
configure.ac:61: installing `config/config.guess'
configure.ac:61: installing `config/config.sub'
configure.ac:30: installing `config/install-sh'
configure.ac:30: installing `config/missing'
libtoolize: putting auxiliary files in AC_CONFIG_AUX_DIR, `../../config'.
libtoolize: copying file `../../config/ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIR, `../../m4'.
libtoolize: copying file `../../m4/libtool.m4'
libtoolize: copying file `../../m4/ltoptions.m4'
libtoolize: copying file `../../m4/ltsugar.m4'
libtoolize: copying file `../../m4/ltversion.m4'
libtoolize: copying file `../../m4/lt~obsolete.m4'
configure.ac:22: warning: macro `AM_PROG_AR' not found in library
configure.ac:8: require Automake 1.13, but have 1.11.1
make: *** [src/c_lib/configure] Error 1
make: Target `start' not remade because of errors.
program finished with exit code 2
```
The confball version is 13.



---

archive/issue_comments_197719.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-03-03T21:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_197720.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-03-03T21:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_197721.json:
```json
{
    "body": "<a id='comment:35'></a>Volker, can you please test this on the buildbots again?",
    "created_at": "2014-03-04T09:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197721",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>Volker, can you please test this on the buildbots again?



---

archive/issue_comments_197722.json:
```json
{
    "body": "<a id='comment:36'></a>Still doesn't work on most machines, though it fails later on in csage. E.g. on mod:\n\n```\nmake[3]: Entering directory `/mnt/SSD1/mod_buildslave/sage_git/build/src/c_lib'\nmake[3]: warning: -jN forced in submake: disabling jobserver mode.\nCDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/bash /mnt/SSD1/mod_buildslave/sage_git/build/config/missing aclocal-1.13 -I ../../m4\n/mnt/SSD1/mod_buildslave/sage_git/build/config/missing: line 81: aclocal-1.13: command not found\nWARNING: 'aclocal-1.13' is missing on your system.\n         You should only need it if you modified 'acinclude.m4' or\n         'configure.ac' or m4 files included by 'configure.ac'.\n         The 'aclocal' program is part of the GNU Automake package:\n         <http://www.gnu.org/software/automake>\n         It also requires GNU Autoconf, GNU m4 and Perl in order to run:\n         <http://www.gnu.org/software/autoconf>\n         <http://www.gnu.org/software/m4/>\n         <http://www.perl.org/>\nmake[3]: *** [aclocal.m4] Error 127\n```\nThis was with configure-15.tar.gz",
    "created_at": "2014-03-07T11:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197722",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'></a>Still doesn't work on most machines, though it fails later on in csage. E.g. on mod:

```
make[3]: Entering directory `/mnt/SSD1/mod_buildslave/sage_git/build/src/c_lib'
make[3]: warning: -jN forced in submake: disabling jobserver mode.
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/bash /mnt/SSD1/mod_buildslave/sage_git/build/config/missing aclocal-1.13 -I ../../m4
/mnt/SSD1/mod_buildslave/sage_git/build/config/missing: line 81: aclocal-1.13: command not found
WARNING: 'aclocal-1.13' is missing on your system.
         You should only need it if you modified 'acinclude.m4' or
         'configure.ac' or m4 files included by 'configure.ac'.
         The 'aclocal' program is part of the GNU Automake package:
         <http://www.gnu.org/software/automake>
         It also requires GNU Autoconf, GNU m4 and Perl in order to run:
         <http://www.gnu.org/software/autoconf>
         <http://www.gnu.org/software/m4/>
         <http://www.perl.org/>
make[3]: *** [aclocal.m4] Error 127
```
This was with configure-15.tar.gz



---

archive/issue_comments_197723.json:
```json
{
    "body": "<a id='comment:37'></a>I think this could probably be resolved by disabling maintainer mode either in csage's configure.ac or in deps. Doing this with the top level configure script as well would make it so that we don't have to use tar with the m argument (I believe, haven't actually tested).",
    "created_at": "2014-03-07T22:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197723",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:37'></a>I think this could probably be resolved by disabling maintainer mode either in csage's configure.ac or in deps. Doing this with the top level configure script as well would make it so that we don't have to use tar with the m argument (I believe, haven't actually tested).



---

archive/issue_comments_197724.json:
```json
{
    "body": "<a id='comment:38'></a>This has my proposed fix. It works for me when I remove autotools from my path.\n\n---\nNew commits:",
    "created_at": "2014-03-07T22:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197724",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:38'></a>This has my proposed fix. It works for me when I remove autotools from my path.

---
New commits:



---

archive/issue_comments_197725.json:
```json
{
    "body": "<a id='comment:39'></a>For reference, it looks like maintainer mode was disabled for the top level configure in [a38f919](http://git.sagemath.org/sage.git/commit/?id=a38f91911ace2a7dcd0cc49e77c31c3a25e0889d), but it never got re-disabled when it was merged into #15606.",
    "created_at": "2014-03-07T22:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197725",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:39'></a>For reference, it looks like maintainer mode was disabled for the top level configure in [a38f919](http://git.sagemath.org/sage.git/commit/?id=a38f91911ace2a7dcd0cc49e77c31c3a25e0889d), but it never got re-disabled when it was merged into #15606.



---

archive/issue_comments_197726.json:
```json
{
    "body": "<a id='comment:40'></a>Jeroen didn't like it back then... Really I don't want to disable it on *my* machine since I do have a working autotools install. In an ideal world we'd only disable maintainer mode if we had to download the confball. Not sure how to implement that, it seems like we would need some file whose existence acts as a flag. Though its probably not too much of a loss.",
    "created_at": "2014-03-08T00:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197726",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>Jeroen didn't like it back then... Really I don't want to disable it on *my* machine since I do have a working autotools install. In an ideal world we'd only disable maintainer mode if we had to download the confball. Not sure how to implement that, it seems like we would need some file whose existence acts as a flag. Though its probably not too much of a loss.



---

archive/issue_events_045620.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15594#event-45620"
}
```



---

archive/issue_events_045621.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15594#event-45621"
}
```



---

archive/issue_comments_197727.json:
```json
{
    "body": "<a id='comment:43'></a>Cool.  How do we get the PolyBoRi guys to drop SCons? :P",
    "created_at": "2014-05-18T08:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197727",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:43'></a>Cool.  How do we get the PolyBoRi guys to drop SCons? :P



---

archive/issue_comments_197728.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:43 leif]:\n> Cool.  How do we get the PolyBoRi guys to drop SCons? :P\n\n\nWish I knew. It also hasn't been very active lately. While Alexander Drier wasn't the only active dev his departure seems to have left a big void. He was also the one who was fixing most of the problem we reported from sage-on-gentoo. If I had more free time I'd attempt a conversion to autotools myself.",
    "created_at": "2014-05-18T11:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197728",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:44'></a>Replying to [comment:43 leif]:
> Cool.  How do we get the PolyBoRi guys to drop SCons? :P


Wish I knew. It also hasn't been very active lately. While Alexander Drier wasn't the only active dev his departure seems to have left a big void. He was also the one who was fixing most of the problem we reported from sage-on-gentoo. If I had more free time I'd attempt a conversion to autotools myself.



---

archive/issue_comments_197729.json:
```json
{
    "body": "<a id='comment:45'></a>I'd like to request one small change. Jean-Pierre Flori helped to make sure we could build against gmp instead of mpir at #12661.\n\n```\nlibcsage_la_LIBADD = -lntl -lpari -lmpir $(PYTHON_LDFLAGS)\n```\nwill just revert it completely to where we were before (but for different reasons). Can we replace -lmpir with -lgmp in that line please.",
    "created_at": "2014-05-18T11:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197729",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:45'></a>I'd like to request one small change. Jean-Pierre Flori helped to make sure we could build against gmp instead of mpir at #12661.

```
libcsage_la_LIBADD = -lntl -lpari -lmpir $(PYTHON_LDFLAGS)
```
will just revert it completely to where we were before (but for different reasons). Can we replace -lmpir with -lgmp in that line please.



---

archive/issue_comments_197730.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-21T23:20:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197730",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_197731.json:
```json
{
    "body": "<a id='comment:47'></a>Thanks! One more thing I just spotted:\n\n```\ndiff --git a/src/c_lib/Makefile.am b/src/c_lib/Makefile.am\nnew file mode 100644\nindex 0000000..e91cd48\n--- /dev/null\n+++ b/src/c_lib/Makefile.am\n@@ -0,0 +1,6 @@\n+SUBDIRS = src include\n+\n+ACLOCAL_AMFLAGS = -I ../../m4\n+\n+clean-local:\n+\trm -f .sconsign.dblite\n```\n.sconsign.dblite is a file generated by scons, now that we are ditching it, it shouldn't be present. I am guessing you are trying to cover the upgrade path. Is it necessary for us to provide this target. Furthermore, I do not see when it is called. So we have a target to clean some old scons rubbish but it doesn't look like it is run automatically. If it was always run I could see some value but if it is voluntary people may just as well use rm.",
    "created_at": "2014-05-22T01:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197731",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:47'></a>Thanks! One more thing I just spotted:

```
diff --git a/src/c_lib/Makefile.am b/src/c_lib/Makefile.am
new file mode 100644
index 0000000..e91cd48
--- /dev/null
+++ b/src/c_lib/Makefile.am
@@ -0,0 +1,6 @@
+SUBDIRS = src include
+
+ACLOCAL_AMFLAGS = -I ../../m4
+
+clean-local:
+	rm -f .sconsign.dblite
```
.sconsign.dblite is a file generated by scons, now that we are ditching it, it shouldn't be present. I am guessing you are trying to cover the upgrade path. Is it necessary for us to provide this target. Furthermore, I do not see when it is called. So we have a target to clean some old scons rubbish but it doesn't look like it is run automatically. If it was always run I could see some value but if it is voluntary people may just as well use rm.



---

archive/issue_comments_197732.json:
```json
{
    "body": "<a id='comment:48'></a>Replying to [comment:47 fbissey]:\n> Thanks! One more thing I just spotted:\n> \n> ```\n> diff --git a/src/c_lib/Makefile.am b/src/c_lib/Makefile.am\n> new file mode 100644\n> index 0000000..e91cd48\n> --- /dev/null\n> +++ b/src/c_lib/Makefile.am\n> @@ -0,0 +1,6 @@\n> +SUBDIRS = src include\n> +\n> +ACLOCAL_AMFLAGS = -I ../../m4\n> +\n> +clean-local:\n> +\trm -f .sconsign.dblite\n> ```\n> If it was always run I could see some value but if it is voluntary people may just as well use rm.\n\n\nWell, it's a *hidden* file... ;-)\n\n(And we could run `make clean-local` from a script.)",
    "created_at": "2014-05-22T09:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197732",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:48'></a>Replying to [comment:47 fbissey]:
> Thanks! One more thing I just spotted:
> 
> ```
> diff --git a/src/c_lib/Makefile.am b/src/c_lib/Makefile.am
> new file mode 100644
> index 0000000..e91cd48
> --- /dev/null
> +++ b/src/c_lib/Makefile.am
> @@ -0,0 +1,6 @@
> +SUBDIRS = src include
> +
> +ACLOCAL_AMFLAGS = -I ../../m4
> +
> +clean-local:
> +	rm -f .sconsign.dblite
> ```
> If it was always run I could see some value but if it is voluntary people may just as well use rm.


Well, it's a *hidden* file... ;-)

(And we could run `make clean-local` from a script.)



---

archive/issue_comments_197733.json:
```json
{
    "body": "<a id='comment:49'></a>We could, and in fact I looked to see if it was done within this ticket before writing.",
    "created_at": "2014-05-22T09:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197733",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:49'></a>We could, and in fact I looked to see if it was done within this ticket before writing.



---

archive/issue_comments_197734.json:
```json
{
    "body": "<a id='comment:50'></a>In contrast to me, as I was assuming you did already.  So I was right.",
    "created_at": "2014-05-22T09:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197734",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:50'></a>In contrast to me, as I was assuming you did already.  So I was right.



---

archive/issue_events_045622.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15594#event-45622"
}
```



---

archive/issue_events_045623.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15594#event-45623"
}
```



---

archive/issue_comments_197735.json:
```json
{
    "body": "<a id='comment:52'></a>Alternative: #17484",
    "created_at": "2014-12-11T09:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197735",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:52'></a>Alternative: #17484



---

archive/issue_comments_197736.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-11T20:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197736",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_045624.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-11T20:30:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15594#event-45624"
}
```



---

archive/issue_events_045625.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-11T20:30:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15594#event-45625"
}
```



---

archive/issue_comments_197737.json:
```json
{
    "body": "<a id='comment:53'></a>Close as wontfix...",
    "created_at": "2014-12-11T20:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197737",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'></a>Close as wontfix...



---

archive/issue_events_045626.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-11T20:31:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15594#event-45626"
}
```



---

archive/issue_comments_197738.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2014-12-11T20:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15594#issuecomment-197738",
    "user": "https://github.com/vbraun"
}
```

Resolution: wontfix
