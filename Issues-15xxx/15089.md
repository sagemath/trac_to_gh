# Issue 15089: GSL probability distributions ignore the random seed keyword

archive/issues_014852.json:
```json
{
    "body": "CC:  @jasongrout\n\nThe `seed` keyword seems to be ignored/ineffective when used to initialize a GSL probability distribution.  However the `.set_seed()` method seems to behave better.  So the logic to use a seed must be there, so maybe the problem is not too serious.\n\nI have not investigated further (scope, or explanation).  I do not think this is related to #9770, though it looks similar.\n\n```\nsage: import sage.gsl.probability_distribution as pd\nsage: busted = pd.RealDistribution(\"beta\",[1.6,4.3], seed=999)\nsage: [busted.get_random_element() for _ in range(10)]\n[0.32128217201, 0.542457198335, 0.0724813201357, 0.112798064656, 0.19162541988, 0.0311161329052, 0.367517357654, 0.155752529923, 0.168016999523, 0.316509258951]\n\nsage: busted = pd.RealDistribution(\"beta\",[1.6,4.3], seed=123)\nsage: [busted.get_random_element() for _ in range(10)]\n[0.32128217201, 0.542457198335, 0.0724813201357, 0.112798064656, 0.19162541988, 0.0311161329052, 0.367517357654, 0.155752529923, 0.168016999523, 0.316509258951]\n\nsage: busted = pd.RealDistribution(\"beta\",[1.6,4.3], seed=654)\nsage: [busted.get_random_element() for _ in range(10)]\n[0.32128217201, 0.542457198335, 0.0724813201357, 0.112798064656, 0.19162541988, 0.0311161329052, 0.367517357654, 0.155752529923, 0.168016999523, 0.316509258951]\n```\n\n```\nsage: import sage.gsl.probability_distribution as pd\nsage: works = pd.RealDistribution(\"beta\",[1.6,4.3])\nsage: works.set_seed(999)\nsage: [works.get_random_element() for _ in range(10)]\n[0.425823673237, 0.429579713803, 0.314369797661, 0.431111546249, 0.121212622335, 0.22203001696, 0.368655240221, 0.589478261874, 0.530036995706, 0.322479617059]\n\nsage: works.set_seed(123)\nsage: [works.get_random_element() for _ in range(10)]\n[0.732932782326, 0.211615687127, 0.129663204693, 0.723107137266, 0.0564437011706, 0.566875767081, 0.114427268807, 0.212965725735, 0.206817349997, 0.224659673662]\n\nsage: works.set_seed(654)\nsage: [works.get_random_element() for _ in range(10)]\n[0.248304400629, 0.00952944262958, 0.442372539004, 0.0792859649324, 0.686033385325, 0.133732570843, 0.514823922368, 0.19377758022, 0.0372641947453, 0.546083013146]\n```\n\n**Apply:**\n\n1.  [This is the Trac macro *attachment:trac_15089-gsl-seed-keyword.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:trac_15089-gsl-seed-keyword.patch-macro)\n\nIssue created by migration from https://trac.sagemath.org/ticket/15089\n\n",
    "closed_at": "2013-10-01T07:16:25Z",
    "created_at": "2013-08-23T19:40:43Z",
    "labels": [
        "component: statistics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "GSL probability distributions ignore the random seed keyword",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15089",
    "user": "https://github.com/rbeezer"
}
```
CC:  @jasongrout

The `seed` keyword seems to be ignored/ineffective when used to initialize a GSL probability distribution.  However the `.set_seed()` method seems to behave better.  So the logic to use a seed must be there, so maybe the problem is not too serious.

I have not investigated further (scope, or explanation).  I do not think this is related to #9770, though it looks similar.

```
sage: import sage.gsl.probability_distribution as pd
sage: busted = pd.RealDistribution("beta",[1.6,4.3], seed=999)
sage: [busted.get_random_element() for _ in range(10)]
[0.32128217201, 0.542457198335, 0.0724813201357, 0.112798064656, 0.19162541988, 0.0311161329052, 0.367517357654, 0.155752529923, 0.168016999523, 0.316509258951]

sage: busted = pd.RealDistribution("beta",[1.6,4.3], seed=123)
sage: [busted.get_random_element() for _ in range(10)]
[0.32128217201, 0.542457198335, 0.0724813201357, 0.112798064656, 0.19162541988, 0.0311161329052, 0.367517357654, 0.155752529923, 0.168016999523, 0.316509258951]

sage: busted = pd.RealDistribution("beta",[1.6,4.3], seed=654)
sage: [busted.get_random_element() for _ in range(10)]
[0.32128217201, 0.542457198335, 0.0724813201357, 0.112798064656, 0.19162541988, 0.0311161329052, 0.367517357654, 0.155752529923, 0.168016999523, 0.316509258951]
```

```
sage: import sage.gsl.probability_distribution as pd
sage: works = pd.RealDistribution("beta",[1.6,4.3])
sage: works.set_seed(999)
sage: [works.get_random_element() for _ in range(10)]
[0.425823673237, 0.429579713803, 0.314369797661, 0.431111546249, 0.121212622335, 0.22203001696, 0.368655240221, 0.589478261874, 0.530036995706, 0.322479617059]

sage: works.set_seed(123)
sage: [works.get_random_element() for _ in range(10)]
[0.732932782326, 0.211615687127, 0.129663204693, 0.723107137266, 0.0564437011706, 0.566875767081, 0.114427268807, 0.212965725735, 0.206817349997, 0.224659673662]

sage: works.set_seed(654)
sage: [works.get_random_element() for _ in range(10)]
[0.248304400629, 0.00952944262958, 0.442372539004, 0.0792859649324, 0.686033385325, 0.133732570843, 0.514823922368, 0.19377758022, 0.0372641947453, 0.546083013146]
```

**Apply:**

1.  [This is the Trac macro *attachment:trac_15089-gsl-seed-keyword.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:trac_15089-gsl-seed-keyword.patch-macro)

Issue created by migration from https://trac.sagemath.org/ticket/15089





---

archive/issue_comments_189199.json:
```json
{
    "body": "The init methods of `RealDistribution`, `GeneralDiscreteDistribution` and `SphericalDistribution` all handle the `seed == None` case, but otherwise fail to copy a value of the seed keyword into `self.seed` before making use of it.  Could be three one-line fixes, just capture this value from the keyword into the class.",
    "created_at": "2013-08-24T00:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15089#issuecomment-189199",
    "user": "https://github.com/rbeezer"
}
```

The init methods of `RealDistribution`, `GeneralDiscreteDistribution` and `SphericalDistribution` all handle the `seed == None` case, but otherwise fail to copy a value of the seed keyword into `self.seed` before making use of it.  Could be three one-line fixes, just capture this value from the keyword into the class.



---

archive/issue_comments_189200.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-24T04:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15089#issuecomment-189200",
    "user": "https://github.com/rbeezer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_189201.json:
```json
{
    "body": "Attachment [trac_15089-gsl-seed-keyword.patch](tarball://root/attachments/some-uuid/ticket15089/trac_15089-gsl-seed-keyword.patch) by @rbeezer created at 2013-08-24 04:10:47\n\nHad to fix one other doctest, which was previously passing only because of the bug fixed here.  Patch passes all tests, etc on 5.11.\n\nLots of places where this module could use some love.",
    "created_at": "2013-08-24T04:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15089#issuecomment-189201",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_15089-gsl-seed-keyword.patch](tarball://root/attachments/some-uuid/ticket15089/trac_15089-gsl-seed-keyword.patch) by @rbeezer created at 2013-08-24 04:10:47

Had to fix one other doctest, which was previously passing only because of the bug fixed here.  Patch passes all tests, etc on 5.11.

Lots of places where this module could use some love.



---

archive/issue_comments_189202.json:
```json
{
    "body": "ok, looks good to me. And indeed the code needs more attention and care..",
    "created_at": "2013-09-07T17:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15089#issuecomment-189202",
    "user": "https://github.com/fchapoton"
}
```

ok, looks good to me. And indeed the code needs more attention and care..



---

archive/issue_comments_189203.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-09-07T17:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15089#issuecomment-189203",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_189204.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-10-01T07:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15089#issuecomment-189204",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_043422.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-01T07:16:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15089",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15089#event-43422"
}
```
