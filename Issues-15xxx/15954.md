# Issue 15954: Polyring_FpT_coerce cannot handle polynomial_modn_dense_ntl

archive/issues_015717.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: R.<x> = PolynomialRing(Integers(101), implementation='NTL')\nsage: 1/x\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-2-3e814ccafd34> in <module>()\n----> 1 Integer(1)/x\n\n/usr/local/src/sage-config/src/sage/rings/integer.pyx in sage.rings.integer.Integer.__div__ (build/cythonized/sage/rings/integer.c:13187)()\n   1874             return y\n   1875 \n-> 1876         return coercion_model.bin_op(left, right, operator.div)\n   1877 \n   1878     cpdef _div_(self, right):\n\n/usr/local/src/sage-config/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:9515)()\n   1079         try:\n   1080             xy = self.canonical_coercion(x,y)\n-> 1081             return PyObject_CallObject(op, xy)\n   1082         except TypeError as err:\n   1083             if xy is not None:\n\n/usr/local/src/sage-config/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__div__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23976)()\n   2121 \n   2122     def __div__(left, right):\n-> 2123         return PyNumber_TrueDivide(left, right)\n   2124 \n   2125     def __pow__(left, right, modulus):\n\n/usr/local/src/sage-config/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__truediv__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23681)()\n   2103         # Same parents => bypass coercion\n   2104         if have_same_parent(left, right):\n-> 2105             return (<Element>left)._div_(right)\n   2106 \n   2107         # Try division of polynomial by a scalar\n\n/usr/local/src/sage-config/src/sage/structure/element.pyx in sage.structure.element.RingElement._div_ (build/cythonized/sage/structure/element.c:17628)()\n   2476         except AttributeError:\n   2477             raise bin_op_exception('/', self, other)\n-> 2478         return frac(self, other)\n   2479 \n   2480     def __invert__(self):\n\n/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9433)()\n    917                 return mor._call_(x)\n    918             else:\n--> 919                 return mor._call_with_args(x, args, kwds)\n    920 \n    921         raise TypeError(\"No conversion defined from %s to %s\"%(R, self))\n\n/usr/local/src/sage-config/src/sage/rings/fraction_field_FpT.pyx in sage.rings.fraction_field_FpT.Polyring_FpT_coerce._call_with_args (build/cythonized/sage/rings/fraction_field_FpT.cpp:12573)()\n   1132             x = <Polynomial_zmod_flint?> _x\n   1133         except TypeError:\n-> 1134             raise NotImplementedError('Fraction fields not implemented for this type.')\n   1135         cdef FpTElement ans = <FpTElement>FpTElement.__new__(FpTElement)\n   1136         ans._parent = self.codomain()\n\nNotImplementedError: Fraction fields not implemented for this type.\n```\nThis makes NTL modpolys unusable in fractions.\n\nBranch/Commit: **[u/rws/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl) @ [`ded2b6d`](https://github.com/sagemath/sagetrac-mirror/commit/ded2b6d096862fb26e5427ab590ec0686a3dd6e2)**\n\nReviewer: **Karl-Dieter Crisman**\n\nAuthor: **Ralf Stephan**\n\nComponent: **coercion**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15954_\n\n",
    "created_at": "2014-03-16T16:43:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coercion",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Polyring_FpT_coerce cannot handle polynomial_modn_dense_ntl",
    "type": "issue",
    "updated_at": "2022-12-29T01:40:48Z",
    "url": "https://github.com/sagemath/sage/issues/15954",
    "user": "https://github.com/rwst"
}
```

```
sage: R.<x> = PolynomialRing(Integers(101), implementation='NTL')
sage: 1/x
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-2-3e814ccafd34> in <module>()
----> 1 Integer(1)/x

/usr/local/src/sage-config/src/sage/rings/integer.pyx in sage.rings.integer.Integer.__div__ (build/cythonized/sage/rings/integer.c:13187)()
   1874             return y
   1875 
-> 1876         return coercion_model.bin_op(left, right, operator.div)
   1877 
   1878     cpdef _div_(self, right):

/usr/local/src/sage-config/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:9515)()
   1079         try:
   1080             xy = self.canonical_coercion(x,y)
-> 1081             return PyObject_CallObject(op, xy)
   1082         except TypeError as err:
   1083             if xy is not None:

/usr/local/src/sage-config/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__div__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23976)()
   2121 
   2122     def __div__(left, right):
-> 2123         return PyNumber_TrueDivide(left, right)
   2124 
   2125     def __pow__(left, right, modulus):

/usr/local/src/sage-config/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__truediv__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23681)()
   2103         # Same parents => bypass coercion
   2104         if have_same_parent(left, right):
-> 2105             return (<Element>left)._div_(right)
   2106 
   2107         # Try division of polynomial by a scalar

/usr/local/src/sage-config/src/sage/structure/element.pyx in sage.structure.element.RingElement._div_ (build/cythonized/sage/structure/element.c:17628)()
   2476         except AttributeError:
   2477             raise bin_op_exception('/', self, other)
-> 2478         return frac(self, other)
   2479 
   2480     def __invert__(self):

/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9433)()
    917                 return mor._call_(x)
    918             else:
--> 919                 return mor._call_with_args(x, args, kwds)
    920 
    921         raise TypeError("No conversion defined from %s to %s"%(R, self))

/usr/local/src/sage-config/src/sage/rings/fraction_field_FpT.pyx in sage.rings.fraction_field_FpT.Polyring_FpT_coerce._call_with_args (build/cythonized/sage/rings/fraction_field_FpT.cpp:12573)()
   1132             x = <Polynomial_zmod_flint?> _x
   1133         except TypeError:
-> 1134             raise NotImplementedError('Fraction fields not implemented for this type.')
   1135         cdef FpTElement ans = <FpTElement>FpTElement.__new__(FpTElement)
   1136         ans._parent = self.codomain()

NotImplementedError: Fraction fields not implemented for this type.
```
This makes NTL modpolys unusable in fractions.

Branch/Commit: **[u/rws/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl) @ [`ded2b6d`](https://github.com/sagemath/sagetrac-mirror/commit/ded2b6d096862fb26e5427ab590ec0686a3dd6e2)**

Reviewer: **Karl-Dieter Crisman**

Author: **Ralf Stephan**

Component: **coercion**

_Issue created by migration from https://trac.sagemath.org/ticket/15954_





---

archive/issue_events_225579.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-16T16:43:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225579"
}
```



---

archive/issue_events_225580.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-16T16:43:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225580"
}
```



---

archive/issue_events_225581.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-16T16:43:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225581"
}
```



---

archive/issue_events_225582.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-16T16:43:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225582"
}
```



---

archive/issue_events_225583.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225583"
}
```



---

archive/issue_events_225584.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225584"
}
```



---

archive/issue_comments_202248.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe error happens when (in `Polyring_FpT_coerce._call_with_args`) the argument is converted to `Polynomial_zmod_flint`. As the whole file `fraction_field_FpT.pyx` is using flint, must we implement it completely via ntl, or does it suffice to fix that single conversion?",
    "created_at": "2014-06-05T13:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202248",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2" align="right">comment:2</div>

The error happens when (in `Polyring_FpT_coerce._call_with_args`) the argument is converted to `Polynomial_zmod_flint`. As the whole file `fraction_field_FpT.pyx` is using flint, must we implement it completely via ntl, or does it suffice to fix that single conversion?



---

archive/issue_comments_202249.json:
```json
{
    "body": "Branch: **[u/rws/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl)**",
    "created_at": "2014-06-05T14:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202249",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl)**



---

archive/issue_comments_202250.json:
```json
{
    "body": "Commit: **[`7d0e789`](https://github.com/sagemath/sagetrac-mirror/commit/7d0e789a5b4b3d6b5f08aaa8d92f45dd3dbd0331)**",
    "created_at": "2014-06-05T14:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202250",
    "user": "https://github.com/rwst"
}
```

Commit: **[`7d0e789`](https://github.com/sagemath/sagetrac-mirror/commit/7d0e789a5b4b3d6b5f08aaa8d92f45dd3dbd0331)**



---

archive/issue_comments_202251.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAs no conversion seems possible, a better error message is displayed.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d0e789a5b4b3d6b5f08aaa8d92f45dd3dbd0331\"><code>7d0e789</code></a></td><td><code>15954: replace TypeError with more informative message</code></td></tr></table>\n",
    "created_at": "2014-06-05T14:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202251",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4" align="right">comment:4</div>

As no conversion seems possible, a better error message is displayed.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d0e789a5b4b3d6b5f08aaa8d92f45dd3dbd0331"><code>7d0e789</code></a></td><td><code>15954: replace TypeError with more informative message</code></td></tr></table>




---

archive/issue_comments_202252.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2014-06-05T14:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202252",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_events_225585.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-06-05T14:40:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225585"
}
```



---

archive/issue_comments_202253.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c634a9b44c3afc05829c63f9e3ba9ef34369397\"><code>0c634a9</code></a></td><td><code>Merge branch 'develop' into t/15954/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d446c13b45ed337bbe0f8be779230e383675be8\"><code>8d446c1</code></a></td><td><code>15954: add doctest</code></td></tr></table>\n",
    "created_at": "2014-07-12T07:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202253",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c634a9b44c3afc05829c63f9e3ba9ef34369397"><code>0c634a9</code></a></td><td><code>Merge branch 'develop' into t/15954/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d446c13b45ed337bbe0f8be779230e383675be8"><code>8d446c1</code></a></td><td><code>15954: add doctest</code></td></tr></table>




---

archive/issue_comments_202254.json:
```json
{
    "body": "Changed commit from **[`7d0e789`](https://github.com/sagemath/sagetrac-mirror/commit/7d0e789a5b4b3d6b5f08aaa8d92f45dd3dbd0331)** to **[`8d446c1`](https://github.com/sagemath/sagetrac-mirror/commit/8d446c13b45ed337bbe0f8be779230e383675be8)**",
    "created_at": "2014-07-12T07:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202254",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d0e789`](https://github.com/sagemath/sagetrac-mirror/commit/7d0e789a5b4b3d6b5f08aaa8d92f45dd3dbd0331)** to **[`8d446c1`](https://github.com/sagemath/sagetrac-mirror/commit/8d446c13b45ed337bbe0f8be779230e383675be8)**



---

archive/issue_events_225586.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225586"
}
```



---

archive/issue_events_225587.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225587"
}
```



---

archive/issue_comments_202255.json:
```json
{
    "body": "Changed commit from **[`8d446c1`](https://github.com/sagemath/sagetrac-mirror/commit/8d446c13b45ed337bbe0f8be779230e383675be8)** to **[`ded2b6d`](https://github.com/sagemath/sagetrac-mirror/commit/ded2b6d096862fb26e5427ab590ec0686a3dd6e2)**",
    "created_at": "2014-08-20T14:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202255",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8d446c1`](https://github.com/sagemath/sagetrac-mirror/commit/8d446c13b45ed337bbe0f8be779230e383675be8)** to **[`ded2b6d`](https://github.com/sagemath/sagetrac-mirror/commit/ded2b6d096862fb26e5427ab590ec0686a3dd6e2)**



---

archive/issue_comments_202256.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ded2b6d096862fb26e5427ab590ec0686a3dd6e2\"><code>ded2b6d</code></a></td><td><code>Merge branch 'develop' into t/15954/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl</code></td></tr></table>\n",
    "created_at": "2014-08-20T14:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202256",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ded2b6d096862fb26e5427ab590ec0686a3dd6e2"><code>ded2b6d</code></a></td><td><code>Merge branch 'develop' into t/15954/polyring_fpt_coerce_cannot_handle_polynomial_modn_dense_ntl</code></td></tr></table>




---

archive/issue_events_225588.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-21T16:02:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225588"
}
```



---

archive/issue_events_225589.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-21T16:02:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225589"
}
```



---

archive/issue_comments_202257.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2015-05-21T16:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202257",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_202258.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI like this in general but it's really more than just the fractions, it's when you make the field, so it should also show up here, or maybe even when you make the fraction field, I don't know?\n\n```\nsage: R.<x> = PolynomialRing(Integers(101), implementation='ntl')\nsage: R.fraction_field()\nFraction Field of Univariate Polynomial Ring in x over Ring of integers modulo 101 (using NTL)\nsage: K = R.fraction_field()\nsage: K\nFraction Field of Univariate Polynomial Ring in x over Ring of integers modulo 101 (using NTL)\nsage: K(1)\n1\nsage: K(2)\n2\nsage: K(x)\nTypeError: Cannot convert sage.rings.polynomial.polynomial_modn_dense_ntl.Polynomial_dense_mod_p to sage.rings.polynomial.polynomial_zmod_flint.Polynomial_zmod_flint\n```",
    "created_at": "2015-05-21T16:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202258",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

I like this in general but it's really more than just the fractions, it's when you make the field, so it should also show up here, or maybe even when you make the fraction field, I don't know?

```
sage: R.<x> = PolynomialRing(Integers(101), implementation='ntl')
sage: R.fraction_field()
Fraction Field of Univariate Polynomial Ring in x over Ring of integers modulo 101 (using NTL)
sage: K = R.fraction_field()
sage: K
Fraction Field of Univariate Polynomial Ring in x over Ring of integers modulo 101 (using NTL)
sage: K(1)
1
sage: K(2)
2
sage: K(x)
TypeError: Cannot convert sage.rings.polynomial.polynomial_modn_dense_ntl.Polynomial_dense_mod_p to sage.rings.polynomial.polynomial_zmod_flint.Polynomial_zmod_flint
```



---

archive/issue_comments_202259.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe issue was resolved independently. In 8.2.beta2 we now get:\n\n```\nsage: R.<x> = PolynomialRing(Integers(101), implementation='NTL')\nsage: 1/x\n...\nNotImplementedError: Fraction fields not implemented for this type.\n```",
    "created_at": "2018-01-15T08:27:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202259",
    "user": "https://github.com/rwst"
}
```

<div id="comment:9" align="right">comment:9</div>

The issue was resolved independently. In 8.2.beta2 we now get:

```
sage: R.<x> = PolynomialRing(Integers(101), implementation='NTL')
sage: 1/x
...
NotImplementedError: Fraction fields not implemented for this type.
```



---

archive/issue_events_225590.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-01-15T08:27:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225590"
}
```



---

archive/issue_events_225591.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-01-15T08:27:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225591"
}
```



---

archive/issue_events_225592.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-01-15T08:27:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225592"
}
```



---

archive/issue_comments_202260.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI get a failure already on the first line:\n\n```\nsage: R.<x> = PolynomialRing(Integers(101), implementation='ntl')\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-2-d6c1b40b741c> in <module>()\n----> 1 R = PolynomialRing(Integers(Integer(101)), implementation='ntl', names=('x',)); (x,) = R._first_ngens(1)\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.pyc in PolynomialRing(base_ring, *args, **kwds)\n    648         return _multi_variate(base_ring, names, **kwds)\n    649     else:\n--> 650         return _single_variate(base_ring, names, **kwds)\n    651 \n    652 \n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.pyc in _single_variate(base_ring, name, sparse, implementation, order)\n    734         else:\n    735             constructor = polynomial_ring.PolynomialRing_commutative\n--> 736         implementation_names = constructor._implementation_names(implementation, base_ring, sparse)\n    737         implementation = implementation_names[0]\n    738 \n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.pyc in _implementation_names(cls, implementation, base_ring, sparse)\n    504         if names is NotImplemented:\n    505             raise ValueError(\"unknown implementation %r for %s polynomial rings over %r\" %\n--> 506                     (implementation, \"sparse\" if sparse else \"dense\", base_ring))\n    507         assert isinstance(names, list)\n    508         assert implementation in names\n\nValueError: unknown implementation 'ntl' for dense polynomial rings over Ring of integers modulo 101\n```",
    "created_at": "2018-01-15T14:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202260",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

I get a failure already on the first line:

```
sage: R.<x> = PolynomialRing(Integers(101), implementation='ntl')
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-2-d6c1b40b741c> in <module>()
----> 1 R = PolynomialRing(Integers(Integer(101)), implementation='ntl', names=('x',)); (x,) = R._first_ngens(1)

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.pyc in PolynomialRing(base_ring, *args, **kwds)
    648         return _multi_variate(base_ring, names, **kwds)
    649     else:
--> 650         return _single_variate(base_ring, names, **kwds)
    651 
    652 

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.pyc in _single_variate(base_ring, name, sparse, implementation, order)
    734         else:
    735             constructor = polynomial_ring.PolynomialRing_commutative
--> 736         implementation_names = constructor._implementation_names(implementation, base_ring, sparse)
    737         implementation = implementation_names[0]
    738 

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.pyc in _implementation_names(cls, implementation, base_ring, sparse)
    504         if names is NotImplemented:
    505             raise ValueError("unknown implementation %r for %s polynomial rings over %r" %
--> 506                     (implementation, "sparse" if sparse else "dense", base_ring))
    507         assert isinstance(names, list)
    508         assert implementation in names

ValueError: unknown implementation 'ntl' for dense polynomial rings over Ring of integers modulo 101
```



---

archive/issue_comments_202261.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThey changed the keyword to `NTL` without matching lower case. With that I get an informative error message.",
    "created_at": "2018-01-15T16:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202261",
    "user": "https://github.com/rwst"
}
```

<div id="comment:11" align="right">comment:11</div>

They changed the keyword to `NTL` without matching lower case. With that I get an informative error message.



---

archive/issue_comments_202262.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,28 +1,61 @@\n \n ```\n-sage: R.<x> = PolynomialRing(Integers(101), implementation='ntl')\n+sage: R.<x> = PolynomialRing(Integers(101), implementation='NTL')\n sage: 1/x\n ---------------------------------------------------------------------------\n-TypeError                                 Traceback (most recent call last)\n-<ipython-input-50-fd72f6c47fe6> in <module>()\n+NotImplementedError                       Traceback (most recent call last)\n+<ipython-input-2-3e814ccafd34> in <module>()\n ----> 1 Integer(1)/x\n \n-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__div__ (sage/structure/element.c:15915)()\n+/usr/local/src/sage-config/src/sage/rings/integer.pyx in sage.rings.integer.Integer.__div__ (build/cythonized/sage/rings/integer.c:13187)()\n+   1874             return y\n+   1875 \n+-> 1876         return coercion_model.bin_op(left, right, operator.div)\n+   1877 \n+   1878     cpdef _div_(self, right):\n \n-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7514)()\n+/usr/local/src/sage-config/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:9515)()\n+   1079         try:\n+   1080             xy = self.canonical_coercion(x,y)\n+-> 1081             return PyObject_CallObject(op, xy)\n+   1082         except TypeError as err:\n+   1083             if xy is not None:\n \n-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7459)()\n+/usr/local/src/sage-config/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__div__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23976)()\n+   2121 \n+   2122     def __div__(left, right):\n+-> 2123         return PyNumber_TrueDivide(left, right)\n+   2124 \n+   2125     def __pow__(left, right, modulus):\n \n-/home/ralf/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.__div__ (sage/rings/polynomial/polynomial_element.c:17669)()\n+/usr/local/src/sage-config/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__truediv__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23681)()\n+   2103         # Same parents => bypass coercion\n+   2104         if have_same_parent(left, right):\n+-> 2105             return (<Element>left)._div_(right)\n+   2106 \n+   2107         # Try division of polynomial by a scalar\n \n-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__div__ (sage/structure/element.c:15897)()\n+/usr/local/src/sage-config/src/sage/structure/element.pyx in sage.structure.element.RingElement._div_ (build/cythonized/sage/structure/element.c:17628)()\n+   2476         except AttributeError:\n+   2477             raise bin_op_exception('/', self, other)\n+-> 2478         return frac(self, other)\n+   2479 \n+   2480     def __invert__(self):\n \n-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.RingElement._div_ (sage/structure/element.c:16030)()\n+/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9433)()\n+    917                 return mor._call_(x)\n+    918             else:\n+--> 919                 return mor._call_with_args(x, args, kwds)\n+    920 \n+    921         raise TypeError(\"No conversion defined from %s to %s\"%(R, self))\n \n-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:8852)()\n+/usr/local/src/sage-config/src/sage/rings/fraction_field_FpT.pyx in sage.rings.fraction_field_FpT.Polyring_FpT_coerce._call_with_args (build/cythonized/sage/rings/fraction_field_FpT.cpp:12573)()\n+   1132             x = <Polynomial_zmod_flint?> _x\n+   1133         except TypeError:\n+-> 1134             raise NotImplementedError('Fraction fields not implemented for this type.')\n+   1135         cdef FpTElement ans = <FpTElement>FpTElement.__new__(FpTElement)\n+   1136         ans._parent = self.codomain()\n \n-/home/ralf/sage/local/lib/python2.7/site-packages/sage/rings/fraction_field_FpT.so in sage.rings.fraction_field_FpT.Polyring_FpT_coerce._call_with_args (sage/rings/fraction_field_FpT.cpp:12184)()\n-\n-TypeError: Cannot convert sage.rings.polynomial.polynomial_modn_dense_ntl.Polynomial_dense_mod_p to sage.rings.polynomial.polynomial_zmod_flint.Polynomial_zmod_flint\n+NotImplementedError: Fraction fields not implemented for this type.\n ```\n This makes NTL modpolys unusable in fractions.\n``````\n",
    "created_at": "2018-01-15T18:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202262",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,28 +1,61 @@
 
 ```
-sage: R.<x> = PolynomialRing(Integers(101), implementation='ntl')
+sage: R.<x> = PolynomialRing(Integers(101), implementation='NTL')
 sage: 1/x
 ---------------------------------------------------------------------------
-TypeError                                 Traceback (most recent call last)
-<ipython-input-50-fd72f6c47fe6> in <module>()
+NotImplementedError                       Traceback (most recent call last)
+<ipython-input-2-3e814ccafd34> in <module>()
 ----> 1 Integer(1)/x
 
-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__div__ (sage/structure/element.c:15915)()
+/usr/local/src/sage-config/src/sage/rings/integer.pyx in sage.rings.integer.Integer.__div__ (build/cythonized/sage/rings/integer.c:13187)()
+   1874             return y
+   1875 
+-> 1876         return coercion_model.bin_op(left, right, operator.div)
+   1877 
+   1878     cpdef _div_(self, right):
 
-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7514)()
+/usr/local/src/sage-config/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:9515)()
+   1079         try:
+   1080             xy = self.canonical_coercion(x,y)
+-> 1081             return PyObject_CallObject(op, xy)
+   1082         except TypeError as err:
+   1083             if xy is not None:
 
-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7459)()
+/usr/local/src/sage-config/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__div__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23976)()
+   2121 
+   2122     def __div__(left, right):
+-> 2123         return PyNumber_TrueDivide(left, right)
+   2124 
+   2125     def __pow__(left, right, modulus):
 
-/home/ralf/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.__div__ (sage/rings/polynomial/polynomial_element.c:17669)()
+/usr/local/src/sage-config/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__truediv__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23681)()
+   2103         # Same parents => bypass coercion
+   2104         if have_same_parent(left, right):
+-> 2105             return (<Element>left)._div_(right)
+   2106 
+   2107         # Try division of polynomial by a scalar
 
-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__div__ (sage/structure/element.c:15897)()
+/usr/local/src/sage-config/src/sage/structure/element.pyx in sage.structure.element.RingElement._div_ (build/cythonized/sage/structure/element.c:17628)()
+   2476         except AttributeError:
+   2477             raise bin_op_exception('/', self, other)
+-> 2478         return frac(self, other)
+   2479 
+   2480     def __invert__(self):
 
-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.RingElement._div_ (sage/structure/element.c:16030)()
+/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9433)()
+    917                 return mor._call_(x)
+    918             else:
+--> 919                 return mor._call_with_args(x, args, kwds)
+    920 
+    921         raise TypeError("No conversion defined from %s to %s"%(R, self))
 
-/home/ralf/sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:8852)()
+/usr/local/src/sage-config/src/sage/rings/fraction_field_FpT.pyx in sage.rings.fraction_field_FpT.Polyring_FpT_coerce._call_with_args (build/cythonized/sage/rings/fraction_field_FpT.cpp:12573)()
+   1132             x = <Polynomial_zmod_flint?> _x
+   1133         except TypeError:
+-> 1134             raise NotImplementedError('Fraction fields not implemented for this type.')
+   1135         cdef FpTElement ans = <FpTElement>FpTElement.__new__(FpTElement)
+   1136         ans._parent = self.codomain()
 
-/home/ralf/sage/local/lib/python2.7/site-packages/sage/rings/fraction_field_FpT.so in sage.rings.fraction_field_FpT.Polyring_FpT_coerce._call_with_args (sage/rings/fraction_field_FpT.cpp:12184)()
-
-TypeError: Cannot convert sage.rings.polynomial.polynomial_modn_dense_ntl.Polynomial_dense_mod_p to sage.rings.polynomial.polynomial_zmod_flint.Polynomial_zmod_flint
+NotImplementedError: Fraction fields not implemented for this type.
 ```
 This makes NTL modpolys unusable in fractions.
``````




---

archive/issue_comments_202263.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@rwst](#comment:9):\n> The issue was resolved independently.\n\nWhich issue was \"solved\"? It still doesn't work.",
    "created_at": "2018-01-15T18:00:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202263",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@rwst](#comment:9):
> The issue was resolved independently.

Which issue was "solved"? It still doesn't work.



---

archive/issue_events_225593.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-15T18:00:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225593"
}
```



---

archive/issue_events_225594.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-15T18:00:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225594"
}
```



---

archive/issue_events_225595.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-15T18:01:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225595"
}
```



---

archive/issue_comments_202264.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nWell I opened the issue and after that decided to be satisfied with a good error. But hijack away...I don't claim ownership.",
    "created_at": "2018-01-15T18:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202264",
    "user": "https://github.com/rwst"
}
```

<div id="comment:15" align="right">comment:15</div>

Well I opened the issue and after that decided to be satisfied with a good error. But hijack away...I don't claim ownership.



---

archive/issue_comments_202265.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI don't personally care... but changing the error message does not fix the issue.",
    "created_at": "2018-01-15T20:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15954#issuecomment-202265",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

I don't personally care... but changing the error message does not fix the issue.



---

archive/issue_events_225596.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:40:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15954",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15954#event-225596"
}
```
