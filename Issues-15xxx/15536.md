# Issue 15536: Implement symplectic and orthogonal bases of Sym

archive/issues_015299.json:
```json
{
    "assignees": [],
    "body": "Following a paper of Chari and Kleber: *Symmetric functions and representations of quantum affine algebras*, arxiv:0011161v1. We implement the symplectic and orthogonal (filtered) bases of Sym.\n\nDepends on #17096\n\nAssignee: **sage-combinat**\n\nCC:  sage-combinat @darijgr @simon-king-jena @nthiery\n\nKeywords: **days54, sym**\n\nBranch/Commit: **[5b492f3](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**\n\nReviewer: **Mike Zabrocki**\n\nAuthor: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15536_\n\n",
    "closed_at": "2015-11-03T23:59:25Z",
    "created_at": "2013-12-17T21:12:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement symplectic and orthogonal bases of Sym",
    "type": "issue",
    "updated_at": "2015-11-03T23:59:25Z",
    "url": "https://github.com/sagemath/sage/issues/15536",
    "user": "https://github.com/tscrim"
}
```
Following a paper of Chari and Kleber: *Symmetric functions and representations of quantum affine algebras*, arxiv:0011161v1. We implement the symplectic and orthogonal (filtered) bases of Sym.

Depends on #17096

Assignee: **sage-combinat**

CC:  sage-combinat @darijgr @simon-king-jena @nthiery

Keywords: **days54, sym**

Branch/Commit: **[5b492f3](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**

Reviewer: **Mike Zabrocki**

Author: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/15536_





---

archive/issue_events_196714.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:12:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196714"
}
```



---

archive/issue_events_196715.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:12:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196715"
}
```



---

archive/issue_events_196716.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:12:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196716"
}
```



---

archive/issue_events_196717.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:12:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196717"
}
```



---

archive/issue_events_196718.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:16:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196718"
}
```



---

archive/issue_comments_196547.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nDarij (or anyone else who wants to review this),\n\nNicolas said it's fine being in `GradedHopfAlgebrasWithBasis` since `Sym` does admit a graded basis, even if the given basis itself is not graded.",
    "created_at": "2013-12-17T21:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196547",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'>Comment 1:</a>
Darij (or anyone else who wants to review this),

Nicolas said it's fine being in `GradedHopfAlgebrasWithBasis` since `Sym` does admit a graded basis, even if the given basis itself is not graded.



---

archive/issue_comments_196548.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI fear Nicolas is wrong here:\n\n```\nsage: o = Sym.o()\nsage: TestSuite(o).run()\nFailure in _test_antipode:\nTraceback (most recent call last):\n  File \"/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 282, in run\n    test_method(tester = tester)\n  File \"/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/categories/hopf_algebras_with_basis.py\", line 263, in _test_antipode\n    tester.assert_(SI(x) == self.counit(x) * self.one())\n  File \"/home/darij/gitsage/sage-5.13.beta1/local/lib/python/unittest/case.py\", line 424, in assertTrue\n    raise self.failureException(msg)\nAssertionError: False is not true\n------------------------------------------------------------\nThe following tests failed: _test_antipode\n```\nThe problem is that the counit is still defined as the constant coefficient, but that's only true for graded bases. Concrete example:\n\n```\nsage: o[2].counit()\n0\nsage: s(o[2]).counit()\n-1\n```\n\nThe same issue would be happening with antipode and degree_negation if not for the fact that the o and sp bases happen to be graded w.r.t. the induced ZZ/2ZZ-grading.",
    "created_at": "2013-12-20T11:10:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196548",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:2'>Comment 2:</a>
I fear Nicolas is wrong here:

```
sage: o = Sym.o()
sage: TestSuite(o).run()
Failure in _test_antipode:
Traceback (most recent call last):
  File "/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 282, in run
    test_method(tester = tester)
  File "/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/categories/hopf_algebras_with_basis.py", line 263, in _test_antipode
    tester.assert_(SI(x) == self.counit(x) * self.one())
  File "/home/darij/gitsage/sage-5.13.beta1/local/lib/python/unittest/case.py", line 424, in assertTrue
    raise self.failureException(msg)
AssertionError: False is not true
------------------------------------------------------------
The following tests failed: _test_antipode
```
The problem is that the counit is still defined as the constant coefficient, but that's only true for graded bases. Concrete example:

```
sage: o[2].counit()
0
sage: s(o[2]).counit()
-1
```

The same issue would be happening with antipode and degree_negation if not for the fact that the o and sp bases happen to be graded w.r.t. the induced ZZ/2ZZ-grading.



---

archive/issue_comments_196549.json:
```json
{
    "body": "Changed commit from **[9536f54](https://github.com/sagemath/sagetrac-mirror/commit/9536f54a96401a5bdabdaa56dc65640f8bb1bfda)** to **[223b11b](https://github.com/sagemath/sagetrac-mirror/commit/223b11b19d050597267d29150fa1e2cb12a3861b)**",
    "created_at": "2013-12-27T06:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196549",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9536f54](https://github.com/sagemath/sagetrac-mirror/commit/9536f54a96401a5bdabdaa56dc65640f8bb1bfda)** to **[223b11b](https://github.com/sagemath/sagetrac-mirror/commit/223b11b19d050597267d29150fa1e2cb12a3861b)**



---

archive/issue_comments_196550.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/223b11b\">223b11b</a></td><td><code>Fix the counit in sp/o bases.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4933218\">4933218</a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr></table>\n",
    "created_at": "2013-12-27T06:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196550",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/223b11b">223b11b</a></td><td><code>Fix the counit in sp/o bases.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4933218">4933218</a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr></table>




---

archive/issue_comments_196551.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c\">9ea2a2c</a></td><td><code>Added comment about ZZ / 2ZZ grading.</code></td></tr></table>\n",
    "created_at": "2013-12-27T06:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196551",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c">9ea2a2c</a></td><td><code>Added comment about ZZ / 2ZZ grading.</code></td></tr></table>




---

archive/issue_comments_196552.json:
```json
{
    "body": "Changed commit from **[223b11b](https://github.com/sagemath/sagetrac-mirror/commit/223b11b19d050597267d29150fa1e2cb12a3861b)** to **[9ea2a2c](https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c1eafde6abc39d819002cff6ea43984108)**",
    "created_at": "2013-12-27T06:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196552",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[223b11b](https://github.com/sagemath/sagetrac-mirror/commit/223b11b19d050597267d29150fa1e2cb12a3861b)** to **[9ea2a2c](https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c1eafde6abc39d819002cff6ea43984108)**



---

archive/issue_comments_196553.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@darijgr](#comment%3A2):\n> I fear Nicolas is wrong here\n\n>\n> ...\n>\n> The problem is that the counit is still defined as the constant coefficient, but that's only true for graded bases.\n\nYep, but that's technically a fault with the generic symmetric function code, not the category (which I think does it via coercion by default). Fixed.\n\n> The same issue would be happening with antipode and degree_negation if not for the fact that the o and sp bases happen to be graded w.r.t. the induced ZZ/2ZZ-grading.\n\nAgain, not the category, but it's nice to know these things.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c\">9ea2a2c</a></td><td><code>Added comment about ZZ / 2ZZ grading.</code></td></tr></table>\n",
    "created_at": "2013-12-27T06:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196553",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@darijgr](#comment%3A2):
> I fear Nicolas is wrong here

>
> ...
>
> The problem is that the counit is still defined as the constant coefficient, but that's only true for graded bases.

Yep, but that's technically a fault with the generic symmetric function code, not the category (which I think does it via coercion by default). Fixed.

> The same issue would be happening with antipode and degree_negation if not for the fact that the o and sp bases happen to be graded w.r.t. the induced ZZ/2ZZ-grading.

Again, not the category, but it's nice to know these things.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c">9ea2a2c</a></td><td><code>Added comment about ZZ / 2ZZ grading.</code></td></tr></table>




---

archive/issue_comments_196554.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI see. Can it be that the `SymmetricFunctionsBases` class should be split into `SymmetricFunctionsBases` and `SymmetricFunctionsConnectedGradedBases` or else we risk running into this whenever other new methods are implemented? If so, I'd suggest doing this (I can do it myself), although I'd wait for #15473 to be merged beforehand.",
    "created_at": "2013-12-27T15:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196554",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:6'>Comment 6:</a>
I see. Can it be that the `SymmetricFunctionsBases` class should be split into `SymmetricFunctionsBases` and `SymmetricFunctionsConnectedGradedBases` or else we risk running into this whenever other new methods are implemented? If so, I'd suggest doing this (I can do it myself), although I'd wait for #15473 to be merged beforehand.



---

archive/issue_comments_196555.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd17c25\">fd17c25</a></td><td><code>Documentation tweaks/typo fixes.</code></td></tr></table>\n",
    "created_at": "2013-12-27T15:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196555",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd17c25">fd17c25</a></td><td><code>Documentation tweaks/typo fixes.</code></td></tr></table>




---

archive/issue_comments_196556.json:
```json
{
    "body": "Changed commit from **[9ea2a2c](https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c1eafde6abc39d819002cff6ea43984108)** to **[fd17c25](https://github.com/sagemath/sagetrac-mirror/commit/fd17c25145d136e2fc342b450d38f6441ff09d24)**",
    "created_at": "2013-12-27T15:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196556",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9ea2a2c](https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c1eafde6abc39d819002cff6ea43984108)** to **[fd17c25](https://github.com/sagemath/sagetrac-mirror/commit/fd17c25145d136e2fc342b450d38f6441ff09d24)**



---

archive/issue_comments_196557.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI doubt there will be too many new methods which a general implementation does not involve coercing to a basis where we can do the computation explicitly, so I don't think it's necessary. Nevertheless, something for another ticket (possibly after a sage-combinat-devel discussion).",
    "created_at": "2013-12-27T16:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196557",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'>Comment 8:</a>
I doubt there will be too many new methods which a general implementation does not involve coercing to a basis where we can do the computation explicitly, so I don't think it's necessary. Nevertheless, something for another ticket (possibly after a sage-combinat-devel discussion).



---

archive/issue_events_196719.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196719"
}
```



---

archive/issue_events_196720.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196720"
}
```



---

archive/issue_comments_196558.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nThere is a typo \"Scirmshaw\"",
    "created_at": "2014-04-18T20:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196558",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'>Comment 10:</a>
There is a typo "Scirmshaw"



---

archive/issue_comments_196559.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de32f118124b20ef508985a86438b4e17aeabb45\">de32f11</a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37\">db8a17c</a></td><td><code>Learning to spell my name...</code></td></tr></table>\n",
    "created_at": "2014-04-19T05:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196559",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de32f118124b20ef508985a86438b4e17aeabb45">de32f11</a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37">db8a17c</a></td><td><code>Learning to spell my name...</code></td></tr></table>




---

archive/issue_comments_196560.json:
```json
{
    "body": "Changed commit from **[fd17c25](https://github.com/sagemath/sagetrac-mirror/commit/fd17c25145d136e2fc342b450d38f6441ff09d24)** to **[db8a17c](https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37)**",
    "created_at": "2014-04-19T05:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196560",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fd17c25](https://github.com/sagemath/sagetrac-mirror/commit/fd17c25145d136e2fc342b450d38f6441ff09d24)** to **[db8a17c](https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37)**



---

archive/issue_comments_196561.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nXP",
    "created_at": "2014-04-19T05:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196561",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'>Comment 12:</a>
XP



---

archive/issue_events_196721.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196721"
}
```



---

archive/issue_events_196722.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196722"
}
```



---

archive/issue_events_196723.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196723"
}
```



---

archive/issue_events_196724.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196724"
}
```



---

archive/issue_comments_196562.json:
```json
{
    "body": "Changed commit from **[db8a17c](https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37)** to **[523c023](https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c)**",
    "created_at": "2015-01-03T04:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196562",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[db8a17c](https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37)** to **[523c023](https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c)**



---

archive/issue_comments_196563.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c\">523c023</a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr></table>\n",
    "created_at": "2015-01-03T04:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196563",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c">523c023</a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr></table>




---

archive/issue_comments_196564.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nPlease do not use abbreviations like \"lps\" in the name of functions.\n\nNathann",
    "created_at": "2015-02-06T09:26:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196564",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'>Comment 16:</a>
Please do not use abbreviations like "lps" in the name of functions.

Nathann



---

archive/issue_comments_196565.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nmissing doctests in sf.py, see patchbot report",
    "created_at": "2015-04-25T17:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196565",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'>Comment 17:</a>
missing doctests in sf.py, see patchbot report



---

archive/issue_events_196725.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-25T17:22:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196725"
}
```



---

archive/issue_events_196726.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-25T17:22:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196726"
}
```



---

archive/issue_comments_196566.json:
```json
{
    "body": "Changed commit from **[523c023](https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c)** to **[9bfd9e4](https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03)**",
    "created_at": "2015-10-06T02:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196566",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[523c023](https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c)** to **[9bfd9e4](https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03)**



---

archive/issue_comments_196567.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/570bc493fe22bd8fb6f517300a27fea751cb6585\">570bc49</a></td><td><code>Merge branch 'public/categories/super_categories-18044' into 6.9.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b91cd828945a4668938298ef741769ce64f909a3\">b91cd82</a></td><td><code>trac #18044 correct one typo in the doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fd1df2ac522180985b49e66895ffb58bb93823b\">7fd1df2</a></td><td><code>Merge branch 'public/categories/super_categories-18044' of trac.sagemath.org:sage into public/categories/super_categories-18044</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/057933782566ba05423d302fe8fae82276238edc\">0579337</a></td><td><code>Some reviewer tweaks and doc additions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aec22cc54dee46aceaa315a96905059927ad1ea4\">aec22cc</a></td><td><code>Added one more test.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b2046fdfb0545b3b0908f8c3de609becd78bc5f\">4b2046f</a></td><td><code>Merge branch 'public/categories/super_categories-18044' into public/categories/filtered_algebras-17096</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f67b6b0d0e10c2f4816acc791f6dc2a016eeb8d\">3f67b6b</a></td><td><code>Fixing trivial doctest due to changes in category heirarchy.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa476ddac910418cb12790af8896154ddca8fd00\">fa476dd</a></td><td><code>Fixing double-colon in INPUT block.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cc8b8460dfe5a05380e73e667dc7294e4369774\">6cc8b84</a></td><td><code>Reviewer changes with Darij.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03\">9bfd9e4</a></td><td><code>Merge branch 'public/categories/filtered_algebras-17096' into public/combinat/sf/sp_orth</code></td></tr></table>\n",
    "created_at": "2015-10-06T02:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196567",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/570bc493fe22bd8fb6f517300a27fea751cb6585">570bc49</a></td><td><code>Merge branch 'public/categories/super_categories-18044' into 6.9.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b91cd828945a4668938298ef741769ce64f909a3">b91cd82</a></td><td><code>trac #18044 correct one typo in the doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fd1df2ac522180985b49e66895ffb58bb93823b">7fd1df2</a></td><td><code>Merge branch 'public/categories/super_categories-18044' of trac.sagemath.org:sage into public/categories/super_categories-18044</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/057933782566ba05423d302fe8fae82276238edc">0579337</a></td><td><code>Some reviewer tweaks and doc additions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aec22cc54dee46aceaa315a96905059927ad1ea4">aec22cc</a></td><td><code>Added one more test.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b2046fdfb0545b3b0908f8c3de609becd78bc5f">4b2046f</a></td><td><code>Merge branch 'public/categories/super_categories-18044' into public/categories/filtered_algebras-17096</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f67b6b0d0e10c2f4816acc791f6dc2a016eeb8d">3f67b6b</a></td><td><code>Fixing trivial doctest due to changes in category heirarchy.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa476ddac910418cb12790af8896154ddca8fd00">fa476dd</a></td><td><code>Fixing double-colon in INPUT block.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cc8b8460dfe5a05380e73e667dc7294e4369774">6cc8b84</a></td><td><code>Reviewer changes with Darij.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03">9bfd9e4</a></td><td><code>Merge branch 'public/categories/filtered_algebras-17096' into public/combinat/sf/sp_orth</code></td></tr></table>




---

archive/issue_events_196727.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-06T02:34:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196727"
}
```



---

archive/issue_events_196728.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-06T02:34:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196728"
}
```



---

archive/issue_comments_196568.json:
```json
{
    "body": "Dependencies: **#17096**",
    "created_at": "2015-10-06T02:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196568",
    "user": "https://github.com/tscrim"
}
```

Dependencies: **#17096**



---

archive/issue_comments_196569.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI added the requisite doctests and I also implemented functionality for bases of `Sym` to be considered filtered (although we could make these bases be `ZZ / 2ZZ`-graded but the `ZZ`-filtration is more natural), which requires #17096.",
    "created_at": "2015-10-06T02:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196569",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'>Comment 19:</a>
I added the requisite doctests and I also implemented functionality for bases of `Sym` to be considered filtered (although we could make these bases be `ZZ / 2ZZ`-graded but the `ZZ`-filtration is more natural), which requires #17096.



---

archive/issue_events_196729.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-06T02:34:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196729"
}
```



---

archive/issue_events_196730.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-06T02:34:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196730"
}
```



---

archive/issue_comments_196570.json:
```json
{
    "body": "Changed commit from **[9bfd9e4](https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03)** to **[57f92dd](https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db)**",
    "created_at": "2015-10-06T02:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196570",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9bfd9e4](https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03)** to **[57f92dd](https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db)**



---

archive/issue_comments_196571.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db\">57f92dd</a></td><td><code>Adding some doctests and making things use the filtered basis.</code></td></tr></table>\n",
    "created_at": "2015-10-06T02:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196571",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db">57f92dd</a></td><td><code>Adding some doctests and making things use the filtered basis.</code></td></tr></table>




---

archive/issue_comments_196572.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nTravis, thanks for pointing this out to me.  The `st` basis in ticket #19327 is very similar and since the group of permutation matrices are orthogonal matrices, it will be that `o(lambda)` has a positive `st` expansion.\n\nThere is an explicit formula for the change of basis from `sp` and `o` to Schur basis (that is almost exactly the same as the `_s_to_sp_on_basis` and `_s_to_o_on_basis` that you have implemented, it just alternates in sign by degree and the set of partitions you sum over are transposed).  Is it faster to use the triangularity like you have here?  Are you aware of it and have you tried it?",
    "created_at": "2015-10-06T12:17:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196572",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:21'>Comment 21:</a>
Travis, thanks for pointing this out to me.  The `st` basis in ticket #19327 is very similar and since the group of permutation matrices are orthogonal matrices, it will be that `o(lambda)` has a positive `st` expansion.

There is an explicit formula for the change of basis from `sp` and `o` to Schur basis (that is almost exactly the same as the `_s_to_sp_on_basis` and `_s_to_o_on_basis` that you have implemented, it just alternates in sign by degree and the set of partitions you sum over are transposed).  Is it faster to use the triangularity like you have here?  Are you aware of it and have you tried it?



---

archive/issue_comments_196573.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nNo, I was not aware of it and haven't tried it. I'm guessing that just comes from a m\u00f6bius inversion? I suspect it will be significantly faster than using triangularity. Just to make sure I understand the computation, I keep the same coefficient up to a sign (which is the size of `mu`) and then take `mu.transpose()` as the basis element? And/Or do I need to transpose inside the coefficients?",
    "created_at": "2015-10-06T12:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196573",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'>Comment 22:</a>
No, I was not aware of it and haven't tried it. I'm guessing that just comes from a möbius inversion? I suspect it will be significantly faster than using triangularity. Just to make sure I understand the computation, I keep the same coefficient up to a sign (which is the size of `mu`) and then take `mu.transpose()` as the basis element? And/Or do I need to transpose inside the coefficients?



---

archive/issue_comments_196574.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nWhat I said in my last comment isn't quite right.  It is in my paper with Mark Shimozono \"Deformed universal characters for classical and affine algebras, Journal of Algebra, 299 (2006), pp. 33-61\" (arXiv:math.CO/0404288) but it probably goes back to Koike and Terada or maybe even Littlewood.  It is equation (4.1)+(4.5) for the orthogonal and (4.1)+(4.4) for the symplectic in my paper.",
    "created_at": "2015-10-06T13:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196574",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:23'>Comment 23:</a>
What I said in my last comment isn't quite right.  It is in my paper with Mark Shimozono "Deformed universal characters for classical and affine algebras, Journal of Algebra, 299 (2006), pp. 33-61" (arXiv:math.CO/0404288) but it probably goes back to Koike and Terada or maybe even Littlewood.  It is equation (4.1)+(4.5) for the orthogonal and (4.1)+(4.4) for the symplectic in my paper.



---

archive/issue_comments_196575.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI'm sorry, but I can't compile anything new right now so I am afraid to push anything.  I can write functions on a working version of sage and I am pretty sure the following is right (following the model of `_s_to_o_on_basis`):\n\n```\n    def _o_to_s_on_basis(self, lam):\n        import sage.libs.lrcalc.lrcalc as lrcalc\n        from sage.combinat.partition import Partitions\n        R = self.base_ring()\n        return self._from_dict({ mu: R.sum(\n            (-1)**j*lrcalc.lrcoef_unsafe(lam, mu, nu)\n            for nu in Partitions(2*j)\n              if all(nu.arm_length(i,i)==nu.leg_length(i,i)+1\n                for i in range(nu.frobenius_rank())) )\n            for j in range(sum(lam)//2+1)\n            for mu in Partitions(sum(lam)-2*j) })\n```\nMoreover, if you switch `arm` and `leg` then that is the `_sp_to_s_on_basis`.\n\nYour `_s_to_o_on_basis` has lots of extra looping going on that is not necessary.  Because `|lam|==|mu|+|nu|` you can remove one sum.  Because `nu` has to be an even partition, you don't need to run over `j` odd.  Here is a suggested modification:\n\n```\ndef _s_to_o_on_basis(self, lam):\n    import sage.libs.lrcalc.lrcalc as lrcalc\n    from sage.combinat.partition import Partitions\n    R = self.base_ring()\n    return self._from_dict({ mu: R.sum( lrcalc.lrcoef_unsafe(lam, mu, nu)\n                                 for nu in Partitions(2*j)\n                                     if all(x % 2 == 0 for x in nu))\n                                 for j in range(sum(lam)//2+1)\n                                 for mu in Partitions(sum(lam)-2*j) })\n```",
    "created_at": "2015-10-06T17:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196575",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:24'>Comment 24:</a>
I'm sorry, but I can't compile anything new right now so I am afraid to push anything.  I can write functions on a working version of sage and I am pretty sure the following is right (following the model of `_s_to_o_on_basis`):

```
    def _o_to_s_on_basis(self, lam):
        import sage.libs.lrcalc.lrcalc as lrcalc
        from sage.combinat.partition import Partitions
        R = self.base_ring()
        return self._from_dict({ mu: R.sum(
            (-1)**j*lrcalc.lrcoef_unsafe(lam, mu, nu)
            for nu in Partitions(2*j)
              if all(nu.arm_length(i,i)==nu.leg_length(i,i)+1
                for i in range(nu.frobenius_rank())) )
            for j in range(sum(lam)//2+1)
            for mu in Partitions(sum(lam)-2*j) })
```
Moreover, if you switch `arm` and `leg` then that is the `_sp_to_s_on_basis`.

Your `_s_to_o_on_basis` has lots of extra looping going on that is not necessary.  Because `|lam|==|mu|+|nu|` you can remove one sum.  Because `nu` has to be an even partition, you don't need to run over `j` odd.  Here is a suggested modification:

```
def _s_to_o_on_basis(self, lam):
    import sage.libs.lrcalc.lrcalc as lrcalc
    from sage.combinat.partition import Partitions
    R = self.base_ring()
    return self._from_dict({ mu: R.sum( lrcalc.lrcoef_unsafe(lam, mu, nu)
                                 for nu in Partitions(2*j)
                                     if all(x % 2 == 0 for x in nu))
                                 for j in range(sum(lam)//2+1)
                                 for mu in Partitions(sum(lam)-2*j) })
```



---

archive/issue_comments_196576.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nI just thought about it and it would probably be better in `_s_to_o_on_basis` to loop over partitions of `j` and double the lengths of the parts of the partition.",
    "created_at": "2015-10-06T17:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196576",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:25'>Comment 25:</a>
I just thought about it and it would probably be better in `_s_to_o_on_basis` to loop over partitions of `j` and double the lengths of the parts of the partition.



---

archive/issue_comments_196577.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f\">bd49490</a></td><td><code>Changes from Mike and some added tests.</code></td></tr></table>\n",
    "created_at": "2015-10-06T20:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196577",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>Comment 26:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f">bd49490</a></td><td><code>Changes from Mike and some added tests.</code></td></tr></table>




---

archive/issue_comments_196578.json:
```json
{
    "body": "Changed commit from **[57f92dd](https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db)** to **[bd49490](https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f)**",
    "created_at": "2015-10-06T20:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196578",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[57f92dd](https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db)** to **[bd49490](https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f)**



---

archive/issue_comments_196579.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nThank you for those suggestions Mike. I implemented all of them, and they resulted in orders of magnitude speedups (including the inverse basis transformations).",
    "created_at": "2015-10-06T20:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196579",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'>Comment 27:</a>
Thank you for those suggestions Mike. I implemented all of them, and they resulted in orders of magnitude speedups (including the inverse basis transformations).



---

archive/issue_comments_196580.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3\">a7ee857</a></td><td><code>Adding the Shimozono-Zabrocki paper as a reference.</code></td></tr></table>\n",
    "created_at": "2015-10-06T20:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196580",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'>Comment 28:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3">a7ee857</a></td><td><code>Adding the Shimozono-Zabrocki paper as a reference.</code></td></tr></table>




---

archive/issue_comments_196581.json:
```json
{
    "body": "Changed commit from **[bd49490](https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f)** to **[a7ee857](https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3)**",
    "created_at": "2015-10-06T20:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196581",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bd49490](https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f)** to **[a7ee857](https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3)**



---

archive/issue_comments_196582.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nAt some point in the future, we should implement the single box version and the Hall-Littlewood analogs given in your paper with Mark.",
    "created_at": "2015-10-06T20:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196582",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'>Comment 29:</a>
At some point in the future, we should implement the single box version and the Hall-Littlewood analogs given in your paper with Mark.



---

archive/issue_comments_196583.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nHere is an important question to resolve we can set to positive review.  Is the following right?\n\n```\nsage: s(o.an_element().homogeneous_component(0))\n2*s[]\nsage: s(o.an_element()).homogeneous_component(0)\n-s[]\n```\nI think the answer is no but I don't want to change it before I get full opinions.  I think that we should look carefully to see if there other methods that are also filter dependent.",
    "created_at": "2015-10-08T11:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196583",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:30'>Comment 30:</a>
Here is an important question to resolve we can set to positive review.  Is the following right?

```
sage: s(o.an_element().homogeneous_component(0))
2*s[]
sage: s(o.an_element()).homogeneous_component(0)
-s[]
```
I think the answer is no but I don't want to change it before I get full opinions.  I think that we should look carefully to see if there other methods that are also filter dependent.



---

archive/issue_comments_196584.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nLets look carefully:\n\n```\nsage: o[2].is_homogeneous()\nTrue\nsage: s(o[2]).is_homogeneous()\nFalse\nsage: o.an_element().degree_zero_coefficient()\n2\nsage: s(o.an_element()).degree_zero_coefficient()\n-1\n```\n`degree_negation` seems to work fine but that is special for these bases (and would not say work for the odd-symplectic basis or irreducible S_n character basis).  It would be better if on filtered bases that these methods were done by coercion.",
    "created_at": "2015-10-08T12:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196584",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:31'>Comment 31:</a>
Lets look carefully:

```
sage: o[2].is_homogeneous()
True
sage: s(o[2]).is_homogeneous()
False
sage: o.an_element().degree_zero_coefficient()
2
sage: s(o.an_element()).degree_zero_coefficient()
-1
```
`degree_negation` seems to work fine but that is special for these bases (and would not say work for the odd-symplectic basis or irreducible S_n character basis).  It would be better if on filtered bases that these methods were done by coercion.



---

archive/issue_comments_196585.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nI would say that is okay because the COB morphism is as filtered algebras, so we can't expect homogeneous components to go to homogeneous components. However this should still work for top-degree homogeneous components.\n\nSo do you want me to do some surgery on the category of Sym bases and make 2 basis categories, one for the filtered and one for the graded? We could then have some generic code for the filtered that uses coercion for those methods that implicitly rely on the basis being graded.",
    "created_at": "2015-10-08T15:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196585",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'>Comment 32:</a>
I would say that is okay because the COB morphism is as filtered algebras, so we can't expect homogeneous components to go to homogeneous components. However this should still work for top-degree homogeneous components.

So do you want me to do some surgery on the category of Sym bases and make 2 basis categories, one for the filtered and one for the graded? We could then have some generic code for the filtered that uses coercion for those methods that implicitly rely on the basis being graded.



---

archive/issue_comments_196586.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nTo me, the degree of the symmetric function is well defined, even if the basis is filtered.  Degree is what we use on the classical symmetric function bases (not the size of the indexing partition...that is different).  That means homogeneous component, degree and counit are not computed by the size of the indexing partition.\n\nI think that it would be a good idea to factor out those and have two basis categories as you suggest.",
    "created_at": "2015-10-08T17:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196586",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:33'>Comment 33:</a>
To me, the degree of the symmetric function is well defined, even if the basis is filtered.  Degree is what we use on the classical symmetric function bases (not the size of the indexing partition...that is different).  That means homogeneous component, degree and counit are not computed by the size of the indexing partition.

I think that it would be a good idea to factor out those and have two basis categories as you suggest.



---

archive/issue_comments_196587.json:
```json
{
    "body": "Changed commit from **[a7ee857](https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3)** to **[c968782](https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd)**",
    "created_at": "2015-10-08T17:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196587",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a7ee857](https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3)** to **[c968782](https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd)**



---

archive/issue_comments_196588.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd\">c968782</a></td><td><code>add Koike and Terada as a reference, link to full documentation for the bases in the top level</code></td></tr></table>\n",
    "created_at": "2015-10-08T17:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196588",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>Comment 34:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd">c968782</a></td><td><code>add Koike and Terada as a reference, link to full documentation for the bases in the top level</code></td></tr></table>




---

archive/issue_comments_196589.json:
```json
{
    "body": "Changed branch from **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)** to **[u/tscrim/sp_orth_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/sp_orth_broken)**",
    "created_at": "2015-10-09T02:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196589",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)** to **[u/tscrim/sp_orth_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/sp_orth_broken)**



---

archive/issue_comments_196590.json:
```json
{
    "body": "Changed commit from **[c968782](https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd)** to **[cac1d88](https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4)**",
    "created_at": "2015-10-09T02:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196590",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[c968782](https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd)** to **[cac1d88](https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4)**



---

archive/issue_comments_196591.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nOkay, I've done some reworking of things at the category level, including adding a `counit_by_coercion` for realizations.\n\nHowever I get MRO issues when dealing with the finite fields that I don't know how to deal with. I've convinced myself that the categories are almost correct; I want to make this change\n\n```diff\n         cat = HopfAlgebras(self.base().base_ring())\n         return [self.base().Realizations(),\n                 cat.Commutative().WithBasis(),\n-                cat.Graded().Realizations()]\n+                cat.Commutative().Graded().Realizations()]\n```\nBut if I do that, I get `KeyError: (225536, 70)` from the c3 controlled!\n\nSo I don't know what to do at this point. Nicolas, Simon, do you have any ideas?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4\">cac1d88</a></td><td><code>Doing some surgery on the categories.</code></td></tr></table>\n",
    "created_at": "2015-10-09T02:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196591",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:35'>Comment 35:</a>
Okay, I've done some reworking of things at the category level, including adding a `counit_by_coercion` for realizations.

However I get MRO issues when dealing with the finite fields that I don't know how to deal with. I've convinced myself that the categories are almost correct; I want to make this change

```diff
         cat = HopfAlgebras(self.base().base_ring())
         return [self.base().Realizations(),
                 cat.Commutative().WithBasis(),
-                cat.Graded().Realizations()]
+                cat.Commutative().Graded().Realizations()]
```
But if I do that, I get `KeyError: (225536, 70)` from the c3 controlled!

So I don't know what to do at this point. Nicolas, Simon, do you have any ideas?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4">cac1d88</a></td><td><code>Doing some surgery on the categories.</code></td></tr></table>




---

archive/issue_events_196731.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-09T02:01:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196731"
}
```



---

archive/issue_events_196732.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-09T02:01:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196732"
}
```



---

archive/issue_comments_196592.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nCould this be related to the error in #11979 ?\n\nAlso, a trifle:\n\n```\n+class FilteredSymmetricFunctionsBases(Category_realization_of_parent):\n+    r\"\"\"\n+    The category of graded bases of the ring of symmetric functions.\n```\ns/graded/filtered/\n\n(Thanks for fixing the categorical hack that made filtered bases pretend to be graded -- IIRC that was the reason why I was skeptical about this ticket!)",
    "created_at": "2015-10-09T03:04:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196592",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:37'>Comment 37:</a>
Could this be related to the error in #11979 ?

Also, a trifle:

```
+class FilteredSymmetricFunctionsBases(Category_realization_of_parent):
+    r"""
+    The category of graded bases of the ring of symmetric functions.
```
s/graded/filtered/

(Thanks for fixing the categorical hack that made filtered bases pretend to be graded -- IIRC that was the reason why I was skeptical about this ticket!)



---

archive/issue_comments_196593.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nYes, I would say so, and also on #15475. The most annoying thing is that it works for NCSF! However the reason why I can't add the commutative is something I have no understanding of what fails.",
    "created_at": "2015-10-09T03:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196593",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:38'>Comment 38:</a>
Yes, I would say so, and also on #15475. The most annoying thing is that it works for NCSF! However the reason why I can't add the commutative is something I have no understanding of what fails.



---

archive/issue_comments_196594.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nTo be clear, I'm finding when testing the file `sfa.py` there are errors\n\n```\n    s = SymmetricFunctions(FiniteField(29)).s()\nException raised:\n    Traceback (most recent call last):\n...\n    TypeError: Cannot create a consistent method resolution\n    order (MRO) for bases GradedAlgebras.subcategory_class, CommutativeAlgebras.subcategory_class, Bialgebras.subcategory_class\n```\nAre you able to trigger them outside of the testing environment?  When I enter them by hand they work fine.",
    "created_at": "2015-10-09T11:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196594",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:39'>Comment 39:</a>
To be clear, I'm finding when testing the file `sfa.py` there are errors

```
    s = SymmetricFunctions(FiniteField(29)).s()
Exception raised:
    Traceback (most recent call last):
...
    TypeError: Cannot create a consistent method resolution
    order (MRO) for bases GradedAlgebras.subcategory_class, CommutativeAlgebras.subcategory_class, Bialgebras.subcategory_class
```
Are you able to trigger them outside of the testing environment?  When I enter them by hand they work fine.



---

archive/issue_comments_196595.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nYes, those are the errors I get when doctesting `sfa.py`.\n\nYou have to do (in a fresh startup of Sage):\n\n```\nsage: SymmetricFunctions(Integers(23))\nsage: SymmetricFunctions(FiniteField(23))\n```\nIt also fails if you do it in the other order as well.",
    "created_at": "2015-10-09T11:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196595",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:40'>Comment 40:</a>
Yes, those are the errors I get when doctesting `sfa.py`.

You have to do (in a fresh startup of Sage):

```
sage: SymmetricFunctions(Integers(23))
sage: SymmetricFunctions(FiniteField(23))
```
It also fails if you do it in the other order as well.



---

archive/issue_comments_196596.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nHi!\n\nCould it be that we are mixing categories parametrized by a base ring, and categories parametrized by the category that base ring? Something like ``HopfAlgebras(Fields()).XXX()`` and ``Bialgebras(GF(3)).YYY()`` ?",
    "created_at": "2015-10-12T12:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196596",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:41'>Comment 41:</a>
Hi!

Could it be that we are mixing categories parametrized by a base ring, and categories parametrized by the category that base ring? Something like ``HopfAlgebras(Fields()).XXX()`` and ``Bialgebras(GF(3)).YYY()`` ?



---

archive/issue_comments_196597.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nReplying to [@nthiery](#comment%3A41):\n> Could it be that we are mixing categories parametrized by a base ring, and categories parametrized by the category that base ring? Something like `HopfAlgebras(Fields()).XXX()` and `Bialgebras(GF(3)).YYY()` ?\n\nAFAIK we aren't mixing things like that. This is that wonderful category refinement issue that somehow was somehow magically working beforehand, but I think that was because the categories for the bases weren't quite correct.",
    "created_at": "2015-10-12T15:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196597",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:42'>Comment 42:</a>
Replying to [@nthiery](#comment%3A41):
> Could it be that we are mixing categories parametrized by a base ring, and categories parametrized by the category that base ring? Something like `HopfAlgebras(Fields()).XXX()` and `Bialgebras(GF(3)).YYY()` ?

AFAIK we aren't mixing things like that. This is that wonderful category refinement issue that somehow was somehow magically working beforehand, but I think that was because the categories for the bases weren't quite correct.



---

archive/issue_comments_196598.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nI wonder if the problem stems from this line in `__classcall_private__` of `Modules`:\n\n```\nif base_ring in _Fields or (isinstance(base_ring, Category)\n                            and base_ring.is_subcategory(_Fields)):\n```\nor this line in `extra_super_categories` of `FilteredAlgebras`:\n\n```\nif base_ring in Fields:\n```\nand that one/both of these triggers the category refinement and breaks the MRO, which was in the process of being constructed when these were called.\n\n```\nsage: R = Integers(7)\nsage: R.category()\nJoin of Category of finite commutative rings and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets\nsage: HopfAlgebras(R)\nCategory of hopf algebras over Ring of integers modulo 7\nsage: R.category()\nJoin of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups\n```\nYet this still doesn't explain why this works for NCSF. I think that might be a key in figuring out what is going wrong.",
    "created_at": "2015-10-22T03:39:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196598",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:43'>Comment 43:</a>
I wonder if the problem stems from this line in `__classcall_private__` of `Modules`:

```
if base_ring in _Fields or (isinstance(base_ring, Category)
                            and base_ring.is_subcategory(_Fields)):
```
or this line in `extra_super_categories` of `FilteredAlgebras`:

```
if base_ring in Fields:
```
and that one/both of these triggers the category refinement and breaks the MRO, which was in the process of being constructed when these were called.

```
sage: R = Integers(7)
sage: R.category()
Join of Category of finite commutative rings and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets
sage: HopfAlgebras(R)
Category of hopf algebras over Ring of integers modulo 7
sage: R.category()
Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups
```
Yet this still doesn't explain why this works for NCSF. I think that might be a key in figuring out what is going wrong.



---

archive/issue_comments_196599.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nYou could be on to something here.  If I delete the following lines:\n\n```\n-        if dispatch:\n-            if base_ring in _Fields or (isinstance(base_ring, Category)\n-                                        and base_ring.is_subcategory(_Fields)):\n-                from vector_spaces import VectorSpaces\n-                return VectorSpaces(base_ring, check=False)\n```\nI find that your example in comment 40 does not raise an error.",
    "created_at": "2015-10-22T15:08:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196599",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:44'>Comment 44:</a>
You could be on to something here.  If I delete the following lines:

```
-        if dispatch:
-            if base_ring in _Fields or (isinstance(base_ring, Category)
-                                        and base_ring.is_subcategory(_Fields)):
-                from vector_spaces import VectorSpaces
-                return VectorSpaces(base_ring, check=False)
```
I find that your example in comment 40 does not raise an error.



---

archive/issue_comments_196600.json:
```json
{
    "body": "Changed commit from **[cac1d88](https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4)** to **[8e690e2](https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933)**",
    "created_at": "2015-10-26T14:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196600",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[cac1d88](https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4)** to **[8e690e2](https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933)**



---

archive/issue_comments_196601.json:
```json
{
    "body": "Changed branch from **[u/tscrim/sp_orth_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/sp_orth_broken)** to **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)**",
    "created_at": "2015-10-26T14:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196601",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/tscrim/sp_orth_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/sp_orth_broken)** to **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)**



---

archive/issue_comments_196602.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nHowever, I don't think that is the right solution. `:/` The check is reasonable and necessary.\n\nGranted, my current proposal is a major hack, but I don't think too many people will be creating many instances of Sym over various large finite fields (and there are more computationally intensive parts necessary for working with Sym). I'm tired of trying to deal with this here, so I just checked if the base ring was a field before any categories get created.\n\nThere is also another issue with C3 in that I get a `KeyError` if I make this change:\n\n```diff\n         cat = HopfAlgebras(self.base().base_ring())\n         return [self.base().Realizations(),\n                 cat.Commutative().WithBasis(),\n-                cat.Graded().Realizations()]\n+                cat.Commutative().Graded().Realizations()]\n```\nThis is what it should be, but because everything commutative will come from the `cat.Commutative().WithBasis()`, I think we are okay for now.\n\nI really would like to push this ticket in and later reach in and fix the category-refinement/MRO/C3 issues on a separate ticket.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8263b10f2c00d58f2a8e09777c394ea51906b366\">8263b10</a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b151195bd18ba3c5526b36d6298f39ede0189fd4\">b151195</a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933\">8e690e2</a></td><td><code>Some hacks and FIXMEs.</code></td></tr></table>\n",
    "created_at": "2015-10-26T14:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196602",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:45'>Comment 45:</a>
However, I don't think that is the right solution. `:/` The check is reasonable and necessary.

Granted, my current proposal is a major hack, but I don't think too many people will be creating many instances of Sym over various large finite fields (and there are more computationally intensive parts necessary for working with Sym). I'm tired of trying to deal with this here, so I just checked if the base ring was a field before any categories get created.

There is also another issue with C3 in that I get a `KeyError` if I make this change:

```diff
         cat = HopfAlgebras(self.base().base_ring())
         return [self.base().Realizations(),
                 cat.Commutative().WithBasis(),
-                cat.Graded().Realizations()]
+                cat.Commutative().Graded().Realizations()]
```
This is what it should be, but because everything commutative will come from the `cat.Commutative().WithBasis()`, I think we are okay for now.

I really would like to push this ticket in and later reach in and fix the category-refinement/MRO/C3 issues on a separate ticket.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8263b10f2c00d58f2a8e09777c394ea51906b366">8263b10</a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b151195bd18ba3c5526b36d6298f39ede0189fd4">b151195</a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933">8e690e2</a></td><td><code>Some hacks and FIXMEs.</code></td></tr></table>




---

archive/issue_comments_196603.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nI should also mention that there are other places where category refinement would make sense, such as for finite-dimensional algebras after doing an `is_commutative` or `is_unital` test, so IMO it could be useful beyond prime testing for finite fields.",
    "created_at": "2015-10-26T14:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196603",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:46'>Comment 46:</a>
I should also mention that there are other places where category refinement would make sense, such as for finite-dimensional algebras after doing an `is_commutative` or `is_unital` test, so IMO it could be useful beyond prime testing for finite fields.



---

archive/issue_events_196733.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-26T14:55:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196733"
}
```



---

archive/issue_events_196734.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-26T14:55:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196734"
}
```



---

archive/issue_comments_196604.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nWhat does the line \"R in Fields()\" do?  It looks to me like it returns True or False and goes on to the next line.",
    "created_at": "2015-10-26T20:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196604",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:47'>Comment 47:</a>
What does the line "R in Fields()" do?  It looks to me like it returns True or False and goes on to the next line.



---

archive/issue_comments_196605.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nIt makes sure that `R` has had its category refined (if it needs to). Thus this is not done in the process of building the MRO/category heirarchy for `Sym`.",
    "created_at": "2015-10-26T21:47:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196605",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:48'>Comment 48:</a>
It makes sure that `R` has had its category refined (if it needs to). Thus this is not done in the process of building the MRO/category heirarchy for `Sym`.



---

archive/issue_events_196735.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-10-27T00:33:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196735"
}
```



---

archive/issue_events_196736.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-10-27T00:33:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196736"
}
```



---

archive/issue_comments_196606.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nI don't think that this is a bad way of resolving this, but it may be pushing the problem elsewhere.  I am seeing:\n\n```\nFile \"combinat/ncsf_qsym/qsym.py\", line 1873, in sage.combinat.ncsf_qsym.qsym.QuasiSymmetricFunctions.Monomial.lambda_of_monomial\nFailed example:\n    M = QuasiSymmetricFunctions(Integers(5)).Monomial()\n```\n\nAre ncsf/qsym going to require the same hack?  Will every combinatorial Hopf algebra require it?",
    "created_at": "2015-10-27T00:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196606",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:49'>Comment 49:</a>
I don't think that this is a bad way of resolving this, but it may be pushing the problem elsewhere.  I am seeing:

```
File "combinat/ncsf_qsym/qsym.py", line 1873, in sage.combinat.ncsf_qsym.qsym.QuasiSymmetricFunctions.Monomial.lambda_of_monomial
Failed example:
    M = QuasiSymmetricFunctions(Integers(5)).Monomial()
```

Are ncsf/qsym going to require the same hack?  Will every combinatorial Hopf algebra require it?



---

archive/issue_comments_196607.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nI've not been getting those errors, but Volker just posted on #19397 an issue that smells like the same thing. So right now I'm thinking, \"*!@$, we have to deal with this now\". `:/` Nicolas, Simon, I will need you two to get involved now I think.",
    "created_at": "2015-10-27T03:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196607",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:50'>Comment 50:</a>
I've not been getting those errors, but Volker just posted on #19397 an issue that smells like the same thing. So right now I'm thinking, "*!@$, we have to deal with this now". `:/` Nicolas, Simon, I will need you two to get involved now I think.



---

archive/issue_comments_196608.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nOne strange feature is that the error that you post in comment 40 is triggered on QSym and NCSymD but not on NCSF or NCSym (at least on my computer).  That is,\n\n```\nsage: NCSymD = SymmetricFunctionsNonCommutingVariablesDual(FiniteField(23))\nsage: NCSymD = SymmetricFunctionsNonCommutingVariablesDual(Integers(23))\n```\ntriggers an error but\n\n```\nsage: NCSym = SymmetricFunctionsNonCommutingVariables(FiniteField(23))\nsage: NCSym = SymmetricFunctionsNonCommutingVariables(Integers(23))\n```\ndoes not.",
    "created_at": "2015-10-27T11:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196608",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:51'>Comment 51:</a>
One strange feature is that the error that you post in comment 40 is triggered on QSym and NCSymD but not on NCSF or NCSym (at least on my computer).  That is,

```
sage: NCSymD = SymmetricFunctionsNonCommutingVariablesDual(FiniteField(23))
sage: NCSymD = SymmetricFunctionsNonCommutingVariablesDual(Integers(23))
```
triggers an error but

```
sage: NCSym = SymmetricFunctionsNonCommutingVariables(FiniteField(23))
sage: NCSym = SymmetricFunctionsNonCommutingVariables(Integers(23))
```
does not.



---

archive/issue_comments_196609.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nThe `NCSymD` is caused by this part of the `__init__`:\n\n```\n        Sym = SymmetricFunctions(self.base_ring())\n        Sym_h_to_w = Sym.h().module_morphism(w.sum_of_partitions,\n                                             triangular='lower',\n                                             inverse_on_support=w._set_par_to_par,\n                                             codomain=w, category=category)\n```\nAh...`QSym` fails for the same reason...\n\nI think they all will need this hack for now. I know this is pushing the problem further down, but I don't know of a way to resolve it at present (or at least without forcing a prime check for finite rings).\n\nAlthough there is the issue on [comment:45](#comment%3A45) that is likely unrelated and needs a fix at some point too... I think there might be some issue(s) with join categories...\n\nI also have been working on #19397 under the assumption that these are the same problem. However I am pretty sure this is not the case now and they are different problems (I would love to be wrong).",
    "created_at": "2015-10-31T17:54:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196609",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:52'>Comment 52:</a>
The `NCSymD` is caused by this part of the `__init__`:

```
        Sym = SymmetricFunctions(self.base_ring())
        Sym_h_to_w = Sym.h().module_morphism(w.sum_of_partitions,
                                             triangular='lower',
                                             inverse_on_support=w._set_par_to_par,
                                             codomain=w, category=category)
```
Ah...`QSym` fails for the same reason...

I think they all will need this hack for now. I know this is pushing the problem further down, but I don't know of a way to resolve it at present (or at least without forcing a prime check for finite rings).

Although there is the issue on [comment:45](#comment%3A45) that is likely unrelated and needs a fix at some point too... I think there might be some issue(s) with join categories...

I also have been working on #19397 under the assumption that these are the same problem. However I am pretty sure this is not the case now and they are different problems (I would love to be wrong).



---

archive/issue_comments_196610.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3\">d8d3eda</a></td><td><code>additions to NCSF/QSym/Sym/NCSym/NCSymD to ensure that MRO errors are not triggered</code></td></tr></table>\n",
    "created_at": "2015-11-02T01:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196610",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:53'>Comment 53:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3">d8d3eda</a></td><td><code>additions to NCSF/QSym/Sym/NCSym/NCSymD to ensure that MRO errors are not triggered</code></td></tr></table>




---

archive/issue_comments_196611.json:
```json
{
    "body": "Changed commit from **[8e690e2](https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933)** to **[d8d3eda](https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3)**",
    "created_at": "2015-11-02T01:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196611",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8e690e2](https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933)** to **[d8d3eda](https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3)**



---

archive/issue_comments_196612.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nI agree.  In the end this is a minor change as a hack.  It doesn't locate the problem, but it does fix it from being triggered.  I've pushed some changes which add doctests and replaced `assert(R in Rings())` with `assert(R in Fields() or R in Rings())` in in the `__init__` method for all of these Hopf algebras.  I'll get back to Jean-Baptist's Hopf algebra implementations after we resolve these issues and see if his code can be used to get around these problem.",
    "created_at": "2015-11-02T01:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196612",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:54'>Comment 54:</a>
I agree.  In the end this is a minor change as a hack.  It doesn't locate the problem, but it does fix it from being triggered.  I've pushed some changes which add doctests and replaced `assert(R in Rings())` with `assert(R in Fields() or R in Rings())` in in the `__init__` method for all of these Hopf algebras.  I'll get back to Jean-Baptist's Hopf algebra implementations after we resolve these issues and see if his code can be used to get around these problem.



---

archive/issue_comments_196613.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4c141614431a214c54830d37d7d2e3d391d1bf3\">c4c1416</a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0513f6a7694792d76f4c9ce36c292e4b8edf698c\">0513f6a</a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4\">5b492f3</a></td><td><code>Fixing non-ascii character.</code></td></tr></table>\n",
    "created_at": "2015-11-02T02:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196613",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:55'>Comment 55:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4c141614431a214c54830d37d7d2e3d391d1bf3">c4c1416</a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0513f6a7694792d76f4c9ce36c292e4b8edf698c">0513f6a</a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4">5b492f3</a></td><td><code>Fixing non-ascii character.</code></td></tr></table>




---

archive/issue_comments_196614.json:
```json
{
    "body": "Changed commit from **[d8d3eda](https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3)** to **[5b492f3](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**",
    "created_at": "2015-11-02T02:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196614",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d8d3eda](https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3)** to **[5b492f3](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**



---

archive/issue_comments_196615.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nI'm okay with things. So let's just leave this hack in there since it works for now. It is also documented for testing later on. Therefore I think we are back to needs review.",
    "created_at": "2015-11-02T02:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196615",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:56'>Comment 56:</a>
I'm okay with things. So let's just leave this hack in there since it works for now. It is also documented for testing later on. Therefore I think we are back to needs review.



---

archive/issue_events_196737.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-11-02T02:36:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196737"
}
```



---

archive/issue_events_196738.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-11-02T02:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196738"
}
```



---

archive/issue_events_196739.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-11-02T12:12:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196739"
}
```



---

archive/issue_events_196740.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-11-02T12:12:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196740"
}
```



---

archive/issue_comments_196616.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nI think it looks good and all tests pass.  Positive review.",
    "created_at": "2015-11-02T12:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196616",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:57'>Comment 57:</a>
I think it looks good and all tests pass.  Positive review.



---

archive/issue_comments_196617.json:
```json
{
    "body": "Reviewer: **Mike Zabrocki**",
    "created_at": "2015-11-02T12:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196617",
    "user": "https://github.com/zabrocki"
}
```

Reviewer: **Mike Zabrocki**



---

archive/issue_comments_196618.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nThanks Mike!",
    "created_at": "2015-11-02T14:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196618",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:58'>Comment 58:</a>
Thanks Mike!



---

archive/issue_events_196741.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-03T23:59:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196741"
}
```



---

archive/issue_events_196742.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d628632414bd4e4901b58fa068add0b7da46466e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-11-03T23:59:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-196742"
}
```



---

archive/issue_comments_196619.json:
```json
{
    "body": "Changed branch from **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)** to **[5b492f3](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**",
    "created_at": "2015-11-03T23:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-196619",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)** to **[5b492f3](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**
