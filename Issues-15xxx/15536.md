# Issue 15536: Implement symplectic and orthogonal bases of Sym

archive/issues_015299.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-sage-combinat"
    ],
    "body": "Following a paper of Chari and Kleber: *Symmetric functions and representations of quantum affine algebras*, arxiv:0011161v1. We implement the symplectic and orthogonal (filtered) bases of Sym.\n\nDepends on #17096\n\nCC:  @sagetrac-sage-combinat @darijgr @simon-king-jena @nthiery\n\nKeywords: **days54, sym**\n\nBranch/Commit: **[`5b492f3`](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**\n\nReviewer: **Mike Zabrocki**\n\nAuthor: **Travis Scrimshaw**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15536_\n\n",
    "closed_at": "2015-11-03T23:59:25Z",
    "created_at": "2013-12-17T21:12:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement symplectic and orthogonal bases of Sym",
    "type": "issue",
    "updated_at": "2015-11-03T23:59:25Z",
    "url": "https://github.com/sagemath/sage/issues/15536",
    "user": "https://github.com/tscrim"
}
```
Following a paper of Chari and Kleber: *Symmetric functions and representations of quantum affine algebras*, arxiv:0011161v1. We implement the symplectic and orthogonal (filtered) bases of Sym.

Depends on #17096

CC:  @sagetrac-sage-combinat @darijgr @simon-king-jena @nthiery

Keywords: **days54, sym**

Branch/Commit: **[`5b492f3`](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**

Reviewer: **Mike Zabrocki**

Author: **Travis Scrimshaw**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/15536_





---

archive/issue_events_219353.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:12:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219353"
}
```



---

archive/issue_events_219354.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:12:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219354"
}
```



---

archive/issue_events_219355.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:12:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219355"
}
```



---

archive/issue_events_219356.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:12:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219356"
}
```



---

archive/issue_events_219357.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2013-12-17T21:12:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "subject": "https://github.com/tscrim",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219357"
}
```



---

archive/issue_events_219358.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-12-17T21:16:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219358"
}
```



---

archive/issue_comments_194047.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nDarij (or anyone else who wants to review this),\n\nNicolas said it's fine being in `GradedHopfAlgebrasWithBasis` since `Sym` does admit a graded basis, even if the given basis itself is not graded.",
    "created_at": "2013-12-17T21:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194047",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">comment:1</div>

Darij (or anyone else who wants to review this),

Nicolas said it's fine being in `GradedHopfAlgebrasWithBasis` since `Sym` does admit a graded basis, even if the given basis itself is not graded.



---

archive/issue_comments_194048.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI fear Nicolas is wrong here:\n\n```\nsage: o = Sym.o()\nsage: TestSuite(o).run()\nFailure in _test_antipode:\nTraceback (most recent call last):\n  File \"/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 282, in run\n    test_method(tester = tester)\n  File \"/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/categories/hopf_algebras_with_basis.py\", line 263, in _test_antipode\n    tester.assert_(SI(x) == self.counit(x) * self.one())\n  File \"/home/darij/gitsage/sage-5.13.beta1/local/lib/python/unittest/case.py\", line 424, in assertTrue\n    raise self.failureException(msg)\nAssertionError: False is not true\n------------------------------------------------------------\nThe following tests failed: _test_antipode\n```\nThe problem is that the counit is still defined as the constant coefficient, but that's only true for graded bases. Concrete example:\n\n```\nsage: o[2].counit()\n0\nsage: s(o[2]).counit()\n-1\n```\n\nThe same issue would be happening with antipode and degree_negation if not for the fact that the o and sp bases happen to be graded w.r.t. the induced ZZ/2ZZ-grading.",
    "created_at": "2013-12-20T11:10:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194048",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:2" align="right">comment:2</div>

I fear Nicolas is wrong here:

```
sage: o = Sym.o()
sage: TestSuite(o).run()
Failure in _test_antipode:
Traceback (most recent call last):
  File "/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 282, in run
    test_method(tester = tester)
  File "/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/categories/hopf_algebras_with_basis.py", line 263, in _test_antipode
    tester.assert_(SI(x) == self.counit(x) * self.one())
  File "/home/darij/gitsage/sage-5.13.beta1/local/lib/python/unittest/case.py", line 424, in assertTrue
    raise self.failureException(msg)
AssertionError: False is not true
------------------------------------------------------------
The following tests failed: _test_antipode
```
The problem is that the counit is still defined as the constant coefficient, but that's only true for graded bases. Concrete example:

```
sage: o[2].counit()
0
sage: s(o[2]).counit()
-1
```

The same issue would be happening with antipode and degree_negation if not for the fact that the o and sp bases happen to be graded w.r.t. the induced ZZ/2ZZ-grading.



---

archive/issue_comments_194049.json:
```json
{
    "body": "Changed commit from **[`9536f54`](https://github.com/sagemath/sagetrac-mirror/commit/9536f54a96401a5bdabdaa56dc65640f8bb1bfda)** to **[`223b11b`](https://github.com/sagemath/sagetrac-mirror/commit/223b11b19d050597267d29150fa1e2cb12a3861b)**",
    "created_at": "2013-12-27T06:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194049",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9536f54`](https://github.com/sagemath/sagetrac-mirror/commit/9536f54a96401a5bdabdaa56dc65640f8bb1bfda)** to **[`223b11b`](https://github.com/sagemath/sagetrac-mirror/commit/223b11b19d050597267d29150fa1e2cb12a3861b)**



---

archive/issue_comments_194050.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/223b11b\"><code>223b11b</code></a></td><td><code>Fix the counit in sp/o bases.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4933218\"><code>4933218</code></a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr></table>\n",
    "created_at": "2013-12-27T06:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194050",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/223b11b"><code>223b11b</code></a></td><td><code>Fix the counit in sp/o bases.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4933218"><code>4933218</code></a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr></table>




---

archive/issue_comments_194051.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c\"><code>9ea2a2c</code></a></td><td><code>Added comment about ZZ / 2ZZ grading.</code></td></tr></table>\n",
    "created_at": "2013-12-27T06:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194051",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c"><code>9ea2a2c</code></a></td><td><code>Added comment about ZZ / 2ZZ grading.</code></td></tr></table>




---

archive/issue_comments_194052.json:
```json
{
    "body": "Changed commit from **[`223b11b`](https://github.com/sagemath/sagetrac-mirror/commit/223b11b19d050597267d29150fa1e2cb12a3861b)** to **[`9ea2a2c`](https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c1eafde6abc39d819002cff6ea43984108)**",
    "created_at": "2013-12-27T06:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194052",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`223b11b`](https://github.com/sagemath/sagetrac-mirror/commit/223b11b19d050597267d29150fa1e2cb12a3861b)** to **[`9ea2a2c`](https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c1eafde6abc39d819002cff6ea43984108)**



---

archive/issue_comments_194053.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@darijgr](#comment%3A2):\n> I fear Nicolas is wrong here\n\n>\n> ...\n>\n> The problem is that the counit is still defined as the constant coefficient, but that's only true for graded bases.\n\nYep, but that's technically a fault with the generic symmetric function code, not the category (which I think does it via coercion by default). Fixed.\n\n> The same issue would be happening with antipode and degree_negation if not for the fact that the o and sp bases happen to be graded w.r.t. the induced ZZ/2ZZ-grading.\n\nAgain, not the category, but it's nice to know these things.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c\"><code>9ea2a2c</code></a></td><td><code>Added comment about ZZ / 2ZZ grading.</code></td></tr></table>\n",
    "created_at": "2013-12-27T06:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194053",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@darijgr](#comment%3A2):
> I fear Nicolas is wrong here

>
> ...
>
> The problem is that the counit is still defined as the constant coefficient, but that's only true for graded bases.

Yep, but that's technically a fault with the generic symmetric function code, not the category (which I think does it via coercion by default). Fixed.

> The same issue would be happening with antipode and degree_negation if not for the fact that the o and sp bases happen to be graded w.r.t. the induced ZZ/2ZZ-grading.

Again, not the category, but it's nice to know these things.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c"><code>9ea2a2c</code></a></td><td><code>Added comment about ZZ / 2ZZ grading.</code></td></tr></table>




---

archive/issue_comments_194054.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI see. Can it be that the `SymmetricFunctionsBases` class should be split into `SymmetricFunctionsBases` and `SymmetricFunctionsConnectedGradedBases` or else we risk running into this whenever other new methods are implemented? If so, I'd suggest doing this (I can do it myself), although I'd wait for #15473 to be merged beforehand.",
    "created_at": "2013-12-27T15:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194054",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:6" align="right">comment:6</div>

I see. Can it be that the `SymmetricFunctionsBases` class should be split into `SymmetricFunctionsBases` and `SymmetricFunctionsConnectedGradedBases` or else we risk running into this whenever other new methods are implemented? If so, I'd suggest doing this (I can do it myself), although I'd wait for #15473 to be merged beforehand.



---

archive/issue_comments_194055.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd17c25\"><code>fd17c25</code></a></td><td><code>Documentation tweaks/typo fixes.</code></td></tr></table>\n",
    "created_at": "2013-12-27T15:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194055",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd17c25"><code>fd17c25</code></a></td><td><code>Documentation tweaks/typo fixes.</code></td></tr></table>




---

archive/issue_comments_194056.json:
```json
{
    "body": "Changed commit from **[`9ea2a2c`](https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c1eafde6abc39d819002cff6ea43984108)** to **[`fd17c25`](https://github.com/sagemath/sagetrac-mirror/commit/fd17c25145d136e2fc342b450d38f6441ff09d24)**",
    "created_at": "2013-12-27T15:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194056",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9ea2a2c`](https://github.com/sagemath/sagetrac-mirror/commit/9ea2a2c1eafde6abc39d819002cff6ea43984108)** to **[`fd17c25`](https://github.com/sagemath/sagetrac-mirror/commit/fd17c25145d136e2fc342b450d38f6441ff09d24)**



---

archive/issue_comments_194057.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI doubt there will be too many new methods which a general implementation does not involve coercing to a basis where we can do the computation explicitly, so I don't think it's necessary. Nevertheless, something for another ticket (possibly after a sage-combinat-devel discussion).",
    "created_at": "2013-12-27T16:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194057",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

I doubt there will be too many new methods which a general implementation does not involve coercing to a basis where we can do the computation explicitly, so I don't think it's necessary. Nevertheless, something for another ticket (possibly after a sage-combinat-devel discussion).



---

archive/issue_events_219359.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219359"
}
```



---

archive/issue_events_219360.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219360"
}
```



---

archive/issue_comments_194058.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThere is a typo \"Scirmshaw\"",
    "created_at": "2014-04-18T20:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194058",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

There is a typo "Scirmshaw"



---

archive/issue_comments_194059.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de32f118124b20ef508985a86438b4e17aeabb45\"><code>de32f11</code></a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37\"><code>db8a17c</code></a></td><td><code>Learning to spell my name...</code></td></tr></table>\n",
    "created_at": "2014-04-19T05:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194059",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de32f118124b20ef508985a86438b4e17aeabb45"><code>de32f11</code></a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37"><code>db8a17c</code></a></td><td><code>Learning to spell my name...</code></td></tr></table>




---

archive/issue_comments_194060.json:
```json
{
    "body": "Changed commit from **[`fd17c25`](https://github.com/sagemath/sagetrac-mirror/commit/fd17c25145d136e2fc342b450d38f6441ff09d24)** to **[`db8a17c`](https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37)**",
    "created_at": "2014-04-19T05:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194060",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fd17c25`](https://github.com/sagemath/sagetrac-mirror/commit/fd17c25145d136e2fc342b450d38f6441ff09d24)** to **[`db8a17c`](https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37)**



---

archive/issue_comments_194061.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nXP",
    "created_at": "2014-04-19T05:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194061",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

XP



---

archive/issue_events_219361.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219361"
}
```



---

archive/issue_events_219362.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219362"
}
```



---

archive/issue_events_219363.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219363"
}
```



---

archive/issue_events_219364.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219364"
}
```



---

archive/issue_comments_194062.json:
```json
{
    "body": "Changed commit from **[`db8a17c`](https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37)** to **[`523c023`](https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c)**",
    "created_at": "2015-01-03T04:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194062",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`db8a17c`](https://github.com/sagemath/sagetrac-mirror/commit/db8a17c1fbe046c00ddfcb4b477ef22642ae6a37)** to **[`523c023`](https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c)**



---

archive/issue_comments_194063.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c\"><code>523c023</code></a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr></table>\n",
    "created_at": "2015-01-03T04:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194063",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c"><code>523c023</code></a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr></table>




---

archive/issue_comments_194064.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nPlease do not use abbreviations like \"lps\" in the name of functions.\n\nNathann",
    "created_at": "2015-02-06T09:26:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194064",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:16" align="right">comment:16</div>

Please do not use abbreviations like "lps" in the name of functions.

Nathann



---

archive/issue_comments_194065.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nmissing doctests in sf.py, see patchbot report",
    "created_at": "2015-04-25T17:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194065",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

missing doctests in sf.py, see patchbot report



---

archive/issue_events_219365.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-25T17:22:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219365"
}
```



---

archive/issue_events_219366.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-25T17:22:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219366"
}
```



---

archive/issue_comments_194066.json:
```json
{
    "body": "Changed commit from **[`523c023`](https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c)** to **[`9bfd9e4`](https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03)**",
    "created_at": "2015-10-06T02:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194066",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`523c023`](https://github.com/sagemath/sagetrac-mirror/commit/523c023369bcf6f4c0fa2631b09e95b3637fba2c)** to **[`9bfd9e4`](https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03)**



---

archive/issue_comments_194067.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/570bc493fe22bd8fb6f517300a27fea751cb6585\"><code>570bc49</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' into 6.9.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b91cd828945a4668938298ef741769ce64f909a3\"><code>b91cd82</code></a></td><td><code>trac #18044 correct one typo in the doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fd1df2ac522180985b49e66895ffb58bb93823b\"><code>7fd1df2</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' of trac.sagemath.org:sage into public/categories/super_categories-18044</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/057933782566ba05423d302fe8fae82276238edc\"><code>0579337</code></a></td><td><code>Some reviewer tweaks and doc additions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aec22cc54dee46aceaa315a96905059927ad1ea4\"><code>aec22cc</code></a></td><td><code>Added one more test.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b2046fdfb0545b3b0908f8c3de609becd78bc5f\"><code>4b2046f</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' into public/categories/filtered_algebras-17096</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f67b6b0d0e10c2f4816acc791f6dc2a016eeb8d\"><code>3f67b6b</code></a></td><td><code>Fixing trivial doctest due to changes in category heirarchy.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa476ddac910418cb12790af8896154ddca8fd00\"><code>fa476dd</code></a></td><td><code>Fixing double-colon in INPUT block.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cc8b8460dfe5a05380e73e667dc7294e4369774\"><code>6cc8b84</code></a></td><td><code>Reviewer changes with Darij.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03\"><code>9bfd9e4</code></a></td><td><code>Merge branch 'public/categories/filtered_algebras-17096' into public/combinat/sf/sp_orth</code></td></tr></table>\n",
    "created_at": "2015-10-06T02:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194067",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/570bc493fe22bd8fb6f517300a27fea751cb6585"><code>570bc49</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' into 6.9.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b91cd828945a4668938298ef741769ce64f909a3"><code>b91cd82</code></a></td><td><code>trac #18044 correct one typo in the doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fd1df2ac522180985b49e66895ffb58bb93823b"><code>7fd1df2</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' of trac.sagemath.org:sage into public/categories/super_categories-18044</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/057933782566ba05423d302fe8fae82276238edc"><code>0579337</code></a></td><td><code>Some reviewer tweaks and doc additions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aec22cc54dee46aceaa315a96905059927ad1ea4"><code>aec22cc</code></a></td><td><code>Added one more test.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b2046fdfb0545b3b0908f8c3de609becd78bc5f"><code>4b2046f</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' into public/categories/filtered_algebras-17096</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f67b6b0d0e10c2f4816acc791f6dc2a016eeb8d"><code>3f67b6b</code></a></td><td><code>Fixing trivial doctest due to changes in category heirarchy.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa476ddac910418cb12790af8896154ddca8fd00"><code>fa476dd</code></a></td><td><code>Fixing double-colon in INPUT block.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cc8b8460dfe5a05380e73e667dc7294e4369774"><code>6cc8b84</code></a></td><td><code>Reviewer changes with Darij.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03"><code>9bfd9e4</code></a></td><td><code>Merge branch 'public/categories/filtered_algebras-17096' into public/combinat/sf/sp_orth</code></td></tr></table>




---

archive/issue_events_219367.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-06T02:34:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219367"
}
```



---

archive/issue_events_219368.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-06T02:34:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219368"
}
```



---

archive/issue_comments_194068.json:
```json
{
    "body": "Dependencies: **#17096**",
    "created_at": "2015-10-06T02:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194068",
    "user": "https://github.com/tscrim"
}
```

Dependencies: **#17096**



---

archive/issue_comments_194069.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI added the requisite doctests and I also implemented functionality for bases of `Sym` to be considered filtered (although we could make these bases be `ZZ / 2ZZ`-graded but the `ZZ`-filtration is more natural), which requires #17096.",
    "created_at": "2015-10-06T02:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194069",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

I added the requisite doctests and I also implemented functionality for bases of `Sym` to be considered filtered (although we could make these bases be `ZZ / 2ZZ`-graded but the `ZZ`-filtration is more natural), which requires #17096.



---

archive/issue_events_219369.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-06T02:34:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219369"
}
```



---

archive/issue_events_219370.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-06T02:34:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219370"
}
```



---

archive/issue_comments_194070.json:
```json
{
    "body": "Changed commit from **[`9bfd9e4`](https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03)** to **[`57f92dd`](https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db)**",
    "created_at": "2015-10-06T02:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194070",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9bfd9e4`](https://github.com/sagemath/sagetrac-mirror/commit/9bfd9e49ddda9fb8e1984b914b21921dc1050c03)** to **[`57f92dd`](https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db)**



---

archive/issue_comments_194071.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db\"><code>57f92dd</code></a></td><td><code>Adding some doctests and making things use the filtered basis.</code></td></tr></table>\n",
    "created_at": "2015-10-06T02:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194071",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db"><code>57f92dd</code></a></td><td><code>Adding some doctests and making things use the filtered basis.</code></td></tr></table>




---

archive/issue_comments_194072.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nTravis, thanks for pointing this out to me.  The `st` basis in ticket #19327 is very similar and since the group of permutation matrices are orthogonal matrices, it will be that `o(lambda)` has a positive `st` expansion.\n\nThere is an explicit formula for the change of basis from `sp` and `o` to Schur basis (that is almost exactly the same as the `_s_to_sp_on_basis` and `_s_to_o_on_basis` that you have implemented, it just alternates in sign by degree and the set of partitions you sum over are transposed).  Is it faster to use the triangularity like you have here?  Are you aware of it and have you tried it?",
    "created_at": "2015-10-06T12:17:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194072",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:21" align="right">comment:21</div>

Travis, thanks for pointing this out to me.  The `st` basis in ticket #19327 is very similar and since the group of permutation matrices are orthogonal matrices, it will be that `o(lambda)` has a positive `st` expansion.

There is an explicit formula for the change of basis from `sp` and `o` to Schur basis (that is almost exactly the same as the `_s_to_sp_on_basis` and `_s_to_o_on_basis` that you have implemented, it just alternates in sign by degree and the set of partitions you sum over are transposed).  Is it faster to use the triangularity like you have here?  Are you aware of it and have you tried it?



---

archive/issue_comments_194073.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nNo, I was not aware of it and haven't tried it. I'm guessing that just comes from a m\u00f6bius inversion? I suspect it will be significantly faster than using triangularity. Just to make sure I understand the computation, I keep the same coefficient up to a sign (which is the size of `mu`) and then take `mu.transpose()` as the basis element? And/Or do I need to transpose inside the coefficients?",
    "created_at": "2015-10-06T12:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194073",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

No, I was not aware of it and haven't tried it. I'm guessing that just comes from a m√∂bius inversion? I suspect it will be significantly faster than using triangularity. Just to make sure I understand the computation, I keep the same coefficient up to a sign (which is the size of `mu`) and then take `mu.transpose()` as the basis element? And/Or do I need to transpose inside the coefficients?



---

archive/issue_comments_194074.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWhat I said in my last comment isn't quite right.  It is in my paper with Mark Shimozono \"Deformed universal characters for classical and affine algebras, Journal of Algebra, 299 (2006), pp. 33-61\" (arXiv:math.CO/0404288) but it probably goes back to Koike and Terada or maybe even Littlewood.  It is equation (4.1)+(4.5) for the orthogonal and (4.1)+(4.4) for the symplectic in my paper.",
    "created_at": "2015-10-06T13:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194074",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:23" align="right">comment:23</div>

What I said in my last comment isn't quite right.  It is in my paper with Mark Shimozono "Deformed universal characters for classical and affine algebras, Journal of Algebra, 299 (2006), pp. 33-61" (arXiv:math.CO/0404288) but it probably goes back to Koike and Terada or maybe even Littlewood.  It is equation (4.1)+(4.5) for the orthogonal and (4.1)+(4.4) for the symplectic in my paper.



---

archive/issue_comments_194075.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI'm sorry, but I can't compile anything new right now so I am afraid to push anything.  I can write functions on a working version of sage and I am pretty sure the following is right (following the model of `_s_to_o_on_basis`):\n\n```\n    def _o_to_s_on_basis(self, lam):\n        import sage.libs.lrcalc.lrcalc as lrcalc\n        from sage.combinat.partition import Partitions\n        R = self.base_ring()\n        return self._from_dict({ mu: R.sum(\n            (-1)**j*lrcalc.lrcoef_unsafe(lam, mu, nu)\n            for nu in Partitions(2*j)\n              if all(nu.arm_length(i,i)==nu.leg_length(i,i)+1\n                for i in range(nu.frobenius_rank())) )\n            for j in range(sum(lam)//2+1)\n            for mu in Partitions(sum(lam)-2*j) })\n```\nMoreover, if you switch `arm` and `leg` then that is the `_sp_to_s_on_basis`.\n\nYour `_s_to_o_on_basis` has lots of extra looping going on that is not necessary.  Because `|lam|==|mu|+|nu|` you can remove one sum.  Because `nu` has to be an even partition, you don't need to run over `j` odd.  Here is a suggested modification:\n\n```\ndef _s_to_o_on_basis(self, lam):\n    import sage.libs.lrcalc.lrcalc as lrcalc\n    from sage.combinat.partition import Partitions\n    R = self.base_ring()\n    return self._from_dict({ mu: R.sum( lrcalc.lrcoef_unsafe(lam, mu, nu)\n                                 for nu in Partitions(2*j)\n                                     if all(x % 2 == 0 for x in nu))\n                                 for j in range(sum(lam)//2+1)\n                                 for mu in Partitions(sum(lam)-2*j) })\n```",
    "created_at": "2015-10-06T17:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194075",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:24" align="right">comment:24</div>

I'm sorry, but I can't compile anything new right now so I am afraid to push anything.  I can write functions on a working version of sage and I am pretty sure the following is right (following the model of `_s_to_o_on_basis`):

```
    def _o_to_s_on_basis(self, lam):
        import sage.libs.lrcalc.lrcalc as lrcalc
        from sage.combinat.partition import Partitions
        R = self.base_ring()
        return self._from_dict({ mu: R.sum(
            (-1)**j*lrcalc.lrcoef_unsafe(lam, mu, nu)
            for nu in Partitions(2*j)
              if all(nu.arm_length(i,i)==nu.leg_length(i,i)+1
                for i in range(nu.frobenius_rank())) )
            for j in range(sum(lam)//2+1)
            for mu in Partitions(sum(lam)-2*j) })
```
Moreover, if you switch `arm` and `leg` then that is the `_sp_to_s_on_basis`.

Your `_s_to_o_on_basis` has lots of extra looping going on that is not necessary.  Because `|lam|==|mu|+|nu|` you can remove one sum.  Because `nu` has to be an even partition, you don't need to run over `j` odd.  Here is a suggested modification:

```
def _s_to_o_on_basis(self, lam):
    import sage.libs.lrcalc.lrcalc as lrcalc
    from sage.combinat.partition import Partitions
    R = self.base_ring()
    return self._from_dict({ mu: R.sum( lrcalc.lrcoef_unsafe(lam, mu, nu)
                                 for nu in Partitions(2*j)
                                     if all(x % 2 == 0 for x in nu))
                                 for j in range(sum(lam)//2+1)
                                 for mu in Partitions(sum(lam)-2*j) })
```



---

archive/issue_comments_194076.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI just thought about it and it would probably be better in `_s_to_o_on_basis` to loop over partitions of `j` and double the lengths of the parts of the partition.",
    "created_at": "2015-10-06T17:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194076",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:25" align="right">comment:25</div>

I just thought about it and it would probably be better in `_s_to_o_on_basis` to loop over partitions of `j` and double the lengths of the parts of the partition.



---

archive/issue_comments_194077.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f\"><code>bd49490</code></a></td><td><code>Changes from Mike and some added tests.</code></td></tr></table>\n",
    "created_at": "2015-10-06T20:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194077",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f"><code>bd49490</code></a></td><td><code>Changes from Mike and some added tests.</code></td></tr></table>




---

archive/issue_comments_194078.json:
```json
{
    "body": "Changed commit from **[`57f92dd`](https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db)** to **[`bd49490`](https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f)**",
    "created_at": "2015-10-06T20:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194078",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`57f92dd`](https://github.com/sagemath/sagetrac-mirror/commit/57f92dd1a206bb5af2ed00e4135ded0c586e99db)** to **[`bd49490`](https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f)**



---

archive/issue_comments_194079.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThank you for those suggestions Mike. I implemented all of them, and they resulted in orders of magnitude speedups (including the inverse basis transformations).",
    "created_at": "2015-10-06T20:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194079",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:27" align="right">comment:27</div>

Thank you for those suggestions Mike. I implemented all of them, and they resulted in orders of magnitude speedups (including the inverse basis transformations).



---

archive/issue_comments_194080.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3\"><code>a7ee857</code></a></td><td><code>Adding the Shimozono-Zabrocki paper as a reference.</code></td></tr></table>\n",
    "created_at": "2015-10-06T20:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194080",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3"><code>a7ee857</code></a></td><td><code>Adding the Shimozono-Zabrocki paper as a reference.</code></td></tr></table>




---

archive/issue_comments_194081.json:
```json
{
    "body": "Changed commit from **[`bd49490`](https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f)** to **[`a7ee857`](https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3)**",
    "created_at": "2015-10-06T20:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194081",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bd49490`](https://github.com/sagemath/sagetrac-mirror/commit/bd49490b1b6c006ee43eb5dbdb98aa5d98ae541f)** to **[`a7ee857`](https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3)**



---

archive/issue_comments_194082.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nAt some point in the future, we should implement the single box version and the Hall-Littlewood analogs given in your paper with Mark.",
    "created_at": "2015-10-06T20:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194082",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">comment:29</div>

At some point in the future, we should implement the single box version and the Hall-Littlewood analogs given in your paper with Mark.



---

archive/issue_comments_194083.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nHere is an important question to resolve we can set to positive review.  Is the following right?\n\n```\nsage: s(o.an_element().homogeneous_component(0))\n2*s[]\nsage: s(o.an_element()).homogeneous_component(0)\n-s[]\n```\nI think the answer is no but I don't want to change it before I get full opinions.  I think that we should look carefully to see if there other methods that are also filter dependent.",
    "created_at": "2015-10-08T11:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194083",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:30" align="right">comment:30</div>

Here is an important question to resolve we can set to positive review.  Is the following right?

```
sage: s(o.an_element().homogeneous_component(0))
2*s[]
sage: s(o.an_element()).homogeneous_component(0)
-s[]
```
I think the answer is no but I don't want to change it before I get full opinions.  I think that we should look carefully to see if there other methods that are also filter dependent.



---

archive/issue_comments_194084.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nLets look carefully:\n\n```\nsage: o[2].is_homogeneous()\nTrue\nsage: s(o[2]).is_homogeneous()\nFalse\nsage: o.an_element().degree_zero_coefficient()\n2\nsage: s(o.an_element()).degree_zero_coefficient()\n-1\n```\n`degree_negation` seems to work fine but that is special for these bases (and would not say work for the odd-symplectic basis or irreducible S_n character basis).  It would be better if on filtered bases that these methods were done by coercion.",
    "created_at": "2015-10-08T12:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194084",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:31" align="right">comment:31</div>

Lets look carefully:

```
sage: o[2].is_homogeneous()
True
sage: s(o[2]).is_homogeneous()
False
sage: o.an_element().degree_zero_coefficient()
2
sage: s(o.an_element()).degree_zero_coefficient()
-1
```
`degree_negation` seems to work fine but that is special for these bases (and would not say work for the odd-symplectic basis or irreducible S_n character basis).  It would be better if on filtered bases that these methods were done by coercion.



---

archive/issue_comments_194085.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI would say that is okay because the COB morphism is as filtered algebras, so we can't expect homogeneous components to go to homogeneous components. However this should still work for top-degree homogeneous components.\n\nSo do you want me to do some surgery on the category of Sym bases and make 2 basis categories, one for the filtered and one for the graded? We could then have some generic code for the filtered that uses coercion for those methods that implicitly rely on the basis being graded.",
    "created_at": "2015-10-08T15:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194085",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

I would say that is okay because the COB morphism is as filtered algebras, so we can't expect homogeneous components to go to homogeneous components. However this should still work for top-degree homogeneous components.

So do you want me to do some surgery on the category of Sym bases and make 2 basis categories, one for the filtered and one for the graded? We could then have some generic code for the filtered that uses coercion for those methods that implicitly rely on the basis being graded.



---

archive/issue_comments_194086.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nTo me, the degree of the symmetric function is well defined, even if the basis is filtered.  Degree is what we use on the classical symmetric function bases (not the size of the indexing partition...that is different).  That means homogeneous component, degree and counit are not computed by the size of the indexing partition.\n\nI think that it would be a good idea to factor out those and have two basis categories as you suggest.",
    "created_at": "2015-10-08T17:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194086",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:33" align="right">comment:33</div>

To me, the degree of the symmetric function is well defined, even if the basis is filtered.  Degree is what we use on the classical symmetric function bases (not the size of the indexing partition...that is different).  That means homogeneous component, degree and counit are not computed by the size of the indexing partition.

I think that it would be a good idea to factor out those and have two basis categories as you suggest.



---

archive/issue_comments_194087.json:
```json
{
    "body": "Changed commit from **[`a7ee857`](https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3)** to **[`c968782`](https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd)**",
    "created_at": "2015-10-08T17:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194087",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a7ee857`](https://github.com/sagemath/sagetrac-mirror/commit/a7ee8574e639366db30427852671b0ee1bfb0cf3)** to **[`c968782`](https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd)**



---

archive/issue_comments_194088.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd\"><code>c968782</code></a></td><td><code>add Koike and Terada as a reference, link to full documentation for the bases in the top level</code></td></tr></table>\n",
    "created_at": "2015-10-08T17:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194088",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd"><code>c968782</code></a></td><td><code>add Koike and Terada as a reference, link to full documentation for the bases in the top level</code></td></tr></table>




---

archive/issue_comments_194089.json:
```json
{
    "body": "Changed branch from **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)** to **[u/tscrim/sp_orth_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/sp_orth_broken)**",
    "created_at": "2015-10-09T02:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194089",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)** to **[u/tscrim/sp_orth_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/sp_orth_broken)**



---

archive/issue_comments_194090.json:
```json
{
    "body": "Changed commit from **[`c968782`](https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd)** to **[`cac1d88`](https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4)**",
    "created_at": "2015-10-09T02:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194090",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`c968782`](https://github.com/sagemath/sagetrac-mirror/commit/c968782e777fe17f42c5d316412e15feba1255cd)** to **[`cac1d88`](https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4)**



---

archive/issue_comments_194091.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nOkay, I've done some reworking of things at the category level, including adding a `counit_by_coercion` for realizations.\n\nHowever I get MRO issues when dealing with the finite fields that I don't know how to deal with. I've convinced myself that the categories are almost correct; I want to make this change\n\n```diff\n         cat = HopfAlgebras(self.base().base_ring())\n         return [self.base().Realizations(),\n                 cat.Commutative().WithBasis(),\n-                cat.Graded().Realizations()]\n+                cat.Commutative().Graded().Realizations()]\n```\nBut if I do that, I get `KeyError: (225536, 70)` from the c3 controlled!\n\nSo I don't know what to do at this point. Nicolas, Simon, do you have any ideas?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4\"><code>cac1d88</code></a></td><td><code>Doing some surgery on the categories.</code></td></tr></table>\n",
    "created_at": "2015-10-09T02:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194091",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:35" align="right">comment:35</div>

Okay, I've done some reworking of things at the category level, including adding a `counit_by_coercion` for realizations.

However I get MRO issues when dealing with the finite fields that I don't know how to deal with. I've convinced myself that the categories are almost correct; I want to make this change

```diff
         cat = HopfAlgebras(self.base().base_ring())
         return [self.base().Realizations(),
                 cat.Commutative().WithBasis(),
-                cat.Graded().Realizations()]
+                cat.Commutative().Graded().Realizations()]
```
But if I do that, I get `KeyError: (225536, 70)` from the c3 controlled!

So I don't know what to do at this point. Nicolas, Simon, do you have any ideas?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4"><code>cac1d88</code></a></td><td><code>Doing some surgery on the categories.</code></td></tr></table>




---

archive/issue_events_219371.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-09T02:01:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219371"
}
```



---

archive/issue_events_219372.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-09T02:01:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219372"
}
```



---

archive/issue_comments_194092.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nCould this be related to the error in #11979 ?\n\nAlso, a trifle:\n\n```\n+class FilteredSymmetricFunctionsBases(Category_realization_of_parent):\n+    r\"\"\"\n+    The category of graded bases of the ring of symmetric functions.\n```\ns/graded/filtered/\n\n(Thanks for fixing the categorical hack that made filtered bases pretend to be graded -- IIRC that was the reason why I was skeptical about this ticket!)",
    "created_at": "2015-10-09T03:04:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194092",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:37" align="right">comment:37</div>

Could this be related to the error in #11979 ?

Also, a trifle:

```
+class FilteredSymmetricFunctionsBases(Category_realization_of_parent):
+    r"""
+    The category of graded bases of the ring of symmetric functions.
```
s/graded/filtered/

(Thanks for fixing the categorical hack that made filtered bases pretend to be graded -- IIRC that was the reason why I was skeptical about this ticket!)



---

archive/issue_comments_194093.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nYes, I would say so, and also on #15475. The most annoying thing is that it works for NCSF! However the reason why I can't add the commutative is something I have no understanding of what fails.",
    "created_at": "2015-10-09T03:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194093",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">comment:38</div>

Yes, I would say so, and also on #15475. The most annoying thing is that it works for NCSF! However the reason why I can't add the commutative is something I have no understanding of what fails.



---

archive/issue_comments_194094.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nTo be clear, I'm finding when testing the file `sfa.py` there are errors\n\n```\n    s = SymmetricFunctions(FiniteField(29)).s()\nException raised:\n    Traceback (most recent call last):\n...\n    TypeError: Cannot create a consistent method resolution\n    order (MRO) for bases GradedAlgebras.subcategory_class, CommutativeAlgebras.subcategory_class, Bialgebras.subcategory_class\n```\nAre you able to trigger them outside of the testing environment?  When I enter them by hand they work fine.",
    "created_at": "2015-10-09T11:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194094",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:39" align="right">comment:39</div>

To be clear, I'm finding when testing the file `sfa.py` there are errors

```
    s = SymmetricFunctions(FiniteField(29)).s()
Exception raised:
    Traceback (most recent call last):
...
    TypeError: Cannot create a consistent method resolution
    order (MRO) for bases GradedAlgebras.subcategory_class, CommutativeAlgebras.subcategory_class, Bialgebras.subcategory_class
```
Are you able to trigger them outside of the testing environment?  When I enter them by hand they work fine.



---

archive/issue_comments_194095.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nYes, those are the errors I get when doctesting `sfa.py`.\n\nYou have to do (in a fresh startup of Sage):\n\n```\nsage: SymmetricFunctions(Integers(23))\nsage: SymmetricFunctions(FiniteField(23))\n```\nIt also fails if you do it in the other order as well.",
    "created_at": "2015-10-09T11:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194095",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:40" align="right">comment:40</div>

Yes, those are the errors I get when doctesting `sfa.py`.

You have to do (in a fresh startup of Sage):

```
sage: SymmetricFunctions(Integers(23))
sage: SymmetricFunctions(FiniteField(23))
```
It also fails if you do it in the other order as well.



---

archive/issue_comments_194096.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nHi!\n\nCould it be that we are mixing categories parametrized by a base ring, and categories parametrized by the category that base ring? Something like ``HopfAlgebras(Fields()).XXX()`` and ``Bialgebras(GF(3)).YYY()`` ?",
    "created_at": "2015-10-12T12:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194096",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:41" align="right">comment:41</div>

Hi!

Could it be that we are mixing categories parametrized by a base ring, and categories parametrized by the category that base ring? Something like ``HopfAlgebras(Fields()).XXX()`` and ``Bialgebras(GF(3)).YYY()`` ?



---

archive/issue_comments_194097.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@nthiery](#comment%3A41):\n> Could it be that we are mixing categories parametrized by a base ring, and categories parametrized by the category that base ring? Something like `HopfAlgebras(Fields()).XXX()` and `Bialgebras(GF(3)).YYY()` ?\n\nAFAIK we aren't mixing things like that. This is that wonderful category refinement issue that somehow was somehow magically working beforehand, but I think that was because the categories for the bases weren't quite correct.",
    "created_at": "2015-10-12T15:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194097",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@nthiery](#comment%3A41):
> Could it be that we are mixing categories parametrized by a base ring, and categories parametrized by the category that base ring? Something like `HopfAlgebras(Fields()).XXX()` and `Bialgebras(GF(3)).YYY()` ?

AFAIK we aren't mixing things like that. This is that wonderful category refinement issue that somehow was somehow magically working beforehand, but I think that was because the categories for the bases weren't quite correct.



---

archive/issue_comments_194098.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nI wonder if the problem stems from this line in `__classcall_private__` of `Modules`:\n\n```\nif base_ring in _Fields or (isinstance(base_ring, Category)\n                            and base_ring.is_subcategory(_Fields)):\n```\nor this line in `extra_super_categories` of `FilteredAlgebras`:\n\n```\nif base_ring in Fields:\n```\nand that one/both of these triggers the category refinement and breaks the MRO, which was in the process of being constructed when these were called.\n\n```\nsage: R = Integers(7)\nsage: R.category()\nJoin of Category of finite commutative rings and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets\nsage: HopfAlgebras(R)\nCategory of hopf algebras over Ring of integers modulo 7\nsage: R.category()\nJoin of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups\n```\nYet this still doesn't explain why this works for NCSF. I think that might be a key in figuring out what is going wrong.",
    "created_at": "2015-10-22T03:39:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194098",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:43" align="right">comment:43</div>

I wonder if the problem stems from this line in `__classcall_private__` of `Modules`:

```
if base_ring in _Fields or (isinstance(base_ring, Category)
                            and base_ring.is_subcategory(_Fields)):
```
or this line in `extra_super_categories` of `FilteredAlgebras`:

```
if base_ring in Fields:
```
and that one/both of these triggers the category refinement and breaks the MRO, which was in the process of being constructed when these were called.

```
sage: R = Integers(7)
sage: R.category()
Join of Category of finite commutative rings and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets
sage: HopfAlgebras(R)
Category of hopf algebras over Ring of integers modulo 7
sage: R.category()
Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups
```
Yet this still doesn't explain why this works for NCSF. I think that might be a key in figuring out what is going wrong.



---

archive/issue_comments_194099.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nYou could be on to something here.  If I delete the following lines:\n\n```\n-        if dispatch:\n-            if base_ring in _Fields or (isinstance(base_ring, Category)\n-                                        and base_ring.is_subcategory(_Fields)):\n-                from vector_spaces import VectorSpaces\n-                return VectorSpaces(base_ring, check=False)\n```\nI find that your example in comment 40 does not raise an error.",
    "created_at": "2015-10-22T15:08:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194099",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:44" align="right">comment:44</div>

You could be on to something here.  If I delete the following lines:

```
-        if dispatch:
-            if base_ring in _Fields or (isinstance(base_ring, Category)
-                                        and base_ring.is_subcategory(_Fields)):
-                from vector_spaces import VectorSpaces
-                return VectorSpaces(base_ring, check=False)
```
I find that your example in comment 40 does not raise an error.



---

archive/issue_comments_194100.json:
```json
{
    "body": "Changed commit from **[`cac1d88`](https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4)** to **[`8e690e2`](https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933)**",
    "created_at": "2015-10-26T14:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194100",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`cac1d88`](https://github.com/sagemath/sagetrac-mirror/commit/cac1d88d687705fa90de0edac1b472f6e2d623b4)** to **[`8e690e2`](https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933)**



---

archive/issue_comments_194101.json:
```json
{
    "body": "Changed branch from **[u/tscrim/sp_orth_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/sp_orth_broken)** to **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)**",
    "created_at": "2015-10-26T14:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194101",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/tscrim/sp_orth_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/sp_orth_broken)** to **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)**



---

archive/issue_comments_194102.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nHowever, I don't think that is the right solution. `:/` The check is reasonable and necessary.\n\nGranted, my current proposal is a major hack, but I don't think too many people will be creating many instances of Sym over various large finite fields (and there are more computationally intensive parts necessary for working with Sym). I'm tired of trying to deal with this here, so I just checked if the base ring was a field before any categories get created.\n\nThere is also another issue with C3 in that I get a `KeyError` if I make this change:\n\n```diff\n         cat = HopfAlgebras(self.base().base_ring())\n         return [self.base().Realizations(),\n                 cat.Commutative().WithBasis(),\n-                cat.Graded().Realizations()]\n+                cat.Commutative().Graded().Realizations()]\n```\nThis is what it should be, but because everything commutative will come from the `cat.Commutative().WithBasis()`, I think we are okay for now.\n\nI really would like to push this ticket in and later reach in and fix the category-refinement/MRO/C3 issues on a separate ticket.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8263b10f2c00d58f2a8e09777c394ea51906b366\"><code>8263b10</code></a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b151195bd18ba3c5526b36d6298f39ede0189fd4\"><code>b151195</code></a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933\"><code>8e690e2</code></a></td><td><code>Some hacks and FIXMEs.</code></td></tr></table>\n",
    "created_at": "2015-10-26T14:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194102",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:45" align="right">comment:45</div>

However, I don't think that is the right solution. `:/` The check is reasonable and necessary.

Granted, my current proposal is a major hack, but I don't think too many people will be creating many instances of Sym over various large finite fields (and there are more computationally intensive parts necessary for working with Sym). I'm tired of trying to deal with this here, so I just checked if the base ring was a field before any categories get created.

There is also another issue with C3 in that I get a `KeyError` if I make this change:

```diff
         cat = HopfAlgebras(self.base().base_ring())
         return [self.base().Realizations(),
                 cat.Commutative().WithBasis(),
-                cat.Graded().Realizations()]
+                cat.Commutative().Graded().Realizations()]
```
This is what it should be, but because everything commutative will come from the `cat.Commutative().WithBasis()`, I think we are okay for now.

I really would like to push this ticket in and later reach in and fix the category-refinement/MRO/C3 issues on a separate ticket.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8263b10f2c00d58f2a8e09777c394ea51906b366"><code>8263b10</code></a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b151195bd18ba3c5526b36d6298f39ede0189fd4"><code>b151195</code></a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933"><code>8e690e2</code></a></td><td><code>Some hacks and FIXMEs.</code></td></tr></table>




---

archive/issue_comments_194103.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI should also mention that there are other places where category refinement would make sense, such as for finite-dimensional algebras after doing an `is_commutative` or `is_unital` test, so IMO it could be useful beyond prime testing for finite fields.",
    "created_at": "2015-10-26T14:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194103",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:46" align="right">comment:46</div>

I should also mention that there are other places where category refinement would make sense, such as for finite-dimensional algebras after doing an `is_commutative` or `is_unital` test, so IMO it could be useful beyond prime testing for finite fields.



---

archive/issue_events_219373.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-26T14:55:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219373"
}
```



---

archive/issue_events_219374.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-26T14:55:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219374"
}
```



---

archive/issue_comments_194104.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nWhat does the line \"R in Fields()\" do?  It looks to me like it returns True or False and goes on to the next line.",
    "created_at": "2015-10-26T20:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194104",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:47" align="right">comment:47</div>

What does the line "R in Fields()" do?  It looks to me like it returns True or False and goes on to the next line.



---

archive/issue_comments_194105.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nIt makes sure that `R` has had its category refined (if it needs to). Thus this is not done in the process of building the MRO/category heirarchy for `Sym`.",
    "created_at": "2015-10-26T21:47:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194105",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

It makes sure that `R` has had its category refined (if it needs to). Thus this is not done in the process of building the MRO/category heirarchy for `Sym`.



---

archive/issue_events_219375.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-10-27T00:33:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219375"
}
```



---

archive/issue_events_219376.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-10-27T00:33:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219376"
}
```



---

archive/issue_comments_194106.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI don't think that this is a bad way of resolving this, but it may be pushing the problem elsewhere.  I am seeing:\n\n```\nFile \"combinat/ncsf_qsym/qsym.py\", line 1873, in sage.combinat.ncsf_qsym.qsym.QuasiSymmetricFunctions.Monomial.lambda_of_monomial\nFailed example:\n    M = QuasiSymmetricFunctions(Integers(5)).Monomial()\n```\n\nAre ncsf/qsym going to require the same hack?  Will every combinatorial Hopf algebra require it?",
    "created_at": "2015-10-27T00:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194106",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:49" align="right">comment:49</div>

I don't think that this is a bad way of resolving this, but it may be pushing the problem elsewhere.  I am seeing:

```
File "combinat/ncsf_qsym/qsym.py", line 1873, in sage.combinat.ncsf_qsym.qsym.QuasiSymmetricFunctions.Monomial.lambda_of_monomial
Failed example:
    M = QuasiSymmetricFunctions(Integers(5)).Monomial()
```

Are ncsf/qsym going to require the same hack?  Will every combinatorial Hopf algebra require it?



---

archive/issue_comments_194107.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nI've not been getting those errors, but Volker just posted on #19397 an issue that smells like the same thing. So right now I'm thinking, \"*!@$, we have to deal with this now\". `:/` Nicolas, Simon, I will need you two to get involved now I think.",
    "created_at": "2015-10-27T03:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194107",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:50" align="right">comment:50</div>

I've not been getting those errors, but Volker just posted on #19397 an issue that smells like the same thing. So right now I'm thinking, "*!@$, we have to deal with this now". `:/` Nicolas, Simon, I will need you two to get involved now I think.



---

archive/issue_comments_194108.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nOne strange feature is that the error that you post in comment 40 is triggered on QSym and NCSymD but not on NCSF or NCSym (at least on my computer).  That is,\n\n```\nsage: NCSymD = SymmetricFunctionsNonCommutingVariablesDual(FiniteField(23))\nsage: NCSymD = SymmetricFunctionsNonCommutingVariablesDual(Integers(23))\n```\ntriggers an error but\n\n```\nsage: NCSym = SymmetricFunctionsNonCommutingVariables(FiniteField(23))\nsage: NCSym = SymmetricFunctionsNonCommutingVariables(Integers(23))\n```\ndoes not.",
    "created_at": "2015-10-27T11:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194108",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:51" align="right">comment:51</div>

One strange feature is that the error that you post in comment 40 is triggered on QSym and NCSymD but not on NCSF or NCSym (at least on my computer).  That is,

```
sage: NCSymD = SymmetricFunctionsNonCommutingVariablesDual(FiniteField(23))
sage: NCSymD = SymmetricFunctionsNonCommutingVariablesDual(Integers(23))
```
triggers an error but

```
sage: NCSym = SymmetricFunctionsNonCommutingVariables(FiniteField(23))
sage: NCSym = SymmetricFunctionsNonCommutingVariables(Integers(23))
```
does not.



---

archive/issue_comments_194109.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThe `NCSymD` is caused by this part of the `__init__`:\n\n```\n        Sym = SymmetricFunctions(self.base_ring())\n        Sym_h_to_w = Sym.h().module_morphism(w.sum_of_partitions,\n                                             triangular='lower',\n                                             inverse_on_support=w._set_par_to_par,\n                                             codomain=w, category=category)\n```\nAh...`QSym` fails for the same reason...\n\nI think they all will need this hack for now. I know this is pushing the problem further down, but I don't know of a way to resolve it at present (or at least without forcing a prime check for finite rings).\n\nAlthough there is the issue on [comment:45](#comment%3A45) that is likely unrelated and needs a fix at some point too... I think there might be some issue(s) with join categories...\n\nI also have been working on #19397 under the assumption that these are the same problem. However I am pretty sure this is not the case now and they are different problems (I would love to be wrong).",
    "created_at": "2015-10-31T17:54:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194109",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:52" align="right">comment:52</div>

The `NCSymD` is caused by this part of the `__init__`:

```
        Sym = SymmetricFunctions(self.base_ring())
        Sym_h_to_w = Sym.h().module_morphism(w.sum_of_partitions,
                                             triangular='lower',
                                             inverse_on_support=w._set_par_to_par,
                                             codomain=w, category=category)
```
Ah...`QSym` fails for the same reason...

I think they all will need this hack for now. I know this is pushing the problem further down, but I don't know of a way to resolve it at present (or at least without forcing a prime check for finite rings).

Although there is the issue on [comment:45](#comment%3A45) that is likely unrelated and needs a fix at some point too... I think there might be some issue(s) with join categories...

I also have been working on #19397 under the assumption that these are the same problem. However I am pretty sure this is not the case now and they are different problems (I would love to be wrong).



---

archive/issue_comments_194110.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3\"><code>d8d3eda</code></a></td><td><code>additions to NCSF/QSym/Sym/NCSym/NCSymD to ensure that MRO errors are not triggered</code></td></tr></table>\n",
    "created_at": "2015-11-02T01:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194110",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3"><code>d8d3eda</code></a></td><td><code>additions to NCSF/QSym/Sym/NCSym/NCSymD to ensure that MRO errors are not triggered</code></td></tr></table>




---

archive/issue_comments_194111.json:
```json
{
    "body": "Changed commit from **[`8e690e2`](https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933)** to **[`d8d3eda`](https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3)**",
    "created_at": "2015-11-02T01:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194111",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8e690e2`](https://github.com/sagemath/sagetrac-mirror/commit/8e690e2a13b8c266f0d6a46c7c9b01a01aa48933)** to **[`d8d3eda`](https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3)**



---

archive/issue_comments_194112.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI agree.  In the end this is a minor change as a hack.  It doesn't locate the problem, but it does fix it from being triggered.  I've pushed some changes which add doctests and replaced `assert(R in Rings())` with `assert(R in Fields() or R in Rings())` in in the `__init__` method for all of these Hopf algebras.  I'll get back to Jean-Baptist's Hopf algebra implementations after we resolve these issues and see if his code can be used to get around these problem.",
    "created_at": "2015-11-02T01:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194112",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:54" align="right">comment:54</div>

I agree.  In the end this is a minor change as a hack.  It doesn't locate the problem, but it does fix it from being triggered.  I've pushed some changes which add doctests and replaced `assert(R in Rings())` with `assert(R in Fields() or R in Rings())` in in the `__init__` method for all of these Hopf algebras.  I'll get back to Jean-Baptist's Hopf algebra implementations after we resolve these issues and see if his code can be used to get around these problem.



---

archive/issue_comments_194113.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4c141614431a214c54830d37d7d2e3d391d1bf3\"><code>c4c1416</code></a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0513f6a7694792d76f4c9ce36c292e4b8edf698c\"><code>0513f6a</code></a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4\"><code>5b492f3</code></a></td><td><code>Fixing non-ascii character.</code></td></tr></table>\n",
    "created_at": "2015-11-02T02:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194113",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4c141614431a214c54830d37d7d2e3d391d1bf3"><code>c4c1416</code></a></td><td><code>Merge branch 'develop' into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0513f6a7694792d76f4c9ce36c292e4b8edf698c"><code>0513f6a</code></a></td><td><code>Merge branch 'public/combinat/sf/sp_orth' of trac.sagemath.org:sage into public/combinat/sf/sp_orth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4"><code>5b492f3</code></a></td><td><code>Fixing non-ascii character.</code></td></tr></table>




---

archive/issue_comments_194114.json:
```json
{
    "body": "Changed commit from **[`d8d3eda`](https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3)** to **[`5b492f3`](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**",
    "created_at": "2015-11-02T02:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194114",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d8d3eda`](https://github.com/sagemath/sagetrac-mirror/commit/d8d3eda712c9b8eba85fed818ef385e56ddb16b3)** to **[`5b492f3`](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**



---

archive/issue_comments_194115.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nI'm okay with things. So let's just leave this hack in there since it works for now. It is also documented for testing later on. Therefore I think we are back to needs review.",
    "created_at": "2015-11-02T02:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194115",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:56" align="right">comment:56</div>

I'm okay with things. So let's just leave this hack in there since it works for now. It is also documented for testing later on. Therefore I think we are back to needs review.



---

archive/issue_events_219377.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-11-02T02:36:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219377"
}
```



---

archive/issue_events_219378.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-11-02T02:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219378"
}
```



---

archive/issue_events_219379.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-11-02T12:12:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219379"
}
```



---

archive/issue_events_219380.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-11-02T12:12:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219380"
}
```



---

archive/issue_comments_194116.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nI think it looks good and all tests pass.  Positive review.",
    "created_at": "2015-11-02T12:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194116",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:57" align="right">comment:57</div>

I think it looks good and all tests pass.  Positive review.



---

archive/issue_comments_194117.json:
```json
{
    "body": "Reviewer: **Mike Zabrocki**",
    "created_at": "2015-11-02T12:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194117",
    "user": "https://github.com/zabrocki"
}
```

Reviewer: **Mike Zabrocki**



---

archive/issue_comments_194118.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThanks Mike!",
    "created_at": "2015-11-02T14:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194118",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:58" align="right">comment:58</div>

Thanks Mike!



---

archive/issue_events_219381.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-03T23:59:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219381"
}
```



---

archive/issue_events_219382.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d628632414bd4e4901b58fa068add0b7da46466e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-11-03T23:59:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15536#event-219382"
}
```



---

archive/issue_comments_194119.json:
```json
{
    "body": "Changed branch from **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)** to **[`5b492f3`](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**",
    "created_at": "2015-11-03T23:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15536#issuecomment-194119",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/sf/sp_orth](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/sf/sp_orth)** to **[`5b492f3`](https://github.com/sagemath/sagetrac-mirror/commit/5b492f37fd2918dcc66e16ff446f5b30fe1bb9a4)**
