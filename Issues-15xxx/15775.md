# Issue 15775: doctest: desolve bug

archive/issues_015538.json:
```json
{
    "body": "This is fixed but needs a doctest:\n\nI encountered this bug:\n\n```\nsage: y = function('y', x)\nsage: desolve(diff(y, x) == sqrt(abs(y)), dvar=y, ivar=x)\nc + x\n```\n\nThis is wrong. Maxima's `ode2` just leaves it as `'integrate(1/sqrt(abs(y)),y) = x+%c`, so there's probably a bug involved in converting to and from Maxima.\n\n**Branch/Commit:** [51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914](https://github.com/sagemath/sagetrac-mirror/commit/51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914)\n\n**Reviewer:** Karl-Dieter Crisman\n\n**Author:** Ralf Stephan\n\nIssue created by migration from https://trac.sagemath.org/ticket/15775\n\n",
    "closed_at": "2015-02-08T17:35:54Z",
    "created_at": "2014-02-02T01:56:51Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "doctest: desolve bug",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15775",
    "user": "https://github.com/eviatarbach"
}
```
This is fixed but needs a doctest:

I encountered this bug:

```
sage: y = function('y', x)
sage: desolve(diff(y, x) == sqrt(abs(y)), dvar=y, ivar=x)
c + x
```

This is wrong. Maxima's `ode2` just leaves it as `'integrate(1/sqrt(abs(y)),y) = x+%c`, so there's probably a bug involved in converting to and from Maxima.

**Branch/Commit:** [51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914](https://github.com/sagemath/sagetrac-mirror/commit/51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914)

**Reviewer:** Karl-Dieter Crisman

**Author:** Ralf Stephan

Issue created by migration from https://trac.sagemath.org/ticket/15775





---

archive/issue_events_052511.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-02-04T23:53:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52511"
}
```



---

archive/issue_events_052512.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52512"
}
```



---

archive/issue_events_052513.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52513"
}
```



---

archive/issue_events_052514.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52514"
}
```



---

archive/issue_events_052515.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52515"
}
```



---

archive/issue_events_052516.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T16:40:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52516"
}
```



---

archive/issue_events_052517.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T16:40:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52517"
}
```



---

archive/issue_comments_244390.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-01-31T16:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244390",
    "user": "https://github.com/rwst"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_244391.json:
```json
{
    "body": "<a id='comment:4'></a>\nSage now spits out the integral equation with the actual integral solution plugged in: `sqrt(-y(x))*(sgn(y(x)) - 1) + (sgn(y(x)) + 1)*sqrt(y(x)) == _C + x` so I guess this was fixed upstream without a bug report from here.",
    "created_at": "2015-01-31T16:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244391",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>
Sage now spits out the integral equation with the actual integral solution plugged in: `sqrt(-y(x))*(sgn(y(x)) - 1) + (sgn(y(x)) + 1)*sqrt(y(x)) == _C + x` so I guess this was fixed upstream without a bug report from here.



---

archive/issue_events_052518.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "rename": {
        "from": "desolve bug",
        "to": "doctest: desolve bug"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52518"
}
```



---

archive/issue_comments_244392.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+This is fixed but needs a doctest:\n+\n I encountered this bug:\n \n ```\n``````\n",
    "created_at": "2015-01-31T17:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244392",
    "user": "https://github.com/rwst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+This is fixed but needs a doctest:
+
 I encountered this bug:
 
 ```
``````




---

archive/issue_comments_244393.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2015-01-31T17:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244393",
    "user": "https://github.com/rwst"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_events_052519.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T17:43:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52519"
}
```



---

archive/issue_events_052520.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T17:43:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52520"
}
```



---

archive/issue_comments_244394.json:
```json
{
    "body": "**Branch:** [u/rws/doctest__desolve_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/doctest__desolve_bug)",
    "created_at": "2015-02-02T09:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244394",
    "user": "https://github.com/rwst"
}
```

**Branch:** [u/rws/doctest__desolve_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/doctest__desolve_bug)



---

archive/issue_comments_244395.json:
```json
{
    "body": "**Author:** Ralf Stephan",
    "created_at": "2015-02-02T09:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244395",
    "user": "https://github.com/rwst"
}
```

**Author:** Ralf Stephan



---

archive/issue_comments_244396.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2015-02-02T09:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244396",
    "user": "https://github.com/rwst"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_244397.json:
```json
{
    "body": "**Commit:** [51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914](https://github.com/sagemath/sagetrac-mirror/commit/51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914)",
    "created_at": "2015-02-02T09:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244397",
    "user": "https://github.com/rwst"
}
```

**Commit:** [51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914](https://github.com/sagemath/sagetrac-mirror/commit/51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914)



---

archive/issue_comments_244398.json:
```json
{
    "body": "<a id='comment:7'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914\">51ac6bf</a></td><td><code>15775: doctest; cosmetics</code></td></tr></table>\n",
    "created_at": "2015-02-02T09:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244398",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914">51ac6bf</a></td><td><code>15775: doctest; cosmetics</code></td></tr></table>




---

archive/issue_comments_244399.json:
```json
{
    "body": "<a id='comment:8'></a>\nNice work with the \"right\" invocation of `function` as well.\n\nHere is a dumb question.  When the `:trac:` syntax begins a sentence, we get stuff like\n> trac ticket #9961 fixed (allow assumptions on the dependent variable in desolve):\n\n\nwhich is (in principle) not proper English capitalization.  Obviously this is not a matter of huge mathematical importance, but it doesn't look quite right nonetheless.  I'm not suggesting holding up this ticket based on this, but I'm wondering what your thoughts are on this.  In particular, I don't know whether it would be possible for Sphinx to \"guess\" whether one was at the beginning of a sentence.  We could put in the developer guide a directive not to put this at the beginning of a sentence, but that also seems sort of silly.  Thoughts?",
    "created_at": "2015-02-03T03:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244399",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>
Nice work with the "right" invocation of `function` as well.

Here is a dumb question.  When the `:trac:` syntax begins a sentence, we get stuff like
> trac ticket #9961 fixed (allow assumptions on the dependent variable in desolve):


which is (in principle) not proper English capitalization.  Obviously this is not a matter of huge mathematical importance, but it doesn't look quite right nonetheless.  I'm not suggesting holding up this ticket based on this, but I'm wondering what your thoughts are on this.  In particular, I don't know whether it would be possible for Sphinx to "guess" whether one was at the beginning of a sentence.  We could put in the developer guide a directive not to put this at the beginning of a sentence, but that also seems sort of silly.  Thoughts?



---

archive/issue_comments_244400.json:
```json
{
    "body": "**Reviewer:** Karl-Dieter Crisman",
    "created_at": "2015-02-03T03:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244400",
    "user": "https://github.com/kcrisman"
}
```

**Reviewer:** Karl-Dieter Crisman



---

archive/issue_comments_244401.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-02-03T03:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244401",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_244402.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/doctest__desolve_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/doctest__desolve_bug)\" to \"[51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914](https://github.com/sagemath/sagetrac-mirror/commit/51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914)\".",
    "created_at": "2015-02-08T17:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-244402",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/rws/doctest__desolve_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/doctest__desolve_bug)" to "[51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914](https://github.com/sagemath/sagetrac-mirror/commit/51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914)".



---

archive/issue_events_052521.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-08T17:35:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-52521"
}
```
