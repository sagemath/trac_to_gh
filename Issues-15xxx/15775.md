# Issue 15775: doctest: desolve bug

archive/issues_015538.json:
```json
{
    "body": "This is fixed but needs a doctest:\n\nI encountered this bug:\n\n```\nsage: y = function('y', x)\nsage: desolve(diff(y, x) == sqrt(abs(y)), dvar=y, ivar=x)\nc + x\n```\n\nThis is wrong. Maxima's `ode2` just leaves it as `'integrate(1/sqrt(abs(y)),y) = x+%c`, so there's probably a bug involved in converting to and from Maxima.\n\nBranch/Commit: 51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914\n\nReviewer: Karl-Dieter Crisman\n\nAuthor: Ralf Stephan\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15775\n\n",
    "closed_at": "2015-02-08T17:35:54Z",
    "created_at": "2014-02-02T01:56:51Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "doctest: desolve bug",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15775",
    "user": "https://github.com/eviatarbach"
}
```
This is fixed but needs a doctest:

I encountered this bug:

```
sage: y = function('y', x)
sage: desolve(diff(y, x) == sqrt(abs(y)), dvar=y, ivar=x)
c + x
```

This is wrong. Maxima's `ode2` just leaves it as `'integrate(1/sqrt(abs(y)),y) = x+%c`, so there's probably a bug involved in converting to and from Maxima.

Branch/Commit: 51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914

Reviewer: Karl-Dieter Crisman

Author: Ralf Stephan

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15775





---

archive/issue_events_046391.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-02-04T23:53:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46391"
}
```



---

archive/issue_events_046392.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46392"
}
```



---

archive/issue_events_046393.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46393"
}
```



---

archive/issue_events_046394.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46394"
}
```



---

archive/issue_events_046395.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46395"
}
```



---

archive/issue_events_046396.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T16:40:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46396"
}
```



---

archive/issue_events_046397.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T16:40:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46397"
}
```



---

archive/issue_comments_254244.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-01-31T16:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254244",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_254245.json:
```json
{
    "body": "<a id='comment:4'></a>Sage now spits out the integral equation with the actual integral solution plugged in: `sqrt(-y(x))*(sgn(y(x)) - 1) + (sgn(y(x)) + 1)*sqrt(y(x)) == _C + x` so I guess this was fixed upstream without a bug report from here.",
    "created_at": "2015-01-31T16:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254245",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>Sage now spits out the integral equation with the actual integral solution plugged in: `sqrt(-y(x))*(sgn(y(x)) - 1) + (sgn(y(x)) + 1)*sqrt(y(x)) == _C + x` so I guess this was fixed upstream without a bug report from here.



---

archive/issue_comments_254246.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+This is fixed but needs a doctest:\n+\n I encountered this bug:\n \n ```\n``````\n",
    "created_at": "2015-01-31T17:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254246",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+This is fixed but needs a doctest:
+
 I encountered this bug:
 
 ```
``````




---

archive/issue_comments_254247.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-01-31T17:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254247",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_046398.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T17:43:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46398"
}
```



---

archive/issue_events_046399.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-31T17:43:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46399"
}
```



---

archive/issue_comments_254248.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/doctest__desolve_bug\"",
    "created_at": "2015-02-02T09:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254248",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/doctest__desolve_bug"



---

archive/issue_comments_254249.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2015-02-02T09:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254249",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_254250.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-02T09:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254250",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_254251.json:
```json
{
    "body": "Changing commit from \"\" to \"51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914\"",
    "created_at": "2015-02-02T09:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254251",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914"



---

archive/issue_comments_254252.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2015-02-02T09:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254252",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_comments_254253.json:
```json
{
    "body": "<a id='comment:8'></a>Nice work with the \"right\" invocation of `function` as well.\n\nHere is a dumb question.  When the `:trac:` syntax begins a sentence, we get stuff like\n> trac ticket #9961 fixed (allow assumptions on the dependent variable in desolve):\n\n\nwhich is (in principle) not proper English capitalization.  Obviously this is not a matter of huge mathematical importance, but it doesn't look quite right nonetheless.  I'm not suggesting holding up this ticket based on this, but I'm wondering what your thoughts are on this.  In particular, I don't know whether it would be possible for Sphinx to \"guess\" whether one was at the beginning of a sentence.  We could put in the developer guide a directive not to put this at the beginning of a sentence, but that also seems sort of silly.  Thoughts?",
    "created_at": "2015-02-03T03:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254253",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>Nice work with the "right" invocation of `function` as well.

Here is a dumb question.  When the `:trac:` syntax begins a sentence, we get stuff like
> trac ticket #9961 fixed (allow assumptions on the dependent variable in desolve):


which is (in principle) not proper English capitalization.  Obviously this is not a matter of huge mathematical importance, but it doesn't look quite right nonetheless.  I'm not suggesting holding up this ticket based on this, but I'm wondering what your thoughts are on this.  In particular, I don't know whether it would be possible for Sphinx to "guess" whether one was at the beginning of a sentence.  We could put in the developer guide a directive not to put this at the beginning of a sentence, but that also seems sort of silly.  Thoughts?



---

archive/issue_comments_254254.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Karl-Dieter Crisman\"",
    "created_at": "2015-02-03T03:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254254",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "" to "Karl-Dieter Crisman"



---

archive/issue_comments_254255.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-03T03:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254255",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254256.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-08T17:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254256",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_254257.json:
```json
{
    "body": "Changing branch from \"u/rws/doctest__desolve_bug\" to \"51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914\"",
    "created_at": "2015-02-08T17:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15775#issuecomment-254257",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/rws/doctest__desolve_bug" to "51ac6bf415dd7d7c2feb6ca8d66c72ccbea73914"



---

archive/issue_events_046400.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-08T17:35:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15775",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15775#event-46400"
}
```
