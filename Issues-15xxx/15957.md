# Issue 15957: Let easily switch between GMP and MPIR

archive/issues_015720.json:
```json
{
    "body": "Follow up to #12661.\n\nOne can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.\n\n\n**CC:**  @kiwifb\n\n**Branch/Commit:** [910ed7a62addb3f01f0afa2b58180a3ca0639cc1](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Jean-Pierre Flori\n\nIssue created by migration from https://trac.sagemath.org/ticket/15957\n\n",
    "closed_at": "2015-01-15T08:41:45Z",
    "created_at": "2014-03-17T09:55:37Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Let easily switch between GMP and MPIR",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15957",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
Follow up to #12661.

One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.


**CC:**  @kiwifb

**Branch/Commit:** [910ed7a62addb3f01f0afa2b58180a3ca0639cc1](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)

**Reviewer:** Fran√ßois Bissey

**Author:** Jean-Pierre Flori

Issue created by migration from https://trac.sagemath.org/ticket/15957





---

archive/issue_comments_204727.json:
```json
{
    "body": "**Branch:** [u/jpflori/ticket/15957](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15957)",
    "created_at": "2014-03-17T16:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204727",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Branch:** [u/jpflori/ticket/15957](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15957)



---

archive/issue_events_141881.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2014-03-17T16:00:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141881"
}
```



---

archive/issue_comments_204728.json:
```json
{
    "body": "**Author:** Jean-Pierre Flori",
    "created_at": "2014-03-17T16:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204728",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Author:** Jean-Pierre Flori



---

archive/issue_comments_204729.json:
```json
{
    "body": "**Commit:** [64802d4fd81be99903abe87c2c77261cef77808c](https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c)",
    "created_at": "2014-03-17T16:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204729",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Commit:** [64802d4fd81be99903abe87c2c77261cef77808c](https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c)



---

archive/issue_comments_204730.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n Follow up to #12661.\n+\n+One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.\n+If needed this should even set `SAGE_CHANGE_MP_LIBRARY` and trigger further rebuild of spkgs if needed.\n``````\n",
    "created_at": "2014-03-17T16:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204730",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 Follow up to #12661.
+
+One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.
+If needed this should even set `SAGE_CHANGE_MP_LIBRARY` and trigger further rebuild of spkgs if needed.
``````




---

archive/issue_comments_204731.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c34755c939f42814dd31047b98c5aeda84b9a29\">2c34755</a></td><td><code>Initial commit for GMP 5.1.3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a14aaf2fd94252c0e263c8b02003f8c640d70e0e\">a14aaf2</a></td><td><code>Explicit conversion in farey.cpp as recent GMP do not do it automatically.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3bf5a1772a929434ab2ee22370bd9a29fb32b4c\">a3bf5a1</a></td><td><code>USe GMP or MPIR as default MP library.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa61de8dd284604cf265d4e7ddadde3f5d754b8f\">aa61de8</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15957</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c\">64802d4</a></td><td><code>Introduce variables to switch between MPIR and GMP.</code></td></tr></table>\n",
    "created_at": "2014-03-17T16:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204731",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c34755c939f42814dd31047b98c5aeda84b9a29">2c34755</a></td><td><code>Initial commit for GMP 5.1.3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a14aaf2fd94252c0e263c8b02003f8c640d70e0e">a14aaf2</a></td><td><code>Explicit conversion in farey.cpp as recent GMP do not do it automatically.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3bf5a1772a929434ab2ee22370bd9a29fb32b4c">a3bf5a1</a></td><td><code>USe GMP or MPIR as default MP library.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa61de8dd284604cf265d4e7ddadde3f5d754b8f">aa61de8</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15957</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c">64802d4</a></td><td><code>Introduce variables to switch between MPIR and GMP.</code></td></tr></table>




---

archive/issue_events_141882.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141882"
}
```



---

archive/issue_events_141883.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141883"
}
```



---

archive/issue_comments_204732.json:
```json
{
    "body": "<a id='comment:3'></a>\n* I get a few failures when running the tests after building sage with SAGE_MP_LIBRARY=GMP:\n\n```\nsage -t src/sage/rings/integer.pyx\n**********************************************************************\nFile \"src/sage/rings/integer.pyx\", line 1959, in sage.rings.integer.Integer.__pow__\nFailed example:\n    2^(2^63-2)\nExpected:\n    Traceback (most recent call last):\n    ...\n    MemoryError: failed to allocate 1152921504606847008 bytes  \nGot:\n    gmp: overflow in mpz type\n    Traceback (most recent call last):\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.rings.integer.Integer.__pow__[27]>\", line 1, in <module>\n        Integer(2)**(Integer(2)**Integer(63)-Integer(2))\n      File \"integer.pyx\", line 1998, in sage.rings.integer.Integer.__pow__ (sage/rings/integer.c:14703)\n      File \"c_lib.pyx\", line 85, in sage.ext.c_lib.sig_raise_exception (sage/ext/c_lib.c:1040)\n    RuntimeError: Aborted\n**********************************************************************\nFile \"src/sage/rings/integer.pyx\", line 5431, in sage.rings.integer.Integer._xgcd\nFailed example:\n    2._xgcd(-2)\nExpected:\n    (2, 1, 0)\nGot:\n    (2, 0, -1)\n**********************************************************************\n```\n* The new environment variable should probably be documented in `src/doc/en/installation/source.rst`. (Well, in the long run, a `configure` flag would IMO be much more appropriate than an environment variable.)\n* The GMP tarball apparently still needs to be mirrored (see #12661).",
    "created_at": "2014-05-24T14:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204732",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:3'></a>
* I get a few failures when running the tests after building sage with SAGE_MP_LIBRARY=GMP:

```
sage -t src/sage/rings/integer.pyx
**********************************************************************
File "src/sage/rings/integer.pyx", line 1959, in sage.rings.integer.Integer.__pow__
Failed example:
    2^(2^63-2)
Expected:
    Traceback (most recent call last):
    ...
    MemoryError: failed to allocate 1152921504606847008 bytes  
Got:
    gmp: overflow in mpz type
    Traceback (most recent call last):
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.rings.integer.Integer.__pow__[27]>", line 1, in <module>
        Integer(2)**(Integer(2)**Integer(63)-Integer(2))
      File "integer.pyx", line 1998, in sage.rings.integer.Integer.__pow__ (sage/rings/integer.c:14703)
      File "c_lib.pyx", line 85, in sage.ext.c_lib.sig_raise_exception (sage/ext/c_lib.c:1040)
    RuntimeError: Aborted
**********************************************************************
File "src/sage/rings/integer.pyx", line 5431, in sage.rings.integer.Integer._xgcd
Failed example:
    2._xgcd(-2)
Expected:
    (2, 1, 0)
Got:
    (2, 0, -1)
**********************************************************************
```
* The new environment variable should probably be documented in `src/doc/en/installation/source.rst`. (Well, in the long run, a `configure` flag would IMO be much more appropriate than an environment variable.)
* The GMP tarball apparently still needs to be mirrored (see #12661).



---

archive/issue_events_141884.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-05-24T14:31:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141884"
}
```



---

archive/issue_events_141885.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-05-24T14:31:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141885"
}
```



---

archive/issue_comments_204733.json:
```json
{
    "body": "<a id='comment:5'></a>\nYou forgot one. But those are known from #12661. I am not sure we can fix minor differences in behavior. We can choose different tests in some case but the expected failure will be hard to replace.",
    "created_at": "2014-05-24T19:29:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204733",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
You forgot one. But those are known from #12661. I am not sure we can fix minor differences in behavior. We can choose different tests in some case but the expected failure will be hard to replace.



---

archive/issue_comments_204734.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [fbissey](#comment%3A5):\n> You forgot one. But those are known from #12661.\n\n\nYou are completely right, thanks!\n\n> I am not sure we can fix minor differences in behavior.\n\n\nOk, I still don't like keeping around doctests that are know to fail, but I don't want to let the issue block this ticket.\n\n> We can choose different tests in some case but the expected failure will be hard to replace.\n\n\nWhat about something like\n\n```\nsage: try: 2^(2^63-2)\n....: except MemoryError, RuntimeError: true\n```\n?\n\nAnd does anyone understand if the output of the failing test in `sage/tests/book_stein_modform.py` is correct?",
    "created_at": "2014-05-26T09:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204734",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:6'></a>
Replying to [fbissey](#comment%3A5):
> You forgot one. But those are known from #12661.


You are completely right, thanks!

> I am not sure we can fix minor differences in behavior.


Ok, I still don't like keeping around doctests that are know to fail, but I don't want to let the issue block this ticket.

> We can choose different tests in some case but the expected failure will be hard to replace.


What about something like

```
sage: try: 2^(2^63-2)
....: except MemoryError, RuntimeError: true
```
?

And does anyone understand if the output of the failing test in `sage/tests/book_stein_modform.py` is correct?



---

archive/issue_comments_204735.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [mmezzarobba](#comment%3A6):\n> And does anyone understand if the output of the failing test in `sage/tests/book_stein_modform.py` is correct?\n\nI don't, but from the look of it, it seems plausible it is still correct :)",
    "created_at": "2014-05-26T09:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204735",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
Replying to [mmezzarobba](#comment%3A6):
> And does anyone understand if the output of the failing test in `sage/tests/book_stein_modform.py` is correct?

I don't, but from the look of it, it seems plausible it is still correct :)



---

archive/issue_comments_204736.json:
```json
{
    "body": "<a id='comment:8'></a>\nAlso note GMP 6.0.0 is out.",
    "created_at": "2014-05-26T09:43:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204736",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>
Also note GMP 6.0.0 is out.



---

archive/issue_events_141886.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141886"
}
```



---

archive/issue_events_141887.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141887"
}
```



---

archive/issue_comments_204737.json:
```json
{
    "body": "<a id='comment:10'></a>\nI guess the doctests issues (except for the memory one) are gone now that MPIR behaves just like GMP, see #15015.\n\nIf I rebase the ticket, would anyone be kind enough to review it?\nMaybe I'll just simplify the ticket discarding the black magic to be able to change the MP lib you use.\nThen you just choose which one you use the first time you build Sage and live with it.\nJust like with SAGE_DEBUG.",
    "created_at": "2015-01-13T12:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204737",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>
I guess the doctests issues (except for the memory one) are gone now that MPIR behaves just like GMP, see #15015.

If I rebase the ticket, would anyone be kind enough to review it?
Maybe I'll just simplify the ticket discarding the black magic to be able to change the MP lib you use.
Then you just choose which one you use the first time you build Sage and live with it.
Just like with SAGE_DEBUG.



---

archive/issue_comments_204738.json:
```json
{
    "body": "<a id='comment:11'></a>\nIndeed I only have the memory issue left in sage-on-gentoo. I'll review anything you put here.",
    "created_at": "2015-01-13T19:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204738",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
Indeed I only have the memory issue left in sage-on-gentoo. I'll review anything you put here.



---

archive/issue_comments_204739.json:
```json
{
    "body": "**Changing commit** from \"[64802d4fd81be99903abe87c2c77261cef77808c](https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c)\" to \"[914b36d6d403047c38e368addc263433d8fd315b](https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b)\".",
    "created_at": "2015-01-14T10:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204739",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[64802d4fd81be99903abe87c2c77261cef77808c](https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c)" to "[914b36d6d403047c38e368addc263433d8fd315b](https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b)".



---

archive/issue_comments_204740.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1eef69b2b9d63658a931e63220cfabcf6c4a74a\">d1eef69</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15957</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b\">914b36d</a></td><td><code>Remove possibility to switch from GMP to MPIR without building from scratch.</code></td></tr></table>\n",
    "created_at": "2015-01-14T10:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204740",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1eef69b2b9d63658a931e63220cfabcf6c4a74a">d1eef69</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15957</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b">914b36d</a></td><td><code>Remove possibility to switch from GMP to MPIR without building from scratch.</code></td></tr></table>




---

archive/issue_comments_204741.json:
```json
{
    "body": "**Changing commit** from \"[914b36d6d403047c38e368addc263433d8fd315b](https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b)\" to \"[24ba1730bc28e48848ce979d98c274b439a59358](https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358)\".",
    "created_at": "2015-01-14T12:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204741",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[914b36d6d403047c38e368addc263433d8fd315b](https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b)" to "[24ba1730bc28e48848ce979d98c274b439a59358](https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358)".



---

archive/issue_comments_204742.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358\">24ba173</a></td><td><code>Add documentation for SAGE_MP_LIBRARY.</code></td></tr></table>\n",
    "created_at": "2015-01-14T12:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204742",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358">24ba173</a></td><td><code>Add documentation for SAGE_MP_LIBRARY.</code></td></tr></table>




---

archive/issue_comments_204743.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Follow up to #12661.\n \n One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.\n-If needed this should even set `SAGE_CHANGE_MP_LIBRARY` and trigger further rebuild of spkgs if needed.\n+\n``````\n",
    "created_at": "2015-01-14T12:30:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204743",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Follow up to #12661.
 
 One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.
-If needed this should even set `SAGE_CHANGE_MP_LIBRARY` and trigger further rebuild of spkgs if needed.
+
``````




---

archive/issue_events_141888.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2015-01-14T12:30:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141888"
}
```



---

archive/issue_events_141889.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2015-01-14T12:30:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141889"
}
```



---

archive/issue_comments_204744.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4\">b4adf96</a></td><td><code>Add a little more info for SAGE_MP_LIBRARY.</code></td></tr></table>\n",
    "created_at": "2015-01-14T12:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4">b4adf96</a></td><td><code>Add a little more info for SAGE_MP_LIBRARY.</code></td></tr></table>




---

archive/issue_comments_204745.json:
```json
{
    "body": "**Changing commit** from \"[24ba1730bc28e48848ce979d98c274b439a59358](https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358)\" to \"[b4adf9647e7b23671fe48d1a04fc3a06508f10c4](https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4)\".",
    "created_at": "2015-01-14T12:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204745",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[24ba1730bc28e48848ce979d98c274b439a59358](https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358)" to "[b4adf9647e7b23671fe48d1a04fc3a06508f10c4](https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4)".



---

archive/issue_events_141890.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-01-14T18:06:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141890"
}
```



---

archive/issue_events_141891.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-01-14T18:06:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141891"
}
```



---

archive/issue_comments_204746.json:
```json
{
    "body": "<a id='comment:16'></a>\nLooks good to me.",
    "created_at": "2015-01-14T18:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204746",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'></a>
Looks good to me.



---

archive/issue_comments_204747.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2015-01-14T18:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204747",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** Fran√ßois Bissey



---

archive/issue_events_141892.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-14T18:20:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141892"
}
```



---

archive/issue_events_141893.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-14T18:20:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141893"
}
```



---

archive/issue_comments_204748.json:
```json
{
    "body": "<a id='comment:17'></a>\nI don't think the lines\n\n```\n###############################################################################\n# Determine whether we should automatically rebuild dependencies.\n###############################################################################\n\nif [ \"$SAGE_UPGRADING\" = yes ]; then\n # We're doing an upgrade. Let build/Makefile call sage-spkg with\n # \"-f\" to force rebuilding dependent packages, too:\n export SAGE_SPKG_OPTS=\"-f\"\nfi\n```\nshould be there: I think they are a remnant from an older version of Sage. The environment variable `SAGE_UPGRADING` was also removed. See #17072.",
    "created_at": "2015-01-14T18:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204748",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>
I don't think the lines

```
###############################################################################
# Determine whether we should automatically rebuild dependencies.
###############################################################################

if [ "$SAGE_UPGRADING" = yes ]; then
 # We're doing an upgrade. Let build/Makefile call sage-spkg with
 # "-f" to force rebuilding dependent packages, too:
 export SAGE_SPKG_OPTS="-f"
fi
```
should be there: I think they are a remnant from an older version of Sage. The environment variable `SAGE_UPGRADING` was also removed. See #17072.



---

archive/issue_comments_204749.json:
```json
{
    "body": "<a id='comment:18'></a>\nOops, I'll quickly fix that.",
    "created_at": "2015-01-14T18:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204749",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:18'></a>
Oops, I'll quickly fix that.



---

archive/issue_comments_204750.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1\">910ed7a</a></td><td><code>Remove SAGE_UPGRADING related code.</code></td></tr></table>\n",
    "created_at": "2015-01-14T18:26:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204750",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1">910ed7a</a></td><td><code>Remove SAGE_UPGRADING related code.</code></td></tr></table>




---

archive/issue_comments_204751.json:
```json
{
    "body": "**Changing commit** from \"[b4adf9647e7b23671fe48d1a04fc3a06508f10c4](https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4)\" to \"[910ed7a62addb3f01f0afa2b58180a3ca0639cc1](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)\".",
    "created_at": "2015-01-14T18:26:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b4adf9647e7b23671fe48d1a04fc3a06508f10c4](https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4)" to "[910ed7a62addb3f01f0afa2b58180a3ca0639cc1](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)".



---

archive/issue_comments_204752.json:
```json
{
    "body": "<a id='comment:20'></a>\nLooks better now.",
    "created_at": "2015-01-14T18:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204752",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:20'></a>
Looks better now.



---

archive/issue_events_141894.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2015-01-14T18:28:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141894"
}
```



---

archive/issue_events_141895.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2015-01-14T18:28:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141895"
}
```



---

archive/issue_events_141896.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-14T19:16:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141896"
}
```



---

archive/issue_events_141897.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-14T19:16:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141897"
}
```



---

archive/issue_comments_204753.json:
```json
{
    "body": "<a id='comment:22'></a>\nOkay, thanks.",
    "created_at": "2015-01-14T19:16:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204753",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:22'></a>
Okay, thanks.



---

archive/issue_comments_204754.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [jhpalmieri](#comment%3A17):\n> I don't think the lines\n> \n> ```\n> ###############################################################################\n> # Determine whether we should automatically rebuild dependencies.\n> ###############################################################################\n> \n> if [ \"$SAGE_UPGRADING\" = yes ]; then\n>  # We're doing an upgrade. Let build/Makefile call sage-spkg with\n>  # \"-f\" to force rebuilding dependent packages, too:\n>  export SAGE_SPKG_OPTS=\"-f\"\n> fi\n> ```\n> should be there: I think they are a remnant from an older version of Sage. The environment variable `SAGE_UPGRADING` was also removed. See #17072.\n\n\nIt does look like a left over, yes.",
    "created_at": "2015-01-14T19:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204754",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'></a>
Replying to [jhpalmieri](#comment%3A17):
> I don't think the lines
> 
> ```
> ###############################################################################
> # Determine whether we should automatically rebuild dependencies.
> ###############################################################################
> 
> if [ "$SAGE_UPGRADING" = yes ]; then
>  # We're doing an upgrade. Let build/Makefile call sage-spkg with
>  # "-f" to force rebuilding dependent packages, too:
>  export SAGE_SPKG_OPTS="-f"
> fi
> ```
> should be there: I think they are a remnant from an older version of Sage. The environment variable `SAGE_UPGRADING` was also removed. See #17072.


It does look like a left over, yes.



---

archive/issue_comments_204755.json:
```json
{
    "body": "**Changing branch** from \"[u/jpflori/ticket/15957](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15957)\" to \"[910ed7a62addb3f01f0afa2b58180a3ca0639cc1](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)\".",
    "created_at": "2015-01-15T08:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15957#issuecomment-204755",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jpflori/ticket/15957](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15957)" to "[910ed7a62addb3f01f0afa2b58180a3ca0639cc1](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)".



---

archive/issue_events_141898.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-15T08:41:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141898"
}
```



---

archive/issue_events_141899.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-15T08:41:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15957",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15957#event-141899"
}
```
