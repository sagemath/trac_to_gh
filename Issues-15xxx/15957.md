# Issue 15957: Let easily switch between GMP and MPIR

archive/issues_015720.json:
```json
{
    "assignees": [],
    "body": "Follow up to #12661.\n\nOne can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.\n\n\nCC:  @kiwifb\n\nBranch/Commit: **[`910ed7a`](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Jean-Pierre Flori**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15957_\n\n",
    "closed_at": "2015-01-15T08:41:45Z",
    "created_at": "2014-03-17T09:55:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Let easily switch between GMP and MPIR",
    "type": "issue",
    "updated_at": "2015-01-15T08:41:45Z",
    "url": "https://github.com/sagemath/sage/issues/15957",
    "user": "https://github.com/jpflori"
}
```
Follow up to #12661.

One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.


CC:  @kiwifb

Branch/Commit: **[`910ed7a`](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)**

Reviewer: **Fran√ßois Bissey**

Author: **Jean-Pierre Flori**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/15957_





---

archive/issue_events_225615.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-03-17T09:55:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225615"
}
```



---

archive/issue_events_225616.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-03-17T09:55:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225616"
}
```



---

archive/issue_events_225617.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-03-17T09:55:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225617"
}
```



---

archive/issue_events_225618.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-03-17T09:55:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225618"
}
```



---

archive/issue_comments_202287.json:
```json
{
    "body": "Branch: **[u/jpflori/ticket/15957](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15957)**",
    "created_at": "2014-03-17T16:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202287",
    "user": "https://github.com/jpflori"
}
```

Branch: **[u/jpflori/ticket/15957](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15957)**



---

archive/issue_events_225619.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-03-17T16:00:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225619"
}
```



---

archive/issue_comments_202288.json:
```json
{
    "body": "Author: **Jean-Pierre Flori**",
    "created_at": "2014-03-17T16:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202288",
    "user": "https://github.com/jpflori"
}
```

Author: **Jean-Pierre Flori**



---

archive/issue_comments_202289.json:
```json
{
    "body": "Commit: **[`64802d4`](https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c)**",
    "created_at": "2014-03-17T16:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202289",
    "user": "https://github.com/jpflori"
}
```

Commit: **[`64802d4`](https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c)**



---

archive/issue_comments_202290.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n Follow up to #12661.\n+\n+One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.\n+If needed this should even set `SAGE_CHANGE_MP_LIBRARY` and trigger further rebuild of spkgs if needed.\n``````\n",
    "created_at": "2014-03-17T16:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202290",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 Follow up to #12661.
+
+One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.
+If needed this should even set `SAGE_CHANGE_MP_LIBRARY` and trigger further rebuild of spkgs if needed.
``````




---

archive/issue_comments_202291.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c34755c939f42814dd31047b98c5aeda84b9a29\"><code>2c34755</code></a></td><td><code>Initial commit for GMP 5.1.3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a14aaf2fd94252c0e263c8b02003f8c640d70e0e\"><code>a14aaf2</code></a></td><td><code>Explicit conversion in farey.cpp as recent GMP do not do it automatically.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3bf5a1772a929434ab2ee22370bd9a29fb32b4c\"><code>a3bf5a1</code></a></td><td><code>USe GMP or MPIR as default MP library.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa61de8dd284604cf265d4e7ddadde3f5d754b8f\"><code>aa61de8</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15957</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c\"><code>64802d4</code></a></td><td><code>Introduce variables to switch between MPIR and GMP.</code></td></tr></table>\n",
    "created_at": "2014-03-17T16:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202291",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c34755c939f42814dd31047b98c5aeda84b9a29"><code>2c34755</code></a></td><td><code>Initial commit for GMP 5.1.3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a14aaf2fd94252c0e263c8b02003f8c640d70e0e"><code>a14aaf2</code></a></td><td><code>Explicit conversion in farey.cpp as recent GMP do not do it automatically.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3bf5a1772a929434ab2ee22370bd9a29fb32b4c"><code>a3bf5a1</code></a></td><td><code>USe GMP or MPIR as default MP library.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa61de8dd284604cf265d4e7ddadde3f5d754b8f"><code>aa61de8</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15957</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c"><code>64802d4</code></a></td><td><code>Introduce variables to switch between MPIR and GMP.</code></td></tr></table>




---

archive/issue_events_225620.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225620"
}
```



---

archive/issue_events_225621.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225621"
}
```



---

archive/issue_comments_202292.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n* I get a few failures when running the tests after building sage with SAGE_MP_LIBRARY=GMP:\n\n```\nsage -t src/sage/rings/integer.pyx\n**********************************************************************\nFile \"src/sage/rings/integer.pyx\", line 1959, in sage.rings.integer.Integer.__pow__\nFailed example:\n    2^(2^63-2)\nExpected:\n    Traceback (most recent call last):\n    ...\n    MemoryError: failed to allocate 1152921504606847008 bytes  \nGot:\n    gmp: overflow in mpz type\n    Traceback (most recent call last):\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.rings.integer.Integer.__pow__[27]>\", line 1, in <module>\n        Integer(2)**(Integer(2)**Integer(63)-Integer(2))\n      File \"integer.pyx\", line 1998, in sage.rings.integer.Integer.__pow__ (sage/rings/integer.c:14703)\n      File \"c_lib.pyx\", line 85, in sage.ext.c_lib.sig_raise_exception (sage/ext/c_lib.c:1040)\n    RuntimeError: Aborted\n**********************************************************************\nFile \"src/sage/rings/integer.pyx\", line 5431, in sage.rings.integer.Integer._xgcd\nFailed example:\n    2._xgcd(-2)\nExpected:\n    (2, 1, 0)\nGot:\n    (2, 0, -1)\n**********************************************************************\n```\n* The new environment variable should probably be documented in `src/doc/en/installation/source.rst`. (Well, in the long run, a `configure` flag would IMO be much more appropriate than an environment variable.)\n* The GMP tarball apparently still needs to be mirrored (see #12661).",
    "created_at": "2014-05-24T14:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202292",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:3" align="right">comment:3</div>

* I get a few failures when running the tests after building sage with SAGE_MP_LIBRARY=GMP:

```
sage -t src/sage/rings/integer.pyx
**********************************************************************
File "src/sage/rings/integer.pyx", line 1959, in sage.rings.integer.Integer.__pow__
Failed example:
    2^(2^63-2)
Expected:
    Traceback (most recent call last):
    ...
    MemoryError: failed to allocate 1152921504606847008 bytes  
Got:
    gmp: overflow in mpz type
    Traceback (most recent call last):
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.rings.integer.Integer.__pow__[27]>", line 1, in <module>
        Integer(2)**(Integer(2)**Integer(63)-Integer(2))
      File "integer.pyx", line 1998, in sage.rings.integer.Integer.__pow__ (sage/rings/integer.c:14703)
      File "c_lib.pyx", line 85, in sage.ext.c_lib.sig_raise_exception (sage/ext/c_lib.c:1040)
    RuntimeError: Aborted
**********************************************************************
File "src/sage/rings/integer.pyx", line 5431, in sage.rings.integer.Integer._xgcd
Failed example:
    2._xgcd(-2)
Expected:
    (2, 1, 0)
Got:
    (2, 0, -1)
**********************************************************************
```
* The new environment variable should probably be documented in `src/doc/en/installation/source.rst`. (Well, in the long run, a `configure` flag would IMO be much more appropriate than an environment variable.)
* The GMP tarball apparently still needs to be mirrored (see #12661).



---

archive/issue_events_225622.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-05-24T14:31:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225622"
}
```



---

archive/issue_events_225623.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-05-24T14:31:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225623"
}
```



---

archive/issue_comments_202293.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYou forgot one. But those are known from #12661. I am not sure we can fix minor differences in behavior. We can choose different tests in some case but the expected failure will be hard to replace.",
    "created_at": "2014-05-24T19:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202293",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

You forgot one. But those are known from #12661. I am not sure we can fix minor differences in behavior. We can choose different tests in some case but the expected failure will be hard to replace.



---

archive/issue_comments_202294.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kiwifb](#comment:5):\n> You forgot one. But those are known from #12661.\n\nYou are completely right, thanks!\n\n> I am not sure we can fix minor differences in behavior.\n\nOk, I still don't like keeping around doctests that are know to fail, but I don't want to let the issue block this ticket.\n\n> We can choose different tests in some case but the expected failure will be hard to replace.\n\nWhat about something like\n\n```\nsage: try: 2^(2^63-2)\n....: except MemoryError, RuntimeError: true\n```\n?\n\nAnd does anyone understand if the output of the failing test in `sage/tests/book_stein_modform.py` is correct?",
    "created_at": "2014-05-26T09:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202294",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kiwifb](#comment:5):
> You forgot one. But those are known from #12661.

You are completely right, thanks!

> I am not sure we can fix minor differences in behavior.

Ok, I still don't like keeping around doctests that are know to fail, but I don't want to let the issue block this ticket.

> We can choose different tests in some case but the expected failure will be hard to replace.

What about something like

```
sage: try: 2^(2^63-2)
....: except MemoryError, RuntimeError: true
```
?

And does anyone understand if the output of the failing test in `sage/tests/book_stein_modform.py` is correct?



---

archive/issue_comments_202295.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@mezzarobba](#comment:6):\n> And does anyone understand if the output of the failing test in `sage/tests/book_stein_modform.py` is correct?\n\nI don't, but from the look of it, it seems plausible it is still correct :)",
    "created_at": "2014-05-26T09:42:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202295",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@mezzarobba](#comment:6):
> And does anyone understand if the output of the failing test in `sage/tests/book_stein_modform.py` is correct?

I don't, but from the look of it, it seems plausible it is still correct :)



---

archive/issue_comments_202296.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAlso note GMP 6.0.0 is out.",
    "created_at": "2014-05-26T09:43:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202296",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:8" align="right">comment:8</div>

Also note GMP 6.0.0 is out.



---

archive/issue_events_225624.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225624"
}
```



---

archive/issue_events_225625.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225625"
}
```



---

archive/issue_comments_202297.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI guess the doctests issues (except for the memory one) are gone now that MPIR behaves just like GMP, see #15015.\n\nIf I rebase the ticket, would anyone be kind enough to review it?\nMaybe I'll just simplify the ticket discarding the black magic to be able to change the MP lib you use.\nThen you just choose which one you use the first time you build Sage and live with it.\nJust like with SAGE_DEBUG.",
    "created_at": "2015-01-13T12:34:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202297",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:10" align="right">comment:10</div>

I guess the doctests issues (except for the memory one) are gone now that MPIR behaves just like GMP, see #15015.

If I rebase the ticket, would anyone be kind enough to review it?
Maybe I'll just simplify the ticket discarding the black magic to be able to change the MP lib you use.
Then you just choose which one you use the first time you build Sage and live with it.
Just like with SAGE_DEBUG.



---

archive/issue_comments_202298.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nIndeed I only have the memory issue left in sage-on-gentoo. I'll review anything you put here.",
    "created_at": "2015-01-13T19:25:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202298",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Indeed I only have the memory issue left in sage-on-gentoo. I'll review anything you put here.



---

archive/issue_comments_202299.json:
```json
{
    "body": "Changed commit from **[`64802d4`](https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c)** to **[`914b36d`](https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b)**",
    "created_at": "2015-01-14T10:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202299",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`64802d4`](https://github.com/sagemath/sagetrac-mirror/commit/64802d4fd81be99903abe87c2c77261cef77808c)** to **[`914b36d`](https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b)**



---

archive/issue_comments_202300.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1eef69b2b9d63658a931e63220cfabcf6c4a74a\"><code>d1eef69</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15957</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b\"><code>914b36d</code></a></td><td><code>Remove possibility to switch from GMP to MPIR without building from scratch.</code></td></tr></table>\n",
    "created_at": "2015-01-14T10:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202300",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1eef69b2b9d63658a931e63220cfabcf6c4a74a"><code>d1eef69</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15957</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b"><code>914b36d</code></a></td><td><code>Remove possibility to switch from GMP to MPIR without building from scratch.</code></td></tr></table>




---

archive/issue_comments_202301.json:
```json
{
    "body": "Changed commit from **[`914b36d`](https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b)** to **[`24ba173`](https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358)**",
    "created_at": "2015-01-14T12:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202301",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`914b36d`](https://github.com/sagemath/sagetrac-mirror/commit/914b36d6d403047c38e368addc263433d8fd315b)** to **[`24ba173`](https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358)**



---

archive/issue_comments_202302.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358\"><code>24ba173</code></a></td><td><code>Add documentation for SAGE_MP_LIBRARY.</code></td></tr></table>\n",
    "created_at": "2015-01-14T12:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202302",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358"><code>24ba173</code></a></td><td><code>Add documentation for SAGE_MP_LIBRARY.</code></td></tr></table>




---

archive/issue_comments_202303.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Follow up to #12661.\n \n One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.\n-If needed this should even set `SAGE_CHANGE_MP_LIBRARY` and trigger further rebuild of spkgs if needed.\n+\n``````\n",
    "created_at": "2015-01-14T12:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202303",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Follow up to #12661.
 
 One can set `SAGE_MP_LIBRARY` to choose between GMP and MPIR when issueing `make`.
-If needed this should even set `SAGE_CHANGE_MP_LIBRARY` and trigger further rebuild of spkgs if needed.
+
``````




---

archive/issue_events_225626.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2015-01-14T12:30:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225626"
}
```



---

archive/issue_events_225627.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2015-01-14T12:30:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225627"
}
```



---

archive/issue_comments_202304.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4\"><code>b4adf96</code></a></td><td><code>Add a little more info for SAGE_MP_LIBRARY.</code></td></tr></table>\n",
    "created_at": "2015-01-14T12:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202304",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4"><code>b4adf96</code></a></td><td><code>Add a little more info for SAGE_MP_LIBRARY.</code></td></tr></table>




---

archive/issue_comments_202305.json:
```json
{
    "body": "Changed commit from **[`24ba173`](https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358)** to **[`b4adf96`](https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4)**",
    "created_at": "2015-01-14T12:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202305",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`24ba173`](https://github.com/sagemath/sagetrac-mirror/commit/24ba1730bc28e48848ce979d98c274b439a59358)** to **[`b4adf96`](https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4)**



---

archive/issue_events_225628.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-01-14T18:06:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225628"
}
```



---

archive/issue_events_225629.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-01-14T18:06:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225629"
}
```



---

archive/issue_comments_202306.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nLooks good to me.",
    "created_at": "2015-01-14T18:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202306",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

Looks good to me.



---

archive/issue_comments_202307.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2015-01-14T18:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202307",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_events_225630.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-14T18:20:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225630"
}
```



---

archive/issue_events_225631.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-14T18:20:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225631"
}
```



---

archive/issue_comments_202308.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI don't think the lines\n\n```\n###############################################################################\n# Determine whether we should automatically rebuild dependencies.\n###############################################################################\n\nif [ \"$SAGE_UPGRADING\" = yes ]; then\n # We're doing an upgrade. Let build/Makefile call sage-spkg with\n # \"-f\" to force rebuilding dependent packages, too:\n export SAGE_SPKG_OPTS=\"-f\"\nfi\n```\nshould be there: I think they are a remnant from an older version of Sage. The environment variable `SAGE_UPGRADING` was also removed. See #17072.",
    "created_at": "2015-01-14T18:20:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202308",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:17" align="right">comment:17</div>

I don't think the lines

```
###############################################################################
# Determine whether we should automatically rebuild dependencies.
###############################################################################

if [ "$SAGE_UPGRADING" = yes ]; then
 # We're doing an upgrade. Let build/Makefile call sage-spkg with
 # "-f" to force rebuilding dependent packages, too:
 export SAGE_SPKG_OPTS="-f"
fi
```
should be there: I think they are a remnant from an older version of Sage. The environment variable `SAGE_UPGRADING` was also removed. See #17072.



---

archive/issue_comments_202309.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOops, I'll quickly fix that.",
    "created_at": "2015-01-14T18:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202309",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">comment:18</div>

Oops, I'll quickly fix that.



---

archive/issue_comments_202310.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1\"><code>910ed7a</code></a></td><td><code>Remove SAGE_UPGRADING related code.</code></td></tr></table>\n",
    "created_at": "2015-01-14T18:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202310",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1"><code>910ed7a</code></a></td><td><code>Remove SAGE_UPGRADING related code.</code></td></tr></table>




---

archive/issue_comments_202311.json:
```json
{
    "body": "Changed commit from **[`b4adf96`](https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4)** to **[`910ed7a`](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)**",
    "created_at": "2015-01-14T18:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202311",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b4adf96`](https://github.com/sagemath/sagetrac-mirror/commit/b4adf9647e7b23671fe48d1a04fc3a06508f10c4)** to **[`910ed7a`](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)**



---

archive/issue_comments_202312.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nLooks better now.",
    "created_at": "2015-01-14T18:27:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202312",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:20" align="right">comment:20</div>

Looks better now.



---

archive/issue_events_225632.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2015-01-14T18:28:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225632"
}
```



---

archive/issue_events_225633.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2015-01-14T18:28:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225633"
}
```



---

archive/issue_events_225634.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-14T19:16:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225634"
}
```



---

archive/issue_events_225635.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-14T19:16:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225635"
}
```



---

archive/issue_comments_202313.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nOkay, thanks.",
    "created_at": "2015-01-14T19:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202313",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">comment:22</div>

Okay, thanks.



---

archive/issue_comments_202314.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jhpalmieri](#comment:17):\n> I don't think the lines\n> \n> ```\n> ###############################################################################\n> # Determine whether we should automatically rebuild dependencies.\n> ###############################################################################\n> \n> if [ \"$SAGE_UPGRADING\" = yes ]; then\n>  # We're doing an upgrade. Let build/Makefile call sage-spkg with\n>  # \"-f\" to force rebuilding dependent packages, too:\n>  export SAGE_SPKG_OPTS=\"-f\"\n> fi\n> ```\n> should be there: I think they are a remnant from an older version of Sage. The environment variable `SAGE_UPGRADING` was also removed. See #17072.\n\nIt does look like a left over, yes.",
    "created_at": "2015-01-14T19:23:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202314",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jhpalmieri](#comment:17):
> I don't think the lines
> 
> ```
> ###############################################################################
> # Determine whether we should automatically rebuild dependencies.
> ###############################################################################
> 
> if [ "$SAGE_UPGRADING" = yes ]; then
>  # We're doing an upgrade. Let build/Makefile call sage-spkg with
>  # "-f" to force rebuilding dependent packages, too:
>  export SAGE_SPKG_OPTS="-f"
> fi
> ```
> should be there: I think they are a remnant from an older version of Sage. The environment variable `SAGE_UPGRADING` was also removed. See #17072.

It does look like a left over, yes.



---

archive/issue_comments_202315.json:
```json
{
    "body": "Changed branch from **[u/jpflori/ticket/15957](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15957)** to **[`910ed7a`](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)**",
    "created_at": "2015-01-15T08:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15957#issuecomment-202315",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jpflori/ticket/15957](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15957)** to **[`910ed7a`](https://github.com/sagemath/sagetrac-mirror/commit/910ed7a62addb3f01f0afa2b58180a3ca0639cc1)**



---

archive/issue_events_225636.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-15T08:41:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225636"
}
```



---

archive/issue_events_225637.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "80678735188e843b7e90f2f8e9eb346d41fcdd7d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-01-15T08:41:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15957",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15957#event-225637"
}
```
