# Issue 15979: Toric varieties can be tricked into accepting base rings that are not fields

archive/issues_015742.json:
```json
{
    "body": "There are a couple of odd things right now:\n\nThis does not work:\n\n```\nsage: R = PolynomialRing(QQ, 2, 'a')\nsage: P2 = toric_varieties.P2(base_ring=R)\n...\nTypeError: need a field to construct a Fano toric variety!\n Got Multivariate Polynomial Ring in a0, a1 over Rational Field\n```\nHowever, this does:\n\n```\nsage: R = PolynomialRing(QQ, 2, 'a')\nsage: P2 = toric_varieties.P2(base_ring=QQ)\nsage: P2 = P2.change_ring(R)\nsage: P2.base_ring()\nMultivariate Polynomial Ring in a0, a1 over Rational Field\n```\n\nThe same problem also occurs for ToricVariety instead of CPRFanoToricVariety. \nAllowing general rings leads to some annoying behavior such as\n\n```\nsage: P2.base_ring()\nMultivariate Polynomial Ring in a0, a1 over Rational Field\nsage: P2.dimension()\n4\n```\nHere the dimension of the spectrum of the base ring is added. Because of that, integration in toric varieties does not work (although this can be fixed, of course).\n\nIn any case, if one requires toric varieties to be defined over fields, it should at least be consistent.\n\nBest,\nJan\n\nPS: It's also a bit annoying that ToricVariety and CPRFanoToricVariety allow for the keyword base_field, but the catalog only allows base_ring. Should that be adjusted?\n\nCC:  @novoselt @vbraun\n\nKeywords: toric\n\nBranch/Commit: 0ddcf4da121461367f2e2b547243a489af79ccc7\n\nReviewer: Volker Braun\n\nAuthor: Jan Keitel\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15979\n\n",
    "closed_at": "2014-03-20T15:43:47Z",
    "created_at": "2014-03-20T10:21:21Z",
    "labels": [
        "component: algebraic geometry",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Toric varieties can be tricked into accepting base rings that are not fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15979",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```
There are a couple of odd things right now:

This does not work:

```
sage: R = PolynomialRing(QQ, 2, 'a')
sage: P2 = toric_varieties.P2(base_ring=R)
...
TypeError: need a field to construct a Fano toric variety!
 Got Multivariate Polynomial Ring in a0, a1 over Rational Field
```
However, this does:

```
sage: R = PolynomialRing(QQ, 2, 'a')
sage: P2 = toric_varieties.P2(base_ring=QQ)
sage: P2 = P2.change_ring(R)
sage: P2.base_ring()
Multivariate Polynomial Ring in a0, a1 over Rational Field
```

The same problem also occurs for ToricVariety instead of CPRFanoToricVariety. 
Allowing general rings leads to some annoying behavior such as

```
sage: P2.base_ring()
Multivariate Polynomial Ring in a0, a1 over Rational Field
sage: P2.dimension()
4
```
Here the dimension of the spectrum of the base ring is added. Because of that, integration in toric varieties does not work (although this can be fixed, of course).

In any case, if one requires toric varieties to be defined over fields, it should at least be consistent.

Best,
Jan

PS: It's also a bit annoying that ToricVariety and CPRFanoToricVariety allow for the keyword base_field, but the catalog only allows base_ring. Should that be adjusted?

CC:  @novoselt @vbraun

Keywords: toric

Branch/Commit: 0ddcf4da121461367f2e2b547243a489af79ccc7

Reviewer: Volker Braun

Author: Jan Keitel

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15979





---

archive/issue_comments_258836.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -28,7 +28,7 @@\n sage: P2.dimension()\n 4\n ```\n-Here the dimension of the spectrum of the base ring is added. Because of that, integration in toric varieties work (although this can be fixed, of course).\n+Here the dimension of the spectrum of the base ring is added. Because of that, integration in toric varieties does not work (although this can be fixed, of course).\n \n In any case, if one requires toric varieties to be defined over fields, it should at least be consistent.\n \n``````\n",
    "created_at": "2014-03-20T10:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15979#issuecomment-258836",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -28,7 +28,7 @@
 sage: P2.dimension()
 4
 ```
-Here the dimension of the spectrum of the base ring is added. Because of that, integration in toric varieties work (although this can be fixed, of course).
+Here the dimension of the spectrum of the base ring is added. Because of that, integration in toric varieties does not work (although this can be fixed, of course).
 
 In any case, if one requires toric varieties to be defined over fields, it should at least be consistent.
 
``````




---

archive/issue_comments_258837.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-03-20T10:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15979#issuecomment-258837",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_258838.json:
```json
{
    "body": "<a id='comment:3'></a>\nShould always be `base_ring` for consistency. Even if we currently only support fields...",
    "created_at": "2014-03-20T12:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15979#issuecomment-258838",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
Should always be `base_ring` for consistency. Even if we currently only support fields...



---

archive/issue_comments_258839.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2014-03-20T13:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15979#issuecomment-258839",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_258840.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-20T13:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15979#issuecomment-258840",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_258841.json:
```json
{
    "body": "Changing author from \"\" to \"Jan Keitel\"",
    "created_at": "2014-03-20T13:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15979#issuecomment-258841",
    "user": "https://github.com/vbraun"
}
```

Changing author from "" to "Jan Keitel"



---

archive/issue_comments_258842.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-20T15:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15979#issuecomment-258842",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_258843.json:
```json
{
    "body": "Changing branch from \"u/jkeitel/toric_change_ring\" to \"0ddcf4da121461367f2e2b547243a489af79ccc7\"",
    "created_at": "2014-03-20T15:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15979#issuecomment-258843",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jkeitel/toric_change_ring" to "0ddcf4da121461367f2e2b547243a489af79ccc7"



---

archive/issue_events_046986.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-20T15:43:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15979",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15979#event-46986"
}
```
