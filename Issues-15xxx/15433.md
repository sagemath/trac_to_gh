# Issue 15433: Port to OSX 10.9

archive/issues_015196.json:
```json
{
    "assignees": [],
    "body": "Sage fails to build on OSX 10.9.\n\nIssues:\n\n1. scipy doesn't play nicely with the new accelerate framework headers\n2. R depends on CoreData which uses non-standard sqlite3 modules (and this affects us since we set `*_LIBRARY_PATH` and install a custom copy of sqlite3)\n3. g++ and 10.9's cdefs.h header are currently incompatible, leading to a broken libstc++\n4. accelerate framework no longer pretends to be atlas for linking purposes\n\n---\n\nTo Apply:\n\n1. Apply [attachment: trac15433.patch](https://github.com/sagemath/sage/files/ticket15433/trac15433.patch.gz) to the Sage Library repository\n2. [gcc-4.7.3.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/gcc-4.7.3.p1.spkg)\n3. [sqlite-3.7.17.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sqlite-3.7.17.p1.spkg)\n4. [scipy-0.12.0.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/scipy-0.12.0.p1.spkg)\n\nCC:  @sagetrac-yomcat @jhpalmieri\n\nBranch: **[u/ohanar/10.9-port](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/10.9-port)**\n\nReviewer: **Volker Braun**\n\nAuthor: **R. Andrew Ohana**\n\nMerged: **sage-5.13.rc0**\n\nComponent: **porting**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15433_\n\n",
    "closed_at": "2013-12-11T11:02:31Z",
    "created_at": "2013-11-18T07:50:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.13",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Port to OSX 10.9",
    "type": "issue",
    "updated_at": "2014-05-13T12:19:59Z",
    "url": "https://github.com/sagemath/sage/issues/15433",
    "user": "https://github.com/ohanar"
}
```
Sage fails to build on OSX 10.9.

Issues:

1. scipy doesn't play nicely with the new accelerate framework headers
2. R depends on CoreData which uses non-standard sqlite3 modules (and this affects us since we set `*_LIBRARY_PATH` and install a custom copy of sqlite3)
3. g++ and 10.9's cdefs.h header are currently incompatible, leading to a broken libstc++
4. accelerate framework no longer pretends to be atlas for linking purposes

---

To Apply:

1. Apply [attachment: trac15433.patch](https://github.com/sagemath/sage/files/ticket15433/trac15433.patch.gz) to the Sage Library repository
2. [gcc-4.7.3.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/gcc-4.7.3.p1.spkg)
3. [sqlite-3.7.17.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sqlite-3.7.17.p1.spkg)
4. [scipy-0.12.0.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/scipy-0.12.0.p1.spkg)

CC:  @sagetrac-yomcat @jhpalmieri

Branch: **[u/ohanar/10.9-port](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/10.9-port)**

Reviewer: **Volker Braun**

Author: **R. Andrew Ohana**

Merged: **sage-5.13.rc0**

Component: **porting**

_Issue created by migration from https://trac.sagemath.org/ticket/15433_





---

archive/issue_events_217741.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-11-18T07:50:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217741"
}
```



---

archive/issue_events_217742.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-11-18T07:50:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "0000b0",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217742"
}
```



---

archive/issue_events_217743.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-11-18T07:50:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217743"
}
```



---

archive/issue_comments_192047.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe attached branch should fix everything except for the polybori issue. This should be checked on older OSX versions, since I've made some changes that are not 10.9 specific (I've checked these changes against bsd.math, and they work fine there).\n\nAs for the polybori issue, I'm not experiencing it anymore and I don't know what fixed it for me. I was going to setup a 10.9 VM, but unfortunately Apple refuses to let me download 10.9 on the machine I'm currently using -- however, I should be able to get a copy sometime in the few days.\n\nI will update spkgs/add mercurial patches if we can fix this in time for 5.13, but for now it is much easier for me to work off of the git version.",
    "created_at": "2013-11-18T08:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192047",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:1" align="right">comment:1</div>

The attached branch should fix everything except for the polybori issue. This should be checked on older OSX versions, since I've made some changes that are not 10.9 specific (I've checked these changes against bsd.math, and they work fine there).

As for the polybori issue, I'm not experiencing it anymore and I don't know what fixed it for me. I was going to setup a 10.9 VM, but unfortunately Apple refuses to let me download 10.9 on the machine I'm currently using -- however, I should be able to get a copy sometime in the few days.

I will update spkgs/add mercurial patches if we can fix this in time for 5.13, but for now it is much easier for me to work off of the git version.



---

archive/issue_comments_192048.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'm getting the following:\n\n```\n$ make\ncd build && \\\n\"../build/pipestatus\" \\\n\t\"env SAGE_PARALLEL_SPKG_BUILD='' ./install all 2>&1\" \\\n\t\"tee -a ../logs/install.log\"\n./install: line 503: syntax error near unexpected token `then'\n./install: line 503: `if { uname -sr | grep 'Darwin' } &>/dev/null; then'\nmake: *** [build] Error 2\n\n$ uname -sr\nLinux 3.11.7-200.fc19.x86_64\n```",
    "created_at": "2013-11-18T15:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192048",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

I'm getting the following:

```
$ make
cd build && \
"../build/pipestatus" \
	"env SAGE_PARALLEL_SPKG_BUILD='' ./install all 2>&1" \
	"tee -a ../logs/install.log"
./install: line 503: syntax error near unexpected token `then'
./install: line 503: `if { uname -sr | grep 'Darwin' } &>/dev/null; then'
make: *** [build] Error 2

$ uname -sr
Linux 3.11.7-200.fc19.x86_64
```



---

archive/issue_comments_192049.json:
```json
{
    "body": "Changed commit from **[`7a0879b`](https://github.com/sagemath/sagetrac-mirror/commit/7a0879bde6a2e557b7a4056eba398eeaef60f54f)** to **[`3ad56a4`](https://github.com/sagemath/sagetrac-mirror/commit/3ad56a494d4f8085189695546d4ff7480155608a)**",
    "created_at": "2013-11-18T18:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192049",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7a0879b`](https://github.com/sagemath/sagetrac-mirror/commit/7a0879bde6a2e557b7a4056eba398eeaef60f54f)** to **[`3ad56a4`](https://github.com/sagemath/sagetrac-mirror/commit/3ad56a494d4f8085189695546d4ff7480155608a)**



---

archive/issue_comments_192050.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[3ad56a4](https://github.com/sagemath/sagetrac-mirror/commit/3ad56a4)</code></td><td><code>build/install: add missing ;</code></td></tr></table>\n",
    "created_at": "2013-11-18T18:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192050",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[3ad56a4](https://github.com/sagemath/sagetrac-mirror/commit/3ad56a4)</code></td><td><code>build/install: add missing ;</code></td></tr></table>




---

archive/issue_comments_192051.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHere's a stupid git question: what command do I give to check out this branch? I mean, if I'm on an OS X Mavericks system and I don't have a working copy of Sage with the git devel tools, I can't just do `./sage -dev \u2026`, but there must be some git command using the branch name or something. So what is it?",
    "created_at": "2013-11-19T00:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192051",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

Here's a stupid git question: what command do I give to check out this branch? I mean, if I'm on an OS X Mavericks system and I don't have a working copy of Sage with the git devel tools, I can't just do `./sage -dev …`, but there must be some git command using the branch name or something. So what is it?



---

archive/issue_comments_192052.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nMy guess about polybori, by the way, is that it was fixed by the changes to gcc.",
    "created_at": "2013-11-19T01:03:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192052",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

My guess about polybori, by the way, is that it was fixed by the changes to gcc.



---

archive/issue_comments_192053.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@jhpalmieri](#comment:6):\n> Here's a stupid git question: what command do I give to check out this branch?\n\nAssuming you have git installed and in your path, you can do\n\n```\n$ git clone git://trac.sagemath.org/sage.git -b u/ohanar/10.9-port\n```\nto make a clone of the git repository, or if you already have a clone, you can do \n\n```\n$ git fetch git://trac.sagemath.org/sage.git u/ohanar/10.9-port\n$ git checkout -b u/ohanar/10.9-port FETCH_HEAD\n```\nfrom within the repository.",
    "created_at": "2013-11-19T01:40:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192053",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@jhpalmieri](#comment:6):
> Here's a stupid git question: what command do I give to check out this branch?

Assuming you have git installed and in your path, you can do

```
$ git clone git://trac.sagemath.org/sage.git -b u/ohanar/10.9-port
```
to make a clone of the git repository, or if you already have a clone, you can do 

```
$ git fetch git://trac.sagemath.org/sage.git u/ohanar/10.9-port
$ git checkout -b u/ohanar/10.9-port FETCH_HEAD
```
from within the repository.



---

archive/issue_comments_192054.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHow do I resolve this problem?\n\n```\nsh: line 1: 59700 Trace/BPT trap: 5       /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -sdk / -find ar 2> /dev/null\nar: error: unable to find utility \"ar\", not a developer tool or in PATH\nmake[3]: *** [libsymmetrica.a] Error 72\nmake[3]: Target `all' not remade because of errors.\nError building Symmetrica.\n```\nbecause I do see\n\n```\n-bash:/Applications/sage-5.13.beta1 $ /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -sdk / -find ar\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ar\n-bash:/Applications/sage-5.13.beta1 $ echo $PATH\n.:/usr/bin:/bin:/usr/sbin\n```",
    "created_at": "2013-11-19T13:47:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192054",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:9" align="right">comment:9</div>

How do I resolve this problem?

```
sh: line 1: 59700 Trace/BPT trap: 5       /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -sdk / -find ar 2> /dev/null
ar: error: unable to find utility "ar", not a developer tool or in PATH
make[3]: *** [libsymmetrica.a] Error 72
make[3]: Target `all' not remade because of errors.
Error building Symmetrica.
```
because I do see

```
-bash:/Applications/sage-5.13.beta1 $ /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -sdk / -find ar
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ar
-bash:/Applications/sage-5.13.beta1 $ echo $PATH
.:/usr/bin:/bin:/usr/sbin
```



---

archive/issue_comments_192055.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@zabrocki](#comment:9):\n> How do I resolve this problem?\n\nLooks like more or less the same problem as polybori. That said, symmetrica was updated in 5.13.beta2, so you may want to see if you still experience the issue with a more recent beta.",
    "created_at": "2013-11-19T17:37:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192055",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@zabrocki](#comment:9):
> How do I resolve this problem?

Looks like more or less the same problem as polybori. That said, symmetrica was updated in 5.13.beta2, so you may want to see if you still experience the issue with a more recent beta.



---

archive/issue_comments_192056.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI don't know how the new build system works, but if you modify a file like `build/pkgs/gcc/spkg-install`, for example, should you also modify `build/pkgs/gcc/package-version.txt` so that the new version gets built? I have a version of Sage/git from early October, and when I cloned this branch and ran `make`, gcc was not rebuilt \u2014 it didn't even try, the log file was not modified \u2014 while scipy, for example, just returned the message `Package scipy-0.12.0.p0 is already installed.`\n\nBuilding the whole thing from scratch worked well, though, and all tests passed.\n\nRegarding the patch to gcc/spkg-install, for consistency's sake among other things, would it be a good idea to check the OS X version number the same way it's done in prereqs? That is, <code>DARWIN_VERSION=\\`uname -r | cut '-d.' -f1\\`</code>?",
    "created_at": "2013-11-19T18:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192056",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

I don't know how the new build system works, but if you modify a file like `build/pkgs/gcc/spkg-install`, for example, should you also modify `build/pkgs/gcc/package-version.txt` so that the new version gets built? I have a version of Sage/git from early October, and when I cloned this branch and ran `make`, gcc was not rebuilt — it didn't even try, the log file was not modified — while scipy, for example, just returned the message `Package scipy-0.12.0.p0 is already installed.`

Building the whole thing from scratch worked well, though, and all tests passed.

Regarding the patch to gcc/spkg-install, for consistency's sake among other things, would it be a good idea to check the OS X version number the same way it's done in prereqs? That is, <code>DARWIN_VERSION=\`uname -r | cut '-d.' -f1\`</code>?



---

archive/issue_comments_192057.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThe directory name is `sage-5.13.beta1` is probably misleading since it is the name of the 'git' copy of sage.  I did a checkout of the branch and it stops at the end of the compile of symmetrica with a `make -k`.  If I just run `make` I don't get as far.",
    "created_at": "2013-11-19T18:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192057",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:12" align="right">comment:12</div>

The directory name is `sage-5.13.beta1` is probably misleading since it is the name of the 'git' copy of sage.  I did a checkout of the branch and it stops at the end of the compile of symmetrica with a `make -k`.  If I just run `make` I don't get as far.



---

archive/issue_comments_192058.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI agree that gcc should have a patch version bump, but I don't think that scipy should: scipy issue is purely a build-time issue, unlike gcc's.\n\nFor `gcc/spkg-install` I just tried to be consistent with what was already there.",
    "created_at": "2013-11-19T18:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192058",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:13" align="right">comment:13</div>

I agree that gcc should have a patch version bump, but I don't think that scipy should: scipy issue is purely a build-time issue, unlike gcc's.

For `gcc/spkg-install` I just tried to be consistent with what was already there.



---

archive/issue_comments_192059.json:
```json
{
    "body": "Changed commit from **[`3ad56a4`](https://github.com/sagemath/sagetrac-mirror/commit/3ad56a494d4f8085189695546d4ff7480155608a)** to **[`119372b`](https://github.com/sagemath/sagetrac-mirror/commit/119372bfd995f1d06aaf11e774456a8abb176cfe)**",
    "created_at": "2013-11-19T18:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192059",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ad56a4`](https://github.com/sagemath/sagetrac-mirror/commit/3ad56a494d4f8085189695546d4ff7480155608a)** to **[`119372b`](https://github.com/sagemath/sagetrac-mirror/commit/119372bfd995f1d06aaf11e774456a8abb176cfe)**



---

archive/issue_comments_192060.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[119372b](https://github.com/sagemath/sagetrac-mirror/commit/119372b)</code></td><td><code>gcc: version bump to force rebuild on OSX 10.9</code></td></tr></table>\n",
    "created_at": "2013-11-19T18:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192060",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[119372b](https://github.com/sagemath/sagetrac-mirror/commit/119372b)</code></td><td><code>gcc: version bump to force rebuild on OSX 10.9</code></td></tr></table>




---

archive/issue_events_217744.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-11-19T23:08:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217744"
}
```



---

archive/issue_comments_192061.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\njhpalmieri:\nthe change to gcc resolved the polybori and symmetrica issues on my second machine as well\n\nzabrocki:\ntry rebuilding with the latest commit\n\n\nI'm marking this as needs review, although if someone could test on OSX 10.4, that would be great.",
    "created_at": "2013-11-19T23:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192061",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:15" align="right">comment:15</div>

jhpalmieri:
the change to gcc resolved the polybori and symmetrica issues on my second machine as well

zabrocki:
try rebuilding with the latest commit


I'm marking this as needs review, although if someone could test on OSX 10.4, that would be great.



---

archive/issue_comments_192062.json:
```json
{
    "body": "Author: **R. Andrew Ohana**",
    "created_at": "2013-11-19T23:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192062",
    "user": "https://github.com/ohanar"
}
```

Author: **R. Andrew Ohana**



---

archive/issue_comments_192063.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nNo issues at all building on 10.9 for me -- all test passed.",
    "created_at": "2013-11-19T23:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192063",
    "user": "https://github.com/sagetrac-yomcat"
}
```

<div id="comment:16" align="right">comment:16</div>

No issues at all building on 10.9 for me -- all test passed.



---

archive/issue_comments_192064.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAndrew, you saved me again!  Brilliant!  It worked for me too.  Successful build and all tests pass.  I had only to `make all` because files compiled pre-fix were messing things up (or instead, I just untar'ed another copy and compiled that version).",
    "created_at": "2013-11-20T01:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192064",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:17" align="right">comment:17</div>

Andrew, you saved me again!  Brilliant!  It worked for me too.  Successful build and all tests pass.  I had only to `make all` because files compiled pre-fix were messing things up (or instead, I just untar'ed another copy and compiled that version).



---

archive/issue_comments_192065.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[9fb89a2](https://github.com/sagemath/sagetrac-mirror/commit/9fb89a2)</code></td><td><code>build/install: add comment explaining why we don't build sqlite on OSX</code></td></tr></table>\n",
    "created_at": "2013-11-21T03:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192065",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[9fb89a2](https://github.com/sagemath/sagetrac-mirror/commit/9fb89a2)</code></td><td><code>build/install: add comment explaining why we don't build sqlite on OSX</code></td></tr></table>




---

archive/issue_comments_192066.json:
```json
{
    "body": "Changed commit from **[`119372b`](https://github.com/sagemath/sagetrac-mirror/commit/119372bfd995f1d06aaf11e774456a8abb176cfe)** to **[`9fb89a2`](https://github.com/sagemath/sagetrac-mirror/commit/9fb89a2e18a84261b3bb61a0bd9dcc6f3cf25b18)**",
    "created_at": "2013-11-21T03:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192066",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`119372b`](https://github.com/sagemath/sagetrac-mirror/commit/119372bfd995f1d06aaf11e774456a8abb176cfe)** to **[`9fb89a2`](https://github.com/sagemath/sagetrac-mirror/commit/9fb89a2e18a84261b3bb61a0bd9dcc6f3cf25b18)**



---

archive/issue_comments_192067.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nRandom remark: I would have put the logic for installing or not sqlite3 in the spkg-install script of sqlite3,  just as we do for cephes for example.",
    "created_at": "2013-11-23T10:45:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192067",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:19" align="right">comment:19</div>

Random remark: I would have put the logic for installing or not sqlite3 in the spkg-install script of sqlite3,  just as we do for cephes for example.



---

archive/issue_comments_192068.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jpflori](#comment:19):\n> Random remark: I would have put the logic for installing or not sqlite3 in the spkg-install script of sqlite3,  just as we do for cephes for example.\n\nAtlas also. That makes sense to me.",
    "created_at": "2013-11-23T16:21:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192068",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jpflori](#comment:19):
> Random remark: I would have put the logic for installing or not sqlite3 in the spkg-install script of sqlite3,  just as we do for cephes for example.

Atlas also. That makes sense to me.



---

archive/issue_comments_192069.json:
```json
{
    "body": "Changed commit from **[`9fb89a2`](https://github.com/sagemath/sagetrac-mirror/commit/9fb89a2e18a84261b3bb61a0bd9dcc6f3cf25b18)** to **[`cfc31f3`](https://github.com/sagemath/sagetrac-mirror/commit/cfc31f333b25626941353545126dbc4c6dbb01f1)**",
    "created_at": "2013-11-24T02:49:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192069",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9fb89a2`](https://github.com/sagemath/sagetrac-mirror/commit/9fb89a2e18a84261b3bb61a0bd9dcc6f3cf25b18)** to **[`cfc31f3`](https://github.com/sagemath/sagetrac-mirror/commit/cfc31f333b25626941353545126dbc4c6dbb01f1)**



---

archive/issue_comments_192070.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[cfc31f3](https://github.com/sagemath/sagetrac-mirror/commit/cfc31f3)</code></td><td><code>sqlite: move platform disabling to spkg-install like atlas and cephes</code></td></tr></table>\n",
    "created_at": "2013-11-24T02:49:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192070",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[cfc31f3](https://github.com/sagemath/sagetrac-mirror/commit/cfc31f3)</code></td><td><code>sqlite: move platform disabling to spkg-install like atlas and cephes</code></td></tr></table>




---

archive/issue_comments_192071.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nNow you also need to change the instructions in `src/bin/sage` about running `sage -i sqlite3`: that will have no effect on OS X. Note also that sqlite3 appears twice, once in `usage` and once in `usage_advanced`. Maybe\n\n```diff\ndiff --git a/src/bin/sage b/src/bin/sage\nindex 7eca9b0..df51f76 100755\n--- a/src/bin/sage\n+++ b/src/bin/sage\n@@ -25,6 +25,7 @@ usage() {\n     echo \"  -python [...]       -- run the Python interpreter\"\n     echo \"  -R [...]            -- run Sage's R with given arguments\"\n     echo \"  -singular [...]     -- run Sage's singular with given arguments\"\n+    test -x \"$SAGE_LOCAL/bin/sqlite3\" || \\\n     echo \"  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments\"\n     echo \"  -root               -- print the Sage root directory\"\n     echo \"  --nodotsage         -- run Sage without using the user's .sage directory:\"\n@@ -102,9 +103,8 @@ usage_advanced() {\n     echo \"  -scons [...]        -- run Sage's scons\"\n     echo \"  -sh [...]           -- run \\$SHELL ($SHELL) with Sage environment variables\"\n     echo \"  -singular [...]     -- run Sage's singular with given arguments\"\n-    echo \"  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments\"\n     test -x \"$SAGE_LOCAL/bin/sqlite3\" || \\\n-    echo \"                         (not installed currently, run sage -i sqlite3)\"\n+    echo \"  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments\"\n     echo \"  -twistd [...]       -- run Twisted server\"\n \n     echo\n```\nOr you could do\n\n```diff\ndiff --git a/src/bin/sage b/src/bin/sage\nindex 7eca9b0..5be445b 100755\n--- a/src/bin/sage\n+++ b/src/bin/sage\n@@ -26,6 +26,8 @@ usage() {\n     echo \"  -R [...]            -- run Sage's R with given arguments\"\n     echo \"  -singular [...]     -- run Sage's singular with given arguments\"\n     echo \"  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments\"\n+    test -x \"$SAGE_LOCAL/bin/sqlite3\" || \\\n+    echo \"                         (NOTE: not installed on OS X)\"\n     echo \"  -root               -- print the Sage root directory\"\n     echo \"  --nodotsage         -- run Sage without using the user's .sage directory:\"\n     echo \"                         create and use a temporary .sage directory instead\"\n@@ -104,7 +106,7 @@ usage_advanced() {\n     echo \"  -singular [...]     -- run Sage's singular with given arguments\"\n     echo \"  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments\"\n     test -x \"$SAGE_LOCAL/bin/sqlite3\" || \\\n-    echo \"                         (not installed currently, run sage -i sqlite3)\"\n+    echo \"                         (NOTE: not installed on OS X)\"\n     echo \"  -twistd [...]       -- run Twisted server\"\n \n     echo\n```",
    "created_at": "2013-11-24T03:29:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192071",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">comment:22</div>

Now you also need to change the instructions in `src/bin/sage` about running `sage -i sqlite3`: that will have no effect on OS X. Note also that sqlite3 appears twice, once in `usage` and once in `usage_advanced`. Maybe

```diff
diff --git a/src/bin/sage b/src/bin/sage
index 7eca9b0..df51f76 100755
--- a/src/bin/sage
+++ b/src/bin/sage
@@ -25,6 +25,7 @@ usage() {
     echo "  -python [...]       -- run the Python interpreter"
     echo "  -R [...]            -- run Sage's R with given arguments"
     echo "  -singular [...]     -- run Sage's singular with given arguments"
+    test -x "$SAGE_LOCAL/bin/sqlite3" || \
     echo "  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments"
     echo "  -root               -- print the Sage root directory"
     echo "  --nodotsage         -- run Sage without using the user's .sage directory:"
@@ -102,9 +103,8 @@ usage_advanced() {
     echo "  -scons [...]        -- run Sage's scons"
     echo "  -sh [...]           -- run \$SHELL ($SHELL) with Sage environment variables"
     echo "  -singular [...]     -- run Sage's singular with given arguments"
-    echo "  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments"
     test -x "$SAGE_LOCAL/bin/sqlite3" || \
-    echo "                         (not installed currently, run sage -i sqlite3)"
+    echo "  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments"
     echo "  -twistd [...]       -- run Twisted server"
 
     echo
```
Or you could do

```diff
diff --git a/src/bin/sage b/src/bin/sage
index 7eca9b0..5be445b 100755
--- a/src/bin/sage
+++ b/src/bin/sage
@@ -26,6 +26,8 @@ usage() {
     echo "  -R [...]            -- run Sage's R with given arguments"
     echo "  -singular [...]     -- run Sage's singular with given arguments"
     echo "  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments"
+    test -x "$SAGE_LOCAL/bin/sqlite3" || \
+    echo "                         (NOTE: not installed on OS X)"
     echo "  -root               -- print the Sage root directory"
     echo "  --nodotsage         -- run Sage without using the user's .sage directory:"
     echo "                         create and use a temporary .sage directory instead"
@@ -104,7 +106,7 @@ usage_advanced() {
     echo "  -singular [...]     -- run Sage's singular with given arguments"
     echo "  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments"
     test -x "$SAGE_LOCAL/bin/sqlite3" || \
-    echo "                         (not installed currently, run sage -i sqlite3)"
+    echo "                         (NOTE: not installed on OS X)"
     echo "  -twistd [...]       -- run Twisted server"
 
     echo
```



---

archive/issue_comments_192072.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[3f36a9e](https://github.com/sagemath/sagetrac-mirror/commit/3f36a9e)</code></td><td><code>remove --sqlite3 option if sqlite is not installed</code></td></tr></table>\n",
    "created_at": "2013-11-24T05:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192072",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[3f36a9e](https://github.com/sagemath/sagetrac-mirror/commit/3f36a9e)</code></td><td><code>remove --sqlite3 option if sqlite is not installed</code></td></tr></table>




---

archive/issue_comments_192073.json:
```json
{
    "body": "Changed commit from **[`cfc31f3`](https://github.com/sagemath/sagetrac-mirror/commit/cfc31f333b25626941353545126dbc4c6dbb01f1)** to **[`3f36a9e`](https://github.com/sagemath/sagetrac-mirror/commit/3f36a9e459741b609d176251285f969485c03478)**",
    "created_at": "2013-11-24T05:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192073",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cfc31f3`](https://github.com/sagemath/sagetrac-mirror/commit/cfc31f333b25626941353545126dbc4c6dbb01f1)** to **[`3f36a9e`](https://github.com/sagemath/sagetrac-mirror/commit/3f36a9e459741b609d176251285f969485c03478)**



---

archive/issue_comments_192074.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWould it be a good idea on OS X to create a symlink at `local/bin/sqlite3` pointing to `/usr/bin/sqlite3` (or whatever the output of `command -v sqlite3` is)? Then `sage --sqlite3` would still work.",
    "created_at": "2013-11-26T19:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192074",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">comment:24</div>

Would it be a good idea on OS X to create a symlink at `local/bin/sqlite3` pointing to `/usr/bin/sqlite3` (or whatever the output of `command -v sqlite3` is)? Then `sage --sqlite3` would still work.



---

archive/issue_comments_192075.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@jhpalmieri](#comment:24):\n> Would it be a good idea on OS X to create a symlink at `local/bin/sqlite3` pointing to `/usr/bin/sqlite3` (or whatever the output of `command -v sqlite3` is)? Then `sage --sqlite3` would still work.\n\nSee trac #12627 which would fix this.",
    "created_at": "2013-11-26T19:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192075",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@jhpalmieri](#comment:24):
> Would it be a good idea on OS X to create a symlink at `local/bin/sqlite3` pointing to `/usr/bin/sqlite3` (or whatever the output of `command -v sqlite3` is)? Then `sage --sqlite3` would still work.

See trac #12627 which would fix this.



---

archive/issue_comments_192076.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAs I noted at #12627, that ticket is somewhat controversial, and I'm not sure it's a good idea to get it merged soon. Something much more targeted, like making a symlink for sqlite3 only on OS X, seems more palatable.",
    "created_at": "2013-11-26T19:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192076",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:26" align="right">comment:26</div>

As I noted at #12627, that ticket is somewhat controversial, and I'm not sure it's a good idea to get it merged soon. Something much more targeted, like making a symlink for sqlite3 only on OS X, seems more palatable.



---

archive/issue_comments_192077.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nREMARKS:\n\n* In build/pkgs/gcc/spkg-install and build/pkgs/sqlite/spkg-install \u00b6, change \"OSX 10.9\" to \"OS X 10.9\".   Also \"posed\" --> \"posted\".\n\n* If trac #12627 gets in (which it should if rebased), then this would be deleted:\n\n```\n if test -x \"$SAGE_LOCAL/bin/sqlite3\" && [ \"$1\" = '-sqlite3' -o \"$1\" = '--sqlite3' ]; then \n```\n\nI am for having #12627 merged, since I can easily imagine users, scripts, workflows, whatever that have \"sage --sqlite3\" in them, and would be broken by the above change.\n\nModulo testing (on 10.4, 10.5, 10.6, 10.7, 10.8, 10.9), and the above comment regarding #12627, I think this patch looks excellent.",
    "created_at": "2013-11-26T19:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192077",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:27" align="right">comment:27</div>

REMARKS:

* In build/pkgs/gcc/spkg-install and build/pkgs/sqlite/spkg-install ¶, change "OSX 10.9" to "OS X 10.9".   Also "posed" --> "posted".

* If trac #12627 gets in (which it should if rebased), then this would be deleted:

```
 if test -x "$SAGE_LOCAL/bin/sqlite3" && [ "$1" = '-sqlite3' -o "$1" = '--sqlite3' ]; then 
```

I am for having #12627 merged, since I can easily imagine users, scripts, workflows, whatever that have "sage --sqlite3" in them, and would be broken by the above change.

Modulo testing (on 10.4, 10.5, 10.6, 10.7, 10.8, 10.9), and the above comment regarding #12627, I think this patch looks excellent.



---

archive/issue_comments_192078.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@jhpalmieri](#comment:26):\n> As I noted at #12627, that ticket is somewhat controversial, and I'm not sure it's a good idea to get it merged soon. Something much more targeted, like making a symlink for sqlite3 only on OS X, seems more palatable.\n\nOK, good point -- symlinking temporarily seems reasonable, since fully supporting OS X 10.9 asap is important.",
    "created_at": "2013-11-26T19:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192078",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@jhpalmieri](#comment:26):
> As I noted at #12627, that ticket is somewhat controversial, and I'm not sure it's a good idea to get it merged soon. Something much more targeted, like making a symlink for sqlite3 only on OS X, seems more palatable.

OK, good point -- symlinking temporarily seems reasonable, since fully supporting OS X 10.9 asap is important.



---

archive/issue_comments_192079.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[2766ab3](https://github.com/sagemath/sagetrac-mirror/commit/2766ab3)</code></td><td><code>gcc: fix comment typos in install script</code></td></tr><tr><td><code>[a64c2d7](https://github.com/sagemath/sagetrac-mirror/commit/a64c2d7)</code></td><td><code>symlink system sqlite3 on OS X</code></td></tr></table>\n",
    "created_at": "2013-11-26T19:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192079",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[2766ab3](https://github.com/sagemath/sagetrac-mirror/commit/2766ab3)</code></td><td><code>gcc: fix comment typos in install script</code></td></tr><tr><td><code>[a64c2d7](https://github.com/sagemath/sagetrac-mirror/commit/a64c2d7)</code></td><td><code>symlink system sqlite3 on OS X</code></td></tr></table>




---

archive/issue_comments_192080.json:
```json
{
    "body": "Changed commit from **[`3f36a9e`](https://github.com/sagemath/sagetrac-mirror/commit/3f36a9e459741b609d176251285f969485c03478)** to **[`2766ab3`](https://github.com/sagemath/sagetrac-mirror/commit/2766ab35a1e88af4f36e46b2eb29eb9893707cb2)**",
    "created_at": "2013-11-26T19:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192080",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3f36a9e`](https://github.com/sagemath/sagetrac-mirror/commit/3f36a9e459741b609d176251285f969485c03478)** to **[`2766ab3`](https://github.com/sagemath/sagetrac-mirror/commit/2766ab35a1e88af4f36e46b2eb29eb9893707cb2)**



---

archive/issue_comments_192081.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[7547fce](https://github.com/sagemath/sagetrac-mirror/commit/7547fce)</code></td><td><code>remove a couple of now unused lines</code></td></tr></table>\n",
    "created_at": "2013-11-26T19:49:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192081",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[7547fce](https://github.com/sagemath/sagetrac-mirror/commit/7547fce)</code></td><td><code>remove a couple of now unused lines</code></td></tr></table>




---

archive/issue_comments_192082.json:
```json
{
    "body": "Changed commit from **[`2766ab3`](https://github.com/sagemath/sagetrac-mirror/commit/2766ab35a1e88af4f36e46b2eb29eb9893707cb2)** to **[`7547fce`](https://github.com/sagemath/sagetrac-mirror/commit/7547fceeb85afc0b6b932cb2487e61fb94fef405)**",
    "created_at": "2013-11-26T19:49:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192082",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2766ab3`](https://github.com/sagemath/sagetrac-mirror/commit/2766ab35a1e88af4f36e46b2eb29eb9893707cb2)** to **[`7547fce`](https://github.com/sagemath/sagetrac-mirror/commit/7547fceeb85afc0b6b932cb2487e61fb94fef405)**



---

archive/issue_comments_192083.json:
```json
{
    "body": "Attachment: **[trac15433.patch.gz](https://github.com/sagemath/sage/files/ticket15433/trac15433.patch.gz)**",
    "created_at": "2013-11-27T06:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192083",
    "user": "https://github.com/ohanar"
}
```

Attachment: **[trac15433.patch.gz](https://github.com/sagemath/sage/files/ticket15433/trac15433.patch.gz)**



---

archive/issue_comments_192084.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,10 @@\n 2. R depends on CoreData which uses non-standard sqlite3 modules (and this affects us since we set `*_LIBRARY_PATH` and install a custom copy of sqlite3)\n 3. g++ and 10.9's cdefs.h header are currently incompatible, leading to a broken libstc++\n 4. accelerate framework no longer pretends to be atlas for linking purposes\n-5. polybori\n+\n+---\n+\n+To Apply:\n+\n+1. Apply [attachment: trac15433.patch](https://github.com/sagemath/sage/files/ticket15433/trac15433.patch.gz) to the Sage Library repository\n+2. Put [gcc-4.7.3.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/gcc-4.7.3.p1.spkg), [sqlite-3.7.17.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/sqlite-3.7.17.p1.spkg), and [scipy-0.12.0.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/scipy-0.12.0.p1.spkg) into `spkg/standard`.\n``````\n",
    "created_at": "2013-11-27T06:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192084",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,10 @@
 2. R depends on CoreData which uses non-standard sqlite3 modules (and this affects us since we set `*_LIBRARY_PATH` and install a custom copy of sqlite3)
 3. g++ and 10.9's cdefs.h header are currently incompatible, leading to a broken libstc++
 4. accelerate framework no longer pretends to be atlas for linking purposes
-5. polybori
+
+---
+
+To Apply:
+
+1. Apply [attachment: trac15433.patch](https://github.com/sagemath/sage/files/ticket15433/trac15433.patch.gz) to the Sage Library repository
+2. Put [gcc-4.7.3.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/gcc-4.7.3.p1.spkg), [sqlite-3.7.17.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/sqlite-3.7.17.p1.spkg), and [scipy-0.12.0.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/scipy-0.12.0.p1.spkg) into `spkg/standard`.
``````




---

archive/issue_comments_192085.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOk, since this seems to be all but positively reviewed now, I've backported this to mercurial land.",
    "created_at": "2013-11-27T06:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192085",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:31" align="right">comment:31</div>

Ok, since this seems to be all but positively reviewed now, I've backported this to mercurial land.



---

archive/issue_comments_192086.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI've had a quick look at the git branch and it seems fine.\nCould you please attach the spkg diffs to ease review?",
    "created_at": "2013-11-27T09:59:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192086",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:32" align="right">comment:32</div>

I've had a quick look at the git branch and it seems fine.
Could you please attach the spkg diffs to ease review?



---

archive/issue_comments_192087.json:
```json
{
    "body": "Attachment: **[gcc-4.7.3.p1.diff.gz](https://github.com/sagemath/sage/files/ticket15433/gcc-4.7.3.p1.diff.gz)**\n\nfor review purposes",
    "created_at": "2013-11-27T19:51:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192087",
    "user": "https://github.com/ohanar"
}
```

Attachment: **[gcc-4.7.3.p1.diff.gz](https://github.com/sagemath/sage/files/ticket15433/gcc-4.7.3.p1.diff.gz)**

for review purposes



---

archive/issue_comments_192088.json:
```json
{
    "body": "for review purposes",
    "created_at": "2013-11-27T19:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192088",
    "user": "https://github.com/ohanar"
}
```

for review purposes



---

archive/issue_comments_192089.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nAttachment: **[scipy-0.12.0.p1.diff.gz](https://github.com/sagemath/sage/files/ticket15433/scipy-0.12.0.p1.diff.gz)**\n\nReplying to [@jpflori](#comment:32):\n> I've had a quick look at the git branch and it seems fine.\n> Could you please attach the spkg diffs to ease review?\n\nDone.",
    "created_at": "2013-11-27T19:53:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192089",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:33" align="right">comment:33</div>

Attachment: **[scipy-0.12.0.p1.diff.gz](https://github.com/sagemath/sage/files/ticket15433/scipy-0.12.0.p1.diff.gz)**

Replying to [@jpflori](#comment:32):
> I've had a quick look at the git branch and it seems fine.
> Could you please attach the spkg diffs to ease review?

Done.



---

archive/issue_events_217745.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-11-28T21:22:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217745"
}
```



---

archive/issue_events_217746.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-11-28T21:22:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217746"
}
```



---

archive/issue_comments_192090.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2013-11-28T21:22:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192090",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_comments_192091.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI've tested it on the buildbot and it doesn't impact other arches. Presumably it does the trick on OSX 10.9, so we should ship it asap.",
    "created_at": "2013-11-28T21:22:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192091",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">comment:34</div>

I've tested it on the buildbot and it doesn't impact other arches. Presumably it does the trick on OSX 10.9, so we should ship it asap.



---

archive/issue_comments_192092.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@vbraun](#comment:34):\n> Presumably it does the trick on OSX 10.9, so we should ship it asap.\n\nI can confirm that it does indeed do the trick on Mavericks.",
    "created_at": "2013-11-28T21:27:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192092",
    "user": "https://github.com/sagetrac-yomcat"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@vbraun](#comment:34):
> Presumably it does the trick on OSX 10.9, so we should ship it asap.

I can confirm that it does indeed do the trick on Mavericks.



---

archive/issue_events_217747.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-04T17:29:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217747"
}
```



---

archive/issue_events_217748.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-04T17:29:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217748"
}
```



---

archive/issue_comments_192093.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nWhen upgrading from older versions of Sage on OS X:\n\n```\nsage -t --long devel/sage/sage/tests/cmdline.py\n**********************************************************************\nFile \"devel/sage/sage/tests/cmdline.py\", line 595, in sage.tests.cmdline.test_executable\nFailed example:\n    out.startswith(\"3.\")\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"devel/sage/sage/tests/cmdline.py\", line 597, in sage.tests.cmdline.test_executable\nFailed example:\n    err\nExpected:\n    ''\nGot:\n    'dyld: Library not loaded: /Users/buildbot/build/sage/bsd-1/bsd_64_upgrade/sage-4.6.2/local/lib/libreadline.6.1.dylib\\n  Referenced from: /Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.13.rc0/local/bin/sqlite3\\n  Reason: image not found\\n'\n**********************************************************************\nFile \"devel/sage/sage/tests/cmdline.py\", line 599, in sage.tests.cmdline.test_executable\nFailed example:\n    ret\nExpected:\n    0\nGot:\n    -5\n**********************************************************************\n```",
    "created_at": "2013-12-04T17:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192093",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

When upgrading from older versions of Sage on OS X:

```
sage -t --long devel/sage/sage/tests/cmdline.py
**********************************************************************
File "devel/sage/sage/tests/cmdline.py", line 595, in sage.tests.cmdline.test_executable
Failed example:
    out.startswith("3.")
Expected:
    True
Got:
    False
**********************************************************************
File "devel/sage/sage/tests/cmdline.py", line 597, in sage.tests.cmdline.test_executable
Failed example:
    err
Expected:
    ''
Got:
    'dyld: Library not loaded: /Users/buildbot/build/sage/bsd-1/bsd_64_upgrade/sage-4.6.2/local/lib/libreadline.6.1.dylib\n  Referenced from: /Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.13.rc0/local/bin/sqlite3\n  Reason: image not found\n'
**********************************************************************
File "devel/sage/sage/tests/cmdline.py", line 599, in sage.tests.cmdline.test_executable
Failed example:
    ret
Expected:
    0
Got:
    -5
**********************************************************************
```



---

archive/issue_comments_192094.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nDoes the sqlite3 issue appear also on OS X < 10.9 systems? If not, then can we keep building sqlite3 on those systems and only skip it for OS X 10.9?",
    "created_at": "2013-12-04T17:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192094",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Does the sqlite3 issue appear also on OS X < 10.9 systems? If not, then can we keep building sqlite3 on those systems and only skip it for OS X 10.9?



---

archive/issue_events_217749.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-05T08:26:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217749"
}
```



---

archive/issue_events_217750.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-05T08:26:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217750"
}
```



---

archive/issue_comments_192095.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@jdemeyer](#comment:37):\n> Does the sqlite3 issue appear also on OS X < 10.9 systems? If not, then can we keep building sqlite3 on those systems and only skip it for OS X 10.9?\n\nI don't think so, although only doing it for >= 10.9 seems dangerous as I could easily see apple changing one of their libraries that r uses in a minor update.",
    "created_at": "2013-12-05T08:41:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192095",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@jdemeyer](#comment:37):
> Does the sqlite3 issue appear also on OS X < 10.9 systems? If not, then can we keep building sqlite3 on those systems and only skip it for OS X 10.9?

I don't think so, although only doing it for >= 10.9 seems dangerous as I could easily see apple changing one of their libraries that r uses in a minor update.



---

archive/issue_comments_192096.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nOr we could check whether `sqlite` already exists and is not a symbolic link:\n\n```\nif [ -x \"$SAGE_LOCAL/bin/sqlite3\" -a ! -h \"$SAGE_LOCAL/bin/sqlite3\" ]; then\n    # Install sqlite3 anyway\nfi\n```",
    "created_at": "2013-12-05T09:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192096",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

Or we could check whether `sqlite` already exists and is not a symbolic link:

```
if [ -x "$SAGE_LOCAL/bin/sqlite3" -a ! -h "$SAGE_LOCAL/bin/sqlite3" ]; then
    # Install sqlite3 anyway
fi
```



---

archive/issue_events_217751.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-06T04:14:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217751"
}
```



---

archive/issue_events_217752.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-06T04:14:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217752"
}
```



---

archive/issue_comments_192097.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nok, updated the sqlite spkg, it should now gracefully handle upgrading.",
    "created_at": "2013-12-06T04:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192097",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:41" align="right">comment:41</div>

ok, updated the sqlite spkg, it should now gracefully handle upgrading.



---

archive/issue_comments_192098.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nLooks good on first sight, I will test it on the buildbots and set positive_review if that works.",
    "created_at": "2013-12-06T10:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192098",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">comment:42</div>

Looks good on first sight, I will test it on the buildbots and set positive_review if that works.



---

archive/issue_events_217753.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-06T23:07:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217753"
}
```



---

archive/issue_events_217754.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-06T23:07:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217754"
}
```



---

archive/issue_comments_192099.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nOn OS X 10.4, this causes essentially every doctest involving databases to fail, for example\n\n```\nsage -t --long devel/sage/doc/en/tutorial/tour_advanced.rst\n**********************************************************************\nFile \"devel/sage/doc/en/tutorial/tour_advanced.rst\", line 251, in doc.en.tutorial.tour_advanced\nFailed example:\n    db.curves(37)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest doc.en.tutorial.tour_advanced[1]>\", line 1, in <module>\n        db.curves(Integer(37))\n      File \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/databases/cremona.py\", line 769, in curves\n        + 'curve=class||1 AND conductor=?',(int(N),)):\n    OperationalError: ambiguous column name: class\n**********************************************************************\n```",
    "created_at": "2013-12-06T23:07:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192099",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

On OS X 10.4, this causes essentially every doctest involving databases to fail, for example

```
sage -t --long devel/sage/doc/en/tutorial/tour_advanced.rst
**********************************************************************
File "devel/sage/doc/en/tutorial/tour_advanced.rst", line 251, in doc.en.tutorial.tour_advanced
Failed example:
    db.curves(37)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest doc.en.tutorial.tour_advanced[1]>", line 1, in <module>
        db.curves(Integer(37))
      File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.13.rc0/local/lib/python2.7/site-packages/sage/databases/cremona.py", line 769, in curves
        + 'curve=class||1 AND conductor=?',(int(N),)):
    OperationalError: ambiguous column name: class
**********************************************************************
```



---

archive/issue_comments_192100.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nSo maybe we *should* only use the system sqlite3 on OS X 10.9 and above?",
    "created_at": "2013-12-06T23:24:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192100",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:44" align="right">comment:44</div>

So maybe we *should* only use the system sqlite3 on OS X 10.9 and above?



---

archive/issue_events_217755.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-08T01:35:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217755"
}
```



---

archive/issue_events_217756.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-08T01:35:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217756"
}
```



---

archive/issue_comments_192101.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nOk, I've modified the spkg so it only uses the system sqlite on 10.9 and above",
    "created_at": "2013-12-08T01:35:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192101",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:45" align="right">comment:45</div>

Ok, I've modified the spkg so it only uses the system sqlite on 10.9 and above



---

archive/issue_events_217757.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-08T08:46:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217757"
}
```



---

archive/issue_events_217758.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-08T08:46:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217758"
}
```



---

archive/issue_comments_192102.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nYou probably didn't mean to remove\n\n```\n# Old OS X systems need -DSQLITE_WITHOUT_ZONEMALLOC\nif uname -sr |grep 'Darwin [0-8][.]' >/dev/null; then\n    export CPPFLAGS=\"$CPPFLAGS -DSQLITE_WITHOUT_ZONEMALLOC\"\nfi\n```",
    "created_at": "2013-12-08T08:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192102",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">comment:46</div>

You probably didn't mean to remove

```
# Old OS X systems need -DSQLITE_WITHOUT_ZONEMALLOC
if uname -sr |grep 'Darwin [0-8][.]' >/dev/null; then
    export CPPFLAGS="$CPPFLAGS -DSQLITE_WITHOUT_ZONEMALLOC"
fi
```



---

archive/issue_events_217759.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-09T10:02:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217759"
}
```



---

archive/issue_events_217760.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-09T10:02:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217760"
}
```



---

archive/issue_comments_192103.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,6 @@\n To Apply:\n \n 1. Apply [attachment: trac15433.patch](https://github.com/sagemath/sage/files/ticket15433/trac15433.patch.gz) to the Sage Library repository\n-2. Put [gcc-4.7.3.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/gcc-4.7.3.p1.spkg), [sqlite-3.7.17.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/sqlite-3.7.17.p1.spkg), and [scipy-0.12.0.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/scipy-0.12.0.p1.spkg) into `spkg/standard`.\n+2. [gcc-4.7.3.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/gcc-4.7.3.p1.spkg)\n+3. [sqlite-3.7.17.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sqlite-3.7.17.p1.spkg)\n+4. [scipy-0.12.0.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/scipy-0.12.0.p1.spkg)\n``````\n",
    "created_at": "2013-12-09T10:02:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192103",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,6 @@
 To Apply:
 
 1. Apply [attachment: trac15433.patch](https://github.com/sagemath/sage/files/ticket15433/trac15433.patch.gz) to the Sage Library repository
-2. Put [gcc-4.7.3.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/gcc-4.7.3.p1.spkg), [sqlite-3.7.17.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/sqlite-3.7.17.p1.spkg), and [scipy-0.12.0.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/scipy-0.12.0.p1.spkg) into `spkg/standard`.
+2. [gcc-4.7.3.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/gcc-4.7.3.p1.spkg)
+3. [sqlite-3.7.17.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sqlite-3.7.17.p1.spkg)
+4. [scipy-0.12.0.p1.spkg](http://boxen.math.washington.edu/home/ohanar/spkgs/scipy-0.12.0.p1.spkg)
``````




---

archive/issue_comments_192104.json:
```json
{
    "body": "Attachment: **[sqlite-3.7.17.p1.diff.gz](https://github.com/sagemath/sage/files/ticket15433/sqlite-3.7.17.p1.diff.gz)**",
    "created_at": "2013-12-09T10:02:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192104",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[sqlite-3.7.17.p1.diff.gz](https://github.com/sagemath/sage/files/ticket15433/sqlite-3.7.17.p1.diff.gz)**



---

archive/issue_comments_192105.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nSorry, busy week. Yes, this looks fine to me.",
    "created_at": "2013-12-09T23:31:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192105",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:48" align="right">comment:48</div>

Sorry, busy week. Yes, this looks fine to me.



---

archive/issue_events_217761.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-09T23:31:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217761"
}
```



---

archive/issue_events_217762.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-09T23:31:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217762"
}
```



---

archive/issue_events_217763.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-11T11:02:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217763"
}
```



---

archive/issue_events_217764.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-11T11:02:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15433#event-217764"
}
```



---

archive/issue_comments_192106.json:
```json
{
    "body": "Merged: **sage-5.13.rc0**",
    "created_at": "2013-12-11T11:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192106",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.13.rc0**



---

archive/issue_comments_192107.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\n* **Status** changed from *closed* to *needs_work*\n\nFor the record, according to [http://trac.macports.org/ticket/41033#comment:24](http://trac.macports.org/ticket/41033#comment:24), the `cdefs.h` bug has been fixed in Xcode 5.1.\n\nFurthermore, there's no check whether the file exists at all, and `set -e` is used...",
    "created_at": "2014-05-13T11:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192107",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:50" align="right">comment:50</div>

* **Status** changed from *closed* to *needs_work*

For the record, according to [http://trac.macports.org/ticket/41033#comment:24](http://trac.macports.org/ticket/41033#comment:24), the `cdefs.h` bug has been fixed in Xcode 5.1.

Furthermore, there's no check whether the file exists at all, and `set -e` is used...



---

archive/issue_comments_192108.json:
```json
{
    "body": "Changed commit from **[`7547fce`](https://github.com/sagemath/sagetrac-mirror/commit/7547fceeb85afc0b6b932cb2487e61fb94fef405)** to none",
    "created_at": "2014-05-13T11:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192108",
    "user": "https://github.com/nexttime"
}
```

Changed commit from **[`7547fce`](https://github.com/sagemath/sagetrac-mirror/commit/7547fceeb85afc0b6b932cb2487e61fb94fef405)** to none



---

archive/issue_comments_192109.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\ncdefs.h should be part of the commandline tools. The only bug is that we don't diagnose the absence of the command line tools in a better way. Also, this ticket is closed. Open a new one.",
    "created_at": "2014-05-13T12:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192109",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:51" align="right">comment:51</div>

cdefs.h should be part of the commandline tools. The only bug is that we don't diagnose the absence of the command line tools in a better way. Also, this ticket is closed. Open a new one.



---

archive/issue_comments_192110.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@vbraun](#comment:51):\n> cdefs.h should be part of the commandline tools. The only bug is that we don't diagnose the absence of the command line tools in a better way.\n\nYeah, and it probably should be checked whether the fix is still necessary.\n\n> Also, this ticket is closed.\n\nReally?\n\n> Open a new one. \n\nSelber.",
    "created_at": "2014-05-13T12:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192110",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@vbraun](#comment:51):
> cdefs.h should be part of the commandline tools. The only bug is that we don't diagnose the absence of the command line tools in a better way.

Yeah, and it probably should be checked whether the fix is still necessary.

> Also, this ticket is closed.

Really?

> Open a new one. 

Selber.



---

archive/issue_comments_192111.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nP.S.:  The top-level `configure` should check for the presence of Xcode's command line tools on Darwin, shouldn't it?",
    "created_at": "2014-05-13T12:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15433#issuecomment-192111",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:53" align="right">comment:53</div>

P.S.:  The top-level `configure` should check for the presence of Xcode's command line tools on Darwin, shouldn't it?
