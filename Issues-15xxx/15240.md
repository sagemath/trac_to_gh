# Issue 15240: Switch lattice polytopes to point collections

archive/issues_015003.json:
```json
{
    "body": "The goals of this ticket are:\n* make the code of `LatticePolytope` less interdependent for easier maintenance and backend switch;\n* use `PointCollection` container internally to unify it with other classes for toric geometry (`Cone` and `Fan`);\n* deprecate current methods returning points as matrices so that their output can be changed in the future.\n\nOne of the easiest to discover change is the deprecation of the polytope-from-matrix constructor:\n\n```\nsage: LatticePolytope(identity_matrix(3))\n/home/novoselt/sage.git/src/bin/sage-ipython:1: DeprecationWarning: constructing lattice polytopes from matrices is deprecated!\nSee http://trac.sagemath.org/15240 for details.\n  #!/usr/bin/env python\n2-d lattice polytope in 3-d lattice M\n```\nTo get the same result without the deprecation warning one has to do\n\n```\nsage: LatticePolytope(identity_matrix(3).columns())\n```\n\nIn most cases users had to pack points into a column matrix and then\ncall the lattice polytope constructor. Now they can just omit the packing step.\n\nNote that matrices will eventually be accepted again as valid input\nsince they are \"iterables of iterables\", but **rows** of a matrix will\nbe viewed as points, not **columns**.\n\n\nCC:  @vbraun\n\nKeywords: toric sd53\n\nReviewer: Volker Braun\n\nAuthor: Andrey Novoseltsev\n\nBranch: e5c95061922498ae02ac202e70dda4c82bb8dabe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15240\n\n",
    "closed_at": "2014-04-13T19:33:34Z",
    "created_at": "2013-09-30T08:40:20Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Switch lattice polytopes to point collections",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15240",
    "user": "https://github.com/novoselt"
}
```
The goals of this ticket are:
* make the code of `LatticePolytope` less interdependent for easier maintenance and backend switch;
* use `PointCollection` container internally to unify it with other classes for toric geometry (`Cone` and `Fan`);
* deprecate current methods returning points as matrices so that their output can be changed in the future.

One of the easiest to discover change is the deprecation of the polytope-from-matrix constructor:

```
sage: LatticePolytope(identity_matrix(3))
/home/novoselt/sage.git/src/bin/sage-ipython:1: DeprecationWarning: constructing lattice polytopes from matrices is deprecated!
See http://trac.sagemath.org/15240 for details.
  #!/usr/bin/env python
2-d lattice polytope in 3-d lattice M
```
To get the same result without the deprecation warning one has to do

```
sage: LatticePolytope(identity_matrix(3).columns())
```

In most cases users had to pack points into a column matrix and then
call the lattice polytope constructor. Now they can just omit the packing step.

Note that matrices will eventually be accepted again as valid input
since they are "iterables of iterables", but **rows** of a matrix will
be viewed as points, not **columns**.


CC:  @vbraun

Keywords: toric sd53

Reviewer: Volker Braun

Author: Andrey Novoseltsev

Branch: e5c95061922498ae02ac202e70dda4c82bb8dabe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15240





---

archive/issue_comments_241038.json:
```json
{
    "body": "Changing branch from \"/u/novoselt/lp2pc\" to \"u/novoselt/lp2pc\"",
    "created_at": "2013-09-30T08:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241038",
    "user": "https://github.com/novoselt"
}
```

Changing branch from "/u/novoselt/lp2pc" to "u/novoselt/lp2pc"



---

archive/issue_comments_241039.json:
```json
{
    "body": "Changing commit from \"\" to \"dbf840e69f45bfa15cec6ceb774f91dccb5a5d16\"",
    "created_at": "2013-09-30T10:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241039",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "dbf840e69f45bfa15cec6ceb774f91dccb5a5d16"



---

archive/issue_comments_241040.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-09-30T10:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241040",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241041.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-10-02T12:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241041",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241042.json:
```json
{
    "body": "Changing commit from \"dbf840e69f45bfa15cec6ceb774f91dccb5a5d16\" to \"00a1a86f935993a6d3891a570cb16dc53d57cc8f\"",
    "created_at": "2013-10-02T12:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241042",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dbf840e69f45bfa15cec6ceb774f91dccb5a5d16" to "00a1a86f935993a6d3891a570cb16dc53d57cc8f"



---

archive/issue_comments_241043.json:
```json
{
    "body": "<a id='comment:4'></a>Hey Volker - I think it would be nice to deprecate in this ticket everything that we don't want to keep except for the way how faces are handled (which I'd rather do in a follow up ticket). So far I've deprecated constructing polytopes from matrices, perhaps constructing them from files should be deprecated as well and handled by separate functions?\n\nWhat about \"desc\"? I'd like to print polytopes similar to cones/fans: \"3-d lattice polytope in 4-d lattice N\", perhaps with \"lattice\" replaced by \"reflexive\" automatically and with the index for 2- and 3-d cases. Should then \"desc\" be gone and those who really want can use Sage standard \"rename\"?\n\nAlso, I am not sure what the output of \"normal_form\" should be - keeping it as a matrix does not seem a good choice. Maybe the corresponding polytope in `ToricLattice(dim).dual()`? Then polytopes from built-in lists will return themselves and be equal to their normal form.\n\n`projective_space` and `octahedron(2)` better disappear as well, not sure how did I come up with \"octa\" for vertices other than 8!",
    "created_at": "2013-10-07T04:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241043",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>Hey Volker - I think it would be nice to deprecate in this ticket everything that we don't want to keep except for the way how faces are handled (which I'd rather do in a follow up ticket). So far I've deprecated constructing polytopes from matrices, perhaps constructing them from files should be deprecated as well and handled by separate functions?

What about "desc"? I'd like to print polytopes similar to cones/fans: "3-d lattice polytope in 4-d lattice N", perhaps with "lattice" replaced by "reflexive" automatically and with the index for 2- and 3-d cases. Should then "desc" be gone and those who really want can use Sage standard "rename"?

Also, I am not sure what the output of "normal_form" should be - keeping it as a matrix does not seem a good choice. Maybe the corresponding polytope in `ToricLattice(dim).dual()`? Then polytopes from built-in lists will return themselves and be equal to their normal form.

`projective_space` and `octahedron(2)` better disappear as well, not sure how did I come up with "octa" for vertices other than 8!



---

archive/issue_comments_241044.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-10-07T05:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241045.json:
```json
{
    "body": "Changing commit from \"00a1a86f935993a6d3891a570cb16dc53d57cc8f\" to \"9e2512e40f2f3428b63e7dc46170a207bcf36ccc\"",
    "created_at": "2013-10-07T05:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241045",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "00a1a86f935993a6d3891a570cb16dc53d57cc8f" to "9e2512e40f2f3428b63e7dc46170a207bcf36ccc"



---

archive/issue_comments_241046.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:4 novoselt]:\n> Hey Volker - I think it would be nice to deprecate in this ticket everything that we don't want to keep except for the way how faces are handled (which I'd rather do in a follow up ticket).\n\n\nSounds good!\n\n> What about \"desc\"? I'd like to print polytopes similar to cones/fans: \"3-d lattice polytope in 4-d lattice N\", perhaps with \"lattice\" replaced by \"reflexive\" automatically and with the index for 2- and 3-d cases. Should then \"desc\" be gone and those who really want can use Sage standard \"rename\"?\n\n\n+1\n\n> Also, I am not sure what the output of \"normal_form\" should be - keeping it as a matrix does not seem a good choice.\n\n\nA matrix isn't totally strange, after all the normal form is a version of hermite normal form together with permutation of vertices.\n\nIf you want to return it as another `LatticePolytope` then the constructor should keep the vertices in the specified order. The ambient lattice should be the same as the lattice of the original polytope, imho.\n\n> `projective_space` and `octahedron(2)` better disappear as well, not sure how did I come up with \"octa\" for vertices other than 8!\n\n\nShould probably be `cross_polytope` ;-)",
    "created_at": "2013-10-07T10:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241046",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>Replying to [comment:4 novoselt]:
> Hey Volker - I think it would be nice to deprecate in this ticket everything that we don't want to keep except for the way how faces are handled (which I'd rather do in a follow up ticket).


Sounds good!

> What about "desc"? I'd like to print polytopes similar to cones/fans: "3-d lattice polytope in 4-d lattice N", perhaps with "lattice" replaced by "reflexive" automatically and with the index for 2- and 3-d cases. Should then "desc" be gone and those who really want can use Sage standard "rename"?


+1

> Also, I am not sure what the output of "normal_form" should be - keeping it as a matrix does not seem a good choice.


A matrix isn't totally strange, after all the normal form is a version of hermite normal form together with permutation of vertices.

If you want to return it as another `LatticePolytope` then the constructor should keep the vertices in the specified order. The ambient lattice should be the same as the lattice of the original polytope, imho.

> `projective_space` and `octahedron(2)` better disappear as well, not sure how did I come up with "octa" for vertices other than 8!


Should probably be `cross_polytope` ;-)



---

archive/issue_comments_241047.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 vbraun]:\n> Replying to [comment:4 novoselt]:\n> > Also, I am not sure what the output of \"normal_form\" should be - keeping it as a matrix does not seem a good choice.\n\n> \n> A matrix isn't totally strange, after all the normal form is a version of hermite normal form together with permutation of vertices.\n> \n> If you want to return it as another `LatticePolytope` then the constructor should keep the vertices in the specified order. The ambient lattice should be the same as the lattice of the original polytope, imho.\n\n\nI always want to preserve order, especially when the input consists of vertices rather than spanning points ;-) The issue with the same lattice as the original one is that normal forms of equivalent polytopes in different lattices will compare as different, which seems a bit counterintuitive with respect to index, i.e. with my default lattice choice we would have for any 2- or 3-d reflexive polytope\n\n```\nsage: p.normal_form() == ReflexivePolytope(p.dim(), p.index())\nTrue\n```\nOn the other hand starting with a polytope in N and getting as its normal form something in M isn't great either... So maybe a matrix is the way to go. Perhaps with vertices as rows rather than columns?\n\nSpeaking of `index` - are you OK with the name or something like `db_index` would be better? I definitely find it very useful, but the meaning of `index` for morphisms and cones is completely different and there are \"more mathematical\" indices associated to polytopes, like Gorenstein one.",
    "created_at": "2013-10-07T14:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241047",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>Replying to [comment:6 vbraun]:
> Replying to [comment:4 novoselt]:
> > Also, I am not sure what the output of "normal_form" should be - keeping it as a matrix does not seem a good choice.

> 
> A matrix isn't totally strange, after all the normal form is a version of hermite normal form together with permutation of vertices.
> 
> If you want to return it as another `LatticePolytope` then the constructor should keep the vertices in the specified order. The ambient lattice should be the same as the lattice of the original polytope, imho.


I always want to preserve order, especially when the input consists of vertices rather than spanning points ;-) The issue with the same lattice as the original one is that normal forms of equivalent polytopes in different lattices will compare as different, which seems a bit counterintuitive with respect to index, i.e. with my default lattice choice we would have for any 2- or 3-d reflexive polytope

```
sage: p.normal_form() == ReflexivePolytope(p.dim(), p.index())
True
```
On the other hand starting with a polytope in N and getting as its normal form something in M isn't great either... So maybe a matrix is the way to go. Perhaps with vertices as rows rather than columns?

Speaking of `index` - are you OK with the name or something like `db_index` would be better? I definitely find it very useful, but the meaning of `index` for morphisms and cones is completely different and there are "more mathematical" indices associated to polytopes, like Gorenstein one.



---

archive/issue_comments_241048.json:
```json
{
    "body": "<a id='comment:8'></a>Having normal forms compare different if they live in different lattices would be fine with me, for the record.\n\nAs for the index, how about `.label()` or `.id()`? It could return a pair of (dim, index) that would be valid input for ReflexivePolytope",
    "created_at": "2013-10-07T14:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241048",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>Having normal forms compare different if they live in different lattices would be fine with me, for the record.

As for the index, how about `.label()` or `.id()`? It could return a pair of (dim, index) that would be valid input for ReflexivePolytope



---

archive/issue_events_044089.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2013-12-17T18:39:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15240#event-44089"
}
```



---

archive/issue_events_044090.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15240#event-44090"
}
```



---

archive/issue_events_044091.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15240#event-44091"
}
```



---

archive/issue_comments_241049.json:
```json
{
    "body": "Changing commit from \"9e2512e40f2f3428b63e7dc46170a207bcf36ccc\" to \"75e66b5a9e1cfe50b6d7b7f1ea1e7c339fb85d95\"",
    "created_at": "2014-03-26T23:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241049",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9e2512e40f2f3428b63e7dc46170a207bcf36ccc" to "75e66b5a9e1cfe50b6d7b7f1ea1e7c339fb85d95"



---

archive/issue_comments_241050.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-26T23:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241050",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241051.json:
```json
{
    "body": "Changing commit from \"75e66b5a9e1cfe50b6d7b7f1ea1e7c339fb85d95\" to \"df1722a8fb4166be0bcc5401995094a6a70a4d20\"",
    "created_at": "2014-03-27T00:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241051",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "75e66b5a9e1cfe50b6d7b7f1ea1e7c339fb85d95" to "df1722a8fb4166be0bcc5401995094a6a70a4d20"



---

archive/issue_comments_241052.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-27T00:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241052",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241053.json:
```json
{
    "body": "Changing commit from \"df1722a8fb4166be0bcc5401995094a6a70a4d20\" to \"9658e0c79e2c929a63bfe6621adddb0267c50e87\"",
    "created_at": "2014-03-28T00:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "df1722a8fb4166be0bcc5401995094a6a70a4d20" to "9658e0c79e2c929a63bfe6621adddb0267c50e87"



---

archive/issue_comments_241054.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-28T00:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241055.json:
```json
{
    "body": "<a id='comment:14'></a>Picking up the previous discussion, I think using `PointCollection` for `normal_form` is a good choice with the lattice being the same as the lattice of the polytope. Then for polytopes in normal form `p.vertices() == p.normal_form()` without any extra remarks. The index for 2 and 3 dimensions will mean matching these normal forms but ignoring lattices.",
    "created_at": "2014-03-28T20:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241055",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:14'></a>Picking up the previous discussion, I think using `PointCollection` for `normal_form` is a good choice with the lattice being the same as the lattice of the polytope. Then for polytopes in normal form `p.vertices() == p.normal_form()` without any extra remarks. The index for 2 and 3 dimensions will mean matching these normal forms but ignoring lattices.



---

archive/issue_comments_241056.json:
```json
{
    "body": "Changing commit from \"9658e0c79e2c929a63bfe6621adddb0267c50e87\" to \"31308ea374726a3e98c39164f58dbcb53089ef79\"",
    "created_at": "2014-03-28T22:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241056",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9658e0c79e2c929a63bfe6621adddb0267c50e87" to "31308ea374726a3e98c39164f58dbcb53089ef79"



---

archive/issue_comments_241057.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-28T22:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241057",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241058.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-07T21:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241058",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241059.json:
```json
{
    "body": "Changing commit from \"31308ea374726a3e98c39164f58dbcb53089ef79\" to \"2080f3cf0365f4b568ce1129f3d0dc448fe80f11\"",
    "created_at": "2014-04-07T21:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "31308ea374726a3e98c39164f58dbcb53089ef79" to "2080f3cf0365f4b568ce1129f3d0dc448fe80f11"



---

archive/issue_comments_241060.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-10T00:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241060",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241061.json:
```json
{
    "body": "Changing commit from \"2080f3cf0365f4b568ce1129f3d0dc448fe80f11\" to \"b06d099d99eb197144c97e5d0c4abd08aee030c0\"",
    "created_at": "2014-04-10T00:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241061",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2080f3cf0365f4b568ce1129f3d0dc448fe80f11" to "b06d099d99eb197144c97e5d0c4abd08aee030c0"



---

archive/issue_comments_241062.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-11T19:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241062",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241063.json:
```json
{
    "body": "Changing commit from \"b06d099d99eb197144c97e5d0c4abd08aee030c0\" to \"9cbcfc4d84c16f28f4b953e1b5e1a53ff5420a80\"",
    "created_at": "2014-04-11T19:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241063",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b06d099d99eb197144c97e5d0c4abd08aee030c0" to "9cbcfc4d84c16f28f4b953e1b5e1a53ff5420a80"



---

archive/issue_comments_241064.json:
```json
{
    "body": "<a id='comment:19'></a>OK, I better stop given that a few thousands lines are affected already. Except for `lattice_polytope.py` they are mostly doctest fixes due to deprecated `octahedron` and changed representation.\n\nThe main thing that is left is fix the mess with polytope faces, but that definitely should be a separate ticket.",
    "created_at": "2014-04-11T19:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241064",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:19'></a>OK, I better stop given that a few thousands lines are affected already. Except for `lattice_polytope.py` they are mostly doctest fixes due to deprecated `octahedron` and changed representation.

The main thing that is left is fix the mess with polytope faces, but that definitely should be a separate ticket.



---

archive/issue_comments_241065.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-11T19:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241065",
    "user": "https://github.com/novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_241066.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2014-04-11T19:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241066",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_241067.json:
```json
{
    "body": "<a id='comment:21'></a>Conflicts with the already-merged #15990, either resolve now or with the next beta",
    "created_at": "2014-04-11T19:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241067",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>Conflicts with the already-merged #15990, either resolve now or with the next beta



---

archive/issue_comments_241068.json:
```json
{
    "body": "Changing commit from \"9cbcfc4d84c16f28f4b953e1b5e1a53ff5420a80\" to \"46ce7c78478e6ca449a6c3a5f045b598c47946c3\"",
    "created_at": "2014-04-11T20:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241068",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9cbcfc4d84c16f28f4b953e1b5e1a53ff5420a80" to "46ce7c78478e6ca449a6c3a5f045b598c47946c3"



---

archive/issue_comments_241069.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-04-11T20:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241069",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_241070.json:
```json
{
    "body": "<a id='comment:23'></a>OK, I've done \n\n```\ngit merge 136948a88bbf731a916184b91adf52fb93daa0d4\n```\nwhich is the commit listed as \"branch\" on #15990 and then resolved the conflict. Was it the way to go?",
    "created_at": "2014-04-11T20:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241070",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:23'></a>OK, I've done 

```
git merge 136948a88bbf731a916184b91adf52fb93daa0d4
```
which is the commit listed as "branch" on #15990 and then resolved the conflict. Was it the way to go?



---

archive/issue_comments_241071.json:
```json
{
    "body": "<a id='comment:24'></a>When I click on commits on trac, then my two merges with betas are shown as single commits, while this resent change shows also other stuff - what is the difference between merging \"develop\" and other commits into my branch?",
    "created_at": "2014-04-11T20:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241071",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:24'></a>When I click on commits on trac, then my two merges with betas are shown as single commits, while this resent change shows also other stuff - what is the difference between merging "develop" and other commits into my branch?



---

archive/issue_comments_241072.json:
```json
{
    "body": "<a id='comment:25'></a>The betas that you merged are (by definition) already released, so in the trac view they (that is, the second parent of the merge) is excluded. But the ticket that you merged in is not yet released in a beta, so its entire history is shown as well. When I release the next beta containing #15990 then it will be removed from the trac view.",
    "created_at": "2014-04-11T21:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241072",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>The betas that you merged are (by definition) already released, so in the trac view they (that is, the second parent of the merge) is excluded. But the ticket that you merged in is not yet released in a beta, so its entire history is shown as well. When I release the next beta containing #15990 then it will be removed from the trac view.



---

archive/issue_comments_241073.json:
```json
{
    "body": "<a id='comment:26'></a>\n```\n  File \"/home/buildbot/build/sage/eno-1/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/lattice_polytope.py\", line 1058\n    result = stdout.read()\n         ^\nSyntaxError: invalid syntax\n```",
    "created_at": "2014-04-11T22:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241073",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>
```
  File "/home/buildbot/build/sage/eno-1/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/lattice_polytope.py", line 1058
    result = stdout.read()
         ^
SyntaxError: invalid syntax
```



---

archive/issue_comments_241074.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-11T23:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241074",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241075.json:
```json
{
    "body": "Changing commit from \"46ce7c78478e6ca449a6c3a5f045b598c47946c3\" to \"e5c95061922498ae02ac202e70dda4c82bb8dabe\"",
    "created_at": "2014-04-11T23:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241075",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "46ce7c78478e6ca449a6c3a5f045b598c47946c3" to "e5c95061922498ae02ac202e70dda4c82bb8dabe"



---

archive/issue_events_044092.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-13T19:33:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15240#event-44092"
}
```



---

archive/issue_comments_241076.json:
```json
{
    "body": "Changing branch from \"u/novoselt/lp2pc\" to \"e5c95061922498ae02ac202e70dda4c82bb8dabe\"",
    "created_at": "2014-04-13T19:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241076",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/novoselt/lp2pc" to "e5c95061922498ae02ac202e70dda4c82bb8dabe"



---

archive/issue_comments_241077.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-13T19:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241077",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_241078.json:
```json
{
    "body": "Changing commit from \"e5c95061922498ae02ac202e70dda4c82bb8dabe\" to \"\"",
    "created_at": "2014-04-14T05:51:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241078",
    "user": "https://github.com/novoselt"
}
```

Changing commit from "e5c95061922498ae02ac202e70dda4c82bb8dabe" to ""



---

archive/issue_comments_241079.json:
```json
{
    "body": "<a id='comment:29'></a>Wow, looks like tachyons are real, thanks Volker!",
    "created_at": "2014-04-14T05:51:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241079",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:29'></a>Wow, looks like tachyons are real, thanks Volker!



---

archive/issue_comments_241080.json:
```json
{
    "body": "<a id='comment:30'></a>Hi!\n\nDo you mind editing the ticket description so that users can easily find what's the current alternative to constructing lattice polytopes from a matrix?\n\nThanks!\n                                   Nicolas",
    "created_at": "2014-04-25T14:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241080",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:30'></a>Hi!

Do you mind editing the ticket description so that users can easily find what's the current alternative to constructing lattice polytopes from a matrix?

Thanks!
                                   Nicolas



---

archive/issue_comments_241081.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,22 @@\n * make the code of `LatticePolytope` less interdependent for easier maintenance and backend switch;\n * use `PointCollection` container internally to unify it with other classes for toric geometry (`Cone` and `Fan`);\n * deprecate current methods returning points as matrices so that their output can be changed in the future.\n+\n+One of the easiest to discover changes is deprecation of polytope-from-matrix constructor:\n+\n+```\n+sage: LatticePolytope(identity_matrix(3))\n+/home/novoselt/sage.git/src/bin/sage-ipython:1: DeprecationWarning: constructing lattice polytopes from matrices is deprecated!\n+See http://trac.sagemath.org/15240 for details.\n+  #!/usr/bin/env python\n+2-d lattice polytope in 3-d lattice M\n+```\n+to get the same result without the deprecation warning one has to do\n+\n+```\n+sage: LatticePolytope(identity_matrix(3).columns())\n+```\n+although it in most cases users had to pack points into a column matrix and then call lattice polytope constructor. Now they can just omit the packing step. Note that matrices will eventually be accepted again as valid input since they are \"iterables of iterables\", but **rows** of a matrix will be viewed as points, not **columns**.\n \n Author: Andrey Novoseltsev\n \n``````\n",
    "created_at": "2014-04-25T16:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241081",
    "user": "https://github.com/novoselt"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,22 @@
 * make the code of `LatticePolytope` less interdependent for easier maintenance and backend switch;
 * use `PointCollection` container internally to unify it with other classes for toric geometry (`Cone` and `Fan`);
 * deprecate current methods returning points as matrices so that their output can be changed in the future.
+
+One of the easiest to discover changes is deprecation of polytope-from-matrix constructor:
+
+```
+sage: LatticePolytope(identity_matrix(3))
+/home/novoselt/sage.git/src/bin/sage-ipython:1: DeprecationWarning: constructing lattice polytopes from matrices is deprecated!
+See http://trac.sagemath.org/15240 for details.
+  #!/usr/bin/env python
+2-d lattice polytope in 3-d lattice M
+```
+to get the same result without the deprecation warning one has to do
+
+```
+sage: LatticePolytope(identity_matrix(3).columns())
+```
+although it in most cases users had to pack points into a column matrix and then call lattice polytope constructor. Now they can just omit the packing step. Note that matrices will eventually be accepted again as valid input since they are "iterables of iterables", but **rows** of a matrix will be viewed as points, not **columns**.
 
 Author: Andrey Novoseltsev
 
``````




---

archive/issue_comments_241082.json:
```json
{
    "body": "<a id='comment:31'></a>Done. Any ideas why do I have\n\n```\n  #!/usr/bin/env python\n```\nin the end of the warning?..",
    "created_at": "2014-04-25T16:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241082",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:31'></a>Done. Any ideas why do I have

```
  #!/usr/bin/env python
```
in the end of the warning?..



---

archive/issue_comments_241083.json:
```json
{
    "body": "<a id='comment:32'></a>Thanks!\n\nNo clue about the warning.",
    "created_at": "2014-04-25T17:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241083",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:32'></a>Thanks!

No clue about the warning.



---

archive/issue_comments_241084.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,29 @@\n+The goals of this ticket are:\n+* make the code of `LatticePolytope` less interdependent for easier maintenance and backend switch;\n+* use `PointCollection` container internally to unify it with other classes for toric geometry (`Cone` and `Fan`);\n+* deprecate current methods returning points as matrices so that their output can be changed in the future.\n+\n+One of the easiest to discover change is the deprecation of the polytope-from-matrix constructor:\n+\n+```\n+sage: LatticePolytope(identity_matrix(3))\n+/home/novoselt/sage.git/src/bin/sage-ipython:1: DeprecationWarning: constructing lattice polytopes from matrices is deprecated!\n+See http://trac.sagemath.org/15240 for details.\n+  #!/usr/bin/env python\n+2-d lattice polytope in 3-d lattice M\n+```\n+To get the same result without the deprecation warning one has to do\n+\n+```\n+sage: LatticePolytope(identity_matrix(3).columns())\n+```\n+\n+In most cases users had to pack points into a column matrix and then\n+call the lattice polytope constructor. Now they can just omit the packing step.\n+\n+Note that matrices will eventually be accepted again as valid input\n+since they are \"iterables of iterables\", but **rows** of a matrix will\n+be viewed as points, not **columns**.\n \n \n Author: Andrey Novoseltsev\n``````\n",
    "created_at": "2014-04-25T17:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15240",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15240#issuecomment-241084",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,29 @@
+The goals of this ticket are:
+* make the code of `LatticePolytope` less interdependent for easier maintenance and backend switch;
+* use `PointCollection` container internally to unify it with other classes for toric geometry (`Cone` and `Fan`);
+* deprecate current methods returning points as matrices so that their output can be changed in the future.
+
+One of the easiest to discover change is the deprecation of the polytope-from-matrix constructor:
+
+```
+sage: LatticePolytope(identity_matrix(3))
+/home/novoselt/sage.git/src/bin/sage-ipython:1: DeprecationWarning: constructing lattice polytopes from matrices is deprecated!
+See http://trac.sagemath.org/15240 for details.
+  #!/usr/bin/env python
+2-d lattice polytope in 3-d lattice M
+```
+To get the same result without the deprecation warning one has to do
+
+```
+sage: LatticePolytope(identity_matrix(3).columns())
+```
+
+In most cases users had to pack points into a column matrix and then
+call the lattice polytope constructor. Now they can just omit the packing step.
+
+Note that matrices will eventually be accepted again as valid input
+since they are "iterables of iterables", but **rows** of a matrix will
+be viewed as points, not **columns**.
 
 
 Author: Andrey Novoseltsev
``````

