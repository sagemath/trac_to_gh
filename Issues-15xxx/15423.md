# Issue 15423: Add auto-rebasing mechanism for Cygwin

archive/issues_015186.json:
```json
{
    "assignees": [
        "https://github.com/embray"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nAs explained in the old description, it is often necessary when building Sage on Cygwin to *rebase* its DLLs.  This is the process of updating the default base addresses in memory at which a list of DLLs are loaded, such that none of those DLLs overlap each other in memory (in the normal case that they do overlap, Windows relocates them, but this frequently leads to fork errors in Cygwin).\n\nThis ticket solves the problem by running the `sage-rebase.sh` script as part of the `sage-spkg` script at the end of every package installation.  It also runs `sage-rebase.sh` after `make sagelib` for the same reason.  Although running it after installing each package is generally unnecessary, *sometimes* it is necessary.  For example, after installing Python, it's necessary to rebase to ensure that Python works, as it will be used later in the build process.  Since rebasing doesn't actually add much overhead in terms of time, it's fine to just do it always (on Cygwin).\n\nNote that this also uses `sage-rebase.sh` versus `sage-rebaseall.sh`.  The difference is that the former only updates DLLs in Sage itself (i.e. under `$SAGE_LOCAL`) whereas the latter also rebases all DLLs in the Cygwin installation.  Because of this, the latter cannot be run from inside Cygwin--all Cygwin processes must be stopped first.  Obviously this would be too disruptive to the normal Sage build process, so we don't do that.  It's also unnecessary.  As long as `rebaseall` is run once after installing Cygwin and all build dependencies, it will build a database of known DLLs and their base addresses and sizes, which can be referenced when rebasing new DLLs.  Since building Sage doesn't affect any of the Cygwin system DLLs there's no need to rerun `rebaseall` during a build of Sage.\n\nFixing this is necessary for unattended Sage builds to succeed--otherwise the build will fail several times and require manual rebasing before proceeding.\n\n### Old Description\nWith Sage 5.12 (plus a few updated spkg, all of them available on trac), building Sage on Cygwin(32) is no harder than on Linux except for the need of rebasing a few times during the build process.\nThis could be automated in the following way\n* try to build\n* if that fails and we're on Cygwin,\n* grep the failing logs for error messages cuased by fork issues\n* if all erros are caused by fork issues:\n  * rebase (using the oblivious option which can be run from bash, I think the script we included some time ago are ok),\n  * go back to step one\n* if not fails as usual\n\nHaving this would open the way to a buildbot or a patchbot for Cygwin.\n\nDepends on #20986\n\nCC:  @kcrisman @dimpase @jdemeyer @jpflori @tscrim\n\nComponent: **porting: Cygwin**\n\nAuthor: **Erik Bray**\n\nBranch/Commit: **[`5e494ad`](https://github.com/sagemath/sagetrac-mirror/commit/5e494ad504d2f86b56c1c956518ad7d48807f51c)**\n\nReviewer: **Jean-Pierre Flori, Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15423_\n\n",
    "closed_at": "2017-05-20T20:07:57Z",
    "created_at": "2013-11-15T14:47:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add auto-rebasing mechanism for Cygwin",
    "type": "issue",
    "updated_at": "2017-05-20T20:07:57Z",
    "url": "https://github.com/sagemath/sage/issues/15423",
    "user": "https://github.com/jpflori"
}
```
<div id="comment:0"></div>

As explained in the old description, it is often necessary when building Sage on Cygwin to *rebase* its DLLs.  This is the process of updating the default base addresses in memory at which a list of DLLs are loaded, such that none of those DLLs overlap each other in memory (in the normal case that they do overlap, Windows relocates them, but this frequently leads to fork errors in Cygwin).

This ticket solves the problem by running the `sage-rebase.sh` script as part of the `sage-spkg` script at the end of every package installation.  It also runs `sage-rebase.sh` after `make sagelib` for the same reason.  Although running it after installing each package is generally unnecessary, *sometimes* it is necessary.  For example, after installing Python, it's necessary to rebase to ensure that Python works, as it will be used later in the build process.  Since rebasing doesn't actually add much overhead in terms of time, it's fine to just do it always (on Cygwin).

Note that this also uses `sage-rebase.sh` versus `sage-rebaseall.sh`.  The difference is that the former only updates DLLs in Sage itself (i.e. under `$SAGE_LOCAL`) whereas the latter also rebases all DLLs in the Cygwin installation.  Because of this, the latter cannot be run from inside Cygwin--all Cygwin processes must be stopped first.  Obviously this would be too disruptive to the normal Sage build process, so we don't do that.  It's also unnecessary.  As long as `rebaseall` is run once after installing Cygwin and all build dependencies, it will build a database of known DLLs and their base addresses and sizes, which can be referenced when rebasing new DLLs.  Since building Sage doesn't affect any of the Cygwin system DLLs there's no need to rerun `rebaseall` during a build of Sage.

Fixing this is necessary for unattended Sage builds to succeed--otherwise the build will fail several times and require manual rebasing before proceeding.

### Old Description
With Sage 5.12 (plus a few updated spkg, all of them available on trac), building Sage on Cygwin(32) is no harder than on Linux except for the need of rebasing a few times during the build process.
This could be automated in the following way
* try to build
* if that fails and we're on Cygwin,
* grep the failing logs for error messages cuased by fork issues
* if all erros are caused by fork issues:
  * rebase (using the oblivious option which can be run from bash, I think the script we included some time ago are ok),
  * go back to step one
* if not fails as usual

Having this would open the way to a buildbot or a patchbot for Cygwin.

Depends on #20986

CC:  @kcrisman @dimpase @jdemeyer @jpflori @tscrim

Component: **porting: Cygwin**

Author: **Erik Bray**

Branch/Commit: **[`5e494ad`](https://github.com/sagemath/sagetrac-mirror/commit/5e494ad504d2f86b56c1c956518ad7d48807f51c)**

Reviewer: **Jean-Pierre Flori, Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/15423_





---

archive/issue_events_217554.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-11-15T14:47:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217554"
}
```



---

archive/issue_events_217555.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-11-15T14:47:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "0000b0",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217555"
}
```



---

archive/issue_events_217556.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-11-15T14:47:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217556"
}
```



---

archive/issue_events_217557.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-11-15T14:47:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217557"
}
```



---

archive/issue_events_217558.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217558"
}
```



---

archive/issue_events_217559.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217559"
}
```



---

archive/issue_events_217560.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217560"
}
```



---

archive/issue_events_217561.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217561"
}
```



---

archive/issue_events_217562.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217562"
}
```



---

archive/issue_events_217563.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217563"
}
```



---

archive/issue_events_217564.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-13T10:25:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217564"
}
```



---

archive/issue_events_217565.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-13T10:25:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217565"
}
```



---

archive/issue_comments_191815.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI've found it simpler (and I have a patch) to just always rebase after every package build.  It doesn't actually add much noticeable overhead.  One thing I might want to do before pushing my patch is also make it so the `--quiet` flag can be passed through to rebase, since otherwise this sometimes generates a bit of noise that isn't helpful.\n\nI would say this is almost necessary for Cygwin builds; especially in an automated context like running the patchbot.",
    "created_at": "2017-04-13T10:25:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191815",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">comment:4</div>

I've found it simpler (and I have a patch) to just always rebase after every package build.  It doesn't actually add much noticeable overhead.  One thing I might want to do before pushing my patch is also make it so the `--quiet` flag can be passed through to rebase, since otherwise this sometimes generates a bit of noise that isn't helpful.

I would say this is almost necessary for Cygwin builds; especially in an automated context like running the patchbot.



---

archive/issue_events_217566.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-13T10:25:09Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "subject": "https://github.com/embray",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217566"
}
```



---

archive/issue_events_217567.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-21T12:23:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217567"
}
```



---

archive/issue_events_217568.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-21T12:23:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217568"
}
```



---

archive/issue_comments_191816.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNew method for rebasing DLLs continuously during Sage build, which should solve this issue.  I've updated the ticket description to explain exactly what this does and why, but I left the old description just for comparison.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcccd289a3986725bcda00c1390208786d782bc0\"><code>fcccd28</code></a></td><td><code>Include ECL .fas binaries (which are DLLs) when calling rebase(all)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d5ad32aa94c6292bb759b07d0c0026a02545b9f\"><code>6d5ad32</code></a></td><td><code>These scripts don't necessarily need to know where SAGE_ROOT is, just SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5daf807f74fe7f5415441f2fa9c92c6229b3a05\"><code>b5daf80</code></a></td><td><code>Update these batch scripts so that it's not necessary to manually specify the paths of SAGE_LOCAL or CYGWIN_ROOT</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23a5a04d3f477738a2da86e3e5b21f529e483f10\"><code>23a5a04</code></a></td><td><code>Accept the path to SAGE_LOCAL as an argument (this is useful for running outside the Sage shell).</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2f0b401f9708fa80a91a908048576bad7cbe8b6\"><code>e2f0b40</code></a></td><td><code>Enhance sage-rebase.sh to be able to pass additional arguments to rebase, and to wrap the call to rebaseall</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df53e2fe24baf5733739e9ccd6c3de44f992442d\"><code>df53e2f</code></a></td><td><code>This should be passing the --all flag to sage-rebase.sh</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f39f086783e7c4fccbb343aa9fd38237e883bc1c\"><code>f39f086</code></a></td><td><code>Run sage-rebase between each spkg install on Cygwin</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cae4bc71ddb91f1bb734e8c9fc907784a45ad555\"><code>cae4bc7</code></a></td><td><code>Also rebase after building sagelib itself</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48ff8d8332131eb3af85e386ba38f9b2c78357e2\"><code>48ff8d8</code></a></td><td><code>Make the rebase call after each package quiet.</code></td></tr></table>\n",
    "created_at": "2017-05-05T14:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191816",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

New method for rebasing DLLs continuously during Sage build, which should solve this issue.  I've updated the ticket description to explain exactly what this does and why, but I left the old description just for comparison.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcccd289a3986725bcda00c1390208786d782bc0"><code>fcccd28</code></a></td><td><code>Include ECL .fas binaries (which are DLLs) when calling rebase(all)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d5ad32aa94c6292bb759b07d0c0026a02545b9f"><code>6d5ad32</code></a></td><td><code>These scripts don't necessarily need to know where SAGE_ROOT is, just SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5daf807f74fe7f5415441f2fa9c92c6229b3a05"><code>b5daf80</code></a></td><td><code>Update these batch scripts so that it's not necessary to manually specify the paths of SAGE_LOCAL or CYGWIN_ROOT</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23a5a04d3f477738a2da86e3e5b21f529e483f10"><code>23a5a04</code></a></td><td><code>Accept the path to SAGE_LOCAL as an argument (this is useful for running outside the Sage shell).</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2f0b401f9708fa80a91a908048576bad7cbe8b6"><code>e2f0b40</code></a></td><td><code>Enhance sage-rebase.sh to be able to pass additional arguments to rebase, and to wrap the call to rebaseall</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df53e2fe24baf5733739e9ccd6c3de44f992442d"><code>df53e2f</code></a></td><td><code>This should be passing the --all flag to sage-rebase.sh</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f39f086783e7c4fccbb343aa9fd38237e883bc1c"><code>f39f086</code></a></td><td><code>Run sage-rebase between each spkg install on Cygwin</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cae4bc71ddb91f1bb734e8c9fc907784a45ad555"><code>cae4bc7</code></a></td><td><code>Also rebase after building sagelib itself</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48ff8d8332131eb3af85e386ba38f9b2c78357e2"><code>48ff8d8</code></a></td><td><code>Make the rebase call after each package quiet.</code></td></tr></table>




---

archive/issue_events_217569.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-05-05T14:08:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217569"
}
```



---

archive/issue_comments_191817.json:
```json
{
    "body": "Commit: **[`48ff8d8`](https://github.com/sagemath/sagetrac-mirror/commit/48ff8d8332131eb3af85e386ba38f9b2c78357e2)**",
    "created_at": "2017-05-05T14:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191817",
    "user": "https://github.com/embray"
}
```

Commit: **[`48ff8d8`](https://github.com/sagemath/sagetrac-mirror/commit/48ff8d8332131eb3af85e386ba38f9b2c78357e2)**



---

archive/issue_comments_191818.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2017-05-05T14:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191818",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_comments_191819.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,12 @@\n+As explained in the old description, it is often necessary when building Sage on Cygwin to *rebase* its DLLs.  This is the process of updating the default base addresses in memory at which a list of DLLs are loaded, such that none of those DLLs overlap each other in memory (in the normal case that they do overlap, Windows relocates them, but this frequently leads to fork errors in Cygwin).\n+\n+This ticket solves the problem by running the `sage-rebase.sh` script as part of the `sage-spkg` script at the end of every package installation.  It also runs `sage-rebase.sh` after `make sagelib` for the same reason.  Although running it after installing each package is generally unnecessary, *sometimes* it is necessary.  For example, after installing Python, it's necessary to rebase to ensure that Python works, as it will be used later in the build process.  Since rebasing doesn't actually add much overhead in terms of time, it's fine to just do it always (on Cygwin).\n+\n+Note that this also uses `sage-rebase.sh` versus `sage-rebaseall.sh`.  The difference is that the former only updates DLLs in Sage itself (i.e. under `$SAGE_LOCAL`) whereas the latter also rebases all DLLs in the Cygwin installation.  Because of this, the latter cannot be run from inside Cygwin--all Cygwin processes must be stopped first.  Obviously this would be too disruptive to the normal Sage build process, so we don't do that.  It's also unnecessary.  As long as `rebaseall` is run once after installing Cygwin and all build dependencies, it will build a database of known DLLs and their base addresses and sizes, which can be referenced when rebasing new DLLs.  Since building Sage doesn't affect any of the Cygwin system DLLs there's no need to rerun `rebaseall` during a build of Sage.\n+\n+Fixing this is necessary for unattended Sage builds to succeed--otherwise the build will fail several times and require manual rebasing before proceeding.\n+\n+### Old Description\n With Sage 5.12 (plus a few updated spkg, all of them available on trac), building Sage on Cygwin(32) is no harder than on Linux except for the need of rebasing a few times during the build process.\n This could be automated in the following way\n * try to build\n``````\n",
    "created_at": "2017-05-05T14:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191819",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,12 @@
+As explained in the old description, it is often necessary when building Sage on Cygwin to *rebase* its DLLs.  This is the process of updating the default base addresses in memory at which a list of DLLs are loaded, such that none of those DLLs overlap each other in memory (in the normal case that they do overlap, Windows relocates them, but this frequently leads to fork errors in Cygwin).
+
+This ticket solves the problem by running the `sage-rebase.sh` script as part of the `sage-spkg` script at the end of every package installation.  It also runs `sage-rebase.sh` after `make sagelib` for the same reason.  Although running it after installing each package is generally unnecessary, *sometimes* it is necessary.  For example, after installing Python, it's necessary to rebase to ensure that Python works, as it will be used later in the build process.  Since rebasing doesn't actually add much overhead in terms of time, it's fine to just do it always (on Cygwin).
+
+Note that this also uses `sage-rebase.sh` versus `sage-rebaseall.sh`.  The difference is that the former only updates DLLs in Sage itself (i.e. under `$SAGE_LOCAL`) whereas the latter also rebases all DLLs in the Cygwin installation.  Because of this, the latter cannot be run from inside Cygwin--all Cygwin processes must be stopped first.  Obviously this would be too disruptive to the normal Sage build process, so we don't do that.  It's also unnecessary.  As long as `rebaseall` is run once after installing Cygwin and all build dependencies, it will build a database of known DLLs and their base addresses and sizes, which can be referenced when rebasing new DLLs.  Since building Sage doesn't affect any of the Cygwin system DLLs there's no need to rerun `rebaseall` during a build of Sage.
+
+Fixing this is necessary for unattended Sage builds to succeed--otherwise the build will fail several times and require manual rebasing before proceeding.
+
+### Old Description
 With Sage 5.12 (plus a few updated spkg, all of them available on trac), building Sage on Cygwin(32) is no harder than on Linux except for the need of rebasing a few times during the build process.
 This could be automated in the following way
 * try to build
``````




---

archive/issue_comments_191820.json:
```json
{
    "body": "Branch: **[u/embray/cygwin/ticket-15423](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-15423)**",
    "created_at": "2017-05-05T14:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191820",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/cygwin/ticket-15423](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-15423)**



---

archive/issue_comments_191821.json:
```json
{
    "body": "Dependencies: **#20986**",
    "created_at": "2017-05-05T14:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191821",
    "user": "https://github.com/embray"
}
```

Dependencies: **#20986**



---

archive/issue_comments_191822.json:
```json
{
    "body": "Changed commit from **[`48ff8d8`](https://github.com/sagemath/sagetrac-mirror/commit/48ff8d8332131eb3af85e386ba38f9b2c78357e2)** to **[`e6297c3`](https://github.com/sagemath/sagetrac-mirror/commit/e6297c39ecd374bb4c266f9cfc657e356b058db4)**",
    "created_at": "2017-05-05T14:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191822",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`48ff8d8`](https://github.com/sagemath/sagetrac-mirror/commit/48ff8d8332131eb3af85e386ba38f9b2c78357e2)** to **[`e6297c3`](https://github.com/sagemath/sagetrac-mirror/commit/e6297c39ecd374bb4c266f9cfc657e356b058db4)**



---

archive/issue_comments_191823.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6297c39ecd374bb4c266f9cfc657e356b058db4\"><code>e6297c3</code></a></td><td><code>Move the sage-rebase.sh after sagelib installation to the Makefile for sagelib itself, rather than build/make/deps</code></td></tr></table>\n",
    "created_at": "2017-05-05T14:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191823",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6297c39ecd374bb4c266f9cfc657e356b058db4"><code>e6297c3</code></a></td><td><code>Move the sage-rebase.sh after sagelib installation to the Makefile for sagelib itself, rather than build/make/deps</code></td></tr></table>




---

archive/issue_events_217570.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-05-05T14:18:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217570"
}
```



---

archive/issue_events_217571.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-05-05T14:18:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217571"
}
```



---

archive/issue_comments_191824.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nLooks like that last commit has a merge conflict.",
    "created_at": "2017-05-05T14:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191824",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

Looks like that last commit has a merge conflict.



---

archive/issue_comments_191825.json:
```json
{
    "body": "Changed commit from **[`e6297c3`](https://github.com/sagemath/sagetrac-mirror/commit/e6297c39ecd374bb4c266f9cfc657e356b058db4)** to **[`ff8e807`](https://github.com/sagemath/sagetrac-mirror/commit/ff8e807cc09c483cc84527bb06dc4464892c1a1e)**",
    "created_at": "2017-05-05T14:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191825",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e6297c3`](https://github.com/sagemath/sagetrac-mirror/commit/e6297c39ecd374bb4c266f9cfc657e356b058db4)** to **[`ff8e807`](https://github.com/sagemath/sagetrac-mirror/commit/ff8e807cc09c483cc84527bb06dc4464892c1a1e)**



---

archive/issue_comments_191826.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42aeeaeef9f4986dc0de93d630c81c651666f2f1\"><code>42aeeae</code></a></td><td><code>Include ECL .fas binaries (which are DLLs) when calling rebase(all)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b60823b727f76951f313445ef9f821bfeaf54556\"><code>b60823b</code></a></td><td><code>These scripts don't necessarily need to know where SAGE_ROOT is, just SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2905b1c16a508027c66f6c118000b090d346f55\"><code>e2905b1</code></a></td><td><code>Update these batch scripts so that it's not necessary to manually specify the paths of SAGE_LOCAL or CYGWIN_ROOT</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d8910c65f8c193ddb265a4a0ca10a436206c033\"><code>5d8910c</code></a></td><td><code>Accept the path to SAGE_LOCAL as an argument (this is useful for running outside the Sage shell).</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43eb7bfc8757b82c88b01f5e4350271dc3776c67\"><code>43eb7bf</code></a></td><td><code>Enhance sage-rebase.sh to be able to pass additional arguments to rebase, and to wrap the call to rebaseall</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/784c0e2098ecd2ccbc3fc774604d0ab85c150f77\"><code>784c0e2</code></a></td><td><code>This should be passing the --all flag to sage-rebase.sh</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/747e201d99e0b527419fe3c396f81264aae49bca\"><code>747e201</code></a></td><td><code>Run sage-rebase between each spkg install on Cygwin</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6579d0afeda1a5998ddb54a4686345f1b631c483\"><code>6579d0a</code></a></td><td><code>Also rebase after building sagelib itself</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c2d48e8c2cbf0e3423a284a471d6b7957223097\"><code>8c2d48e</code></a></td><td><code>Make the rebase call after each package quiet.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff8e807cc09c483cc84527bb06dc4464892c1a1e\"><code>ff8e807</code></a></td><td><code>Move the sage-rebase.sh after sagelib installation to the Makefile for sagelib itself, rather than build/make/deps</code></td></tr></table>\n",
    "created_at": "2017-05-05T14:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191826",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42aeeaeef9f4986dc0de93d630c81c651666f2f1"><code>42aeeae</code></a></td><td><code>Include ECL .fas binaries (which are DLLs) when calling rebase(all)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b60823b727f76951f313445ef9f821bfeaf54556"><code>b60823b</code></a></td><td><code>These scripts don't necessarily need to know where SAGE_ROOT is, just SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2905b1c16a508027c66f6c118000b090d346f55"><code>e2905b1</code></a></td><td><code>Update these batch scripts so that it's not necessary to manually specify the paths of SAGE_LOCAL or CYGWIN_ROOT</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d8910c65f8c193ddb265a4a0ca10a436206c033"><code>5d8910c</code></a></td><td><code>Accept the path to SAGE_LOCAL as an argument (this is useful for running outside the Sage shell).</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43eb7bfc8757b82c88b01f5e4350271dc3776c67"><code>43eb7bf</code></a></td><td><code>Enhance sage-rebase.sh to be able to pass additional arguments to rebase, and to wrap the call to rebaseall</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/784c0e2098ecd2ccbc3fc774604d0ab85c150f77"><code>784c0e2</code></a></td><td><code>This should be passing the --all flag to sage-rebase.sh</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/747e201d99e0b527419fe3c396f81264aae49bca"><code>747e201</code></a></td><td><code>Run sage-rebase between each spkg install on Cygwin</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6579d0afeda1a5998ddb54a4686345f1b631c483"><code>6579d0a</code></a></td><td><code>Also rebase after building sagelib itself</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c2d48e8c2cbf0e3423a284a471d6b7957223097"><code>8c2d48e</code></a></td><td><code>Make the rebase call after each package quiet.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff8e807cc09c483cc84527bb06dc4464892c1a1e"><code>ff8e807</code></a></td><td><code>Move the sage-rebase.sh after sagelib installation to the Makefile for sagelib itself, rather than build/make/deps</code></td></tr></table>




---

archive/issue_events_217572.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-05-05T14:20:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217572"
}
```



---

archive/issue_events_217573.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-05-05T14:20:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217573"
}
```



---

archive/issue_events_217574.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-17T09:15:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217574"
}
```



---

archive/issue_events_217575.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-17T09:15:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217575"
}
```



---

archive/issue_comments_191827.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori**",
    "created_at": "2017-05-17T09:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191827",
    "user": "https://github.com/jpflori"
}
```

Reviewer: **Jean-Pierre Flori**



---

archive/issue_comments_191828.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nLGTM",
    "created_at": "2017-05-17T09:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191828",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:12" align="right">comment:12</div>

LGTM



---

archive/issue_comments_191829.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nIn `src/Makefile.in`, is this really needed for the rebase script to work?\n\n```\n    (cd $(srcdir)                                       \\\n     && export SAGE_ROOT=/doesnotexist                          \\\n           SAGE_SRC=/doesnotexist                           \\\n           SAGE_SRC_ROOT=/doesnotexist                          \\\n           SAGE_DOC_SRC=/doesnotexist                           \\\n           SAGE_BUILD_DIR=/doesnotexist                         \\\n           SAGE_PKGS=$(abs_top_srcdir)/build/pkgs                   \\\n           SAGE_CYTHONIZED=$(abs_builddir)/build/cythonized             \\\n```\n\nIf not, it would be cleaner to write the rebase script on a new line instead of continuing with `&&`.\n\nMinor comment which you might as well fix: you don't need the parentheses `(cd ... && ...)`. Those just create an extra subprocess for no reason.",
    "created_at": "2017-05-17T11:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191829",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

In `src/Makefile.in`, is this really needed for the rebase script to work?

```
    (cd $(srcdir)                                       \
     && export SAGE_ROOT=/doesnotexist                          \
           SAGE_SRC=/doesnotexist                           \
           SAGE_SRC_ROOT=/doesnotexist                          \
           SAGE_DOC_SRC=/doesnotexist                           \
           SAGE_BUILD_DIR=/doesnotexist                         \
           SAGE_PKGS=$(abs_top_srcdir)/build/pkgs                   \
           SAGE_CYTHONIZED=$(abs_builddir)/build/cythonized             \
```

If not, it would be cleaner to write the rebase script on a new line instead of continuing with `&&`.

Minor comment which you might as well fix: you don't need the parentheses `(cd ... && ...)`. Those just create an extra subprocess for no reason.



---

archive/issue_events_217576.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-17T11:28:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217576"
}
```



---

archive/issue_events_217577.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-17T11:28:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217577"
}
```



---

archive/issue_comments_191830.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNah the rebase script does only care about SAGE_LOCAL.",
    "created_at": "2017-05-17T12:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191830",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:14" align="right">comment:14</div>

Nah the rebase script does only care about SAGE_LOCAL.



---

archive/issue_comments_191831.json:
```json
{
    "body": "Changed branch from **[u/embray/cygwin/ticket-15423](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-15423)** to **[u/jdemeyer/cygwin/ticket-15423](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/cygwin/ticket-15423)**",
    "created_at": "2017-05-18T07:24:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191831",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/embray/cygwin/ticket-15423](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-15423)** to **[u/jdemeyer/cygwin/ticket-15423](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/cygwin/ticket-15423)**



---

archive/issue_comments_191832.json:
```json
{
    "body": "Changed commit from **[`ff8e807`](https://github.com/sagemath/sagetrac-mirror/commit/ff8e807cc09c483cc84527bb06dc4464892c1a1e)** to **[`5e494ad`](https://github.com/sagemath/sagetrac-mirror/commit/5e494ad504d2f86b56c1c956518ad7d48807f51c)**",
    "created_at": "2017-05-18T07:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191832",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`ff8e807`](https://github.com/sagemath/sagetrac-mirror/commit/ff8e807cc09c483cc84527bb06dc4464892c1a1e)** to **[`5e494ad`](https://github.com/sagemath/sagetrac-mirror/commit/5e494ad504d2f86b56c1c956518ad7d48807f51c)**



---

archive/issue_events_217578.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-18T07:24:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217578"
}
```



---

archive/issue_events_217579.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-18T07:24:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217579"
}
```



---

archive/issue_comments_191833.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e494ad504d2f86b56c1c956518ad7d48807f51c\"><code>5e494ad</code></a></td><td><code>Reformat Makefile rule</code></td></tr></table>\n",
    "created_at": "2017-05-18T07:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191833",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e494ad504d2f86b56c1c956518ad7d48807f51c"><code>5e494ad</code></a></td><td><code>Reformat Makefile rule</code></td></tr></table>




---

archive/issue_comments_191834.json:
```json
{
    "body": "Changed reviewer from **Jean-Pierre Flori** to **Jean-Pierre Flori, Jeroen Demeyer**",
    "created_at": "2017-05-18T07:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191834",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Jean-Pierre Flori** to **Jean-Pierre Flori, Jeroen Demeyer**



---

archive/issue_events_217580.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-18T08:10:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217580"
}
```



---

archive/issue_events_217581.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-18T08:10:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217581"
}
```



---

archive/issue_comments_191835.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOk, let's go with jeroen solution.",
    "created_at": "2017-05-18T08:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191835",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:17" align="right">comment:17</div>

Ok, let's go with jeroen solution.



---

archive/issue_comments_191836.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nYou're right, this is fine.",
    "created_at": "2017-05-18T08:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191836",
    "user": "https://github.com/embray"
}
```

<div id="comment:18" align="right">comment:18</div>

You're right, this is fine.



---

archive/issue_comments_191837.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/cygwin/ticket-15423](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/cygwin/ticket-15423)** to **[`5e494ad`](https://github.com/sagemath/sagetrac-mirror/commit/5e494ad504d2f86b56c1c956518ad7d48807f51c)**",
    "created_at": "2017-05-20T20:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15423#issuecomment-191837",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/cygwin/ticket-15423](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/cygwin/ticket-15423)** to **[`5e494ad`](https://github.com/sagemath/sagetrac-mirror/commit/5e494ad504d2f86b56c1c956518ad7d48807f51c)**



---

archive/issue_events_217582.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-20T20:07:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217582"
}
```



---

archive/issue_events_217583.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ca7a1d53cf7e9c300a3dfcf5aae2239f1b65c44e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-20T20:07:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15423",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15423#event-217583"
}
```
