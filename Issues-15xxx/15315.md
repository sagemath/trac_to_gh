# Issue 15315: aspect ratio ignored in matrix and density plots

archive/issues_015078.json:
```json
{
    "assignees": [],
    "body": "This is due to improper use of `imshow`, I think.  This was reported at [this ask.sagemath question](http://ask.sagemath.org/question/3115/density-plot-aspect-ratio).  See [these](http://stackoverflow.com/questions/13384653/imshow-extent-and-aspect) [stackoverflow](http://stackoverflow.com/questions/10540929/figure-of-imshow-is-too-small) [questions](http://stackoverflow.com/questions/7965743/python-matplotlib-setting-aspect-ratio/7969475#7969475) for various approaches to setting this.  Essentially, we may need to have some custom way to pass on fig size and aspect ratio to matrix and density plots (which use imshow).\n\n---\nAttached patch should fix aspect ratio: [attachment: trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz](https://github.com/sagemath/sage/files/ticket15315/trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz)\n\nCC:  @ppurka @jasongrout\n\nKeywords: **matplotlib imshow density plot**\n\nBranch/Commit: **[2cc1beb](https://github.com/sagemath/sagetrac-mirror/commit/2cc1beba873ee5898fadaa206cee23cd9be5455f)**\n\nUpstream: **Reported upstream. Developers deny it's a bug.**\n\nReviewer: **Karl-Dieter Crisman**\n\nAuthor: **Punarbasu Purkayastha**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15315_\n\n",
    "closed_at": "2014-08-16T09:32:31Z",
    "created_at": "2013-10-22T01:35:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "aspect ratio ignored in matrix and density plots",
    "type": "issue",
    "updated_at": "2014-08-16T09:32:31Z",
    "url": "https://github.com/sagemath/sage/issues/15315",
    "user": "https://github.com/kcrisman"
}
```
This is due to improper use of `imshow`, I think.  This was reported at [this ask.sagemath question](http://ask.sagemath.org/question/3115/density-plot-aspect-ratio).  See [these](http://stackoverflow.com/questions/13384653/imshow-extent-and-aspect) [stackoverflow](http://stackoverflow.com/questions/10540929/figure-of-imshow-is-too-small) [questions](http://stackoverflow.com/questions/7965743/python-matplotlib-setting-aspect-ratio/7969475#7969475) for various approaches to setting this.  Essentially, we may need to have some custom way to pass on fig size and aspect ratio to matrix and density plots (which use imshow).

---
Attached patch should fix aspect ratio: [attachment: trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz](https://github.com/sagemath/sage/files/ticket15315/trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz)

CC:  @ppurka @jasongrout

Keywords: **matplotlib imshow density plot**

Branch/Commit: **[2cc1beb](https://github.com/sagemath/sagetrac-mirror/commit/2cc1beba873ee5898fadaa206cee23cd9be5455f)**

Upstream: **Reported upstream. Developers deny it's a bug.**

Reviewer: **Karl-Dieter Crisman**

Author: **Punarbasu Purkayastha**

_Issue created by migration from https://trac.sagemath.org/ticket/15315_





---

archive/issue_events_200391.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-10-22T01:35:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200391"
}
```



---

archive/issue_events_200392.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-10-22T01:35:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "component: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200392"
}
```



---

archive/issue_events_200393.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-10-22T01:35:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200393"
}
```



---

archive/issue_events_200394.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-10-22T01:35:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200394"
}
```



---

archive/issue_comments_192139.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nDo you have an examlpe for matrix plot that ignores aspect ratio? I already have the fix to density plot, which should work for all cases - involves change in `graphics.py`.",
    "created_at": "2013-10-22T02:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192139",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:1'>Comment 1:</a>
Do you have an examlpe for matrix plot that ignores aspect ratio? I already have the fix to density plot, which should work for all cases - involves change in `graphics.py`.



---

archive/issue_comments_192140.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n This is due to improper use of `imshow`, I think.  This was reported at [this ask.sagemath question](http://ask.sagemath.org/question/3115/density-plot-aspect-ratio).  See [these](http://stackoverflow.com/questions/13384653/imshow-extent-and-aspect) [stackoverflow](http://stackoverflow.com/questions/10540929/figure-of-imshow-is-too-small) [questions](http://stackoverflow.com/questions/7965743/python-matplotlib-setting-aspect-ratio/7969475#7969475) for various approaches to setting this.  Essentially, we may need to have some custom way to pass on fig size and aspect ratio to matrix and density plots (which use imshow).\n+\n+---\n+Attached patch should fix aspect ratio: [attachment: trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz](https://github.com/sagemath/sage/files/ticket15315/trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz)\n``````\n",
    "created_at": "2013-10-22T02:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192140",
    "user": "https://github.com/ppurka"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 This is due to improper use of `imshow`, I think.  This was reported at [this ask.sagemath question](http://ask.sagemath.org/question/3115/density-plot-aspect-ratio).  See [these](http://stackoverflow.com/questions/13384653/imshow-extent-and-aspect) [stackoverflow](http://stackoverflow.com/questions/10540929/figure-of-imshow-is-too-small) [questions](http://stackoverflow.com/questions/7965743/python-matplotlib-setting-aspect-ratio/7969475#7969475) for various approaches to setting this.  Essentially, we may need to have some custom way to pass on fig size and aspect ratio to matrix and density plots (which use imshow).
+
+---
+Attached patch should fix aspect ratio: [attachment: trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz](https://github.com/sagemath/sage/files/ticket15315/trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz)
``````




---

archive/issue_events_200395.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-10-22T02:08:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200395"
}
```



---

archive/issue_comments_192141.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2013-10-22T02:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192141",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_192142.json:
```json
{
    "body": "Author: **Punarbasu Purkayastha**",
    "created_at": "2013-10-22T02:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192142",
    "user": "https://github.com/kcrisman"
}
```

Author: **Punarbasu Purkayastha**



---

archive/issue_comments_192143.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI am surprised the fix is this easy, but in retrospect it makes sense - some subplots might not obey the aspect ratio.  Certainly fixes the problem in question. Obviously, needs doctests, and testing that all previous aspect ratio plots (including automatic ones) really still look correct!  Good find, ppurka.",
    "created_at": "2013-10-22T02:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192143",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'>Comment 3:</a>
I am surprised the fix is this easy, but in retrospect it makes sense - some subplots might not obey the aspect ratio.  Certainly fixes the problem in question. Obviously, needs doctests, and testing that all previous aspect ratio plots (including automatic ones) really still look correct!  Good find, ppurka.



---

archive/issue_events_200396.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-10-22T02:20:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200396"
}
```



---

archive/issue_events_200397.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-10-22T02:20:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200397"
}
```



---

archive/issue_events_200398.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-10-22T05:15:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200398"
}
```



---

archive/issue_events_200399.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-10-22T05:15:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200399"
}
```



---

archive/issue_comments_192144.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nWell, I added a simple doctest for density plot. I have checked some of the other figures - just browse the documentation locally and evaluate the plots. It seems fine to me. :)",
    "created_at": "2013-10-22T05:15:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192144",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:4'>Comment 4:</a>
Well, I added a simple doctest for density plot. I have checked some of the other figures - just browse the documentation locally and evaluate the plots. It seems fine to me. :)



---

archive/issue_comments_192145.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThis looks great in general, except it does change density and matrix plots to having the default aspect ratio be \"automatic\".  As a very gentle review request, could you remove the extra back tick from [here](http://hg.sagemath.org/sage-main/src/f0ee3538887fe739601babb54e177ec5e1133b7a/sage/plot/density_plot.py?at=default#cl-45)?  Same file.  You didn't introduce it but it would be nice not to open a separate ticket for that.\n\nAs to aspect ratio, we just need to decide what we want.  Note that #12222 changed most geometric figures to be \"1\" but other things to be auto, and then #12581 switched contour and region plots to \"1\".  Now we are suggesting changing density and matrix plots to be auto, not 1.  And what about slope/vector fields?  Historically we have kept such things at \"1\" because we figured the typical user would have them be squares.  But maybe that was wrong.  The canonical example is\n\n```\n        sage: x,y = var('x,y')\n        sage: contour_plot(x^2+y^2-2,(x,-1,1), (y,-1,1))\n```\nand we went with that being circles, not ellipses :)\n\nJason, do you have any comments on this?  I would hate to change our defaults again and again; the most important thing here is allowing user control of the aspect ratio, so we could put in a decorator to keep these at aspect ratio 1 (though then ppurka would have to change the text of his test).",
    "created_at": "2013-10-22T18:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192145",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'>Comment 5:</a>
This looks great in general, except it does change density and matrix plots to having the default aspect ratio be "automatic".  As a very gentle review request, could you remove the extra back tick from [here](http://hg.sagemath.org/sage-main/src/f0ee3538887fe739601babb54e177ec5e1133b7a/sage/plot/density_plot.py?at=default#cl-45)?  Same file.  You didn't introduce it but it would be nice not to open a separate ticket for that.

As to aspect ratio, we just need to decide what we want.  Note that #12222 changed most geometric figures to be "1" but other things to be auto, and then #12581 switched contour and region plots to "1".  Now we are suggesting changing density and matrix plots to be auto, not 1.  And what about slope/vector fields?  Historically we have kept such things at "1" because we figured the typical user would have them be squares.  But maybe that was wrong.  The canonical example is

```
        sage: x,y = var('x,y')
        sage: contour_plot(x^2+y^2-2,(x,-1,1), (y,-1,1))
```
and we went with that being circles, not ellipses :)

Jason, do you have any comments on this?  I would hate to change our defaults again and again; the most important thing here is allowing user control of the aspect ratio, so we could put in a decorator to keep these at aspect ratio 1 (though then ppurka would have to change the text of his test).



---

archive/issue_comments_192146.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nAttachment: **[trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz](https://github.com/sagemath/sage/files/ticket15315/trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz)**\n\nReplying to [@kcrisman](#comment%3A5):\n> This looks great in general, except it does change density and matrix plots to having the default aspect ratio be \"automatic\". \n\nThis is the same as it was earlier! The aspect ratio is set to `self.aspect_ratio()` if it is `None` (c.f. the patch). And the latter returns `\"automatic\"` by default. So, if matrix and density plots have not been setting the aspect ratio to one explicitly, then they *are* running with `\"automatic\"` aspect ratio.\n\nSo, IMHO, for the plots where the aspect ratio is explicitly set to 1 by `@options`, it remains 1. And for the plots where it is not automatically set, `\"automatic\"` was already the default, so we are not changing anything here.\n\n> As a very gentle review request, could you remove the extra back tick from [here](http://hg.sagemath.org/sage-main/src/f0ee3538887fe739601babb54e177ec5e1133b7a/sage/plot/density_plot.py?at=default#cl-45)?  Same file.  You didn't introduce it but it would be nice not to open a separate ticket for that.\n\nDone.",
    "created_at": "2013-10-23T13:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192146",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:6'>Comment 6:</a>
Attachment: **[trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz](https://github.com/sagemath/sage/files/ticket15315/trac_15315-density_and_matrix_plot_aspect_ratio.patch.gz)**

Replying to [@kcrisman](#comment%3A5):
> This looks great in general, except it does change density and matrix plots to having the default aspect ratio be "automatic". 

This is the same as it was earlier! The aspect ratio is set to `self.aspect_ratio()` if it is `None` (c.f. the patch). And the latter returns `"automatic"` by default. So, if matrix and density plots have not been setting the aspect ratio to one explicitly, then they *are* running with `"automatic"` aspect ratio.

So, IMHO, for the plots where the aspect ratio is explicitly set to 1 by `@options`, it remains 1. And for the plots where it is not automatically set, `"automatic"` was already the default, so we are not changing anything here.

> As a very gentle review request, could you remove the extra back tick from [here](http://hg.sagemath.org/sage-main/src/f0ee3538887fe739601babb54e177ec5e1133b7a/sage/plot/density_plot.py?at=default#cl-45)?  Same file.  You didn't introduce it but it would be nice not to open a separate ticket for that.

Done.



---

archive/issue_comments_192147.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nTry a weird density plot without the patch and then with it.  I at least think they look different - which is why the original poster had trouble in the first place.",
    "created_at": "2013-10-23T17:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192147",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'>Comment 7:</a>
Try a weird density plot without the patch and then with it.  I at least think they look different - which is why the original poster had trouble in the first place.



---

archive/issue_comments_192148.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@kcrisman](#comment%3A7):\n> Try a weird density plot without the patch and then with it.  I at least think they look different - which is why the original poster had trouble in the first place.\n\nI realize that the problem showed up in the weird plots. My interpretation of it is this - if we set the aspect ratio to automatic before the plot, then matplotlib has no idea of the kind of data it is about to get. I don't know what it does internally. But if we set it after the plot then matplotlib has the data and now it can set the plot parameters appropriately.\n\nIdeally, matplotlib should \"keep in mind\" that the aspect ratio is automatic and needs to be readjusted after the plot.",
    "created_at": "2013-10-23T17:48:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192148",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@kcrisman](#comment%3A7):
> Try a weird density plot without the patch and then with it.  I at least think they look different - which is why the original poster had trouble in the first place.

I realize that the problem showed up in the weird plots. My interpretation of it is this - if we set the aspect ratio to automatic before the plot, then matplotlib has no idea of the kind of data it is about to get. I don't know what it does internally. But if we set it after the plot then matplotlib has the data and now it can set the plot parameters appropriately.

Ideally, matplotlib should "keep in mind" that the aspect ratio is automatic and needs to be readjusted after the plot.



---

archive/issue_comments_192149.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI have opened a bug [upstream](https://github.com/matplotlib/matplotlib/issues/2540).",
    "created_at": "2013-10-23T18:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192149",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:9'>Comment 9:</a>
I have opened a bug [upstream](https://github.com/matplotlib/matplotlib/issues/2540).



---

archive/issue_comments_192150.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2013-10-23T18:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192150",
    "user": "https://github.com/ppurka"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_192151.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nWow, great tracking down!\n\nThat doesn't change that we should have the discussion about whether density plots should have automatic or 1 aspect ratio.  I don't exactly have a horse in the race, but I think that needless API changes are also annoying.",
    "created_at": "2013-10-24T02:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192151",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'>Comment 10:</a>
Wow, great tracking down!

That doesn't change that we should have the discussion about whether density plots should have automatic or 1 aspect ratio.  I don't exactly have a horse in the race, but I think that needless API changes are also annoying.



---

archive/issue_comments_192152.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers deny it's a bug.**",
    "created_at": "2013-10-27T02:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192152",
    "user": "https://github.com/ppurka"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers deny it's a bug.**



---

archive/issue_comments_192153.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@kcrisman](#comment%3A10):\n> That doesn't change that we should have the discussion about whether density plots should have automatic or 1 aspect ratio.  I don't exactly have a horse in the race, but I think that needless API changes are also annoying.\n\nAbout density plots: I think mpl is doing \"the right thing\" when aspect is set to auto. This is not a geometrical object, so I think there we should not have aspect 1 in all cases.\n\nAbout matrix plots: In this case, I think we should interpret an unset aspect ratio as `\"equal\"` aspect ratio. This is already set explicitly in the code currently but this should be handled better. The current patch affects the matrix plots and the images are no longer square.\n\nOther functions where aspect ratio is not set:\n\n* `arrow` - `FancyArrowPatch` from mpl has no aspect option\n* `bezier_path` - `Path` from mpl has no aspect option\n* `complex_plot` - the aspect ratio is not set in our code, and I think it is best left as automatic\n* `plot_field` - I don't see an aspect option in quiver of mpl\n* `step` - IMHO, there is no need for aspect ratio here\n* `text.py` - I think there is no need for aspect ratio here, and `text` in mpl has no such option either.\n\nSo, the only thing this patch affects are the matrix plots, and I think there the code should explicitly set the aspect ratio, i.e., we should introduce either `@options(aspect_ratio=1)` or `@options(aspect_ratio=\"equal\")` in the definition of `matrix_plot`.",
    "created_at": "2013-10-27T12:31:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192153",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@kcrisman](#comment%3A10):
> That doesn't change that we should have the discussion about whether density plots should have automatic or 1 aspect ratio.  I don't exactly have a horse in the race, but I think that needless API changes are also annoying.

About density plots: I think mpl is doing "the right thing" when aspect is set to auto. This is not a geometrical object, so I think there we should not have aspect 1 in all cases.

About matrix plots: In this case, I think we should interpret an unset aspect ratio as `"equal"` aspect ratio. This is already set explicitly in the code currently but this should be handled better. The current patch affects the matrix plots and the images are no longer square.

Other functions where aspect ratio is not set:

* `arrow` - `FancyArrowPatch` from mpl has no aspect option
* `bezier_path` - `Path` from mpl has no aspect option
* `complex_plot` - the aspect ratio is not set in our code, and I think it is best left as automatic
* `plot_field` - I don't see an aspect option in quiver of mpl
* `step` - IMHO, there is no need for aspect ratio here
* `text.py` - I think there is no need for aspect ratio here, and `text` in mpl has no such option either.

So, the only thing this patch affects are the matrix plots, and I think there the code should explicitly set the aspect ratio, i.e., we should introduce either `@options(aspect_ratio=1)` or `@options(aspect_ratio="equal")` in the definition of `matrix_plot`.



---

archive/issue_comments_192154.json:
```json
{
    "body": "Branch: **[u/ppurka/ticket/15315](https://github.com/sagemath/sagetrac-mirror/tree/u/ppurka/ticket/15315)**",
    "created_at": "2014-01-19T13:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192154",
    "user": "https://github.com/ppurka"
}
```

Branch: **[u/ppurka/ticket/15315](https://github.com/sagemath/sagetrac-mirror/tree/u/ppurka/ticket/15315)**



---

archive/issue_comments_192155.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI added the option `aspect_ratio=1` to `matrix_plot` since that is the\ndesired default anyway.",
    "created_at": "2014-01-19T13:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192155",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:14'>Comment 14:</a>
I added the option `aspect_ratio=1` to `matrix_plot` since that is the
desired default anyway.



---

archive/issue_comments_192156.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nNote also [that the mpl ticket has been closed](https://github.com/matplotlib/matplotlib/issues/2540) as a wontfix.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9980c6e1c74473151ec84e123e4865c736986a09\">9980c6e</a></td><td><code>fix aspect_ratio for density_plot</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc5e5126ee9047f0ece1b321f13e735a2e06b52f\">bc5e512</a></td><td><code>make sure that matrix plots have aspect ratio 1</code></td></tr></table>\n",
    "created_at": "2014-01-24T13:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192156",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'>Comment 15:</a>
Note also [that the mpl ticket has been closed](https://github.com/matplotlib/matplotlib/issues/2540) as a wontfix.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9980c6e1c74473151ec84e123e4865c736986a09">9980c6e</a></td><td><code>fix aspect_ratio for density_plot</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc5e5126ee9047f0ece1b321f13e735a2e06b52f">bc5e512</a></td><td><code>make sure that matrix plots have aspect ratio 1</code></td></tr></table>




---

archive/issue_comments_192157.json:
```json
{
    "body": "Commit: **[bc5e512](https://github.com/sagemath/sagetrac-mirror/commit/bc5e5126ee9047f0ece1b321f13e735a2e06b52f)**",
    "created_at": "2014-01-24T13:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192157",
    "user": "https://github.com/kcrisman"
}
```

Commit: **[bc5e512](https://github.com/sagemath/sagetrac-mirror/commit/bc5e5126ee9047f0ece1b321f13e735a2e06b52f)**



---

archive/issue_comments_192158.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nOkay, why did my comment all of a sudden put \"new commits\" below it?  I am confused.",
    "created_at": "2014-01-24T13:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192158",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'>Comment 16:</a>
Okay, why did my comment all of a sudden put "new commits" below it?  I am confused.



---

archive/issue_comments_192159.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@kcrisman](#comment%3A16):\n> Okay, why did my comment all of a sudden put \"new commits\" below it?  I am confused.\n\nThose were the commits I added in [comment:13](#comment%3A13). But due to some bug in trac it didn't appear immediately. It then appears in the next comment. For some reason it didn't appear in my comment. :)\n\nI am not surprised that the mpl ticket has been closed. It requires a massive overhaul to fix it. And they are in the planning stages of that.",
    "created_at": "2014-01-24T16:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192159",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@kcrisman](#comment%3A16):
> Okay, why did my comment all of a sudden put "new commits" below it?  I am confused.

Those were the commits I added in [comment:13](#comment%3A13). But due to some bug in trac it didn't appear immediately. It then appears in the next comment. For some reason it didn't appear in my comment. :)

I am not surprised that the mpl ticket has been closed. It requires a massive overhaul to fix it. And they are in the planning stages of that.



---

archive/issue_events_200400.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200400"
}
```



---

archive/issue_events_200401.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200401"
}
```



---

archive/issue_events_200402.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200402"
}
```



---

archive/issue_events_200403.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200403"
}
```



---

archive/issue_events_200404.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200404"
}
```



---

archive/issue_events_200405.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200405"
}
```



---

archive/issue_comments_192160.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nSorry for taking so very long to get to this...  Just one dumb thing that is easy to fix:\n\n```\n+    Test that matrix plots have aspect ratio one (see :trac:`15315`)\n```\n  needs extra double colon.",
    "created_at": "2014-08-15T06:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192160",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'>Comment 21:</a>
Sorry for taking so very long to get to this...  Just one dumb thing that is easy to fix:

```
+    Test that matrix plots have aspect ratio one (see :trac:`15315`)
```
  needs extra double colon.



---

archive/issue_comments_192161.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0316b80ec189d7d0fc6d519bfa2efd636d1acb5\">a0316b8</a></td><td><code>Merge branch 'u/ppurka/ticket/15315' of trac.sagemath.org:sage into ticket/15315</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cc1beba873ee5898fadaa206cee23cd9be5455f\">2cc1beb</a></td><td><code>fix documentation string</code></td></tr></table>\n",
    "created_at": "2014-08-15T07:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192161",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0316b80ec189d7d0fc6d519bfa2efd636d1acb5">a0316b8</a></td><td><code>Merge branch 'u/ppurka/ticket/15315' of trac.sagemath.org:sage into ticket/15315</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cc1beba873ee5898fadaa206cee23cd9be5455f">2cc1beb</a></td><td><code>fix documentation string</code></td></tr></table>




---

archive/issue_comments_192162.json:
```json
{
    "body": "Changed commit from **[bc5e512](https://github.com/sagemath/sagetrac-mirror/commit/bc5e5126ee9047f0ece1b321f13e735a2e06b52f)** to **[2cc1beb](https://github.com/sagemath/sagetrac-mirror/commit/2cc1beba873ee5898fadaa206cee23cd9be5455f)**",
    "created_at": "2014-08-15T07:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192162",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bc5e512](https://github.com/sagemath/sagetrac-mirror/commit/bc5e5126ee9047f0ece1b321f13e735a2e06b52f)** to **[2cc1beb](https://github.com/sagemath/sagetrac-mirror/commit/2cc1beba873ee5898fadaa206cee23cd9be5455f)**



---

archive/issue_comments_192163.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nThanks. I had forgotten about these tickets.",
    "created_at": "2014-08-15T07:44:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192163",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:23'>Comment 23:</a>
Thanks. I had forgotten about these tickets.



---

archive/issue_events_200406.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-08-15T07:45:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200406"
}
```



---

archive/issue_events_200407.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-08-15T07:45:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200407"
}
```



---

archive/issue_comments_192164.json:
```json
{
    "body": "Changed branch from **[u/ppurka/ticket/15315](https://github.com/sagemath/sagetrac-mirror/tree/u/ppurka/ticket/15315)** to **[2cc1beb](https://github.com/sagemath/sagetrac-mirror/commit/2cc1beba873ee5898fadaa206cee23cd9be5455f)**",
    "created_at": "2014-08-16T09:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15315#issuecomment-192164",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/ppurka/ticket/15315](https://github.com/sagemath/sagetrac-mirror/tree/u/ppurka/ticket/15315)** to **[2cc1beb](https://github.com/sagemath/sagetrac-mirror/commit/2cc1beba873ee5898fadaa206cee23cd9be5455f)**



---

archive/issue_events_200408.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-16T09:32:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200408"
}
```



---

archive/issue_events_200409.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "69c643276d64a24c02c74e01fb04a3855c48ae67",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-08-16T09:32:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15315",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15315#event-200409"
}
```
