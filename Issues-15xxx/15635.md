# Issue 15635: free Pre-Lie algebras

archive/issues_015398.json:
```json
{
    "body": "CC:  sage-combinat @tscrim @darijgr\n\nKeywords: trees, prelie algebra\n\none has shuffle algebras, one could have pre-Lie algebras, as soon as one has rooted trees (#11529)\n\nIssue created by migration from https://trac.sagemath.org/ticket/15635\n\n",
    "closed_at": "2015-05-13T20:11:35Z",
    "created_at": "2014-01-05T16:07:23Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "free Pre-Lie algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15635",
    "user": "https://github.com/fchapoton"
}
```
CC:  sage-combinat @tscrim @darijgr

Keywords: trees, prelie algebra

one has shuffle algebras, one could have pre-Lie algebras, as soon as one has rooted trees (#11529)

Issue created by migration from https://trac.sagemath.org/ticket/15635





---

archive/issue_comments_198471.json:
```json
{
    "body": "Attachment [prelie_algebra_with_several_gen_try1-fc.patch](tarball://root/attachments/some-uuid/ticket15635/prelie_algebra_with_several_gen_try1-fc.patch) by @fchapoton created at 2014-01-05 16:08:22",
    "created_at": "2014-01-05T16:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198471",
    "user": "https://github.com/fchapoton"
}
```

Attachment [prelie_algebra_with_several_gen_try1-fc.patch](tarball://root/attachments/some-uuid/ticket15635/prelie_algebra_with_several_gen_try1-fc.patch) by @fchapoton created at 2014-01-05 16:08:22



---

archive/issue_events_045823.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45823"
}
```



---

archive/issue_events_045824.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45824"
}
```



---

archive/issue_events_045825.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45825"
}
```



---

archive/issue_comments_198472.json:
```json
{
    "body": "First step, a git branch that does not look too bad.\n\n---\nNew commits:",
    "created_at": "2014-06-08T19:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198472",
    "user": "https://github.com/fchapoton"
}
```

First step, a git branch that does not look too bad.

---
New commits:



---

archive/issue_comments_198473.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-08T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198474.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-09T07:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198475.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-09T08:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198476.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-09T08:10:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_045826.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45826"
}
```



---

archive/issue_events_045827.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45827"
}
```



---

archive/issue_comments_198477.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-16T16:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198478.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-16T17:01:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198478",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_198479.json:
```json
{
    "body": "Changing keywords from \"trees\" to \"trees, prelie algebra\".",
    "created_at": "2015-02-16T17:01:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198479",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "trees" to "trees, prelie algebra".



---

archive/issue_events_045828.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-16T17:01:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45828"
}
```



---

archive/issue_events_045829.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-16T17:01:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45829"
}
```



---

archive/issue_comments_198480.json:
```json
{
    "body": "This should be ready, once rooted trees are ok.",
    "created_at": "2015-02-16T17:01:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198480",
    "user": "https://github.com/fchapoton"
}
```

This should be ready, once rooted trees are ok.



---

archive/issue_comments_198481.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-17T15:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198482.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-17T15:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198482",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198483.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-17T15:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198484.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-17T20:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198484",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_198485.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2015-02-17T20:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198485",
    "user": "https://github.com/fchapoton"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_198486.json:
```json
{
    "body": "There is a coercion doctest failing.",
    "created_at": "2015-02-17T20:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198486",
    "user": "https://github.com/fchapoton"
}
```

There is a coercion doctest failing.



---

archive/issue_comments_198487.json:
```json
{
    "body": "Please define the free pre-Lie algebra in a docstring. They might all be equivalent, but there are probably several ways to implement it and label the basis elements.\n\nThis could use some translation:\n\n```\n+ # on aurait besoin ici de LabelledRootedTrees(names)\n+ # pour restreindre les etiquettes aux valeurs autorisees\n```",
    "created_at": "2015-02-25T21:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198487",
    "user": "https://github.com/darijgr"
}
```

Please define the free pre-Lie algebra in a docstring. They might all be equivalent, but there are probably several ways to implement it and label the basis elements.

This could use some translation:

```
+ # on aurait besoin ici de LabelledRootedTrees(names)
+ # pour restreindre les etiquettes aux valeurs autorisees
```



---

archive/issue_comments_198488.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-03T08:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_045830.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-03T09:03:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45830"
}
```



---

archive/issue_events_045831.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-03T09:03:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45831"
}
```



---

archive/issue_comments_198489.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T17:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198490.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T21:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_045832.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-17T18:01:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45832"
}
```



---

archive/issue_events_045833.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-17T18:01:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "milestone": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45833"
}
```



---

archive/issue_comments_198491.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-21T16:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198492.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-21T18:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198492",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_198493.json:
```json
{
    "body": "Here's some comments after taking a look:\n\n- I'm not sure about using `<` to denote the pre-Lie product in Sage, as python does something subtle, but very natural, with triple comparisons:\n\n```\nsage: A = FreePreLieAlgebra(QQ,'x,y')\nsage: A.gens()\nFamily (B[x[]], B[,[]], B[y[]])\nsage: x,a,y = A.gens()\nsage: x < x < x\nB[x[x[]]]\nsage: (x < x) < x\nB[x[x[], x[]]] + B[x[x[x[]]]]\nsage: x < (x < x)\nB[x[x[x[]]]]\nsage: x < x and x < x   # This is equivalent to x < x < x\nB[x[x[]]]\n```\nInstead I think you should let `*` denote the pre-Lie product and have the free pre-Lie algebra be in `MagmaticAlgebras` (perhaps `.Unital()`?). Thus rename `pre_Lie_product_on_basis` to `product_on_basis`.\n\n- You shouldn't need `_coerce_impl` since the default when `_coerce_map_from_` returns `True` is to go through `_element_constructor_`.\n\n- I think you should not use the `__ngens` idiom, but instead use the more explicit `len(self.algebra_generators())` or `self.algebra_generators().cardinality()`.\n\n- For the `return Family(self._alphabet, lambda a: self.term(self.basis().keys()(a)))` should be consistently ordered...",
    "created_at": "2015-04-21T19:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198493",
    "user": "https://github.com/tscrim"
}
```

Here's some comments after taking a look:

- I'm not sure about using `<` to denote the pre-Lie product in Sage, as python does something subtle, but very natural, with triple comparisons:

```
sage: A = FreePreLieAlgebra(QQ,'x,y')
sage: A.gens()
Family (B[x[]], B[,[]], B[y[]])
sage: x,a,y = A.gens()
sage: x < x < x
B[x[x[]]]
sage: (x < x) < x
B[x[x[], x[]]] + B[x[x[x[]]]]
sage: x < (x < x)
B[x[x[x[]]]]
sage: x < x and x < x   # This is equivalent to x < x < x
B[x[x[]]]
```
Instead I think you should let `*` denote the pre-Lie product and have the free pre-Lie algebra be in `MagmaticAlgebras` (perhaps `.Unital()`?). Thus rename `pre_Lie_product_on_basis` to `product_on_basis`.

- You shouldn't need `_coerce_impl` since the default when `_coerce_map_from_` returns `True` is to go through `_element_constructor_`.

- I think you should not use the `__ngens` idiom, but instead use the more explicit `len(self.algebra_generators())` or `self.algebra_generators().cardinality()`.

- For the `return Family(self._alphabet, lambda a: self.term(self.basis().keys()(a)))` should be consistently ordered...



---

archive/issue_comments_198494.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-22T09:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198495.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-29T06:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198495",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198496.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-01T09:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198497.json:
```json
{
    "body": "Thanks Travis for your comments. I have done something for the first three, but I do not\nunderstand the last one.\n\nI removed the shortcut `<` alltogether. Using `*` is almost as good.\n\nI removed `coerced_impl` and it still works.\n\nI used `len(self.algebra_generators())`.",
    "created_at": "2015-05-01T09:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198497",
    "user": "https://github.com/fchapoton"
}
```

Thanks Travis for your comments. I have done something for the first three, but I do not
understand the last one.

I removed the shortcut `<` alltogether. Using `*` is almost as good.

I removed `coerced_impl` and it still works.

I used `len(self.algebra_generators())`.



---

archive/issue_comments_198498.json:
```json
{
    "body": "Thanks! The last one was that line was commented out with a line above it saying about `Family` not returning a consistent ordering, which is not correct as I understand it.\n\nI plan to do a full review over this weekend.",
    "created_at": "2015-05-01T15:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198498",
    "user": "https://github.com/tscrim"
}
```

Thanks! The last one was that line was commented out with a line above it saying about `Family` not returning a consistent ordering, which is not correct as I understand it.

I plan to do a full review over this weekend.



---

archive/issue_comments_198499.json:
```json
{
    "body": "I made some review changes:\n\n- I added `algebras.FreePreLie` and made this the standard entry point.\n- I moved the main explanation doc from the module level to the class. I also made some minor tweaks to the doc overall.\n- I also renamed the file by removing the `s` as this is the standard in Sage AFAIK.\n- I changed the output of `algebra_generators` as per my previous point. The ordering should be consistent as this was something we changed awhile ago.\n- Subsequently, I changed around some things so that it works with infinite generating sets.\n- I changed the `some_elements` and implemented an `an_element` method.\n\nIf you're happy with my changes, then you can set a positive review.\n\nPS/EDIT - It would be nice to have the trees with specified labels, as this would allow the generic implementation of `an_element` and removing of the `_alphabet` parameter (well, pushing it down a level).\n\n---\nNew commits:",
    "created_at": "2015-05-03T06:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198499",
    "user": "https://github.com/tscrim"
}
```

I made some review changes:

- I added `algebras.FreePreLie` and made this the standard entry point.
- I moved the main explanation doc from the module level to the class. I also made some minor tweaks to the doc overall.
- I also renamed the file by removing the `s` as this is the standard in Sage AFAIK.
- I changed the output of `algebra_generators` as per my previous point. The ordering should be consistent as this was something we changed awhile ago.
- Subsequently, I changed around some things so that it works with infinite generating sets.
- I changed the `some_elements` and implemented an `an_element` method.

If you're happy with my changes, then you can set a positive review.

PS/EDIT - It would be nice to have the trees with specified labels, as this would allow the generic implementation of `an_element` and removing of the `_alphabet` parameter (well, pushing it down a level).

---
New commits:



---

archive/issue_comments_198500.json:
```json
{
    "body": "Thanks a lot for your work on that ticket. I have not yet got time to look at your changes seriously.\n\n> - I added `algebras.FreePreLie` and made this the standard entry point.\n\n\n**I do not quite agree**. Most people would not call them algebras, because they are NOT associative\n\n> - I moved the main explanation doc from the module level to the class. I also made some minor tweaks to the doc overall.\n\n\n> - I also renamed the file by removing the `s` as this is the standard in Sage AFAIK.\n\n\nNo problem with removing s\n\n> - I changed the output of `algebra_generators` as per my previous point. The ordering should be consistent as this was something we changed awhile ago.\n> - Subsequently, I changed around some things so that it works with infinite generating sets.\n\n\nGreat !\n\n> - I changed the `some_elements` and implemented an `an_element` method.\n> \n> If you're happy with my changes, then you can set a positive review.\n\n\nThe first point is problematic in my opinion.\n\n> PS/EDIT - It would be nice to have the trees with specified labels, as this would allow the generic implementation of `an_element` and removing of the `_alphabet` parameter (well, pushing it down a level).\n\n\nyes, I agree !",
    "created_at": "2015-05-04T06:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198500",
    "user": "https://github.com/fchapoton"
}
```

Thanks a lot for your work on that ticket. I have not yet got time to look at your changes seriously.

> - I added `algebras.FreePreLie` and made this the standard entry point.


**I do not quite agree**. Most people would not call them algebras, because they are NOT associative

> - I moved the main explanation doc from the module level to the class. I also made some minor tweaks to the doc overall.


> - I also renamed the file by removing the `s` as this is the standard in Sage AFAIK.


No problem with removing s

> - I changed the output of `algebra_generators` as per my previous point. The ordering should be consistent as this was something we changed awhile ago.
> - Subsequently, I changed around some things so that it works with infinite generating sets.


Great !

> - I changed the `some_elements` and implemented an `an_element` method.
> 
> If you're happy with my changes, then you can set a positive review.


The first point is problematic in my opinion.

> PS/EDIT - It would be nice to have the trees with specified labels, as this would allow the generic implementation of `an_element` and removing of the `_alphabet` parameter (well, pushing it down a level).


yes, I agree !



---

archive/issue_comments_198501.json:
```json
{
    "body": "Doc does not build, because of the removal of s was forgotten in module_list",
    "created_at": "2015-05-04T09:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198501",
    "user": "https://github.com/fchapoton"
}
```

Doc does not build, because of the removal of s was forgotten in module_list



---

archive/issue_comments_198502.json:
```json
{
    "body": "corrected the module-list\n\nthere remains the problem about the entry in the catalog.\n\n---\nNew commits:",
    "created_at": "2015-05-05T08:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198502",
    "user": "https://github.com/fchapoton"
}
```

corrected the module-list

there remains the problem about the entry in the catalog.

---
New commits:



---

archive/issue_comments_198503.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-05T18:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198504.json:
```json
{
    "body": "Thanks for fixing the module list (I didn't have time until this afternoon to come back to this).\n\nReplying to [comment:32 chapoton]:\n> > - I added `algebras.FreePreLie` and made this the standard entry point.\n \n> \n> **I do not quite agree**. Most people would not call them algebras, because they are NOT associative\n\n\nI understand your point, but what would people call them, non-associative algebras? The one of the current thoughts is to rename `MagmaticAlgebras` to `Algebras` and add axioms like \"associative\" (#15043). Also, what do you say about [Jordan algebras](http://en.wikipedia.org/wiki/Jordan_algebra) being in the catalog?\n\nIrregardless of nomenclature, I would say that having this as a global entry point doesn't harm anyone as the name is clear (and there's no danger of confusion), it is documented that it not associative, it makes it discoverable, and `FreePreLieAlgebra` in the global namespace IMO adds some clutter.\n\nAnother option would be to create a (stub) category for pre-Lie algebras, werhich might be bett for the long term, and have a method `free` similar to:\n\n```\nsage: Groups().free(names='x,y,z')\nFree Group on generators {x, y, z}\n```\n(and something similar should probably be done for associative unital algebras).",
    "created_at": "2015-05-06T02:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198504",
    "user": "https://github.com/tscrim"
}
```

Thanks for fixing the module list (I didn't have time until this afternoon to come back to this).

Replying to [comment:32 chapoton]:
> > - I added `algebras.FreePreLie` and made this the standard entry point.
 
> 
> **I do not quite agree**. Most people would not call them algebras, because they are NOT associative


I understand your point, but what would people call them, non-associative algebras? The one of the current thoughts is to rename `MagmaticAlgebras` to `Algebras` and add axioms like "associative" (#15043). Also, what do you say about [Jordan algebras](http://en.wikipedia.org/wiki/Jordan_algebra) being in the catalog?

Irregardless of nomenclature, I would say that having this as a global entry point doesn't harm anyone as the name is clear (and there's no danger of confusion), it is documented that it not associative, it makes it discoverable, and `FreePreLieAlgebra` in the global namespace IMO adds some clutter.

Another option would be to create a (stub) category for pre-Lie algebras, werhich might be bett for the long term, and have a method `free` similar to:

```
sage: Groups().free(names='x,y,z')
Free Group on generators {x, y, z}
```
(and something similar should probably be done for associative unital algebras).



---

archive/issue_comments_198505.json:
```json
{
    "body": "* Jordan algebras are not in the catalog, as far as I can see (6.7.beta4)\n\n* if J is a Jordan algebra, then `J in Algebras` returns False\n\nSo I really think that the catalog 'algebras' should be kept for associative algebras.\n\nMaybe this should be discussed on sage-devel or sage-combinat-devel ?",
    "created_at": "2015-05-06T08:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198505",
    "user": "https://github.com/fchapoton"
}
```

* Jordan algebras are not in the catalog, as far as I can see (6.7.beta4)

* if J is a Jordan algebra, then `J in Algebras` returns False

So I really think that the catalog 'algebras' should be kept for associative algebras.

Maybe this should be discussed on sage-devel or sage-combinat-devel ?



---

archive/issue_comments_198506.json:
```json
{
    "body": "Replying to [comment:37 chapoton]:\n> * Jordan algebras are not in the catalog, as far as I can see (6.7.beta4)\n\n\nI guess I forgot to add them...\n\n> * if J is a Jordan algebra, then `J in Algebras` returns False\n\n\nHmm...this would definitely create an mild inconsistency in the current state with `Algebras` being associative and unital (at least in the global namespace; for imports, I would say the implementor should be aware of what assumptions are being made).\n\n> Maybe this should be discussed on sage-devel or sage-combinat-devel ?\n\n\nThis is now https://groups.google.com/forum/#!topic/sage-devel/uXN5619Fg54.",
    "created_at": "2015-05-06T19:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198506",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:37 chapoton]:
> * Jordan algebras are not in the catalog, as far as I can see (6.7.beta4)


I guess I forgot to add them...

> * if J is a Jordan algebra, then `J in Algebras` returns False


Hmm...this would definitely create an mild inconsistency in the current state with `Algebras` being associative and unital (at least in the global namespace; for imports, I would say the implementor should be aware of what assumptions are being made).

> Maybe this should be discussed on sage-devel or sage-combinat-devel ?


This is now https://groups.google.com/forum/#!topic/sage-devel/uXN5619Fg54.



---

archive/issue_comments_198507.json:
```json
{
    "body": "Given the discussion on sage-devel, would you be okay with letting this stay in the algebras catalog?",
    "created_at": "2015-05-09T18:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198507",
    "user": "https://github.com/tscrim"
}
```

Given the discussion on sage-devel, would you be okay with letting this stay in the algebras catalog?



---

archive/issue_comments_198508.json:
```json
{
    "body": "Yes, ok to let it go in the algebra catalog.",
    "created_at": "2015-05-11T07:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198508",
    "user": "https://github.com/fchapoton"
}
```

Yes, ok to let it go in the algebra catalog.



---

archive/issue_comments_198509.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-13T04:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198509",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_198510.json:
```json
{
    "body": "Then positive review.",
    "created_at": "2015-05-13T04:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198510",
    "user": "https://github.com/tscrim"
}
```

Then positive review.



---

archive/issue_events_045834.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-13T20:11:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15635#event-45834"
}
```



---

archive/issue_comments_198511.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-13T20:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15635",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15635#issuecomment-198511",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
