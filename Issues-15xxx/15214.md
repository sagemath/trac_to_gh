# Issue 15214: singular bus error

archive/issues_014977.json:
```json
{
    "assignees": [],
    "body": "During singular documentation build, the file `Definition_of_a_user_defined_type.sing` is executed. This triggers a bus error with singular (3-1-5.p8) from sage 5.12-beta5, but works with singular (3-1-5.p4) from 5.8. Looks like a regression.\n\nThe contents of that file.\n\n```\n  newstruct(\"nt\",\"int a,poly b,string c\");\n  nt A;\n  nt B;\n  A.a=3;\n  A.c=string(A.a);\n  B=A;\n  newstruct(\"t2\",\"nt\",\"string c\");\n  t2 C; C.c=\"t2-c\";\n  A=C;\n  typeof(A);\n  A;\n  // a motivating example ------------------------------------------\n  newstruct(\"IDEAL\",\"ideal I,proc prettyprint\");\n  newstruct(\"HOMOGENEOUS_IDEAL\",\"IDEAL\",\"intvec weights,proc prettyprint\");\n  proc IDEAL_pretty_print(IDEAL I)\n  {\n    \"ideal generated by\";\n    I.I;\n  }\n  proc H_IDEAL_pretty_print(HOMOGENEOUS_IDEAL I)\n  {\n    \"homogeneous ideal generated by\";\n    I.I;\n    \"with weights\";\n    I.weights;\n  }\n  proc p_print(IDEAL I) { I.prettyprint(I); }\n  ring r;\n  IDEAL I;\n  I.I=ideal(x+y2,z);\n  I.prettyprint=IDEAL_pretty_print;\n  HOMOGENEOUS_IDEAL H;\n  H.I=ideal(x,y,z);\n  H.prettyprint=H_IDEAL_pretty_print;\n  H.weights=intvec(1,1,1);\n  p_print(I);\n  p_print(H);\n```\n\nA session (with p8 on 5.12 on sage.math), clearly fails because of 10202.\n\n```\n$ singular /tmp/Definition_of_a_user_defined_type.sing \n                     SINGULAR                                 /  Development\n A Computer Algebra System for Polynomial Computations       /   version 3-1-5\n                                                           0<\n by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \\   Jul 2012\nFB Mathematik der Universitaet, D-67653 Kaiserslautern        \\\nt2\nc=t2-c\nc=\nb=??\na=0\nSingular : signal 11 (v: 3150):\ncurrent line:>> I.prettyprint(I); <<\nSegment fault/Bus error occurred at aa9aec because of 10202 (r:1379708681)\nplease inform the authors\ntrying to restart...\nAuf Wiedersehen.\n```\n\nCC:  @embray\n\nComponent: **packages: standard**\n\nKeywords: **singular segfault bus error**\n\nAuthor: **Felix Salfelder**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15214_\n\n",
    "closed_at": "2018-11-09T17:17:58Z",
    "created_at": "2013-09-20T20:32:46Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/worksforme"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "singular bus error",
    "type": "issue",
    "updated_at": "2018-11-09T17:17:58Z",
    "url": "https://github.com/sagemath/sage/issues/15214",
    "user": "https://github.com/sagetrac-felixs"
}
```
During singular documentation build, the file `Definition_of_a_user_defined_type.sing` is executed. This triggers a bus error with singular (3-1-5.p8) from sage 5.12-beta5, but works with singular (3-1-5.p4) from 5.8. Looks like a regression.

The contents of that file.

```
  newstruct("nt","int a,poly b,string c");
  nt A;
  nt B;
  A.a=3;
  A.c=string(A.a);
  B=A;
  newstruct("t2","nt","string c");
  t2 C; C.c="t2-c";
  A=C;
  typeof(A);
  A;
  // a motivating example ------------------------------------------
  newstruct("IDEAL","ideal I,proc prettyprint");
  newstruct("HOMOGENEOUS_IDEAL","IDEAL","intvec weights,proc prettyprint");
  proc IDEAL_pretty_print(IDEAL I)
  {
    "ideal generated by";
    I.I;
  }
  proc H_IDEAL_pretty_print(HOMOGENEOUS_IDEAL I)
  {
    "homogeneous ideal generated by";
    I.I;
    "with weights";
    I.weights;
  }
  proc p_print(IDEAL I) { I.prettyprint(I); }
  ring r;
  IDEAL I;
  I.I=ideal(x+y2,z);
  I.prettyprint=IDEAL_pretty_print;
  HOMOGENEOUS_IDEAL H;
  H.I=ideal(x,y,z);
  H.prettyprint=H_IDEAL_pretty_print;
  H.weights=intvec(1,1,1);
  p_print(I);
  p_print(H);
```

A session (with p8 on 5.12 on sage.math), clearly fails because of 10202.

```
$ singular /tmp/Definition_of_a_user_defined_type.sing 
                     SINGULAR                                 /  Development
 A Computer Algebra System for Polynomial Computations       /   version 3-1-5
                                                           0<
 by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \   Jul 2012
FB Mathematik der Universitaet, D-67653 Kaiserslautern        \
t2
c=t2-c
c=
b=??
a=0
Singular : signal 11 (v: 3150):
current line:>> I.prettyprint(I); <<
Segment fault/Bus error occurred at aa9aec because of 10202 (r:1379708681)
please inform the authors
trying to restart...
Auf Wiedersehen.
```

CC:  @embray

Component: **packages: standard**

Keywords: **singular segfault bus error**

Author: **Felix Salfelder**

_Issue created by migration from https://trac.sagemath.org/ticket/15214_





---

archive/issue_events_214195.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-09-20T20:32:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214195"
}
```



---

archive/issue_events_214196.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-09-20T20:32:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214196"
}
```



---

archive/issue_events_214197.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-09-20T20:32:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214197"
}
```



---

archive/issue_events_214198.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-09-20T20:32:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214198"
}
```



---

archive/issue_comments_187371.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI can reproduce it in 5.11 and 5.12.beta3 too.",
    "created_at": "2013-09-20T20:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15214#issuecomment-187371",
    "user": "https://github.com/SnarkBoojum"
}
```

<div id="comment:1" align="right">comment:1</div>

I can reproduce it in 5.11 and 5.12.beta3 too.



---

archive/issue_events_214199.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214199"
}
```



---

archive/issue_events_214200.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214200"
}
```



---

archive/issue_events_214201.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214201"
}
```



---

archive/issue_events_214202.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214202"
}
```



---

archive/issue_events_214203.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214203"
}
```



---

archive/issue_events_214204.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214204"
}
```



---

archive/issue_comments_187372.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nobsolete ?",
    "created_at": "2018-11-09T16:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15214#issuecomment-187372",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

obsolete ?



---

archive/issue_events_214205.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-09T16:41:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214205"
}
```



---

archive/issue_events_214206.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-09T16:41:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214206"
}
```



---

archive/issue_comments_187373.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nProbably... Have you tested it?",
    "created_at": "2018-11-09T17:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15214#issuecomment-187373",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

Probably... Have you tested it?



---

archive/issue_comments_187374.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nJust tried it myself.  Seems to work.",
    "created_at": "2018-11-09T17:17:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15214#issuecomment-187374",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

Just tried it myself.  Seems to work.



---

archive/issue_events_214207.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-09T17:17:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214207"
}
```



---

archive/issue_events_214208.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-09T17:17:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "c6c6c6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214208"
}
```



---

archive/issue_events_214209.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-09T17:17:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214209"
}
```



---

archive/issue_events_214210.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-09T17:17:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15214",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15214#event-214210"
}
```
