# Issue 15214: singular bus error

archive/issues_014977.json:
```json
{
    "body": "During singular documentation build, the file `Definition_of_a_user_defined_type.sing` is executed. This triggers a bus error with singular (3-1-5.p8) from sage 5.12-beta5, but works with singular (3-1-5.p4) from 5.8. Looks like a regression.\n\nThe contents of that file.\n\n```\n  newstruct(\"nt\",\"int a,poly b,string c\");\n  nt A;\n  nt B;\n  A.a=3;\n  A.c=string(A.a);\n  B=A;\n  newstruct(\"t2\",\"nt\",\"string c\");\n  t2 C; C.c=\"t2-c\";\n  A=C;\n  typeof(A);\n  A;\n  // a motivating example ------------------------------------------\n  newstruct(\"IDEAL\",\"ideal I,proc prettyprint\");\n  newstruct(\"HOMOGENEOUS_IDEAL\",\"IDEAL\",\"intvec weights,proc prettyprint\");\n  proc IDEAL_pretty_print(IDEAL I)\n  {\n    \"ideal generated by\";\n    I.I;\n  }\n  proc H_IDEAL_pretty_print(HOMOGENEOUS_IDEAL I)\n  {\n    \"homogeneous ideal generated by\";\n    I.I;\n    \"with weights\";\n    I.weights;\n  }\n  proc p_print(IDEAL I) { I.prettyprint(I); }\n  ring r;\n  IDEAL I;\n  I.I=ideal(x+y2,z);\n  I.prettyprint=IDEAL_pretty_print;\n  HOMOGENEOUS_IDEAL H;\n  H.I=ideal(x,y,z);\n  H.prettyprint=H_IDEAL_pretty_print;\n  H.weights=intvec(1,1,1);\n  p_print(I);\n  p_print(H);\n```\n\nA session (with p8 on 5.12 on sage.math), clearly fails because of 10202.\n\n```\n$ singular /tmp/Definition_of_a_user_defined_type.sing \n                     SINGULAR                                 /  Development\n A Computer Algebra System for Polynomial Computations       /   version 3-1-5\n                                                           0<\n by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \\   Jul 2012\nFB Mathematik der Universitaet, D-67653 Kaiserslautern        \\\nt2\nc=t2-c\nc=\nb=??\na=0\nSingular : signal 11 (v: 3150):\ncurrent line:>> I.prettyprint(I); <<\nSegment fault/Bus error occurred at aa9aec because of 10202 (r:1379708681)\nplease inform the authors\ntrying to restart...\nAuf Wiedersehen.\n```\n\n**CC:**  @embray\n\n**Keywords:** singular segfault bus error\n\n**Author:** Felix Salfelder\n\nIssue created by migration from https://trac.sagemath.org/ticket/15214\n\n",
    "closed_at": "2018-11-09T17:17:58Z",
    "created_at": "2013-09-20T20:32:46Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug",
        "worksforme",
        "invalid"
    ],
    "title": "singular bus error",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15214",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```
During singular documentation build, the file `Definition_of_a_user_defined_type.sing` is executed. This triggers a bus error with singular (3-1-5.p8) from sage 5.12-beta5, but works with singular (3-1-5.p4) from 5.8. Looks like a regression.

The contents of that file.

```
  newstruct("nt","int a,poly b,string c");
  nt A;
  nt B;
  A.a=3;
  A.c=string(A.a);
  B=A;
  newstruct("t2","nt","string c");
  t2 C; C.c="t2-c";
  A=C;
  typeof(A);
  A;
  // a motivating example ------------------------------------------
  newstruct("IDEAL","ideal I,proc prettyprint");
  newstruct("HOMOGENEOUS_IDEAL","IDEAL","intvec weights,proc prettyprint");
  proc IDEAL_pretty_print(IDEAL I)
  {
    "ideal generated by";
    I.I;
  }
  proc H_IDEAL_pretty_print(HOMOGENEOUS_IDEAL I)
  {
    "homogeneous ideal generated by";
    I.I;
    "with weights";
    I.weights;
  }
  proc p_print(IDEAL I) { I.prettyprint(I); }
  ring r;
  IDEAL I;
  I.I=ideal(x+y2,z);
  I.prettyprint=IDEAL_pretty_print;
  HOMOGENEOUS_IDEAL H;
  H.I=ideal(x,y,z);
  H.prettyprint=H_IDEAL_pretty_print;
  H.weights=intvec(1,1,1);
  p_print(I);
  p_print(H);
```

A session (with p8 on 5.12 on sage.math), clearly fails because of 10202.

```
$ singular /tmp/Definition_of_a_user_defined_type.sing 
                     SINGULAR                                 /  Development
 A Computer Algebra System for Polynomial Computations       /   version 3-1-5
                                                           0<
 by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \   Jul 2012
FB Mathematik der Universitaet, D-67653 Kaiserslautern        \
t2
c=t2-c
c=
b=??
a=0
Singular : signal 11 (v: 3150):
current line:>> I.prettyprint(I); <<
Segment fault/Bus error occurred at aa9aec because of 10202 (r:1379708681)
please inform the authors
trying to restart...
Auf Wiedersehen.
```

**CC:**  @embray

**Keywords:** singular segfault bus error

**Author:** Felix Salfelder

Issue created by migration from https://trac.sagemath.org/ticket/15214





---

archive/issue_comments_189791.json:
```json
{
    "body": "<a id='comment:1'></a>\nI can reproduce it in 5.11 and 5.12.beta3 too.",
    "created_at": "2013-09-20T20:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15214#issuecomment-189791",
    "user": "https://trac.sagemath.org/admin/accounts/users/Snark"
}
```

<a id='comment:1'></a>
I can reproduce it in 5.11 and 5.12.beta3 too.



---

archive/issue_events_133699.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133699"
}
```



---

archive/issue_events_133700.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133700"
}
```



---

archive/issue_events_133701.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133701"
}
```



---

archive/issue_events_133702.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133702"
}
```



---

archive/issue_events_133703.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133703"
}
```



---

archive/issue_events_133704.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133704"
}
```



---

archive/issue_comments_189792.json:
```json
{
    "body": "<a id='comment:5'></a>\nobsolete ?",
    "created_at": "2018-11-09T16:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15214#issuecomment-189792",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
obsolete ?



---

archive/issue_events_133705.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-09T16:41:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133705"
}
```



---

archive/issue_events_133706.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-09T16:41:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133706"
}
```



---

archive/issue_comments_189793.json:
```json
{
    "body": "<a id='comment:6'></a>\nProbably... Have you tested it?",
    "created_at": "2018-11-09T17:14:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15214#issuecomment-189793",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
Probably... Have you tested it?



---

archive/issue_comments_189794.json:
```json
{
    "body": "<a id='comment:7'></a>\nJust tried it myself.  Seems to work.",
    "created_at": "2018-11-09T17:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15214#issuecomment-189794",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Just tried it myself.  Seems to work.



---

archive/issue_events_133707.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-09T17:17:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "label": "worksforme",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133707"
}
```



---

archive/issue_events_133708.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-09T17:17:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133708"
}
```



---

archive/issue_events_133709.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-09T17:17:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15214",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15214#event-133709"
}
```
