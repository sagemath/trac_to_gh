# Issue 15375: Extended Affine Weyl Groups SD40

archive/issues_015138.json:
```json
{
    "body": "The first version of this patch implementing Affine Weyl Groups was written during Sage Days 40. The original contributers were Daniel Bump, Dan Orr, Anne Schilling, Mark Shimozono, Nicolas Thiery. Subsequently Mark Shimozono added multiple realizations and twisted types.\n\nAssignee: @dwbump\n\nCC:  sage-combinat @anneschilling @nthiery mshimo @tscrim\n\nKeywords: days54, coxeter, days64, days65\n\nReviewer: Dan Bump, Anne Schilling\n\nAuthor: Daniel Bump, Dan Orr, Anne Schilling, Mark Shimozono, Nicolas M. Thi\u00e9ry\n\nBranch: f54934489e6183a647a9195d277a1a9344ac831b\n\nDependencies: #10963, #14102\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15375\n\n",
    "closed_at": "2015-07-04T08:19:58Z",
    "created_at": "2013-11-07T22:27:47Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Extended Affine Weyl Groups SD40",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15375",
    "user": "https://github.com/dwbump"
}
```
The first version of this patch implementing Affine Weyl Groups was written during Sage Days 40. The original contributers were Daniel Bump, Dan Orr, Anne Schilling, Mark Shimozono, Nicolas Thiery. Subsequently Mark Shimozono added multiple realizations and twisted types.

Assignee: @dwbump

CC:  sage-combinat @anneschilling @nthiery mshimo @tscrim

Keywords: days54, coxeter, days64, days65

Reviewer: Dan Bump, Anne Schilling

Author: Daniel Bump, Dan Orr, Anne Schilling, Mark Shimozono, Nicolas M. Thi√©ry

Branch: f54934489e6183a647a9195d277a1a9344ac831b

Dependencies: #10963, #14102

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15375





---

archive/issue_comments_193866.json:
```json
{
    "body": "Set assignee to @dwbump.",
    "created_at": "2013-11-07T22:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193866",
    "user": "https://github.com/dwbump"
}
```

Set assignee to @dwbump.



---

archive/issue_comments_193867.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2013-11-07T22:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193867",
    "user": "https://github.com/dwbump"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_193868.json:
```json
{
    "body": "Attachment [trac_15375-extended_affine_weyl_groups_sd40.patch](tarball://root/attachments/some-uuid/ticket15375/trac_15375-extended_affine_weyl_groups_sd40.patch) by @dwbump created at 2013-11-07 23:42:47\n\nImplements Extended Affine Iwahori Hecke Algebras",
    "created_at": "2013-11-07T23:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193868",
    "user": "https://github.com/dwbump"
}
```

Attachment [trac_15375-extended_affine_weyl_groups_sd40.patch](tarball://root/attachments/some-uuid/ticket15375/trac_15375-extended_affine_weyl_groups_sd40.patch) by @dwbump created at 2013-11-07 23:42:47

Implements Extended Affine Iwahori Hecke Algebras



---

archive/issue_events_044665.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2013-12-17T18:39:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44665"
}
```



---

archive/issue_events_044666.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44666"
}
```



---

archive/issue_events_044667.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44667"
}
```



---

archive/issue_comments_193869.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2014-02-04T06:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193869",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_comments_193870.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-07T18:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193871.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-12T14:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193872.json:
```json
{
    "body": "<a id='comment:11'></a>Doctests now pass",
    "created_at": "2014-02-12T14:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193872",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:11'></a>Doctests now pass



---

archive/issue_comments_193873.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-13T04:28:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193873",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193874.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-25T15:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193874",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193875.json:
```json
{
    "body": "Changing keywords from \"days54\" to \"days54, coxeter\".",
    "created_at": "2014-04-04T15:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193875",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "days54" to "days54, coxeter".



---

archive/issue_comments_193876.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-10T18:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193876",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_044668.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44668"
}
```



---

archive/issue_events_044669.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44669"
}
```



---

archive/issue_comments_193877.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-15T00:04:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193877",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193878.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-15T19:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193879.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-27T02:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193879",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_044670.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44670"
}
```



---

archive/issue_events_044671.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44671"
}
```



---

archive/issue_comments_193880.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-18T22:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193881.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-18T22:30:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193881",
    "user": "https://github.com/anneschilling"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_193882.json:
```json
{
    "body": "Changing keywords from \"days54, coxeter\" to \"days54, coxeter, days64\".",
    "created_at": "2015-03-18T22:30:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193882",
    "user": "https://github.com/anneschilling"
}
```

Changing keywords from "days54, coxeter" to "days54, coxeter, days64".



---

archive/issue_comments_193883.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-18T23:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193883",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193884.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T00:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193885.json:
```json
{
    "body": "<a id='comment:27'></a>All tests in combinat/root_system pass.",
    "created_at": "2015-03-20T13:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193885",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:27'></a>All tests in combinat/root_system pass.



---

archive/issue_comments_193886.json:
```json
{
    "body": "<a id='comment:28'></a>We should add a line\n\n`sage/combinat/root_system/extended_affine_weyl_group`\n\nto `doc/en/reference/combinat/module_list.rst` to get the documentation\ninto the reference manual. However if we do this we get an error:\n\n```\nOSError: [combinat ] extended_affine_weyl_group.py:docstring of \nExtendedAffineWeylGroup:11: \nERROR: The \"TOPIC\" directive may not be used within topics or body elements.\n```\n\nI don't find TOPIC used very much in the sage documentation. I do find it used\nin combinat/root_system/plot.py, which is a standalone tutorial. Maybe it\ncan't be used in a docstring. I hoped that changing TOPIC to RUBRIC would work, \nbut I tried it and it doesn't.\n\nI'm leaving the status \"needs work\" since the documentation needs to compile.\n\n(Maybe the problem is the double colon after TOPIC. I don't have time to\ntry that now.)",
    "created_at": "2015-03-24T22:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193886",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:28'></a>We should add a line

`sage/combinat/root_system/extended_affine_weyl_group`

to `doc/en/reference/combinat/module_list.rst` to get the documentation
into the reference manual. However if we do this we get an error:

```
OSError: [combinat ] extended_affine_weyl_group.py:docstring of 
ExtendedAffineWeylGroup:11: 
ERROR: The "TOPIC" directive may not be used within topics or body elements.
```

I don't find TOPIC used very much in the sage documentation. I do find it used
in combinat/root_system/plot.py, which is a standalone tutorial. Maybe it
can't be used in a docstring. I hoped that changing TOPIC to RUBRIC would work, 
but I tried it and it doesn't.

I'm leaving the status "needs work" since the documentation needs to compile.

(Maybe the problem is the double colon after TOPIC. I don't have time to
try that now.)



---

archive/issue_comments_193887.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-03-24T22:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193887",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_193888.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-26T19:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193889.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-03-26T19:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193889",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_193890.json:
```json
{
    "body": "<a id='comment:31'></a>I removed the double colon after TOPIC so that the documentation builds. I also added extended_affine_weyl_group to reference/combinat/module_list and combinat/root_system/__init__.py.\n\nAs far as I know the patch is good now and I've changed the status back to needs review.",
    "created_at": "2015-03-26T19:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193890",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:31'></a>I removed the double colon after TOPIC so that the documentation builds. I also added extended_affine_weyl_group to reference/combinat/module_list and combinat/root_system/__init__.py.

As far as I know the patch is good now and I've changed the status back to needs review.



---

archive/issue_comments_193891.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-03-27T02:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193891",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_193892.json:
```json
{
    "body": "<a id='comment:32'></a>Since some docstrings don't have doctests I'm changing the status back to \"needs work\"",
    "created_at": "2015-03-27T02:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193892",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:32'></a>Since some docstrings don't have doctests I'm changing the status back to "needs work"



---

archive/issue_comments_193893.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-21T04:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193893",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_044672.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2015-04-27T12:36:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44672"
}
```



---

archive/issue_events_044673.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2015-04-27T12:36:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44673"
}
```



---

archive/issue_comments_193894.json:
```json
{
    "body": "<a id='comment:35'></a>To facilitate review, here is a link to a build of documentation.\n\n!http://sporadic.stanford.edu/reference1/combinat/sage/combinat/root_system/extended_affine_weyl_group.html",
    "created_at": "2015-04-28T22:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193894",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:35'></a>To facilitate review, here is a link to a build of documentation.

!http://sporadic.stanford.edu/reference1/combinat/sage/combinat/root_system/extended_affine_weyl_group.html



---

archive/issue_comments_193895.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-28T22:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193896.json:
```json
{
    "body": "<a id='comment:37'></a>I rebased on the latest development version and will look what else needs to be done to finalize this patch!\n\nAnne",
    "created_at": "2015-04-28T22:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193896",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:37'></a>I rebased on the latest development version and will look what else needs to be done to finalize this patch!

Anne



---

archive/issue_comments_193897.json:
```json
{
    "body": "<a id='comment:38'></a>Here are some comments on the patch. Mark, can you work on them so we can review them?\n\n- There are several methods in `ExtendedAffineWeylGroup_Class` that do not have documentation or tests.\n\n- I remember that we talked about this at Sage Days 64: can we get rid of `to_ambient` in all the various places?\n\n- `fundamental_groups.py` also does not have full documentation coverage!\n\n- Also\n\n```\npyflakes extended_affine_weyl_group.py\nextended_affine_weyl_group.py:940: undefined name 'Infinity'\n```\n\n- Many methods in `sage.groups.group_semidirect_product.py` have no documentation.\n\nBest,\n\nAnne",
    "created_at": "2015-04-29T03:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193897",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:38'></a>Here are some comments on the patch. Mark, can you work on them so we can review them?

- There are several methods in `ExtendedAffineWeylGroup_Class` that do not have documentation or tests.

- I remember that we talked about this at Sage Days 64: can we get rid of `to_ambient` in all the various places?

- `fundamental_groups.py` also does not have full documentation coverage!

- Also

```
pyflakes extended_affine_weyl_group.py
extended_affine_weyl_group.py:940: undefined name 'Infinity'
```

- Many methods in `sage.groups.group_semidirect_product.py` have no documentation.

Best,

Anne



---

archive/issue_comments_193898.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-29T03:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193898",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193899.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-28T13:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193900.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-31T10:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193901.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-31T18:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193901",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193902.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-01T07:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193903.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-10T16:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193904.json:
```json
{
    "body": "<a id='comment:45'></a>Hi Mark,\n\nI see that `reflection_to_root` is changed in this branch. Did you rebase it on top of `http://trac.sagemath.org/ticket/18634`?\n\nAnne",
    "created_at": "2015-06-11T15:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193904",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:45'></a>Hi Mark,

I see that `reflection_to_root` is changed in this branch. Did you rebase it on top of `http://trac.sagemath.org/ticket/18634`?

Anne



---

archive/issue_comments_193905.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-11T16:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193905",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193906.json:
```json
{
    "body": "<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-11T16:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193906",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193907.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-11T17:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193908.json:
```json
{
    "body": "<a id='comment:49'></a>Please add what the INPUT is in the following methods in the extended_affine_weyl_group:\n\napply_simple_projection\ncoset_representative\nface_data\naction\ntranslation_group_morphism\nsimple_reflection\nbruhat_le\n\nThere are certain methods that occur multiple times with code that looks only\nminimally different (for example in `has_descent` it looks like that only left and\nright have changed). Could you explain why one needs the methods in each realization\nseparately rather than having one general one.\n\nSame in src/sage/groups/group_exp.py. There are methods where some of the input needs to be explained.",
    "created_at": "2015-06-11T17:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193908",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:49'></a>Please add what the INPUT is in the following methods in the extended_affine_weyl_group:

apply_simple_projection
coset_representative
face_data
action
translation_group_morphism
simple_reflection
bruhat_le

There are certain methods that occur multiple times with code that looks only
minimally different (for example in `has_descent` it looks like that only left and
right have changed). Could you explain why one needs the methods in each realization
separately rather than having one general one.

Same in src/sage/groups/group_exp.py. There are methods where some of the input needs to be explained.



---

archive/issue_comments_193909.json:
```json
{
    "body": "Changing keywords from \"days54, coxeter, days64\" to \"days54, coxeter, days64, days65\".",
    "created_at": "2015-06-12T20:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193909",
    "user": "https://github.com/anneschilling"
}
```

Changing keywords from "days54, coxeter, days64" to "days54, coxeter, days64, days65".



---

archive/issue_comments_193910.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-13T21:13:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193910",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193911.json:
```json
{
    "body": "<a id='comment:52'></a>Since certain methods are much more efficiently computed in certain realizations,\nthe generic implementation just consists of converting to the favorable\nrealization, doing the computation there using a custom implementation,\nand then converting back. But since converting is often expensive, sometimes\na direct algorithm is given for more than one realization. This is the case for :meth:has_descent.",
    "created_at": "2015-06-13T21:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193911",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:52'></a>Since certain methods are much more efficiently computed in certain realizations,
the generic implementation just consists of converting to the favorable
realization, doing the computation there using a custom implementation,
and then converting back. But since converting is often expensive, sometimes
a direct algorithm is given for more than one realization. This is the case for :meth:has_descent.



---

archive/issue_comments_193912.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-13T21:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193912",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_193913.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-14T01:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193913",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193914.json:
```json
{
    "body": "<a id='comment:54'></a>Hi Mark,\n\nI rebased your patch on top of sage-6.8.beta4. So please pull the changes before you keep editing!\n\nI see this in the diff without a doc test and a comment:\n\n```\ndiff --git a/src/sage/combinat/root_system/type_affine.py b/src/sage/combinat/root_system/type_affine.py\nindex f505c47..c19136e 100644\n--- a/src/sage/combinat/root_system/type_affine.py\n+++ b/src/sage/combinat/root_system/type_affine.py\n@@ -419,6 +419,14 @@ class AmbientSpace(CombinatorialFreeModule):\n         return vector(list(vector(classical._plot_projection(classical(x)))) +\n                       [x[\"deltacheck\"]])\n \n+    def from_vector_notation(self, weight, style=\"lattice\"):\n+        \"\"\"\n+        ..TODO:: CHECK THIS STUPID DEFAULT IMPLEMENTATION WITH DAN\n+\n+        This is in particular used to compute demazure-lusztig characters\n+        \"\"\"\n+        return weight\n```\nCan this be taken out?\n\nWhen I tried the following, I got an error message\n\n```\nsage: E.inject_shorthands()\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-28-d05fc29a74b6> in <module>()\n----> 1 E.inject_shorthands()\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/categories/sets_cat.pyc in inject_shorthands(self, verbose)\n   2351                 from sage.misc.misc import inject_variable\n   2352                 if not hasattr(self, \"_shorthands\"):\n-> 2353                     raise NotImplementedError(\"no shorthands defined for {}\".format(self))\n   2354                 for shorthand in self._shorthands:\n   2355                     realization = getattr(self, shorthand)()\n\nNotImplementedError: no shorthands defined for Extended affine Weyl group of type ['A', 2, 1]\n```\nDo you want shorthands for all the realizations?\n\nSimilarly,\n\n```\nsage: E.group_generators()\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-44-d96974f8367c> in <module>()\n----> 1 E.group_generators()\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/categories/groups.pyc in group_generators(self)\n    108                 return Family(self.gens())\n    109             except AttributeError:\n--> 110                 raise NotImplementedError(\"no generators are implemented for this group\")\n    111 \n    112         def monoid_generators(self):\n\nNotImplementedError: no generators are implemented for this group\n```\n\nBest,\n\nAnne",
    "created_at": "2015-06-14T01:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193914",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:54'></a>Hi Mark,

I rebased your patch on top of sage-6.8.beta4. So please pull the changes before you keep editing!

I see this in the diff without a doc test and a comment:

```
diff --git a/src/sage/combinat/root_system/type_affine.py b/src/sage/combinat/root_system/type_affine.py
index f505c47..c19136e 100644
--- a/src/sage/combinat/root_system/type_affine.py
+++ b/src/sage/combinat/root_system/type_affine.py
@@ -419,6 +419,14 @@ class AmbientSpace(CombinatorialFreeModule):
         return vector(list(vector(classical._plot_projection(classical(x)))) +
                       [x["deltacheck"]])
 
+    def from_vector_notation(self, weight, style="lattice"):
+        """
+        ..TODO:: CHECK THIS STUPID DEFAULT IMPLEMENTATION WITH DAN
+
+        This is in particular used to compute demazure-lusztig characters
+        """
+        return weight
```
Can this be taken out?

When I tried the following, I got an error message

```
sage: E.inject_shorthands()
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-28-d05fc29a74b6> in <module>()
----> 1 E.inject_shorthands()

/Applications/sage/local/lib/python2.7/site-packages/sage/categories/sets_cat.pyc in inject_shorthands(self, verbose)
   2351                 from sage.misc.misc import inject_variable
   2352                 if not hasattr(self, "_shorthands"):
-> 2353                     raise NotImplementedError("no shorthands defined for {}".format(self))
   2354                 for shorthand in self._shorthands:
   2355                     realization = getattr(self, shorthand)()

NotImplementedError: no shorthands defined for Extended affine Weyl group of type ['A', 2, 1]
```
Do you want shorthands for all the realizations?

Similarly,

```
sage: E.group_generators()
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-44-d96974f8367c> in <module>()
----> 1 E.group_generators()

/Applications/sage/local/lib/python2.7/site-packages/sage/categories/groups.pyc in group_generators(self)
    108                 return Family(self.gens())
    109             except AttributeError:
--> 110                 raise NotImplementedError("no generators are implemented for this group")
    111 
    112         def monoid_generators(self):

NotImplementedError: no generators are implemented for this group
```

Best,

Anne



---

archive/issue_events_044674.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2015-06-14T01:54:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44674"
}
```



---

archive/issue_events_044675.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2015-06-14T01:54:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44675"
}
```



---

archive/issue_comments_193915.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-14T01:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193915",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_193916.json:
```json
{
    "body": "<a id='comment:56'></a>The rebasing weirdness is coming from someone else's code.\n\nFor shorthands, the realizations are created by the methods\nPW0(), W0P(), WF(), FW(), PvW0(), and W0Pv().\nUm, do you think this is insufficiently short?\n\nImplementing generators is easy and I can add that.",
    "created_at": "2015-06-14T02:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193916",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:56'></a>The rebasing weirdness is coming from someone else's code.

For shorthands, the realizations are created by the methods
PW0(), W0P(), WF(), FW(), PvW0(), and W0Pv().
Um, do you think this is insufficiently short?

Implementing generators is easy and I can add that.



---

archive/issue_comments_193917.json:
```json
{
    "body": "<a id='comment:57'></a>Replying to [comment:56 mshimo]:\n> The rebasing weirdness is coming from someone else's code.\n\n\nYou mean the method from_vector_notation? It looks like it belongs to\nthis patch, but it might be super old. Should we take it out?\n \n> For shorthands, the realizations are created by the methods\n> PW0(), W0P(), WF(), FW(), PvW0(), and W0Pv().\n> Um, do you think this is insufficiently short?\n\n\nWell, I just tried out methods that E.<tab> offered and many of them are not implemented.\n\n> Implementing generators is easy and I can add that.\n\n\nThat would be good!\n\nDan, could you also do a final review of this patch? I think it is getting close to being ready.\n>",
    "created_at": "2015-06-14T02:55:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193917",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:57'></a>Replying to [comment:56 mshimo]:
> The rebasing weirdness is coming from someone else's code.


You mean the method from_vector_notation? It looks like it belongs to
this patch, but it might be super old. Should we take it out?
 
> For shorthands, the realizations are created by the methods
> PW0(), W0P(), WF(), FW(), PvW0(), and W0Pv().
> Um, do you think this is insufficiently short?


Well, I just tried out methods that E.<tab> offered and many of them are not implemented.

> Implementing generators is easy and I can add that.


That would be good!

Dan, could you also do a final review of this patch? I think it is getting close to being ready.
>



---

archive/issue_comments_193918.json:
```json
{
    "body": "<a id='comment:58'></a>I'll have a look.",
    "created_at": "2015-06-14T13:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193918",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:58'></a>I'll have a look.



---

archive/issue_comments_193919.json:
```json
{
    "body": "<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-14T14:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193920.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-15T00:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193921.json:
```json
{
    "body": "<a id='comment:61'></a>The various realizations should now have a generators method.",
    "created_at": "2015-06-15T00:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193921",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:61'></a>The various realizations should now have a generators method.



---

archive/issue_comments_193922.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-15T15:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193923.json:
```json
{
    "body": "<a id='comment:63'></a>I added a list method for the fundamental groups. I am not sure that I did this entirely correctly (that is, implementing the correct part of the category framework).\nI just added a method and added finiteness information to the category.",
    "created_at": "2015-06-15T15:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193923",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:63'></a>I added a list method for the fundamental groups. I am not sure that I did this entirely correctly (that is, implementing the correct part of the category framework).
I just added a method and added finiteness information to the category.



---

archive/issue_comments_193924.json:
```json
{
    "body": "<a id='comment:64'></a>Hi Mark,\n\nDoes this address my original question about\n\n```\nsage: E=ExtendedAffineWeylGroup(['A',2,1])\nsage: E.group_generators()\n```\nor are you fixing something else?\n\nShall we remove `from_vector_notation`?\n\nBest,\n\nAnne",
    "created_at": "2015-06-15T15:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193924",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:64'></a>Hi Mark,

Does this address my original question about

```
sage: E=ExtendedAffineWeylGroup(['A',2,1])
sage: E.group_generators()
```
or are you fixing something else?

Shall we remove `from_vector_notation`?

Best,

Anne



---

archive/issue_comments_193925.json:
```json
{
    "body": "<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-15T15:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193925",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193926.json:
```json
{
    "body": "<a id='comment:66'></a>Get rid of from_vector_notation.\n\nGroup generators are not relevant for E.\nE is not an actual realization.\n\nE.PW0() is a group and so on.\n\nThe list method is related to finiteness\n(saying \"x in G\" makes sense if G is a finite group, and iterating over x in G\nuses the list method). I somehow got on the wrong\nbranch and unfixed some stuff and had to refix it.",
    "created_at": "2015-06-15T16:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193926",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:66'></a>Get rid of from_vector_notation.

Group generators are not relevant for E.
E is not an actual realization.

E.PW0() is a group and so on.

The list method is related to finiteness
(saying "x in G" makes sense if G is a finite group, and iterating over x in G
uses the list method). I somehow got on the wrong
branch and unfixed some stuff and had to refix it.



---

archive/issue_comments_193927.json:
```json
{
    "body": "<a id='comment:67'></a>As far as E.group_generators() is concerned, one could\ncall the default realization of E and invoke its \"generators\" method.",
    "created_at": "2015-06-15T16:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193927",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:67'></a>As far as E.group_generators() is concerned, one could
call the default realization of E and invoke its "generators" method.



---

archive/issue_comments_193928.json:
```json
{
    "body": "<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-15T17:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193928",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193929.json:
```json
{
    "body": "<a id='comment:69'></a>Replying to [comment:66 mshimo]:\n> Get rid of from_vector_notation.\n\n\nI got rid of it in my last commit.\n\n> Group generators are not relevant for E.\n> E is not an actual realization.\n> \n> E.PW0() is a group and so on.\n\n\nBut even for that it does not work for me:\n\n```\nsage: E=ExtendedAffineWeylGroup(['A',2,1])\nsage: PW0=E.PW0()\nsage: PW0.group_generators()\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-3-d69de239d91b> in <module>()\n----> 1 PW0.group_generators()\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/categories/groups.pyc in group_generators(self)\n    108                 return Family(self.gens())\n    109             except AttributeError:\n--> 110                 raise NotImplementedError(\"no generators are implemented for this group\")\n    111 \n    112         def monoid_generators(self):\n\nNotImplementedError: no generators are implemented for this group\n```",
    "created_at": "2015-06-15T17:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193929",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:69'></a>Replying to [comment:66 mshimo]:
> Get rid of from_vector_notation.


I got rid of it in my last commit.

> Group generators are not relevant for E.
> E is not an actual realization.
> 
> E.PW0() is a group and so on.


But even for that it does not work for me:

```
sage: E=ExtendedAffineWeylGroup(['A',2,1])
sage: PW0=E.PW0()
sage: PW0.group_generators()
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-3-d69de239d91b> in <module>()
----> 1 PW0.group_generators()

/Applications/sage/local/lib/python2.7/site-packages/sage/categories/groups.pyc in group_generators(self)
    108                 return Family(self.gens())
    109             except AttributeError:
--> 110                 raise NotImplementedError("no generators are implemented for this group")
    111 
    112         def monoid_generators(self):

NotImplementedError: no generators are implemented for this group
```



---

archive/issue_comments_193930.json:
```json
{
    "body": "<a id='comment:70'></a>Sorry, I added a method \"generators\" not \"group_generators\". \nI think I did this to be consistent with the lattices\n(such as weight lattices), which use \"gens\" not \"group_generators\".",
    "created_at": "2015-06-15T19:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193930",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:70'></a>Sorry, I added a method "generators" not "group_generators". 
I think I did this to be consistent with the lattices
(such as weight lattices), which use "gens" not "group_generators".



---

archive/issue_comments_193931.json:
```json
{
    "body": "<a id='comment:71'></a>Replying to [comment:70 mshimo]:\n> Sorry, I added a method \"generators\" not \"group_generators\". \n> I think I did this to be consistent with the lattices\n> (such as weight lattices), which use \"gens\" not \"group_generators\".\n\n\nI would suggest to be consistent with what the category code asks for (in this case group_generators) since this method appears when one hits tab.completion! Otherwise it is confusing to the user.\n\nOther than this, I will leave the final review to Dan!",
    "created_at": "2015-06-15T21:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193931",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:71'></a>Replying to [comment:70 mshimo]:
> Sorry, I added a method "generators" not "group_generators". 
> I think I did this to be consistent with the lattices
> (such as weight lattices), which use "gens" not "group_generators".


I would suggest to be consistent with what the category code asks for (in this case group_generators) since this method appears when one hits tab.completion! Otherwise it is confusing to the user.

Other than this, I will leave the final review to Dan!



---

archive/issue_comments_193932.json:
```json
{
    "body": "<a id='comment:72'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-15T23:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:72'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193933.json:
```json
{
    "body": "<a id='comment:73'></a>I fixed the group_generators methods.\nNote that I had to mess with sage.categories.finite_groups.",
    "created_at": "2015-06-15T23:54:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193933",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:73'></a>I fixed the group_generators methods.
Note that I had to mess with sage.categories.finite_groups.



---

archive/issue_comments_193934.json:
```json
{
    "body": "<a id='comment:74'></a>Replying to [comment:73 mshimo]:\n> I fixed the group_generators methods.\n> Note that I had to mess with sage.categories.finite_groups.\n\n\nOk, I am satisfied. Dan, could you please do a final review?",
    "created_at": "2015-06-16T02:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193934",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:74'></a>Replying to [comment:73 mshimo]:
> I fixed the group_generators methods.
> Note that I had to mess with sage.categories.finite_groups.


Ok, I am satisfied. Dan, could you please do a final review?



---

archive/issue_comments_193935.json:
```json
{
    "body": "<a id='comment:75'></a>Replying to [comment:73 mshimo]:\n> Note that I had to mess with sage.categories.finite_groups.\n\n\nI double checked on this, and it is actually a cleanup. If this does not break tests elsewhere, I am happy with that change. Thanks!",
    "created_at": "2015-06-16T06:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193935",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:75'></a>Replying to [comment:73 mshimo]:
> Note that I had to mess with sage.categories.finite_groups.


I double checked on this, and it is actually a cleanup. If this does not break tests elsewhere, I am happy with that change. Thanks!



---

archive/issue_comments_193936.json:
```json
{
    "body": "<a id='comment:76'></a>Hi Mark!\n\nI had a look at the fundamental group code. Thanks for the hard work!\n\nSuggestions:\n\n- Would it be possible to make the code more type-free, in particular\n  the initialization? For example, it seems likely to break the\n  current version if one uses a relabeled type BC.\n\n\n- The logic for computing the special nodes would fit more naturally\n  in Cartan types rather than here. Please implement that as a method\n  `cartan_type.special_nodes()`.\n\n  The special nodes form an orbit under the action of the automorphism\n  group of the Dynkin diagram, right? If yes, then it would be enough\n  to implement a generic method `CartanType_affine.special_nodes`,\n  which would start from the special node as specified by\n  `cartan_type.special_node()`, and take its orbit under the\n  automorphism group of the Dynkin diagram. It's a small graph, so\n  that's cheap enough.\n\n- Maybe add a test that the Cartan type is indeed affine?\n\n- Is the `_element_constructor_` needed at all?\n\n- `lambda i: finite_action_dict[i]` -> `finite_action_dict.__getitem__`\n\n- What about renaming `finite_action_dict`  to `reduced_words`?\n\n- `om` -> `omega` (I believe that's what we use in the crystal code)\n\n  in general, please avoid abbreviations, unless they correspond to\n  standard one-letter mathematical notations.\n\n- `..., finite = True)` -> `..., finite=True)`\n\n- The code is currently assuming that the `0` is the \"main\" special\n  node, right?  Please use `cartan_type.special_node()` instead.\n\n- What about fusing the methods `family` and `group_generators`?\n  `group_generators` should return a family anyway (unlike `gens`).\n\n- If you put the group in `XXX.FinitelyGenerated()`, the list of\n  elements will be recovered from the group generators (of course,\n  here we have a more straightforward way of doing it, so that may, or\n  not, be how we want to do this).\n\nThanks!",
    "created_at": "2015-06-16T07:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193936",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:76'></a>Hi Mark!

I had a look at the fundamental group code. Thanks for the hard work!

Suggestions:

- Would it be possible to make the code more type-free, in particular
  the initialization? For example, it seems likely to break the
  current version if one uses a relabeled type BC.


- The logic for computing the special nodes would fit more naturally
  in Cartan types rather than here. Please implement that as a method
  `cartan_type.special_nodes()`.

  The special nodes form an orbit under the action of the automorphism
  group of the Dynkin diagram, right? If yes, then it would be enough
  to implement a generic method `CartanType_affine.special_nodes`,
  which would start from the special node as specified by
  `cartan_type.special_node()`, and take its orbit under the
  automorphism group of the Dynkin diagram. It's a small graph, so
  that's cheap enough.

- Maybe add a test that the Cartan type is indeed affine?

- Is the `_element_constructor_` needed at all?

- `lambda i: finite_action_dict[i]` -> `finite_action_dict.__getitem__`

- What about renaming `finite_action_dict`  to `reduced_words`?

- `om` -> `omega` (I believe that's what we use in the crystal code)

  in general, please avoid abbreviations, unless they correspond to
  standard one-letter mathematical notations.

- `..., finite = True)` -> `..., finite=True)`

- The code is currently assuming that the `0` is the "main" special
  node, right?  Please use `cartan_type.special_node()` instead.

- What about fusing the methods `family` and `group_generators`?
  `group_generators` should return a family anyway (unlike `gens`).

- If you put the group in `XXX.FinitelyGenerated()`, the list of
  elements will be recovered from the group generators (of course,
  here we have a more straightforward way of doing it, so that may, or
  not, be how we want to do this).

Thanks!



---

archive/issue_comments_193937.json:
```json
{
    "body": "<a id='comment:77'></a>Nicolas, Thanks very much for your comments.\n\nI need to know the reason behind using `cartan_type.special_node()`.\n\nLet's call this the extra special node. For simplicity we assume untwisted\naffine type. By deletion we obtain a subsystem of finite type.\nIf the extra special node is nonzero then the correct behavior is that\nthe \"classical subsystem\" should be a relabeling of the\nappropriate standard classical subsystem\nwith 0 as one of the \"finite\" Dynkin nodes.\nThis nonstandard classical Dynkin node set will get propagated to\nindices of simple roots and fundamental weights and to the\nfinite Weyl groups.  In particular we could see\nt_{\\omega_0^\\vee} as a nontrivial translation element\nand s_0 as an element of the finite Weyl group.\nDo we really want this?\n\n--Mark",
    "created_at": "2015-06-16T19:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193937",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:77'></a>Nicolas, Thanks very much for your comments.

I need to know the reason behind using `cartan_type.special_node()`.

Let's call this the extra special node. For simplicity we assume untwisted
affine type. By deletion we obtain a subsystem of finite type.
If the extra special node is nonzero then the correct behavior is that
the "classical subsystem" should be a relabeling of the
appropriate standard classical subsystem
with 0 as one of the "finite" Dynkin nodes.
This nonstandard classical Dynkin node set will get propagated to
indices of simple roots and fundamental weights and to the
finite Weyl groups.  In particular we could see
t_{\omega_0^\vee} as a nontrivial translation element
and s_0 as an element of the finite Weyl group.
Do we really want this?

--Mark



---

archive/issue_comments_193938.json:
```json
{
    "body": "<a id='comment:78'></a>Replying to [comment:77 mshimo]:\n> Nicolas, Thanks very much for your comments.\n\n\nYou are welcome!\n\n> I need to know the reason behind using `cartan_type.special_node()`.\n> \n> Let's call this the extra special node. For simplicity we assume untwisted\n> affine type. By deletion we obtain a subsystem of finite type.\n> If the extra special node is nonzero then the correct behavior is that\n> the \"classical subsystem\" should be a relabeling of the\n> appropriate standard classical subsystem\n> with 0 as one of the \"finite\" Dynkin nodes.\n> This nonstandard classical Dynkin node set will get propagated to\n> indices of simple roots and fundamental weights and to the\n> finite Weyl groups.  In particular we could see\n> t_{\\omega_0^\\vee} as a nontrivial translation element\n> and s_0 as an element of the finite Weyl group.\n> Do we really want this?\n\n\nIt's indeed nice to have 0 by default for the special node in the\ncanonical labeling of the Dynkin diagram, in order to follow the usual\nconventions in the literature.\n\nBut other than that the code has been designed to be agnostic\nw.r.t. the labels of the nodes of the Dynkin diagram. This gives the\nuser the flexibility to use his preferred labeling, without imposing a\ngiven convention. Also it makes the code robust in potential use cases\nlike the following:\n\n- The user inputs some Cartan matrix which turns out to be\n  affine. There is no reason a priori that 0 will be a special node.\n  (note: at some point we will need/want to implement the logic to\n  recover some special node).\n\n- We have a big KM Dynkin diagram, and we want to do some calculations\n  involving a parabolic subgroup. Typically the corresponding Dynkin\n  diagram is disconnected, and the calculation will boil down to the\n  connected pieces. Those connected pieces could be affine Dynkin\n  diagrams, but with labels like 3,4,5; still we might want to use\n  it's fundamental group, etc ...\n\nCheers,\n                               Nicolas",
    "created_at": "2015-06-16T20:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193938",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:78'></a>Replying to [comment:77 mshimo]:
> Nicolas, Thanks very much for your comments.


You are welcome!

> I need to know the reason behind using `cartan_type.special_node()`.
> 
> Let's call this the extra special node. For simplicity we assume untwisted
> affine type. By deletion we obtain a subsystem of finite type.
> If the extra special node is nonzero then the correct behavior is that
> the "classical subsystem" should be a relabeling of the
> appropriate standard classical subsystem
> with 0 as one of the "finite" Dynkin nodes.
> This nonstandard classical Dynkin node set will get propagated to
> indices of simple roots and fundamental weights and to the
> finite Weyl groups.  In particular we could see
> t_{\omega_0^\vee} as a nontrivial translation element
> and s_0 as an element of the finite Weyl group.
> Do we really want this?


It's indeed nice to have 0 by default for the special node in the
canonical labeling of the Dynkin diagram, in order to follow the usual
conventions in the literature.

But other than that the code has been designed to be agnostic
w.r.t. the labels of the nodes of the Dynkin diagram. This gives the
user the flexibility to use his preferred labeling, without imposing a
given convention. Also it makes the code robust in potential use cases
like the following:

- The user inputs some Cartan matrix which turns out to be
  affine. There is no reason a priori that 0 will be a special node.
  (note: at some point we will need/want to implement the logic to
  recover some special node).

- We have a big KM Dynkin diagram, and we want to do some calculations
  involving a parabolic subgroup. Typically the corresponding Dynkin
  diagram is disconnected, and the calculation will boil down to the
  connected pieces. Those connected pieces could be affine Dynkin
  diagrams, but with labels like 3,4,5; still we might want to use
  it's fundamental group, etc ...

Cheers,
                               Nicolas



---

archive/issue_comments_193939.json:
```json
{
    "body": "<a id='comment:79'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-16T22:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:79'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193940.json:
```json
{
    "body": "<a id='comment:80'></a>I added an __iter__ method because without it, doing things like ` [x for x in F] `\nwas not working. I also made F an EnumeratedSet when it is finite.",
    "created_at": "2015-06-16T22:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193940",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:80'></a>I added an __iter__ method because without it, doing things like ` [x for x in F] `
was not working. I also made F an EnumeratedSet when it is finite.



---

archive/issue_comments_193941.json:
```json
{
    "body": "<a id='comment:81'></a>I mean ` __iter__`; the formatting lost the double underscores.",
    "created_at": "2015-06-16T22:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193941",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:81'></a>I mean ` __iter__`; the formatting lost the double underscores.



---

archive/issue_comments_193942.json:
```json
{
    "body": "<a id='comment:82'></a>Good point. To avoid having both `__iter__` and `__list__` you can just do:\n\n```\ndef __iter__(self):\n    return iter(self.group_generators())\n```\n\nNote the use of `iter` rather than `for ... yield` (should be faster).\n\nAlso, default list method will already raise an error for you if the set is in `XXX.Infinite()`.\n\nThanks!",
    "created_at": "2015-06-17T07:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193942",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:82'></a>Good point. To avoid having both `__iter__` and `__list__` you can just do:

```
def __iter__(self):
    return iter(self.group_generators())
```

Note the use of `iter` rather than `for ... yield` (should be faster).

Also, default list method will already raise an error for you if the set is in `XXX.Infinite()`.

Thanks!



---

archive/issue_comments_193943.json:
```json
{
    "body": "<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T12:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193943",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193944.json:
```json
{
    "body": "<a id='comment:84'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T12:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:84'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193945.json:
```json
{
    "body": "<a id='comment:85'></a>I added infinite and finite information to the categories of the extended affine Weyl groups and their fundamental groups. Thanks, Nicolas, for the programming help!",
    "created_at": "2015-06-17T12:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193945",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:85'></a>I added infinite and finite information to the categories of the extended affine Weyl groups and their fundamental groups. Thanks, Nicolas, for the programming help!



---

archive/issue_comments_193946.json:
```json
{
    "body": "<a id='comment:86'></a>Nicolas, are you satisfied? (Can the status be changed back to needs_review?)",
    "created_at": "2015-06-18T15:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193946",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:86'></a>Nicolas, are you satisfied? (Can the status be changed back to needs_review?)



---

archive/issue_comments_193947.json:
```json
{
    "body": "<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-18T16:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193948.json:
```json
{
    "body": "<a id='comment:88'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-18T16:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:88'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193949.json:
```json
{
    "body": "<a id='comment:89'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-18T17:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193949",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:89'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193950.json:
```json
{
    "body": "<a id='comment:90'></a>I think I am done messing with this ticket for now.\nI added an explicit an_element method; the default one always gives the identity, which leads to less interesting example elements for doctests. So I did this and fixed the doctests.",
    "created_at": "2015-06-18T17:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193950",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:90'></a>I think I am done messing with this ticket for now.
I added an explicit an_element method; the default one always gives the identity, which leads to less interesting example elements for doctests. So I did this and fixed the doctests.



---

archive/issue_comments_193951.json:
```json
{
    "body": "<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-18T18:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193952.json:
```json
{
    "body": "<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-20T04:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193952",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193953.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-20T04:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193953",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_193954.json:
```json
{
    "body": "<a id='comment:94'></a>Hi Mark!\n\nI have glanced half way through the patch. It's a lot of hard work you\ndid; thanks! I'll try to go through the over half soon, but won't have\nthe time for a systematic review, so please someone!\n\nHere are some thoughts that popped up; take them as they just are:\nrandom food for thoughts. If something does not sound applicable, just\nignore it.\n\n- `weyl_groups.py` line 420,453: any reason to remove the test for s2s1s2s1?\n- `RootSystem(XXX.cartan_type())` -> `XXX.cartan_type().root_system()`\n\n- `def to_ambient_space_morphism`: you can use\n  `sage.misc.c3_controlled.identity`. Yeah, there is no reason why the\n  identity function is defined in this module; but at least if we all\n  use the same identity function it will be easier to refactor later\n  on.\n\n  Variants, if you want a morphism: `End(self).identity()` or `sage:\n  self.coerce_map_from(self)`,\n\n- `..warning` -> `.. WARNING`\n\n- In `to_weight_space`: instead of going through a vector, one can use\n  `.sum_of_terms([i,self.scalar(alpha[i])] for ...`\n\n  This method is generic and would better be in `WeightSpaceRealizations`.\n\n- `to_ambient`\n\n- `special_nodes`: any reason not to use `return autos.orbit(self.special_node())` ?\n\n- `Nicolas Thiery` -> `Nicolas M. Thiery` for consistency\n\n- Doc of `ExtendedAffineWeylGroup`: use `.. MATH` for the math\n  formulas on their own line.\n\n- `... the following lattices:`; idem for `E` below.\n\n- When natural, put the `::` at the end of the sentence.\n\n- Line folding could be more consistent\n\n- There are still quite a few of `ifs` depending on\n  twisted/untwisted/GL; any chance to make this more generic?\n\n  For example, to define the special translation covector can't we\n  generically use something like `c[special_node] *\n  _special_root.associated_coroot()`? I never remember from the top of\n  my head whether it's `c` or one of its friends that should be used\n  here, but we did things like this in the MacDo code.\n\n  Note that at this point the initialization of\n  `ExtendedAffineWeylGroup_class` will probably break on a relabelled\n  type BC.\n\n- Do we need the `special_nodes` method on the group and the\n  fundamental group? Or could just have it on the cartan type?\n\n- Strip new lines just before and just after the end of the\n  documentation string.\n\n- `classical_weyl` -> `classical`? or `classical_weyl_group`?\n  I don't remember what we did in similar situations for crystals\n  and the like, but please check for consistency.\n\n- `classical_weyl_to_affine_morphism`: the name is misleading since\n  the result is not a morphism. Could we have a name like\n  `from_classical` or make this an element method `to_affine`?\n  Same for the related methods.\n\n- `cardinality` is already provided by `Sets().Infinite()`\n\n- `group_generators` this could in principle go in\n  `Groups().WithRealizations()`. If creating the latter just for this\n  seems like overkill, you can just add a comment about this.\n\n- `...Realizations.ParentMethods.one`: replacing `PW0` by\n  `a_realization` the code would be generic and could go in `Magmas.Unital.Realizations`.\n\n- `Returns` -> `Return`\n\n- `coset_representative, is_grassmanian, ...`: this is the same logic\n  as for a usual coxeter group, right? Could we avoid the duplication\n  by having a common super category?\n\n- `get_the_index` -> `leading_support`?\n\n- `FundamentalGroup...one`: `0` -> `special_node`\n\n- `an_element`: you can probably use `.last()` (haven't tested)\n\n  - `action`: maybe `representation`? Elsewhere in Sage, `action` is\n    usually a method that implements the action itself.\n\n- `root_lattice_realizations`: `Algebras` is now imported twice.\n\n\nCheers,\n                            Nicolas",
    "created_at": "2015-06-20T06:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193954",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:94'></a>Hi Mark!

I have glanced half way through the patch. It's a lot of hard work you
did; thanks! I'll try to go through the over half soon, but won't have
the time for a systematic review, so please someone!

Here are some thoughts that popped up; take them as they just are:
random food for thoughts. If something does not sound applicable, just
ignore it.

- `weyl_groups.py` line 420,453: any reason to remove the test for s2s1s2s1?
- `RootSystem(XXX.cartan_type())` -> `XXX.cartan_type().root_system()`

- `def to_ambient_space_morphism`: you can use
  `sage.misc.c3_controlled.identity`. Yeah, there is no reason why the
  identity function is defined in this module; but at least if we all
  use the same identity function it will be easier to refactor later
  on.

  Variants, if you want a morphism: `End(self).identity()` or `sage:
  self.coerce_map_from(self)`,

- `..warning` -> `.. WARNING`

- In `to_weight_space`: instead of going through a vector, one can use
  `.sum_of_terms([i,self.scalar(alpha[i])] for ...`

  This method is generic and would better be in `WeightSpaceRealizations`.

- `to_ambient`

- `special_nodes`: any reason not to use `return autos.orbit(self.special_node())` ?

- `Nicolas Thiery` -> `Nicolas M. Thiery` for consistency

- Doc of `ExtendedAffineWeylGroup`: use `.. MATH` for the math
  formulas on their own line.

- `... the following lattices:`; idem for `E` below.

- When natural, put the `::` at the end of the sentence.

- Line folding could be more consistent

- There are still quite a few of `ifs` depending on
  twisted/untwisted/GL; any chance to make this more generic?

  For example, to define the special translation covector can't we
  generically use something like `c[special_node] *
  _special_root.associated_coroot()`? I never remember from the top of
  my head whether it's `c` or one of its friends that should be used
  here, but we did things like this in the MacDo code.

  Note that at this point the initialization of
  `ExtendedAffineWeylGroup_class` will probably break on a relabelled
  type BC.

- Do we need the `special_nodes` method on the group and the
  fundamental group? Or could just have it on the cartan type?

- Strip new lines just before and just after the end of the
  documentation string.

- `classical_weyl` -> `classical`? or `classical_weyl_group`?
  I don't remember what we did in similar situations for crystals
  and the like, but please check for consistency.

- `classical_weyl_to_affine_morphism`: the name is misleading since
  the result is not a morphism. Could we have a name like
  `from_classical` or make this an element method `to_affine`?
  Same for the related methods.

- `cardinality` is already provided by `Sets().Infinite()`

- `group_generators` this could in principle go in
  `Groups().WithRealizations()`. If creating the latter just for this
  seems like overkill, you can just add a comment about this.

- `...Realizations.ParentMethods.one`: replacing `PW0` by
  `a_realization` the code would be generic and could go in `Magmas.Unital.Realizations`.

- `Returns` -> `Return`

- `coset_representative, is_grassmanian, ...`: this is the same logic
  as for a usual coxeter group, right? Could we avoid the duplication
  by having a common super category?

- `get_the_index` -> `leading_support`?

- `FundamentalGroup...one`: `0` -> `special_node`

- `an_element`: you can probably use `.last()` (haven't tested)

  - `action`: maybe `representation`? Elsewhere in Sage, `action` is
    usually a method that implements the action itself.

- `root_lattice_realizations`: `Algebras` is now imported twice.


Cheers,
                            Nicolas



---

archive/issue_comments_193955.json:
```json
{
    "body": "<a id='comment:95'></a>For Cartan types, it is simply `classical` and for crystals, it is `classical_object` (ex. `classical_weight`).",
    "created_at": "2015-06-20T06:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193955",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:95'></a>For Cartan types, it is simply `classical` and for crystals, it is `classical_object` (ex. `classical_weight`).



---

archive/issue_comments_193956.json:
```json
{
    "body": "<a id='comment:96'></a>I looked at the patchbot shortlogs for the first three machines reporting build failure. They all report the same error:\n\n```\nOSError: [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/root_system/extended_affine_weyl_group.py:docstring of sage.combinat.root_system.extended_affine_weyl_group.ExtendedAffineWeylGroup_Class.WF_to_PW0_func:11: ERROR: Content block expected for the \"WARNING\" directive; none found.\n```\n\nI think the \"Since this is used ...\" at line 1068 needs to be indented. Other bots are reporting a doctest error in dev_tools.py. \n\n```\n**********************************************************************\nFile \"src/sage/misc/dev_tools.py\", line 459, in sage.misc.dev_tools.import_statements\nFailed example:\n    load_submodules(sage.sets)\nExpected:\n    load sage.sets.cartesian_product... succeeded\n    load sage.sets.set_from_iterator... succeeded\nGot:\n    load sage.sets.real_set... succeeded\n    load sage.sets.set_from_iterator... succeeded\n**********************************************************************\n```\nI suspect this is unrelated to this patch. It may be caused by #18553 which was merged three weeks ago and which touched sage.sets.real_set.py.\n\nHowever I think the above docstring needs to be fixed and since Nicolas has some comments I'm changing the status back to needs_work.",
    "created_at": "2015-06-21T02:27:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193956",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:96'></a>I looked at the patchbot shortlogs for the first three machines reporting build failure. They all report the same error:

```
OSError: [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/root_system/extended_affine_weyl_group.py:docstring of sage.combinat.root_system.extended_affine_weyl_group.ExtendedAffineWeylGroup_Class.WF_to_PW0_func:11: ERROR: Content block expected for the "WARNING" directive; none found.
```

I think the "Since this is used ..." at line 1068 needs to be indented. Other bots are reporting a doctest error in dev_tools.py. 

```
**********************************************************************
File "src/sage/misc/dev_tools.py", line 459, in sage.misc.dev_tools.import_statements
Failed example:
    load_submodules(sage.sets)
Expected:
    load sage.sets.cartesian_product... succeeded
    load sage.sets.set_from_iterator... succeeded
Got:
    load sage.sets.real_set... succeeded
    load sage.sets.set_from_iterator... succeeded
**********************************************************************
```
I suspect this is unrelated to this patch. It may be caused by #18553 which was merged three weeks ago and which touched sage.sets.real_set.py.

However I think the above docstring needs to be fixed and since Nicolas has some comments I'm changing the status back to needs_work.



---

archive/issue_comments_193957.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-21T02:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193957",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_193958.json:
```json
{
    "body": "<a id='comment:98'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-21T06:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:98'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193959.json:
```json
{
    "body": "<a id='comment:99'></a>The `one()` method added to unital magmas will need a doctest.",
    "created_at": "2015-06-21T06:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193959",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:99'></a>The `one()` method added to unital magmas will need a doctest.



---

archive/issue_comments_193960.json:
```json
{
    "body": "<a id='comment:0'></a>It wouldn't let me push the fixed version so I made a copy of the existing ticket branch and merged it into my working branch. The result is broken. I am going to try to change the trac branch to a good one.\n\n---\nNew commits:",
    "created_at": "2015-06-21T06:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193960",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:0'></a>It wouldn't let me push the fixed version so I made a copy of the existing ticket branch and merged it into my working branch. The result is broken. I am going to try to change the trac branch to a good one.

---
New commits:



---

archive/issue_comments_193961.json:
```json
{
    "body": "<a id='comment:1'></a>Last 10 new commits:",
    "created_at": "2015-06-21T06:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193961",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:1'></a>Last 10 new commits:



---

archive/issue_comments_193962.json:
```json
{
    "body": "<a id='comment:2'></a>Ugh. I clearly don't know how to use trac.",
    "created_at": "2015-06-21T07:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193962",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:2'></a>Ugh. I clearly don't know how to use trac.



---

archive/issue_comments_193963.json:
```json
{
    "body": "<a id='comment:103'></a>Replying to [comment:102 mshimo]:\n> Ugh. I clearly don't know how to use trac.\n\n\nWhat happened? It might happen that one cannot push if there is a change on the server that one has not pulled yet. Otherwise I would not know why this happens.\n\nI get the following failure in sage/categories\n\n```\nsage -t realizations.py\n**********************************************************************\nFile \"realizations.py\", line 44, in sage.categories.realizations.RealizationsCategory\nFailed example:\n    Groups().Realizations().super_categories()\nExpected:\n    [Category of groups, Category of realizations of magmas]\nGot:\n    [Category of groups, Category of realizations of unital magmas]\n**********************************************************************\nFile \"realizations.py\", line 68, in sage.categories.realizations.Realizations\nFailed example:\n    Algebras(QQ).Realizations()\nExpected:\n    Join of Category of algebras over Rational Field and Category of realizations of magmas\nGot:\n    Join of Category of algebras over Rational Field and Category of realizations of unital magmas\n**********************************************************************\n2 items had failures:\n   1 of   7 in sage.categories.realizations.Realizations\n   1 of   5 in sage.categories.realizations.RealizationsCategory\n    [27 tests, 2 failures, 0.10 s]\n```",
    "created_at": "2015-06-22T21:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193963",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:103'></a>Replying to [comment:102 mshimo]:
> Ugh. I clearly don't know how to use trac.


What happened? It might happen that one cannot push if there is a change on the server that one has not pulled yet. Otherwise I would not know why this happens.

I get the following failure in sage/categories

```
sage -t realizations.py
**********************************************************************
File "realizations.py", line 44, in sage.categories.realizations.RealizationsCategory
Failed example:
    Groups().Realizations().super_categories()
Expected:
    [Category of groups, Category of realizations of magmas]
Got:
    [Category of groups, Category of realizations of unital magmas]
**********************************************************************
File "realizations.py", line 68, in sage.categories.realizations.Realizations
Failed example:
    Algebras(QQ).Realizations()
Expected:
    Join of Category of algebras over Rational Field and Category of realizations of magmas
Got:
    Join of Category of algebras over Rational Field and Category of realizations of unital magmas
**********************************************************************
2 items had failures:
   1 of   7 in sage.categories.realizations.Realizations
   1 of   5 in sage.categories.realizations.RealizationsCategory
    [27 tests, 2 failures, 0.10 s]
```



---

archive/issue_comments_193964.json:
```json
{
    "body": "<a id='comment:4'></a>There are currently doctests failures in categories/realizations.py and categories/examples/with_realizations.py. These would be fixed by correcting the doctest, viz. replacing 'magmas' by 'unital magmas' in the failing docutests.\n\nThere is also a doctest failure in misc/dev_tools.py. In comment:96 I speculated that this was not caused by this patch, but evidently this was wrong. I don't know what caused this doctest to change, but I checked out the git commit 05875d563029eb7231d2cae4b434b99e4742fbbf and confirm that dev_tools tests pass for that version. Currently this patch is rebased atop that commit and I think this proves that it caused the failure. I don't know the mechanism but the test in question seems to be pretty fragile.\n\nThere is also a build failure patchbot report (as before) that a WARNING directive is missing a content block. It looks to me as if Mark's changes should have fixed this (the content block is now indented). So I'm puzzled by this (unless the build attempt predated Mark's commit. It is date stamped 6/20.)",
    "created_at": "2015-06-22T23:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193964",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:4'></a>There are currently doctests failures in categories/realizations.py and categories/examples/with_realizations.py. These would be fixed by correcting the doctest, viz. replacing 'magmas' by 'unital magmas' in the failing docutests.

There is also a doctest failure in misc/dev_tools.py. In comment:96 I speculated that this was not caused by this patch, but evidently this was wrong. I don't know what caused this doctest to change, but I checked out the git commit 05875d563029eb7231d2cae4b434b99e4742fbbf and confirm that dev_tools tests pass for that version. Currently this patch is rebased atop that commit and I think this proves that it caused the failure. I don't know the mechanism but the test in question seems to be pretty fragile.

There is also a build failure patchbot report (as before) that a WARNING directive is missing a content block. It looks to me as if Mark's changes should have fixed this (the content block is now indented). So I'm puzzled by this (unless the build attempt predated Mark's commit. It is date stamped 6/20.)



---

archive/issue_comments_193965.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-23T17:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193965",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193966.json:
```json
{
    "body": "<a id='comment:6'></a>Nicolas, aren't you the author of dev_tools? Do you know what is going on with the doctest?",
    "created_at": "2015-06-24T22:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193966",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:6'></a>Nicolas, aren't you the author of dev_tools? Do you know what is going on with the doctest?



---

archive/issue_comments_193967.json:
```json
{
    "body": "<a id='comment:7'></a>I noticed that the dev_tools doctest that fails is fragile: if you call it from the command line it gives a different result than the doctest.\n\n```\n\nsage: from sage.misc.dev_tools import load_submodules\nsage: load_submodules(sage.sets)\nload sage.sets.cartesian_product... succeeded\nload sage.sets.real_set... succeeded\nload sage.sets.set_from_iterator... succeeded\n\n```\nPresumably this is because when the doctest is run, sage.sets.real_set has already been loaded.\n\nSince the branch was recently changed to u/mshimo I think Mark is the only one who can make changes now. When it was u/public others could push changes, for example when Anne rebased it.",
    "created_at": "2015-06-24T23:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193967",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:7'></a>I noticed that the dev_tools doctest that fails is fragile: if you call it from the command line it gives a different result than the doctest.

```

sage: from sage.misc.dev_tools import load_submodules
sage: load_submodules(sage.sets)
load sage.sets.cartesian_product... succeeded
load sage.sets.real_set... succeeded
load sage.sets.set_from_iterator... succeeded

```
Presumably this is because when the doctest is run, sage.sets.real_set has already been loaded.

Since the branch was recently changed to u/mshimo I think Mark is the only one who can make changes now. When it was u/public others could push changes, for example when Anne rebased it.



---

archive/issue_comments_193968.json:
```json
{
    "body": "<a id='comment:8'></a>This is part of my misunderstanding of trac. \n\nI had trouble pushing to the u/public branch; it was forcing a merge\nwhich was creating weird errors that didn't happen in my local branch.\nThat is why I made a new copy and put it in a new location, apparently unwittingly\nmaking it nonpublic.\n\nI would like to just clobber (replace) the old u/public branch\nwith the other one. Can I do that? Is it a bad idea?\nI just know that my previous attempts to push to that branch, created weird nonrecognizable errors that were not my code's fault.\n\nThe alternative is to make a new public branch.",
    "created_at": "2015-06-25T03:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193968",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:8'></a>This is part of my misunderstanding of trac. 

I had trouble pushing to the u/public branch; it was forcing a merge
which was creating weird errors that didn't happen in my local branch.
That is why I made a new copy and put it in a new location, apparently unwittingly
making it nonpublic.

I would like to just clobber (replace) the old u/public branch
with the other one. Can I do that? Is it a bad idea?
I just know that my previous attempts to push to that branch, created weird nonrecognizable errors that were not my code's fault.

The alternative is to make a new public branch.



---

archive/issue_comments_193969.json:
```json
{
    "body": "<a id='comment:109'></a>Replying to [comment:108 mshimo]:\n> This is part of my misunderstanding of trac. \n> \n> I had trouble pushing to the u/public branch; it was forcing a merge\n> which was creating weird errors that didn't happen in my local branch.\n> That is why I made a new copy and put it in a new location, apparently unwittingly\n> making it nonpublic.\n> \n> I would like to just clobber (replace) the old u/public branch\n> with the other one. Can I do that? Is it a bad idea?\n> I just know that my previous attempts to push to that branch, created weird nonrecognizable errors that were not my code's fault.\n> \n> The alternative is to make a new public branch.\n\n\nYou should be able to push your local branch to a public one by saying\n\n```\ngit branch <localname> --set-upstream-to origin/<newremotename>\n```\nwhere <newremotename> is something like public/15375 (pick a name different from the old public name just in case). Then you can copy the new branch name in the trac field on the ticket.",
    "created_at": "2015-06-25T05:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193969",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:109'></a>Replying to [comment:108 mshimo]:
> This is part of my misunderstanding of trac. 
> 
> I had trouble pushing to the u/public branch; it was forcing a merge
> which was creating weird errors that didn't happen in my local branch.
> That is why I made a new copy and put it in a new location, apparently unwittingly
> making it nonpublic.
> 
> I would like to just clobber (replace) the old u/public branch
> with the other one. Can I do that? Is it a bad idea?
> I just know that my previous attempts to push to that branch, created weird nonrecognizable errors that were not my code's fault.
> 
> The alternative is to make a new public branch.


You should be able to push your local branch to a public one by saying

```
git branch <localname> --set-upstream-to origin/<newremotename>
```
where <newremotename> is something like public/15375 (pick a name different from the old public name just in case). Then you can copy the new branch name in the trac field on the ticket.



---

archive/issue_comments_193970.json:
```json
{
    "body": "<a id='comment:111'></a>Replying to [comment:96 bump]:\n> Other bots are reporting a doctest error in dev_tools.py. \n> \n> ```\n> **********************************************************************\n> File \"src/sage/misc/dev_tools.py\", line 459, in sage.misc.dev_tools.import_statements\n> Failed example:\n>     load_submodules(sage.sets)\n> Expected:\n>     load sage.sets.cartesian_product... succeeded\n>     load sage.sets.set_from_iterator... succeeded\n> Got:\n>     load sage.sets.real_set... succeeded\n>     load sage.sets.set_from_iterator... succeeded\n> **********************************************************************\n> ```\n> I suspect this is unrelated to this patch. It may be caused by #18553 which was merged three weeks ago and which touched sage.sets.real_set.py.\n\n\nMy current bet is that this ticket somehow forces\n`sage.sets.cartesian_product` to be loaded upon Sage's startup. Hence,\nwhen running `load_submodules(sage.sets)` it does not appear anymore\nas the first entry, and instead the output starts with the next one\nwhich turns out to be `sage.sets.real_set`.\n\nIf that's confirmed, a good approach would be to make sure that all\nthe affine Weyl group code is lazy imported. That's a good property to\nhave anyway.\n\nCheers,\n                                      Nicolas",
    "created_at": "2015-06-25T13:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193970",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:111'></a>Replying to [comment:96 bump]:
> Other bots are reporting a doctest error in dev_tools.py. 
> 
> ```
> **********************************************************************
> File "src/sage/misc/dev_tools.py", line 459, in sage.misc.dev_tools.import_statements
> Failed example:
>     load_submodules(sage.sets)
> Expected:
>     load sage.sets.cartesian_product... succeeded
>     load sage.sets.set_from_iterator... succeeded
> Got:
>     load sage.sets.real_set... succeeded
>     load sage.sets.set_from_iterator... succeeded
> **********************************************************************
> ```
> I suspect this is unrelated to this patch. It may be caused by #18553 which was merged three weeks ago and which touched sage.sets.real_set.py.


My current bet is that this ticket somehow forces
`sage.sets.cartesian_product` to be loaded upon Sage's startup. Hence,
when running `load_submodules(sage.sets)` it does not appear anymore
as the first entry, and instead the output starts with the next one
which turns out to be `sage.sets.real_set`.

If that's confirmed, a good approach would be to make sure that all
the affine Weyl group code is lazy imported. That's a good property to
have anyway.

Cheers,
                                      Nicolas



---

archive/issue_comments_193971.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-25T19:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193972.json:
```json
{
    "body": "<a id='comment:3'></a>The new module sage.categories.groups.group_semidirect_product does import CartesianProduct.\nWould that make a difference?\n\n---\nNew commits:",
    "created_at": "2015-06-25T19:35:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193972",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:3'></a>The new module sage.categories.groups.group_semidirect_product does import CartesianProduct.
Would that make a difference?

---
New commits:



---

archive/issue_comments_193973.json:
```json
{
    "body": "<a id='comment:114'></a>Replying to [comment:111 nthiery]:\n\n> If that's confirmed, a good approach would be to make sure that all the affine Weyl group code is lazy imported. That's a good property to have anyway.\n\n\nMark's last commit did change to lazy import and did not fix the doctest.\n\n> My current bet is that this ticket somehow forces` sage.sets.cartesian_product` to be loaded upon Sage's startup.\n\n\nI think this may not have to do with what is loaded on startup, but rather what is loaded during other tests coming earlier in the docstring. If this test is moved to the top of the docstring, it will give a different result. See !comment:107.",
    "created_at": "2015-06-29T17:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193973",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:114'></a>Replying to [comment:111 nthiery]:

> If that's confirmed, a good approach would be to make sure that all the affine Weyl group code is lazy imported. That's a good property to have anyway.


Mark's last commit did change to lazy import and did not fix the doctest.

> My current bet is that this ticket somehow forces` sage.sets.cartesian_product` to be loaded upon Sage's startup.


I think this may not have to do with what is loaded on startup, but rather what is loaded during other tests coming earlier in the docstring. If this test is moved to the top of the docstring, it will give a different result. See !comment:107.



---

archive/issue_comments_193974.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-29T17:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193975.json:
```json
{
    "body": "<a id='comment:6'></a>As you can see from the commit message, I just changed the answer in the doctest\nto the answer generated by the current version of sage.",
    "created_at": "2015-06-29T19:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193975",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:6'></a>As you can see from the commit message, I just changed the answer in the doctest
to the answer generated by the current version of sage.



---

archive/issue_comments_193976.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-30T15:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193976",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_193977.json:
```json
{
    "body": "<a id='comment:7'></a>On my machine it builds and all tests pass. But two buildbots are failing to build with cython errors.\n\nSurely this can have nothing to do with this patch.\n\nI'm changing the status to needs_review. I hesitate to change it to positive_review until the patchbot is happy.",
    "created_at": "2015-06-30T15:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193977",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:7'></a>On my machine it builds and all tests pass. But two buildbots are failing to build with cython errors.

Surely this can have nothing to do with this patch.

I'm changing the status to needs_review. I hesitate to change it to positive_review until the patchbot is happy.



---

archive/issue_comments_193978.json:
```json
{
    "body": "<a id='comment:118'></a>Replying to [comment:117 bump]:\n> On my machine it builds and all tests pass. But two buildbots are failing to build with cython errors.\n> \n> Surely this can have nothing to do with this patch.\n> \n> I'm changing the status to needs_review. I hesitate to change it to positive_review until the patchbot is happy.\n\n\nFor me everything builds fine. I ran `sage -testall` and got the following failures\n\n```\nsage -t src/sage/groups/perm_gps/permgroup_named.py\n**********************************************************************\nFile \"src/sage/groups/perm_gps/permgroup_named.py\", line 2609, in sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_hurwitz_curve\nFailed example:\n    G.ramification_module_decomposition_hurwitz_curve() # random, optional - database_gap\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_hurwitz_curve[1]>\", line 1, in <module>\n        G.ramification_module_decomposition_hurwitz_curve() # random, optional - database_gap\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_named.py\", line 2630, in ramification_module_decomposition_hurwitz_curve\n        mults = gap.eval(\"ram_module_hurwitz(\"+str(q)+\")\")\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 568, in eval\n        result = Expect.eval(self, input_line, **kwds)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1239, in eval\n        for L in code.split('\\n') if L != ''])\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 766, in _eval_line\n        raise RuntimeError(message)\n    RuntimeError: Gap produced error output\n    Error, sorry, the GAP Tables Of Marks Library is not installed\n\n       executing ram_module_hurwitz(13);\n**********************************************************************\nFile \"src/sage/groups/perm_gps/permgroup_named.py\", line 2657, in sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_modular_curve\nFailed example:\n    G.ramification_module_decomposition_modular_curve() # random, optional - database_gap\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_modular_curve[1]>\", line 1, in <module>\n        G.ramification_module_decomposition_modular_curve() # random, optional - database_gap\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_named.py\", line 2674, in ramification_module_decomposition_modular_curve\n        mults = gap.eval(\"ram_module_X(\"+str(q)+\")\")\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 568, in eval\n        result = Expect.eval(self, input_line, **kwds)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1239, in eval\n        for L in code.split('\\n') if L != ''])\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 766, in _eval_line\n        raise RuntimeError(message)\n    RuntimeError: Gap produced error output\n    Error, sorry, the GAP Tables Of Marks Library is not installed\n\n       executing ram_module_X(7);\n**********************************************************************\n2 items had failures:\n   1 of   3 in sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_hurwitz_curve\n   1 of   3 in sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_modular_curve\n    [439 tests, 2 failures, 3.16 s]\n----------------------------------------------------------------------\nsage -t src/sage/groups/perm_gps/permgroup_named.py  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 3.3 seconds\n    cpu time: 2.3 seconds\n    cumulative wall time: 3.2 seconds\n```\n\n```\nsage -t src/sage/tests/gap_packages.py\n**********************************************************************\nFile \"src/sage/tests/gap_packages.py\", line 15, in sage.tests.gap_packages\nFailed example:\n    test_packages(['atlasrep', 'tomlib'])    # optional - database_gap\nExpected:\n      Status   Package    GAP Output\n    +--------+----------+------------+\n               atlasrep   true\n               tomlib     true\nGot:\n      Status    Package    GAP Output\n    +---------+----------+------------+\n      Failure   atlasrep   fail\n      Failure   tomlib     fail\n**********************************************************************\n1 item had failures:\n   1 of   4 in sage.tests.gap_packages\n    [9 tests, 1 failure, 0.18 s]\n----------------------------------------------------------------------\nsage -t src/sage/tests/gap_packages.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 0.2 seconds\n    cpu time: 0.2 seconds\n    cumulative wall time: 0.2 seconds\n```\n\nI do not think they are related to this branch. So unless there is something else, I guess we can set positive review.",
    "created_at": "2015-07-01T07:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193978",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:118'></a>Replying to [comment:117 bump]:
> On my machine it builds and all tests pass. But two buildbots are failing to build with cython errors.
> 
> Surely this can have nothing to do with this patch.
> 
> I'm changing the status to needs_review. I hesitate to change it to positive_review until the patchbot is happy.


For me everything builds fine. I ran `sage -testall` and got the following failures

```
sage -t src/sage/groups/perm_gps/permgroup_named.py
**********************************************************************
File "src/sage/groups/perm_gps/permgroup_named.py", line 2609, in sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_hurwitz_curve
Failed example:
    G.ramification_module_decomposition_hurwitz_curve() # random, optional - database_gap
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_hurwitz_curve[1]>", line 1, in <module>
        G.ramification_module_decomposition_hurwitz_curve() # random, optional - database_gap
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_named.py", line 2630, in ramification_module_decomposition_hurwitz_curve
        mults = gap.eval("ram_module_hurwitz("+str(q)+")")
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 568, in eval
        result = Expect.eval(self, input_line, **kwds)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1239, in eval
        for L in code.split('\n') if L != ''])
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 766, in _eval_line
        raise RuntimeError(message)
    RuntimeError: Gap produced error output
    Error, sorry, the GAP Tables Of Marks Library is not installed

       executing ram_module_hurwitz(13);
**********************************************************************
File "src/sage/groups/perm_gps/permgroup_named.py", line 2657, in sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_modular_curve
Failed example:
    G.ramification_module_decomposition_modular_curve() # random, optional - database_gap
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_modular_curve[1]>", line 1, in <module>
        G.ramification_module_decomposition_modular_curve() # random, optional - database_gap
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_named.py", line 2674, in ramification_module_decomposition_modular_curve
        mults = gap.eval("ram_module_X("+str(q)+")")
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 568, in eval
        result = Expect.eval(self, input_line, **kwds)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1239, in eval
        for L in code.split('\n') if L != ''])
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 766, in _eval_line
        raise RuntimeError(message)
    RuntimeError: Gap produced error output
    Error, sorry, the GAP Tables Of Marks Library is not installed

       executing ram_module_X(7);
**********************************************************************
2 items had failures:
   1 of   3 in sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_hurwitz_curve
   1 of   3 in sage.groups.perm_gps.permgroup_named.PSL.ramification_module_decomposition_modular_curve
    [439 tests, 2 failures, 3.16 s]
----------------------------------------------------------------------
sage -t src/sage/groups/perm_gps/permgroup_named.py  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 3.3 seconds
    cpu time: 2.3 seconds
    cumulative wall time: 3.2 seconds
```

```
sage -t src/sage/tests/gap_packages.py
**********************************************************************
File "src/sage/tests/gap_packages.py", line 15, in sage.tests.gap_packages
Failed example:
    test_packages(['atlasrep', 'tomlib'])    # optional - database_gap
Expected:
      Status   Package    GAP Output
    +--------+----------+------------+
               atlasrep   true
               tomlib     true
Got:
      Status    Package    GAP Output
    +---------+----------+------------+
      Failure   atlasrep   fail
      Failure   tomlib     fail
**********************************************************************
1 item had failures:
   1 of   4 in sage.tests.gap_packages
    [9 tests, 1 failure, 0.18 s]
----------------------------------------------------------------------
sage -t src/sage/tests/gap_packages.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 0.2 seconds
    cpu time: 0.2 seconds
    cumulative wall time: 0.2 seconds
```

I do not think they are related to this branch. So unless there is something else, I guess we can set positive review.



---

archive/issue_comments_193979.json:
```json
{
    "body": "<a id='comment:9'></a>In decreasing probability, it looks like your `database_gap` optional spkg is out of date, mis-/not installed, or needs optional GAP packages installed directly into GAP. I'd try running `sage -i database_gap` and `sage -i gap_packages` and then running those tests again to see if they work.",
    "created_at": "2015-07-01T09:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193979",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>In decreasing probability, it looks like your `database_gap` optional spkg is out of date, mis-/not installed, or needs optional GAP packages installed directly into GAP. I'd try running `sage -i database_gap` and `sage -i gap_packages` and then running those tests again to see if they work.



---

archive/issue_comments_193980.json:
```json
{
    "body": "<a id='comment:0'></a>Any conjectures about the patchbot?\n\nI presume that the patchbot merges the patch on top of the develop tip then tries to build. Is that correct? It looks from the log as if it actually tries to merge it with a branch called patchbot/base. There doesn't actually seem to be such a branch in the repository.",
    "created_at": "2015-07-01T19:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193980",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:0'></a>Any conjectures about the patchbot?

I presume that the patchbot merges the patch on top of the develop tip then tries to build. Is that correct? It looks from the log as if it actually tries to merge it with a branch called patchbot/base. There doesn't actually seem to be such a branch in the repository.



---

archive/issue_comments_193981.json:
```json
{
    "body": "<a id='comment:121'></a>Thanks Travis, that did the trick. For me all tests pass now.\n\nReplying to [comment:120 bump]:\n> Any conjectures about the patchbot?\n> \n> I presume that the patchbot merges the patch on top of the develop tip then tries to build. Is that correct? It looks from the log as if it actually tries to merge it with a branch called patchbot/base. There doesn't actually seem to be such a branch in the repository.\n\n\nOn my local computer, I merged in the latest development version sage-6.8.beta6 and everything merged fine. So I think something is wrong with the patchbot.\n\nI am going to set positive review, since we all seem happy with the patch.",
    "created_at": "2015-07-01T21:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193981",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:121'></a>Thanks Travis, that did the trick. For me all tests pass now.

Replying to [comment:120 bump]:
> Any conjectures about the patchbot?
> 
> I presume that the patchbot merges the patch on top of the develop tip then tries to build. Is that correct? It looks from the log as if it actually tries to merge it with a branch called patchbot/base. There doesn't actually seem to be such a branch in the repository.


On my local computer, I merged in the latest development version sage-6.8.beta6 and everything merged fine. So I think something is wrong with the patchbot.

I am going to set positive review, since we all seem happy with the patch.



---

archive/issue_comments_193982.json:
```json
{
    "body": "<a id='comment:2'></a>Right, I ran all the tests yesterday after a distclean build and there were no failures.\n\n> I am going to set positive review, since we all seem happy with the patch.",
    "created_at": "2015-07-01T21:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193982",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:2'></a>Right, I ran all the tests yesterday after a distclean build and there were no failures.

> I am going to set positive review, since we all seem happy with the patch.



---

archive/issue_comments_193983.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-01T21:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193983",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_193984.json:
```json
{
    "body": "<a id='comment:4'></a>```\nl.165775 \\end{gather}\n                     \\paragraph{Fundamental group of affine Dynkin automorph...\n\n? \n! Emergency stop.\n\\math@cr@@@ ...@ \\@ne \\add@amps \\maxfields@ \\omit \n                                                  \\kern -\\alignsep@ \\iftag@ ...\nl.165775 \\end{gather}\n                     \\paragraph{Fundamental group of affine Dynkin automorph...\n\n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on combinat.log.\nMakefile:55: recipe for target 'combinat.pdf' failed\nmake[2]: *** [combinat.pdf] Error 1\n```",
    "created_at": "2015-07-02T16:24:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193984",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>```
l.165775 \end{gather}
                     \paragraph{Fundamental group of affine Dynkin automorph...

? 
! Emergency stop.
\math@cr@@@ ...@ \@ne \add@amps \maxfields@ \omit 
                                                  \kern -\alignsep@ \iftag@ ...
l.165775 \end{gather}
                     \paragraph{Fundamental group of affine Dynkin automorph...

!  ==> Fatal error occurred, no output PDF file produced!
Transcript written on combinat.log.
Makefile:55: recipe for target 'combinat.pdf' failed
make[2]: *** [combinat.pdf] Error 1
```



---

archive/issue_comments_193985.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-07-02T16:24:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193985",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_193986.json:
```json
{
    "body": "<a id='comment:5'></a>The build of pdf documentation fails. It outputs algebra.pdf and then seems to hang.\nI have no idea what is going on. I didn't see a log file generated for this.",
    "created_at": "2015-07-02T18:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193986",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:5'></a>The build of pdf documentation fails. It outputs algebra.pdf and then seems to hang.
I have no idea what is going on. I didn't see a log file generated for this.



---

archive/issue_comments_193987.json:
```json
{
    "body": "<a id='comment:6'></a>Now that this ticket needs_work anyway:\n\nIn the 4 files that you're adding in this ticket: please use the standard copyright statement as explained in [http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files](http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files)\n\nCurrently, two of the files have no copyright statement and two do not state the GPL version.",
    "created_at": "2015-07-02T19:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193987",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>Now that this ticket needs_work anyway:

In the 4 files that you're adding in this ticket: please use the standard copyright statement as explained in [http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files](http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files)

Currently, two of the files have no copyright statement and two do not state the GPL version.



---

archive/issue_comments_193988.json:
```json
{
    "body": "<a id='comment:7'></a>Here is a log of the results of !`sage --docbuild reference pdf`\n\nhttp://match.stanford.edu/pdflog\n\n(Temporary URL)",
    "created_at": "2015-07-02T20:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193988",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:7'></a>Here is a log of the results of !`sage --docbuild reference pdf`

http://match.stanford.edu/pdflog

(Temporary URL)



---

archive/issue_comments_193989.json:
```json
{
    "body": "<a id='comment:8'></a>By default, a `.. MATH::` block is automatically enclosed in a math environment, so you shouldn't use an environment like `align*` there: it gets turned into something like\n\n```\n\\begin{gather}\n\\begin{align*}\n...\n\\end{align*}\n\\end{gather}\n```\nwhich is not valid LaTeX. To avoid the default, you can add `:nowrap:` at the beginning of the math block, or you can use an environment like `aligned` instead. This will fix it, but I would instead choose only one of these two approaches (instead of switching between them, as I've done here):\n\n```diff\ndiff --git a/src/sage/combinat/root_system/extended_affine_weyl_group.py b/src/sage/combinat/root_system/extended_affine_weyl_group.py\nindex 7d35cac..56d9e6d 100644\n--- a/src/sage/combinat/root_system/extended_affine_weyl_group.py\n+++ b/src/sage/combinat/root_system/extended_affine_weyl_group.py\n@@ -155,6 +155,7 @@ def ExtendedAffineWeylGroup(cartan_type, general_linear=None, **print_options):\n     There are isomorphisms\n \n     .. MATH::\n+       :nowrap:\n \n         \\begin{align*}\n             W &\\cong M \\rtimes W_0 \\cong W_0 \\ltimes M \\\\\ndiff --git a/src/sage/groups/group_semidirect_product.py b/src/sage/groups/group_semidirect_product.py\nindex 627056f..63b8769 100644\n--- a/src/sage/groups/group_semidirect_product.py\n+++ b/src/sage/groups/group_semidirect_product.py\n@@ -152,11 +152,11 @@ class GroupSemidirectProduct(CartesianProduct):\n         \n     .. MATH::\n \n-        \\begin{align*}\n+        \\begin{aligned}\n         (g_1,h_1)(g_2,h_2) &= g_1 h_1 g_2 h_2 \\\\\n         &= g_1 g_2 g_2^{-1} h_1 g_2 h_2 \\\\\n         &= (g_1g_2, twist(g_2^{-1}, h_1) h_2)\n-        \\end{align*}\n+        \\end{aligned}\n \n     If ``act_to_right`` is False, the group `G \\rtimes H` is specified by a homomorphism `\\psi\\in \\mathrm{Hom}(H,\\mathrm{Aut}(G))`\n     such that\n@@ -175,11 +175,11 @@ class GroupSemidirectProduct(CartesianProduct):\n \n     .. MATH::\n \n-        \\begin{align*}\n+        \\begin{aligned}\n         (g_1,h_1)(g_2,h_2) &= g_1 h_1 g_2 h_2 \\\\\n         &= g_1 h_1 g_2 h_1^{-1} h_1 h_2 \\\\\n         &= (g_1 twist(h_1,g_2), h_1 h_2)\n-        \\end{align*}\n+        \\end{aligned}\n \n     If ``prefix0`` (resp. ``prefixl``) is not None then it is used as a wrapper for\n     printing elements of ``G`` (resp. ``H``). If ``print_tuple`` is True then elements are printed\n```",
    "created_at": "2015-07-02T20:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193989",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>By default, a `.. MATH::` block is automatically enclosed in a math environment, so you shouldn't use an environment like `align*` there: it gets turned into something like

```
\begin{gather}
\begin{align*}
...
\end{align*}
\end{gather}
```
which is not valid LaTeX. To avoid the default, you can add `:nowrap:` at the beginning of the math block, or you can use an environment like `aligned` instead. This will fix it, but I would instead choose only one of these two approaches (instead of switching between them, as I've done here):

```diff
diff --git a/src/sage/combinat/root_system/extended_affine_weyl_group.py b/src/sage/combinat/root_system/extended_affine_weyl_group.py
index 7d35cac..56d9e6d 100644
--- a/src/sage/combinat/root_system/extended_affine_weyl_group.py
+++ b/src/sage/combinat/root_system/extended_affine_weyl_group.py
@@ -155,6 +155,7 @@ def ExtendedAffineWeylGroup(cartan_type, general_linear=None, **print_options):
     There are isomorphisms
 
     .. MATH::
+       :nowrap:
 
         \begin{align*}
             W &\cong M \rtimes W_0 \cong W_0 \ltimes M \\
diff --git a/src/sage/groups/group_semidirect_product.py b/src/sage/groups/group_semidirect_product.py
index 627056f..63b8769 100644
--- a/src/sage/groups/group_semidirect_product.py
+++ b/src/sage/groups/group_semidirect_product.py
@@ -152,11 +152,11 @@ class GroupSemidirectProduct(CartesianProduct):
         
     .. MATH::
 
-        \begin{align*}
+        \begin{aligned}
         (g_1,h_1)(g_2,h_2) &= g_1 h_1 g_2 h_2 \\
         &= g_1 g_2 g_2^{-1} h_1 g_2 h_2 \\
         &= (g_1g_2, twist(g_2^{-1}, h_1) h_2)
-        \end{align*}
+        \end{aligned}
 
     If ``act_to_right`` is False, the group `G \rtimes H` is specified by a homomorphism `\psi\in \mathrm{Hom}(H,\mathrm{Aut}(G))`
     such that
@@ -175,11 +175,11 @@ class GroupSemidirectProduct(CartesianProduct):
 
     .. MATH::
 
-        \begin{align*}
+        \begin{aligned}
         (g_1,h_1)(g_2,h_2) &= g_1 h_1 g_2 h_2 \\
         &= g_1 h_1 g_2 h_1^{-1} h_1 h_2 \\
         &= (g_1 twist(h_1,g_2), h_1 h_2)
-        \end{align*}
+        \end{aligned}
 
     If ``prefix0`` (resp. ``prefixl``) is not None then it is used as a wrapper for
     printing elements of ``G`` (resp. ``H``). If ``print_tuple`` is True then elements are printed
```



---

archive/issue_comments_193990.json:
```json
{
    "body": "<a id='comment:9'></a>There is a huge file called !`doc/output/latex/en/reference/combinat/` and at line 165376 we have the following:\n\n```\n\nThere are isomorphisms\n\\begin{gather}\n\\begin{split}\\begin{align*}\n\u00a0\u00a0\u00a0 W &\\cong M \\rtimes W_0 \\cong W_0 \\ltimes M \\\\\n\u00a0\u00a0\u00a0 E &\\cong L \\rtimes W_0 \\cong W_0 \\ltimes L\n\\end{align*}\\end{split}\\notag\n\\end{gather}\\paragraph{Fundamental group of affine Dynkin automorphisms}\n\n```\n\nAt this point pdflatex barfs.",
    "created_at": "2015-07-02T20:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193990",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:9'></a>There is a huge file called !`doc/output/latex/en/reference/combinat/` and at line 165376 we have the following:

```

There are isomorphisms
\begin{gather}
\begin{split}\begin{align*}
¬†¬†¬† W &\cong M \rtimes W_0 \cong W_0 \ltimes M \\
¬†¬†¬† E &\cong L \rtimes W_0 \cong W_0 \ltimes L
\end{align*}\end{split}\notag
\end{gather}\paragraph{Fundamental group of affine Dynkin automorphisms}

```

At this point pdflatex barfs.



---

archive/issue_comments_193991.json:
```json
{
    "body": "<a id='comment:0'></a>Thanks, Dan, that is very helpful. I will fix the doc.",
    "created_at": "2015-07-02T20:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193991",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

<a id='comment:0'></a>Thanks, Dan, that is very helpful. I will fix the doc.



---

archive/issue_comments_193992.json:
```json
{
    "body": "<a id='comment:1'></a>As John had mentioned, you need to change:\n\n```diff\n-        \\begin{align*}\n+        \\begin{aligned}\n             W &\\cong M \\rtimes W_0 \\cong W_0 \\ltimes M \\\\\n             E &\\cong L \\rtimes W_0 \\cong W_0 \\ltimes L\n-        \\end{align*}\n+        \\begin{aligned}\n```\nand\n\n```diff\n     .. MATH::\n \n-        \\begin{align*}\n+        \\begin{aligned}\n         (g_1,h_1)(g_2,h_2) &= g_1 h_1 g_2 h_2 \\\\\n         &= g_1 g_2 g_2^{-1} h_1 g_2 h_2 \\\\\n         &= (g_1g_2, twist(g_2^{-1}, h_1) h_2)\n-        \\end{align*}\n+        \\end{aligned}\n```\nAlso I believe this needs to be changed (there are 2 of theses):\n\n```diff\n     .. MATH::\n \n-        g h g^{-1} &= \\phi(g)(h).\n+        g h g^{-1} = \\phi(g)(h).\n```",
    "created_at": "2015-07-02T21:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193992",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>As John had mentioned, you need to change:

```diff
-        \begin{align*}
+        \begin{aligned}
             W &\cong M \rtimes W_0 \cong W_0 \ltimes M \\
             E &\cong L \rtimes W_0 \cong W_0 \ltimes L
-        \end{align*}
+        \begin{aligned}
```
and

```diff
     .. MATH::
 
-        \begin{align*}
+        \begin{aligned}
         (g_1,h_1)(g_2,h_2) &= g_1 h_1 g_2 h_2 \\
         &= g_1 g_2 g_2^{-1} h_1 g_2 h_2 \\
         &= (g_1g_2, twist(g_2^{-1}, h_1) h_2)
-        \end{align*}
+        \end{aligned}
```
Also I believe this needs to be changed (there are 2 of theses):

```diff
     .. MATH::
 
-        g h g^{-1} &= \phi(g)(h).
+        g h g^{-1} = \phi(g)(h).
```



---

archive/issue_comments_193993.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-03T06:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193993",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193994.json:
```json
{
    "body": "<a id='comment:3'></a>Sage now builds, reference.pdf builds and all tests pass. I'm setting status back to positive review.",
    "created_at": "2015-07-03T21:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193994",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:3'></a>Sage now builds, reference.pdf builds and all tests pass. I'm setting status back to positive review.



---

archive/issue_comments_193995.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-07-03T21:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193995",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_193996.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-04T08:19:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15375#issuecomment-193996",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_044676.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-04T08:19:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15375",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15375#event-44676"
}
```
