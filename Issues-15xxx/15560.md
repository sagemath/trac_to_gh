# Issue 15560: Add methods to rigged configurations

archive/issues_015323.json:
```json
{
    "body": "Adds some extra methods to rigged configurations: the action of the left column splitting and the basic operation in the bijection with tensor product of KR tableaux.\n\nAssignee: sage-combinat\n\nCC:  sage-combinat @anneschilling\n\nKeywords: rigged configurations\n\nBranch/Commit: 1e15993eed4b02fed79649aca88f6a6a6d7d843b\n\nReviewer: Anne Schilling\n\nAuthor: Travis Scrimshaw\n\nDependencies: #13872 #15882\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15560\n\n",
    "closed_at": "2014-07-27T04:41:18Z",
    "created_at": "2013-12-21T06:51:25Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Add methods to rigged configurations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15560",
    "user": "https://github.com/tscrim"
}
```
Adds some extra methods to rigged configurations: the action of the left column splitting and the basic operation in the bijection with tensor product of KR tableaux.

Assignee: sage-combinat

CC:  sage-combinat @anneschilling

Keywords: rigged configurations

Branch/Commit: 1e15993eed4b02fed79649aca88f6a6a6d7d843b

Reviewer: Anne Schilling

Author: Travis Scrimshaw

Dependencies: #13872 #15882

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15560





---

archive/issue_comments_210244.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2013-12-21T06:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210244",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_210245.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-21T06:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210245",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_210246.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-22T20:40:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210246",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_045491.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15560#event-45491"
}
```



---

archive/issue_comments_210247.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-14T15:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210247",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210248.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-18T15:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210248",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210249.json:
```json
{
    "body": "<a id='comment:8'></a>Thanks in advance for doing the review.",
    "created_at": "2014-03-21T00:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210249",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Thanks in advance for doing the review.



---

archive/issue_comments_210250.json:
```json
{
    "body": "<a id='comment:9'></a>Hi Travis,\n\nHere are further comments:\n\n```\n+ If we are construction a rigged configuration from a rigged configuration\n+ (say of another type) and we don't want to recompute the vacancy numbers,\n+ we can use the ``use_vacancy_numbers`` to avoid the recomputation.\n```\nThis is not a sentence. Perhaps you want \"If we are constructing\"?\n\nAlso, it would be great to add left_split as a method to KirillovReshetikhinTableaux and possibly also the right_split method! This can be just done by using the bijection to rigged configurations, but it would be very handy to have these methods directly on KirillovReshetikhinTableaux as well.\n\nThanks,\n\nAnne",
    "created_at": "2014-03-21T04:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210250",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:9'></a>Hi Travis,

Here are further comments:

```
+ If we are construction a rigged configuration from a rigged configuration
+ (say of another type) and we don't want to recompute the vacancy numbers,
+ we can use the ``use_vacancy_numbers`` to avoid the recomputation.
```
This is not a sentence. Perhaps you want "If we are constructing"?

Also, it would be great to add left_split as a method to KirillovReshetikhinTableaux and possibly also the right_split method! This can be just done by using the bijection to rigged configurations, but it would be very handy to have these methods directly on KirillovReshetikhinTableaux as well.

Thanks,

Anne



---

archive/issue_comments_210251.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-03-21T04:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210251",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_210252.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-03-23T19:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210252",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_210253.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-03-23T19:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210253",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_210254.json:
```json
{
    "body": "<a id='comment:12'></a>Here's the major changes:\n\n- Based this off #15882.\n\n- Added the Luzstig involution to (tensor products of) KR tableaux, KR crystals, and rigged configurations.\n\n- Added left/right splitting maps to (tensor products of) KR tableaux and rigged configurations. (The right splitting map is non-trivial on KR tableaux; look in type D<sub>4</sub><sup>(1)</sup> at the B<sup>2,2</sup> module generators.)\n\n- Moved `opposition_automorphism()` from the crystals category into Cartan types.\n\n- Fixed the typo noted above.\n\nBest,\n\nTravis",
    "created_at": "2014-03-23T19:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210254",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Here's the major changes:

- Based this off #15882.

- Added the Luzstig involution to (tensor products of) KR tableaux, KR crystals, and rigged configurations.

- Added left/right splitting maps to (tensor products of) KR tableaux and rigged configurations. (The right splitting map is non-trivial on KR tableaux; look in type D<sub>4</sub><sup>(1)</sup> at the B<sup>2,2</sup> module generators.)

- Moved `opposition_automorphism()` from the crystals category into Cartan types.

- Fixed the typo noted above.

Best,

Travis



---

archive/issue_comments_210255.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-24T14:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210255",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210256.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-09T02:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210257.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-14T15:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210258.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-14T15:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_045492.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15560#event-45492"
}
```



---

archive/issue_events_045493.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15560#event-45493"
}
```



---

archive/issue_comments_210259.json:
```json
{
    "body": "<a id='comment:18'></a>Based on 6.2beta1 it fails:\n\n```\nsage -t --long src/sage/combinat/rigged_configurations/rigged_configurations.py  # 1 doctest failed\n```",
    "created_at": "2014-05-15T13:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210259",
    "user": "https://github.com/rwst"
}
```

<a id='comment:18'></a>Based on 6.2beta1 it fails:

```
sage -t --long src/sage/combinat/rigged_configurations/rigged_configurations.py  # 1 doctest failed
```



---

archive/issue_comments_210260.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-15T13:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210260",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_210261.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-15T14:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210261",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210262.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-15T14:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210262",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_210263.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-11T01:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210264.json:
```json
{
    "body": "<a id='comment:22'></a>Hi Travis,\n\nHere are some more comments:\n\n* The documentation of right_split has a ` missing. Please run the documentation to see that it actually compiles!\n\n* Please add the map `\\theta` to rigged configuration and compare to lusztig_involution.\n\n* Please add tests and more explanations what `build_graph` does. Explain which graph it is computing. Also the following fails:\n\n```\nsage: RC = RiggedConfigurations(['D', 4, 1], [[2, 1]])\nsage: from sage.combinat.rigged_configurations.bij_type_D import RCToKRTBijectionTypeD\nsage: RCToKRTBijectionTypeD(RC(partition_list=[[1],[1],[1],[1]])).run()\n[[2], [-3]]\n\nsage: RCToKRTBijectionTypeD(RC(partition_list=[[1],[1],[1],[1]])).run(build_graph=True)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-10-1c82ae944c4d> in <module>()\n----> 1 RCToKRTBijectionTypeD(RC(partition_list=[[Integer(1)],[Integer(1)],[Integer(1)],[Integer(1)]])).run(build_graph=True)\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/bij_type_D.pyc in run(self, verbose, build_graph)\n    513 \n    514                     if build_graph:\n--> 515                         y = self.rigged_con.parent()(*[x._clone() for x in self.cur_partitions])\n    516                         self._graph.append([self._graph[-1][1], (y, len(self._graph)), letters(b)])\n    517 \n\n/Applications/sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:8924)()\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (sage/structure/coerce_maps.c:4637)()\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (sage/structure/coerce_maps.c:4501)()\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/rigged_configurations.pyc in _element_constructor_(self, *lst, **options)\n    717             lst = lst[0]\n    718 \n--> 719         return self.element_class(self, list(lst), **options)\n    720 \n    721     def _calc_vacancy_number(self, partitions, a, i, **options):\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/rigged_configuration_element.pyc in __init__(self, parent, rigged_partitions, **options)\n    289             nu[-1] = RiggedPartitionTypeB(nu[-1])\n    290 \n--> 291         ClonableArray.__init__(self, parent, nu)\n    292 \n    293     def _repr_(self):\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/structure/list_clone.so in sage.structure.list_clone.ClonableArray.__init__ (sage/structure/list_clone.c:3758)()\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/structure/list_clone.so in sage.structure.list_clone.ClonableArray.check (sage/structure/list_clone.c:5758)()\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/rigged_configuration_element.pyc in check(self)\n    492             for i, vac_num in enumerate(partition.vacancy_numbers):\n    493                 if vac_num < partition.rigging[i]:\n--> 494                     raise ValueError(\"rigging can be at most the vacancy number\")\n    495 \n    496     def to_tensor_product_of_kirillov_reshetikhin_tableaux(self, display_steps=False, build_graph=False):\n\nValueError: rigging can be at most the vacancy number\n``` \n\nAnne",
    "created_at": "2014-07-19T22:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210264",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:22'></a>Hi Travis,

Here are some more comments:

* The documentation of right_split has a ` missing. Please run the documentation to see that it actually compiles!

* Please add the map `\theta` to rigged configuration and compare to lusztig_involution.

* Please add tests and more explanations what `build_graph` does. Explain which graph it is computing. Also the following fails:

```
sage: RC = RiggedConfigurations(['D', 4, 1], [[2, 1]])
sage: from sage.combinat.rigged_configurations.bij_type_D import RCToKRTBijectionTypeD
sage: RCToKRTBijectionTypeD(RC(partition_list=[[1],[1],[1],[1]])).run()
[[2], [-3]]

sage: RCToKRTBijectionTypeD(RC(partition_list=[[1],[1],[1],[1]])).run(build_graph=True)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-10-1c82ae944c4d> in <module>()
----> 1 RCToKRTBijectionTypeD(RC(partition_list=[[Integer(1)],[Integer(1)],[Integer(1)],[Integer(1)]])).run(build_graph=True)

/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/bij_type_D.pyc in run(self, verbose, build_graph)
    513 
    514                     if build_graph:
--> 515                         y = self.rigged_con.parent()(*[x._clone() for x in self.cur_partitions])
    516                         self._graph.append([self._graph[-1][1], (y, len(self._graph)), letters(b)])
    517 

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:8924)()

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (sage/structure/coerce_maps.c:4637)()

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (sage/structure/coerce_maps.c:4501)()

/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/rigged_configurations.pyc in _element_constructor_(self, *lst, **options)
    717             lst = lst[0]
    718 
--> 719         return self.element_class(self, list(lst), **options)
    720 
    721     def _calc_vacancy_number(self, partitions, a, i, **options):

/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/rigged_configuration_element.pyc in __init__(self, parent, rigged_partitions, **options)
    289             nu[-1] = RiggedPartitionTypeB(nu[-1])
    290 
--> 291         ClonableArray.__init__(self, parent, nu)
    292 
    293     def _repr_(self):

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/list_clone.so in sage.structure.list_clone.ClonableArray.__init__ (sage/structure/list_clone.c:3758)()

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/list_clone.so in sage.structure.list_clone.ClonableArray.check (sage/structure/list_clone.c:5758)()

/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/rigged_configuration_element.pyc in check(self)
    492             for i, vac_num in enumerate(partition.vacancy_numbers):
    493                 if vac_num < partition.rigging[i]:
--> 494                     raise ValueError("rigging can be at most the vacancy number")
    495 
    496     def to_tensor_product_of_kirillov_reshetikhin_tableaux(self, display_steps=False, build_graph=False):

ValueError: rigging can be at most the vacancy number
``` 

Anne



---

archive/issue_comments_210265.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-20T17:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210265",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210266.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:22 aschilling]:\n> * The documentation of right_split has a ` missing. Please run the documentation to see that it actually compiles!\n\n\nI couldn't find this and the documentation built without an issue and looks okay to me (although there was a missing 'u').\n\n> * Please add the map `\\theta` to rigged configuration and compare to lusztig_involution.\n\n\nAdded under the name `complement`. In general, it will be different than `lusztig_involution`, which fixes each classical component, whereas `\\theta` fixes the classical structure but permutes the classical components. Or did you mean you wanted me to add a doctest showing this?\n\n> * Please add tests and more explanations what `build_graph` does. Explain which graph it is computing. Also the following fails:\n\n\nThis was due to before, the element constructor always preserved the vacancy numbers and now it recomputes it unless explicitly stated. Fixed with added tests. I expanded the documentation in `to_tensor_..._tableaux()` as well.",
    "created_at": "2014-07-20T17:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210266",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>Replying to [comment:22 aschilling]:
> * The documentation of right_split has a ` missing. Please run the documentation to see that it actually compiles!


I couldn't find this and the documentation built without an issue and looks okay to me (although there was a missing 'u').

> * Please add the map `\theta` to rigged configuration and compare to lusztig_involution.


Added under the name `complement`. In general, it will be different than `lusztig_involution`, which fixes each classical component, whereas `\theta` fixes the classical structure but permutes the classical components. Or did you mean you wanted me to add a doctest showing this?

> * Please add tests and more explanations what `build_graph` does. Explain which graph it is computing. Also the following fails:


This was due to before, the element constructor always preserved the vacancy numbers and now it recomputes it unless explicitly stated. Fixed with added tests. I expanded the documentation in `to_tensor_..._tableaux()` as well.



---

archive/issue_comments_210267.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 tscrim]:\n> Replying to [comment:22 aschilling]:\n> > * The documentation of right_split has a ` missing. Please run the documentation to see that it actually compiles!\n \n> \n> I couldn't find this and the documentation built without an issue and looks okay to me (although there was a missing 'u').\n\n\nThere is a ` missing in\n\n```\n+ Let `\\ast` denote the :meth:`Lusztig involution<lusztig_involution>`,\n+ and `\\mathrm{ls}` as the :meth:`left splitting map<left_split>`.\n+ The right splitting map is defined as\n+ \\mathrm{rs} := \\ast \\circ \\mathrm{ls} \\circ \\ast`.\n```\n\n> > * Please add the map `\\theta` to rigged configuration and compare to lusztig_involution.\n \n> \n> Added under the name `complement`. In general, it will be different than `lusztig_involution`, which fixes each classical component, whereas `\\theta` fixes the classical structure but permutes the classical components. Or did you mean you wanted me to add a doctest showing this?\n\n\nUnder `\\bar \\Phi` the map `\\star` (which I guess is what you call lusztig_involution) intertwines with `\\theta`. It would be good to add a check like that.\n \n> > * Please add tests and more explanations what `build_graph` does. Explain which graph it is computing. Also the following fails:\n \n> \n> This was due to before, the element constructor always preserved the vacancy numbers and now it recomputes it unless explicitly stated. Fixed with added tests. I expanded the documentation in `to_tensor_..._tableaux()` as well.\n\n\nEven though it is stated in the documentation, that `build_graph` is an optional \nparameter, it does not seem to take this input:\n\n```\nsage: rc = RC(partition_list=[[1],[1],[1],[1]])\nsage: rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-8-702cb808a701> in <module>()\n----> 1 rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)\n\nTypeError: to_tensor_product_of_kirillov_reshetikhin_crystals() got an unexpected keyword argument 'build_graph'\n```\nWhat is the difference between `build_graph` and `display_steps`?\n\nAnne",
    "created_at": "2014-07-21T15:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210267",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:25'></a>Replying to [comment:24 tscrim]:
> Replying to [comment:22 aschilling]:
> > * The documentation of right_split has a ` missing. Please run the documentation to see that it actually compiles!
 
> 
> I couldn't find this and the documentation built without an issue and looks okay to me (although there was a missing 'u').


There is a ` missing in

```
+ Let `\ast` denote the :meth:`Lusztig involution<lusztig_involution>`,
+ and `\mathrm{ls}` as the :meth:`left splitting map<left_split>`.
+ The right splitting map is defined as
+ \mathrm{rs} := \ast \circ \mathrm{ls} \circ \ast`.
```

> > * Please add the map `\theta` to rigged configuration and compare to lusztig_involution.
 
> 
> Added under the name `complement`. In general, it will be different than `lusztig_involution`, which fixes each classical component, whereas `\theta` fixes the classical structure but permutes the classical components. Or did you mean you wanted me to add a doctest showing this?


Under `\bar \Phi` the map `\star` (which I guess is what you call lusztig_involution) intertwines with `\theta`. It would be good to add a check like that.
 
> > * Please add tests and more explanations what `build_graph` does. Explain which graph it is computing. Also the following fails:
 
> 
> This was due to before, the element constructor always preserved the vacancy numbers and now it recomputes it unless explicitly stated. Fixed with added tests. I expanded the documentation in `to_tensor_..._tableaux()` as well.


Even though it is stated in the documentation, that `build_graph` is an optional 
parameter, it does not seem to take this input:

```
sage: rc = RC(partition_list=[[1],[1],[1],[1]])
sage: rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-8-702cb808a701> in <module>()
----> 1 rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)

TypeError: to_tensor_product_of_kirillov_reshetikhin_crystals() got an unexpected keyword argument 'build_graph'
```
What is the difference between `build_graph` and `display_steps`?

Anne



---

archive/issue_comments_210268.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-21T16:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210269.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-21T16:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210269",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210270.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:25 aschilling]:\n> There is a ` missing in\n> ...\n\n\nAh, I forgot about the right split for KR tableaux. :P Fixed.\n\n> Under `\\bar \\Phi` the map `\\star` (which I guess is what you call lusztig_involution) intertwines with `\\theta`. It would be good to add a check like that.\n\n\nI've added a doctest.\n\n> Even though it is stated in the documentation, that `build_graph` is an optional \n> parameter, it does not seem to take this input:\n> \n> ```\n> sage: rc = RC(partition_list=[[1],[1],[1],[1]])\n> sage: rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)\n> ---------------------------------------------------------------------------\n> TypeError                                 Traceback (most recent call last)\n> <ipython-input-8-702cb808a701> in <module>()\n> ----> 1 rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)\n> \n> TypeError: to_tensor_product_of_kirillov_reshetikhin_crystals() got an unexpected keyword argument 'build_graph'\n> ```\n\n\nThis is because this was not a parameter in `to_tensor_product_of_kirillov_reshetikhin_crystals`, but in `*_tableaux`. I've also added the parameter (and doc/test) to the 'to TP of KR crystals' methods.\n\n> What is the difference between `build_graph` and `display_steps`?\n\n\nThe first one constructs and returns the graph, the latter outputs each step to the terminal. I've changed `output` to `print` to avoid some ambiguity.",
    "created_at": "2014-07-21T16:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210270",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>Replying to [comment:25 aschilling]:
> There is a ` missing in
> ...


Ah, I forgot about the right split for KR tableaux. :P Fixed.

> Under `\bar \Phi` the map `\star` (which I guess is what you call lusztig_involution) intertwines with `\theta`. It would be good to add a check like that.


I've added a doctest.

> Even though it is stated in the documentation, that `build_graph` is an optional 
> parameter, it does not seem to take this input:
> 
> ```
> sage: rc = RC(partition_list=[[1],[1],[1],[1]])
> sage: rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)
> ---------------------------------------------------------------------------
> TypeError                                 Traceback (most recent call last)
> <ipython-input-8-702cb808a701> in <module>()
> ----> 1 rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)
> 
> TypeError: to_tensor_product_of_kirillov_reshetikhin_crystals() got an unexpected keyword argument 'build_graph'
> ```


This is because this was not a parameter in `to_tensor_product_of_kirillov_reshetikhin_crystals`, but in `*_tableaux`. I've also added the parameter (and doc/test) to the 'to TP of KR crystals' methods.

> What is the difference between `build_graph` and `display_steps`?


The first one constructs and returns the graph, the latter outputs each step to the terminal. I've changed `output` to `print` to avoid some ambiguity.



---

archive/issue_comments_210271.json:
```json
{
    "body": "<a id='comment:29'></a>Why is the right_split that you implemented the correct map? I thought that rs = * ls * using the * map.",
    "created_at": "2014-07-22T04:35:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210271",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:29'></a>Why is the right_split that you implemented the correct map? I thought that rs = * ls * using the * map.



---

archive/issue_comments_210272.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 aschilling]:\n> Why is the right_split that you implemented the correct map? I thought that rs = * ls * using the * map.\n\n\n`right_split` is implemented as `* ls *` (where `*` is the Lusztig involution) for both rigged configurations and KR tableaux.",
    "created_at": "2014-07-22T18:55:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210272",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'></a>Replying to [comment:29 aschilling]:
> Why is the right_split that you implemented the correct map? I thought that rs = * ls * using the * map.


`right_split` is implemented as `* ls *` (where `*` is the Lusztig involution) for both rigged configurations and KR tableaux.



---

archive/issue_comments_210273.json:
```json
{
    "body": "<a id='comment:31'></a>With your current code\n\n```\nsage: RC = RiggedConfigurations(['D', 4, 1], [[2,2],[2, 2]])\nsage: all((rc.right_split()).to_tensor_product_of_kirillov_reshetikhin_tableaux() == (rc.to_tensor_product_of_kirillov_reshetikhin_tableaux()).right_split() for rc in RC)\nFalse\n```\nI think you need to use complement in the definition the RC side. Also, it might be better to rename `complement` to `complement_rigging` for a more descriptive name.",
    "created_at": "2014-07-23T01:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210273",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:31'></a>With your current code

```
sage: RC = RiggedConfigurations(['D', 4, 1], [[2,2],[2, 2]])
sage: all((rc.right_split()).to_tensor_product_of_kirillov_reshetikhin_tableaux() == (rc.to_tensor_product_of_kirillov_reshetikhin_tableaux()).right_split() for rc in RC)
False
```
I think you need to use complement in the definition the RC side. Also, it might be better to rename `complement` to `complement_rigging` for a more descriptive name.



---

archive/issue_comments_210274.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-23T02:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210274",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210275.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-23T02:55:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210275",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210276.json:
```json
{
    "body": "<a id='comment:34'></a>Hi Travis,\n\nThanks for the changes. I get the following failure when trying to play with the code\n\n```\nsage: KRT = crystals.TensorProductOfKirillovReshetikhinTableaux(['D',4,1], [[2,2], [1,2]])\nsage: all(b.to_rigged_configuration().lusztig_involution() == b.lusztig_involution().to_rigged_configuration() for b in KRT)\nFalse\n```\n\nAnne",
    "created_at": "2014-07-23T21:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210276",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:34'></a>Hi Travis,

Thanks for the changes. I get the following failure when trying to play with the code

```
sage: KRT = crystals.TensorProductOfKirillovReshetikhinTableaux(['D',4,1], [[2,2], [1,2]])
sage: all(b.to_rigged_configuration().lusztig_involution() == b.lusztig_involution().to_rigged_configuration() for b in KRT)
False
```

Anne



---

archive/issue_comments_210277.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-26T15:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210278.json:
```json
{
    "body": "<a id='comment:36'></a>Hey Anne,\n\nI've removed the `lusztig_involution()` and `right_box()` methods for rigged configurations as per our discussion.",
    "created_at": "2014-07-26T15:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210278",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:36'></a>Hey Anne,

I've removed the `lusztig_involution()` and `right_box()` methods for rigged configurations as per our discussion.



---

archive/issue_comments_210279.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-27T01:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210279",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_210280.json:
```json
{
    "body": "<a id='comment:37'></a>Ok, looks good now!\n\nAnne",
    "created_at": "2014-07-27T01:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210280",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:37'></a>Ok, looks good now!

Anne



---

archive/issue_comments_210281.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-27T04:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15560#issuecomment-210281",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_045494.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-27T04:41:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15560",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15560#event-45494"
}
```
