# Issue 15669: Errors with graph complement

archive/issues_015432.json:
```json
{
    "body": "We can't take the complement of an immutable graph:\n\n```\nsage: Gamma = graphs.PathGraph(5).copy(immutable=True)\nsage: Gamma.complement()\nNotImplementedError\n```\nwhich is because `copy(Gamma)` doesn't return a mutable copy.\n\n\n**Assignee:** @tscrim\n\n**CC:**  @nathanncohen\n\n**Branch:** [public/graphs/complement-15669](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/complement-15669)\n\n**Commit:** [c393b585073dbd253314e13f3ffed01c6b8bd892](https://github.com/sagemath/sagetrac-mirror/commit/c393b585073dbd253314e13f3ffed01c6b8bd892)\n\n**Reviewer:** Nathann Cohen\n\n**Author:** Travis Scrimshaw\n\n**Dependencies:** #15681\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15669\n\n",
    "closed_at": "2014-02-01T19:39:11Z",
    "created_at": "2014-01-13T16:18:55Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Errors with graph complement",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15669",
    "user": "https://github.com/tscrim"
}
```
We can't take the complement of an immutable graph:

```
sage: Gamma = graphs.PathGraph(5).copy(immutable=True)
sage: Gamma.complement()
NotImplementedError
```
which is because `copy(Gamma)` doesn't return a mutable copy.


**Assignee:** @tscrim

**CC:**  @nathanncohen

**Branch:** [public/graphs/complement-15669](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/complement-15669)

**Commit:** [c393b585073dbd253314e13f3ffed01c6b8bd892](https://github.com/sagemath/sagetrac-mirror/commit/c393b585073dbd253314e13f3ffed01c6b8bd892)

**Reviewer:** Nathann Cohen

**Author:** Travis Scrimshaw

**Dependencies:** #15681

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/15669





---

archive/issue_comments_256655.json:
```json
{
    "body": "<a id='comment:1'></a>\nHello Travis !\n\nWell, I guess you can fix this one yourself ! You should just add a `immutable=True` to the call of `copy` in this method. Besides, your second example of code is not really a bug. `GC` is what it should be, but if you plot the complement of a graph with the same layout as for the original graph, it so happens that the edges are all horizontal too. You can add a `layout=\"spring\"` to `plot()` to emphasize it.\n\nNathann",
    "created_at": "2014-01-13T16:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256655",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>
Hello Travis !

Well, I guess you can fix this one yourself ! You should just add a `immutable=True` to the call of `copy` in this method. Besides, your second example of code is not really a bug. `GC` is what it should be, but if you plot the complement of a graph with the same layout as for the original graph, it so happens that the edges are all horizontal too. You can add a `layout="spring"` to `plot()` to emphasize it.

Nathann



---

archive/issue_comments_256656.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [ncohen](#comment%3A1):\n> Well, I guess you can fix this one yourself ! You should just add a `immutable=True` to the call of `copy` in this method.\n\n\nDone and NR. Although making an immutable copy destroys the name of the graph, so a slightly different question is do we want that behavior.\n\n> Besides, your second example of code is not really a bug. `GC` is what it should be, but if you plot the complement of a graph with the same layout as for the original graph, it so happens that the edges are all horizontal too. You can add a `layout=\"spring\"` to `plot()` to emphasize it.\n\n\nAh, I see. I also understand why you want to keep the same layout as the original graph too.\n\nThanks,\n\nTravis\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b42e196c7ad877732d84090c4c59c4d878f1888\">5b42e19</a></td><td><code>Fixed complement for immutable graphs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c\">e2a498c</a></td><td><code>Fixed doctest output.</code></td></tr></table>\n",
    "created_at": "2014-01-13T16:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256656",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Replying to [ncohen](#comment%3A1):
> Well, I guess you can fix this one yourself ! You should just add a `immutable=True` to the call of `copy` in this method.


Done and NR. Although making an immutable copy destroys the name of the graph, so a slightly different question is do we want that behavior.

> Besides, your second example of code is not really a bug. `GC` is what it should be, but if you plot the complement of a graph with the same layout as for the original graph, it so happens that the edges are all horizontal too. You can add a `layout="spring"` to `plot()` to emphasize it.


Ah, I see. I also understand why you want to keep the same layout as the original graph too.

Thanks,

Travis

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b42e196c7ad877732d84090c4c59c4d878f1888">5b42e19</a></td><td><code>Fixed complement for immutable graphs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c">e2a498c</a></td><td><code>Fixed doctest output.</code></td></tr></table>




---

archive/issue_comments_256657.json:
```json
{
    "body": "**Branch:** [public/graphs/complement-15699](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/complement-15699)",
    "created_at": "2014-01-13T16:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256657",
    "user": "https://github.com/tscrim"
}
```

**Branch:** [public/graphs/complement-15699](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/complement-15699)



---

archive/issue_comments_256658.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,11 +7,3 @@\n ```\n which is because `copy(Gamma)` doesn't return a mutable copy.\n \n-They are plotting their original graph.\n-\n-```\n-sage: G = graphs.PathGraph(5)\n-sage: G.plot()\n-sage: GC = G.complement()\n-sage: GC.plot() # Same as G.plot()\n-```\n``````\n",
    "created_at": "2014-01-13T16:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256658",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,11 +7,3 @@
 ```
 which is because `copy(Gamma)` doesn't return a mutable copy.
 
-They are plotting their original graph.
-
-```
-sage: G = graphs.PathGraph(5)
-sage: G.plot()
-sage: GC = G.complement()
-sage: GC.plot() # Same as G.plot()
-```
``````




---

archive/issue_comments_256659.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2014-01-13T16:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256659",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_256660.json:
```json
{
    "body": "**Author:** Travis Scrimshaw",
    "created_at": "2014-01-13T16:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256660",
    "user": "https://github.com/tscrim"
}
```

**Author:** Travis Scrimshaw



---

archive/issue_comments_256661.json:
```json
{
    "body": "**Commit:** [e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c](https://github.com/sagemath/sagetrac-mirror/commit/e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c)",
    "created_at": "2014-01-13T16:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256661",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c](https://github.com/sagemath/sagetrac-mirror/commit/e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c)



---

archive/issue_comments_256662.json:
```json
{
    "body": "<a id='comment:3'></a>\nHello !\n\n> Done and NR. Although making an immutable copy destroys the name of the graph, so a slightly different question is do we want that behavior.\n\n\nO_o\n\nDestroys the name of the graph ? Why ? Well if it does I guess it's a bug, isn't it ? `O_o`\n\nBesides : shouldn't the complement of an immutable graph be immutable ?\n\nThere are so many functions that will react oddly to immutable graphs....\n\n> Ah, I see. I also understand why you want to keep the same layout as the original graph too.\n\n\nYep. It's just unfortunate for this graph `^^;`\n\nNathann",
    "created_at": "2014-01-13T16:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256662",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>
Hello !

> Done and NR. Although making an immutable copy destroys the name of the graph, so a slightly different question is do we want that behavior.


O_o

Destroys the name of the graph ? Why ? Well if it does I guess it's a bug, isn't it ? `O_o`

Besides : shouldn't the complement of an immutable graph be immutable ?

There are so many functions that will react oddly to immutable graphs....

> Ah, I see. I also understand why you want to keep the same layout as the original graph too.


Yep. It's just unfortunate for this graph `^^;`

Nathann



---

archive/issue_comments_256663.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [ncohen](#comment%3A3):\n> Destroys the name of the graph ? Why ? Well if it does I guess it's a bug, isn't it ? `O_o`\n\n\nI agree that it is a bug:\n\n```\nsage: G = graphs.PathGraph(5)\nsage: G\nPath Graph: Graph on 5 vertices\nsage: G.copy()\nPath Graph: Graph on 5 vertices\nsage: G.copy(immutable=True)\nGraph on 5 vertices\n```\n\n> Besides : shouldn't the complement of an immutable graph be immutable ?\n\n\nWhat's the \"canonical\" way to check if a graph `G` is immutable? `hasattr(G, '_immutable') and G._immutable`?\n \n> There are so many functions that will react oddly to immutable graphs....\n\n\nWe'll just keep fixing them as we come across them I guess.\n\nBest,\n\nTravis",
    "created_at": "2014-01-13T17:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256663",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
Replying to [ncohen](#comment%3A3):
> Destroys the name of the graph ? Why ? Well if it does I guess it's a bug, isn't it ? `O_o`


I agree that it is a bug:

```
sage: G = graphs.PathGraph(5)
sage: G
Path Graph: Graph on 5 vertices
sage: G.copy()
Path Graph: Graph on 5 vertices
sage: G.copy(immutable=True)
Graph on 5 vertices
```

> Besides : shouldn't the complement of an immutable graph be immutable ?


What's the "canonical" way to check if a graph `G` is immutable? `hasattr(G, '_immutable') and G._immutable`?
 
> There are so many functions that will react oddly to immutable graphs....


We'll just keep fixing them as we come across them I guess.

Best,

Travis



---

archive/issue_comments_256664.json:
```json
{
    "body": "<a id='comment:5'></a>\nYoooooooo !\n\n> What's the \"canonical\" way to check if a graph `G` is immutable? `hasattr(G, '_immutable') and G._immutable`?\n\n\nHmmmmmmm.... Well, we have been using `if hasattr(G, '_immutable', False):` several times now, even if I don't like it. But my main reason for not liking it is that the Poset backend have this variable set while they are not immutable, and #15623 will fix it anyway... So perhaps we can do that indeed. Until there is a generic way to test if something is immutable `:-)`\n\n> We'll just keep fixing them as we come across them I guess.\n\n\nYepyepyep `:-/`\n\nBut the graph products. The unions. The subgraphs. The orientations... pffffff `:-/`\n\nNathann",
    "created_at": "2014-01-13T17:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256664",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Yoooooooo !

> What's the "canonical" way to check if a graph `G` is immutable? `hasattr(G, '_immutable') and G._immutable`?


Hmmmmmmm.... Well, we have been using `if hasattr(G, '_immutable', False):` several times now, even if I don't like it. But my main reason for not liking it is that the Poset backend have this variable set while they are not immutable, and #15623 will fix it anyway... So perhaps we can do that indeed. Until there is a generic way to test if something is immutable `:-)`

> We'll just keep fixing them as we come across them I guess.


Yepyepyep `:-/`

But the graph products. The unions. The subgraphs. The orientations... pffffff `:-/`

Nathann



---

archive/issue_comments_256665.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2014-01-14T09:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256665",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_256666.json:
```json
{
    "body": "<a id='comment:7'></a>\nOkay, the names issue is actually something with the graph constructor:\n\n```\nsage: P = graphs.PetersenGraph()\nsage: P\nPetersen graph: Graph on 10 vertices\nsage: Graph(P)\nPetersen graph: Graph on 10 vertices\nsage: Graph(P, immutable=False)\nPetersen graph: Graph on 10 vertices\nsage: Graph(P, immutable=True)\nGraph on 10 vertices\nsage: Graph(P, immutable=True, name=\"Petersen graph\") # This is the bad one\nGraph on 10 vertices\nsage: Graph(_, immutable=False, name=\"Petersen graph\")\nPetersen graph: Graph on 10 vertices\n```\n\nNathann, you're likely to know best how to fix that, do you think you could do it?",
    "created_at": "2014-01-14T18:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256666",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
Okay, the names issue is actually something with the graph constructor:

```
sage: P = graphs.PetersenGraph()
sage: P
Petersen graph: Graph on 10 vertices
sage: Graph(P)
Petersen graph: Graph on 10 vertices
sage: Graph(P, immutable=False)
Petersen graph: Graph on 10 vertices
sage: Graph(P, immutable=True)
Graph on 10 vertices
sage: Graph(P, immutable=True, name="Petersen graph") # This is the bad one
Graph on 10 vertices
sage: Graph(_, immutable=False, name="Petersen graph")
Petersen graph: Graph on 10 vertices
```

Nathann, you're likely to know best how to fix that, do you think you could do it?



---

archive/issue_comments_256667.json:
```json
{
    "body": "<a id='comment:8'></a>\nYoooooooooo !\n\n> Nathann, you're likely to know best how to fix that, do you think you could do it?\n\n\nOh sorry, I thought that you would only deal with this `copy()` function (returning an immutable graph when the input was immutable too) and leave this name thing to me. Do you think that this behaviour for `copy()` should not be implemented before this name thing is fixed ?\n\nNathann",
    "created_at": "2014-01-14T18:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256667",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Yoooooooooo !

> Nathann, you're likely to know best how to fix that, do you think you could do it?


Oh sorry, I thought that you would only deal with this `copy()` function (returning an immutable graph when the input was immutable too) and leave this name thing to me. Do you think that this behaviour for `copy()` should not be implemented before this name thing is fixed ?

Nathann



---

archive/issue_comments_256668.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe `copy()` not preserving the name is the problem above. This leads to a (somewhat) bad doctest output here. I will be changing `complement()` to return an immutable graph if given an immutable graph.",
    "created_at": "2014-01-14T20:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256668",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
The `copy()` not preserving the name is the problem above. This leads to a (somewhat) bad doctest output here. I will be changing `complement()` to return an immutable graph if given an immutable graph.



---

archive/issue_comments_256669.json:
```json
{
    "body": "<a id='comment:10'></a>\nOkay, done in #15681 !\n\nNathann",
    "created_at": "2014-01-15T10:28:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256669",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
Okay, done in #15681 !

Nathann



---

archive/issue_comments_256670.json:
```json
{
    "body": "**Changing commit** from \"[e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c](https://github.com/sagemath/sagetrac-mirror/commit/e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c)\" to \"[388d034ee0116bfc2d8991ecc2ace5fe4d6b6b00](https://github.com/sagemath/sagetrac-mirror/commit/388d034ee0116bfc2d8991ecc2ace5fe4d6b6b00)\".",
    "created_at": "2014-01-15T17:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c](https://github.com/sagemath/sagetrac-mirror/commit/e2a498c3c7adc71adcadd76b0bc09ea9a6efe77c)" to "[388d034ee0116bfc2d8991ecc2ace5fe4d6b6b00](https://github.com/sagemath/sagetrac-mirror/commit/388d034ee0116bfc2d8991ecc2ace5fe4d6b6b00)".



---

archive/issue_comments_256671.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f578050749912c5f5c66824cf50475aa74c0f23\">0f57805</a></td><td><code>trac #15622: Immutable graphs must not be relabeled</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6ed0387bb16a0102cc2792494d120df7b0fe292\">b6ed038</a></td><td><code>trac #15623: Immutable graph backend for Posets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee8c39521a203a53876e435e271e59c38a4ca429\">ee8c395</a></td><td><code>Trac 15623: Let to_graph return an immutable graph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dcb8a0bae89c392a79d2dfcf149aaba8a8e68dd0\">dcb8a0b</a></td><td><code>trac #15623: rebase on 6.1.beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769\">529f785</a></td><td><code>trac #15622: More informative exception message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2245c020cd80a1d248cf0a453270f4dbd9d12f36\">2245c02</a></td><td><code>Trac 15622: Review commit, fixing a misspelled doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60ad5755c94dd61d4573a623e3b0c5fe70020d0a\">60ad575</a></td><td><code>trac #15622: Rebase on 6.1.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6398780eca28da56527b3360d5fd597308517db9\">6398780</a></td><td><code>trac #15622: bugfix before #15623 gets merged</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3531566070dbda71deb0864bf8bd86b4ee22960f\">3531566</a></td><td><code>trac #15623: Rebase on updated #15622</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95cecd153d53a0666a3f1814831efc5cb15cb516\">95cecd1</a></td><td><code>trac #15623: Removing the hack from #15622, update a variable's name</code></td></tr></table>\n",
    "created_at": "2014-01-15T17:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f578050749912c5f5c66824cf50475aa74c0f23">0f57805</a></td><td><code>trac #15622: Immutable graphs must not be relabeled</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6ed0387bb16a0102cc2792494d120df7b0fe292">b6ed038</a></td><td><code>trac #15623: Immutable graph backend for Posets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee8c39521a203a53876e435e271e59c38a4ca429">ee8c395</a></td><td><code>Trac 15623: Let to_graph return an immutable graph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dcb8a0bae89c392a79d2dfcf149aaba8a8e68dd0">dcb8a0b</a></td><td><code>trac #15623: rebase on 6.1.beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/529f7850c111c19522a8f18f9ce829e1e3a5b769">529f785</a></td><td><code>trac #15622: More informative exception message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2245c020cd80a1d248cf0a453270f4dbd9d12f36">2245c02</a></td><td><code>Trac 15622: Review commit, fixing a misspelled doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60ad5755c94dd61d4573a623e3b0c5fe70020d0a">60ad575</a></td><td><code>trac #15622: Rebase on 6.1.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6398780eca28da56527b3360d5fd597308517db9">6398780</a></td><td><code>trac #15622: bugfix before #15623 gets merged</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3531566070dbda71deb0864bf8bd86b4ee22960f">3531566</a></td><td><code>trac #15623: Rebase on updated #15622</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95cecd153d53a0666a3f1814831efc5cb15cb516">95cecd1</a></td><td><code>trac #15623: Removing the hack from #15622, update a variable's name</code></td></tr></table>




---

archive/issue_comments_256672.json:
```json
{
    "body": "<a id='comment:12'></a>\nOkay, immutable graph complements now return immutable graphs with the correct name.",
    "created_at": "2014-01-15T17:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256672",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
Okay, immutable graph complements now return immutable graphs with the correct name.



---

archive/issue_comments_256673.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2014-01-15T17:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256673",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_256674.json:
```json
{
    "body": "<a id='comment:13'></a>\nI may have mentionned a couple of times that seeing the commits of the ticket's dependencies was a pain. So let's say it another time : it is a pain.\n\nNathann",
    "created_at": "2014-01-15T17:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256674",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
I may have mentionned a couple of times that seeing the commits of the ticket's dependencies was a pain. So let's say it another time : it is a pain.

Nathann



---

archive/issue_comments_256675.json:
```json
{
    "body": "<a id='comment:14'></a>\nOkay, good to go !\n\nI set it to positive review and add the dependency with #15681. A request, though : could you add the ticket number to the commit message ? This helps a lot with tickets like that. If all the other commits did not contain the number, there would be no way to know what belong to this ticket easily `Y_Y`\n\nThaaaaaaaaaanks for this ticket ! `;-)`\n\nNathann",
    "created_at": "2014-01-15T17:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256675",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
Okay, good to go !

I set it to positive review and add the dependency with #15681. A request, though : could you add the ticket number to the commit message ? This helps a lot with tickets like that. If all the other commits did not contain the number, there would be no way to know what belong to this ticket easily `Y_Y`

Thaaaaaaaaaanks for this ticket ! `;-)`

Nathann



---

archive/issue_comments_256676.json:
```json
{
    "body": "**Dependencies:** #15681",
    "created_at": "2014-01-15T17:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256676",
    "user": "https://github.com/nathanncohen"
}
```

**Dependencies:** #15681



---

archive/issue_comments_256677.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-01-15T17:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256677",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_256678.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2014-01-15T17:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256678",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_comments_256679.json:
```json
{
    "body": "<a id='comment:16'></a>\nI thought I added the dependency...*shrugs* I'll take the commit message under advisement.  Thank you for doing the review.",
    "created_at": "2014-01-15T17:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256679",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>
I thought I added the dependency...*shrugs* I'll take the commit message under advisement.  Thank you for doing the review.



---

archive/issue_comments_256680.json:
```json
{
    "body": "**Changing status** from positive_review to needs_review.",
    "created_at": "2014-01-16T18:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing status** from positive_review to needs_review.



---

archive/issue_comments_256681.json:
```json
{
    "body": "**Changing commit** from \"[388d034ee0116bfc2d8991ecc2ace5fe4d6b6b00](https://github.com/sagemath/sagetrac-mirror/commit/388d034ee0116bfc2d8991ecc2ace5fe4d6b6b00)\" to \"[429f6e82e589e2491efff17f297d020bbbbb67e4](https://github.com/sagemath/sagetrac-mirror/commit/429f6e82e589e2491efff17f297d020bbbbb67e4)\".",
    "created_at": "2014-01-16T18:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[388d034ee0116bfc2d8991ecc2ace5fe4d6b6b00](https://github.com/sagemath/sagetrac-mirror/commit/388d034ee0116bfc2d8991ecc2ace5fe4d6b6b00)" to "[429f6e82e589e2491efff17f297d020bbbbb67e4](https://github.com/sagemath/sagetrac-mirror/commit/429f6e82e589e2491efff17f297d020bbbbb67e4)".



---

archive/issue_comments_256682.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1 **and set ticket back to needs_review. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0d651025d9783868d8a58fb445684a13bc22572\">a0d6510</a></td><td><code>Merge branch 'public/graphs/complement-15699' of trac.sagemath.org:sage into public/graphs/complement-15669</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86ed7721d1e086e0611f6f673464afaac72e8f85\">86ed772</a></td><td><code>trac #15699: fix hasattr in generic_graph.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46cfc90f24aacec0d39f5828709117683ea61b06\">46cfc90</a></td><td><code>trac #15681: A doctest for the bugfix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5620ec5cd5721719f1e7798cd055f7c708d18bfa\">5620ec5</a></td><td><code>trac #15681: Rebase on6.1.beta5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e9d208f0c1bc4ca3ef237e4bff182ee58e28b82\">7e9d208</a></td><td><code>trac #15681: New doctest for name() on immutable graphs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0661b16e1e8e5513ead0949dd59a16f9711eb0e\">b0661b1</a></td><td><code>Merge branch 'u/ncohen/15681' of trac.sagemath.org:sage into public/graphs/complement-15669</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/429f6e82e589e2491efff17f297d020bbbbb67e4\">429f6e8</a></td><td><code>Changed hasattr to getattr.</code></td></tr></table>\n",
    "created_at": "2014-01-16T18:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256682",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1 **and set ticket back to needs_review. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0d651025d9783868d8a58fb445684a13bc22572">a0d6510</a></td><td><code>Merge branch 'public/graphs/complement-15699' of trac.sagemath.org:sage into public/graphs/complement-15669</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86ed7721d1e086e0611f6f673464afaac72e8f85">86ed772</a></td><td><code>trac #15699: fix hasattr in generic_graph.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46cfc90f24aacec0d39f5828709117683ea61b06">46cfc90</a></td><td><code>trac #15681: A doctest for the bugfix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5620ec5cd5721719f1e7798cd055f7c708d18bfa">5620ec5</a></td><td><code>trac #15681: Rebase on6.1.beta5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e9d208f0c1bc4ca3ef237e4bff182ee58e28b82">7e9d208</a></td><td><code>trac #15681: New doctest for name() on immutable graphs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0661b16e1e8e5513ead0949dd59a16f9711eb0e">b0661b1</a></td><td><code>Merge branch 'u/ncohen/15681' of trac.sagemath.org:sage into public/graphs/complement-15669</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/429f6e82e589e2491efff17f297d020bbbbb67e4">429f6e8</a></td><td><code>Changed hasattr to getattr.</code></td></tr></table>




---

archive/issue_comments_256683.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-01-16T18:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256683",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_256684.json:
```json
{
    "body": "<a id='comment:19'></a>\nI just realized the ticket number is wrong... whoops `:p`",
    "created_at": "2014-01-16T18:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256684",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>
I just realized the ticket number is wrong... whoops `:p`



---

archive/issue_comments_256685.json:
```json
{
    "body": "<a id='comment:20'></a>\nI don't get it `O_o`\n\nWhy did you change this hasattr line, and why did you add to the branch ? `O_o`\n\nNathann",
    "created_at": "2014-01-16T18:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256685",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
I don't get it `O_o`

Why did you change this hasattr line, and why did you add to the branch ? `O_o`

Nathann



---

archive/issue_comments_256686.json:
```json
{
    "body": "<a id='comment:21'></a>\nCan't we just remove the last 3 commits ? They undo what they do `O_o`\n\nNathann",
    "created_at": "2014-01-16T18:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256686",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>
Can't we just remove the last 3 commits ? They undo what they do `O_o`

Nathann



---

archive/issue_comments_256687.json:
```json
{
    "body": "<a id='comment:22'></a>\n`hasattr(obj, attr_str)` is the format which only checks if the attribute is there, but we want to actually retrieve the attribute if possible and if not, then return `False` which would be `getattr(obj, attr_str, [default_value])` in the form of `getattr(self, \"_immutable\", False)`. The second to last is important because the latest of #15681 removed the conflict with `develop`, and the third to last comes along for the ride.",
    "created_at": "2014-01-17T00:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256687",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
`hasattr(obj, attr_str)` is the format which only checks if the attribute is there, but we want to actually retrieve the attribute if possible and if not, then return `False` which would be `getattr(obj, attr_str, [default_value])` in the form of `getattr(self, "_immutable", False)`. The second to last is important because the latest of #15681 removed the conflict with `develop`, and the third to last comes along for the ride.



---

archive/issue_comments_256688.json:
```json
{
    "body": "<a id='comment:23'></a>\n`O_o`\n\nOkayokay `O_o`\n\nNathann",
    "created_at": "2014-01-17T08:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256688",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>
`O_o`

Okayokay `O_o`

Nathann



---

archive/issue_comments_256689.json:
```json
{
    "body": "**Changing commit** from \"[429f6e82e589e2491efff17f297d020bbbbb67e4](https://github.com/sagemath/sagetrac-mirror/commit/429f6e82e589e2491efff17f297d020bbbbb67e4)\" to \"[c393b585073dbd253314e13f3ffed01c6b8bd892](https://github.com/sagemath/sagetrac-mirror/commit/c393b585073dbd253314e13f3ffed01c6b8bd892)\".",
    "created_at": "2014-01-30T15:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256689",
    "user": "https://github.com/tscrim"
}
```

**Changing commit** from "[429f6e82e589e2491efff17f297d020bbbbb67e4](https://github.com/sagemath/sagetrac-mirror/commit/429f6e82e589e2491efff17f297d020bbbbb67e4)" to "[c393b585073dbd253314e13f3ffed01c6b8bd892](https://github.com/sagemath/sagetrac-mirror/commit/c393b585073dbd253314e13f3ffed01c6b8bd892)".



---

archive/issue_comments_256690.json:
```json
{
    "body": "**Changing branch** from \"[public/graphs/complement-15699](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/complement-15699)\" to \"[public/graphs/complement-15669](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/complement-15669)\".",
    "created_at": "2014-01-30T15:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256690",
    "user": "https://github.com/tscrim"
}
```

**Changing branch** from "[public/graphs/complement-15699](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/complement-15699)" to "[public/graphs/complement-15669](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/complement-15669)".



---

archive/issue_comments_256691.json:
```json
{
    "body": "<a id='comment:24'></a>\nRebased branch.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dae53af8e9fbc5b8cbf7da3de2eae92e2e9c0d56\">dae53af</a></td><td><code>Merge branch 'develop' into ticket/15623</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5b6d591982ef3e8d5902ecd9f7bfbd05cbb85a4\">c5b6d59</a></td><td><code>Re-insert a bit of code that had been erroneously deleted in the previous merge commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81fc8a472a2636acfaeaf132b085878f5ec3674f\">81fc8a4</a></td><td><code>Merge branch 'u/ncohen/15681' of trac.sagemath.org:sage into u/tscrim/15681</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c393b585073dbd253314e13f3ffed01c6b8bd892\">c393b58</a></td><td><code>Merge branch 'public/graphs/complement-15699' of trac.sagemath.org:sage into public/graphs/complement-15669</code></td></tr></table>\n",
    "created_at": "2014-01-30T15:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256691",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
Rebased branch.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dae53af8e9fbc5b8cbf7da3de2eae92e2e9c0d56">dae53af</a></td><td><code>Merge branch 'develop' into ticket/15623</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5b6d591982ef3e8d5902ecd9f7bfbd05cbb85a4">c5b6d59</a></td><td><code>Re-insert a bit of code that had been erroneously deleted in the previous merge commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81fc8a472a2636acfaeaf132b085878f5ec3674f">81fc8a4</a></td><td><code>Merge branch 'u/ncohen/15681' of trac.sagemath.org:sage into u/tscrim/15681</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c393b585073dbd253314e13f3ffed01c6b8bd892">c393b58</a></td><td><code>Merge branch 'public/graphs/complement-15699' of trac.sagemath.org:sage into public/graphs/complement-15669</code></td></tr></table>




---

archive/issue_events_052456.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15669#event-52456"
}
```



---

archive/issue_events_052457.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-01T19:39:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15669#event-52457"
}
```



---

archive/issue_comments_256692.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2014-02-01T19:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256692",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_256693.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe trac reference in the doctest added in this ticket had a typo.\nSee #27338 for a fix.",
    "created_at": "2019-02-22T02:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15669",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15669#issuecomment-256693",
    "user": "https://trac.sagemath.org/admin/accounts/users/sage_snail"
}
```

<a id='comment:27'></a>
The trac reference in the doctest added in this ticket had a typo.
See #27338 for a fix.
