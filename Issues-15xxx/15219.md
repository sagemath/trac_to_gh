# Issue 15219: numerical integral needs an operand for callable symbolic functions

archive/issues_014982.json:
```json
{
    "body": "I feel like I've seen this before, so close if appropriate... See [this ask.sagemath question](http://ask.sagemath.org/question/3029/numerical_integral-throwing-an-error).\n\n```\n\nsage: h(x) = x\nsage: numerical_integral(h, 1, 2)\n---------------------------------------------------------------------------\n/Users/.../sage-5.11.rc0/local/lib/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in fast_float(ex, *vars)\n   1264         1.4142135623730951\n   1265     \"\"\"\n-> 1266     return FastFloatConverter(ex, *vars)()\n   1267 \n   1268 #################\n\n/Users/.../sage-5.11.rc0/local/lib/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in __call__(self, ex)\n    206         operator = ex.operator()\n    207         if operator is None:\n--> 208             return self.symbol(ex)\n    209 \n    210         if operator in arithmetic_operators:\n\n/Users/.../sage-5.11.rc0/local/lib/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in symbol(self, ex)\n   1182             return self.ff.fast_float_constant(float(ex))\n   1183         except TypeError:\n-> 1184             raise ValueError, \"free variable: %s\" % repr(ex)\n   1185 \n   1186     def arithmetic(self, ex, operator):\n\nValueError: free variable: x |--> x\n```\nbut\n\n```\nsage: numerical_integral(x, 1, 2)\n(1.5, 1.6653345369377348e-14)\n```\nI think this should be easy to fix by catching this somehow.\n\n**CC:**  @eviatarbach @orlitzky @mkoeppe\n\n**Branch/Commit:** [d314399aeb258a26bdc3e5540b3db13f147dd644](https://github.com/sagemath/sagetrac-mirror/commit/d314399aeb258a26bdc3e5540b3db13f147dd644)\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** Michael Orlitzky\n\n**Dependencies:** #32234\n\nIssue created by migration from https://trac.sagemath.org/ticket/15219\n\n",
    "closed_at": "2021-10-19T20:31:07Z",
    "created_at": "2013-09-24T00:58:03Z",
    "labels": [
        "component: calculus",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "numerical integral needs an operand for callable symbolic functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15219",
    "user": "https://github.com/kcrisman"
}
```
I feel like I've seen this before, so close if appropriate... See [this ask.sagemath question](http://ask.sagemath.org/question/3029/numerical_integral-throwing-an-error).

```

sage: h(x) = x
sage: numerical_integral(h, 1, 2)
---------------------------------------------------------------------------
/Users/.../sage-5.11.rc0/local/lib/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in fast_float(ex, *vars)
   1264         1.4142135623730951
   1265     """
-> 1266     return FastFloatConverter(ex, *vars)()
   1267 
   1268 #################

/Users/.../sage-5.11.rc0/local/lib/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in __call__(self, ex)
    206         operator = ex.operator()
    207         if operator is None:
--> 208             return self.symbol(ex)
    209 
    210         if operator in arithmetic_operators:

/Users/.../sage-5.11.rc0/local/lib/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in symbol(self, ex)
   1182             return self.ff.fast_float_constant(float(ex))
   1183         except TypeError:
-> 1184             raise ValueError, "free variable: %s" % repr(ex)
   1185 
   1186     def arithmetic(self, ex, operator):

ValueError: free variable: x |--> x
```
but

```
sage: numerical_integral(x, 1, 2)
(1.5, 1.6653345369377348e-14)
```
I think this should be easy to fix by catching this somehow.

**CC:**  @eviatarbach @orlitzky @mkoeppe

**Branch/Commit:** [d314399aeb258a26bdc3e5540b3db13f147dd644](https://github.com/sagemath/sagetrac-mirror/commit/d314399aeb258a26bdc3e5540b3db13f147dd644)

**Reviewer:** Matthias Koeppe

**Author:** Michael Orlitzky

**Dependencies:** #32234

Issue created by migration from https://trac.sagemath.org/ticket/15219





---

archive/issue_comments_230504.json:
```json
{
    "body": "<a id='comment:1'></a>\nHere's the relevant code.\n\n```\n\n    def symbol(self, ex):\n        r\"\"\"\n        EXAMPLES::\n        \n            sage: f = x._fast_float_('x', 'y')\n            sage: f(1,2)\n            1.0\n            sage: f = x._fast_float_('y', 'x')\n            sage: f(1,2)\n            2.0\n        \"\"\"\n        if self.vars == ():\n            return self.ff.fast_float_arg(0)\n\n        vars = list(self.vars)\n        name = repr(ex)\n        if name in vars:\n            return self.ff.fast_float_arg(vars.index(name))\n        svars = [repr(x) for x in vars]\n        if name in svars:\n            return self.ff.fast_float_arg(svars.index(name))\n\n        if ex.is_symbol(): # case of callable function which is the variable, like f(x)=x\n            name = repr(SR(ex)) # this gets back just the 'output' of the function\n            if name in svars: \n                return self.ff.fast_float_arg(svars.index(name))\n\n        try:\n            return self.ff.fast_float_constant(float(ex))\n        except TypeError:\n            raise ValueError, \"free variable: %s\" % repr(ex)\n```\nNote that this case is supposedly already taken care of!  But apparently in this case `name` is not in `svars`.   I'll investigate...",
    "created_at": "2013-09-24T00:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230504",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
Here's the relevant code.

```

    def symbol(self, ex):
        r"""
        EXAMPLES::
        
            sage: f = x._fast_float_('x', 'y')
            sage: f(1,2)
            1.0
            sage: f = x._fast_float_('y', 'x')
            sage: f(1,2)
            2.0
        """
        if self.vars == ():
            return self.ff.fast_float_arg(0)

        vars = list(self.vars)
        name = repr(ex)
        if name in vars:
            return self.ff.fast_float_arg(vars.index(name))
        svars = [repr(x) for x in vars]
        if name in svars:
            return self.ff.fast_float_arg(svars.index(name))

        if ex.is_symbol(): # case of callable function which is the variable, like f(x)=x
            name = repr(SR(ex)) # this gets back just the 'output' of the function
            if name in svars: 
                return self.ff.fast_float_arg(svars.index(name))

        try:
            return self.ff.fast_float_constant(float(ex))
        except TypeError:
            raise ValueError, "free variable: %s" % repr(ex)
```
Note that this case is supposedly already taken care of!  But apparently in this case `name` is not in `svars`.   I'll investigate...



---

archive/issue_comments_230505.json:
```json
{
    "body": "<a id='comment:2'></a>\n\n```\n$ hg log -r 12287\nchangeset:   12287:d7533ae4895e\nuser:        Mike Hansen <mhansen@gmail.com>\ndate:        Tue May 19 16:11:30 2009 -0700\nsummary:     Updates for Pynac-0.1.7, main symbolics switch (#5930)\n```\nSo apparently it's been here for a while.",
    "created_at": "2013-09-24T01:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230505",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>

```
$ hg log -r 12287
changeset:   12287:d7533ae4895e
user:        Mike Hansen <mhansen@gmail.com>
date:        Tue May 19 16:11:30 2009 -0700
summary:     Updates for Pynac-0.1.7, main symbolics switch (#5930)
```
So apparently it's been here for a while.



---

archive/issue_comments_230506.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-I feel like I've seen this before, so close if appropriate...\n+I feel like I've seen this before, so close if appropriate... See [this ask.sagemath question](http://ask.sagemath.org/question/3029/numerical_integral-throwing-an-error).\n \n ```\n \n``````\n",
    "created_at": "2013-09-24T01:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230506",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-I feel like I've seen this before, so close if appropriate...
+I feel like I've seen this before, so close if appropriate... See [this ask.sagemath question](http://ask.sagemath.org/question/3029/numerical_integral-throwing-an-error).
 
 ```
 
``````




---

archive/issue_events_050648.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15219#event-50648"
}
```



---

archive/issue_events_050649.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15219#event-50649"
}
```



---

archive/issue_events_050650.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15219#event-50650"
}
```



---

archive/issue_events_050651.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15219#event-50651"
}
```



---

archive/issue_events_050652.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15219#event-50652"
}
```



---

archive/issue_comments_230507.json:
```json
{
    "body": "<a id='comment:7'></a>\nI was getting error while executing.\n\n```\nh(x) = x\nnumerical_integral(h, 1, 2)\n----------------------------------------------------------------------------------------------\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__float__ (build/cythonized/sage/symbolic/expression.cpp:10936)()\n   1432         try:\n-> 1433             ret = float(self._eval_self(float))\n   1434         except TypeError:\n\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._eval_self (build/cythonized/sage/symbolic/expression.cpp:10067)()\n   1240         else:\n-> 1241             raise TypeError(\"Cannot evaluate symbolic expression to a numeric value.\")\n   1242 \n\nTypeError: Cannot evaluate symbolic expression to a numeric value.\n\nDuring handling of the above exception, another exception occurred:\n\nTypeError                                 Traceback (most recent call last)\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__float__ (build/cythonized/sage/symbolic/expression.cpp:10998)()\n   1435             try:\n-> 1436                 c = (self._eval_self(complex))\n   1437                 if imag(c) == 0:\n\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._eval_self (build/cythonized/sage/symbolic/expression.cpp:10067)()\n   1240         else:\n-> 1241             raise TypeError(\"Cannot evaluate symbolic expression to a numeric value.\")\n   1242 \n\nTypeError: Cannot evaluate symbolic expression to a numeric value.\n\nDuring handling of the above exception, another exception occurred:\n\nTypeError                                 Traceback (most recent call last)\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression_conversions.py in symbol(self, ex)\n   1610         try:\n-> 1611             return self.ff.fast_float_constant(float(ex))\n   1612         except TypeError:\n\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__float__ (build/cythonized/sage/symbolic/expression.cpp:11129)()\n   1441             except TypeError:\n-> 1442                 raise TypeError(\"unable to simplify to float approximation\")\n   1443         return ret\n\nTypeError: unable to simplify to float approximation\n\nDuring handling of the above exception, another exception occurred:\n\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-9-0db5c4fa538e> in <module>()\n      1 __tmp__=var(\"x\"); h = symbolic_expression(x).function(x)\n----> 2 numerical_integral(h, Integer(1), Integer(2))\n\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/calculus/integration.pyx in sage.calculus.integration.numerical_integral (build/cythonized/sage/calculus/integration.c:3236)()\n    286                 to_sub = dict(zip(vars[1:], params))\n    287                 func = func.subs(to_sub)\n--> 288             func = func._fast_float_(str(vars[0]))\n    289         except (AttributeError):\n    290             pass\n\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._fast_float_ (build/cythonized/sage/symbolic/expression.cpp:62537)()\n  11913         \"\"\"\n  11914         from sage.symbolic.expression_conversions import fast_float\n> 11915         return fast_float(self, *vars)\n  11916 \n  11917     def _fast_callable_(self, etb):\n\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression_conversions.py in fast_float(ex, *vars)\n   1697         1.4142135623730951\n   1698     \"\"\"\n-> 1699     return FastFloatConverter(ex, *vars)()\n   1700 \n   1701 #################\n\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression_conversions.py in __call__(self, ex)\n    210         operator = ex.operator()\n    211         if operator is None:\n--> 212             return self.symbol(ex)\n    213 \n    214         if operator in arithmetic_operators:\n\n/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression_conversions.py in symbol(self, ex)\n   1611             return self.ff.fast_float_constant(float(ex))\n   1612         except TypeError:\n-> 1613             raise NotImplementedError(\"free variable: %s\" % repr(ex))\n   1614 \n   1615     def arithmetic(self, ex, operator):\n\nNotImplementedError: free variable: x |--> x\n---------------------------------------------------------------------------------------------\n```\nbut \n\n```\nnumerical_integral(x, 1, 2)\n(1.5, 1.6653345369377348e-14)\n```\n\nAnd I think it better if we use the below syntax while evaluating which is working fine.\n\n```\nh(x) = x\nnumerical_integral(h(x),1, 2)\n(1.5, 1.6653345369377348e-14)\n```",
    "created_at": "2020-02-27T16:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230507",
    "user": "https://github.com/Karn-Tiwari-3003"
}
```

<a id='comment:7'></a>
I was getting error while executing.

```
h(x) = x
numerical_integral(h, 1, 2)
----------------------------------------------------------------------------------------------
/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__float__ (build/cythonized/sage/symbolic/expression.cpp:10936)()
   1432         try:
-> 1433             ret = float(self._eval_self(float))
   1434         except TypeError:

/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._eval_self (build/cythonized/sage/symbolic/expression.cpp:10067)()
   1240         else:
-> 1241             raise TypeError("Cannot evaluate symbolic expression to a numeric value.")
   1242 

TypeError: Cannot evaluate symbolic expression to a numeric value.

During handling of the above exception, another exception occurred:

TypeError                                 Traceback (most recent call last)
/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__float__ (build/cythonized/sage/symbolic/expression.cpp:10998)()
   1435             try:
-> 1436                 c = (self._eval_self(complex))
   1437                 if imag(c) == 0:

/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._eval_self (build/cythonized/sage/symbolic/expression.cpp:10067)()
   1240         else:
-> 1241             raise TypeError("Cannot evaluate symbolic expression to a numeric value.")
   1242 

TypeError: Cannot evaluate symbolic expression to a numeric value.

During handling of the above exception, another exception occurred:

TypeError                                 Traceback (most recent call last)
/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression_conversions.py in symbol(self, ex)
   1610         try:
-> 1611             return self.ff.fast_float_constant(float(ex))
   1612         except TypeError:

/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__float__ (build/cythonized/sage/symbolic/expression.cpp:11129)()
   1441             except TypeError:
-> 1442                 raise TypeError("unable to simplify to float approximation")
   1443         return ret

TypeError: unable to simplify to float approximation

During handling of the above exception, another exception occurred:

NotImplementedError                       Traceback (most recent call last)
<ipython-input-9-0db5c4fa538e> in <module>()
      1 __tmp__=var("x"); h = symbolic_expression(x).function(x)
----> 2 numerical_integral(h, Integer(1), Integer(2))

/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/calculus/integration.pyx in sage.calculus.integration.numerical_integral (build/cythonized/sage/calculus/integration.c:3236)()
    286                 to_sub = dict(zip(vars[1:], params))
    287                 func = func.subs(to_sub)
--> 288             func = func._fast_float_(str(vars[0]))
    289         except (AttributeError):
    290             pass

/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._fast_float_ (build/cythonized/sage/symbolic/expression.cpp:62537)()
  11913         """
  11914         from sage.symbolic.expression_conversions import fast_float
> 11915         return fast_float(self, *vars)
  11916 
  11917     def _fast_callable_(self, etb):

/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression_conversions.py in fast_float(ex, *vars)
   1697         1.4142135623730951
   1698     """
-> 1699     return FastFloatConverter(ex, *vars)()
   1700 
   1701 #################

/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression_conversions.py in __call__(self, ex)
    210         operator = ex.operator()
    211         if operator is None:
--> 212             return self.symbol(ex)
    213 
    214         if operator in arithmetic_operators:

/opt/sagemath-9.0/local/lib/python3.7/site-packages/sage/symbolic/expression_conversions.py in symbol(self, ex)
   1611             return self.ff.fast_float_constant(float(ex))
   1612         except TypeError:
-> 1613             raise NotImplementedError("free variable: %s" % repr(ex))
   1614 
   1615     def arithmetic(self, ex, operator):

NotImplementedError: free variable: x |--> x
---------------------------------------------------------------------------------------------
```
but 

```
numerical_integral(x, 1, 2)
(1.5, 1.6653345369377348e-14)
```

And I think it better if we use the below syntax while evaluating which is working fine.

```
h(x) = x
numerical_integral(h(x),1, 2)
(1.5, 1.6653345369377348e-14)
```



---

archive/issue_events_050653.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T01:03:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15219#event-50653"
}
```



---

archive/issue_events_050654.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T01:03:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15219#event-50654"
}
```



---

archive/issue_comments_230508.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-07-27T02:05:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230508",
    "user": "https://github.com/orlitzky"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_230509.json:
```json
{
    "body": "**Author:** Michael Orlitzky",
    "created_at": "2021-07-27T02:05:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230509",
    "user": "https://github.com/orlitzky"
}
```

**Author:** Michael Orlitzky



---

archive/issue_comments_230510.json:
```json
{
    "body": "**Dependencies:** #32234",
    "created_at": "2021-07-27T02:05:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230510",
    "user": "https://github.com/orlitzky"
}
```

**Dependencies:** #32234



---

archive/issue_comments_230511.json:
```json
{
    "body": "**Commit:** [9d8f12015803616d494b68cc59876adf7ddd4944](https://github.com/sagemath/sagetrac-mirror/commit/9d8f12015803616d494b68cc59876adf7ddd4944)",
    "created_at": "2021-07-27T02:05:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230511",
    "user": "https://github.com/orlitzky"
}
```

**Commit:** [9d8f12015803616d494b68cc59876adf7ddd4944](https://github.com/sagemath/sagetrac-mirror/commit/9d8f12015803616d494b68cc59876adf7ddd4944)



---

archive/issue_comments_230512.json:
```json
{
    "body": "**Branch:** [u/mjo/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/15219)",
    "created_at": "2021-07-27T02:05:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230512",
    "user": "https://github.com/orlitzky"
}
```

**Branch:** [u/mjo/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/15219)



---

archive/issue_comments_230513.json:
```json
{
    "body": "<a id='comment:9'></a>\nFixed by replacing `fast_float()` with `fast_callable()` in #32234.\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/641152e830f719cce4c7eca226f4d750e884be68\">641152e</a></td><td><code>src/sage/ext/fast_eval.pyx: Remove everything except fast_float, is_fast_float</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa285daadd273a3c1ac0e341f620811814e85869\">aa285da</a></td><td><code>src/sage/calculus/integration.pyx: Remove handling of FastDoubleFunc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58fdf1e7967adb8f82f3bc38506191d2d2be36b2\">58fdf1e</a></td><td><code>src/sage/plot/plot3d/parametric_surface.pyx: Remove handling of FastDoubleFunc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec44c61fe547f82735332e51eb987c26e721ea44\">ec44c61</a></td><td><code>src/sage/ext/fast_eval.pyx: Reduce/update documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c93ae0be61c08d98bcadcffdd173c010a6f136b\">4c93ae0</a></td><td><code>Trac #32234: use fast_callable() for symbolic find_root().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56e9997dd2dd6e5a87b394c68beb1dc32f29126f\">56e9997</a></td><td><code>Trac #32234: don't import fast_callable() from sage.ext.fast_eval.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18593fff12d9d4b7b8b8edb21d67662cefd35f06\">18593ff</a></td><td><code>Trac #32234: replace fast_float_arg() in plot3d.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fc69cae93c7b8f50800bd43f352ff37758607b4\">5fc69ca</a></td><td><code>Trac #32234: fix symbolic find_local_minimum() docs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdef097b77f25f243678bec2f3443068c3982511\">cdef097</a></td><td><code>Trac #32234: use domain=float for fast callables used by numpy.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d8f12015803616d494b68cc59876adf7ddd4944\">9d8f120</a></td><td><code>Trac #15219: add test for numerical_integral() of symbolic functions.</code></td></tr></table>\n",
    "created_at": "2021-07-27T02:05:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230513",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:9'></a>
Fixed by replacing `fast_float()` with `fast_callable()` in #32234.

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/641152e830f719cce4c7eca226f4d750e884be68">641152e</a></td><td><code>src/sage/ext/fast_eval.pyx: Remove everything except fast_float, is_fast_float</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa285daadd273a3c1ac0e341f620811814e85869">aa285da</a></td><td><code>src/sage/calculus/integration.pyx: Remove handling of FastDoubleFunc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58fdf1e7967adb8f82f3bc38506191d2d2be36b2">58fdf1e</a></td><td><code>src/sage/plot/plot3d/parametric_surface.pyx: Remove handling of FastDoubleFunc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec44c61fe547f82735332e51eb987c26e721ea44">ec44c61</a></td><td><code>src/sage/ext/fast_eval.pyx: Reduce/update documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c93ae0be61c08d98bcadcffdd173c010a6f136b">4c93ae0</a></td><td><code>Trac #32234: use fast_callable() for symbolic find_root().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56e9997dd2dd6e5a87b394c68beb1dc32f29126f">56e9997</a></td><td><code>Trac #32234: don't import fast_callable() from sage.ext.fast_eval.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18593fff12d9d4b7b8b8edb21d67662cefd35f06">18593ff</a></td><td><code>Trac #32234: replace fast_float_arg() in plot3d.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fc69cae93c7b8f50800bd43f352ff37758607b4">5fc69ca</a></td><td><code>Trac #32234: fix symbolic find_local_minimum() docs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdef097b77f25f243678bec2f3443068c3982511">cdef097</a></td><td><code>Trac #32234: use domain=float for fast callables used by numpy.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d8f12015803616d494b68cc59876adf7ddd4944">9d8f120</a></td><td><code>Trac #15219: add test for numerical_integral() of symbolic functions.</code></td></tr></table>




---

archive/issue_comments_230514.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-08-15T02:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230514",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_230515.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2021-08-15T02:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230515",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_comments_230516.json:
```json
{
    "body": "**Changing branch** from \"[u/mjo/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/15219)\" to \"[u/mkoeppe/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/15219)\".",
    "created_at": "2021-09-14T00:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230516",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/mjo/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/15219)" to "[u/mkoeppe/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/15219)".



---

archive/issue_comments_230517.json:
```json
{
    "body": "**Changing commit** from \"[9d8f12015803616d494b68cc59876adf7ddd4944](https://github.com/sagemath/sagetrac-mirror/commit/9d8f12015803616d494b68cc59876adf7ddd4944)\" to \"[c25ab78efd79e2a93a63b087a781ad2a929fe0a4](https://github.com/sagemath/sagetrac-mirror/commit/c25ab78efd79e2a93a63b087a781ad2a929fe0a4)\".",
    "created_at": "2021-09-14T00:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230517",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[9d8f12015803616d494b68cc59876adf7ddd4944](https://github.com/sagemath/sagetrac-mirror/commit/9d8f12015803616d494b68cc59876adf7ddd4944)" to "[c25ab78efd79e2a93a63b087a781ad2a929fe0a4](https://github.com/sagemath/sagetrac-mirror/commit/c25ab78efd79e2a93a63b087a781ad2a929fe0a4)".



---

archive/issue_comments_230518.json:
```json
{
    "body": "<a id='comment:12'></a>\nMerged updated #32234 (include 9.5.beta1)\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6f88d62cefd70641c7ad0e9467f622c974a467b\">e6f88d6</a></td><td><code>src/sage/ext/fast_eval.pyx: Reduce/update documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1353bafad48b129bad52ff18f5f6f8ede6253b3b\">1353baf</a></td><td><code>Trac #32234: use fast_callable() for symbolic find_root().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c56fa053a5617c9df785450f624bd6864d9d96fe\">c56fa05</a></td><td><code>Trac #32234: don't import fast_callable() from sage.ext.fast_eval.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fcec8e1bcdb881daa4610aa81965be6f159224f\">0fcec8e</a></td><td><code>Trac #32234: replace fast_float_arg() in plot3d.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1479666c1fc3500a490faefe19ff3bcadfca0622\">1479666</a></td><td><code>Trac #32234: fix symbolic find_local_minimum() docs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19aa975778d411e596e6b72dbdc00b402985dd07\">19aa975</a></td><td><code>Trac #32234: use domain=float for fast callables used by numpy.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df062b30005bf8488fa16124cd7c2b9129e7b396\">df062b3</a></td><td><code>Trac #32234: replace two trivial fast-callables in plot3d().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4c840df6311ff89434e559fa079f399b354fa18\">a4c840d</a></td><td><code>Merge tag '9.4.rc2' into t/32234/ticket/32234</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72f388109b770a03b370a8730aa666ab95fe0e78\">72f3881</a></td><td><code>Merge tag '9.5.beta1' into t/32234/ticket/32234</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c25ab78efd79e2a93a63b087a781ad2a929fe0a4\">c25ab78</a></td><td><code>Merge #32234</code></td></tr></table>\n",
    "created_at": "2021-09-14T00:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230518",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Merged updated #32234 (include 9.5.beta1)

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6f88d62cefd70641c7ad0e9467f622c974a467b">e6f88d6</a></td><td><code>src/sage/ext/fast_eval.pyx: Reduce/update documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1353bafad48b129bad52ff18f5f6f8ede6253b3b">1353baf</a></td><td><code>Trac #32234: use fast_callable() for symbolic find_root().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c56fa053a5617c9df785450f624bd6864d9d96fe">c56fa05</a></td><td><code>Trac #32234: don't import fast_callable() from sage.ext.fast_eval.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fcec8e1bcdb881daa4610aa81965be6f159224f">0fcec8e</a></td><td><code>Trac #32234: replace fast_float_arg() in plot3d.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1479666c1fc3500a490faefe19ff3bcadfca0622">1479666</a></td><td><code>Trac #32234: fix symbolic find_local_minimum() docs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19aa975778d411e596e6b72dbdc00b402985dd07">19aa975</a></td><td><code>Trac #32234: use domain=float for fast callables used by numpy.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df062b30005bf8488fa16124cd7c2b9129e7b396">df062b3</a></td><td><code>Trac #32234: replace two trivial fast-callables in plot3d().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4c840df6311ff89434e559fa079f399b354fa18">a4c840d</a></td><td><code>Merge tag '9.4.rc2' into t/32234/ticket/32234</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72f388109b770a03b370a8730aa666ab95fe0e78">72f3881</a></td><td><code>Merge tag '9.5.beta1' into t/32234/ticket/32234</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c25ab78efd79e2a93a63b087a781ad2a929fe0a4">c25ab78</a></td><td><code>Merge #32234</code></td></tr></table>




---

archive/issue_comments_230519.json:
```json
{
    "body": "<a id='comment:13'></a>\nMerge conflict",
    "created_at": "2021-10-13T23:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230519",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>
Merge conflict



---

archive/issue_comments_230520.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2021-10-13T23:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230520",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_230521.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/15219)\" to \"[u/mjo/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/15219)\".",
    "created_at": "2021-10-14T01:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230521",
    "user": "https://github.com/orlitzky"
}
```

**Changing branch** from "[u/mkoeppe/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/15219)" to "[u/mjo/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/15219)".



---

archive/issue_comments_230522.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2021-10-14T01:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230522",
    "user": "https://github.com/orlitzky"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_230523.json:
```json
{
    "body": "**Changing commit** from \"[c25ab78efd79e2a93a63b087a781ad2a929fe0a4](https://github.com/sagemath/sagetrac-mirror/commit/c25ab78efd79e2a93a63b087a781ad2a929fe0a4)\" to \"[d314399aeb258a26bdc3e5540b3db13f147dd644](https://github.com/sagemath/sagetrac-mirror/commit/d314399aeb258a26bdc3e5540b3db13f147dd644)\".",
    "created_at": "2021-10-14T01:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230523",
    "user": "https://github.com/orlitzky"
}
```

**Changing commit** from "[c25ab78efd79e2a93a63b087a781ad2a929fe0a4](https://github.com/sagemath/sagetrac-mirror/commit/c25ab78efd79e2a93a63b087a781ad2a929fe0a4)" to "[d314399aeb258a26bdc3e5540b3db13f147dd644](https://github.com/sagemath/sagetrac-mirror/commit/d314399aeb258a26bdc3e5540b3db13f147dd644)".



---

archive/issue_comments_230524.json:
```json
{
    "body": "<a id='comment:14'></a>\nThis ticket should have only one trivial commit adding a single doctest. I've rebased (only) that commit onto develop; hopefully it's clear how to solve it if there's still a merge conflict.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d314399aeb258a26bdc3e5540b3db13f147dd644\">d314399</a></td><td><code>Trac #15219: add test for numerical_integral() of symbolic functions.</code></td></tr></table>\n",
    "created_at": "2021-10-14T01:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230524",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:14'></a>
This ticket should have only one trivial commit adding a single doctest. I've rebased (only) that commit onto develop; hopefully it's clear how to solve it if there's still a merge conflict.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d314399aeb258a26bdc3e5540b3db13f147dd644">d314399</a></td><td><code>Trac #15219: add test for numerical_integral() of symbolic functions.</code></td></tr></table>




---

archive/issue_events_050655.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-19T20:31:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15219#event-50655"
}
```



---

archive/issue_comments_230525.json:
```json
{
    "body": "**Changing branch** from \"[u/mjo/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/15219)\" to \"[d314399aeb258a26bdc3e5540b3db13f147dd644](https://github.com/sagemath/sagetrac-mirror/commit/d314399aeb258a26bdc3e5540b3db13f147dd644)\".",
    "created_at": "2021-10-19T20:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15219#issuecomment-230525",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mjo/ticket/15219](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/15219)" to "[d314399aeb258a26bdc3e5540b3db13f147dd644](https://github.com/sagemath/sagetrac-mirror/commit/d314399aeb258a26bdc3e5540b3db13f147dd644)".
