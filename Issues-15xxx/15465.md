# Issue 15465: Allow using Sage without dev/git

archive/issues_015228.json:
```json
{
    "assignees": [],
    "body": "For binary builds / system-wide installs and perhaps tarballs we should not require the git repository. This ticket fixes two doctests for that use case.\n\nThat is, to remove the development functionality you can now \n* delete `SAGE_SRC/sage/dev`\n* delete `SAGE_ROOT/.git`\nand all doctests still pass\n\n\nDepends on #14482\n\nBranch/Commit: **[u/vbraun/run_without_git](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/run_without_git) @ [`24e5a73`](https://github.com/sagemath/sagetrac-mirror/commit/24e5a7388f98b535ae84aa5753439e0128994473)**\n\nReviewer: **R. Andrew Ohana**\n\nAuthor: **Volker Braun**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15465_\n\n",
    "closed_at": "2013-12-16T14:09:00Z",
    "created_at": "2013-11-28T18:45:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow using Sage without dev/git",
    "type": "issue",
    "updated_at": "2013-12-16T14:09:00Z",
    "url": "https://github.com/sagemath/sage/issues/15465",
    "user": "https://github.com/vbraun"
}
```
For binary builds / system-wide installs and perhaps tarballs we should not require the git repository. This ticket fixes two doctests for that use case.

That is, to remove the development functionality you can now 
* delete `SAGE_SRC/sage/dev`
* delete `SAGE_ROOT/.git`
and all doctests still pass


Depends on #14482

Branch/Commit: **[u/vbraun/run_without_git](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/run_without_git) @ [`24e5a73`](https://github.com/sagemath/sagetrac-mirror/commit/24e5a7388f98b535ae84aa5753439e0128994473)**

Reviewer: **R. Andrew Ohana**

Author: **Volker Braun**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/15465_





---

archive/issue_events_220327.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-11-28T18:45:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220327"
}
```



---

archive/issue_events_220328.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-11-28T18:45:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220328"
}
```



---

archive/issue_events_220329.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-11-28T18:45:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220329"
}
```



---

archive/issue_comments_192750.json:
```json
{
    "body": "Branch: **[u/vbraun/run_without_git](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/run_without_git)**",
    "created_at": "2013-11-28T18:48:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192750",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/run_without_git](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/run_without_git)**



---

archive/issue_comments_192751.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td>[067dfc6](https://github.com/sagemath/sagetrac-mirror/commit/067dfc6)</td><td><code>Relax the cmdline test of \"sage -dev\", it may be disabled</code></td></tr><tr><td>[fa29095](https://github.com/sagemath/sagetrac-mirror/commit/fa29095)</td><td><code>Merging latest dev scripts to avoid conflict in sage-dev</code></td></tr><tr><td>[713737f](https://github.com/sagemath/sagetrac-mirror/commit/713737f)</td><td><code>fall back to doctesting all files if new files cannot be identified</code></td></tr><tr><td>[946b5b4](https://github.com/sagemath/sagetrac-mirror/commit/946b5b4)</td><td><code>fix the commandline sage -dev script</code></td></tr><tr><td>[2941308](https://github.com/sagemath/sagetrac-mirror/commit/2941308)</td><td><code>Use a DoctestSageDevWrapper for the global dev object during doctests</code></td></tr><tr><td>[6a512d6](https://github.com/sagemath/sagetrac-mirror/commit/6a512d6)</td><td><code>Explicitly specify the key type in ssh-keygen (requried for Sun SSH)</code></td></tr><tr><td>[702d7af](https://github.com/sagemath/sagetrac-mirror/commit/702d7af)</td><td><code>do not suggest force push</code></td></tr></table>\n",
    "created_at": "2013-11-28T20:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192751",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td>[067dfc6](https://github.com/sagemath/sagetrac-mirror/commit/067dfc6)</td><td><code>Relax the cmdline test of "sage -dev", it may be disabled</code></td></tr><tr><td>[fa29095](https://github.com/sagemath/sagetrac-mirror/commit/fa29095)</td><td><code>Merging latest dev scripts to avoid conflict in sage-dev</code></td></tr><tr><td>[713737f](https://github.com/sagemath/sagetrac-mirror/commit/713737f)</td><td><code>fall back to doctesting all files if new files cannot be identified</code></td></tr><tr><td>[946b5b4](https://github.com/sagemath/sagetrac-mirror/commit/946b5b4)</td><td><code>fix the commandline sage -dev script</code></td></tr><tr><td>[2941308](https://github.com/sagemath/sagetrac-mirror/commit/2941308)</td><td><code>Use a DoctestSageDevWrapper for the global dev object during doctests</code></td></tr><tr><td>[6a512d6](https://github.com/sagemath/sagetrac-mirror/commit/6a512d6)</td><td><code>Explicitly specify the key type in ssh-keygen (requried for Sun SSH)</code></td></tr><tr><td>[702d7af](https://github.com/sagemath/sagetrac-mirror/commit/702d7af)</td><td><code>do not suggest force push</code></td></tr></table>




---

archive/issue_comments_192752.json:
```json
{
    "body": "Commit: **[`067dfc6`](https://github.com/sagemath/sagetrac-mirror/commit/067dfc6b5c4b25a64d23c97b48eaa7ce279146b9)**",
    "created_at": "2013-11-28T20:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192752",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`067dfc6`](https://github.com/sagemath/sagetrac-mirror/commit/067dfc6b5c4b25a64d23c97b48eaa7ce279146b9)**



---

archive/issue_comments_192753.json:
```json
{
    "body": "Dependencies: **#14482**",
    "created_at": "2013-11-28T20:15:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192753",
    "user": "https://github.com/vbraun"
}
```

Dependencies: **#14482**



---

archive/issue_events_220330.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-11-28T20:15:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220330"
}
```



---

archive/issue_comments_192754.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td>[24e5a73](https://github.com/sagemath/sagetrac-mirror/commit/24e5a73)</td><td><code>better to ask for forgiveness</code></td></tr></table>\n",
    "created_at": "2013-11-29T12:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192754",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td>[24e5a73](https://github.com/sagemath/sagetrac-mirror/commit/24e5a73)</td><td><code>better to ask for forgiveness</code></td></tr></table>




---

archive/issue_comments_192755.json:
```json
{
    "body": "Changed commit from **[`067dfc6`](https://github.com/sagemath/sagetrac-mirror/commit/067dfc6b5c4b25a64d23c97b48eaa7ce279146b9)** to **[`24e5a73`](https://github.com/sagemath/sagetrac-mirror/commit/24e5a7388f98b535ae84aa5753439e0128994473)**",
    "created_at": "2013-11-29T12:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192755",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`067dfc6`](https://github.com/sagemath/sagetrac-mirror/commit/067dfc6b5c4b25a64d23c97b48eaa7ce279146b9)** to **[`24e5a73`](https://github.com/sagemath/sagetrac-mirror/commit/24e5a7388f98b535ae84aa5753439e0128994473)**



---

archive/issue_comments_192756.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nBecause of the lazy import of the `dev` object, asking for forgiveness won't work.",
    "created_at": "2013-12-01T04:48:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192756",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:5" align="right">comment:5</div>

Because of the lazy import of the `dev` object, asking for forgiveness won't work.



---

archive/issue_events_220331.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-01T04:49:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220331"
}
```



---

archive/issue_events_220332.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-01T04:49:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220332"
}
```



---

archive/issue_comments_192757.json:
```json
{
    "body": "Reviewer: **R. Andrew Ohana**",
    "created_at": "2013-12-01T04:49:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192757",
    "user": "https://github.com/ohanar"
}
```

Reviewer: **R. Andrew Ohana**



---

archive/issue_events_220333.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-01T04:52:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220333"
}
```



---

archive/issue_events_220334.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-01T04:52:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "milestone_number": null,
    "milestone_title": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220334"
}
```



---

archive/issue_events_220335.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-01T15:39:35Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "title_is": "Allow using Sage without dev/git",
    "title_was": "Allow using Sage without git repository",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220335"
}
```



---

archive/issue_comments_192758.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe idea is to delete the `src/sage/dev` directory if development is not possible (e.g. because of file permissions). Just not importing `dev` is not a solution as the dev doctests are still around (and will all fail).",
    "created_at": "2013-12-01T15:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192758",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

The idea is to delete the `src/sage/dev` directory if development is not possible (e.g. because of file permissions). Just not importing `dev` is not a solution as the dev doctests are still around (and will all fail).



---

archive/issue_comments_192759.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n-For binary builds and perhaps tarballs we should not require the git repository. This ticket fixes two doctests for that use case.\n+For binary builds / system-wide installs and perhaps tarballs we should not require the git repository. This ticket fixes two doctests for that use case.\n+\n+That is, to remove the development functionality you can now \n+* delete `SAGE_SRC/sage/dev`\n+* delete `SAGE_ROOT/.git`\n+and all doctests still pass\n+\n``````\n",
    "created_at": "2013-12-01T15:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192759",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,7 @@
-For binary builds and perhaps tarballs we should not require the git repository. This ticket fixes two doctests for that use case.
+For binary builds / system-wide installs and perhaps tarballs we should not require the git repository. This ticket fixes two doctests for that use case.
+
+That is, to remove the development functionality you can now 
+* delete `SAGE_SRC/sage/dev`
+* delete `SAGE_ROOT/.git`
+and all doctests still pass
+
``````




---

archive/issue_events_220336.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-01T15:40:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220336"
}
```



---

archive/issue_events_220337.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-01T15:40:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220337"
}
```



---

archive/issue_comments_192760.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nok, in that case, this seems fine",
    "created_at": "2013-12-06T21:42:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15465#issuecomment-192760",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:10" align="right">comment:10</div>

ok, in that case, this seems fine



---

archive/issue_events_220338.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-06T21:42:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220338"
}
```



---

archive/issue_events_220339.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-06T21:42:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220339"
}
```



---

archive/issue_events_220340.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T14:09:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220340"
}
```



---

archive/issue_events_220341.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "608159c0ca1c0a8e609fcfa35dcd1a12dac48d9a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2013-12-16T14:09:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15465",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15465#event-220341"
}
```
