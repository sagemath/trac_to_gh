# Issue 15366: cyggcc_s.dll causes Python random segfaults

archive/issues_015129.json:
```json
{
    "body": "We should include the corresponding fix to our GCC.\nSee:\n* http://cygwin.com/ml/cygwin/2013-08/msg00201.html\n* http://cygwin.com/ml/cygwin/2013-07/msg00528.html\n\nUse git branch.\n\nCC:  @kcrisman @dimpase @tscrim\n\nKeywords: gcc spkg cygwin\n\nUpstream: Fixed upstream, in a later stable release.\n\nAuthor: Jean-Pierre Flori\n\nBranch: u/jpflori/ticket/15366\n\nCommit: 46e6ac63cec260b90c27865caf91a80650473151\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/15366\n\n",
    "closed_at": "2014-10-27T19:15:13Z",
    "created_at": "2013-11-06T20:31:36Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "cyggcc_s.dll causes Python random segfaults",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15366",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
We should include the corresponding fix to our GCC.
See:
* http://cygwin.com/ml/cygwin/2013-08/msg00201.html
* http://cygwin.com/ml/cygwin/2013-07/msg00528.html

Use git branch.

CC:  @kcrisman @dimpase @tscrim

Keywords: gcc spkg cygwin

Upstream: Fixed upstream, in a later stable release.

Author: Jean-Pierre Flori

Branch: u/jpflori/ticket/15366

Commit: 46e6ac63cec260b90c27865caf91a80650473151

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/15366





---

archive/issue_comments_248990.json:
```json
{
    "body": "Changing keywords from \"\" to \"gcc spkg cygwin\".",
    "created_at": "2013-11-06T20:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248990",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing keywords from "" to "gcc spkg cygwin".



---

archive/issue_comments_248991.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-11-06T20:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248991",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_248992.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n * http://cygwin.com/ml/cygwin/2013-07/msg00528.html\n \n Use spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/gcc-4.7.3.p1.spkg\n+* http://boxen.math.washington.edu/home/jpflori/spkg/gcc-4.7.3.p1.spkg\n``````\n",
    "created_at": "2013-11-07T13:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248992",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 * http://cygwin.com/ml/cygwin/2013-07/msg00528.html
 
 Use spkg at:
-* http://boxen.math.washington.edu/home/jpflori/gcc-4.7.3.p1.spkg
+* http://boxen.math.washington.edu/home/jpflori/spkg/gcc-4.7.3.p1.spkg
``````




---

archive/issue_comments_248993.json:
```json
{
    "body": "<a id='comment:4'></a>\nHum, I put the patch in the wrong direction.",
    "created_at": "2013-11-07T15:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248993",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>
Hum, I put the patch in the wrong direction.



---

archive/issue_comments_248994.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-11-07T15:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248994",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_248995.json:
```json
{
    "body": "Spkg diff, for review only.",
    "created_at": "2013-11-07T16:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248995",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Spkg diff, for review only.



---

archive/issue_comments_248996.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [gcc-4.7.3.p1.diff](tarball://root/attachments/some-uuid/ticket15366/gcc-4.7.3.p1.diff) by jpflori created at 2013-11-07 16:10:43",
    "created_at": "2013-11-07T16:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248996",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>
Attachment [gcc-4.7.3.p1.diff](tarball://root/attachments/some-uuid/ticket15366/gcc-4.7.3.p1.diff) by jpflori created at 2013-11-07 16:10:43



---

archive/issue_comments_248997.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-11-07T16:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248997",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_248998.json:
```json
{
    "body": "<a id='comment:6'></a>\nI guess the bug is also:\n* http://gcc.gnu.org/bugzilla/show_bug.cgi?id=57680",
    "created_at": "2013-11-08T13:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248998",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>
I guess the bug is also:
* http://gcc.gnu.org/bugzilla/show_bug.cgi?id=57680



---

archive/issue_comments_248999.json:
```json
{
    "body": "<a id='comment:7'></a>\nOk the previous bug was unrelated.\nThe right one was here:\n* http://gcc.gnu.org/bugzilla/show_bug.cgi?id=57982\nand has been fixed upstream after my bumping.",
    "created_at": "2013-11-12T20:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-248999",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
Ok the previous bug was unrelated.
The right one was here:
* http://gcc.gnu.org/bugzilla/show_bug.cgi?id=57982
and has been fixed upstream after my bumping.



---

archive/issue_comments_249000.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Fixed upstream, but not in a stable release.\"",
    "created_at": "2013-11-12T20:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249000",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing upstream from "N/A" to "Fixed upstream, but not in a stable release."



---

archive/issue_comments_249001.json:
```json
{
    "body": "<a id='comment:8'></a>\nNew commits:\n|                                                                                                         |                                                        |\n|---------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[13366b7](https://github.com/sagemath/sagetrac-mirror/commit/13366b7)|`cyggcc_s.dll causes Python random segfaults on Cygwin.`|",
    "created_at": "2013-12-25T20:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249001",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>
New commits:
|                                                                                                         |                                                        |
|---------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[13366b7](https://github.com/sagemath/sagetrac-mirror/commit/13366b7)|`cyggcc_s.dll causes Python random segfaults on Cygwin.`|



---

archive/issue_comments_249002.json:
```json
{
    "body": "Changing commit from \"\" to \"13366b752018f8aee38b4200897b2620f92d2672\"",
    "created_at": "2013-12-25T20:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249002",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing commit from "" to "13366b752018f8aee38b4200897b2620f92d2672"



---

archive/issue_comments_249003.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jpflori/ticket/15366\"",
    "created_at": "2013-12-25T20:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249003",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing branch from "" to "u/jpflori/ticket/15366"



---

archive/issue_comments_249004.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,5 +3,4 @@\n * http://cygwin.com/ml/cygwin/2013-08/msg00201.html\n * http://cygwin.com/ml/cygwin/2013-07/msg00528.html\n \n-Use spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/spkg/gcc-4.7.3.p1.spkg\n+Use git branch.\n``````\n",
    "created_at": "2013-12-25T20:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249004",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,5 +3,4 @@
 * http://cygwin.com/ml/cygwin/2013-08/msg00201.html
 * http://cygwin.com/ml/cygwin/2013-07/msg00528.html
 
-Use spkg at:
-* http://boxen.math.washington.edu/home/jpflori/spkg/gcc-4.7.3.p1.spkg
+Use git branch.
``````




---

archive/issue_events_051073.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15366#event-51073"
}
```



---

archive/issue_comments_249005.json:
```json
{
    "body": "Changing commit from \"13366b752018f8aee38b4200897b2620f92d2672\" to \"c5e9e876e87a750f4b3ffde72bad4bf241d5b007\"",
    "created_at": "2014-04-09T11:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249005",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "13366b752018f8aee38b4200897b2620f92d2672" to "c5e9e876e87a750f4b3ffde72bad4bf241d5b007"



---

archive/issue_comments_249006.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[c5e9e87](https://github.com/sagemath/sagetrac-mirror/commit/c5e9e876e87a750f4b3ffde72bad4bf241d5b007)|`Merge remote-tracking branch 'trac/develop' into ticket/15366`|",
    "created_at": "2014-04-09T11:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249006",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[c5e9e87](https://github.com/sagemath/sagetrac-mirror/commit/c5e9e876e87a750f4b3ffde72bad4bf241d5b007)|`Merge remote-tracking branch 'trac/develop' into ticket/15366`|



---

archive/issue_comments_249007.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-14T13:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249007",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_249008.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis `spkg-install` uses `set -e`. So, you should remove all the extra checking you added, and you might want to move the `set -e` down to after the patching.",
    "created_at": "2014-04-14T13:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249008",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
This `spkg-install` uses `set -e`. So, you should remove all the extra checking you added, and you might want to move the `set -e` down to after the patching.



---

archive/issue_comments_249009.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[46e6ac6](https://github.com/sagemath/sagetrac-mirror/commit/46e6ac63cec260b90c27865caf91a80650473151)|`Correctly deal with errors in gcc install script.`|",
    "created_at": "2014-04-14T13:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[46e6ac6](https://github.com/sagemath/sagetrac-mirror/commit/46e6ac63cec260b90c27865caf91a80650473151)|`Correctly deal with errors in gcc install script.`|



---

archive/issue_comments_249010.json:
```json
{
    "body": "Changing commit from \"c5e9e876e87a750f4b3ffde72bad4bf241d5b007\" to \"46e6ac63cec260b90c27865caf91a80650473151\"",
    "created_at": "2014-04-14T13:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249010",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c5e9e876e87a750f4b3ffde72bad4bf241d5b007" to "46e6ac63cec260b90c27865caf91a80650473151"



---

archive/issue_comments_249011.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-14T13:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249011",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_249012.json:
```json
{
    "body": "<a id='comment:14'></a>\nThanks, I did not pay attention to `set -e`...",
    "created_at": "2014-04-14T13:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249012",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>
Thanks, I did not pay attention to `set -e`...



---

archive/issue_events_051074.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15366#event-51074"
}
```



---

archive/issue_events_051075.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15366#event-51075"
}
```



---

archive/issue_events_051076.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15366#event-51076"
}
```



---

archive/issue_events_051077.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15366#event-51077"
}
```



---

archive/issue_comments_249013.json:
```json
{
    "body": "<a id='comment:17'></a>\nIs this fixed by #17169?",
    "created_at": "2014-10-26T13:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249013",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Is this fixed by #17169?



---

archive/issue_comments_249014.json:
```json
{
    "body": "<a id='comment:18'></a>\nI think so.",
    "created_at": "2014-10-27T16:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249014",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:18'></a>
I think so.



---

archive/issue_comments_249015.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-27T16:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249015",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_249016.json:
```json
{
    "body": "Changing upstream from \"Fixed upstream, but not in a stable release.\" to \"Fixed upstream, in a later stable release.\"",
    "created_at": "2014-10-27T16:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249016",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing upstream from "Fixed upstream, but not in a stable release." to "Fixed upstream, in a later stable release."



---

archive/issue_events_051078.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-27T19:15:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15366#event-51078"
}
```



---

archive/issue_events_051079.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-27T19:15:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15366#event-51079"
}
```



---

archive/issue_events_051080.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-27T19:15:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15366#event-51080"
}
```



---

archive/issue_comments_249017.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2014-10-27T19:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15366#issuecomment-249017",
    "user": "https://github.com/vbraun"
}
```

Resolution: duplicate
