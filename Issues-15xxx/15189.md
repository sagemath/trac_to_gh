# Issue 15189: LinearMatroid.is_field_isomorphic fails on some occasions

archive/issues_014952.json:
```json
{
    "body": "The following code should return False:\n\n```\nsage: M = Matroid(ring=GF(5), reduced_matrix=[[1,0,3],[0,1,1],[1,1,0]])\nsage: N = Matroid(ring=GF(5), reduced_matrix=[[1,0,1],[0,1,1],[1,1,0]])\nsage: M.is_field_isomorphic(N)\nTrue\n```\n\nIndeed:\n\n```\nsage: any(M.is_field_isomorphism(N, p) for p in Permutations(range(6)))\nFalse\n```\n\nThe cause is a recursive call gone wrong in set_system.pyx.\n\napply trac_15189_field_isom_fix.patch\u200b\n\nCC:  yomcat\n\nReviewer: Michael Welsh\n\nAuthor: Stefan van Zwam\n\nMerged: sage-5.12.rc1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15189\n\n",
    "closed_at": "2013-10-04T07:39:57Z",
    "created_at": "2013-09-12T16:50:53Z",
    "labels": [
        "component: matroid theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "LinearMatroid.is_field_isomorphic fails on some occasions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15189",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```
The following code should return False:

```
sage: M = Matroid(ring=GF(5), reduced_matrix=[[1,0,3],[0,1,1],[1,1,0]])
sage: N = Matroid(ring=GF(5), reduced_matrix=[[1,0,1],[0,1,1],[1,1,0]])
sage: M.is_field_isomorphic(N)
True
```

Indeed:

```
sage: any(M.is_field_isomorphism(N, p) for p in Permutations(range(6)))
False
```

The cause is a recursive call gone wrong in set_system.pyx.

apply trac_15189_field_isom_fix.patch​

CC:  yomcat

Reviewer: Michael Welsh

Author: Stefan van Zwam

Merged: sage-5.12.rc1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15189





---

archive/issue_comments_239866.json:
```json
{
    "body": "Changing branch from \"\" to \"u/Stefan/ticket/15189\"",
    "created_at": "2013-09-12T21:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239866",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing branch from "" to "u/Stefan/ticket/15189"



---

archive/issue_comments_239867.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-09-12T22:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239867",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_239868.json:
```json
{
    "body": "<a id='comment:4'></a>How do I review this? I can't seem to get the Branch thing working (when I click on it, I either need to browse through a file system too much to find the changes, or get a blank page).",
    "created_at": "2013-09-15T03:46:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239868",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

<a id='comment:4'></a>How do I review this? I can't seem to get the Branch thing working (when I click on it, I either need to browse through a file system too much to find the changes, or get a blank page).



---

archive/issue_comments_239869.json:
```json
{
    "body": "<a id='comment:5'></a>By clicking on (Commits) in the Branch field, and selecting the appropriate diffs (topmost versus second from top) you can view my changes. \n\nOtherwise, I'm still learning this whole process. Apparently the Branch link being colored red is a bad thing (it was green when I first uploaded this)...\n\nFor the record, to create this patch I followed instructions here:\n\nhttp://trac.sagemath.org/wiki/QuickStartSageGit\n\nAnd then here:\n\nhttp://sagemath.github.io/git-developer-guide/walk_through.html",
    "created_at": "2013-09-15T12:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239869",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:5'></a>By clicking on (Commits) in the Branch field, and selecting the appropriate diffs (topmost versus second from top) you can view my changes. 

Otherwise, I'm still learning this whole process. Apparently the Branch link being colored red is a bad thing (it was green when I first uploaded this)...

For the record, to create this patch I followed instructions here:

http://trac.sagemath.org/wiki/QuickStartSageGit

And then here:

http://sagemath.github.io/git-developer-guide/walk_through.html



---

archive/issue_comments_239870.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-09-30T19:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239870",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239871.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n-ADD DESCRIPTION\n-\n The following code should return False:\n \n ```\n``````\n",
    "created_at": "2013-09-30T19:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239871",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
-ADD DESCRIPTION
-
 The following code should return False:
 
 ```
``````




---

archive/issue_comments_239872.json:
```json
{
    "body": "Changing branch from \"u/Stefan/ticket/15189\" to \"\"",
    "created_at": "2013-09-30T19:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239872",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing branch from "u/Stefan/ticket/15189" to ""



---

archive/issue_comments_239873.json:
```json
{
    "body": "Changing author from \"\" to \"Stefan van Zwam\"",
    "created_at": "2013-09-30T19:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239873",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing author from "" to "Stefan van Zwam"



---

archive/issue_comments_239874.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-09-30T19:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239874",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239875.json:
```json
{
    "body": "<a id='comment:7'></a>Attachment [trac_15189_field_isom_fix.patch](tarball://root/attachments/some-uuid/ticket15189/trac_15189_field_isom_fix.patch) by Stefan created at 2013-09-30 19:23:54\n\nOk, I chickened out of the Git development process for now and uploaded a good, old-fashioned patch.",
    "created_at": "2013-09-30T19:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239875",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:7'></a>Attachment [trac_15189_field_isom_fix.patch](tarball://root/attachments/some-uuid/ticket15189/trac_15189_field_isom_fix.patch) by Stefan created at 2013-09-30 19:23:54

Ok, I chickened out of the Git development process for now and uploaded a good, old-fashioned patch.



---

archive/issue_comments_239876.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,22 @@\n+The following code should return False:\n \n+```\n+sage: M = Matroid(ring=GF(5), reduced_matrix=[[1,0,3],[0,1,1],[1,1,0]])\n+sage: N = Matroid(ring=GF(5), reduced_matrix=[[1,0,1],[0,1,1],[1,1,0]])\n+sage: M.is_field_isomorphic(N)\n+True\n+```\n+\n+Indeed:\n+\n+```\n+sage: any(M.is_field_isomorphism(N, p) for p in Permutations(range(6)))\n+False\n+```\n+\n+The cause is a recursive call gone wrong in set_system.pyx.\n+\n+apply trac_15189_field_isom_fix.patch\u200b\n \n Comment: 1\n \n``````\n",
    "created_at": "2013-09-30T19:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239876",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,22 @@
+The following code should return False:
 
+```
+sage: M = Matroid(ring=GF(5), reduced_matrix=[[1,0,3],[0,1,1],[1,1,0]])
+sage: N = Matroid(ring=GF(5), reduced_matrix=[[1,0,1],[0,1,1],[1,1,0]])
+sage: M.is_field_isomorphic(N)
+True
+```
+
+Indeed:
+
+```
+sage: any(M.is_field_isomorphism(N, p) for p in Permutations(range(6)))
+False
+```
+
+The cause is a recursive call gone wrong in set_system.pyx.
+
+apply trac_15189_field_isom_fix.patch​
 
 Comment: 1
 
``````




---

archive/issue_comments_239877.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-09-30T20:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239877",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_239878.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Michael Welsh\"",
    "created_at": "2013-09-30T20:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239878",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

Changing reviewer from "" to "Michael Welsh"



---

archive/issue_comments_239879.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 Stefan]:\n> Ok, I chickened out of the Git development process for now and uploaded a good, old-fashioned patch.\n\nI was going to get round to the git stuff eventually... :)\n\nAll good now.",
    "created_at": "2013-09-30T20:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239879",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

<a id='comment:8'></a>Replying to [comment:7 Stefan]:
> Ok, I chickened out of the Git development process for now and uploaded a good, old-fashioned patch.

I was going to get round to the git stuff eventually... :)

All good now.



---

archive/issue_events_043836.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-01T07:15:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "milestone": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15189#event-43836"
}
```



---

archive/issue_comments_239880.json:
```json
{
    "body": "<a id='comment:10'></a>Really? It's just a one-line fix (plus doctest) in a quite isolated part of Sage...",
    "created_at": "2013-10-01T12:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239880",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:10'></a>Really? It's just a one-line fix (plus doctest) in a quite isolated part of Sage...



---

archive/issue_events_043837.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-02T19:08:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "milestone": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15189#event-43837"
}
```



---

archive/issue_events_043838.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-02T19:08:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15189#event-43838"
}
```



---

archive/issue_comments_239881.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.12.rc1\"",
    "created_at": "2013-10-04T07:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239881",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.12.rc1"



---

archive/issue_events_043839.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-04T07:39:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15189#event-43839"
}
```



---

archive/issue_comments_239882.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-10-04T07:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239882",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_239883.json:
```json
{
    "body": "<a id='comment:13'></a>Awesome, thanks!",
    "created_at": "2013-10-07T18:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15189#issuecomment-239883",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:13'></a>Awesome, thanks!
