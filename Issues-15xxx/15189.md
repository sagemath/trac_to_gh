# Issue 15189: LinearMatroid.is_field_isomorphic fails on some occasions

archive/issues_014952.json:
```json
{
    "body": "The following code should return False:\n\n```\nsage: M = Matroid(ring=GF(5), reduced_matrix=[[1,0,3],[0,1,1],[1,1,0]])\nsage: N = Matroid(ring=GF(5), reduced_matrix=[[1,0,1],[0,1,1],[1,1,0]])\nsage: M.is_field_isomorphic(N)\nTrue\n```\n\nIndeed:\n\n```\nsage: any(M.is_field_isomorphism(N, p) for p in Permutations(range(6)))\nFalse\n```\n\nThe cause is a recursive call gone wrong in set_system.pyx.\n\napply trac_15189_field_isom_fix.patch\u200b\n\n**CC:**  yomcat\n\n**Reviewer:** Michael Welsh\n\n**Author:** Stefan van Zwam\n\n**Merged:** sage-5.12.rc1\n\nIssue created by migration from https://trac.sagemath.org/ticket/15189\n\n",
    "closed_at": "2013-10-04T07:39:57Z",
    "created_at": "2013-09-12T16:50:53Z",
    "labels": [
        "component: matroid theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.12",
    "title": "LinearMatroid.is_field_isomorphic fails on some occasions",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/15189",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```
The following code should return False:

```
sage: M = Matroid(ring=GF(5), reduced_matrix=[[1,0,3],[0,1,1],[1,1,0]])
sage: N = Matroid(ring=GF(5), reduced_matrix=[[1,0,1],[0,1,1],[1,1,0]])
sage: M.is_field_isomorphic(N)
True
```

Indeed:

```
sage: any(M.is_field_isomorphism(N, p) for p in Permutations(range(6)))
False
```

The cause is a recursive call gone wrong in set_system.pyx.

apply trac_15189_field_isom_fix.patch​

**CC:**  yomcat

**Reviewer:** Michael Welsh

**Author:** Stefan van Zwam

**Merged:** sage-5.12.rc1

Issue created by migration from https://trac.sagemath.org/ticket/15189





---

archive/issue_comments_189406.json:
```json
{
    "body": "**Branch:** [u/Stefan/ticket/15189](https://github.com/sagemath/sagetrac-mirror/tree/u/Stefan/ticket/15189)",
    "created_at": "2013-09-12T21:59:05Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189406",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Branch:** [u/Stefan/ticket/15189](https://github.com/sagemath/sagetrac-mirror/tree/u/Stefan/ticket/15189)



---

archive/issue_events_133403.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2013-09-12T22:00:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133403"
}
```



---

archive/issue_comments_189407.json:
```json
{
    "body": "<a id='comment:4'></a>\nHow do I review this? I can't seem to get the Branch thing working (when I click on it, I either need to browse through a file system too much to find the changes, or get a blank page).",
    "created_at": "2013-09-15T03:46:31Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189407",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

<a id='comment:4'></a>
How do I review this? I can't seem to get the Branch thing working (when I click on it, I either need to browse through a file system too much to find the changes, or get a blank page).



---

archive/issue_comments_189408.json:
```json
{
    "body": "<a id='comment:5'></a>\nBy clicking on (Commits) in the Branch field, and selecting the appropriate diffs (topmost versus second from top) you can view my changes. \n\nOtherwise, I'm still learning this whole process. Apparently the Branch link being colored red is a bad thing (it was green when I first uploaded this)...\n\nFor the record, to create this patch I followed instructions here:\n\nhttp://trac.sagemath.org/wiki/QuickStartSageGit\n\nAnd then here:\n\nhttp://sagemath.github.io/git-developer-guide/walk_through.html",
    "created_at": "2013-09-15T12:48:25Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189408",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:5'></a>
By clicking on (Commits) in the Branch field, and selecting the appropriate diffs (topmost versus second from top) you can view my changes. 

Otherwise, I'm still learning this whole process. Apparently the Branch link being colored red is a bad thing (it was green when I first uploaded this)...

For the record, to create this patch I followed instructions here:

http://trac.sagemath.org/wiki/QuickStartSageGit

And then here:

http://sagemath.github.io/git-developer-guide/walk_through.html



---

archive/issue_events_133404.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2013-09-30T19:21:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133404"
}
```



---

archive/issue_events_133405.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2013-09-30T19:21:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133405"
}
```



---

archive/issue_comments_189409.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n-ADD DESCRIPTION\n-\n The following code should return False:\n \n ```\n``````\n",
    "created_at": "2013-09-30T19:21:25Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189409",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
-ADD DESCRIPTION
-
 The following code should return False:
 
 ```
``````




---

archive/issue_comments_189410.json:
```json
{
    "body": "**Changing branch** from \"[u/Stefan/ticket/15189](https://github.com/sagemath/sagetrac-mirror/tree/u/Stefan/ticket/15189)\" to \"\".",
    "created_at": "2013-09-30T19:21:25Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189410",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Changing branch** from "[u/Stefan/ticket/15189](https://github.com/sagemath/sagetrac-mirror/tree/u/Stefan/ticket/15189)" to "".



---

archive/issue_comments_189411.json:
```json
{
    "body": "**Author:** Stefan van Zwam",
    "created_at": "2013-09-30T19:23:54Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189411",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Author:** Stefan van Zwam



---

archive/issue_events_133406.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2013-09-30T19:23:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133406"
}
```



---

archive/issue_events_133407.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2013-09-30T19:23:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133407"
}
```



---

archive/attachments_020315.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_15189_field_isom_fix.patch",
    "asset_url": "tarball://root/attachments/ticket15189/trac_15189_field_isom_fix.patch",
    "created_at": "2013-09-30T19:23:54Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket15189/trac_15189_field_isom_fix.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```



---

archive/issue_comments_189412.json:
```json
{
    "body": "<a id='comment:7'></a>\nAttachment [trac_15189_field_isom_fix.patch](https://github.com/sagemath/sage/files/ticket15189/trac_15189_field_isom_fix.patch) by Stefan created at 2013-09-30 19:23:54\n\nOk, I chickened out of the Git development process for now and uploaded a good, old-fashioned patch.",
    "created_at": "2013-09-30T19:23:54Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189412",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:7'></a>
Attachment [trac_15189_field_isom_fix.patch](https://github.com/sagemath/sage/files/ticket15189/trac_15189_field_isom_fix.patch) by Stefan created at 2013-09-30 19:23:54

Ok, I chickened out of the Git development process for now and uploaded a good, old-fashioned patch.



---

archive/issue_comments_189413.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,3 +15,5 @@\n ```\n \n The cause is a recursive call gone wrong in set_system.pyx.\n+\n+apply trac_15189_field_isom_fix.patch\u200b\n``````\n",
    "created_at": "2013-09-30T19:23:54Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189413",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,3 +15,5 @@
 ```
 
 The cause is a recursive call gone wrong in set_system.pyx.
+
+apply trac_15189_field_isom_fix.patch​
``````




---

archive/issue_events_133408.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/yomcat",
    "created_at": "2013-09-30T20:42:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133408"
}
```



---

archive/issue_events_133409.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/yomcat",
    "created_at": "2013-09-30T20:42:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133409"
}
```



---

archive/issue_comments_189414.json:
```json
{
    "body": "**Reviewer:** Michael Welsh",
    "created_at": "2013-09-30T20:42:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189414",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

**Reviewer:** Michael Welsh



---

archive/issue_comments_189415.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [Stefan](#comment%3A7):\n> Ok, I chickened out of the Git development process for now and uploaded a good, old-fashioned patch.\n\nI was going to get round to the git stuff eventually... :)\n\nAll good now.",
    "created_at": "2013-09-30T20:42:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189415",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

<a id='comment:8'></a>
Replying to [Stefan](#comment%3A7):
> Ok, I chickened out of the Git development process for now and uploaded a good, old-fashioned patch.

I was going to get round to the git stuff eventually... :)

All good now.



---

archive/issue_events_133410.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-01T07:15:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133410"
}
```



---

archive/issue_events_133411.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-01T07:15:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "milestone": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133411"
}
```



---

archive/issue_comments_189416.json:
```json
{
    "body": "<a id='comment:10'></a>\nReally? It's just a one-line fix (plus doctest) in a quite isolated part of Sage...",
    "created_at": "2013-10-01T12:12:52Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189416",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:10'></a>
Really? It's just a one-line fix (plus doctest) in a quite isolated part of Sage...



---

archive/issue_events_133412.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-02T19:08:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "milestone": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133412"
}
```



---

archive/issue_events_133413.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-02T19:08:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133413"
}
```



---

archive/issue_comments_189417.json:
```json
{
    "body": "**Merged:** sage-5.12.rc1",
    "created_at": "2013-10-04T07:39:57Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189417",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.12.rc1



---

archive/issue_events_133414.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-04T07:39:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133414"
}
```



---

archive/issue_events_133415.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-04T07:39:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15189#event-133415"
}
```



---

archive/issue_comments_189418.json:
```json
{
    "body": "<a id='comment:13'></a>\nAwesome, thanks!",
    "created_at": "2013-10-07T18:07:19Z",
    "issue": "https://github.com/sagemath/sage/issues/15189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15189#issuecomment-189418",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:13'></a>
Awesome, thanks!
