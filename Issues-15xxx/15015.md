# Issue 15015: Update to MPIR 2.7.0-alpha12

archive/issues_014778.json:
```json
{
    "body": "MPIR 2.6.0 does not build on Cygwin 64.\nThe next version should fix this problem (and others).\nPatches from Sage will mostly be integrated.\n\n**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)\n\nCC:  @kcrisman @dimpase @tscrim @williamstein\n\nKeywords: mpir spkg cygwin\n\nBranch/Commit: d97c06604293f765fd0c8de6189d05cedcebea3c\n\nUpstream: Fixed upstream, but not in a stable release.\n\nReviewer: Jean-Pierre Flori\n\nAuthor: Jean-Pierre Flori, Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15015\n\n",
    "closed_at": "2015-01-02T15:46:28Z",
    "created_at": "2013-08-06T21:44:07Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Update to MPIR 2.7.0-alpha12",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15015",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
MPIR 2.6.0 does not build on Cygwin 64.
The next version should fix this problem (and others).
Patches from Sage will mostly be integrated.

**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)

CC:  @kcrisman @dimpase @tscrim @williamstein

Keywords: mpir spkg cygwin

Branch/Commit: d97c06604293f765fd0c8de6189d05cedcebea3c

Upstream: Fixed upstream, but not in a stable release.

Reviewer: Jean-Pierre Flori

Author: Jean-Pierre Flori, Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15015





---

archive/issue_comments_200950.json:
```json
{
    "body": "<a id='comment:1'></a>This should surely be renamed to \"Update to MPIR 2.6.1\" when the official version get released (no idea when...).",
    "created_at": "2013-08-06T21:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200950",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>This should surely be renamed to "Update to MPIR 2.6.1" when the official version get released (no idea when...).



---

archive/issue_comments_200951.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,9 +1,11 @@\n MPIR 2.6.0 does not build on Cygwin 64.\n The next version should fix this problem (and others).\n Patches from Sage will mostly be integrated.\n+When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.\n \n-Temporary dirty spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p3.spkg\n+Temporary spkg at:\n+* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg\n+\n \n Upstream: Fixed upstream, but not in a stable release.\n \n```\n",
    "created_at": "2013-08-07T08:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200951",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,9 +1,11 @@
 MPIR 2.6.0 does not build on Cygwin 64.
 The next version should fix this problem (and others).
 Patches from Sage will mostly be integrated.
+When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.
 
-Temporary dirty spkg at:
-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p3.spkg
+Temporary spkg at:
+* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg
+
 
 Upstream: Fixed upstream, but not in a stable release.
 
```




---

archive/issue_comments_200952.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n+MPIR 2.6.0 does not build on Cygwin 64.\n+The next version should fix this problem (and others).\n+Patches from Sage will mostly be integrated.\n+We should also surely add a \\`spkg-src\\` script which automatically purges the spkg from all the Windows stuff.\n+\n+Temporary spkg at:\n+* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg\n \n \n Upstream: Fixed upstream, but not in a stable release.\n```\n",
    "created_at": "2013-08-07T09:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200952",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,10 @@
+MPIR 2.6.0 does not build on Cygwin 64.
+The next version should fix this problem (and others).
+Patches from Sage will mostly be integrated.
+We should also surely add a \`spkg-src\` script which automatically purges the spkg from all the Windows stuff.
+
+Temporary spkg at:
+* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg
 
 
 Upstream: Fixed upstream, but not in a stable release.
```




---

archive/issue_events_043151.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-07T09:55:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15015#event-43151"
}
```



---

archive/issue_comments_200953.json:
```json
{
    "body": "<a id='comment:4'></a>For the record, the current spkg built for me on cygwin64.",
    "created_at": "2013-08-10T19:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200953",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>For the record, the current spkg built for me on cygwin64.



---

archive/issue_comments_200954.json:
```json
{
    "body": "<a id='comment:5'></a>On top of that the current MPIR 2.6.0 fails to properly build on Cygwin when CXX support is not enabled.\nTherefore it is not possible/easy to build GCC on Cygwin.\nThat is because of a dirty hack in the autotools stuff already present in GMP before MPIR was forked.\nThis is also fixed in the current git version.",
    "created_at": "2013-11-06T09:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200954",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>On top of that the current MPIR 2.6.0 fails to properly build on Cygwin when CXX support is not enabled.
Therefore it is not possible/easy to build GCC on Cygwin.
That is because of a dirty hack in the autotools stuff already present in GMP before MPIR was forked.
This is also fixed in the current git version.



---

archive/issue_comments_200955.json:
```json
{
    "body": "<a id='comment:6'></a>Otherwise we'd probably have to close it as *won't fix*. :-)\n\nCurrent upstream tarball: http://mpir.org/mpir-2.7.0-alpha4.tar.bz2\n\n\nStill needs to be tested on Darwin PowerPC I think.  (moufang?  Does it still live?)\n\nAnd probably also Macs with more recent versions of Xcode.",
    "created_at": "2014-04-06T19:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200955",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:6'></a>Otherwise we'd probably have to close it as *won't fix*. :-)

Current upstream tarball: http://mpir.org/mpir-2.7.0-alpha4.tar.bz2


Still needs to be tested on Darwin PowerPC I think.  (moufang?  Does it still live?)

And probably also Macs with more recent versions of Xcode.



---

archive/issue_comments_200956.json:
```json
{
    "body": "<a id='comment:7'></a>So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)",
    "created_at": "2014-04-09T18:02:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200956",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)



---

archive/issue_comments_200957.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 kcrisman]:\n> So are you saying that JP should make a tarball for this as an alpha?\n\n\nI think that would be convenient for testing, and there are still some issues on Cygwin* JP knows about.\n\nBy the way, note that the latest changes in the alpha4 tarball aren't yet committed on github (it's still at alpha3).",
    "created_at": "2014-04-09T18:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200957",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>Replying to [comment:7 kcrisman]:
> So are you saying that JP should make a tarball for this as an alpha?


I think that would be convenient for testing, and there are still some issues on Cygwin* JP knows about.

By the way, note that the latest changes in the alpha4 tarball aren't yet committed on github (it's still at alpha3).



---

archive/issue_comments_200958.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:7 kcrisman]:\n> So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)\n\nI happens I did and almost have an almost completely working out of the box cygwin64 branch.\nI just have to cherry-pick commits and push them to different branches on trac.",
    "created_at": "2014-04-09T21:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200958",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>Replying to [comment:7 kcrisman]:
> So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)

I happens I did and almost have an almost completely working out of the box cygwin64 branch.
I just have to cherry-pick commits and push them to different branches on trac.



---

archive/issue_comments_200959.json:
```json
{
    "body": "<a id='comment:10'></a>There are still issues with PPL...\nSee https://groups.google.com/forum/?fromgroups=#!topic/mpir-devel/JFDaMAc0YpY\n\n---\nNew commits:",
    "created_at": "2014-04-13T19:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200959",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>There are still issues with PPL...
See https://groups.google.com/forum/?fromgroups=#!topic/mpir-devel/JFDaMAc0YpY

---
New commits:



---

archive/issue_comments_200960.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n+MPIR 2.6.0 does not build on Cygwin 64.\n+The next version should fix this problem (and others).\n+Patches from Sage will mostly be integrated.\n+We should also surely add a \\`spkg-src\\` script which automatically purges the spkg from all the Windows stuff.\n+\n+Temporary spkg at:\n+* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2\n \n \n Upstream: Fixed upstream, but not in a stable release.\n```\n",
    "created_at": "2014-04-13T19:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200960",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,10 @@
+MPIR 2.6.0 does not build on Cygwin 64.
+The next version should fix this problem (and others).
+Patches from Sage will mostly be integrated.
+We should also surely add a \`spkg-src\` script which automatically purges the spkg from all the Windows stuff.
+
+Temporary spkg at:
+* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2
 
 
 Upstream: Fixed upstream, but not in a stable release.
```




---

archive/issue_comments_200961.json:
```json
{
    "body": "<a id='comment:11'></a>A few comments/questions:\n\n* Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)\n\n* Sun compiler patch (probably less important)?\n\n* What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)\n\n* In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.\n\n\n\n\nShould #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence \"needs info\".)",
    "created_at": "2014-04-14T00:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200961",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'></a>A few comments/questions:

* Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)

* Sun compiler patch (probably less important)?

* What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)

* In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.




Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence "needs info".)



---

archive/issue_comments_200962.json:
```json
{
    "body": "<a id='comment:12'></a>I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.",
    "created_at": "2014-04-14T01:00:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200962",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:12'></a>I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.



---

archive/issue_comments_200963.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:11 leif]:\n> A few comments/questions:\n> \n\nAll (Most?) should be upstream now if I did not screw up a long time ago.\n>  * Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)\n \n> \nMust admit I don't remember about that one.\n>  * Sun compiler patch (probably less important)?\n \nThis one is in (IIRC).\n> \n>   * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)\n \nWhen there is no patch at all I guess.\nNot sure naymore.\n> \n> * In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.\n\nMaybe!\n> \n> \n\n\n> \n> Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence \"needs info\".)\n\nThe CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).",
    "created_at": "2014-04-14T08:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200963",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>Replying to [comment:11 leif]:
> A few comments/questions:
> 

All (Most?) should be upstream now if I did not screw up a long time ago.
>  * Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)
 
> 
Must admit I don't remember about that one.
>  * Sun compiler patch (probably less important)?
 
This one is in (IIRC).
> 
>   * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)
 
When there is no patch at all I guess.
Not sure naymore.
> 
> * In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.

Maybe!
> 
> 


> 
> Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence "needs info".)

The CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).



---

archive/issue_comments_200964.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:12 leif]:\n> I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.\n\nI don't now.\nWe surely added thing for apple ocmpiler/assembler/linker but couldn't promise it was AVX related.",
    "created_at": "2014-04-14T08:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200964",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>Replying to [comment:12 leif]:
> I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.

I don't now.
We surely added thing for apple ocmpiler/assembler/linker but couldn't promise it was AVX related.



---

archive/issue_comments_200965.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 jpflori]:\n> Replying to [comment:11 leif]:\n> > Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence \"needs info\".)\n\n> The CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).\n\nNo, a slightly different one (but with the same effect).  `AC_PROG_CXX` in MPIR is now correctly called after `CXXFLAGS` have been saved, and MPIR now behaves correctly (I'd say).  But Sage sets (and exports) `CXXFLAGS` to the empty string, so MPIR doesn't touch them (again assuming they were intentionally set), such that we end up with missing flags (unless the user had really set them, or `CFLAGS`, to something meaningful).",
    "created_at": "2014-04-14T08:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200965",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'></a>Replying to [comment:13 jpflori]:
> Replying to [comment:11 leif]:
> > Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence "needs info".)

> The CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).

No, a slightly different one (but with the same effect).  `AC_PROG_CXX` in MPIR is now correctly called after `CXXFLAGS` have been saved, and MPIR now behaves correctly (I'd say).  But Sage sets (and exports) `CXXFLAGS` to the empty string, so MPIR doesn't touch them (again assuming they were intentionally set), such that we end up with missing flags (unless the user had really set them, or `CFLAGS`, to something meaningful).



---

archive/issue_comments_200966.json:
```json
{
    "body": "<a id='comment:16'></a>I see.\nThanks for the explanation.",
    "created_at": "2014-04-14T08:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200966",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:16'></a>I see.
Thanks for the explanation.



---

archive/issue_comments_200967.json:
```json
{
    "body": "<a id='comment:17'></a>P.S.:  In `spkg-install`, we could do (almost) the same with `CXXFLAGS` as we do with `CFLAGS`.  In the first \"dry\" `configure` run, we already unset them, so we could grep MPIR's from the Makefile and at least *prepend* those settings to our effective `CXXFLAGS` for the second, real `configure`run.\n\n(So far, we didn't touch `CXXFLAGS` at all, which I'd consider a small deficiency or inconsistency anyway.)",
    "created_at": "2014-04-14T08:28:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200967",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>P.S.:  In `spkg-install`, we could do (almost) the same with `CXXFLAGS` as we do with `CFLAGS`.  In the first "dry" `configure` run, we already unset them, so we could grep MPIR's from the Makefile and at least *prepend* those settings to our effective `CXXFLAGS` for the second, real `configure`run.

(So far, we didn't touch `CXXFLAGS` at all, which I'd consider a small deficiency or inconsistency anyway.)



---

archive/issue_comments_200968.json:
```json
{
    "body": "<a id='comment:18'></a>[Slight correction to my previous post.]",
    "created_at": "2014-04-14T08:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200968",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:18'></a>[Slight correction to my previous post.]



---

archive/issue_comments_200969.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:13 jpflori]:\n> >  * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)\n \n> When there is no patch at all I guess.\n\nAh, thought of something like that.  But it should be\n\n```sh\nfor foo in bar*; do\n    [ -r \"$foo\" ] || continue   # ignore non-readable / non-existent files\n    process \"$foo\"\n    if [ $? -ne 0 ]; then\n        # processing $foo failed, err out\n        ...\n    fi\ndone\n```",
    "created_at": "2014-04-14T08:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200969",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:19'></a>Replying to [comment:13 jpflori]:
> >  * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)
 
> When there is no patch at all I guess.

Ah, thought of something like that.  But it should be

```sh
for foo in bar*; do
    [ -r "$foo" ] || continue   # ignore non-readable / non-existent files
    process "$foo"
    if [ $? -ne 0 ]; then
        # processing $foo failed, err out
        ...
    fi
done
```



---

archive/issue_comments_200970.json:
```json
{
    "body": "<a id='comment:20'></a>Sure, I messed up :(",
    "created_at": "2014-04-14T09:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200970",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:20'></a>Sure, I messed up :(



---

archive/issue_comments_200971.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-14T10:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200972.json:
```json
{
    "body": "<a id='comment:22'></a>All patches from Sage seem to be integrated upstream, good! The changes here look fine, the main part of reviewing will be checking that it actually works. I will upgrade this to the latest MPIR alpha and report back.",
    "created_at": "2014-08-28T10:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200972",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>All patches from Sage seem to be integrated upstream, good! The changes here look fine, the main part of reviewing will be checking that it actually works. I will upgrade this to the latest MPIR alpha and report back.



---

archive/issue_comments_200973.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n+MPIR 2.6.0 does not build on Cygwin 64.\n+The next version should fix this problem (and others).\n+Patches from Sage will mostly be integrated.\n+We should also surely add a \\`spkg-src\\` script which automatically purges the spkg from all the Windows stuff.\n+\n+**upstream** (this is alpha10) at:\n+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n \n \n Upstream: Fixed upstream, but not in a stable release.\n```\n",
    "created_at": "2014-08-28T10:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200973",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,10 @@
+MPIR 2.6.0 does not build on Cygwin 64.
+The next version should fix this problem (and others).
+Patches from Sage will mostly be integrated.
+We should also surely add a \`spkg-src\` script which automatically purges the spkg from all the Windows stuff.
+
+**upstream** (this is alpha10) at:
+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
 
 
 Upstream: Fixed upstream, but not in a stable release.
```




---

archive/issue_comments_200974.json:
```json
{
    "body": "<a id='comment:24'></a>I'm not sure the problem with ppl is fixed in the latest alpha...\nSome hints to fix it must lurk on flint-devel.",
    "created_at": "2014-08-28T10:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200974",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:24'></a>I'm not sure the problem with ppl is fixed in the latest alpha...
Some hints to fix it must lurk on flint-devel.



---

archive/issue_comments_200975.json:
```json
{
    "body": "<a id='comment:25'></a>See https://groups.google.com/d/msg/mpir-devel/JFDaMAc0YpY/h774pq9wN2EJ\nAnd IIRC it does not only happens on Cygwin(64) but also on more usual systems.",
    "created_at": "2014-08-28T10:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200975",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:25'></a>See https://groups.google.com/d/msg/mpir-devel/JFDaMAc0YpY/h774pq9wN2EJ
And IIRC it does not only happens on Cygwin(64) but also on more usual systems.



---

archive/issue_comments_200976.json:
```json
{
    "body": "<a id='comment:27'></a>In `spkg-install`, I also changed\n\n```\necho \"Checking what CFLAGS MPIR would use if they were empty...\"\n(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE) &>configure-empty.log\n```\nto\n\n```\necho \"Configuring MPIR with empty CFLAGS to determine the defaults:\"\n(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE)\n```\n\nI think it's better to display the first `configure` run, in case it needs to be debugged or just to show the user that Sage isn't stuck.\n\n---\nNew commits:",
    "created_at": "2014-08-28T10:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200976",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>In `spkg-install`, I also changed

```
echo "Checking what CFLAGS MPIR would use if they were empty..."
(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE) &>configure-empty.log
```
to

```
echo "Configuring MPIR with empty CFLAGS to determine the defaults:"
(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE)
```

I think it's better to display the first `configure` run, in case it needs to be debugged or just to show the user that Sage isn't stuck.

---
New commits:



---

archive/issue_comments_200977.json:
```json
{
    "body": "<a id='comment:28'></a>On Linux x86_64, g++ (Gentoo 4.6.4 p1.2, pie-0.5.2) 4.6.4, while compiling the Sage library:\n\n```\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/csage -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c build/cythonized/sage/libs/ppl.cpp -o build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/ppl.o -fno-strict-aliasing -w\nIn file included from build/cythonized/sage/libs/ppl.cpp:352:0:\n../local/include/gmpxx.h:1548:3: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1539:3: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long int)\u2019\n../local/include/gmpxx.h:1552:3: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1540:3: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long unsigned int)\u2019\n../local/include/gmpxx.h:1615:16: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1604:16: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long int)\u2019\n../local/include/gmpxx.h:1619:16: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1606:16: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long unsigned int)\u2019\nerror: command 'gcc' failed with exit status 1\n```",
    "created_at": "2014-08-28T12:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200977",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>On Linux x86_64, g++ (Gentoo 4.6.4 p1.2, pie-0.5.2) 4.6.4, while compiling the Sage library:

```
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/csage -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c build/cythonized/sage/libs/ppl.cpp -o build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/ppl.o -fno-strict-aliasing -w
In file included from build/cythonized/sage/libs/ppl.cpp:352:0:
../local/include/gmpxx.h:1548:3: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1539:3: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long int)’
../local/include/gmpxx.h:1552:3: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1540:3: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long unsigned int)’
../local/include/gmpxx.h:1615:16: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1604:16: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long int)’
../local/include/gmpxx.h:1619:16: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1606:16: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long unsigned int)’
error: command 'gcc' failed with exit status 1
```



---

archive/issue_comments_200978.json:
```json
{
    "body": "<a id='comment:29'></a>Yup that is the problem I was mentioning.",
    "created_at": "2014-08-28T12:03:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200978",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:29'></a>Yup that is the problem I was mentioning.



---

archive/issue_comments_200979.json:
```json
{
    "body": "<a id='comment:30'></a>Could you try with the attached patch?\nIf it works, I'll forward it to Bill.",
    "created_at": "2014-09-04T11:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200979",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:30'></a>Could you try with the attached patch?
If it works, I'll forward it to Bill.



---

archive/issue_comments_200980.json:
```json
{
    "body": "<a id='comment:31'></a>Attachment [mpirxx.2.patch](tarball://root/attachments/some-uuid/ticket15015/mpirxx.2.patch) by jpflori created at 2014-09-04 11:22:24\n\nGroumpf, thepatch is reversed.\nTake the .2 one.",
    "created_at": "2014-09-04T11:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200980",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:31'></a>Attachment [mpirxx.2.patch](tarball://root/attachments/some-uuid/ticket15015/mpirxx.2.patch) by jpflori created at 2014-09-04 11:22:24

Groumpf, thepatch is reversed.
Take the .2 one.



---

archive/issue_comments_200981.json:
```json
{
    "body": "<a id='comment:32'></a>Strange I don't have problems, even without my latest patch, on a machine where I seem to remember I used to have problems.",
    "created_at": "2014-09-04T13:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200981",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:32'></a>Strange I don't have problems, even without my latest patch, on a machine where I seem to remember I used to have problems.



---

archive/issue_comments_200982.json:
```json
{
    "body": "<a id='comment:33'></a>Works for me...",
    "created_at": "2014-09-04T20:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200982",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>Works for me...



---

archive/issue_comments_200983.json:
```json
{
    "body": "<a id='comment:34'></a>In fact I also need the patch, but not to build PPL anymore, but some ppl related file within the Sage library.",
    "created_at": "2014-09-05T14:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200983",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:34'></a>In fact I also need the patch, but not to build PPL anymore, but some ppl related file within the Sage library.



---

archive/issue_comments_200984.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n+MPIR 2.6.0 does not build on Cygwin 64.\n+The next version should fix this problem (and others).\n+Patches from Sage will mostly be integrated.\n+We should also surely add a \\`spkg-src\\` script which automatically purges the spkg from all the Windows stuff.\n+\n+**upstream** (this is alpha12) at:\n+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n \n \n Upstream: Fixed upstream, but not in a stable release.\n```\n",
    "created_at": "2014-10-01T14:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200984",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,10 @@
+MPIR 2.6.0 does not build on Cygwin 64.
+The next version should fix this problem (and others).
+Patches from Sage will mostly be integrated.
+We should also surely add a \`spkg-src\` script which automatically purges the spkg from all the Windows stuff.
+
+**upstream** (this is alpha12) at:
+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
 
 
 Upstream: Fixed upstream, but not in a stable release.
```




---

archive/issue_comments_200985.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-01T14:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200985",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200986.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-01T18:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200986",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200987.json:
```json
{
    "body": "<a id='comment:38'></a>This now builds and passes all doctests on 64-bit for me.\n\nTest please!",
    "created_at": "2014-10-01T18:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200987",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>This now builds and passes all doctests on 64-bit for me.

Test please!



---

archive/issue_comments_200988.json:
```json
{
    "body": "<a id='comment:39'></a>William: this changes one doctest in `src/sage/tests/book_stein_modform.py`",
    "created_at": "2014-10-01T18:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200988",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>William: this changes one doctest in `src/sage/tests/book_stein_modform.py`



---

archive/issue_comments_200989.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-01T18:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200989",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200990.json:
```json
{
    "body": "<a id='comment:41'></a>Unrelated to this ticket, I have re-enabled a doctest in `book_stein_modform.py` which was fixed in #4357.",
    "created_at": "2014-10-01T18:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200990",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>Unrelated to this ticket, I have re-enabled a doctest in `book_stein_modform.py` which was fixed in #4357.



---

archive/issue_comments_200991.json:
```json
{
    "body": "<a id='comment:42'></a>For info, I agree that we should output the first configure run on screen.\nSome users already complained that MPIR compilation was stuck because of the long time it can take on some systems and nothing was getting printed on screen.",
    "created_at": "2014-10-08T05:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200991",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:42'></a>For info, I agree that we should output the first configure run on screen.
Some users already complained that MPIR compilation was stuck because of the long time it can take on some systems and nothing was getting printed on screen.



---

archive/issue_comments_200992.json:
```json
{
    "body": "<a id='comment:43'></a>Works fine for me (except for numerical noise I also get with the previous MPIR, and that is surely ppc64 specific).\n\nWould you consider adding a spkg-src script?",
    "created_at": "2014-10-10T05:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200992",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:43'></a>Works fine for me (except for numerical noise I also get with the previous MPIR, and that is surely ppc64 specific).

Would you consider adding a spkg-src script?



---

archive/issue_comments_200993.json:
```json
{
    "body": "<a id='comment:44'></a>This works perfectly fine for me (though I did not test Cygwin, but that's a low level priority and can be fixed later in case it is needed).\n\nThe current tarball is the upstream one and includes windows stuff we used to delete.\nApart from that, I would positively review the ticket, even without a proper spkg-src script.",
    "created_at": "2014-10-16T09:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200993",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:44'></a>This works perfectly fine for me (though I did not test Cygwin, but that's a low level priority and can be fixed later in case it is needed).

The current tarball is the upstream one and includes windows stuff we used to delete.
Apart from that, I would positively review the ticket, even without a proper spkg-src script.



---

archive/issue_comments_200994.json:
```json
{
    "body": "<a id='comment:45'></a>Upstream has indicated that they consider the changed output of `mpz_gcdext()` a bug.\n\nTherefore, I think it is premature to upgrade now.",
    "created_at": "2014-10-16T09:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200994",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'></a>Upstream has indicated that they consider the changed output of `mpz_gcdext()` a bug.

Therefore, I think it is premature to upgrade now.



---

archive/issue_comments_200995.json:
```json
{
    "body": "<a id='comment:46'></a>Oh yeah, I read about that one...",
    "created_at": "2014-10-16T09:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200995",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:46'></a>Oh yeah, I read about that one...



---

archive/issue_comments_200996.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n+MPIR 2.6.0 does not build on Cygwin 64.\n+The next version should fix this problem (and others).\n+Patches from Sage will mostly be integrated.\n+\n+**upstream** (this is alpha12) at:\n+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n \n \n Upstream: Fixed upstream, but not in a stable release.\n```\n",
    "created_at": "2014-10-31T09:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200996",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,9 @@
+MPIR 2.6.0 does not build on Cygwin 64.
+The next version should fix this problem (and others).
+Patches from Sage will mostly be integrated.
+
+**upstream** (this is alpha12) at:
+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
 
 
 Upstream: Fixed upstream, but not in a stable release.
```




---

archive/issue_comments_200997.json:
```json
{
    "body": "<a id='comment:47'></a>Because of the precedent at #17169, I would simply use the upstream tarball and not add a `spkg-src` script.",
    "created_at": "2014-10-31T09:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200997",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'></a>Because of the precedent at #17169, I would simply use the upstream tarball and not add a `spkg-src` script.



---

archive/issue_comments_200998.json:
```json
{
    "body": "<a id='comment:48'></a>I don't really agree...\nIf we keep on like that Sage will grow huge.\nHard disks are cheap but internet connections aren't always, e.g. I get a poor bandwith between my office and boxen.\nLet's discuss this on sage-devel.",
    "created_at": "2014-10-31T09:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200998",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:48'></a>I don't really agree...
If we keep on like that Sage will grow huge.
Hard disks are cheap but internet connections aren't always, e.g. I get a poor bandwith between my office and boxen.
Let's discuss this on sage-devel.



---

archive/issue_comments_200999.json:
```json
{
    "body": "<a id='comment:49'></a>https://groups.google.com/forum/#!topic/sage-devel/a9yIdaqNHKU",
    "created_at": "2014-10-31T09:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-200999",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:49'></a>https://groups.google.com/forum/#!topic/sage-devel/a9yIdaqNHKU



---

archive/issue_comments_201000.json:
```json
{
    "body": "<a id='comment:50'></a>The gcdext change in MPIR was to be expected (at least the `gcdext(1,1)` example Jeroen found) and I personally don't think it's a bug.\nI'm not sure what Bill will think though.\n\nAt the very least it makes MPIR consistent with GMP.",
    "created_at": "2014-11-24T14:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201000",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:50'></a>The gcdext change in MPIR was to be expected (at least the `gcdext(1,1)` example Jeroen found) and I personally don't think it's a bug.
I'm not sure what Bill will think though.

At the very least it makes MPIR consistent with GMP.



---

archive/issue_comments_201001.json:
```json
{
    "body": "<a id='comment:51'></a>(And ok for not shipping any `spkg-src` script.)",
    "created_at": "2014-11-24T14:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201001",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:51'></a>(And ok for not shipping any `spkg-src` script.)



---

archive/issue_comments_201002.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2014-11-24T16:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201002",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_201003.json:
```json
{
    "body": "<a id='comment:53'></a>The only thing really annoying me right now is the name of the tarball.\nWhen we update to another alpha or the final version it will be a pain, so we should still repackage the upstream tarball to change the dir name wihtin it (rather than renaming the tarball).",
    "created_at": "2014-12-16T09:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201003",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:53'></a>The only thing really annoying me right now is the name of the tarball.
When we update to another alpha or the final version it will be a pain, so we should still repackage the upstream tarball to change the dir name wihtin it (rather than renaming the tarball).



---

archive/issue_comments_201004.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2014-12-23T16:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201004",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_201005.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+MPIR 2.6.0 does not build on Cygwin 64.\n+The next version should fix this problem (and others).\n+Patches from Sage will mostly be integrated.\n \n+**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)\n \n Upstream: Fixed upstream, but not in a stable release.\n \n```\n",
    "created_at": "2014-12-24T09:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201005",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,8 @@
+MPIR 2.6.0 does not build on Cygwin 64.
+The next version should fix this problem (and others).
+Patches from Sage will mostly be integrated.
 
+**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)
 
 Upstream: Fixed upstream, but not in a stable release.
 
```




---

archive/issue_comments_201006.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-24T09:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201006",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_043152.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15015#event-43152"
}
```



---

archive/issue_events_043153.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15015#event-43153"
}
```



---

archive/issue_comments_201007.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-24T09:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201007",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_201008.json:
```json
{
    "body": "<a id='comment:57'></a>New commits:",
    "created_at": "2014-12-24T09:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201008",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>New commits:



---

archive/issue_comments_201009.json:
```json
{
    "body": "<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-24T09:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_201010.json:
```json
{
    "body": "<a id='comment:60'></a>Looks fine.\n\nI had a vague souvenir we had trouble with dashes in version numbers but it does not seem to be the case anymore.\nMaybe we could also switch back to verbatim version numbers for Singular 4-0-1.",
    "created_at": "2014-12-24T10:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201010",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:60'></a>Looks fine.

I had a vague souvenir we had trouble with dashes in version numbers but it does not seem to be the case anymore.
Maybe we could also switch back to verbatim version numbers for Singular 4-0-1.



---

archive/issue_comments_201011.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-24T10:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201011",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_201012.json:
```json
{
    "body": "<a id='comment:61'></a>Got two files with failing doctests but cannot reproduce these failures:\n* `src/sage/modular/modform/ambient.py`\n* `src/sage/graphs/genus.pyx`",
    "created_at": "2014-12-24T11:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201012",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:61'></a>Got two files with failing doctests but cannot reproduce these failures:
* `src/sage/modular/modform/ambient.py`
* `src/sage/graphs/genus.pyx`



---

archive/issue_events_043154.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T15:46:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15015#event-43154"
}
```



---

archive/issue_comments_201013.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-02T15:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15015#issuecomment-201013",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
