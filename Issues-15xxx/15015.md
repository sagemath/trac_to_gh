# Issue 15015: Update to MPIR 2.7.0-alpha12

archive/issues_014778.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nMPIR 2.6.0 does not build on Cygwin 64.\nThe next version should fix this problem (and others).\nPatches from Sage will mostly be integrated.\n\n**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)\n\nUpstream: **Fixed upstream, but not in a stable release.**\n\nCC:  @kcrisman @dimpase @tscrim @williamstein\n\nComponent: **packages: standard**\n\nKeywords: **mpir spkg cygwin**\n\nAuthor: **Jean-Pierre Flori, Jeroen Demeyer**\n\nBranch/Commit: **[`d97c066`](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)**\n\nReviewer: **Jean-Pierre Flori**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15015_\n\n",
    "closed_at": "2015-01-02T15:46:28Z",
    "created_at": "2013-08-06T21:44:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update to MPIR 2.7.0-alpha12",
    "type": "issue",
    "updated_at": "2015-01-02T15:46:28Z",
    "url": "https://github.com/sagemath/sage/issues/15015",
    "user": "https://github.com/jpflori"
}
```
<div id="comment:0"></div>

MPIR 2.6.0 does not build on Cygwin 64.
The next version should fix this problem (and others).
Patches from Sage will mostly be integrated.

**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)

Upstream: **Fixed upstream, but not in a stable release.**

CC:  @kcrisman @dimpase @tscrim @williamstein

Component: **packages: standard**

Keywords: **mpir spkg cygwin**

Author: **Jean-Pierre Flori, Jeroen Demeyer**

Branch/Commit: **[`d97c066`](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)**

Reviewer: **Jean-Pierre Flori**

_Issue created by migration from https://trac.sagemath.org/ticket/15015_





---

archive/issue_events_211147.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-08-06T21:44:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211147"
}
```



---

archive/issue_events_211148.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-08-06T21:44:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211148"
}
```



---

archive/issue_events_211149.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-08-06T21:44:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211149"
}
```



---

archive/issue_events_211150.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-08-06T21:44:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211150"
}
```



---

archive/issue_events_211151.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-08-06T21:44:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "0000b0",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211151"
}
```



---

archive/issue_comments_184170.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis should surely be renamed to \"Update to MPIR 2.6.1\" when the official version get released (no idea when...).",
    "created_at": "2013-08-06T21:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184170",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:1" align="right">comment:1</div>

This should surely be renamed to "Update to MPIR 2.6.1" when the official version get released (no idea when...).



---

archive/issue_comments_184171.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,8 @@\n MPIR 2.6.0 does not build on Cygwin 64.\n The next version should fix this problem (and others).\n Patches from Sage will mostly be integrated.\n+When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.\n \n-Temporary dirty spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p3.spkg\n+Temporary spkg at:\n+* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg\n \n``````\n",
    "created_at": "2013-08-07T08:59:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184171",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,8 @@
 MPIR 2.6.0 does not build on Cygwin 64.
 The next version should fix this problem (and others).
 Patches from Sage will mostly be integrated.
+When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.
 
-Temporary dirty spkg at:
-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p3.spkg
+Temporary spkg at:
+* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg
 
``````




---

archive/issue_comments_184172.json:
```json
{
    "body": "Author: **Jean-Pierre Flori**",
    "created_at": "2013-08-07T08:59:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184172",
    "user": "https://github.com/jpflori"
}
```

Author: **Jean-Pierre Flori**



---

archive/issue_comments_184173.json:
```json
{
    "body": "Dependencies: **MPIR 2.6.1 upstream**",
    "created_at": "2013-08-07T09:55:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184173",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **MPIR 2.6.1 upstream**



---

archive/issue_comments_184174.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n MPIR 2.6.0 does not build on Cygwin 64.\n The next version should fix this problem (and others).\n Patches from Sage will mostly be integrated.\n-When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.\n+We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n Temporary spkg at:\n * http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg\n``````\n",
    "created_at": "2013-08-07T09:55:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184174",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 MPIR 2.6.0 does not build on Cygwin 64.
 The next version should fix this problem (and others).
 Patches from Sage will mostly be integrated.
-When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.
+We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
 Temporary spkg at:
 * http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg
``````




---

archive/issue_events_211152.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-07T09:55:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211152"
}
```



---

archive/issue_events_211153.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-07T09:55:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211153"
}
```



---

archive/issue_events_211154.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-07T09:55:10Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "title_is": "Update to MPIR 2.6.1 when it's released",
    "title_was": "Let MPIR >=2.6.0 build on Cygwin",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211154"
}
```



---

archive/issue_comments_184175.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFor the record, the current spkg built for me on cygwin64.",
    "created_at": "2013-08-10T19:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184175",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

For the record, the current spkg built for me on cygwin64.



---

archive/issue_comments_184176.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOn top of that the current MPIR 2.6.0 fails to properly build on Cygwin when CXX support is not enabled.\nTherefore it is not possible/easy to build GCC on Cygwin.\nThat is because of a dirty hack in the autotools stuff already present in GMP before MPIR was forked.\nThis is also fixed in the current git version.",
    "created_at": "2013-11-06T09:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184176",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:5" align="right">comment:5</div>

On top of that the current MPIR 2.6.0 fails to properly build on Cygwin when CXX support is not enabled.
Therefore it is not possible/easy to build GCC on Cygwin.
That is because of a dirty hack in the autotools stuff already present in GMP before MPIR was forked.
This is also fixed in the current git version.



---

archive/issue_events_211155.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2014-04-06T19:14:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "title_is": "Update to MPIR 2.7.0 when it's released",
    "title_was": "Update to MPIR 2.6.1 when it's released",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211155"
}
```



---

archive/issue_comments_184177.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOtherwise we'd probably have to close it as *won't fix*. :-)\n\nCurrent upstream tarball: http://mpir.org/mpir-2.7.0-alpha4.tar.bz2\n\n\nStill needs to be tested on Darwin PowerPC I think.  (moufang?  Does it still live?)\n\nAnd probably also Macs with more recent versions of Xcode.",
    "created_at": "2014-04-06T19:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184177",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:6" align="right">comment:6</div>

Otherwise we'd probably have to close it as *won't fix*. :-)

Current upstream tarball: http://mpir.org/mpir-2.7.0-alpha4.tar.bz2


Still needs to be tested on Darwin PowerPC I think.  (moufang?  Does it still live?)

And probably also Macs with more recent versions of Xcode.



---

archive/issue_comments_184178.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSo are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)",
    "created_at": "2014-04-09T18:02:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184178",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:7" align="right">comment:7</div>

So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)



---

archive/issue_comments_184179.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@kcrisman](#comment%3A7):\n> So are you saying that JP should make a tarball for this as an alpha?\n\nI think that would be convenient for testing, and there are still some issues on Cygwin* JP knows about.\n\nBy the way, note that the latest changes in the alpha4 tarball aren't yet committed on github (it's still at alpha3).",
    "created_at": "2014-04-09T18:19:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184179",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@kcrisman](#comment%3A7):
> So are you saying that JP should make a tarball for this as an alpha?

I think that would be convenient for testing, and there are still some issues on Cygwin* JP knows about.

By the way, note that the latest changes in the alpha4 tarball aren't yet committed on github (it's still at alpha3).



---

archive/issue_comments_184180.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@kcrisman](#comment%3A7):\n> So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)\n\nI happens I did and almost have an almost completely working out of the box cygwin64 branch.\nI just have to cherry-pick commits and push them to different branches on trac.",
    "created_at": "2014-04-09T21:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184180",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@kcrisman](#comment%3A7):
> So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)

I happens I did and almost have an almost completely working out of the box cygwin64 branch.
I just have to cherry-pick commits and push them to different branches on trac.



---

archive/issue_comments_184181.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThere are still issues with PPL...\nSee https://groups.google.com/forum/?fromgroups=#!topic/mpir-devel/JFDaMAc0YpY\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a564118a655d3af6730c103ba18ef6f7fb0cb397\"><code>a564118</code></a></td><td><code>Update MPIR to 2.7.0.alpha4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02\"><code>5d7a2e9</code></a></td><td><code>Remove unnecessary fix for MPIR.</code></td></tr></table>\n",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184181",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:10" align="right">comment:10</div>

There are still issues with PPL...
See https://groups.google.com/forum/?fromgroups=#!topic/mpir-devel/JFDaMAc0YpY

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a564118a655d3af6730c103ba18ef6f7fb0cb397"><code>a564118</code></a></td><td><code>Update MPIR to 2.7.0.alpha4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02"><code>5d7a2e9</code></a></td><td><code>Remove unnecessary fix for MPIR.</code></td></tr></table>




---

archive/issue_comments_184182.json:
```json
{
    "body": "Changed dependencies from **MPIR 2.6.1 upstream** to none",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184182",
    "user": "https://github.com/jpflori"
}
```

Changed dependencies from **MPIR 2.6.1 upstream** to none



---

archive/issue_comments_184183.json:
```json
{
    "body": "Commit: **[`5d7a2e9`](https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02)**",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184183",
    "user": "https://github.com/jpflori"
}
```

Commit: **[`5d7a2e9`](https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02)**



---

archive/issue_comments_184184.json:
```json
{
    "body": "Branch: **[u/jpflori/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15015)**",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184184",
    "user": "https://github.com/jpflori"
}
```

Branch: **[u/jpflori/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15015)**



---

archive/issue_comments_184185.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,5 @@\n We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n Temporary spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg\n+* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2\n \n``````\n",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184185",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,5 @@
 We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
 Temporary spkg at:
-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg
+* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2
 
``````




---

archive/issue_comments_184186.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nA few comments/questions:\n\n* Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)\n\n* Sun compiler patch (probably less important)?\n\n* What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)\n\n* In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.\n\n\n\n\nShould #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence \"needs info\".)",
    "created_at": "2014-04-14T00:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184186",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:11" align="right">comment:11</div>

A few comments/questions:

* Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)

* Sun compiler patch (probably less important)?

* What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)

* In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.




Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence "needs info".)



---

archive/issue_comments_184187.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.",
    "created_at": "2014-04-14T01:00:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184187",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>

I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.



---

archive/issue_comments_184188.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nexttime](#comment%3A11):\n> A few comments/questions:\n> \n\nAll (Most?) should be upstream now if I did not screw up a long time ago.\n> * Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)\n> \n\nMust admit I don't remember about that one.\n> * Sun compiler patch (probably less important)?\n\nThis one is in (IIRC).\n> \n> * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)\n\nWhen there is no patch at all I guess.\nNot sure naymore.\n> \n> * In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.\n\nMaybe!\n> \n> \n\n> \n> Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence \"needs info\".)\n\nThe CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).",
    "created_at": "2014-04-14T08:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184188",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nexttime](#comment%3A11):
> A few comments/questions:
> 

All (Most?) should be upstream now if I did not screw up a long time ago.
> * Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)
> 

Must admit I don't remember about that one.
> * Sun compiler patch (probably less important)?

This one is in (IIRC).
> 
> * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)

When there is no patch at all I guess.
Not sure naymore.
> 
> * In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.

Maybe!
> 
> 

> 
> Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence "needs info".)

The CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).



---

archive/issue_comments_184189.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nexttime](#comment%3A12):\n> I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.\n\nI don't now.\nWe surely added thing for apple ocmpiler/assembler/linker but couldn't promise it was AVX related.",
    "created_at": "2014-04-14T08:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184189",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nexttime](#comment%3A12):
> I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.

I don't now.
We surely added thing for apple ocmpiler/assembler/linker but couldn't promise it was AVX related.



---

archive/issue_comments_184190.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jpflori](#comment%3A13):\n> Replying to [@nexttime](#comment%3A11):\n> > Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence \"needs info\".)\n> \n> The CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).\n\nNo, a slightly different one (but with the same effect).  `AC_PROG_CXX` in MPIR is now correctly called after `CXXFLAGS` have been saved, and MPIR now behaves correctly (I'd say).  But Sage sets (and exports) `CXXFLAGS` to the empty string, so MPIR doesn't touch them (again assuming they were intentionally set), such that we end up with missing flags (unless the user had really set them, or `CFLAGS`, to something meaningful).",
    "created_at": "2014-04-14T08:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184190",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jpflori](#comment%3A13):
> Replying to [@nexttime](#comment%3A11):
> > Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence "needs info".)
> 
> The CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).

No, a slightly different one (but with the same effect).  `AC_PROG_CXX` in MPIR is now correctly called after `CXXFLAGS` have been saved, and MPIR now behaves correctly (I'd say).  But Sage sets (and exports) `CXXFLAGS` to the empty string, so MPIR doesn't touch them (again assuming they were intentionally set), such that we end up with missing flags (unless the user had really set them, or `CFLAGS`, to something meaningful).



---

archive/issue_comments_184191.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI see.\nThanks for the explanation.",
    "created_at": "2014-04-14T08:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184191",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:16" align="right">comment:16</div>

I see.
Thanks for the explanation.



---

archive/issue_comments_184192.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nP.S.:  In `spkg-install`, we could do (almost) the same with `CXXFLAGS` as we do with `CFLAGS`.  In the first \"dry\" `configure` run, we already unset them, so we could grep MPIR's from the Makefile and at least *prepend* those settings to our effective `CXXFLAGS` for the second, real `configure`run.\n\n(So far, we didn't touch `CXXFLAGS` at all, which I'd consider a small deficiency or inconsistency anyway.)",
    "created_at": "2014-04-14T08:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184192",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

P.S.:  In `spkg-install`, we could do (almost) the same with `CXXFLAGS` as we do with `CFLAGS`.  In the first "dry" `configure` run, we already unset them, so we could grep MPIR's from the Makefile and at least *prepend* those settings to our effective `CXXFLAGS` for the second, real `configure`run.

(So far, we didn't touch `CXXFLAGS` at all, which I'd consider a small deficiency or inconsistency anyway.)



---

archive/issue_comments_184193.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n[Slight correction to my previous post.]",
    "created_at": "2014-04-14T08:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184193",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

[Slight correction to my previous post.]



---

archive/issue_comments_184194.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jpflori](#comment%3A13):\n> > * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)\n> \n> When there is no patch at all I guess.\n\nAh, thought of something like that.  But it should be\n\n```sh\nfor foo in bar*; do\n    [ -r \"$foo\" ] || continue   # ignore non-readable / non-existent files\n    process \"$foo\"\n    if [ $? -ne 0 ]; then\n        # processing $foo failed, err out\n        ...\n    fi\ndone\n```",
    "created_at": "2014-04-14T08:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184194",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jpflori](#comment%3A13):
> > * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)
> 
> When there is no patch at all I guess.

Ah, thought of something like that.  But it should be

```sh
for foo in bar*; do
    [ -r "$foo" ] || continue   # ignore non-readable / non-existent files
    process "$foo"
    if [ $? -ne 0 ]; then
        # processing $foo failed, err out
        ...
    fi
done
```



---

archive/issue_comments_184195.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nSure, I messed up :(",
    "created_at": "2014-04-14T09:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184195",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:20" align="right">comment:20</div>

Sure, I messed up :(



---

archive/issue_comments_184196.json:
```json
{
    "body": "Changed commit from **[`5d7a2e9`](https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02)** to **[`da483e1`](https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca)**",
    "created_at": "2014-04-14T10:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184196",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5d7a2e9`](https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02)** to **[`da483e1`](https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca)**



---

archive/issue_comments_184197.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/113a8dde7efaf52d797710c079377f0a9fdf989a\"><code>113a8dd</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15015</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca\"><code>da483e1</code></a></td><td><code>Correct MPIR spkg-install scripts for non-exisiting patches.</code></td></tr></table>\n",
    "created_at": "2014-04-14T10:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184197",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/113a8dde7efaf52d797710c079377f0a9fdf989a"><code>113a8dd</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15015</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca"><code>da483e1</code></a></td><td><code>Correct MPIR spkg-install scripts for non-exisiting patches.</code></td></tr></table>




---

archive/issue_comments_184198.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAll patches from Sage seem to be integrated upstream, good! The changes here look fine, the main part of reviewing will be checking that it actually works. I will upgrade this to the latest MPIR alpha and report back.",
    "created_at": "2014-08-28T10:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184198",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

All patches from Sage seem to be integrated upstream, good! The changes here look fine, the main part of reviewing will be checking that it actually works. I will upgrade this to the latest MPIR alpha and report back.



---

archive/issue_comments_184199.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,6 @@\n Patches from Sage will mostly be integrated.\n We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n-Temporary spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2\n+**upstream** (this is alpha10) at:\n+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n \n``````\n",
    "created_at": "2014-08-28T10:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184199",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,6 @@
 Patches from Sage will mostly be integrated.
 We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
-Temporary spkg at:
-* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2
+**upstream** (this is alpha10) at:
+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
 
``````




---

archive/issue_comments_184200.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI'm not sure the problem with ppl is fixed in the latest alpha...\nSome hints to fix it must lurk on flint-devel.",
    "created_at": "2014-08-28T10:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184200",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:24" align="right">comment:24</div>

I'm not sure the problem with ppl is fixed in the latest alpha...
Some hints to fix it must lurk on flint-devel.



---

archive/issue_comments_184201.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nSee https://groups.google.com/d/msg/mpir-devel/JFDaMAc0YpY/h774pq9wN2EJ\nAnd IIRC it does not only happens on Cygwin(64) but also on more usual systems.",
    "created_at": "2014-08-28T10:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184201",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:25" align="right">comment:25</div>

See https://groups.google.com/d/msg/mpir-devel/JFDaMAc0YpY/h774pq9wN2EJ
And IIRC it does not only happens on Cygwin(64) but also on more usual systems.



---

archive/issue_comments_184202.json:
```json
{
    "body": "Changed branch from **[u/jpflori/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15015)** to **[u/jdemeyer/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/15015)**",
    "created_at": "2014-08-28T10:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184202",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jpflori/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15015)** to **[u/jdemeyer/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/15015)**



---

archive/issue_comments_184203.json:
```json
{
    "body": "Changed commit from **[`da483e1`](https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca)** to **[`7725122`](https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670)**",
    "created_at": "2014-08-28T10:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184203",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`da483e1`](https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca)** to **[`7725122`](https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670)**



---

archive/issue_comments_184204.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nIn `spkg-install`, I also changed\n\n```\necho \"Checking what CFLAGS MPIR would use if they were empty...\"\n(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE) &>configure-empty.log\n```\nto\n\n```\necho \"Configuring MPIR with empty CFLAGS to determine the defaults:\"\n(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE)\n```\n\nI think it's better to display the first `configure` run, in case it needs to be debugged or just to show the user that Sage isn't stuck.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1607b8ffe6443c5152ba8e505ca6686e46122049\"><code>1607b8f</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670\"><code>7725122</code></a></td><td><code>Cosmetic changes</code></td></tr></table>\n",
    "created_at": "2014-08-28T10:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184204",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

In `spkg-install`, I also changed

```
echo "Checking what CFLAGS MPIR would use if they were empty..."
(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE) &>configure-empty.log
```
to

```
echo "Configuring MPIR with empty CFLAGS to determine the defaults:"
(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE)
```

I think it's better to display the first `configure` run, in case it needs to be debugged or just to show the user that Sage isn't stuck.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1607b8ffe6443c5152ba8e505ca6686e46122049"><code>1607b8f</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670"><code>7725122</code></a></td><td><code>Cosmetic changes</code></td></tr></table>




---

archive/issue_comments_184205.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOn Linux x86_64, g++ (Gentoo 4.6.4 p1.2, pie-0.5.2) 4.6.4, while compiling the Sage library:\n\n```\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/csage -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c build/cythonized/sage/libs/ppl.cpp -o build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/ppl.o -fno-strict-aliasing -w\nIn file included from build/cythonized/sage/libs/ppl.cpp:352:0:\n../local/include/gmpxx.h:1548:3: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1539:3: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long int)\u2019\n../local/include/gmpxx.h:1552:3: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1540:3: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long unsigned int)\u2019\n../local/include/gmpxx.h:1615:16: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1604:16: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long int)\u2019\n../local/include/gmpxx.h:1619:16: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1606:16: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long unsigned int)\u2019\nerror: command 'gcc' failed with exit status 1\n```",
    "created_at": "2014-08-28T12:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184205",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

On Linux x86_64, g++ (Gentoo 4.6.4 p1.2, pie-0.5.2) 4.6.4, while compiling the Sage library:

```
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/csage -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c build/cythonized/sage/libs/ppl.cpp -o build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/ppl.o -fno-strict-aliasing -w
In file included from build/cythonized/sage/libs/ppl.cpp:352:0:
../local/include/gmpxx.h:1548:3: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1539:3: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long int)’
../local/include/gmpxx.h:1552:3: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1540:3: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long unsigned int)’
../local/include/gmpxx.h:1615:16: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1604:16: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long int)’
../local/include/gmpxx.h:1619:16: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1606:16: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long unsigned int)’
error: command 'gcc' failed with exit status 1
```



---

archive/issue_comments_184206.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYup that is the problem I was mentioning.",
    "created_at": "2014-08-28T12:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184206",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:29" align="right">comment:29</div>

Yup that is the problem I was mentioning.



---

archive/issue_comments_184207.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nCould you try with the attached patch?\nIf it works, I'll forward it to Bill.",
    "created_at": "2014-09-04T11:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184207",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:30" align="right">comment:30</div>

Could you try with the attached patch?
If it works, I'll forward it to Bill.



---

archive/issue_comments_184208.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAttachment: **[mpirxx.2.patch.gz](https://github.com/sagemath/sage/files/ticket15015/mpirxx.2.patch.gz)**\n\nGroumpf, thepatch is reversed.\nTake the .2 one.",
    "created_at": "2014-09-04T11:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184208",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:31" align="right">comment:31</div>

Attachment: **[mpirxx.2.patch.gz](https://github.com/sagemath/sage/files/ticket15015/mpirxx.2.patch.gz)**

Groumpf, thepatch is reversed.
Take the .2 one.



---

archive/issue_comments_184209.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nStrange I don't have problems, even without my latest patch, on a machine where I seem to remember I used to have problems.",
    "created_at": "2014-09-04T13:11:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184209",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:32" align="right">comment:32</div>

Strange I don't have problems, even without my latest patch, on a machine where I seem to remember I used to have problems.



---

archive/issue_comments_184210.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nWorks for me...",
    "created_at": "2014-09-04T20:12:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184210",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

Works for me...



---

archive/issue_comments_184211.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nIn fact I also need the patch, but not to build PPL anymore, but some ppl related file within the Sage library.",
    "created_at": "2014-09-05T14:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184211",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:34" align="right">comment:34</div>

In fact I also need the patch, but not to build PPL anymore, but some ppl related file within the Sage library.



---

archive/issue_comments_184212.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,6 @@\n Patches from Sage will mostly be integrated.\n We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n-**upstream** (this is alpha10) at:\n+**upstream** (this is alpha12) at:\n * [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n \n``````\n",
    "created_at": "2014-10-01T14:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184212",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,6 @@
 Patches from Sage will mostly be integrated.
 We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
-**upstream** (this is alpha10) at:
+**upstream** (this is alpha12) at:
 * [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
 
``````




---

archive/issue_comments_184213.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6957f17465f02f7a0f8c3ae9766a25cba42a4da8\"><code>6957f17</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f\"><code>aca71cb</code></a></td><td><code>Upgrade to mpir-2.7.0-alpha12</code></td></tr></table>\n",
    "created_at": "2014-10-01T14:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184213",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6957f17465f02f7a0f8c3ae9766a25cba42a4da8"><code>6957f17</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f"><code>aca71cb</code></a></td><td><code>Upgrade to mpir-2.7.0-alpha12</code></td></tr></table>




---

archive/issue_comments_184214.json:
```json
{
    "body": "Changed commit from **[`7725122`](https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670)** to **[`aca71cb`](https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f)**",
    "created_at": "2014-10-01T14:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184214",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7725122`](https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670)** to **[`aca71cb`](https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f)**



---

archive/issue_comments_184215.json:
```json
{
    "body": "Changed commit from **[`aca71cb`](https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f)** to **[`67babeb`](https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6)**",
    "created_at": "2014-10-01T18:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184215",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aca71cb`](https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f)** to **[`67babeb`](https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6)**



---

archive/issue_comments_184216.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6\"><code>67babeb</code></a></td><td><code>Fix doctests due to changed xgcd results</code></td></tr></table>\n",
    "created_at": "2014-10-01T18:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184216",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6"><code>67babeb</code></a></td><td><code>Fix doctests due to changed xgcd results</code></td></tr></table>




---

archive/issue_comments_184217.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThis now builds and passes all doctests on 64-bit for me.\n\nTest please!",
    "created_at": "2014-10-01T18:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184217",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

This now builds and passes all doctests on 64-bit for me.

Test please!



---

archive/issue_comments_184218.json:
```json
{
    "body": "Changed author from **Jean-Pierre Flori** to **Jean-Pierre Flori, Jeroen Demeyer**",
    "created_at": "2014-10-01T18:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184218",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Jean-Pierre Flori** to **Jean-Pierre Flori, Jeroen Demeyer**



---

archive/issue_comments_184219.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nWilliam: this changes one doctest in `src/sage/tests/book_stein_modform.py`",
    "created_at": "2014-10-01T18:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184219",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

William: this changes one doctest in `src/sage/tests/book_stein_modform.py`



---

archive/issue_comments_184220.json:
```json
{
    "body": "Changed commit from **[`67babeb`](https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6)** to **[`8c7fbbd`](https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd)**",
    "created_at": "2014-10-01T18:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184220",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`67babeb`](https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6)** to **[`8c7fbbd`](https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd)**



---

archive/issue_comments_184221.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd\"><code>8c7fbbd</code></a></td><td><code>Re-enable \"not tested\" test from #4357</code></td></tr></table>\n",
    "created_at": "2014-10-01T18:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184221",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd"><code>8c7fbbd</code></a></td><td><code>Re-enable "not tested" test from #4357</code></td></tr></table>




---

archive/issue_comments_184222.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nUnrelated to this ticket, I have re-enabled a doctest in `book_stein_modform.py` which was fixed in #4357.",
    "created_at": "2014-10-01T18:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184222",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

Unrelated to this ticket, I have re-enabled a doctest in `book_stein_modform.py` which was fixed in #4357.



---

archive/issue_comments_184223.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nFor info, I agree that we should output the first configure run on screen.\nSome users already complained that MPIR compilation was stuck because of the long time it can take on some systems and nothing was getting printed on screen.",
    "created_at": "2014-10-08T05:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184223",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:42" align="right">comment:42</div>

For info, I agree that we should output the first configure run on screen.
Some users already complained that MPIR compilation was stuck because of the long time it can take on some systems and nothing was getting printed on screen.



---

archive/issue_comments_184224.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nWorks fine for me (except for numerical noise I also get with the previous MPIR, and that is surely ppc64 specific).\n\nWould you consider adding a spkg-src script?",
    "created_at": "2014-10-10T05:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184224",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:43" align="right">comment:43</div>

Works fine for me (except for numerical noise I also get with the previous MPIR, and that is surely ppc64 specific).

Would you consider adding a spkg-src script?



---

archive/issue_comments_184225.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThis works perfectly fine for me (though I did not test Cygwin, but that's a low level priority and can be fixed later in case it is needed).\n\nThe current tarball is the upstream one and includes windows stuff we used to delete.\nApart from that, I would positively review the ticket, even without a proper spkg-src script.",
    "created_at": "2014-10-16T09:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184225",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:44" align="right">comment:44</div>

This works perfectly fine for me (though I did not test Cygwin, but that's a low level priority and can be fixed later in case it is needed).

The current tarball is the upstream one and includes windows stuff we used to delete.
Apart from that, I would positively review the ticket, even without a proper spkg-src script.



---

archive/issue_events_211156.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-10-16T09:05:15Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "title_is": "Update to MPIR 2.7.0.alpha12",
    "title_was": "Update to MPIR 2.7.0 when it's released",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211156"
}
```



---

archive/issue_comments_184226.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori**",
    "created_at": "2014-10-16T09:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184226",
    "user": "https://github.com/jpflori"
}
```

Reviewer: **Jean-Pierre Flori**



---

archive/issue_comments_184227.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nUpstream has indicated that they consider the changed output of `mpz_gcdext()` a bug.\n\nTherefore, I think it is premature to upgrade now.",
    "created_at": "2014-10-16T09:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184227",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

Upstream has indicated that they consider the changed output of `mpz_gcdext()` a bug.

Therefore, I think it is premature to upgrade now.



---

archive/issue_events_211157.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T09:09:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "title_is": "Update to MPIR 2.7.0 when it's released",
    "title_was": "Update to MPIR 2.7.0.alpha12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211157"
}
```



---

archive/issue_comments_184228.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nOh yeah, I read about that one...",
    "created_at": "2014-10-16T09:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184228",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:46" align="right">comment:46</div>

Oh yeah, I read about that one...



---

archive/issue_comments_184229.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n MPIR 2.6.0 does not build on Cygwin 64.\n The next version should fix this problem (and others).\n Patches from Sage will mostly be integrated.\n-We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n **upstream** (this is alpha12) at:\n * [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n``````\n",
    "created_at": "2014-10-31T09:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184229",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
 MPIR 2.6.0 does not build on Cygwin 64.
 The next version should fix this problem (and others).
 Patches from Sage will mostly be integrated.
-We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
 **upstream** (this is alpha12) at:
 * [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
``````




---

archive/issue_comments_184230.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nBecause of the precedent at #17169, I would simply use the upstream tarball and not add a `spkg-src` script.",
    "created_at": "2014-10-31T09:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184230",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

Because of the precedent at #17169, I would simply use the upstream tarball and not add a `spkg-src` script.



---

archive/issue_comments_184231.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI don't really agree...\nIf we keep on like that Sage will grow huge.\nHard disks are cheap but internet connections aren't always, e.g. I get a poor bandwith between my office and boxen.\nLet's discuss this on sage-devel.",
    "created_at": "2014-10-31T09:49:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184231",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:48" align="right">comment:48</div>

I don't really agree...
If we keep on like that Sage will grow huge.
Hard disks are cheap but internet connections aren't always, e.g. I get a poor bandwith between my office and boxen.
Let's discuss this on sage-devel.



---

archive/issue_comments_184232.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nhttps://groups.google.com/forum/#!topic/sage-devel/a9yIdaqNHKU",
    "created_at": "2014-10-31T09:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184232",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:49" align="right">comment:49</div>

https://groups.google.com/forum/#!topic/sage-devel/a9yIdaqNHKU



---

archive/issue_comments_184233.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nThe gcdext change in MPIR was to be expected (at least the `gcdext(1,1)` example Jeroen found) and I personally don't think it's a bug.\nI'm not sure what Bill will think though.\n\nAt the very least it makes MPIR consistent with GMP.",
    "created_at": "2014-11-24T14:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184233",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:50" align="right">comment:50</div>

The gcdext change in MPIR was to be expected (at least the `gcdext(1,1)` example Jeroen found) and I personally don't think it's a bug.
I'm not sure what Bill will think though.

At the very least it makes MPIR consistent with GMP.



---

archive/issue_comments_184234.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\n(And ok for not shipping any `spkg-src` script.)",
    "created_at": "2014-11-24T14:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184234",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:51" align="right">comment:51</div>

(And ok for not shipping any `spkg-src` script.)



---

archive/issue_events_211158.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-24T16:15:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211158"
}
```



---

archive/issue_comments_184235.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThe only thing really annoying me right now is the name of the tarball.\nWhen we update to another alpha or the final version it will be a pain, so we should still repackage the upstream tarball to change the dir name wihtin it (rather than renaming the tarball).",
    "created_at": "2014-12-16T09:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184235",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:53" align="right">comment:53</div>

The only thing really annoying me right now is the name of the tarball.
When we update to another alpha or the final version it will be a pain, so we should still repackage the upstream tarball to change the dir name wihtin it (rather than renaming the tarball).



---

archive/issue_comments_184236.json:
```json
{
    "body": "Work Issues: **fix tarball name issue**",
    "created_at": "2014-12-23T16:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184236",
    "user": "https://github.com/jpflori"
}
```

Work Issues: **fix tarball name issue**



---

archive/issue_events_211159.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-12-23T16:47:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211159"
}
```



---

archive/issue_events_211160.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-12-23T16:47:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211160"
}
```



---

archive/issue_comments_184237.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,4 @@\n The next version should fix this problem (and others).\n Patches from Sage will mostly be integrated.\n \n-**upstream** (this is alpha12) at:\n-* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n-\n+**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)\n``````\n",
    "created_at": "2014-12-24T09:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184237",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,4 @@
 The next version should fix this problem (and others).
 Patches from Sage will mostly be integrated.
 
-**upstream** (this is alpha12) at:
-* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
-
+**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)
``````




---

archive/issue_comments_184238.json:
```json
{
    "body": "Changed work issues from **fix tarball name issue** to none",
    "created_at": "2014-12-24T09:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184238",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **fix tarball name issue** to none



---

archive/issue_events_211161.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211161"
}
```



---

archive/issue_events_211162.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211162"
}
```



---

archive/issue_events_211163.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211163"
}
```



---

archive/issue_events_211164.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211164"
}
```



---

archive/issue_comments_184239.json:
```json
{
    "body": "Changed commit from **[`8c7fbbd`](https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd)** to **[`aefe0eb`](https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70)**",
    "created_at": "2014-12-24T09:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184239",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8c7fbbd`](https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd)** to **[`aefe0eb`](https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70)**



---

archive/issue_comments_184240.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70\"><code>aefe0eb</code></a></td><td><code>Upgrade to MPIR 2.7.0-alpha12</code></td></tr></table>\n",
    "created_at": "2014-12-24T09:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184240",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70"><code>aefe0eb</code></a></td><td><code>Upgrade to MPIR 2.7.0-alpha12</code></td></tr></table>




---

archive/issue_comments_184241.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70\"><code>aefe0eb</code></a></td><td><code>Upgrade to MPIR 2.7.0-alpha12</code></td></tr></table>\n",
    "created_at": "2014-12-24T09:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184241",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70"><code>aefe0eb</code></a></td><td><code>Upgrade to MPIR 2.7.0-alpha12</code></td></tr></table>




---

archive/issue_events_211165.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:23:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "title_is": "Update to MPIR 2.7.0-alpha12",
    "title_was": "Update to MPIR 2.7.0 when it's released",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211165"
}
```



---

archive/issue_comments_184242.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d583af0d6e79d9e8a1df2fc4235e84528b389cd\"><code>3d583af</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c\"><code>d97c066</code></a></td><td><code>Rename source directory</code></td></tr></table>\n",
    "created_at": "2014-12-24T09:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184242",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d583af0d6e79d9e8a1df2fc4235e84528b389cd"><code>3d583af</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c"><code>d97c066</code></a></td><td><code>Rename source directory</code></td></tr></table>




---

archive/issue_comments_184243.json:
```json
{
    "body": "Changed commit from **[`aefe0eb`](https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70)** to **[`d97c066`](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)**",
    "created_at": "2014-12-24T09:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184243",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aefe0eb`](https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70)** to **[`d97c066`](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)**



---

archive/issue_comments_184244.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nLooks fine.\n\nI had a vague souvenir we had trouble with dashes in version numbers but it does not seem to be the case anymore.\nMaybe we could also switch back to verbatim version numbers for Singular 4-0-1.",
    "created_at": "2014-12-24T10:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184244",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:60" align="right">comment:60</div>

Looks fine.

I had a vague souvenir we had trouble with dashes in version numbers but it does not seem to be the case anymore.
Maybe we could also switch back to verbatim version numbers for Singular 4-0-1.



---

archive/issue_events_211166.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-12-24T10:50:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211166"
}
```



---

archive/issue_events_211167.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-12-24T10:50:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211167"
}
```



---

archive/issue_comments_184245.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nGot two files with failing doctests but cannot reproduce these failures:\n* `src/sage/modular/modform/ambient.py`\n* `src/sage/graphs/genus.pyx`",
    "created_at": "2014-12-24T11:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184245",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:61" align="right">comment:61</div>

Got two files with failing doctests but cannot reproduce these failures:
* `src/sage/modular/modform/ambient.py`
* `src/sage/graphs/genus.pyx`



---

archive/issue_events_211168.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T15:46:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211168"
}
```



---

archive/issue_events_211169.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2dfc6a056b2f47faeedcc0a1a2560475c2001d9f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-01-02T15:46:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-211169"
}
```



---

archive/issue_comments_184246.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/15015)** to **[`d97c066`](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)**",
    "created_at": "2015-01-02T15:46:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-184246",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/15015)** to **[`d97c066`](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)**
