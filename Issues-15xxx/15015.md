# Issue 15015: Update to MPIR 2.7.0-alpha12

archive/issues_014778.json:
```json
{
    "assignees": [],
    "body": "MPIR 2.6.0 does not build on Cygwin 64.\nThe next version should fix this problem (and others).\nPatches from Sage will mostly be integrated.\n\n**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)\n\n**CC:**  @kcrisman @dimpase @tscrim @williamstein\n\n**Keywords:** mpir spkg cygwin\n\n**Branch/Commit:** [d97c06604293f765fd0c8de6189d05cedcebea3c](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)\n\n**Upstream:** Fixed upstream, but not in a stable release.\n\n**Reviewer:** Jean-Pierre Flori\n\n**Author:** Jean-Pierre Flori, Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/15015\n\n",
    "closed_at": "2015-01-02T15:46:28Z",
    "created_at": "2013-08-06T21:44:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update to MPIR 2.7.0-alpha12",
    "type": "issue",
    "updated_at": "2015-01-02T15:46:28Z",
    "url": "https://github.com/sagemath/sage/issues/15015",
    "user": "https://github.com/sagetrac-jpflori"
}
```
MPIR 2.6.0 does not build on Cygwin 64.
The next version should fix this problem (and others).
Patches from Sage will mostly be integrated.

**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)

**CC:**  @kcrisman @dimpase @tscrim @williamstein

**Keywords:** mpir spkg cygwin

**Branch/Commit:** [d97c06604293f765fd0c8de6189d05cedcebea3c](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)

**Upstream:** Fixed upstream, but not in a stable release.

**Reviewer:** Jean-Pierre Flori

**Author:** Jean-Pierre Flori, Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/15015





---

archive/issue_comments_186615.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis should surely be renamed to \"Update to MPIR 2.6.1\" when the official version get released (no idea when...).",
    "created_at": "2013-08-06T21:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186615",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:1'></a>
This should surely be renamed to "Update to MPIR 2.6.1" when the official version get released (no idea when...).



---

archive/issue_comments_186616.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,8 @@\n MPIR 2.6.0 does not build on Cygwin 64.\n The next version should fix this problem (and others).\n Patches from Sage will mostly be integrated.\n+When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.\n \n-Temporary dirty spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p3.spkg\n+Temporary spkg at:\n+* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg\n \n``````\n",
    "created_at": "2013-08-07T08:59:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186616",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,8 @@
 MPIR 2.6.0 does not build on Cygwin 64.
 The next version should fix this problem (and others).
 Patches from Sage will mostly be integrated.
+When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.
 
-Temporary dirty spkg at:
-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p3.spkg
+Temporary spkg at:
+* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg
 
``````




---

archive/issue_comments_186617.json:
```json
{
    "body": "**Author:** Jean-Pierre Flori",
    "created_at": "2013-08-07T08:59:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186617",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Author:** Jean-Pierre Flori



---

archive/issue_comments_186618.json:
```json
{
    "body": "**Dependencies:** MPIR 2.6.1 upstream",
    "created_at": "2013-08-07T09:55:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186618",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** MPIR 2.6.1 upstream



---

archive/issue_comments_186619.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n MPIR 2.6.0 does not build on Cygwin 64.\n The next version should fix this problem (and others).\n Patches from Sage will mostly be integrated.\n-When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.\n+We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n Temporary spkg at:\n * http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg\n``````\n",
    "created_at": "2013-08-07T09:55:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186619",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 MPIR 2.6.0 does not build on Cygwin 64.
 The next version should fix this problem (and others).
 Patches from Sage will mostly be integrated.
-When MPIR 2.6.1? is released, we shoudl also surely add a spkg-src script which automatically purges the spkg from all the Windows stuff.
+We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
 Temporary spkg at:
 * http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg
``````




---

archive/issue_events_131503.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-07T09:55:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131503"
}
```



---

archive/issue_events_131504.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-07T09:55:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131504"
}
```



---

archive/issue_events_131505.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-07T09:55:10Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "rename": {
        "from": "Let MPIR >=2.6.0 build on Cygwin",
        "to": "Update to MPIR 2.6.1 when it's released"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131505"
}
```



---

archive/issue_comments_186620.json:
```json
{
    "body": "<a id='comment:4'></a>\nFor the record, the current spkg built for me on cygwin64.",
    "created_at": "2013-08-10T19:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186620",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
For the record, the current spkg built for me on cygwin64.



---

archive/issue_comments_186621.json:
```json
{
    "body": "<a id='comment:5'></a>\nOn top of that the current MPIR 2.6.0 fails to properly build on Cygwin when CXX support is not enabled.\nTherefore it is not possible/easy to build GCC on Cygwin.\nThat is because of a dirty hack in the autotools stuff already present in GMP before MPIR was forked.\nThis is also fixed in the current git version.",
    "created_at": "2013-11-06T09:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186621",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:5'></a>
On top of that the current MPIR 2.6.0 fails to properly build on Cygwin when CXX support is not enabled.
Therefore it is not possible/easy to build GCC on Cygwin.
That is because of a dirty hack in the autotools stuff already present in GMP before MPIR was forked.
This is also fixed in the current git version.



---

archive/issue_events_131506.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2014-04-06T19:14:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "rename": {
        "from": "Update to MPIR 2.6.1 when it's released",
        "to": "Update to MPIR 2.7.0 when it's released"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131506"
}
```



---

archive/issue_comments_186622.json:
```json
{
    "body": "<a id='comment:6'></a>\nOtherwise we'd probably have to close it as *won't fix*. :-)\n\nCurrent upstream tarball: http://mpir.org/mpir-2.7.0-alpha4.tar.bz2\n\n\nStill needs to be tested on Darwin PowerPC I think.  (moufang?  Does it still live?)\n\nAnd probably also Macs with more recent versions of Xcode.",
    "created_at": "2014-04-06T19:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186622",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:6'></a>
Otherwise we'd probably have to close it as *won't fix*. :-)

Current upstream tarball: http://mpir.org/mpir-2.7.0-alpha4.tar.bz2


Still needs to be tested on Darwin PowerPC I think.  (moufang?  Does it still live?)

And probably also Macs with more recent versions of Xcode.



---

archive/issue_comments_186623.json:
```json
{
    "body": "<a id='comment:7'></a>\nSo are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)",
    "created_at": "2014-04-09T18:02:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186623",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>
So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)



---

archive/issue_comments_186624.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [@kcrisman](#comment%3A7):\n> So are you saying that JP should make a tarball for this as an alpha?\n\nI think that would be convenient for testing, and there are still some issues on Cygwin* JP knows about.\n\nBy the way, note that the latest changes in the alpha4 tarball aren't yet committed on github (it's still at alpha3).",
    "created_at": "2014-04-09T18:19:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186624",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
Replying to [@kcrisman](#comment%3A7):
> So are you saying that JP should make a tarball for this as an alpha?

I think that would be convenient for testing, and there are still some issues on Cygwin* JP knows about.

By the way, note that the latest changes in the alpha4 tarball aren't yet committed on github (it's still at alpha3).



---

archive/issue_comments_186625.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [@kcrisman](#comment%3A7):\n> So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)\n\nI happens I did and almost have an almost completely working out of the box cygwin64 branch.\nI just have to cherry-pick commits and push them to different branches on trac.",
    "created_at": "2014-04-09T21:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186625",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:9'></a>
Replying to [@kcrisman](#comment%3A7):
> So are you saying that JP should make a tarball for this as an alpha?  I don't have time to test this on PPC until that exists.  Currently trying to built 6.2.beta7, I'll wait until I get a clean build for that platform before I try new things.  (Hopefully rpy is the only remaining problem there.)

I happens I did and almost have an almost completely working out of the box cygwin64 branch.
I just have to cherry-pick commits and push them to different branches on trac.



---

archive/issue_comments_186626.json:
```json
{
    "body": "<a id='comment:10'></a>\nThere are still issues with PPL...\nSee https://groups.google.com/forum/?fromgroups=#!topic/mpir-devel/JFDaMAc0YpY\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a564118a655d3af6730c103ba18ef6f7fb0cb397\">a564118</a></td><td><code>Update MPIR to 2.7.0.alpha4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02\">5d7a2e9</a></td><td><code>Remove unnecessary fix for MPIR.</code></td></tr></table>\n",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186626",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:10'></a>
There are still issues with PPL...
See https://groups.google.com/forum/?fromgroups=#!topic/mpir-devel/JFDaMAc0YpY

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a564118a655d3af6730c103ba18ef6f7fb0cb397">a564118</a></td><td><code>Update MPIR to 2.7.0.alpha4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02">5d7a2e9</a></td><td><code>Remove unnecessary fix for MPIR.</code></td></tr></table>




---

archive/issue_comments_186627.json:
```json
{
    "body": "**Changing dependencies** from \"MPIR 2.6.1 upstream\" to \"\".",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186627",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Changing dependencies** from "MPIR 2.6.1 upstream" to "".



---

archive/issue_comments_186628.json:
```json
{
    "body": "**Commit:** [5d7a2e99278f657b5d17f527d3d8f1c38e125a02](https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02)",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186628",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Commit:** [5d7a2e99278f657b5d17f527d3d8f1c38e125a02](https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02)



---

archive/issue_comments_186629.json:
```json
{
    "body": "**Branch:** [u/jpflori/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15015)",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186629",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Branch:** [u/jpflori/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15015)



---

archive/issue_comments_186630.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,5 +4,5 @@\n We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n Temporary spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg\n+* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2\n \n``````\n",
    "created_at": "2014-04-13T19:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186630",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,5 +4,5 @@
 We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
 Temporary spkg at:
-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.1.spkg
+* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2
 
``````




---

archive/issue_comments_186631.json:
```json
{
    "body": "<a id='comment:11'></a>\nA few comments/questions:\n\n* Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)\n\n* Sun compiler patch (probably less important)?\n\n* What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)\n\n* In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.\n\n\n\n\nShould #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence \"needs info\".)",
    "created_at": "2014-04-14T00:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186631",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'></a>
A few comments/questions:

* Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)

* Sun compiler patch (probably less important)?

* What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)

* In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.




Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence "needs info".)



---

archive/issue_comments_186632.json:
```json
{
    "body": "<a id='comment:12'></a>\nI recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.",
    "created_at": "2014-04-14T01:00:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186632",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:12'></a>
I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.



---

archive/issue_comments_186633.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@nexttime](#comment%3A11):\n> A few comments/questions:\n> \n\nAll (Most?) should be upstream now if I did not screw up a long time ago.\n> * Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)\n> \n\nMust admit I don't remember about that one.\n> * Sun compiler patch (probably less important)?\n\nThis one is in (IIRC).\n> \n> * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)\n\nWhen there is no patch at all I guess.\nNot sure naymore.\n> \n> * In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.\n\nMaybe!\n> \n> \n\n> \n> Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence \"needs info\".)\n\nThe CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).",
    "created_at": "2014-04-14T08:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186633",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:13'></a>
Replying to [@nexttime](#comment%3A11):
> A few comments/questions:
> 

All (Most?) should be upstream now if I did not screw up a long time ago.
> * Do we lose the Clang / XCode 5 patch?  (I did have other `clang` patches elsewhere, also just preventing `configure` to fail for no real reason.)
> 

Must admit I don't remember about that one.
> * Sun compiler patch (probably less important)?

This one is in (IIRC).
> 
> * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)

When there is no patch at all I guess.
Not sure naymore.
> 
> * In `if uname -a | grep x86_64; then ...` any output (`stdout` and `stderr`) should get redirected to `/dev/null`.

Maybe!
> 
> 

> 
> Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence "needs info".)

The CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).



---

archive/issue_comments_186634.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@nexttime](#comment%3A12):\n> I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.\n\nI don't now.\nWe surely added thing for apple ocmpiler/assembler/linker but couldn't promise it was AVX related.",
    "created_at": "2014-04-14T08:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186634",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:14'></a>
Replying to [@nexttime](#comment%3A12):
> I recall we also had issues with AVX-enabled CPUs on Darwin and (not *that*) old Apple assemblers not supporting AVX instructions.  IIRC Jeroen removed a work-around (with a bunch of other things dealing with proper `CFLAGS`) from `spkg-install` a while ago, so this is presumably no longer an issue (just because we meanwhile require some more recent version of Xcode I guess), but I might be wrong.

I don't now.
We surely added thing for apple ocmpiler/assembler/linker but couldn't promise it was AVX related.



---

archive/issue_comments_186635.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jpflori](#comment%3A13):\n> Replying to [@nexttime](#comment%3A11):\n> > Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence \"needs info\".)\n\n> The CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).\n\nNo, a slightly different one (but with the same effect).  `AC_PROG_CXX` in MPIR is now correctly called after `CXXFLAGS` have been saved, and MPIR now behaves correctly (I'd say).  But Sage sets (and exports) `CXXFLAGS` to the empty string, so MPIR doesn't touch them (again assuming they were intentionally set), such that we end up with missing flags (unless the user had really set them, or `CFLAGS`, to something meaningful).",
    "created_at": "2014-04-14T08:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186635",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'></a>
Replying to [jpflori](#comment%3A13):
> Replying to [@nexttime](#comment%3A11):
> > Should #16149 be added as a dependency of this ticket, or do you want to deal with that in MPIR's `spkg-install`?  (I'd prefer the former, but am also undecided about the solution to choose on #16149, hence "needs info".)

> The CXXFLAGS issue should be fixed in MPIR (maybe not alpha4, but in git master).

No, a slightly different one (but with the same effect).  `AC_PROG_CXX` in MPIR is now correctly called after `CXXFLAGS` have been saved, and MPIR now behaves correctly (I'd say).  But Sage sets (and exports) `CXXFLAGS` to the empty string, so MPIR doesn't touch them (again assuming they were intentionally set), such that we end up with missing flags (unless the user had really set them, or `CFLAGS`, to something meaningful).



---

archive/issue_comments_186636.json:
```json
{
    "body": "<a id='comment:16'></a>\nI see.\nThanks for the explanation.",
    "created_at": "2014-04-14T08:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186636",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:16'></a>
I see.
Thanks for the explanation.



---

archive/issue_comments_186637.json:
```json
{
    "body": "<a id='comment:17'></a>\nP.S.:  In `spkg-install`, we could do (almost) the same with `CXXFLAGS` as we do with `CFLAGS`.  In the first \"dry\" `configure` run, we already unset them, so we could grep MPIR's from the Makefile and at least *prepend* those settings to our effective `CXXFLAGS` for the second, real `configure`run.\n\n(So far, we didn't touch `CXXFLAGS` at all, which I'd consider a small deficiency or inconsistency anyway.)",
    "created_at": "2014-04-14T08:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186637",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>
P.S.:  In `spkg-install`, we could do (almost) the same with `CXXFLAGS` as we do with `CFLAGS`.  In the first "dry" `configure` run, we already unset them, so we could grep MPIR's from the Makefile and at least *prepend* those settings to our effective `CXXFLAGS` for the second, real `configure`run.

(So far, we didn't touch `CXXFLAGS` at all, which I'd consider a small deficiency or inconsistency anyway.)



---

archive/issue_comments_186638.json:
```json
{
    "body": "<a id='comment:18'></a>\n[Slight correction to my previous post.]",
    "created_at": "2014-04-14T08:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186638",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:18'></a>
[Slight correction to my previous post.]



---

archive/issue_comments_186639.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jpflori](#comment%3A13):\n> > * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)\n\n> When there is no patch at all I guess.\n\nAh, thought of something like that.  But it should be\n\n```sh\nfor foo in bar*; do\n    [ -r \"$foo\" ] || continue   # ignore non-readable / non-existent files\n    process \"$foo\"\n    if [ $? -ne 0 ]; then\n        # processing $foo failed, err out\n        ...\n    fi\ndone\n```",
    "created_at": "2014-04-14T08:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186639",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:19'></a>
Replying to [jpflori](#comment%3A13):
> > * What is `patch ... || continue` supposed to achieve?  (The `if [ $? -ne 0 ]` afterwards gets useless.)

> When there is no patch at all I guess.

Ah, thought of something like that.  But it should be

```sh
for foo in bar*; do
    [ -r "$foo" ] || continue   # ignore non-readable / non-existent files
    process "$foo"
    if [ $? -ne 0 ]; then
        # processing $foo failed, err out
        ...
    fi
done
```



---

archive/issue_comments_186640.json:
```json
{
    "body": "<a id='comment:20'></a>\nSure, I messed up :(",
    "created_at": "2014-04-14T09:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186640",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:20'></a>
Sure, I messed up :(



---

archive/issue_comments_186641.json:
```json
{
    "body": "**Changing commit** from \"[5d7a2e99278f657b5d17f527d3d8f1c38e125a02](https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02)\" to \"[da483e1e109f71c93d22fa1ab115b12ede4fcaca](https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca)\".",
    "created_at": "2014-04-14T10:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186641",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5d7a2e99278f657b5d17f527d3d8f1c38e125a02](https://github.com/sagemath/sagetrac-mirror/commit/5d7a2e99278f657b5d17f527d3d8f1c38e125a02)" to "[da483e1e109f71c93d22fa1ab115b12ede4fcaca](https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca)".



---

archive/issue_comments_186642.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/113a8dde7efaf52d797710c079377f0a9fdf989a\">113a8dd</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15015</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca\">da483e1</a></td><td><code>Correct MPIR spkg-install scripts for non-exisiting patches.</code></td></tr></table>\n",
    "created_at": "2014-04-14T10:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186642",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/113a8dde7efaf52d797710c079377f0a9fdf989a">113a8dd</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15015</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca">da483e1</a></td><td><code>Correct MPIR spkg-install scripts for non-exisiting patches.</code></td></tr></table>




---

archive/issue_comments_186643.json:
```json
{
    "body": "<a id='comment:22'></a>\nAll patches from Sage seem to be integrated upstream, good! The changes here look fine, the main part of reviewing will be checking that it actually works. I will upgrade this to the latest MPIR alpha and report back.",
    "created_at": "2014-08-28T10:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186643",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
All patches from Sage seem to be integrated upstream, good! The changes here look fine, the main part of reviewing will be checking that it actually works. I will upgrade this to the latest MPIR alpha and report back.



---

archive/issue_comments_186644.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,6 +3,6 @@\n Patches from Sage will mostly be integrated.\n We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n-Temporary spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2\n+**upstream** (this is alpha10) at:\n+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n \n``````\n",
    "created_at": "2014-08-28T10:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186644",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,6 +3,6 @@
 Patches from Sage will mostly be integrated.
 We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
-Temporary spkg at:
-* http://boxen.math.washington.edu/home/jpflori/upstream/mpir-2.7.0.alpha4.tar.bz2
+**upstream** (this is alpha10) at:
+* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
 
``````




---

archive/issue_comments_186645.json:
```json
{
    "body": "<a id='comment:24'></a>\nI'm not sure the problem with ppl is fixed in the latest alpha...\nSome hints to fix it must lurk on flint-devel.",
    "created_at": "2014-08-28T10:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186645",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:24'></a>
I'm not sure the problem with ppl is fixed in the latest alpha...
Some hints to fix it must lurk on flint-devel.



---

archive/issue_comments_186646.json:
```json
{
    "body": "<a id='comment:25'></a>\nSee https://groups.google.com/d/msg/mpir-devel/JFDaMAc0YpY/h774pq9wN2EJ\nAnd IIRC it does not only happens on Cygwin(64) but also on more usual systems.",
    "created_at": "2014-08-28T10:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186646",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:25'></a>
See https://groups.google.com/d/msg/mpir-devel/JFDaMAc0YpY/h774pq9wN2EJ
And IIRC it does not only happens on Cygwin(64) but also on more usual systems.



---

archive/issue_comments_186647.json:
```json
{
    "body": "**Changing branch** from \"[u/jpflori/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15015)\" to \"[u/jdemeyer/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/15015)\".",
    "created_at": "2014-08-28T10:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186647",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/jpflori/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15015)" to "[u/jdemeyer/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/15015)".



---

archive/issue_comments_186648.json:
```json
{
    "body": "**Changing commit** from \"[da483e1e109f71c93d22fa1ab115b12ede4fcaca](https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca)\" to \"[77251224787d5140af17a32e7cb3059effe22670](https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670)\".",
    "created_at": "2014-08-28T10:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186648",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[da483e1e109f71c93d22fa1ab115b12ede4fcaca](https://github.com/sagemath/sagetrac-mirror/commit/da483e1e109f71c93d22fa1ab115b12ede4fcaca)" to "[77251224787d5140af17a32e7cb3059effe22670](https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670)".



---

archive/issue_comments_186649.json:
```json
{
    "body": "<a id='comment:27'></a>\nIn `spkg-install`, I also changed\n\n```\necho \"Checking what CFLAGS MPIR would use if they were empty...\"\n(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE) &>configure-empty.log\n```\nto\n\n```\necho \"Configuring MPIR with empty CFLAGS to determine the defaults:\"\n(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE)\n```\n\nI think it's better to display the first `configure` run, in case it needs to be debugged or just to show the user that Sage isn't stuck.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1607b8ffe6443c5152ba8e505ca6686e46122049\">1607b8f</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670\">7725122</a></td><td><code>Cosmetic changes</code></td></tr></table>\n",
    "created_at": "2014-08-28T10:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186649",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>
In `spkg-install`, I also changed

```
echo "Checking what CFLAGS MPIR would use if they were empty..."
(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE) &>configure-empty.log
```
to

```
echo "Configuring MPIR with empty CFLAGS to determine the defaults:"
(unset CFLAGS CPPFLAGS CXXFLAGS && ./configure $MPIR_CONFIGURE)
```

I think it's better to display the first `configure` run, in case it needs to be debugged or just to show the user that Sage isn't stuck.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1607b8ffe6443c5152ba8e505ca6686e46122049">1607b8f</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670">7725122</a></td><td><code>Cosmetic changes</code></td></tr></table>




---

archive/issue_comments_186650.json:
```json
{
    "body": "<a id='comment:28'></a>\nOn Linux x86_64, g++ (Gentoo 4.6.4 p1.2, pie-0.5.2) 4.6.4, while compiling the Sage library:\n\n```\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/csage -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c build/cythonized/sage/libs/ppl.cpp -o build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/ppl.o -fno-strict-aliasing -w\nIn file included from build/cythonized/sage/libs/ppl.cpp:352:0:\n../local/include/gmpxx.h:1548:3: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1539:3: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long int)\u2019\n../local/include/gmpxx.h:1552:3: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1540:3: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long unsigned int)\u2019\n../local/include/gmpxx.h:1615:16: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1604:16: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long int)\u2019\n../local/include/gmpxx.h:1619:16: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)\u2019 cannot be overloaded\n../local/include/gmpxx.h:1606:16: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long unsigned int)\u2019\nerror: command 'gcc' failed with exit status 1\n```",
    "created_at": "2014-08-28T12:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186650",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
On Linux x86_64, g++ (Gentoo 4.6.4 p1.2, pie-0.5.2) 4.6.4, while compiling the Sage library:

```
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include/csage -I/usr/local/src/sage-config/src -I/usr/local/src/sage-config/src/sage/ext -I/usr/local/src/sage-config/local/include/python2.7 -c build/cythonized/sage/libs/ppl.cpp -o build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/ppl.o -fno-strict-aliasing -w
In file included from build/cythonized/sage/libs/ppl.cpp:352:0:
../local/include/gmpxx.h:1548:3: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1539:3: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long int)’
../local/include/gmpxx.h:1552:3: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1540:3: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long unsigned int)’
../local/include/gmpxx.h:1615:16: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1604:16: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long int)’
../local/include/gmpxx.h:1619:16: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)’ cannot be overloaded
../local/include/gmpxx.h:1606:16: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long unsigned int)’
error: command 'gcc' failed with exit status 1
```



---

archive/issue_comments_186651.json:
```json
{
    "body": "<a id='comment:29'></a>\nYup that is the problem I was mentioning.",
    "created_at": "2014-08-28T12:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186651",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:29'></a>
Yup that is the problem I was mentioning.



---

archive/issue_comments_186652.json:
```json
{
    "body": "<a id='comment:30'></a>\nCould you try with the attached patch?\nIf it works, I'll forward it to Bill.",
    "created_at": "2014-09-04T11:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186652",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:30'></a>
Could you try with the attached patch?
If it works, I'll forward it to Bill.



---

archive/issue_comments_186653.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Attachment:** [mpirxx.2.patch.gz](https://github.com/sagemath/sage/files/ticket15015/mpirxx.2.patch.gz)\n\nGroumpf, thepatch is reversed.\nTake the .2 one.",
    "created_at": "2014-09-04T11:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186653",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:31'></a>
**Attachment:** [mpirxx.2.patch.gz](https://github.com/sagemath/sage/files/ticket15015/mpirxx.2.patch.gz)

Groumpf, thepatch is reversed.
Take the .2 one.



---

archive/issue_comments_186654.json:
```json
{
    "body": "<a id='comment:32'></a>\nStrange I don't have problems, even without my latest patch, on a machine where I seem to remember I used to have problems.",
    "created_at": "2014-09-04T13:11:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186654",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:32'></a>
Strange I don't have problems, even without my latest patch, on a machine where I seem to remember I used to have problems.



---

archive/issue_comments_186655.json:
```json
{
    "body": "<a id='comment:33'></a>\nWorks for me...",
    "created_at": "2014-09-04T20:12:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186655",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
Works for me...



---

archive/issue_comments_186656.json:
```json
{
    "body": "<a id='comment:34'></a>\nIn fact I also need the patch, but not to build PPL anymore, but some ppl related file within the Sage library.",
    "created_at": "2014-09-05T14:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186656",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:34'></a>
In fact I also need the patch, but not to build PPL anymore, but some ppl related file within the Sage library.



---

archive/issue_comments_186657.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,6 +3,6 @@\n Patches from Sage will mostly be integrated.\n We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n-**upstream** (this is alpha10) at:\n+**upstream** (this is alpha12) at:\n * [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n \n``````\n",
    "created_at": "2014-10-01T14:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186657",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,6 +3,6 @@
 Patches from Sage will mostly be integrated.
 We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
-**upstream** (this is alpha10) at:
+**upstream** (this is alpha12) at:
 * [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
 
``````




---

archive/issue_comments_186658.json:
```json
{
    "body": "<a id='comment:36'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6957f17465f02f7a0f8c3ae9766a25cba42a4da8\">6957f17</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f\">aca71cb</a></td><td><code>Upgrade to mpir-2.7.0-alpha12</code></td></tr></table>\n",
    "created_at": "2014-10-01T14:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186658",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:36'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6957f17465f02f7a0f8c3ae9766a25cba42a4da8">6957f17</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f">aca71cb</a></td><td><code>Upgrade to mpir-2.7.0-alpha12</code></td></tr></table>




---

archive/issue_comments_186659.json:
```json
{
    "body": "**Changing commit** from \"[77251224787d5140af17a32e7cb3059effe22670](https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670)\" to \"[aca71cb72ef80895a6228efde9965367152dba4f](https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f)\".",
    "created_at": "2014-10-01T14:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186659",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[77251224787d5140af17a32e7cb3059effe22670](https://github.com/sagemath/sagetrac-mirror/commit/77251224787d5140af17a32e7cb3059effe22670)" to "[aca71cb72ef80895a6228efde9965367152dba4f](https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f)".



---

archive/issue_comments_186660.json:
```json
{
    "body": "**Changing commit** from \"[aca71cb72ef80895a6228efde9965367152dba4f](https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f)\" to \"[67babebcf82ac594043c634b8e63d4036c7818c6](https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6)\".",
    "created_at": "2014-10-01T18:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186660",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[aca71cb72ef80895a6228efde9965367152dba4f](https://github.com/sagemath/sagetrac-mirror/commit/aca71cb72ef80895a6228efde9965367152dba4f)" to "[67babebcf82ac594043c634b8e63d4036c7818c6](https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6)".



---

archive/issue_comments_186661.json:
```json
{
    "body": "<a id='comment:37'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6\">67babeb</a></td><td><code>Fix doctests due to changed xgcd results</code></td></tr></table>\n",
    "created_at": "2014-10-01T18:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186661",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:37'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6">67babeb</a></td><td><code>Fix doctests due to changed xgcd results</code></td></tr></table>




---

archive/issue_comments_186662.json:
```json
{
    "body": "<a id='comment:38'></a>\nThis now builds and passes all doctests on 64-bit for me.\n\nTest please!",
    "created_at": "2014-10-01T18:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186662",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>
This now builds and passes all doctests on 64-bit for me.

Test please!



---

archive/issue_comments_186663.json:
```json
{
    "body": "**Changing author** from \"Jean-Pierre Flori\" to \"Jean-Pierre Flori, Jeroen Demeyer\".",
    "created_at": "2014-10-01T18:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186663",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Jean-Pierre Flori" to "Jean-Pierre Flori, Jeroen Demeyer".



---

archive/issue_comments_186664.json:
```json
{
    "body": "<a id='comment:39'></a>\nWilliam: this changes one doctest in `src/sage/tests/book_stein_modform.py`",
    "created_at": "2014-10-01T18:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186664",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
William: this changes one doctest in `src/sage/tests/book_stein_modform.py`



---

archive/issue_comments_186665.json:
```json
{
    "body": "**Changing commit** from \"[67babebcf82ac594043c634b8e63d4036c7818c6](https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6)\" to \"[8c7fbbd95d470a15e3e57b4e2573685bd726a7bd](https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd)\".",
    "created_at": "2014-10-01T18:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186665",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[67babebcf82ac594043c634b8e63d4036c7818c6](https://github.com/sagemath/sagetrac-mirror/commit/67babebcf82ac594043c634b8e63d4036c7818c6)" to "[8c7fbbd95d470a15e3e57b4e2573685bd726a7bd](https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd)".



---

archive/issue_comments_186666.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd\">8c7fbbd</a></td><td><code>Re-enable \"not tested\" test from #4357</code></td></tr></table>\n",
    "created_at": "2014-10-01T18:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186666",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd">8c7fbbd</a></td><td><code>Re-enable "not tested" test from #4357</code></td></tr></table>




---

archive/issue_comments_186667.json:
```json
{
    "body": "<a id='comment:41'></a>\nUnrelated to this ticket, I have re-enabled a doctest in `book_stein_modform.py` which was fixed in #4357.",
    "created_at": "2014-10-01T18:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186667",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>
Unrelated to this ticket, I have re-enabled a doctest in `book_stein_modform.py` which was fixed in #4357.



---

archive/issue_comments_186668.json:
```json
{
    "body": "<a id='comment:42'></a>\nFor info, I agree that we should output the first configure run on screen.\nSome users already complained that MPIR compilation was stuck because of the long time it can take on some systems and nothing was getting printed on screen.",
    "created_at": "2014-10-08T05:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186668",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:42'></a>
For info, I agree that we should output the first configure run on screen.
Some users already complained that MPIR compilation was stuck because of the long time it can take on some systems and nothing was getting printed on screen.



---

archive/issue_comments_186669.json:
```json
{
    "body": "<a id='comment:43'></a>\nWorks fine for me (except for numerical noise I also get with the previous MPIR, and that is surely ppc64 specific).\n\nWould you consider adding a spkg-src script?",
    "created_at": "2014-10-10T05:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186669",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:43'></a>
Works fine for me (except for numerical noise I also get with the previous MPIR, and that is surely ppc64 specific).

Would you consider adding a spkg-src script?



---

archive/issue_comments_186670.json:
```json
{
    "body": "<a id='comment:44'></a>\nThis works perfectly fine for me (though I did not test Cygwin, but that's a low level priority and can be fixed later in case it is needed).\n\nThe current tarball is the upstream one and includes windows stuff we used to delete.\nApart from that, I would positively review the ticket, even without a proper spkg-src script.",
    "created_at": "2014-10-16T09:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186670",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:44'></a>
This works perfectly fine for me (though I did not test Cygwin, but that's a low level priority and can be fixed later in case it is needed).

The current tarball is the upstream one and includes windows stuff we used to delete.
Apart from that, I would positively review the ticket, even without a proper spkg-src script.



---

archive/issue_events_131507.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2014-10-16T09:05:15Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "rename": {
        "from": "Update to MPIR 2.7.0 when it's released",
        "to": "Update to MPIR 2.7.0.alpha12"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131507"
}
```



---

archive/issue_comments_186671.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori",
    "created_at": "2014-10-16T09:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186671",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Reviewer:** Jean-Pierre Flori



---

archive/issue_comments_186672.json:
```json
{
    "body": "<a id='comment:45'></a>\nUpstream has indicated that they consider the changed output of `mpz_gcdext()` a bug.\n\nTherefore, I think it is premature to upgrade now.",
    "created_at": "2014-10-16T09:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186672",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'></a>
Upstream has indicated that they consider the changed output of `mpz_gcdext()` a bug.

Therefore, I think it is premature to upgrade now.



---

archive/issue_events_131508.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T09:09:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "rename": {
        "from": "Update to MPIR 2.7.0.alpha12",
        "to": "Update to MPIR 2.7.0 when it's released"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131508"
}
```



---

archive/issue_comments_186673.json:
```json
{
    "body": "<a id='comment:46'></a>\nOh yeah, I read about that one...",
    "created_at": "2014-10-16T09:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186673",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:46'></a>
Oh yeah, I read about that one...



---

archive/issue_comments_186674.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n MPIR 2.6.0 does not build on Cygwin 64.\n The next version should fix this problem (and others).\n Patches from Sage will mostly be integrated.\n-We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.\n \n **upstream** (this is alpha12) at:\n * [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n``````\n",
    "created_at": "2014-10-31T09:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186674",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
 MPIR 2.6.0 does not build on Cygwin 64.
 The next version should fix this problem (and others).
 Patches from Sage will mostly be integrated.
-We should also surely add a `spkg-src` script which automatically purges the spkg from all the Windows stuff.
 
 **upstream** (this is alpha12) at:
 * [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
``````




---

archive/issue_comments_186675.json:
```json
{
    "body": "<a id='comment:47'></a>\nBecause of the precedent at #17169, I would simply use the upstream tarball and not add a `spkg-src` script.",
    "created_at": "2014-10-31T09:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186675",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'></a>
Because of the precedent at #17169, I would simply use the upstream tarball and not add a `spkg-src` script.



---

archive/issue_comments_186676.json:
```json
{
    "body": "<a id='comment:48'></a>\nI don't really agree...\nIf we keep on like that Sage will grow huge.\nHard disks are cheap but internet connections aren't always, e.g. I get a poor bandwith between my office and boxen.\nLet's discuss this on sage-devel.",
    "created_at": "2014-10-31T09:49:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186676",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:48'></a>
I don't really agree...
If we keep on like that Sage will grow huge.
Hard disks are cheap but internet connections aren't always, e.g. I get a poor bandwith between my office and boxen.
Let's discuss this on sage-devel.



---

archive/issue_comments_186677.json:
```json
{
    "body": "<a id='comment:49'></a>\nhttps://groups.google.com/forum/#!topic/sage-devel/a9yIdaqNHKU",
    "created_at": "2014-10-31T09:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186677",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:49'></a>
https://groups.google.com/forum/#!topic/sage-devel/a9yIdaqNHKU



---

archive/issue_comments_186678.json:
```json
{
    "body": "<a id='comment:50'></a>\nThe gcdext change in MPIR was to be expected (at least the `gcdext(1,1)` example Jeroen found) and I personally don't think it's a bug.\nI'm not sure what Bill will think though.\n\nAt the very least it makes MPIR consistent with GMP.",
    "created_at": "2014-11-24T14:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186678",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:50'></a>
The gcdext change in MPIR was to be expected (at least the `gcdext(1,1)` example Jeroen found) and I personally don't think it's a bug.
I'm not sure what Bill will think though.

At the very least it makes MPIR consistent with GMP.



---

archive/issue_comments_186679.json:
```json
{
    "body": "<a id='comment:51'></a>\n(And ok for not shipping any `spkg-src` script.)",
    "created_at": "2014-11-24T14:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186679",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:51'></a>
(And ok for not shipping any `spkg-src` script.)



---

archive/issue_events_131509.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2014-11-24T16:15:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131509"
}
```



---

archive/issue_comments_186680.json:
```json
{
    "body": "<a id='comment:53'></a>\nThe only thing really annoying me right now is the name of the tarball.\nWhen we update to another alpha or the final version it will be a pain, so we should still repackage the upstream tarball to change the dir name wihtin it (rather than renaming the tarball).",
    "created_at": "2014-12-16T09:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186680",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:53'></a>
The only thing really annoying me right now is the name of the tarball.
When we update to another alpha or the final version it will be a pain, so we should still repackage the upstream tarball to change the dir name wihtin it (rather than renaming the tarball).



---

archive/issue_comments_186681.json:
```json
{
    "body": "**Work Issues:** fix tarball name issue",
    "created_at": "2014-12-23T16:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186681",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Work Issues:** fix tarball name issue



---

archive/issue_events_131510.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2014-12-23T16:47:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131510"
}
```



---

archive/issue_events_131511.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2014-12-23T16:47:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131511"
}
```



---

archive/issue_comments_186682.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,6 +2,4 @@\n The next version should fix this problem (and others).\n Patches from Sage will mostly be integrated.\n \n-**upstream** (this is alpha12) at:\n-* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)\n-\n+**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)\n``````\n",
    "created_at": "2014-12-24T09:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186682",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,6 +2,4 @@
 The next version should fix this problem (and others).
 Patches from Sage will mostly be integrated.
 
-**upstream** (this is alpha12) at:
-* [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.7.0.tar.bz2)
-
+**upstream** at: [http://mpir.org/mpir-2.7.0-alpha12.tar.bz2](http://mpir.org/mpir-2.7.0-alpha12.tar.bz2)
``````




---

archive/issue_comments_186683.json:
```json
{
    "body": "**Changing work issues** from \"fix tarball name issue\" to \"\".",
    "created_at": "2014-12-24T09:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186683",
    "user": "https://github.com/jdemeyer"
}
```

**Changing work issues** from "fix tarball name issue" to "".



---

archive/issue_events_131512.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131512"
}
```



---

archive/issue_events_131513.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131513"
}
```



---

archive/issue_events_131514.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131514"
}
```



---

archive/issue_events_131515.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:21:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131515"
}
```



---

archive/issue_comments_186684.json:
```json
{
    "body": "**Changing commit** from \"[8c7fbbd95d470a15e3e57b4e2573685bd726a7bd](https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd)\" to \"[aefe0ebcbbeeae156ea4923eee35dd112dfa6d70](https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70)\".",
    "created_at": "2014-12-24T09:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186684",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[8c7fbbd95d470a15e3e57b4e2573685bd726a7bd](https://github.com/sagemath/sagetrac-mirror/commit/8c7fbbd95d470a15e3e57b4e2573685bd726a7bd)" to "[aefe0ebcbbeeae156ea4923eee35dd112dfa6d70](https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70)".



---

archive/issue_comments_186685.json:
```json
{
    "body": "<a id='comment:56'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70\">aefe0eb</a></td><td><code>Upgrade to MPIR 2.7.0-alpha12</code></td></tr></table>\n",
    "created_at": "2014-12-24T09:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186685",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:56'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70">aefe0eb</a></td><td><code>Upgrade to MPIR 2.7.0-alpha12</code></td></tr></table>




---

archive/issue_comments_186686.json:
```json
{
    "body": "<a id='comment:57'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70\">aefe0eb</a></td><td><code>Upgrade to MPIR 2.7.0-alpha12</code></td></tr></table>\n",
    "created_at": "2014-12-24T09:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186686",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70">aefe0eb</a></td><td><code>Upgrade to MPIR 2.7.0-alpha12</code></td></tr></table>




---

archive/issue_events_131516.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-24T09:23:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "rename": {
        "from": "Update to MPIR 2.7.0 when it's released",
        "to": "Update to MPIR 2.7.0-alpha12"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131516"
}
```



---

archive/issue_comments_186687.json:
```json
{
    "body": "<a id='comment:59'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d583af0d6e79d9e8a1df2fc4235e84528b389cd\">3d583af</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c\">d97c066</a></td><td><code>Rename source directory</code></td></tr></table>\n",
    "created_at": "2014-12-24T09:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186687",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:59'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d583af0d6e79d9e8a1df2fc4235e84528b389cd">3d583af</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/15015</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c">d97c066</a></td><td><code>Rename source directory</code></td></tr></table>




---

archive/issue_comments_186688.json:
```json
{
    "body": "**Changing commit** from \"[aefe0ebcbbeeae156ea4923eee35dd112dfa6d70](https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70)\" to \"[d97c06604293f765fd0c8de6189d05cedcebea3c](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)\".",
    "created_at": "2014-12-24T09:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186688",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[aefe0ebcbbeeae156ea4923eee35dd112dfa6d70](https://github.com/sagemath/sagetrac-mirror/commit/aefe0ebcbbeeae156ea4923eee35dd112dfa6d70)" to "[d97c06604293f765fd0c8de6189d05cedcebea3c](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)".



---

archive/issue_comments_186689.json:
```json
{
    "body": "<a id='comment:60'></a>\nLooks fine.\n\nI had a vague souvenir we had trouble with dashes in version numbers but it does not seem to be the case anymore.\nMaybe we could also switch back to verbatim version numbers for Singular 4-0-1.",
    "created_at": "2014-12-24T10:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186689",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:60'></a>
Looks fine.

I had a vague souvenir we had trouble with dashes in version numbers but it does not seem to be the case anymore.
Maybe we could also switch back to verbatim version numbers for Singular 4-0-1.



---

archive/issue_events_131517.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2014-12-24T10:50:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131517"
}
```



---

archive/issue_events_131518.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2014-12-24T10:50:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131518"
}
```



---

archive/issue_comments_186690.json:
```json
{
    "body": "<a id='comment:61'></a>\nGot two files with failing doctests but cannot reproduce these failures:\n* `src/sage/modular/modform/ambient.py`\n* `src/sage/graphs/genus.pyx`",
    "created_at": "2014-12-24T11:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186690",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:61'></a>
Got two files with failing doctests but cannot reproduce these failures:
* `src/sage/modular/modform/ambient.py`
* `src/sage/graphs/genus.pyx`



---

archive/issue_events_131519.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T15:46:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131519"
}
```



---

archive/issue_events_131520.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2dfc6a056b2f47faeedcc0a1a2560475c2001d9f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-01-02T15:46:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15015#event-131520"
}
```



---

archive/issue_comments_186691.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/15015)\" to \"[d97c06604293f765fd0c8de6189d05cedcebea3c](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)\".",
    "created_at": "2015-01-02T15:46:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15015#issuecomment-186691",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/ticket/15015](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/15015)" to "[d97c06604293f765fd0c8de6189d05cedcebea3c](https://github.com/sagemath/sagetrac-mirror/commit/d97c06604293f765fd0c8de6189d05cedcebea3c)".
