# Issue 15547: Fix the creation of tikzpictures of projections of polytopes

archive/issues_015310.json:
```json
{
    "body": "Right now, the tikz method for the projection of a 2d polytope in 3d relies on the dimension of the projection and not the dimension of the actual polytope. This is incompatible with the way that the tikz method works in this case. Moreover, the drawing of back-edges of 3d-polytopes (in 3d) is broken.\n\nThe first error can be reproduced:\n\n```\n    sage: P = Polyhedron(vertices=[[1,0,0],[0,1,0],[0,0,1]])\n    sage: P.ambient_dim()\n    3\n    sage: P.dim()\n    2\n    sage: PProj = P.projection()\n    sage: PProj.polyhedron_ambient_dim\n    3\n    sage: PProj.dimension\n    3\n```\n\nTo fix the issue, I believe one should add an attribute \"polyhedron_dim\" to the projection to know what the dimension of the polyhedron actually is. Something like:\n\n```\n    sage: PProj.polyhedron_dim\n    2\n```\n\nThen the tikz method will use this attribute to decide which algorithm to apply.\n\nThe second problem is an indexing issue in the creation of potential back edges. There is a trivial fix to that.\n\nThe doc of _init_from_2d and _init_from_3d should also mention that it is possible to have lower dimensional polytopes.\n\nKeywords: tikz, projection\n\nBranch/Commit: eedb8b3edf7d704ddd6e66d82dc4efb62e534be8\n\nReviewer: Volker Braun\n\nAuthor: Jean-Philippe Labb\u00e9\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15547\n\n",
    "closed_at": "2014-06-08T12:09:06Z",
    "created_at": "2013-12-19T13:11:01Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Fix the creation of tikzpictures of projections of polytopes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15547",
    "user": "https://github.com/jplab"
}
```
Right now, the tikz method for the projection of a 2d polytope in 3d relies on the dimension of the projection and not the dimension of the actual polytope. This is incompatible with the way that the tikz method works in this case. Moreover, the drawing of back-edges of 3d-polytopes (in 3d) is broken.

The first error can be reproduced:

```
    sage: P = Polyhedron(vertices=[[1,0,0],[0,1,0],[0,0,1]])
    sage: P.ambient_dim()
    3
    sage: P.dim()
    2
    sage: PProj = P.projection()
    sage: PProj.polyhedron_ambient_dim
    3
    sage: PProj.dimension
    3
```

To fix the issue, I believe one should add an attribute "polyhedron_dim" to the projection to know what the dimension of the polyhedron actually is. Something like:

```
    sage: PProj.polyhedron_dim
    2
```

Then the tikz method will use this attribute to decide which algorithm to apply.

The second problem is an indexing issue in the creation of potential back edges. There is a trivial fix to that.

The doc of _init_from_2d and _init_from_3d should also mention that it is possible to have lower dimensional polytopes.

Keywords: tikz, projection

Branch/Commit: eedb8b3edf7d704ddd6e66d82dc4efb62e534be8

Reviewer: Volker Braun

Author: Jean-Philippe Labbé

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15547





---

archive/issue_comments_248551.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,6 +29,8 @@\n     self.dimension = polyhedron.dim()\n ```\n \n+There is also a problem with drawing 3d-polytopes: the back edges are not drawn.\n+\n Author: jipilab\n \n Comment: 1\n``````\n",
    "created_at": "2014-01-06T22:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248551",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,6 +29,8 @@
     self.dimension = polyhedron.dim()
 ```
 
+There is also a problem with drawing 3d-polytopes: the back edges are not drawn.
+
 Author: jipilab
 
 Comment: 1
``````




---

archive/issue_events_045440.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15547#event-45440"
}
```



---

archive/issue_comments_248552.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jipilab/ticket15547\"",
    "created_at": "2014-06-03T19:52:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248552",
    "user": "https://github.com/jplab"
}
```

Changing branch from "" to "u/jipilab/ticket15547"



---

archive/issue_comments_248553.json:
```json
{
    "body": "Changing commit from \"\" to \"9e06c77e6b641ff54bdde4faad541872a6256da1\"",
    "created_at": "2014-06-03T19:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248553",
    "user": "https://github.com/jplab"
}
```

Changing commit from "" to "9e06c77e6b641ff54bdde4faad541872a6256da1"



---

archive/issue_comments_248554.json:
```json
{
    "body": "<a id='comment:4'></a>I uploaded a patch.\n\nThe problem is now solved and I added two examples to test the bug on back edges of 3d polytopes and the drawing of 2d-polytopes embedded in 3d.\n\nOn this patch, the examples of projections have to be solved... (tests do not pass)\n\n---\nNew commits:",
    "created_at": "2014-06-03T19:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248554",
    "user": "https://github.com/jplab"
}
```

<a id='comment:4'></a>I uploaded a patch.

The problem is now solved and I added two examples to test the bug on back edges of 3d polytopes and the drawing of 2d-polytopes embedded in 3d.

On this patch, the examples of projections have to be solved... (tests do not pass)

---
New commits:



---

archive/issue_comments_248555.json:
```json
{
    "body": "Changing commit from \"9e06c77e6b641ff54bdde4faad541872a6256da1\" to \"270e115a2fa376e8a48dc13345c8837b4bd62086\"",
    "created_at": "2014-06-03T20:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9e06c77e6b641ff54bdde4faad541872a6256da1" to "270e115a2fa376e8a48dc13345c8837b4bd62086"



---

archive/issue_comments_248556.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-03T20:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_248557.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-03T20:23:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248557",
    "user": "https://github.com/jplab"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_248558.json:
```json
{
    "body": "<a id='comment:8'></a>Humm, looks good enough to me, but you have not solved the issue raised in the description of the ticket. Maybe you could just change this description, and maybe also add a little more doc to `_init_from_2d` and `_init_from_3d` (explaining that the first one takes 2d-polygons in 2d as input and the second one only takes 3d-polytopes in 3d as input ; and also that no check is done that the dimension of the input is correct)",
    "created_at": "2014-06-06T08:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248558",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>Humm, looks good enough to me, but you have not solved the issue raised in the description of the ticket. Maybe you could just change this description, and maybe also add a little more doc to `_init_from_2d` and `_init_from_3d` (explaining that the first one takes 2d-polygons in 2d as input and the second one only takes 3d-polytopes in 3d as input ; and also that no check is done that the dimension of the input is correct)



---

archive/issue_comments_248559.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-06T09:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248559",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_248560.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,30 @@\n+Right now, the tikz method for the projection of a 2d polytope in 3d relies on the dimension of the projection and not the dimension of the actual polytope. This is incompatible with the way that the tikz method works in this case. Moreover, the drawing of back-edges of 3d-polytopes (in 3d) is broken.\n \n+The first error can be reproduced:\n+\n+```\n+    sage: P = Polyhedron(vertices=[[1,0,0],[0,1,0],[0,0,1]])\n+    sage: P.ambient_dim()\n+    3\n+    sage: P.dim()\n+    2\n+    sage: PProj = P.projection()\n+    sage: PProj.polyhedron_ambient_dim\n+    3\n+    sage: PProj.dimension\n+    3\n+```\n+\n+To fix the issue, I believe one should add an attribute \"polyhedron_dim\" to the projection to know what the dimension of the polyhedron actually is. Something like:\n+\n+```\n+    sage: PProj.polyhedron_dim\n+    2\n+```\n+\n+Then the tikz method will use this attribute to decide which algorithm to apply.\n+\n+The second problem is an indexing issue in the creation of potential back edges. There is a trivial fix to that.\n \n Author: jipilab\n \n``````\n",
    "created_at": "2014-06-06T09:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248560",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,30 @@
+Right now, the tikz method for the projection of a 2d polytope in 3d relies on the dimension of the projection and not the dimension of the actual polytope. This is incompatible with the way that the tikz method works in this case. Moreover, the drawing of back-edges of 3d-polytopes (in 3d) is broken.
 
+The first error can be reproduced:
+
+```
+    sage: P = Polyhedron(vertices=[[1,0,0],[0,1,0],[0,0,1]])
+    sage: P.ambient_dim()
+    3
+    sage: P.dim()
+    2
+    sage: PProj = P.projection()
+    sage: PProj.polyhedron_ambient_dim
+    3
+    sage: PProj.dimension
+    3
+```
+
+To fix the issue, I believe one should add an attribute "polyhedron_dim" to the projection to know what the dimension of the polyhedron actually is. Something like:
+
+```
+    sage: PProj.polyhedron_dim
+    2
+```
+
+Then the tikz method will use this attribute to decide which algorithm to apply.
+
+The second problem is an indexing issue in the creation of potential back edges. There is a trivial fix to that.
 
 Author: jipilab
 
``````




---

archive/issue_comments_248561.json:
```json
{
    "body": "Changing commit from \"270e115a2fa376e8a48dc13345c8837b4bd62086\" to \"26045b67c8afb164dc00ee510b1f33a8f97105f0\"",
    "created_at": "2014-06-06T10:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "270e115a2fa376e8a48dc13345c8837b4bd62086" to "26045b67c8afb164dc00ee510b1f33a8f97105f0"



---

archive/issue_comments_248562.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-06T10:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248562",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_248563.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,32 @@\n+Right now, the tikz method for the projection of a 2d polytope in 3d relies on the dimension of the projection and not the dimension of the actual polytope. This is incompatible with the way that the tikz method works in this case. Moreover, the drawing of back-edges of 3d-polytopes (in 3d) is broken.\n \n+The first error can be reproduced:\n+\n+```\n+    sage: P = Polyhedron(vertices=[[1,0,0],[0,1,0],[0,0,1]])\n+    sage: P.ambient_dim()\n+    3\n+    sage: P.dim()\n+    2\n+    sage: PProj = P.projection()\n+    sage: PProj.polyhedron_ambient_dim\n+    3\n+    sage: PProj.dimension\n+    3\n+```\n+\n+To fix the issue, I believe one should add an attribute \"polyhedron_dim\" to the projection to know what the dimension of the polyhedron actually is. Something like:\n+\n+```\n+    sage: PProj.polyhedron_dim\n+    2\n+```\n+\n+Then the tikz method will use this attribute to decide which algorithm to apply.\n+\n+The second problem is an indexing issue in the creation of potential back edges. There is a trivial fix to that.\n+\n+The doc of _init_from_2d and _init_from_3d should also mention that it is possible to have lower dimensional polytopes.\n \n Author: jipilab\n \n``````\n",
    "created_at": "2014-06-06T10:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248563",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,32 @@
+Right now, the tikz method for the projection of a 2d polytope in 3d relies on the dimension of the projection and not the dimension of the actual polytope. This is incompatible with the way that the tikz method works in this case. Moreover, the drawing of back-edges of 3d-polytopes (in 3d) is broken.
 
+The first error can be reproduced:
+
+```
+    sage: P = Polyhedron(vertices=[[1,0,0],[0,1,0],[0,0,1]])
+    sage: P.ambient_dim()
+    3
+    sage: P.dim()
+    2
+    sage: PProj = P.projection()
+    sage: PProj.polyhedron_ambient_dim
+    3
+    sage: PProj.dimension
+    3
+```
+
+To fix the issue, I believe one should add an attribute "polyhedron_dim" to the projection to know what the dimension of the polyhedron actually is. Something like:
+
+```
+    sage: PProj.polyhedron_dim
+    2
+```
+
+Then the tikz method will use this attribute to decide which algorithm to apply.
+
+The second problem is an indexing issue in the creation of potential back edges. There is a trivial fix to that.
+
+The doc of _init_from_2d and _init_from_3d should also mention that it is possible to have lower dimensional polytopes.
 
 Author: jipilab
 
``````




---

archive/issue_comments_248564.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-06T10:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248564",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_248565.json:
```json
{
    "body": "Changing commit from \"26045b67c8afb164dc00ee510b1f33a8f97105f0\" to \"328ac2d4f82a76b6d66b2ef05a7b994b2663cbfd\"",
    "created_at": "2014-06-06T10:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "26045b67c8afb164dc00ee510b1f33a8f97105f0" to "328ac2d4f82a76b6d66b2ef05a7b994b2663cbfd"



---

archive/issue_comments_248566.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-06T10:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248566",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_248567.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-06T10:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248567",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_248568.json:
```json
{
    "body": "Changing commit from \"328ac2d4f82a76b6d66b2ef05a7b994b2663cbfd\" to \"eedb8b3edf7d704ddd6e66d82dc4efb62e534be8\"",
    "created_at": "2014-06-06T10:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248568",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "328ac2d4f82a76b6d66b2ef05a7b994b2663cbfd" to "eedb8b3edf7d704ddd6e66d82dc4efb62e534be8"



---

archive/issue_comments_248569.json:
```json
{
    "body": "<a id='comment:14'></a>Looks good to me. Are you finished editing? ;-)",
    "created_at": "2014-06-06T11:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248569",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>Looks good to me. Are you finished editing? ;-)



---

archive/issue_comments_248570.json:
```json
{
    "body": "<a id='comment:15'></a>Yes! Finally!! :-)",
    "created_at": "2014-06-06T11:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248570",
    "user": "https://github.com/jplab"
}
```

<a id='comment:15'></a>Yes! Finally!! :-)



---

archive/issue_comments_248571.json:
```json
{
    "body": "<a id='comment:16'></a>\"Author\" trac field must be full name, for the record",
    "created_at": "2014-06-06T12:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248571",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>"Author" trac field must be full name, for the record



---

archive/issue_comments_248572.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2014-06-06T12:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248572",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_248573.json:
```json
{
    "body": "Changing author from \"jipilab\" to \"Jean-Philippe Labb\u00e9\"",
    "created_at": "2014-06-06T12:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248573",
    "user": "https://github.com/vbraun"
}
```

Changing author from "jipilab" to "Jean-Philippe Labbé"



---

archive/issue_comments_248574.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-06-06T12:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248574",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_045441.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-08T12:09:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15547#event-45441"
}
```



---

archive/issue_comments_248575.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-06-08T12:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248575",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_248576.json:
```json
{
    "body": "Changing branch from \"u/jipilab/ticket15547\" to \"eedb8b3edf7d704ddd6e66d82dc4efb62e534be8\"",
    "created_at": "2014-06-08T12:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15547",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15547#issuecomment-248576",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jipilab/ticket15547" to "eedb8b3edf7d704ddd6e66d82dc4efb62e534be8"
