# Issue 15627: (disjoint) Union of graphs with multiple edges

archive/issues_015390.json:
```json
{
    "body": "Err... Right now, the disjoint union of two graphs with multiedges/loops is the disjoint union of those two graphs without loops nor multiple edges. That's clearly missing from the code.\n\nHere is the new behaviour\n\n```\nMultiple edges and loops::                                                                                                                                                             \n                                                                                                                                                                                               \n            sage: g = Graph(multiedges=True, loops=True)                                                                                                                                       \n            sage: g.add_edges(graphs.PetersenGraph().edges())                                                                                                                                  \n            sage: g.add_edges(graphs.PetersenGraph().edges())                                                                                                                                  \n            sage: g.add_edge(0,0)                                                                                                                                                              \n            sage: g.add_edge(0,0,\"Hey\")                                                                                                                                                        \n            sage: g.add_edge(0,9)                                                                                                                                                              \n            sage: g.add_edge(0,9)                                                                                                                                                              \n            sage: g.add_edge(0,9)                                                                                                                                                              \n            sage: (2*g.size()) == (2*g).size()                                                                                                                                                 \n            True                                                                                                                                                                               \n                                                                                                                                                                                               \n        Immutable input ? Immutable output::                                                                                                                                                   \n                                                                                                                                                                                               \n            sage: g = g.copy(immutable=True)                                                                                                                                                   \n            sage: (2*g)._backend                                                                                                                                                               \n            <class 'sage.graphs.base.static_sparse_backend.StaticSparseBackend'>  \n```\n\nI hate multiedges. I hate loops. I hate labels.\n\nNathann\n\nCC:  simonking @fchapoton\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Nathann Cohen\n\nBranch: 9f1716eea045ef52356433458dc1c6b708fdf13e\n\nDependencies: #15623\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15627\n\n",
    "closed_at": "2014-03-14T14:47:08Z",
    "created_at": "2014-01-03T21:20:45Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "(disjoint) Union of graphs with multiple edges",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15627",
    "user": "https://github.com/nathanncohen"
}
```
Err... Right now, the disjoint union of two graphs with multiedges/loops is the disjoint union of those two graphs without loops nor multiple edges. That's clearly missing from the code.

Here is the new behaviour

```
Multiple edges and loops::                                                                                                                                                             
                                                                                                                                                                                               
            sage: g = Graph(multiedges=True, loops=True)                                                                                                                                       
            sage: g.add_edges(graphs.PetersenGraph().edges())                                                                                                                                  
            sage: g.add_edges(graphs.PetersenGraph().edges())                                                                                                                                  
            sage: g.add_edge(0,0)                                                                                                                                                              
            sage: g.add_edge(0,0,"Hey")                                                                                                                                                        
            sage: g.add_edge(0,9)                                                                                                                                                              
            sage: g.add_edge(0,9)                                                                                                                                                              
            sage: g.add_edge(0,9)                                                                                                                                                              
            sage: (2*g.size()) == (2*g).size()                                                                                                                                                 
            True                                                                                                                                                                               
                                                                                                                                                                                               
        Immutable input ? Immutable output::                                                                                                                                                   
                                                                                                                                                                                               
            sage: g = g.copy(immutable=True)                                                                                                                                                   
            sage: (2*g)._backend                                                                                                                                                               
            <class 'sage.graphs.base.static_sparse_backend.StaticSparseBackend'>  
```

I hate multiedges. I hate loops. I hate labels.

Nathann

CC:  simonking @fchapoton

Reviewer: Frédéric Chapoton

Author: Nathann Cohen

Branch: 9f1716eea045ef52356433458dc1c6b708fdf13e

Dependencies: #15623

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15627





---

archive/issue_comments_198355.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-03T21:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198355",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_198356.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-01-03T21:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198356",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_198357.json:
```json
{
    "body": "<a id='comment:3'></a>There is a typo \"afinite projective plane\"\n\nI propose to replace \"No other value is available for this parameter.\" by\n\n\"For the moment, no other value is available for this parameter.\"",
    "created_at": "2014-01-04T18:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198357",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>There is a typo "afinite projective plane"

I propose to replace "No other value is available for this parameter." by

"For the moment, no other value is available for this parameter."



---

archive/issue_comments_198358.json:
```json
{
    "body": "<a id='comment:4'></a>oops, wrong ticket !",
    "created_at": "2014-01-04T18:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198358",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>oops, wrong ticket !



---

archive/issue_events_045760.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15627#event-45760"
}
```



---

archive/issue_comments_198359.json:
```json
{
    "body": "<a id='comment:6'></a>There is a failing doctest about the immutability :\n\n```\nsage: (2*g)._backend\n    Traceback (most recent call last):\n      ...\n    NotImplementedError: An immutable graph does not change name\n```\n\nI suggest also to add a reference to `:trac:`15627``",
    "created_at": "2014-03-11T12:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198359",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>There is a failing doctest about the immutability :

```
sage: (2*g)._backend
    Traceback (most recent call last):
      ...
    NotImplementedError: An immutable graph does not change name
```

I suggest also to add a reference to `:trac:`15627``



---

archive/issue_comments_198360.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-03-11T15:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198360",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_198361.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-11T17:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198361",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_198362.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-03-11T17:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198362",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_198363.json:
```json
{
    "body": "<a id='comment:9'></a>Here it is !\n\nNathann",
    "created_at": "2014-03-11T17:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198363",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>Here it is !

Nathann



---

archive/issue_comments_198364.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-11T19:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198364",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_198365.json:
```json
{
    "body": "<a id='comment:10'></a>Ok, good enough for me (even if not fully pep8 or python3)\n\n:)",
    "created_at": "2014-03-11T19:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198365",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>Ok, good enough for me (even if not fully pep8 or python3)

:)



---

archive/issue_comments_198366.json:
```json
{
    "body": "<a id='comment:11'></a>Ahahah. Thanks for the review :-)\n\nNathann",
    "created_at": "2014-03-11T19:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198366",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>Ahahah. Thanks for the review :-)

Nathann



---

archive/issue_comments_198367.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-14T14:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15627#issuecomment-198367",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_045761.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-14T14:47:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15627",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15627#event-45761"
}
```
