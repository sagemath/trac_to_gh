# Issue 15456: fix bug in has_right/left_descents in Weyl group code

archive/issues_015219.json:
```json
{
    "assignees": [],
    "body": "The `has_right_descents` method in `WeylGroup` element methods calls `has_left_descents` and vice versa.  This causes an error in the following example.\n\n```\nsage: W = WeylGroup(['A',4])\nsage: w = W.from_reduced_word([3,4,2])\nsage: w.has_right_descent(3)\nTraceback (click to the left of this block for traceback)\n...\nRuntimeError: maximum recursion depth exceeded\n```\n\nThe doc tests for this method make calls to `CoxeterGroup` code to test it and so all tests pass.\n\nCC:  @sdenton4 @anneschilling @nthiery @sagetrac-sage-combinat\n\nKeywords: **coxeter, sd65**\n\nBranch/Commit: **[public/15456](https://github.com/sagemath/sagetrac-mirror/tree/public/15456) @ [45ff0e3](https://github.com/sagemath/sagetrac-mirror/commit/45ff0e370aea78c35197688d8983e9bfd1c00b51)**\n\nReviewer: **Anne Schilling, Mike Zabrocki**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15456_\n\n",
    "closed_at": "2015-07-17T20:07:16Z",
    "created_at": "2013-11-26T22:10:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fix bug in has_right/left_descents in Weyl group code",
    "type": "issue",
    "updated_at": "2015-07-17T20:07:16Z",
    "url": "https://github.com/sagemath/sage/issues/15456",
    "user": "https://github.com/zabrocki"
}
```
The `has_right_descents` method in `WeylGroup` element methods calls `has_left_descents` and vice versa.  This causes an error in the following example.

```
sage: W = WeylGroup(['A',4])
sage: w = W.from_reduced_word([3,4,2])
sage: w.has_right_descent(3)
Traceback (click to the left of this block for traceback)
...
RuntimeError: maximum recursion depth exceeded
```

The doc tests for this method make calls to `CoxeterGroup` code to test it and so all tests pass.

CC:  @sdenton4 @anneschilling @nthiery @sagetrac-sage-combinat

Keywords: **coxeter, sd65**

Branch/Commit: **[public/15456](https://github.com/sagemath/sagetrac-mirror/tree/public/15456) @ [45ff0e3](https://github.com/sagemath/sagetrac-mirror/commit/45ff0e370aea78c35197688d8983e9bfd1c00b51)**

Reviewer: **Anne Schilling, Mike Zabrocki**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/15456_





---

archive/issue_events_202706.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-26T22:10:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202706"
}
```



---

archive/issue_events_202707.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-26T22:10:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202707"
}
```



---

archive/issue_events_202708.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-26T22:10:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202708"
}
```



---

archive/issue_events_202709.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-26T22:10:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202709"
}
```



---

archive/issue_comments_194932.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nHi Mike!\n\nThis is not a bug but a feature :-)\n\nWhen implementing a Coxeter group one can choose to either implement has_right_descent or has_left_descent (or both), and the Coxeter group category provides a default implementation for the other, if needed.\n\nGranted, it would be nice if there was a nicer error message mentionning that at least one of has_left_descent or has_right_descent should be implemented. However, at this point, we have not generic infrastructure for this kind of situation, and it would be a bit tedious to do it by hand (but ideas on how to handle this are welcome!).\n\nCheers,",
    "created_at": "2013-11-26T22:20:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194932",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:1" align="right">Comment 1</div>

Hi Mike!

This is not a bug but a feature :-)

When implementing a Coxeter group one can choose to either implement has_right_descent or has_left_descent (or both), and the Coxeter group category provides a default implementation for the other, if needed.

Granted, it would be nice if there was a nicer error message mentionning that at least one of has_left_descent or has_right_descent should be implemented. However, at this point, we have not generic infrastructure for this kind of situation, and it would be a bit tedious to do it by hand (but ideas on how to handle this are welcome!).

Cheers,



---

archive/issue_comments_194933.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nHi Nicolas,\n\nThis can't be a feature.  In `WeylGroup` this is a bug.  In `CoxeterGroup` it is correct.\n\nIn `WeylGroups` the method `has_right_descent` and `has_left_descent` don't do anything except call each other.",
    "created_at": "2013-11-26T22:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194933",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:2" align="right">Comment 2</div>

Hi Nicolas,

This can't be a feature.  In `WeylGroup` this is a bug.  In `CoxeterGroup` it is correct.

In `WeylGroups` the method `has_right_descent` and `has_left_descent` don't do anything except call each other.



---

archive/issue_comments_194934.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBTW, in `WeylGroup` the method `has_descent` doesn't call either `has_right_descent` or `has_left_descent` and decides if there is a right/left descent by another method.",
    "created_at": "2013-11-26T22:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194934",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:3" align="right">Comment 3</div>

BTW, in `WeylGroup` the method `has_descent` doesn't call either `has_right_descent` or `has_left_descent` and decides if there is a right/left descent by another method.



---

archive/issue_comments_194935.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nRight. The proper specification is:\n\n- at least one of has_descent / has_right_descent / has_left_descent should be implemented\n- in generic code, always use has_descent, not has_*_descent.\n\nThis definitely should be put in the doc if not yet there.",
    "created_at": "2013-11-26T22:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194935",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:4" align="right">Comment 4</div>

Right. The proper specification is:

- at least one of has_descent / has_right_descent / has_left_descent should be implemented
- in generic code, always use has_descent, not has_*_descent.

This definitely should be put in the doc if not yet there.



---

archive/issue_comments_194936.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nI take the part about it being correct in `CoxeterGroup` back.  It seems to only be correct for the `CoxeterGroups().example()`.\n\nI assume that you are right in that \"Coxeter group category provides a default implementation for the other\" but no one has implemented `has_right_descent` or `has_left_descent` for any of the finite or affine `WeylGroups` or `CoxeterGroups` (to an end user of these groups, this is a bug because it should just raise a `Not Implemented` error).\n\nIs the correct solution then that \n\n(1) someone needs to implement them for each of the types \n\n(2) that the default implementation should be `has_left_descent` should call `has_descent(self, side=\"left\")`\n\n(3) the default implementation of `has_right_descent` should raise a `Not Implemented` error\n\n(4) something else?",
    "created_at": "2013-11-26T22:52:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194936",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:5" align="right">Comment 5</div>

I take the part about it being correct in `CoxeterGroup` back.  It seems to only be correct for the `CoxeterGroups().example()`.

I assume that you are right in that "Coxeter group category provides a default implementation for the other" but no one has implemented `has_right_descent` or `has_left_descent` for any of the finite or affine `WeylGroups` or `CoxeterGroups` (to an end user of these groups, this is a bug because it should just raise a `Not Implemented` error).

Is the correct solution then that 

(1) someone needs to implement them for each of the types 

(2) that the default implementation should be `has_left_descent` should call `has_descent(self, side="left")`

(3) the default implementation of `has_right_descent` should raise a `Not Implemented` error

(4) something else?



---

archive/issue_events_202710.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202710"
}
```



---

archive/issue_events_202711.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202711"
}
```



---

archive/issue_comments_194937.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nHere is a possible solution. Please review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/549f238c87e446116457d645c2b0171b423c02df\">549f238</a></td><td><code>trac #15456 tentative solution</code></td></tr></table>\n",
    "created_at": "2014-03-05T16:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194937",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">Comment 7</div>

Here is a possible solution. Please review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/549f238c87e446116457d645c2b0171b423c02df">549f238</a></td><td><code>trac #15456 tentative solution</code></td></tr></table>




---

archive/issue_comments_194938.json:
```json
{
    "body": "Commit: **[549f238](https://github.com/sagemath/sagetrac-mirror/commit/549f238c87e446116457d645c2b0171b423c02df)**",
    "created_at": "2014-03-05T16:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194938",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[549f238](https://github.com/sagemath/sagetrac-mirror/commit/549f238c87e446116457d645c2b0171b423c02df)**



---

archive/issue_events_202712.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-03-05T16:25:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202712"
}
```



---

archive/issue_comments_194939.json:
```json
{
    "body": "Branch: **[u/chapoton/15456](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/15456)**",
    "created_at": "2014-03-05T16:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194939",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/15456](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/15456)**



---

archive/issue_comments_194940.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-03-05T16:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194940",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_comments_194941.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI think what we should do is have `has_left_descent` call `has_descent(self, side=\"right\")` and `has_right_descent` call `has_descent(self, side=\"left\")`.",
    "created_at": "2014-03-05T16:36:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194941",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">Comment 8</div>

I think what we should do is have `has_left_descent` call `has_descent(self, side="right")` and `has_right_descent` call `has_descent(self, side="left")`.



---

archive/issue_comments_194942.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\n8)\n\nIndeed ? well, please do that if you think this is the thing to do.",
    "created_at": "2014-03-05T16:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194942",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">Comment 9</div>

8)

Indeed ? well, please do that if you think this is the thing to do.



---

archive/issue_comments_194943.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\ntscrim: That's what WAS happening, but if you instantiate an abstract Weyl Group or Coxeter Group it leads to an infinite loop, which is a bug.  What we need is a NotImplemented error if neither side is implemented, and the appropriate call to the implemented 'side' if one side or the other is concretely implemented but not the other.\n\nI see two possible ways forward:\n1) The default Coxeter/Weyl Group 'has_x_descent' methods just give a NotImplemented error, pushing it to the person creating a concrete realization to actually implement them correctly and not give an infinite loop, or\n2) Introduce some kind of '_is_implemented' flags for checking left and right descent, which are false by default, and set to true if there's a concrete implementation on one side that the other can use.  Then if it's true, we call the other side, and otherwise raise a NotImplemented error.\n\nOption 2 seems doable but introduces an Obscure Thing for the implementers of Coxeter groups to keep track of.  As such, I would advocate for Option 1.",
    "created_at": "2014-03-05T16:49:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194943",
    "user": "https://github.com/sdenton4"
}
```

<div id="comment:10" align="right">Comment 10</div>

tscrim: That's what WAS happening, but if you instantiate an abstract Weyl Group or Coxeter Group it leads to an infinite loop, which is a bug.  What we need is a NotImplemented error if neither side is implemented, and the appropriate call to the implemented 'side' if one side or the other is concretely implemented but not the other.

I see two possible ways forward:
1) The default Coxeter/Weyl Group 'has_x_descent' methods just give a NotImplemented error, pushing it to the person creating a concrete realization to actually implement them correctly and not give an infinite loop, or
2) Introduce some kind of '_is_implemented' flags for checking left and right descent, which are false by default, and set to true if there's a concrete implementation on one side that the other can use.  Then if it's true, we call the other side, and otherwise raise a NotImplemented error.

Option 2 seems doable but introduces an Obscure Thing for the implementers of Coxeter groups to keep track of.  As such, I would advocate for Option 1.



---

archive/issue_comments_194944.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nIt's also worth noting that sometimes one 'side' or the other is simply faster for computing descents.  This is clearly true for simple permutations: one can check in constant time if there's a right descent, but it takes O(n) to check for a left descent.  So then it would be bad news bears to have a default implementation of the right descent that calls the left decent.\n\nBut in other cases, it's maybe the left descent that's faster to compute, so you wouldn't want the reverse situation, either...  \n\nSo I think I would advocate against breaking symmetry at the Category level, and just raise NotImplemented errors for both sides.",
    "created_at": "2014-03-05T16:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194944",
    "user": "https://github.com/sdenton4"
}
```

<div id="comment:11" align="right">Comment 11</div>

It's also worth noting that sometimes one 'side' or the other is simply faster for computing descents.  This is clearly true for simple permutations: one can check in constant time if there's a right descent, but it takes O(n) to check for a left descent.  So then it would be bad news bears to have a default implementation of the right descent that calls the left decent.

But in other cases, it's maybe the left descent that's faster to compute, so you wouldn't want the reverse situation, either...  

So I think I would advocate against breaking symmetry at the Category level, and just raise NotImplemented errors for both sides.



---

archive/issue_comments_194945.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nI do not understand why my solution is not good enough. From my point of view, the function `has_descent` in `weyl_group.py` should rather be named `has_right_descent`, because it is necessary to have at least one of the two (left or right) descent methods to avoid the infinite loop. I think that `has_descent` should only be defined for abstract Coxeter groups.",
    "created_at": "2014-03-05T17:13:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194945",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:12" align="right">Comment 12</div>

I do not understand why my solution is not good enough. From my point of view, the function `has_descent` in `weyl_group.py` should rather be named `has_right_descent`, because it is necessary to have at least one of the two (left or right) descent methods to avoid the infinite loop. I think that `has_descent` should only be defined for abstract Coxeter groups.



---

archive/issue_comments_194946.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nHey Tom,\n\nIf we made both left/right `@abstract_method`'s, then we would have to implement all methods. If we made them optional, I feel that we'd get bug reports about these not being implemented. The problem is that `has_descent()` wasn't being brought into the loop, so if that was the only thing implemented, then one couldn't use `has_left_descent()` as expects. Thus [the spec](#comment%3A4):\n\n>* at least one of has_descent / has_right_descent / has_left_descent should be implemented\n\nwould be satisfied in my proposal.\n\nAlthough I think we could do a modified version of your proposal 1) by implementing some kind of modification to `@abstract_method`. Something like\n\n```\n@abstract_method(circular=['foo', 'bar'])\n```\nwhere if `foo` and `bar` were also called, then error out.",
    "created_at": "2014-03-05T17:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194946",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">Comment 13</div>

Hey Tom,

If we made both left/right `@abstract_method`'s, then we would have to implement all methods. If we made them optional, I feel that we'd get bug reports about these not being implemented. The problem is that `has_descent()` wasn't being brought into the loop, so if that was the only thing implemented, then one couldn't use `has_left_descent()` as expects. Thus [the spec](#comment%3A4):

>* at least one of has_descent / has_right_descent / has_left_descent should be implemented

would be satisfied in my proposal.

Although I think we could do a modified version of your proposal 1) by implementing some kind of modification to `@abstract_method`. Something like

```
@abstract_method(circular=['foo', 'bar'])
```
where if `foo` and `bar` were also called, then error out.



---

archive/issue_comments_194947.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@fchapoton](#comment%3A12):\n> I do not understand why my solution is not good enough. From my point of view, the function `has_descent` in `weyl_group.py` should rather be named `has_right_descent`, because it is necessary to have at least one of the two (left or right) descent methods to avoid the infinite loop. I think that `has_descent` should only be defined for abstract Coxeter groups.\n\nThe `has_descent()` in `weyl_group.py` works for both sides, and by simply doing an alias, you're exposing invalid (at least 'should not be used') arguments in `has_right_descent()`. In essence what you're doing is saying `has_right_descent()` should call `has_descent()` with the appropriate arguments. I'm saying let's do this in a generic fashion to follow the spec (I think [comment:4](#comment%3A4) point 1 is in the doc already, but I haven't checked).",
    "created_at": "2014-03-05T17:25:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194947",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@fchapoton](#comment%3A12):
> I do not understand why my solution is not good enough. From my point of view, the function `has_descent` in `weyl_group.py` should rather be named `has_right_descent`, because it is necessary to have at least one of the two (left or right) descent methods to avoid the infinite loop. I think that `has_descent` should only be defined for abstract Coxeter groups.

The `has_descent()` in `weyl_group.py` works for both sides, and by simply doing an alias, you're exposing invalid (at least 'should not be used') arguments in `has_right_descent()`. In essence what you're doing is saying `has_right_descent()` should call `has_descent()` with the appropriate arguments. I'm saying let's do this in a generic fashion to follow the spec (I think [comment:4](#comment%3A4) point 1 is in the doc already, but I haven't checked).



---

archive/issue_comments_194948.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nI couldn't find an indication that the documentation specifies that at least one of has_descent / has_right_descent / has_left_descent should be implemented.\n\nInstead it seems to be that the default implementation of `has_descent` calls `has_left`or`right_descent`\n\nMaybe we should throw checks in `_test_has_descent` to ensure that all of the functions work.",
    "created_at": "2014-03-05T17:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194948",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:15" align="right">Comment 15</div>

I couldn't find an indication that the documentation specifies that at least one of has_descent / has_right_descent / has_left_descent should be implemented.

Instead it seems to be that the default implementation of `has_descent` calls `has_left`or`right_descent`

Maybe we should throw checks in `_test_has_descent` to ensure that all of the functions work.



---

archive/issue_comments_194949.json:
```json
{
    "body": "Changed commit from **[549f238](https://github.com/sagemath/sagetrac-mirror/commit/549f238c87e446116457d645c2b0171b423c02df)** to **[d0bdcca](https://github.com/sagemath/sagetrac-mirror/commit/d0bdccadb38c68a0019d2056daebfd601b8910cb)**",
    "created_at": "2014-03-05T20:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194949",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[549f238](https://github.com/sagemath/sagetrac-mirror/commit/549f238c87e446116457d645c2b0171b423c02df)** to **[d0bdcca](https://github.com/sagemath/sagetrac-mirror/commit/d0bdccadb38c68a0019d2056daebfd601b8910cb)**



---

archive/issue_comments_194950.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0bdccadb38c68a0019d2056daebfd601b8910cb\">d0bdcca</a></td><td><code>trac #15456 another try</code></td></tr></table>\n",
    "created_at": "2014-03-05T20:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194950",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16" align="right">Comment 16</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0bdccadb38c68a0019d2056daebfd601b8910cb">d0bdcca</a></td><td><code>trac #15456 another try</code></td></tr></table>




---

archive/issue_comments_194951.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nHere is new (better) proposal:\n\nThe main idea is \"please never override has_descent\" and \"please implement either has_left_descent or has_right_descent\" in every instance (if only as a place holder raising `NotImplementedError`).\n\nIn `categories/coxeter_group`, there is only the mechanism:\n\n* has_descent calls either has_left_descent or has right_descent\n* they call each other\n\nIn instances of Coxeter group, one implements either has_left_descent or has_right_descent or both. Even in a minimalistic way, raising a `NotImplementedError`.\n\nWhat do you think ?",
    "created_at": "2014-03-05T20:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194951",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">Comment 17</div>

Here is new (better) proposal:

The main idea is "please never override has_descent" and "please implement either has_left_descent or has_right_descent" in every instance (if only as a place holder raising `NotImplementedError`).

In `categories/coxeter_group`, there is only the mechanism:

* has_descent calls either has_left_descent or has right_descent
* they call each other

In instances of Coxeter group, one implements either has_left_descent or has_right_descent or both. Even in a minimalistic way, raising a `NotImplementedError`.

What do you think ?



---

archive/issue_comments_194952.json:
```json
{
    "body": "Changed commit from **[d0bdcca](https://github.com/sagemath/sagetrac-mirror/commit/d0bdccadb38c68a0019d2056daebfd601b8910cb)** to **[bef966f](https://github.com/sagemath/sagetrac-mirror/commit/bef966f7e6f1ce42da5578c8da4df8d5ebdf9f9b)**",
    "created_at": "2014-03-05T20:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194952",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d0bdcca](https://github.com/sagemath/sagetrac-mirror/commit/d0bdccadb38c68a0019d2056daebfd601b8910cb)** to **[bef966f](https://github.com/sagemath/sagetrac-mirror/commit/bef966f7e6f1ce42da5578c8da4df8d5ebdf9f9b)**



---

archive/issue_comments_194953.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bef966f7e6f1ce42da5578c8da4df8d5ebdf9f9b\">bef966f</a></td><td><code>trac #15456 remove two unused lines</code></td></tr></table>\n",
    "created_at": "2014-03-05T20:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194953",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bef966f7e6f1ce42da5578c8da4df8d5ebdf9f9b">bef966f</a></td><td><code>trac #15456 remove two unused lines</code></td></tr></table>




---

archive/issue_comments_194954.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nI think this is a good solution and probably what was intended to happen when the `CoxeterGroup` code was originally written.  Do others agree?",
    "created_at": "2014-03-06T12:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194954",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:19" align="right">Comment 19</div>

I think this is a good solution and probably what was intended to happen when the `CoxeterGroup` code was originally written.  Do others agree?



---

archive/issue_comments_194955.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nI don't like having the warning saying \"don't override this\", especially since I don't see  a good reason for doing this (and there's no \"final\" semantic in python). I am in favor of saying we must implement either `has_left_descent()` or `has_right_descent()`. Also possibly implementing has_left/right_descent()` for `weyl_group.py` to call `has_descent()`.\n\nAnyways, I've put my working version on trac at `u/tscrim/15456`. I also gave default implementations of `has_left/right_descent()` to `weyl_group.py` for speed. Although now that I've done the implementation, I'm less convinced of my suggestion. Perhaps what would be best is some category magic. We test upon creation of a Coxeter group to see if any of the methods have been implemented. Thus we do the following:\n\n- If `has_descent()` has been implemented, give default `has_*_descent()` call `has_descent()` with the appropriate args for those not implemented.\n- If none were implemented, error out on construction.\n- Otherwise set it up as we have it now.\n\nMaybe this is heavy-handed?\n\nNevertheless, here are some timings. I'm using the example from the ticket description. Baseline:\n\n```\nsage: %timeit w.has_descent(3, side=\"left\")\n1000 loops, best of 3: 860 us per loop\nsage: %timeit w.has_descent(3, side=\"left\")\n1000 loops, best of 3: 820 us per loop\nsage: %timeit w.has_descent(3, side=\"right\")\n1000 loops, best of 3: 200 us per loop\nsage: %timeit w.has_descent(3, side=\"right\")\n1000 loops, best of 3: 209 us per loop\n```\nWith Frederic's branch:\n\n```\nsage: %timeit w.has_descent(3, side=\"left\")\n1000 loops, best of 3: 987 us per loop\nsage: %timeit w.has_left_descent(3)\n1000 loops, best of 3: 929 us per loop\nsage: %timeit w.has_descent(3, side=\"right\")\n1000 loops, best of 3: 204 us per loop\nsage: %timeit w.has_right_descent(3)\n1000 loops, best of 3: 215 us per loop\n```\nWith my branch:\n\n```\nsage: %timeit w.has_descent(3, side=\"left\")\n1000 loops, best of 3: 867 us per loop\nsage: %timeit w.has_left_descent(3)\n1000 loops, best of 3: 902 us per loop\nsage: %timeit w.has_descent(3, side=\"right\")\n1000 loops, best of 3: 200 us per loop\nsage: %timeit w.has_right_descent(3)\n1000 loops, best of 3: 191 us per loop\n```",
    "created_at": "2014-03-06T18:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194955",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">Comment 20</div>

I don't like having the warning saying "don't override this", especially since I don't see  a good reason for doing this (and there's no "final" semantic in python). I am in favor of saying we must implement either `has_left_descent()` or `has_right_descent()`. Also possibly implementing has_left/right_descent()` for `weyl_group.py` to call `has_descent()`.

Anyways, I've put my working version on trac at `u/tscrim/15456`. I also gave default implementations of `has_left/right_descent()` to `weyl_group.py` for speed. Although now that I've done the implementation, I'm less convinced of my suggestion. Perhaps what would be best is some category magic. We test upon creation of a Coxeter group to see if any of the methods have been implemented. Thus we do the following:

- If `has_descent()` has been implemented, give default `has_*_descent()` call `has_descent()` with the appropriate args for those not implemented.
- If none were implemented, error out on construction.
- Otherwise set it up as we have it now.

Maybe this is heavy-handed?

Nevertheless, here are some timings. I'm using the example from the ticket description. Baseline:

```
sage: %timeit w.has_descent(3, side="left")
1000 loops, best of 3: 860 us per loop
sage: %timeit w.has_descent(3, side="left")
1000 loops, best of 3: 820 us per loop
sage: %timeit w.has_descent(3, side="right")
1000 loops, best of 3: 200 us per loop
sage: %timeit w.has_descent(3, side="right")
1000 loops, best of 3: 209 us per loop
```
With Frederic's branch:

```
sage: %timeit w.has_descent(3, side="left")
1000 loops, best of 3: 987 us per loop
sage: %timeit w.has_left_descent(3)
1000 loops, best of 3: 929 us per loop
sage: %timeit w.has_descent(3, side="right")
1000 loops, best of 3: 204 us per loop
sage: %timeit w.has_right_descent(3)
1000 loops, best of 3: 215 us per loop
```
With my branch:

```
sage: %timeit w.has_descent(3, side="left")
1000 loops, best of 3: 867 us per loop
sage: %timeit w.has_left_descent(3)
1000 loops, best of 3: 902 us per loop
sage: %timeit w.has_descent(3, side="right")
1000 loops, best of 3: 200 us per loop
sage: %timeit w.has_right_descent(3)
1000 loops, best of 3: 191 us per loop
```



---

archive/issue_comments_194956.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nSo, what shall we do here ?\n\nIf I understand your proposal, when no `has_something` is implemented in an instance of Coxeter group, one has two different possibilities of infinite loop instead of one.\n\nSupose now that I only implement `has_left` and that I call `has_right`. This will result in an infinite loop in your proposal, no ?",
    "created_at": "2014-03-07T21:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194956",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">Comment 21</div>

So, what shall we do here ?

If I understand your proposal, when no `has_something` is implemented in an instance of Coxeter group, one has two different possibilities of infinite loop instead of one.

Supose now that I only implement `has_left` and that I call `has_right`. This will result in an infinite loop in your proposal, no ?



---

archive/issue_comments_194957.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nAh, I made a correction in my implementation `has_right(i)` called `(~self).has_descent(i, side='left')`.\n\nI'm not so sure now what the best course of action is. From the above, having to create the inverse is slow (at least generically). I'm partially inclined to just implement `has_left` and `has_right` for Weyl groups which calls `has_descent(i, side=*)` to fix the problem at present. In any of the solutions except my initial one, I would think the speed should roughly be the same...",
    "created_at": "2014-03-07T22:59:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194957",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">Comment 22</div>

Ah, I made a correction in my implementation `has_right(i)` called `(~self).has_descent(i, side='left')`.

I'm not so sure now what the best course of action is. From the above, having to create the inverse is slow (at least generically). I'm partially inclined to just implement `has_left` and `has_right` for Weyl groups which calls `has_descent(i, side=*)` to fix the problem at present. In any of the solutions except my initial one, I would think the speed should roughly be the same...



---

archive/issue_comments_194958.json:
```json
{
    "body": "Changed keywords from **** to **coxeter**",
    "created_at": "2014-03-14T16:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194958",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from **** to **coxeter**



---

archive/issue_comments_194959.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1deaa5708d0f9e08e02d24c8cb5a0a39328453b\">c1deaa5</a></td><td><code>Merge branch 'u/chapoton/15456' of ssh://trac.sagemath.org:22/sage into 15456</code></td></tr></table>\n",
    "created_at": "2014-04-08T19:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194959",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24" align="right">Comment 24</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1deaa5708d0f9e08e02d24c8cb5a0a39328453b">c1deaa5</a></td><td><code>Merge branch 'u/chapoton/15456' of ssh://trac.sagemath.org:22/sage into 15456</code></td></tr></table>




---

archive/issue_comments_194960.json:
```json
{
    "body": "Changed commit from **[bef966f](https://github.com/sagemath/sagetrac-mirror/commit/bef966f7e6f1ce42da5578c8da4df8d5ebdf9f9b)** to **[c1deaa5](https://github.com/sagemath/sagetrac-mirror/commit/c1deaa5708d0f9e08e02d24c8cb5a0a39328453b)**",
    "created_at": "2014-04-08T19:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194960",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bef966f](https://github.com/sagemath/sagetrac-mirror/commit/bef966f7e6f1ce42da5578c8da4df8d5ebdf9f9b)** to **[c1deaa5](https://github.com/sagemath/sagetrac-mirror/commit/c1deaa5708d0f9e08e02d24c8cb5a0a39328453b)**



---

archive/issue_comments_194961.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nI am comfortable with accepting Fr\u00e9d\u00e9ric's changes.  From Nicolas' comments I think that the original implementation meant to have `has_descent` should call either `has_left` or `has_right` and at least one of those needs to be implemented.\n\nI checked that at least the `_test_has_descent` will fail when one of these is not implemented by going into a Coxeter group implementation, deleting the `has_right_descent` method, and then checking that `G._test_has_descent()` raises an error.  The problem is that all tests will pass in the implementation of a Coxeter group unless the `_test_has_descent` method is called (which was probably always the case and the source of the original problem).  Is there a way of ensuring that a test of the left and right functions will be made for future implementations?  We can just leave it up to the warning which is already in the documentation.",
    "created_at": "2014-04-10T19:10:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194961",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:25" align="right">Comment 25</div>

I am comfortable with accepting Frédéric's changes.  From Nicolas' comments I think that the original implementation meant to have `has_descent` should call either `has_left` or `has_right` and at least one of those needs to be implemented.

I checked that at least the `_test_has_descent` will fail when one of these is not implemented by going into a Coxeter group implementation, deleting the `has_right_descent` method, and then checking that `G._test_has_descent()` raises an error.  The problem is that all tests will pass in the implementation of a Coxeter group unless the `_test_has_descent` method is called (which was probably always the case and the source of the original problem).  Is there a way of ensuring that a test of the left and right functions will be made for future implementations?  We can just leave it up to the warning which is already in the documentation.



---

archive/issue_comments_194962.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5922bda3f092d44b86b3a32b34b1d0a64834713c\">5922bda</a></td><td><code>Merge branch 'u/chapoton/15456' of ssh://trac.sagemath.org:22/sage into 15456</code></td></tr></table>\n",
    "created_at": "2014-04-18T19:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194962",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26" align="right">Comment 26</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5922bda3f092d44b86b3a32b34b1d0a64834713c">5922bda</a></td><td><code>Merge branch 'u/chapoton/15456' of ssh://trac.sagemath.org:22/sage into 15456</code></td></tr></table>




---

archive/issue_comments_194963.json:
```json
{
    "body": "Changed commit from **[c1deaa5](https://github.com/sagemath/sagetrac-mirror/commit/c1deaa5708d0f9e08e02d24c8cb5a0a39328453b)** to **[5922bda](https://github.com/sagemath/sagetrac-mirror/commit/5922bda3f092d44b86b3a32b34b1d0a64834713c)**",
    "created_at": "2014-04-18T19:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194963",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c1deaa5](https://github.com/sagemath/sagetrac-mirror/commit/c1deaa5708d0f9e08e02d24c8cb5a0a39328453b)** to **[5922bda](https://github.com/sagemath/sagetrac-mirror/commit/5922bda3f092d44b86b3a32b34b1d0a64834713c)**



---

archive/issue_events_202713.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202713"
}
```



---

archive/issue_events_202714.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202714"
}
```



---

archive/issue_events_202715.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202715"
}
```



---

archive/issue_events_202716.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202716"
}
```



---

archive/issue_events_202717.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-14T10:27:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202717"
}
```



---

archive/issue_events_202718.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-14T10:27:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202718"
}
```



---

archive/issue_events_202719.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-23T18:17:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202719"
}
```



---

archive/issue_events_202720.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-23T18:17:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202720"
}
```



---

archive/issue_events_202721.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-05-22T20:26:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202721"
}
```



---

archive/issue_events_202722.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-05-22T20:26:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202722"
}
```



---

archive/issue_comments_194964.json:
```json
{
    "body": "Changed branch from **[u/chapoton/15456](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/15456)** to **[public/15456](https://github.com/sagemath/sagetrac-mirror/tree/public/15456)**",
    "created_at": "2015-06-08T16:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194964",
    "user": "https://github.com/anneschilling"
}
```

Changed branch from **[u/chapoton/15456](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/15456)** to **[public/15456](https://github.com/sagemath/sagetrac-mirror/tree/public/15456)**



---

archive/issue_comments_194965.json:
```json
{
    "body": "Changed commit from **[5922bda](https://github.com/sagemath/sagetrac-mirror/commit/5922bda3f092d44b86b3a32b34b1d0a64834713c)** to **[45ff0e3](https://github.com/sagemath/sagetrac-mirror/commit/45ff0e370aea78c35197688d8983e9bfd1c00b51)**",
    "created_at": "2015-06-08T16:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194965",
    "user": "https://github.com/anneschilling"
}
```

Changed commit from **[5922bda](https://github.com/sagemath/sagetrac-mirror/commit/5922bda3f092d44b86b3a32b34b1d0a64834713c)** to **[45ff0e3](https://github.com/sagemath/sagetrac-mirror/commit/45ff0e370aea78c35197688d8983e9bfd1c00b51)**



---

archive/issue_comments_194966.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45ff0e370aea78c35197688d8983e9bfd1c00b51\">45ff0e3</a></td><td><code>Merge branch 'develop' into u/chapoton/15456</code></td></tr></table>\n",
    "created_at": "2015-06-08T16:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194966",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:32" align="right">Comment 32</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45ff0e370aea78c35197688d8983e9bfd1c00b51">45ff0e3</a></td><td><code>Merge branch 'develop' into u/chapoton/15456</code></td></tr></table>




---

archive/issue_comments_194967.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@zabrocki](#comment%3A25):\n> I am comfortable with accepting Fr\u00e9d\u00e9ric's changes.  From Nicolas' comments I think that the original implementation meant to have `has_descent` should call either `has_left` or `has_right` and at least one of those needs to be implemented.\n> \n> I checked that at least the `_test_has_descent` will fail when one of these is not implemented by going into a Coxeter group implementation, deleting the `has_right_descent` method, and then checking that `G._test_has_descent()` raises an error.  The problem is that all tests will pass in the implementation of a Coxeter group unless the `_test_has_descent` method is called (which was probably always the case and the source of the original problem).  Is there a way of ensuring that a test of the left and right functions will be made for future implementations?  We can just leave it up to the warning which is already in the documentation.\n\nI am ok with Federic's solution. All tests pass, so I think this should go in.",
    "created_at": "2015-06-08T16:55:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194967",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@zabrocki](#comment%3A25):
> I am comfortable with accepting Frédéric's changes.  From Nicolas' comments I think that the original implementation meant to have `has_descent` should call either `has_left` or `has_right` and at least one of those needs to be implemented.
> 
> I checked that at least the `_test_has_descent` will fail when one of these is not implemented by going into a Coxeter group implementation, deleting the `has_right_descent` method, and then checking that `G._test_has_descent()` raises an error.  The problem is that all tests will pass in the implementation of a Coxeter group unless the `_test_has_descent` method is called (which was probably always the case and the source of the original problem).  Is there a way of ensuring that a test of the left and right functions will be made for future implementations?  We can just leave it up to the warning which is already in the documentation.

I am ok with Federic's solution. All tests pass, so I think this should go in.



---

archive/issue_comments_194968.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nAnne looked at the code as well.  We both approve and I am setting to positive review.",
    "created_at": "2015-06-08T16:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194968",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:34" align="right">Comment 34</div>

Anne looked at the code as well.  We both approve and I am setting to positive review.



---

archive/issue_events_202723.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-06-08T16:56:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202723"
}
```



---

archive/issue_events_202724.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2015-06-08T16:56:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202724"
}
```



---

archive/issue_comments_194969.json:
```json
{
    "body": "Reviewer: **Anne Schilling, Mike Zabrocki**",
    "created_at": "2015-06-08T16:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194969",
    "user": "https://github.com/zabrocki"
}
```

Reviewer: **Anne Schilling, Mike Zabrocki**



---

archive/issue_comments_194970.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nThis will conflict will #18610 and is probably a duplicate. The review is coming too late.\n\nThis need to be checked, nevertheless.",
    "created_at": "2015-06-08T17:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194970",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:35" align="right">Comment 35</div>

This will conflict will #18610 and is probably a duplicate. The review is coming too late.

This need to be checked, nevertheless.



---

archive/issue_events_202725.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2015-06-08T19:46:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202725"
}
```



---

archive/issue_events_202726.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2015-06-08T19:46:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202726"
}
```



---

archive/issue_events_202727.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2015-06-08T19:47:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202727"
}
```



---

archive/issue_events_202728.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2015-06-08T19:47:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202728"
}
```



---

archive/issue_events_202729.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2015-06-08T19:47:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202729"
}
```



---

archive/issue_comments_194971.json:
```json
{
    "body": "Changed keywords from **coxeter** to **coxeter, sd65**",
    "created_at": "2015-06-09T11:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194971",
    "user": "https://github.com/zabrocki"
}
```

Changed keywords from **coxeter** to **coxeter, sd65**



---

archive/issue_comments_194972.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nok, let us consider that this has been solved by #18610",
    "created_at": "2015-06-24T19:30:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194972",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:39" align="right">Comment 39</div>

ok, let us consider that this has been solved by #18610



---

archive/issue_events_202730.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-06-24T19:30:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202730"
}
```



---

archive/issue_events_202731.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-06-24T19:30:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202731"
}
```



---

archive/issue_comments_194973.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@fchapoton](#comment%3A39):\n> ok, let us consider that this has been solved by #18610\n\nWhy are you setting it to positive review then and not leave it at sage-duplicate?",
    "created_at": "2015-06-24T19:35:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194973",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@fchapoton](#comment%3A39):
> ok, let us consider that this has been solved by #18610

Why are you setting it to positive review then and not leave it at sage-duplicate?



---

archive/issue_comments_194974.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nThis is 'positive review as a duplicate', the usual standard procedure, so that it can be closed!",
    "created_at": "2015-06-24T19:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15456#issuecomment-194974",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:41" align="right">Comment 41</div>

This is 'positive review as a duplicate', the usual standard procedure, so that it can be closed!



---

archive/issue_events_202732.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-17T20:07:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202732"
}
```



---

archive/issue_events_202733.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-17T20:07:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202733"
}
```



---

archive/issue_events_202734.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-17T20:07:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15456",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15456#event-202734"
}
```
