# Issue 15227: cython debug information directory (patch)

archive/issues_014990.json:
```json
{
    "body": "There is no way to specify the location where cython writes its debug information (`--gdb` option). This is required whenever cython is executed from a different directory because of other hardwired paths that cannot be overridden (yet).\n\n**Keywords:** cython debug gdb\n\n**Branch:** [u/felixs/cython_dbg](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/cython_dbg)\n\n**Commit:** [f82b4226e689e4d0dc211afc2b8ad6cbfc3031ac](https://github.com/sagemath/sagetrac-mirror/commit/f82b4226e689e4d0dc211afc2b8ad6cbfc3031ac)\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Reviewer:** Nathann Cohen\n\n**Author:** Felix Salfelder\n\nIssue created by migration from https://trac.sagemath.org/ticket/15227\n\n",
    "closed_at": "2013-12-21T12:16:05Z",
    "created_at": "2013-09-25T06:40:39Z",
    "labels": [
        "component: cython",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.1",
    "title": "cython debug information directory (patch)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15227",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```
There is no way to specify the location where cython writes its debug information (`--gdb` option). This is required whenever cython is executed from a different directory because of other hardwired paths that cannot be overridden (yet).

**Keywords:** cython debug gdb

**Branch:** [u/felixs/cython_dbg](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/cython_dbg)

**Commit:** [f82b4226e689e4d0dc211afc2b8ad6cbfc3031ac](https://github.com/sagemath/sagetrac-mirror/commit/f82b4226e689e4d0dc211afc2b8ad6cbfc3031ac)

**Upstream:** Fixed upstream, in a later stable release.

**Reviewer:** Nathann Cohen

**Author:** Felix Salfelder

Issue created by migration from https://trac.sagemath.org/ticket/15227





---

archive/issue_comments_191732.json:
```json
{
    "body": "<a id='comment:1'></a>\nmerged upstream",
    "created_at": "2013-09-25T06:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15227#issuecomment-191732",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:1'></a>
merged upstream



---

archive/issue_events_136675.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/felixs",
    "created_at": "2013-09-25T06:41:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136675"
}
```



---

archive/issue_events_136676.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/felixs",
    "created_at": "2013-09-25T06:42:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "label": "component: packages: standard",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136676"
}
```



---

archive/issue_events_136677.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/felixs",
    "created_at": "2013-09-25T06:42:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "label": "component: cython",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136677"
}
```



---

archive/issue_comments_191733.json:
```json
{
    "body": "<a id='comment:3'></a>\n?... Is this patch waiting for a review then `O_o`\n\nNathann",
    "created_at": "2013-10-27T11:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15227#issuecomment-191733",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>
?... Is this patch waiting for a review then `O_o`

Nathann



---

archive/issue_comments_191734.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [ncohen](#comment%3A3):\n> ?... Is this patch waiting for a review\n\n\nthis or a newer version of cython packaged.\n\n> then `O_o`\n\n\nwhat does \"`O_o`\" mean?\n\nthanks\nfelix",
    "created_at": "2013-10-27T11:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15227#issuecomment-191734",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:4'></a>
Replying to [ncohen](#comment%3A3):
> ?... Is this patch waiting for a review


this or a newer version of cython packaged.

> then `O_o`


what does "`O_o`" mean?

thanks
felix



---

archive/issue_comments_191735.json:
```json
{
    "body": "<a id='comment:5'></a>\nAhahahah.. Sorry I had misunderstood something about this ticket. And `O_o` represents two eyes, one of which is smaller than the other one. \n\nThis is amazement : `O_O`\n\nThis is doubt : `O_o`\n\nThis is extreme doubt : `O_o_O_o_O`\n\nThuuuuuus I am looking at your patch right now and trying to understand how the new spkg system works. And so far it's muuuuuuuuuuuuuch better `:-P`\n\n...\n\nOkay okay. Looks like it works, even though I can see this when I reinstall cython :\n\n```\npatching file Cython/Compiler/CmdLine.py\nHunk #2 succeeded at 112 (offset -13 lines).\n```\n\nBy the way, is there a command I can run to test this `--gdb-output` option ?\n\nNathann",
    "created_at": "2013-10-27T12:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15227#issuecomment-191735",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Ahahahah.. Sorry I had misunderstood something about this ticket. And `O_o` represents two eyes, one of which is smaller than the other one. 

This is amazement : `O_O`

This is doubt : `O_o`

This is extreme doubt : `O_o_O_o_O`

Thuuuuuus I am looking at your patch right now and trying to understand how the new spkg system works. And so far it's muuuuuuuuuuuuuch better `:-P`

...

Okay okay. Looks like it works, even though I can see this when I reinstall cython :

```
patching file Cython/Compiler/CmdLine.py
Hunk #2 succeeded at 112 (offset -13 lines).
```

By the way, is there a command I can run to test this `--gdb-output` option ?

Nathann



---

archive/issue_comments_191736.json:
```json
{
    "body": "<a id='comment:6'></a>\n> Thuuuuuus I am looking at your patch right now and trying to understand how the new spkg system works. And so far it's muuuuuuuuuuuuuch better `:-P`\n\n\ni didn't use any such system. please excuse if i missed something.\n\n\n> By the way, is there a command I can run to test this `--gdb-output` option ?\n\n\nthe patch was successful, if `cython --help | grep outdir` returns 0. also you can check this\n\n```\necho \"print 42\" > file.pyc\ncython --gdb file.pyc\ncython --gdb-outdir somethingelse\ndiff -f cython_debug somethingelse/cython_debug # should return zero.\n```\n\nthanks",
    "created_at": "2013-10-27T12:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15227#issuecomment-191736",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:6'></a>
> Thuuuuuus I am looking at your patch right now and trying to understand how the new spkg system works. And so far it's muuuuuuuuuuuuuch better `:-P`


i didn't use any such system. please excuse if i missed something.


> By the way, is there a command I can run to test this `--gdb-output` option ?


the patch was successful, if `cython --help | grep outdir` returns 0. also you can check this

```
echo "print 42" > file.pyc
cython --gdb file.pyc
cython --gdb-outdir somethingelse
diff -f cython_debug somethingelse/cython_debug # should return zero.
```

thanks



---

archive/issue_comments_191737.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2013-10-27T13:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15227#issuecomment-191737",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_events_136678.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-10-27T13:01:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136678"
}
```



---

archive/issue_events_136679.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-10-27T13:01:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136679"
}
```



---

archive/issue_comments_191738.json:
```json
{
    "body": "<a id='comment:7'></a>\n> i didn't use any such system. please excuse if i missed something.\n\n\n?\n\nNOnonono I mean that I had not looked at any spkg since the .spkg files. Now the Sage part of the code is in build/pkgs and the sources are stored in upstream, and it is muuuuuch easier to patch spkgs ! I could even write a `.cc` file I need for Sage which can't be written in Cython directly `:-)`\n\n> the patch was successful, if `cython --help | grep outdir` returns 0. also you can check this\n> \n> ```\n> echo \"print 42\" > file.pyc\n> cython --gdb file.pyc\n> cython --gdb-outdir somethingelse\n> diff -f cython_debug somethingelse/cython_debug # should return zero.\n> ```\n\n\nI replaced that by calls to `sage -cython` but it all works indeed. Though diff complains that there is no newline at the end of the files the md5sum are the same and the files are created where they should anyway.\n\nGood to go ! And thanks for this occasion to look at the new spkg system, without .spkg files `:-P`\n\nNathann",
    "created_at": "2013-10-27T13:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15227#issuecomment-191738",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
> i didn't use any such system. please excuse if i missed something.


?

NOnonono I mean that I had not looked at any spkg since the .spkg files. Now the Sage part of the code is in build/pkgs and the sources are stored in upstream, and it is muuuuuch easier to patch spkgs ! I could even write a `.cc` file I need for Sage which can't be written in Cython directly `:-)`

> the patch was successful, if `cython --help | grep outdir` returns 0. also you can check this
> 
> ```
> echo "print 42" > file.pyc
> cython --gdb file.pyc
> cython --gdb-outdir somethingelse
> diff -f cython_debug somethingelse/cython_debug # should return zero.
> ```


I replaced that by calls to `sage -cython` but it all works indeed. Though diff complains that there is no newline at the end of the files the md5sum are the same and the files are created where they should anyway.

Good to go ! And thanks for this occasion to look at the new spkg system, without .spkg files `:-P`

Nathann



---

archive/issue_events_136680.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-27T22:49:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "milestone": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136680"
}
```



---

archive/issue_events_136681.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-27T22:49:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "milestone": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136681"
}
```



---

archive/issue_events_136682.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2013-12-17T18:39:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "milestone": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136682"
}
```



---

archive/issue_events_136683.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2013-12-17T18:39:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136683"
}
```



---

archive/issue_events_136684.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-21T12:16:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136684"
}
```



---

archive/issue_events_136685.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-21T12:16:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15227",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15227#event-136685"
}
```
