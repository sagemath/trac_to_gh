# Issue 15910: Fix doctest in root_systems/coxeter_group.py when coxeter3 is install

archive/issues_015673.json:
```json
{
    "body": "Because the default behavior of `CoxeterGroup` is different when coxeter3 is installed and when it is not.\n\nMore precisely, with coxeter3 installed the following doctest failure happens\n\n```\nsage -t coxeter_group.py\n**********************************************************************\nFile \"coxeter_group.py\", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup\nFailed example:\n    W\nExpected:\n    Coxeter group over Universal Cyclotomic Field with Coxeter matrix:\n    [1 3 2]\n    [3 1 5]\n    [2 5 1]\nGot:\n    Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]\n```\n\n**Assignee:** @tscrim\n\n**CC:**  @anneschilling @nthiery\n\n**Keywords:** coxeter\n\n**Branch/Commit:** [952cfa79627a35ce36585430b4dcd3c9327d9de0](https://github.com/sagemath/sagetrac-mirror/commit/952cfa79627a35ce36585430b4dcd3c9327d9de0)\n\n**Reviewer:** Anne Schilling\n\n**Author:** Travis Scrimshaw\n\nIssue created by migration from https://trac.sagemath.org/ticket/15910\n\n",
    "closed_at": "2014-03-14T14:47:13Z",
    "created_at": "2014-03-08T03:28:22Z",
    "labels": [
        "component: packages: optional",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Fix doctest in root_systems/coxeter_group.py when coxeter3 is install",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15910",
    "user": "https://github.com/tscrim"
}
```
Because the default behavior of `CoxeterGroup` is different when coxeter3 is installed and when it is not.

More precisely, with coxeter3 installed the following doctest failure happens

```
sage -t coxeter_group.py
**********************************************************************
File "coxeter_group.py", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup
Failed example:
    W
Expected:
    Coxeter group over Universal Cyclotomic Field with Coxeter matrix:
    [1 3 2]
    [3 1 5]
    [2 5 1]
Got:
    Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]
```

**Assignee:** @tscrim

**CC:**  @anneschilling @nthiery

**Keywords:** coxeter

**Branch/Commit:** [952cfa79627a35ce36585430b4dcd3c9327d9de0](https://github.com/sagemath/sagetrac-mirror/commit/952cfa79627a35ce36585430b4dcd3c9327d9de0)

**Reviewer:** Anne Schilling

**Author:** Travis Scrimshaw

Issue created by migration from https://trac.sagemath.org/ticket/15910





---

archive/issue_comments_203913.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,16 @@\n Because the default behavior of `CoxeterGroup` is different when coxeter3 is installed and when it is not.\n+\n+More precisely, with coxeter3 installed the following doctest failure happens:\n+{{{sage -t coxeter_group.py\n+**********************************************************************\n+File \"coxeter_group.py\", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup\n+Failed example:\n+    W\n+Expected:\n+    Coxeter group over Universal Cyclotomic Field with Coxeter matrix:\n+    [1 3 2]\n+    [3 1 5]\n+    [2 5 1]\n+Got:\n+    Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]\n+}}}\n``````\n",
    "created_at": "2014-03-08T05:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203913",
    "user": "https://github.com/anneschilling"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,16 @@
 Because the default behavior of `CoxeterGroup` is different when coxeter3 is installed and when it is not.
+
+More precisely, with coxeter3 installed the following doctest failure happens:
+{{{sage -t coxeter_group.py
+**********************************************************************
+File "coxeter_group.py", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup
+Failed example:
+    W
+Expected:
+    Coxeter group over Universal Cyclotomic Field with Coxeter matrix:
+    [1 3 2]
+    [3 1 5]
+    [2 5 1]
+Got:
+    Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]
+}}}
``````




---

archive/issue_comments_203914.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,9 @@\n Because the default behavior of `CoxeterGroup` is different when coxeter3 is installed and when it is not.\n \n-More precisely, with coxeter3 installed the following doctest failure happens:\n-{{{sage -t coxeter_group.py\n+More precisely, with coxeter3 installed the following doctest failure happens\n+\n+```\n+sage -t coxeter_group.py\n **********************************************************************\n File \"coxeter_group.py\", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup\n Failed example:\n@@ -13,4 +15,4 @@\n     [2 5 1]\n Got:\n     Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]\n-}}}\n+```\n``````\n",
    "created_at": "2014-03-08T05:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203914",
    "user": "https://github.com/anneschilling"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,9 @@
 Because the default behavior of `CoxeterGroup` is different when coxeter3 is installed and when it is not.
 
-More precisely, with coxeter3 installed the following doctest failure happens:
-{{{sage -t coxeter_group.py
+More precisely, with coxeter3 installed the following doctest failure happens
+
+```
+sage -t coxeter_group.py
 **********************************************************************
 File "coxeter_group.py", line 69, in sage.combinat.root_system.coxeter_group.CoxeterGroup
 Failed example:
@@ -13,4 +15,4 @@
     [2 5 1]
 Got:
     Permutation Group with generators [(2,6)(3,18)(4,8)(5,9)(7,10)(11,12)(13,14)(17,21)(19,23)(20,24)(22,25)(26,27)(28,29), (1,4)(2,17)(3,6)(5,7)(9,11)(10,12)(14,15)(16,19)(18,21)(20,22)(24,26)(25,27)(29,30), (1,16)(2,5)(4,7)(6,9)(8,10)(11,13)(12,14)(17,20)(19,22)(21,24)(23,25)(26,28)(27,29)]
-}}}
+```
``````




---

archive/issue_comments_203915.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa688d0e9303b18abb68ef54c238b186282cdbb4\">fa688d0</a></td><td><code>Changed doctest to reflect coxeter3/Chevie being installed.</code></td></tr></table>\n",
    "created_at": "2014-03-08T17:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203915",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa688d0e9303b18abb68ef54c238b186282cdbb4">fa688d0</a></td><td><code>Changed doctest to reflect coxeter3/Chevie being installed.</code></td></tr></table>




---

archive/issue_events_141482.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-03-08T17:37:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15910#event-141482"
}
```



---

archive/issue_comments_203916.json:
```json
{
    "body": "**Branch:** [public/combinat/fix_coxeter_group_test-15910](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/fix_coxeter_group_test-15910)",
    "created_at": "2014-03-08T17:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203916",
    "user": "https://github.com/tscrim"
}
```

**Branch:** [public/combinat/fix_coxeter_group_test-15910](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/fix_coxeter_group_test-15910)



---

archive/issue_comments_203917.json:
```json
{
    "body": "**Commit:** [fa688d0e9303b18abb68ef54c238b186282cdbb4](https://github.com/sagemath/sagetrac-mirror/commit/fa688d0e9303b18abb68ef54c238b186282cdbb4)",
    "created_at": "2014-03-08T17:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203917",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [fa688d0e9303b18abb68ef54c238b186282cdbb4](https://github.com/sagemath/sagetrac-mirror/commit/fa688d0e9303b18abb68ef54c238b186282cdbb4)



---

archive/issue_comments_203918.json:
```json
{
    "body": "<a id='comment:4'></a>\nHi Travis,\n\nWith your fix, I get a lot of doctest failures (with coxeter3 installed)\n\n```\nsage -t coxeter_group.py\n**********************************************************************\nFile \"coxeter_group.py\", line 59, in sage.combinat.root_system.coxeter_group.CoxeterGroup\nFailed example:\n    W = CoxeterGroup([\"A\",2])\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.coxeter_group.CoxeterGroup[0]>\", line 1, in <module>\n        W = CoxeterGroup([\"A\",Integer(2)])\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py\", line 157, in CoxeterGroup\n        return CoxeterGroupAsPermutationGroup(cartan_type)\n      File \"classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1282)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py\", line 200, in __classcall__\n        return super(CoxeterGroupAsPermutationGroup, cls).__classcall__(cls, cartan_type)\n      File \"cachefunc.pyx\", line 1045, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:6182)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1021, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1665)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py\", line 222, in __init__\n        N = self._gap_group.__getattr__(\"N\").sage()\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 884, in __getattr__\n        P = self._check_valid()\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1321, in _check_valid\n        raise ValueError, \"The %s session in which this object was defined is no longer running.\"%P.name()\n    ValueError: The gap3 session in which this object was defined is no longer running.\n**********************************************************************\nFile \"coxeter_group.py\", line 72, in sage.combinat.root_system.coxeter_group.CoxeterGroup\nFailed example:\n    if not is_chevie_available(): W\nExpected:\n    Coxeter group over Universal Cyclotomic Field with Coxeter matrix:\n    [1 3 2]\n    [3 1 5]\n    [2 5 1]\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"coxeter_group.py\", line 293, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent\nFailed example:\n    W = CoxeterGroup([\"A\",3])\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[0]>\", line 1, in <module>\n        W = CoxeterGroup([\"A\",Integer(3)])\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py\", line 157, in CoxeterGroup\n        return CoxeterGroupAsPermutationGroup(cartan_type)\n      File \"classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1282)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py\", line 200, in __classcall__\n        return super(CoxeterGroupAsPermutationGroup, cls).__classcall__(cls, cartan_type)\n      File \"cachefunc.pyx\", line 1045, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:6182)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1021, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1665)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py\", line 222, in __init__\n        N = self._gap_group.__getattr__(\"N\").sage()\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 884, in __getattr__\n        P = self._check_valid()\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1321, in _check_valid\n        raise ValueError, \"The %s session in which this object was defined is no longer running.\"%P.name()\n    ValueError: The gap3 session in which this object was defined is no longer running.\n**********************************************************************\nFile \"coxeter_group.py\", line 294, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent\nFailed example:\n    s = W.simple_reflections()\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[1]>\", line 1, in <module>\n        s = W.simple_reflections()\n    NameError: name 'W' is not defined\n**********************************************************************\nFile \"coxeter_group.py\", line 295, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent\nFailed example:\n    w = s[1] * s[2] * s[3]\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[2]>\", line 1, in <module>\n        w = s[Integer(1)] * s[Integer(2)] * s[Integer(3)]\n    NameError: name 's' is not defined\n**********************************************************************\nFile \"coxeter_group.py\", line 296, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent\nFailed example:\n    w.has_descent(3)\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[3]>\", line 1, in <module>\n        w.has_descent(Integer(3))\n    NameError: name 'w' is not defined\n**********************************************************************\nFile \"coxeter_group.py\", line 298, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent\nFailed example:\n    [ w.has_descent(i)                  for i in [1,2,3] ]\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[4]>\", line 1, in <module>\n        [ w.has_descent(i)                  for i in [Integer(1),Integer(2),Integer(3)] ]\n    NameError: name 'w' is not defined\n**********************************************************************\nFile \"coxeter_group.py\", line 300, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent\nFailed example:\n    [ w.has_descent(i, side = 'left')   for i in [1,2,3] ]\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[5]>\", line 1, in <module>\n        [ w.has_descent(i, side = 'left')   for i in [Integer(1),Integer(2),Integer(3)] ]\n    NameError: name 'w' is not defined\n**********************************************************************\nFile \"coxeter_group.py\", line 302, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent\nFailed example:\n    [ w.has_descent(i, positive = True) for i in [1,2,3] ]\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[6]>\", line 1, in <module>\n        [ w.has_descent(i, positive = True) for i in [Integer(1),Integer(2),Integer(3)] ]\n    NameError: name 'w' is not defined\n**********************************************************************\n2 items had failures:\n   2 of  19 in sage.combinat.root_system.coxeter_group.CoxeterGroup\n   7 of   8 in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent\n    [30 tests, 9 failures, 68.77 s]\n----------------------------------------------------------------------\nsage -t coxeter_group.py  # 9 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 70.1 seconds\n    cpu time: 7.6 seconds\n    cumulative wall time: 68.8 seconds\n```\n\nBest,\n\nAnne",
    "created_at": "2014-03-08T20:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203918",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:4'></a>
Hi Travis,

With your fix, I get a lot of doctest failures (with coxeter3 installed)

```
sage -t coxeter_group.py
**********************************************************************
File "coxeter_group.py", line 59, in sage.combinat.root_system.coxeter_group.CoxeterGroup
Failed example:
    W = CoxeterGroup(["A",2])
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.coxeter_group.CoxeterGroup[0]>", line 1, in <module>
        W = CoxeterGroup(["A",Integer(2)])
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py", line 157, in CoxeterGroup
        return CoxeterGroupAsPermutationGroup(cartan_type)
      File "classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1282)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py", line 200, in __classcall__
        return super(CoxeterGroupAsPermutationGroup, cls).__classcall__(cls, cartan_type)
      File "cachefunc.pyx", line 1045, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:6182)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1021, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1665)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py", line 222, in __init__
        N = self._gap_group.__getattr__("N").sage()
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 884, in __getattr__
        P = self._check_valid()
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1321, in _check_valid
        raise ValueError, "The %s session in which this object was defined is no longer running."%P.name()
    ValueError: The gap3 session in which this object was defined is no longer running.
**********************************************************************
File "coxeter_group.py", line 72, in sage.combinat.root_system.coxeter_group.CoxeterGroup
Failed example:
    if not is_chevie_available(): W
Expected:
    Coxeter group over Universal Cyclotomic Field with Coxeter matrix:
    [1 3 2]
    [3 1 5]
    [2 5 1]
Got:
    <BLANKLINE>
**********************************************************************
File "coxeter_group.py", line 293, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent
Failed example:
    W = CoxeterGroup(["A",3])
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[0]>", line 1, in <module>
        W = CoxeterGroup(["A",Integer(3)])
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py", line 157, in CoxeterGroup
        return CoxeterGroupAsPermutationGroup(cartan_type)
      File "classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1282)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py", line 200, in __classcall__
        return super(CoxeterGroupAsPermutationGroup, cls).__classcall__(cls, cartan_type)
      File "cachefunc.pyx", line 1045, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:6182)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1021, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1665)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/root_system/coxeter_group.py", line 222, in __init__
        N = self._gap_group.__getattr__("N").sage()
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 884, in __getattr__
        P = self._check_valid()
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1321, in _check_valid
        raise ValueError, "The %s session in which this object was defined is no longer running."%P.name()
    ValueError: The gap3 session in which this object was defined is no longer running.
**********************************************************************
File "coxeter_group.py", line 294, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent
Failed example:
    s = W.simple_reflections()
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[1]>", line 1, in <module>
        s = W.simple_reflections()
    NameError: name 'W' is not defined
**********************************************************************
File "coxeter_group.py", line 295, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent
Failed example:
    w = s[1] * s[2] * s[3]
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[2]>", line 1, in <module>
        w = s[Integer(1)] * s[Integer(2)] * s[Integer(3)]
    NameError: name 's' is not defined
**********************************************************************
File "coxeter_group.py", line 296, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent
Failed example:
    w.has_descent(3)
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[3]>", line 1, in <module>
        w.has_descent(Integer(3))
    NameError: name 'w' is not defined
**********************************************************************
File "coxeter_group.py", line 298, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent
Failed example:
    [ w.has_descent(i)                  for i in [1,2,3] ]
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[4]>", line 1, in <module>
        [ w.has_descent(i)                  for i in [Integer(1),Integer(2),Integer(3)] ]
    NameError: name 'w' is not defined
**********************************************************************
File "coxeter_group.py", line 300, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent
Failed example:
    [ w.has_descent(i, side = 'left')   for i in [1,2,3] ]
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[5]>", line 1, in <module>
        [ w.has_descent(i, side = 'left')   for i in [Integer(1),Integer(2),Integer(3)] ]
    NameError: name 'w' is not defined
**********************************************************************
File "coxeter_group.py", line 302, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent
Failed example:
    [ w.has_descent(i, positive = True) for i in [1,2,3] ]
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent[6]>", line 1, in <module>
        [ w.has_descent(i, positive = True) for i in [Integer(1),Integer(2),Integer(3)] ]
    NameError: name 'w' is not defined
**********************************************************************
2 items had failures:
   2 of  19 in sage.combinat.root_system.coxeter_group.CoxeterGroup
   7 of   8 in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup.Element.has_descent
    [30 tests, 9 failures, 68.77 s]
----------------------------------------------------------------------
sage -t coxeter_group.py  # 9 doctests failed
----------------------------------------------------------------------
Total time for all tests: 70.1 seconds
    cpu time: 7.6 seconds
    cumulative wall time: 68.8 seconds
```

Best,

Anne



---

archive/issue_comments_203919.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi!\n\nThis issue makes me wonder wether it's sane to have the default implementation depend on which packages are installed. Now that we have coxeter groups as matrix groups for all types, we could possibly make this the default uniformly.\n\nWhat do you think?",
    "created_at": "2014-03-08T22:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203919",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:5'></a>
Hi!

This issue makes me wonder wether it's sane to have the default implementation depend on which packages are installed. Now that we have coxeter groups as matrix groups for all types, we could possibly make this the default uniformly.

What do you think?



---

archive/issue_comments_203920.json:
```json
{
    "body": "<a id='comment:6'></a>\nI find it also crazy that the default implementation depends on the packages. Plus this never seems to have been tested with the various packages installed/not installed, which can potentially lead to bad situations ...\n\nTravis told me yesterday that this was implemented in #9290.",
    "created_at": "2014-03-08T22:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203920",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:6'></a>
I find it also crazy that the default implementation depends on the packages. Plus this never seems to have been tested with the various packages installed/not installed, which can potentially lead to bad situations ...

Travis told me yesterday that this was implemented in #9290.



---

archive/issue_comments_203921.json:
```json
{
    "body": "<a id='comment:7'></a>\nBefore #9290, this would fail if you didn't have coxeter3 installed, and if you did, then it would succeed. So if this was added as a doctest without #9290, we'd still be in this predicament. However I'm fine with making the default begin the matrix implementation.",
    "created_at": "2014-03-09T02:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203921",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
Before #9290, this would fail if you didn't have coxeter3 installed, and if you did, then it would succeed. So if this was added as a doctest without #9290, we'd still be in this predicament. However I'm fine with making the default begin the matrix implementation.



---

archive/issue_comments_203922.json:
```json
{
    "body": "<a id='comment:8'></a>\nOk, let's just change the default to the matrix implementation. We probably should have done it as soon as it became available!\n\nCheers,",
    "created_at": "2014-03-10T09:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203922",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:8'></a>
Ok, let's just change the default to the matrix implementation. We probably should have done it as soon as it became available!

Cheers,



---

archive/issue_comments_203923.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/952cfa79627a35ce36585430b4dcd3c9327d9de0\">952cfa7</a></td><td><code>Changed default implementation for CoxeterGroup.</code></td></tr></table>\n",
    "created_at": "2014-03-11T15:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/952cfa79627a35ce36585430b4dcd3c9327d9de0">952cfa7</a></td><td><code>Changed default implementation for CoxeterGroup.</code></td></tr></table>




---

archive/issue_comments_203924.json:
```json
{
    "body": "**Changing commit** from \"[fa688d0e9303b18abb68ef54c238b186282cdbb4](https://github.com/sagemath/sagetrac-mirror/commit/fa688d0e9303b18abb68ef54c238b186282cdbb4)\" to \"[952cfa79627a35ce36585430b4dcd3c9327d9de0](https://github.com/sagemath/sagetrac-mirror/commit/952cfa79627a35ce36585430b4dcd3c9327d9de0)\".",
    "created_at": "2014-03-11T15:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203924",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fa688d0e9303b18abb68ef54c238b186282cdbb4](https://github.com/sagemath/sagetrac-mirror/commit/fa688d0e9303b18abb68ef54c238b186282cdbb4)" to "[952cfa79627a35ce36585430b4dcd3c9327d9de0](https://github.com/sagemath/sagetrac-mirror/commit/952cfa79627a35ce36585430b4dcd3c9327d9de0)".



---

archive/issue_comments_203925.json:
```json
{
    "body": "<a id='comment:10'></a>\nBy matrix implementation, I am assuming you mean as a matrix group which I called the reflection representation (implementation?). If this is not correct, let me know and I'll make the appropriate changes.",
    "created_at": "2014-03-11T15:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203925",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
By matrix implementation, I am assuming you mean as a matrix group which I called the reflection representation (implementation?). If this is not correct, let me know and I'll make the appropriate changes.



---

archive/issue_comments_203926.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [tscrim](#comment%3A10):\n> By matrix implementation, I am assuming you mean as a matrix group which I called the reflection representation (implementation?). If this is not correct, let me know and I'll make the appropriate changes.\n\n\nYes indeed!\n\nCheers,\n                                  Nicolas",
    "created_at": "2014-03-11T20:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203926",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:11'></a>
Replying to [tscrim](#comment%3A10):
> By matrix implementation, I am assuming you mean as a matrix group which I called the reflection representation (implementation?). If this is not correct, let me know and I'll make the appropriate changes.


Yes indeed!

Cheers,
                                  Nicolas



---

archive/issue_comments_203927.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"coxeter\".",
    "created_at": "2014-03-12T08:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203927",
    "user": "https://github.com/fchapoton"
}
```

**Changing keywords** from "" to "coxeter".



---

archive/issue_comments_203928.json:
```json
{
    "body": "**Reviewer:** Anne Schilling",
    "created_at": "2014-03-13T03:43:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203928",
    "user": "https://github.com/anneschilling"
}
```

**Reviewer:** Anne Schilling



---

archive/issue_events_141483.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2014-03-13T03:43:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15910#event-141483"
}
```



---

archive/issue_events_141484.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2014-03-13T03:43:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15910#event-141484"
}
```



---

archive/issue_comments_203929.json:
```json
{
    "body": "<a id='comment:14'></a>\nLooks good now! Thank you, Travis.",
    "created_at": "2014-03-13T03:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203929",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:14'></a>
Looks good now! Thank you, Travis.



---

archive/issue_comments_203930.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks for doing the review Anne.",
    "created_at": "2014-03-13T04:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203930",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
Thanks for doing the review Anne.



---

archive/issue_events_141485.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-14T14:47:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15910#event-141485"
}
```



---

archive/issue_events_141486.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-14T14:47:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15910#event-141486"
}
```



---

archive/issue_comments_203931.json:
```json
{
    "body": "**Changing branch** from \"[public/combinat/fix_coxeter_group_test-15910](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/fix_coxeter_group_test-15910)\" to \"[952cfa79627a35ce36585430b4dcd3c9327d9de0](https://github.com/sagemath/sagetrac-mirror/commit/952cfa79627a35ce36585430b4dcd3c9327d9de0)\".",
    "created_at": "2014-03-14T14:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15910#issuecomment-203931",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/combinat/fix_coxeter_group_test-15910](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/fix_coxeter_group_test-15910)" to "[952cfa79627a35ce36585430b4dcd3c9327d9de0](https://github.com/sagemath/sagetrac-mirror/commit/952cfa79627a35ce36585430b4dcd3c9327d9de0)".
