# Issue 15223: Let the `TestSuite` test that the construction of a parent returns the parent

archive/issues_014986.json:
```json
{
    "assignees": [],
    "body": "Andrey told me about the following problem. When he implemented toric lattices, he inherited a `.construction()` method from general lattices. Consequence: If he tried to add elements of two different toric lattices, then Sage applied a pushout construction and added the two elements after pushing them to `ZZ^2`, which was not what he wanted.\n\nHis solution was, I think, the correct one: He overloaded the `.construction()` method, so that it now returns `None`.\n\nUpdate: A similar problem also showed up in #30360.\n\nSuggestion: Introduce a test of the `TestSuite` of a parent P, that will complain if P.construction() returns a pair `F, O` such that `F(O)!=P`.\n\nI think this test should be put into ~~`sage.structure.parent.Parent`~~ (Update 9.2: `sage.categories.sets_cat`), because this is where `.construction()` is defined in the first place.\n\n\n\nCC:  @novoselt @nthiery @sagetrac-sage-combinat @tscrim @fchapoton @mwageringel @kwankyu @dkrenn\n\nKeywords: **construction functor, test suite, sd53**\n\nBranch: **[`29e2ce0`](https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786)**\n\nReviewer: **Travis Scrimshaw, Matthias Koeppe**\n\nAuthor: **Simon King, Matthias Koeppe, Marc Mezzarobba, Travis Scrimshaw**\n\nComponent: **coercion**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15223_\n\n",
    "closed_at": "2020-09-27T09:09:57Z",
    "created_at": "2013-09-24T13:47:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coercion",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Let the `TestSuite` test that the construction of a parent returns the parent",
    "type": "issue",
    "updated_at": "2023-01-14T13:34:37Z",
    "url": "https://github.com/sagemath/sage/issues/15223",
    "user": "https://github.com/simon-king-jena"
}
```
Andrey told me about the following problem. When he implemented toric lattices, he inherited a `.construction()` method from general lattices. Consequence: If he tried to add elements of two different toric lattices, then Sage applied a pushout construction and added the two elements after pushing them to `ZZ^2`, which was not what he wanted.

His solution was, I think, the correct one: He overloaded the `.construction()` method, so that it now returns `None`.

Update: A similar problem also showed up in #30360.

Suggestion: Introduce a test of the `TestSuite` of a parent P, that will complain if P.construction() returns a pair `F, O` such that `F(O)!=P`.

I think this test should be put into ~~`sage.structure.parent.Parent`~~ (Update 9.2: `sage.categories.sets_cat`), because this is where `.construction()` is defined in the first place.



CC:  @novoselt @nthiery @sagetrac-sage-combinat @tscrim @fchapoton @mwageringel @kwankyu @dkrenn

Keywords: **construction functor, test suite, sd53**

Branch: **[`29e2ce0`](https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786)**

Reviewer: **Travis Scrimshaw, Matthias Koeppe**

Author: **Simon King, Matthias Koeppe, Marc Mezzarobba, Travis Scrimshaw**

Component: **coercion**

_Issue created by migration from https://trac.sagemath.org/ticket/15223_





---

archive/issue_events_216375.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-09-24T13:47:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216375"
}
```



---

archive/issue_events_216376.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-09-24T13:47:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216376"
}
```



---

archive/issue_events_216377.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-09-24T13:47:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216377"
}
```



---

archive/issue_events_216378.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-09-24T13:47:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216378"
}
```



---

archive/issue_comments_187529.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI did not run the full test suite yet, but I already detected several bugs in `.construction()`. So, introducing this test really is a good idea.\n\nUntil now, I found:\n\n1. Boolean polynomial rings:\n\n   ```\n   sage: P.<x0, x1, x2, x3> = BooleanPolynomialRing(4,order='degrevlex(2),degrevlex(2)')\n   sage: P.construction()\n   (MPoly[x0,x1,x2,x3], Finite Field of size 2)\n   sage: F, O = P.construction()\n   sage: F(O)\n   Multivariate Polynomial Ring in x0, x1, x2, x3 over Finite Field of size 2\n   sage: P\n   Boolean PolynomialRing in x0, x1, x2, x3\n   ```\n   Suggested solution: A boolean polynomial ring is, after all, a quotient of a polynomial ring. So, it should be constructed as such, but the `QuotientFunctor` should be provided with an additional attribute making it notice that a boolean polynomial ring shall be returned.\n\n2. Integer mod rings that are initialised in a non-default category:\n\n   ```\n   sage: P = IntegerModRing(19, category = Fields())\n   sage: F,O = P.construction()\n   sage: F(O)\n   Ring of integers modulo 19\n   sage: P\n   Ring of integers modulo 19\n   sage: F(O) == P\n   False\n   ```\n   Why is this? Well, providing a different category changes the class of P (this is how the category framework works), and the `__cmp__` method of integer mod rings checks for the class. And the construction functor `F` is not aware of the category of `P`.\n\n   Suggested solutions: Change `__cmp__` such that `F(O)` evaluates equal to `P`, even though `F(O)` is not in the category of fields, or alternatively make the construction functor aware of the category, so that `F(O)` actually *is* in the category of fields.",
    "created_at": "2013-09-24T16:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187529",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">comment:1</div>

I did not run the full test suite yet, but I already detected several bugs in `.construction()`. So, introducing this test really is a good idea.

Until now, I found:

1. Boolean polynomial rings:

   ```
   sage: P.<x0, x1, x2, x3> = BooleanPolynomialRing(4,order='degrevlex(2),degrevlex(2)')
   sage: P.construction()
   (MPoly[x0,x1,x2,x3], Finite Field of size 2)
   sage: F, O = P.construction()
   sage: F(O)
   Multivariate Polynomial Ring in x0, x1, x2, x3 over Finite Field of size 2
   sage: P
   Boolean PolynomialRing in x0, x1, x2, x3
   ```
   Suggested solution: A boolean polynomial ring is, after all, a quotient of a polynomial ring. So, it should be constructed as such, but the `QuotientFunctor` should be provided with an additional attribute making it notice that a boolean polynomial ring shall be returned.

2. Integer mod rings that are initialised in a non-default category:

   ```
   sage: P = IntegerModRing(19, category = Fields())
   sage: F,O = P.construction()
   sage: F(O)
   Ring of integers modulo 19
   sage: P
   Ring of integers modulo 19
   sage: F(O) == P
   False
   ```
   Why is this? Well, providing a different category changes the class of P (this is how the category framework works), and the `__cmp__` method of integer mod rings checks for the class. And the construction functor `F` is not aware of the category of `P`.

   Suggested solutions: Change `__cmp__` such that `F(O)` evaluates equal to `P`, even though `F(O)` is not in the category of fields, or alternatively make the construction functor aware of the category, so that `F(O)` actually *is* in the category of fields.



---

archive/issue_comments_187530.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAnd I am to blame for a third problem, that is actually fairly similar to the second problem mentioned above. It is in my thematic tutorial on categories and coercion.\n\n- I create a parent class inheriting from `UniqueRepresentation`.\n- The parent class has a construction functor that keeps track of the \"important\" arguments needed to reconstruct the parent.\n- I create one instance P of the parent class using an additional \"unimportant\" argument, namely a category.\n\nConsequence: When trying to reconstruct P using the construction functor, the \"unimportant\" argument is missing, and hence `UniqueRepresentation` believes that a new instance needs to be created. After all, for `UniqueRepresentation`, *all* arguments are important parts of the cache key.\n\nI have to think how to solve this.",
    "created_at": "2013-09-24T18:32:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187530",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">comment:2</div>

And I am to blame for a third problem, that is actually fairly similar to the second problem mentioned above. It is in my thematic tutorial on categories and coercion.

- I create a parent class inheriting from `UniqueRepresentation`.
- The parent class has a construction functor that keeps track of the "important" arguments needed to reconstruct the parent.
- I create one instance P of the parent class using an additional "unimportant" argument, namely a category.

Consequence: When trying to reconstruct P using the construction functor, the "unimportant" argument is missing, and hence `UniqueRepresentation` believes that a new instance needs to be created. After all, for `UniqueRepresentation`, *all* arguments are important parts of the cache key.

I have to think how to solve this.



---

archive/issue_comments_187531.json:
```json
{
    "body": "Branch: **[u/SimonKing/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15223)**",
    "created_at": "2013-09-24T18:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187531",
    "user": "https://github.com/simon-king-jena"
}
```

Branch: **[u/SimonKing/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15223)**



---

archive/issue_comments_187532.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIs it really needed that `BooleanPolynomialRing` has a `.construction()`? Granted, one could describe it as the quotient of a polynomial ring over GF(2). However, you could actually not take an arbitrary ring R and create a boolean polynomial ring over R---the base ring will always be GF(2).\n\nAnyway, using the construction functor for multivariate polynomial rings is plain wrong. We have two options:\n\n1. Let the construction be None\n2. Create a new construction functor for boolean polynomial rings, either similar to the multivariate polynomial ring functor, or similar to the quotient functor.\n\nIf we go for None, then we would have problems to do fancy constructions starting with a boolean polynomial ring: There would be no pushout constructions. I wonder if we *need* pushout constructions.\n\nIf we go for a new construction functor, I'd suggest to modify quotient functors. After all, it is a quotient in a particular implementation.\n\nAnd looking at the second problem, it seems to be a general problem with quotient functors: Sometimes we want to add more information on a quotient, such as \"the quotient shall belong to the category of fields\" or, \"the quotient shall be implemented as a boolean polynomial ring\". So, we should invent a general scheme to load the quotient functor with this additional information.",
    "created_at": "2013-09-24T21:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187532",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

Is it really needed that `BooleanPolynomialRing` has a `.construction()`? Granted, one could describe it as the quotient of a polynomial ring over GF(2). However, you could actually not take an arbitrary ring R and create a boolean polynomial ring over R---the base ring will always be GF(2).

Anyway, using the construction functor for multivariate polynomial rings is plain wrong. We have two options:

1. Let the construction be None
2. Create a new construction functor for boolean polynomial rings, either similar to the multivariate polynomial ring functor, or similar to the quotient functor.

If we go for None, then we would have problems to do fancy constructions starting with a boolean polynomial ring: There would be no pushout constructions. I wonder if we *need* pushout constructions.

If we go for a new construction functor, I'd suggest to modify quotient functors. After all, it is a quotient in a particular implementation.

And looking at the second problem, it seems to be a general problem with quotient functors: Sometimes we want to add more information on a quotient, such as "the quotient shall belong to the category of fields" or, "the quotient shall be implemented as a boolean polynomial ring". So, we should invent a general scheme to load the quotient functor with this additional information.



---

archive/issue_comments_187533.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nBy the way, the branch that I uploaded fixes all doctests, except for the three issues described in the previous posts (boolean polynomial rings, quotients that are pushed into a sub-category of the default, and the stuff that I wrote in the thematic tutorial).",
    "created_at": "2013-09-24T21:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187533",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">comment:5</div>

By the way, the branch that I uploaded fixes all doctests, except for the three issues described in the previous posts (boolean polynomial rings, quotients that are pushed into a sub-category of the default, and the stuff that I wrote in the thematic tutorial).



---

archive/issue_comments_187534.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe quotient functors (`sage.categories.pushout.QuotientFunctor`) eventually call the `.quo()` method when they are called. They actually do make a special case for fields that are constructed as a quotient.\n\nI think it would be possible to store further arguments in an attribute, say, `_further_arguments`, which should be a dictionary, and then do\n\n```\n   Q = R.quo(I, names=self.names, **self._further_arguments)\n```\nThen, one should also make the `.quo()` method accept these additional arguments.",
    "created_at": "2013-09-24T21:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187534",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:6" align="right">comment:6</div>

The quotient functors (`sage.categories.pushout.QuotientFunctor`) eventually call the `.quo()` method when they are called. They actually do make a special case for fields that are constructed as a quotient.

I think it would be possible to store further arguments in an attribute, say, `_further_arguments`, which should be a dictionary, and then do

```
   Q = R.quo(I, names=self.names, **self._further_arguments)
```
Then, one should also make the `.quo()` method accept these additional arguments.



---

archive/issue_comments_187535.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:a81fcc1]</code></td><td><code>Make _test_construction pass in the thematic tutorial</code></td></tr></table>\n",
    "created_at": "2013-09-24T22:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187535",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:a81fcc1]</code></td><td><code>Make _test_construction pass in the thematic tutorial</code></td></tr></table>




---

archive/issue_comments_187536.json:
```json
{
    "body": "Commit: **[`a81fcc1`](https://github.com/sagemath/sagetrac-mirror/commit/a81fcc1072df88cc369d7aa0b7ae423fd97d7f02)**",
    "created_at": "2013-09-24T22:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187536",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`a81fcc1`](https://github.com/sagemath/sagetrac-mirror/commit/a81fcc1072df88cc369d7aa0b7ae423fd97d7f02)**



---

archive/issue_comments_187537.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIn the current commit, I fix the example in the thematic tutorial by making the construction functor aware of the additional arguments that were originally used to construct the parent.\n\nIt works, and I think a similar idea would work for quotient functors.",
    "created_at": "2013-09-24T22:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187537",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">comment:8</div>

In the current commit, I fix the example in the thematic tutorial by making the construction functor aware of the additional arguments that were originally used to construct the parent.

It works, and I think a similar idea would work for quotient functors.



---

archive/issue_comments_187538.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI just added Nicolas to this ticket, since it relates not only with coercion (this is the component of this ticket) but also with categories.\n\nIn a nutshell: If P is a parent, then `P.construction()` should return None, or a pair F,O, where F is a construction functor and O is some object.\n\nThe contract is that `F(O)==P`. But nobody has checked this contract so far. The original aim of this ticket is to introduce a test.\n\nWhile we are at it, I thought one could improve `QuotientFunctor`. First of all, it *must* allow to pass additional arguments to the quotient being constructed. For example, the construction functor for `IntegerModRing(19, category=Fields())` must know that the category is specialised. Similarly, the construction functor for `BooleanPolynomialRing(...)` must know that the result is not just a quotient of a polynomial ring, but has a special implementation.\n\nAnd something else that I want to improve with the `QuotientFunctor`: Currently, it is a functor from Rings() to Rings(). But why?? Perhaps, at some point, we want to apply the `QuotientFunctor` in the context of groups!\n\nHence, I think it would make sense to be more precise when choosing the domain and codomain of the functor.\n\nToday, I experimented with this idea: If Q is a quotient, and `F,O=Q.construction()`, then the quotient functor F should go from `O.category()` to `Q.category()`.\n\nBut when running the tests, it turns out that this is too narrow: Sometimes, we want to apply the quotient functor F to a ring over a *different* base ring.\n\nThis makes me think of the following: Would it make sense to introduce a method of categories `C.without_parameters()`, returning the join of all super-categories of C that are not instances of `CategoryWithParameters`?\n\nFor example, for `C = Category.join([EnumeratedSets(),Algebras(QQ)])`, `C.without_parameters()` would return `Join of Category of rings and Category of enumerated sets`.\n\nNicolas, do you think it would hurt to introduce such method here?",
    "created_at": "2013-09-25T16:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187538",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">comment:10</div>

I just added Nicolas to this ticket, since it relates not only with coercion (this is the component of this ticket) but also with categories.

In a nutshell: If P is a parent, then `P.construction()` should return None, or a pair F,O, where F is a construction functor and O is some object.

The contract is that `F(O)==P`. But nobody has checked this contract so far. The original aim of this ticket is to introduce a test.

While we are at it, I thought one could improve `QuotientFunctor`. First of all, it *must* allow to pass additional arguments to the quotient being constructed. For example, the construction functor for `IntegerModRing(19, category=Fields())` must know that the category is specialised. Similarly, the construction functor for `BooleanPolynomialRing(...)` must know that the result is not just a quotient of a polynomial ring, but has a special implementation.

And something else that I want to improve with the `QuotientFunctor`: Currently, it is a functor from Rings() to Rings(). But why?? Perhaps, at some point, we want to apply the `QuotientFunctor` in the context of groups!

Hence, I think it would make sense to be more precise when choosing the domain and codomain of the functor.

Today, I experimented with this idea: If Q is a quotient, and `F,O=Q.construction()`, then the quotient functor F should go from `O.category()` to `Q.category()`.

But when running the tests, it turns out that this is too narrow: Sometimes, we want to apply the quotient functor F to a ring over a *different* base ring.

This makes me think of the following: Would it make sense to introduce a method of categories `C.without_parameters()`, returning the join of all super-categories of C that are not instances of `CategoryWithParameters`?

For example, for `C = Category.join([EnumeratedSets(),Algebras(QQ)])`, `C.without_parameters()` would return `Join of Category of rings and Category of enumerated sets`.

Nicolas, do you think it would hurt to introduce such method here?



---

archive/issue_comments_187539.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@simon-king-jena](#comment:10):\n\n> While we are at it, I thought one could improve `QuotientFunctor`. First of all, it *must* allow to pass additional arguments to the quotient being constructed. For example, the construction functor for `IntegerModRing(19, category=Fields())` must know that the category is specialised.\n\nIsn't that going to be a problem?\n\n```\nsage: A=IntegerModRing(19, category=Fields())\nsage: B=IntegerModRing(19)\nsage: B in Fields()\nTrue\n```\nAfter this isn't the category of `B` refined to fields? And doesn't that then mean that A and B are the same, and hence should be identical? But if UniqueRepresentation takes the category argument into account, they won't be identical.",
    "created_at": "2013-09-25T18:25:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187539",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@simon-king-jena](#comment:10):

> While we are at it, I thought one could improve `QuotientFunctor`. First of all, it *must* allow to pass additional arguments to the quotient being constructed. For example, the construction functor for `IntegerModRing(19, category=Fields())` must know that the category is specialised.

Isn't that going to be a problem?

```
sage: A=IntegerModRing(19, category=Fields())
sage: B=IntegerModRing(19)
sage: B in Fields()
True
```
After this isn't the category of `B` refined to fields? And doesn't that then mean that A and B are the same, and hence should be identical? But if UniqueRepresentation takes the category argument into account, they won't be identical.



---

archive/issue_comments_187540.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@simon-king-jena](#comment:10):\n> I just added Nicolas to this ticket, since it relates not only with coercion (this is the component of this ticket) but also with categories.\n> \n> In a nutshell: If P is a parent, then `P.construction()` should return None, or a pair F,O, where F is a construction functor and O is some object.\n> \n> The contract is that `F(O)==P`. But nobody has checked this contract so far. The original aim of this ticket is to introduce a test.\n\nThis sounds like a good idea indeed! I would tend to put the test in\nSets (in the general trend that there is already too much stuff in\nParent; and maybe construction should be moved there, so as to make it\neasier to overload it, e.g. in some categories).\n\nIt would make sense as well for the test to accept the case where\n`construction` is an undefined abstract method. But maybe we don't\nhave a use case for now.\n\n> While we are at it, I thought one could improve `QuotientFunctor`. First of all, it *must* allow to pass additional arguments to the quotient being constructed. For example, the construction functor for `IntegerModRing(19, category=Fields())` must know that the category is specialised. Similarly, the construction functor for `BooleanPolynomialRing(...)` must know that the result is not just a quotient of a polynomial ring, but has a special implementation.\n> \n> And something else that I want to improve with the `QuotientFunctor`: Currently, it is a functor from Rings() to Rings(). But why?? Perhaps, at some point, we want to apply the `QuotientFunctor` in the context of groups!\n> \n> Hence, I think it would make sense to be more precise when choosing the domain and codomain of the functor.\n> \n> Today, I experimented with this idea: If Q is a quotient, and `F,O=Q.construction()`, then the quotient functor F should go from `O.category()` to `Q.category()`.\n> \n> But when running the tests, it turns out that this is too narrow: Sometimes, we want to apply the quotient functor F to a ring over a *different* base ring.\n\nThis does not seem directly related to this ticket. Could this easily\nbe split off into a separate ticket?\n\n> This makes me think of the following: Would it make sense to introduce a method of categories `C.without_parameters()`, returning the join of all super-categories of C that are not instances of `CategoryWithParameters`?\n> \n> For example, for `C = Category.join([EnumeratedSets(),Algebras(QQ)])`, `C.without_parameters()` would return `Join of Category of rings and Category of enumerated sets`.\n> \n> Nicolas, do you think it would hurt to introduce such method here?\n\nThis seems like a sensible method; so if you have a use for it, go\nahead.\n\nCheers,\n                             Nicolas",
    "created_at": "2013-09-25T19:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187540",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@simon-king-jena](#comment:10):
> I just added Nicolas to this ticket, since it relates not only with coercion (this is the component of this ticket) but also with categories.
> 
> In a nutshell: If P is a parent, then `P.construction()` should return None, or a pair F,O, where F is a construction functor and O is some object.
> 
> The contract is that `F(O)==P`. But nobody has checked this contract so far. The original aim of this ticket is to introduce a test.

This sounds like a good idea indeed! I would tend to put the test in
Sets (in the general trend that there is already too much stuff in
Parent; and maybe construction should be moved there, so as to make it
easier to overload it, e.g. in some categories).

It would make sense as well for the test to accept the case where
`construction` is an undefined abstract method. But maybe we don't
have a use case for now.

> While we are at it, I thought one could improve `QuotientFunctor`. First of all, it *must* allow to pass additional arguments to the quotient being constructed. For example, the construction functor for `IntegerModRing(19, category=Fields())` must know that the category is specialised. Similarly, the construction functor for `BooleanPolynomialRing(...)` must know that the result is not just a quotient of a polynomial ring, but has a special implementation.
> 
> And something else that I want to improve with the `QuotientFunctor`: Currently, it is a functor from Rings() to Rings(). But why?? Perhaps, at some point, we want to apply the `QuotientFunctor` in the context of groups!
> 
> Hence, I think it would make sense to be more precise when choosing the domain and codomain of the functor.
> 
> Today, I experimented with this idea: If Q is a quotient, and `F,O=Q.construction()`, then the quotient functor F should go from `O.category()` to `Q.category()`.
> 
> But when running the tests, it turns out that this is too narrow: Sometimes, we want to apply the quotient functor F to a ring over a *different* base ring.

This does not seem directly related to this ticket. Could this easily
be split off into a separate ticket?

> This makes me think of the following: Would it make sense to introduce a method of categories `C.without_parameters()`, returning the join of all super-categories of C that are not instances of `CategoryWithParameters`?
> 
> For example, for `C = Category.join([EnumeratedSets(),Algebras(QQ)])`, `C.without_parameters()` would return `Join of Category of rings and Category of enumerated sets`.
> 
> Nicolas, do you think it would hurt to introduce such method here?

This seems like a sensible method; so if you have a use for it, go
ahead.

Cheers,
                             Nicolas



---

archive/issue_comments_187541.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nbruin](#comment:11):\n> Isn't that going to be a problem?\n> \n> ```\n> sage: A=IntegerModRing(19, category=Fields())\n> sage: B=IntegerModRing(19)\n> sage: B in Fields()\n> True\n> ```\n> After this isn't the category of `B` refined to fields?\n\nIt is:\n\n```\nsage: A = IntegerModRing(19)\nsage: B = IntegerModRing(19,category=Fields())\nsage: A==B\nFalse\nsage: issubclass(type(A), Fields().parent_class)\nFalse\nsage: A in Fields()\nTrue\nsage: issubclass(type(A), Fields().parent_class)\nTrue\n```\n\n> And doesn't that then mean that A and B are the same,\n\nNo, it doesn't (to my surprise, I actually thought they *should* be recognised as equal now):\n\n```\nsage: A==B\nFalse\nsage: type(A)==type(B)\nFalse\nsage: A.category() == B.category()\nFalse\nsage: A.category()\nJoin of Category of fields and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets\nsage: B.category()\nJoin of Category of fields and Category of subquotients of monoids and Category of quotients of semigroups\n```\n\n> and hence should be identical? But if UniqueRepresentation takes the category argument into account, they won't be identical.\n\nNo, it is not UniqueRepresentation:\n\n```\nsage: isinstance(A,UniqueRepresentation)\nFalse\n```",
    "created_at": "2013-09-25T20:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187541",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nbruin](#comment:11):
> Isn't that going to be a problem?
> 
> ```
> sage: A=IntegerModRing(19, category=Fields())
> sage: B=IntegerModRing(19)
> sage: B in Fields()
> True
> ```
> After this isn't the category of `B` refined to fields?

It is:

```
sage: A = IntegerModRing(19)
sage: B = IntegerModRing(19,category=Fields())
sage: A==B
False
sage: issubclass(type(A), Fields().parent_class)
False
sage: A in Fields()
True
sage: issubclass(type(A), Fields().parent_class)
True
```

> And doesn't that then mean that A and B are the same,

No, it doesn't (to my surprise, I actually thought they *should* be recognised as equal now):

```
sage: A==B
False
sage: type(A)==type(B)
False
sage: A.category() == B.category()
False
sage: A.category()
Join of Category of fields and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets
sage: B.category()
Join of Category of fields and Category of subquotients of monoids and Category of quotients of semigroups
```

> and hence should be identical? But if UniqueRepresentation takes the category argument into account, they won't be identical.

No, it is not UniqueRepresentation:

```
sage: isinstance(A,UniqueRepresentation)
False
```



---

archive/issue_comments_187542.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nthiery](#comment:12):\n> This sounds like a good idea indeed! I would tend to put the test in\n> Sets (in the general trend that there is already too much stuff in\n> Parent; and maybe construction should be moved there, so as to make it\n> easier to overload it, e.g. in some categories).\n\nI am not so sure about this. `.construction()` is one of the places where mathematics and implementation meet: On the one hand, `.construction()` returns a functor (or at least something that pretends to be a functor), which is a mathematical notion. On the other hand, the construction functors are quite clearly *also* responsible for choosing implementations. For example, the fact that the following pushout uses *dense* power series rings is entirely due to construction functors:\n\n```\nsage: Ps.<x> = PowerSeriesRing(QQ, sparse=True)\nsage: Pd.<x> = PowerSeriesRing(ZZ, sparse=False)\nsage: Pd['y'].has_coerce_map_from(Ps['y'])\nFalse\nsage: pushout(Ps['y'],Pd['y'])\nUnivariate Polynomial Ring in y over Power Series Ring in x over Rational Field\nsage: pushout(Ps['y'],Pd['y']) == Ps['y']\nFalse\n```\n\nBut if it is (partially) about implementation, then I believe its place is not in `Sets.ParentMethods`.\n\n> > But when running the tests, it turns out that this is too narrow: Sometimes, we want to apply the quotient functor F to a ring over a *different* base ring.\n\n> \n> This does not seem directly related to this ticket. Could this easily\n> be split off into a separate ticket?\n\nProbably better. I am actually not sure if it would be a good idea to modify the quotient functor in that way.\n\n> > Nicolas, do you think it would hurt to introduce such method here?\n\n> \n> This seems like a sensible method; so if you have a use for it, go\n> ahead.\n\nNot sure yet.",
    "created_at": "2013-09-25T20:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187542",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nthiery](#comment:12):
> This sounds like a good idea indeed! I would tend to put the test in
> Sets (in the general trend that there is already too much stuff in
> Parent; and maybe construction should be moved there, so as to make it
> easier to overload it, e.g. in some categories).

I am not so sure about this. `.construction()` is one of the places where mathematics and implementation meet: On the one hand, `.construction()` returns a functor (or at least something that pretends to be a functor), which is a mathematical notion. On the other hand, the construction functors are quite clearly *also* responsible for choosing implementations. For example, the fact that the following pushout uses *dense* power series rings is entirely due to construction functors:

```
sage: Ps.<x> = PowerSeriesRing(QQ, sparse=True)
sage: Pd.<x> = PowerSeriesRing(ZZ, sparse=False)
sage: Pd['y'].has_coerce_map_from(Ps['y'])
False
sage: pushout(Ps['y'],Pd['y'])
Univariate Polynomial Ring in y over Power Series Ring in x over Rational Field
sage: pushout(Ps['y'],Pd['y']) == Ps['y']
False
```

But if it is (partially) about implementation, then I believe its place is not in `Sets.ParentMethods`.

> > But when running the tests, it turns out that this is too narrow: Sometimes, we want to apply the quotient functor F to a ring over a *different* base ring.

> 
> This does not seem directly related to this ticket. Could this easily
> be split off into a separate ticket?

Probably better. I am actually not sure if it would be a good idea to modify the quotient functor in that way.

> > Nicolas, do you think it would hurt to introduce such method here?

> 
> This seems like a sensible method; so if you have a use for it, go
> ahead.

Not sure yet.



---

archive/issue_comments_187543.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAnd now I realise that I use git, and I have no idea how to pick some part of the changeset of my last commit, and move it to a different branch.",
    "created_at": "2013-09-25T20:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187543",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:15" align="right">comment:15</div>

And now I realise that I use git, and I have no idea how to pick some part of the changeset of my last commit, and move it to a different branch.



---

archive/issue_comments_187544.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHi Simon,\n\nI am not sure how to just take a part of your last commit, but you can do the following:\nWhile you're on your current development branch, write git branch new_branch to start a new branch pointing to the current commit.\nThen go back to the old branch via git checkout old_branch and either delete manually the changes you don't want to to have on that branch or go back to a previous commit via\ngit reset --hard first_few_digits_of_sha_to_revert_to\nYou can then recommit some of the changes or just start working from there again.\n\nThis probably doesn't do exactly what you want, but it might be a start.",
    "created_at": "2013-09-25T21:11:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187544",
    "user": "https://github.com/sagetrac-jkeitel"
}
```

<div id="comment:16" align="right">comment:16</div>

Hi Simon,

I am not sure how to just take a part of your last commit, but you can do the following:
While you're on your current development branch, write git branch new_branch to start a new branch pointing to the current commit.
Then go back to the old branch via git checkout old_branch and either delete manually the changes you don't want to to have on that branch or go back to a previous commit via
git reset --hard first_few_digits_of_sha_to_revert_to
You can then recommit some of the changes or just start working from there again.

This probably doesn't do exactly what you want, but it might be a start.



---

archive/issue_comments_187545.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@sagetrac-jkeitel](#comment:16):\n> I am not sure how to just take a part of your last commit, but you can do the following:\n> While you're on your current development branch, write git branch new_branch to start a new branch pointing to the current commit.\n> Then go back to the old branch via git checkout old_branch and either delete manually the changes you don't want to to have on that branch or go back to a previous commit via\n> git reset --hard first_few_digits_of_sha_to_revert_to\n> You can then recommit some of the changes or just start working from there again.\n> \n> This probably doesn't do exactly what you want, but it might be a start.\n\nThank you!\n\nI had already started before your answer came. That's to say, I have stored `git diff HEAD~ HEAD` into a file `tmp.patch`, then manually reverted the changes that I didn't like, did `git add <changed_files>` and `git commit --amend`. And now, I should be able to create a branch for a different ticket, and apply the relevant changes stored in `tmp.patch`.\n\nSince I didn't push the \"wrong\" commit to trac (in particular, clearly no other branch on trac will use my wrong commit), I guess it is ok to do `git commit --amend`, although it changes SHA1.",
    "created_at": "2013-09-25T21:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187545",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@sagetrac-jkeitel](#comment:16):
> I am not sure how to just take a part of your last commit, but you can do the following:
> While you're on your current development branch, write git branch new_branch to start a new branch pointing to the current commit.
> Then go back to the old branch via git checkout old_branch and either delete manually the changes you don't want to to have on that branch or go back to a previous commit via
> git reset --hard first_few_digits_of_sha_to_revert_to
> You can then recommit some of the changes or just start working from there again.
> 
> This probably doesn't do exactly what you want, but it might be a start.

Thank you!

I had already started before your answer came. That's to say, I have stored `git diff HEAD~ HEAD` into a file `tmp.patch`, then manually reverted the changes that I didn't like, did `git add <changed_files>` and `git commit --amend`. And now, I should be able to create a branch for a different ticket, and apply the relevant changes stored in `tmp.patch`.

Since I didn't push the "wrong" commit to trac (in particular, clearly no other branch on trac will use my wrong commit), I guess it is ok to do `git commit --amend`, although it changes SHA1.



---

archive/issue_comments_187546.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@simon-king-jena](#comment:13): \n> No, it is not UniqueRepresentation:\n> \n> ```\n> sage: isinstance(A,UniqueRepresentation)\n> False\n> ```\n\nThat doesn't tell the entire story, though:\n\n```\nsage: type(IntegerModRing).mro()\n[sage.rings.finite_rings.integer_mod_ring.IntegerModFactory,\n sage.structure.factory.UniqueFactory,\n sage.structure.sage_object.SageObject,\n object]\n```\nso perhaps the *object* isn't really UniqueRepresentation but the *system* tries to implement the semantics via a factory. So I think you're seeing exactly the problem I was afraid of:\n\n```\nsage: A1=IntegerModRing(19)\nsage: A2=IntegerModRing(19)\nsage: B1=IntegerModRing(19,category=Fields())\nsage: B2=IntegerModRing(19,category=Fields())\nsage: A1 is A2\nTrue\nsage: B1 is B2\nTrue\nsage: A1 in Fields()\nTrue\nsage: type(A1)\n<class 'sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic_with_category'>\nsage: type(B1)\n<class 'sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic_with_category'>\nsage: type(A1) == type(B1)\nFalse\n```\nso after this we do have two functionally equivalent copies of the same ring: `A1,B1`, but they are not identical. Furthermore, their types are not identical or equal either, but it's hard to see what the difference is between them (note `A1.__cmp__` to see that this last `False` is the reason why `A1 != B1`.\n\nAllowing categories to be refined on \"global\" (uniqueified) objects implies that the `category` argument needs to be ignored on lookup during the uniqueification. You can't really control the category anyway:\n\n```\nsage: A1=IntegerModRing(19,category=Rings())\nsage: A1.category()\nJoin of Category of commutative rings and Category of subquotients of monoids and Category of quotients of semigroups\nsage: A1 in Fields()\nTrue\nsage: A2=IntegerModRing(19,category=Rings())\nsage: A2.category()\nJoin of Category of subquotients of monoids and Category of quotients of semigroups and Category of fields\n```",
    "created_at": "2013-09-25T22:11:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187546",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@simon-king-jena](#comment:13): 
> No, it is not UniqueRepresentation:
> 
> ```
> sage: isinstance(A,UniqueRepresentation)
> False
> ```

That doesn't tell the entire story, though:

```
sage: type(IntegerModRing).mro()
[sage.rings.finite_rings.integer_mod_ring.IntegerModFactory,
 sage.structure.factory.UniqueFactory,
 sage.structure.sage_object.SageObject,
 object]
```
so perhaps the *object* isn't really UniqueRepresentation but the *system* tries to implement the semantics via a factory. So I think you're seeing exactly the problem I was afraid of:

```
sage: A1=IntegerModRing(19)
sage: A2=IntegerModRing(19)
sage: B1=IntegerModRing(19,category=Fields())
sage: B2=IntegerModRing(19,category=Fields())
sage: A1 is A2
True
sage: B1 is B2
True
sage: A1 in Fields()
True
sage: type(A1)
<class 'sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic_with_category'>
sage: type(B1)
<class 'sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic_with_category'>
sage: type(A1) == type(B1)
False
```
so after this we do have two functionally equivalent copies of the same ring: `A1,B1`, but they are not identical. Furthermore, their types are not identical or equal either, but it's hard to see what the difference is between them (note `A1.__cmp__` to see that this last `False` is the reason why `A1 != B1`.

Allowing categories to be refined on "global" (uniqueified) objects implies that the `category` argument needs to be ignored on lookup during the uniqueification. You can't really control the category anyway:

```
sage: A1=IntegerModRing(19,category=Rings())
sage: A1.category()
Join of Category of commutative rings and Category of subquotients of monoids and Category of quotients of semigroups
sage: A1 in Fields()
True
sage: A2=IntegerModRing(19,category=Rings())
sage: A2.category()
Join of Category of subquotients of monoids and Category of quotients of semigroups and Category of fields
```



---

archive/issue_comments_187547.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nShould specifying the category even be allowed anyway? What can be achieved by doing so? You can get horrible nonsense:\n\n```\nsage: A=IntegerModRing(16,category=Fields())\nsage: P.<x>=A[]\nsage: P in UniqueFactorizationDomains()\nTrue\nsage: (2*x+1)^8\n1\n```\nOf course if you do this, you're just asking for the insanity. Normally everything is fine:\n\n```\nsage: B=IntegerModRing(16)\nsage: Q.<x>=B[]\nsage: Q in UniqueFactorizationDomains()\nFalse\n```\nBut it does mean that if `B` here were to be identical to `A`, then the first example would permanently poison the sage session with nonsense. So I'd think `IntegerModRing(16,category=Fields())` should produce an error.",
    "created_at": "2013-09-25T22:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187547",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:19" align="right">comment:19</div>

Should specifying the category even be allowed anyway? What can be achieved by doing so? You can get horrible nonsense:

```
sage: A=IntegerModRing(16,category=Fields())
sage: P.<x>=A[]
sage: P in UniqueFactorizationDomains()
True
sage: (2*x+1)^8
1
```
Of course if you do this, you're just asking for the insanity. Normally everything is fine:

```
sage: B=IntegerModRing(16)
sage: Q.<x>=B[]
sage: Q in UniqueFactorizationDomains()
False
```
But it does mean that if `B` here were to be identical to `A`, then the first example would permanently poison the sage session with nonsense. So I'd think `IntegerModRing(16,category=Fields())` should produce an error.



---

archive/issue_comments_187548.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nbruin](#comment:19):\n> But it does mean that if `B` here were to be identical to `A`, then the first example would permanently poison the sage session with nonsense.\n\nAnd that's why I think it is a good idea that *all* given arguments, including the category, are taken into the cache key of the factory. That way, it won't matter if you put a non-field into the category of fields, because you are still able to create a \"sane\" version of the same ring.\n\n> So I'd think `IntegerModRing(16,category=Fields())` should produce an error.\n\nI don't think so. And in any case, it should be on a different ticket.",
    "created_at": "2013-09-26T08:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187548",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nbruin](#comment:19):
> But it does mean that if `B` here were to be identical to `A`, then the first example would permanently poison the sage session with nonsense.

And that's why I think it is a good idea that *all* given arguments, including the category, are taken into the cache key of the factory. That way, it won't matter if you put a non-field into the category of fields, because you are still able to create a "sane" version of the same ring.

> So I'd think `IntegerModRing(16,category=Fields())` should produce an error.

I don't think so. And in any case, it should be on a different ticket.



---

archive/issue_comments_187549.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHm. But the more I think about it...:\n\nIn the `__cmp__` method of `IntegerModRing`, it is said:\n\n```\n        if type(other) is not type(self):   # so that GF(p) =/= Z/pZ\n            return cmp(type(self), type(other))\n        return cmp(self.__order, other.__order)\n```\n\nNote the comment: The aim is to let `GF(p)` and `Z/pZ` evaluate unequal. This gives rise to two questions:\n\n1. Do we really want that they evaluate unequal?\n\n   We have\n\n   ```\n   sage: GF(5).has_coerce_map_from(IntegerModRing(5))\n   True\n   sage: IntegerModRing(5).has_coerce_map_from(GF(5))\n   False\n   ```\n   Since there is no coercion in both directions, the two rings can not be equal. So, I'd say `GF(5)!=IntegerModRing(5)` is correct, or at least consistent.\n\n2. Do we really want that `IntegerModRing(5)` and `IntegerModRing(5,category=Fields())` evaluate unequal?\n\n   This time, the coercions exist in both directions:\n\n   ```\n   sage: IntegerModRing(5).has_coerce_map_from(IntegerModRing(5, category=Fields()))\n   True\n   sage: IntegerModRing(5, category=Fields()).has_coerce_map_from(IntegerModRing(5))\n   True\n   ```\n   Hence, we might want to let them evaluate equal.\n\nI see the following options:\n\n- Make it so that integer mod rings with the same modulus evaluate equal, regardless of their type and category. This would be in spite of the comment in the code of `__cmp__`.\n- Change `__cmp__` so that integer mod rings evaluate equal if and only if there is a coercion in both directions. Hence, `GF(5)` and `ZZ.quo(5)` would evaluate unequal, but `IntegerModRing(5, category=...)` would all evaluate equal, independent of the category.\n- Change `_coerce_map_from_`, so that there is a coercion in both directions if and only if the two integer mod rings evaluate equal. Hence, `IntegerModRing(5, category=...)` would all be distinct, for different categories.\n- Do not allow to put in a \"category\" argument. But then, we might want to learn the rationale of introducing the argument in the first place. After all, if the modulus of integer mod ring R is a prime number, then asking `R in Fields()` will return true. So, if one knows during creation of the ring that the modulus is prime, one might use `GF(p)` instead of `IntegerModRing(p,category=Fields())`.\n\nFurther ways to go? In any case, there should be a new ticket.",
    "created_at": "2013-09-26T08:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187549",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:21" align="right">comment:21</div>

Hm. But the more I think about it...:

In the `__cmp__` method of `IntegerModRing`, it is said:

```
        if type(other) is not type(self):   # so that GF(p) =/= Z/pZ
            return cmp(type(self), type(other))
        return cmp(self.__order, other.__order)
```

Note the comment: The aim is to let `GF(p)` and `Z/pZ` evaluate unequal. This gives rise to two questions:

1. Do we really want that they evaluate unequal?

   We have

   ```
   sage: GF(5).has_coerce_map_from(IntegerModRing(5))
   True
   sage: IntegerModRing(5).has_coerce_map_from(GF(5))
   False
   ```
   Since there is no coercion in both directions, the two rings can not be equal. So, I'd say `GF(5)!=IntegerModRing(5)` is correct, or at least consistent.

2. Do we really want that `IntegerModRing(5)` and `IntegerModRing(5,category=Fields())` evaluate unequal?

   This time, the coercions exist in both directions:

   ```
   sage: IntegerModRing(5).has_coerce_map_from(IntegerModRing(5, category=Fields()))
   True
   sage: IntegerModRing(5, category=Fields()).has_coerce_map_from(IntegerModRing(5))
   True
   ```
   Hence, we might want to let them evaluate equal.

I see the following options:

- Make it so that integer mod rings with the same modulus evaluate equal, regardless of their type and category. This would be in spite of the comment in the code of `__cmp__`.
- Change `__cmp__` so that integer mod rings evaluate equal if and only if there is a coercion in both directions. Hence, `GF(5)` and `ZZ.quo(5)` would evaluate unequal, but `IntegerModRing(5, category=...)` would all evaluate equal, independent of the category.
- Change `_coerce_map_from_`, so that there is a coercion in both directions if and only if the two integer mod rings evaluate equal. Hence, `IntegerModRing(5, category=...)` would all be distinct, for different categories.
- Do not allow to put in a "category" argument. But then, we might want to learn the rationale of introducing the argument in the first place. After all, if the modulus of integer mod ring R is a prime number, then asking `R in Fields()` will return true. So, if one knows during creation of the ring that the modulus is prime, one might use `GF(p)` instead of `IntegerModRing(p,category=Fields())`.

Further ways to go? In any case, there should be a new ticket.



---

archive/issue_comments_187550.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@simon-king-jena](#comment:21):\n> - Do not allow to put in a \"category\" argument. But then, we might want to learn the rationale of introducing the argument in the first place. After all, if the modulus of integer mod ring R is a prime number, then asking `R in Fields()` will return true. So, if one knows during creation of the ring that the modulus is prime, one might use `GF(p)` instead of `IntegerModRing(p,category=Fields())`.\n\nHow embarrassing!\n\nI just used `git blame` to find out who introduced the use of a \"category\" argument for integer mod rings---and found that it was **I**, namely in #9138.\n\nI hope #9138 gives a rationale...",
    "created_at": "2013-09-26T11:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187550",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@simon-king-jena](#comment:21):
> - Do not allow to put in a "category" argument. But then, we might want to learn the rationale of introducing the argument in the first place. After all, if the modulus of integer mod ring R is a prime number, then asking `R in Fields()` will return true. So, if one knows during creation of the ring that the modulus is prime, one might use `GF(p)` instead of `IntegerModRing(p,category=Fields())`.

How embarrassing!

I just used `git blame` to find out who introduced the use of a "category" argument for integer mod rings---and found that it was **I**, namely in #9138.

I hope #9138 gives a rationale...



---

archive/issue_comments_187551.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n`IntegerModRing` is not mentioned in the discussion of #9138. But in the patch, I found that providing the category as an additional argument used to be a \"todo\". Namely, before #9138, we had this:\n\n```\nsage: FF = IntegerModRing(17, category = Fields()) # todo: not implemented \nsage: FF.category()\nJoin of Category of fields and Category of finite enumerated sets\nsage: TestSuite(FF).run()                          # todo: not implemented\n```\n\nSo, this yields to the question: Why has it been a \"todo\"? Nicolas, did you added this \"todo\"?",
    "created_at": "2013-09-26T11:10:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187551",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:23" align="right">comment:23</div>

`IntegerModRing` is not mentioned in the discussion of #9138. But in the patch, I found that providing the category as an additional argument used to be a "todo". Namely, before #9138, we had this:

```
sage: FF = IntegerModRing(17, category = Fields()) # todo: not implemented 
sage: FF.category()
Join of Category of fields and Category of finite enumerated sets
sage: TestSuite(FF).run()                          # todo: not implemented
```

So, this yields to the question: Why has it been a "todo"? Nicolas, did you added this "todo"?



---

archive/issue_comments_187552.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIt seems that it became \"todo\" in #8562. And there is a discussion [here](https://groups.google.com/forum/#!topic/sage-devel/IeIeHsnNIf4). It seems indeed that in this discussion there was an agreement that\n1. one should not do primality test when creating the `IntegerModRing`\n2. calling `is_field()` will do a primality test, and it was even suggested to update the category to `Fields()`, which actually has been impossible at that time\n3. it should be possible for the user to assert that the modulus is prime, *without* using `GF(n)`. And, by the way, note that `GF(n)` would by default do a factorisation of `n`, and I don't know if it is possible for the user to skip this.\n\nWhat do I conclude from this?\n\n- Given 3., I see why people want to work with `IntegerModRing(n,category=Fields())` instead of `GF(n)` when they know that the huge number n is prime.\n- Given 2., it might make sense to call `_refine_category` in `is_field` (and not only by 'R in Fields()') when the primality test succeeds.\n- Given the cited discussion, it seems that the existence of an optional `category` argument is good.\n- Providing the category `Fields()` at creation time should have the same effect as refining the category to `Fields()`. Namely, at the moment, the categories of `IntegerModRing(5,category=Fields())` and `IntegerModRing(5)` after `... in Fields()` are different.\n\nAnd I am stuck with the following questions:\n\n- Should the choice of a category play a role in testing equality for integer mod rings?\n- Would we like that there is precisely *one* instance of an integer mod ring for a given modulus, that is automatically updated if the user later provides more information? What I mean is this:\n\n  ```\n  sage: R = IntegerModRing(5)\n  sage: R.category()\n  Join of Category of commutative rings and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets\n  sage: S = IntegerModRing(5, category=Fields())\n  sage: R is S\n  True\n  sage: R.category()\n  Join of Category of fields and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets\n   ```\n\n__Suggested way to proceed__\n\n- I open a new ticket implementing the conclusions formulated above.\n- Depending on your answers to my questions, I open another new ticket to address them.\n- I make these one or two tickets a dependency for this ticket.",
    "created_at": "2013-09-26T11:45:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187552",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:24" align="right">comment:24</div>

It seems that it became "todo" in #8562. And there is a discussion [here](https://groups.google.com/forum/#!topic/sage-devel/IeIeHsnNIf4). It seems indeed that in this discussion there was an agreement that
1. one should not do primality test when creating the `IntegerModRing`
2. calling `is_field()` will do a primality test, and it was even suggested to update the category to `Fields()`, which actually has been impossible at that time
3. it should be possible for the user to assert that the modulus is prime, *without* using `GF(n)`. And, by the way, note that `GF(n)` would by default do a factorisation of `n`, and I don't know if it is possible for the user to skip this.

What do I conclude from this?

- Given 3., I see why people want to work with `IntegerModRing(n,category=Fields())` instead of `GF(n)` when they know that the huge number n is prime.
- Given 2., it might make sense to call `_refine_category` in `is_field` (and not only by 'R in Fields()') when the primality test succeeds.
- Given the cited discussion, it seems that the existence of an optional `category` argument is good.
- Providing the category `Fields()` at creation time should have the same effect as refining the category to `Fields()`. Namely, at the moment, the categories of `IntegerModRing(5,category=Fields())` and `IntegerModRing(5)` after `... in Fields()` are different.

And I am stuck with the following questions:

- Should the choice of a category play a role in testing equality for integer mod rings?
- Would we like that there is precisely *one* instance of an integer mod ring for a given modulus, that is automatically updated if the user later provides more information? What I mean is this:

  ```
  sage: R = IntegerModRing(5)
  sage: R.category()
  Join of Category of commutative rings and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets
  sage: S = IntegerModRing(5, category=Fields())
  sage: R is S
  True
  sage: R.category()
  Join of Category of fields and Category of subquotients of monoids and Category of quotients of semigroups and Category of finite enumerated sets
   ```

__Suggested way to proceed__

- I open a new ticket implementing the conclusions formulated above.
- Depending on your answers to my questions, I open another new ticket to address them.
- I make these one or two tickets a dependency for this ticket.



---

archive/issue_comments_187553.json:
```json
{
    "body": "Dependencies: **#15229**",
    "created_at": "2013-09-26T13:17:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187553",
    "user": "https://github.com/simon-king-jena"
}
```

Dependencies: **#15229**



---

archive/issue_comments_187554.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI have opened #15229 for the new problems.",
    "created_at": "2013-09-26T13:17:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187554",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:25" align="right">comment:25</div>

I have opened #15229 for the new problems.



---

archive/issue_comments_187555.json:
```json
{
    "body": "Changed keywords from none to **construction functor, test suite, sd53**",
    "created_at": "2013-09-27T10:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187555",
    "user": "https://github.com/simon-king-jena"
}
```

Changed keywords from none to **construction functor, test suite, sd53**



---

archive/issue_comments_187556.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:cb4929a]</code></td><td><code>Rebase wrt. #15229. Fix remaining doc test errors.</code></td></tr><tr><td><code>[changeset:11999a2]</code></td><td><code>Merge branch 'ticket/15229' into ticket/15223</code></td></tr><tr><td><code>[changeset:2a08a44]</code></td><td><code>Make pickling of ZZ/nZZ aware of being in Fields()</code></td></tr><tr><td><code>[changeset:6ada7e0]</code></td><td><code>Raise an error if a non-prime integer mod ring is found in Fields()</code></td></tr><tr><td><code>[changeset:cdc6806]</code></td><td><code>Replace optional \"category\" argument by \"is_field\"</code></td></tr><tr><td><code>[changeset:75576e2]</code></td><td><code>Warn if an integer mod ring is mistakenly found in Fields()</code></td></tr><tr><td><code>[changeset:1d2e2bc]</code></td><td><code>Document the \"proof\" argument of is_field.</code></td></tr><tr><td><code>[changeset:154f982]</code></td><td><code>Comparison of ZZ/nZZ disregards category Also refine category when calling is_field()</code></td></tr><tr><td><code>[changeset:e83735c]</code></td><td><code>Provide several constr. functors with more parameters</code></td></tr></table>\n",
    "created_at": "2013-09-28T18:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187556",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:cb4929a]</code></td><td><code>Rebase wrt. #15229. Fix remaining doc test errors.</code></td></tr><tr><td><code>[changeset:11999a2]</code></td><td><code>Merge branch 'ticket/15229' into ticket/15223</code></td></tr><tr><td><code>[changeset:2a08a44]</code></td><td><code>Make pickling of ZZ/nZZ aware of being in Fields()</code></td></tr><tr><td><code>[changeset:6ada7e0]</code></td><td><code>Raise an error if a non-prime integer mod ring is found in Fields()</code></td></tr><tr><td><code>[changeset:cdc6806]</code></td><td><code>Replace optional "category" argument by "is_field"</code></td></tr><tr><td><code>[changeset:75576e2]</code></td><td><code>Warn if an integer mod ring is mistakenly found in Fields()</code></td></tr><tr><td><code>[changeset:1d2e2bc]</code></td><td><code>Document the "proof" argument of is_field.</code></td></tr><tr><td><code>[changeset:154f982]</code></td><td><code>Comparison of ZZ/nZZ disregards category Also refine category when calling is_field()</code></td></tr><tr><td><code>[changeset:e83735c]</code></td><td><code>Provide several constr. functors with more parameters</code></td></tr></table>




---

archive/issue_comments_187557.json:
```json
{
    "body": "Changed commit from **[`a81fcc1`](https://github.com/sagemath/sagetrac-mirror/commit/a81fcc1072df88cc369d7aa0b7ae423fd97d7f02)** to **[`cb4929a`](https://github.com/sagemath/sagetrac-mirror/commit/cb4929aa68113ebdfe4e471a014f4621e42cdba7)**",
    "created_at": "2013-09-28T18:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187557",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a81fcc1`](https://github.com/sagemath/sagetrac-mirror/commit/a81fcc1072df88cc369d7aa0b7ae423fd97d7f02)** to **[`cb4929a`](https://github.com/sagemath/sagetrac-mirror/commit/cb4929aa68113ebdfe4e471a014f4621e42cdba7)**



---

archive/issue_comments_187558.json:
```json
{
    "body": "Author: **Simon King**",
    "created_at": "2013-09-28T19:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187558",
    "user": "https://github.com/simon-king-jena"
}
```

Author: **Simon King**



---

archive/issue_comments_187559.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n#15229 is ready for review (hint). I have merged #15229 into this branch, and rebased this branch, which was needed, as #15229 introduced a new convention for teaching to an integer mod ring that it is a field.\n\nFor me all tests pass. Hence, this one is ready for review, too!",
    "created_at": "2013-09-28T19:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187559",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:28" align="right">comment:28</div>

#15229 is ready for review (hint). I have merged #15229 into this branch, and rebased this branch, which was needed, as #15229 introduced a new convention for teaching to an integer mod ring that it is a field.

For me all tests pass. Hence, this one is ready for review, too!



---

archive/issue_events_216379.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-09-28T19:00:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216379"
}
```



---

archive/issue_events_216380.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2013-12-20T12:40:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216380"
}
```



---

archive/issue_events_216381.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2013-12-20T12:40:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216381"
}
```



---

archive/issue_comments_187560.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThere are new test failures with the current `develop`, unfortunately:\n\n```\n----------------------------------------------------------------------\nsage -t src/sage/rings/polynomial/pbori.pyx  # 1 doctest failed\nsage -t src/sage/rings/finite_rings/integer_mod_ring.py  # 4 doctests failed\nsage -t src/sage/rings/residue_field.pyx  # 2 doctests failed\nsage -t src/sage/rings/finite_rings/finite_field_pari_ffelt.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2013-12-20T12:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187560",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:29" align="right">comment:29</div>

There are new test failures with the current `develop`, unfortunately:

```
----------------------------------------------------------------------
sage -t src/sage/rings/polynomial/pbori.pyx  # 1 doctest failed
sage -t src/sage/rings/finite_rings/integer_mod_ring.py  # 4 doctests failed
sage -t src/sage/rings/residue_field.pyx  # 2 doctests failed
sage -t src/sage/rings/finite_rings/finite_field_pari_ffelt.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_187561.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReviewing the errors:\n\n```\nsage -t src/sage/rings/polynomial/pbori.pyx\n**********************************************************************\nFile \"src/sage/rings/polynomial/pbori.pyx\", line 476, in sage.rings.polynomial.pbori.BooleanPolynomialRing.construction\nFailed example:\n    P.<x0, x1, x2, x3> = BooleanPolynomialRing(4,order='degrevlex(2),degrevlex(2)')\nExpected nothing\nGot:\n    doctest:1: DeprecationWarning: using 'degrevlex' in Boolean polynomial rings is deprecated. If needed, reverse the order of variables manually and use 'degneglex'\n    See http://trac.sagemath.org/13849 for details.\n**********************************************************************\n```\nOK, it seems we need a different ordering. Mostly harmless\n\n`sage -t src/sage/rings/residue_field.pyx` and `sage -t src/sage/rings/finite_rings/finite_field_pari_ffelt.py`: The new test fails on some examples. Hooray! The new test helped to detect another bug!\n\nFor me, `sage -t src/sage/rings/finite_rings/integer_mod_ring.py` passes without error.",
    "created_at": "2013-12-28T12:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187561",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:30" align="right">comment:30</div>

Reviewing the errors:

```
sage -t src/sage/rings/polynomial/pbori.pyx
**********************************************************************
File "src/sage/rings/polynomial/pbori.pyx", line 476, in sage.rings.polynomial.pbori.BooleanPolynomialRing.construction
Failed example:
    P.<x0, x1, x2, x3> = BooleanPolynomialRing(4,order='degrevlex(2),degrevlex(2)')
Expected nothing
Got:
    doctest:1: DeprecationWarning: using 'degrevlex' in Boolean polynomial rings is deprecated. If needed, reverse the order of variables manually and use 'degneglex'
    See http://trac.sagemath.org/13849 for details.
**********************************************************************
```
OK, it seems we need a different ordering. Mostly harmless

`sage -t src/sage/rings/residue_field.pyx` and `sage -t src/sage/rings/finite_rings/finite_field_pari_ffelt.py`: The new test fails on some examples. Hooray! The new test helped to detect another bug!

For me, `sage -t src/sage/rings/finite_rings/integer_mod_ring.py` passes without error.



---

archive/issue_comments_187562.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nPS: What has failed for you in `sage -t src/sage/rings/finite_rings/integer_mod_ring.py`?",
    "created_at": "2013-12-28T12:27:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187562",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:31" align="right">comment:31</div>

PS: What has failed for you in `sage -t src/sage/rings/finite_rings/integer_mod_ring.py`?



---

archive/issue_comments_187563.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@simon-king-jena](#comment:31):\n> PS: What has failed for you in `sage -t src/sage/rings/finite_rings/integer_mod_ring.py`?\n\nThe failures do not look deterministic. With the current state of your branch, all tests passed when I did `sage -t integer_mod_ring.py` for the first time. Then I tried again and repeatedly got:\n\n```\n$ sage -t src/sage/rings/finite_rings/integer_mod_ring.py\nRunning doctests with ID 2013-12-28-16-42-51-6b28af73.\nDoctesting 1 file.\nsage -t src/sage/rings/finite_rings/integer_mod_ring.py\n**********************************************************************\nFile \"src/sage/rings/finite_rings/integer_mod_ring.py\", line 729, in sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field\nFailed example:\n    Integers(15).fraction_field()\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: self must be an integral domain.\nGot:\n    Ring of integers modulo 15\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field\n    [251 tests, 1 failure, 1.68 s]\n----------------------------------------------------------------------\nsage -t src/sage/rings/finite_rings/integer_mod_ring.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nBut I'm unable to reproduce this behaviour from the sage command line.\n\nI will run the tests again after rebuilding sage from scratch.",
    "created_at": "2013-12-28T15:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187563",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@simon-king-jena](#comment:31):
> PS: What has failed for you in `sage -t src/sage/rings/finite_rings/integer_mod_ring.py`?

The failures do not look deterministic. With the current state of your branch, all tests passed when I did `sage -t integer_mod_ring.py` for the first time. Then I tried again and repeatedly got:

```
$ sage -t src/sage/rings/finite_rings/integer_mod_ring.py
Running doctests with ID 2013-12-28-16-42-51-6b28af73.
Doctesting 1 file.
sage -t src/sage/rings/finite_rings/integer_mod_ring.py
**********************************************************************
File "src/sage/rings/finite_rings/integer_mod_ring.py", line 729, in sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field
Failed example:
    Integers(15).fraction_field()
Expected:
    Traceback (most recent call last):
    ...
    TypeError: self must be an integral domain.
Got:
    Ring of integers modulo 15
**********************************************************************
1 item had failures:
   1 of   7 in sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field
    [251 tests, 1 failure, 1.68 s]
----------------------------------------------------------------------
sage -t src/sage/rings/finite_rings/integer_mod_ring.py  # 1 doctest failed
----------------------------------------------------------------------
```
But I'm unable to reproduce this behaviour from the sage command line.

I will run the tests again after rebuilding sage from scratch.



---

archive/issue_comments_187564.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@mezzarobba](#comment:32):\n> I will run the tests again after rebuilding sage from scratch.\n\nDone: I get the same heisenfailure in `integer_mod_ring.py` on your branch, *without* merging in develop. I'm currently checking whether the problem exists on `develop` (again with a clean build, so it will take a while).",
    "created_at": "2013-12-28T17:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187564",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@mezzarobba](#comment:32):
> I will run the tests again after rebuilding sage from scratch.

Done: I get the same heisenfailure in `integer_mod_ring.py` on your branch, *without* merging in develop. I'm currently checking whether the problem exists on `develop` (again with a clean build, so it will take a while).



---

archive/issue_comments_187565.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@mezzarobba](#comment:33):\n> I'm currently checking whether the problem exists on `develop`\n\nApparently it doesn't.",
    "created_at": "2013-12-28T19:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187565",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@mezzarobba](#comment:33):
> I'm currently checking whether the problem exists on `develop`

Apparently it doesn't.



---

archive/issue_comments_187566.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@mezzarobba](#comment:34):\n> Replying to [@mezzarobba](#comment:33):\n> > I'm currently checking whether the problem exists on `develop`\n\n> \n> Apparently it doesn't.\n\nAnd I'm also unable to reproduce it when I first build `develop` from scratch, and then merge in your branch and do an incremental build.\n\nPerhaps a bug of 5.12.x that was fixed since them and resurfaced randomly in my tests due to problems with incremental builds, then?",
    "created_at": "2013-12-28T19:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187566",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@mezzarobba](#comment:34):
> Replying to [@mezzarobba](#comment:33):
> > I'm currently checking whether the problem exists on `develop`

> 
> Apparently it doesn't.

And I'm also unable to reproduce it when I first build `develop` from scratch, and then merge in your branch and do an incremental build.

Perhaps a bug of 5.12.x that was fixed since them and resurfaced randomly in my tests due to problems with incremental builds, then?



---

archive/issue_comments_187567.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@mezzarobba](#comment:32):\n> The failures do not look deterministic. With the current state of your branch, all tests passed when I did `sage -t integer_mod_ring.py` for the first time. Then I tried again and repeatedly got:\n> \n> ```\n> $ sage -t src/sage/rings/finite_rings/integer_mod_ring.py\n> Running doctests with ID 2013-12-28-16-42-51-6b28af73.\n> Doctesting 1 file.\n> sage -t src/sage/rings/finite_rings/integer_mod_ring.py\n> **********************************************************************\n> File \"src/sage/rings/finite_rings/integer_mod_ring.py\", line 729, in sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field\n> Failed example:\n>     Integers(15).fraction_field()\n> Expected:\n>     Traceback (most recent call last):\n>     ...\n>     TypeError: self must be an integral domain.\n> Got:\n>     Ring of integers modulo 15\n> ```\n\nAhahahaha! It looks like the same example (modulus 15) was used in a different example to demonstrate that one can erroneously claim that `IntegerModRing(15)` is a field, and it could be that by random order of executing the tests this false information was cached. To be on the safe side, we could empty the cache.\n\n> I will run the tests again after rebuilding sage from scratch.\n\nDid you pull from #15229?\n\nFor the record: I get\n\n```\nsage -t src/sage/rings/residue_field.pyx  # 2 doctests failed\nsage -t src/sage/rings/polynomial/pbori.pyx  # 1 doctest failed\nsage -t src/sage/rings/finite_rings/finite_field_pari_ffelt.py  # 1 doctest failed\n```",
    "created_at": "2013-12-28T20:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187567",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@mezzarobba](#comment:32):
> The failures do not look deterministic. With the current state of your branch, all tests passed when I did `sage -t integer_mod_ring.py` for the first time. Then I tried again and repeatedly got:
> 
> ```
> $ sage -t src/sage/rings/finite_rings/integer_mod_ring.py
> Running doctests with ID 2013-12-28-16-42-51-6b28af73.
> Doctesting 1 file.
> sage -t src/sage/rings/finite_rings/integer_mod_ring.py
> **********************************************************************
> File "src/sage/rings/finite_rings/integer_mod_ring.py", line 729, in sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field
> Failed example:
>     Integers(15).fraction_field()
> Expected:
>     Traceback (most recent call last):
>     ...
>     TypeError: self must be an integral domain.
> Got:
>     Ring of integers modulo 15
> ```

Ahahahaha! It looks like the same example (modulus 15) was used in a different example to demonstrate that one can erroneously claim that `IntegerModRing(15)` is a field, and it could be that by random order of executing the tests this false information was cached. To be on the safe side, we could empty the cache.

> I will run the tests again after rebuilding sage from scratch.

Did you pull from #15229?

For the record: I get

```
sage -t src/sage/rings/residue_field.pyx  # 2 doctests failed
sage -t src/sage/rings/polynomial/pbori.pyx  # 1 doctest failed
sage -t src/sage/rings/finite_rings/finite_field_pari_ffelt.py  # 1 doctest failed
```



---

archive/issue_comments_187568.json:
```json
{
    "body": "Changed commit from **[`cb4929a`](https://github.com/sagemath/sagetrac-mirror/commit/cb4929aa68113ebdfe4e471a014f4621e42cdba7)** to **[`d0c42ff`](https://github.com/sagemath/sagetrac-mirror/commit/d0c42ff938754eb8ad52f7819671f99552d683ed)**",
    "created_at": "2013-12-28T20:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187568",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cb4929a`](https://github.com/sagemath/sagetrac-mirror/commit/cb4929aa68113ebdfe4e471a014f4621e42cdba7)** to **[`d0c42ff`](https://github.com/sagemath/sagetrac-mirror/commit/d0c42ff938754eb8ad52f7819671f99552d683ed)**



---

archive/issue_comments_187569.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0c42ff\"><code>d0c42ff</code></a></td><td><code>Trac 15223: Avoid side-effects between doctests of integer_mod_ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6fa391\"><code>d6fa391</code></a></td><td><code>Merge branch 'ticket/15229' into ticket/15223</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fae3f07\"><code>fae3f07</code></a></td><td><code>Trac 15229: Complete a phrase in the doc, remove trailing whitespace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b61761\"><code>7b61761</code></a></td><td><code>Merge branch 'master' into ticket/15229</code></td></tr></table>\n",
    "created_at": "2013-12-28T20:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187569",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0c42ff"><code>d0c42ff</code></a></td><td><code>Trac 15223: Avoid side-effects between doctests of integer_mod_ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6fa391"><code>d6fa391</code></a></td><td><code>Merge branch 'ticket/15229' into ticket/15223</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fae3f07"><code>fae3f07</code></a></td><td><code>Trac 15229: Complete a phrase in the doc, remove trailing whitespace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b61761"><code>7b61761</code></a></td><td><code>Merge branch 'master' into ticket/15229</code></td></tr></table>




---

archive/issue_comments_187570.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI have merged #15229, since it changes `integer_mod_ring.py`, and I added a commit to clear the cache of the integer mod ring factory after compromising the cache by lying about `is_field=True`.\n\nHopefully this will fix the \"Heisenbug\" (which probably is not more than a side-effect between doc-tests). The remaining failures shall be fixed in the next commit.",
    "created_at": "2013-12-28T20:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187570",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:38" align="right">comment:38</div>

I have merged #15229, since it changes `integer_mod_ring.py`, and I added a commit to clear the cache of the integer mod ring factory after compromising the cache by lying about `is_field=True`.

Hopefully this will fix the "Heisenbug" (which probably is not more than a side-effect between doc-tests). The remaining failures shall be fixed in the next commit.



---

archive/issue_comments_187571.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nConcerning the error with residue fields:\n\n```\nsage: K.<z> = CyclotomicField(7)\nsage: P = K.factor(17)[0][0]\nsage: ff = K.residue_field(P)\nsage: ff.construction()\n(AlgebraicExtensionFunctor, Finite Field of size 17)\nsage: F,R = _\nsage: F(R)\nFinite Field in zbar of size 17^6\nsage: ff\nResidue field in zbar of Fractional ideal (17)\nsage: ff.order()\n24137569\nsage: F(R).order()\n24137569\n```\n\nSo, the construction of a residue field just yields a finite field, not a residue field. Either the algebraic extension functor needs information of whether it is a residue field or not, or we need a \"residue field functor\". I wouldn't like to see the latter, since it is clearly no functor. OK, it would also be possible to kill the construction of residue fields.",
    "created_at": "2013-12-28T20:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187571",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:39" align="right">comment:39</div>

Concerning the error with residue fields:

```
sage: K.<z> = CyclotomicField(7)
sage: P = K.factor(17)[0][0]
sage: ff = K.residue_field(P)
sage: ff.construction()
(AlgebraicExtensionFunctor, Finite Field of size 17)
sage: F,R = _
sage: F(R)
Finite Field in zbar of size 17^6
sage: ff
Residue field in zbar of Fractional ideal (17)
sage: ff.order()
24137569
sage: F(R).order()
24137569
```

So, the construction of a residue field just yields a finite field, not a residue field. Either the algebraic extension functor needs information of whether it is a residue field or not, or we need a "residue field functor". I wouldn't like to see the latter, since it is clearly no functor. OK, it would also be possible to kill the construction of residue fields.



---

archive/issue_comments_187572.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThe algebraic extension functors already have a version to construct cyclotomic fields. It should be straight forward to make them deal with residue fields, too.",
    "created_at": "2013-12-28T21:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187572",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:40" align="right">comment:40</div>

The algebraic extension functors already have a version to construct cyclotomic fields. It should be straight forward to make them deal with residue fields, too.



---

archive/issue_comments_187573.json:
```json
{
    "body": "Work Issues: **algebraic extension functor for residue fields**",
    "created_at": "2013-12-28T21:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187573",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **algebraic extension functor for residue fields**



---

archive/issue_comments_187574.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nRather than killing the construction, I guess the following is a nice behaviour:\n\n```\n        sage: K.<z> = CyclotomicField(7)\n        sage: P = K.factor(17)[0][0]\n        sage: k = K.residue_field(P)\n        sage: F, R = k.construction()\n        sage: F\n        AlgebraicExtensionFunctor\n        sage: R\n        Cyclotomic Field of order 7 and degree 6\n        sage: F(R) is k\n        True\n        sage: F(ZZ)\n        Residue field of Integers modulo 17\n        sage: F(CyclotomicField(49))\n        Residue field in zeta49bar of Fractional ideal (17)\n```",
    "created_at": "2013-12-28T21:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187574",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:41" align="right">comment:41</div>

Rather than killing the construction, I guess the following is a nice behaviour:

```
        sage: K.<z> = CyclotomicField(7)
        sage: P = K.factor(17)[0][0]
        sage: k = K.residue_field(P)
        sage: F, R = k.construction()
        sage: F
        AlgebraicExtensionFunctor
        sage: R
        Cyclotomic Field of order 7 and degree 6
        sage: F(R) is k
        True
        sage: F(ZZ)
        Residue field of Integers modulo 17
        sage: F(CyclotomicField(49))
        Residue field in zeta49bar of Fractional ideal (17)
```



---

archive/issue_comments_187575.json:
```json
{
    "body": "Changed commit from **[`d0c42ff`](https://github.com/sagemath/sagetrac-mirror/commit/d0c42ff938754eb8ad52f7819671f99552d683ed)** to **[`ab2c12e`](https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e1fbebf2fa75291f5542e468f952d4c9f6)**",
    "created_at": "2013-12-28T21:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187575",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d0c42ff`](https://github.com/sagemath/sagetrac-mirror/commit/d0c42ff938754eb8ad52f7819671f99552d683ed)** to **[`ab2c12e`](https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e1fbebf2fa75291f5542e468f952d4c9f6)**



---

archive/issue_comments_187576.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e\"><code>ab2c12e</code></a></td><td><code>Trac 15223: Construction of residue fields</code></td></tr></table>\n",
    "created_at": "2013-12-28T21:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187576",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e"><code>ab2c12e</code></a></td><td><code>Trac 15223: Construction of residue fields</code></td></tr></table>




---

archive/issue_comments_187577.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nResidue fields are fixed with the latest commit.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e\"><code>ab2c12e</code></a></td><td><code>Trac 15223: Construction of residue fields</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e\"><code>ab2c12e</code></a></td><td><code>Trac 15223: Construction of residue fields</code></td></tr></table>\n",
    "created_at": "2013-12-28T22:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187577",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:43" align="right">comment:43</div>

Residue fields are fixed with the latest commit.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e"><code>ab2c12e</code></a></td><td><code>Trac 15223: Construction of residue fields</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e"><code>ab2c12e</code></a></td><td><code>Trac 15223: Construction of residue fields</code></td></tr></table>




---

archive/issue_comments_187578.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b23f18d\"><code>b23f18d</code></a></td><td><code>Trac 15223: Construction of field extensions with implementation</code></td></tr></table>\n",
    "created_at": "2013-12-28T22:45:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187578",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b23f18d"><code>b23f18d</code></a></td><td><code>Trac 15223: Construction of field extensions with implementation</code></td></tr></table>




---

archive/issue_comments_187579.json:
```json
{
    "body": "Changed commit from **[`ab2c12e`](https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e1fbebf2fa75291f5542e468f952d4c9f6)** to **[`b23f18d`](https://github.com/sagemath/sagetrac-mirror/commit/b23f18d716915ae30283cd90da74f865067f72fe)**",
    "created_at": "2013-12-28T22:45:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187579",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ab2c12e`](https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e1fbebf2fa75291f5542e468f952d4c9f6)** to **[`b23f18d`](https://github.com/sagemath/sagetrac-mirror/commit/b23f18d716915ae30283cd90da74f865067f72fe)**



---

archive/issue_comments_187580.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nWith the new commit, the construction of field extensions is fixed.\n\nProblem was: Finite fields may have different implementations (givaro, pari_ffelt, ...), but this was ignored in the construction of the construction functor. Now, the implementation is tracked in the construction functor.\n\nOne complication: When we merge the construction functors, we need to choose among the implementations. I decided (for now) to always rely on the *default* implementation upon merging. \n\n__Rationale__\n\n- The situation is not worse than before. Without the latest commit, applying the construction functor of a finite field would *always* use the default implementation. With the latest commit, applying the construction functor of a finite field F will use the implementation that was used for F. Only if a new construction functor is created by merging two functors (which may happen in the pushout construction), the default implementation will be used, \n\n- We can't rely on a custom implementation in the merged functor, since a custom implementation may not be available for a non-prime field, that could be the result of merging.",
    "created_at": "2013-12-28T22:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187580",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:45" align="right">comment:45</div>

With the new commit, the construction of field extensions is fixed.

Problem was: Finite fields may have different implementations (givaro, pari_ffelt, ...), but this was ignored in the construction of the construction functor. Now, the implementation is tracked in the construction functor.

One complication: When we merge the construction functors, we need to choose among the implementations. I decided (for now) to always rely on the *default* implementation upon merging. 

__Rationale__

- The situation is not worse than before. Without the latest commit, applying the construction functor of a finite field would *always* use the default implementation. With the latest commit, applying the construction functor of a finite field F will use the implementation that was used for F. Only if a new construction functor is created by merging two functors (which may happen in the pushout construction), the default implementation will be used, 

- We can't rely on a custom implementation in the merged functor, since a custom implementation may not be available for a non-prime field, that could be the result of merging.



---

archive/issue_comments_187581.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nHooray, with the last commit, `sage -t src/sage/rings/polynomial/pbori.pyx` passes, too!\n\nHence, I think it could be reviewed now (but I will run the tests while sleeping).",
    "created_at": "2013-12-28T23:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187581",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:46" align="right">comment:46</div>

Hooray, with the last commit, `sage -t src/sage/rings/polynomial/pbori.pyx` passes, too!

Hence, I think it could be reviewed now (but I will run the tests while sleeping).



---

archive/issue_events_216382.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-12-28T23:02:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216382"
}
```



---

archive/issue_events_216383.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-12-28T23:02:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216383"
}
```



---

archive/issue_comments_187582.json:
```json
{
    "body": "Changed work issues from **algebraic extension functor for residue fields** to none",
    "created_at": "2013-12-28T23:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187582",
    "user": "https://github.com/simon-king-jena"
}
```

Changed work issues from **algebraic extension functor for residue fields** to none



---

archive/issue_comments_187583.json:
```json
{
    "body": "Changed commit from **[`b23f18d`](https://github.com/sagemath/sagetrac-mirror/commit/b23f18d716915ae30283cd90da74f865067f72fe)** to **[`2091e92`](https://github.com/sagemath/sagetrac-mirror/commit/2091e92ff6855bbb58eecbb250883b719a8d8eb0)**",
    "created_at": "2013-12-29T07:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187583",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b23f18d`](https://github.com/sagemath/sagetrac-mirror/commit/b23f18d716915ae30283cd90da74f865067f72fe)** to **[`2091e92`](https://github.com/sagemath/sagetrac-mirror/commit/2091e92ff6855bbb58eecbb250883b719a8d8eb0)**



---

archive/issue_comments_187584.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2091e92\"><code>2091e92</code></a></td><td><code>Trac 15223: Avoid deprecation warning in a new test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfcf31f\"><code>dfcf31f</code></a></td><td><code>Merge branch 'develop' into ticket/15223</code></td></tr></table>\n",
    "created_at": "2013-12-29T07:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187584",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2091e92"><code>2091e92</code></a></td><td><code>Trac 15223: Avoid deprecation warning in a new test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfcf31f"><code>dfcf31f</code></a></td><td><code>Merge branch 'develop' into ticket/15223</code></td></tr></table>




---

archive/issue_comments_187585.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nSigh. I still don't like git. It makes it soooooo easy to do mistakes, whose reversal is considered \"changing history\".\n\nAnyway. It was an accident that I did not revert merging the branch 'develop' before pushing it here.\n\nCan someone tell me, *if* and *how* I should remove the merge commit?\n\nBut now all tests pass, and thus it can be reviewed.",
    "created_at": "2013-12-29T07:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187585",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:48" align="right">comment:48</div>

Sigh. I still don't like git. It makes it soooooo easy to do mistakes, whose reversal is considered "changing history".

Anyway. It was an accident that I did not revert merging the branch 'develop' before pushing it here.

Can someone tell me, *if* and *how* I should remove the merge commit?

But now all tests pass, and thus it can be reviewed.



---

archive/issue_comments_187586.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@simon-king-jena](#comment:48):\n> Can someone tell me, *if* and *how* I should remove the merge commit?\n\nIm my opinion (some people might disagree), yes, you should, since it is very unlikely that anyone has based anything on the last state of your branch. There is no need to be religious about history rewrites, one just needs to avoid forcing people to do rebases.\n\nTo remove the merge commit, just do `git rebase HEAD^ --onto HEAD^^` on your branch (and then `git push -f` to push the modified branch to trac).",
    "created_at": "2013-12-29T12:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187586",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@simon-king-jena](#comment:48):
> Can someone tell me, *if* and *how* I should remove the merge commit?

Im my opinion (some people might disagree), yes, you should, since it is very unlikely that anyone has based anything on the last state of your branch. There is no need to be religious about history rewrites, one just needs to avoid forcing people to do rebases.

To remove the merge commit, just do `git rebase HEAD^ --onto HEAD^^` on your branch (and then `git push -f` to push the modified branch to trac).



---

archive/issue_comments_187587.json:
```json
{
    "body": "Changed commit from **[`2091e92`](https://github.com/sagemath/sagetrac-mirror/commit/2091e92ff6855bbb58eecbb250883b719a8d8eb0)** to **[`7a24de6`](https://github.com/sagemath/sagetrac-mirror/commit/7a24de6caa6abad9218c6186030787871c070905)**",
    "created_at": "2013-12-29T13:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187587",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2091e92`](https://github.com/sagemath/sagetrac-mirror/commit/2091e92ff6855bbb58eecbb250883b719a8d8eb0)** to **[`7a24de6`](https://github.com/sagemath/sagetrac-mirror/commit/7a24de6caa6abad9218c6186030787871c070905)**



---

archive/issue_comments_187588.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Recent commits:\n|                                                                                                                |                                                     |\n|----------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[7a24de6](https://github.com/sagemath/sagetrac-mirror/commit/7a24de6)|`Trac 15223: Avoid deprecation warning in a new test`|\n|[b23f18d](https://github.com/sagemath/sagetrac-mirror/commit/b23f18d)|`Trac 15223: Construction of field extensions with implementation`|\n|[ab2c12e](https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e)|`Trac 15223: Construction of residue fields`|\n|[d0c42ff](https://github.com/sagemath/sagetrac-mirror/commit/d0c42ff)|`Trac 15223: Avoid side-effects between doctests of integer_mod_ring`|\n|[d6fa391](https://github.com/sagemath/sagetrac-mirror/commit/d6fa391)|`Merge branch 'ticket/15229' into ticket/15223`|",
    "created_at": "2013-12-29T13:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187588",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Recent commits:
|                                                                                                                |                                                     |
|----------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[7a24de6](https://github.com/sagemath/sagetrac-mirror/commit/7a24de6)|`Trac 15223: Avoid deprecation warning in a new test`|
|[b23f18d](https://github.com/sagemath/sagetrac-mirror/commit/b23f18d)|`Trac 15223: Construction of field extensions with implementation`|
|[ab2c12e](https://github.com/sagemath/sagetrac-mirror/commit/ab2c12e)|`Trac 15223: Construction of residue fields`|
|[d0c42ff](https://github.com/sagemath/sagetrac-mirror/commit/d0c42ff)|`Trac 15223: Avoid side-effects between doctests of integer_mod_ring`|
|[d6fa391](https://github.com/sagemath/sagetrac-mirror/commit/d6fa391)|`Merge branch 'ticket/15229' into ticket/15223`|



---

archive/issue_comments_187589.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@mezzarobba](#comment:49):\n> Replying to [@simon-king-jena](#comment:48):\n> > Can someone tell me, *if* and *how* I should remove the merge commit?\n\n> \n> Im my opinion (some people might disagree), yes, you should, since it is very unlikely that anyone has based anything on the last state of your branch. There is no need to be religious about history rewrites, one just needs to avoid forcing people to do rebases.\n> \n> To remove the merge commit, just do `git rebase HEAD^ --onto HEAD^^` on your branch (and then `git push -f` to push the modified branch to trac).\n\nThank you! Can you briefly explain to me the differences between `^HEAD`, `HEAD^` and `HEAD~`? I keep forgetting what is what.",
    "created_at": "2013-12-29T13:29:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187589",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@mezzarobba](#comment:49):
> Replying to [@simon-king-jena](#comment:48):
> > Can someone tell me, *if* and *how* I should remove the merge commit?

> 
> Im my opinion (some people might disagree), yes, you should, since it is very unlikely that anyone has based anything on the last state of your branch. There is no need to be religious about history rewrites, one just needs to avoid forcing people to do rebases.
> 
> To remove the merge commit, just do `git rebase HEAD^ --onto HEAD^^` on your branch (and then `git push -f` to push the modified branch to trac).

Thank you! Can you briefly explain to me the differences between `^HEAD`, `HEAD^` and `HEAD~`? I keep forgetting what is what.



---

archive/issue_comments_187590.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@simon-king-jena](#comment:51):\n> Thank you! Can you briefly explain to me the differences between `^HEAD`, `HEAD^` and `HEAD~`? I keep forgetting what is what.\n\nThe last two specify revisions (commits): `rev^k` is the `k`-th parent of `rev`; `rev~k` is the grand<sup>`k`</sup>-first-parent of `rev`; `rev^` and `rev~` are shorthands `rev^1` == `rev~1`.\n\n`^rev` is something different: it is used to specify lower bounds of ranges of revisions. For example, `rev1 rev2 ^rev3` is the set of all ancestors of `rev1` or `rev2` that are not ancestors of `rev3`.\n\nSee `git help revisions` for the full syntax of revision specifications.",
    "created_at": "2013-12-29T18:16:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187590",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@simon-king-jena](#comment:51):
> Thank you! Can you briefly explain to me the differences between `^HEAD`, `HEAD^` and `HEAD~`? I keep forgetting what is what.

The last two specify revisions (commits): `rev^k` is the `k`-th parent of `rev`; `rev~k` is the grand<sup>`k`</sup>-first-parent of `rev`; `rev^` and `rev~` are shorthands `rev^1` == `rev~1`.

`^rev` is something different: it is used to specify lower bounds of ranges of revisions. For example, `rev1 rev2 ^rev3` is the set of all ancestors of `rev1` or `rev2` that are not ancestors of `rev3`.

See `git help revisions` for the full syntax of revision specifications.



---

archive/issue_events_216384.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216384"
}
```



---

archive/issue_events_216385.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216385"
}
```



---

archive/issue_events_216386.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216386"
}
```



---

archive/issue_events_216387.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216387"
}
```



---

archive/issue_comments_187591.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nSet to 'needs work' because patchbot fails to apply the patch (open dependency).",
    "created_at": "2014-05-09T08:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187591",
    "user": "https://github.com/rwst"
}
```

<div id="comment:55" align="right">comment:55</div>

Set to 'needs work' because patchbot fails to apply the patch (open dependency).



---

archive/issue_events_216388.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-09T08:18:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216388"
}
```



---

archive/issue_events_216389.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-09T08:18:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216389"
}
```



---

archive/issue_comments_187592.json:
```json
{
    "body": "Work Issues: **wait until dependency closed**",
    "created_at": "2014-05-09T08:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187592",
    "user": "https://github.com/rwst"
}
```

Work Issues: **wait until dependency closed**



---

archive/issue_events_216390.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216390"
}
```



---

archive/issue_events_216391.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216391"
}
```



---

archive/issue_comments_187593.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nThe dependency *is* closed, but apparently the branch doesn't merge.",
    "created_at": "2017-01-09T12:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187593",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:57" align="right">comment:57</div>

The dependency *is* closed, but apparently the branch doesn't merge.



---

archive/issue_comments_187594.json:
```json
{
    "body": "Changed work issues from **wait until dependency closed** to **Rebase**",
    "created_at": "2017-01-09T12:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187594",
    "user": "https://github.com/simon-king-jena"
}
```

Changed work issues from **wait until dependency closed** to **Rebase**



---

archive/issue_comments_187595.json:
```json
{
    "body": "Changed branch from **[u/SimonKing/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15223)** to **[u/mkoeppe/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/15223)**",
    "created_at": "2020-08-31T01:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187595",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/SimonKing/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15223)** to **[u/mkoeppe/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/15223)**



---

archive/issue_comments_187596.json:
```json
{
    "body": "Changed commit from **[`7a24de6`](https://github.com/sagemath/sagetrac-mirror/commit/7a24de6caa6abad9218c6186030787871c070905)** to **[`b172800`](https://github.com/sagemath/sagetrac-mirror/commit/b17280000a16b9e4d17183874b742513cc7c6e0a)**",
    "created_at": "2020-08-31T01:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187596",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`7a24de6`](https://github.com/sagemath/sagetrac-mirror/commit/7a24de6caa6abad9218c6186030787871c070905)** to **[`b172800`](https://github.com/sagemath/sagetrac-mirror/commit/b17280000a16b9e4d17183874b742513cc7c6e0a)**



---

archive/issue_comments_187597.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nIn the middle of manually rebasing this onto 9.2.beta10.\n\n```\nDONE 91712d0545 Test that the construction of a parent really constructs the parent\nDONE 91bbab6438 Add a test to Parent._test_construction\nREDONE 2bb2cf269b Fix most doctest errors that are due to enlarging the test suite\nDONE a81fcc1072 Make _test_construction pass in the thematic tutorial\nDONE e83735ca25 Provide several constr. functors with more parameters\n```\n\nTODO:\n\n```\npick cb4929aa68 Rebase wrt. #15229. Fix remaining doc test errors.\npick d0c42ff938 Trac 15223: Avoid side-effects between doctests of integer_mod_ring\npick ab2c12e1fb Trac 15223: Construction of residue fields\npick b23f18d716 Trac 15223: Construction of field extensions with implementation\npick 7a24de6caa Trac 15223: Avoid deprecation warning in a new test\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b9f140ae7a08f6277ccb9ec520d0ee64fc8ea31\"><code>2b9f140</code></a></td><td><code>Test that the construction of a parent really constructs the parent</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5cbb08f07a1b92e39bdf52157e98a4750851186f\"><code>5cbb08f</code></a></td><td><code>Add a test to Parent._test_construction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7890f786f142878bc49bff85d78a213ba1e129c\"><code>e7890f7</code></a></td><td><code>Sets._test_construction: Use assertEqual</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9939b21a2fb8b19515dedbec7c374f81d54ebfce\"><code>9939b21</code></a></td><td><code>src/sage/categories: Fix doctest errors that are due to enlarging the test suite</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/020085667a9682e13e1080b6ac759fa8056ab822\"><code>0200856</code></a></td><td><code>Make _test_construction pass in the thematic tutorial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5425314d4ce8bdd0eaf6afdd05b67e021fd8a99\"><code>e542531</code></a></td><td><code>src/doc/en/thematic_tutorials/coercion_and_categories.rst: Fix doctest errors that are due to enlarging the test suite</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b17280000a16b9e4d17183874b742513cc7c6e0a\"><code>b172800</code></a></td><td><code>Provide several constr. functors with more parameters</code></td></tr></table>\n",
    "created_at": "2020-08-31T01:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187597",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">comment:59</div>

In the middle of manually rebasing this onto 9.2.beta10.

```
DONE 91712d0545 Test that the construction of a parent really constructs the parent
DONE 91bbab6438 Add a test to Parent._test_construction
REDONE 2bb2cf269b Fix most doctest errors that are due to enlarging the test suite
DONE a81fcc1072 Make _test_construction pass in the thematic tutorial
DONE e83735ca25 Provide several constr. functors with more parameters
```

TODO:

```
pick cb4929aa68 Rebase wrt. #15229. Fix remaining doc test errors.
pick d0c42ff938 Trac 15223: Avoid side-effects between doctests of integer_mod_ring
pick ab2c12e1fb Trac 15223: Construction of residue fields
pick b23f18d716 Trac 15223: Construction of field extensions with implementation
pick 7a24de6caa Trac 15223: Avoid deprecation warning in a new test
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b9f140ae7a08f6277ccb9ec520d0ee64fc8ea31"><code>2b9f140</code></a></td><td><code>Test that the construction of a parent really constructs the parent</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5cbb08f07a1b92e39bdf52157e98a4750851186f"><code>5cbb08f</code></a></td><td><code>Add a test to Parent._test_construction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7890f786f142878bc49bff85d78a213ba1e129c"><code>e7890f7</code></a></td><td><code>Sets._test_construction: Use assertEqual</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9939b21a2fb8b19515dedbec7c374f81d54ebfce"><code>9939b21</code></a></td><td><code>src/sage/categories: Fix doctest errors that are due to enlarging the test suite</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/020085667a9682e13e1080b6ac759fa8056ab822"><code>0200856</code></a></td><td><code>Make _test_construction pass in the thematic tutorial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5425314d4ce8bdd0eaf6afdd05b67e021fd8a99"><code>e542531</code></a></td><td><code>src/doc/en/thematic_tutorials/coercion_and_categories.rst: Fix doctest errors that are due to enlarging the test suite</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b17280000a16b9e4d17183874b742513cc7c6e0a"><code>b172800</code></a></td><td><code>Provide several constr. functors with more parameters</code></td></tr></table>




---

archive/issue_events_216392.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-31T01:15:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216392"
}
```



---

archive/issue_events_216393.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-31T01:15:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216393"
}
```



---

archive/issue_comments_187598.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Suggestion: Introduce a test of the `TestSuite` of a parent P, that will complain if P.construction() returns a pair `F, O` such that `F(O)!=P`.\n \n-I think this test should be put into `sage.structure.parent.Parent`, because this is where `.construction()` is defined in the first place.\n+I think this test should be put into ~~`sage.structure.parent.Parent`~~ (Update 9.2: `sage.categories.sets_cat`), because this is where `.construction()` is defined in the first place.\n``````\n",
    "created_at": "2020-08-31T01:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187598",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Suggestion: Introduce a test of the `TestSuite` of a parent P, that will complain if P.construction() returns a pair `F, O` such that `F(O)!=P`.
 
-I think this test should be put into `sage.structure.parent.Parent`, because this is where `.construction()` is defined in the first place.
+I think this test should be put into ~~`sage.structure.parent.Parent`~~ (Update 9.2: `sage.categories.sets_cat`), because this is where `.construction()` is defined in the first place.
``````




---

archive/issue_comments_187599.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nLooks like there is a circular import problem now:\n\n```\nImportError: cannot import name 'AlgebrasCategory' from 'sage.categories.algebra_functor' (/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/categories/algebra_functor.py)\n```",
    "created_at": "2020-08-31T01:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187599",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Looks like there is a circular import problem now:

```
ImportError: cannot import name 'AlgebrasCategory' from 'sage.categories.algebra_functor' (/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/categories/algebra_functor.py)
```



---

archive/issue_comments_187600.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbe8254d521ee0555090397cc9afa8f7257d2327\"><code>dbe8254</code></a></td><td><code>Rebase wrt. #15229. Fix remaining doc test errors.</code></td></tr></table>\n",
    "created_at": "2020-08-31T01:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187600",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbe8254d521ee0555090397cc9afa8f7257d2327"><code>dbe8254</code></a></td><td><code>Rebase wrt. #15229. Fix remaining doc test errors.</code></td></tr></table>




---

archive/issue_comments_187601.json:
```json
{
    "body": "Changed commit from **[`b172800`](https://github.com/sagemath/sagetrac-mirror/commit/b17280000a16b9e4d17183874b742513cc7c6e0a)** to **[`dbe8254`](https://github.com/sagemath/sagetrac-mirror/commit/dbe8254d521ee0555090397cc9afa8f7257d2327)**",
    "created_at": "2020-08-31T01:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187601",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b172800`](https://github.com/sagemath/sagetrac-mirror/commit/b17280000a16b9e4d17183874b742513cc7c6e0a)** to **[`dbe8254`](https://github.com/sagemath/sagetrac-mirror/commit/dbe8254d521ee0555090397cc9afa8f7257d2327)**



---

archive/issue_comments_187602.json:
```json
{
    "body": "Changed commit from **[`dbe8254`](https://github.com/sagemath/sagetrac-mirror/commit/dbe8254d521ee0555090397cc9afa8f7257d2327)** to **[`9a63834`](https://github.com/sagemath/sagetrac-mirror/commit/9a63834f61f6e24a6515688801be3ad2d07b2820)**",
    "created_at": "2020-08-31T01:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187602",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dbe8254`](https://github.com/sagemath/sagetrac-mirror/commit/dbe8254d521ee0555090397cc9afa8f7257d2327)** to **[`9a63834`](https://github.com/sagemath/sagetrac-mirror/commit/9a63834f61f6e24a6515688801be3ad2d07b2820)**



---

archive/issue_comments_187603.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a63834f61f6e24a6515688801be3ad2d07b2820\"><code>9a63834</code></a></td><td><code>Trac 15223: Avoid side-effects between doctests of integer_mod_ring</code></td></tr></table>\n",
    "created_at": "2020-08-31T01:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187603",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a63834f61f6e24a6515688801be3ad2d07b2820"><code>9a63834</code></a></td><td><code>Trac 15223: Avoid side-effects between doctests of integer_mod_ring</code></td></tr></table>




---

archive/issue_comments_187604.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nHelp with this circular import business would be very welcome",
    "created_at": "2020-08-31T01:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187604",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

Help with this circular import business would be very welcome



---

archive/issue_comments_187605.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,10 @@\n \n His solution was, I think, the correct one: He overloaded the `.construction()` method, so that it now returns `None`.\n \n+Update: A similar problem also showed up in #30360.\n+\n Suggestion: Introduce a test of the `TestSuite` of a parent P, that will complain if P.construction() returns a pair `F, O` such that `F(O)!=P`.\n \n I think this test should be put into ~~`sage.structure.parent.Parent`~~ (Update 9.2: `sage.categories.sets_cat`), because this is where `.construction()` is defined in the first place.\n+\n+\n``````\n",
    "created_at": "2020-08-31T01:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187605",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,10 @@
 
 His solution was, I think, the correct one: He overloaded the `.construction()` method, so that it now returns `None`.
 
+Update: A similar problem also showed up in #30360.
+
 Suggestion: Introduce a test of the `TestSuite` of a parent P, that will complain if P.construction() returns a pair `F, O` such that `F(O)!=P`.
 
 I think this test should be put into ~~`sage.structure.parent.Parent`~~ (Update 9.2: `sage.categories.sets_cat`), because this is where `.construction()` is defined in the first place.
+
+
``````




---

archive/issue_comments_187606.json:
```json
{
    "body": "Changed work issues from **Rebase** to **Fix circular import, test, cherry-pick the remaining 3 commits**",
    "created_at": "2020-08-31T01:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187606",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **Rebase** to **Fix circular import, test, cherry-pick the remaining 3 commits**



---

archive/issue_comments_187607.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nIn `polynomial_quotient_ring.py`, a way around the problem is to just make those imports locally where you need them in `construction()`. Welcome to Sage's circular import hell. `:P`\n\nAlso\n\n```diff\n \n-        TESTS:\n+        TESTS::\n \n             sage: M2 = PowerSeriesRing(QQ,4,'f', sparse=True)\n             sage: M == M2\n             False\n```",
    "created_at": "2020-08-31T01:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187607",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:67" align="right">comment:67</div>

In `polynomial_quotient_ring.py`, a way around the problem is to just make those imports locally where you need them in `construction()`. Welcome to Sage's circular import hell. `:P`

Also

```diff
 
-        TESTS:
+        TESTS::
 
             sage: M2 = PowerSeriesRing(QQ,4,'f', sparse=True)
             sage: M == M2
             False
```



---

archive/issue_comments_187608.json:
```json
{
    "body": "Changed commit from **[`9a63834`](https://github.com/sagemath/sagetrac-mirror/commit/9a63834f61f6e24a6515688801be3ad2d07b2820)** to **[`e4cab3f`](https://github.com/sagemath/sagetrac-mirror/commit/e4cab3f7e78c939aa813d24db6de33a11e42586c)**",
    "created_at": "2020-08-31T02:17:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187608",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9a63834`](https://github.com/sagemath/sagetrac-mirror/commit/9a63834f61f6e24a6515688801be3ad2d07b2820)** to **[`e4cab3f`](https://github.com/sagemath/sagetrac-mirror/commit/e4cab3f7e78c939aa813d24db6de33a11e42586c)**



---

archive/issue_comments_187609.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4cab3f7e78c939aa813d24db6de33a11e42586c\"><code>e4cab3f</code></a></td><td><code>WIP: Resolve circular imports</code></td></tr></table>\n",
    "created_at": "2020-08-31T02:17:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187609",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4cab3f7e78c939aa813d24db6de33a11e42586c"><code>e4cab3f</code></a></td><td><code>WIP: Resolve circular imports</code></td></tr></table>




---

archive/issue_comments_187610.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nHm... this alone did not do the trick",
    "created_at": "2020-08-31T02:18:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187610",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:69" align="right">comment:69</div>

Hm... this alone did not do the trick



---

archive/issue_comments_187611.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bed14eb5742a2d04b1a4c9f015896294c0fc0620\"><code>bed14eb</code></a></td><td><code>Fix circular import problem</code></td></tr></table>\n",
    "created_at": "2020-08-31T02:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187611",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bed14eb5742a2d04b1a4c9f015896294c0fc0620"><code>bed14eb</code></a></td><td><code>Fix circular import problem</code></td></tr></table>




---

archive/issue_comments_187612.json:
```json
{
    "body": "Changed commit from **[`e4cab3f`](https://github.com/sagemath/sagetrac-mirror/commit/e4cab3f7e78c939aa813d24db6de33a11e42586c)** to **[`bed14eb`](https://github.com/sagemath/sagetrac-mirror/commit/bed14eb5742a2d04b1a4c9f015896294c0fc0620)**",
    "created_at": "2020-08-31T02:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e4cab3f`](https://github.com/sagemath/sagetrac-mirror/commit/e4cab3f7e78c939aa813d24db6de33a11e42586c)** to **[`bed14eb`](https://github.com/sagemath/sagetrac-mirror/commit/bed14eb5742a2d04b1a4c9f015896294c0fc0620)**



---

archive/issue_comments_187613.json:
```json
{
    "body": "Changed commit from **[`bed14eb`](https://github.com/sagemath/sagetrac-mirror/commit/bed14eb5742a2d04b1a4c9f015896294c0fc0620)** to **[`754a936`](https://github.com/sagemath/sagetrac-mirror/commit/754a93666e16759bb3e59757bf8c591828f03434)**",
    "created_at": "2020-08-31T02:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187613",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bed14eb`](https://github.com/sagemath/sagetrac-mirror/commit/bed14eb5742a2d04b1a4c9f015896294c0fc0620)** to **[`754a936`](https://github.com/sagemath/sagetrac-mirror/commit/754a93666e16759bb3e59757bf8c591828f03434)**



---

archive/issue_comments_187614.json:
```json
{
    "body": "<div id=\"comment:71\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/754a93666e16759bb3e59757bf8c591828f03434\"><code>754a936</code></a></td><td><code>Fix circular import problem</code></td></tr></table>\n",
    "created_at": "2020-08-31T02:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187614",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:71"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/754a93666e16759bb3e59757bf8c591828f03434"><code>754a936</code></a></td><td><code>Fix circular import problem</code></td></tr></table>




---

archive/issue_comments_187615.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nOK, got it.",
    "created_at": "2020-08-31T02:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187615",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:72" align="right">comment:72</div>

OK, got it.



---

archive/issue_comments_187616.json:
```json
{
    "body": "Changed commit from **[`754a936`](https://github.com/sagemath/sagetrac-mirror/commit/754a93666e16759bb3e59757bf8c591828f03434)** to **[`96b60b5`](https://github.com/sagemath/sagetrac-mirror/commit/96b60b5ea7c48cfcce26dc5cd68080bdfe16d73b)**",
    "created_at": "2020-08-31T02:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187616",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`754a936`](https://github.com/sagemath/sagetrac-mirror/commit/754a93666e16759bb3e59757bf8c591828f03434)** to **[`96b60b5`](https://github.com/sagemath/sagetrac-mirror/commit/96b60b5ea7c48cfcce26dc5cd68080bdfe16d73b)**



---

archive/issue_comments_187617.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96b60b5ea7c48cfcce26dc5cd68080bdfe16d73b\"><code>96b60b5</code></a></td><td><code>src/sage/rings/multi_power_series_ring.py: Fix doctest markup</code></td></tr></table>\n",
    "created_at": "2020-08-31T02:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187617",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96b60b5ea7c48cfcce26dc5cd68080bdfe16d73b"><code>96b60b5</code></a></td><td><code>src/sage/rings/multi_power_series_ring.py: Fix doctest markup</code></td></tr></table>




---

archive/issue_comments_187618.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d7982fe2fa304c13c2692c16ea02ed15474453b\"><code>8d7982f</code></a></td><td><code>src/sage/rings/ring.pyx: Fix up merge</code></td></tr></table>\n",
    "created_at": "2020-08-31T02:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187618",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d7982fe2fa304c13c2692c16ea02ed15474453b"><code>8d7982f</code></a></td><td><code>src/sage/rings/ring.pyx: Fix up merge</code></td></tr></table>




---

archive/issue_comments_187619.json:
```json
{
    "body": "Changed commit from **[`96b60b5`](https://github.com/sagemath/sagetrac-mirror/commit/96b60b5ea7c48cfcce26dc5cd68080bdfe16d73b)** to **[`8d7982f`](https://github.com/sagemath/sagetrac-mirror/commit/8d7982fe2fa304c13c2692c16ea02ed15474453b)**",
    "created_at": "2020-08-31T02:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187619",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`96b60b5`](https://github.com/sagemath/sagetrac-mirror/commit/96b60b5ea7c48cfcce26dc5cd68080bdfe16d73b)** to **[`8d7982f`](https://github.com/sagemath/sagetrac-mirror/commit/8d7982fe2fa304c13c2692c16ea02ed15474453b)**



---

archive/issue_comments_187620.json:
```json
{
    "body": "Changed work issues from **Fix circular import, test, cherry-pick the remaining 3 commits** to **test, cherry-pick the remaining 3 commits**",
    "created_at": "2020-08-31T02:42:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187620",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **Fix circular import, test, cherry-pick the remaining 3 commits** to **test, cherry-pick the remaining 3 commits**



---

archive/issue_comments_187621.json:
```json
{
    "body": "Changed author from **Simon King** to **Simon King, Matthias Koeppe**",
    "created_at": "2020-08-31T02:42:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187621",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Simon King** to **Simon King, Matthias Koeppe**



---

archive/issue_events_216394.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-31T02:42:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216394"
}
```



---

archive/issue_events_216395.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-31T02:42:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216395"
}
```



---

archive/issue_comments_187622.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nSetting it to needs_review so that the patchbot runs",
    "created_at": "2020-08-31T02:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187622",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:76" align="right">comment:76</div>

Setting it to needs_review so that the patchbot runs



---

archive/issue_comments_187623.json:
```json
{
    "body": "<div id=\"comment:77\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab798f60a2a7dcff925443fdb0f7b84bad447504\"><code>ab798f6</code></a></td><td><code>Trac 15223: Construction of residue fields</code></td></tr></table>\n",
    "created_at": "2020-08-31T03:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187623",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:77"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab798f60a2a7dcff925443fdb0f7b84bad447504"><code>ab798f6</code></a></td><td><code>Trac 15223: Construction of residue fields</code></td></tr></table>




---

archive/issue_comments_187624.json:
```json
{
    "body": "Changed commit from **[`8d7982f`](https://github.com/sagemath/sagetrac-mirror/commit/8d7982fe2fa304c13c2692c16ea02ed15474453b)** to **[`ab798f6`](https://github.com/sagemath/sagetrac-mirror/commit/ab798f60a2a7dcff925443fdb0f7b84bad447504)**",
    "created_at": "2020-08-31T03:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187624",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8d7982f`](https://github.com/sagemath/sagetrac-mirror/commit/8d7982fe2fa304c13c2692c16ea02ed15474453b)** to **[`ab798f6`](https://github.com/sagemath/sagetrac-mirror/commit/ab798f60a2a7dcff925443fdb0f7b84bad447504)**



---

archive/issue_comments_187625.json:
```json
{
    "body": "Changed commit from **[`ab798f6`](https://github.com/sagemath/sagetrac-mirror/commit/ab798f60a2a7dcff925443fdb0f7b84bad447504)** to **[`e509079`](https://github.com/sagemath/sagetrac-mirror/commit/e509079faf1e6aa11ed08b378a314ce01ac1fa41)**",
    "created_at": "2020-08-31T03:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187625",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ab798f6`](https://github.com/sagemath/sagetrac-mirror/commit/ab798f60a2a7dcff925443fdb0f7b84bad447504)** to **[`e509079`](https://github.com/sagemath/sagetrac-mirror/commit/e509079faf1e6aa11ed08b378a314ce01ac1fa41)**



---

archive/issue_comments_187626.json:
```json
{
    "body": "<div id=\"comment:78\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e509079faf1e6aa11ed08b378a314ce01ac1fa41\"><code>e509079</code></a></td><td><code>Fix remaining doctest errors that are due to enlarging the test suite</code></td></tr></table>\n",
    "created_at": "2020-08-31T03:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187626",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:78"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e509079faf1e6aa11ed08b378a314ce01ac1fa41"><code>e509079</code></a></td><td><code>Fix remaining doctest errors that are due to enlarging the test suite</code></td></tr></table>




---

archive/issue_comments_187627.json:
```json
{
    "body": "<div id=\"comment:79\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3896c5a8cb91894c7c70cd789857b6410481b67\"><code>a3896c5</code></a></td><td><code>Trac 15223: Construction of field extensions with implementation</code></td></tr></table>\n",
    "created_at": "2020-08-31T03:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187627",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:79"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3896c5a8cb91894c7c70cd789857b6410481b67"><code>a3896c5</code></a></td><td><code>Trac 15223: Construction of field extensions with implementation</code></td></tr></table>




---

archive/issue_comments_187628.json:
```json
{
    "body": "Changed commit from **[`e509079`](https://github.com/sagemath/sagetrac-mirror/commit/e509079faf1e6aa11ed08b378a314ce01ac1fa41)** to **[`a3896c5`](https://github.com/sagemath/sagetrac-mirror/commit/a3896c5a8cb91894c7c70cd789857b6410481b67)**",
    "created_at": "2020-08-31T03:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187628",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e509079`](https://github.com/sagemath/sagetrac-mirror/commit/e509079faf1e6aa11ed08b378a314ce01ac1fa41)** to **[`a3896c5`](https://github.com/sagemath/sagetrac-mirror/commit/a3896c5a8cb91894c7c70cd789857b6410481b67)**



---

archive/issue_comments_187629.json:
```json
{
    "body": "Changed commit from **[`a3896c5`](https://github.com/sagemath/sagetrac-mirror/commit/a3896c5a8cb91894c7c70cd789857b6410481b67)** to **[`efb55ac`](https://github.com/sagemath/sagetrac-mirror/commit/efb55acc9247d4fe44ffe444b30c695362709df8)**",
    "created_at": "2020-08-31T03:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187629",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a3896c5`](https://github.com/sagemath/sagetrac-mirror/commit/a3896c5a8cb91894c7c70cd789857b6410481b67)** to **[`efb55ac`](https://github.com/sagemath/sagetrac-mirror/commit/efb55acc9247d4fe44ffe444b30c695362709df8)**



---

archive/issue_comments_187630.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efb55acc9247d4fe44ffe444b30c695362709df8\"><code>efb55ac</code></a></td><td><code>Trac 15223: Avoid deprecation warning in a new test</code></td></tr></table>\n",
    "created_at": "2020-08-31T03:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187630",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efb55acc9247d4fe44ffe444b30c695362709df8"><code>efb55ac</code></a></td><td><code>Trac 15223: Avoid deprecation warning in a new test</code></td></tr></table>




---

archive/issue_comments_187631.json:
```json
{
    "body": "Changed commit from **[`efb55ac`](https://github.com/sagemath/sagetrac-mirror/commit/efb55acc9247d4fe44ffe444b30c695362709df8)** to **[`2b9f40d`](https://github.com/sagemath/sagetrac-mirror/commit/2b9f40d9fe343311178d58ce8c51c1fced97998e)**",
    "created_at": "2020-08-31T03:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187631",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`efb55ac`](https://github.com/sagemath/sagetrac-mirror/commit/efb55acc9247d4fe44ffe444b30c695362709df8)** to **[`2b9f40d`](https://github.com/sagemath/sagetrac-mirror/commit/2b9f40d9fe343311178d58ce8c51c1fced97998e)**



---

archive/issue_comments_187632.json:
```json
{
    "body": "<div id=\"comment:81\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b9f40d9fe343311178d58ce8c51c1fced97998e\"><code>2b9f40d</code></a></td><td><code>src/sage/categories/pushout.py: py3 fix (iteritems)</code></td></tr></table>\n",
    "created_at": "2020-08-31T03:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187632",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:81"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b9f40d9fe343311178d58ce8c51c1fced97998e"><code>2b9f40d</code></a></td><td><code>src/sage/categories/pushout.py: py3 fix (iteritems)</code></td></tr></table>




---

archive/issue_comments_187633.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nAs expected, there are a number of `AssertionError: the object's construction does not recreate this object` errors.\n\nIn addition, there are some other errors, probably because of faulty rebasing:\n\n```\nsage -t --random-seed=0 src/sage/rings/polynomial/polynomial_quotient_ring.py\nsage -t --random-seed=0 src/sage/rings/multi_power_series_ring_element.py\nsage -t --random-seed=0 src/sage/rings/multi_power_series_ring.py\nsage -t --random-seed=0 src/sage/rings/power_series_ring_element.pyx\nsage -t --random-seed=0 src/sage/rings/finite_rings/element_pari_ffelt.pyx\n```",
    "created_at": "2020-08-31T05:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187633",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:82" align="right">comment:82</div>

As expected, there are a number of `AssertionError: the object's construction does not recreate this object` errors.

In addition, there are some other errors, probably because of faulty rebasing:

```
sage -t --random-seed=0 src/sage/rings/polynomial/polynomial_quotient_ring.py
sage -t --random-seed=0 src/sage/rings/multi_power_series_ring_element.py
sage -t --random-seed=0 src/sage/rings/multi_power_series_ring.py
sage -t --random-seed=0 src/sage/rings/power_series_ring_element.pyx
sage -t --random-seed=0 src/sage/rings/finite_rings/element_pari_ffelt.pyx
```



---

archive/issue_events_216396.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-31T05:24:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216396"
}
```



---

archive/issue_events_216397.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-31T05:24:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216397"
}
```



---

archive/issue_comments_187634.json:
```json
{
    "body": "Changed work issues from **test, cherry-pick the remaining 3 commits** to none",
    "created_at": "2020-08-31T05:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187634",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **test, cherry-pick the remaining 3 commits** to none



---

archive/issue_comments_187635.json:
```json
{
    "body": "Changed dependencies from **#15229** to none",
    "created_at": "2020-08-31T05:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187635",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#15229** to none



---

archive/issue_comments_187636.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\n\n```\nFile \"src/sage/rings/multi_power_series_ring.py\", line 504, in sage.rings.multi_power_series_ring.MPowerSeriesRing_generic.construction\nFailed example:\n    c(R)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.multi_power_series_ring.MPowerSeriesRing_generic.construction[3]>\", line 1, in <module>\n        c(R)\n      File \"sage/categories/functor.pyx\", line 383, in sage.categories.functor.Functor.__call__ (build/cythonized/sage/categories/functor.c:3146)\n        y = self._apply_functor(self._coerce_into_domain(x))\n      File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/categories/pushout.py\", line 2456, in _apply_functor\n        return R.completion(self.p, self.prec, extras)\n      File \"sage/rings/polynomial/multi_polynomial_ring_base.pyx\", line 184, in sage.rings.polynomial.multi_polynomial_ring_base.MPolynomialRing_base.completion (build/cythonized/sage/rings/polynomial/multi_polynomial_ring_base.c:5003)\n        def completion(self, names, prec=20):\n    TypeError: completion() takes at most 2 positional arguments (3 given)\n**********************************************************************\n```\nThe method `MPolynomialRing_base.completion` lost its `extras` parameter in #23377/#26773, so this method is no longer compatible with other methods...",
    "created_at": "2020-09-01T22:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187636",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:83" align="right">comment:83</div>


```
File "src/sage/rings/multi_power_series_ring.py", line 504, in sage.rings.multi_power_series_ring.MPowerSeriesRing_generic.construction
Failed example:
    c(R)
Exception raised:
    Traceback (most recent call last):
      File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.multi_power_series_ring.MPowerSeriesRing_generic.construction[3]>", line 1, in <module>
        c(R)
      File "sage/categories/functor.pyx", line 383, in sage.categories.functor.Functor.__call__ (build/cythonized/sage/categories/functor.c:3146)
        y = self._apply_functor(self._coerce_into_domain(x))
      File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/categories/pushout.py", line 2456, in _apply_functor
        return R.completion(self.p, self.prec, extras)
      File "sage/rings/polynomial/multi_polynomial_ring_base.pyx", line 184, in sage.rings.polynomial.multi_polynomial_ring_base.MPolynomialRing_base.completion (build/cythonized/sage/rings/polynomial/multi_polynomial_ring_base.c:5003)
        def completion(self, names, prec=20):
    TypeError: completion() takes at most 2 positional arguments (3 given)
**********************************************************************
```
The method `MPolynomialRing_base.completion` lost its `extras` parameter in #23377/#26773, so this method is no longer compatible with other methods...



---

archive/issue_comments_187637.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\n\n```\n$ git grep 'def completion('\nsrc/sage/combinat/finite_state_machine.py:    def completion(self, sink=None):\nsrc/sage/rings/function_field/function_field.py:    def completion(self, place, name=None, prec=None, gen_name=None):\nsrc/sage/rings/integer_ring.pyx:    def completion(self, p, prec, extras = {}):\nsrc/sage/rings/number_field/number_field.py:    def completion(self, p, prec, extras={}):\nsrc/sage/rings/polynomial/laurent_polynomial_ring.py:    def completion(self, p, prec=20, extras=None):\nsrc/sage/rings/polynomial/multi_polynomial_ring_base.pyx:    def completion(self, names, prec=20):\nsrc/sage/rings/polynomial/polynomial_ring.py:    def completion(self, p, prec=20, extras=None):\nsrc/sage/rings/qqbar.py:    def completion(self, p, prec, extras={}):\nsrc/sage/rings/qqbar.py:    def completion(self, p, prec, extras={}):\nsrc/sage/rings/rational_field.py:    def completion(self, p, prec, extras = {}):\n```",
    "created_at": "2020-09-01T22:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187637",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>


```
$ git grep 'def completion('
src/sage/combinat/finite_state_machine.py:    def completion(self, sink=None):
src/sage/rings/function_field/function_field.py:    def completion(self, place, name=None, prec=None, gen_name=None):
src/sage/rings/integer_ring.pyx:    def completion(self, p, prec, extras = {}):
src/sage/rings/number_field/number_field.py:    def completion(self, p, prec, extras={}):
src/sage/rings/polynomial/laurent_polynomial_ring.py:    def completion(self, p, prec=20, extras=None):
src/sage/rings/polynomial/multi_polynomial_ring_base.pyx:    def completion(self, names, prec=20):
src/sage/rings/polynomial/polynomial_ring.py:    def completion(self, p, prec=20, extras=None):
src/sage/rings/qqbar.py:    def completion(self, p, prec, extras={}):
src/sage/rings/qqbar.py:    def completion(self, p, prec, extras={}):
src/sage/rings/rational_field.py:    def completion(self, p, prec, extras = {}):
```



---

archive/issue_comments_187638.json:
```json
{
    "body": "<div id=\"comment:85\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49abf7b5ecc768888425ea4e3c99dc7122ad86b0\"><code>49abf7b</code></a></td><td><code>CompletionFunctor: Add type to extras only if non-None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf7a74be31176a3d956250b5523c973942db22b3\"><code>cf7a74b</code></a></td><td><code>MPolynomialRing_base.completion: Re-add parameter extras, pass it to PowerSeriesRing</code></td></tr></table>\n",
    "created_at": "2020-09-01T23:06:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187638",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:85"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49abf7b5ecc768888425ea4e3c99dc7122ad86b0"><code>49abf7b</code></a></td><td><code>CompletionFunctor: Add type to extras only if non-None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf7a74be31176a3d956250b5523c973942db22b3"><code>cf7a74b</code></a></td><td><code>MPolynomialRing_base.completion: Re-add parameter extras, pass it to PowerSeriesRing</code></td></tr></table>




---

archive/issue_comments_187639.json:
```json
{
    "body": "Changed commit from **[`2b9f40d`](https://github.com/sagemath/sagetrac-mirror/commit/2b9f40d9fe343311178d58ce8c51c1fced97998e)** to **[`cf7a74b`](https://github.com/sagemath/sagetrac-mirror/commit/cf7a74be31176a3d956250b5523c973942db22b3)**",
    "created_at": "2020-09-01T23:06:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187639",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2b9f40d`](https://github.com/sagemath/sagetrac-mirror/commit/2b9f40d9fe343311178d58ce8c51c1fced97998e)** to **[`cf7a74b`](https://github.com/sagemath/sagetrac-mirror/commit/cf7a74be31176a3d956250b5523c973942db22b3)**



---

archive/issue_comments_187640.json:
```json
{
    "body": "<div id=\"comment:86\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75aaf3cc77fb030554ad306850cb233ffaccc8e7\"><code>75aaf3c</code></a></td><td><code>src/sage/rings/asymptotic: Fix remaining doctest errors that are due to enlarging the test suite</code></td></tr></table>\n",
    "created_at": "2020-09-01T23:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187640",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:86"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75aaf3cc77fb030554ad306850cb233ffaccc8e7"><code>75aaf3c</code></a></td><td><code>src/sage/rings/asymptotic: Fix remaining doctest errors that are due to enlarging the test suite</code></td></tr></table>




---

archive/issue_comments_187641.json:
```json
{
    "body": "Changed commit from **[`cf7a74b`](https://github.com/sagemath/sagetrac-mirror/commit/cf7a74be31176a3d956250b5523c973942db22b3)** to **[`75aaf3c`](https://github.com/sagemath/sagetrac-mirror/commit/75aaf3cc77fb030554ad306850cb233ffaccc8e7)**",
    "created_at": "2020-09-01T23:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187641",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cf7a74b`](https://github.com/sagemath/sagetrac-mirror/commit/cf7a74be31176a3d956250b5523c973942db22b3)** to **[`75aaf3c`](https://github.com/sagemath/sagetrac-mirror/commit/75aaf3cc77fb030554ad306850cb233ffaccc8e7)**



---

archive/issue_comments_187642.json:
```json
{
    "body": "<div id=\"comment:87\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f40071a7209de2d1d8891e7898219a51c235117\"><code>1f40071</code></a></td><td><code>Merge tag '9.2.beta11' into t/15223/ticket/15223</code></td></tr></table>\n",
    "created_at": "2020-09-01T23:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187642",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f40071a7209de2d1d8891e7898219a51c235117"><code>1f40071</code></a></td><td><code>Merge tag '9.2.beta11' into t/15223/ticket/15223</code></td></tr></table>




---

archive/issue_comments_187643.json:
```json
{
    "body": "Changed commit from **[`75aaf3c`](https://github.com/sagemath/sagetrac-mirror/commit/75aaf3cc77fb030554ad306850cb233ffaccc8e7)** to **[`1f40071`](https://github.com/sagemath/sagetrac-mirror/commit/1f40071a7209de2d1d8891e7898219a51c235117)**",
    "created_at": "2020-09-01T23:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187643",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`75aaf3c`](https://github.com/sagemath/sagetrac-mirror/commit/75aaf3cc77fb030554ad306850cb233ffaccc8e7)** to **[`1f40071`](https://github.com/sagemath/sagetrac-mirror/commit/1f40071a7209de2d1d8891e7898219a51c235117)**



---

archive/issue_comments_187644.json:
```json
{
    "body": "Changed commit from **[`1f40071`](https://github.com/sagemath/sagetrac-mirror/commit/1f40071a7209de2d1d8891e7898219a51c235117)** to **[`69b95d3`](https://github.com/sagemath/sagetrac-mirror/commit/69b95d353d2188195c24e42231a0db1bfd0281d5)**",
    "created_at": "2020-09-02T00:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187644",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1f40071`](https://github.com/sagemath/sagetrac-mirror/commit/1f40071a7209de2d1d8891e7898219a51c235117)** to **[`69b95d3`](https://github.com/sagemath/sagetrac-mirror/commit/69b95d353d2188195c24e42231a0db1bfd0281d5)**



---

archive/issue_comments_187645.json:
```json
{
    "body": "<div id=\"comment:88\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69b95d353d2188195c24e42231a0db1bfd0281d5\"><code>69b95d3</code></a></td><td><code>src/sage/categories/sets_cat.py: Get rid of `__cmp__` in a doctest</code></td></tr></table>\n",
    "created_at": "2020-09-02T00:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187645",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:88"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69b95d353d2188195c24e42231a0db1bfd0281d5"><code>69b95d3</code></a></td><td><code>src/sage/categories/sets_cat.py: Get rid of `__cmp__` in a doctest</code></td></tr></table>




---

archive/issue_comments_187646.json:
```json
{
    "body": "<div id=\"comment:89\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f09a79b57c6f5b7777a6d668ce7ddcf80f1e89a4\"><code>f09a79b</code></a></td><td><code>FiniteField.construction: Also catch TypeError when accessing _factory_data</code></td></tr></table>\n",
    "created_at": "2020-09-02T00:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:89"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f09a79b57c6f5b7777a6d668ce7ddcf80f1e89a4"><code>f09a79b</code></a></td><td><code>FiniteField.construction: Also catch TypeError when accessing _factory_data</code></td></tr></table>




---

archive/issue_comments_187647.json:
```json
{
    "body": "Changed commit from **[`69b95d3`](https://github.com/sagemath/sagetrac-mirror/commit/69b95d353d2188195c24e42231a0db1bfd0281d5)** to **[`f09a79b`](https://github.com/sagemath/sagetrac-mirror/commit/f09a79b57c6f5b7777a6d668ce7ddcf80f1e89a4)**",
    "created_at": "2020-09-02T00:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187647",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`69b95d3`](https://github.com/sagemath/sagetrac-mirror/commit/69b95d353d2188195c24e42231a0db1bfd0281d5)** to **[`f09a79b`](https://github.com/sagemath/sagetrac-mirror/commit/f09a79b57c6f5b7777a6d668ce7ddcf80f1e89a4)**



---

archive/issue_events_216398.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-02T01:19:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216398"
}
```



---

archive/issue_events_216399.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-02T01:19:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216399"
}
```



---

archive/issue_comments_187648.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nHelp with fixing the remaining failures would be welcome",
    "created_at": "2020-09-02T01:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187648",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:91" align="right">comment:91</div>

Help with fixing the remaining failures would be welcome



---

archive/issue_comments_187649.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/15223)** to **[public/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15223)**",
    "created_at": "2020-09-02T17:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187649",
    "user": "https://github.com/mezzarobba"
}
```

Changed branch from **[u/mkoeppe/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/15223)** to **[public/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15223)**



---

archive/issue_comments_187650.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nReplying to [@mkoeppe](#comment:91):\n> Help with fixing the remaining failures would be welcome\n\nHere is an attempt (not really tested)...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e187de1a720a2117784f1e614ee5ffb77bc29e2\"><code>3e187de</code></a></td><td><code>#15223 don't try to construct polynomial quotient rings \"as fields\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3630d255fe8330c8772eb856a1acdae3749f2101\"><code>3630d25</code></a></td><td><code>#15223 pass variable names to residue_field() in AlgebraicExtensionFunctor</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cb0422fca7b73b2b4e6a8694862967bf4905a30\"><code>8cb0422</code></a></td><td><code>#15223 cartesians product functors that force a certain category</code></td></tr></table>\n",
    "created_at": "2020-09-02T17:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187650",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:93" align="right">comment:93</div>

Replying to [@mkoeppe](#comment:91):
> Help with fixing the remaining failures would be welcome

Here is an attempt (not really tested)...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e187de1a720a2117784f1e614ee5ffb77bc29e2"><code>3e187de</code></a></td><td><code>#15223 don't try to construct polynomial quotient rings "as fields"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3630d255fe8330c8772eb856a1acdae3749f2101"><code>3630d25</code></a></td><td><code>#15223 pass variable names to residue_field() in AlgebraicExtensionFunctor</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cb0422fca7b73b2b4e6a8694862967bf4905a30"><code>8cb0422</code></a></td><td><code>#15223 cartesians product functors that force a certain category</code></td></tr></table>




---

archive/issue_comments_187651.json:
```json
{
    "body": "Changed commit from **[`f09a79b`](https://github.com/sagemath/sagetrac-mirror/commit/f09a79b57c6f5b7777a6d668ce7ddcf80f1e89a4)** to **[`8cb0422`](https://github.com/sagemath/sagetrac-mirror/commit/8cb0422fca7b73b2b4e6a8694862967bf4905a30)**",
    "created_at": "2020-09-02T17:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187651",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[`f09a79b`](https://github.com/sagemath/sagetrac-mirror/commit/f09a79b57c6f5b7777a6d668ce7ddcf80f1e89a4)** to **[`8cb0422`](https://github.com/sagemath/sagetrac-mirror/commit/8cb0422fca7b73b2b4e6a8694862967bf4905a30)**



---

archive/issue_comments_187652.json:
```json
{
    "body": "Changed author from **Simon King, Matthias Koeppe** to **Simon King, Matthias Koeppe, Marc Mezzarobba**",
    "created_at": "2020-09-02T18:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187652",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Simon King, Matthias Koeppe** to **Simon King, Matthias Koeppe, Marc Mezzarobba**



---

archive/issue_comments_187653.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\n`src/sage/algebras/free_zinbiel_algebra.py` needs some help",
    "created_at": "2020-09-03T04:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187653",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:95" align="right">comment:95</div>

`src/sage/algebras/free_zinbiel_algebra.py` needs some help



---

archive/issue_comments_187654.json:
```json
{
    "body": "<div id=\"comment:96\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bed5a1354aa654315507d6e40f28cb95e91a2fe\"><code>8bed5a1</code></a></td><td><code>src/sage/categories/classical_crystals.py: Fix remaining doctest errors that are due to enlarging the test suite</code></td></tr></table>\n",
    "created_at": "2020-09-03T04:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187654",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:96"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bed5a1354aa654315507d6e40f28cb95e91a2fe"><code>8bed5a1</code></a></td><td><code>src/sage/categories/classical_crystals.py: Fix remaining doctest errors that are due to enlarging the test suite</code></td></tr></table>




---

archive/issue_comments_187655.json:
```json
{
    "body": "Changed commit from **[`8cb0422`](https://github.com/sagemath/sagetrac-mirror/commit/8cb0422fca7b73b2b4e6a8694862967bf4905a30)** to **[`8bed5a1`](https://github.com/sagemath/sagetrac-mirror/commit/8bed5a1354aa654315507d6e40f28cb95e91a2fe)**",
    "created_at": "2020-09-03T04:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187655",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8cb0422`](https://github.com/sagemath/sagetrac-mirror/commit/8cb0422fca7b73b2b4e6a8694862967bf4905a30)** to **[`8bed5a1`](https://github.com/sagemath/sagetrac-mirror/commit/8bed5a1354aa654315507d6e40f28cb95e91a2fe)**



---

archive/issue_comments_187656.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nA number of those `verbose=True` tests probably are best made `verbose=False` so we don't have this problem.\n\nRight now beta11 is compiling for me. Can you tell me what the problem is with `free_zinbiel_algebra.py` so I know what to start looking for?",
    "created_at": "2020-09-03T04:14:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187656",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:97" align="right">comment:97</div>

A number of those `verbose=True` tests probably are best made `verbose=False` so we don't have this problem.

Right now beta11 is compiling for me. Can you tell me what the problem is with `free_zinbiel_algebra.py` so I know what to start looking for?



---

archive/issue_comments_187657.json:
```json
{
    "body": "Changed commit from **[`8bed5a1`](https://github.com/sagemath/sagetrac-mirror/commit/8bed5a1354aa654315507d6e40f28cb95e91a2fe)** to **[`03f08c3`](https://github.com/sagemath/sagetrac-mirror/commit/03f08c30f53eb22757a7c66e36601c1dc376e6bf)**",
    "created_at": "2020-09-03T04:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187657",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8bed5a1`](https://github.com/sagemath/sagetrac-mirror/commit/8bed5a1354aa654315507d6e40f28cb95e91a2fe)** to **[`03f08c3`](https://github.com/sagemath/sagetrac-mirror/commit/03f08c30f53eb22757a7c66e36601c1dc376e6bf)**



---

archive/issue_comments_187658.json:
```json
{
    "body": "<div id=\"comment:98\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03f08c30f53eb22757a7c66e36601c1dc376e6bf\"><code>03f08c3</code></a></td><td><code>AlgebraicExtensionFunctor [residue]: Fixup: Pass self.names</code></td></tr></table>\n",
    "created_at": "2020-09-03T04:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187658",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:98"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03f08c30f53eb22757a7c66e36601c1dc376e6bf"><code>03f08c3</code></a></td><td><code>AlgebraicExtensionFunctor [residue]: Fixup: Pass self.names</code></td></tr></table>




---

archive/issue_comments_187659.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nAlso relevant: #23010.",
    "created_at": "2020-09-03T04:17:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187659",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:99" align="right">comment:99</div>

Also relevant: #23010.



---

archive/issue_comments_187660.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@tscrim](#comment:97):\n> Right now beta11 is compiling for me. Can you tell me what the problem is with `free_zinbiel_algebra.py` so I know what to start looking for?\n\nOn this ticket: \n\n```\nsage -t --long --random-seed=0 src/sage/algebras/free_zinbiel_algebra.py\n**********************************************************************\nFile \"src/sage/algebras/free_zinbiel_algebra.py\", line 211, in sage.algebras.free_zinbiel_algebra.FreeZinbielAlgebra.__init__\nFailed example:\n    TestSuite(Z).run(elements=[Z.an_element(), G[1], G[1]*G[2]*G[0]])\nExpected nothing\nGot:\n    Failure in _test_construction:\n    Traceback (most recent call last):\n      File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/categories/sets_cat.py\", line 1508, in _test_construction\n        FO = self.construction()\n      File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/algebras/free_zinbiel_algebra.py\", line 498, in construction\n        return ZinbielFunctor(self.variable_names()), self.base_ring()\n      File \"sage/structure/category_object.pyx\", line 474, in sage.structure.category_object.CategoryObject.variable_names (build/cythonized/sage/structure/category_object.c:4392)\n        raise ValueError(\"variable names have not yet been set using self._assign_names(...)\")\n    ValueError: variable names have not yet been set using self._assign_names(...)\n    ------------------------------------------------------------\n    The following tests failed: _test_construction\n```",
    "created_at": "2020-09-03T04:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187660",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@tscrim](#comment:97):
> Right now beta11 is compiling for me. Can you tell me what the problem is with `free_zinbiel_algebra.py` so I know what to start looking for?

On this ticket: 

```
sage -t --long --random-seed=0 src/sage/algebras/free_zinbiel_algebra.py
**********************************************************************
File "src/sage/algebras/free_zinbiel_algebra.py", line 211, in sage.algebras.free_zinbiel_algebra.FreeZinbielAlgebra.__init__
Failed example:
    TestSuite(Z).run(elements=[Z.an_element(), G[1], G[1]*G[2]*G[0]])
Expected nothing
Got:
    Failure in _test_construction:
    Traceback (most recent call last):
      File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/categories/sets_cat.py", line 1508, in _test_construction
        FO = self.construction()
      File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/algebras/free_zinbiel_algebra.py", line 498, in construction
        return ZinbielFunctor(self.variable_names()), self.base_ring()
      File "sage/structure/category_object.pyx", line 474, in sage.structure.category_object.CategoryObject.variable_names (build/cythonized/sage/structure/category_object.c:4392)
        raise ValueError("variable names have not yet been set using self._assign_names(...)")
    ValueError: variable names have not yet been set using self._assign_names(...)
    ------------------------------------------------------------
    The following tests failed: _test_construction
```



---

archive/issue_comments_187661.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@tscrim](#comment:99):\n> Also relevant: #23010.\n\nSee my comment there -- all commits have already merged apparently",
    "created_at": "2020-09-03T04:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187661",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@tscrim](#comment:99):
> Also relevant: #23010.

See my comment there -- all commits have already merged apparently



---

archive/issue_comments_187662.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nReplying to [@mezzarobba](#comment:93):\n> Here is an attempt (not really tested)...\n> New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3630d255fe8330c8772eb856a1acdae3749f2101\"><code>3630d25</code></a></td><td><code>#15223 pass variable names to residue_field() in AlgebraicExtensionFunctor</code></td></tr></table>\n\nI have fixed one bug, but more work is needed because the interface of method `residue_field` is not very consistent:\n\n```\n$ git grep 'def residue_field'\nsrc/sage/categories/discrete_valuation.py:        def residue_field(self):\nsrc/sage/categories/discrete_valuation.py:        def residue_field(self):\nsrc/sage/rings/function_field/function_field.py:    def residue_field(self, place, name=None):\nsrc/sage/rings/function_field/function_field.py:    def residue_field(self, place, name=None):\nsrc/sage/rings/function_field/place.py:    def residue_field(self, name=None):\nsrc/sage/rings/function_field/place.py:    def residue_field(self, name=None):\nsrc/sage/rings/function_field/valuation_ring.py:    def residue_field(self, name=None):\nsrc/sage/rings/ideal.py:    def residue_field(self):\nsrc/sage/rings/integer_ring.pyx:    def residue_field(self, prime, check = True):\nsrc/sage/rings/laurent_series_ring.py:    def residue_field(self):\nsrc/sage/rings/number_field/number_field.py:    def residue_field(self, prime, names=None, check=True):\nsrc/sage/rings/number_field/number_field_ideal.py:    def residue_field(self, names=None):\nsrc/sage/rings/number_field/order.py:    def residue_field(self, prime, names=None, check=False):\nsrc/sage/rings/padics/padic_generic.py:    def residue_field(self):\nsrc/sage/rings/polynomial/ideal.py:    def residue_field(self, names=None, check=True):\nsrc/sage/rings/polynomial/polynomial_ring.py:    def residue_field(self, ideal, names=None):\nsrc/sage/rings/power_series_ring.py:    def residue_field(self):\nsrc/sage/rings/puiseux_series_ring.py:    def residue_field(self):\nsrc/sage/rings/rational_field.py:    def residue_field(self, p, check=True):\nsrc/sage/rings/valuation/valuation_space.py:        def residue_field(self):\n```",
    "created_at": "2020-09-03T04:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187662",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:102" align="right">comment:102</div>

Replying to [@mezzarobba](#comment:93):
> Here is an attempt (not really tested)...
> New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3630d255fe8330c8772eb856a1acdae3749f2101"><code>3630d25</code></a></td><td><code>#15223 pass variable names to residue_field() in AlgebraicExtensionFunctor</code></td></tr></table>

I have fixed one bug, but more work is needed because the interface of method `residue_field` is not very consistent:

```
$ git grep 'def residue_field'
src/sage/categories/discrete_valuation.py:        def residue_field(self):
src/sage/categories/discrete_valuation.py:        def residue_field(self):
src/sage/rings/function_field/function_field.py:    def residue_field(self, place, name=None):
src/sage/rings/function_field/function_field.py:    def residue_field(self, place, name=None):
src/sage/rings/function_field/place.py:    def residue_field(self, name=None):
src/sage/rings/function_field/place.py:    def residue_field(self, name=None):
src/sage/rings/function_field/valuation_ring.py:    def residue_field(self, name=None):
src/sage/rings/ideal.py:    def residue_field(self):
src/sage/rings/integer_ring.pyx:    def residue_field(self, prime, check = True):
src/sage/rings/laurent_series_ring.py:    def residue_field(self):
src/sage/rings/number_field/number_field.py:    def residue_field(self, prime, names=None, check=True):
src/sage/rings/number_field/number_field_ideal.py:    def residue_field(self, names=None):
src/sage/rings/number_field/order.py:    def residue_field(self, prime, names=None, check=False):
src/sage/rings/padics/padic_generic.py:    def residue_field(self):
src/sage/rings/polynomial/ideal.py:    def residue_field(self, names=None, check=True):
src/sage/rings/polynomial/polynomial_ring.py:    def residue_field(self, ideal, names=None):
src/sage/rings/power_series_ring.py:    def residue_field(self):
src/sage/rings/puiseux_series_ring.py:    def residue_field(self):
src/sage/rings/rational_field.py:    def residue_field(self, p, check=True):
src/sage/rings/valuation/valuation_space.py:        def residue_field(self):
```



---

archive/issue_events_216400.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T05:25:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216400"
}
```



---

archive/issue_events_216401.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T05:25:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216401"
}
```



---

archive/issue_comments_187663.json:
```json
{
    "body": "Dependencies: **#30507**",
    "created_at": "2020-09-05T03:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187663",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#30507**



---

archive/issue_comments_187664.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@mkoeppe](#comment:102):\n> I have fixed one bug,\n\nUh, I said I had not really tested my patches, but I thought I had run the tests from the few most relevant files, sorry.\n\n> but more work is needed because the interface of method `residue_field` is not very consistent:\n\nIt is not clear to me on what kinds of objects this functor can be called with `residue != None`. It may be good enough for this ticket to take care of the cases that currently work...",
    "created_at": "2020-09-05T07:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187664",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@mkoeppe](#comment:102):
> I have fixed one bug,

Uh, I said I had not really tested my patches, but I thought I had run the tests from the few most relevant files, sorry.

> but more work is needed because the interface of method `residue_field` is not very consistent:

It is not clear to me on what kinds of objects this functor can be called with `residue != None`. It may be good enough for this ticket to take care of the cases that currently work...



---

archive/issue_comments_187665.json:
```json
{
    "body": "Changed commit from **[`03f08c3`](https://github.com/sagemath/sagetrac-mirror/commit/03f08c30f53eb22757a7c66e36601c1dc376e6bf)** to **[`93452f5`](https://github.com/sagemath/sagetrac-mirror/commit/93452f57564de963ab7d32d7d669db31de64ee20)**",
    "created_at": "2020-09-05T07:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187665",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`03f08c3`](https://github.com/sagemath/sagetrac-mirror/commit/03f08c30f53eb22757a7c66e36601c1dc376e6bf)** to **[`93452f5`](https://github.com/sagemath/sagetrac-mirror/commit/93452f57564de963ab7d32d7d669db31de64ee20)**



---

archive/issue_comments_187666.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9145f0ff4469f5240c9990628a04e50abfb1711\"><code>c9145f0</code></a></td><td><code>#15223 update doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93452f57564de963ab7d32d7d669db31de64ee20\"><code>93452f5</code></a></td><td><code>#15223 further fixes to calls to residue_field() via AlgebraicExtensionFunctor</code></td></tr></table>\n",
    "created_at": "2020-09-05T07:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187666",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9145f0ff4469f5240c9990628a04e50abfb1711"><code>c9145f0</code></a></td><td><code>#15223 update doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93452f57564de963ab7d32d7d669db31de64ee20"><code>93452f5</code></a></td><td><code>#15223 further fixes to calls to residue_field() via AlgebraicExtensionFunctor</code></td></tr></table>




---

archive/issue_comments_187667.json:
```json
{
    "body": "Changed commit from **[`93452f5`](https://github.com/sagemath/sagetrac-mirror/commit/93452f57564de963ab7d32d7d669db31de64ee20)** to **[`0ccc5d8`](https://github.com/sagemath/sagetrac-mirror/commit/0ccc5d8f48ea3c42a7230aa31046c756845712c2)**",
    "created_at": "2020-09-05T07:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187667",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`93452f5`](https://github.com/sagemath/sagetrac-mirror/commit/93452f57564de963ab7d32d7d669db31de64ee20)** to **[`0ccc5d8`](https://github.com/sagemath/sagetrac-mirror/commit/0ccc5d8f48ea3c42a7230aa31046c756845712c2)**



---

archive/issue_comments_187668.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ccc5d8f48ea3c42a7230aa31046c756845712c2\"><code>0ccc5d8</code></a></td><td><code>#15223 further fixes to calls to residue_field() via AlgebraicExtensionFunctor</code></td></tr></table>\n",
    "created_at": "2020-09-05T07:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187668",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ccc5d8f48ea3c42a7230aa31046c756845712c2"><code>0ccc5d8</code></a></td><td><code>#15223 further fixes to calls to residue_field() via AlgebraicExtensionFunctor</code></td></tr></table>




---

archive/issue_comments_187669.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6b012b9c1a1c05f858446cbf21d7aa7e5d685b1\"><code>b6b012b</code></a></td><td><code>#15223 CartesianProductGrowthGroup uniqueness</code></td></tr></table>\n",
    "created_at": "2020-09-05T09:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187669",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6b012b9c1a1c05f858446cbf21d7aa7e5d685b1"><code>b6b012b</code></a></td><td><code>#15223 CartesianProductGrowthGroup uniqueness</code></td></tr></table>




---

archive/issue_comments_187670.json:
```json
{
    "body": "Changed commit from **[`0ccc5d8`](https://github.com/sagemath/sagetrac-mirror/commit/0ccc5d8f48ea3c42a7230aa31046c756845712c2)** to **[`b6b012b`](https://github.com/sagemath/sagetrac-mirror/commit/b6b012b9c1a1c05f858446cbf21d7aa7e5d685b1)**",
    "created_at": "2020-09-05T09:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187670",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0ccc5d8`](https://github.com/sagemath/sagetrac-mirror/commit/0ccc5d8f48ea3c42a7230aa31046c756845712c2)** to **[`b6b012b`](https://github.com/sagemath/sagetrac-mirror/commit/b6b012b9c1a1c05f858446cbf21d7aa7e5d685b1)**



---

archive/issue_comments_187671.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\n@dkrenn: Commit \u200be664f08 fixes an issue with the uniqueness of cartesian product asymptotic growth groups. My fix is a bit fragile, do you have a better idea?",
    "created_at": "2020-09-05T09:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187671",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:0" align="right">comment:0</div>

@dkrenn: Commit e664f08 fixes an issue with the uniqueness of cartesian product asymptotic growth groups. My fix is a bit fragile, do you have a better idea?



---

archive/issue_comments_187672.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nReplying to [@mezzarobba](#comment:110):\n> @dkrenn: Commit b6b012b fixes an issue with the uniqueness of cartesian product asymptotic growth groups. My fix is a bit fragile, do you have a better idea?\n\nHmm, actually, we have the same issue with `CartesianProductPoset` itself. So I think we need a factory for them, and that's where the normalization of the category should go. But `CartesianProductPoset` can depend on arbitrary functions. I suppose one would like to ensure uniqueness at least for the standard orderings, even if posets with custom orderings are all distinct. I'm not sure how to do that best; using `UniqueFactory`, the code will be a bit unwieldy.",
    "created_at": "2020-09-05T10:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187672",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:111" align="right">comment:111</div>

Replying to [@mezzarobba](#comment:110):
> @dkrenn: Commit b6b012b fixes an issue with the uniqueness of cartesian product asymptotic growth groups. My fix is a bit fragile, do you have a better idea?

Hmm, actually, we have the same issue with `CartesianProductPoset` itself. So I think we need a factory for them, and that's where the normalization of the category should go. But `CartesianProductPoset` can depend on arbitrary functions. I suppose one would like to ensure uniqueness at least for the standard orderings, even if posets with custom orderings are all distinct. I'm not sure how to do that best; using `UniqueFactory`, the code will be a bit unwieldy.



---

archive/issue_comments_187673.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e664f08ddbc4faf99d18ffed22ebaa1c6868549a\"><code>e664f08</code></a></td><td><code>#15223 CartesianProductGrowthGroup uniqueness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1641b4e61ee28018cbdea2432fd0479907a9bff6\"><code>1641b4e</code></a></td><td><code>#15223 fix comparison of CartesianProduct functors after 8cb0422</code></td></tr></table>\n",
    "created_at": "2020-09-05T10:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187673",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e664f08ddbc4faf99d18ffed22ebaa1c6868549a"><code>e664f08</code></a></td><td><code>#15223 CartesianProductGrowthGroup uniqueness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1641b4e61ee28018cbdea2432fd0479907a9bff6"><code>1641b4e</code></a></td><td><code>#15223 fix comparison of CartesianProduct functors after 8cb0422</code></td></tr></table>




---

archive/issue_comments_187674.json:
```json
{
    "body": "Changed commit from **[`b6b012b`](https://github.com/sagemath/sagetrac-mirror/commit/b6b012b9c1a1c05f858446cbf21d7aa7e5d685b1)** to **[`1641b4e`](https://github.com/sagemath/sagetrac-mirror/commit/1641b4e61ee28018cbdea2432fd0479907a9bff6)**",
    "created_at": "2020-09-05T10:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187674",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b6b012b`](https://github.com/sagemath/sagetrac-mirror/commit/b6b012b9c1a1c05f858446cbf21d7aa7e5d685b1)** to **[`1641b4e`](https://github.com/sagemath/sagetrac-mirror/commit/1641b4e61ee28018cbdea2432fd0479907a9bff6)**



---

archive/issue_comments_187675.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ae558073bbdd7283657adde3cea812a403f3646\"><code>6ae5580</code></a></td><td><code>QuotientRing: If implementation=='pbori', delegate to BooleanPolynomialRing</code></td></tr></table>\n",
    "created_at": "2020-09-05T23:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187675",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ae558073bbdd7283657adde3cea812a403f3646"><code>6ae5580</code></a></td><td><code>QuotientRing: If implementation=='pbori', delegate to BooleanPolynomialRing</code></td></tr></table>




---

archive/issue_comments_187676.json:
```json
{
    "body": "Changed commit from **[`1641b4e`](https://github.com/sagemath/sagetrac-mirror/commit/1641b4e61ee28018cbdea2432fd0479907a9bff6)** to **[`6ae5580`](https://github.com/sagemath/sagetrac-mirror/commit/6ae558073bbdd7283657adde3cea812a403f3646)**",
    "created_at": "2020-09-05T23:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187676",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1641b4e`](https://github.com/sagemath/sagetrac-mirror/commit/1641b4e61ee28018cbdea2432fd0479907a9bff6)** to **[`6ae5580`](https://github.com/sagemath/sagetrac-mirror/commit/6ae558073bbdd7283657adde3cea812a403f3646)**



---

archive/issue_comments_187677.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nTo fix failures like the one in `src/sage/combinat/symmetric_group_algebra.py`, we also need to give `AlgebraFunctor` and `GroupAlgebraFunctor` a category argument.\n\nDo we already have a forgetful functor somewhere that can take care of such things by composing?",
    "created_at": "2020-09-06T00:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187677",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

To fix failures like the one in `src/sage/combinat/symmetric_group_algebra.py`, we also need to give `AlgebraFunctor` and `GroupAlgebraFunctor` a category argument.

Do we already have a forgetful functor somewhere that can take care of such things by composing?



---

archive/issue_comments_187678.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18f6b0b282d178282f2b9bceb2e16c6b5fdb50ad\"><code>18f6b0b</code></a></td><td><code>GroupSemidirectProduct: Override the functorial construction from CartesianProduct, return None</code></td></tr></table>\n",
    "created_at": "2020-09-06T00:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187678",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18f6b0b282d178282f2b9bceb2e16c6b5fdb50ad"><code>18f6b0b</code></a></td><td><code>GroupSemidirectProduct: Override the functorial construction from CartesianProduct, return None</code></td></tr></table>




---

archive/issue_comments_187679.json:
```json
{
    "body": "Changed commit from **[`6ae5580`](https://github.com/sagemath/sagetrac-mirror/commit/6ae558073bbdd7283657adde3cea812a403f3646)** to **[`18f6b0b`](https://github.com/sagemath/sagetrac-mirror/commit/18f6b0b282d178282f2b9bceb2e16c6b5fdb50ad)**",
    "created_at": "2020-09-06T00:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187679",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6ae5580`](https://github.com/sagemath/sagetrac-mirror/commit/6ae558073bbdd7283657adde3cea812a403f3646)** to **[`18f6b0b`](https://github.com/sagemath/sagetrac-mirror/commit/18f6b0b282d178282f2b9bceb2e16c6b5fdb50ad)**



---

archive/issue_comments_187680.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nReplying to [@mkoeppe](#comment:100):\n> Replying to [@tscrim](#comment:97):\n> > Right now beta11 is compiling for me. Can you tell me what the problem is with `free_zinbiel_algebra.py` so I know what to start looking for?\n\nMinimal example:\n\n```\nsage: algebras.FreeZinbiel(QQ, ZZ).construction()                                                                                               \nValueError: variable names have not yet been set using self._assign_names(...)\n```",
    "created_at": "2020-09-06T00:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187680",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:116" align="right">comment:116</div>

Replying to [@mkoeppe](#comment:100):
> Replying to [@tscrim](#comment:97):
> > Right now beta11 is compiling for me. Can you tell me what the problem is with `free_zinbiel_algebra.py` so I know what to start looking for?

Minimal example:

```
sage: algebras.FreeZinbiel(QQ, ZZ).construction()                                                                                               
ValueError: variable names have not yet been set using self._assign_names(...)
```



---

archive/issue_comments_187681.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nTo fix the failures in `src/sage/matrix/matrix_gap.pyx`, we would need to store `implementation` in `MatrixFunctor`.",
    "created_at": "2020-09-06T05:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187681",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

To fix the failures in `src/sage/matrix/matrix_gap.pyx`, we would need to store `implementation` in `MatrixFunctor`.



---

archive/issue_comments_187682.json:
```json
{
    "body": "Changed commit from **[`18f6b0b`](https://github.com/sagemath/sagetrac-mirror/commit/18f6b0b282d178282f2b9bceb2e16c6b5fdb50ad)** to **[`e428420`](https://github.com/sagemath/sagetrac-mirror/commit/e42842090a07dab536747285dca1c0bf67c65dd4)**",
    "created_at": "2020-09-10T23:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187682",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`18f6b0b`](https://github.com/sagemath/sagetrac-mirror/commit/18f6b0b282d178282f2b9bceb2e16c6b5fdb50ad)** to **[`e428420`](https://github.com/sagemath/sagetrac-mirror/commit/e42842090a07dab536747285dca1c0bf67c65dd4)**



---

archive/issue_comments_187683.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29f88403586ef7b93b74ed7035057f59280c5579\"><code>29f8840</code></a></td><td><code>Merge branch 'public/ticket/15223' of git://trac.sagemath.org/sage into public/ticket/15223</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e42842090a07dab536747285dca1c0bf67c65dd4\"><code>e428420</code></a></td><td><code>Fixing construction functor for free Zinbiel algebras with infinite vars.</code></td></tr></table>\n",
    "created_at": "2020-09-10T23:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187683",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29f88403586ef7b93b74ed7035057f59280c5579"><code>29f8840</code></a></td><td><code>Merge branch 'public/ticket/15223' of git://trac.sagemath.org/sage into public/ticket/15223</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e42842090a07dab536747285dca1c0bf67c65dd4"><code>e428420</code></a></td><td><code>Fixing construction functor for free Zinbiel algebras with infinite vars.</code></td></tr></table>




---

archive/issue_comments_187684.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThank you. Sorry for taking a week to get to this.\n\nSo the problem is the extension of the free Zinbiel algebra to the infinite number of variables but the `construction()` was only implemented for the finite case. I have fixed this and some other minor things with the construction functor for handling infinite number of variables.",
    "created_at": "2020-09-10T23:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187684",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Thank you. Sorry for taking a week to get to this.

So the problem is the extension of the free Zinbiel algebra to the infinite number of variables but the `construction()` was only implemented for the finite case. I have fixed this and some other minor things with the construction functor for handling infinite number of variables.



---

archive/issue_comments_187685.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReplying to [@mkoeppe](#comment:114):\n> To fix failures like the one in `src/sage/combinat/symmetric_group_algebra.py`, we also need to give `AlgebraFunctor` and `GroupAlgebraFunctor` a category argument.\n> \n> Do we already have a forgetful functor somewhere that can take care of such things by composing?\n\nSort of, there is the `ForgetfulFunction_generic` in `categories/functor.pyx`. You probably will need to implement a subclass of that for this purpose.",
    "created_at": "2020-09-13T02:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187685",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:120" align="right">comment:120</div>

Replying to [@mkoeppe](#comment:114):
> To fix failures like the one in `src/sage/combinat/symmetric_group_algebra.py`, we also need to give `AlgebraFunctor` and `GroupAlgebraFunctor` a category argument.
> 
> Do we already have a forgetful functor somewhere that can take care of such things by composing?

Sort of, there is the `ForgetfulFunction_generic` in `categories/functor.pyx`. You probably will need to implement a subclass of that for this purpose.



---

archive/issue_comments_187686.json:
```json
{
    "body": "Changed commit from **[`e428420`](https://github.com/sagemath/sagetrac-mirror/commit/e42842090a07dab536747285dca1c0bf67c65dd4)** to **[`29e2ce0`](https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786)**",
    "created_at": "2020-09-14T18:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187686",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e428420`](https://github.com/sagemath/sagetrac-mirror/commit/e42842090a07dab536747285dca1c0bf67c65dd4)** to **[`29e2ce0`](https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786)**



---

archive/issue_comments_187687.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786\"><code>29e2ce0</code></a></td><td><code>Skip _test_construction for the remaining test failures</code></td></tr></table>\n",
    "created_at": "2020-09-14T18:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187687",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786"><code>29e2ce0</code></a></td><td><code>Skip _test_construction for the remaining test failures</code></td></tr></table>




---

archive/issue_comments_187688.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nProposing to take care of the remaining failures in a follow-up ticket.",
    "created_at": "2020-09-14T18:49:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187688",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Proposing to take care of the remaining failures in a follow-up ticket.



---

archive/issue_comments_187689.json:
```json
{
    "body": "Changed author from **Simon King, Matthias Koeppe, Marc Mezzarobba** to **Simon King, Matthias Koeppe, Marc Mezzarobba, Travis Scrimshaw**",
    "created_at": "2020-09-14T18:49:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187689",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Simon King, Matthias Koeppe, Marc Mezzarobba** to **Simon King, Matthias Koeppe, Marc Mezzarobba, Travis Scrimshaw**



---

archive/issue_events_216402.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-14T18:49:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216402"
}
```



---

archive/issue_events_216403.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-14T18:49:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216403"
}
```



---

archive/issue_comments_187690.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI am happy with that and the rest of the changes. Anyone else have any objections?",
    "created_at": "2020-09-15T03:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187690",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

I am happy with that and the rest of the changes. Anyone else have any objections?



---

archive/issue_comments_187691.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2020-09-15T03:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187691",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_187692.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nReplying to [@tscrim](#comment:123):\n> I am happy with that and the rest of the changes. Anyone else have any objections?\n\nNo, I was going to make the same suggestion as Matthias.",
    "created_at": "2020-09-15T06:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187692",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:124" align="right">comment:124</div>

Replying to [@tscrim](#comment:123):
> I am happy with that and the rest of the changes. Anyone else have any objections?

No, I was going to make the same suggestion as Matthias.



---

archive/issue_events_216404.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T06:26:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216404"
}
```



---

archive/issue_events_216405.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T06:26:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216405"
}
```



---

archive/issue_comments_187693.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nReplying to [@tscrim](#comment:123):\n> I am happy with that and the rest of the changes. \n\nFor completeness, I have reviewed your changes to the Zinbiel construction functor.",
    "created_at": "2020-09-15T06:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187693",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:125" align="right">comment:125</div>

Replying to [@tscrim](#comment:123):
> I am happy with that and the rest of the changes. 

For completeness, I have reviewed your changes to the Zinbiel construction functor.



---

archive/issue_comments_187694.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Matthias Koeppe**",
    "created_at": "2020-09-15T06:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187694",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Matthias Koeppe**



---

archive/issue_comments_187695.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nFollow-up in #30574",
    "created_at": "2020-09-15T06:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187695",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Follow-up in #30574



---

archive/issue_comments_187696.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIs #30507 really a dependency? If not, we should remove it so this gets picked up into Sage.",
    "created_at": "2020-09-21T23:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187696",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Is #30507 really a dependency? If not, we should remove it so this gets picked up into Sage.



---

archive/issue_comments_187697.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIt isn't - thanks for catching this",
    "created_at": "2020-09-21T23:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187697",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

It isn't - thanks for catching this



---

archive/issue_comments_187698.json:
```json
{
    "body": "Changed dependencies from **#30507** to none",
    "created_at": "2020-09-21T23:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187698",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30507** to none



---

archive/issue_comments_187699.json:
```json
{
    "body": "Changed branch from **[public/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15223)** to **[`29e2ce0`](https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786)**",
    "created_at": "2020-09-27T09:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187699",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/15223](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15223)** to **[`29e2ce0`](https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786)**



---

archive/issue_events_216406.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-27T09:09:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216406"
}
```



---

archive/issue_events_216407.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5bf821488cbc8a14e9a57b851703120eae32f565",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-09-27T09:09:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15223#event-216407"
}
```



---

archive/issue_comments_187700.json:
```json
{
    "body": "Changed commit from **[`29e2ce0`](https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786)** to none",
    "created_at": "2023-01-14T13:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15223#issuecomment-187700",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`29e2ce0`](https://github.com/sagemath/sagetrac-mirror/commit/29e2ce05c43552a7e383441624fa0cfdb840e786)** to none
