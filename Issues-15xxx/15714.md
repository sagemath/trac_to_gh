# Issue 15714: implement CFiniteSequence

archive/issues_015477.json:
```json
{
    "body": "The upcoming inclusion of ore_algebra will provide the means for a PFiniteSequence class. Nevertheless a lightweight implementation of CFiniteSequence has its place in Sage, and it is available now.\n\nThe interface:\n* constructed from generating function or recurrence\n* guessed from sequence\n* provides gf, recurrence, sequence, so practically a conversion between all three\n* other: textual description of recurrence, sequence iterator\n\nPossible extensions, not implemented: output of egf, power sum closed form\n\nAssignee: @rwst\n\nCC:  @burcin @mezzarobba vivianepons\n\nKeywords: recurrence, sequence, ogf\n\nBranch/Commit: 84c909de109ee7c78cfd07eb320c71d364b8e25a\n\nReviewer: Ralf Stephan, Viviane Pons\n\nAuthor: Ralf Stephan, Viviane Pons\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15714\n\n",
    "closed_at": "2015-06-11T13:51:00Z",
    "created_at": "2014-01-23T10:56:52Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "implement CFiniteSequence",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15714",
    "user": "https://github.com/rwst"
}
```
The upcoming inclusion of ore_algebra will provide the means for a PFiniteSequence class. Nevertheless a lightweight implementation of CFiniteSequence has its place in Sage, and it is available now.

The interface:
* constructed from generating function or recurrence
* guessed from sequence
* provides gf, recurrence, sequence, so practically a conversion between all three
* other: textual description of recurrence, sequence iterator

Possible extensions, not implemented: output of egf, power sum closed form

Assignee: @rwst

CC:  @burcin @mezzarobba vivianepons

Keywords: recurrence, sequence, ogf

Branch/Commit: 84c909de109ee7c78cfd07eb320c71d364b8e25a

Reviewer: Ralf Stephan, Viviane Pons

Author: Ralf Stephan, Viviane Pons

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15714





---

archive/issue_comments_249595.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n The name for the next more general mathematical object is *linear homogenous recurrence with constant coefficients*, and there are mappings to and from polynomial fractions (the latter generate the former). I am not sure about the best object name, however. Working title: Linrec.\n \n-Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = c_0a_0 + ... + c_(n-1)a_(n-1).\n+Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = c_na_n + c_(n-1)a_(n-1) + ... + c_0a_0.\n``````\n",
    "created_at": "2014-01-23T10:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249595",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 The name for the next more general mathematical object is *linear homogenous recurrence with constant coefficients*, and there are mappings to and from polynomial fractions (the latter generate the former). I am not sure about the best object name, however. Working title: Linrec.
 
-Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = c_0a_0 + ... + c_(n-1)a_(n-1).
+Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = c_na_n + c_(n-1)a_(n-1) + ... + c_0a_0.
``````




---

archive/issue_comments_249596.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n The name for the next more general mathematical object is *linear homogenous recurrence with constant coefficients*, and there are mappings to and from polynomial fractions (the latter generate the former). I am not sure about the best object name, however. Working title: Linrec.\n \n-Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = c_na_n + c_(n-1)a_(n-1) + ... + c_0a_0.\n+Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = a_n + c_(n-1)a_(n-1) + ... + c_0a_0.\n``````\n",
    "created_at": "2014-01-23T10:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249596",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 The name for the next more general mathematical object is *linear homogenous recurrence with constant coefficients*, and there are mappings to and from polynomial fractions (the latter generate the former). I am not sure about the best object name, however. Working title: Linrec.
 
-Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = c_na_n + c_(n-1)a_(n-1) + ... + c_0a_0.
+Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = a_n + c_(n-1)a_(n-1) + ... + c_0a_0.
``````




---

archive/issue_comments_249597.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/ticket/15714\"",
    "created_at": "2014-01-24T11:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249597",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/ticket/15714"



---

archive/issue_comments_249598.json:
```json
{
    "body": "<a id='comment:4'></a>\nPlease comment on the interface/documentation\n\n---\nNew commits:\n|                                                                                                                                          |                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n|[9d8a0eb](https://github.com/sagemath/sagetrac-mirror/commit/9d8a0eb2b073cb00a68218ff9a6246b880d500b7)|`skeleton interface`|",
    "created_at": "2014-01-24T11:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249598",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>
Please comment on the interface/documentation

---
New commits:
|                                                                                                                                          |                    |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|[9d8a0eb](https://github.com/sagemath/sagetrac-mirror/commit/9d8a0eb2b073cb00a68218ff9a6246b880d500b7)|`skeleton interface`|



---

archive/issue_comments_249599.json:
```json
{
    "body": "Changing commit from \"\" to \"9d8a0eb2b073cb00a68218ff9a6246b880d500b7\"",
    "created_at": "2014-01-24T11:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249599",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "9d8a0eb2b073cb00a68218ff9a6246b880d500b7"



---

archive/issue_comments_249600.json:
```json
{
    "body": "Changing commit from \"9d8a0eb2b073cb00a68218ff9a6246b880d500b7\" to \"70a29e1f99da5f6bf4d3a465ab26a79b6c9575c2\"",
    "created_at": "2014-01-26T18:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249600",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9d8a0eb2b073cb00a68218ff9a6246b880d500b7" to "70a29e1f99da5f6bf4d3a465ab26a79b6c9575c2"



---

archive/issue_comments_249601.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n|[70a29e1](https://github.com/sagemath/sagetrac-mirror/commit/70a29e1f99da5f6bf4d3a465ab26a79b6c9575c2)|`core functionality`|",
    "created_at": "2014-01-26T18:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249601",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                    |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|[70a29e1](https://github.com/sagemath/sagetrac-mirror/commit/70a29e1f99da5f6bf4d3a465ab26a79b6c9575c2)|`core functionality`|



---

archive/issue_comments_249602.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[6df1fc6](https://github.com/sagemath/sagetrac-mirror/commit/6df1fc6a4e7027facf3835574ba893b8af641d0e)|`guess(), random_element(), some refactoring`|",
    "created_at": "2014-01-27T18:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249602",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[6df1fc6](https://github.com/sagemath/sagetrac-mirror/commit/6df1fc6a4e7027facf3835574ba893b8af641d0e)|`guess(), random_element(), some refactoring`|



---

archive/issue_comments_249603.json:
```json
{
    "body": "Changing commit from \"70a29e1f99da5f6bf4d3a465ab26a79b6c9575c2\" to \"6df1fc6a4e7027facf3835574ba893b8af641d0e\"",
    "created_at": "2014-01-27T18:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249603",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "70a29e1f99da5f6bf4d3a465ab26a79b6c9575c2" to "6df1fc6a4e7027facf3835574ba893b8af641d0e"



---

archive/issue_comments_249604.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[9095be0](https://github.com/sagemath/sagetrac-mirror/commit/9095be01500c51a0a32b0ffe987dc94a32fd4b96)|`ref doc completed; coefficients(), slicing added`|",
    "created_at": "2014-01-28T17:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249604",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[9095be0](https://github.com/sagemath/sagetrac-mirror/commit/9095be01500c51a0a32b0ffe987dc94a32fd4b96)|`ref doc completed; coefficients(), slicing added`|



---

archive/issue_comments_249605.json:
```json
{
    "body": "Changing commit from \"6df1fc6a4e7027facf3835574ba893b8af641d0e\" to \"9095be01500c51a0a32b0ffe987dc94a32fd4b96\"",
    "created_at": "2014-01-28T17:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249605",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6df1fc6a4e7027facf3835574ba893b8af641d0e" to "9095be01500c51a0a32b0ffe987dc94a32fd4b96"



---

archive/issue_comments_249606.json:
```json
{
    "body": "Changing commit from \"9095be01500c51a0a32b0ffe987dc94a32fd4b96\" to \"f73e11e1396b68c1668c4808b25edcf38c23163f\"",
    "created_at": "2014-01-30T07:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249606",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9095be01500c51a0a32b0ffe987dc94a32fd4b96" to "f73e11e1396b68c1668c4808b25edcf38c23163f"



---

archive/issue_comments_249607.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[f73e11e](https://github.com/sagemath/sagetrac-mirror/commit/f73e11e1396b68c1668c4808b25edcf38c23163f)|`handle ogf > 1`|",
    "created_at": "2014-01-30T07:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249607",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[f73e11e](https://github.com/sagemath/sagetrac-mirror/commit/f73e11e1396b68c1668c4808b25edcf38c23163f)|`handle ogf > 1`|



---

archive/issue_comments_249608.json:
```json
{
    "body": "Changing keywords from \"recurrence ogf\" to \"recurrence, sequence, ogf\".",
    "created_at": "2014-01-30T07:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249608",
    "user": "https://github.com/rwst"
}
```

Changing keywords from "recurrence ogf" to "recurrence, sequence, ogf".



---

archive/issue_comments_249609.json:
```json
{
    "body": "Changing author from \"\" to \"rws\"",
    "created_at": "2014-01-30T07:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249609",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "rws"



---

archive/issue_comments_249610.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-30T07:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249610",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_events_060403.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "rename": {
        "from": "generalize BinaryRecurrenceSequence",
        "to": "implement CFiniteSequence"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15714#event-60403"
}
```



---

archive/issue_comments_249611.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n-The name for the next more general mathematical object is *linear homogenous recurrence with constant coefficients*, and there are mappings to and from polynomial fractions (the latter generate the former). I am not sure about the best object name, however. Working title: Linrec.\n+The upcoming inclusion of ore_algebra will provide the means for a PFiniteSequence class. Nevertheless a lightweight implementation of CFiniteSequence has its place in Sage, and it is available now.\n \n-Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = a_n + c_(n-1)a_(n-1) + ... + c_0a_0.\n+The interface:\n+-constructed from generating function or recurrence\n+-guessed from sequence\n+-provides gf, recurrence, sequence, so practically a conversion between all three\n+-other services: textual description of recurrence, sequence iterator\n+\n+Possible extensions, not implemented: output of egf, power sum closed form\n``````\n",
    "created_at": "2014-01-30T07:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249611",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
-The name for the next more general mathematical object is *linear homogenous recurrence with constant coefficients*, and there are mappings to and from polynomial fractions (the latter generate the former). I am not sure about the best object name, however. Working title: Linrec.
+The upcoming inclusion of ore_algebra will provide the means for a PFiniteSequence class. Nevertheless a lightweight implementation of CFiniteSequence has its place in Sage, and it is available now.
 
-Definition of linrec: degree n, coefficients c_0...c_(n-1), start values a_0...a_(n-1), satisfying 0 = a_n + c_(n-1)a_(n-1) + ... + c_0a_0.
+The interface:
+-constructed from generating function or recurrence
+-guessed from sequence
+-provides gf, recurrence, sequence, so practically a conversion between all three
+-other services: textual description of recurrence, sequence iterator
+
+Possible extensions, not implemented: output of egf, power sum closed form
``````




---

archive/issue_events_060404.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15714#event-60404"
}
```



---

archive/issue_comments_249612.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-02-04T15:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249612",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_249613.json:
```json
{
    "body": "<a id='comment:13'></a>\nSome more comments:\n* Your code is apparently limited to sequences with integer or rational coefficients. IMHO it would be best to handle C-finite sequences over arbitrary rings (or perhaps integral domains?). If you don't want to do that, the scope of the code should be clearly documented and there should be a few checks in suitable places<sup>[1]</sup>.\n* How about making CFiniteSequences Elements of a proper Parent? Sure, it is not absolutely essential at this point, but that's something we will certainly want in the long run\u2014C-finite sequences [over a given ring] form a ring!\u2014, and designing a suitable interface from the start would save the trouble of deprecating the current one later on!\n* If you do implement a \"ring of C-Finite sequences over ...\", I'd suggest moving it outside of combinat (perhaps to a new package `sage.rings.sequences`?).\n\n[1] Currently, the following examples all behave differently:\n\n```\nsage: R.<x> = RR[]; fibo = CFiniteSequence(x/(1-x-x^2)); fibo[10]\n55\nsage: R.<x> = GF(3)[]; fibo = CFiniteSequence(x/(1-x-x^2)); fibo[10]\n...\nValueError: Cannot convert to CFiniteSequence.\nsage: R.<x> = CC[]; fibo = CFiniteSequence(x/(1-x-x^2)); fibo[10]\n...\nTypeError: Unable to coerce 0.000000000000000 (<type 'sage.rings.complex_number.ComplexNumber'>) to Rational\n```\nTheir behaviour is not entirely unreasonable, but it only makes sense if you know that `CFiniteSequence` is going to try converting the input to a rational fraction over `QQ`.",
    "created_at": "2014-02-04T15:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249613",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:13'></a>
Some more comments:
* Your code is apparently limited to sequences with integer or rational coefficients. IMHO it would be best to handle C-finite sequences over arbitrary rings (or perhaps integral domains?). If you don't want to do that, the scope of the code should be clearly documented and there should be a few checks in suitable places<sup>[1]</sup>.
* How about making CFiniteSequences Elements of a proper Parent? Sure, it is not absolutely essential at this point, but that's something we will certainly want in the long run—C-finite sequences [over a given ring] form a ring!—, and designing a suitable interface from the start would save the trouble of deprecating the current one later on!
* If you do implement a "ring of C-Finite sequences over ...", I'd suggest moving it outside of combinat (perhaps to a new package `sage.rings.sequences`?).

[1] Currently, the following examples all behave differently:

```
sage: R.<x> = RR[]; fibo = CFiniteSequence(x/(1-x-x^2)); fibo[10]
55
sage: R.<x> = GF(3)[]; fibo = CFiniteSequence(x/(1-x-x^2)); fibo[10]
...
ValueError: Cannot convert to CFiniteSequence.
sage: R.<x> = CC[]; fibo = CFiniteSequence(x/(1-x-x^2)); fibo[10]
...
TypeError: Unable to coerce 0.000000000000000 (<type 'sage.rings.complex_number.ComplexNumber'>) to Rational
```
Their behaviour is not entirely unreasonable, but it only makes sense if you know that `CFiniteSequence` is going to try converting the input to a rational fraction over `QQ`.



---

archive/issue_comments_249614.json:
```json
{
    "body": "Changing commit from \"f73e11e1396b68c1668c4808b25edcf38c23163f\" to \"a2d51160c58a3466426575b3cf9f724bb6fe66bd\"",
    "created_at": "2014-03-14T10:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249614",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f73e11e1396b68c1668c4808b25edcf38c23163f" to "a2d51160c58a3466426575b3cf9f724bb6fe66bd"



---

archive/issue_comments_249615.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[e7958b0](https://github.com/sagemath/sagetrac-mirror/commit/e7958b002a01522403965d3c7d4bb92d95ec5e0e)|`Merge branch 'ticket/15714' into develop`|\n|[21fbcca](https://github.com/sagemath/sagetrac-mirror/commit/21fbcca742a430c6b5e935f9d0e1d6b1b244c6b9)|`move to rings/, allow 1/x, subclass from FractionFieldElement`|\n|[8a1b3a4](https://github.com/sagemath/sagetrac-mirror/commit/8a1b3a4316c956e5a118d3d729e2e3fbf6f86c03)|`add, sub functions`|\n|[d69aaac](https://github.com/sagemath/sagetrac-mirror/commit/d69aaac4c0bc27c8419a8b2e289b68007fe0bd93)|`mul, div`|\n|[a62b72c](https://github.com/sagemath/sagetrac-mirror/commit/a62b72cc7cfa0bd4fcaaf71b45f48e6dae2c36b7)|`be specific about base ring, more doctests`|\n|[ffea32f](https://github.com/sagemath/sagetrac-mirror/commit/ffea32f084f355b71c0be3b66dc8b8550d53cddc)|`Merge branch 'develop' into ticket/15714`|\n|[9ee1a05](https://github.com/sagemath/sagetrac-mirror/commit/9ee1a05ce7de97004fe8b5f740e80cdcd288efad)|`specify applicability, handle constants, more doctests, better documentation`|\n|[4218ac8](https://github.com/sagemath/sagetrac-mirror/commit/4218ac8b5823ee0c41f9c3fdee165c3e128aac9e)|`Merge branch 'develop' into ticket/15714`|\n|[03f82ba](https://github.com/sagemath/sagetrac-mirror/commit/03f82bac8a7a503b9763807542ec059581a58200)|`use pari script default for guessing; safeguards in ctor`|\n|[a2d5116](https://github.com/sagemath/sagetrac-mirror/commit/a2d51160c58a3466426575b3cf9f724bb6fe66bd)|`last doctests, fix documentation`|",
    "created_at": "2014-03-14T10:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[e7958b0](https://github.com/sagemath/sagetrac-mirror/commit/e7958b002a01522403965d3c7d4bb92d95ec5e0e)|`Merge branch 'ticket/15714' into develop`|
|[21fbcca](https://github.com/sagemath/sagetrac-mirror/commit/21fbcca742a430c6b5e935f9d0e1d6b1b244c6b9)|`move to rings/, allow 1/x, subclass from FractionFieldElement`|
|[8a1b3a4](https://github.com/sagemath/sagetrac-mirror/commit/8a1b3a4316c956e5a118d3d729e2e3fbf6f86c03)|`add, sub functions`|
|[d69aaac](https://github.com/sagemath/sagetrac-mirror/commit/d69aaac4c0bc27c8419a8b2e289b68007fe0bd93)|`mul, div`|
|[a62b72c](https://github.com/sagemath/sagetrac-mirror/commit/a62b72cc7cfa0bd4fcaaf71b45f48e6dae2c36b7)|`be specific about base ring, more doctests`|
|[ffea32f](https://github.com/sagemath/sagetrac-mirror/commit/ffea32f084f355b71c0be3b66dc8b8550d53cddc)|`Merge branch 'develop' into ticket/15714`|
|[9ee1a05](https://github.com/sagemath/sagetrac-mirror/commit/9ee1a05ce7de97004fe8b5f740e80cdcd288efad)|`specify applicability, handle constants, more doctests, better documentation`|
|[4218ac8](https://github.com/sagemath/sagetrac-mirror/commit/4218ac8b5823ee0c41f9c3fdee165c3e128aac9e)|`Merge branch 'develop' into ticket/15714`|
|[03f82ba](https://github.com/sagemath/sagetrac-mirror/commit/03f82bac8a7a503b9763807542ec059581a58200)|`use pari script default for guessing; safeguards in ctor`|
|[a2d5116](https://github.com/sagemath/sagetrac-mirror/commit/a2d51160c58a3466426575b3cf9f724bb6fe66bd)|`last doctests, fix documentation`|



---

archive/issue_comments_249616.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-03-14T10:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249616",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_249617.json:
```json
{
    "body": "<a id='comment:15'></a>\nI refrained from creating a specific parent, as the ring is isomorphic to Laurent polynomial fractions. I specifically allowed `ZZ` and `QQ`. So C-finite sequences return their parent as `Fraction Field of Univariate Polynomial Ring in x over Rational Field`.\n\nTwo guessing algorithms are implemented, Berlekamp-Massey and LLL (faster,default).\n\nAn improvement in clarity could be to replace the internal implementation via vanilla polyniomals by Laurent polyniomals (#11726).\n\nI think the math is pretty standard, though I know of no paper about the isomorphism. If I knew algebra better I would write a paper.",
    "created_at": "2014-03-14T10:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249617",
    "user": "https://github.com/rwst"
}
```

<a id='comment:15'></a>
I refrained from creating a specific parent, as the ring is isomorphic to Laurent polynomial fractions. I specifically allowed `ZZ` and `QQ`. So C-finite sequences return their parent as `Fraction Field of Univariate Polynomial Ring in x over Rational Field`.

Two guessing algorithms are implemented, Berlekamp-Massey and LLL (faster,default).

An improvement in clarity could be to replace the internal implementation via vanilla polyniomals by Laurent polyniomals (#11726).

I think the math is pretty standard, though I know of no paper about the isomorphism. If I knew algebra better I would write a paper.



---

archive/issue_comments_249618.json:
```json
{
    "body": "Changing author from \"rws\" to \"Ralf Stephan\"",
    "created_at": "2014-03-14T14:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249618",
    "user": "https://github.com/rwst"
}
```

Changing author from "rws" to "Ralf Stephan"



---

archive/issue_comments_249619.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n The upcoming inclusion of ore_algebra will provide the means for a PFiniteSequence class. Nevertheless a lightweight implementation of CFiniteSequence has its place in Sage, and it is available now.\n \n The interface:\n--constructed from generating function or recurrence\n--guessed from sequence\n--provides gf, recurrence, sequence, so practically a conversion between all three\n--other services: textual description of recurrence, sequence iterator\n+*constructed from generating function or recurrence\n+*guessed from sequence\n+*provides gf, recurrence, sequence, so practically a conversion between all three\n+*other services: textual description of recurrence, sequence iterator\n \n Possible extensions, not implemented: output of egf, power sum closed form\n``````\n",
    "created_at": "2014-03-14T14:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249619",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 The upcoming inclusion of ore_algebra will provide the means for a PFiniteSequence class. Nevertheless a lightweight implementation of CFiniteSequence has its place in Sage, and it is available now.
 
 The interface:
--constructed from generating function or recurrence
--guessed from sequence
--provides gf, recurrence, sequence, so practically a conversion between all three
--other services: textual description of recurrence, sequence iterator
+*constructed from generating function or recurrence
+*guessed from sequence
+*provides gf, recurrence, sequence, so practically a conversion between all three
+*other services: textual description of recurrence, sequence iterator
 
 Possible extensions, not implemented: output of egf, power sum closed form
``````




---

archive/issue_events_060405.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15714#event-60405"
}
```



---

archive/issue_events_060406.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15714#event-60406"
}
```



---

archive/issue_comments_249620.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-12T06:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249620",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_249621.json:
```json
{
    "body": "Changing commit from \"a2d51160c58a3466426575b3cf9f724bb6fe66bd\" to \"38dd6d0148e92c45dceafcf75f9685b7adec2708\"",
    "created_at": "2014-05-31T07:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249621",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a2d51160c58a3466426575b3cf9f724bb6fe66bd" to "38dd6d0148e92c45dceafcf75f9685b7adec2708"



---

archive/issue_comments_249622.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[27c7f64](https://github.com/sagemath/sagetrac-mirror/commit/27c7f6402d84671c7ba5aee2d54106b3b359808e)|`Merge branch 'develop' into t/15714/ticket/15714`|\n|[1e45c83](https://github.com/sagemath/sagetrac-mirror/commit/1e45c83711c41094f766bced9065b626623b8a8a)|`15714 apparently Laurent polys do work now as input`|\n|[38dd6d0](https://github.com/sagemath/sagetrac-mirror/commit/38dd6d0148e92c45dceafcf75f9685b7adec2708)|`15714: fix corner cases; improve recurrence representation, refactor its code`|",
    "created_at": "2014-05-31T07:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[27c7f64](https://github.com/sagemath/sagetrac-mirror/commit/27c7f6402d84671c7ba5aee2d54106b3b359808e)|`Merge branch 'develop' into t/15714/ticket/15714`|
|[1e45c83](https://github.com/sagemath/sagetrac-mirror/commit/1e45c83711c41094f766bced9065b626623b8a8a)|`15714 apparently Laurent polys do work now as input`|
|[38dd6d0](https://github.com/sagemath/sagetrac-mirror/commit/38dd6d0148e92c45dceafcf75f9685b7adec2708)|`15714: fix corner cases; improve recurrence representation, refactor its code`|



---

archive/issue_comments_249623.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-31T07:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249623",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_249624.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n The upcoming inclusion of ore_algebra will provide the means for a PFiniteSequence class. Nevertheless a lightweight implementation of CFiniteSequence has its place in Sage, and it is available now.\n \n The interface:\n-*constructed from generating function or recurrence\n-*guessed from sequence\n-*provides gf, recurrence, sequence, so practically a conversion between all three\n-*other services: textual description of recurrence, sequence iterator\n+* constructed from generating function or recurrence\n+* guessed from sequence\n+* provides gf, recurrence, sequence, so practically a conversion between all three\n+* other: textual description of recurrence, sequence iterator\n \n Possible extensions, not implemented: output of egf, power sum closed form\n``````\n",
    "created_at": "2014-05-31T09:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249624",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 The upcoming inclusion of ore_algebra will provide the means for a PFiniteSequence class. Nevertheless a lightweight implementation of CFiniteSequence has its place in Sage, and it is available now.
 
 The interface:
-*constructed from generating function or recurrence
-*guessed from sequence
-*provides gf, recurrence, sequence, so practically a conversion between all three
-*other services: textual description of recurrence, sequence iterator
+* constructed from generating function or recurrence
+* guessed from sequence
+* provides gf, recurrence, sequence, so practically a conversion between all three
+* other: textual description of recurrence, sequence iterator
 
 Possible extensions, not implemented: output of egf, power sum closed form
``````




---

archive/issue_comments_249625.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-10T10:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249625",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_249626.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe recent move to abandon pexpect demands that the pari script in this patch should be replaced by code using libpari.",
    "created_at": "2014-06-10T10:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249626",
    "user": "https://github.com/rwst"
}
```

<a id='comment:22'></a>
The recent move to abandon pexpect demands that the pari script in this patch should be replaced by code using libpari.



---

archive/issue_comments_249627.json:
```json
{
    "body": "<a id='comment:23'></a>\nThat demand should not hold up the ticket.",
    "created_at": "2014-07-28T16:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249627",
    "user": "https://github.com/rwst"
}
```

<a id='comment:23'></a>
That demand should not hold up the ticket.



---

archive/issue_comments_249628.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-28T16:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249628",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_060407.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15714#event-60407"
}
```



---

archive/issue_events_060408.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15714#event-60408"
}
```



---

archive/issue_comments_249629.json:
```json
{
    "body": "Changing commit from \"38dd6d0148e92c45dceafcf75f9685b7adec2708\" to \"c14c8a38eddfba9708081e561351a80c6f539821\"",
    "created_at": "2014-11-18T21:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249629",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "38dd6d0148e92c45dceafcf75f9685b7adec2708" to "c14c8a38eddfba9708081e561351a80c6f539821"



---

archive/issue_comments_249630.json:
```json
{
    "body": "Changing branch from \"u/rws/ticket/15714\" to \"public/ticket/15714\"",
    "created_at": "2014-11-18T21:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249630",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/rws/ticket/15714" to "public/ticket/15714"



---

archive/issue_comments_249631.json:
```json
{
    "body": "<a id='comment:25'></a>\nI have had a look and corrected a few little things. Now pep8 compliant.\n\n---\nNew commits:\n|                                                                                                                                          |                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[74694aa](https://github.com/sagemath/sagetrac-mirror/commit/74694aa2b3464aa4273f140d2e7ad22cf8683bb7)|`Merge branch 'u/rws/ticket/15714' into 6.5.b0`|\n|[c14c8a3](https://github.com/sagemath/sagetrac-mirror/commit/c14c8a38eddfba9708081e561351a80c6f539821)|`trac #15174 reviewer commit`|",
    "created_at": "2014-11-18T21:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249631",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>
I have had a look and corrected a few little things. Now pep8 compliant.

---
New commits:
|                                                                                                                                          |                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[74694aa](https://github.com/sagemath/sagetrac-mirror/commit/74694aa2b3464aa4273f140d2e7ad22cf8683bb7)|`Merge branch 'u/rws/ticket/15714' into 6.5.b0`|
|[c14c8a3](https://github.com/sagemath/sagetrac-mirror/commit/c14c8a38eddfba9708081e561351a80c6f539821)|`trac #15174 reviewer commit`|



---

archive/issue_comments_249632.json:
```json
{
    "body": "Changing commit from \"c14c8a38eddfba9708081e561351a80c6f539821\" to \"dbc2c17b8b79211e43d3454fdba86151f7fc51e6\"",
    "created_at": "2014-11-18T21:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249632",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c14c8a38eddfba9708081e561351a80c6f539821" to "dbc2c17b8b79211e43d3454fdba86151f7fc51e6"



---

archive/issue_comments_249633.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[dbc2c17](https://github.com/sagemath/sagetrac-mirror/commit/dbc2c17b8b79211e43d3454fdba86151f7fc51e6)|`trac #15714 one more TESTS::`|",
    "created_at": "2014-11-18T21:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249633",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[dbc2c17](https://github.com/sagemath/sagetrac-mirror/commit/dbc2c17b8b79211e43d3454fdba86151f7fc51e6)|`trac #15714 one more TESTS::`|



---

archive/issue_comments_249634.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[c44cd18](https://github.com/sagemath/sagetrac-mirror/commit/c44cd18aa990bb4bd3bc6a7e362c1cec1b17eb1a)|`trac #15714 add doctest missing for sub`|",
    "created_at": "2014-11-19T09:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249634",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[c44cd18](https://github.com/sagemath/sagetrac-mirror/commit/c44cd18aa990bb4bd3bc6a7e362c1cec1b17eb1a)|`trac #15714 add doctest missing for sub`|



---

archive/issue_comments_249635.json:
```json
{
    "body": "Changing commit from \"dbc2c17b8b79211e43d3454fdba86151f7fc51e6\" to \"c44cd18aa990bb4bd3bc6a7e362c1cec1b17eb1a\"",
    "created_at": "2014-11-19T09:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dbc2c17b8b79211e43d3454fdba86151f7fc51e6" to "c44cd18aa990bb4bd3bc6a7e362c1cec1b17eb1a"



---

archive/issue_comments_249636.json:
```json
{
    "body": "<a id='comment:28'></a>\nFr\u00e9d\u00e9ric, you seem to have had a good look at the code, why not do a review?",
    "created_at": "2014-12-11T07:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249636",
    "user": "https://github.com/rwst"
}
```

<a id='comment:28'></a>
Frédéric, you seem to have had a good look at the code, why not do a review?



---

archive/issue_comments_249637.json:
```json
{
    "body": "<a id='comment:29'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[7e706cb](https://github.com/sagemath/sagetrac-mirror/commit/7e706cb49ce692eb6515df96877bd15da0e4370d)|`Merge branch 'develop' into t/15714/public/ticket/15714`|\n|[0656d07](https://github.com/sagemath/sagetrac-mirror/commit/0656d07dfa6dfa57f78fb1c2cfb7572a3c842801)|`15714: change default guessing algorithm to 'sage'; guessing of finite sequences no longer supported`|",
    "created_at": "2015-01-10T17:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[7e706cb](https://github.com/sagemath/sagetrac-mirror/commit/7e706cb49ce692eb6515df96877bd15da0e4370d)|`Merge branch 'develop' into t/15714/public/ticket/15714`|
|[0656d07](https://github.com/sagemath/sagetrac-mirror/commit/0656d07dfa6dfa57f78fb1c2cfb7572a3c842801)|`15714: change default guessing algorithm to 'sage'; guessing of finite sequences no longer supported`|



---

archive/issue_comments_249638.json:
```json
{
    "body": "Changing commit from \"c44cd18aa990bb4bd3bc6a7e362c1cec1b17eb1a\" to \"0656d07dfa6dfa57f78fb1c2cfb7572a3c842801\"",
    "created_at": "2015-01-10T17:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249638",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c44cd18aa990bb4bd3bc6a7e362c1cec1b17eb1a" to "0656d07dfa6dfa57f78fb1c2cfb7572a3c842801"



---

archive/issue_comments_249639.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [rws](#comment%3A15):\n> I refrained from creating a specific parent, as the ring is isomorphic to Laurent polynomial fractions. I specifically allowed `ZZ` and `QQ`. So C-finite sequences return their parent as `Fraction Field of Univariate Polynomial Ring in x over Rational Field`.\n\n\nI haven't looked at the new code, but I really doubt that this is a good idea: do you really want, say, the sum of a CFiniteSequence and an integer to return a rational function?!",
    "created_at": "2015-02-05T14:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249639",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:30'></a>
Replying to [rws](#comment%3A15):
> I refrained from creating a specific parent, as the ring is isomorphic to Laurent polynomial fractions. I specifically allowed `ZZ` and `QQ`. So C-finite sequences return their parent as `Fraction Field of Univariate Polynomial Ring in x over Rational Field`.


I haven't looked at the new code, but I really doubt that this is a good idea: do you really want, say, the sum of a CFiniteSequence and an integer to return a rational function?!



---

archive/issue_comments_249640.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [mmezzarobba](#comment%3A30):\n> I haven't looked at the new code, but I really doubt that this is a good idea: do you really want, say, the sum of a CFiniteSequence and an integer to return a rational function?!\n\nNowhere is a function returned. The type remains a polynomial fraction.",
    "created_at": "2015-02-05T15:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249640",
    "user": "https://github.com/rwst"
}
```

<a id='comment:31'></a>
Replying to [mmezzarobba](#comment%3A30):
> I haven't looked at the new code, but I really doubt that this is a good idea: do you really want, say, the sum of a CFiniteSequence and an integer to return a rational function?!

Nowhere is a function returned. The type remains a polynomial fraction.



---

archive/issue_comments_249641.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [rws](#comment%3A31):\n> Nowhere is a function returned. The type remains a polynomial fraction.\n\n\nYes, that's what I mean by rational function.",
    "created_at": "2015-02-05T15:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249641",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:32'></a>
Replying to [rws](#comment%3A31):
> Nowhere is a function returned. The type remains a polynomial fraction.


Yes, that's what I mean by rational function.



---

archive/issue_comments_249642.json:
```json
{
    "body": "<a id='comment:33'></a>\nPlease compare:\n\n```\nsage: fr = (x/(1+x)).fraction(QQ)\nsage: 1+fr\n(2*x + 1)/(x + 1)\nsage: type(_)\n<class 'sage.rings.fraction_field_element.FractionFieldElement_1poly_field'>\nsage: fr+1\n(2*x + 1)/(x + 1)\nsage: type(_)\n<class 'sage.rings.fraction_field_element.FractionFieldElement_1poly_field'>\n```\nversus\n\n```\nsage: R.<x> = PolynomialRing(QQ, 'x')\nsage: s = CFiniteSequence(x/(1+x))\n/home/ralf/sage/local/lib/python2.7/site-packages/sage/rings/cfinite_sequence.py:212: DeprecationWarning: This method is deprecated.\nSee http://trac.sagemath.org/16201 for details.\n  R.set_default_prec(alen)\nsage: s\nC-finite sequence, generated by x/(x + 1)\nsage: 1+s\n(2*x + 1)/(x + 1)\nsage: s+1\nC-finite sequence, generated by (2*x + 1)/(x + 1)\nsage: CFiniteSequence(1)+s\nC-finite sequence, generated by (2*x + 1)/(x + 1)\n```\nWhat do yu think is wrong there? (Will fix the deprecation warning)",
    "created_at": "2015-02-05T15:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249642",
    "user": "https://github.com/rwst"
}
```

<a id='comment:33'></a>
Please compare:

```
sage: fr = (x/(1+x)).fraction(QQ)
sage: 1+fr
(2*x + 1)/(x + 1)
sage: type(_)
<class 'sage.rings.fraction_field_element.FractionFieldElement_1poly_field'>
sage: fr+1
(2*x + 1)/(x + 1)
sage: type(_)
<class 'sage.rings.fraction_field_element.FractionFieldElement_1poly_field'>
```
versus

```
sage: R.<x> = PolynomialRing(QQ, 'x')
sage: s = CFiniteSequence(x/(1+x))
/home/ralf/sage/local/lib/python2.7/site-packages/sage/rings/cfinite_sequence.py:212: DeprecationWarning: This method is deprecated.
See http://trac.sagemath.org/16201 for details.
  R.set_default_prec(alen)
sage: s
C-finite sequence, generated by x/(x + 1)
sage: 1+s
(2*x + 1)/(x + 1)
sage: s+1
C-finite sequence, generated by (2*x + 1)/(x + 1)
sage: CFiniteSequence(1)+s
C-finite sequence, generated by (2*x + 1)/(x + 1)
```
What do yu think is wrong there? (Will fix the deprecation warning)



---

archive/issue_comments_249643.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [rws](#comment%3A33):\n> {{{\n> sage: R.<x> = PolynomialRing(QQ, 'x')\n> sage: s = CFiniteSequence(x/(1+x))\n> /home/ralf/sage/local/lib/python2.7/site-packages/sage/rings/cfinite_sequence.py:212: DeprecationWarning: This method is deprecated.\n> See http://trac.sagemath.org/16201 for details.\n>   R.set_default_prec(alen)\n> sage: s\n> C-finite sequence, generated by x/(x + 1)\n> sage: 1+s\n> (2*x + 1)/(x + 1)\n> sage: s+1\n> C-finite sequence, generated by (2*x + 1)/(x + 1)\n> sage: CFiniteSequence(1)+s\n> C-finite sequence, generated by (2*x + 1)/(x + 1)\n> }}}\n> What do yu think is wrong there? (Will fix the deprecation warning)\n\n\nI don't think that's how sage objects are supposed to behave! I'd expect the result of `1+s` not do depend on the order. Moreover, I'd expect that things like `1.0+s` or `s+s'` where `s'` is another type of sequence can be made to work in the long run even if they don't all work yet.",
    "created_at": "2015-02-05T16:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249643",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:34'></a>
Replying to [rws](#comment%3A33):
> {{{
> sage: R.<x> = PolynomialRing(QQ, 'x')
> sage: s = CFiniteSequence(x/(1+x))
> /home/ralf/sage/local/lib/python2.7/site-packages/sage/rings/cfinite_sequence.py:212: DeprecationWarning: This method is deprecated.
> See http://trac.sagemath.org/16201 for details.
>   R.set_default_prec(alen)
> sage: s
> C-finite sequence, generated by x/(x + 1)
> sage: 1+s
> (2*x + 1)/(x + 1)
> sage: s+1
> C-finite sequence, generated by (2*x + 1)/(x + 1)
> sage: CFiniteSequence(1)+s
> C-finite sequence, generated by (2*x + 1)/(x + 1)
> }}}
> What do yu think is wrong there? (Will fix the deprecation warning)


I don't think that's how sage objects are supposed to behave! I'd expect the result of `1+s` not do depend on the order. Moreover, I'd expect that things like `1.0+s` or `s+s'` where `s'` is another type of sequence can be made to work in the long run even if they don't all work yet.



---

archive/issue_comments_249644.json:
```json
{
    "body": "Changing commit from \"0656d07dfa6dfa57f78fb1c2cfb7572a3c842801\" to \"6186c9f5501ce9411fcf6d53d88a9b331b15568c\"",
    "created_at": "2015-02-05T16:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249644",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0656d07dfa6dfa57f78fb1c2cfb7572a3c842801" to "6186c9f5501ce9411fcf6d53d88a9b331b15568c"



---

archive/issue_comments_249645.json:
```json
{
    "body": "<a id='comment:35'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[34ed393](https://github.com/sagemath/sagetrac-mirror/commit/34ed393094e7f2c98f23e8a6ac8d98d7205d076d)|`Merge branch 'develop' into t/15714/public/ticket/15714`|\n|[6186c9f](https://github.com/sagemath/sagetrac-mirror/commit/6186c9f5501ce9411fcf6d53d88a9b331b15568c)|`Merge branch 'develop' into t/15714/public/ticket/15714; fix deprecated code`|",
    "created_at": "2015-02-05T16:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249645",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[34ed393](https://github.com/sagemath/sagetrac-mirror/commit/34ed393094e7f2c98f23e8a6ac8d98d7205d076d)|`Merge branch 'develop' into t/15714/public/ticket/15714`|
|[6186c9f](https://github.com/sagemath/sagetrac-mirror/commit/6186c9f5501ce9411fcf6d53d88a9b331b15568c)|`Merge branch 'develop' into t/15714/public/ticket/15714; fix deprecated code`|



---

archive/issue_comments_249646.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [mmezzarobba](#comment%3A34):\n> I don't think that's how sage objects are supposed to behave! I'd expect the result of `1+s` not do depend on the order.\n\nTell you what: I'm working incrementally. I won't add the feature unless you review what is already there.",
    "created_at": "2015-02-05T16:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249646",
    "user": "https://github.com/rwst"
}
```

<a id='comment:36'></a>
Replying to [mmezzarobba](#comment%3A34):
> I don't think that's how sage objects are supposed to behave! I'd expect the result of `1+s` not do depend on the order.

Tell you what: I'm working incrementally. I won't add the feature unless you review what is already there.



---

archive/issue_comments_249647.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [rws](#comment%3A36):\n> Replying to [mmezzarobba](#comment%3A34):\n> > I don't think that's how sage objects are supposed to behave! I'd expect the result of `1+s` not do depend on the order.\n\n> Tell you what: I'm working incrementally. I won't add the feature unless you review what is already there.\n\nI'm not interested in just reviewing what is already there because I don't feel able to judge whether it's a step towards a proper solution or in the wrong direction. I would be interested in implementing the parent myself (and review your commits along the way) if I have time--but that's a big if, unfortunately.",
    "created_at": "2015-02-05T16:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249647",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:37'></a>
Replying to [rws](#comment%3A36):
> Replying to [mmezzarobba](#comment%3A34):
> > I don't think that's how sage objects are supposed to behave! I'd expect the result of `1+s` not do depend on the order.

> Tell you what: I'm working incrementally. I won't add the feature unless you review what is already there.

I'm not interested in just reviewing what is already there because I don't feel able to judge whether it's a step towards a proper solution or in the wrong direction. I would be interested in implementing the parent myself (and review your commits along the way) if I have time--but that's a big if, unfortunately.



---

archive/issue_comments_249648.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [mmezzarobba](#comment%3A37):\n>I would be interested in implementing the parent myself...\n\nYou have my support for that.",
    "created_at": "2015-02-05T16:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249648",
    "user": "https://github.com/rwst"
}
```

<a id='comment:38'></a>
Replying to [mmezzarobba](#comment%3A37):
>I would be interested in implementing the parent myself...

You have my support for that.



---

archive/issue_comments_249649.json:
```json
{
    "body": "Changing commit from \"6186c9f5501ce9411fcf6d53d88a9b331b15568c\" to \"4787c030ffbd81d04c61ea2c525064c5a5dffed1\"",
    "created_at": "2015-03-22T15:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6186c9f5501ce9411fcf6d53d88a9b331b15568c" to "4787c030ffbd81d04c61ea2c525064c5a5dffed1"



---

archive/issue_comments_249650.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[43f3c05](https://github.com/sagemath/sagetrac-mirror/commit/43f3c058f82bc9ee80b63082ada60603b3b99ae1)|`Merge branch 'develop' into t/15714/public/ticket/15714`|\n|[4787c03](https://github.com/sagemath/sagetrac-mirror/commit/4787c030ffbd81d04c61ea2c525064c5a5dffed1)|`15714: non-ascii in literature, huh why not?`|",
    "created_at": "2015-03-22T15:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249650",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[43f3c05](https://github.com/sagemath/sagetrac-mirror/commit/43f3c058f82bc9ee80b63082ada60603b3b99ae1)|`Merge branch 'develop' into t/15714/public/ticket/15714`|
|[4787c03](https://github.com/sagemath/sagetrac-mirror/commit/4787c030ffbd81d04c61ea2c525064c5a5dffed1)|`15714: non-ascii in literature, huh why not?`|



---

archive/issue_comments_249651.json:
```json
{
    "body": "<a id='comment:40'></a>\nHi,\n\nI just came across this code and I'm willing to review/fix whatever is left cause I would really like to see that into Sage! \n\nI do agree with the comments on the parent. I find it really weird that the parent is the fraction field. Look at this:\n\n\n```\nsage: R.<x> = QQ[]\nsage: fibo = CFiniteSequence(x/(1-x-x^2))\nsage: f = x/(1-x-x^2)\nsage: f == fibo\nTrue\nsage: fibo == f\nTraceback (most recent call last):\n...\nAttributeError: 'FractionFieldElement_1poly_field' object has no attribute 'ogf'\n```\n\nActually, do we really need the CFiniteSequence to extend FractionFieldElement? What method do we use from FractionFieldElement? It seems to me that even if a sequence is represented by a fraction, they are two complete different objects.",
    "created_at": "2015-06-01T22:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249651",
    "user": "https://github.com/VivianePons"
}
```

<a id='comment:40'></a>
Hi,

I just came across this code and I'm willing to review/fix whatever is left cause I would really like to see that into Sage! 

I do agree with the comments on the parent. I find it really weird that the parent is the fraction field. Look at this:


```
sage: R.<x> = QQ[]
sage: fibo = CFiniteSequence(x/(1-x-x^2))
sage: f = x/(1-x-x^2)
sage: f == fibo
True
sage: fibo == f
Traceback (most recent call last):
...
AttributeError: 'FractionFieldElement_1poly_field' object has no attribute 'ogf'
```

Actually, do we really need the CFiniteSequence to extend FractionFieldElement? What method do we use from FractionFieldElement? It seems to me that even if a sequence is represented by a fraction, they are two complete different objects.



---

archive/issue_comments_249652.json:
```json
{
    "body": "<a id='comment:41'></a>\nYou're welcome. This was my early attempt at parenting Sage objects, so there is no particular reason for any oddities. Meanwhile I found that the `guess` algorithm `\"sage\"` is less general than `\"pari\"` so you might want to change the default, too. I'll gladly review any additions you make.",
    "created_at": "2015-06-02T07:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249652",
    "user": "https://github.com/rwst"
}
```

<a id='comment:41'></a>
You're welcome. This was my early attempt at parenting Sage objects, so there is no particular reason for any oddities. Meanwhile I found that the `guess` algorithm `"sage"` is less general than `"pari"` so you might want to change the default, too. I'll gladly review any additions you make.



---

archive/issue_comments_249653.json:
```json
{
    "body": "<a id='comment:42'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|\n|[b8c7b81](https://github.com/sagemath/sagetrac-mirror/commit/b8c7b8172fdadf3338dbb46a6fd2430195d0ac0e)|`Merge remote-tracking branch 'origin/public/ticket/15714' into local-15714`|\n|[504eb03](https://github.com/sagemath/sagetrac-mirror/commit/504eb03cb625675b1e431bb20ebeb9a414b03ad0)|`Changing the structure so that CFiniteSequences get a proper parent.`|",
    "created_at": "2015-06-05T22:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
|[b8c7b81](https://github.com/sagemath/sagetrac-mirror/commit/b8c7b8172fdadf3338dbb46a6fd2430195d0ac0e)|`Merge remote-tracking branch 'origin/public/ticket/15714' into local-15714`|
|[504eb03](https://github.com/sagemath/sagetrac-mirror/commit/504eb03cb625675b1e431bb20ebeb9a414b03ad0)|`Changing the structure so that CFiniteSequences get a proper parent.`|



---

archive/issue_comments_249654.json:
```json
{
    "body": "Changing commit from \"4787c030ffbd81d04c61ea2c525064c5a5dffed1\" to \"504eb03cb625675b1e431bb20ebeb9a414b03ad0\"",
    "created_at": "2015-06-05T22:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4787c030ffbd81d04c61ea2c525064c5a5dffed1" to "504eb03cb625675b1e431bb20ebeb9a414b03ad0"



---

archive/issue_comments_249655.json:
```json
{
    "body": "<a id='comment:43'></a>\nI have changed the architecture so that C-Finite Sequences are no longer sub classes of fraction field elements. Instead, they just store the ogf and belong to their own ring with a proper parent and everything.\n\nI think the new implementation is much cleaner and it's addressing the issues that had been raised before: the behavior and coercions are much more consistent.\n\nAlso, it actually makes things easy for the user as you can write directly\n\n\n```\nsage: CFiniteSequence(1+x)\nFinite sequence [1, 1], offset = 0\n```\n\neven if `x` is a symbolic variable, it gets transformed into a proper fraction field element and the result still has the right parent and everything.\n\nSomeone can start reviewing my changes, rws I guess and also mmezzarobba (or whoever wants to look at it). \n\nI still haven't recompiled the doc but I will do shortly.",
    "created_at": "2015-06-05T22:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249655",
    "user": "https://github.com/VivianePons"
}
```

<a id='comment:43'></a>
I have changed the architecture so that C-Finite Sequences are no longer sub classes of fraction field elements. Instead, they just store the ogf and belong to their own ring with a proper parent and everything.

I think the new implementation is much cleaner and it's addressing the issues that had been raised before: the behavior and coercions are much more consistent.

Also, it actually makes things easy for the user as you can write directly


```
sage: CFiniteSequence(1+x)
Finite sequence [1, 1], offset = 0
```

even if `x` is a symbolic variable, it gets transformed into a proper fraction field element and the result still has the right parent and everything.

Someone can start reviewing my changes, rws I guess and also mmezzarobba (or whoever wants to look at it). 

I still haven't recompiled the doc but I will do shortly.



---

archive/issue_comments_249656.json:
```json
{
    "body": "Changing author from \"Ralf Stephan\" to \"Ralf Stephan, Viviane Pons\"",
    "created_at": "2015-06-05T22:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249656",
    "user": "https://github.com/VivianePons"
}
```

Changing author from "Ralf Stephan" to "Ralf Stephan, Viviane Pons"



---

archive/issue_comments_249657.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[f1eebe7](https://github.com/sagemath/sagetrac-mirror/commit/f1eebe73152283061a1366abc2a7839325febae7)|`Fixing doc and tests`|",
    "created_at": "2015-06-05T23:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249657",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[f1eebe7](https://github.com/sagemath/sagetrac-mirror/commit/f1eebe73152283061a1366abc2a7839325febae7)|`Fixing doc and tests`|



---

archive/issue_comments_249658.json:
```json
{
    "body": "Changing commit from \"504eb03cb625675b1e431bb20ebeb9a414b03ad0\" to \"f1eebe73152283061a1366abc2a7839325febae7\"",
    "created_at": "2015-06-05T23:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249658",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "504eb03cb625675b1e431bb20ebeb9a414b03ad0" to "f1eebe73152283061a1366abc2a7839325febae7"



---

archive/issue_comments_249659.json:
```json
{
    "body": "Changing commit from \"f1eebe73152283061a1366abc2a7839325febae7\" to \"a31adf78dc4a728de6845dd671521c4d771d3ab2\"",
    "created_at": "2015-06-06T07:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f1eebe73152283061a1366abc2a7839325febae7" to "a31adf78dc4a728de6845dd671521c4d771d3ab2"



---

archive/issue_comments_249660.json:
```json
{
    "body": "<a id='comment:45'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[f8906ca](https://github.com/sagemath/sagetrac-mirror/commit/f8906ca4c58fcd0f718d1398387922dbff48cd5a)|`Merge branch 'develop' into t/15714/public/ticket/15714`|\n|[a31adf7](https://github.com/sagemath/sagetrac-mirror/commit/a31adf78dc4a728de6845dd671521c4d771d3ab2)|`15714: fix shortcomings of default guessing method`|",
    "created_at": "2015-06-06T07:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[f8906ca](https://github.com/sagemath/sagetrac-mirror/commit/f8906ca4c58fcd0f718d1398387922dbff48cd5a)|`Merge branch 'develop' into t/15714/public/ticket/15714`|
|[a31adf7](https://github.com/sagemath/sagetrac-mirror/commit/a31adf78dc4a728de6845dd671521c4d771d3ab2)|`15714: fix shortcomings of default guessing method`|



---

archive/issue_comments_249661.json:
```json
{
    "body": "<a id='comment:46'></a>\nNice work! I think this is fine. So someone just needs to look over this last commit, where I fixed the default guessing method. Also, since you while adapting the original code also reviewed it, you should insert your name in the Reviewers field.\n\nHaving this finally in mainstream Sage would motivate me to complete the already existing code for automated closed form output.",
    "created_at": "2015-06-06T07:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249661",
    "user": "https://github.com/rwst"
}
```

<a id='comment:46'></a>
Nice work! I think this is fine. So someone just needs to look over this last commit, where I fixed the default guessing method. Also, since you while adapting the original code also reviewed it, you should insert your name in the Reviewers field.

Having this finally in mainstream Sage would motivate me to complete the already existing code for automated closed form output.



---

archive/issue_comments_249662.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Ralf Stephan\"",
    "created_at": "2015-06-06T07:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249662",
    "user": "https://github.com/rwst"
}
```

Changing reviewer from "" to "Ralf Stephan"



---

archive/issue_comments_249663.json:
```json
{
    "body": "<a id='comment:47'></a>\nLuca should be Lucas, I think.\n\nI have also noted some alignement problems at the beginning of\n`class CFiniteSequence(FieldElement)`",
    "created_at": "2015-06-06T07:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249663",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:47'></a>
Luca should be Lucas, I think.

I have also noted some alignement problems at the beginning of
`class CFiniteSequence(FieldElement)`



---

archive/issue_comments_249664.json:
```json
{
    "body": "Changing commit from \"a31adf78dc4a728de6845dd671521c4d771d3ab2\" to \"a0aba76ccc6636ca0acb61fbcbde69fe5e1f16f9\"",
    "created_at": "2015-06-06T07:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a31adf78dc4a728de6845dd671521c4d771d3ab2" to "a0aba76ccc6636ca0acb61fbcbde69fe5e1f16f9"



---

archive/issue_comments_249665.json:
```json
{
    "body": "<a id='comment:48'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[a0aba76](https://github.com/sagemath/sagetrac-mirror/commit/a0aba76ccc6636ca0acb61fbcbde69fe5e1f16f9)|`15714: cosmetics`|",
    "created_at": "2015-06-06T07:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249665",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[a0aba76](https://github.com/sagemath/sagetrac-mirror/commit/a0aba76ccc6636ca0acb61fbcbde69fe5e1f16f9)|`15714: cosmetics`|



---

archive/issue_events_060409.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-06-06T16:23:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15714#event-60409"
}
```



---

archive/issue_events_060410.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-06-06T16:23:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15714#event-60410"
}
```



---

archive/issue_comments_249666.json:
```json
{
    "body": "<a id='comment:49'></a>\nplease use `....:` for doctest continuation (see patchbot report)",
    "created_at": "2015-06-06T16:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249666",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:49'></a>
please use `....:` for doctest continuation (see patchbot report)



---

archive/issue_comments_249667.json:
```json
{
    "body": "<a id='comment:50'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[f81de8b](https://github.com/sagemath/sagetrac-mirror/commit/f81de8b0757027bdd00357aca55bf67799633803)|`15714: cosmetics`|",
    "created_at": "2015-06-07T06:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[f81de8b](https://github.com/sagemath/sagetrac-mirror/commit/f81de8b0757027bdd00357aca55bf67799633803)|`15714: cosmetics`|



---

archive/issue_comments_249668.json:
```json
{
    "body": "Changing commit from \"a0aba76ccc6636ca0acb61fbcbde69fe5e1f16f9\" to \"f81de8b0757027bdd00357aca55bf67799633803\"",
    "created_at": "2015-06-07T06:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249668",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a0aba76ccc6636ca0acb61fbcbde69fe5e1f16f9" to "f81de8b0757027bdd00357aca55bf67799633803"



---

archive/issue_comments_249669.json:
```json
{
    "body": "<a id='comment:51'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[84c909d](https://github.com/sagemath/sagetrac-mirror/commit/84c909de109ee7c78cfd07eb320c71d364b8e25a)|`Fixing a doc output`|",
    "created_at": "2015-06-09T16:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                     |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[84c909d](https://github.com/sagemath/sagetrac-mirror/commit/84c909de109ee7c78cfd07eb320c71d364b8e25a)|`Fixing a doc output`|



---

archive/issue_comments_249670.json:
```json
{
    "body": "Changing commit from \"f81de8b0757027bdd00357aca55bf67799633803\" to \"84c909de109ee7c78cfd07eb320c71d364b8e25a\"",
    "created_at": "2015-06-09T16:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f81de8b0757027bdd00357aca55bf67799633803" to "84c909de109ee7c78cfd07eb320c71d364b8e25a"



---

archive/issue_comments_249671.json:
```json
{
    "body": "<a id='comment:52'></a>\nI've recompiled the doc and tests and everything seems fine now. The problems reported by Chapoton have been fixed. From my point of view, this is all good. Maybe someone else could give green flag? Anyway, if nobody complains in the near future, I'll move this to positive review.",
    "created_at": "2015-06-09T16:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249671",
    "user": "https://github.com/VivianePons"
}
```

<a id='comment:52'></a>
I've recompiled the doc and tests and everything seems fine now. The problems reported by Chapoton have been fixed. From my point of view, this is all good. Maybe someone else could give green flag? Anyway, if nobody complains in the near future, I'll move this to positive review.



---

archive/issue_comments_249672.json:
```json
{
    "body": "<a id='comment:53'></a>\nAs you are positive, and your own last commit is fine, and a recent patchbot run passed, I'll set positive myself. Please add yourself to the reviewers, too. Marc?",
    "created_at": "2015-06-09T16:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249672",
    "user": "https://github.com/rwst"
}
```

<a id='comment:53'></a>
As you are positive, and your own last commit is fine, and a recent patchbot run passed, I'll set positive myself. Please add yourself to the reviewers, too. Marc?



---

archive/issue_comments_249673.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-09T16:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249673",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_249674.json:
```json
{
    "body": "Changing reviewer from \"Ralf Stephan\" to \"Ralf Stephan, Viviane Pons\"",
    "created_at": "2015-06-09T16:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249674",
    "user": "https://github.com/VivianePons"
}
```

Changing reviewer from "Ralf Stephan" to "Ralf Stephan, Viviane Pons"



---

archive/issue_comments_249675.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [rws](#comment%3A53):\n> As you are positive, and your own last commit is fine, and a recent patchbot run passed, I'll set positive myself. Please add yourself to the reviewers, too. Marc?\n\n\nSorry, I don't have time to have a look now. But if you both are happy with the current code, I guess all is fine!",
    "created_at": "2015-06-09T16:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249675",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:55'></a>
Replying to [rws](#comment%3A53):
> As you are positive, and your own last commit is fine, and a recent patchbot run passed, I'll set positive myself. Please add yourself to the reviewers, too. Marc?


Sorry, I don't have time to have a look now. But if you both are happy with the current code, I guess all is fine!



---

archive/issue_comments_249676.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-11T13:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249676",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060411.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-11T13:51:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15714#event-60411"
}
```



---

archive/issue_comments_249677.json:
```json
{
    "body": "Changing branch from \"public/ticket/15714\" to \"84c909de109ee7c78cfd07eb320c71d364b8e25a\"",
    "created_at": "2015-06-11T13:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15714#issuecomment-249677",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/ticket/15714" to "84c909de109ee7c78cfd07eb320c71d364b8e25a"
