# Issue 15573: (co)product coercion

archive/issues_015336.json:
```json
{
    "assignees": [],
    "body": "In a bialgebra, that is not obvious there exists *a_realization*\nsuch that implements (easily) the product and the coproduct.\n\nSo I propose a coercion method that try to find automatically\na realization which has the implementation of the (co)product.\n\nCheers,\n\nJean-Baptiste Priez\n\nCC:  @kevindilks\n\nBranch/Commit: **[u/elixyre/ticket/15573](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/ticket/15573) @ [f54c2e9](https://github.com/sagemath/sagetrac-mirror/commit/f54c2e9db4e546d721f97c09b33f95ef9948a801)**\n\nComponent: **categories**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15573_\n\n",
    "created_at": "2013-12-23T14:18:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20categories",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "(co)product coercion",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/15573",
    "user": "https://github.com/sagetrac-elixyre"
}
```
In a bialgebra, that is not obvious there exists *a_realization*
such that implements (easily) the product and the coproduct.

So I propose a coercion method that try to find automatically
a realization which has the implementation of the (co)product.

Cheers,

Jean-Baptiste Priez

CC:  @kevindilks

Branch/Commit: **[u/elixyre/ticket/15573](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/ticket/15573) @ [f54c2e9](https://github.com/sagemath/sagetrac-mirror/commit/f54c2e9db4e546d721f97c09b33f95ef9948a801)**

Component: **categories**

_Issue created by migration from https://trac.sagemath.org/ticket/15573_





---

archive/issue_events_221983.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-12-23T14:18:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221983"
}
```



---

archive/issue_events_221984.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-12-23T14:18:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20categories",
    "label_color": "0000ff",
    "label_name": "c: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221984"
}
```



---

archive/issue_events_221985.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-12-23T14:18:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221985"
}
```



---

archive/issue_events_221986.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-12-23T14:18:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221986"
}
```



---

archive/issue_comments_194799.json:
```json
{
    "body": "Branch: **[u/elixyre/ticket/15573](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/ticket/15573)**",
    "created_at": "2013-12-23T20:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194799",
    "user": "https://github.com/sagetrac-elixyre"
}
```

Branch: **[u/elixyre/ticket/15573](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/ticket/15573)**



---

archive/issue_comments_194800.json:
```json
{
    "body": "Commit: **[76f2827](https://github.com/sagemath/sagetrac-mirror/commit/76f28279aed8534bcdfb14f8f7c7845598b3a50e)**",
    "created_at": "2013-12-23T21:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194800",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[76f2827](https://github.com/sagemath/sagetrac-mirror/commit/76f28279aed8534bcdfb14f8f7c7845598b3a50e)**



---

archive/issue_comments_194801.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76f2827\">76f2827</a></td><td><code>ticket 15573</code></td></tr></table>\n",
    "created_at": "2013-12-23T21:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194801",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76f2827">76f2827</a></td><td><code>ticket 15573</code></td></tr></table>




---

archive/issue_events_221987.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2013-12-23T21:07:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221987"
}
```



---

archive/issue_comments_194802.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI think whatever is returned by `a_realization()` should have a (co)product/antipode/etc. methods implemented. If not, the code should call the \"best\" realization to do the computations in by overwriting the respective `*_by_coercion()` in either the realization category or in the parent directly (sometimes [often] the change-of-basis is nontrivial as well). Although this requirement that `a_realization()` has a concrete implementation of the operation methods (or it's elements) is not stated and it should be.\n\nHowever, `+1` that there should be a `*_by_coercion()` in the most general (realization) category that defines that operation. IMO the `coproduct_by_coercion()` method in this ticket should go in `Coalgebras`, in which `coproduct()` will need some tweaks since it seems to be assuming a basis. Similarly `product_by_coercion()` is inherited from the `Magmas` category and is redundant.\n\nBest,\n\nTravis",
    "created_at": "2013-12-24T23:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194802",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

I think whatever is returned by `a_realization()` should have a (co)product/antipode/etc. methods implemented. If not, the code should call the "best" realization to do the computations in by overwriting the respective `*_by_coercion()` in either the realization category or in the parent directly (sometimes [often] the change-of-basis is nontrivial as well). Although this requirement that `a_realization()` has a concrete implementation of the operation methods (or it's elements) is not stated and it should be.

However, `+1` that there should be a `*_by_coercion()` in the most general (realization) category that defines that operation. IMO the `coproduct_by_coercion()` method in this ticket should go in `Coalgebras`, in which `coproduct()` will need some tweaks since it seems to be assuming a basis. Similarly `product_by_coercion()` is inherited from the `Magmas` category and is redundant.

Best,

Travis



---

archive/issue_events_221988.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221988"
}
```



---

archive/issue_events_221989.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221989"
}
```



---

archive/issue_events_221990.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221990"
}
```



---

archive/issue_events_221991.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221991"
}
```



---

archive/issue_events_221992.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-06T17:28:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221992"
}
```



---

archive/issue_events_221993.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-06T17:28:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221993"
}
```



---

archive/issue_comments_194803.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI experimented a bit with running a patchbot; it chose this ticket and discovered a doctest failure in `hopf_algebras.py` due to an undefined name `left`.  Independently, Travis's [comment:4](#comment:4) also seems to mean this needs work.",
    "created_at": "2014-05-06T17:28:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194803",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:7" align="right">comment:7</div>

I experimented a bit with running a patchbot; it chose this ticket and discovered a doctest failure in `hopf_algebras.py` due to an undefined name `left`.  Independently, Travis's [comment:4](#comment:4) also seems to mean this needs work.



---

archive/issue_comments_194804.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/827824294b0a304de5c431eadf474803580e6d19\">8278242</a></td><td><code>Merge branch 'CHA/prod_cop_coerc/15573' into CHA/coprod_coercion</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f54c2e9db4e546d721f97c09b33f95ef9948a801\">f54c2e9</a></td><td><code>Ticket 15573: fix antipode_by_coercion</code></td></tr></table>\n",
    "created_at": "2014-07-12T01:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194804",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/827824294b0a304de5c431eadf474803580e6d19">8278242</a></td><td><code>Merge branch 'CHA/prod_cop_coerc/15573' into CHA/coprod_coercion</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f54c2e9db4e546d721f97c09b33f95ef9948a801">f54c2e9</a></td><td><code>Ticket 15573: fix antipode_by_coercion</code></td></tr></table>




---

archive/issue_comments_194805.json:
```json
{
    "body": "Changed commit from **[76f2827](https://github.com/sagemath/sagetrac-mirror/commit/76f28279aed8534bcdfb14f8f7c7845598b3a50e)** to **[f54c2e9](https://github.com/sagemath/sagetrac-mirror/commit/f54c2e9db4e546d721f97c09b33f95ef9948a801)**",
    "created_at": "2014-07-12T01:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194805",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[76f2827](https://github.com/sagemath/sagetrac-mirror/commit/76f28279aed8534bcdfb14f8f7c7845598b3a50e)** to **[f54c2e9](https://github.com/sagemath/sagetrac-mirror/commit/f54c2e9db4e546d721f97c09b33f95ef9948a801)**



---

archive/issue_comments_194806.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n> I think whatever is returned by `a_realization()` should have a (co)product/antipode/etc. methods implemented.\n\nThat point is obvious if we considere algebras or coalgebras... any structure with an unique operations. But with bialgebras, moreover with Hopf algebra, one has several operations and one is may be easier to define in some basis and one other in an other one.\n\nReplying to [@tscrim](#comment:4):\n> If not, the code should call the \"best\" realization to do the computations in by overwriting the respective `*_by_coercion()` in either the realization category or in the parent directly (sometimes [often] the change-of-basis is nontrivial as well). \n\nThat point seems could be correct if we want define code for sage developpers! My opinion is this code should be code for users! That means: I want do my research without say... to compute in a basis of my new Hopf algebra, I don't want spend my time to tell to sage... I  don't have define a specific realization (`a_realization`) for my operations but if I want the product go to find this basis and the coproduct this one... No! I have implement product/coproduct whatever somewhere so do it!\n\nThen if some code add in sage seems to be slow because of that! This code should specify go to this basis.\n\nReplying to [@tscrim](#comment:4):\n> However, `+1` that there should be a `*_by_coercion()` in the most general (realization) category that defines that operation. IMO the `coproduct_by_coercion()` method in this ticket should go in `Coalgebras`, in which `coproduct()` will need some tweaks since it seems to be assuming a basis. Similarly `product_by_coercion()` is inherited from the `Magmas` category and is redundant.\n\nThis code don't have to be in coalgebras or magmas because, for these structures we obviously could define one realization with the unique operation of the structure.\n\nReplying to [@pjbruin](#comment:7):\n> I experimented a bit with running a patchbot; it chose this ticket and discovered a doctest failure in `hopf_algebras.py` due to an undefined name `left`.  \n\nThat is fix\n\nReplying to [@pjbruin](#comment:7):\nIndependently, Travis's [comment:4](#comment:4) also seems to mean this needs work.\n\nI hope I have answered to that part.\n\nCheers, \nJean-Baptiste",
    "created_at": "2014-07-12T01:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194806",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:9" align="right">comment:9</div>

> I think whatever is returned by `a_realization()` should have a (co)product/antipode/etc. methods implemented.

That point is obvious if we considere algebras or coalgebras... any structure with an unique operations. But with bialgebras, moreover with Hopf algebra, one has several operations and one is may be easier to define in some basis and one other in an other one.

Replying to [@tscrim](#comment:4):
> If not, the code should call the "best" realization to do the computations in by overwriting the respective `*_by_coercion()` in either the realization category or in the parent directly (sometimes [often] the change-of-basis is nontrivial as well). 

That point seems could be correct if we want define code for sage developpers! My opinion is this code should be code for users! That means: I want do my research without say... to compute in a basis of my new Hopf algebra, I don't want spend my time to tell to sage... I  don't have define a specific realization (`a_realization`) for my operations but if I want the product go to find this basis and the coproduct this one... No! I have implement product/coproduct whatever somewhere so do it!

Then if some code add in sage seems to be slow because of that! This code should specify go to this basis.

Replying to [@tscrim](#comment:4):
> However, `+1` that there should be a `*_by_coercion()` in the most general (realization) category that defines that operation. IMO the `coproduct_by_coercion()` method in this ticket should go in `Coalgebras`, in which `coproduct()` will need some tweaks since it seems to be assuming a basis. Similarly `product_by_coercion()` is inherited from the `Magmas` category and is redundant.

This code don't have to be in coalgebras or magmas because, for these structures we obviously could define one realization with the unique operation of the structure.

Replying to [@pjbruin](#comment:7):
> I experimented a bit with running a patchbot; it chose this ticket and discovered a doctest failure in `hopf_algebras.py` due to an undefined name `left`.  

That is fix

Replying to [@pjbruin](#comment:7):
Independently, Travis's [comment:4](#comment:4) also seems to mean this needs work.

I hope I have answered to that part.

Cheers, 
Jean-Baptiste



---

archive/issue_events_221994.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2014-07-12T01:40:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221994"
}
```



---

archive/issue_events_221995.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2014-07-12T01:40:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221995"
}
```



---

archive/issue_events_221996.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221996"
}
```



---

archive/issue_events_221997.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221997"
}
```



---

archive/issue_comments_194807.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\none failing doctest, see buildbot report",
    "created_at": "2014-09-07T19:52:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194807",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

one failing doctest, see buildbot report



---

archive/issue_events_221998.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-07T19:52:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221998"
}
```



---

archive/issue_events_221999.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-07T19:52:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-221999"
}
```



---

archive/issue_comments_194808.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nBased on this comment in `hopf_algebra.py` inside antipode_by_coercion:\n\n\n```\n            # TODO:\n            # - Use @conditionally_defined once it's in Sage, for a nicer idiom\n            # - Do the right thing (TM): once we will have proper\n            #   overloaded operators (as in MuPAD-Combinat; see #8900),\n            #   we won't need to specify explicitly to which parent one\n            #   should coerce the input to calculate the antipode; so it\n            #   will be sufficient to put this default implementation in\n            #   HopfAlgebras.ParentMethods.\n```\n\nit sounds like what this ticket is attempting to achieve was originally the goal.\n\nI think this is something worth figuring out eventually, but for the sake of actually getting later features of CHA included in Sage, I'm fine with Travis's suggestion of making `a_realization` always return a product/coproduct/antipode method that's hard-coded to point to a realization where the method is actually defined, rather than having Sage automatically find a realization where the method is actually defined.",
    "created_at": "2015-06-12T16:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15573#issuecomment-194808",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:13" align="right">comment:13</div>

Based on this comment in `hopf_algebra.py` inside antipode_by_coercion:


```
            # TODO:
            # - Use @conditionally_defined once it's in Sage, for a nicer idiom
            # - Do the right thing (TM): once we will have proper
            #   overloaded operators (as in MuPAD-Combinat; see #8900),
            #   we won't need to specify explicitly to which parent one
            #   should coerce the input to calculate the antipode; so it
            #   will be sufficient to put this default implementation in
            #   HopfAlgebras.ParentMethods.
```

it sounds like what this ticket is attempting to achieve was originally the goal.

I think this is something worth figuring out eventually, but for the sake of actually getting later features of CHA included in Sage, I'm fine with Travis's suggestion of making `a_realization` always return a product/coproduct/antipode method that's hard-coded to point to a realization where the method is actually defined, rather than having Sage automatically find a realization where the method is actually defined.



---

archive/issue_events_222000.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15573",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15573#event-222000"
}
```
