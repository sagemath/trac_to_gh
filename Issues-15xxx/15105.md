# Issue 15105: hardwired paths in src/sage

archive/issues_014868.json:
```json
{
    "assignees": [],
    "body": "Several run time paths in the python library are hardwired, in most cases to `$SAGE_LOCAL`.\n`$SAGE_LOCAL` has no meaning outside of Sage (the distribution). So it's better to add them to sage-env.py and make them overridable.\n\nFor example in `libs.singular.singular_init`, the singular shared object is looked for in `$SAGE_LOCAL/lib`.\n\nCC:  @jondo @kiwifb @mkoeppe @dimpase @vbraun @kcrisman @miguelmarco @nbruin\n\nKeywords: **environment, SAGE_LOCAL, hardwired, run time**\n\nBranch: **[45c5dd0](https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Felix Salfelder, Erik Bray, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15105_\n\n",
    "closed_at": "2016-11-07T18:27:20Z",
    "created_at": "2013-08-27T07:25:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "hardwired paths in src/sage",
    "type": "issue",
    "updated_at": "2016-11-08T00:39:40Z",
    "url": "https://github.com/sagemath/sage/issues/15105",
    "user": "https://github.com/sagetrac-felixs"
}
```
Several run time paths in the python library are hardwired, in most cases to `$SAGE_LOCAL`.
`$SAGE_LOCAL` has no meaning outside of Sage (the distribution). So it's better to add them to sage-env.py and make them overridable.

For example in `libs.singular.singular_init`, the singular shared object is looked for in `$SAGE_LOCAL/lib`.

CC:  @jondo @kiwifb @mkoeppe @dimpase @vbraun @kcrisman @miguelmarco @nbruin

Keywords: **environment, SAGE_LOCAL, hardwired, run time**

Branch: **[45c5dd0](https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b)**

Reviewer: **Jeroen Demeyer**

Author: **Felix Salfelder, Erik Bray, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/15105_





---

archive/issue_events_197110.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-08-27T07:25:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197110"
}
```



---

archive/issue_events_197111.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-08-27T07:25:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197111"
}
```



---

archive/issue_events_197112.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-08-27T07:25:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197112"
}
```



---

archive/issue_events_197113.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-08-27T07:25:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197113"
}
```



---

archive/issue_comments_188003.json:
```json
{
    "body": "Commit: **[2cffff8](https://github.com/sagemath/sagetrac-mirror/commit/2cffff84404e4179adc19860b29c5bae9ed80742)**",
    "created_at": "2013-08-27T10:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188003",
    "user": "https://github.com/sagetrac-felixs"
}
```

Commit: **[2cffff8](https://github.com/sagemath/sagetrac-mirror/commit/2cffff84404e4179adc19860b29c5bae9ed80742)**



---

archive/issue_comments_188004.json:
```json
{
    "body": "Branch: **[u/felixs/runtime_paths](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/runtime_paths)**",
    "created_at": "2013-08-27T10:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188004",
    "user": "https://github.com/sagetrac-felixs"
}
```

Branch: **[u/felixs/runtime_paths](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/runtime_paths)**



---

archive/issue_comments_188005.json:
```json
{
    "body": "Dependencies: **#15100**",
    "created_at": "2013-08-27T16:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188005",
    "user": "https://github.com/sagetrac-felixs"
}
```

Dependencies: **#15100**



---

archive/issue_comments_188006.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nRemoved the ipython-sage-location check, as it involves `$SAGE_LOCAL`. Thus dependency on #15100.",
    "created_at": "2013-08-27T16:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188006",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:2" align="right">Comment 2</div>

Removed the ipython-sage-location check, as it involves `$SAGE_LOCAL`. Thus dependency on #15100.



---

archive/issue_comments_188007.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td>[changeset:c19a5f3]</td><td><code>unhardwire sandpile</code></td></tr><tr><td>[changeset:5746289]</td><td><code>unhardwire polymake path</code></td></tr><tr><td>[changeset:8f8a246]</td><td><code>get sage-started.txt from SAGE_ETC</code></td></tr><tr><td>[changeset:ee831c1]</td><td><code>unardwire sage-CSI call in csage</code></td></tr><tr><td>[changeset:16bf607]</td><td><code>initialize SAGE_ETC (from environ) in sage-location before use</code></td></tr></table>\n",
    "created_at": "2013-09-02T14:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188007",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td>[changeset:c19a5f3]</td><td><code>unhardwire sandpile</code></td></tr><tr><td>[changeset:5746289]</td><td><code>unhardwire polymake path</code></td></tr><tr><td>[changeset:8f8a246]</td><td><code>get sage-started.txt from SAGE_ETC</code></td></tr><tr><td>[changeset:ee831c1]</td><td><code>unardwire sage-CSI call in csage</code></td></tr><tr><td>[changeset:16bf607]</td><td><code>initialize SAGE_ETC (from environ) in sage-location before use</code></td></tr></table>




---

archive/issue_comments_188008.json:
```json
{
    "body": "Changed commit from **[2cffff8](https://github.com/sagemath/sagetrac-mirror/commit/2cffff84404e4179adc19860b29c5bae9ed80742)** to **[c19a5f3](https://github.com/sagemath/sagetrac-mirror/commit/c19a5f3e5c8e61bb3e6978c8646288f5094ed1b0)**",
    "created_at": "2013-09-02T14:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188008",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2cffff8](https://github.com/sagemath/sagetrac-mirror/commit/2cffff84404e4179adc19860b29c5bae9ed80742)** to **[c19a5f3](https://github.com/sagemath/sagetrac-mirror/commit/c19a5f3e5c8e61bb3e6978c8646288f5094ed1b0)**



---

archive/issue_comments_188009.json:
```json
{
    "body": "Changed commit from **[c19a5f3](https://github.com/sagemath/sagetrac-mirror/commit/c19a5f3e5c8e61bb3e6978c8646288f5094ed1b0)** to **[591471d](https://github.com/sagemath/sagetrac-mirror/commit/591471ddb968765c4582ed0ccf7ce4e250443c3e)**",
    "created_at": "2013-09-02T21:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188009",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c19a5f3](https://github.com/sagemath/sagetrac-mirror/commit/c19a5f3e5c8e61bb3e6978c8646288f5094ed1b0)** to **[591471d](https://github.com/sagemath/sagetrac-mirror/commit/591471ddb968765c4582ed0ccf7ce4e250443c3e)**



---

archive/issue_comments_188010.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td>[changeset:591471d]</td><td><code>python-sage: whitelist python2.7 multiprocessing in stackframes test</code></td></tr></table>\n",
    "created_at": "2013-09-02T21:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188010",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td>[changeset:591471d]</td><td><code>python-sage: whitelist python2.7 multiprocessing in stackframes test</code></td></tr></table>




---

archive/issue_events_197114.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-09-03T08:20:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197114"
}
```



---

archive/issue_comments_188011.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td>[changeset:0b9cb04]</td><td><code>doctests in src/sage/plot/misc.py</code></td></tr><tr><td>[changeset:1ef62a1]</td><td><code>unhardwire cython.py completed</code></td></tr><tr><td>[changeset:390e28b]</td><td><code>qepcard doctest fix: singular might well be in /usr/bin, not .../local/bin</code></td></tr><tr><td>[changeset:0dcd721]</td><td><code>unhardwire ELLCURVES_DATA_DIR</code></td></tr></table>\n",
    "created_at": "2013-09-06T10:52:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188011",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td>[changeset:0b9cb04]</td><td><code>doctests in src/sage/plot/misc.py</code></td></tr><tr><td>[changeset:1ef62a1]</td><td><code>unhardwire cython.py completed</code></td></tr><tr><td>[changeset:390e28b]</td><td><code>qepcard doctest fix: singular might well be in /usr/bin, not .../local/bin</code></td></tr><tr><td>[changeset:0dcd721]</td><td><code>unhardwire ELLCURVES_DATA_DIR</code></td></tr></table>




---

archive/issue_comments_188012.json:
```json
{
    "body": "Changed commit from **[591471d](https://github.com/sagemath/sagetrac-mirror/commit/591471ddb968765c4582ed0ccf7ce4e250443c3e)** to **[0b9cb04](https://github.com/sagemath/sagetrac-mirror/commit/0b9cb04e432036e47e1fb735f2044b73e4f0ae58)**",
    "created_at": "2013-09-06T10:52:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188012",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[591471d](https://github.com/sagemath/sagetrac-mirror/commit/591471ddb968765c4582ed0ccf7ce4e250443c3e)** to **[0b9cb04](https://github.com/sagemath/sagetrac-mirror/commit/0b9cb04e432036e47e1fb735f2044b73e4f0ae58)**



---

archive/issue_events_197115.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-19T11:59:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197115"
}
```



---

archive/issue_events_197116.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-19T11:59:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197116"
}
```



---

archive/issue_comments_188013.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nNeeds to be rebased. Given that I totally disagree with #15100, preferably this ticket should not depend on that.",
    "created_at": "2013-12-19T11:59:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188013",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">Comment 8</div>

Needs to be rebased. Given that I totally disagree with #15100, preferably this ticket should not depend on that.



---

archive/issue_comments_188014.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@jdemeyer](#comment%3A8):\n> Needs to be rebased. Given that I totally disagree with #15100, preferably this ticket should not depend on that.\n\n#15100 is not too important. particularly for standalone sagelib it doesn't matter. anyhow, the doctest checking the fist line of the ipython (or any other) executable needs to be removed.",
    "created_at": "2013-12-19T12:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188014",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@jdemeyer](#comment%3A8):
> Needs to be rebased. Given that I totally disagree with #15100, preferably this ticket should not depend on that.

#15100 is not too important. particularly for standalone sagelib it doesn't matter. anyhow, the doctest checking the fist line of the ipython (or any other) executable needs to be removed.



---

archive/issue_events_197117.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197117"
}
```



---

archive/issue_events_197118.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197118"
}
```



---

archive/issue_events_197119.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197119"
}
```



---

archive/issue_events_197120.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197120"
}
```



---

archive/issue_events_197121.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197121"
}
```



---

archive/issue_events_197122.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197122"
}
```



---

archive/issue_comments_188015.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nThis patch needs rebasing",
    "created_at": "2016-09-13T22:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188015",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">Comment 15</div>

This patch needs rebasing



---

archive/issue_comments_188016.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faa99e72f8e4edc28f5e34366ee636033ff54976\">faa99e7</a></td><td><code>Merge branch 'master' into runtime_paths</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12f698526f1385923acc5c1b2b0c855ea908e3c1\">12f6985</a></td><td><code>refresh more runtime_paths commits</code></td></tr></table>\n",
    "created_at": "2016-09-15T20:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188016",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16" align="right">Comment 16</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faa99e72f8e4edc28f5e34366ee636033ff54976">faa99e7</a></td><td><code>Merge branch 'master' into runtime_paths</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12f698526f1385923acc5c1b2b0c855ea908e3c1">12f6985</a></td><td><code>refresh more runtime_paths commits</code></td></tr></table>




---

archive/issue_comments_188017.json:
```json
{
    "body": "Changed commit from **[0b9cb04](https://github.com/sagemath/sagetrac-mirror/commit/0b9cb04e432036e47e1fb735f2044b73e4f0ae58)** to **[12f6985](https://github.com/sagemath/sagetrac-mirror/commit/12f698526f1385923acc5c1b2b0c855ea908e3c1)**",
    "created_at": "2016-09-15T20:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188017",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0b9cb04](https://github.com/sagemath/sagetrac-mirror/commit/0b9cb04e432036e47e1fb735f2044b73e4f0ae58)** to **[12f6985](https://github.com/sagemath/sagetrac-mirror/commit/12f698526f1385923acc5c1b2b0c855ea908e3c1)**



---

archive/issue_comments_188018.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8149a85cae9ea41685a0954a8d5b275caef16807\">8149a85</a></td><td><code>Merge 'develop' into runtime_paths</code></td></tr></table>\n",
    "created_at": "2016-09-15T20:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188018",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17" align="right">Comment 17</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8149a85cae9ea41685a0954a8d5b275caef16807">8149a85</a></td><td><code>Merge 'develop' into runtime_paths</code></td></tr></table>




---

archive/issue_comments_188019.json:
```json
{
    "body": "Changed commit from **[12f6985](https://github.com/sagemath/sagetrac-mirror/commit/12f698526f1385923acc5c1b2b0c855ea908e3c1)** to **[8149a85](https://github.com/sagemath/sagetrac-mirror/commit/8149a85cae9ea41685a0954a8d5b275caef16807)**",
    "created_at": "2016-09-15T20:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188019",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[12f6985](https://github.com/sagemath/sagetrac-mirror/commit/12f698526f1385923acc5c1b2b0c855ea908e3c1)** to **[8149a85](https://github.com/sagemath/sagetrac-mirror/commit/8149a85cae9ea41685a0954a8d5b275caef16807)**



---

archive/issue_comments_188020.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nthis is now rebased.\n\ni tried to resolve the conflicts carefully, but i haven't compiled/tested anything. can't do that anytime soon (no time, no hardware).\n\nhth",
    "created_at": "2016-09-15T20:41:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188020",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:18" align="right">Comment 18</div>

this is now rebased.

i tried to resolve the conflicts carefully, but i haven't compiled/tested anything. can't do that anytime soon (no time, no hardware).

hth



---

archive/issue_comments_188021.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nYou still have stuff from old version of sage that are not there anymore. All the files where the diff starts with `/dev/null`. Better get rid of them.",
    "created_at": "2016-09-15T20:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188021",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">Comment 19</div>

You still have stuff from old version of sage that are not there anymore. All the files where the diff starts with `/dev/null`. Better get rid of them.



---

archive/issue_comments_188022.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4846a73aad7cf7361c69a6ae43628b8cae821b9f\">4846a73</a></td><td><code>merge develop into runtime_paths</code></td></tr></table>\n",
    "created_at": "2016-09-15T21:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188022",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4846a73aad7cf7361c69a6ae43628b8cae821b9f">4846a73</a></td><td><code>merge develop into runtime_paths</code></td></tr></table>




---

archive/issue_comments_188023.json:
```json
{
    "body": "Changed commit from **[8149a85](https://github.com/sagemath/sagetrac-mirror/commit/8149a85cae9ea41685a0954a8d5b275caef16807)** to **[4846a73](https://github.com/sagemath/sagetrac-mirror/commit/4846a73aad7cf7361c69a6ae43628b8cae821b9f)**",
    "created_at": "2016-09-15T21:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188023",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8149a85](https://github.com/sagemath/sagetrac-mirror/commit/8149a85cae9ea41685a0954a8d5b275caef16807)** to **[4846a73](https://github.com/sagemath/sagetrac-mirror/commit/4846a73aad7cf7361c69a6ae43628b8cae821b9f)**



---

archive/issue_comments_188024.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nReplying to [@kiwifb](#comment%3A19):\n> Better get rid of them.\n\nthanks. missed that. i took that opportunity to squash the three merges into one.",
    "created_at": "2016-09-15T21:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188024",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:21" align="right">Comment 21</div>

Replying to [@kiwifb](#comment%3A19):
> Better get rid of them.

thanks. missed that. i took that opportunity to squash the three merges into one.



---

archive/issue_comments_188025.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nInstead of `sage.misc.misc`, shouldn't it use `sage.env`?",
    "created_at": "2016-09-15T21:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188025",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">Comment 22</div>

Instead of `sage.misc.misc`, shouldn't it use `sage.env`?



---

archive/issue_comments_188026.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\n\n```\n--- a/src/bin/sage-location\n+++ b/src/bin/sage-location\n@@ -6,6 +6,7 @@ import os, sys, re\n \n SAGE_ROOT     = os.path.realpath(os.environ['SAGE_ROOT'])\n SAGE_LOCAL    = os.environ['SAGE_LOCAL']\n+SAGE_ETC      = os.environ['SAGE_ETC']\n \n location_file = os.path.join(SAGE_LOCAL, 'lib', 'sage-current-location.txt')\n force_file    = os.path.join(SAGE_LOCAL, 'lib', 'sage-force-relocate.txt')\n@@ -215,8 +216,8 @@ def write_config_files():\n     path.\n     \"\"\"\n     # Currently only one file (for the experimental package qepcad):\n-    # $SAGE_ROOT/local/default.qepcadrc\n-    f = open(os.path.join(SAGE_LOCAL, 'default.qepcadrc'), 'w')\n+    # $SAGE_ROOT/local/etc/default.qepcadrc\n+    f = open(os.path.join(SAGE_ETC, 'default.qepcadrc'), 'w')\n     text = \\\n \"\"\"# THIS FILE IS AUTOMATICALLY GENERATED by sage-location -- DO NOT EDIT\n```\nI raised the issue of `qepcadrc` before,but it has to be done in conjunction of fixing the spkg in question.\n\nIn sage-on-gentoo I just got rid of `sage-started.txt` it is one of those appendages that don't really belong anywhere sensible. `/var/lib/sage`?\n\nI am not sure about the catalogue of `DATA_DIR` and `INCLUDE_DIR` (and in line with my previous post `csage` is gone).\n\nDid you know that lib{s,S}ingular is the only file that is dlopen-ed in sage. There should be a better way of getting to it.\n\nDo not ever use `SAGE_SRC` for something that's needed at runtime. I could let go of that for doctesting as you do, but that makes things harder to test in sage-on-gentoo.\n\nOverall I am not overly impressed by the amount of stuff showed in `env.py`. Some of that stuff may also conflict with #20382 which I very much would like to see merged.",
    "created_at": "2016-09-15T21:50:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188026",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">Comment 23</div>


```
--- a/src/bin/sage-location
+++ b/src/bin/sage-location
@@ -6,6 +6,7 @@ import os, sys, re
 
 SAGE_ROOT     = os.path.realpath(os.environ['SAGE_ROOT'])
 SAGE_LOCAL    = os.environ['SAGE_LOCAL']
+SAGE_ETC      = os.environ['SAGE_ETC']
 
 location_file = os.path.join(SAGE_LOCAL, 'lib', 'sage-current-location.txt')
 force_file    = os.path.join(SAGE_LOCAL, 'lib', 'sage-force-relocate.txt')
@@ -215,8 +216,8 @@ def write_config_files():
     path.
     """
     # Currently only one file (for the experimental package qepcad):
-    # $SAGE_ROOT/local/default.qepcadrc
-    f = open(os.path.join(SAGE_LOCAL, 'default.qepcadrc'), 'w')
+    # $SAGE_ROOT/local/etc/default.qepcadrc
+    f = open(os.path.join(SAGE_ETC, 'default.qepcadrc'), 'w')
     text = \
 """# THIS FILE IS AUTOMATICALLY GENERATED by sage-location -- DO NOT EDIT
```
I raised the issue of `qepcadrc` before,but it has to be done in conjunction of fixing the spkg in question.

In sage-on-gentoo I just got rid of `sage-started.txt` it is one of those appendages that don't really belong anywhere sensible. `/var/lib/sage`?

I am not sure about the catalogue of `DATA_DIR` and `INCLUDE_DIR` (and in line with my previous post `csage` is gone).

Did you know that lib{s,S}ingular is the only file that is dlopen-ed in sage. There should be a better way of getting to it.

Do not ever use `SAGE_SRC` for something that's needed at runtime. I could let go of that for doctesting as you do, but that makes things harder to test in sage-on-gentoo.

Overall I am not overly impressed by the amount of stuff showed in `env.py`. Some of that stuff may also conflict with #20382 which I very much would like to see merged.



---

archive/issue_comments_188027.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\n> I raised the issue of qepcadrc before,but it has to be done in conjunction of fixing the spkg in question.\n\nsage_location (whatever it tries to do) should be moved out of sagelib. it's not needed there. i don't remember what qepcadrc was exactly about, but there was headache involved.\n\n> In sage-on-gentoo I just got rid of sage-started.txt\n\nmaybe sage should touch ~/.sage/started instead? this is often writable... does sage-started.txt implement anything useful at all?\n\n> Did you know that lib{s,S}ingular is the only file that is dlopen-ed in sage. There should be a better way of getting to it.\n\nit's hard to get a broken implementation right. iirc theres has never been a technical reason for not just linking. so maybe... just link? (see my ancient comment in env.py).\n\n> Do not ever use SAGE_SRC for something that's needed at runtime. I could let go of that for doctesting as you do, but that makes things harder to test in sage-on-gentoo.\n\nthere is some sort of interactive source browser. how would that work without SAGE_SRC? i think i did this [1] (also installed the source) to fix it.\n\n> stuff showed in env.py\n\ntoo many *DIR variables? true. there are better ways: each extension should have its own configuration (read: should be a standalone package depending on sagelib). i think, we are simply not there yet. cf. [2] for the intended (workaround) implementation.\n\n> #20382 \n\nplease go ahead and finish that first. this ticket was never meant to interfere with #20382.\n\n[1] https://github.com/felix-salfelder/sage/blob/autotools/src/sage/env.py.in#L103\n[2] https://github.com/felix-salfelder/sage/blob/autotools/src/sage/env.py.in#L134",
    "created_at": "2016-09-15T22:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188027",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:24" align="right">Comment 24</div>

> I raised the issue of qepcadrc before,but it has to be done in conjunction of fixing the spkg in question.

sage_location (whatever it tries to do) should be moved out of sagelib. it's not needed there. i don't remember what qepcadrc was exactly about, but there was headache involved.

> In sage-on-gentoo I just got rid of sage-started.txt

maybe sage should touch ~/.sage/started instead? this is often writable... does sage-started.txt implement anything useful at all?

> Did you know that lib{s,S}ingular is the only file that is dlopen-ed in sage. There should be a better way of getting to it.

it's hard to get a broken implementation right. iirc theres has never been a technical reason for not just linking. so maybe... just link? (see my ancient comment in env.py).

> Do not ever use SAGE_SRC for something that's needed at runtime. I could let go of that for doctesting as you do, but that makes things harder to test in sage-on-gentoo.

there is some sort of interactive source browser. how would that work without SAGE_SRC? i think i did this [1] (also installed the source) to fix it.

> stuff showed in env.py

too many *DIR variables? true. there are better ways: each extension should have its own configuration (read: should be a standalone package depending on sagelib). i think, we are simply not there yet. cf. [2] for the intended (workaround) implementation.

> #20382 

please go ahead and finish that first. this ticket was never meant to interfere with #20382.

[1] https://github.com/felix-salfelder/sage/blob/autotools/src/sage/env.py.in#L103
[2] https://github.com/felix-salfelder/sage/blob/autotools/src/sage/env.py.in#L134



---

archive/issue_comments_188028.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@sagetrac-felixs](#comment%3A24):\n> > stuff showed in env.py\n\n> \n> too many *DIR variables? true. there are better ways: each extension should have its own configuration (read: should be a standalone package depending on sagelib). i think, we are simply not there yet. cf. [2] for the intended (workaround) implementation.\n\nI agree with Felix on this. \n\nWe do need lots of these variables, because we no longer want to assume that everything lives in the same prefix hierarchy (\"SAGE_LOCAL\").\n\nWhether these kind of configuration variables should go into env or into another centralized module, is another question.",
    "created_at": "2016-09-15T22:52:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188028",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@sagetrac-felixs](#comment%3A24):
> > stuff showed in env.py

> 
> too many *DIR variables? true. there are better ways: each extension should have its own configuration (read: should be a standalone package depending on sagelib). i think, we are simply not there yet. cf. [2] for the intended (workaround) implementation.

I agree with Felix on this. 

We do need lots of these variables, because we no longer want to assume that everything lives in the same prefix hierarchy ("SAGE_LOCAL").

Whether these kind of configuration variables should go into env or into another centralized module, is another question.



---

archive/issue_comments_188029.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@sagetrac-felixs](#comment%3A24):\n> > I raised the issue of qepcadrc before,but it has to be done in conjunction of fixing the spkg in question.\n\n> \n> sage_location (whatever it tries to do) should be moved out of sagelib. it's not needed there. i don't remember what qepcadrc was exactly about, but there was headache involved.\n> \n> > In sage-on-gentoo I just got rid of sage-started.txt\n\n> \n> maybe sage should touch ~/.sage/started instead? this is often writable... does sage-started.txt implement anything useful at all?\n\nNo, it was introduced as a check by Jeroen (when he was the release manager) to check that sage does starts. So it is produced at the end of the build process and checked and regenerated if missing when sage is started.\n\n> \n> > Did you know that lib{s,S}ingular is the only file that is dlopen-ed in sage. There should be a better way of getting to it.\n\n> \n> it's hard to get a broken implementation right. iirc theres has never been a technical reason for not just linking. so maybe... just link? (see my ancient comment in env.py).\n\nThat a novel idea :) but even the singular4 ticket isn't going there.\n\n> \n> > Do not ever use SAGE_SRC for something that's needed at runtime. I could let go of that for doctesting as you do, but that makes things harder to test in sage-on-gentoo.\n\n> \n> there is some sort of interactive source browser. how would that work without SAGE_SRC? i think i did this [1] (also installed the source) to fix it.\n\nI don't really know what that does. Never used it. So in sage-on-gentoo `SAGE_SRC` points to `/usr/lib{,64}/python2.7/site-packages/sage` and I install the necessary `pxd` and `pyx` to run test. So that probably works. But my attitude on that is that the source shouldn't be considered available at runtime and of course you should be able to run tests before installing. The possibility of doing the last bit is shot down by #21221.\n \n> \n> > stuff showed in env.py\n\n> \n> too many *DIR variables? true. there are better ways: each extension should have its own configuration (read: should be a standalone package depending on sagelib). i think, we are simply not there yet. cf. [2] for the intended (workaround) implementation.\n> \n> > #20382 \n\n> \n> please go ahead and finish that first. this ticket was never meant to interfere with #20382.\n> \n> [1] https://github.com/felix-salfelder/sage/blob/autotools/src/sage/env.py.in#L103\n> [2] https://github.com/felix-salfelder/sage/blob/autotools/src/sage/env.py.in#L134\n\nYes I guess if you are thinking of a modular approach where components can be installed anywhere on the system, like hashdist or spack, you want to use variable like CPATH and LIBRARY_PATH, set when you load the components in the environment. Stuff under SAGE_LOCAL/share is still an issue in that case.\n\nOn a system like sage-on-gentoo where things still live under a single prefix (but is a more conventional one) keeping SAGE_LOCAL is not a big deal. Apart from `etc` I just use it like it was `--prefix=/usr`.",
    "created_at": "2016-09-15T23:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188029",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@sagetrac-felixs](#comment%3A24):
> > I raised the issue of qepcadrc before,but it has to be done in conjunction of fixing the spkg in question.

> 
> sage_location (whatever it tries to do) should be moved out of sagelib. it's not needed there. i don't remember what qepcadrc was exactly about, but there was headache involved.
> 
> > In sage-on-gentoo I just got rid of sage-started.txt

> 
> maybe sage should touch ~/.sage/started instead? this is often writable... does sage-started.txt implement anything useful at all?

No, it was introduced as a check by Jeroen (when he was the release manager) to check that sage does starts. So it is produced at the end of the build process and checked and regenerated if missing when sage is started.

> 
> > Did you know that lib{s,S}ingular is the only file that is dlopen-ed in sage. There should be a better way of getting to it.

> 
> it's hard to get a broken implementation right. iirc theres has never been a technical reason for not just linking. so maybe... just link? (see my ancient comment in env.py).

That a novel idea :) but even the singular4 ticket isn't going there.

> 
> > Do not ever use SAGE_SRC for something that's needed at runtime. I could let go of that for doctesting as you do, but that makes things harder to test in sage-on-gentoo.

> 
> there is some sort of interactive source browser. how would that work without SAGE_SRC? i think i did this [1] (also installed the source) to fix it.

I don't really know what that does. Never used it. So in sage-on-gentoo `SAGE_SRC` points to `/usr/lib{,64}/python2.7/site-packages/sage` and I install the necessary `pxd` and `pyx` to run test. So that probably works. But my attitude on that is that the source shouldn't be considered available at runtime and of course you should be able to run tests before installing. The possibility of doing the last bit is shot down by #21221.
 
> 
> > stuff showed in env.py

> 
> too many *DIR variables? true. there are better ways: each extension should have its own configuration (read: should be a standalone package depending on sagelib). i think, we are simply not there yet. cf. [2] for the intended (workaround) implementation.
> 
> > #20382 

> 
> please go ahead and finish that first. this ticket was never meant to interfere with #20382.
> 
> [1] https://github.com/felix-salfelder/sage/blob/autotools/src/sage/env.py.in#L103
> [2] https://github.com/felix-salfelder/sage/blob/autotools/src/sage/env.py.in#L134

Yes I guess if you are thinking of a modular approach where components can be installed anywhere on the system, like hashdist or spack, you want to use variable like CPATH and LIBRARY_PATH, set when you load the components in the environment. Stuff under SAGE_LOCAL/share is still an issue in that case.

On a system like sage-on-gentoo where things still live under a single prefix (but is a more conventional one) keeping SAGE_LOCAL is not a big deal. Apart from `etc` I just use it like it was `--prefix=/usr`.



---

archive/issue_comments_188030.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@kiwifb](#comment%3A26):\n\ni appreciate your clear reply. but i'm out of time. maybe next week.",
    "created_at": "2016-09-15T23:21:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188030",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@kiwifb](#comment%3A26):

i appreciate your clear reply. but i'm out of time. maybe next week.



---

archive/issue_comments_188031.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nAbout `sage-started.txt`: it has two purposes:\n\n1. Check that Sage starts.\n\n2. Initialize any files which should be initialized at build time (this includes running `sage-location` and generating `.pyc` files). See #11926.",
    "created_at": "2016-09-16T14:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188031",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">Comment 28</div>

About `sage-started.txt`: it has two purposes:

1. Check that Sage starts.

2. Initialize any files which should be initialized at build time (this includes running `sage-location` and generating `.pyc` files). See #11926.



---

archive/issue_comments_188032.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nRegarding\n\n```\n# hmm, who is going to create sage_started if SAGE_ETC is readonly?\n```\n\nThis isn't going to happen since this file should be written only by the build process. At that point, `SAGE_ETC` should be writable.\n\nSo please remove this comment.",
    "created_at": "2016-09-16T14:49:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188032",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">Comment 29</div>

Regarding

```
# hmm, who is going to create sage_started if SAGE_ETC is readonly?
```

This isn't going to happen since this file should be written only by the build process. At that point, `SAGE_ETC` should be writable.

So please remove this comment.



---

archive/issue_comments_188033.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nWhat is the point of this?\n\n```\n    # Do nothing if the file already exists\n    if os.path.isfile(started_file):\n        return\n```\n`make` expects the timestamp to be updated.",
    "created_at": "2016-09-16T14:50:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188033",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">Comment 30</div>

What is the point of this?

```
    # Do nothing if the file already exists
    if os.path.isfile(started_file):
        return
```
`make` expects the timestamp to be updated.



---

archive/issue_comments_188034.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nsage_started is now in #21510",
    "created_at": "2016-09-16T23:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188034",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:31" align="right">Comment 31</div>

sage_started is now in #21510



---

archive/issue_comments_188035.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nOK, best to remove anything about sage_started from the present ticket's branch then.",
    "created_at": "2016-09-16T23:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188035",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">Comment 32</div>

OK, best to remove anything about sage_started from the present ticket's branch then.



---

archive/issue_comments_188036.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nsage_location now is #21511.",
    "created_at": "2016-09-16T23:15:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188036",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:33" align="right">Comment 33</div>

sage_location now is #21511.



---

archive/issue_events_197123.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-17T04:57:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197123"
}
```



---

archive/issue_events_197124.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-17T04:57:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197124"
}
```



---

archive/issue_comments_188037.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nSee also #21591.",
    "created_at": "2016-09-24T23:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188037",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">Comment 35</div>

See also #21591.



---

archive/issue_comments_188038.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nDefinitely agree that none of Sage's external dependencies should be assumed to live under the same prefix.  I think it's fine for the sake of using Sage-the-distribution to have defaults that assume everything is under `$SAGE_LOCAL`, but all these paths should be easy for system integrator to change (it might nice to even have a simple config file read at build time).",
    "created_at": "2016-09-29T13:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188038",
    "user": "https://github.com/embray"
}
```

<div id="comment:36" align="right">Comment 36</div>

Definitely agree that none of Sage's external dependencies should be assumed to live under the same prefix.  I think it's fine for the sake of using Sage-the-distribution to have defaults that assume everything is under `$SAGE_LOCAL`, but all these paths should be easy for system integrator to change (it might nice to even have a simple config file read at build time).



---

archive/issue_comments_188039.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nI rebased this properly on top of develop, rather than trying to merge develop into it, if anyone would like to have a look.  I think I got everything right but I might be missing one or two things.  I'm not sure what to do with the new `SAGE_MAXIMA_INIT` this adds.",
    "created_at": "2016-09-29T14:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188039",
    "user": "https://github.com/embray"
}
```

<div id="comment:37" align="right">Comment 37</div>

I rebased this properly on top of develop, rather than trying to merge develop into it, if anyone would like to have a look.  I think I got everything right but I might be missing one or two things.  I'm not sure what to do with the new `SAGE_MAXIMA_INIT` this adds.



---

archive/issue_comments_188040.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nReplying to [@embray](#comment%3A37):\n> I rebased this properly on top of develop\n\nthanks. can you update the \"Branch\" field? (is it supposed to work like that?)\n\n> I'm not sure what to do with the new `SAGE_MAXIMA_INIT` this adds.\n\niirc, this variable was needed to point to some maxima fragment, which is in different places, depending on where sage is run from. obviously there must be a better solution (including one that does not use a file like this one).",
    "created_at": "2016-09-29T18:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188040",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:38" align="right">Comment 38</div>

Replying to [@embray](#comment%3A37):
> I rebased this properly on top of develop

thanks. can you update the "Branch" field? (is it supposed to work like that?)

> I'm not sure what to do with the new `SAGE_MAXIMA_INIT` this adds.

iirc, this variable was needed to point to some maxima fragment, which is in different places, depending on where sage is run from. obviously there must be a better solution (including one that does not use a file like this one).



---

archive/issue_comments_188041.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nReplying to [@sagetrac-felixs](#comment%3A38):\n> Replying to [@embray](#comment%3A37):\n> > I rebased this properly on top of develop\n\n> \n> thanks. can you update the \"Branch\" field? (is it supposed to work like that?)\n> \n\nThe branch definitely needs to be changed unless Erik has the right to write to `felixs`' branches ;) Cannot comment until I see the new branch.",
    "created_at": "2016-09-29T20:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188041",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:39" align="right">Comment 39</div>

Replying to [@sagetrac-felixs](#comment%3A38):
> Replying to [@embray](#comment%3A37):
> > I rebased this properly on top of develop

> 
> thanks. can you update the "Branch" field? (is it supposed to work like that?)
> 

The branch definitely needs to be changed unless Erik has the right to write to `felixs`' branches ;) Cannot comment until I see the new branch.



---

archive/issue_comments_188042.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nI can change the branch to mine, but only if it's ok with felixs.  I think I need to pull out the `SAGE_MAXIMA_INIT` stuff which isn't ready, but otherwise I think it brings it most other changes from the old version of his branch that are still relevant.",
    "created_at": "2016-09-30T09:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188042",
    "user": "https://github.com/embray"
}
```

<div id="comment:40" align="right">Comment 40</div>

I can change the branch to mine, but only if it's ok with felixs.  I think I need to pull out the `SAGE_MAXIMA_INIT` stuff which isn't ready, but otherwise I think it brings it most other changes from the old version of his branch that are still relevant.



---

archive/issue_comments_188043.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nReplying to [@embray](#comment%3A40):\n> [..] if it's ok with felixs.\n\nsure it is. please do!",
    "created_at": "2016-09-30T10:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188043",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:41" align="right">Comment 41</div>

Replying to [@embray](#comment%3A40):
> [..] if it's ok with felixs.

sure it is. please do!



---

archive/issue_comments_188044.json:
```json
{
    "body": "Changed commit from **[4846a73](https://github.com/sagemath/sagetrac-mirror/commit/4846a73aad7cf7361c69a6ae43628b8cae821b9f)** to **[807588e](https://github.com/sagemath/sagetrac-mirror/commit/807588ebd019f99f2c3e9ed82207a1d5c1d50a67)**",
    "created_at": "2016-10-03T10:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188044",
    "user": "https://github.com/embray"
}
```

Changed commit from **[4846a73](https://github.com/sagemath/sagetrac-mirror/commit/4846a73aad7cf7361c69a6ae43628b8cae821b9f)** to **[807588e](https://github.com/sagemath/sagetrac-mirror/commit/807588ebd019f99f2c3e9ed82207a1d5c1d50a67)**



---

archive/issue_comments_188045.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nHere's my version of Felix's branch, rebased on a recent develop branch.  I think I preserved all the changes between the original version of his branch, and the more recent version from https://github.com/sagemath/sagetrac-mirror/commit/4846a73aad7cf7361c69a6ae43628b8cae821b9f  So this removed many changes from the original branch, such as the change to how sage-maxima.lisp is located.\n\nIt would still be good to have a solution for that.  But for now, this will let us look at what changes this branch does make (that are still relevant).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cb6f9fe5c68e2d1a36010754ea19bf460432fad\">8cb6f9f</a></td><td><code>unhardwire runtime paths in various cases</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75cb53411ddd6bf1ffa038906748eab50fdf1a6a\">75cb534</a></td><td><code>fix qepcadrc path</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c484537601aa21404f516d99df4b907cfd40eee4\">c484537</a></td><td><code>don't rely on $SAGE_LOCAL/bin/python.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ffed9dee9b9aa6b9c543dd6b95171a32228485a8\">ffed9de</a></td><td><code>cython.py: don't rely in $SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42780252fc0c105fb9bd9e6dd1cdf7285b4192dc\">4278025</a></td><td><code>python-sage: remove sage-location check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/807588ebd019f99f2c3e9ed82207a1d5c1d50a67\">807588e</a></td><td><code>initialize SAGE_ETC (from environ) in sage-location before use</code></td></tr></table>\n",
    "created_at": "2016-10-03T10:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188045",
    "user": "https://github.com/embray"
}
```

<div id="comment:42" align="right">Comment 42</div>

Here's my version of Felix's branch, rebased on a recent develop branch.  I think I preserved all the changes between the original version of his branch, and the more recent version from https://github.com/sagemath/sagetrac-mirror/commit/4846a73aad7cf7361c69a6ae43628b8cae821b9f  So this removed many changes from the original branch, such as the change to how sage-maxima.lisp is located.

It would still be good to have a solution for that.  But for now, this will let us look at what changes this branch does make (that are still relevant).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cb6f9fe5c68e2d1a36010754ea19bf460432fad">8cb6f9f</a></td><td><code>unhardwire runtime paths in various cases</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75cb53411ddd6bf1ffa038906748eab50fdf1a6a">75cb534</a></td><td><code>fix qepcadrc path</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c484537601aa21404f516d99df4b907cfd40eee4">c484537</a></td><td><code>don't rely on $SAGE_LOCAL/bin/python.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ffed9dee9b9aa6b9c543dd6b95171a32228485a8">ffed9de</a></td><td><code>cython.py: don't rely in $SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42780252fc0c105fb9bd9e6dd1cdf7285b4192dc">4278025</a></td><td><code>python-sage: remove sage-location check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/807588ebd019f99f2c3e9ed82207a1d5c1d50a67">807588e</a></td><td><code>initialize SAGE_ETC (from environ) in sage-location before use</code></td></tr></table>




---

archive/issue_comments_188046.json:
```json
{
    "body": "Changed author from **Felix Salfelder** to **Felix Salfelder, Erik Bray**",
    "created_at": "2016-10-03T10:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188046",
    "user": "https://github.com/embray"
}
```

Changed author from **Felix Salfelder** to **Felix Salfelder, Erik Bray**



---

archive/issue_comments_188047.json:
```json
{
    "body": "Changed branch from **[u/felixs/runtime_paths](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/runtime_paths)** to **[u/embray/ticket-15105](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-15105)**",
    "created_at": "2016-10-03T10:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188047",
    "user": "https://github.com/embray"
}
```

Changed branch from **[u/felixs/runtime_paths](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/runtime_paths)** to **[u/embray/ticket-15105](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-15105)**



---

archive/issue_events_197125.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-03T10:00:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197125"
}
```



---

archive/issue_events_197126.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-03T10:00:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197126"
}
```



---

archive/issue_comments_188048.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nIn `src/sage/databases/sql_db.py`\n\n```\n-    from sage.env import SAGE_SHARE\n+    from sage.misc.misc import GRAPHS_DATA_DIR\n```\nGo back to using `sage.env` rather than `sage.misc.misc`.",
    "created_at": "2016-10-03T11:16:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188048",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">Comment 44</div>

In `src/sage/databases/sql_db.py`

```
-    from sage.env import SAGE_SHARE
+    from sage.misc.misc import GRAPHS_DATA_DIR
```
Go back to using `sage.env` rather than `sage.misc.misc`.



---

archive/issue_comments_188049.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\n`sage.env` is the wrong place for this. (not saying that, sage.misc.misc is any better, i hardly remember why it ended up there.).\n\nGRAPHS_DATA_DIR certainly belongs to the part of code that uses graphs data... not to the core library (which i think env.py belongs to).\n\nfor the transition it might make sense to open a `to be sorted` section in env.py... if you agree that doing it right[tm] is not within the scope of this ticket.",
    "created_at": "2016-10-03T11:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188049",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:45" align="right">Comment 45</div>

`sage.env` is the wrong place for this. (not saying that, sage.misc.misc is any better, i hardly remember why it ended up there.).

GRAPHS_DATA_DIR certainly belongs to the part of code that uses graphs data... not to the core library (which i think env.py belongs to).

for the transition it might make sense to open a `to be sorted` section in env.py... if you agree that doing it right[tm] is not within the scope of this ticket.



---

archive/issue_comments_188050.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nHistorically, variables where stored in `sage.misc.misc`. When we started to setup `sage.env` as the (more comprehensive) variable store we deprecated the use of `sage.misc.misc`.\n\nI initially needed such a store in sage-on-gentoo anyway because my shell environment didn't contain them. It allowed me to do `import sage.all` from the system python prompt amongst other things.\n\nNow I am curious as to why `sage.env` is not the right place for runtime variables - I would agree that now we should split the build time only variables somewhere else. But I am interested in your reasoning. Bear in mind that any answer from me will be several hours away (need to catch some zzzz).",
    "created_at": "2016-10-03T11:37:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188050",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:46" align="right">Comment 46</div>

Historically, variables where stored in `sage.misc.misc`. When we started to setup `sage.env` as the (more comprehensive) variable store we deprecated the use of `sage.misc.misc`.

I initially needed such a store in sage-on-gentoo anyway because my shell environment didn't contain them. It allowed me to do `import sage.all` from the system python prompt amongst other things.

Now I am curious as to why `sage.env` is not the right place for runtime variables - I would agree that now we should split the build time only variables somewhere else. But I am interested in your reasoning. Bear in mind that any answer from me will be several hours away (need to catch some zzzz).



---

archive/issue_comments_188051.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nAh, I thought I replaced most of the `sage.misc.misc` to with `sage.env` bug I guess I missed that one.\n\nI don't think there's really any problem with it being in `sage.env`.  If I were to do anything different it would be toward the goal of keeping environment variable definitions close to the code that actually uses them.  It might be nice if a subpackage can have a `sage.<foo>.env` describing variable specifically relevant to that sub-package, but still allow all variables to imported from `sage.env` (lazily evaluated if necessary).\n\nBut I think that's all beyond the scope of this ticket--for now I think throwing everything in `sage.env` is appropriate.",
    "created_at": "2016-10-03T11:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188051",
    "user": "https://github.com/embray"
}
```

<div id="comment:47" align="right">Comment 47</div>

Ah, I thought I replaced most of the `sage.misc.misc` to with `sage.env` bug I guess I missed that one.

I don't think there's really any problem with it being in `sage.env`.  If I were to do anything different it would be toward the goal of keeping environment variable definitions close to the code that actually uses them.  It might be nice if a subpackage can have a `sage.<foo>.env` describing variable specifically relevant to that sub-package, but still allow all variables to imported from `sage.env` (lazily evaluated if necessary).

But I think that's all beyond the scope of this ticket--for now I think throwing everything in `sage.env` is appropriate.



---

archive/issue_comments_188052.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\n> Now I am curious as to why sage.env is not the right place for runtime variables\n\nbecause it breaks modularity. the core library should not have to know about extensions.\n\nor the other way: there should be a way to extend sage/sagelib by merely installing something. then GRAPH_DATA (as well as some others listed in sage.env), should use that mechanism.\n\nanother remark: this is not just about environment variables. an extension should possibly add *anything*. but environment might be a good example, then generalize.\n\n> for now [..] throwing everything in sage.env is appropriate. \n\nagreed.",
    "created_at": "2016-10-03T11:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188052",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:48" align="right">Comment 48</div>

> Now I am curious as to why sage.env is not the right place for runtime variables

because it breaks modularity. the core library should not have to know about extensions.

or the other way: there should be a way to extend sage/sagelib by merely installing something. then GRAPH_DATA (as well as some others listed in sage.env), should use that mechanism.

another remark: this is not just about environment variables. an extension should possibly add *anything*. but environment might be a good example, then generalize.

> for now [..] throwing everything in sage.env is appropriate. 

agreed.



---

archive/issue_events_197127.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-03T12:36:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197127"
}
```



---

archive/issue_events_197128.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-03T12:36:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197128"
}
```



---

archive/issue_comments_188053.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nYou cannot just unilaterally change the path for `default.qepcadrc`, see [comment:23]",
    "created_at": "2016-10-03T12:36:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188053",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">Comment 49</div>

You cannot just unilaterally change the path for `default.qepcadrc`, see [comment:23]



---

archive/issue_comments_188054.json:
```json
{
    "body": "Changed dependencies from **#15100** to none",
    "created_at": "2016-10-03T12:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188054",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#15100** to none



---

archive/issue_comments_188055.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nIn `pselect.pyx`, maybe it's better to use `sys.executable` instead of `os.path.join(SAGE_LOCAL, 'bin', 'python')`.\n\nBecause now the patch just replaces one hard-coded path by another.",
    "created_at": "2016-10-03T12:44:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188055",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">Comment 51</div>

In `pselect.pyx`, maybe it's better to use `sys.executable` instead of `os.path.join(SAGE_LOCAL, 'bin', 'python')`.

Because now the patch just replaces one hard-coded path by another.



---

archive/issue_comments_188056.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nI also don't agree with the removal of the test in `src/sage/tests/cmdline.py`. The doctest has a function (it checks that `sage-location` was run), you should not just remove it.",
    "created_at": "2016-10-03T12:51:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188056",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:52" align="right">Comment 52</div>

I also don't agree with the removal of the test in `src/sage/tests/cmdline.py`. The doctest has a function (it checks that `sage-location` was run), you should not just remove it.



---

archive/issue_comments_188057.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nThere is #15146 to deal with `sage-location` and the test in `src/sage/tests/cmdline.py`",
    "created_at": "2016-10-03T12:52:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188057",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:53" align="right">Comment 53</div>

There is #15146 to deal with `sage-location` and the test in `src/sage/tests/cmdline.py`



---

archive/issue_comments_188058.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nIn `sage.env`, use `SAGE_LOCAL` instead of `os.environ['SAGE_LOCAL']`.",
    "created_at": "2016-10-03T12:54:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188058",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:54" align="right">Comment 54</div>

In `sage.env`, use `SAGE_LOCAL` instead of `os.environ['SAGE_LOCAL']`.



---

archive/issue_comments_188059.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nThe Singular changes will conflict with #17254.",
    "created_at": "2016-10-03T12:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188059",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">Comment 55</div>

The Singular changes will conflict with #17254.



---

archive/issue_comments_188060.json:
```json
{
    "body": "Dependencies: **#17254**",
    "created_at": "2016-10-03T12:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188060",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#17254**



---

archive/issue_comments_188061.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nReplace `GAP_DATA_DIR` with `GAP_DIR`. It's not a data dir, it's the installation directory of the whole GAP package.",
    "created_at": "2016-10-03T12:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188061",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:56" align="right">Comment 56</div>

Replace `GAP_DATA_DIR` with `GAP_DIR`. It's not a data dir, it's the installation directory of the whole GAP package.



---

archive/issue_comments_188062.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nIn `src/sage/geometry/lattice_polytope.py`, instead of assigning `data_location = POLYTOPE_DATA_DIR`, it is cleaner to just use the variable `POLYTOPE_DATA_DIR` directly.",
    "created_at": "2016-10-03T13:00:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188062",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">Comment 57</div>

In `src/sage/geometry/lattice_polytope.py`, instead of assigning `data_location = POLYTOPE_DATA_DIR`, it is cleaner to just use the variable `POLYTOPE_DATA_DIR` directly.



---

archive/issue_comments_188063.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nSame comment in `src/sage/schemes/elliptic_curves/ec_database.py`: you can shorten\n\n```\n        from sage.env import ELLCURVE_DATA_DIR\n        db = ELLCURVE_DATA_DIR\n        data = os.path.join(db,'rank%s'%rank)\n```\nto\n\n```\n        from sage.env import ELLCURVE_DATA_DIR\n        data = os.path.join(ELLCURVE_DATA_DIR, 'rank%s'%rank)\n```",
    "created_at": "2016-10-03T13:02:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188063",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:58" align="right">Comment 58</div>

Same comment in `src/sage/schemes/elliptic_curves/ec_database.py`: you can shorten

```
        from sage.env import ELLCURVE_DATA_DIR
        db = ELLCURVE_DATA_DIR
        data = os.path.join(db,'rank%s'%rank)
```
to

```
        from sage.env import ELLCURVE_DATA_DIR
        data = os.path.join(ELLCURVE_DATA_DIR, 'rank%s'%rank)
```



---

archive/issue_comments_188064.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nThese seem unused:\n\n```\n# used by cython.py\n_add_variable_or_fallback('SINGULAR_INCLUDEDIR', opj('$SAGE_LOCAL','include','singular'))\n_add_variable_or_fallback('FACTORY_INCLUDEDIR',  opj('$SAGE_LOCAL','include','factory'))\n```",
    "created_at": "2016-10-03T13:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188064",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">Comment 59</div>

These seem unused:

```
# used by cython.py
_add_variable_or_fallback('SINGULAR_INCLUDEDIR', opj('$SAGE_LOCAL','include','singular'))
_add_variable_or_fallback('FACTORY_INCLUDEDIR',  opj('$SAGE_LOCAL','include','factory'))
```



---

archive/issue_comments_188065.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nReplace `CONWAY_DATA_DIR` by `CONWAY_POLYNOMIALS_DATA_DIR` because both the package and directory are named `conway_polynomials` and not just `conway`.",
    "created_at": "2016-10-03T13:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188065",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">Comment 60</div>

Replace `CONWAY_DATA_DIR` by `CONWAY_POLYNOMIALS_DATA_DIR` because both the package and directory are named `conway_polynomials` and not just `conway`.



---

archive/issue_comments_188066.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nReplying to [@jdemeyer](#comment%3A56):\n> Replace `GAP_DATA_DIR` with `GAP_DIR`. It's not a data dir, it's the installation directory of the whole GAP package.\n\nthanks for the feedback.\n\nwhat do you mean by 'installation directory of the whole GAP package'? the prefix?\n\nnote that the datadir (ought to be platform independent!) usually/generally/commonly not hardcoded to the prefix, hence the different name.",
    "created_at": "2016-10-03T14:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188066",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:61" align="right">Comment 61</div>

Replying to [@jdemeyer](#comment%3A56):
> Replace `GAP_DATA_DIR` with `GAP_DIR`. It's not a data dir, it's the installation directory of the whole GAP package.

thanks for the feedback.

what do you mean by 'installation directory of the whole GAP package'? the prefix?

note that the datadir (ought to be platform independent!) usually/generally/commonly not hardcoded to the prefix, hence the different name.



---

archive/issue_comments_188067.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nReplying to [@sagetrac-felixs](#comment%3A61):\n> what do you mean by 'installation directory of the whole GAP package'? the prefix?\n\nGAP has an unusual installation process, it doesn't really have a prefix in the usual sense.",
    "created_at": "2016-10-03T15:08:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188067",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:62" align="right">Comment 62</div>

Replying to [@sagetrac-felixs](#comment%3A61):
> what do you mean by 'installation directory of the whole GAP package'? the prefix?

GAP has an unusual installation process, it doesn't really have a prefix in the usual sense.



---

archive/issue_comments_188068.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nReplying to [@jdemeyer](#comment%3A62):\n> GAP has an unusual installation process, it doesn't really have a prefix in the usual sense.\n\nso, it's not prefix (it does not seem relevant, does it?).\n\npaths are subject to the conventions and standards on particular platforms (e.g. FSH), not to an \"unusual installation process\". package data usually goes to /usr/share/$packagename, and thats where i can find the gap data on my platform. hence, here, /usr/share/gap is GAP_DATA_DIR, and not GAP_DIR as you suggest.\n\n(on a different platform it might be in a different place, but it's still \"the place where the gap data is).",
    "created_at": "2016-10-03T15:39:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188068",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:63" align="right">Comment 63</div>

Replying to [@jdemeyer](#comment%3A62):
> GAP has an unusual installation process, it doesn't really have a prefix in the usual sense.

so, it's not prefix (it does not seem relevant, does it?).

paths are subject to the conventions and standards on particular platforms (e.g. FSH), not to an "unusual installation process". package data usually goes to /usr/share/$packagename, and thats where i can find the gap data on my platform. hence, here, /usr/share/gap is GAP_DATA_DIR, and not GAP_DIR as you suggest.

(on a different platform it might be in a different place, but it's still "the place where the gap data is).



---

archive/issue_comments_188069.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nFor reference, I believe Felix is referring to https://www.gnu.org/prep/standards/standards.html#Directory-Variables\nand https://www.gnu.org/software/automake/manual/automake.html#Uniform",
    "created_at": "2016-10-03T18:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188069",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">Comment 64</div>

For reference, I believe Felix is referring to https://www.gnu.org/prep/standards/standards.html#Directory-Variables
and https://www.gnu.org/software/automake/manual/automake.html#Uniform



---

archive/issue_comments_188070.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nyes. and not just GNU, see https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard",
    "created_at": "2016-10-03T19:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188070",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:65" align="right">Comment 65</div>

yes. and not just GNU, see https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard



---

archive/issue_comments_188071.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nReplying to [@sagetrac-felixs](#comment%3A63):\n> package data usually goes to /usr/share/$packagename, and thats where i can find the gap data on my platform.\n\nWhat do you mean with \"gap data\"?\n\nAnyway, where **your distro** installs GAP does not matter. We are working on Sage here, and `$SAGE_LOCAL/gap/latest` is the directory where GAP as a whole is installed. It's not a directory containing data files, so `GAP_DATA_DIR` is a bad name.",
    "created_at": "2016-10-03T20:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188071",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:66" align="right">Comment 66</div>

Replying to [@sagetrac-felixs](#comment%3A63):
> package data usually goes to /usr/share/$packagename, and thats where i can find the gap data on my platform.

What do you mean with "gap data"?

Anyway, where **your distro** installs GAP does not matter. We are working on Sage here, and `$SAGE_LOCAL/gap/latest` is the directory where GAP as a whole is installed. It's not a directory containing data files, so `GAP_DATA_DIR` is a bad name.



---

archive/issue_comments_188072.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nReplying to [@sagetrac-felixs](#comment%3A63):\n> paths are subject to the conventions and standards on particular platforms (e.g. FSH), not to an \"unusual installation process\".\n\nAccept the current reality: GAP has an \"unusual installation process\". We should use names which refer to the reality, not to some standard which doesn't apply for GAP.",
    "created_at": "2016-10-03T20:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188072",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:67" align="right">Comment 67</div>

Replying to [@sagetrac-felixs](#comment%3A63):
> paths are subject to the conventions and standards on particular platforms (e.g. FSH), not to an "unusual installation process".

Accept the current reality: GAP has an "unusual installation process". We should use names which refer to the reality, not to some standard which doesn't apply for GAP.



---

archive/issue_comments_188073.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nReplying to [@jdemeyer](#comment%3A66):\n> What do you mean with \"gap data\"?\n\nthe platform independent data files shipped with (\"installed by\", \"included in\", \"belonging to\") the gap package.",
    "created_at": "2016-10-03T21:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188073",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:68" align="right">Comment 68</div>

Replying to [@jdemeyer](#comment%3A66):
> What do you mean with "gap data"?

the platform independent data files shipped with ("installed by", "included in", "belonging to") the gap package.



---

archive/issue_comments_188074.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nI agree with Jeroen that the current practice of the GAP installation cannot be described in terms of standards. Let's call it \"unusual\" in writing.\n\nDo we know how distributions like Debian handle GAP?",
    "created_at": "2016-10-03T21:58:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188074",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:69" align="right">Comment 69</div>

I agree with Jeroen that the current practice of the GAP installation cannot be described in terms of standards. Let's call it "unusual" in writing.

Do we know how distributions like Debian handle GAP?



---

archive/issue_comments_188075.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\n> Do we know how distributions like Debian handle GAP?\n\non debian (and derivatives), you can find the platform independent gap data files in /usr/share/gap.",
    "created_at": "2016-10-03T22:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188075",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:70" align="right">Comment 70</div>

> Do we know how distributions like Debian handle GAP?

on debian (and derivatives), you can find the platform independent gap data files in /usr/share/gap.



---

archive/issue_comments_188076.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nJeroen, Felix: I don't have time to look into any specifics with GAP, but I would suggest that the directory variables are defined and named in a way that works both with \n- with the status quo of how the Sage spkg installs GAP into `$SAGE_LOCAL`, \n- and with the way how a distribution such as Debian installs GAP into `/usr`.\n\nOn the other hand, if there's a wish to change the way how the Sage spkg install GAP, then that clearly belongs on a different ticket (please open it if it does not exist yet), not on this one.",
    "created_at": "2016-10-04T00:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188076",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:71" align="right">Comment 71</div>

Jeroen, Felix: I don't have time to look into any specifics with GAP, but I would suggest that the directory variables are defined and named in a way that works both with 
- with the status quo of how the Sage spkg installs GAP into `$SAGE_LOCAL`, 
- and with the way how a distribution such as Debian installs GAP into `/usr`.

On the other hand, if there's a wish to change the way how the Sage spkg install GAP, then that clearly belongs on a different ticket (please open it if it does not exist yet), not on this one.



---

archive/issue_comments_188077.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">Comment 72</div>\n\nReplying to [@sagetrac-felixs](#comment%3A68):\n> Replying to [@jdemeyer](#comment%3A66):\n> > What do you mean with \"gap data\"?\n\n> \n> the platform independent data files shipped with (\"installed by\", \"included in\", \"belonging to\") the gap package.\n\nRight. With that definition, `$SAGE_LOCAL/gap/latest` is **not** the GAP data dir so `GAP_DATA_DIR` is a bad name.",
    "created_at": "2016-10-04T06:06:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188077",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">Comment 72</div>

Replying to [@sagetrac-felixs](#comment%3A68):
> Replying to [@jdemeyer](#comment%3A66):
> > What do you mean with "gap data"?

> 
> the platform independent data files shipped with ("installed by", "included in", "belonging to") the gap package.

Right. With that definition, `$SAGE_LOCAL/gap/latest` is **not** the GAP data dir so `GAP_DATA_DIR` is a bad name.



---

archive/issue_comments_188078.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\n> GAP_DATA_DIR is a bad name. \n\nno it's not. it specifies the location of the (platform indepentdent static, package specific) data shipped with the gap package. it's meant to be used to lead to exactly that. no more, no less.\n\ni really don't see your problem here, Jeroen. can you explain what you want to use GAP_DIR for?\n\nif you intend to use GAP)DIR for something other than the (platform indepentdent static, package specific) gap data, then you will break a standard FHS install. i know you are against standards, but why would you want that terrible implicit breakage here?\n\nmkoeppe: no, nobody said the spkg needs to be changed, and in fact it does not have to.",
    "created_at": "2016-10-04T07:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188078",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:73" align="right">Comment 73</div>

> GAP_DATA_DIR is a bad name. 

no it's not. it specifies the location of the (platform indepentdent static, package specific) data shipped with the gap package. it's meant to be used to lead to exactly that. no more, no less.

i really don't see your problem here, Jeroen. can you explain what you want to use GAP_DIR for?

if you intend to use GAP)DIR for something other than the (platform indepentdent static, package specific) gap data, then you will break a standard FHS install. i know you are against standards, but why would you want that terrible implicit breakage here?

mkoeppe: no, nobody said the spkg needs to be changed, and in fact it does not have to.



---

archive/issue_comments_188079.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\nReplying to [@sagetrac-felixs](#comment%3A73):\n> i know you are against standards\n\nPlease read https://en.wikipedia.org/wiki/Ad_hominem\n\nI am not against standards, I am against denying reality. If the current reality is that GAP is not installed following the FHS standards, then we should just accept that fact.",
    "created_at": "2016-10-04T07:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188079",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:74" align="right">Comment 74</div>

Replying to [@sagetrac-felixs](#comment%3A73):
> i know you are against standards

Please read https://en.wikipedia.org/wiki/Ad_hominem

I am not against standards, I am against denying reality. If the current reality is that GAP is not installed following the FHS standards, then we should just accept that fact.



---

archive/issue_comments_188080.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\nReplying to [@sagetrac-felixs](#comment%3A48):\n> > Now I am curious as to why sage.env is not the right place for runtime variables\n\n> \n> because it breaks modularity. the core library should not have to know about extensions.\n> \n> or the other way: there should be a way to extend sage/sagelib by merely installing something. then GRAPH_DATA (as well as some others listed in sage.env), should use that mechanism.\n> \n> another remark: this is not just about environment variables. an extension should possibly add *anything*. but environment might be a good example, then generalize.\n> \n> > for now [..] throwing everything in sage.env is appropriate. \n\n> \n> agreed.\n\nOK your new requirements and goals are different from the ones that lead to the emergence of `env.py`. I can accept that we have to move on to a new state at some point in the future.",
    "created_at": "2016-10-04T07:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188080",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:75" align="right">Comment 75</div>

Replying to [@sagetrac-felixs](#comment%3A48):
> > Now I am curious as to why sage.env is not the right place for runtime variables

> 
> because it breaks modularity. the core library should not have to know about extensions.
> 
> or the other way: there should be a way to extend sage/sagelib by merely installing something. then GRAPH_DATA (as well as some others listed in sage.env), should use that mechanism.
> 
> another remark: this is not just about environment variables. an extension should possibly add *anything*. but environment might be a good example, then generalize.
> 
> > for now [..] throwing everything in sage.env is appropriate. 

> 
> agreed.

OK your new requirements and goals are different from the ones that lead to the emergence of `env.py`. I can accept that we have to move on to a new state at some point in the future.



---

archive/issue_comments_188081.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">Comment 76</div>\n\nThe current `gap` situation is a hack at best. The problem is that `gap` doesn't have a real install target. So everything is copied in a versioned folder in`SAGE_LOCAL/gap/gap-$version` and then it is linked to `SAGE_LOCAL/gap/latest`. Clean in that it is all in its own container that you can delete afterwards.\n\nI would imagine that debian does something like I do in Gentoo. Shoves most of the stuff under `/usr/lib{,64}/gap` with appropriate links or script in standard location pointing there. In that scheme GAP_DATA_DIR is `/usr/lib{,64}/gap/pkg` although some of the databases live under `/usr/lib{,64}/gap` directly.\n\nThere is a lot to do upstream to get `gap` to install nicely in any kind of fashion. In my latest ebuild I have been quite drastic compared to what sage does or previous version of my own ebuilds. So for the foreseeable future `gap` will remain a hack and I think `GAP_DIR` is more apt than `GAP_DATA_DIR`.",
    "created_at": "2016-10-04T08:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188081",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:76" align="right">Comment 76</div>

The current `gap` situation is a hack at best. The problem is that `gap` doesn't have a real install target. So everything is copied in a versioned folder in`SAGE_LOCAL/gap/gap-$version` and then it is linked to `SAGE_LOCAL/gap/latest`. Clean in that it is all in its own container that you can delete afterwards.

I would imagine that debian does something like I do in Gentoo. Shoves most of the stuff under `/usr/lib{,64}/gap` with appropriate links or script in standard location pointing there. In that scheme GAP_DATA_DIR is `/usr/lib{,64}/gap/pkg` although some of the databases live under `/usr/lib{,64}/gap` directly.

There is a lot to do upstream to get `gap` to install nicely in any kind of fashion. In my latest ebuild I have been quite drastic compared to what sage does or previous version of my own ebuilds. So for the foreseeable future `gap` will remain a hack and I think `GAP_DIR` is more apt than `GAP_DATA_DIR`.



---

archive/issue_comments_188082.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">Comment 77</div>\n\nReplying to [@kiwifb](#comment%3A76):\n> I would imagine that debian does something like I do in Gentoo.\n\nwith all do respect, you got it wrong.\n\non debian, the (platform indepentdent static, package specific) gap data goes to /usr/share/gap\n\n> Shoves most of the stuff under `/usr/lib{,64}/gap` with appropriate links or script in standard location pointing there. In that scheme GAP_DATA_DIR is `/usr/lib{,64}/gap/pkg` although some of the databases live under `/usr/lib{,64}/gap` directly.\n\nnot quite. /usr/lib is for platform dependent stuff. that's why you need lib{32,64} but only shared (not shared{32,64}). GAP_DATA_DIR is about *platform independent data*.\n\n> There is a lot to do upstream to get `gap` to install nicely in any kind of fashion.\n\nwrong again. you can install gap any way you like, despite the broken build/install system\n\n> I think `GAP_DIR` is more apt than `GAP_DATA_DIR`.\n\nnow with three wrong premises, you end up on the wrong track.\n\ninstead, you could (plan to) fix the gap ebuild to adhere to FHS, as most other gentoo packages do.\n\nReplying to Jeroen\n> I am not against standards (... but)\n\ni feel the need for a gowdin's style law for this sentence, but it's not there. so i will better stop posting here now.",
    "created_at": "2016-10-04T08:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188082",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:77" align="right">Comment 77</div>

Replying to [@kiwifb](#comment%3A76):
> I would imagine that debian does something like I do in Gentoo.

with all do respect, you got it wrong.

on debian, the (platform indepentdent static, package specific) gap data goes to /usr/share/gap

> Shoves most of the stuff under `/usr/lib{,64}/gap` with appropriate links or script in standard location pointing there. In that scheme GAP_DATA_DIR is `/usr/lib{,64}/gap/pkg` although some of the databases live under `/usr/lib{,64}/gap` directly.

not quite. /usr/lib is for platform dependent stuff. that's why you need lib{32,64} but only shared (not shared{32,64}). GAP_DATA_DIR is about *platform independent data*.

> There is a lot to do upstream to get `gap` to install nicely in any kind of fashion.

wrong again. you can install gap any way you like, despite the broken build/install system

> I think `GAP_DIR` is more apt than `GAP_DATA_DIR`.

now with three wrong premises, you end up on the wrong track.

instead, you could (plan to) fix the gap ebuild to adhere to FHS, as most other gentoo packages do.

Replying to Jeroen
> I am not against standards (... but)

i feel the need for a gowdin's style law for this sentence, but it's not there. so i will better stop posting here now.



---

archive/issue_comments_188083.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">Comment 78</div>\n\nI certainly could improve things, thanks for pointing stuff out [although using /usr/share/gap means patching, I guess debian has the patch I am thinking about]. The main point here is that installing gap in a proper way is a lot of hand holding. debian and gentoo have a proper package management system - which track files belonging to a package so upgrading or otherwise changing the package version is clean. \n\nsagemath on the other hand only installs and \"uninstall\" manually where we can/have to [I guess there are `pip` packages now and we know what happened with those in another ticket ;) ]. What I am getting at, is that sagemath's packaging system is not sophisticated enough to deal with the hand holding when changing version. Lots of work.\n\nFeel free to improve `gap`'s installation (without forgetting to make provision for upgrade) in another ticket.\n\nOnce it is done the discussion between `GAP_DATA_DIR` and `GAP_DIR` will be non-sensical. Should we wait until this is ready or should we move on with the current situation?",
    "created_at": "2016-10-04T09:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188083",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:78" align="right">Comment 78</div>

I certainly could improve things, thanks for pointing stuff out [although using /usr/share/gap means patching, I guess debian has the patch I am thinking about]. The main point here is that installing gap in a proper way is a lot of hand holding. debian and gentoo have a proper package management system - which track files belonging to a package so upgrading or otherwise changing the package version is clean. 

sagemath on the other hand only installs and "uninstall" manually where we can/have to [I guess there are `pip` packages now and we know what happened with those in another ticket ;) ]. What I am getting at, is that sagemath's packaging system is not sophisticated enough to deal with the hand holding when changing version. Lots of work.

Feel free to improve `gap`'s installation (without forgetting to make provision for upgrade) in another ticket.

Once it is done the discussion between `GAP_DATA_DIR` and `GAP_DIR` will be non-sensical. Should we wait until this is ready or should we move on with the current situation?



---

archive/issue_comments_188084.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">Comment 79</div>\n\nReplying to [@sagetrac-felixs](#comment%3A73):\n> > GAP_DATA_DIR is a bad name. \n\n> \n> no it's not. it specifies the location of the (platform indepentdent static, package specific) data shipped with the gap package. it's meant to be used to lead to exactly that. no more, no less.\n\nI agree with Felix here.  I don't care how gap happens to be installed in Sage.  The use that variable is to find where the GAP data lives (which in Sage, which I guess obeys GAP's \"unusual\" installation, happens to be the directory where all of GAP is installed).  On a different platform the two are not necessarily the same.",
    "created_at": "2016-10-04T09:37:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188084",
    "user": "https://github.com/embray"
}
```

<div id="comment:79" align="right">Comment 79</div>

Replying to [@sagetrac-felixs](#comment%3A73):
> > GAP_DATA_DIR is a bad name. 

> 
> no it's not. it specifies the location of the (platform indepentdent static, package specific) data shipped with the gap package. it's meant to be used to lead to exactly that. no more, no less.

I agree with Felix here.  I don't care how gap happens to be installed in Sage.  The use that variable is to find where the GAP data lives (which in Sage, which I guess obeys GAP's "unusual" installation, happens to be the directory where all of GAP is installed).  On a different platform the two are not necessarily the same.



---

archive/issue_comments_188085.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">Comment 80</div>\n\nReplying to [@embray](#comment%3A79):\n> The use [of] that variable is to find where the GAP data lives\n\nDo you have evidence for this claim? Because this statement is the crux of the discussion.\n\nEdit: if the above claim is indeed correct, I totally agree that `GAP_DATA_DIR` is a good name.",
    "created_at": "2016-10-04T10:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188085",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:80" align="right">Comment 80</div>

Replying to [@embray](#comment%3A79):
> The use [of] that variable is to find where the GAP data lives

Do you have evidence for this claim? Because this statement is the crux of the discussion.

Edit: if the above claim is indeed correct, I totally agree that `GAP_DATA_DIR` is a good name.



---

archive/issue_comments_188086.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">Comment 81</div>\n\nAnyway, back to reality: `$SAGE_LOCAL/gap/latest` is what GAP calls a [GAP Root Directory](http://www.gap-system.org/Manuals/doc/ref/chap9.html#X7A4973627A5DB27D). It seems to be used for everything, not just \"data files\".",
    "created_at": "2016-10-04T10:17:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188086",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:81" align="right">Comment 81</div>

Anyway, back to reality: `$SAGE_LOCAL/gap/latest` is what GAP calls a [GAP Root Directory](http://www.gap-system.org/Manuals/doc/ref/chap9.html#X7A4973627A5DB27D). It seems to be used for everything, not just "data files".



---

archive/issue_comments_188087.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">Comment 82</div>\n\nReplying to [@jdemeyer](#comment%3A80):\n> Replying to [@embray](#comment%3A79):\n> > The use [of] that variable is to find where the GAP data lives\n\n> \n> Do you have evidence for this claim? Because this statement is the crux of the discussion.\n> \n> Edit: if the above claim is indeed correct, I totally agree that `GAP_DATA_DIR` is a good name.\n\nIt seems to me all this argument might be for not much then.  It seems to me all it's really used for is in the utility function `gap_root()`, which itself is not actually used anywhere in Sage (which is not to say nobody uses it for something).\n\nPerhaps we can call it `GAP_ROOT_DIR` for now and leave it at that.  Distros that try to break GAP up into a standard hierarchy would have to have their own definition of what `GAP_ROOT_DIR` means I guess.\n\nAgreed with all of Jeroen's other comments from before the `GAP_DIR` argument--I don't at all understand the issue with `default.qepcadrc` but I'll have a closer look.",
    "created_at": "2016-10-04T10:53:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188087",
    "user": "https://github.com/embray"
}
```

<div id="comment:82" align="right">Comment 82</div>

Replying to [@jdemeyer](#comment%3A80):
> Replying to [@embray](#comment%3A79):
> > The use [of] that variable is to find where the GAP data lives

> 
> Do you have evidence for this claim? Because this statement is the crux of the discussion.
> 
> Edit: if the above claim is indeed correct, I totally agree that `GAP_DATA_DIR` is a good name.

It seems to me all this argument might be for not much then.  It seems to me all it's really used for is in the utility function `gap_root()`, which itself is not actually used anywhere in Sage (which is not to say nobody uses it for something).

Perhaps we can call it `GAP_ROOT_DIR` for now and leave it at that.  Distros that try to break GAP up into a standard hierarchy would have to have their own definition of what `GAP_ROOT_DIR` means I guess.

Agreed with all of Jeroen's other comments from before the `GAP_DIR` argument--I don't at all understand the issue with `default.qepcadrc` but I'll have a closer look.



---

archive/issue_comments_188088.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">Comment 83</div>\n\nReplying to [@embray](#comment%3A82):\n> It seems to me all it's really used for is in the utility function `gap_root()`, which itself is not actually used anywhere in Sage (which is not to say nobody uses it for something).\n\nIt is used to initialize libGAP. From `src/sage/libs/gap/util.pyx`:\n\n```cython\ncdef initialize():\n    \"\"\"\n    Initialize the GAP library, if it hasn't already been\n    initialized.  It is safe to call this multiple times.\n\n    TESTS::\n\n        sage: libgap(123)   # indirect doctest\n        123\n    \"\"\"\n    global _gap_is_initialized\n    if _gap_is_initialized: return\n\n    # Define argv and environ variables, which we will pass in to\n    # initialize GAP. Note that we must pass define the memory pool\n    # size!\n    cdef char* argv[14]\n    argv[0] = \"sage\"\n    argv[1] = \"-l\"\n    s = gap_root()\n    argv[2] = s\n```",
    "created_at": "2016-10-06T14:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188088",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:83" align="right">Comment 83</div>

Replying to [@embray](#comment%3A82):
> It seems to me all it's really used for is in the utility function `gap_root()`, which itself is not actually used anywhere in Sage (which is not to say nobody uses it for something).

It is used to initialize libGAP. From `src/sage/libs/gap/util.pyx`:

```cython
cdef initialize():
    """
    Initialize the GAP library, if it hasn't already been
    initialized.  It is safe to call this multiple times.

    TESTS::

        sage: libgap(123)   # indirect doctest
        123
    """
    global _gap_is_initialized
    if _gap_is_initialized: return

    # Define argv and environ variables, which we will pass in to
    # initialize GAP. Note that we must pass define the memory pool
    # size!
    cdef char* argv[14]
    argv[0] = "sage"
    argv[1] = "-l"
    s = gap_root()
    argv[2] = s
```



---

archive/issue_comments_188089.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">Comment 84</div>\n\nThat makes sense, obviously.  Not sure how my grepping missed that.",
    "created_at": "2016-10-07T08:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188089",
    "user": "https://github.com/embray"
}
```

<div id="comment:84" align="right">Comment 84</div>

That makes sense, obviously.  Not sure how my grepping missed that.



---

archive/issue_comments_188090.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">Comment 85</div>\n\nCc'ing some people who worked on libgap (#6391) in the hope that we can settle the GAP_DIR / GAP_ROOT_DIR / GAP_DATA_DIR question and move this ticket forward.",
    "created_at": "2016-10-11T20:05:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188090",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:85" align="right">Comment 85</div>

Cc'ing some people who worked on libgap (#6391) in the hope that we can settle the GAP_DIR / GAP_ROOT_DIR / GAP_DATA_DIR question and move this ticket forward.



---

archive/issue_comments_188091.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">Comment 86</div>\n\nReplying to [@mkoeppe](#comment%3A85):\n> Cc'ing some people who worked on libgap (#6391) in the hope that we can settle the GAP_DIR / GAP_ROOT_DIR / GAP_DATA_DIR question and move this ticket forward.\n\nOK, so what is your proposal in this regard? GAP suffers from the same \"missing `install` target\" illness as Sage....",
    "created_at": "2016-10-11T20:19:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188091",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:86" align="right">Comment 86</div>

Replying to [@mkoeppe](#comment%3A85):
> Cc'ing some people who worked on libgap (#6391) in the hope that we can settle the GAP_DIR / GAP_ROOT_DIR / GAP_DATA_DIR question and move this ticket forward.

OK, so what is your proposal in this regard? GAP suffers from the same "missing `install` target" illness as Sage....



---

archive/issue_comments_188092.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">Comment 87</div>\n\nWe are looking for the correct naming of the variable that holds the directory passed to libgap at initialization time.\nThe naming should make sense both for GAP's traditional (upstream) installation and for Debian's or other distributions' cleaned up installation.",
    "created_at": "2016-10-11T20:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188092",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:87" align="right">Comment 87</div>

We are looking for the correct naming of the variable that holds the directory passed to libgap at initialization time.
The naming should make sense both for GAP's traditional (upstream) installation and for Debian's or other distributions' cleaned up installation.



---

archive/issue_comments_188093.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">Comment 88</div>\n\nReplying to [@mkoeppe](#comment%3A87):\n> We are looking for the correct naming of the variable that holds the directory passed to libgap at initialization time.\n> The naming should make sense both for GAP's traditional (upstream) installation and for Debian's or other distributions' cleaned up installation.\n\nlibGAP is a purely Sage affair, there is no real upstream, so there is no \"tradition\" in this sense.",
    "created_at": "2016-10-11T21:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188093",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:88" align="right">Comment 88</div>

Replying to [@mkoeppe](#comment%3A87):
> We are looking for the correct naming of the variable that holds the directory passed to libgap at initialization time.
> The naming should make sense both for GAP's traditional (upstream) installation and for Debian's or other distributions' cleaned up installation.

libGAP is a purely Sage affair, there is no real upstream, so there is no "tradition" in this sense.



---

archive/issue_comments_188094.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">Comment 89</div>\n\nbut libgap does seem to depend on GAP's installation, no?",
    "created_at": "2016-10-11T22:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188094",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:89" align="right">Comment 89</div>

but libgap does seem to depend on GAP's installation, no?



---

archive/issue_comments_188095.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">Comment 90</div>\n\nReplying to [@mkoeppe](#comment%3A89):\n> but libgap does seem to depend on GAP's installation, no? \n\nyes it does, sure, as enshrined in `build/pkgs/libgap/dependencies`",
    "created_at": "2016-10-11T22:53:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188095",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:90" align="right">Comment 90</div>

Replying to [@mkoeppe](#comment%3A89):
> but libgap does seem to depend on GAP's installation, no? 

yes it does, sure, as enshrined in `build/pkgs/libgap/dependencies`



---

archive/issue_comments_188096.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">Comment 91</div>\n\nReplying to [@mkoeppe](#comment%3A89):\n> but libgap does seem to depend on GAP's installation, no? \n\nIt absolutely does. In fact it needs to know where gap packages are if it want to use them. So it really need what gap calls `GAP_ROOT_DIR`.",
    "created_at": "2016-10-11T22:54:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188096",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:91" align="right">Comment 91</div>

Replying to [@mkoeppe](#comment%3A89):
> but libgap does seem to depend on GAP's installation, no? 

It absolutely does. In fact it needs to know where gap packages are if it want to use them. So it really need what gap calls `GAP_ROOT_DIR`.



---

archive/issue_comments_188097.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">Comment 92</div>\n\nThe Debian/Ubuntu gap package splits the gap installation into `/usr/lib/gap` and `/usr/share/gap`. \n\n```\nroot@2f38a5ed7694:/src# ls -l /usr/lib/gap\ntotal 8\ndrwxr-xr-x 2 root root 4096 Oct 27 23:24 bin\nlrwxrwxrwx 1 root root   17 Jun 18  2015 src -> ../../include/gap\n-rw-r--r-- 1 root root  110 Jun 18  2015 sysinfo.gap\nroot@2f38a5ed7694:/src# ls -l /usr/share/gap\ntotal 56\ndrwxr-xr-x 5 root root  4096 Oct 27 23:24 doc\ndrwxr-xr-x 2 root root  4096 Oct 27 23:24 etc\ndrwxr-xr-x 2 root root  4096 Oct 27 23:24 grp\ndrwxr-xr-x 2 root root 20480 Oct 27 23:24 lib\ndrwxr-xr-x 3 root root  4096 Oct 27 23:24 pkg\ndrwxr-xr-x 3 root root  4096 Oct 27 23:24 prim\ndrwxr-xr-x 4 root root  4096 Oct 27 23:24 small\nlrwxrwxrwx 1 root root    25 Jun 18  2015 sysinfo.gap -> ../../lib/gap/sysinfo.gap\ndrwxr-xr-x 2 root root 12288 Oct 27 23:24 trans\n```\nI did a quick check of building libgap using the gap package on Ubuntu. The relevant directory for libgap seems to be `/usr/share/gap`.",
    "created_at": "2016-10-28T00:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188097",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:92" align="right">Comment 92</div>

The Debian/Ubuntu gap package splits the gap installation into `/usr/lib/gap` and `/usr/share/gap`. 

```
root@2f38a5ed7694:/src# ls -l /usr/lib/gap
total 8
drwxr-xr-x 2 root root 4096 Oct 27 23:24 bin
lrwxrwxrwx 1 root root   17 Jun 18  2015 src -> ../../include/gap
-rw-r--r-- 1 root root  110 Jun 18  2015 sysinfo.gap
root@2f38a5ed7694:/src# ls -l /usr/share/gap
total 56
drwxr-xr-x 5 root root  4096 Oct 27 23:24 doc
drwxr-xr-x 2 root root  4096 Oct 27 23:24 etc
drwxr-xr-x 2 root root  4096 Oct 27 23:24 grp
drwxr-xr-x 2 root root 20480 Oct 27 23:24 lib
drwxr-xr-x 3 root root  4096 Oct 27 23:24 pkg
drwxr-xr-x 3 root root  4096 Oct 27 23:24 prim
drwxr-xr-x 4 root root  4096 Oct 27 23:24 small
lrwxrwxrwx 1 root root    25 Jun 18  2015 sysinfo.gap -> ../../lib/gap/sysinfo.gap
drwxr-xr-x 2 root root 12288 Oct 27 23:24 trans
```
I did a quick check of building libgap using the gap package on Ubuntu. The relevant directory for libgap seems to be `/usr/share/gap`.



---

archive/issue_comments_188098.json:
```json
{
    "body": "Changed branch from **[u/embray/ticket-15105](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-15105)** to **[u/mkoeppe/ticket-15105](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket-15105)**",
    "created_at": "2016-10-30T05:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188098",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/embray/ticket-15105](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-15105)** to **[u/mkoeppe/ticket-15105](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket-15105)**



---

archive/issue_comments_188099.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">Comment 94</div>\n\nI've split out some commits to #21783 and #21784.\n\nRebased the remaining commits on top of 7.5.beta0.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/437827b89af4dcf6842dd5d343489247fb779b16\">437827b</a></td><td><code>unhardwire runtime paths in various cases</code></td></tr></table>\n",
    "created_at": "2016-10-30T05:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188099",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:94" align="right">Comment 94</div>

I've split out some commits to #21783 and #21784.

Rebased the remaining commits on top of 7.5.beta0.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/437827b89af4dcf6842dd5d343489247fb779b16">437827b</a></td><td><code>unhardwire runtime paths in various cases</code></td></tr></table>




---

archive/issue_comments_188100.json:
```json
{
    "body": "Changed commit from **[807588e](https://github.com/sagemath/sagetrac-mirror/commit/807588ebd019f99f2c3e9ed82207a1d5c1d50a67)** to **[437827b](https://github.com/sagemath/sagetrac-mirror/commit/437827b89af4dcf6842dd5d343489247fb779b16)**",
    "created_at": "2016-10-30T05:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188100",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[807588e](https://github.com/sagemath/sagetrac-mirror/commit/807588ebd019f99f2c3e9ed82207a1d5c1d50a67)** to **[437827b](https://github.com/sagemath/sagetrac-mirror/commit/437827b89af4dcf6842dd5d343489247fb779b16)**



---

archive/issue_comments_188101.json:
```json
{
    "body": "Changed author from **Felix Salfelder, Erik Bray** to **Felix Salfelder, Erik Bray, Matthias Koeppe**",
    "created_at": "2016-10-30T05:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188101",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Felix Salfelder, Erik Bray** to **Felix Salfelder, Erik Bray, Matthias Koeppe**



---

archive/issue_events_197129.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-30T05:33:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197129"
}
```



---

archive/issue_events_197130.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-30T05:33:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197130"
}
```



---

archive/issue_comments_188102.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">Comment 95</div>\n\nMany of my comments starting with [comment:56] have not been taken into account.",
    "created_at": "2016-10-31T08:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188102",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:95" align="right">Comment 95</div>

Many of my comments starting with [comment:56] have not been taken into account.



---

archive/issue_events_197131.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-31T08:04:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197131"
}
```



---

archive/issue_events_197132.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-31T08:04:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197132"
}
```



---

archive/issue_comments_188103.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">Comment 96</div>\n\nReplying to [@kiwifb](#comment%3A91):\n> It absolutely does. In fact it needs to know where gap packages are if it want to use them. So it really need what gap calls `GAP_ROOT_DIR`. \n\n`GAP_ROOT_DIR` would indeed be a much better name than the misleading `GAP_DATA_DIR`.",
    "created_at": "2016-11-01T08:12:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188103",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:96" align="right">Comment 96</div>

Replying to [@kiwifb](#comment%3A91):
> It absolutely does. In fact it needs to know where gap packages are if it want to use them. So it really need what gap calls `GAP_ROOT_DIR`. 

`GAP_ROOT_DIR` would indeed be a much better name than the misleading `GAP_DATA_DIR`.



---

archive/issue_comments_188104.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">Comment 97</div>\n\nThere are also doctest failures (see patchbot).\n\nWhy was this ticket set to needs_review?",
    "created_at": "2016-11-01T08:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188104",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:97" align="right">Comment 97</div>

There are also doctest failures (see patchbot).

Why was this ticket set to needs_review?



---

archive/issue_comments_188105.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">Comment 98</div>\n\nSomeone insists on importing variables from `sage.misc.misc` instead of `sage.env` ergo doctest failures.",
    "created_at": "2016-11-01T08:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188105",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:98" align="right">Comment 98</div>

Someone insists on importing variables from `sage.misc.misc` instead of `sage.env` ergo doctest failures.



---

archive/issue_comments_188106.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">Comment 99</div>\n\nRight, I set `needs_review` by mistake.",
    "created_at": "2016-11-01T21:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188106",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:99" align="right">Comment 99</div>

Right, I set `needs_review` by mistake.



---

archive/issue_comments_188107.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5db9663890c11981bbf9af923ea6fd80cdcf74c4\">5db9663</a></td><td><code>lattice_polytope: Use POLYTOPE_DATA_DIR directly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b011153b2e729045712c62e7b67d5e26f6f0d6ed\">b011153</a></td><td><code>ec_database: Use ELLCURVE_DATA_DIR directly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/171e139519ed48a58ca42c059f91aecfa858c8e1\">171e139</a></td><td><code>Rename CONWAY_DATA_DIR to CONWAY_POLYNOMIALS_DATA_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a222fc9b68e80f274e8a77dae98ac0fdef06b767\">a222fc9</a></td><td><code>Rename GAP_DATA_DIR to GAP_ROOT_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a80df367fbddcbcb7e4df637efdc38e5a2e22eff\">a80df36</a></td><td><code>Import GRAPHS_DATA_DIR from sage.env, not sage.misc.misc</code></td></tr></table>\n",
    "created_at": "2016-11-01T21:54:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188107",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0" align="right">Comment 0</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5db9663890c11981bbf9af923ea6fd80cdcf74c4">5db9663</a></td><td><code>lattice_polytope: Use POLYTOPE_DATA_DIR directly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b011153b2e729045712c62e7b67d5e26f6f0d6ed">b011153</a></td><td><code>ec_database: Use ELLCURVE_DATA_DIR directly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/171e139519ed48a58ca42c059f91aecfa858c8e1">171e139</a></td><td><code>Rename CONWAY_DATA_DIR to CONWAY_POLYNOMIALS_DATA_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a222fc9b68e80f274e8a77dae98ac0fdef06b767">a222fc9</a></td><td><code>Rename GAP_DATA_DIR to GAP_ROOT_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a80df367fbddcbcb7e4df637efdc38e5a2e22eff">a80df36</a></td><td><code>Import GRAPHS_DATA_DIR from sage.env, not sage.misc.misc</code></td></tr></table>




---

archive/issue_comments_188108.json:
```json
{
    "body": "Changed commit from **[437827b](https://github.com/sagemath/sagetrac-mirror/commit/437827b89af4dcf6842dd5d343489247fb779b16)** to **[a80df36](https://github.com/sagemath/sagetrac-mirror/commit/a80df367fbddcbcb7e4df637efdc38e5a2e22eff)**",
    "created_at": "2016-11-01T21:54:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188108",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[437827b](https://github.com/sagemath/sagetrac-mirror/commit/437827b89af4dcf6842dd5d343489247fb779b16)** to **[a80df36](https://github.com/sagemath/sagetrac-mirror/commit/a80df367fbddcbcb7e4df637efdc38e5a2e22eff)**



---

archive/issue_comments_188109.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41b40fd6169187972094538df26f5e4884f908e6\">41b40fd</a></td><td><code>unhardwire runtime paths in various cases</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e0738ebbee60f5a11ce333e7d6b511d4715b607\">6e0738e</a></td><td><code>lattice_polytope: Use POLYTOPE_DATA_DIR directly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82f98827ad7852f941fec0795d3f4898665788c3\">82f9882</a></td><td><code>ec_database: Use ELLCURVE_DATA_DIR directly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d56551aec8ad65c6b42029f647a035749f74979\">0d56551</a></td><td><code>Rename CONWAY_DATA_DIR to CONWAY_POLYNOMIALS_DATA_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7a462edf41efd41ee5179e649a2e0bc68bf8213\">f7a462e</a></td><td><code>Rename GAP_DATA_DIR to GAP_ROOT_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf810a2203c8b6bb75f2e2539fe21bb3187b9558\">cf810a2</a></td><td><code>Import GRAPHS_DATA_DIR from sage.env, not sage.misc.misc</code></td></tr></table>\n",
    "created_at": "2016-11-01T21:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188109",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1" align="right">Comment 1</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41b40fd6169187972094538df26f5e4884f908e6">41b40fd</a></td><td><code>unhardwire runtime paths in various cases</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e0738ebbee60f5a11ce333e7d6b511d4715b607">6e0738e</a></td><td><code>lattice_polytope: Use POLYTOPE_DATA_DIR directly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82f98827ad7852f941fec0795d3f4898665788c3">82f9882</a></td><td><code>ec_database: Use ELLCURVE_DATA_DIR directly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d56551aec8ad65c6b42029f647a035749f74979">0d56551</a></td><td><code>Rename CONWAY_DATA_DIR to CONWAY_POLYNOMIALS_DATA_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7a462edf41efd41ee5179e649a2e0bc68bf8213">f7a462e</a></td><td><code>Rename GAP_DATA_DIR to GAP_ROOT_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf810a2203c8b6bb75f2e2539fe21bb3187b9558">cf810a2</a></td><td><code>Import GRAPHS_DATA_DIR from sage.env, not sage.misc.misc</code></td></tr></table>




---

archive/issue_comments_188110.json:
```json
{
    "body": "Changed commit from **[a80df36](https://github.com/sagemath/sagetrac-mirror/commit/a80df367fbddcbcb7e4df637efdc38e5a2e22eff)** to **[cf810a2](https://github.com/sagemath/sagetrac-mirror/commit/cf810a2203c8b6bb75f2e2539fe21bb3187b9558)**",
    "created_at": "2016-11-01T21:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188110",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a80df36](https://github.com/sagemath/sagetrac-mirror/commit/a80df367fbddcbcb7e4df637efdc38e5a2e22eff)** to **[cf810a2](https://github.com/sagemath/sagetrac-mirror/commit/cf810a2203c8b6bb75f2e2539fe21bb3187b9558)**



---

archive/issue_comments_188111.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2c3798e7c3e0da3ead876ffd9b093e947b8f6c7\">a2c3798</a></td><td><code>GraphClasses: fixup use of GRAPHS_DATA_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65a00a5b5a724fab0685def2ef103a299c740ac4\">65a00a5</a></td><td><code>Remove unused variables SINGULAR_INCLUDEDIR, FACTORY_INCLUDEDIR</code></td></tr></table>\n",
    "created_at": "2016-11-02T01:49:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188111",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2c3798e7c3e0da3ead876ffd9b093e947b8f6c7">a2c3798</a></td><td><code>GraphClasses: fixup use of GRAPHS_DATA_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65a00a5b5a724fab0685def2ef103a299c740ac4">65a00a5</a></td><td><code>Remove unused variables SINGULAR_INCLUDEDIR, FACTORY_INCLUDEDIR</code></td></tr></table>




---

archive/issue_comments_188112.json:
```json
{
    "body": "Changed commit from **[cf810a2](https://github.com/sagemath/sagetrac-mirror/commit/cf810a2203c8b6bb75f2e2539fe21bb3187b9558)** to **[65a00a5](https://github.com/sagemath/sagetrac-mirror/commit/65a00a5b5a724fab0685def2ef103a299c740ac4)**",
    "created_at": "2016-11-02T01:49:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188112",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cf810a2](https://github.com/sagemath/sagetrac-mirror/commit/cf810a2203c8b6bb75f2e2539fe21bb3187b9558)** to **[65a00a5](https://github.com/sagemath/sagetrac-mirror/commit/65a00a5b5a724fab0685def2ef103a299c740ac4)**



---

archive/issue_comments_188113.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">Comment 103</div>\n\nReplying to [@kiwifb](#comment%3A78):\n>  using /usr/share/gap means patching, I guess debian has the patch I am thinking about\n\nI've created ticket #21796 for adopting Debian's layout of GAP.",
    "created_at": "2016-11-02T01:56:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188113",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:103" align="right">Comment 103</div>

Replying to [@kiwifb](#comment%3A78):
>  using /usr/share/gap means patching, I guess debian has the patch I am thinking about

I've created ticket #21796 for adopting Debian's layout of GAP.



---

archive/issue_events_197133.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-02T01:58:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197133"
}
```



---

archive/issue_events_197134.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-02T01:58:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197134"
}
```



---

archive/issue_comments_188114.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nThe present ticket now passes doctests (on my machine), and I believe I have taken care of the various comments.\n\nNeeds review.",
    "created_at": "2016-11-02T01:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188114",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">Comment 4</div>

The present ticket now passes doctests (on my machine), and I believe I have taken care of the various comments.

Needs review.



---

archive/issue_comments_188115.json:
```json
{
    "body": "Changed dependencies from **#17254** to none",
    "created_at": "2016-11-02T07:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188115",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#17254** to none



---

archive/issue_comments_188116.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-11-02T09:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188116",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_188117.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">Comment 106</div>\n\nReplying to [@mkoeppe](#comment%3A104):\n> The present ticket now passes doctests (on my machine), and I believe I have taken care of the various comments.\n\nTwo more details:\n\n1. in `src/sage/env.py`, remove\n\n```\nUNAME = os.uname()[0]\n```\nas `UNAME` is actually one of the standard variables.\n\n2. In `src/sage/libs/gap/util.pyx`, remove `gapdir = GAP_ROOT_DIR` and just use `GAP_ROOT_DIR` instead of `gapdir`.\n\nIf you fix these and all tests pass, then this can be set to positive_review.",
    "created_at": "2016-11-02T09:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188117",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:106" align="right">Comment 106</div>

Replying to [@mkoeppe](#comment%3A104):
> The present ticket now passes doctests (on my machine), and I believe I have taken care of the various comments.

Two more details:

1. in `src/sage/env.py`, remove

```
UNAME = os.uname()[0]
```
as `UNAME` is actually one of the standard variables.

2. In `src/sage/libs/gap/util.pyx`, remove `gapdir = GAP_ROOT_DIR` and just use `GAP_ROOT_DIR` instead of `gapdir`.

If you fix these and all tests pass, then this can be set to positive_review.



---

archive/issue_events_197135.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-02T09:22:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197135"
}
```



---

archive/issue_events_197136.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-02T09:22:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197136"
}
```



---

archive/issue_comments_188118.json:
```json
{
    "body": "Changed commit from **[65a00a5](https://github.com/sagemath/sagetrac-mirror/commit/65a00a5b5a724fab0685def2ef103a299c740ac4)** to **[45c5dd0](https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b)**",
    "created_at": "2016-11-03T04:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188118",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[65a00a5](https://github.com/sagemath/sagetrac-mirror/commit/65a00a5b5a724fab0685def2ef103a299c740ac4)** to **[45c5dd0](https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b)**



---

archive/issue_comments_188119.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae20d153f2b3ec5484b23c4ce9e188358dbcf170\">ae20d15</a></td><td><code>Remove duplicate assignment to UNAME</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b\">45c5dd0</a></td><td><code>gap_root: slight simplification</code></td></tr></table>\n",
    "created_at": "2016-11-03T04:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188119",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae20d153f2b3ec5484b23c4ce9e188358dbcf170">ae20d15</a></td><td><code>Remove duplicate assignment to UNAME</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b">45c5dd0</a></td><td><code>gap_root: slight simplification</code></td></tr></table>




---

archive/issue_events_197137.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-03T04:01:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197137"
}
```



---

archive/issue_events_197138.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-03T04:01:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197138"
}
```



---

archive/issue_events_197139.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T13:04:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197139"
}
```



---

archive/issue_events_197140.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T13:04:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197140"
}
```



---

archive/issue_comments_188120.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nthank you guys for making that happen.",
    "created_at": "2016-11-04T13:09:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188120",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:0" align="right">Comment 0</div>

thank you guys for making that happen.



---

archive/issue_comments_188121.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">Comment 111</div>\n\nReplying to [@sagetrac-felixs](#comment%3A110):\n> thank you guys for making that happen.\n\nWell, we did postpone all controversial changes to other tickets :-)",
    "created_at": "2016-11-04T13:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188121",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:111" align="right">Comment 111</div>

Replying to [@sagetrac-felixs](#comment%3A110):
> thank you guys for making that happen.

Well, we did postpone all controversial changes to other tickets :-)



---

archive/issue_comments_188122.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nLet me mention one more follow-up: #21821",
    "created_at": "2016-11-04T15:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188122",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">Comment 2</div>

Let me mention one more follow-up: #21821



---

archive/issue_comments_188123.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nNow that it has made it onto Volker's branch and I can see easily how it interact with sage-on-gentoo, I feel sorry about all that `GAP_ROOT_DIR` business.\n\nWe should just have eliminated it because it is totally unnecessary. The variable is only used in `sage/libs/gap/util.pyx` in the function `gap_root` which basically return the value of `GAP_ROOT_DIR`\n\n```\ndef gap_root():\n    \"\"\"\n    Find the location of the GAP root install which is stored in the gap\n    startup script.\n    EXAMPLES::\n        sage: from sage.libs.gap.util import gap_root\n        sage: gap_root()   # random output\n        '/home/vbraun/opt/sage-5.3.rc0/local/gap/latest'\n    \"\"\"\n    import os.path\n    if os.path.exists(GAP_ROOT_DIR):\n        return GAP_ROOT_DIR\n    print('The gap-4.5.5.spkg (or later) seems to be not installed!')\n    gap_sh = open(os.path.join(SAGE_LOCAL, 'bin', 'gap')).read().splitlines()\n    gapdir = filter(lambda dir:dir.strip().startswith('GAP_DIR'), gap_sh)[0]\n    gapdir = gapdir.split('\"')[1]\n    gapdir = gapdir.replace('$SAGE_LOCAL', SAGE_LOCAL)\n    return gapdir\n```\nSo if `GAP_ROOT_DIR` is not defined, a mwarning is issued and then the `gap` script is looked over for `GAP_DIR` which gives the right result both in Gentoo [sage-on-gentoo relies solely on the automated procedure] and in vanilla sage. Not sure about debian, I must say.\n\nBut I feel we were silly because the automated procedure works well so we don't really need the variable. And if we decide to use the variable, what is the point of keeping the function `gap_root`? Apart from searching for all the instances of `gap_root` to replace them that is.\n\nAnyway, that's a potential clean up for another ticket.",
    "created_at": "2016-11-06T20:44:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188123",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">Comment 3</div>

Now that it has made it onto Volker's branch and I can see easily how it interact with sage-on-gentoo, I feel sorry about all that `GAP_ROOT_DIR` business.

We should just have eliminated it because it is totally unnecessary. The variable is only used in `sage/libs/gap/util.pyx` in the function `gap_root` which basically return the value of `GAP_ROOT_DIR`

```
def gap_root():
    """
    Find the location of the GAP root install which is stored in the gap
    startup script.
    EXAMPLES::
        sage: from sage.libs.gap.util import gap_root
        sage: gap_root()   # random output
        '/home/vbraun/opt/sage-5.3.rc0/local/gap/latest'
    """
    import os.path
    if os.path.exists(GAP_ROOT_DIR):
        return GAP_ROOT_DIR
    print('The gap-4.5.5.spkg (or later) seems to be not installed!')
    gap_sh = open(os.path.join(SAGE_LOCAL, 'bin', 'gap')).read().splitlines()
    gapdir = filter(lambda dir:dir.strip().startswith('GAP_DIR'), gap_sh)[0]
    gapdir = gapdir.split('"')[1]
    gapdir = gapdir.replace('$SAGE_LOCAL', SAGE_LOCAL)
    return gapdir
```
So if `GAP_ROOT_DIR` is not defined, a mwarning is issued and then the `gap` script is looked over for `GAP_DIR` which gives the right result both in Gentoo [sage-on-gentoo relies solely on the automated procedure] and in vanilla sage. Not sure about debian, I must say.

But I feel we were silly because the automated procedure works well so we don't really need the variable. And if we decide to use the variable, what is the point of keeping the function `gap_root`? Apart from searching for all the instances of `gap_root` to replace them that is.

Anyway, that's a potential clean up for another ticket.



---

archive/issue_comments_188124.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">Comment 114</div>\n\nReplying to [@kiwifb](#comment%3A113):\n>[...] I feel sorry about all that `GAP_ROOT_DIR` business.\n> We should just have eliminated it because it is totally unnecessary. The variable is only used in `sage/libs/gap/util.pyx` in the function `gap_root` which basically return the value of `GAP_ROOT_DIR` [...]\n> So if `GAP_ROOT_DIR` is not defined, a mwarning is issued and then the `gap` script is looked over for `GAP_DIR` which gives the right result both in Gentoo [sage-on-gentoo relies solely on the automated procedure] and in vanilla sage. \n\nYes, I saw this code. I think it does not belong into sagelib proper, but we should move it to compile-time configuration of sagelib (which would set the GAP_ROOT_DIR variable). So I do think that introducing the GAP_ROOT_DIR variable was a good step.",
    "created_at": "2016-11-06T20:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188124",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:114" align="right">Comment 114</div>

Replying to [@kiwifb](#comment%3A113):
>[...] I feel sorry about all that `GAP_ROOT_DIR` business.
> We should just have eliminated it because it is totally unnecessary. The variable is only used in `sage/libs/gap/util.pyx` in the function `gap_root` which basically return the value of `GAP_ROOT_DIR` [...]
> So if `GAP_ROOT_DIR` is not defined, a mwarning is issued and then the `gap` script is looked over for `GAP_DIR` which gives the right result both in Gentoo [sage-on-gentoo relies solely on the automated procedure] and in vanilla sage. 

Yes, I saw this code. I think it does not belong into sagelib proper, but we should move it to compile-time configuration of sagelib (which would set the GAP_ROOT_DIR variable). So I do think that introducing the GAP_ROOT_DIR variable was a good step.



---

archive/issue_comments_188125.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nA lot of stuff should be moved to \"configuration\" time proper. Definitely for another day. \n\nBut is there a point in having a variable when you can just query its value from the application itself? Plus that means we can further decouple `gap` from `sagelib`. We don't need to know anything about where `gap` is really installed, we get the right value so long as `gap` is in the `PATH`. In short eliminating that variable makes it easier to switch to a system install of `gap` (cross fingers about debian).",
    "created_at": "2016-11-06T21:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188125",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">Comment 5</div>

A lot of stuff should be moved to "configuration" time proper. Definitely for another day. 

But is there a point in having a variable when you can just query its value from the application itself? Plus that means we can further decouple `gap` from `sagelib`. We don't need to know anything about where `gap` is really installed, we get the right value so long as `gap` is in the `PATH`. In short eliminating that variable makes it easier to switch to a system install of `gap` (cross fingers about debian).



---

archive/issue_comments_188126.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nOK at the moment we still need to know where the `gap` executable is located to populate `gap_sh` but that could be dealt with.",
    "created_at": "2016-11-06T21:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188126",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">Comment 6</div>

OK at the moment we still need to know where the `gap` executable is located to populate `gap_sh` but that could be dealt with.



---

archive/issue_comments_188127.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI wouldn't call parsing that script \"querying the application\"...",
    "created_at": "2016-11-06T21:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188127",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">Comment 7</div>

I wouldn't call parsing that script "querying the application"...



---

archive/issue_comments_188128.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nAnd, really, actually it belongs into libgap configuration.",
    "created_at": "2016-11-06T21:17:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188128",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">Comment 8</div>

And, really, actually it belongs into libgap configuration.



---

archive/issue_comments_188129.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nHave to agree, it is a `libgap` problem. Once sorted in `libgap` it is all moot.",
    "created_at": "2016-11-06T21:21:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188129",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">Comment 9</div>

Have to agree, it is a `libgap` problem. Once sorted in `libgap` it is all moot.



---

archive/issue_comments_188130.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nI recently created a pull request for libgap in this direction: https://bitbucket.org/vbraun/libgap/pull-requests/9",
    "created_at": "2016-11-06T21:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188130",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:0" align="right">Comment 0</div>

I recently created a pull request for libgap in this direction: https://bitbucket.org/vbraun/libgap/pull-requests/9



---

archive/issue_comments_188131.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">Comment 121</div>\n\nReplying to [@kiwifb](#comment%3A115):\n> A lot of stuff should be moved to \"configuration\" time proper. Definitely for another day. \n> \n> But is there a point in having a variable when you can just query its value from the application itself?\n\nYes.  I can think of at least two reasons:\n\n1) Helpful for some system (not that I have one in mind) where the search code doesn't work--it's always kind to provide some way to configure an alternate path.\n\n2) For testing against alternate GAP installs.",
    "created_at": "2016-11-07T14:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188131",
    "user": "https://github.com/embray"
}
```

<div id="comment:121" align="right">Comment 121</div>

Replying to [@kiwifb](#comment%3A115):
> A lot of stuff should be moved to "configuration" time proper. Definitely for another day. 
> 
> But is there a point in having a variable when you can just query its value from the application itself?

Yes.  I can think of at least two reasons:

1) Helpful for some system (not that I have one in mind) where the search code doesn't work--it's always kind to provide some way to configure an alternate path.

2) For testing against alternate GAP installs.



---

archive/issue_comments_188132.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/ticket-15105](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket-15105)** to **[45c5dd0](https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b)**",
    "created_at": "2016-11-07T18:27:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188132",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/ticket-15105](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket-15105)** to **[45c5dd0](https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b)**



---

archive/issue_events_197141.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-07T18:27:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197141"
}
```



---

archive/issue_events_197142.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b2f7d0338ec832fac947044b9e19d56fce579da3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-07T18:27:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15105#event-197142"
}
```



---

archive/issue_comments_188133.json:
```json
{
    "body": "Changed commit from **[45c5dd0](https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b)** to none",
    "created_at": "2016-11-08T00:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188133",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[45c5dd0](https://github.com/sagemath/sagetrac-mirror/commit/45c5dd010981c26d99773e97b9589a305326b90b)** to none



---

archive/issue_comments_188134.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">Comment 123</div>\n\nReplying to [@embray](#comment%3A121):\n> Replying to [@kiwifb](#comment%3A115):\n> > A lot of stuff should be moved to \"configuration\" time proper. Definitely for another day. \n> > \n> > But is there a point in having a variable when you can just query its value from the application itself?\n\n> \n> Yes.  I can think of at least two reasons:\n> \n> 1) Helpful for some system (not that I have one in mind) where the search code doesn't work--it's always kind to provide some way to configure an alternate path.\n> \n> 2) For testing against alternate GAP installs. \n\n1) a good case is probably cross compilation of some kind, where things will be available at runtime but not when you build.\n\n2) well I was thinking of asking `gap` directly (I have tested this) so the only requirement is for the `gap` executable to be in the `PATH`. However technically there is more than one valid path that should be looked up and libgap only look at one (the default system one).",
    "created_at": "2016-11-08T00:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15105#issuecomment-188134",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:123" align="right">Comment 123</div>

Replying to [@embray](#comment%3A121):
> Replying to [@kiwifb](#comment%3A115):
> > A lot of stuff should be moved to "configuration" time proper. Definitely for another day. 
> > 
> > But is there a point in having a variable when you can just query its value from the application itself?

> 
> Yes.  I can think of at least two reasons:
> 
> 1) Helpful for some system (not that I have one in mind) where the search code doesn't work--it's always kind to provide some way to configure an alternate path.
> 
> 2) For testing against alternate GAP installs. 

1) a good case is probably cross compilation of some kind, where things will be available at runtime but not when you build.

2) well I was thinking of asking `gap` directly (I have tested this) so the only requirement is for the `gap` executable to be in the `PATH`. However technically there is more than one valid path that should be looked up and libgap only look at one (the default system one).
