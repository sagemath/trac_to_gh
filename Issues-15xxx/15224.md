# Issue 15224: Iterate over the points of a toric variety

archive/issues_014987.json:
```json
{
    "assignees": [],
    "body": "This ticket makes the point homset iterable. This is useful to access the set of points on a toric variety over a finite field\n\n```\nsage: P123 = toric_varieties.P2_123(base_ring=GF(3))\nsage: list(P123.point_set())\n[[0 : 0 : 1],\n [1 : 0 : 0],\n [2 : 0 : 0],\n [0 : 1 : 0],\n [0 : 1 : 1],\n [0 : 1 : 2],\n [1 : 0 : 1],\n [2 : 0 : 1],\n [1 : 1 : 0],\n [2 : 1 : 0],\n [1 : 1 : 1],\n [1 : 1 : 2],\n [2 : 1 : 1],\n [2 : 1 : 2]]\n```\n\nCC:  @novoselt\n\nKeywords: **sd53**\n\nBranch/Commit: **[u/vbraun/toric_variety_points](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/toric_variety_points) @ [`f00af8f`](https://github.com/sagemath/sagetrac-mirror/commit/f00af8f68c632d42463835d97c9b58e33b6aaf59)**\n\nReviewer: **Ursula Whitcher**\n\nAuthor: **Volker Braun**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15224_\n\n",
    "closed_at": "2013-12-18T15:54:35Z",
    "created_at": "2013-09-24T13:53:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Iterate over the points of a toric variety",
    "type": "issue",
    "updated_at": "2013-12-18T15:54:35Z",
    "url": "https://github.com/sagemath/sage/issues/15224",
    "user": "https://github.com/vbraun"
}
```
This ticket makes the point homset iterable. This is useful to access the set of points on a toric variety over a finite field

```
sage: P123 = toric_varieties.P2_123(base_ring=GF(3))
sage: list(P123.point_set())
[[0 : 0 : 1],
 [1 : 0 : 0],
 [2 : 0 : 0],
 [0 : 1 : 0],
 [0 : 1 : 1],
 [0 : 1 : 2],
 [1 : 0 : 1],
 [2 : 0 : 1],
 [1 : 1 : 0],
 [2 : 1 : 0],
 [1 : 1 : 1],
 [1 : 1 : 2],
 [2 : 1 : 1],
 [2 : 1 : 2]]
```

CC:  @novoselt

Keywords: **sd53**

Branch/Commit: **[u/vbraun/toric_variety_points](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/toric_variety_points) @ [`f00af8f`](https://github.com/sagemath/sagetrac-mirror/commit/f00af8f68c632d42463835d97c9b58e33b6aaf59)**

Reviewer: **Ursula Whitcher**

Author: **Volker Braun**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/15224_





---

archive/issue_events_217338.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-09-24T13:53:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217338"
}
```



---

archive/issue_events_217339.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-09-24T13:53:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217339"
}
```



---

archive/issue_events_217340.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-09-24T13:53:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217340"
}
```



---

archive/issue_events_217341.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-09-24T13:53:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217341"
}
```



---

archive/issue_comments_187637.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2013-09-24T23:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187637",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_comments_187638.json:
```json
{
    "body": "Branch: **[u/vbraun/toric_variety_points](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/toric_variety_points)**",
    "created_at": "2013-09-24T23:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187638",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/toric_variety_points](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/toric_variety_points)**



---

archive/issue_comments_187639.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,20 @@\n-Useful to access the set of points on a toric variety over a finite field\n+This ticket makes the point homset iterable. This is useful to access the set of points on a toric variety over a finite field\n+\n+```\n+sage: P123 = toric_varieties.P2_123(base_ring=GF(3))\n+sage: list(P123.point_set())\n+[[0 : 0 : 1],\n+ [1 : 0 : 0],\n+ [2 : 0 : 0],\n+ [0 : 1 : 0],\n+ [0 : 1 : 1],\n+ [0 : 1 : 2],\n+ [1 : 0 : 1],\n+ [2 : 0 : 1],\n+ [1 : 1 : 0],\n+ [2 : 1 : 0],\n+ [1 : 1 : 1],\n+ [1 : 1 : 2],\n+ [2 : 1 : 1],\n+ [2 : 1 : 2]]\n+```\n``````\n",
    "created_at": "2013-09-24T23:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187639",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,20 @@
-Useful to access the set of points on a toric variety over a finite field
+This ticket makes the point homset iterable. This is useful to access the set of points on a toric variety over a finite field
+
+```
+sage: P123 = toric_varieties.P2_123(base_ring=GF(3))
+sage: list(P123.point_set())
+[[0 : 0 : 1],
+ [1 : 0 : 0],
+ [2 : 0 : 0],
+ [0 : 1 : 0],
+ [0 : 1 : 1],
+ [0 : 1 : 2],
+ [1 : 0 : 1],
+ [2 : 0 : 1],
+ [1 : 1 : 0],
+ [2 : 1 : 0],
+ [1 : 1 : 1],
+ [1 : 1 : 2],
+ [2 : 1 : 1],
+ [2 : 1 : 2]]
+```
``````




---

archive/issue_comments_187640.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:230127e]</code></td><td><code>Added iterator over the points of a toric variety</code></td></tr></table>\n",
    "created_at": "2013-09-24T23:08:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187640",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:230127e]</code></td><td><code>Added iterator over the points of a toric variety</code></td></tr></table>




---

archive/issue_comments_187641.json:
```json
{
    "body": "Commit: **[`230127e`](https://github.com/sagemath/sagetrac-mirror/commit/230127e7b85dd552c1347d72e497f41930cd0948)**",
    "created_at": "2013-09-24T23:08:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187641",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`230127e`](https://github.com/sagemath/sagetrac-mirror/commit/230127e7b85dd552c1347d72e497f41930cd0948)**



---

archive/issue_comments_187642.json:
```json
{
    "body": "Changed commit from **[`230127e`](https://github.com/sagemath/sagetrac-mirror/commit/230127e7b85dd552c1347d72e497f41930cd0948)** to **[`f792e12`](https://github.com/sagemath/sagetrac-mirror/commit/f792e1216ed79b23e7a2da7ca123979ee76e1009)**",
    "created_at": "2013-09-25T08:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187642",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`230127e`](https://github.com/sagemath/sagetrac-mirror/commit/230127e7b85dd552c1347d72e497f41930cd0948)** to **[`f792e12`](https://github.com/sagemath/sagetrac-mirror/commit/f792e1216ed79b23e7a2da7ca123979ee76e1009)**



---

archive/issue_comments_187643.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:f792e12]</code></td><td><code>separate scheme point sets for subschemes of toric varieties</code></td></tr></table>\n",
    "created_at": "2013-09-25T08:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187643",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:f792e12]</code></td><td><code>separate scheme point sets for subschemes of toric varieties</code></td></tr></table>




---

archive/issue_comments_187644.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:5feea0d]</code></td><td><code>points for subvarieties of toric varieties works</code></td></tr></table>\n",
    "created_at": "2013-09-25T14:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187644",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:5feea0d]</code></td><td><code>points for subvarieties of toric varieties works</code></td></tr></table>




---

archive/issue_comments_187645.json:
```json
{
    "body": "Changed commit from **[`f792e12`](https://github.com/sagemath/sagetrac-mirror/commit/f792e1216ed79b23e7a2da7ca123979ee76e1009)** to **[`5feea0d`](https://github.com/sagemath/sagetrac-mirror/commit/5feea0d1000f0d34fb8dfdba3f41fc183749c8b7)**",
    "created_at": "2013-09-25T14:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187645",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f792e12`](https://github.com/sagemath/sagetrac-mirror/commit/f792e1216ed79b23e7a2da7ca123979ee76e1009)** to **[`5feea0d`](https://github.com/sagemath/sagetrac-mirror/commit/5feea0d1000f0d34fb8dfdba3f41fc183749c8b7)**



---

archive/issue_comments_187646.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:f33dc0b]</code></td><td><code>code cleanups</code></td></tr></table>\n",
    "created_at": "2013-09-25T16:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:f33dc0b]</code></td><td><code>code cleanups</code></td></tr></table>




---

archive/issue_comments_187647.json:
```json
{
    "body": "Changed commit from **[`5feea0d`](https://github.com/sagemath/sagetrac-mirror/commit/5feea0d1000f0d34fb8dfdba3f41fc183749c8b7)** to **[`f33dc0b`](https://github.com/sagemath/sagetrac-mirror/commit/f33dc0bb9c0fdf6221956033e0d697fcdb59becb)**",
    "created_at": "2013-09-25T16:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187647",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5feea0d`](https://github.com/sagemath/sagetrac-mirror/commit/5feea0d1000f0d34fb8dfdba3f41fc183749c8b7)** to **[`f33dc0b`](https://github.com/sagemath/sagetrac-mirror/commit/f33dc0bb9c0fdf6221956033e0d697fcdb59becb)**



---

archive/issue_comments_187648.json:
```json
{
    "body": "Changed commit from **[`f33dc0b`](https://github.com/sagemath/sagetrac-mirror/commit/f33dc0bb9c0fdf6221956033e0d697fcdb59becb)** to **[`ddd665f`](https://github.com/sagemath/sagetrac-mirror/commit/ddd665f8b2c3b4743745f11d6013adf62457a87d)**",
    "created_at": "2013-09-26T13:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187648",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f33dc0b`](https://github.com/sagemath/sagetrac-mirror/commit/f33dc0bb9c0fdf6221956033e0d697fcdb59becb)** to **[`ddd665f`](https://github.com/sagemath/sagetrac-mirror/commit/ddd665f8b2c3b4743745f11d6013adf62457a87d)**



---

archive/issue_comments_187649.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:ddd665f]</code></td><td><code>final code cleanups</code></td></tr></table>\n",
    "created_at": "2013-09-26T13:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187649",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:ddd665f]</code></td><td><code>final code cleanups</code></td></tr></table>




---

archive/issue_comments_187650.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI successfully applied this patch.\n\nI think you need to throw an error, or at least produce a warning message, if someone tries to create an iterator over the points in a variety with an infinite base ring.",
    "created_at": "2013-09-26T15:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187650",
    "user": "https://github.com/sagetrac-ursula"
}
```

<div id="comment:8" align="right">comment:8</div>

I successfully applied this patch.

I think you need to throw an error, or at least produce a warning message, if someone tries to create an iterator over the points in a variety with an infinite base ring.



---

archive/issue_comments_187651.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThere are infinite iterators in Sage:\n\n```\nsage: iter(ZZ).next()\n0\n```\nuse case - try to find an element that satisfies certain property, at which point you stop.",
    "created_at": "2013-09-26T15:30:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187651",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:9" align="right">comment:9</div>

There are infinite iterators in Sage:

```
sage: iter(ZZ).next()
0
```
use case - try to find an element that satisfies certain property, at which point you stop.



---

archive/issue_comments_187652.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThough the iterator over the points doesn't handle the infinite case right, it'll just forever hang at creating the list of all rescalings.",
    "created_at": "2013-09-26T15:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187652",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">comment:10</div>

Though the iterator over the points doesn't handle the infinite case right, it'll just forever hang at creating the list of all rescalings.



---

archive/issue_comments_187653.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:0dc5e0b]</code></td><td><code>also allow iterating over points for a toric variety over an infinite ring</code></td></tr></table>\n",
    "created_at": "2013-09-26T17:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187653",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:0dc5e0b]</code></td><td><code>also allow iterating over points for a toric variety over an infinite ring</code></td></tr></table>




---

archive/issue_comments_187654.json:
```json
{
    "body": "Changed commit from **[`ddd665f`](https://github.com/sagemath/sagetrac-mirror/commit/ddd665f8b2c3b4743745f11d6013adf62457a87d)** to **[`0dc5e0b`](https://github.com/sagemath/sagetrac-mirror/commit/0dc5e0b9a5c9fb1ff3ee3a18e48acd487bfdaae5)**",
    "created_at": "2013-09-26T17:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187654",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ddd665f`](https://github.com/sagemath/sagetrac-mirror/commit/ddd665f8b2c3b4743745f11d6013adf62457a87d)** to **[`0dc5e0b`](https://github.com/sagemath/sagetrac-mirror/commit/0dc5e0b9a5c9fb1ff3ee3a18e48acd487bfdaae5)**



---

archive/issue_comments_187655.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThere are some subtleties involving singular varieties that this code does not take into account.  For example, if you take the normal fan to the standard 2-dimensional simplex (ReflexivePolytope(2,0)), you get a quotient of the projective plane by a diagonal action of a group of order 3.  When the base ring is GF(7), 2 is a 3rd root of unity and [1:2:4] generates the diagonal action, so [1:1:1] and [1:2:4] should be identified.  But they are listed as different points by this iterator!\n\nThe obvious fix is to restrict to the case of nonsingular varieties; this behavior would match the existing function for counting points on a toric variety.",
    "created_at": "2013-09-26T22:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187655",
    "user": "https://github.com/sagetrac-ursula"
}
```

<div id="comment:12" align="right">comment:12</div>

There are some subtleties involving singular varieties that this code does not take into account.  For example, if you take the normal fan to the standard 2-dimensional simplex (ReflexivePolytope(2,0)), you get a quotient of the projective plane by a diagonal action of a group of order 3.  When the base ring is GF(7), 2 is a 3rd root of unity and [1:2:4] generates the diagonal action, so [1:1:1] and [1:2:4] should be identified.  But they are listed as different points by this iterator!

The obvious fix is to restrict to the case of nonsingular varieties; this behavior would match the existing function for counting points on a toric variety.



---

archive/issue_comments_187656.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:88da46e]</code></td><td><code>also divide out relations coming from the torsion in the Chow group</code></td></tr></table>\n",
    "created_at": "2013-09-28T14:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187656",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:88da46e]</code></td><td><code>also divide out relations coming from the torsion in the Chow group</code></td></tr></table>




---

archive/issue_comments_187657.json:
```json
{
    "body": "Changed commit from **[`0dc5e0b`](https://github.com/sagemath/sagetrac-mirror/commit/0dc5e0b9a5c9fb1ff3ee3a18e48acd487bfdaae5)** to **[`88da46e`](https://github.com/sagemath/sagetrac-mirror/commit/88da46e2f72d4528b0620fb9f4ce0294ae22656e)**",
    "created_at": "2013-09-28T14:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187657",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0dc5e0b`](https://github.com/sagemath/sagetrac-mirror/commit/0dc5e0b9a5c9fb1ff3ee3a18e48acd487bfdaae5)** to **[`88da46e`](https://github.com/sagemath/sagetrac-mirror/commit/88da46e2f72d4528b0620fb9f4ce0294ae22656e)**



---

archive/issue_comments_187658.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI think when you included the torsion relations, you lost the non-torsion relations?  The list I get of points in the normal fan to the standard 2-dimensional simplex example now includes [1:1:1], [2:2:2], [3:3:3], etc.",
    "created_at": "2013-09-28T20:05:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187658",
    "user": "https://github.com/sagetrac-ursula"
}
```

<div id="comment:14" align="right">comment:14</div>

I think when you included the torsion relations, you lost the non-torsion relations?  The list I get of points in the normal fan to the standard 2-dimensional simplex example now includes [1:1:1], [2:2:2], [3:3:3], etc.



---

archive/issue_comments_187659.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:e9f9710]</code></td><td><code>forgot to divide by the free part of the Chow group if there is torsion</code></td></tr></table>\n",
    "created_at": "2013-09-29T11:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187659",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:e9f9710]</code></td><td><code>forgot to divide by the free part of the Chow group if there is torsion</code></td></tr></table>




---

archive/issue_comments_187660.json:
```json
{
    "body": "Changed commit from **[`88da46e`](https://github.com/sagemath/sagetrac-mirror/commit/88da46e2f72d4528b0620fb9f4ce0294ae22656e)** to **[`e9f9710`](https://github.com/sagemath/sagetrac-mirror/commit/e9f9710bd26adeb8ffaf7205343cbd9f78bbac0a)**",
    "created_at": "2013-09-29T11:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187660",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`88da46e`](https://github.com/sagemath/sagetrac-mirror/commit/88da46e2f72d4528b0620fb9f4ce0294ae22656e)** to **[`e9f9710`](https://github.com/sagemath/sagetrac-mirror/commit/e9f9710bd26adeb8ffaf7205343cbd9f78bbac0a)**



---

archive/issue_comments_187661.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nNow works as advertised for toric varieties obtained from complete fans!  Does this patch apply to affine fans as well?  (I tried the example of a fan obtained from the first quadrant in the plane, and got an accurate list of points, though the use of colons in that setting is weird.)\n\nWe could use this to update #14891, which was only implemented for non-singular toric varieties.",
    "created_at": "2013-10-07T20:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187661",
    "user": "https://github.com/sagetrac-ursula"
}
```

<div id="comment:16" align="right">comment:16</div>

Now works as advertised for toric varieties obtained from complete fans!  Does this patch apply to affine fans as well?  (I tried the example of a fan obtained from the first quadrant in the plane, and got an accurate list of points, though the use of colons in that setting is weird.)

We could use this to update #14891, which was only implemented for non-singular toric varieties.



---

archive/issue_comments_187662.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIts supposed to give the correct answer for all fans. If it doesn't then its a bug.\n\nI already incorporated it with #14891, for example `X.point_set().cardinality()` will use the formula if the variety is smooth and enumerate the points otherwise.",
    "created_at": "2013-10-08T15:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187662",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

Its supposed to give the correct answer for all fans. If it doesn't then its a bug.

I already incorporated it with #14891, for example `X.point_set().cardinality()` will use the formula if the variety is smooth and enumerate the points otherwise.



---

archive/issue_comments_187663.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWe should add a documentation example where the fan is not complete.  The blowup of a point, where the fan has two cones, one from [(1,0),(1,1)] and one from [(0,1),(1,1)] would be a nice choice: in that setting, you can see a projective line when the coordinate corresponding to (1,1) is 0.\n\nThis code throws errors when the toric variety has torus factors (that is, when the rays of the fan do not span the vector space associated with N).  For example:\n\nV = ToricVariety(Fan([Cone([(1,0)])]))\n\nVF = V.change_ring(GF(3))\n\nlist(VF.point_set())\n\nyields:\n\nValueError: there must be 2 coordinates! Got only 1: (0,)\n\nThis behaviour does not really surprise me.  When a toric variety has torus factors, the choice of homogeneous coordinates is non-canonical.  I assume homogeneous coordinates are not implemented in Sage for such a variety.",
    "created_at": "2013-10-24T18:24:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187663",
    "user": "https://github.com/sagetrac-ursula"
}
```

<div id="comment:18" align="right">comment:18</div>

We should add a documentation example where the fan is not complete.  The blowup of a point, where the fan has two cones, one from [(1,0),(1,1)] and one from [(0,1),(1,1)] would be a nice choice: in that setting, you can see a projective line when the coordinate corresponding to (1,1) is 0.

This code throws errors when the toric variety has torus factors (that is, when the rays of the fan do not span the vector space associated with N).  For example:

V = ToricVariety(Fan([Cone([(1,0)])]))

VF = V.change_ring(GF(3))

list(VF.point_set())

yields:

ValueError: there must be 2 coordinates! Got only 1: (0,)

This behaviour does not really surprise me.  When a toric variety has torus factors, the choice of homogeneous coordinates is non-canonical.  I assume homogeneous coordinates are not implemented in Sage for such a variety.



---

archive/issue_comments_187664.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWe have the \"virtual rays\" of the fan to keep track of an arbitrary (but fixed) choice of coordinates on the torus factor. Its just a matter of hooking them up correctly. \n\nAdding another example is fine with me, can do that tomorrow.",
    "created_at": "2013-10-24T23:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187664",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">comment:19</div>

We have the "virtual rays" of the fan to keep track of an arbitrary (but fixed) choice of coordinates on the torus factor. Its just a matter of hooking them up correctly. 

Adding another example is fine with me, can do that tomorrow.



---

archive/issue_comments_187665.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:be92dbe]</code></td><td><code>added non-compact example for the toric point_set, allow base_ring argument to ToricVariety</code></td></tr></table>\n",
    "created_at": "2013-10-25T10:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187665",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:be92dbe]</code></td><td><code>added non-compact example for the toric point_set, allow base_ring argument to ToricVariety</code></td></tr></table>




---

archive/issue_comments_187666.json:
```json
{
    "body": "Changed commit from **[`e9f9710`](https://github.com/sagemath/sagetrac-mirror/commit/e9f9710bd26adeb8ffaf7205343cbd9f78bbac0a)** to **[`be92dbe`](https://github.com/sagemath/sagetrac-mirror/commit/be92dbe2685934031ce875bc50586507d4a0f75e)**",
    "created_at": "2013-10-25T10:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187666",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e9f9710`](https://github.com/sagemath/sagetrac-mirror/commit/e9f9710bd26adeb8ffaf7205343cbd9f78bbac0a)** to **[`be92dbe`](https://github.com/sagemath/sagetrac-mirror/commit/be92dbe2685934031ce875bc50586507d4a0f75e)**



---

archive/issue_comments_187667.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[changeset:f00af8f]</code></td><td><code>fix point counting on toric varieties with torus factors</code></td></tr></table>\n",
    "created_at": "2013-10-25T11:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187667",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[changeset:f00af8f]</code></td><td><code>fix point counting on toric varieties with torus factors</code></td></tr></table>




---

archive/issue_comments_187668.json:
```json
{
    "body": "Changed commit from **[`be92dbe`](https://github.com/sagemath/sagetrac-mirror/commit/be92dbe2685934031ce875bc50586507d4a0f75e)** to **[`f00af8f`](https://github.com/sagemath/sagetrac-mirror/commit/f00af8f68c632d42463835d97c9b58e33b6aaf59)**",
    "created_at": "2013-10-25T11:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187668",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`be92dbe`](https://github.com/sagemath/sagetrac-mirror/commit/be92dbe2685934031ce875bc50586507d4a0f75e)** to **[`f00af8f`](https://github.com/sagemath/sagetrac-mirror/commit/f00af8f68c632d42463835d97c9b58e33b6aaf59)**



---

archive/issue_comments_187669.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis works now:\n\n```\nsage: T2 = toric_varieties.torus(2, base_ring=GF(3))\nsage: T2.point_set().list()\n([1 : 1], [1 : 2], [2 : 1], [2 : 2])\n```",
    "created_at": "2013-10-25T11:14:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187669",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">comment:22</div>

This works now:

```
sage: T2 = toric_varieties.torus(2, base_ring=GF(3))
sage: T2.point_set().list()
([1 : 1], [1 : 2], [2 : 1], [2 : 2])
```



---

archive/issue_comments_187670.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nNice!\n\nI support approving this patch.",
    "created_at": "2013-10-25T18:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187670",
    "user": "https://github.com/sagetrac-ursula"
}
```

<div id="comment:23" align="right">comment:23</div>

Nice!

I support approving this patch.



---

archive/issue_comments_187671.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nYou can press the \"positive review\" button and put your full name in the \"Reviewer:\" field if you want ;-)",
    "created_at": "2013-10-25T23:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187671",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">comment:24</div>

You can press the "positive review" button and put your full name in the "Reviewer:" field if you want ;-)



---

archive/issue_events_217342.json:
```json
{
    "actor": "https://github.com/sagetrac-ursula",
    "created_at": "2013-10-28T01:35:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217342"
}
```



---

archive/issue_events_217343.json:
```json
{
    "actor": "https://github.com/sagetrac-ursula",
    "created_at": "2013-10-28T01:36:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217343"
}
```



---

archive/issue_events_217344.json:
```json
{
    "actor": "https://github.com/sagetrac-ursula",
    "created_at": "2013-10-28T01:36:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217344"
}
```



---

archive/issue_comments_187672.json:
```json
{
    "body": "Reviewer: **Ursula Whitcher**",
    "created_at": "2013-10-28T01:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15224#issuecomment-187672",
    "user": "https://github.com/sagetrac-ursula"
}
```

Reviewer: **Ursula Whitcher**



---

archive/issue_events_217345.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-28T07:19:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217345"
}
```



---

archive/issue_events_217346.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-28T07:19:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "milestone_number": null,
    "milestone_title": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217346"
}
```



---

archive/issue_events_217347.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2013-12-17T18:39:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "milestone_number": null,
    "milestone_title": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217347"
}
```



---

archive/issue_events_217348.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2013-12-17T18:39:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217348"
}
```



---

archive/issue_events_217349.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-18T15:54:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217349"
}
```



---

archive/issue_events_217350.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "47c9c758d2d471d4bc2dde15f3765338caf1584d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2013-12-18T15:54:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15224",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15224#event-217350"
}
```
