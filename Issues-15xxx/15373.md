# Issue 15373: Implement global_height for Integers

archive/issues_015136.json:
```json
{
    "body": "QQ(5).global_height() works but ZZ(5).global_height() does not.\n\nImplement global_height for ZZ elements.\n\n**Assignee:** @pfili\n\n**Keywords:** sage-days55\n\n**Reviewer:** Adam Towsley\n\n**Author:** Paul Fili\n\n**Merged:** sage-5.13.beta3\n\nIssue created by migration from https://trac.sagemath.org/ticket/15373\n\n",
    "closed_at": "2013-11-14T07:53:08Z",
    "created_at": "2013-11-07T21:14:02Z",
    "labels": [
        "component: algebraic geometry",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "Implement global_height for Integers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15373",
    "user": "https://github.com/pfili"
}
```
QQ(5).global_height() works but ZZ(5).global_height() does not.

Implement global_height for ZZ elements.

**Assignee:** @pfili

**Keywords:** sage-days55

**Reviewer:** Adam Towsley

**Author:** Paul Fili

**Merged:** sage-5.13.beta3

Issue created by migration from https://trac.sagemath.org/ticket/15373





---

archive/issue_events_138312.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2013-11-07T22:11:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138312"
}
```



---

archive/issue_comments_194792.json:
```json
{
    "body": "**Changing keywords** from \"sage-dasy55\" to \"sage-days55\".",
    "created_at": "2013-11-07T22:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194792",
    "user": "https://github.com/pfili"
}
```

**Changing keywords** from "sage-dasy55" to "sage-days55".



---

archive/issue_comments_194793.json:
```json
{
    "body": "**Author:** Paul Fili",
    "created_at": "2013-11-08T16:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194793",
    "user": "https://github.com/pfili"
}
```

**Author:** Paul Fili



---

archive/issue_comments_194794.json:
```json
{
    "body": "<a id='comment:4'></a>\nIt passed the doc test and the long test.\n\nFunctionality still works.",
    "created_at": "2013-11-09T21:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194794",
    "user": "https://trac.sagemath.org/admin/accounts/users/atowsley"
}
```

<a id='comment:4'></a>
It passed the doc test and the long test.

Functionality still works.



---

archive/issue_events_138313.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/atowsley",
    "created_at": "2013-11-09T21:04:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138313"
}
```



---

archive/issue_events_138314.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/atowsley",
    "created_at": "2013-11-09T21:04:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138314"
}
```



---

archive/issue_comments_194795.json:
```json
{
    "body": "<a id='comment:5'></a>\nPlease change the commit message to something meaningful and fill in the Reviewer field with your real name.",
    "created_at": "2013-11-10T00:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194795",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Please change the commit message to something meaningful and fill in the Reviewer field with your real name.



---

archive/issue_events_138315.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-10T00:07:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138315"
}
```



---

archive/issue_events_138316.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-10T00:07:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138316"
}
```



---

archive/issue_comments_194796.json:
```json
{
    "body": "**Reviewer:** Adam Towsley",
    "created_at": "2013-11-10T00:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194796",
    "user": "https://trac.sagemath.org/admin/accounts/users/atowsley"
}
```

**Reviewer:** Adam Towsley



---

archive/issue_comments_194797.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks, I have changed the commit message.",
    "created_at": "2013-11-10T15:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194797",
    "user": "https://github.com/pfili"
}
```

<a id='comment:7'></a>
Thanks, I have changed the commit message.



---

archive/issue_events_138317.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2013-11-10T15:40:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138317"
}
```



---

archive/issue_events_138318.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2013-11-10T15:40:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138318"
}
```



---

archive/issue_comments_194798.json:
```json
{
    "body": "<a id='comment:8'></a>\nEverything still works.",
    "created_at": "2013-11-10T15:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194798",
    "user": "https://trac.sagemath.org/admin/accounts/users/atowsley"
}
```

<a id='comment:8'></a>
Everything still works.



---

archive/issue_events_138319.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/atowsley",
    "created_at": "2013-11-10T15:44:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138319"
}
```



---

archive/issue_events_138320.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/atowsley",
    "created_at": "2013-11-10T15:44:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138320"
}
```



---

archive/issue_comments_194799.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe indentation of the documentation should be\n\n```\n\"\"\"\nDocumentation here\n\"\"\"\n```\nwithout the extra indent.",
    "created_at": "2013-11-10T23:00:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194799",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
The indentation of the documentation should be

```
"""
Documentation here
"""
```
without the extra indent.



---

archive/issue_comments_194800.json:
```json
{
    "body": "**Work_Issues:** docstring",
    "created_at": "2013-11-10T23:00:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194800",
    "user": "https://github.com/jdemeyer"
}
```

**Work_Issues:** docstring



---

archive/issue_events_138321.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-10T23:00:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138321"
}
```



---

archive/issue_events_138322.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-10T23:00:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138322"
}
```



---

archive/issue_comments_194801.json:
```json
{
    "body": "<a id='comment:10'></a>\nI have fixed the indentation in the documentation.",
    "created_at": "2013-11-12T00:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194801",
    "user": "https://github.com/pfili"
}
```

<a id='comment:10'></a>
I have fixed the indentation in the documentation.



---

archive/issue_events_138323.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2013-11-12T00:42:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138323"
}
```



---

archive/issue_events_138324.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2013-11-12T00:42:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138324"
}
```



---

archive/issue_events_138325.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-12T15:30:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138325"
}
```



---

archive/issue_events_138326.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-12T15:30:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138326"
}
```



---

archive/issue_comments_194802.json:
```json
{
    "body": "<a id='comment:11'></a>\nThe indentation is still wrong. It should be:\n\n```\n    def global_height(self, prec=None):\n        r\"\"\"\n        Returns the absolute logarithmic height of this rational integer.\n\n        INPUT:\n\n        - ``prec`` (int) -- desired floating point precision (default:\n          default RealField precision).\n\n        OUTPUT:\n\n        (real) The absolute logarithmic height of this rational integer.\n\n        ALGORITHM:\n\n        The height of the integer `n` is `\\log |n|`.\n\n        EXAMPLES::\n\n            sage: ZZ(5).global_height()\n            1.60943791243410\n            sage: ZZ(-5).global_height(prec=100)\n            1.6094379124341003746007593332\n            # This is log(5):\n            sage: exp(_)\n            5.0000000000000000000000000000\n        \"\"\"\n```",
    "created_at": "2013-11-12T15:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194802",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
The indentation is still wrong. It should be:

```
    def global_height(self, prec=None):
        r"""
        Returns the absolute logarithmic height of this rational integer.

        INPUT:

        - ``prec`` (int) -- desired floating point precision (default:
          default RealField precision).

        OUTPUT:

        (real) The absolute logarithmic height of this rational integer.

        ALGORITHM:

        The height of the integer `n` is `\log |n|`.

        EXAMPLES::

            sage: ZZ(5).global_height()
            1.60943791243410
            sage: ZZ(-5).global_height(prec=100)
            1.6094379124341003746007593332
            # This is log(5):
            sage: exp(_)
            5.0000000000000000000000000000
        """
```



---

archive/issue_comments_194803.json:
```json
{
    "body": "<a id='comment:12'></a>\nThanks for your patience. I've uploaded a new version with the indentation as you specified.",
    "created_at": "2013-11-12T16:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194803",
    "user": "https://github.com/pfili"
}
```

<a id='comment:12'></a>
Thanks for your patience. I've uploaded a new version with the indentation as you specified.



---

archive/issue_events_138327.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2013-11-12T16:04:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138327"
}
```



---

archive/issue_events_138328.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2013-11-12T16:04:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138328"
}
```



---

archive/issue_comments_194804.json:
```json
{
    "body": "<a id='comment:13'></a>\nI get the following error with the patch...\n\n```\nsage -t --long integer.pyx\n**********************************************************************\nFile \"integer.pyx\", line 4150, in sage.rings.integer.Integer.global_height\nFailed example:\n    ZZ(-5).global_height(prec=100)\nExpected:\n    1.6094379124341003746007593332\n    # This is log(5):\nGot:\n    1.6094379124341003746007593332\n**********************************************************************\n1 item had failures:\n   1 of   4 in sage.rings.integer.Integer.global_height\n    [916 tests, 1 failure, 5.69 s]\n----------------------------------------------------------------------\nsage -t --long integer.pyx  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 6.0 seconds\n    cpu time: 4.5 seconds\n    cumulative wall time: 5.7 seconds\n```\n\nIt's the only error I get, but I don't see why it appears. Since the two values it prints (expected and got) are the same.",
    "created_at": "2013-11-12T17:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194804",
    "user": "https://trac.sagemath.org/admin/accounts/users/atowsley"
}
```

<a id='comment:13'></a>
I get the following error with the patch...

```
sage -t --long integer.pyx
**********************************************************************
File "integer.pyx", line 4150, in sage.rings.integer.Integer.global_height
Failed example:
    ZZ(-5).global_height(prec=100)
Expected:
    1.6094379124341003746007593332
    # This is log(5):
Got:
    1.6094379124341003746007593332
**********************************************************************
1 item had failures:
   1 of   4 in sage.rings.integer.Integer.global_height
    [916 tests, 1 failure, 5.69 s]
----------------------------------------------------------------------
sage -t --long integer.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 6.0 seconds
    cpu time: 4.5 seconds
    cumulative wall time: 5.7 seconds
```

It's the only error I get, but I don't see why it appears. Since the two values it prints (expected and got) are the same.



---

archive/attachments_020416.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_15373_global_height_ZZ.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket15373/trac_15373_global_height_ZZ.patch",
    "created_at": "2013-11-12T18:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/pfili"
}
```



---

archive/issue_comments_194805.json:
```json
{
    "body": "Patch that implements global_height for ZZ",
    "created_at": "2013-11-12T18:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194805",
    "user": "https://github.com/pfili"
}
```

Patch that implements global_height for ZZ



---

archive/issue_comments_194806.json:
```json
{
    "body": "<a id='comment:14'></a>\nPerhaps the comment on the next line threw it off. I've removed it and put a better example. Should work now.",
    "created_at": "2013-11-12T18:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194806",
    "user": "https://github.com/pfili"
}
```

<a id='comment:14'></a>
Perhaps the comment on the next line threw it off. I've removed it and put a better example. Should work now.



---

archive/issue_comments_194807.json:
```json
{
    "body": "<a id='comment:15'></a>\nYes, that did it. Everything works now.",
    "created_at": "2013-11-12T18:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194807",
    "user": "https://trac.sagemath.org/admin/accounts/users/atowsley"
}
```

<a id='comment:15'></a>
Yes, that did it. Everything works now.



---

archive/issue_events_138329.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/atowsley",
    "created_at": "2013-11-12T18:34:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138329"
}
```



---

archive/issue_events_138330.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/atowsley",
    "created_at": "2013-11-12T18:34:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138330"
}
```



---

archive/issue_comments_194808.json:
```json
{
    "body": "**Changing work_issues** from \"docstring\" to \"\".",
    "created_at": "2013-11-13T13:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194808",
    "user": "https://github.com/jdemeyer"
}
```

**Changing work_issues** from "docstring" to "".



---

archive/issue_events_138331.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-14T07:53:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138331"
}
```



---

archive/issue_events_138332.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-14T07:53:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15373#event-138332"
}
```



---

archive/issue_comments_194809.json:
```json
{
    "body": "**Merged:** sage-5.13.beta3",
    "created_at": "2013-11-14T07:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15373#issuecomment-194809",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.13.beta3
