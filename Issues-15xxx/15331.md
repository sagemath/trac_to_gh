# Issue 15331: Do not try to create embedded number field morphisms for non-embedded number fields

archive/issues_015094.json:
```json
{
    "assignees": [],
    "body": "The attempt to create an embedded number field morphisms for non-embedded number fields currently fails (and should of course fail).\n\n```\nsage: L.<i> = NumberField(x^2 + 1)\nsage: K = NumberField(L(i/2+3).minpoly(), names=('i0',), embedding=L(i/2+3))\nsage: from sage.rings.number_field import number_field_morphisms\nsage: number_field_morphisms.EmbeddedNumberFieldMorphism(R, self)\nTraceback (most recent call last):\n...\nRuntimeError: maximum recursion depth exceeded in __instancecheck__\n```\nHowever, instead of running into an infinite recursion, a quick and simple `ValueError` (or perhaps `TypeError`) should be raised.\n\nCC:  @jpflori\n\nBranch/Commit: **[2bedaa1](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)**\n\nReviewer: **Marc Mezzarobba, Jean-Pierre Flori**\n\nAuthor: **Simon King, Marc Mezzarobba,  Jean-Pierre Flori**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15331_\n\n",
    "closed_at": "2014-03-21T17:47:32Z",
    "created_at": "2013-10-26T22:28:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20number%20fields",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Do not try to create embedded number field morphisms for non-embedded number fields",
    "type": "issue",
    "updated_at": "2014-03-21T17:47:32Z",
    "url": "https://github.com/sagemath/sage/issues/15331",
    "user": "https://github.com/simon-king-jena"
}
```
The attempt to create an embedded number field morphisms for non-embedded number fields currently fails (and should of course fail).

```
sage: L.<i> = NumberField(x^2 + 1)
sage: K = NumberField(L(i/2+3).minpoly(), names=('i0',), embedding=L(i/2+3))
sage: from sage.rings.number_field import number_field_morphisms
sage: number_field_morphisms.EmbeddedNumberFieldMorphism(R, self)
Traceback (most recent call last):
...
RuntimeError: maximum recursion depth exceeded in __instancecheck__
```
However, instead of running into an infinite recursion, a quick and simple `ValueError` (or perhaps `TypeError`) should be raised.

CC:  @jpflori

Branch/Commit: **[2bedaa1](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)**

Reviewer: **Marc Mezzarobba, Jean-Pierre Flori**

Author: **Simon King, Marc Mezzarobba,  Jean-Pierre Flori**

_Issue created by migration from https://trac.sagemath.org/ticket/15331_





---

archive/issue_events_200644.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-10-26T22:28:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200644"
}
```



---

archive/issue_events_200645.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-10-26T22:28:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20number%20fields",
    "label_color": "0000ff",
    "label_name": "component: number fields",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200645"
}
```



---

archive/issue_events_200646.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-10-26T22:28:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200646"
}
```



---

archive/issue_events_200647.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-10-26T22:28:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200647"
}
```



---

archive/issue_comments_192477.json:
```json
{
    "body": "Branch: **[u/SimonKing/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15331)**",
    "created_at": "2013-10-27T01:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192477",
    "user": "https://github.com/simon-king-jena"
}
```

Branch: **[u/SimonKing/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15331)**



---

archive/issue_events_200648.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-10-27T01:26:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200648"
}
```



---

archive/issue_comments_192478.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nNew commits:\n<table><tr><td>[changeset:2123372]</td><td><code>Raise type error for number field morphisms of non-embedded number fields</code></td></tr></table>\n",
    "created_at": "2013-10-27T01:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192478",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">Comment 2</div>

New commits:
<table><tr><td>[changeset:2123372]</td><td><code>Raise type error for number field morphisms of non-embedded number fields</code></td></tr></table>




---

archive/issue_comments_192479.json:
```json
{
    "body": "Commit: **[2123372](https://github.com/sagemath/sagetrac-mirror/commit/2123372d5c37cfbabd55fb3f1e63afaa5741ea2a)**",
    "created_at": "2013-10-27T01:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192479",
    "user": "https://github.com/simon-king-jena"
}
```

Commit: **[2123372](https://github.com/sagemath/sagetrac-mirror/commit/2123372d5c37cfbabd55fb3f1e63afaa5741ea2a)**



---

archive/issue_comments_192480.json:
```json
{
    "body": "Author: **Simon King**",
    "created_at": "2013-10-27T01:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192480",
    "user": "https://github.com/simon-king-jena"
}
```

Author: **Simon King**



---

archive/issue_events_200649.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2013-12-19T15:24:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200649"
}
```



---

archive/issue_events_200650.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2013-12-19T15:24:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200650"
}
```



---

archive/issue_comments_192481.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nHi Simon,\n\nI'm trying to review this ticket, but there are a couple of things I don't understand:\n* why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?\n* even if it really can't, is the giant `except` clause on line\u00a06194 of `number_field.py` necessary?\n* shouldn't\n\n  ```python\n              Lemb = Lemb.codomain() # number_field_morphisms.pyx:187\n              while Lemb.coerce_embedding() is not None:\n                  Lemb = Lemb.coerce_embedding().codomain()\n                  ambient_field = pushout(Kemb, Lemb)\n  ```\n  read\n\n  ```python\n              Lemb = Lemb.codomain()\n              while Lemb.coerce_embedding() is not None:\n                  Lemb = Lemb.coerce_embedding().codomain()\n              ambient_field = pushout(Kemb, Lemb)\n  ```\n  ?\n\nSorry if these are stupid questions, I'm still trying to learn how this all works!\n\nMy attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.",
    "created_at": "2013-12-19T15:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192481",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:3" align="right">Comment 3</div>

Hi Simon,

I'm trying to review this ticket, but there are a couple of things I don't understand:
* why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?
* even if it really can't, is the giant `except` clause on line 6194 of `number_field.py` necessary?
* shouldn't

  ```python
              Lemb = Lemb.codomain() # number_field_morphisms.pyx:187
              while Lemb.coerce_embedding() is not None:
                  Lemb = Lemb.coerce_embedding().codomain()
                  ambient_field = pushout(Kemb, Lemb)
  ```
  read

  ```python
              Lemb = Lemb.codomain()
              while Lemb.coerce_embedding() is not None:
                  Lemb = Lemb.coerce_embedding().codomain()
              ambient_field = pushout(Kemb, Lemb)
  ```
  ?

Sorry if these are stupid questions, I'm still trying to learn how this all works!

My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.



---

archive/issue_events_200651.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200651"
}
```



---

archive/issue_events_200652.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200652"
}
```



---

archive/issue_comments_192482.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nReplying to [@mezzarobba](#comment%3A3):\n> Hi Simon,\n> \n> I'm trying to review this ticket, but there are a couple of things I don't understand:\n> * why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?\n> * even if it really can't, is the giant `except` clause on line\u00a06194 of `number_field.py` necessary?\n> * shouldn't\n> \n>   ```python\n>               Lemb = Lemb.codomain() # number_field_morphisms.pyx:187\n>               while Lemb.coerce_embedding() is not None:\n>                   Lemb = Lemb.coerce_embedding().codomain()\n>                   ambient_field = pushout(Kemb, Lemb)\n>   ```\n>   read\n> \n>   ```python\n>               Lemb = Lemb.codomain()\n>               while Lemb.coerce_embedding() is not None:\n>                   Lemb = Lemb.coerce_embedding().codomain()\n>               ambient_field = pushout(Kemb, Lemb)\n>   ```\n>   ?\n> \n> Sorry if these are stupid questions, I'm still trying to learn how this all works!\n> \n> My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.\n> \n\nAny remark on this Simon?\n\nIf you're too busy, I'll just have a look for myself and try to take some action to get this merged.",
    "created_at": "2014-02-27T13:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192482",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:6" align="right">Comment 6</div>

Replying to [@mezzarobba](#comment%3A3):
> Hi Simon,
> 
> I'm trying to review this ticket, but there are a couple of things I don't understand:
> * why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?
> * even if it really can't, is the giant `except` clause on line 6194 of `number_field.py` necessary?
> * shouldn't
> 
>   ```python
>               Lemb = Lemb.codomain() # number_field_morphisms.pyx:187
>               while Lemb.coerce_embedding() is not None:
>                   Lemb = Lemb.coerce_embedding().codomain()
>                   ambient_field = pushout(Kemb, Lemb)
>   ```
>   read
> 
>   ```python
>               Lemb = Lemb.codomain()
>               while Lemb.coerce_embedding() is not None:
>                   Lemb = Lemb.coerce_embedding().codomain()
>               ambient_field = pushout(Kemb, Lemb)
>   ```
>   ?
> 
> Sorry if these are stupid questions, I'm still trying to learn how this all works!
> 
> My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.
> 

Any remark on this Simon?

If you're too busy, I'll just have a look for myself and try to take some action to get this merged.



---

archive/issue_comments_192483.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nHi Jean-Pierre and Marc,\n\nReplying to [@jpflori](#comment%3A6):\n> Replying to [@mezzarobba](#comment%3A3):\n> > Hi Simon,\n> > \n> > I'm trying to review this ticket, but there are a couple of things I don't understand:\n> > * why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?\n> > * even if it really can't, is the giant `except` clause on line\u00a06194 of `number_field.py` necessary?\n\nSorry, I don't recall, and at the moment I am too much occupied with other things.\n\n> > * shouldn't\n> > \n> >   ```python\n> >               Lemb = Lemb.codomain() # number_field_morphisms.pyx:187\n> >               while Lemb.coerce_embedding() is not None:\n> >                   Lemb = Lemb.coerce_embedding().codomain()\n> >                   ambient_field = pushout(Kemb, Lemb)\n> >   ```\n> >   read\n> > \n> >   ```python\n> >               Lemb = Lemb.codomain()\n> >               while Lemb.coerce_embedding() is not None:\n> >                   Lemb = Lemb.coerce_embedding().codomain()\n> >               ambient_field = pushout(Kemb, Lemb)\n> >   ```\n\nYes, unless I wanted to see if the pushout exists in each step (catching the error if it does not exist).\n\n> > Sorry if these are stupid questions, I'm still trying to learn how this all works!\n\nSo do I (now) ;-)\n \n> > My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.\n> > \n\n> Any remark on this Simon?\n> \n> If you're too busy,\n\nSorry, I am.\n\nBest regards,\n\nSimon",
    "created_at": "2014-02-27T14:06:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192483",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">Comment 7</div>

Hi Jean-Pierre and Marc,

Replying to [@jpflori](#comment%3A6):
> Replying to [@mezzarobba](#comment%3A3):
> > Hi Simon,
> > 
> > I'm trying to review this ticket, but there are a couple of things I don't understand:
> > * why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?
> > * even if it really can't, is the giant `except` clause on line 6194 of `number_field.py` necessary?

Sorry, I don't recall, and at the moment I am too much occupied with other things.

> > * shouldn't
> > 
> >   ```python
> >               Lemb = Lemb.codomain() # number_field_morphisms.pyx:187
> >               while Lemb.coerce_embedding() is not None:
> >                   Lemb = Lemb.coerce_embedding().codomain()
> >                   ambient_field = pushout(Kemb, Lemb)
> >   ```
> >   read
> > 
> >   ```python
> >               Lemb = Lemb.codomain()
> >               while Lemb.coerce_embedding() is not None:
> >                   Lemb = Lemb.coerce_embedding().codomain()
> >               ambient_field = pushout(Kemb, Lemb)
> >   ```

Yes, unless I wanted to see if the pushout exists in each step (catching the error if it does not exist).

> > Sorry if these are stupid questions, I'm still trying to learn how this all works!

So do I (now) ;-)
 
> > My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.
> > 

> Any remark on this Simon?
> 
> If you're too busy,

Sorry, I am.

Best regards,

Simon



---

archive/issue_comments_192484.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI'm ok with Marc changes.\n\nMy only concern is that it might be the case that previously catched errors are not anymore, only ValueError are.\nNot sure how it could break the coercion system as before such errors would just lead to returning nothing and now errors might be raised.",
    "created_at": "2014-03-05T21:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192484",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:8" align="right">Comment 8</div>

I'm ok with Marc changes.

My only concern is that it might be the case that previously catched errors are not anymore, only ValueError are.
Not sure how it could break the coercion system as before such errors would just lead to returning nothing and now errors might be raised.



---

archive/issue_comments_192485.json:
```json
{
    "body": "Changed branch from **[u/SimonKing/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15331)** to **[u/jpflori/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15331)**",
    "created_at": "2014-03-05T22:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192485",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/SimonKing/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15331)** to **[u/jpflori/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15331)**



---

archive/issue_comments_192486.json:
```json
{
    "body": "Changed author from **Simon King** to **Simon King, Marc Mezzarobba**",
    "created_at": "2014-03-05T22:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192486",
    "user": "https://github.com/jpflori"
}
```

Changed author from **Simon King** to **Simon King, Marc Mezzarobba**



---

archive/issue_comments_192487.json:
```json
{
    "body": "Reviewer: **Marc Mezzarobba, Jean-Pierre Flori**",
    "created_at": "2014-03-05T22:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192487",
    "user": "https://github.com/jpflori"
}
```

Reviewer: **Marc Mezzarobba, Jean-Pierre Flori**



---

archive/issue_events_200653.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-03-05T22:05:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200653"
}
```



---

archive/issue_events_200654.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-03-05T22:05:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200654"
}
```



---

archive/issue_comments_192488.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI've just added some doc about which ambient field is tried by default.\n\nIf nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8798dd986259f15147bb31140db8dcc129ba3c6c\">8798dd9</a></td><td><code>Simplify the logic for finding coercions between embedded number fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb1cfbc126341cceec78536c7ad1ca566b467346\">fb1cfbc</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15331</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e\">707ab45</a></td><td><code>Added some doc for default ambient field used when trying</code></td></tr></table>\n",
    "created_at": "2014-03-05T22:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192488",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">Comment 9</div>

I've just added some doc about which ambient field is tried by default.

If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8798dd986259f15147bb31140db8dcc129ba3c6c">8798dd9</a></td><td><code>Simplify the logic for finding coercions between embedded number fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb1cfbc126341cceec78536c7ad1ca566b467346">fb1cfbc</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15331</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e">707ab45</a></td><td><code>Added some doc for default ambient field used when trying</code></td></tr></table>




---

archive/issue_comments_192489.json:
```json
{
    "body": "Changed commit from **[2123372](https://github.com/sagemath/sagetrac-mirror/commit/2123372d5c37cfbabd55fb3f1e63afaa5741ea2a)** to **[707ab45](https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e)**",
    "created_at": "2014-03-05T22:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192489",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[2123372](https://github.com/sagemath/sagetrac-mirror/commit/2123372d5c37cfbabd55fb3f1e63afaa5741ea2a)** to **[707ab45](https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e)**



---

archive/issue_comments_192490.json:
```json
{
    "body": "Changed commit from **[707ab45](https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e)** to **[d84620d](https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c)**",
    "created_at": "2014-03-05T22:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192490",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[707ab45](https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e)** to **[d84620d](https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c)**



---

archive/issue_comments_192491.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c\">d84620d</a></td><td><code>Remove useless import of pushout in number_field.py.</code></td></tr></table>\n",
    "created_at": "2014-03-05T22:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192491",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10" align="right">Comment 10</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c">d84620d</a></td><td><code>Remove useless import of pushout in number_field.py.</code></td></tr></table>




---

archive/issue_comments_192492.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nReplying to [@jpflori](#comment%3A9):\n> I've just added some doc about which ambient field is tried by default.\n\nHmm, `CDF` is actually tried *before* the algebraic closure of the pushout, contrary to what the description you wrote suggests. (That's what Simon's patch was doing, and I tried to leave the results of successful calls unchanged in mine.) I think we should either swap the corresponding items in the docstring, or try the algebraic closure first if this order makes more sense.\n\n> If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.\n\nSince no one seems to know in what scenarios these except clauses are supposed to be used (and the patches + tickets they come from do not make it clear to me), I thought we could remove them for now and add them back later, with tests triggering them, if necessary. But please feel free to change back the code to catch more exceptions if you disagree.",
    "created_at": "2014-03-07T09:46:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192492",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:11" align="right">Comment 11</div>

Replying to [@jpflori](#comment%3A9):
> I've just added some doc about which ambient field is tried by default.

Hmm, `CDF` is actually tried *before* the algebraic closure of the pushout, contrary to what the description you wrote suggests. (That's what Simon's patch was doing, and I tried to leave the results of successful calls unchanged in mine.) I think we should either swap the corresponding items in the docstring, or try the algebraic closure first if this order makes more sense.

> If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.

Since no one seems to know in what scenarios these except clauses are supposed to be used (and the patches + tickets they come from do not make it clear to me), I thought we could remove them for now and add them back later, with tests triggering them, if necessary. But please feel free to change back the code to catch more exceptions if you disagree.



---

archive/issue_events_200655.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-03-07T09:49:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200655"
}
```



---

archive/issue_events_200656.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-03-07T09:49:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200656"
}
```



---

archive/issue_comments_192493.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@mezzarobba](#comment%3A11):\n> Replying to [@jpflori](#comment%3A9):\n> > I've just added some doc about which ambient field is tried by default.\n\n> \n> Hmm, `CDF` is actually tried *before* the algebraic closure of the pushout, contrary to what the description you wrote suggests. (That's what Simon's patch was doing, and I tried to leave the results of successful calls unchanged in mine.) I think we should either swap the corresponding items in the docstring, or try the algebraic closure first if this order makes more sense.\n> \n\nOops, in fact, I took back the description with what I built on top of the original Simon branch, and there I tried CDF last.\nIt seemed to make more sense to me to test it after the algebraic closure which a priori is smaller.\nSo I'd be in favor of changing the current behavior and not the doc.\n\n> > If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.\n\n> \n> Since no one seems to know in what scenarios these except clauses are supposed to be used (and the patches + tickets they come from do not make it clear to me), I thought we could remove them for now and add them back later, with tests triggering them, if necessary. But please feel free to change back the code to catch more exceptions if you disagree.\n\nI agree with that plan.",
    "created_at": "2014-03-07T09:50:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192493",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@mezzarobba](#comment%3A11):
> Replying to [@jpflori](#comment%3A9):
> > I've just added some doc about which ambient field is tried by default.

> 
> Hmm, `CDF` is actually tried *before* the algebraic closure of the pushout, contrary to what the description you wrote suggests. (That's what Simon's patch was doing, and I tried to leave the results of successful calls unchanged in mine.) I think we should either swap the corresponding items in the docstring, or try the algebraic closure first if this order makes more sense.
> 

Oops, in fact, I took back the description with what I built on top of the original Simon branch, and there I tried CDF last.
It seemed to make more sense to me to test it after the algebraic closure which a priori is smaller.
So I'd be in favor of changing the current behavior and not the doc.

> > If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.

> 
> Since no one seems to know in what scenarios these except clauses are supposed to be used (and the patches + tickets they come from do not make it clear to me), I thought we could remove them for now and add them back later, with tests triggering them, if necessary. But please feel free to change back the code to catch more exceptions if you disagree.

I agree with that plan.



---

archive/issue_comments_192494.json:
```json
{
    "body": "Changed commit from **[d84620d](https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c)** to **[1a3f9c2](https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a)**",
    "created_at": "2014-03-12T15:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192494",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d84620d](https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c)** to **[1a3f9c2](https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a)**



---

archive/issue_comments_192495.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a\">1a3f9c2</a></td><td><code>Test the algebraic closure before CC when constructing embeddings of number fields.</code></td></tr></table>\n",
    "created_at": "2014-03-12T15:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192495",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a">1a3f9c2</a></td><td><code>Test the algebraic closure before CC when constructing embeddings of number fields.</code></td></tr></table>




---

archive/issue_comments_192496.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043\">2bedaa1</a></td><td><code>Do not forget to define ambient_field before computing its algebraic closure.</code></td></tr></table>\n",
    "created_at": "2014-03-12T16:04:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192496",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043">2bedaa1</a></td><td><code>Do not forget to define ambient_field before computing its algebraic closure.</code></td></tr></table>




---

archive/issue_comments_192497.json:
```json
{
    "body": "Changed commit from **[1a3f9c2](https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a)** to **[2bedaa1](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)**",
    "created_at": "2014-03-12T16:04:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192497",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1a3f9c2](https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a)** to **[2bedaa1](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)**



---

archive/issue_events_200657.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-03-12T16:04:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200657"
}
```



---

archive/issue_events_200658.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-03-12T16:04:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200658"
}
```



---

archive/issue_events_200659.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-03-12T17:17:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200659"
}
```



---

archive/issue_events_200660.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-03-12T17:17:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200660"
}
```



---

archive/issue_comments_192498.json:
```json
{
    "body": "Changed author from **Simon King, Marc Mezzarobba** to **Simon King, Marc Mezzarobba,  Jean-Pierre Flori**",
    "created_at": "2014-03-12T17:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192498",
    "user": "https://github.com/mezzarobba"
}
```

Changed author from **Simon King, Marc Mezzarobba** to **Simon King, Marc Mezzarobba,  Jean-Pierre Flori**



---

archive/issue_comments_192499.json:
```json
{
    "body": "Changed branch from **[u/jpflori/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15331)** to **[2bedaa1](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)**",
    "created_at": "2014-03-21T17:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15331#issuecomment-192499",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jpflori/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15331)** to **[2bedaa1](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)**



---

archive/issue_events_200661.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-21T17:47:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200661"
}
```



---

archive/issue_events_200662.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ebd2c00d9817f99510aedbdc16b40df3687fd001",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-03-21T17:47:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15331",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15331#event-200662"
}
```
