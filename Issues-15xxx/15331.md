# Issue 15331: Do not try to create embedded number field morphisms for non-embedded number fields

archive/issues_015094.json:
```json
{
    "body": "The attempt to create an embedded number field morphisms for non-embedded number fields currently fails (and should of course fail).\n\n```\nsage: L.<i> = NumberField(x^2 + 1)\nsage: K = NumberField(L(i/2+3).minpoly(), names=('i0',), embedding=L(i/2+3))\nsage: from sage.rings.number_field import number_field_morphisms\nsage: number_field_morphisms.EmbeddedNumberFieldMorphism(R, self)\nTraceback (most recent call last):\n...\nRuntimeError: maximum recursion depth exceeded in __instancecheck__\n```\nHowever, instead of running into an infinite recursion, a quick and simple `ValueError` (or perhaps `TypeError`) should be raised.\n\n**CC:**  jpflori\n\n**Branch/Commit:** [2bedaa181f5044f59c90440ca529b1f691e44043](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)\n\n**Reviewer:** Marc Mezzarobba, Jean-Pierre Flori\n\n**Author:** Simon King, Marc Mezzarobba,  Jean-Pierre Flori\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15331\n\n",
    "closed_at": "2014-03-21T17:47:32Z",
    "created_at": "2013-10-26T22:28:35Z",
    "labels": [
        "component: number fields",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Do not try to create embedded number field morphisms for non-embedded number fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15331",
    "user": "https://github.com/simon-king-jena"
}
```
The attempt to create an embedded number field morphisms for non-embedded number fields currently fails (and should of course fail).

```
sage: L.<i> = NumberField(x^2 + 1)
sage: K = NumberField(L(i/2+3).minpoly(), names=('i0',), embedding=L(i/2+3))
sage: from sage.rings.number_field import number_field_morphisms
sage: number_field_morphisms.EmbeddedNumberFieldMorphism(R, self)
Traceback (most recent call last):
...
RuntimeError: maximum recursion depth exceeded in __instancecheck__
```
However, instead of running into an infinite recursion, a quick and simple `ValueError` (or perhaps `TypeError`) should be raised.

**CC:**  jpflori

**Branch/Commit:** [2bedaa181f5044f59c90440ca529b1f691e44043](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)

**Reviewer:** Marc Mezzarobba, Jean-Pierre Flori

**Author:** Simon King, Marc Mezzarobba,  Jean-Pierre Flori

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/15331





---

archive/issue_comments_248233.json:
```json
{
    "body": "**Branch:** [u/SimonKing/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15331)",
    "created_at": "2013-10-27T01:24:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248233",
    "user": "https://github.com/simon-king-jena"
}
```

**Branch:** [u/SimonKing/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15331)



---

archive/issue_comments_248234.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-10-27T01:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248234",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_248235.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr>2123372Raise type error for number field morphisms of non-embedded number fields</tr></table>\n",
    "created_at": "2013-10-27T01:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248235",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr>2123372Raise type error for number field morphisms of non-embedded number fields</tr></table>




---

archive/issue_comments_248236.json:
```json
{
    "body": "**Commit:** [2123372d5c37cfbabd55fb3f1e63afaa5741ea2a](https://github.com/sagemath/sagetrac-mirror/commit/2123372d5c37cfbabd55fb3f1e63afaa5741ea2a)",
    "created_at": "2013-10-27T01:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248236",
    "user": "https://github.com/simon-king-jena"
}
```

**Commit:** [2123372d5c37cfbabd55fb3f1e63afaa5741ea2a](https://github.com/sagemath/sagetrac-mirror/commit/2123372d5c37cfbabd55fb3f1e63afaa5741ea2a)



---

archive/issue_comments_248237.json:
```json
{
    "body": "**Author:** Simon King",
    "created_at": "2013-10-27T01:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248237",
    "user": "https://github.com/simon-king-jena"
}
```

**Author:** Simon King



---

archive/issue_comments_248238.json:
```json
{
    "body": "**Changing status** from needs_review to needs_info.",
    "created_at": "2013-12-19T15:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248238",
    "user": "https://github.com/mezzarobba"
}
```

**Changing status** from needs_review to needs_info.



---

archive/issue_comments_248239.json:
```json
{
    "body": "<a id='comment:3'></a>\nHi Simon,\n\nI'm trying to review this ticket, but there are a couple of things I don't understand:\n* why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?\n* even if it really can't, is the giant `except` clause on line\u00a06194 of `number_field.py` necessary?\n* shouldn't\n\n  ```\n  #!python\n              Lemb = Lemb.codomain() # number_field_morphisms.pyx:187\n              while Lemb.coerce_embedding() is not None:\n                  Lemb = Lemb.coerce_embedding().codomain()\n                  ambient_field = pushout(Kemb, Lemb)\n  ```\n  read\n\n  ```\n  #!python\n              Lemb = Lemb.codomain()\n              while Lemb.coerce_embedding() is not None:\n                  Lemb = Lemb.coerce_embedding().codomain()\n              ambient_field = pushout(Kemb, Lemb)\n  ```\n  ?\n\nSorry if these are stupid questions, I'm still trying to learn how this all works!\n\nMy attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.",
    "created_at": "2013-12-19T15:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248239",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:3'></a>
Hi Simon,

I'm trying to review this ticket, but there are a couple of things I don't understand:
* why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?
* even if it really can't, is the giant `except` clause on lineÂ 6194 of `number_field.py` necessary?
* shouldn't

  ```
  #!python
              Lemb = Lemb.codomain() # number_field_morphisms.pyx:187
              while Lemb.coerce_embedding() is not None:
                  Lemb = Lemb.coerce_embedding().codomain()
                  ambient_field = pushout(Kemb, Lemb)
  ```
  read

  ```
  #!python
              Lemb = Lemb.codomain()
              while Lemb.coerce_embedding() is not None:
                  Lemb = Lemb.coerce_embedding().codomain()
              ambient_field = pushout(Kemb, Lemb)
  ```
  ?

Sorry if these are stupid questions, I'm still trying to learn how this all works!

My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.



---

archive/issue_events_050889.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15331#event-50889"
}
```



---

archive/issue_comments_248240.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [mmezzarobba](#comment%3A3):\n> Hi Simon,\n> \n> I'm trying to review this ticket, but there are a couple of things I don't understand:\n> * why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?\n> * even if it really can't, is the giant `except` clause on line\u00a06194 of `number_field.py` necessary?\n> * shouldn't\n> \n>   ```\n>   #!python\n>               Lemb = Lemb.codomain() # number_field_morphisms.pyx:187\n>               while Lemb.coerce_embedding() is not None:\n>                   Lemb = Lemb.coerce_embedding().codomain()\n>                   ambient_field = pushout(Kemb, Lemb)\n>   ```\n>   read\n> \n>   ```\n>   #!python\n>               Lemb = Lemb.codomain()\n>               while Lemb.coerce_embedding() is not None:\n>                   Lemb = Lemb.coerce_embedding().codomain()\n>               ambient_field = pushout(Kemb, Lemb)\n>   ```\n>   ?\n> \n> Sorry if these are stupid questions, I'm still trying to learn how this all works!\n> \n> My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.\n> \n\nAny remark on this Simon?\n\nIf you're too busy, I'll just have a look for myself and try to take some action to get this merged.",
    "created_at": "2014-02-27T13:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248240",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>
Replying to [mmezzarobba](#comment%3A3):
> Hi Simon,
> 
> I'm trying to review this ticket, but there are a couple of things I don't understand:
> * why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?
> * even if it really can't, is the giant `except` clause on lineÂ 6194 of `number_field.py` necessary?
> * shouldn't
> 
>   ```
>   #!python
>               Lemb = Lemb.codomain() # number_field_morphisms.pyx:187
>               while Lemb.coerce_embedding() is not None:
>                   Lemb = Lemb.coerce_embedding().codomain()
>                   ambient_field = pushout(Kemb, Lemb)
>   ```
>   read
> 
>   ```
>   #!python
>               Lemb = Lemb.codomain()
>               while Lemb.coerce_embedding() is not None:
>                   Lemb = Lemb.coerce_embedding().codomain()
>               ambient_field = pushout(Kemb, Lemb)
>   ```
>   ?
> 
> Sorry if these are stupid questions, I'm still trying to learn how this all works!
> 
> My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.
> 

Any remark on this Simon?

If you're too busy, I'll just have a look for myself and try to take some action to get this merged.



---

archive/issue_comments_248241.json:
```json
{
    "body": "<a id='comment:7'></a>\nHi Jean-Pierre and Marc,\n\nReplying to [jpflori](#comment%3A6):\n> Replying to [mmezzarobba](#comment%3A3):\n> > Hi Simon,\n> > \n> > I'm trying to review this ticket, but there are a couple of things I don't understand:\n> > * why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?\n> > * even if it really can't, is the giant `except` clause on line\u00a06194 of `number_field.py` necessary?\n\n\nSorry, I don't recall, and at the moment I am too much occupied with other things.\n\n> > * shouldn't\n> > \n> >   ```\n> >   #!python\n> >               Lemb = Lemb.codomain() # number_field_morphisms.pyx:187\n> >               while Lemb.coerce_embedding() is not None:\n> >                   Lemb = Lemb.coerce_embedding().codomain()\n> >                   ambient_field = pushout(Kemb, Lemb)\n> >   ```\n> >   read\n> > \n> >   ```\n> >   #!python\n> >               Lemb = Lemb.codomain()\n> >               while Lemb.coerce_embedding() is not None:\n> >                   Lemb = Lemb.coerce_embedding().codomain()\n> >               ambient_field = pushout(Kemb, Lemb)\n> >   ```\n\n\nYes, unless I wanted to see if the pushout exists in each step (catching the error if it does not exist).\n\n> > Sorry if these are stupid questions, I'm still trying to learn how this all works!\n\n\nSo do I (now) ;-)\n \n> > My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.\n> > \n\n> Any remark on this Simon?\n> \n> If you're too busy,\n\n\nSorry, I am.\n\nBest regards,\n\nSimon",
    "created_at": "2014-02-27T14:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248241",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>
Hi Jean-Pierre and Marc,

Replying to [jpflori](#comment%3A6):
> Replying to [mmezzarobba](#comment%3A3):
> > Hi Simon,
> > 
> > I'm trying to review this ticket, but there are a couple of things I don't understand:
> > * why can't `EmbeddedNumberFieldMorphism` try using the algebraic closure by itself?
> > * even if it really can't, is the giant `except` clause on lineÂ 6194 of `number_field.py` necessary?


Sorry, I don't recall, and at the moment I am too much occupied with other things.

> > * shouldn't
> > 
> >   ```
> >   #!python
> >               Lemb = Lemb.codomain() # number_field_morphisms.pyx:187
> >               while Lemb.coerce_embedding() is not None:
> >                   Lemb = Lemb.coerce_embedding().codomain()
> >                   ambient_field = pushout(Kemb, Lemb)
> >   ```
> >   read
> > 
> >   ```
> >   #!python
> >               Lemb = Lemb.codomain()
> >               while Lemb.coerce_embedding() is not None:
> >                   Lemb = Lemb.coerce_embedding().codomain()
> >               ambient_field = pushout(Kemb, Lemb)
> >   ```


Yes, unless I wanted to see if the pushout exists in each step (catching the error if it does not exist).

> > Sorry if these are stupid questions, I'm still trying to learn how this all works!


So do I (now) ;-)
 
> > My attempt at simplifying the code based on these remarks is at `u/mmezzarobba/embedded_NF_morphisms`.
> > 

> Any remark on this Simon?
> 
> If you're too busy,


Sorry, I am.

Best regards,

Simon



---

archive/issue_comments_248242.json:
```json
{
    "body": "<a id='comment:8'></a>\nI'm ok with Marc changes.\n\nMy only concern is that it might be the case that previously catched errors are not anymore, only ValueError are.\nNot sure how it could break the coercion system as before such errors would just lead to returning nothing and now errors might be raised.",
    "created_at": "2014-03-05T21:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248242",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>
I'm ok with Marc changes.

My only concern is that it might be the case that previously catched errors are not anymore, only ValueError are.
Not sure how it could break the coercion system as before such errors would just lead to returning nothing and now errors might be raised.



---

archive/issue_comments_248243.json:
```json
{
    "body": "**Changing branch** from \"[u/SimonKing/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15331)\" to \"[u/jpflori/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15331)\".",
    "created_at": "2014-03-05T22:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248243",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing branch** from "[u/SimonKing/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/ticket/15331)" to "[u/jpflori/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15331)".



---

archive/issue_comments_248244.json:
```json
{
    "body": "**Changing author** from \"Simon King\" to \"Simon King, Marc Mezzarobba\".",
    "created_at": "2014-03-05T22:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248244",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing author** from "Simon King" to "Simon King, Marc Mezzarobba".



---

archive/issue_comments_248245.json:
```json
{
    "body": "**Reviewer:** Marc Mezzarobba, Jean-Pierre Flori",
    "created_at": "2014-03-05T22:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248245",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Marc Mezzarobba, Jean-Pierre Flori



---

archive/issue_comments_248246.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2014-03-05T22:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248246",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_248247.json:
```json
{
    "body": "<a id='comment:9'></a>\nI've just added some doc about which ambient field is tried by default.\n\nIf nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8798dd986259f15147bb31140db8dcc129ba3c6c\">8798dd9</a></td><td><code>Simplify the logic for finding coercions between embedded number fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb1cfbc126341cceec78536c7ad1ca566b467346\">fb1cfbc</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15331</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e\">707ab45</a></td><td><code>Added some doc for default ambient field used when trying</code></td></tr></table>\n",
    "created_at": "2014-03-05T22:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248247",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
I've just added some doc about which ambient field is tried by default.

If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8798dd986259f15147bb31140db8dcc129ba3c6c">8798dd9</a></td><td><code>Simplify the logic for finding coercions between embedded number fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb1cfbc126341cceec78536c7ad1ca566b467346">fb1cfbc</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/15331</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e">707ab45</a></td><td><code>Added some doc for default ambient field used when trying</code></td></tr></table>




---

archive/issue_comments_248248.json:
```json
{
    "body": "**Changing commit** from \"[2123372d5c37cfbabd55fb3f1e63afaa5741ea2a](https://github.com/sagemath/sagetrac-mirror/commit/2123372d5c37cfbabd55fb3f1e63afaa5741ea2a)\" to \"[707ab4554dae0b00d7e3542cb417993d8503ab4e](https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e)\".",
    "created_at": "2014-03-05T22:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248248",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing commit** from "[2123372d5c37cfbabd55fb3f1e63afaa5741ea2a](https://github.com/sagemath/sagetrac-mirror/commit/2123372d5c37cfbabd55fb3f1e63afaa5741ea2a)" to "[707ab4554dae0b00d7e3542cb417993d8503ab4e](https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e)".



---

archive/issue_comments_248249.json:
```json
{
    "body": "**Changing commit** from \"[707ab4554dae0b00d7e3542cb417993d8503ab4e](https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e)\" to \"[d84620d36226927a6e1a13aad98baf8b999daf3c](https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c)\".",
    "created_at": "2014-03-05T22:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[707ab4554dae0b00d7e3542cb417993d8503ab4e](https://github.com/sagemath/sagetrac-mirror/commit/707ab4554dae0b00d7e3542cb417993d8503ab4e)" to "[d84620d36226927a6e1a13aad98baf8b999daf3c](https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c)".



---

archive/issue_comments_248250.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c\">d84620d</a></td><td><code>Remove useless import of pushout in number_field.py.</code></td></tr></table>\n",
    "created_at": "2014-03-05T22:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c">d84620d</a></td><td><code>Remove useless import of pushout in number_field.py.</code></td></tr></table>




---

archive/issue_comments_248251.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jpflori](#comment%3A9):\n> I've just added some doc about which ambient field is tried by default.\n\n\nHmm, `CDF` is actually tried *before* the algebraic closure of the pushout, contrary to what the description you wrote suggests. (That's what Simon's patch was doing, and I tried to leave the results of successful calls unchanged in mine.) I think we should either swap the corresponding items in the docstring, or try the algebraic closure first if this order makes more sense.\n\n> If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.\n\n\nSince no one seems to know in what scenarios these except clauses are supposed to be used (and the patches + tickets they come from do not make it clear to me), I thought we could remove them for now and add them back later, with tests triggering them, if necessary. But please feel free to change back the code to catch more exceptions if you disagree.",
    "created_at": "2014-03-07T09:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248251",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:11'></a>
Replying to [jpflori](#comment%3A9):
> I've just added some doc about which ambient field is tried by default.


Hmm, `CDF` is actually tried *before* the algebraic closure of the pushout, contrary to what the description you wrote suggests. (That's what Simon's patch was doing, and I tried to leave the results of successful calls unchanged in mine.) I think we should either swap the corresponding items in the docstring, or try the algebraic closure first if this order makes more sense.

> If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.


Since no one seems to know in what scenarios these except clauses are supposed to be used (and the patches + tickets they come from do not make it clear to me), I thought we could remove them for now and add them back later, with tests triggering them, if necessary. But please feel free to change back the code to catch more exceptions if you disagree.



---

archive/issue_comments_248252.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2014-03-07T09:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248252",
    "user": "https://github.com/mezzarobba"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_248253.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [mmezzarobba](#comment%3A11):\n> Replying to [jpflori](#comment%3A9):\n> > I've just added some doc about which ambient field is tried by default.\n\n> \n> Hmm, `CDF` is actually tried *before* the algebraic closure of the pushout, contrary to what the description you wrote suggests. (That's what Simon's patch was doing, and I tried to leave the results of successful calls unchanged in mine.) I think we should either swap the corresponding items in the docstring, or try the algebraic closure first if this order makes more sense.\n> \n\nOops, in fact, I took back the description with what I built on top of the original Simon branch, and there I tried CDF last.\nIt seemed to make more sense to me to test it after the algebraic closure which a priori is smaller.\nSo I'd be in favor of changing the current behavior and not the doc.\n\n> > If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.\n\n> \n> Since no one seems to know in what scenarios these except clauses are supposed to be used (and the patches + tickets they come from do not make it clear to me), I thought we could remove them for now and add them back later, with tests triggering them, if necessary. But please feel free to change back the code to catch more exceptions if you disagree.\n\nI agree with that plan.",
    "created_at": "2014-03-07T09:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248253",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
Replying to [mmezzarobba](#comment%3A11):
> Replying to [jpflori](#comment%3A9):
> > I've just added some doc about which ambient field is tried by default.

> 
> Hmm, `CDF` is actually tried *before* the algebraic closure of the pushout, contrary to what the description you wrote suggests. (That's what Simon's patch was doing, and I tried to leave the results of successful calls unchanged in mine.) I think we should either swap the corresponding items in the docstring, or try the algebraic closure first if this order makes more sense.
> 

Oops, in fact, I took back the description with what I built on top of the original Simon branch, and there I tried CDF last.
It seemed to make more sense to me to test it after the algebraic closure which a priori is smaller.
So I'd be in favor of changing the current behavior and not the doc.

> > If nobody feels concerned as I do about the uncatched errors (maybe the coercion framework already deals with them in a correct way, it just too late to try to remember about that), the let's get this merged.

> 
> Since no one seems to know in what scenarios these except clauses are supposed to be used (and the patches + tickets they come from do not make it clear to me), I thought we could remove them for now and add them back later, with tests triggering them, if necessary. But please feel free to change back the code to catch more exceptions if you disagree.

I agree with that plan.



---

archive/issue_comments_248254.json:
```json
{
    "body": "**Changing commit** from \"[d84620d36226927a6e1a13aad98baf8b999daf3c](https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c)\" to \"[1a3f9c2a3f5a6af95ea59870b272a770877ee98a](https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a)\".",
    "created_at": "2014-03-12T15:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d84620d36226927a6e1a13aad98baf8b999daf3c](https://github.com/sagemath/sagetrac-mirror/commit/d84620d36226927a6e1a13aad98baf8b999daf3c)" to "[1a3f9c2a3f5a6af95ea59870b272a770877ee98a](https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a)".



---

archive/issue_comments_248255.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a\">1a3f9c2</a></td><td><code>Test the algebraic closure before CC when constructing embeddings of number fields.</code></td></tr></table>\n",
    "created_at": "2014-03-12T15:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248255",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a">1a3f9c2</a></td><td><code>Test the algebraic closure before CC when constructing embeddings of number fields.</code></td></tr></table>




---

archive/issue_comments_248256.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043\">2bedaa1</a></td><td><code>Do not forget to define ambient_field before computing its algebraic closure.</code></td></tr></table>\n",
    "created_at": "2014-03-12T16:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043">2bedaa1</a></td><td><code>Do not forget to define ambient_field before computing its algebraic closure.</code></td></tr></table>




---

archive/issue_comments_248257.json:
```json
{
    "body": "**Changing commit** from \"[1a3f9c2a3f5a6af95ea59870b272a770877ee98a](https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a)\" to \"[2bedaa181f5044f59c90440ca529b1f691e44043](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)\".",
    "created_at": "2014-03-12T16:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1a3f9c2a3f5a6af95ea59870b272a770877ee98a](https://github.com/sagemath/sagetrac-mirror/commit/1a3f9c2a3f5a6af95ea59870b272a770877ee98a)" to "[2bedaa181f5044f59c90440ca529b1f691e44043](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)".



---

archive/issue_comments_248258.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2014-03-12T16:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248258",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_248259.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-03-12T17:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248259",
    "user": "https://github.com/mezzarobba"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_248260.json:
```json
{
    "body": "**Changing author** from \"Simon King, Marc Mezzarobba\" to \"Simon King, Marc Mezzarobba,  Jean-Pierre Flori\".",
    "created_at": "2014-03-12T17:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248260",
    "user": "https://github.com/mezzarobba"
}
```

**Changing author** from "Simon King, Marc Mezzarobba" to "Simon King, Marc Mezzarobba,  Jean-Pierre Flori".



---

archive/issue_comments_248261.json:
```json
{
    "body": "**Changing branch** from \"[u/jpflori/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15331)\" to \"[2bedaa181f5044f59c90440ca529b1f691e44043](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)\".",
    "created_at": "2014-03-21T17:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248261",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jpflori/ticket/15331](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15331)" to "[2bedaa181f5044f59c90440ca529b1f691e44043](https://github.com/sagemath/sagetrac-mirror/commit/2bedaa181f5044f59c90440ca529b1f691e44043)".



---

archive/issue_events_050890.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-21T17:47:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15331#event-50890"
}
```



---

archive/issue_comments_248262.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2014-03-21T17:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15331#issuecomment-248262",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
