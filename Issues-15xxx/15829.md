# Issue 15829: Ray class groups and Hecke characters

archive/issues_015592.json:
```json
{
    "body": "Sage's support for ray class groups of number fields and Hecke characters is currently limited to `NumberFieldFractionalIdeal.ray_class_number()`.\n\nThe purpose of this ticket is to implement ray class groups and Hecke characters using PARI's `bnrinit0()` and related functions.\n\n\nCC:  argaezg @JohnCremona @loefflerd @slel\n\nKeywords: ray class group, pari, Hecke character, Sage Days 81, sd87\n\nAuthor: Robert Harron\n\nBranch: public/ticket/15829\n\nStatus: new\n\nCommit: d3b2b34ea3e52ff6c815377157a53aa846f1d8cd\n\nIssue created by migration from https://trac.sagemath.org/ticket/15829\n\n",
    "created_at": "2014-02-17T23:34:47Z",
    "labels": [
        "component: number fields"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-wishlist",
    "title": "Ray class groups and Hecke characters",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15829",
    "user": "https://github.com/pjbruin"
}
```
Sage's support for ray class groups of number fields and Hecke characters is currently limited to `NumberFieldFractionalIdeal.ray_class_number()`.

The purpose of this ticket is to implement ray class groups and Hecke characters using PARI's `bnrinit0()` and related functions.


CC:  argaezg @JohnCremona @loefflerd @slel

Keywords: ray class group, pari, Hecke character, Sage Days 81, sd87

Author: Robert Harron

Branch: public/ticket/15829

Status: new

Commit: d3b2b34ea3e52ff6c815377157a53aa846f1d8cd

Issue created by migration from https://trac.sagemath.org/ticket/15829





---

archive/issue_events_046549.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46549"
}
```



---

archive/issue_events_046550.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46550"
}
```



---

archive/issue_events_046551.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46551"
}
```



---

archive/issue_comments_215152.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,8 +1,7 @@\n-Sage's support for ray class groups of number fields is currently limited to `NumberFieldFractionalIdeal.ray_class_number()`.\n+Sage's support for ray class groups of number fields and Hecke characters is currently limited to `NumberFieldFractionalIdeal.ray_class_number()`.\n \n-The purpose of this ticket is to implement ray class groups using PARI's `bnrinit0()` and related functions.\n+The purpose of this ticket is to implement ray class groups and Hecke characters using PARI's `bnrinit0()` and related functions.\n \n-Keywords: ray class group pari\n \n Comment: 1\n \n```\n",
    "created_at": "2016-08-16T20:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215152",
    "user": "https://github.com/rharron"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,8 +1,7 @@
-Sage's support for ray class groups of number fields is currently limited to `NumberFieldFractionalIdeal.ray_class_number()`.
+Sage's support for ray class groups of number fields and Hecke characters is currently limited to `NumberFieldFractionalIdeal.ray_class_number()`.
 
-The purpose of this ticket is to implement ray class groups using PARI's `bnrinit0()` and related functions.
+The purpose of this ticket is to implement ray class groups and Hecke characters using PARI's `bnrinit0()` and related functions.
 
-Keywords: ray class group pari
 
 Comment: 1
 
```




---

archive/issue_events_046552.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2016-08-16T20:35:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46552"
}
```



---

archive/issue_events_046553.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2016-08-16T20:35:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46553"
}
```



---

archive/issue_comments_215153.json:
```json
{
    "body": "Changing keywords from \"ray class group pari\" to \"ray class group, pari, Hecke character, Sage Days 81\".",
    "created_at": "2016-08-16T20:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215153",
    "user": "https://github.com/rharron"
}
```

Changing keywords from "ray class group pari" to "ray class group, pari, Hecke character, Sage Days 81".



---

archive/issue_comments_215154.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-16T20:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215155.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-08-16T20:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215155",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_215156.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-16T22:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215156",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215157.json:
```json
{
    "body": "<a id='comment:8'></a>I've pushed some code with some basic functionality for computing ray class groups, Hecke characters, and their L-functions. I'll be working on this over the next week at Sage Days 81. First off is a rewrite to avoid keeping track of an ideal representing a ray class.",
    "created_at": "2016-08-16T23:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215157",
    "user": "https://github.com/rharron"
}
```

<a id='comment:8'></a>I've pushed some code with some basic functionality for computing ray class groups, Hecke characters, and their L-functions. I'll be working on this over the next week at Sage Days 81. First off is a rewrite to avoid keeping track of an ideal representing a ray class.



---

archive/issue_comments_215158.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-17T11:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215159.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-17T21:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215159",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215160.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-19T11:09:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215160",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215161.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-20T08:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215162.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-24T03:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215163.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T00:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215163",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215164.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-30T02:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215164",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215165.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-03T01:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215165",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215166.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-07T10:44:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215166",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215167.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-15T07:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215167",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215168.json:
```json
{
    "body": "<a id='comment:19'></a>rebased on 7.6.b3\n\n---\nNew commits:",
    "created_at": "2017-02-13T21:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215168",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:19'></a>rebased on 7.6.b3

---
New commits:



---

archive/issue_comments_215169.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-13T21:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215169",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215170.json:
```json
{
    "body": "<a id='comment:21'></a>Is there an estimate for when this will be ready for review?",
    "created_at": "2017-02-15T13:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215170",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:21'></a>Is there an estimate for when this will be ready for review?



---

archive/issue_comments_215171.json:
```json
{
    "body": "<a id='comment:22'></a>Hi John,\n\nNo plan right now, I've been swamped. If there are people very interested in seeing this move forward, I can try to carve more time out for it. It's pretty much functional, but still requires several doctests.",
    "created_at": "2017-02-17T08:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215171",
    "user": "https://github.com/rharron"
}
```

<a id='comment:22'></a>Hi John,

No plan right now, I've been swamped. If there are people very interested in seeing this move forward, I can try to carve more time out for it. It's pretty much functional, but still requires several doctests.



---

archive/issue_comments_215172.json:
```json
{
    "body": "<a id='comment:23'></a>One thing which could work well would be for a potential user to try it out and come with some doctests of their own.  I have a student who might do that but he is a novice at Sage development and I would have to walk him through the process of building this branch of Sage.  I'll see what I can do -- but we do have a use in mind.  Thanks.",
    "created_at": "2017-02-17T08:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215172",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:23'></a>One thing which could work well would be for a potential user to try it out and come with some doctests of their own.  I have a student who might do that but he is a novice at Sage development and I would have to walk him through the process of building this branch of Sage.  I'll see what I can do -- but we do have a use in mind.  Thanks.



---

archive/issue_comments_215173.json:
```json
{
    "body": "<a id='comment:24'></a>Yes, that would work well. There are several doctests already, especially for the more important functions, but it's definitely not complete. I'll try to take a look at the code soon to see what big things if any really need to be done. There are certainly some changes that would be good to do if a newer version of pari has been added to sage since last I worked on this. And hopefully, I won't get confused by the rebasing that occurred, as I know little about this git+trac stuff!",
    "created_at": "2017-02-17T09:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215173",
    "user": "https://github.com/rharron"
}
```

<a id='comment:24'></a>Yes, that would work well. There are several doctests already, especially for the more important functions, but it's definitely not complete. I'll try to take a look at the code soon to see what big things if any really need to be done. There are certainly some changes that would be good to do if a newer version of pari has been added to sage since last I worked on this. And hopefully, I won't get confused by the rebasing that occurred, as I know little about this git+trac stuff!



---

archive/issue_comments_215174.json:
```json
{
    "body": "<a id='comment:25'></a>I checked out the branch, which had been rebased to 7.6.beta3, and merged in 7.6.beta4; no problem with the merge but the resulting code did not build: there was a cython compilation error in the file cypari2/gen.pyx.  I don't have time to troubleshoot this...",
    "created_at": "2017-02-17T16:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215174",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:25'></a>I checked out the branch, which had been rebased to 7.6.beta3, and merged in 7.6.beta4; no problem with the merge but the resulting code did not build: there was a cython compilation error in the file cypari2/gen.pyx.  I don't have time to troubleshoot this...



---

archive/issue_comments_215175.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 cremona]:\n> I checked out the branch, which had been rebased to 7.6.beta3, and merged in 7.6.beta4; no problem with the merge but the resulting code did not build: there was a cython compilation error in the file cypari2/gen.pyx.  I don't have time to troubleshoot this...\n\n\nThis is my fault, I did the merge, but I do not know how to fix that.",
    "created_at": "2017-02-17T16:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215175",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'></a>Replying to [comment:25 cremona]:
> I checked out the branch, which had been rebased to 7.6.beta3, and merged in 7.6.beta4; no problem with the merge but the resulting code did not build: there was a cython compilation error in the file cypari2/gen.pyx.  I don't have time to troubleshoot this...


This is my fault, I did the merge, but I do not know how to fix that.



---

archive/issue_comments_215176.json:
```json
{
    "body": "Changing keywords from \"ray class group, pari, Hecke character, Sage Days 81\" to \"ray class group, pari, Hecke character, Sage Days 81, sd87\".",
    "created_at": "2017-07-17T17:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215176",
    "user": "https://github.com/roed314"
}
```

Changing keywords from "ray class group, pari, Hecke character, Sage Days 81" to "ray class group, pari, Hecke character, Sage Days 81, sd87".



---

archive/issue_comments_215177.json:
```json
{
    "body": "<a id='comment:28'></a>I'm at sage days 87 rebasing this on top of 8.0.rc1. It runs now, though the doctests are giving different answers, possibly because pari has been updated. Re cypari2: the issue was that the pari interface (if that's the right word) was being separated from sage and so gen.pyx was moved. Now that the separation has been completed, this patch will likely require that the cypari2 package be modified separately (at https://github.com/defeo/cypari2).",
    "created_at": "2017-07-18T04:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215177",
    "user": "https://github.com/rharron"
}
```

<a id='comment:28'></a>I'm at sage days 87 rebasing this on top of 8.0.rc1. It runs now, though the doctests are giving different answers, possibly because pari has been updated. Re cypari2: the issue was that the pari interface (if that's the right word) was being separated from sage and so gen.pyx was moved. Now that the separation has been completed, this patch will likely require that the cypari2 package be modified separately (at https://github.com/defeo/cypari2).



---

archive/issue_comments_215178.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-18T20:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215178",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_046554.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2017-07-18T20:34:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46554"
}
```



---

archive/issue_events_046555.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2017-07-18T20:34:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46555"
}
```



---

archive/issue_comments_215179.json:
```json
{
    "body": "<a id='comment:31'></a>I've pushed a new commit (to a new branch, really) that runs on sage 8.0.rc1. It also requires a change to the cypari2 package; for this I have made a pull request to the package on github (https://github.com/defeo/cypari2/pull/16), and I also opened a ticket there (https://github.com/defeo/cypari2/issues/17).",
    "created_at": "2017-07-18T20:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215179",
    "user": "https://github.com/rharron"
}
```

<a id='comment:31'></a>I've pushed a new commit (to a new branch, really) that runs on sage 8.0.rc1. It also requires a change to the cypari2 package; for this I have made a pull request to the package on github (https://github.com/defeo/cypari2/pull/16), and I also opened a ticket there (https://github.com/defeo/cypari2/issues/17).



---

archive/issue_comments_215180.json:
```json
{
    "body": "<a id='comment:33'></a>The pull request I made to cypari2 was accepted. I've created a new ticket on trac (#23518) to update the cypari2 version in sage and added it as a dependency of this ticket.",
    "created_at": "2017-07-23T17:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215180",
    "user": "https://github.com/rharron"
}
```

<a id='comment:33'></a>The pull request I made to cypari2 was accepted. I've created a new ticket on trac (#23518) to update the cypari2 version in sage and added it as a dependency of this ticket.



---

archive/issue_comments_215181.json:
```json
{
    "body": "<a id='comment:34'></a>Does this really require the Dokchitser script? Did you try the new L-function package in upstream PARI/GP?",
    "created_at": "2017-08-22T14:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215181",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>Does this really require the Dokchitser script? Did you try the new L-function package in upstream PARI/GP?



---

archive/issue_comments_215182.json:
```json
{
    "body": "<a id='comment:35'></a>One day we'll have a proper L-functions package in Sage (I am not volunteering but quite a lot of relevant code is being written by LMFDB people).   Meanwhile, I am waiting to use this new code and am happy for it to start out using Dokchitser even if an improvement is possible using the new PARI/GP stuff, as that would be a lot of extra work (I think).",
    "created_at": "2017-08-22T16:29:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215182",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:35'></a>One day we'll have a proper L-functions package in Sage (I am not volunteering but quite a lot of relevant code is being written by LMFDB people).   Meanwhile, I am waiting to use this new code and am happy for it to start out using Dokchitser even if an improvement is possible using the new PARI/GP stuff, as that would be a lot of extra work (I think).



---

archive/issue_comments_215183.json:
```json
{
    "body": "<a id='comment:36'></a>It shouldn't require the script. I only recently noticed that pari could do this, and so I haven't tried it. I don't think it would be difficult to switch to the pari library, but maybe I'll put that low priority since John is awaiting.\n\nAnd John, sorry this is taking so long, I have a lot of other things on my plate. Have you tried it out? It works (at least on 8.0rc1). There's mostly just a bunch of doctests to write.",
    "created_at": "2017-08-22T18:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215183",
    "user": "https://github.com/rharron"
}
```

<a id='comment:36'></a>It shouldn't require the script. I only recently noticed that pari could do this, and so I haven't tried it. I don't think it would be difficult to switch to the pari library, but maybe I'll put that low priority since John is awaiting.

And John, sorry this is taking so long, I have a lot of other things on my plate. Have you tried it out? It works (at least on 8.0rc1). There's mostly just a bunch of doctests to write.



---

archive/issue_comments_215184.json:
```json
{
    "body": "<a id='comment:37'></a>Sorry Rob, I have no right to ask you to work harder than you have been!  I have many other things to do, and I had not tested this yet (I was going to wait until there was no dependency on the cypari ticket #23518).",
    "created_at": "2017-08-23T09:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215184",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:37'></a>Sorry Rob, I have no right to ask you to work harder than you have been!  I have many other things to do, and I had not tested this yet (I was going to wait until there was no dependency on the cypari ticket #23518).



---

archive/issue_comments_215185.json:
```json
{
    "body": "<a id='comment:38'></a>Last 10 new commits:",
    "created_at": "2018-04-17T09:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215185",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:38'></a>Last 10 new commits:



---

archive/issue_comments_215186.json:
```json
{
    "body": "<a id='comment:39'></a>rebased on 8.2.rc3\n\n---\nNew commits:",
    "created_at": "2018-04-17T09:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215186",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:39'></a>rebased on 8.2.rc3

---
New commits:



---

archive/issue_comments_215187.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-17T09:29:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215187",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215188.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-18T06:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215188",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215189.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-20T06:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215189",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215190.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-21T15:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215190",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215191.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-22T06:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215191",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215192.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-22T09:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215192",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215193.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-22T12:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215193",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215194.json:
```json
{
    "body": "<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-22T15:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215194",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215195.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-22T19:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215195",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_events_046556.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-04-22T19:25:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46556"
}
```



---

archive/issue_events_046557.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-04-22T19:25:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46557"
}
```



---

archive/issue_comments_215196.json:
```json
{
    "body": "<a id='comment:50'></a>Why is this not marked as ready for review? What is left to do?",
    "created_at": "2018-06-11T15:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215196",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:50'></a>Why is this not marked as ready for review? What is left to do?



---

archive/issue_comments_215197.json:
```json
{
    "body": "<a id='comment:51'></a>well, many failing doctests, and a lot of missing documentation..",
    "created_at": "2018-06-11T18:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215197",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:51'></a>well, many failing doctests, and a lot of missing documentation..



---

archive/issue_comments_215198.json:
```json
{
    "body": "<a id='comment:52'></a>OK, just checking.  Rob?",
    "created_at": "2018-06-11T19:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215198",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:52'></a>OK, just checking.  Rob?



---

archive/issue_comments_215199.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-30T06:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215200.json:
```json
{
    "body": "<a id='comment:54'></a>update milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215200",
    "user": "https://github.com/videlec"
}
```

<a id='comment:54'></a>update milestone 8.3 -> 8.4



---

archive/issue_events_046558.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46558"
}
```



---

archive/issue_events_046559.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46559"
}
```



---

archive/issue_comments_215201.json:
```json
{
    "body": "<a id='comment:55'></a>I have made a rebased, squashed and refreshed branch.\n\n---\nNew commits:",
    "created_at": "2019-06-06T19:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215201",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:55'></a>I have made a rebased, squashed and refreshed branch.

---
New commits:



---

archive/issue_events_046560.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-06T19:47:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46560"
}
```



---

archive/issue_events_046561.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-06T19:47:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46561"
}
```



---

archive/issue_comments_215202.json:
```json
{
    "body": "<a id='comment:57'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215202",
    "user": "https://github.com/embray"
}
```

<a id='comment:57'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_events_046562.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46562"
}
```



---

archive/issue_events_046563.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-29T16:52:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15829#event-46563"
}
```



---

archive/issue_comments_215203.json:
```json
{
    "body": "<a id='comment:58'></a>Related:\n\n- [Ask Sage question 57338: Computing Ray class numbers?](https://ask.sagemath.org/question/57338)\n- [Ask Sage question 9127: Computing the order of an ideal in a ray class group](https://ask.sagemath.org/question/9127)",
    "created_at": "2021-05-29T16:52:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215203",
    "user": "https://github.com/slel"
}
```

<a id='comment:58'></a>Related:

- [Ask Sage question 57338: Computing Ray class numbers?](https://ask.sagemath.org/question/57338)
- [Ask Sage question 9127: Computing the order of an ideal in a ray class group](https://ask.sagemath.org/question/9127)



---

archive/issue_comments_215204.json:
```json
{
    "body": "<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-05-31T09:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215204",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_215205.json:
```json
{
    "body": "<a id='comment:60'></a>Thanks Fr\u00e9d\u00e9ric, is this just a rebase?\n\nThe branch provides a lot of new functionality.\n\nDo the author and reviewers have time to see this through?\n\nCan the ticket be split into smaller chunks to make the review easier?\n\nThe `conductor` method of the `HeckeCharacter` class has this:\n\n```\n        modulus = bnr.bnrconductor(self._log_values_on_gens())\n        # in a newer version of pari, this is replaced with bnrconductor\n```\nIs the comment obsolete since `bnrconductor` is already used?\n\nOn the other hand, the `is_primitive` method goes:\n\n```\n        # When a newer version of pari is part of Sage, call\n        # bnrisconductor instead.\n        return self.conductor() == self.modulus()\n```\nand the `root_number` method goes:\n\n```\n        # try-except only necessary because of\n        # http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1848\n        # According to Belabas this bug seems to occur because of\n        # a problem dealing with imprimitive characters, thus the code\n        # in the except clause below. Once we incorporate a version\n        # of pari where this bug is fixed, the command in the try\n        # itself should be sufficient. The first example above\n        # (with Q(cubert(3))) fails without the except clause\n        # and so can be used to test if the pari bug has been fixed.\n        try:\n            rn = self.parent().group().pari_bnr().bnrrootnumber(self._log_values_on_gens())\n        except PariError:\n            chi = self.primitive_character()\n            rn = chi.parent().group().pari_bnr().bnrrootnumber(chi._log_values_on_gens())\n        return rn.sage()\n```\nbut it would seem the pari bug in question is long fixed, right?\n\nThe examples block for `primitive_character` needs care:\n\n```diff\n-        Examples::\n+        EXAMPLES::\n```\n\nThere are some unwanted spaces before `::` in other example blocks.\n\nIs all the commented-out code waiting for some other ticket to be in?\n\n- method `_pari_finite_factors` in the class `Modulus`\n- method `_element_constructor_` in the class `HeckeCharacterGroup_class`\n- lots of code in the class `RayClassGroupElement`",
    "created_at": "2021-05-31T15:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215205",
    "user": "https://github.com/slel"
}
```

<a id='comment:60'></a>Thanks Frédéric, is this just a rebase?

The branch provides a lot of new functionality.

Do the author and reviewers have time to see this through?

Can the ticket be split into smaller chunks to make the review easier?

The `conductor` method of the `HeckeCharacter` class has this:

```
        modulus = bnr.bnrconductor(self._log_values_on_gens())
        # in a newer version of pari, this is replaced with bnrconductor
```
Is the comment obsolete since `bnrconductor` is already used?

On the other hand, the `is_primitive` method goes:

```
        # When a newer version of pari is part of Sage, call
        # bnrisconductor instead.
        return self.conductor() == self.modulus()
```
and the `root_number` method goes:

```
        # try-except only necessary because of
        # http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1848
        # According to Belabas this bug seems to occur because of
        # a problem dealing with imprimitive characters, thus the code
        # in the except clause below. Once we incorporate a version
        # of pari where this bug is fixed, the command in the try
        # itself should be sufficient. The first example above
        # (with Q(cubert(3))) fails without the except clause
        # and so can be used to test if the pari bug has been fixed.
        try:
            rn = self.parent().group().pari_bnr().bnrrootnumber(self._log_values_on_gens())
        except PariError:
            chi = self.primitive_character()
            rn = chi.parent().group().pari_bnr().bnrrootnumber(chi._log_values_on_gens())
        return rn.sage()
```
but it would seem the pari bug in question is long fixed, right?

The examples block for `primitive_character` needs care:

```diff
-        Examples::
+        EXAMPLES::
```

There are some unwanted spaces before `::` in other example blocks.

Is all the commented-out code waiting for some other ticket to be in?

- method `_pari_finite_factors` in the class `Modulus`
- method `_element_constructor_` in the class `HeckeCharacterGroup_class`
- lots of code in the class `RayClassGroupElement`



---

archive/issue_comments_215206.json:
```json
{
    "body": "<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-31T16:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215207.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-07T06:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15829#issuecomment-215207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:
