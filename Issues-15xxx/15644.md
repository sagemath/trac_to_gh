# Issue 15644: Sage graphs often cut off loops

archive/issues_015644.json:
```json
{
    "body": "For a long time now, Sage graphs have often been drawn with loops cut off.  This is because the axes are decided based on the positions of the vertices, without accounting for loops.  This idea fixes it:\n\n```\ndef loop_graph_plot(g, **options):\n    p=g.graphplot()\n    loopsize=p._options['loop_size']\n    q=p.plot()\n    r=q.get_axes_range()\n    q.set_axes_range(xmin=r['xmin']-loopsize,xmax=r['xmax']+loopsize,ymin=r['ymin']-2*loopsize)\n    return q\n\ng = Graph({1:[0,1]})\nshow(loop_graph_plot(g))\n```\n\nI think the relevant changes should be made in `sage/graphs/graph_plot.py`.\n\nThanks to Leslie Hogben for pointing this out (among others over the years).\n\nIssue created by migration from https://trac.sagemath.org/ticket/15881\n\n",
    "closed_at": "2020-09-16T09:29:21Z",
    "created_at": "2014-03-01T02:52:07Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Sage graphs often cut off loops",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15644",
    "user": "https://github.com/jasongrout"
}
```
For a long time now, Sage graphs have often been drawn with loops cut off.  This is because the axes are decided based on the positions of the vertices, without accounting for loops.  This idea fixes it:

```
def loop_graph_plot(g, **options):
    p=g.graphplot()
    loopsize=p._options['loop_size']
    q=p.plot()
    r=q.get_axes_range()
    q.set_axes_range(xmin=r['xmin']-loopsize,xmax=r['xmax']+loopsize,ymin=r['ymin']-2*loopsize)
    return q

g = Graph({1:[0,1]})
show(loop_graph_plot(g))
```

I think the relevant changes should be made in `sage/graphs/graph_plot.py`.

Thanks to Leslie Hogben for pointing this out (among others over the years).

Issue created by migration from https://trac.sagemath.org/ticket/15881





---

archive/issue_events_046728.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15644#event-46728"
}
```



---

archive/issue_events_046729.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15644#event-46729"
}
```



---

archive/issue_events_046730.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15644#event-46730"
}
```



---

archive/issue_comments_202265.json:
```json
{
    "body": "I did several trials (e.g., adding loops to a 2 by 2 grid) and don't see any cut off on loops.\n\nIf no-one can reproduce the issue, may be we can close this ticket.",
    "created_at": "2020-08-30T11:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15644#issuecomment-202265",
    "user": "https://github.com/dcoudert"
}
```

I did several trials (e.g., adding loops to a 2 by 2 grid) and don't see any cut off on loops.

If no-one can reproduce the issue, may be we can close this ticket.



---

archive/issue_comments_202266.json:
```json
{
    "body": "Likely outdated",
    "created_at": "2020-08-30T18:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15644#issuecomment-202266",
    "user": "https://github.com/mkoeppe"
}
```

Likely outdated



---

archive/issue_events_046731.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-30T18:24:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15644#event-46731"
}
```



---

archive/issue_events_046732.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-30T18:24:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15644#event-46732"
}
```



---

archive/issue_comments_202267.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-30T18:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15644#issuecomment-202267",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_202268.json:
```json
{
    "body": "So then.",
    "created_at": "2020-08-30T19:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15644#issuecomment-202268",
    "user": "https://github.com/dcoudert"
}
```

So then.



---

archive/issue_comments_202269.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-30T19:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15644#issuecomment-202269",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_046733.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-09-16T09:29:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15644#event-46733"
}
```



---

archive/issue_comments_202270.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2020-09-16T09:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15644#issuecomment-202270",
    "user": "https://github.com/fchapoton"
}
```

Resolution: worksforme
