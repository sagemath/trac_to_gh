# Issue 15590: Pimp my Shell

archive/issues_015353.json:
```json
{
    "assignees": [],
    "body": "This patch reorganizes the \"sage -sh\" shell. If you are using bash, it also introduces a PS1 that includes git branch status. This can be very useful for beginners to keep an eye on the repository status.\n\n```\nSage: desktop 02:53:17 {t/15590/pimp_my_shell|modified} ~/Sage/git\n$ git add .\nSage: desktop 02:53:20 {t/15590/pimp_my_shell|staged} ~/Sage/git\n$ git commit -m 'also display staged as red'\n[t/15590/pimp_my_shell 2678e8d] also display staged as red\n 1 file changed, 36 insertions(+), 30 deletions(-)\nSage: desktop 02:53:35 (t/15590/pimp_my_shell) ~/Sage/git\n$ git st\n```\nbut with colors.\n\nCC:  @novoselt @videlec @orlitzky\n\nBranch/Commit: **[u/jhpalmieri/pimp_my_shell](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pimp_my_shell) @ [`58fa20d`](https://github.com/sagemath/sagetrac-mirror/commit/58fa20d2a6f762002cb92d60fd6c564b7d2292a7)**\n\nAuthor: **Volker Braun**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15590_\n\n",
    "created_at": "2013-12-25T21:07:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wishlist%20item",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Pimp my Shell",
    "type": "issue",
    "updated_at": "2021-11-20T21:40:26Z",
    "url": "https://github.com/sagemath/sage/issues/15590",
    "user": "https://github.com/vbraun"
}
```
This patch reorganizes the "sage -sh" shell. If you are using bash, it also introduces a PS1 that includes git branch status. This can be very useful for beginners to keep an eye on the repository status.

```
Sage: desktop 02:53:17 {t/15590/pimp_my_shell|modified} ~/Sage/git
$ git add .
Sage: desktop 02:53:20 {t/15590/pimp_my_shell|staged} ~/Sage/git
$ git commit -m 'also display staged as red'
[t/15590/pimp_my_shell 2678e8d] also display staged as red
 1 file changed, 36 insertions(+), 30 deletions(-)
Sage: desktop 02:53:35 (t/15590/pimp_my_shell) ~/Sage/git
$ git st
```
but with colors.

CC:  @novoselt @videlec @orlitzky

Branch/Commit: **[u/jhpalmieri/pimp_my_shell](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pimp_my_shell) @ [`58fa20d`](https://github.com/sagemath/sagetrac-mirror/commit/58fa20d2a6f762002cb92d60fd6c564b7d2292a7)**

Author: **Volker Braun**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/15590_





---

archive/issue_events_220219.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-25T21:07:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220219"
}
```



---

archive/issue_events_220220.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-25T21:07:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220220"
}
```



---

archive/issue_comments_195239.json:
```json
{
    "body": "Branch: **[u/vbraun/pimp_my_shell](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/pimp_my_shell)**",
    "created_at": "2013-12-26T02:40:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195239",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/pimp_my_shell](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/pimp_my_shell)**



---

archive/issue_comments_195240.json:
```json
{
    "body": "Commit: **[`2678e8d`](https://github.com/sagemath/sagetrac-mirror/commit/2678e8d56c40b882ce8cd08c31f484d2cffaeb6f)**",
    "created_at": "2013-12-26T02:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195240",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`2678e8d`](https://github.com/sagemath/sagetrac-mirror/commit/2678e8d56c40b882ce8cd08c31f484d2cffaeb6f)**



---

archive/issue_comments_195241.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2678e8d\"><code>2678e8d</code></a></td><td><code>also display staged as red</code></td></tr></table>\n",
    "created_at": "2013-12-26T02:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195241",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2678e8d"><code>2678e8d</code></a></td><td><code>also display staged as red</code></td></tr></table>




---

archive/issue_events_220221.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-26T02:57:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220221"
}
```



---

archive/issue_comments_195242.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2013-12-26T02:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195242",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_events_220222.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-26T02:57:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220222"
}
```



---

archive/issue_events_220223.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-26T02:57:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "0000b0",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220223"
}
```



---

archive/issue_comments_195243.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+This patch reorganizes the \"sage -sh\" shell. If you are using bash, it also introduces a PS1 that includes git branch status. This can be very useful for beginners to keep an eye on the repository status.\n``````\n",
    "created_at": "2013-12-26T02:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195243",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+This patch reorganizes the "sage -sh" shell. If you are using bash, it also introduces a PS1 that includes git branch status. This can be very useful for beginners to keep an eye on the repository status.
``````




---

archive/issue_comments_195244.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,13 @@\n This patch reorganizes the \"sage -sh\" shell. If you are using bash, it also introduces a PS1 that includes git branch status. This can be very useful for beginners to keep an eye on the repository status.\n+\n+```\n+Sage: desktop 02:53:17 {t/15590/pimp_my_shell|modified} ~/Sage/git\n+$ git add .\n+Sage: desktop 02:53:20 {t/15590/pimp_my_shell|staged} ~/Sage/git\n+$ git commit -m 'also display staged as red'\n+[t/15590/pimp_my_shell 2678e8d] also display staged as red\n+ 1 file changed, 36 insertions(+), 30 deletions(-)\n+Sage: desktop 02:53:35 (t/15590/pimp_my_shell) ~/Sage/git\n+$ git st\n+```\n+but with colors.\n``````\n",
    "created_at": "2013-12-26T02:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195244",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,13 @@
 This patch reorganizes the "sage -sh" shell. If you are using bash, it also introduces a PS1 that includes git branch status. This can be very useful for beginners to keep an eye on the repository status.
+
+```
+Sage: desktop 02:53:17 {t/15590/pimp_my_shell|modified} ~/Sage/git
+$ git add .
+Sage: desktop 02:53:20 {t/15590/pimp_my_shell|staged} ~/Sage/git
+$ git commit -m 'also display staged as red'
+[t/15590/pimp_my_shell 2678e8d] also display staged as red
+ 1 file changed, 36 insertions(+), 30 deletions(-)
+Sage: desktop 02:53:35 (t/15590/pimp_my_shell) ~/Sage/git
+$ git st
+```
+but with colors.
``````




---

archive/issue_comments_195245.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2b46b47f05d899041c49c70b58d82d4b36eaf99\"><code>f2b46b4</code></a></td><td><code>support for old git versions</code></td></tr></table>\n",
    "created_at": "2014-01-05T21:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195245",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2b46b47f05d899041c49c70b58d82d4b36eaf99"><code>f2b46b4</code></a></td><td><code>support for old git versions</code></td></tr></table>




---

archive/issue_comments_195246.json:
```json
{
    "body": "Changed commit from **[`2678e8d`](https://github.com/sagemath/sagetrac-mirror/commit/2678e8d56c40b882ce8cd08c31f484d2cffaeb6f)** to **[`f2b46b4`](https://github.com/sagemath/sagetrac-mirror/commit/f2b46b47f05d899041c49c70b58d82d4b36eaf99)**",
    "created_at": "2014-01-05T21:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195246",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2678e8d`](https://github.com/sagemath/sagetrac-mirror/commit/2678e8d56c40b882ce8cd08c31f484d2cffaeb6f)** to **[`f2b46b4`](https://github.com/sagemath/sagetrac-mirror/commit/f2b46b47f05d899041c49c70b58d82d4b36eaf99)**



---

archive/issue_events_220224.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220224"
}
```



---

archive/issue_events_220225.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220225"
}
```



---

archive/issue_comments_195247.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis is not working for me on OS X. On one machine, `$SHELL` is set to `/bin/bash` but I don't get an interesting prompt: I just get `bash-3.2$`. As far as I can tell, this is not loading my `.bashrc` file (I put an echo command in there to see, and nothing is printed). So I don't think it's loading `src/ext/shell/bashrc`, either. On another OS X machine, it's running bash but `$SHELL` is set to `/bin/sh`. I tried making the following changes, but it didn't help: the prompt remained `sh-3.2$`.\n\n```diff\ndiff --git a/src/bin/sage b/src/bin/sage\nindex c01fea2..8770a57 100755\n--- a/src/bin/sage\n+++ b/src/bin/sage\n@@ -278,6 +278,21 @@ if [ \"$1\" = '-sh' -o \"$1\" = '--sh' ]; then\n             export ZDOTDIR=\"$SAGE_EXTCODE/shell\"\n             set -- \"$SHELL\" -d \"$@\"\n             ;;\n+        sh)\n+            # see http://stackoverflow.com/a/3327022/1401572\n+            if [ -n $BASH ]; then\n+                set -- \"$SHELL\" --rcfile \"$SAGE_EXTCODE/shell/bashrc\" \"$@\"\n+            elif [ -n $ZSH_NAME ]; then\n+                export ZDOTDIR=\"$SAGE_EXTCODE/shell\"\n+                set -- \"$SHELL\" -d \"$@\"\n+            elif [ -n $KSH_VERSION ]; then\n+               export ENV=\"$SAGE_EXTCODE/shell/kshrc\"\n+                set -- \"$SHELL\" \"$@\"\n+            else\n+               source \"$_SAGE_ENV_SCRIPT\"\n+                set -- \"$SHELL\" \"$@\"\n+            fi\n+            ;;\n         *)\n            # We don't know how to specify alternate startup file, you are on your own\n            source \"$_SAGE_ENV_SCRIPT\"\n```\n(I added some echo commands here, too, and it is entering the appropriate case, the `sh` case with `$BASH` set.)",
    "created_at": "2014-01-31T22:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195247",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

This is not working for me on OS X. On one machine, `$SHELL` is set to `/bin/bash` but I don't get an interesting prompt: I just get `bash-3.2$`. As far as I can tell, this is not loading my `.bashrc` file (I put an echo command in there to see, and nothing is printed). So I don't think it's loading `src/ext/shell/bashrc`, either. On another OS X machine, it's running bash but `$SHELL` is set to `/bin/sh`. I tried making the following changes, but it didn't help: the prompt remained `sh-3.2$`.

```diff
diff --git a/src/bin/sage b/src/bin/sage
index c01fea2..8770a57 100755
--- a/src/bin/sage
+++ b/src/bin/sage
@@ -278,6 +278,21 @@ if [ "$1" = '-sh' -o "$1" = '--sh' ]; then
             export ZDOTDIR="$SAGE_EXTCODE/shell"
             set -- "$SHELL" -d "$@"
             ;;
+        sh)
+            # see http://stackoverflow.com/a/3327022/1401572
+            if [ -n $BASH ]; then
+                set -- "$SHELL" --rcfile "$SAGE_EXTCODE/shell/bashrc" "$@"
+            elif [ -n $ZSH_NAME ]; then
+                export ZDOTDIR="$SAGE_EXTCODE/shell"
+                set -- "$SHELL" -d "$@"
+            elif [ -n $KSH_VERSION ]; then
+               export ENV="$SAGE_EXTCODE/shell/kshrc"
+                set -- "$SHELL" "$@"
+            else
+               source "$_SAGE_ENV_SCRIPT"
+                set -- "$SHELL" "$@"
+            fi
+            ;;
         *)
            # We don't know how to specify alternate startup file, you are on your own
            source "$_SAGE_ENV_SCRIPT"
```
(I added some echo commands here, too, and it is entering the appropriate case, the `sh` case with `$BASH` set.)



---

archive/issue_comments_195248.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a8fefce1cd993603926fdb486500b5f9f6172b1\"><code>1a8fefc</code></a></td><td><code>workaround for lack of \"echo -e\" on OSX</code></td></tr></table>\n",
    "created_at": "2014-02-01T20:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195248",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a8fefce1cd993603926fdb486500b5f9f6172b1"><code>1a8fefc</code></a></td><td><code>workaround for lack of "echo -e" on OSX</code></td></tr></table>




---

archive/issue_comments_195249.json:
```json
{
    "body": "Changed commit from **[`f2b46b4`](https://github.com/sagemath/sagetrac-mirror/commit/f2b46b47f05d899041c49c70b58d82d4b36eaf99)** to **[`1a8fefc`](https://github.com/sagemath/sagetrac-mirror/commit/1a8fefce1cd993603926fdb486500b5f9f6172b1)**",
    "created_at": "2014-02-01T20:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195249",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f2b46b4`](https://github.com/sagemath/sagetrac-mirror/commit/f2b46b47f05d899041c49c70b58d82d4b36eaf99)** to **[`1a8fefc`](https://github.com/sagemath/sagetrac-mirror/commit/1a8fefce1cd993603926fdb486500b5f9f6172b1)**



---

archive/issue_comments_195250.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYou need to rebuild sage (run \"make\"), because the scripts are loaded from `SAGE_ROOT/local/share/sage/ext/shell` and not from `SAGE_ROOT/src/ext/shell`.\n\nI think if `$SHELL` is not set to bash then you either explicitly don't want bash features used or your OS is old/weird and its doubtful that bash works as it should. Where did you see the `SHELL=/bin/sh` environment?\n\nWhile trying this out I noticed that OSX doesn't support `echo -e` to expand `\\e`, this is now also fixed.",
    "created_at": "2014-02-01T20:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195250",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">comment:10</div>

You need to rebuild sage (run "make"), because the scripts are loaded from `SAGE_ROOT/local/share/sage/ext/shell` and not from `SAGE_ROOT/src/ext/shell`.

I think if `$SHELL` is not set to bash then you either explicitly don't want bash features used or your OS is old/weird and its doubtful that bash works as it should. Where did you see the `SHELL=/bin/sh` environment?

While trying this out I noticed that OSX doesn't support `echo -e` to expand `\e`, this is now also fixed.



---

archive/issue_comments_195251.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI saw `SHELL=/bin/sh` on one OS X 10.8 machine. It may have to do with how the sysadmins have set up that machine, but that's my shell there. I've also seen some references to this happening on other systems, for example in the [stackoverflow answer](http://stackoverflow.com/a/3327022/1401572) I cited in my patch. (See also [http://stackoverflow.com/q/5166657/1401572](http://stackoverflow.com/q/5166657/1401572), and I'm sure I saw it other places.)\n\nI'm trying again with the new version. Currently running `make`, which is taking a little while...",
    "created_at": "2014-02-02T00:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195251",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

I saw `SHELL=/bin/sh` on one OS X 10.8 machine. It may have to do with how the sysadmins have set up that machine, but that's my shell there. I've also seen some references to this happening on other systems, for example in the [stackoverflow answer](http://stackoverflow.com/a/3327022/1401572) I cited in my patch. (See also [http://stackoverflow.com/q/5166657/1401572](http://stackoverflow.com/q/5166657/1401572), and I'm sure I saw it other places.)

I'm trying again with the new version. Currently running `make`, which is taking a little while...



---

archive/issue_comments_195252.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb5b8482c2406802ab540abc2c2673f7d94ec836\"><code>fb5b848</code></a></td><td><code>more workarounds for weird $SHELL, OSX ksh</code></td></tr></table>\n",
    "created_at": "2014-02-02T15:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195252",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb5b8482c2406802ab540abc2c2673f7d94ec836"><code>fb5b848</code></a></td><td><code>more workarounds for weird $SHELL, OSX ksh</code></td></tr></table>




---

archive/issue_comments_195253.json:
```json
{
    "body": "Changed commit from **[`1a8fefc`](https://github.com/sagemath/sagetrac-mirror/commit/1a8fefce1cd993603926fdb486500b5f9f6172b1)** to **[`fb5b848`](https://github.com/sagemath/sagetrac-mirror/commit/fb5b8482c2406802ab540abc2c2673f7d94ec836)**",
    "created_at": "2014-02-02T15:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195253",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1a8fefc`](https://github.com/sagemath/sagetrac-mirror/commit/1a8fefce1cd993603926fdb486500b5f9f6172b1)** to **[`fb5b848`](https://github.com/sagemath/sagetrac-mirror/commit/fb5b8482c2406802ab540abc2c2673f7d94ec836)**



---

archive/issue_comments_195254.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOn a machine with `SHELL=/bin/bash`, it works well. On the machine with `SHELL=/bin/sh`, it is entering the appropriate case (\"`bash)`\"), but the bashrc file in `local/share/sage/ext/shell` is not loaded. If I replace `\"$SHELL\"` with <code>\\`command -v bash\\`</code>, it is loaded \u2014 this is in the line\n\n```\nset -- \"$SHELL\" --rcfile \"$SAGE_EXTCODE/shell/bashrc\" \"$@\"\n```\nIn this case, it works, but not perfectly: the prompt comes out as\n\n```\n\\033]0;palmieri@jpalmieri: ~/Desktop/Sage_stuff/git/sage\\007\\c\nSage: jpalmieri 12:11:42 {new_shell|modified} ~/Desktop/Sage_stuff/git/sage\n$\n```\nwith the middle line appropriately colored. (On the first machine, the prompt looks better: it doesn't include the first line. It's running a slightly newer version of bash, 3.2.51 instead of 3.2.48; it's also running OS X 10.9 instead of 10.8, and as mentioned, it has `SHELL=/bin/bash`.)",
    "created_at": "2014-02-02T20:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195254",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:13" align="right">comment:13</div>

On a machine with `SHELL=/bin/bash`, it works well. On the machine with `SHELL=/bin/sh`, it is entering the appropriate case ("`bash)`"), but the bashrc file in `local/share/sage/ext/shell` is not loaded. If I replace `"$SHELL"` with <code>\`command -v bash\`</code>, it is loaded — this is in the line

```
set -- "$SHELL" --rcfile "$SAGE_EXTCODE/shell/bashrc" "$@"
```
In this case, it works, but not perfectly: the prompt comes out as

```
\033]0;palmieri@jpalmieri: ~/Desktop/Sage_stuff/git/sage\007\c
Sage: jpalmieri 12:11:42 {new_shell|modified} ~/Desktop/Sage_stuff/git/sage
$
```
with the middle line appropriately colored. (On the first machine, the prompt looks better: it doesn't include the first line. It's running a slightly newer version of bash, 3.2.51 instead of 3.2.48; it's also running OS X 10.9 instead of 10.8, and as mentioned, it has `SHELL=/bin/bash`.)



---

archive/issue_comments_195255.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nIt may be that there is no good way to deal with `bash` if it is run as `/bin/sh`, I don't know. A different question, though: if I don't like the bash prompt defined like this, can I override it? Should we load `$DOT_SAGE/bashrc` or some similarly named file at the end of `local/share/sage/ext/shell/bashrc`?",
    "created_at": "2014-02-03T20:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195255",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

It may be that there is no good way to deal with `bash` if it is run as `/bin/sh`, I don't know. A different question, though: if I don't like the bash prompt defined like this, can I override it? Should we load `$DOT_SAGE/bashrc` or some similarly named file at the end of `local/share/sage/ext/shell/bashrc`?



---

archive/issue_comments_195256.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nYou don't have to use the sage shell at all. I never use it. But imho we should offer something nice for those that don't want to customize their own shell prompt. \n\nBut to be on the safe side I think we should just fall back to something safe if SHELL is not set to /bin/bash.",
    "created_at": "2014-02-03T20:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195256",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">comment:15</div>

You don't have to use the sage shell at all. I never use it. But imho we should offer something nice for those that don't want to customize their own shell prompt. 

But to be on the safe side I think we should just fall back to something safe if SHELL is not set to /bin/bash.



---

archive/issue_comments_195257.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/232ef94b02251c92f1cc509ded640089cabffbb2\"><code>232ef94</code></a></td><td><code>no guessing what SHELL is</code></td></tr></table>\n",
    "created_at": "2014-02-03T20:51:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195257",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/232ef94b02251c92f1cc509ded640089cabffbb2"><code>232ef94</code></a></td><td><code>no guessing what SHELL is</code></td></tr></table>




---

archive/issue_comments_195258.json:
```json
{
    "body": "Changed commit from **[`fb5b848`](https://github.com/sagemath/sagetrac-mirror/commit/fb5b8482c2406802ab540abc2c2673f7d94ec836)** to **[`232ef94`](https://github.com/sagemath/sagetrac-mirror/commit/232ef94b02251c92f1cc509ded640089cabffbb2)**",
    "created_at": "2014-02-03T20:51:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195258",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fb5b848`](https://github.com/sagemath/sagetrac-mirror/commit/fb5b8482c2406802ab540abc2c2673f7d94ec836)** to **[`232ef94`](https://github.com/sagemath/sagetrac-mirror/commit/232ef94b02251c92f1cc509ded640089cabffbb2)**



---

archive/issue_comments_195259.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@vbraun](#comment%3A15):\n> You don't have to use the sage shell at all. I never use it. But imho we should offer something nice for those that don't want to customize their own shell prompt. \n\nMy point is that in my .bashrc file, I've already customized my shell prompt for use with `sage -sh`, and these changes override my customizations. It seems bad to force a choice of prompt on users. (I'm talking about the machines where `SHELL=/bin/bash`, by the way.)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/232ef94b02251c92f1cc509ded640089cabffbb2\"><code>232ef94</code></a></td><td><code>no guessing what SHELL is</code></td></tr></table>\n",
    "created_at": "2014-02-03T20:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195259",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@vbraun](#comment%3A15):
> You don't have to use the sage shell at all. I never use it. But imho we should offer something nice for those that don't want to customize their own shell prompt. 

My point is that in my .bashrc file, I've already customized my shell prompt for use with `sage -sh`, and these changes override my customizations. It seems bad to force a choice of prompt on users. (I'm talking about the machines where `SHELL=/bin/bash`, by the way.)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/232ef94b02251c92f1cc509ded640089cabffbb2"><code>232ef94</code></a></td><td><code>no guessing what SHELL is</code></td></tr></table>




---

archive/issue_comments_195260.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThats what I'm talking about, if you like the way you have set up your shell then just don't use the Sage shell. This ticket doesn't change the fact that the Sage shell overrides the prompt, it just overrides it with a nicer prompt. I dont' see a reliable way to figure out if the prompt has already been changed away from the default, there are many different \"defaults\" that distros set up.",
    "created_at": "2014-02-03T21:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195260",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

Thats what I'm talking about, if you like the way you have set up your shell then just don't use the Sage shell. This ticket doesn't change the fact that the Sage shell overrides the prompt, it just overrides it with a nicer prompt. I dont' see a reliable way to figure out if the prompt has already been changed away from the default, there are many different "defaults" that distros set up.



---

archive/issue_comments_195261.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nSometimes if I'm trying to debug on spkg, I want to go to `local/var/tmp/sage/build/...` and then run `make` or `configure` or whatever, and it's convenient to be running the Sage shell before doing this. That is, `sage -sh` is a useful tool. I don't want to be dissuaded from using it because I dislike the new prompt. So why not put something like this at the bottom of the proposed Sage bashrc file:\n\n```sh\nif [ -f \"$DOT_SAGE/bashrc\" ]; then\n    . \"$DOT_SAGE/bashrc\"\nfi\n```",
    "created_at": "2014-02-03T21:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195261",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:19" align="right">comment:19</div>

Sometimes if I'm trying to debug on spkg, I want to go to `local/var/tmp/sage/build/...` and then run `make` or `configure` or whatever, and it's convenient to be running the Sage shell before doing this. That is, `sage -sh` is a useful tool. I don't want to be dissuaded from using it because I dislike the new prompt. So why not put something like this at the bottom of the proposed Sage bashrc file:

```sh
if [ -f "$DOT_SAGE/bashrc" ]; then
    . "$DOT_SAGE/bashrc"
fi
```



---

archive/issue_comments_195262.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1f915465475938ee8cb97987fe8db7a464b6a94\"><code>d1f9154</code></a></td><td><code>hook to supply a user DOT_SAGE/bashrc</code></td></tr></table>\n",
    "created_at": "2014-02-03T21:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195262",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1f915465475938ee8cb97987fe8db7a464b6a94"><code>d1f9154</code></a></td><td><code>hook to supply a user DOT_SAGE/bashrc</code></td></tr></table>




---

archive/issue_comments_195263.json:
```json
{
    "body": "Changed commit from **[`232ef94`](https://github.com/sagemath/sagetrac-mirror/commit/232ef94b02251c92f1cc509ded640089cabffbb2)** to **[`d1f9154`](https://github.com/sagemath/sagetrac-mirror/commit/d1f915465475938ee8cb97987fe8db7a464b6a94)**",
    "created_at": "2014-02-03T21:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195263",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`232ef94`](https://github.com/sagemath/sagetrac-mirror/commit/232ef94b02251c92f1cc509ded640089cabffbb2)** to **[`d1f9154`](https://github.com/sagemath/sagetrac-mirror/commit/d1f915465475938ee8cb97987fe8db7a464b6a94)**



---

archive/issue_comments_195264.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nSounds good to me...",
    "created_at": "2014-02-03T21:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195264",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">comment:21</div>

Sounds good to me...



---

archive/issue_events_220226.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220226"
}
```



---

archive/issue_events_220227.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220227"
}
```



---

archive/issue_events_220228.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220228"
}
```



---

archive/issue_events_220229.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220229"
}
```



---

archive/issue_comments_195265.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI use a much shorter function in my zshrc to set up the git status, the\nidea being that the shell should be fast in initialization and in returning\nthe prompt. So, the only command that is run is `git status` and everything\nelse is gleaned from that using shell operations. Also, I use `RPROMPT` so\nthat the left prompt is short. The `RPROMPT` disappears automatically once\nthe user starts typing too long commands.\n\n```sh\nfunction __check_git__() {\n    local _s=\"$( git status 2>&1 )\"\n    [[ \"${_s}\" = \"fatal:\"* ]] && echo \"\" && return\n    _s=\"$( echo \"${_s}\" | sed -e '/^#.*modified:.*(untracked content)$/d' )\"\n    local _g_s=\"$( echo \"$_s\" | sed -n -e '1s@^On branch @@p;q' )\"\n\n    if [[   \"$_s\" = *modified:*                 || \\\n            \"$_s\" = *\"new file:\"*               || \\\n            \"$_s\" = *\"Your branch is behind\"*   || \\\n            \"$_s\" = *deleted:*                  || \\\n            \"$_s\" = *renamed:*                     \\\n         ]]; then\n        echo \"[%20>...>%{$fg[red]%}$_g_s%{$fg[white]%}%>>]\"\n    elif [[ -n \"$_g_s\" ]]; then\n        echo \"[%20>...>%{$fg[green]%}$_g_s%{$fg[white]%}%>>]\"\n    else\n        echo \"%{$fg[yellow]%}[?]%{$fg[white]%}\"\n    fi\n}\n\nRPROMPT=\"%{$fg[white]%}\u2022$(__check_git__)%{$fg[cyan]%}%n%{$fg[white]%}|%{$fg[green]%}%m%{$reset_color%}\"\n```",
    "created_at": "2014-12-20T21:00:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195265",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:24" align="right">comment:24</div>

I use a much shorter function in my zshrc to set up the git status, the
idea being that the shell should be fast in initialization and in returning
the prompt. So, the only command that is run is `git status` and everything
else is gleaned from that using shell operations. Also, I use `RPROMPT` so
that the left prompt is short. The `RPROMPT` disappears automatically once
the user starts typing too long commands.

```sh
function __check_git__() {
    local _s="$( git status 2>&1 )"
    [[ "${_s}" = "fatal:"* ]] && echo "" && return
    _s="$( echo "${_s}" | sed -e '/^#.*modified:.*(untracked content)$/d' )"
    local _g_s="$( echo "$_s" | sed -n -e '1s@^On branch @@p;q' )"

    if [[   "$_s" = *modified:*                 || \
            "$_s" = *"new file:"*               || \
            "$_s" = *"Your branch is behind"*   || \
            "$_s" = *deleted:*                  || \
            "$_s" = *renamed:*                     \
         ]]; then
        echo "[%20>...>%{$fg[red]%}$_g_s%{$fg[white]%}%>>]"
    elif [[ -n "$_g_s" ]]; then
        echo "[%20>...>%{$fg[green]%}$_g_s%{$fg[white]%}%>>]"
    else
        echo "%{$fg[yellow]%}[?]%{$fg[white]%}"
    fi
}

RPROMPT="%{$fg[white]%}•$(__check_git__)%{$fg[cyan]%}%n%{$fg[white]%}|%{$fg[green]%}%m%{$reset_color%}"
```



---

archive/issue_events_220230.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-21T16:53:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220230"
}
```



---

archive/issue_events_220231.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-21T16:53:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220231"
}
```



---

archive/issue_comments_195266.json:
```json
{
    "body": "Work Issues: **merge conflicts**",
    "created_at": "2016-04-21T16:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195266",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **merge conflicts**



---

archive/issue_comments_195267.json:
```json
{
    "body": "Changed branch from **[u/vbraun/pimp_my_shell](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/pimp_my_shell)** to **[u/jhpalmieri/pimp_my_shell](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pimp_my_shell)**",
    "created_at": "2016-04-25T20:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195267",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/vbraun/pimp_my_shell](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/pimp_my_shell)** to **[u/jhpalmieri/pimp_my_shell](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pimp_my_shell)**



---

archive/issue_comments_195268.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nRebased.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58fa20d2a6f762002cb92d60fd6c564b7d2292a7\"><code>58fa20d</code></a></td><td><code>trac 15590: custom shell prompts for 'sage --sh', rebased</code></td></tr></table>\n",
    "created_at": "2016-04-25T20:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195268",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:27" align="right">comment:27</div>

Rebased.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58fa20d2a6f762002cb92d60fd6c564b7d2292a7"><code>58fa20d</code></a></td><td><code>trac 15590: custom shell prompts for 'sage --sh', rebased</code></td></tr></table>




---

archive/issue_comments_195269.json:
```json
{
    "body": "Changed commit from **[`d1f9154`](https://github.com/sagemath/sagetrac-mirror/commit/d1f915465475938ee8cb97987fe8db7a464b6a94)** to **[`58fa20d`](https://github.com/sagemath/sagetrac-mirror/commit/58fa20d2a6f762002cb92d60fd6c564b7d2292a7)**",
    "created_at": "2016-04-25T20:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195269",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`d1f9154`](https://github.com/sagemath/sagetrac-mirror/commit/d1f915465475938ee8cb97987fe8db7a464b6a94)** to **[`58fa20d`](https://github.com/sagemath/sagetrac-mirror/commit/58fa20d2a6f762002cb92d60fd6c564b7d2292a7)**



---

archive/issue_events_220232.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-04-25T20:40:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220232"
}
```



---

archive/issue_events_220233.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-04-25T20:40:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220233"
}
```



---

archive/issue_comments_195270.json:
```json
{
    "body": "Changed work issues from **merge conflicts** to none",
    "created_at": "2016-05-16T21:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195270",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **merge conflicts** to none



---

archive/issue_comments_195271.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nSomehow, I do not get colors here but only an inverted prompt. It seems that `tput colors` does not return 0 whereas `tput rev` does. That is strange since `tput colors` does return 0 if I invoke it manually. I have not had a chance to debug this further. The changes seem fine to me and I think they could be a positive review even if it does not work for me (maybe my setup is just somehow screwed up.)",
    "created_at": "2016-06-20T17:02:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195271",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:29" align="right">comment:29</div>

Somehow, I do not get colors here but only an inverted prompt. It seems that `tput colors` does not return 0 whereas `tput rev` does. That is strange since `tput colors` does return 0 if I invoke it manually. I have not had a chance to debug this further. The changes seem fine to me and I think they could be a positive review even if it does not work for me (maybe my setup is just somehow screwed up.)



---

archive/issue_comments_195272.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThis still is set as open for review. Is it so?",
    "created_at": "2019-04-17T05:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195272",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

This still is set as open for review. Is it so?



---

archive/issue_comments_195273.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI don't think I will work on it, but feel free to take a look if it interests you. If it looks worthwhile, maybe it will revive my interest.",
    "created_at": "2019-04-17T17:35:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195273",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

I don't think I will work on it, but feel free to take a look if it interests you. If it looks worthwhile, maybe it will revive my interest.



---

archive/issue_events_220234.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-04-17T20:09:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220234"
}
```



---

archive/issue_events_220235.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-04-17T20:09:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220235"
}
```



---

archive/issue_comments_195274.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nIt definitely looks neat.  Is there any serious problem remaining on this, or just bikeshedding about how to support every shell under the sun?",
    "created_at": "2019-06-15T18:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195274",
    "user": "https://github.com/embray"
}
```

<div id="comment:33" align="right">comment:33</div>

It definitely looks neat.  Is there any serious problem remaining on this, or just bikeshedding about how to support every shell under the sun?



---

archive/issue_comments_195275.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nNo one has touched it in 3 years, but I think it was in okay shape then. It might be better to do this one shell at a time, letting people who actually use `ksh`, `zsh`, etc., implement and test. I don't care that much about it, in any case.",
    "created_at": "2019-06-17T02:42:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195275",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

No one has touched it in 3 years, but I think it was in okay shape then. It might be better to do this one shell at a time, letting people who actually use `ksh`, `zsh`, etc., implement and test. I don't care that much about it, in any case.



---

archive/issue_comments_195276.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThe naming scheme looks inconsistent:\n\n```\nsrc/ext/shell/.zshrc\t\nsrc/ext/shell/bashrc\nsrc/ext/shell/kshrc\n```\nAny reason for it?\n\nAs to zsh, it is coming in macos 10.15, so it's getting more users soon...",
    "created_at": "2019-06-17T09:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195276",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

The naming scheme looks inconsistent:

```
src/ext/shell/.zshrc	
src/ext/shell/bashrc
src/ext/shell/kshrc
```
Any reason for it?

As to zsh, it is coming in macos 10.15, so it's getting more users soon...



---

archive/issue_comments_195277.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@dimpase](#comment%3A35):\n> The naming scheme looks inconsistent:\n> \n> ```\n> src/ext/shell/.zshrc\t\n> src/ext/shell/bashrc\n> src/ext/shell/kshrc\n> ```\n> Any reason for it?\n\nIt was like 5 years ago. I have no idea.\n \n> As to zsh, it is coming in macos 10.15, so it's getting more users soon...",
    "created_at": "2019-06-17T17:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195277",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@dimpase](#comment%3A35):
> The naming scheme looks inconsistent:
> 
> ```
> src/ext/shell/.zshrc	
> src/ext/shell/bashrc
> src/ext/shell/kshrc
> ```
> Any reason for it?

It was like 5 years ago. I have no idea.
 
> As to zsh, it is coming in macos 10.15, so it's getting more users soon...



---

archive/issue_events_220236.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-20T21:40:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220236"
}
```



---

archive/issue_events_220237.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-20T21:40:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15590#event-220237"
}
```



---

archive/issue_comments_195278.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI rather like my PS1 the way it is; this should be optional at a minimum.\n\nUltimately I don't think we should be adding more internet bling bling into the sagemath codebase at this point. Anyone who wants this can enable it himself by following e.g.\n\n  https://git-scm.com/book/uz/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-Bash\n\nwhich is \"trivial\" to do and works in zsh as well.",
    "created_at": "2021-11-20T21:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15590#issuecomment-195278",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:38" align="right">comment:38</div>

I rather like my PS1 the way it is; this should be optional at a minimum.

Ultimately I don't think we should be adding more internet bling bling into the sagemath codebase at this point. Anyone who wants this can enable it himself by following e.g.

  https://git-scm.com/book/uz/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-Bash

which is "trivial" to do and works in zsh as well.
