# Issue 15781: Increase Performance of possible_periods in Projective Morphism

archive/issues_015544.json:
```json
{
    "body": "Increase Performance of possible_periods in Projective Morphism by replacing functionality with cython.\n\nAssignee: @dillonmrose\n\nCC:  @bhutz\n\nKeywords: possible_periods, cython\n\nBranch/Commit: 3adee1ca2b37996abae28157700a5c4480fd3436\n\nReviewer: Ben Hutz, Joao Alberto de Faria\n\nAuthor: Dillon Rose\n\nDependencies: #15780\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15781\n\n",
    "closed_at": "2014-05-15T17:18:28Z",
    "created_at": "2014-02-03T15:05:59Z",
    "labels": [
        "component: algebraic geometry",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Increase Performance of possible_periods in Projective Morphism",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15781",
    "user": "https://github.com/dillonmrose"
}
```
Increase Performance of possible_periods in Projective Morphism by replacing functionality with cython.

Assignee: @dillonmrose

CC:  @bhutz

Keywords: possible_periods, cython

Branch/Commit: 3adee1ca2b37996abae28157700a5c4480fd3436

Reviewer: Ben Hutz, Joao Alberto de Faria

Author: Dillon Rose

Dependencies: #15780

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15781





---

archive/issue_events_046415.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-02-04T23:53:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15781#event-46415"
}
```



---

archive/issue_comments_254378.json:
```json
{
    "body": "Changing component from cython to algebraic geometry.",
    "created_at": "2014-02-05T17:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254378",
    "user": "https://github.com/dillonmrose"
}
```

Changing component from cython to algebraic geometry.



---

archive/issue_comments_254379.json:
```json
{
    "body": "Set assignee to @dillonmrose.",
    "created_at": "2014-02-05T17:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254379",
    "user": "https://github.com/dillonmrose"
}
```

Set assignee to @dillonmrose.



---

archive/issue_comments_254380.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2014-02-05T17:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254380",
    "user": "https://github.com/dillonmrose"
}
```

Changing priority from major to minor.



---

archive/issue_comments_254381.json:
```json
{
    "body": "Changing branch from \"\" to \"u/drose/15781\"",
    "created_at": "2014-02-05T17:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254381",
    "user": "https://github.com/dillonmrose"
}
```

Changing branch from "" to "u/drose/15781"



---

archive/issue_comments_254382.json:
```json
{
    "body": "Changing commit from \"\" to \"e822a8a28f0554df7dad49332d1469ed2bdb3c1e\"",
    "created_at": "2014-02-05T17:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254382",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "e822a8a28f0554df7dad49332d1469ed2bdb3c1e"



---

archive/issue_comments_254383.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-05T17:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254383",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254384.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-10T15:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254384",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254385.json:
```json
{
    "body": "Changing commit from \"e822a8a28f0554df7dad49332d1469ed2bdb3c1e\" to \"15c25ec46bfccc0c41779945f1d89d25b8e680f3\"",
    "created_at": "2014-02-10T15:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e822a8a28f0554df7dad49332d1469ed2bdb3c1e" to "15c25ec46bfccc0c41779945f1d89d25b8e680f3"



---

archive/issue_comments_254386.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#15780\"",
    "created_at": "2014-02-10T15:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254386",
    "user": "https://github.com/dillonmrose"
}
```

Changing dependencies from "" to "#15780"



---

archive/issue_comments_254387.json:
```json
{
    "body": "Changing commit from \"15c25ec46bfccc0c41779945f1d89d25b8e680f3\" to \"5f34987dd3f1b1a2500220e8daa9e138cacf9787\"",
    "created_at": "2014-02-11T00:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "15c25ec46bfccc0c41779945f1d89d25b8e680f3" to "5f34987dd3f1b1a2500220e8daa9e138cacf9787"



---

archive/issue_comments_254388.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-11T00:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254389.json:
```json
{
    "body": "<a id='comment:7'></a>rebased to 6.2.beta7\n\n---\nLast 10 new commits:",
    "created_at": "2014-04-10T15:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254389",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:7'></a>rebased to 6.2.beta7

---
Last 10 new commits:



---

archive/issue_comments_254390.json:
```json
{
    "body": "Changing commit from \"5f34987dd3f1b1a2500220e8daa9e138cacf9787\" to \"e4131881531e902225804986f1c34a1d5e97385c\"",
    "created_at": "2014-04-10T15:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254390",
    "user": "https://github.com/bhutz"
}
```

Changing commit from "5f34987dd3f1b1a2500220e8daa9e138cacf9787" to "e4131881531e902225804986f1c34a1d5e97385c"



---

archive/issue_comments_254391.json:
```json
{
    "body": "Changing branch from \"u/drose/15781\" to \"u/bhutz/ticket/15781\"",
    "created_at": "2014-04-10T15:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254391",
    "user": "https://github.com/bhutz"
}
```

Changing branch from "u/drose/15781" to "u/bhutz/ticket/15781"



---

archive/issue_comments_254392.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-10T16:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254393.json:
```json
{
    "body": "Changing commit from \"e4131881531e902225804986f1c34a1d5e97385c\" to \"f5ba4694b199d4aa6d0d4fc4b377f4cdb1846a04\"",
    "created_at": "2014-04-10T16:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254393",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e4131881531e902225804986f1c34a1d5e97385c" to "f5ba4694b199d4aa6d0d4fc4b377f4cdb1846a04"



---

archive/issue_comments_254394.json:
```json
{
    "body": "Changing branch from \"u/bhutz/ticket/15781\" to \"u/drose/ticket/15781\"",
    "created_at": "2014-04-22T01:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254394",
    "user": "https://github.com/dillonmrose"
}
```

Changing branch from "u/bhutz/ticket/15781" to "u/drose/ticket/15781"



---

archive/issue_comments_254395.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-22T01:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254395",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254396.json:
```json
{
    "body": "Changing commit from \"f5ba4694b199d4aa6d0d4fc4b377f4cdb1846a04\" to \"89da33337ecac6d43c7b3da4b37e8dc1a9ad16ee\"",
    "created_at": "2014-04-22T01:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f5ba4694b199d4aa6d0d4fc4b377f4cdb1846a04" to "89da33337ecac6d43c7b3da4b37e8dc1a9ad16ee"



---

archive/issue_comments_254397.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-22T01:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254397",
    "user": "https://github.com/dillonmrose"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_254398.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-23T16:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254398",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_254399.json:
```json
{
    "body": "<a id='comment:12'></a>No issues with the long test, but before I do more specialized testing there are number of things from looking through the code:\n\n1) Fix preamble documentation to be for the helper and not generic projective space\n\n2) Fix copyright date\n\n3) in _fast_possible_periods:\n\n- use a Reference block - see dynamtomic_polynomial (should be able to use the references from other files)\n\n- examples should call _fast_possible_periods\n\n- todo: typo return\n\n- todo: add - more space efficient hash/pointtable\n\n- use is_prime_finite_field\n\n- move import to header of file\n\n4) pass N+1 into into _normalize_coordinates to replace the len(point) calls\n\n5) _mod_inv - description: Find the inverse of the number modulo the given prime.\n\n6) Use the better version of the eigenvale computation (see 14219 lines 2608-2624)\n\n7) also from 14219 \n\nuse\n\nreturn sorted(periods)\n\ninstead of\n\nperiods=list(periods)\nperiods.sort()\nreturn(periods)\n\n8)enum points documentation:\nEnumerate points in projective space over finite field with given prime and dimension.",
    "created_at": "2014-04-23T16:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254399",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:12'></a>No issues with the long test, but before I do more specialized testing there are number of things from looking through the code:

1) Fix preamble documentation to be for the helper and not generic projective space

2) Fix copyright date

3) in _fast_possible_periods:

- use a Reference block - see dynamtomic_polynomial (should be able to use the references from other files)

- examples should call _fast_possible_periods

- todo: typo return

- todo: add - more space efficient hash/pointtable

- use is_prime_finite_field

- move import to header of file

4) pass N+1 into into _normalize_coordinates to replace the len(point) calls

5) _mod_inv - description: Find the inverse of the number modulo the given prime.

6) Use the better version of the eigenvale computation (see 14219 lines 2608-2624)

7) also from 14219 

use

return sorted(periods)

instead of

periods=list(periods)
periods.sort()
return(periods)

8)enum points documentation:
Enumerate points in projective space over finite field with given prime and dimension.



---

archive/issue_comments_254400.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Ben Hutz\"",
    "created_at": "2014-04-23T16:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254400",
    "user": "https://github.com/bhutz"
}
```

Changing reviewer from "" to "Ben Hutz"



---

archive/issue_comments_254401.json:
```json
{
    "body": "<a id='comment:13'></a>err.. there was one doc test failure in helper.pyx\n\n```\nFile \"sage/schemes/projective/projective_morphism_helper.pyx\", line 213, in sage.schemes.projective.projective_morphism_helper._enum_points\nFailed example:\n    _enum_points(3,2)\nExpected:\n    [[1, 0, 0], [0, 1, 0], [1, 1, 0], [2, 1, 0], [0, 0, 1], [1, 0, 1], [2, 0, 1], [0, 1, 1], [1, 1, 1], [2, 1, 1], [0, 2, 1], [1, 2, 1], [2, 2, 1]]\nGot:\n    <generator object at 0x1161d6500>\n```",
    "created_at": "2014-04-23T16:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254401",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:13'></a>err.. there was one doc test failure in helper.pyx

```
File "sage/schemes/projective/projective_morphism_helper.pyx", line 213, in sage.schemes.projective.projective_morphism_helper._enum_points
Failed example:
    _enum_points(3,2)
Expected:
    [[1, 0, 0], [0, 1, 0], [1, 1, 0], [2, 1, 0], [0, 0, 1], [1, 0, 1], [2, 0, 1], [0, 1, 1], [1, 1, 1], [2, 1, 1], [0, 2, 1], [1, 2, 1], [2, 2, 1]]
Got:
    <generator object at 0x1161d6500>
```



---

archive/issue_comments_254402.json:
```json
{
    "body": "Changing commit from \"89da33337ecac6d43c7b3da4b37e8dc1a9ad16ee\" to \"52938af78886580fb736ad1604456a601af928d0\"",
    "created_at": "2014-04-25T18:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254402",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "89da33337ecac6d43c7b3da4b37e8dc1a9ad16ee" to "52938af78886580fb736ad1604456a601af928d0"



---

archive/issue_comments_254403.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-25T18:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254403",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254404.json:
```json
{
    "body": "Changing commit from \"52938af78886580fb736ad1604456a601af928d0\" to \"28a5a37412d5dfdbf047baf07e24283321b5a17c\"",
    "created_at": "2014-04-25T18:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "52938af78886580fb736ad1604456a601af928d0" to "28a5a37412d5dfdbf047baf07e24283321b5a17c"



---

archive/issue_comments_254405.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-25T18:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254406.json:
```json
{
    "body": "<a id='comment:16'></a>The long test and my other functionality tests all pass, but there are two things. One minor, one major.\n\nMinor: I think I was wrong about the reference block. The .pyx files seem to not be part of the docbuild, so I'm a little concerned about the REFERENCE block have possible issues later on. Perhaps that should be returned to the previous method.\n\nMajor: There is still a memory issue. The following example:\n\n```\nP.<x,y,z,u,v>=ProjectiveSpace(QQ,4)\nH=Hom(P,P)\nf=H([-38/45*x^2 + (2*y - 7/45*v)*x + (-1/2*y^2 - 1/2*v*y + v^2),-67/90*x^2 + (2*y + 157/90*v)*x - v*y,(-u - v)*z + (-13/30*u^2 + 13/30*v*u + v^2),-1/2*z^2 + (-u + 3/2*v)*z + (-1/3*u^2 + 4/3*v*u),v^2])\nprint f.possible_periods(prime_bound=[13,30])\n```\n\nruns just fine with 15780, but with 15781 very quickly runs out of memory (on my laptop allocated 3Gb). fyi, it take about 8min to complete the example on my laptop under 15780. The function _enum_points is what is consuming all the memory.",
    "created_at": "2014-04-28T12:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254406",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:16'></a>The long test and my other functionality tests all pass, but there are two things. One minor, one major.

Minor: I think I was wrong about the reference block. The .pyx files seem to not be part of the docbuild, so I'm a little concerned about the REFERENCE block have possible issues later on. Perhaps that should be returned to the previous method.

Major: There is still a memory issue. The following example:

```
P.<x,y,z,u,v>=ProjectiveSpace(QQ,4)
H=Hom(P,P)
f=H([-38/45*x^2 + (2*y - 7/45*v)*x + (-1/2*y^2 - 1/2*v*y + v^2),-67/90*x^2 + (2*y + 157/90*v)*x - v*y,(-u - v)*z + (-13/30*u^2 + 13/30*v*u + v^2),-1/2*z^2 + (-u + 3/2*v)*z + (-1/3*u^2 + 4/3*v*u),v^2])
print f.possible_periods(prime_bound=[13,30])
```

runs just fine with 15780, but with 15781 very quickly runs out of memory (on my laptop allocated 3Gb). fyi, it take about 8min to complete the example on my laptop under 15780. The function _enum_points is what is consuming all the memory.



---

archive/issue_comments_254407.json:
```json
{
    "body": "<a id='comment:17'></a>... and you may want to redo the branch for this ticket (hopefully nothing depends on it yet). Currently, it has the `*.c` file of a `*.pyx` tracked. You should probably rebase the branch so that that file is never checked in (I'm not sure whether removing it will leave it in the history).",
    "created_at": "2014-04-28T15:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254407",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:17'></a>... and you may want to redo the branch for this ticket (hopefully nothing depends on it yet). Currently, it has the `*.c` file of a `*.pyx` tracked. You should probably rebase the branch so that that file is never checked in (I'm not sure whether removing it will leave it in the history).



---

archive/issue_comments_254408.json:
```json
{
    "body": "Changing commit from \"28a5a37412d5dfdbf047baf07e24283321b5a17c\" to \"25a95995428d89a2943aee58b6fb192894866a57\"",
    "created_at": "2014-05-01T15:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "28a5a37412d5dfdbf047baf07e24283321b5a17c" to "25a95995428d89a2943aee58b6fb192894866a57"



---

archive/issue_comments_254409.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-01T15:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254410.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-01T16:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254410",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254411.json:
```json
{
    "body": "Changing commit from \"25a95995428d89a2943aee58b6fb192894866a57\" to \"b7abd7f2e8c9984143613dba07d23df4eb97eebd\"",
    "created_at": "2014-05-01T16:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "25a95995428d89a2943aee58b6fb192894866a57" to "b7abd7f2e8c9984143613dba07d23df4eb97eebd"



---

archive/issue_comments_254412.json:
```json
{
    "body": "Changing branch from \"u/drose/ticket/15781\" to \"u/bhutz/ticket/15781\"",
    "created_at": "2014-05-01T23:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254412",
    "user": "https://github.com/bhutz"
}
```

Changing branch from "u/drose/ticket/15781" to "u/bhutz/ticket/15781"



---

archive/issue_comments_254413.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-01T23:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254413",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_254414.json:
```json
{
    "body": "Changing commit from \"b7abd7f2e8c9984143613dba07d23df4eb97eebd\" to \"5094e43ea32d0c6d75fe28568fc4e5bc2533cb3d\"",
    "created_at": "2014-05-01T23:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254414",
    "user": "https://github.com/bhutz"
}
```

Changing commit from "b7abd7f2e8c9984143613dba07d23df4eb97eebd" to "5094e43ea32d0c6d75fe28568fc4e5bc2533cb3d"



---

archive/issue_comments_254415.json:
```json
{
    "body": "<a id='comment:21'></a>Dillon fixed the issues and removed the .c file. I then did the rebase to be sure it doesn't have it in the history. I ran the full tests again and everything looks good.\n\nShould someone else take a look at this since both Dillon and I have been making code changes?\n\n---\nLast 10 new commits:",
    "created_at": "2014-05-01T23:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254415",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:21'></a>Dillon fixed the issues and removed the .c file. I then did the rebase to be sure it doesn't have it in the history. I ran the full tests again and everything looks good.

Should someone else take a look at this since both Dillon and I have been making code changes?

---
Last 10 new commits:



---

archive/issue_events_046416.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15781#event-46416"
}
```



---

archive/issue_events_046417.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15781#event-46417"
}
```



---

archive/issue_comments_254416.json:
```json
{
    "body": "Reviewed code.",
    "created_at": "2014-05-08T18:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254416",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

Reviewed code.



---

archive/issue_comments_254417.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-08T18:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254417",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254418.json:
```json
{
    "body": "Changing reviewer from \"Ben Hutz\" to \"Ben Hutz, Joao Alberto de Faria\"",
    "created_at": "2014-05-08T18:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254418",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

Changing reviewer from "Ben Hutz" to "Ben Hutz, Joao Alberto de Faria"



---

archive/issue_comments_254419.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-08T22:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254419",
    "user": "https://github.com/nbruin"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_254420.json:
```json
{
    "body": "<a id='comment:24'></a>Please rewrite history for this branch prior to merging. Presently, you are putting this commit in the history of sage for posterity:\n\nhttp://git.sagemath.org/sage.git/commit/?id=170205d7d56fc90724c3e0d557b1d6e8ade2dcae",
    "created_at": "2014-05-08T22:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254420",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:24'></a>Please rewrite history for this branch prior to merging. Presently, you are putting this commit in the history of sage for posterity:

http://git.sagemath.org/sage.git/commit/?id=170205d7d56fc90724c3e0d557b1d6e8ade2dcae



---

archive/issue_comments_254421.json:
```json
{
    "body": "<a id='comment:25'></a>We tried to undo that by untracking the file and then rebasing. How do we rewrite the history so that .c file is not included?",
    "created_at": "2014-05-08T22:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254421",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:25'></a>We tried to undo that by untracking the file and then rebasing. How do we rewrite the history so that .c file is not included?



---

archive/issue_comments_254422.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [bhutz](#comment%3A25):\n> We tried to undo that by untracking the file and then rebasing. How do we rewrite the history so that .c file is not included?\n\n\nProbably something like `git rebase -i 6.2.rc0` (what you called rebases in history were probably merges) and then edit a lot of \"pick\" to be \"squash\" instead. If you can squash everything between the addition and the removal of the `.c` file, you'll have the easiest time. If you want to preserve some of the individual commits in between, you'll have to see if you can reorder them.\n\nYou'll basically be producing a \"fresh\" branch that introduces the commits you want to have in there and not the ones you don't. Of course, anybody who has based work on commits you're removing, will have merge conflicts with your new branch, so hopefully no-one did. That's why usually merging produces less severe conflicts and is therefore recommended, but when you really want to *remove* things from history, you have to rebase.",
    "created_at": "2014-05-09T00:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254422",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:26'></a>Replying to [bhutz](#comment%3A25):
> We tried to undo that by untracking the file and then rebasing. How do we rewrite the history so that .c file is not included?


Probably something like `git rebase -i 6.2.rc0` (what you called rebases in history were probably merges) and then edit a lot of "pick" to be "squash" instead. If you can squash everything between the addition and the removal of the `.c` file, you'll have the easiest time. If you want to preserve some of the individual commits in between, you'll have to see if you can reorder them.

You'll basically be producing a "fresh" branch that introduces the commits you want to have in there and not the ones you don't. Of course, anybody who has based work on commits you're removing, will have merge conflicts with your new branch, so hopefully no-one did. That's why usually merging produces less severe conflicts and is therefore recommended, but when you really want to *remove* things from history, you have to rebase.



---

archive/issue_comments_254423.json:
```json
{
    "body": "<a id='comment:27'></a>ok. I actually did git rebase and not merge. It sounds like the rebase -i will give me more control over the end result. I'll give that a try and see if I can get the .c problem sorted out",
    "created_at": "2014-05-09T02:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254423",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:27'></a>ok. I actually did git rebase and not merge. It sounds like the rebase -i will give me more control over the end result. I'll give that a try and see if I can get the .c problem sorted out



---

archive/issue_comments_254424.json:
```json
{
    "body": "Changing commit from \"5094e43ea32d0c6d75fe28568fc4e5bc2533cb3d\" to \"9731957931e987ef72de9371c611cdfc455af269\"",
    "created_at": "2014-05-09T16:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5094e43ea32d0c6d75fe28568fc4e5bc2533cb3d" to "9731957931e987ef72de9371c611cdfc455af269"



---

archive/issue_comments_254425.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2014-05-09T16:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254425",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_254426.json:
```json
{
    "body": "<a id='comment:29'></a>I've re-written the history to remove all references to the .c file. Currently building and testing...",
    "created_at": "2014-05-09T16:32:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254426",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:29'></a>I've re-written the history to remove all references to the .c file. Currently building and testing...



---

archive/issue_comments_254427.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-09T18:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254427",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_254428.json:
```json
{
    "body": "<a id='comment:31'></a>Reviewed code, everything is still working",
    "created_at": "2014-05-10T13:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254428",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

<a id='comment:31'></a>Reviewed code, everything is still working



---

archive/issue_comments_254429.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-10T13:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254429",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254430.json:
```json
{
    "body": "Changing work_issues from \"\" to \"merge latest beta\"",
    "created_at": "2014-05-12T20:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254430",
    "user": "https://github.com/vbraun"
}
```

Changing work_issues from "" to "merge latest beta"



---

archive/issue_comments_254431.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-12T20:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254431",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_254432.json:
```json
{
    "body": "<a id='comment:32'></a>Merge conflict, please fix",
    "created_at": "2014-05-12T20:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254432",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'></a>Merge conflict, please fix



---

archive/issue_comments_254433.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2014-05-12T22:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_254434.json:
```json
{
    "body": "Changing commit from \"9731957931e987ef72de9371c611cdfc455af269\" to \"36e5116e6fb2be2a92f446f3a652eb66a1ef045d\"",
    "created_at": "2014-05-12T22:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9731957931e987ef72de9371c611cdfc455af269" to "36e5116e6fb2be2a92f446f3a652eb66a1ef045d"



---

archive/issue_comments_254435.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-12T22:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254435",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_254436.json:
```json
{
    "body": "<a id='comment:34'></a>the rebase to 6.3.beta0 did not cause any changes to commit, just omitted some commits, so I had to push with force to. But, it should merge now.",
    "created_at": "2014-05-12T22:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254436",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:34'></a>the rebase to 6.3.beta0 did not cause any changes to commit, just omitted some commits, so I had to push with force to. But, it should merge now.



---

archive/issue_comments_254437.json:
```json
{
    "body": "Changing work_issues from \"merge latest beta\" to \"\"",
    "created_at": "2014-05-12T23:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254437",
    "user": "https://github.com/bhutz"
}
```

Changing work_issues from "merge latest beta" to ""



---

archive/issue_comments_254438.json:
```json
{
    "body": "<a id='comment:36'></a>You should never rebase branches that are on trac, always merge. \n\nConflicts with 6.3.beta1",
    "created_at": "2014-05-15T15:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254438",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'></a>You should never rebase branches that are on trac, always merge. 

Conflicts with 6.3.beta1



---

archive/issue_comments_254439.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-15T15:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254439",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_254440.json:
```json
{
    "body": "Changing commit from \"36e5116e6fb2be2a92f446f3a652eb66a1ef045d\" to \"3adee1ca2b37996abae28157700a5c4480fd3436\"",
    "created_at": "2014-05-15T15:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "36e5116e6fb2be2a92f446f3a652eb66a1ef045d" to "3adee1ca2b37996abae28157700a5c4480fd3436"



---

archive/issue_comments_254441.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2014-05-15T15:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_254442.json:
```json
{
    "body": "<a id='comment:38'></a>I saw the conflict and had just pushed a new rebase before I saw your comment. I'll merge in the future.",
    "created_at": "2014-05-15T15:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254442",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:38'></a>I saw the conflict and had just pushed a new rebase before I saw your comment. I'll merge in the future.



---

archive/issue_comments_254443.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-15T15:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254443",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_046418.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-15T17:18:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15781#event-46418"
}
```



---

archive/issue_comments_254444.json:
```json
{
    "body": "Changing branch from \"u/bhutz/ticket/15781\" to \"3adee1ca2b37996abae28157700a5c4480fd3436\"",
    "created_at": "2014-05-15T17:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254444",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/bhutz/ticket/15781" to "3adee1ca2b37996abae28157700a5c4480fd3436"



---

archive/issue_comments_254445.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-15T17:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15781#issuecomment-254445",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
