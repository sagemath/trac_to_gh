# Issue 15948: marked Dynkin diagrams

archive/issues_015711.json:
```json
{
    "assignees": [],
    "body": "This patch adds marked Dynkin diagrams and marked Cartan types. See\u00a0[#15948 comment:18](https://github.com/sagemath/sage/issues/15948#comment:18)\u00a0for details.\n\nThis convenient notation is used quite often in a certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307, and in Lie superalgebras, where markings denote the parity \u00a0of indices.\n\nMoreover, there are two small bugfixes:\n\n1. Documentation is misleading about our convention for arrows in Dynkin diagrams. We do follow Bourbaki convention for graphics (which is apparently the same as in Kac), but not the convention for the underlying Cartan matrix.\n2. Dynkin diagrams for D and E series contain a special character in the node name of tikzpicture which TeX doesn't like.\n\nDepends on #16380\n\nCC:  @nthiery @dwbump\n\nBranch/Commit: **[`bf5e867`](https://github.com/sagemath/sagetrac-mirror/commit/bf5e867266ab8ddb17e0be8c6e1cf619b266b10e)**\n\nReviewer: **Travis Scrimshaw, V\u00edt Tu\u010dek**\n\nAuthor: **V\u00edt Tu\u010dek, Travis Scrimshaw**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15948_\n\n",
    "closed_at": "2014-11-14T21:01:33Z",
    "created_at": "2014-03-15T22:17:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "marked Dynkin diagrams",
    "type": "issue",
    "updated_at": "2014-11-14T21:01:33Z",
    "url": "https://github.com/sagemath/sage/issues/15948",
    "user": "https://github.com/vit-tucek"
}
```
This patch adds marked Dynkin diagrams and marked Cartan types. See [#15948 comment:18](https://github.com/sagemath/sage/issues/15948#comment:18) for details.

This convenient notation is used quite often in a certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307, and in Lie superalgebras, where markings denote the parity  of indices.

Moreover, there are two small bugfixes:

1. Documentation is misleading about our convention for arrows in Dynkin diagrams. We do follow Bourbaki convention for graphics (which is apparently the same as in Kac), but not the convention for the underlying Cartan matrix.
2. Dynkin diagrams for D and E series contain a special character in the node name of tikzpicture which TeX doesn't like.

Depends on #16380

CC:  @nthiery @dwbump

Branch/Commit: **[`bf5e867`](https://github.com/sagemath/sagetrac-mirror/commit/bf5e867266ab8ddb17e0be8c6e1cf619b266b10e)**

Reviewer: **Travis Scrimshaw, Vít Tuček**

Author: **Vít Tuček, Travis Scrimshaw**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/15948_





---

archive/issue_events_227624.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2014-03-15T22:17:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227624"
}
```



---

archive/issue_events_227625.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2014-03-15T22:17:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227625"
}
```



---

archive/issue_events_227626.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2014-03-15T22:17:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227626"
}
```



---

archive/issue_events_227627.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2014-03-15T22:17:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227627"
}
```



---

archive/issue_comments_202190.json:
```json
{
    "body": "Branch: **[u/vittucek/ticket/15948](https://github.com/sagemath/sagetrac-mirror/tree/u/vittucek/ticket/15948)**",
    "created_at": "2014-03-15T22:19:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202190",
    "user": "https://github.com/vit-tucek"
}
```

Branch: **[u/vittucek/ticket/15948](https://github.com/sagemath/sagetrac-mirror/tree/u/vittucek/ticket/15948)**



---

archive/issue_comments_202191.json:
```json
{
    "body": "Commit: **[`bf72707`](https://github.com/sagemath/sagetrac-mirror/commit/bf72707a19157a9728badae4932a8a1f010c6897)**",
    "created_at": "2014-03-16T00:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202191",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`bf72707`](https://github.com/sagemath/sagetrac-mirror/commit/bf72707a19157a9728badae4932a8a1f010c6897)**



---

archive/issue_comments_202192.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5da4183846cfb4827167bd423ea8c1057a22f57f\">5da4183</a></td><td><code>Fix coding style in type A</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d872d163705e13facaccd5b5ed3e0d7d725f5cb5\">d872d16</a></td><td><code>Node labels and crossed nodes for type B</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/356dde097d6885b96607577a3e1ec358fba2f8be\">356dde0</a></td><td><code>Bugfix for type B</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56a74d528139a24cf9069a1a45b250f98df7d772\">56a74d5</a></td><td><code>Node labels and crossed nodes for type C</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a2d0cd6e7f204241cf8ef5b4801370eb7fdcc68\">3a2d0cd</a></td><td><code>Node labels and crossed nodes for type D (plus nicer diagram)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7898620c02c0a64caa883f11d2e3be8d54b54897\">7898620</a></td><td><code>Node labels and crossed nodes for type E</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/685addbeec88066d98a4cc05e376b6bbec7600f8\">685addb</a></td><td><code>Node labels and crossed nodes for type F</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf72707a19157a9728badae4932a8a1f010c6897\">bf72707</a></td><td><code>Node labels and crossed nodes for type G</code></td></tr></table>\n",
    "created_at": "2014-03-16T00:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202192",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5da4183846cfb4827167bd423ea8c1057a22f57f">5da4183</a></td><td><code>Fix coding style in type A</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d872d163705e13facaccd5b5ed3e0d7d725f5cb5">d872d16</a></td><td><code>Node labels and crossed nodes for type B</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/356dde097d6885b96607577a3e1ec358fba2f8be">356dde0</a></td><td><code>Bugfix for type B</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56a74d528139a24cf9069a1a45b250f98df7d772">56a74d5</a></td><td><code>Node labels and crossed nodes for type C</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a2d0cd6e7f204241cf8ef5b4801370eb7fdcc68">3a2d0cd</a></td><td><code>Node labels and crossed nodes for type D (plus nicer diagram)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7898620c02c0a64caa883f11d2e3be8d54b54897">7898620</a></td><td><code>Node labels and crossed nodes for type E</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/685addbeec88066d98a4cc05e376b6bbec7600f8">685addb</a></td><td><code>Node labels and crossed nodes for type F</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf72707a19157a9728badae4932a8a1f010c6897">bf72707</a></td><td><code>Node labels and crossed nodes for type G</code></td></tr></table>




---

archive/issue_comments_202193.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently only in type A) so the data are actually used by latex.\n+This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently without docstrings) so the data are actually used by latex.\n \n This convenient notation is used quite often in certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307\n \n``````\n",
    "created_at": "2014-03-16T00:57:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202193",
    "user": "https://github.com/vit-tucek"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently only in type A) so the data are actually used by latex.
+This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently without docstrings) so the data are actually used by latex.
 
 This convenient notation is used quite often in certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307
 
``````




---

archive/issue_comments_202194.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently without docstrings) so the data are actually used by latex.\n+This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently only in type A) so the data are actually used by latex.\n \n This convenient notation is used quite often in certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307\n \n``````\n",
    "created_at": "2014-03-16T01:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202194",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently without docstrings) so the data are actually used by latex.
+This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently only in type A) so the data are actually used by latex.
 
 This convenient notation is used quite often in certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307
 
``````




---

archive/issue_comments_202195.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI believe it is useful to have the ability to cross out particular nodes for Dynkin diagrams (I believe the same/similar convention is used for Lie superalgebras to denote even/odd indices).\n\nHowever I think the `node_label` is redundant to the `label` and you are assuming your indexing set is `1, 2, ..., n`, often which it is not. Similarly, I'm planning to make Dynkin diagrams more immutable (#15739), so I'd rather have it return a new `DynkinDiagram` when changing the crossed out nodes. One last point from a quick look-through, for comparisons with `None` you should do:\n\n```\nif x is None:\n    pass\n\nif x is not None:\n    pass\n```\n\nI'll check against Kac tonight. Dan and Nicolas might have some more comments as well.\n\nBest,\n\nTravis\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95ae5db3f1b74142b285d646156b6d0c5aa8a1a7\">95ae5db</a></td><td><code>Add set_node_labels and set_crossed_nodes to DynkinDiagram</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05b1b19bedc072e036018385c175fef90d3ce838\">05b1b19</a></td><td><code>Node labels and crossed nodes for type A</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5da4183846cfb4827167bd423ea8c1057a22f57f\">5da4183</a></td><td><code>Fix coding style in type A</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d872d163705e13facaccd5b5ed3e0d7d725f5cb5\">d872d16</a></td><td><code>Node labels and crossed nodes for type B</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/356dde097d6885b96607577a3e1ec358fba2f8be\">356dde0</a></td><td><code>Bugfix for type B</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56a74d528139a24cf9069a1a45b250f98df7d772\">56a74d5</a></td><td><code>Node labels and crossed nodes for type C</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a2d0cd6e7f204241cf8ef5b4801370eb7fdcc68\">3a2d0cd</a></td><td><code>Node labels and crossed nodes for type D (plus nicer diagram)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7898620c02c0a64caa883f11d2e3be8d54b54897\">7898620</a></td><td><code>Node labels and crossed nodes for type E</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/685addbeec88066d98a4cc05e376b6bbec7600f8\">685addb</a></td><td><code>Node labels and crossed nodes for type F</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf72707a19157a9728badae4932a8a1f010c6897\">bf72707</a></td><td><code>Node labels and crossed nodes for type G</code></td></tr></table>\n",
    "created_at": "2014-03-16T01:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202195",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

I believe it is useful to have the ability to cross out particular nodes for Dynkin diagrams (I believe the same/similar convention is used for Lie superalgebras to denote even/odd indices).

However I think the `node_label` is redundant to the `label` and you are assuming your indexing set is `1, 2, ..., n`, often which it is not. Similarly, I'm planning to make Dynkin diagrams more immutable (#15739), so I'd rather have it return a new `DynkinDiagram` when changing the crossed out nodes. One last point from a quick look-through, for comparisons with `None` you should do:

```
if x is None:
    pass

if x is not None:
    pass
```

I'll check against Kac tonight. Dan and Nicolas might have some more comments as well.

Best,

Travis

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95ae5db3f1b74142b285d646156b6d0c5aa8a1a7">95ae5db</a></td><td><code>Add set_node_labels and set_crossed_nodes to DynkinDiagram</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05b1b19bedc072e036018385c175fef90d3ce838">05b1b19</a></td><td><code>Node labels and crossed nodes for type A</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5da4183846cfb4827167bd423ea8c1057a22f57f">5da4183</a></td><td><code>Fix coding style in type A</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d872d163705e13facaccd5b5ed3e0d7d725f5cb5">d872d16</a></td><td><code>Node labels and crossed nodes for type B</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/356dde097d6885b96607577a3e1ec358fba2f8be">356dde0</a></td><td><code>Bugfix for type B</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56a74d528139a24cf9069a1a45b250f98df7d772">56a74d5</a></td><td><code>Node labels and crossed nodes for type C</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a2d0cd6e7f204241cf8ef5b4801370eb7fdcc68">3a2d0cd</a></td><td><code>Node labels and crossed nodes for type D (plus nicer diagram)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7898620c02c0a64caa883f11d2e3be8d54b54897">7898620</a></td><td><code>Node labels and crossed nodes for type E</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/685addbeec88066d98a4cc05e376b6bbec7600f8">685addb</a></td><td><code>Node labels and crossed nodes for type F</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf72707a19157a9728badae4932a8a1f010c6897">bf72707</a></td><td><code>Node labels and crossed nodes for type G</code></td></tr></table>




---

archive/issue_comments_202196.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently only in type A) so the data are actually used by latex.\n+This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently without docstrings) so the data are actually used by latex.\n \n This convenient notation is used quite often in certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307\n \n``````\n",
    "created_at": "2014-03-16T01:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202196",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently only in type A) so the data are actually used by latex.
+This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently without docstrings) so the data are actually used by latex.
 
 This convenient notation is used quite often in certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307
 
``````




---

archive/issue_comments_202197.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHi V\u00edt!\n\nThanks for your work on this. I agree with Travis. Furthermore the current implementation introduces quite some duplication, inside the type-specific latex methods and inbetween them. I guess this duplication could be avoided by factoring out a method, say `_latex_node(node, x,y)` that would handle the writing of the latex string for the node (label, crossing out, ...), and then make the type-specific latex methods use it. What do you think?\n\nCheers,\n                                      Nicolas",
    "created_at": "2014-03-16T06:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202197",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:6" align="right">comment:6</div>

Hi Vít!

Thanks for your work on this. I agree with Travis. Furthermore the current implementation introduces quite some duplication, inside the type-specific latex methods and inbetween them. I guess this duplication could be avoided by factoring out a method, say `_latex_node(node, x,y)` that would handle the writing of the latex string for the node (label, crossing out, ...), and then make the type-specific latex methods use it. What do you think?

Cheers,
                                      Nicolas



---

archive/issue_comments_202198.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@tscrim](#comment:4):\n> I believe it is useful to have the ability to cross out particular nodes for Dynkin diagrams (I believe the same/similar convention is used for Lie superalgebras to denote even/odd indices).\n> \n\nI'm glad to hear that.\n\n>\n> However I think the `node_label` is redundant to the `label` and you are assuming your indexing set is `1, 2, ..., n`, often which it is not. Similarly, I'm planning to make Dynkin diagrams more immutable (#15739), so I'd rather have it return a new `DynkinDiagram` when changing the crossed out nodes. One last point from a quick look-through, for comparisons with `None` you should do:\n>\n> ```\n> if x is None:\n>     pass\n> \n> if x is not None:\n>     pass\n> ```\n> \n\nThe labels which are implemented so far are intended for people who doesn't want to use Bourbaki convention. I think, this feature is not very well documented. My labels are purely a decoration of nodes, which can be used i.e. to denote a homogeneous vector bundle over $G/P$. So I guess the correct thing to do here is to change `node_labels[i]` to `node_labels[label(i)]`, right?\n\nAs for immutability issue, will it be OK, if I just add crossed_nodes and node_labels to the constructor and get rid of the setters?\n\n>\n> I'll check against Kac tonight. Dan and Nicolas might have some more comments as well.\n> \n> Best,\n\n> Travis",
    "created_at": "2014-03-16T10:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202198",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@tscrim](#comment:4):
> I believe it is useful to have the ability to cross out particular nodes for Dynkin diagrams (I believe the same/similar convention is used for Lie superalgebras to denote even/odd indices).
> 

I'm glad to hear that.

>
> However I think the `node_label` is redundant to the `label` and you are assuming your indexing set is `1, 2, ..., n`, often which it is not. Similarly, I'm planning to make Dynkin diagrams more immutable (#15739), so I'd rather have it return a new `DynkinDiagram` when changing the crossed out nodes. One last point from a quick look-through, for comparisons with `None` you should do:
>
> ```
> if x is None:
>     pass
> 
> if x is not None:
>     pass
> ```
> 

The labels which are implemented so far are intended for people who doesn't want to use Bourbaki convention. I think, this feature is not very well documented. My labels are purely a decoration of nodes, which can be used i.e. to denote a homogeneous vector bundle over $G/P$. So I guess the correct thing to do here is to change `node_labels[i]` to `node_labels[label(i)]`, right?

As for immutability issue, will it be OK, if I just add crossed_nodes and node_labels to the constructor and get rid of the setters?

>
> I'll check against Kac tonight. Dan and Nicolas might have some more comments as well.
> 
> Best,

> Travis



---

archive/issue_comments_202199.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@nthiery](#comment:6):\n>     Hi V\u00edt!\n> \n> Thanks for your work on this. I agree with Travis. Furthermore the current implementation introduces quite some duplication, inside the type-specific latex methods and inbetween them. I guess this duplication could be avoided by factoring out a method, say `_latex_node(node, x,y)` that would handle the writing of the latex string for the node (label, crossing out, ...), and then make the type-specific latex methods use it. What do you think?\n> \n> Cheers,\n>                                       Nicolas\n\nThe duplication was always there. I just made it more apparent. ;) I myself thought about creating such a method when I was coding type E. I'll make that change now.",
    "created_at": "2014-03-16T10:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202199",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@nthiery](#comment:6):
>     Hi Vít!
> 
> Thanks for your work on this. I agree with Travis. Furthermore the current implementation introduces quite some duplication, inside the type-specific latex methods and inbetween them. I guess this duplication could be avoided by factoring out a method, say `_latex_node(node, x,y)` that would handle the writing of the latex string for the node (label, crossing out, ...), and then make the type-specific latex methods use it. What do you think?
> 
> Cheers,
>                                       Nicolas

The duplication was always there. I just made it more apparent. ;) I myself thought about creating such a method when I was coding type E. I'll make that change now.



---

archive/issue_comments_202200.json:
```json
{
    "body": "Changed commit from **[`bf72707`](https://github.com/sagemath/sagetrac-mirror/commit/bf72707a19157a9728badae4932a8a1f010c6897)** to **[`454c0ac`](https://github.com/sagemath/sagetrac-mirror/commit/454c0ac306ca5ab92951fb72099fd8ce94985785)**",
    "created_at": "2014-03-16T13:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202200",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bf72707`](https://github.com/sagemath/sagetrac-mirror/commit/bf72707a19157a9728badae4932a8a1f010c6897)** to **[`454c0ac`](https://github.com/sagemath/sagetrac-mirror/commit/454c0ac306ca5ab92951fb72099fd8ce94985785)**



---

archive/issue_comments_202201.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/454c0ac306ca5ab92951fb72099fd8ce94985785\">454c0ac</a></td><td><code>Refactor node drawing</code></td></tr></table>\n",
    "created_at": "2014-03-16T13:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202201",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/454c0ac306ca5ab92951fb72099fd8ce94985785">454c0ac</a></td><td><code>Refactor node drawing</code></td></tr></table>




---

archive/issue_comments_202202.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@vit-tucek](#comment:7):\n> The labels which are implemented so far are intended for people who doesn't want to use Bourbaki convention. I think, this feature is not very well documented. My labels are purely a decoration of nodes, which can be used i.e. to denote a homogeneous vector bundle over $G/P$. So I guess the correct thing to do here is to change `node_labels[i]` to `node_labels[label(i)]`, right?\n> \n> As for immutability issue, will it be OK, if I just add crossed_nodes and node_labels to the constructor and get rid of the setters?\n\nIf you feel the `label` is not well documented, then you should document it better. However the best thing to do would be to override the Dynkin diagram's relabel as\n\n```python\ndef relabel(self, relabeling):\n    return DynkinDiagram(self._cartan_type.relabel(relabeling))\n```\nThis would result in:\n\n```\nsage: D = DynkinDiagram(['A',4,1])\nsage: DL = DynkinDiagram(D._cartan_type.relabel([2,-1,-2,-3,4])) # This would be D.relabel([2,-1,-2,-3,4])\nsage: DL\n2\nO-----------+\n|           |\n|           |\nO---O---O---O\n-1   -2   -3   4\nA4~ relabelled by {0: 2, 1: -1, 2: -2, 3: -3, 4: 4}\nsage: latex(_)\n\\begin{tikzpicture}[scale=0.5]\n\\draw (-1,0) node[anchor=east] {$A_{4}^{(1)} \\text{ relabelled by } \\left\\{0 : 2, 1 : -1, 2 : -2, 3 : -3, 4 : 4\\right\\}$};\n\\draw (0 cm,0) -- (6 cm,0);\n\\draw (0 cm,0) -- (3.0 cm, 1.2 cm);\n\\draw (3.0 cm, 1.2 cm) -- (6 cm, 0);\n\\draw[fill=white] (0 cm, 0) circle (.25cm) node[below=4pt]{$-1$};\n\\draw[fill=white] (2 cm, 0) circle (.25cm) node[below=4pt]{$-2$};\n\\draw[fill=white] (4 cm, 0) circle (.25cm) node[below=4pt]{$-3$};\n\\draw[fill=white] (6 cm, 0) circle (.25cm) node[below=4pt]{$4$};\n\\draw[fill=white] (3.0 cm, 1.2 cm) circle (.25cm) node[anchor=south east]{$2$};\n\\end{tikzpicture}\n```\nI agree that we should add the following semantic to `CartanType`:\n\n```\nsage: CartanType(['A',2], labels=[-1,-2])\n```\n(or perhaps `label` or `labeling` or...) and for `crossed_nodes`. Yet we should also have an additional method which allows us to set the crossed nodes.\n\nI feel like we should add `type_crossed.py` which keeps/prints this data and uses the same mechanic that the relabeled Cartan types use. Nicolas, do you agree?\n\nFurthermore, I don't like the current state of your printing method. Your iteration of the string is wrong because your assuming your labeling is nice (i.e. `[0, 1, ..., k]`). However that is somewhat moot because I think you should only have one method for printing the individual nodes, as per Nicolas' suggestion, because it is overkill (it's basically just a for loop).\n\nThanks for your work on this,\n\nTravis",
    "created_at": "2014-03-16T16:12:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202202",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@vit-tucek](#comment:7):
> The labels which are implemented so far are intended for people who doesn't want to use Bourbaki convention. I think, this feature is not very well documented. My labels are purely a decoration of nodes, which can be used i.e. to denote a homogeneous vector bundle over $G/P$. So I guess the correct thing to do here is to change `node_labels[i]` to `node_labels[label(i)]`, right?
> 
> As for immutability issue, will it be OK, if I just add crossed_nodes and node_labels to the constructor and get rid of the setters?

If you feel the `label` is not well documented, then you should document it better. However the best thing to do would be to override the Dynkin diagram's relabel as

```python
def relabel(self, relabeling):
    return DynkinDiagram(self._cartan_type.relabel(relabeling))
```
This would result in:

```
sage: D = DynkinDiagram(['A',4,1])
sage: DL = DynkinDiagram(D._cartan_type.relabel([2,-1,-2,-3,4])) # This would be D.relabel([2,-1,-2,-3,4])
sage: DL
2
O-----------+
|           |
|           |
O---O---O---O
-1   -2   -3   4
A4~ relabelled by {0: 2, 1: -1, 2: -2, 3: -3, 4: 4}
sage: latex(_)
\begin{tikzpicture}[scale=0.5]
\draw (-1,0) node[anchor=east] {$A_{4}^{(1)} \text{ relabelled by } \left\{0 : 2, 1 : -1, 2 : -2, 3 : -3, 4 : 4\right\}$};
\draw (0 cm,0) -- (6 cm,0);
\draw (0 cm,0) -- (3.0 cm, 1.2 cm);
\draw (3.0 cm, 1.2 cm) -- (6 cm, 0);
\draw[fill=white] (0 cm, 0) circle (.25cm) node[below=4pt]{$-1$};
\draw[fill=white] (2 cm, 0) circle (.25cm) node[below=4pt]{$-2$};
\draw[fill=white] (4 cm, 0) circle (.25cm) node[below=4pt]{$-3$};
\draw[fill=white] (6 cm, 0) circle (.25cm) node[below=4pt]{$4$};
\draw[fill=white] (3.0 cm, 1.2 cm) circle (.25cm) node[anchor=south east]{$2$};
\end{tikzpicture}
```
I agree that we should add the following semantic to `CartanType`:

```
sage: CartanType(['A',2], labels=[-1,-2])
```
(or perhaps `label` or `labeling` or...) and for `crossed_nodes`. Yet we should also have an additional method which allows us to set the crossed nodes.

I feel like we should add `type_crossed.py` which keeps/prints this data and uses the same mechanic that the relabeled Cartan types use. Nicolas, do you agree?

Furthermore, I don't like the current state of your printing method. Your iteration of the string is wrong because your assuming your labeling is nice (i.e. `[0, 1, ..., k]`). However that is somewhat moot because I think you should only have one method for printing the individual nodes, as per Nicolas' suggestion, because it is overkill (it's basically just a for loop).

Thanks for your work on this,

Travis



---

archive/issue_comments_202203.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@tscrim](#comment:10):\n> Replying to [@vit-tucek](#comment:7):\n> > The labels which are implemented so far are intended for people who doesn't want to use Bourbaki convention. I think, this feature is not very well documented. My labels are purely a decoration of nodes, which can be used i.e. to denote a homogeneous vector bundle over $G/P$. So I guess the correct thing to do here is to change `node_labels[i]` to `node_labels[label(i)]`, right?\n> > \n> > As for immutability issue, will it be OK, if I just add crossed_nodes and node_labels to the constructor and get rid of the setters?\n\n> \n> If you feel the `label` is not well documented, then you should document it better. However the best thing to do would be to override the Dynkin diagram's relabel as\n> \n> ```python\n> def relabel(self, relabeling):\n>     return DynkinDiagram(self._cartan_type.relabel(relabeling))\n> ```\n> This would result in:\n> \n> ```\n> sage: D = DynkinDiagram(['A',4,1])\n> sage: DL = DynkinDiagram(D._cartan_type.relabel([2,-1,-2,-3,4])) # This would be D.relabel([2,-1,-2,-3,4])\n> sage: DL\n> 2\n> O-----------+\n> |           |\n> |           |\n> O---O---O---O\n> -1   -2   -3   4\n> A4~ relabelled by {0: 2, 1: -1, 2: -2, 3: -3, 4: 4}\n> sage: latex(_)\n> \\begin{tikzpicture}[scale=0.5]\n> \\draw (-1,0) node[anchor=east] {$A_{4}^{(1)} \\text{ relabelled by } \\left\\{0 : 2, 1 : -1, 2 : -2, 3 : -3, 4 : 4\\right\\}$};\n> \\draw (0 cm,0) -- (6 cm,0);\n> \\draw (0 cm,0) -- (3.0 cm, 1.2 cm);\n> \\draw (3.0 cm, 1.2 cm) -- (6 cm, 0);\n> \\draw[fill=white] (0 cm, 0) circle (.25cm) node[below=4pt]{$-1$};\n> \\draw[fill=white] (2 cm, 0) circle (.25cm) node[below=4pt]{$-2$};\n> \\draw[fill=white] (4 cm, 0) circle (.25cm) node[below=4pt]{$-3$};\n> \\draw[fill=white] (6 cm, 0) circle (.25cm) node[below=4pt]{$4$};\n> \\draw[fill=white] (3.0 cm, 1.2 cm) circle (.25cm) node[anchor=south east]{$2$};\n> \\end{tikzpicture}\n> ```\n> I agree that we should add the following semantic to `CartanType`:\n> \n> ```\n> sage: CartanType(['A',2], labels=[-1,-2])\n> ```\n> (or perhaps `label` or `labeling` or...) and for `crossed_nodes`. Yet we should also have an additional method which allows us to set the crossed nodes.\n\nThere are two problems. First that I do not understand current labeling mechanism properly (code nor use cases -- does anybode use `label` at all?) and second that the semantics here are really different. My `node_labels` represent some other object that has a priori nothing to do with how we label the basis of our Cartan algebra. In reality these `node_labels` denote a highest weight of the Levi part of a standard parabolic subalgebra and thus it should really be a mapping that assigns natural numbers to labels. So perhaps `node_labels` should really be a dictionary with keys `label(i) for i in self.index_set()`  What about this?\n\n```python\ndef set_node_labels(self, node_labels):\n    if isinstance(node_labels, list):\n        self.node_labels = {i : node_labels[label(i)-1] for i in self.index_set()}\n    else:\n         self.node_labels = node_labels\n```\n\n> \n> I feel like we should add `type_crossed.py` which keeps/prints this data and uses the same mechanic that the relabeled Cartan types use. Nicolas, do you agree?\n\nAs with `label` I am not sure what is the use case here. What is wrong with CartanType having labels, node_labels and crossed out nodes as instance variables?\n\n> \n> Furthermore, I don't like the current state of your printing method. Your iteration of the string is wrong because your assuming your labeling is nice (i.e. `[0, 1, ..., k]`). However that is somewhat moot because I think you should only have one method for printing the individual nodes, as per Nicolas' suggestion, because it is overkill (it's basically just a for loop).\n\nDid you look at my last commit? (https://github.com/sagemath/sagetrac-mirror/commit/454c0ac306ca5ab92951fb72099fd8ce94985785)\n\n> \n> Thanks for your work on this,\n\n> Travis\n\nThanks for feedback. ;)",
    "created_at": "2014-03-16T18:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202203",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@tscrim](#comment:10):
> Replying to [@vit-tucek](#comment:7):
> > The labels which are implemented so far are intended for people who doesn't want to use Bourbaki convention. I think, this feature is not very well documented. My labels are purely a decoration of nodes, which can be used i.e. to denote a homogeneous vector bundle over $G/P$. So I guess the correct thing to do here is to change `node_labels[i]` to `node_labels[label(i)]`, right?
> > 
> > As for immutability issue, will it be OK, if I just add crossed_nodes and node_labels to the constructor and get rid of the setters?

> 
> If you feel the `label` is not well documented, then you should document it better. However the best thing to do would be to override the Dynkin diagram's relabel as
> 
> ```python
> def relabel(self, relabeling):
>     return DynkinDiagram(self._cartan_type.relabel(relabeling))
> ```
> This would result in:
> 
> ```
> sage: D = DynkinDiagram(['A',4,1])
> sage: DL = DynkinDiagram(D._cartan_type.relabel([2,-1,-2,-3,4])) # This would be D.relabel([2,-1,-2,-3,4])
> sage: DL
> 2
> O-----------+
> |           |
> |           |
> O---O---O---O
> -1   -2   -3   4
> A4~ relabelled by {0: 2, 1: -1, 2: -2, 3: -3, 4: 4}
> sage: latex(_)
> \begin{tikzpicture}[scale=0.5]
> \draw (-1,0) node[anchor=east] {$A_{4}^{(1)} \text{ relabelled by } \left\{0 : 2, 1 : -1, 2 : -2, 3 : -3, 4 : 4\right\}$};
> \draw (0 cm,0) -- (6 cm,0);
> \draw (0 cm,0) -- (3.0 cm, 1.2 cm);
> \draw (3.0 cm, 1.2 cm) -- (6 cm, 0);
> \draw[fill=white] (0 cm, 0) circle (.25cm) node[below=4pt]{$-1$};
> \draw[fill=white] (2 cm, 0) circle (.25cm) node[below=4pt]{$-2$};
> \draw[fill=white] (4 cm, 0) circle (.25cm) node[below=4pt]{$-3$};
> \draw[fill=white] (6 cm, 0) circle (.25cm) node[below=4pt]{$4$};
> \draw[fill=white] (3.0 cm, 1.2 cm) circle (.25cm) node[anchor=south east]{$2$};
> \end{tikzpicture}
> ```
> I agree that we should add the following semantic to `CartanType`:
> 
> ```
> sage: CartanType(['A',2], labels=[-1,-2])
> ```
> (or perhaps `label` or `labeling` or...) and for `crossed_nodes`. Yet we should also have an additional method which allows us to set the crossed nodes.

There are two problems. First that I do not understand current labeling mechanism properly (code nor use cases -- does anybode use `label` at all?) and second that the semantics here are really different. My `node_labels` represent some other object that has a priori nothing to do with how we label the basis of our Cartan algebra. In reality these `node_labels` denote a highest weight of the Levi part of a standard parabolic subalgebra and thus it should really be a mapping that assigns natural numbers to labels. So perhaps `node_labels` should really be a dictionary with keys `label(i) for i in self.index_set()`  What about this?

```python
def set_node_labels(self, node_labels):
    if isinstance(node_labels, list):
        self.node_labels = {i : node_labels[label(i)-1] for i in self.index_set()}
    else:
         self.node_labels = node_labels
```

> 
> I feel like we should add `type_crossed.py` which keeps/prints this data and uses the same mechanic that the relabeled Cartan types use. Nicolas, do you agree?

As with `label` I am not sure what is the use case here. What is wrong with CartanType having labels, node_labels and crossed out nodes as instance variables?

> 
> Furthermore, I don't like the current state of your printing method. Your iteration of the string is wrong because your assuming your labeling is nice (i.e. `[0, 1, ..., k]`). However that is somewhat moot because I think you should only have one method for printing the individual nodes, as per Nicolas' suggestion, because it is overkill (it's basically just a for loop).

Did you look at my last commit? (https://github.com/sagemath/sagetrac-mirror/commit/454c0ac306ca5ab92951fb72099fd8ce94985785)

> 
> Thanks for your work on this,

> Travis

Thanks for feedback. ;)



---

archive/issue_comments_202204.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2233007f07555e90b2976ab840061bf74f8b2e4a\">2233007</a></td><td><code>BUGFIX: latex() of affine types work again</code></td></tr></table>\n",
    "created_at": "2014-03-19T12:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202204",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2233007f07555e90b2976ab840061bf74f8b2e4a">2233007</a></td><td><code>BUGFIX: latex() of affine types work again</code></td></tr></table>




---

archive/issue_comments_202205.json:
```json
{
    "body": "Changed commit from **[`454c0ac`](https://github.com/sagemath/sagetrac-mirror/commit/454c0ac306ca5ab92951fb72099fd8ce94985785)** to **[`2233007`](https://github.com/sagemath/sagetrac-mirror/commit/2233007f07555e90b2976ab840061bf74f8b2e4a)**",
    "created_at": "2014-03-19T12:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202205",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`454c0ac`](https://github.com/sagemath/sagetrac-mirror/commit/454c0ac306ca5ab92951fb72099fd8ce94985785)** to **[`2233007`](https://github.com/sagemath/sagetrac-mirror/commit/2233007f07555e90b2976ab840061bf74f8b2e4a)**



---

archive/issue_comments_202206.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@sagetrac-git](#comment:12):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2233007f07555e90b2976ab840061bf74f8b2e4a\">2233007</a></td><td><code>BUGFIX: latex() of affine types work again</code></td></tr></table>\n\nI don't understand why that waning gets printed twice.",
    "created_at": "2014-03-19T12:43:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202206",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@sagetrac-git](#comment:12):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2233007f07555e90b2976ab840061bf74f8b2e4a">2233007</a></td><td><code>BUGFIX: latex() of affine types work again</code></td></tr></table>

I don't understand why that waning gets printed twice.



---

archive/issue_comments_202207.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91981c1e5a5834ade692466334e7fdf89093a058\">91981c1</a></td><td><code>Refactor and fix the docstrings</code></td></tr></table>\n",
    "created_at": "2014-03-25T21:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202207",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91981c1e5a5834ade692466334e7fdf89093a058">91981c1</a></td><td><code>Refactor and fix the docstrings</code></td></tr></table>




---

archive/issue_comments_202208.json:
```json
{
    "body": "Changed commit from **[`2233007`](https://github.com/sagemath/sagetrac-mirror/commit/2233007f07555e90b2976ab840061bf74f8b2e4a)** to **[`91981c1`](https://github.com/sagemath/sagetrac-mirror/commit/91981c1e5a5834ade692466334e7fdf89093a058)**",
    "created_at": "2014-03-25T21:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202208",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2233007`](https://github.com/sagemath/sagetrac-mirror/commit/2233007f07555e90b2976ab840061bf74f8b2e4a)** to **[`91981c1`](https://github.com/sagemath/sagetrac-mirror/commit/91981c1e5a5834ade692466334e7fdf89093a058)**



---

archive/issue_comments_202209.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nOK. I've fixed some bugs and now the patch doesn't cause any breakage and works in fulfilling my needs. \n\nThere is still some work to be done. Namely:\n\n1. Modify `repr` so that it prints also node_labels and crossed nodes. (I don't see a point in doing ascii graphics; two simple prints after the current output should do just fine.)\n2. Add doctests illustrating the new funcionality.\n3. Get rid of setters and move thiese features  to `__init__` in order to help`DynkinDiagram` become immutable.\n\nIs there an interest in getting this patch into sage? Are there some remaining issues that I missed?",
    "created_at": "2014-03-25T22:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202209",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:15" align="right">comment:15</div>

OK. I've fixed some bugs and now the patch doesn't cause any breakage and works in fulfilling my needs. 

There is still some work to be done. Namely:

1. Modify `repr` so that it prints also node_labels and crossed nodes. (I don't see a point in doing ascii graphics; two simple prints after the current output should do just fine.)
2. Add doctests illustrating the new funcionality.
3. Get rid of setters and move thiese features  to `__init__` in order to help`DynkinDiagram` become immutable.

Is there an interest in getting this patch into sage? Are there some remaining issues that I missed?



---

archive/issue_comments_202210.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYes there is, but finals week trumps Sage work. However from looking at the code, I think there is significant issues when dealing with non-standard indexing sets (which we should support).\n\nI'm going to cannibalize your branch into a new one where I'm going to create a new class in `type_marked.py` for types with marked nodes and add a proper relabel to `DynkinDiagram`. I should have it done in an hour or so.\n\nEDIT - So basically we want relabellings and markings to act as decorator classes (as per the design pattern). This will take some (moderate) refactoring, but it will simplify the resulting code and make it easier for similar future additions.",
    "created_at": "2014-03-26T02:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202210",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

Yes there is, but finals week trumps Sage work. However from looking at the code, I think there is significant issues when dealing with non-standard indexing sets (which we should support).

I'm going to cannibalize your branch into a new one where I'm going to create a new class in `type_marked.py` for types with marked nodes and add a proper relabel to `DynkinDiagram`. I should have it done in an hour or so.

EDIT - So basically we want relabellings and markings to act as decorator classes (as per the design pattern). This will take some (moderate) refactoring, but it will simplify the resulting code and make it easier for similar future additions.



---

archive/issue_comments_202211.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@tscrim](#comment:16):\n> Yes there is, but finals week trumps Sage work. However from looking at the code, I think there is significant issues when dealing with non-standard indexing sets (which we should support).\n> \n\nWould it help to refactor node_labels` and `crossed_nodes` into dictionaries as I suggested in comment 11?\n\n> I'm going to cannibalize your branch into a new one where I'm going to create a new class in `type_marked.py` for types with marked nodes and add a proper relabel to `DynkinDiagram`. I should have it done in an hour or so.\n> \n> EDIT - So basically we want relabellings and markings to act as decorator classes (as per the design pattern). This will take some (moderate) refactoring, but it will simplify the resulting code and make it easier for similar future additions.\n\nGreat. Thank you. I am just not sure how do we accomplish crossed nodes and weight labels at the same time. Multiple inheritance? \n\nBy the way, last week I've stumbled upon some articles about nilpotent orbits where they use Dynkin diagrams with labels and call them Weighted Dynking diagrams. So maybe use `WeightedCartanType` and `WeightedDynkinDiagram` for the guys with labels and `MarkedCartanType` & `MarkedDynkinDiagram` for crossed nodes? I can imagine that someone would want to use different markings than crosses which would amount to another round of digging into the TikZ documentation and parameter tweaking in all those `_latex_...` methods.",
    "created_at": "2014-03-26T12:36:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202211",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@tscrim](#comment:16):
> Yes there is, but finals week trumps Sage work. However from looking at the code, I think there is significant issues when dealing with non-standard indexing sets (which we should support).
> 

Would it help to refactor node_labels` and `crossed_nodes` into dictionaries as I suggested in comment 11?

> I'm going to cannibalize your branch into a new one where I'm going to create a new class in `type_marked.py` for types with marked nodes and add a proper relabel to `DynkinDiagram`. I should have it done in an hour or so.
> 
> EDIT - So basically we want relabellings and markings to act as decorator classes (as per the design pattern). This will take some (moderate) refactoring, but it will simplify the resulting code and make it easier for similar future additions.

Great. Thank you. I am just not sure how do we accomplish crossed nodes and weight labels at the same time. Multiple inheritance? 

By the way, last week I've stumbled upon some articles about nilpotent orbits where they use Dynkin diagrams with labels and call them Weighted Dynking diagrams. So maybe use `WeightedCartanType` and `WeightedDynkinDiagram` for the guys with labels and `MarkedCartanType` & `MarkedDynkinDiagram` for crossed nodes? I can imagine that someone would want to use different markings than crosses which would amount to another round of digging into the TikZ documentation and parameter tweaking in all those `_latex_...` methods.



---

archive/issue_events_227628.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-03-26T23:02:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227628"
}
```



---

archive/issue_comments_202212.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOkay, done with the refactor and creating the `type_marked`. I couldn't get your latex to work, so I just implemented a custom help for the marks (cross outs). It's now setup so it's easy enough to add additional functionality if anyone wants it.\n\nI've also done some fixing up of the way we print the Dynkin diagram ascii art, so with labels up to length 3 (almost 4 really), it looks nice. I refactored `type_dual` and `type_relabeled` to inherit from a common class `CartanType_decorator` which acts as a decorator class and redirects most methods to the base Cartan type. I've set the (implicit) order of the decorators as\n\n```\ndual <- relabelled <- marked\n```\nwhere the first one was what was there previously. I also gave a `relabel` method to Dynkin diagrams and Cartan matrices. I think that's all, but I might be forgetting something. If we're happy with my changes, then it's a positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c655d510769d74bd31fb6e395a88eab35ca0998f\">c655d51</a></td><td><code>Implemented marked Cartan types and refactored common code.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80684be2a593638f22cacc79bbe408a2138e3097\">80684be</a></td><td><code>Fixed last doctests and added to full coverage.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/612db215e7e89687f2dc5af38ce0915af16cc49a\">612db21</a></td><td><code>Fixed last failing doctest.</code></td></tr></table>\n",
    "created_at": "2014-03-26T23:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202212",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Okay, done with the refactor and creating the `type_marked`. I couldn't get your latex to work, so I just implemented a custom help for the marks (cross outs). It's now setup so it's easy enough to add additional functionality if anyone wants it.

I've also done some fixing up of the way we print the Dynkin diagram ascii art, so with labels up to length 3 (almost 4 really), it looks nice. I refactored `type_dual` and `type_relabeled` to inherit from a common class `CartanType_decorator` which acts as a decorator class and redirects most methods to the base Cartan type. I've set the (implicit) order of the decorators as

```
dual <- relabelled <- marked
```
where the first one was what was there previously. I also gave a `relabel` method to Dynkin diagrams and Cartan matrices. I think that's all, but I might be forgetting something. If we're happy with my changes, then it's a positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c655d510769d74bd31fb6e395a88eab35ca0998f">c655d51</a></td><td><code>Implemented marked Cartan types and refactored common code.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80684be2a593638f22cacc79bbe408a2138e3097">80684be</a></td><td><code>Fixed last doctests and added to full coverage.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/612db215e7e89687f2dc5af38ce0915af16cc49a">612db21</a></td><td><code>Fixed last failing doctest.</code></td></tr></table>




---

archive/issue_comments_202213.json:
```json
{
    "body": "Changed author from **V\u00edt Tu\u010dek** to **V\u00edt Tu\u010dek, Travis Scrimshaw**",
    "created_at": "2014-03-26T23:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202213",
    "user": "https://github.com/tscrim"
}
```

Changed author from **Vít Tuček** to **Vít Tuček, Travis Scrimshaw**



---

archive/issue_comments_202214.json:
```json
{
    "body": "Changed branch from **[u/vittucek/ticket/15948](https://github.com/sagemath/sagetrac-mirror/tree/u/vittucek/ticket/15948)** to **[public/combinat/root_systems/marked_types-15948](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/root_systems/marked_types-15948)**",
    "created_at": "2014-03-26T23:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202214",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/vittucek/ticket/15948](https://github.com/sagemath/sagetrac-mirror/tree/u/vittucek/ticket/15948)** to **[public/combinat/root_systems/marked_types-15948](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/root_systems/marked_types-15948)**



---

archive/issue_comments_202215.json:
```json
{
    "body": "Changed commit from **[`91981c1`](https://github.com/sagemath/sagetrac-mirror/commit/91981c1e5a5834ade692466334e7fdf89093a058)** to **[`612db21`](https://github.com/sagemath/sagetrac-mirror/commit/612db215e7e89687f2dc5af38ce0915af16cc49a)**",
    "created_at": "2014-03-26T23:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202215",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`91981c1`](https://github.com/sagemath/sagetrac-mirror/commit/91981c1e5a5834ade692466334e7fdf89093a058)** to **[`612db21`](https://github.com/sagemath/sagetrac-mirror/commit/612db215e7e89687f2dc5af38ce0915af16cc49a)**



---

archive/issue_comments_202216.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nGreat!\n\nReplying to [@tscrim](#comment:18):\n> Okay, done with the refactor and creating the `type_marked`. I couldn't get your latex to work, so I just implemented a custom help for the marks (cross outs). It's now setup so it's easy enough to add additional functionality if anyone wants it.\n> \n\nIs this feature discoverable by a user? Shouldn't we add some examples to `CartanType`'s docstring? \n\nYou've missed the bugfix for docstring regarding our convention for Dynkin diagrams (see commit 74c6d23eb28fd192b70e2219030d6ad60fcb9f0f).\n\n> I've also done some fixing up of the way we print the Dynkin diagram ascii art, so with labels up to length 3 (almost 4 really), it looks nice. I refactored `type_dual` and `type_relabeled` to inherit from a common class `CartanType_decorator` which acts as a decorator class and redirects most methods to the base Cartan type. I've set the (implicit) order of the decorators as\n> \n> ```\n> dual <- relabelled <- marked\n> ```\n> where the first one was what was there previously. I also gave a `relabel` method to Dynkin diagrams and Cartan matrices. I think that's all, but I might be forgetting something. If we're happy with my changes, then it's a positive review.\n\nWould it be possible to add one more layer for weighted Cartan types? I mean my original motivation for this patch was to be able to produce diagrams for representation of homogeneous vector bundles which I can't really do now. :)\n\nI'd add this feature myself, but I am still struggling with understanding the current code. Is there some documentation for programmers or  design documents that would help me?",
    "created_at": "2014-03-31T20:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202216",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:19" align="right">comment:19</div>

Great!

Replying to [@tscrim](#comment:18):
> Okay, done with the refactor and creating the `type_marked`. I couldn't get your latex to work, so I just implemented a custom help for the marks (cross outs). It's now setup so it's easy enough to add additional functionality if anyone wants it.
> 

Is this feature discoverable by a user? Shouldn't we add some examples to `CartanType`'s docstring? 

You've missed the bugfix for docstring regarding our convention for Dynkin diagrams (see commit 74c6d23eb28fd192b70e2219030d6ad60fcb9f0f).

> I've also done some fixing up of the way we print the Dynkin diagram ascii art, so with labels up to length 3 (almost 4 really), it looks nice. I refactored `type_dual` and `type_relabeled` to inherit from a common class `CartanType_decorator` which acts as a decorator class and redirects most methods to the base Cartan type. I've set the (implicit) order of the decorators as
> 
> ```
> dual <- relabelled <- marked
> ```
> where the first one was what was there previously. I also gave a `relabel` method to Dynkin diagrams and Cartan matrices. I think that's all, but I might be forgetting something. If we're happy with my changes, then it's a positive review.

Would it be possible to add one more layer for weighted Cartan types? I mean my original motivation for this patch was to be able to produce diagrams for representation of homogeneous vector bundles which I can't really do now. :)

I'd add this feature myself, but I am still struggling with understanding the current code. Is there some documentation for programmers or  design documents that would help me?



---

archive/issue_comments_202217.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@vit-tucek](#comment:19):\n> Is this feature discoverable by a user? Shouldn't we add some examples to `CartanType`'s docstring? \n\nYes via `marked_nodes`. However we should add something to the doc of `CartanType` (I thought I did, but I guess not).\n\n> You've missed the bugfix for docstring regarding our convention for Dynkin diagrams (see commit 74c6d23eb28fd192b70e2219030d6ad60fcb9f0f).\n\nI'm not convinced yet that it is incorrect, much less that your proposal makes anything better. I will look at it more closely and think about it today/tomorrow (unless Dan or Nicolas, you have an opinion on this?).\n\n> Would it be possible to add one more layer for weighted Cartan types? I mean my original motivation for this patch was to be able to produce diagrams for representation of homogeneous vector bundles which I can't really do now. :)\n\n>\n> I'd add this feature myself, but I am still struggling with understanding the current code. Is there some documentation for programmers or  design documents that would help me?\n\nIMO we should do this in a follow-up ticket as this one has a lot going on to begin with. However it should be easy enough to do by adding a class/file similar to `type_marked.py` and another method to the base `CartanType_abstract` class.",
    "created_at": "2014-04-04T15:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202217",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@vit-tucek](#comment:19):
> Is this feature discoverable by a user? Shouldn't we add some examples to `CartanType`'s docstring? 

Yes via `marked_nodes`. However we should add something to the doc of `CartanType` (I thought I did, but I guess not).

> You've missed the bugfix for docstring regarding our convention for Dynkin diagrams (see commit 74c6d23eb28fd192b70e2219030d6ad60fcb9f0f).

I'm not convinced yet that it is incorrect, much less that your proposal makes anything better. I will look at it more closely and think about it today/tomorrow (unless Dan or Nicolas, you have an opinion on this?).

> Would it be possible to add one more layer for weighted Cartan types? I mean my original motivation for this patch was to be able to produce diagrams for representation of homogeneous vector bundles which I can't really do now. :)

>
> I'd add this feature myself, but I am still struggling with understanding the current code. Is there some documentation for programmers or  design documents that would help me?

IMO we should do this in a follow-up ticket as this one has a lot going on to begin with. However it should be easy enough to do by adding a class/file similar to `type_marked.py` and another method to the base `CartanType_abstract` class.



---

archive/issue_comments_202218.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@tscrim](#comment:20):\n> Replying to [@vit-tucek](#comment:19):\n> > Is this feature discoverable by a user? Shouldn't we add some examples to `CartanType`'s docstring? \n\n> \n> Yes via `marked_nodes`. However we should add something to the doc of `CartanType` (I thought I did, but I guess not).\n\nWhile you are at it, there is a small typo in `type_marked.py`: substitute `latex_relabel` by `latex_marked` in in the docstring.\n\n> \n> > You've missed the bugfix for docstring regarding our convention for Dynkin diagrams (see commit 74c6d23eb28fd192b70e2219030d6ad60fcb9f0f).\n\n> \n> I'm not convinced yet that it is incorrect, much less that your proposal makes anything better. I will look at it more closely and think about it today/tomorrow (unless Dan or Nicolas, you have an opinion on this?).\n\nMost texts on Lie algebras I've encountered define the arrows by saying that they point from the shorter vector to the longer one (or vice versa). Dynkin diagrams are first and foremost convenient graphical representation (don't you agree?) and as such the \"direction of the arrow\" should naturally mean the direction in the graphical representation and not the way how we define it using Cartan matrix. I for one was quite confused by the current docs and had to dig up Bourbaki to check it.\n\n> \n> > Would it be possible to add one more layer for weighted Cartan types? I mean my original motivation for this patch was to be able to produce diagrams for representation of homogeneous vector bundles which I can't really do now. :)\n\n> >\n> > I'd add this feature myself, but I am still struggling with understanding the current code. Is there some documentation for programmers or  design documents that would help me?\n\n> \n> IMO we should do this in a follow-up ticket as this one has a lot going on to begin with. However it should be easy enough to do by adding a class/file similar to `type_marked.py` and another method to the base `CartanType_abstract` class.\n\nOK. I would have already tried that if it weren't for build failures that the rebasing on beta5 brought me. ;) As soon as I will get sage to build again I'm gonna give it a shot.",
    "created_at": "2014-04-04T16:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202218",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@tscrim](#comment:20):
> Replying to [@vit-tucek](#comment:19):
> > Is this feature discoverable by a user? Shouldn't we add some examples to `CartanType`'s docstring? 

> 
> Yes via `marked_nodes`. However we should add something to the doc of `CartanType` (I thought I did, but I guess not).

While you are at it, there is a small typo in `type_marked.py`: substitute `latex_relabel` by `latex_marked` in in the docstring.

> 
> > You've missed the bugfix for docstring regarding our convention for Dynkin diagrams (see commit 74c6d23eb28fd192b70e2219030d6ad60fcb9f0f).

> 
> I'm not convinced yet that it is incorrect, much less that your proposal makes anything better. I will look at it more closely and think about it today/tomorrow (unless Dan or Nicolas, you have an opinion on this?).

Most texts on Lie algebras I've encountered define the arrows by saying that they point from the shorter vector to the longer one (or vice versa). Dynkin diagrams are first and foremost convenient graphical representation (don't you agree?) and as such the "direction of the arrow" should naturally mean the direction in the graphical representation and not the way how we define it using Cartan matrix. I for one was quite confused by the current docs and had to dig up Bourbaki to check it.

> 
> > Would it be possible to add one more layer for weighted Cartan types? I mean my original motivation for this patch was to be able to produce diagrams for representation of homogeneous vector bundles which I can't really do now. :)

> >
> > I'd add this feature myself, but I am still struggling with understanding the current code. Is there some documentation for programmers or  design documents that would help me?

> 
> IMO we should do this in a follow-up ticket as this one has a lot going on to begin with. However it should be easy enough to do by adding a class/file similar to `type_marked.py` and another method to the base `CartanType_abstract` class.

OK. I would have already tried that if it weren't for build failures that the rebasing on beta5 brought me. ;) As soon as I will get sage to build again I'm gonna give it a shot.



---

archive/issue_comments_202219.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7768e7ed5a401ed8ea7d2c2ece56fbd9edf8fd4\">c7768e7</a></td><td><code>Merge branch 'develop' into public/combinat/root_systems/marked_types-15948</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69d92ad128755a6d091fea7681f82fa738b68057\">69d92ad</a></td><td><code>Merge branch 'develop' into public/combinat/root_systems/marked_types-15948</code></td></tr></table>\n",
    "created_at": "2014-04-09T01:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202219",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7768e7ed5a401ed8ea7d2c2ece56fbd9edf8fd4">c7768e7</a></td><td><code>Merge branch 'develop' into public/combinat/root_systems/marked_types-15948</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69d92ad128755a6d091fea7681f82fa738b68057">69d92ad</a></td><td><code>Merge branch 'develop' into public/combinat/root_systems/marked_types-15948</code></td></tr></table>




---

archive/issue_comments_202220.json:
```json
{
    "body": "Changed commit from **[`612db21`](https://github.com/sagemath/sagetrac-mirror/commit/612db215e7e89687f2dc5af38ce0915af16cc49a)** to **[`69d92ad`](https://github.com/sagemath/sagetrac-mirror/commit/69d92ad128755a6d091fea7681f82fa738b68057)**",
    "created_at": "2014-04-09T01:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202220",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`612db21`](https://github.com/sagemath/sagetrac-mirror/commit/612db215e7e89687f2dc5af38ce0915af16cc49a)** to **[`69d92ad`](https://github.com/sagemath/sagetrac-mirror/commit/69d92ad128755a6d091fea7681f82fa738b68057)**



---

archive/issue_events_227629.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227629"
}
```



---

archive/issue_events_227630.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227630"
}
```



---

archive/issue_comments_202221.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nMerge conflict.",
    "created_at": "2014-05-16T06:07:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202221",
    "user": "https://github.com/rwst"
}
```

<div id="comment:24" align="right">comment:24</div>

Merge conflict.



---

archive/issue_events_227631.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-16T06:07:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227631"
}
```



---

archive/issue_events_227632.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-16T06:07:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227632"
}
```



---

archive/issue_comments_202222.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cb7c38ddcd34ee8dea4b73e3f57c130f686861e\">8cb7c38</a></td><td><code>Merge branch 'public/combinat/root_systems/marked_types-15948' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da0fc02f12f34ffd77a9de71df136e2855229e10\">da0fc02</a></td><td><code>Fixed Dynkin diagram doc and typo.</code></td></tr></table>\n",
    "created_at": "2014-06-16T17:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202222",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cb7c38ddcd34ee8dea4b73e3f57c130f686861e">8cb7c38</a></td><td><code>Merge branch 'public/combinat/root_systems/marked_types-15948' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da0fc02f12f34ffd77a9de71df136e2855229e10">da0fc02</a></td><td><code>Fixed Dynkin diagram doc and typo.</code></td></tr></table>




---

archive/issue_comments_202223.json:
```json
{
    "body": "Changed commit from **[`69d92ad`](https://github.com/sagemath/sagetrac-mirror/commit/69d92ad128755a6d091fea7681f82fa738b68057)** to **[`da0fc02`](https://github.com/sagemath/sagetrac-mirror/commit/da0fc02f12f34ffd77a9de71df136e2855229e10)**",
    "created_at": "2014-06-16T17:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202223",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`69d92ad`](https://github.com/sagemath/sagetrac-mirror/commit/69d92ad128755a6d091fea7681f82fa738b68057)** to **[`da0fc02`](https://github.com/sagemath/sagetrac-mirror/commit/da0fc02f12f34ffd77a9de71df136e2855229e10)**



---

archive/issue_events_227633.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-06-16T17:46:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227633"
}
```



---

archive/issue_events_227634.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-06-16T17:46:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227634"
}
```



---

archive/issue_comments_202224.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw, V\u00edt Tu\u010dek**",
    "created_at": "2014-06-16T17:46:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202224",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw, Vít Tuček**



---

archive/issue_comments_202225.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHey Vit,\n\nSorry for falling behind on this.\n\nFor the Dynkin diagram documentation, I reread it and agree that the word *convention* could be misleading. I've tweaked that sentence, so how do you feel about it now?\n\nI've also fixed the merge conflicts and the typo. If everything is okay, then we can set this to positive review (as a cross review) and get onto the followups.\n\nBest,\n\nTravis",
    "created_at": "2014-06-16T17:46:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202225",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">comment:26</div>

Hey Vit,

Sorry for falling behind on this.

For the Dynkin diagram documentation, I reread it and agree that the word *convention* could be misleading. I've tweaked that sentence, so how do you feel about it now?

I've also fixed the merge conflicts and the typo. If everything is okay, then we can set this to positive review (as a cross review) and get onto the followups.

Best,

Travis



---

archive/issue_comments_202226.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\n**Ping**",
    "created_at": "2014-07-07T23:43:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202226",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:27" align="right">comment:27</div>

**Ping**



---

archive/issue_comments_202227.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nSince there's no response from Vit -- Dan or Nicolas (or someone else), could you do a final look over of my last commit da0fc02? It's the only thing we need in order to set this to positive review.",
    "created_at": "2014-07-27T04:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202227",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">comment:28</div>

Since there's no response from Vit -- Dan or Nicolas (or someone else), could you do a final look over of my last commit da0fc02? It's the only thing we need in order to set this to positive review.



---

archive/issue_comments_202228.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nHi,\n sorry, I was on vacation. \n\nThe sentence is much better now, but I think it would not harm to add another one ensuring the user that the (graphical representation of the) Dynkin diagram itself is the same as in Bourbaki. But maybe it's superfluous... Does Kac have the same diagrams as Bourbaki? If so, then adding more explanations to the docstring might actually lead to more confusion. :)",
    "created_at": "2014-07-27T09:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202228",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:29" align="right">comment:29</div>

Hi,
 sorry, I was on vacation. 

The sentence is much better now, but I think it would not harm to add another one ensuring the user that the (graphical representation of the) Dynkin diagram itself is the same as in Bourbaki. But maybe it's superfluous... Does Kac have the same diagrams as Bourbaki? If so, then adding more explanations to the docstring might actually lead to more confusion. :)



---

archive/issue_comments_202229.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nAFAIK, the diagrams are all the same (the long roots point towards the short and `0---0---0=<=0` is type C<sub>4</sub>), it's just translating that into the Cartan matrix that the convention can differ, which is what that paragraph is about. So I don't think we need to add anything more.",
    "created_at": "2014-07-27T22:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202229",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:30" align="right">comment:30</div>

AFAIK, the diagrams are all the same (the long roots point towards the short and `0---0---0=<=0` is type C<sub>4</sub>), it's just translating that into the Cartan matrix that the convention can differ, which is what that paragraph is about. So I don't think we need to add anything more.



---

archive/issue_comments_202230.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nGreat. Then I think that we can give this patch a positive review. I'm not sure what's the proper protocol here, so I'll leave that up to you. I've took the liberty and changed the name of the patch and its description.",
    "created_at": "2014-07-28T15:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202230",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:31" align="right">comment:31</div>

Great. Then I think that we can give this patch a positive review. I'm not sure what's the proper protocol here, so I'll leave that up to you. I've took the liberty and changed the name of the patch and its description.



---

archive/issue_comments_202231.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n-This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently without docstrings) so the data are actually used by latex.\n+This patch adds marked Dynkin diagrams and marked Cartan types. See\u00a0[#15948 comment:18](https://github.com/sagemath/sage/issues/15948#comment:18)\u00a0for details.\n \n-This convenient notation is used quite often in certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307\n+This convenient notation is used quite often in a certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307, and in Lie superalgebras, where markings denote the parity \u00a0of indices.\n \n Moreover, there are two small bugfixes:\n \n-1. Documentation is wrong about our convention for arrows in Dynkin diagrams.\n+1. Documentation is misleading about our convention for arrows in Dynkin diagrams. We do follow Bourbaki convention for graphics (which is apparently the same as in Kac), but not the convention for the underlying Cartan matrix.\n 2. Dynkin diagrams for D and E series contain a special character in the node name of tikzpicture which TeX doesn't like.\n``````\n",
    "created_at": "2014-07-28T15:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202231",
    "user": "https://github.com/vit-tucek"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
-This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently without docstrings) so the data are actually used by latex.
+This patch adds marked Dynkin diagrams and marked Cartan types. See [#15948 comment:18](https://github.com/sagemath/sage/issues/15948#comment:18) for details.
 
-This convenient notation is used quite often in certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307
+This convenient notation is used quite often in a certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307, and in Lie superalgebras, where markings denote the parity  of indices.
 
 Moreover, there are two small bugfixes:
 
-1. Documentation is wrong about our convention for arrows in Dynkin diagrams.
+1. Documentation is misleading about our convention for arrows in Dynkin diagrams. We do follow Bourbaki convention for graphics (which is apparently the same as in Kac), but not the convention for the underlying Cartan matrix.
 2. Dynkin diagrams for D and E series contain a special character in the node name of tikzpicture which TeX doesn't like.
``````




---

archive/issue_events_227635.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2014-07-28T15:59:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "title_is": "marked Dynkin diagrams",
    "title_was": "DynkinDiagram with crossed nodes and labels",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227635"
}
```



---

archive/issue_events_227636.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-28T16:57:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227636"
}
```



---

archive/issue_events_227637.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-28T16:57:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227637"
}
```



---

archive/issue_comments_202232.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nAll you'd need to do is set the ticket to positive review.",
    "created_at": "2014-07-28T16:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202232",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

All you'd need to do is set the ticket to positive review.



---

archive/issue_events_227638.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-28T21:58:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227638"
}
```



---

archive/issue_events_227639.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-28T21:58:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227639"
}
```



---

archive/issue_comments_202233.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nVarious doctests fail...",
    "created_at": "2014-07-28T21:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202233",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:33" align="right">comment:33</div>

Various doctests fail...



---

archive/issue_comments_202234.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05aa053dfbd7d785d6666ffb40177c89bae1d05b\">05aa053</a></td><td><code>Implemented basic_untwisted for marked affine types</code></td></tr></table>\n",
    "created_at": "2014-07-29T17:24:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202234",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05aa053dfbd7d785d6666ffb40177c89bae1d05b">05aa053</a></td><td><code>Implemented basic_untwisted for marked affine types</code></td></tr></table>




---

archive/issue_comments_202235.json:
```json
{
    "body": "Changed commit from **[`da0fc02`](https://github.com/sagemath/sagetrac-mirror/commit/da0fc02f12f34ffd77a9de71df136e2855229e10)** to **[`05aa053`](https://github.com/sagemath/sagetrac-mirror/commit/05aa053dfbd7d785d6666ffb40177c89bae1d05b)**",
    "created_at": "2014-07-29T17:24:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202235",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`da0fc02`](https://github.com/sagemath/sagetrac-mirror/commit/da0fc02f12f34ffd77a9de71df136e2855229e10)** to **[`05aa053`](https://github.com/sagemath/sagetrac-mirror/commit/05aa053dfbd7d785d6666ffb40177c89bae1d05b)**



---

archive/issue_comments_202236.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI'm taking care of this - the non-symmetric Macdonalds are strangely sensitive to the class heirarchy.",
    "created_at": "2014-07-29T17:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202236",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:35" align="right">comment:35</div>

I'm taking care of this - the non-symmetric Macdonalds are strangely sensitive to the class heirarchy.



---

archive/issue_comments_202237.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/674fabf705b099a15182eb8db0afd5b532081721\">674fabf</a></td><td><code>Merge branch 'public/combinat/root_systems/marked_types-15948' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17e64c5a02ee0d2705df87ec79b8e04ed92575b9\">17e64c5</a></td><td><code>Merge branch 'u/vbraun/improve_startup_time_of_libgap' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ce8285ed5975f4a0930322e4596aac1cfe5b1e6\">7ce8285</a></td><td><code>Added some better doctests and fixed type_marked ambient space.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66ad2bb82616a070deb91d14dadc4a3101e3a0a9\">66ad2bb</a></td><td><code>Removed type() from decorator which fixes tests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cfe9b8c4e0b494c661e7c761043d3cd859429da\">1cfe9b8</a></td><td><code>Merge branch 'public/combinat/root_systems/marked_types-15948' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr></table>\n",
    "created_at": "2014-07-29T17:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202237",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/674fabf705b099a15182eb8db0afd5b532081721">674fabf</a></td><td><code>Merge branch 'public/combinat/root_systems/marked_types-15948' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17e64c5a02ee0d2705df87ec79b8e04ed92575b9">17e64c5</a></td><td><code>Merge branch 'u/vbraun/improve_startup_time_of_libgap' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ce8285ed5975f4a0930322e4596aac1cfe5b1e6">7ce8285</a></td><td><code>Added some better doctests and fixed type_marked ambient space.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66ad2bb82616a070deb91d14dadc4a3101e3a0a9">66ad2bb</a></td><td><code>Removed type() from decorator which fixes tests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cfe9b8c4e0b494c661e7c761043d3cd859429da">1cfe9b8</a></td><td><code>Merge branch 'public/combinat/root_systems/marked_types-15948' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr></table>




---

archive/issue_comments_202238.json:
```json
{
    "body": "Changed commit from **[`05aa053`](https://github.com/sagemath/sagetrac-mirror/commit/05aa053dfbd7d785d6666ffb40177c89bae1d05b)** to **[`1cfe9b8`](https://github.com/sagemath/sagetrac-mirror/commit/1cfe9b8c4e0b494c661e7c761043d3cd859429da)**",
    "created_at": "2014-07-29T17:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202238",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`05aa053`](https://github.com/sagemath/sagetrac-mirror/commit/05aa053dfbd7d785d6666ffb40177c89bae1d05b)** to **[`1cfe9b8`](https://github.com/sagemath/sagetrac-mirror/commit/1cfe9b8c4e0b494c661e7c761043d3cd859429da)**



---

archive/issue_comments_202239.json:
```json
{
    "body": "Dependencies: **#16380**",
    "created_at": "2014-07-29T17:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202239",
    "user": "https://github.com/tscrim"
}
```

Dependencies: **#16380**



---

archive/issue_events_227640.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-29T17:56:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227640"
}
```



---

archive/issue_events_227641.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-29T17:56:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227641"
}
```



---

archive/issue_comments_202240.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nFixed - I had accidentally changed the behavior of `.type()` for dual types. I also merged in #16380 in order to speed up testing. I also fixed an issue with the ambient space for marked Cartan types and implemented the `basic_untwisted`. It needs another look-over.",
    "created_at": "2014-07-29T17:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202240",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:37" align="right">comment:37</div>

Fixed - I had accidentally changed the behavior of `.type()` for dual types. I also merged in #16380 in order to speed up testing. I also fixed an issue with the ambient space for marked Cartan types and implemented the `basic_untwisted`. It needs another look-over.



---

archive/issue_events_227642.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227642"
}
```



---

archive/issue_events_227643.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227643"
}
```



---

archive/issue_comments_202241.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI know you didn't introduce this bug, but could you by chance fix this to raise a proper exception?\n\n```\nsage: CartanType(['H',3]).dual()\n...\nAssertionError: \n```\n(note: I don't really care about this ticket, I just hate it when people abuse `assert`)",
    "created_at": "2014-10-01T08:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202241",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

I know you didn't introduce this bug, but could you by chance fix this to raise a proper exception?

```
sage: CartanType(['H',3]).dual()
...
AssertionError: 
```
(note: I don't really care about this ticket, I just hate it when people abuse `assert`)



---

archive/issue_comments_202242.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@jdemeyer](#comment:39):\n> I know you didn't introduce this bug, but could you by chance fix this to raise a proper exception?\n> \n> ```\n> sage: CartanType(['H',3]).dual()\n> ...\n> AssertionError: \n> ```\n> (note: I don't really care about this ticket, I just hate it when people abuse `assert`)\n\nI've created #17084 for this and will upload a branch there later today.",
    "created_at": "2014-10-01T18:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202242",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@jdemeyer](#comment:39):
> I know you didn't introduce this bug, but could you by chance fix this to raise a proper exception?
> 
> ```
> sage: CartanType(['H',3]).dual()
> ...
> AssertionError: 
> ```
> (note: I don't really care about this ticket, I just hate it when people abuse `assert`)

I've created #17084 for this and will upload a branch there later today.



---

archive/issue_comments_202243.json:
```json
{
    "body": "Changed commit from **[`1cfe9b8`](https://github.com/sagemath/sagetrac-mirror/commit/1cfe9b8c4e0b494c661e7c761043d3cd859429da)** to **[`bf5e867`](https://github.com/sagemath/sagetrac-mirror/commit/bf5e867266ab8ddb17e0be8c6e1cf619b266b10e)**",
    "created_at": "2014-11-06T02:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202243",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1cfe9b8`](https://github.com/sagemath/sagetrac-mirror/commit/1cfe9b8c4e0b494c661e7c761043d3cd859429da)** to **[`bf5e867`](https://github.com/sagemath/sagetrac-mirror/commit/bf5e867266ab8ddb17e0be8c6e1cf619b266b10e)**



---

archive/issue_comments_202244.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf5e867266ab8ddb17e0be8c6e1cf619b266b10e\">bf5e867</a></td><td><code>Merge branch 'public/combinat/root_systems/marked_types-15948' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr></table>\n",
    "created_at": "2014-11-06T02:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202244",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf5e867266ab8ddb17e0be8c6e1cf619b266b10e">bf5e867</a></td><td><code>Merge branch 'public/combinat/root_systems/marked_types-15948' of trac.sagemath.org:sage into public/combinat/root_systems/marked_types-15948</code></td></tr></table>




---

archive/issue_comments_202245.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nRebased. Could someone do the last little bit of review of commits 7ce8285 and 66ad2bb?",
    "created_at": "2014-11-06T03:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202245",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:42" align="right">comment:42</div>

Rebased. Could someone do the last little bit of review of commits 7ce8285 and 66ad2bb?



---

archive/issue_comments_202246.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThanks for keeping this branch alive!\n\nI've tried to doctest this on cloud.sagemath.org and it behaves rather strangely. The parallel doctests (e.g. ./sage -tp 12 src/sage/combinat/root_system/) run just fine but when I try to doctest a single file such as ./sage -t src/sage/combinat/root_system/cartan_type.py it spews\n\n```\n7 items had failures:\n   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_abstract._ascii_art_node\n   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_abstract._latex_draw_node\n   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_abstract.marked_nodes\n   1 of   5 in sage.combinat.root_system.cartan_type.CartanType_affine._ascii_art_node\n   1 of   4 in sage.combinat.root_system.cartan_type.CartanType_affine._latex_draw_node\n   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_crystallographic.i\n   2 of   3 in sage.combinat.root_system.cartan_type.CartanType_crystallographic.index_set_bipartition\n    [432 tests, 8 failures, 1.89 s]\n```\nwith errors such as\n\n```\n\u00a0 \u00a0 AttributeError:\u00a0'CartanType_with_superclass'\u00a0object\u00a0has\u00a0no\u00a0attribute\u00a0'_ascii_art_node'\n```\nI guess I must be doing something wrong.",
    "created_at": "2014-11-08T01:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202246",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:43" align="right">comment:43</div>

Thanks for keeping this branch alive!

I've tried to doctest this on cloud.sagemath.org and it behaves rather strangely. The parallel doctests (e.g. ./sage -tp 12 src/sage/combinat/root_system/) run just fine but when I try to doctest a single file such as ./sage -t src/sage/combinat/root_system/cartan_type.py it spews

```
7 items had failures:
   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_abstract._ascii_art_node
   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_abstract._latex_draw_node
   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_abstract.marked_nodes
   1 of   5 in sage.combinat.root_system.cartan_type.CartanType_affine._ascii_art_node
   1 of   4 in sage.combinat.root_system.cartan_type.CartanType_affine._latex_draw_node
   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_crystallographic.i
   2 of   3 in sage.combinat.root_system.cartan_type.CartanType_crystallographic.index_set_bipartition
    [432 tests, 8 failures, 1.89 s]
```
with errors such as

```
    AttributeError: 'CartanType_with_superclass' object has no attribute '_ascii_art_node'
```
I guess I must be doing something wrong.



---

archive/issue_comments_202247.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nHmmm...that's very strange. I tested the single files on my machine and it works okay. Unfortunately I don't know enough about how SMC does things to be able to help (which might be based on your specific config). Even stranger is that I don't think I changed anything that would cause such a failure. Since it passes in parallel, I'm tempted to say it's based on your current setup, but let me see the full output from the test.",
    "created_at": "2014-11-08T01:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202247",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:44" align="right">comment:44</div>

Hmmm...that's very strange. I tested the single files on my machine and it works okay. Unfortunately I don't know enough about how SMC does things to be able to help (which might be based on your specific config). Even stranger is that I don't think I changed anything that would cause such a failure. Since it passes in parallel, I'm tempted to say it's based on your current setup, but let me see the full output from the test.



---

archive/issue_comments_202248.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nActually, it seems I've just forgotten `./` in front of `sage`.  Sorry!",
    "created_at": "2014-11-10T17:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202248",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:45" align="right">comment:45</div>

Actually, it seems I've just forgotten `./` in front of `sage`.  Sorry!



---

archive/issue_events_227644.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2014-11-10T17:48:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227644"
}
```



---

archive/issue_events_227645.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2014-11-10T17:48:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227645"
}
```



---

archive/issue_comments_202249.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nThank you for your work on this!",
    "created_at": "2014-11-10T22:22:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202249",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:46" align="right">comment:46</div>

Thank you for your work on this!



---

archive/issue_comments_202250.json:
```json
{
    "body": "Changed branch from **[public/combinat/root_systems/marked_types-15948](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/root_systems/marked_types-15948)** to **[`bf5e867`](https://github.com/sagemath/sagetrac-mirror/commit/bf5e867266ab8ddb17e0be8c6e1cf619b266b10e)**",
    "created_at": "2014-11-14T21:01:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15948#issuecomment-202250",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/root_systems/marked_types-15948](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/root_systems/marked_types-15948)** to **[`bf5e867`](https://github.com/sagemath/sagetrac-mirror/commit/bf5e867266ab8ddb17e0be8c6e1cf619b266b10e)**



---

archive/issue_events_227646.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-14T21:01:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227646"
}
```



---

archive/issue_events_227647.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "37a60572f0a06c63955e162ec110f92120a5de59",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-11-14T21:01:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15948",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15948#event-227647"
}
```
