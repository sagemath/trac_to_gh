# Issue 15087: directory for foreign package environment

archive/issues_014850.json:
```json
{
    "assignees": [],
    "body": "Sometimes, foreign packages need to manipulate environment. this looks impossible right now.\n\nIt would be much better to have a directory, where packages may put environment snippets. On sage (the distribution) it makes sense to use `$SAGE_ETC/env.d` and set `SAGE_ETC` to `$SAGE_LOCAL/etc`.\n\nCC:  @jondo @dimpase\n\nBranch/Commit: **[u/felixs/env_d](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/env_d) @ [`fdf7a92`](https://github.com/sagemath/sagetrac-mirror/commit/fdf7a9218962c73e1ceb761a85e93e00754d912d)**\n\nAuthor: **Felix Salfelder**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15087_\n\n",
    "closed_at": "2020-01-16T14:24:28Z",
    "created_at": "2013-08-23T15:26:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "directory for foreign package environment",
    "type": "issue",
    "updated_at": "2020-01-16T14:24:28Z",
    "url": "https://github.com/sagemath/sage/issues/15087",
    "user": "https://github.com/sagetrac-felixs"
}
```
Sometimes, foreign packages need to manipulate environment. this looks impossible right now.

It would be much better to have a directory, where packages may put environment snippets. On sage (the distribution) it makes sense to use `$SAGE_ETC/env.d` and set `SAGE_ETC` to `$SAGE_LOCAL/etc`.

CC:  @jondo @dimpase

Branch/Commit: **[u/felixs/env_d](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/env_d) @ [`fdf7a92`](https://github.com/sagemath/sagetrac-mirror/commit/fdf7a9218962c73e1ceb761a85e93e00754d912d)**

Author: **Felix Salfelder**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/15087_





---

archive/issue_events_215160.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-08-23T15:26:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215160"
}
```



---

archive/issue_events_215161.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-08-23T15:26:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215161"
}
```



---

archive/issue_events_215162.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-08-23T15:26:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215162"
}
```



---

archive/issue_events_215163.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-08-23T15:26:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215163"
}
```



---

archive/issue_comments_185275.json:
```json
{
    "body": "Branch: **[u/felixs/env_d](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/env_d)**",
    "created_at": "2013-08-23T15:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15087#issuecomment-185275",
    "user": "https://github.com/sagetrac-felixs"
}
```

Branch: **[u/felixs/env_d](https://github.com/sagemath/sagetrac-mirror/tree/u/felixs/env_d)**



---

archive/issue_events_215164.json:
```json
{
    "actor": "https://github.com/sagetrac-felixs",
    "created_at": "2013-08-23T15:28:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215164"
}
```



---

archive/issue_comments_185276.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWe probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...",
    "created_at": "2013-12-05T20:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15087#issuecomment-185276",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...



---

archive/issue_comments_185277.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@vbraun](#comment:3):\n> We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...\n\ni agree that `/etc/env.d` does not look very useful. but first of all, packages (spkgs) are (supposedly) not required for system installation involving `/etc`. secondly `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).\n\nstandalone sagelib-into-system installations (e.g. prefix=/usr) are meant to be configured explicitly using --with-sysconfdir=/etc/sage (common practice).\n\ni am aware that sage does not define a prefix, which makes me assume that installation is not implemented in a useful way (yet?) -- YMMV. more workarounds may be required...",
    "created_at": "2013-12-06T13:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15087#issuecomment-185277",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@vbraun](#comment:3):
> We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...

i agree that `/etc/env.d` does not look very useful. but first of all, packages (spkgs) are (supposedly) not required for system installation involving `/etc`. secondly `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).

standalone sagelib-into-system installations (e.g. prefix=/usr) are meant to be configured explicitly using --with-sysconfdir=/etc/sage (common practice).

i am aware that sage does not define a prefix, which makes me assume that installation is not implemented in a useful way (yet?) -- YMMV. more workarounds may be required...



---

archive/issue_comments_185278.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@sagetrac-felixs](#comment:4):\n> `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).\n\nWell `/usr/local/etc/env.d` doesn't sound like a particularly good place either...",
    "created_at": "2013-12-06T20:21:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15087#issuecomment-185278",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@sagetrac-felixs](#comment:4):
> `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).

Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either...



---

archive/issue_comments_185279.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@vbraun](#comment:5):\n> Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either... \n\nindeed, maybe it's not a good idea to choose /usr/local as the prefix (i.e. for sage the distibution). but it's consistent.\n\nfinally it's the question how much you dislike redundant paths like `$HOME/sage-xyz/etc/sage` `/opt/sage/etc/sage` or `/tmp/sage/etc/sage`. i expect that `/opt/sage` will be the most common case for a prefix eventually, the situation looks very close to http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/opt.html...",
    "created_at": "2013-12-06T21:18:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15087#issuecomment-185279",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@vbraun](#comment:5):
> Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either... 

indeed, maybe it's not a good idea to choose /usr/local as the prefix (i.e. for sage the distibution). but it's consistent.

finally it's the question how much you dislike redundant paths like `$HOME/sage-xyz/etc/sage` `/opt/sage/etc/sage` or `/tmp/sage/etc/sage`. i expect that `/opt/sage` will be the most common case for a prefix eventually, the situation looks very close to http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/opt.html...



---

archive/issue_events_215165.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-29T18:16:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215165"
}
```



---

archive/issue_events_215166.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-29T18:16:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215166"
}
```



---

archive/issue_comments_185280.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nNeeds to be rebased.",
    "created_at": "2013-12-29T18:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15087#issuecomment-185280",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Needs to be rebased.



---

archive/issue_events_215167.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215167"
}
```



---

archive/issue_events_215168.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215168"
}
```



---

archive/issue_events_215169.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215169"
}
```



---

archive/issue_events_215170.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215170"
}
```



---

archive/issue_events_215171.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215171"
}
```



---

archive/issue_events_215172.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215172"
}
```



---

archive/issue_events_215173.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T23:52:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215173"
}
```



---

archive/issue_events_215174.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T23:52:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215174"
}
```



---

archive/issue_events_215175.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T23:52:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215175"
}
```



---

archive/issue_events_215176.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T23:52:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215176"
}
```



---

archive/issue_events_215177.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T23:52:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "c6c6c6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215177"
}
```



---

archive/issue_comments_185281.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nPackages can now set environment variables by means of the `spkg-configure.m4` mechanism, and old-style (out-of-tree) packages have been eliminated. So this ticket can be closed as outdated.",
    "created_at": "2020-01-15T23:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15087#issuecomment-185281",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Packages can now set environment variables by means of the `spkg-configure.m4` mechanism, and old-style (out-of-tree) packages have been eliminated. So this ticket can be closed as outdated.



---

archive/issue_events_215178.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-16T11:25:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215178"
}
```



---

archive/issue_events_215179.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-16T11:25:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215179"
}
```



---

archive/issue_events_215180.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-01-16T14:24:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215180"
}
```



---

archive/issue_events_215181.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-01-16T14:24:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15087",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15087#event-215181"
}
```
