# Issue 15087: directory for foreign package environment

archive/issues_014850.json:
```json
{
    "body": "Sometimes, foreign packages need to manipulate environment. this looks impossible right now.\n\nIt would be much better to have a directory, where packages may put environment snippets. On sage (the distribution) it makes sense to use `$SAGE_ETC/env.d` and set `SAGE_ETC` to `$SAGE_LOCAL/etc`.\n\nCC:  @jondo @dimpase\n\nAuthor: Felix Salfelder\n\nBranch: u/felixs/env_d\n\nCommit: fdf7a9218962c73e1ceb761a85e93e00754d912d\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/15087\n\n",
    "closed_at": "2020-01-16T14:24:28Z",
    "created_at": "2013-08-23T15:26:02Z",
    "labels": [
        "component: scripts"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "directory for foreign package environment",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15087",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```
Sometimes, foreign packages need to manipulate environment. this looks impossible right now.

It would be much better to have a directory, where packages may put environment snippets. On sage (the distribution) it makes sense to use `$SAGE_ETC/env.d` and set `SAGE_ETC` to `$SAGE_LOCAL/etc`.

CC:  @jondo @dimpase

Author: Felix Salfelder

Branch: u/felixs/env_d

Commit: fdf7a9218962c73e1ceb761a85e93e00754d912d

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/15087





---

archive/issue_comments_237741.json:
```json
{
    "body": "Changing branch from \"\" to \"u/felixs/env_d\"",
    "created_at": "2013-08-23T15:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237741",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

Changing branch from "" to "u/felixs/env_d"



---

archive/issue_comments_237742.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-23T15:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237742",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_237743.json:
```json
{
    "body": "<a id='comment:3'></a>\nWe probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...",
    "created_at": "2013-12-05T20:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237743",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...



---

archive/issue_comments_237744.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [vbraun](#comment%3A3):\n> We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...\n\n\ni agree that `/etc/env.d` does not look very useful. but first of all, packages (spkgs) are (supposedly) not required for system installation involving `/etc`. secondly `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).\n\nstandalone sagelib-into-system installations (e.g. prefix=/usr) are meant to be configured explicitly using --with-sysconfdir=/etc/sage (common practice).\n\ni am aware that sage does not define a prefix, which makes me assume that installation is not implemented in a useful way (yet?) -- YMMV. more workarounds may be required...",
    "created_at": "2013-12-06T13:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237744",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:4'></a>
Replying to [vbraun](#comment%3A3):
> We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...


i agree that `/etc/env.d` does not look very useful. but first of all, packages (spkgs) are (supposedly) not required for system installation involving `/etc`. secondly `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).

standalone sagelib-into-system installations (e.g. prefix=/usr) are meant to be configured explicitly using --with-sysconfdir=/etc/sage (common practice).

i am aware that sage does not define a prefix, which makes me assume that installation is not implemented in a useful way (yet?) -- YMMV. more workarounds may be required...



---

archive/issue_comments_237745.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [felixs](#comment%3A4):\n> `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).\n\n\nWell `/usr/local/etc/env.d` doesn't sound like a particularly good place either...",
    "created_at": "2013-12-06T20:21:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237745",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>
Replying to [felixs](#comment%3A4):
> `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).


Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either...



---

archive/issue_comments_237746.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [vbraun](#comment%3A5):\n> Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either... \n\n\nindeed, maybe it's not a good idea to choose /usr/local as the prefix (i.e. for sage the distibution). but it's consistent.\n\nfinally it's the question how much you dislike redundant paths like `$HOME/sage-xyz/etc/sage` `/opt/sage/etc/sage` or `/tmp/sage/etc/sage`. i expect that `/opt/sage` will be the most common case for a prefix eventually, the situation looks very close to http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/opt.html...",
    "created_at": "2013-12-06T21:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237746",
    "user": "https://trac.sagemath.org/admin/accounts/users/felixs"
}
```

<a id='comment:6'></a>
Replying to [vbraun](#comment%3A5):
> Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either... 


indeed, maybe it's not a good idea to choose /usr/local as the prefix (i.e. for sage the distibution). but it's consistent.

finally it's the question how much you dislike redundant paths like `$HOME/sage-xyz/etc/sage` `/opt/sage/etc/sage` or `/tmp/sage/etc/sage`. i expect that `/opt/sage` will be the most common case for a prefix eventually, the situation looks very close to http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/opt.html...



---

archive/issue_comments_237747.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-12-29T18:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237747",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_237748.json:
```json
{
    "body": "<a id='comment:7'></a>\nNeeds to be rebased.",
    "created_at": "2013-12-29T18:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237748",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Needs to be rebased.



---

archive/issue_events_043413.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15087#event-43413"
}
```



---

archive/issue_events_043414.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15087#event-43414"
}
```



---

archive/issue_events_043415.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15087#event-43415"
}
```



---

archive/issue_events_043416.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15087#event-43416"
}
```



---

archive/issue_events_043417.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15087#event-43417"
}
```



---

archive/issue_comments_237749.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-01-15T23:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237749",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_043418.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T23:52:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15087#event-43418"
}
```



---

archive/issue_events_043419.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T23:52:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15087#event-43419"
}
```



---

archive/issue_comments_237750.json:
```json
{
    "body": "<a id='comment:11'></a>\nPackages can now set environment variables by means of the `spkg-configure.m4` mechanism, and old-style (out-of-tree) packages have been eliminated. So this ticket can be closed as outdated.",
    "created_at": "2020-01-15T23:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237750",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Packages can now set environment variables by means of the `spkg-configure.m4` mechanism, and old-style (out-of-tree) packages have been eliminated. So this ticket can be closed as outdated.



---

archive/issue_comments_237751.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-01-16T11:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237751",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_043420.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-01-16T14:24:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15087#event-43420"
}
```



---

archive/issue_comments_237752.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-01-16T14:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15087#issuecomment-237752",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid
