# Issue 15365: Let MPIR build without C++ support on Cygwin

archive/issues_015128.json:
```json
{
    "body": "GMP/MPIR used to include a hack to configure faster.\nThis makes GMP/MPIR build badly on cygwin when C++ support is disabled and is not needed anymore anyway.\nSee:\n* https://sourceware.org/ml/cygwin/2013-06/msg00580.html\nThe spkg here backports a fix from:\n* https://github.com/wbhart/mpir/commit/2320c7d965e3277fddaf2390fdf7032d34954c8c\n\nUse git branch.\n\nCC:  @kcrisman @dimpase\n\nKeywords: mpir spkg cygwin\n\nBranch: [u/jpflori/ticket/15365](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15365)\n\nCommit: [f09bc424bc19d6f6cc1b1d1c5718d99ce6d739eb](https://github.com/sagemath/sagetrac-mirror/commit/f09bc424bc19d6f6cc1b1d1c5718d99ce6d739eb)\n\nUpstream: Fixed upstream, but not in a stable release.\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jean-Pierre Flori\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15365\n\n",
    "closed_at": "2014-01-18T04:46:06Z",
    "created_at": "2013-11-06T20:19:25Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.1",
    "title": "Let MPIR build without C++ support on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15365",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
GMP/MPIR used to include a hack to configure faster.
This makes GMP/MPIR build badly on cygwin when C++ support is disabled and is not needed anymore anyway.
See:
* https://sourceware.org/ml/cygwin/2013-06/msg00580.html
The spkg here backports a fix from:
* https://github.com/wbhart/mpir/commit/2320c7d965e3277fddaf2390fdf7032d34954c8c

Use git branch.

CC:  @kcrisman @dimpase

Keywords: mpir spkg cygwin

Branch: [u/jpflori/ticket/15365](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/15365)

Commit: [f09bc424bc19d6f6cc1b1d1c5718d99ce6d739eb](https://github.com/sagemath/sagetrac-mirror/commit/f09bc424bc19d6f6cc1b1d1c5718d99ce6d739eb)

Upstream: Fixed upstream, but not in a stable release.

Reviewer: Travis Scrimshaw

Author: Jean-Pierre Flori

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15365





---

archive/issue_comments_248966.json:
```json
{
    "body": "Attachment [mpir-2.6.0.p4.diff](tarball://root/attachments/some-uuid/ticket15365/mpir-2.6.0.p4.diff) by jpflori created at 2013-11-06 20:22:01\n\nSpkg diff, for review only.",
    "created_at": "2013-11-06T20:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248966",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [mpir-2.6.0.p4.diff](tarball://root/attachments/some-uuid/ticket15365/mpir-2.6.0.p4.diff) by jpflori created at 2013-11-06 20:22:01

Spkg diff, for review only.



---

archive/issue_comments_248967.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-11-06T20:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248967",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_248968.json:
```json
{
    "body": "Changing keywords from \"\" to \"mpir spkg cygwin\".",
    "created_at": "2013-11-06T20:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248968",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing keywords from "" to "mpir spkg cygwin".



---

archive/issue_comments_248969.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Fixed upstream, but not in a stable release.\"",
    "created_at": "2013-11-06T20:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248969",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing upstream from "N/A" to "Fixed upstream, but not in a stable release."



---

archive/issue_comments_248970.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-11-08T10:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248970",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_248971.json:
```json
{
    "body": "<a id='comment:3'></a>\n`configure.in` should be patched **before** `configure` (i.e. reorder the patches in the patch file).",
    "created_at": "2013-11-08T10:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248971",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
`configure.in` should be patched **before** `configure` (i.e. reorder the patches in the patch file).



---

archive/issue_comments_248972.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n GMP/MPIR used to include a hack to configure faster.\n-This makes is build badly on cygwin when C++ support is disabled.\n-The spkg here backports a fix from https://github.com/wbhart/mpir/commit/2320c7d965e3277fddaf2390fdf7032d34954c8c\n+This makes GMP/MPIR build badly on cygwin when C++ support is disabled and is not needed anymore anyway.\n+See:\n+* https://sourceware.org/ml/cygwin/2013-06/msg00580.html\n+The spkg here backports a fix from:\n+* https://github.com/wbhart/mpir/commit/2320c7d965e3277fddaf2390fdf7032d34954c8c\n \n Use spkg at:\n * http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p4.spkg\n``````\n",
    "created_at": "2013-11-08T10:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248972",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
 GMP/MPIR used to include a hack to configure faster.
-This makes is build badly on cygwin when C++ support is disabled.
-The spkg here backports a fix from https://github.com/wbhart/mpir/commit/2320c7d965e3277fddaf2390fdf7032d34954c8c
+This makes GMP/MPIR build badly on cygwin when C++ support is disabled and is not needed anymore anyway.
+See:
+* https://sourceware.org/ml/cygwin/2013-06/msg00580.html
+The spkg here backports a fix from:
+* https://github.com/wbhart/mpir/commit/2320c7d965e3277fddaf2390fdf7032d34954c8c
 
 Use spkg at:
 * http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p4.spkg
``````




---

archive/issue_comments_248973.json:
```json
{
    "body": "<a id='comment:4'></a>\nFixed (in the spkg, no new diff).",
    "created_at": "2013-11-08T10:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248973",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>
Fixed (in the spkg, no new diff).



---

archive/issue_comments_248974.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-11-08T10:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248974",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_248975.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [jdemeyer](#comment%3A3):\n> `configure.in` should be patched **before** `configure` (i.e. reorder the patches in the patch file).\n\nI'd even say `configure` must be patched after an `autoconf` run...",
    "created_at": "2013-11-08T10:41:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248975",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
Replying to [jdemeyer](#comment%3A3):
> `configure.in` should be patched **before** `configure` (i.e. reorder the patches in the patch file).

I'd even say `configure` must be patched after an `autoconf` run...



---

archive/issue_comments_248976.json:
```json
{
    "body": "<a id='comment:6'></a>\nI more or less patched configure.in and ran autoconf (not autoreconf because even with Jeroen very nice spkg the diff was too large, and might even have failed if I remember correctly, GMP/MPIR autotools scripts are old and quite dirty, but also very smart for other things) to get this.\n\nAs this should only be temporary (this will be hopefully in the next MPIR release where a lot of other patches from the spkg, all of them I even think, are integrated), I also removed all superfluous changes made by autoconf (whic sometimes insists on adding a space here and there and so on).\n\nI did not patch both files by hand.",
    "created_at": "2013-11-08T10:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248976",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>
I more or less patched configure.in and ran autoconf (not autoreconf because even with Jeroen very nice spkg the diff was too large, and might even have failed if I remember correctly, GMP/MPIR autotools scripts are old and quite dirty, but also very smart for other things) to get this.

As this should only be temporary (this will be hopefully in the next MPIR release where a lot of other patches from the spkg, all of them I even think, are integrated), I also removed all superfluous changes made by autoconf (whic sometimes insists on adding a space here and there and so on).

I did not patch both files by hand.



---

archive/issue_comments_248977.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,5 +5,4 @@\n The spkg here backports a fix from:\n * https://github.com/wbhart/mpir/commit/2320c7d965e3277fddaf2390fdf7032d34954c8c\n \n-Use spkg at:\n-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p4.spkg\n+Use git branch.\n``````\n",
    "created_at": "2013-12-25T20:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248977",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,5 +5,4 @@
 The spkg here backports a fix from:
 * https://github.com/wbhart/mpir/commit/2320c7d965e3277fddaf2390fdf7032d34954c8c
 
-Use spkg at:
-* http://boxen.math.washington.edu/home/jpflori/spkg/mpir-2.6.0.p4.spkg
+Use git branch.
``````




---

archive/issue_comments_248978.json:
```json
{
    "body": "<a id='comment:7'></a>\nNew commits:\n|                                                                                                         |                                               |\n|---------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[f09bc42](https://github.com/sagemath/sagetrac-mirror/commit/f09bc42)|`Let MPIR build without C++ support on Cygwin.`|",
    "created_at": "2013-12-25T20:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248978",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
New commits:
|                                                                                                         |                                               |
|---------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[f09bc42](https://github.com/sagemath/sagetrac-mirror/commit/f09bc42)|`Let MPIR build without C++ support on Cygwin.`|



---

archive/issue_comments_248979.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jpflori/ticket/15365\"",
    "created_at": "2013-12-25T20:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248979",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing branch from "" to "u/jpflori/ticket/15365"



---

archive/issue_comments_248980.json:
```json
{
    "body": "Changing commit from \"\" to \"f09bc424bc19d6f6cc1b1d1c5718d99ce6d739eb\"",
    "created_at": "2013-12-25T20:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248980",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing commit from "" to "f09bc424bc19d6f6cc1b1d1c5718d99ce6d739eb"



---

archive/issue_comments_248981.json:
```json
{
    "body": "<a id='comment:8'></a>\nI just tried to compile on cygwin64 with the current branch and it failed with the following:\n\n```\nTravis@Travis-Notebook ~/sage\n$ make\ncd build && \\\n\"../build/pipestatus\" \\\n        \"env SAGE_PARALLEL_SPKG_BUILD='' ./install all 2>&1\" \\\n        \"tee -a ../logs/install.log\"\n*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***\n!::=::\\\n_=/usr/bin/env\nALLUSERSPROFILE=C:\\ProgramData\nANDROID_NDK_PATH=C:\\Users\\Travis\\Documents\\Android\\ndk\\android-ndk-r8d\nAPPDATA=C:\\Users\\Travis\\AppData\\Roaming\nCLASSPATH=.;C:\\Program Files (x86)\\Java\\jre6\\lib\\ext\\QTJava.zip\nCommonProgramFiles(x86)=C:\\Program Files (x86)\\Common Files\nCOMMONPROGRAMFILES=C:\\Program Files\\Common Files\nCOMPUTERNAME=TRAVIS-NOTEBOOK\nCOMSPEC=C:\\Windows\\system32\\cmd.exe\nDFSTRACINGON=FALSE\nFP_NO_HOST_CHECK=NO\nGTK_BASEPATH=C:\\Program Files (x86)\\GtkSharp\\2.12\\\nHOME=/home/Travis\nHOMEDRIVE=C:\nHOMEPATH=\\Users\\Travis\nHOSTNAME=Travis-Notebook\nINFOPATH=/usr/local/info:/usr/share/info:/usr/info:\nLANG=en_US.UTF-8\nLOCALAPPDATA=C:\\Users\\Travis\\AppData\\Local\nLOGONSERVER=\\\\TRAVIS-NOTEBOOK\nMAKE=make\nMAKEFLAGS=\nMAKELEVEL=1\nMANPATH=/usr/local/man:/usr/share/man:/usr/man::/usr/ssl/man\nMFLAGS=\nNUMBER_OF_PROCESSORS=2\nOS=Windows_NT\nPATH=/home/Travis/sage/src/bin:/home/Travis/sage/local/bin:/usr/local/bin:/usr/bin:/cygdrive/c/Program Files/MiKTeX 2.9/miktex/bin/x64:/cygdrive/c/Qt/2010.04/mingw/bin:/cygdrive/c/Program Files (x86)/CMake 2.8/bin:/cygdrive/c/Program Files (x86)/LLNL/VisIt 2.1.0:/cygdrive/c/Windows/system32:/cygdrive/c/Windows:/cygdrive/c/Windows/System32/Wbem:/cygdrive/c/PROGRA~2/COMMON~1/ULEADS~1/MPEG:/cygdrive/c/Program Files/Intel/WiFi/bin:/cygdrive/c/Program Files (x86)/Common Files/DivX Shared:/cygdrive/c/altera/91/quartus/bin:/cygdrive/c/Program Files (x86)/Autodesk/Backburner:/cygdrive/c/Program Files/Common Files/Autodesk Shared:/cygdrive/c/Program Files (x86)/TortoiseSVN/bin:/cygdrive/c/Program Files/TortoiseHg:/cygdrive/c/Program Files (x86)/QuickTime/QTSystem:/cygdrive/c/Program Files/TortoiseGit/bin:/cygdrive/c/Program Files (x86)/GtkSharp/2.12/bin:/usr/lib/lapack\nPATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC\nPRINTER=Adobe PDF\nPROCESSOR_ARCHITECTURE=AMD64\nPROCESSOR_IDENTIFIER=Intel64 Family 6 Model 23 Stepping 10, GenuineIntel\nPROCESSOR_LEVEL=6\nPROCESSOR_REVISION=170a\nProgramData=C:\\ProgramData\nProgramFiles(x86)=C:\\Program Files (x86)\nPROGRAMFILES=C:\\Program Files\nPUBLIC=C:\\Users\\Public\nPWD=/home/Travis/sage/build\nPYTHONPATH=/home/Travis/sage/local\nQTJAVA=C:\\Program Files (x86)\\Java\\jre6\\lib\\ext\\QTJava.zip\nQUARTUS_ROOTDIR=c:\\altera\\91\\quartus\nSAGE_EXTCODE=/home/Travis/sage/local/share/sage/ext\nSAGE_LOCAL=/home/Travis/sage/local\nSAGE_LOGS=/home/Travis/sage/logs/pkgs\nSAGE_PARALLEL_SPKG_BUILD=\nSAGE_ROOT=/home/Travis/sage\nSAGE_SPKG_INST=/home/Travis/sage/local/var/lib/sage/installed\nSAGE_SRC=/home/Travis/sage/src\nSAGE_VERSION=6.1.beta2\nSESSIONNAME=Console\nSHELL=/bin/bash\nSHLVL=4\nSYSTEMDRIVE=C:\nSYSTEMROOT=C:\\Windows\nTEMP=/tmp\ntemp=C:\\Users\\Travis\\AppData\\Local\\Temp\nTERM=xterm\nTEXMFCACHE=C:\\ProgramData\\MiKTeX\\2.9\nTMP=/tmp\ntmp=C:\\Users\\Travis\\AppData\\Local\\Temp\nTRACE_FORMAT_SEARCH_PATH=\\\\NTREL202.ntdev.corp.microsoft.com\\34FB5F65-FFEB-4B61-BF0E-A6A76C450FAA\\TraceFormat\nTZ=America/Los_Angeles\nUSER=Travis\nUSERDOMAIN=Travis-Notebook\nUSERNAME=Travis\nUSERPROFILE=C:\\Users\\Travis\nVBOX_INSTALL_PATH=C:\\Program Files\\Oracle\\VirtualBox\\\nWINDIR=C:\\Windows\n***********************************************\nmake[1]: Entering directory '/home/Travis/sage/build'\nmake base\nmake[2]: Entering directory '/home/Travis/sage/build'\nmake[2]: Nothing to be done for 'base'.\nmake[2]: Leaving directory '/home/Travis/sage/build'\nenv SAGE_BUILD_TOOLCHAIN=yes make toolchain\nmake[2]: Entering directory '/home/Travis/sage/build'\nmake[2]: Nothing to be done for 'toolchain'.\nmake[2]: Leaving directory '/home/Travis/sage/build'\nmake toolchain-deps\nmake[2]: Entering directory '/home/Travis/sage/build'\nmake /home/Travis/sage/local/var/lib/sage/installed/zlib-1.2.8.p0\nmake[3]: Entering directory '/home/Travis/sage/build'\nmake[3]: '/home/Travis/sage/local/var/lib/sage/installed/zlib-1.2.8.p0' is up to date.\nmake[3]: Leaving directory '/home/Travis/sage/build'\nmake /home/Travis/sage/local/var/lib/sage/installed/mpir-2.6.0.p4\nmake[3]: Entering directory '/home/Travis/sage/build'\n/home/Travis/sage/build/pipestatus \"sage-spkg ${SAGE_SPKG_OPTS} mpir-2.6.0.p4 2>&1\" \"tee -a /home/Travis/sage/logs/pkgs/mpir-2.6.0.p4.log\"\nFound local metadata for mpir-2.6.0.p4\nFound local sources at /home/Travis/sage/upstream/mpir-2.6.0.tar.bz2\nChecksum: a9fbfe30db672939abab06d16ce48087ee1b0d01 vs a9fbfe30db672939abab06d16ce48087ee1b0d01\nmpir-2.6.0.p4\n====================================================\nSetting up build directory for mpir-2.6.0.p4\nFinished set up\n****************************************************\nHost system:\nCYGWIN_NT-6.0 Travis-Notebook 1.7.27(0.271/5/3) 2013-12-09 11:54 x86_64 Cygwin\n****************************************************\nC compiler: gcc\nC compiler version:\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-pc-cygwin/4.8.2/lto-wrapper.exe\nTarget: x86_64-pc-cygwin\nConfigured with: /cygdrive/i/szsz/tmpp/cygwin64/gcc/gcc-4.8.2-1/src/gcc-4.8.2/configure --srcdir=/cygdrive/i/szsz/tmpp/cygwin64/gcc/gcc-4.8.2-1/src/gcc-4.8.2 --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/libexec --datadir=/usr/share --localstatedir=/var --sysconfdir=/etc --libdir=/usr/lib --datarootdir=/usr/share --docdir=/usr/share/doc/gcc -C --build=x86_64-pc-cygwin --host=x86_64-pc-cygwin --target=x86_64-pc-cygwin --without-libiconv-prefix --without-libintl-prefix --enable-shared --enable-shared-libgcc --enable-static --enable-version-specific-runtime-libs --enable-bootstrap --disable-__cxa_atexit --with-dwarf2 --with-tune=generic --enable-languages=c,c++,fortran,lto,objc,obj-c++ --enable-graphite --enable-threads=posix --enable-libatomic --enable-libgomp --disable-libitm --enable-libquadmath --enable-libquadmath-support --enable-libssp --enable-libgcj-sublibs --disable-java-awt --disable-symvers --with-ecj-jar=/usr/share/java/ecj.jar --with-gnu-ld --with-gnu-as --with-cloog-include=/usr/include/cloog-isl --without-libiconv-prefix --without-libintl-prefix --with-system-zlib\nThread model: posix\ngcc version 4.8.2 (GCC)\n****************************************************\nRenaming *,asm files to *.asm...\nApplying patches to upstream sources...\n\n... applying patches ...\n\nBuilding MPIR with the C++ interface and (only) shared libraries.\nChecking what CFLAGS MPIR would use if they were empty...\nchecking build system type... penryn-unknown-cygwin\nchecking host system type... penryn-unknown-cygwin\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /usr/bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make sets $(MAKE)... yes\nchecking whether to enable maintainer-specific portions of Makefiles... no\nchecking ABI=32\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer ... no\nchecking compiler gcc -O2 -fomit-frame-pointer ... yes\nchecking compiler gcc -O2 -fomit-frame-pointer has sizeof(long)==4... no\nconfigure: error: could not find a working compiler, see config.log for details\nError configuring MPIR (with CFLAGS unset).\nConsult /home/Travis/sage/local/var/tmp/sage/build/mpir-2.6.0.p4/src/config.log for for details.\n\nreal    0m19.935s\nuser    0m3.299s\nsys     0m9.106s\n************************************************************************\nError installing package mpir-2.6.0.p4\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\nexplaining the problem and including the relevant part of the log file\n  /home/Travis/sage/logs/pkgs/mpir-2.6.0.p4.log\nDescribe your computer, operating system, etc.\nIf you want to try to fix the problem yourself, *don't* just cd to\n/home/Travis/sage/local/var/tmp/sage/build/mpir-2.6.0.p4 and type 'make' or whatever is appropriate.\nInstead, the following commands setup all environment variables\ncorrectly and load a subshell for you to debug the error:\n  (cd '/home/Travis/sage/local/var/tmp/sage/build/mpir-2.6.0.p4' && '/home/Travis/sage/sage' --sh)\nWhen you are done debugging, you can type \"exit\" to leave the subshell.\n************************************************************************\nMakefile:558: recipe for target '/home/Travis/sage/local/var/lib/sage/installed/mpir-2.6.0.p4' failed\nmake[3]: *** [/home/Travis/sage/local/var/lib/sage/installed/mpir-2.6.0.p4] Error 1\nmake[3]: Leaving directory '/home/Travis/sage/build'\nMakefile:482: recipe for target 'toolchain-deps' failed\nmake[2]: *** [toolchain-deps] Error 2\nmake[2]: Leaving directory '/home/Travis/sage/build'\nMakefile:375: recipe for target 'all' failed\nmake[1]: *** [all] Error 2\nmake[1]: Leaving directory '/home/Travis/sage/build'\n\nreal    0m37.622s\nuser    0m5.586s\nsys     0m13.318s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build:\n\npackage: mpir-2.6.0.p4\nlog file: /home/Travis/sage/logs/pkgs/mpir-2.6.0.p4.log\nbuild directory: /home/Travis/sage/local/var/tmp/sage/build/mpir-2.6.0.p4\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n\nMakefile:18: recipe for target 'build' failed\nmake: *** [build] Error 1\n```\nAny ideas? Thanks.",
    "created_at": "2014-01-04T06:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248981",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
I just tried to compile on cygwin64 with the current branch and it failed with the following:

```
Travis@Travis-Notebook ~/sage
$ make
cd build && \
"../build/pipestatus" \
        "env SAGE_PARALLEL_SPKG_BUILD='' ./install all 2>&1" \
        "tee -a ../logs/install.log"
*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***
!::=::\
_=/usr/bin/env
ALLUSERSPROFILE=C:\ProgramData
ANDROID_NDK_PATH=C:\Users\Travis\Documents\Android\ndk\android-ndk-r8d
APPDATA=C:\Users\Travis\AppData\Roaming
CLASSPATH=.;C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip
CommonProgramFiles(x86)=C:\Program Files (x86)\Common Files
COMMONPROGRAMFILES=C:\Program Files\Common Files
COMPUTERNAME=TRAVIS-NOTEBOOK
COMSPEC=C:\Windows\system32\cmd.exe
DFSTRACINGON=FALSE
FP_NO_HOST_CHECK=NO
GTK_BASEPATH=C:\Program Files (x86)\GtkSharp\2.12\
HOME=/home/Travis
HOMEDRIVE=C:
HOMEPATH=\Users\Travis
HOSTNAME=Travis-Notebook
INFOPATH=/usr/local/info:/usr/share/info:/usr/info:
LANG=en_US.UTF-8
LOCALAPPDATA=C:\Users\Travis\AppData\Local
LOGONSERVER=\\TRAVIS-NOTEBOOK
MAKE=make
MAKEFLAGS=
MAKELEVEL=1
MANPATH=/usr/local/man:/usr/share/man:/usr/man::/usr/ssl/man
MFLAGS=
NUMBER_OF_PROCESSORS=2
OS=Windows_NT
PATH=/home/Travis/sage/src/bin:/home/Travis/sage/local/bin:/usr/local/bin:/usr/bin:/cygdrive/c/Program Files/MiKTeX 2.9/miktex/bin/x64:/cygdrive/c/Qt/2010.04/mingw/bin:/cygdrive/c/Program Files (x86)/CMake 2.8/bin:/cygdrive/c/Program Files (x86)/LLNL/VisIt 2.1.0:/cygdrive/c/Windows/system32:/cygdrive/c/Windows:/cygdrive/c/Windows/System32/Wbem:/cygdrive/c/PROGRA~2/COMMON~1/ULEADS~1/MPEG:/cygdrive/c/Program Files/Intel/WiFi/bin:/cygdrive/c/Program Files (x86)/Common Files/DivX Shared:/cygdrive/c/altera/91/quartus/bin:/cygdrive/c/Program Files (x86)/Autodesk/Backburner:/cygdrive/c/Program Files/Common Files/Autodesk Shared:/cygdrive/c/Program Files (x86)/TortoiseSVN/bin:/cygdrive/c/Program Files/TortoiseHg:/cygdrive/c/Program Files (x86)/QuickTime/QTSystem:/cygdrive/c/Program Files/TortoiseGit/bin:/cygdrive/c/Program Files (x86)/GtkSharp/2.12/bin:/usr/lib/lapack
PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
PRINTER=Adobe PDF
PROCESSOR_ARCHITECTURE=AMD64
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 23 Stepping 10, GenuineIntel
PROCESSOR_LEVEL=6
PROCESSOR_REVISION=170a
ProgramData=C:\ProgramData
ProgramFiles(x86)=C:\Program Files (x86)
PROGRAMFILES=C:\Program Files
PUBLIC=C:\Users\Public
PWD=/home/Travis/sage/build
PYTHONPATH=/home/Travis/sage/local
QTJAVA=C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip
QUARTUS_ROOTDIR=c:\altera\91\quartus
SAGE_EXTCODE=/home/Travis/sage/local/share/sage/ext
SAGE_LOCAL=/home/Travis/sage/local
SAGE_LOGS=/home/Travis/sage/logs/pkgs
SAGE_PARALLEL_SPKG_BUILD=
SAGE_ROOT=/home/Travis/sage
SAGE_SPKG_INST=/home/Travis/sage/local/var/lib/sage/installed
SAGE_SRC=/home/Travis/sage/src
SAGE_VERSION=6.1.beta2
SESSIONNAME=Console
SHELL=/bin/bash
SHLVL=4
SYSTEMDRIVE=C:
SYSTEMROOT=C:\Windows
TEMP=/tmp
temp=C:\Users\Travis\AppData\Local\Temp
TERM=xterm
TEXMFCACHE=C:\ProgramData\MiKTeX\2.9
TMP=/tmp
tmp=C:\Users\Travis\AppData\Local\Temp
TRACE_FORMAT_SEARCH_PATH=\\NTREL202.ntdev.corp.microsoft.com\34FB5F65-FFEB-4B61-BF0E-A6A76C450FAA\TraceFormat
TZ=America/Los_Angeles
USER=Travis
USERDOMAIN=Travis-Notebook
USERNAME=Travis
USERPROFILE=C:\Users\Travis
VBOX_INSTALL_PATH=C:\Program Files\Oracle\VirtualBox\
WINDIR=C:\Windows
***********************************************
make[1]: Entering directory '/home/Travis/sage/build'
make base
make[2]: Entering directory '/home/Travis/sage/build'
make[2]: Nothing to be done for 'base'.
make[2]: Leaving directory '/home/Travis/sage/build'
env SAGE_BUILD_TOOLCHAIN=yes make toolchain
make[2]: Entering directory '/home/Travis/sage/build'
make[2]: Nothing to be done for 'toolchain'.
make[2]: Leaving directory '/home/Travis/sage/build'
make toolchain-deps
make[2]: Entering directory '/home/Travis/sage/build'
make /home/Travis/sage/local/var/lib/sage/installed/zlib-1.2.8.p0
make[3]: Entering directory '/home/Travis/sage/build'
make[3]: '/home/Travis/sage/local/var/lib/sage/installed/zlib-1.2.8.p0' is up to date.
make[3]: Leaving directory '/home/Travis/sage/build'
make /home/Travis/sage/local/var/lib/sage/installed/mpir-2.6.0.p4
make[3]: Entering directory '/home/Travis/sage/build'
/home/Travis/sage/build/pipestatus "sage-spkg ${SAGE_SPKG_OPTS} mpir-2.6.0.p4 2>&1" "tee -a /home/Travis/sage/logs/pkgs/mpir-2.6.0.p4.log"
Found local metadata for mpir-2.6.0.p4
Found local sources at /home/Travis/sage/upstream/mpir-2.6.0.tar.bz2
Checksum: a9fbfe30db672939abab06d16ce48087ee1b0d01 vs a9fbfe30db672939abab06d16ce48087ee1b0d01
mpir-2.6.0.p4
====================================================
Setting up build directory for mpir-2.6.0.p4
Finished set up
****************************************************
Host system:
CYGWIN_NT-6.0 Travis-Notebook 1.7.27(0.271/5/3) 2013-12-09 11:54 x86_64 Cygwin
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-pc-cygwin/4.8.2/lto-wrapper.exe
Target: x86_64-pc-cygwin
Configured with: /cygdrive/i/szsz/tmpp/cygwin64/gcc/gcc-4.8.2-1/src/gcc-4.8.2/configure --srcdir=/cygdrive/i/szsz/tmpp/cygwin64/gcc/gcc-4.8.2-1/src/gcc-4.8.2 --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/libexec --datadir=/usr/share --localstatedir=/var --sysconfdir=/etc --libdir=/usr/lib --datarootdir=/usr/share --docdir=/usr/share/doc/gcc -C --build=x86_64-pc-cygwin --host=x86_64-pc-cygwin --target=x86_64-pc-cygwin --without-libiconv-prefix --without-libintl-prefix --enable-shared --enable-shared-libgcc --enable-static --enable-version-specific-runtime-libs --enable-bootstrap --disable-__cxa_atexit --with-dwarf2 --with-tune=generic --enable-languages=c,c++,fortran,lto,objc,obj-c++ --enable-graphite --enable-threads=posix --enable-libatomic --enable-libgomp --disable-libitm --enable-libquadmath --enable-libquadmath-support --enable-libssp --enable-libgcj-sublibs --disable-java-awt --disable-symvers --with-ecj-jar=/usr/share/java/ecj.jar --with-gnu-ld --with-gnu-as --with-cloog-include=/usr/include/cloog-isl --without-libiconv-prefix --without-libintl-prefix --with-system-zlib
Thread model: posix
gcc version 4.8.2 (GCC)
****************************************************
Renaming *,asm files to *.asm...
Applying patches to upstream sources...

... applying patches ...

Building MPIR with the C++ interface and (only) shared libraries.
Checking what CFLAGS MPIR would use if they were empty...
checking build system type... penryn-unknown-cygwin
checking host system type... penryn-unknown-cygwin
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether to enable maintainer-specific portions of Makefiles... no
checking ABI=32
checking compiler gcc -m32 -O2 -fomit-frame-pointer ... no
checking compiler gcc -O2 -fomit-frame-pointer ... yes
checking compiler gcc -O2 -fomit-frame-pointer has sizeof(long)==4... no
configure: error: could not find a working compiler, see config.log for details
Error configuring MPIR (with CFLAGS unset).
Consult /home/Travis/sage/local/var/tmp/sage/build/mpir-2.6.0.p4/src/config.log for for details.

real    0m19.935s
user    0m3.299s
sys     0m9.106s
************************************************************************
Error installing package mpir-2.6.0.p4
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the relevant part of the log file
  /home/Travis/sage/logs/pkgs/mpir-2.6.0.p4.log
Describe your computer, operating system, etc.
If you want to try to fix the problem yourself, *don't* just cd to
/home/Travis/sage/local/var/tmp/sage/build/mpir-2.6.0.p4 and type 'make' or whatever is appropriate.
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
  (cd '/home/Travis/sage/local/var/tmp/sage/build/mpir-2.6.0.p4' && '/home/Travis/sage/sage' --sh)
When you are done debugging, you can type "exit" to leave the subshell.
************************************************************************
Makefile:558: recipe for target '/home/Travis/sage/local/var/lib/sage/installed/mpir-2.6.0.p4' failed
make[3]: *** [/home/Travis/sage/local/var/lib/sage/installed/mpir-2.6.0.p4] Error 1
make[3]: Leaving directory '/home/Travis/sage/build'
Makefile:482: recipe for target 'toolchain-deps' failed
make[2]: *** [toolchain-deps] Error 2
make[2]: Leaving directory '/home/Travis/sage/build'
Makefile:375: recipe for target 'all' failed
make[1]: *** [all] Error 2
make[1]: Leaving directory '/home/Travis/sage/build'

real    0m37.622s
user    0m5.586s
sys     0m13.318s
***************************************************************
Error building Sage.

The following package(s) may have failed to build:

package: mpir-2.6.0.p4
log file: /home/Travis/sage/logs/pkgs/mpir-2.6.0.p4.log
build directory: /home/Travis/sage/local/var/tmp/sage/build/mpir-2.6.0.p4

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.

Makefile:18: recipe for target 'build' failed
make: *** [build] Error 1
```
Any ideas? Thanks.



---

archive/issue_comments_248982.json:
```json
{
    "body": "<a id='comment:9'></a>\nYes, a bunch of ideas :)\nIt's not expected to work anyway, adding support is not that hard, but was not the point of this ticket, the few steps for Cygwin64 support are:\n* updated the configfsf.* scripts,\n* tweak the ABI stuff in spkg-install.\nI think that's all.\nA priori, all needed fixed are in MPIR master git branchn bt I've not tested it lately.",
    "created_at": "2014-01-04T12:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248982",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
Yes, a bunch of ideas :)
It's not expected to work anyway, adding support is not that hard, but was not the point of this ticket, the few steps for Cygwin64 support are:
* updated the configfsf.* scripts,
* tweak the ABI stuff in spkg-install.
I think that's all.
A priori, all needed fixed are in MPIR master git branchn bt I've not tested it lately.



---

archive/issue_comments_248983.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis worked for me on Cygwin32, and I'll (try to remember to) try this on my ubuntu machine tonight.\n\nFor Cygwin64, the configfsf.* is #14648, but where is the ABI stuff I need to change documented? Thanks for walking me through this.",
    "created_at": "2014-01-05T06:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248983",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
This worked for me on Cygwin32, and I'll (try to remember to) try this on my ubuntu machine tonight.

For Cygwin64, the configfsf.* is #14648, but where is the ABI stuff I need to change documented? Thanks for walking me through this.



---

archive/issue_comments_248984.json:
```json
{
    "body": "<a id='comment:11'></a>\nWorks for me on Ubuntu, now to see if I can get this to work on Cygwin64...",
    "created_at": "2014-01-07T07:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248984",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Works for me on Ubuntu, now to see if I can get this to work on Cygwin64...



---

archive/issue_comments_248985.json:
```json
{
    "body": "<a id='comment:12'></a>\nPlease add Cygwin64 in other tickets: basically #14648 for the configfsf.* update and potentially a different one for modifying the spkg-install script.",
    "created_at": "2014-01-07T08:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248985",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>
Please add Cygwin64 in other tickets: basically #14648 for the configfsf.* update and potentially a different one for modifying the spkg-install script.



---

archive/issue_comments_248986.json:
```json
{
    "body": "<a id='comment:13'></a>\nWorks on Cygwin64 with #14648 and #15651, so I'm going to stop daddling and set this to positive review. Thanks Jean-Pierre.",
    "created_at": "2014-01-10T19:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248986",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Works on Cygwin64 with #14648 and #15651, so I'm going to stop daddling and set this to positive review. Thanks Jean-Pierre.



---

archive/issue_comments_248987.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2014-01-10T19:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248987",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_248988.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-10T19:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248988",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_248989.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-01-18T04:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15365#issuecomment-248989",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_051072.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-18T04:46:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15365",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15365#event-51072"
}
```
