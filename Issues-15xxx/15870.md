# Issue 15870: (LaTeX)-typesetting of multi-character variables wrong

archive/issues_015633.json:
```json
{
    "body": "We have\n\n```\nsage: abc = var('abc')\nsage: latex((abc/(abc+1)+42)/(abc-1))\n\\frac{\\frac{\\mbox{abc}}{\\mbox{abc} + 1} + 42}{\\mbox{abc} - 1}\n```\nThe \\mbox here is wrong because of the following two reasons:\n- In the example above `\\mbox{abc}` has normal size, whereas the `+1` is typeset in subscriptsize (or so). You can see this by `view((abc/(abc+1)+42)/(abc-1))`.\n- Variables are written in italic.\n\nTherefore `\\mbox` should be replaced by `\\mathit` (which solves both problems mentioned above).\n\nSee also #13543 (Multi-character variables not supported in legend_labels).\n\n\nKeywords: latex, variable\n\nBranch/Commit: 8655a9a8f5278d055f5ea033110360ea55cbc67e\n\nReviewer: Andrey Novoseltsev\n\nAuthor: Daniel Krenn\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15870\n\n",
    "closed_at": "2014-04-01T16:54:09Z",
    "created_at": "2014-02-27T08:39:40Z",
    "labels": [
        "component: user interface",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "(LaTeX)-typesetting of multi-character variables wrong",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15870",
    "user": "https://github.com/dkrenn"
}
```
We have

```
sage: abc = var('abc')
sage: latex((abc/(abc+1)+42)/(abc-1))
\frac{\frac{\mbox{abc}}{\mbox{abc} + 1} + 42}{\mbox{abc} - 1}
```
The \mbox here is wrong because of the following two reasons:
- In the example above `\mbox{abc}` has normal size, whereas the `+1` is typeset in subscriptsize (or so). You can see this by `view((abc/(abc+1)+42)/(abc-1))`.
- Variables are written in italic.

Therefore `\mbox` should be replaced by `\mathit` (which solves both problems mentioned above).

See also #13543 (Multi-character variables not supported in legend_labels).


Keywords: latex, variable

Branch/Commit: 8655a9a8f5278d055f5ea033110360ea55cbc67e

Reviewer: Andrey Novoseltsev

Author: Daniel Krenn

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15870





---

archive/issue_comments_256618.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2014-02-27T08:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256618",
    "user": "https://github.com/dkrenn"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_256619.json:
```json
{
    "body": "Changing keywords from \"\" to \"latex, variable\".",
    "created_at": "2014-02-27T08:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256619",
    "user": "https://github.com/dkrenn"
}
```

Changing keywords from "" to "latex, variable".



---

archive/issue_comments_256620.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to user interface.",
    "created_at": "2014-02-27T08:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256620",
    "user": "https://github.com/dkrenn"
}
```

Changing component from PLEASE CHANGE to user interface.



---

archive/issue_comments_256621.json:
```json
{
    "body": "<a id='comment:2'></a>\nSee also [http://tex.stackexchange.com/questions/6087/two-letter-variable-names](http://tex.stackexchange.com/questions/6087/two-letter-variable-names).",
    "created_at": "2014-02-27T08:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256621",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:2'></a>
See also [http://tex.stackexchange.com/questions/6087/two-letter-variable-names](http://tex.stackexchange.com/questions/6087/two-letter-variable-names).



---

archive/issue_comments_256622.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe whole point of not writing it directly as `abc` is probably to avoid italics. So, a proper fix would be to use `\\text` instead of `\\mbox`. You can compare the output as follows\n\n```\nview(LatexExpr(r'\\frac{\\frac{\\text{abc}}{\\text{abc} + 1} + 42}{\\text{abc} - 1}'))\nview(LatexExpr(r'\\frac{\\frac{\\mathit{abc}}{\\mathit{abc} + 1} + 42}{\\mathit{abc} - 1}'))\n```",
    "created_at": "2014-02-27T14:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256622",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:3'></a>
The whole point of not writing it directly as `abc` is probably to avoid italics. So, a proper fix would be to use `\text` instead of `\mbox`. You can compare the output as follows

```
view(LatexExpr(r'\frac{\frac{\text{abc}}{\text{abc} + 1} + 42}{\text{abc} - 1}'))
view(LatexExpr(r'\frac{\frac{\mathit{abc}}{\mathit{abc} + 1} + 42}{\mathit{abc} - 1}'))
```



---

archive/issue_comments_256623.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [ppurka](#comment%3A3):\n> The whole point of not writing it directly as `abc` is probably to avoid italics. So, a proper fix would be to use `\\text` instead of `\\mbox`. \n\n\n`\\text` is not correct for variables. They have to be written italic.",
    "created_at": "2014-03-18T17:29:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256623",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:4'></a>
Replying to [ppurka](#comment%3A3):
> The whole point of not writing it directly as `abc` is probably to avoid italics. So, a proper fix would be to use `\text` instead of `\mbox`. 


`\text` is not correct for variables. They have to be written italic.



---

archive/issue_comments_256624.json:
```json
{
    "body": "Changing author from \"\" to \"Daniel Krenn\"",
    "created_at": "2014-03-24T13:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256624",
    "user": "https://github.com/dkrenn"
}
```

Changing author from "" to "Daniel Krenn"



---

archive/issue_comments_256625.json:
```json
{
    "body": "Changing commit from \"\" to \"8655a9a8f5278d055f5ea033110360ea55cbc67e\"",
    "created_at": "2014-03-24T13:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256625",
    "user": "https://github.com/dkrenn"
}
```

Changing commit from "" to "8655a9a8f5278d055f5ea033110360ea55cbc67e"



---

archive/issue_comments_256626.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dkrenn/ticket/15870\"",
    "created_at": "2014-03-24T13:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256626",
    "user": "https://github.com/dkrenn"
}
```

Changing branch from "" to "u/dkrenn/ticket/15870"



---

archive/issue_comments_256627.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-03-24T13:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256627",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_256628.json:
```json
{
    "body": "<a id='comment:5'></a>\nI've changed the source so that multi-character variables are printed correctly. \n\nThe LaTeX-output of infinite polynomial ring variables was also adapted to support multi-character variables correctly. Thereby, this output is now generated using the standard tools of `latex.py`.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|\n|[f27545b](http://git.sagemath.org/sage.git/commit/?id=f27545b8bde2481d77d26cadb19123519b547ef8)|`changed latex-output of multi-character variables to \\mathit{...`}|\n|[3b1d8fd](http://git.sagemath.org/sage.git/commit/?id=3b1d8fded8d31d0729b1e8fed029e6340fb2e577)|`latex_variable_name(*) now returns * instead of '\\\\mathit{}' (or '\\\\mbox{}' in the old code)`|\n|[fb93330](http://git.sagemath.org/sage.git/commit/?id=fb933303c32d70f324edbf8bf3708f1cc578ef3e)|`inserted doctests for \\mathit in infinite_polynomial_ring`|\n|[7dddc9d](http://git.sagemath.org/sage.git/commit/?id=7dddc9d0235ffce913f93be9c6dd23ad534d28f1)|`added ast, bullet, circ, times, star to common_varnames`|\n|[20b5e57](http://git.sagemath.org/sage.git/commit/?id=20b5e57b9c0a0f371ba263909728dbec66908ac8)|`simplified _latex_ of infinite_polynomial_ring; it now uses latex_variable_name`|\n|[8655a9a](http://git.sagemath.org/sage.git/commit/?id=8655a9a8f5278d055f5ea033110360ea55cbc67e)|`doctest for trac #15870 added`|",
    "created_at": "2014-03-24T13:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256628",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'></a>
I've changed the source so that multi-character variables are printed correctly. 

The LaTeX-output of infinite polynomial ring variables was also adapted to support multi-character variables correctly. Thereby, this output is now generated using the standard tools of `latex.py`.

---
New commits:
|                                                                                                                                          |                                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|
|[f27545b](http://git.sagemath.org/sage.git/commit/?id=f27545b8bde2481d77d26cadb19123519b547ef8)|`changed latex-output of multi-character variables to \mathit{...`}|
|[3b1d8fd](http://git.sagemath.org/sage.git/commit/?id=3b1d8fded8d31d0729b1e8fed029e6340fb2e577)|`latex_variable_name(*) now returns * instead of '\\mathit{}' (or '\\mbox{}' in the old code)`|
|[fb93330](http://git.sagemath.org/sage.git/commit/?id=fb933303c32d70f324edbf8bf3708f1cc578ef3e)|`inserted doctests for \mathit in infinite_polynomial_ring`|
|[7dddc9d](http://git.sagemath.org/sage.git/commit/?id=7dddc9d0235ffce913f93be9c6dd23ad534d28f1)|`added ast, bullet, circ, times, star to common_varnames`|
|[20b5e57](http://git.sagemath.org/sage.git/commit/?id=20b5e57b9c0a0f371ba263909728dbec66908ac8)|`simplified _latex_ of infinite_polynomial_ring; it now uses latex_variable_name`|
|[8655a9a](http://git.sagemath.org/sage.git/commit/?id=8655a9a8f5278d055f5ea033110360ea55cbc67e)|`doctest for trac #15870 added`|



---

archive/issue_comments_256629.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Andrey Novoseltsev\"",
    "created_at": "2014-03-31T21:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256629",
    "user": "https://github.com/novoselt"
}
```

Changing reviewer from "" to "Andrey Novoseltsev"



---

archive/issue_comments_256630.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-31T21:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256630",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_046693.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-01T16:54:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15870#event-46693"
}
```



---

archive/issue_comments_256631.json:
```json
{
    "body": "Changing branch from \"u/dkrenn/ticket/15870\" to \"8655a9a8f5278d055f5ea033110360ea55cbc67e\"",
    "created_at": "2014-04-01T16:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256631",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dkrenn/ticket/15870" to "8655a9a8f5278d055f5ea033110360ea55cbc67e"



---

archive/issue_comments_256632.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-01T16:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15870#issuecomment-256632",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
