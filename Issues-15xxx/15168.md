# Issue 15168: Plots not shown in the notebook

archive/issues_014931.json:
```json
{
    "body": "I observe this bahaviour in Sage-5.12.beta4: after checking \"Typeset\" things that generate a plot show its text representation only. Adding `.show()` in the end does show the plot, but it is definitely annoying and unclear for new users, so would be nice if it did not hit 5.12.\n\nThis may be related to #14469 and corresponding upgrade to sagenb-0.10.7.2 in #15016.\n\nOn the same machine with the same settings running 5.11 + sagenb-0.10.7.1 works fine.\n\n---\nApply to devel/sage: [attachment:trac_15168_typeset_displayhook.patch](https://github.com/sagemath/sage/files/ticket15168/trac_15168_typeset_displayhook.patch)\n\n**Keywords:** plot\n\n**Reviewer:** Andrey Novoseltsev, Punarbasu Purkayastha\n\n**Author:** Volker Braun\n\n**Merged:** sage-5.12.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/15168\n\n",
    "closed_at": "2013-10-01T07:17:54Z",
    "created_at": "2013-09-06T18:32:37Z",
    "labels": [
        "component: notebook",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.12",
    "title": "Plots not shown in the notebook",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/15168",
    "user": "https://github.com/novoselt"
}
```
I observe this bahaviour in Sage-5.12.beta4: after checking "Typeset" things that generate a plot show its text representation only. Adding `.show()` in the end does show the plot, but it is definitely annoying and unclear for new users, so would be nice if it did not hit 5.12.

This may be related to #14469 and corresponding upgrade to sagenb-0.10.7.2 in #15016.

On the same machine with the same settings running 5.11 + sagenb-0.10.7.1 works fine.

---
Apply to devel/sage: [attachment:trac_15168_typeset_displayhook.patch](https://github.com/sagemath/sage/files/ticket15168/trac_15168_typeset_displayhook.patch)

**Keywords:** plot

**Reviewer:** Andrey Novoseltsev, Punarbasu Purkayastha

**Author:** Volker Braun

**Merged:** sage-5.12.rc0

Issue created by migration from https://trac.sagemath.org/ticket/15168





---

archive/issue_comments_189119.json:
```json
{
    "body": "<a id='comment:1'></a>\nWhat exactly are you doing to start the notebook? `notebook(server_pool=['vbraun@localhost'])` works for me, plots are displayed immediately. Both the compute server and the notebook web server version of Sage must match.",
    "created_at": "2013-09-06T19:12:26Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189119",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>
What exactly are you doing to start the notebook? `notebook(server_pool=['vbraun@localhost'])` works for me, plots are displayed immediately. Both the compute server and the notebook web server version of Sage must match.



---

archive/issue_comments_189120.json:
```json
{
    "body": "<a id='comment:2'></a>\nAre you running the notebook as vbraun as well? I use two separate accounts in the same group and they do run on the same machine, so versions of sage for the notebook and worker are the same.",
    "created_at": "2013-09-06T19:19:21Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189120",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>
Are you running the notebook as vbraun as well? I use two separate accounts in the same group and they do run on the same machine, so versions of sage for the notebook and worker are the same.



---

archive/issue_comments_189121.json:
```json
{
    "body": "<a id='comment:3'></a>\nIt also works if I use a different account, i.e. `notebook(server_pool=['other@localhost'])` works with the current git and with vanilla sage-5.12.beta3.",
    "created_at": "2013-09-06T19:35:58Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189121",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
It also works if I use a different account, i.e. `notebook(server_pool=['other@localhost'])` works with the current git and with vanilla sage-5.12.beta3.



---

archive/issue_comments_189122.json:
```json
{
    "body": "<a id='comment:4'></a>\nOK, I am not completely out of my mind, it just takes more effort to trigger it: all was ok in my freshly started beta4, until I checked \"Typeset\", which prints a string for a plot. Unchecking it did not help - still prints a string. Unchecking AND restarting the worksheet lets plots show up again.\n\nThis is actually not related to multi-user setup or anything with security, I think it is a blocker then, but probably should not be hard to fix for people in the know ;-)",
    "created_at": "2013-09-06T19:57:33Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189122",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>
OK, I am not completely out of my mind, it just takes more effort to trigger it: all was ok in my freshly started beta4, until I checked "Typeset", which prints a string for a plot. Unchecking it did not help - still prints a string. Unchecking AND restarting the worksheet lets plots show up again.

This is actually not related to multi-user setup or anything with security, I think it is a blocker then, but probably should not be hard to fix for people in the know ;-)



---

archive/issue_comments_189123.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n-I observe this bahaviour in Sage-5.12.beta4 running in server-user mode: things that generate a plot show its text representation only. Adding `.show()` in the end does show the plot, but it is definitely annoying and unclear for new users, so would be nice if it does not hit 5.12.\n+I observe this bahaviour in Sage-5.12.beta4: after checking \"Typeset\" things that generate a plot show its text representation only. Adding `.show()` in the end does show the plot, but it is definitely annoying and unclear for new users, so would be nice if it did not hit 5.12.\n \n This may be related to #14469 and corresponding upgrade to sagenb-0.10.7.2 in #15016.\n \n-On the same machine with the same settings running 5.11 + sagenb-0.10.7.1 works fine. I also don't see any problems with 5.12.beta4 when not using separate accounts for the server and worker processes.\n+On the same machine with the same settings running 5.11 + sagenb-0.10.7.1 works fine.\n``````\n",
    "created_at": "2013-09-06T19:58:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189123",
    "user": "https://github.com/novoselt"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
-I observe this bahaviour in Sage-5.12.beta4 running in server-user mode: things that generate a plot show its text representation only. Adding `.show()` in the end does show the plot, but it is definitely annoying and unclear for new users, so would be nice if it does not hit 5.12.
+I observe this bahaviour in Sage-5.12.beta4: after checking "Typeset" things that generate a plot show its text representation only. Adding `.show()` in the end does show the plot, but it is definitely annoying and unclear for new users, so would be nice if it did not hit 5.12.
 
 This may be related to #14469 and corresponding upgrade to sagenb-0.10.7.2 in #15016.
 
-On the same machine with the same settings running 5.11 + sagenb-0.10.7.1 works fine. I also don't see any problems with 5.12.beta4 when not using separate accounts for the server and worker processes.
+On the same machine with the same settings running 5.11 + sagenb-0.10.7.1 works fine.
``````




---

archive/issue_events_133175.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-09-06T19:58:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15168#event-133175"
}
```



---

archive/issue_events_133176.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-09-06T19:58:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15168#event-133176"
}
```



---

archive/issue_comments_189124.json:
```json
{
    "body": "<a id='comment:6'></a>\nOk. I wonder if it is really #14358 that introduced this. I can confirm that this does not work in a server pool setup. I get the following in my console where I started the server:\n\n```\n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] got EOF subprocess must have crashed...\n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] ssh: Could not resolve hostname b: Name or service not known\n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] \n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] import os;os.chdir(\"/tmp/tmpSFPXPO\");\n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] execfile(\"_sage_input_2.py\")\n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] \n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] got EOF subprocess must have crashed...\n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] \n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] import os;os.chdir(\"/tmp/tmpCAq4xl\");\n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] execfile(\"_sage_input_1.py\")\n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] ssh: Could not resolve hostname t: Name or service not known\n2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] \n```\n\nThis is the output after I run `plot(x).show()` in a worksheet. It does not get the correct hostname??\n\n*Edit*: Ticket is #14469 not #14358",
    "created_at": "2013-09-07T08:29:55Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189124",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:6'></a>
Ok. I wonder if it is really #14358 that introduced this. I can confirm that this does not work in a server pool setup. I get the following in my console where I started the server:

```
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] got EOF subprocess must have crashed...
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] ssh: Could not resolve hostname b: Name or service not known
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] 
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] import os;os.chdir("/tmp/tmpSFPXPO");
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] execfile("_sage_input_2.py")
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] 
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] got EOF subprocess must have crashed...
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] 
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] import os;os.chdir("/tmp/tmpCAq4xl");
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] execfile("_sage_input_1.py")
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] ssh: Could not resolve hostname t: Name or service not known
2013-09-07 16:28:29+0800 [HTTPChannel,2,127.0.0.1] 
```

This is the output after I run `plot(x).show()` in a worksheet. It does not get the correct hostname??

*Edit*: Ticket is #14469 not #14358



---

archive/issue_comments_189125.json:
```json
{
    "body": "<a id='comment:7'></a>\nMore error after trying to plot many times.  I am using the git version of sage; I will retry with a prerelease version to find out if this error is from the git version of sage.\n\n```\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] \n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] \n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] got EOF subprocess must have crashed...\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] usage: ssh [-1246AaCfgKkMNnqsTtVvXxYy] [-b bind_address] [-c cipher_spec]\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-D [bind_address:]port] [-e escape_char] [-F configfile]\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-I pkcs11] [-i identity_file]\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-L [bind_address:]port:host:hostport]\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-l login_name] [-m mac_spec] [-O ctl_cmd] [-o option] [-p port]\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-R [bind_address:]port:host:hostport] [-S ctl_path]\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-W host:port] [-w local_tun[:remote_tun]]\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [user@]hostname [command]\n2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] \n2013-09-07 16:32:37+0800 [HTTPChannel,2,127.0.0.1] ERROR initializing compute process:\n2013-09-07 16:32:37+0800 [HTTPChannel,2,127.0.0.1] \n2013-09-07 16:32:37+0800 [HTTPChannel,2,127.0.0.1] unable to start subprocess using command 'sage-native-execute ssh -t @ \"/home/punarbasu/Installations/sage/sage -python\"'\n2013-09-07 16:32:37+0800 [-] WSGI application error\n\tTraceback (most recent call last):\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/python/threadpool.py\", line 212, in _worker\n\t    o = self.q.get()\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/python/context.py\", line 118, in callWithContext\n\t    return self.currentContext().callWithContext(ctx, func, *args, **kw)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/python/context.py\", line 83, in callWithContext\n\t    self.contexts.pop()\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/web/wsgi.py\", line 340, in run\n\t    self.started = True\n\t--- <exception caught here> ---\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/web/wsgi.py\", line 315, in run\n\t    appIterator = self.application(self.environ, self.startResponse)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py\", line 1836, in __call__\n\t    return self.wsgi_app(environ, start_response)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py\", line 1820, in wsgi_app\n\t    response = self.make_response(self.handle_exception(e))\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py\", line 1403, in handle_exception\n\t    reraise(exc_type, exc_value, tb)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py\", line 1817, in wsgi_app\n\t    response = self.full_dispatch_request()\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py\", line 1477, in full_dispatch_request\n\t    rv = self.handle_user_exception(e)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py\", line 1381, in handle_user_exception\n\t    reraise(exc_type, exc_value, tb)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py\", line 1475, in full_dispatch_request\n\t    rv = self.dispatch_request()\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py\", line 1461, in dispatch_request\n\t    return self.view_functions[rule.endpoint](**req.view_args)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/flask_version/decorators.py\", line 22, in wrapper\n\t    return f(*args, **kwds)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/flask_version/worksheet.py\", line 46, in wrapper\n\t    return f(username, id, **kwds)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/flask_version/worksheet.py\", line 135, in wrapper\n\t    return f(*args, **kwds)\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/flask_version/worksheet.py\", line 443, in worksheet_cell_update\n\t    worksheet.check_comp()\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/notebook/worksheet.py\", line 3308, in check_comp\n\t    C.set_output_text(out, html, sage=self.sage())\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/notebook/worksheet.py\", line 3049, in sage\n\t    self.initialize_sage()\n\t  File \"/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/notebook/worksheet.py\", line 2996, in initialize_sage\n\t    raise RuntimeError, msg\n\texceptions.RuntimeError: unable to start subprocess using command 'sage-native-execute ssh -t @ \"/home/punarbasu/Installations/sage/sage -python\"'\n```",
    "created_at": "2013-09-07T08:33:25Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189125",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:7'></a>
More error after trying to plot many times.  I am using the git version of sage; I will retry with a prerelease version to find out if this error is from the git version of sage.

```
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] 
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] 
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] got EOF subprocess must have crashed...
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] usage: ssh [-1246AaCfgKkMNnqsTtVvXxYy] [-b bind_address] [-c cipher_spec]
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-D [bind_address:]port] [-e escape_char] [-F configfile]
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-I pkcs11] [-i identity_file]
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-L [bind_address:]port:host:hostport]
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-l login_name] [-m mac_spec] [-O ctl_cmd] [-o option] [-p port]
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-R [bind_address:]port:host:hostport] [-S ctl_path]
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [-W host:port] [-w local_tun[:remote_tun]]
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1]            [user@]hostname [command]
2013-09-07 16:32:36+0800 [HTTPChannel,2,127.0.0.1] 
2013-09-07 16:32:37+0800 [HTTPChannel,2,127.0.0.1] ERROR initializing compute process:
2013-09-07 16:32:37+0800 [HTTPChannel,2,127.0.0.1] 
2013-09-07 16:32:37+0800 [HTTPChannel,2,127.0.0.1] unable to start subprocess using command 'sage-native-execute ssh -t @ "/home/punarbasu/Installations/sage/sage -python"'
2013-09-07 16:32:37+0800 [-] WSGI application error
	Traceback (most recent call last):
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/python/threadpool.py", line 212, in _worker
	    o = self.q.get()
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/python/context.py", line 118, in callWithContext
	    return self.currentContext().callWithContext(ctx, func, *args, **kw)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/python/context.py", line 83, in callWithContext
	    self.contexts.pop()
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/web/wsgi.py", line 340, in run
	    self.started = True
	--- <exception caught here> ---
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Twisted-13.1.0-py2.7-linux-x86_64.egg/twisted/web/wsgi.py", line 315, in run
	    appIterator = self.application(self.environ, self.startResponse)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1836, in __call__
	    return self.wsgi_app(environ, start_response)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1820, in wsgi_app
	    response = self.make_response(self.handle_exception(e))
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1403, in handle_exception
	    reraise(exc_type, exc_value, tb)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1817, in wsgi_app
	    response = self.full_dispatch_request()
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1477, in full_dispatch_request
	    rv = self.handle_user_exception(e)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1381, in handle_user_exception
	    reraise(exc_type, exc_value, tb)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1475, in full_dispatch_request
	    rv = self.dispatch_request()
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1461, in dispatch_request
	    return self.view_functions[rule.endpoint](**req.view_args)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/flask_version/decorators.py", line 22, in wrapper
	    return f(*args, **kwds)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/flask_version/worksheet.py", line 46, in wrapper
	    return f(username, id, **kwds)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/flask_version/worksheet.py", line 135, in wrapper
	    return f(*args, **kwds)
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/flask_version/worksheet.py", line 443, in worksheet_cell_update
	    worksheet.check_comp()
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/notebook/worksheet.py", line 3308, in check_comp
	    C.set_output_text(out, html, sage=self.sage())
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/notebook/worksheet.py", line 3049, in sage
	    self.initialize_sage()
	  File "/home/punarbasu/Installations/sage/local/lib/python2.7/site-packages/sagenb-0.10.7.2-py2.7.egg/sagenb/notebook/worksheet.py", line 2996, in initialize_sage
	    raise RuntimeError, msg
	exceptions.RuntimeError: unable to start subprocess using command 'sage-native-execute ssh -t @ "/home/punarbasu/Installations/sage/sage -python"'
```



---

archive/issue_comments_189126.json:
```json
{
    "body": "<a id='comment:8'></a>\nVerified that the errors in my [comment:6](#comment%3A6) occurs in the prerelease version of sage-5.12.beta4. Haven't seen the exceptions in [comment:7](#comment%3A7).",
    "created_at": "2013-09-07T12:29:24Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189126",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:8'></a>
Verified that the errors in my [comment:6](#comment%3A6) occurs in the prerelease version of sage-5.12.beta4. Haven't seen the exceptions in [comment:7](#comment%3A7).



---

archive/issue_comments_189127.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [ppurka](#comment%3A6):\n>  Ok. I wonder if it is really #14358 that introduced this. I can confirm that this does not work in a server pool setup. I get the following in my console where I started the server: \n\n\nWas #14358 a typo? It is a new ticket for an issue that existed for a while (but hopefully will be fixed as well, of course ;-)). Sorry for not mentioning clearly that here I have problems even with 2D-plots, like\n\n```\nplot(sin(x))\n```\nand as discovered yesterday thanks to Volker - it is present even in a single user setup on http://localhost.",
    "created_at": "2013-09-07T15:27:43Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189127",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:9'></a>
Replying to [ppurka](#comment%3A6):
>  Ok. I wonder if it is really #14358 that introduced this. I can confirm that this does not work in a server pool setup. I get the following in my console where I started the server: 


Was #14358 a typo? It is a new ticket for an issue that existed for a while (but hopefully will be fixed as well, of course ;-)). Sorry for not mentioning clearly that here I have problems even with 2D-plots, like

```
plot(sin(x))
```
and as discovered yesterday thanks to Volker - it is present even in a single user setup on http://localhost.



---

archive/issue_comments_189128.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis has nothing to do with the sagenb code, the `pretty_print_default` command in Sage doesn't clean up after itself:\n\n```\nsage: plot(sin)   # works as expected, displays graphics\n\nsage: pretty_print_default(True)\nsage: plot(sin)\nGraphics object consisting of 1 graphics primitive\nsage: pretty_print_default(False)\nsage: plot(sin)\nGraphics object consisting of 1 graphics primitive \n```",
    "created_at": "2013-09-07T15:57:23Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189128",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>
This has nothing to do with the sagenb code, the `pretty_print_default` command in Sage doesn't clean up after itself:

```
sage: plot(sin)   # works as expected, displays graphics

sage: pretty_print_default(True)
sage: plot(sin)
Graphics object consisting of 1 graphics primitive
sage: pretty_print_default(False)
sage: plot(sin)
Graphics object consisting of 1 graphics primitive 
```



---

archive/issue_comments_189129.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [novoselt](#comment%3A9):\n> Was #14358 a typo? It is a new ticket for an issue that existed for a while (but hopefully will be fixed as well, of course ;-)).\n\nYes, indeed it was a typo. I meant to quote vbraun's ticket - #14469.",
    "created_at": "2013-09-07T16:11:47Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189129",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:11'></a>
Replying to [novoselt](#comment%3A9):
> Was #14358 a typo? It is a new ticket for an issue that existed for a while (but hopefully will be fixed as well, of course ;-)).

Yes, indeed it was a typo. I meant to quote vbraun's ticket - #14469.



---

archive/issue_events_133177.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-09-08T19:54:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15168#event-133177"
}
```



---

archive/issue_comments_189130.json:
```json
{
    "body": "**Author:** Volker Braun",
    "created_at": "2013-09-08T19:54:29Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189130",
    "user": "https://github.com/vbraun"
}
```

**Author:** Volker Braun



---

archive/issue_comments_189131.json:
```json
{
    "body": "<a id='comment:13'></a>\nA couple of comments regarding the patch\n\n1. There are lots of trailing whitespace :)\n2. Can you format `#14466` using the `:trac:` format\n\n```\n265\t        In #14466 we override IPython's special printing of ``type`` objects\n```\n3. In `set_display`, the `INPUT` should mention the default input.\n\n```\n285\t        - ``mode`` -- string. One of ``simple``, ``ascii_art``, or ``typeset``.\n\n- to -\n\n285\t        - ``mode`` -- string (default: ``simple``). One of ``simple``, ``ascii_art``, or ``typeset``.\n```\n4. In `set_display`, the default keyword value should be `simple` in keeping with the default `mode=\"simple\"`.\n\n```\n279\t    def set_display(self, mode='ascii_art'): \n```\n5. The method `try_format_graphics` does not return a boolean, contrary to what its documentation says. The method seems to work because `if None` fails when the display is not graphics.\n6. Should we remove `pretty_print_default` from the global namespace? I am referring to this comment:\n\n```\n2447\t    This function is pretty useless without the notebook, it shoudn't \n2448\t    be in the global namespace. \n```",
    "created_at": "2013-09-09T09:26:31Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189131",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:13'></a>
A couple of comments regarding the patch

1. There are lots of trailing whitespace :)
2. Can you format `#14466` using the `:trac:` format

```
265	        In #14466 we override IPython's special printing of ``type`` objects
```
3. In `set_display`, the `INPUT` should mention the default input.

```
285	        - ``mode`` -- string. One of ``simple``, ``ascii_art``, or ``typeset``.

- to -

285	        - ``mode`` -- string (default: ``simple``). One of ``simple``, ``ascii_art``, or ``typeset``.
```
4. In `set_display`, the default keyword value should be `simple` in keeping with the default `mode="simple"`.

```
279	    def set_display(self, mode='ascii_art'): 
```
5. The method `try_format_graphics` does not return a boolean, contrary to what its documentation says. The method seems to work because `if None` fails when the display is not graphics.
6. Should we remove `pretty_print_default` from the global namespace? I am referring to this comment:

```
2447	    This function is pretty useless without the notebook, it shoudn't 
2448	    be in the global namespace. 
```



---

archive/issue_comments_189132.json:
```json
{
    "body": "<a id='comment:14'></a>\n1. Easy to solve: `M-x whitespace-mode RET`  ;-)\n\n2., 3.: I've removed the default, its not a method thats intended to be called directly by the user so we might just as well require library code to be explicit.\n\n5. Fixed\n\n6. The notebook calls `pretty_print_default`, so we first need to fix that in the notebook (including new notebook spkg version). In the interest of fixing plotting asap I think we should leave that for later.",
    "created_at": "2013-09-09T10:02:41Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189132",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
1. Easy to solve: `M-x whitespace-mode RET`  ;-)

2., 3.: I've removed the default, its not a method thats intended to be called directly by the user so we might just as well require library code to be explicit.

5. Fixed

6. The notebook calls `pretty_print_default`, so we first need to fix that in the notebook (including new notebook spkg version). In the interest of fixing plotting asap I think we should leave that for later.



---

archive/attachments_020974.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_15168_typeset_displayhook.patch",
    "asset_url": "tarball://root/attachments/ticket15168/trac_15168_typeset_displayhook.patch",
    "created_at": "2013-09-09T10:03:02Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket15168/trac_15168_typeset_displayhook.patch",
    "user": "https://github.com/vbraun"
}
```



---

archive/issue_comments_189133.json:
```json
{
    "body": "**Attachment:** [trac_15168_typeset_displayhook.patch](https://github.com/sagemath/sage/files/ticket15168/trac_15168_typeset_displayhook.patch)\n\nUpdated patch",
    "created_at": "2013-09-09T10:03:02Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189133",
    "user": "https://github.com/vbraun"
}
```

**Attachment:** [trac_15168_typeset_displayhook.patch](https://github.com/sagemath/sage/files/ticket15168/trac_15168_typeset_displayhook.patch)

Updated patch



---

archive/issue_comments_189134.json:
```json
{
    "body": "<a id='comment:15'></a>\nWorks for me, thanks Volker!\n\n(I'll leave nitpicking for ppurka ;-))",
    "created_at": "2013-09-09T17:25:59Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189134",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:15'></a>
Works for me, thanks Volker!

(I'll leave nitpicking for ppurka ;-))



---

archive/issue_comments_189135.json:
```json
{
    "body": "<a id='comment:16'></a>\nSorry this patch works on normal notebook setup, but plots still don't work for me for server pool setup. This is the output I get on evaluating `plot(x)`\n\n```\n~/tmp/sagenb_test\u00bb ~/Installations/sage-5.12.beta4/sage -n port=8888 accounts=True interface='' \"server_pool=['sagenb@localhost']\" openid=True automatic_login=False port_tries=0 directory=./a.sagenb\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 5.12.beta4, Release Date: 2013-08-30                  \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n\nPlease wait while the Sage Notebook server starts...\nnotebook(port=8888,accounts=True,interface=r'''''',server_pool=r'''['sagenb@localhost']''',openid=True,automatic_login=False,port_tries=0,directory=r'''./a.sagenb''')\n**********************************************************************\nWARNING: Running the notebook insecurely not on localhost is dangerous\nbecause its possible for people to sniff passwords and gain access to\nyour account. Make sure you know what you are doing.\n**********************************************************************\nThe notebook files are stored in: a.sagenb\n**********************************************************************\nWARNING: Insecure notebook server listening on external interface.\nUnless you are running this via ssh port forwarding, you are\n**crazy**!  You should run the notebook with the option secure=True.\n**********************************************************************\n**************************************************\n*                                                *\n* Open your web browser to http://localhost:8888 *\n*                                                *\n**************************************************\nExecuting twistd  --pidfile=\"a.sagenb/sagenb.pid\" -ny \"a.sagenb/twistedconf.tac\"\n2013-09-10 13:51:18+0800 [-] Log opened.\n2013-09-10 13:51:18+0800 [-] twistd 13.1.0 (/home/punarbasu/Installations/sage-5.12.beta4/local/bin/python 2.7.5) starting up.\n2013-09-10 13:51:18+0800 [-] reactor class: twisted.internet.epollreactor.EPollReactor.\n2013-09-10 13:51:18+0800 [-] QuietSite starting on 8888\n2013-09-10 13:51:18+0800 [-] Starting factory <__builtin__.QuietSite instance at 0x671e5a8>\n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] got EOF subprocess must have crashed...\n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] ssh: Could not resolve hostname a: Name or service not known\n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] \n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] import os;os.chdir(\"/tmp/tmpQBuIjM\");\n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] execfile(\"_sage_input_2.py\")\n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] \n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] import os;os.chdir(\"/tmp/tmpHowNpR\");\n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] execfile(\"_sage_input_3.py\")\n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] \n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] import os;os.chdir(\"/tmp/tmpVyZzb5\");\n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] execfile(\"_sage_input_4.py\")\n2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] \n\n\n\n# ALso another one\n2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] got EOF subprocess must have crashed...\n2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] \n2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] import os;os.chdir(\"/tmp/tmpWS7Rb9\");\n2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] execfile(\"_sage_input_1.py\")\n2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] ssh: Could not resolve hostname n: Name or service not known\n2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] \n2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] got EOF subprocess must have crashed...\n2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] \n2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] import os;os.chdir(\"/tmp/tmpE2UNNA\");\n2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] execfile(\"_sage_input_1.py\")\n2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] ssh: Could not resolve hostname n: Name or service not known\n2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] \n2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] got EOF subprocess must have crashed...\n2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] \n2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] import os;os.chdir(\"/tmp/tmpBPZ8ZZ\");\n2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] execfile(\"_sage_input_1.py\")\n2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] ssh: Could not resolve hostname  \"/home/punarbasu/Installations/sage-5.12.beta4/sage -python\": Name or service not known\n2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] \n```",
    "created_at": "2013-09-10T05:55:00Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189135",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:16'></a>
Sorry this patch works on normal notebook setup, but plots still don't work for me for server pool setup. This is the output I get on evaluating `plot(x)`

```
~/tmp/sagenb_test» ~/Installations/sage-5.12.beta4/sage -n port=8888 accounts=True interface='' "server_pool=['sagenb@localhost']" openid=True automatic_login=False port_tries=0 directory=./a.sagenb
┌────────────────────────────────────────────────────────────────────┐
│ Sage Version 5.12.beta4, Release Date: 2013-08-30                  │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

Please wait while the Sage Notebook server starts...
notebook(port=8888,accounts=True,interface=r'''''',server_pool=r'''['sagenb@localhost']''',openid=True,automatic_login=False,port_tries=0,directory=r'''./a.sagenb''')
**********************************************************************
WARNING: Running the notebook insecurely not on localhost is dangerous
because its possible for people to sniff passwords and gain access to
your account. Make sure you know what you are doing.
**********************************************************************
The notebook files are stored in: a.sagenb
**********************************************************************
WARNING: Insecure notebook server listening on external interface.
Unless you are running this via ssh port forwarding, you are
**crazy**!  You should run the notebook with the option secure=True.
**********************************************************************
**************************************************
*                                                *
* Open your web browser to http://localhost:8888 *
*                                                *
**************************************************
Executing twistd  --pidfile="a.sagenb/sagenb.pid" -ny "a.sagenb/twistedconf.tac"
2013-09-10 13:51:18+0800 [-] Log opened.
2013-09-10 13:51:18+0800 [-] twistd 13.1.0 (/home/punarbasu/Installations/sage-5.12.beta4/local/bin/python 2.7.5) starting up.
2013-09-10 13:51:18+0800 [-] reactor class: twisted.internet.epollreactor.EPollReactor.
2013-09-10 13:51:18+0800 [-] QuietSite starting on 8888
2013-09-10 13:51:18+0800 [-] Starting factory <__builtin__.QuietSite instance at 0x671e5a8>
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] got EOF subprocess must have crashed...
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] ssh: Could not resolve hostname a: Name or service not known
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] 
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] import os;os.chdir("/tmp/tmpQBuIjM");
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] execfile("_sage_input_2.py")
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] 
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] import os;os.chdir("/tmp/tmpHowNpR");
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] execfile("_sage_input_3.py")
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] 
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] import os;os.chdir("/tmp/tmpVyZzb5");
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] execfile("_sage_input_4.py")
2013-09-10 13:51:34+0800 [HTTPChannel,8,127.0.0.1] 



# ALso another one
2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] got EOF subprocess must have crashed...
2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] 
2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] import os;os.chdir("/tmp/tmpWS7Rb9");
2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] execfile("_sage_input_1.py")
2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] ssh: Could not resolve hostname n: Name or service not known
2013-09-10 13:54:15+0800 [HTTPChannel,15,127.0.0.1] 
2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] got EOF subprocess must have crashed...
2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] 
2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] import os;os.chdir("/tmp/tmpE2UNNA");
2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] execfile("_sage_input_1.py")
2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] ssh: Could not resolve hostname n: Name or service not known
2013-09-10 13:54:15+0800 [HTTPChannel,16,127.0.0.1] 
2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] got EOF subprocess must have crashed...
2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] 
2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] import os;os.chdir("/tmp/tmpBPZ8ZZ");
2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] execfile("_sage_input_1.py")
2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] ssh: Could not resolve hostname  "/home/punarbasu/Installations/sage-5.12.beta4/sage -python": Name or service not known
2013-09-10 13:54:16+0800 [HTTPChannel,16,127.0.0.1] 
```



---

archive/issue_comments_189136.json:
```json
{
    "body": "<a id='comment:17'></a>\nThe `server_pool` should be a list of strings, not a string that evaluates to a list of strings:\n\n```\nnotebook(server_pool=['sagenb@localhost'])\n```\nThough some argument checking would have been nice...",
    "created_at": "2013-09-10T13:11:45Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189136",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
The `server_pool` should be a list of strings, not a string that evaluates to a list of strings:

```
notebook(server_pool=['sagenb@localhost'])
```
Though some argument checking would have been nice...



---

archive/issue_events_133178.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-09-10T15:21:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15168#event-133178"
}
```



---

archive/issue_events_133179.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-09-10T15:21:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15168#event-133179"
}
```



---

archive/issue_comments_189137.json:
```json
{
    "body": "**Reviewer:** Andrey Novoseltsev, Punarbasu Purkayastha",
    "created_at": "2013-09-10T15:21:07Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189137",
    "user": "https://github.com/ppurka"
}
```

**Reviewer:** Andrey Novoseltsev, Punarbasu Purkayastha



---

archive/issue_comments_189138.json:
```json
{
    "body": "<a id='comment:18'></a>\nOops. So sorry. It does work. I had to quote it because of the shell and apparently it is passed in quoted to the python process that actually launches the notebook.\n\nI had tested it on `sage/{misc,groups/matrix_gps}` and it passed all tests. Since the patchbot was also ok with the previous patch (except for some weird startup stuff) it should be good to go. Thanks for the quick fix!",
    "created_at": "2013-09-10T15:21:07Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189138",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:18'></a>
Oops. So sorry. It does work. I had to quote it because of the shell and apparently it is passed in quoted to the python process that actually launches the notebook.

I had tested it on `sage/{misc,groups/matrix_gps}` and it passed all tests. Since the patchbot was also ok with the previous patch (except for some weird startup stuff) it should be good to go. Thanks for the quick fix!



---

archive/issue_comments_189139.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,6 @@\n This may be related to #14469 and corresponding upgrade to sagenb-0.10.7.2 in #15016.\n \n On the same machine with the same settings running 5.11 + sagenb-0.10.7.1 works fine.\n+\n+---\n+Apply to devel/sage: [attachment:trac_15168_typeset_displayhook.patch](https://github.com/sagemath/sage/files/ticket15168/trac_15168_typeset_displayhook.patch)\n``````\n",
    "created_at": "2013-09-10T15:21:52Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189139",
    "user": "https://github.com/ppurka"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,6 @@
 This may be related to #14469 and corresponding upgrade to sagenb-0.10.7.2 in #15016.
 
 On the same machine with the same settings running 5.11 + sagenb-0.10.7.1 works fine.
+
+---
+Apply to devel/sage: [attachment:trac_15168_typeset_displayhook.patch](https://github.com/sagemath/sage/files/ticket15168/trac_15168_typeset_displayhook.patch)
``````




---

archive/issue_events_133180.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-01T07:17:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15168#event-133180"
}
```



---

archive/issue_events_133181.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-01T07:17:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15168#event-133181"
}
```



---

archive/issue_comments_189140.json:
```json
{
    "body": "**Merged:** sage-5.12.rc0",
    "created_at": "2013-10-01T07:17:54Z",
    "issue": "https://github.com/sagemath/sage/issues/15168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15168#issuecomment-189140",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.12.rc0
