# Issue 15061: PARI and Singular can't handle all polynomial resultants

archive/issues_014824.json:
```json
{
    "assignees": [],
    "body": "Consider the following:\n\n\n```\nsage: R.<T> = PowerSeriesRing(QQ)                                                                                                                          \nsage: F = R([1,1],2)                                                                                                                                       \nsage: F                                                                                                                                                    \n1 + T + O(T^2)                                                                                                                                             \nsage: RP.<x> = PolynomialRing(R)                                                                                                                           \nsage: P = x^2 - F                                                                                                                                                                                                                                                     \nsage: P.resultant(P.derivative())\nValueError: series precision must be finite for conversion to pari object.\n```\nIn particular, sage is incapable of computing the discriminant of this *quadratic* polynomial! I'll shortly post a patch that catches this error and uses the sylvester matrix instead.\n\nKeywords: **pari, resultant, sylvester matrix**\n\nBranch/Commit: **[`51523b1`](https://github.com/sagemath/sagetrac-mirror/commit/51523b10dd11ba8e7b0689b351130e7596decc23)**\n\nReviewer: **Martin von Gagern**\n\nAuthor: **Robert Harron, Peter Bruin**\n\nComponent: **algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15061_\n\n",
    "closed_at": "2014-05-06T23:03:10Z",
    "created_at": "2013-08-19T01:04:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "PARI and Singular can't handle all polynomial resultants",
    "type": "issue",
    "updated_at": "2014-05-06T23:03:10Z",
    "url": "https://github.com/sagemath/sage/issues/15061",
    "user": "https://github.com/rharron"
}
```
Consider the following:


```
sage: R.<T> = PowerSeriesRing(QQ)                                                                                                                          
sage: F = R([1,1],2)                                                                                                                                       
sage: F                                                                                                                                                    
1 + T + O(T^2)                                                                                                                                             
sage: RP.<x> = PolynomialRing(R)                                                                                                                           
sage: P = x^2 - F                                                                                                                                                                                                                                                     
sage: P.resultant(P.derivative())
ValueError: series precision must be finite for conversion to pari object.
```
In particular, sage is incapable of computing the discriminant of this *quadratic* polynomial! I'll shortly post a patch that catches this error and uses the sylvester matrix instead.

Keywords: **pari, resultant, sylvester matrix**

Branch/Commit: **[`51523b1`](https://github.com/sagemath/sagetrac-mirror/commit/51523b10dd11ba8e7b0689b351130e7596decc23)**

Reviewer: **Martin von Gagern**

Author: **Robert Harron, Peter Bruin**

Component: **algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/15061_





---

archive/issue_events_214792.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2013-08-19T01:04:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214792"
}
```



---

archive/issue_events_214793.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2013-08-19T01:04:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214793"
}
```



---

archive/issue_events_214794.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2013-08-19T01:04:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214794"
}
```



---

archive/issue_events_214795.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2013-08-19T01:04:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214795"
}
```



---

archive/issue_events_214796.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2013-08-19T01:34:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214796"
}
```



---

archive/issue_events_214797.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2013-08-19T03:13:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214797"
}
```



---

archive/issue_events_214798.json:
```json
{
    "actor": "https://github.com/rharron",
    "created_at": "2013-08-19T03:13:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214798"
}
```



---

archive/issue_comments_184950.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThere's something wrong with the patch because of some whitespace issues. I'll fix this soon.",
    "created_at": "2013-08-19T03:13:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184950",
    "user": "https://github.com/rharron"
}
```

<div id="comment:2" align="right">comment:2</div>

There's something wrong with the patch because of some whitespace issues. I'll fix this soon.



---

archive/issue_comments_184951.json:
```json
{
    "body": "Attachment: **[trac_15061_use_sylvester_matrix_for_resultant_when_pari_fails.patch.gz](https://github.com/sagemath/sage/files/ticket15061/trac_15061_use_sylvester_matrix_for_resultant_when_pari_fails.patch.gz)**",
    "created_at": "2013-08-19T04:44:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184951",
    "user": "https://github.com/rharron"
}
```

Attachment: **[trac_15061_use_sylvester_matrix_for_resultant_when_pari_fails.patch.gz](https://github.com/sagemath/sage/files/ticket15061/trac_15061_use_sylvester_matrix_for_resultant_when_pari_fails.patch.gz)**



---

archive/issue_comments_184952.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI noticed that this problem is also solved by #15601, which implements conversion to PARI for power series with infinite precision by converting them to polynomials.\n\nThere are probably other base rings that cannot be converted to PARI, so using `sylvester_matrix()` as a last resort is probably still useful.  It would be good to have another example that still fails after applying #15601.",
    "created_at": "2014-01-01T21:26:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184952",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:4" align="right">comment:4</div>

I noticed that this problem is also solved by #15601, which implements conversion to PARI for power series with infinite precision by converting them to polynomials.

There are probably other base rings that cannot be converted to PARI, so using `sylvester_matrix()` as a last resort is probably still useful.  It would be good to have another example that still fails after applying #15601.



---

archive/issue_events_214799.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-01-01T21:26:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214799"
}
```



---

archive/issue_events_214800.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-01-01T21:26:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214800"
}
```



---

archive/issue_events_214801.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214801"
}
```



---

archive/issue_events_214802.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214802"
}
```



---

archive/issue_comments_184953.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nMy changes from [#16014 comment:2](https://github.com/sagemath/sage/issues/16014#comment:2) make `P.discriminant()` work.",
    "created_at": "2014-03-27T06:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184953",
    "user": "https://github.com/gagern"
}
```

<div id="comment:6" align="right">comment:6</div>

My changes from [#16014 comment:2](https://github.com/sagemath/sage/issues/16014#comment:2) make `P.discriminant()` work.



---

archive/issue_comments_184954.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@pjbruin](#comment:4):\n> It would be good to have another example that still fails after applying #15601.\n\n```\nsage: R.<x> = AA[]\nsage: (2*x^2 + 3*x + 5).discriminant()\nTypeError: no conversion of this ring to a Singular ring defined\n```\n\nDoes this help, even though it's singular here and not pari? `RIF` does the same. I haven't worked out yet which resultants get computed by pari and which by singular.",
    "created_at": "2014-04-17T15:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184954",
    "user": "https://github.com/gagern"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@pjbruin](#comment:4):
> It would be good to have another example that still fails after applying #15601.

```
sage: R.<x> = AA[]
sage: (2*x^2 + 3*x + 5).discriminant()
TypeError: no conversion of this ring to a Singular ring defined
```

Does this help, even though it's singular here and not pari? `RIF` does the same. I haven't worked out yet which resultants get computed by pari and which by singular.



---

archive/issue_comments_184955.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@gagern](#comment:7):\n> Replying to [@pjbruin](#comment:4):\n> > It would be good to have another example that still fails after applying #15601.\n\n> \n> ```\n> sage: R.<x> = AA[]\n> sage: (2*x^2 + 3*x + 5).discriminant()\n> TypeError: no conversion of this ring to a Singular ring defined\n> ```\n> \n> Does this help, even though it's singular here and not pari? `RIF` does the same. I haven't worked out yet which resultants get computed by pari and which by singular.\n\nThis example still fails with the patch applied.  There seems to be a different problem here, namely that the class of that polynomial inherits from `Polynomial_singular_repr`, even though the base field does not have a conversion to Singular.  The same error occurs when you replace `PowerSeriesRing` by `LaurentSeriesRing` in the original example.",
    "created_at": "2014-04-21T09:43:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184955",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@gagern](#comment:7):
> Replying to [@pjbruin](#comment:4):
> > It would be good to have another example that still fails after applying #15601.

> 
> ```
> sage: R.<x> = AA[]
> sage: (2*x^2 + 3*x + 5).discriminant()
> TypeError: no conversion of this ring to a Singular ring defined
> ```
> 
> Does this help, even though it's singular here and not pari? `RIF` does the same. I haven't worked out yet which resultants get computed by pari and which by singular.

This example still fails with the patch applied.  There seems to be a different problem here, namely that the class of that polynomial inherits from `Polynomial_singular_repr`, even though the base field does not have a conversion to Singular.  The same error occurs when you replace `PowerSeriesRing` by `LaurentSeriesRing` in the original example.



---

archive/issue_comments_184956.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@pjbruin](#comment:8):\n> There seems to be a different problem here, namely that the class of that polynomial inherits from `Polynomial_singular_repr`, even though the base field does not have a conversion to Singular.\n\n`polynomial_element_generic.Polynomial_generic_field` inherits from `polynomial_singular_interface.Polynomial_singular_repr`. That inheritance was introduced in [35bb3ea](https://github.com/sagemath/sagetrac-mirror/commit/35bb3ea22b07ee4477ce70906a4aa7439cdf7bd6) from 2007. Unfortunately I can't see what kind of bug this was supposed to fix. It seems like a bad move to me, though, since that class clearly assumes that you can convert to singular without further checks.",
    "created_at": "2014-05-02T01:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184956",
    "user": "https://github.com/gagern"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@pjbruin](#comment:8):
> There seems to be a different problem here, namely that the class of that polynomial inherits from `Polynomial_singular_repr`, even though the base field does not have a conversion to Singular.

`polynomial_element_generic.Polynomial_generic_field` inherits from `polynomial_singular_interface.Polynomial_singular_repr`. That inheritance was introduced in [35bb3ea](https://github.com/sagemath/sagetrac-mirror/commit/35bb3ea22b07ee4477ce70906a4aa7439cdf7bd6) from 2007. Unfortunately I can't see what kind of bug this was supposed to fix. It seems like a bad move to me, though, since that class clearly assumes that you can convert to singular without further checks.



---

archive/issue_comments_184957.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@gagern](#comment:9):\n> Replying to [@pjbruin](#comment:8):\n> > There seems to be a different problem here, namely that the class of that polynomial inherits from `Polynomial_singular_repr`, even though the base field does not have a conversion to Singular.\n\n> \n> `polynomial_element_generic.Polynomial_generic_field` inherits from `polynomial_singular_interface.Polynomial_singular_repr`. That inheritance was introduced in [35bb3ea](https://github.com/sagemath/sagetrac-mirror/commit/35bb3ea22b07ee4477ce70906a4aa7439cdf7bd6) from 2007.\n\nThat commit only changed the order of the superclasses; the inheritance was there before.\n> Unfortunately I can't see what kind of bug this was supposed to fix. It seems like a bad move to me, though, since that class clearly assumes that you can convert to singular without further checks.\n\nI agree that it is strange for polynomials over arbitrary fields to inherit from that class.  An alternative would be to \"manually\" prescribe this inheritance for polynomials over fields that support conversion to Singular, but that doesn't sound very attractive.  Another alternative would be to move `resultant()` to a more generic polynomial class that first tries to use Singular and uses a generic Python implementation in case that fails.",
    "created_at": "2014-05-02T17:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184957",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@gagern](#comment:9):
> Replying to [@pjbruin](#comment:8):
> > There seems to be a different problem here, namely that the class of that polynomial inherits from `Polynomial_singular_repr`, even though the base field does not have a conversion to Singular.

> 
> `polynomial_element_generic.Polynomial_generic_field` inherits from `polynomial_singular_interface.Polynomial_singular_repr`. That inheritance was introduced in [35bb3ea](https://github.com/sagemath/sagetrac-mirror/commit/35bb3ea22b07ee4477ce70906a4aa7439cdf7bd6) from 2007.

That commit only changed the order of the superclasses; the inheritance was there before.
> Unfortunately I can't see what kind of bug this was supposed to fix. It seems like a bad move to me, though, since that class clearly assumes that you can convert to singular without further checks.

I agree that it is strange for polynomials over arbitrary fields to inherit from that class.  An alternative would be to "manually" prescribe this inheritance for polynomials over fields that support conversion to Singular, but that doesn't sound very attractive.  Another alternative would be to move `resultant()` to a more generic polynomial class that first tries to use Singular and uses a generic Python implementation in case that fails.



---

archive/issue_comments_184958.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@pjbruin](#comment:10):\n> That commit only changed the order of the superclasses; the inheritance was there before.\n\nThanks, I missed that fact.\n\n> I agree that it is strange for polynomials over arbitrary fields to inherit from that class.  An alternative would be to \"manually\" prescribe this inheritance for polynomials over fields that support conversion to Singular, but that doesn't sound very attractive.\n\nI see how [the constructor of PolynomialRing_field](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/rings/polynomial/polynomial_ring.py?id=6.2.rc1#n1467) checks for singular support and sets the `_has_singular` property accordingly. We could use that place to change `element_class` in a suitable way. But if we wanted to handle this using different classes, we'd add one more point to the already dense network of generic vs. special, domain vs. field, sparse vs. dense. Not sure I like that either.\n\n> Another alternative would be to move `resultant()` to a more generic polynomial class that first tries to use Singular and uses a generic Python implementation in case that fails.\n\nSounds good. As a first step, we could change [Polynomial_singular_repr](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/rings/polynomial/polynomial_singular_interface.py?id=6.2.rc1#n372) to check `self.parent()._has_singular` and call `super` if that isn't set. We could then make sure that [Polynomial.resultant](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/rings/polynomial/polynomial_element.pyx?id=6.2.rc1#n4798) falls back to `sylvester_matrix` if PARI doesn't work. Although I don't know yet for which rings PARI *will* work. Messy business\u2026",
    "created_at": "2014-05-02T23:14:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184958",
    "user": "https://github.com/gagern"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@pjbruin](#comment:10):
> That commit only changed the order of the superclasses; the inheritance was there before.

Thanks, I missed that fact.

> I agree that it is strange for polynomials over arbitrary fields to inherit from that class.  An alternative would be to "manually" prescribe this inheritance for polynomials over fields that support conversion to Singular, but that doesn't sound very attractive.

I see how [the constructor of PolynomialRing_field](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/rings/polynomial/polynomial_ring.py?id=6.2.rc1#n1467) checks for singular support and sets the `_has_singular` property accordingly. We could use that place to change `element_class` in a suitable way. But if we wanted to handle this using different classes, we'd add one more point to the already dense network of generic vs. special, domain vs. field, sparse vs. dense. Not sure I like that either.

> Another alternative would be to move `resultant()` to a more generic polynomial class that first tries to use Singular and uses a generic Python implementation in case that fails.

Sounds good. As a first step, we could change [Polynomial_singular_repr](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/rings/polynomial/polynomial_singular_interface.py?id=6.2.rc1#n372) to check `self.parent()._has_singular` and call `super` if that isn't set. We could then make sure that [Polynomial.resultant](https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/rings/polynomial/polynomial_element.pyx?id=6.2.rc1#n4798) falls back to `sylvester_matrix` if PARI doesn't work. Although I don't know yet for which rings PARI *will* work. Messy business…



---

archive/issue_comments_184959.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI think I have found a solution that will solve most of these problems.  In this branch:\n- Rob Harron's patch, with minor modifications.\n- Remove `lcm()` and `resultant()` from `Polynomial_singular_repr`.  For `lcm()`, delete the code and move the doctests to the existing `MPolynomial_libsingular.lcm()`; for `resultant()`, move the code and doctests to the new `MPolynomial_polydict.resultant()`.\n- In `MPolynomial_polydict.resultant()`, fall back on Sylvester matrices if the ring has no Singular implementation.\n- Various cosmetic fixes.",
    "created_at": "2014-05-03T12:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184959",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:12" align="right">comment:12</div>

I think I have found a solution that will solve most of these problems.  In this branch:
- Rob Harron's patch, with minor modifications.
- Remove `lcm()` and `resultant()` from `Polynomial_singular_repr`.  For `lcm()`, delete the code and move the doctests to the existing `MPolynomial_libsingular.lcm()`; for `resultant()`, move the code and doctests to the new `MPolynomial_polydict.resultant()`.
- In `MPolynomial_polydict.resultant()`, fall back on Sylvester matrices if the ring has no Singular implementation.
- Various cosmetic fixes.



---

archive/issue_events_214803.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-03T12:10:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214803"
}
```



---

archive/issue_events_214804.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-03T12:10:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214804"
}
```



---

archive/issue_comments_184960.json:
```json
{
    "body": "Author: **Robert Harron, Peter Bruin**",
    "created_at": "2014-05-03T12:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184960",
    "user": "https://github.com/pjbruin"
}
```

Author: **Robert Harron, Peter Bruin**



---

archive/issue_comments_184961.json:
```json
{
    "body": "Commit: **[`d1a25de`](https://github.com/sagemath/sagetrac-mirror/commit/d1a25de7d398d83dd7aee240b84665648483e279)**",
    "created_at": "2014-05-03T12:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184961",
    "user": "https://github.com/pjbruin"
}
```

Commit: **[`d1a25de`](https://github.com/sagemath/sagetrac-mirror/commit/d1a25de7d398d83dd7aee240b84665648483e279)**



---

archive/issue_events_214805.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-03T12:10:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "title_is": "PARI and Singular can't handle all polynomial resultants",
    "title_was": "Pari can't handle all polynomial resultants",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214805"
}
```



---

archive/issue_comments_184962.json:
```json
{
    "body": "Branch: **[u/pbruin/15061-resultant](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/15061-resultant)**",
    "created_at": "2014-05-03T12:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184962",
    "user": "https://github.com/pjbruin"
}
```

Branch: **[u/pbruin/15061-resultant](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/15061-resultant)**



---

archive/issue_comments_184963.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51523b10dd11ba8e7b0689b351130e7596decc23\"><code>51523b1</code></a></td><td><code>Trac 15061: delete an irrelevant doctest</code></td></tr></table>\n",
    "created_at": "2014-05-03T12:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184963",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51523b10dd11ba8e7b0689b351130e7596decc23"><code>51523b1</code></a></td><td><code>Trac 15061: delete an irrelevant doctest</code></td></tr></table>




---

archive/issue_comments_184964.json:
```json
{
    "body": "Changed commit from **[`d1a25de`](https://github.com/sagemath/sagetrac-mirror/commit/d1a25de7d398d83dd7aee240b84665648483e279)** to **[`51523b1`](https://github.com/sagemath/sagetrac-mirror/commit/51523b10dd11ba8e7b0689b351130e7596decc23)**",
    "created_at": "2014-05-03T12:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184964",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d1a25de`](https://github.com/sagemath/sagetrac-mirror/commit/d1a25de7d398d83dd7aee240b84665648483e279)** to **[`51523b1`](https://github.com/sagemath/sagetrac-mirror/commit/51523b10dd11ba8e7b0689b351130e7596decc23)**



---

archive/issue_comments_184965.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nJudging from the timestamps, your system clock is wrong. Apart from that, I like the code, from what I can tell at first glance. Thanks! Will pull and run tests soon.",
    "created_at": "2014-05-03T12:51:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184965",
    "user": "https://github.com/gagern"
}
```

<div id="comment:14" align="right">comment:14</div>

Judging from the timestamps, your system clock is wrong. Apart from that, I like the code, from what I can tell at first glance. Thanks! Will pull and run tests soon.



---

archive/issue_comments_184966.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@gagern](#comment:14):\n> Judging from the timestamps, your system clock is wrong.\n\nI know, but it is a system that I am not the administrator of.\n> Apart from that, I like the code, from what I can tell at first glance. Thanks! Will pull and run tests soon.\n\nOK, thanks!",
    "created_at": "2014-05-03T12:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184966",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@gagern](#comment:14):
> Judging from the timestamps, your system clock is wrong.

I know, but it is a system that I am not the administrator of.
> Apart from that, I like the code, from what I can tell at first glance. Thanks! Will pull and run tests soon.

OK, thanks!



---

archive/issue_comments_184967.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n> Will pull and run tests soon.\n\nAll tests in `src/sage/rings` passed here. And the code still looks sane at second glance. Am I qualified to give this a positive review?",
    "created_at": "2014-05-03T15:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184967",
    "user": "https://github.com/gagern"
}
```

<div id="comment:16" align="right">comment:16</div>

> Will pull and run tests soon.

All tests in `src/sage/rings` passed here. And the code still looks sane at second glance. Am I qualified to give this a positive review?



---

archive/issue_comments_184968.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@gagern](#comment:16):\n> All tests in `src/sage/rings` passed here. And the code still looks sane at second glance. Am I qualified to give this a positive review?\n\nYou can probably judge yourself if you have done the things suggested in [\"Reviewing Patches\"](http://www.sagemath.org/doc/developer/trac.html#reviewing-patches) in the developer guide.  (Note in particular that you are supposed to run all doctests; things can really break in unexpected places.)",
    "created_at": "2014-05-03T15:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184968",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@gagern](#comment:16):
> All tests in `src/sage/rings` passed here. And the code still looks sane at second glance. Am I qualified to give this a positive review?

You can probably judge yourself if you have done the things suggested in ["Reviewing Patches"](http://www.sagemath.org/doc/developer/trac.html#reviewing-patches) in the developer guide.  (Note in particular that you are supposed to run all doctests; things can really break in unexpected places.)



---

archive/issue_comments_184969.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@pjbruin](#comment:17):\n> You can probably judge yourself if you have done the things suggested in [\"Reviewing Patches\"](http://www.sagemath.org/doc/developer/trac.html#reviewing-patches) in the developer guide.\n\n* `./sage -t --all --long`: done, no new errors\n* `make` including documentation: done\n* `./sage -docbuild reference pdf`: done\n* `./sage -coverage src/sage/rings/polynomial/*.py{,x}`: Diff shows that this now has 6 things less to complain about, and no new ones\n\nI wonder whether the docs for `resultant` regarding \u201cImplemented using PARI\u2019s polresultant function.\u201d should get adjusted. On the other hand, I doubt that detailing the possible choices of algorithm is worth the effort.\n\n> (Note in particular that you are supposed to run all doctests; things can really break in unexpected places.)\n\nDid so, and found #16285 in the process. But that's reproducible without your change, so not your fault.\n\nShouldn't running the testsuite be handled by patchbot? Or hasn't that been migrated to the git workflow yet?",
    "created_at": "2014-05-04T01:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184969",
    "user": "https://github.com/gagern"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@pjbruin](#comment:17):
> You can probably judge yourself if you have done the things suggested in ["Reviewing Patches"](http://www.sagemath.org/doc/developer/trac.html#reviewing-patches) in the developer guide.

* `./sage -t --all --long`: done, no new errors
* `make` including documentation: done
* `./sage -docbuild reference pdf`: done
* `./sage -coverage src/sage/rings/polynomial/*.py{,x}`: Diff shows that this now has 6 things less to complain about, and no new ones

I wonder whether the docs for `resultant` regarding “Implemented using PARI’s polresultant function.” should get adjusted. On the other hand, I doubt that detailing the possible choices of algorithm is worth the effort.

> (Note in particular that you are supposed to run all doctests; things can really break in unexpected places.)

Did so, and found #16285 in the process. But that's reproducible without your change, so not your fault.

Shouldn't running the testsuite be handled by patchbot? Or hasn't that been migrated to the git workflow yet?



---

archive/issue_events_214806.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-05-04T01:42:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214806"
}
```



---

archive/issue_events_214807.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-05-04T01:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214807"
}
```



---

archive/issue_comments_184970.json:
```json
{
    "body": "Reviewer: **Martin von Gagern**",
    "created_at": "2014-05-04T01:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184970",
    "user": "https://github.com/gagern"
}
```

Reviewer: **Martin von Gagern**



---

archive/issue_comments_184971.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@gagern](#comment:18):\n> Shouldn't running the testsuite be handled by patchbot? Or hasn't that been migrated to the git workflow yet?\n\nIt has, but not enough people are running patchbots, and I think there are also some glitches that sometimes prevent it from doing its job.",
    "created_at": "2014-05-05T09:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184971",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@gagern](#comment:18):
> Shouldn't running the testsuite be handled by patchbot? Or hasn't that been migrated to the git workflow yet?

It has, but not enough people are running patchbots, and I think there are also some glitches that sometimes prevent it from doing its job.



---

archive/issue_events_214808.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214808"
}
```



---

archive/issue_events_214809.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214809"
}
```



---

archive/issue_events_214810.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-06T23:03:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214810"
}
```



---

archive/issue_events_214811.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9affacc1f688d62553af82c04ef597dc688a8a91",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-05-06T23:03:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15061#event-214811"
}
```



---

archive/issue_comments_184972.json:
```json
{
    "body": "Changed branch from **[u/pbruin/15061-resultant](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/15061-resultant)** to **[`51523b1`](https://github.com/sagemath/sagetrac-mirror/commit/51523b10dd11ba8e7b0689b351130e7596decc23)**",
    "created_at": "2014-05-06T23:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15061#issuecomment-184972",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/pbruin/15061-resultant](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/15061-resultant)** to **[`51523b1`](https://github.com/sagemath/sagetrac-mirror/commit/51523b10dd11ba8e7b0689b351130e7596decc23)**
