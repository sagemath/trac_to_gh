# Issue 15268: ncurses fails to build on Solaris/SPARC

archive/issues_015031.json:
```json
{
    "body": "I get the following errors on a system Solaris/SPARC (SunOS whocares 5.10 Generic_139555-08 sun4v sparc SUNW,T5140):\n\n```\ngnatmake -P../../../Ada95/src/library.gpr -XBUILD_DIR=`cd ..;pwd` -XSOURCE_DIR=`cd ..;pwd` -XSOURCE_DIR2=`cd ../../../Ada95/src;pwd` -XLIB_NAME=AdaCurses -XSONAME=libAdaCurses.so.1 -XLIB_KIND=static\ngcc -c -g -O2 -gnatafno -gnatVa -gnatwa -I- -gnatA /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb\nterminal_interface-curses.ads:347:41: size for \"Character_Attribute_Set\" too small, minimum allowed is 32\nterminal_interface-curses.ads:367:33: size for \"Attr\" too small, minimum allowed is 32\nterminal_interface-curses.ads:369:38: size for \"Attributed_Character\" too small, minimum allowed is 64\ngnatmake: \"/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb\" compilation error\nmake[2]: *** [../lib/libAdaCurses.a] Error 4\n```\nand\n\n```\ngcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/tour.adb\ngcc -c -gnatpg -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /local/packages/gnat-pro-6.0.1/lib/gcc/sparc-sun-solaris2.8/4.1.2/adainclude/s-stalib.adb\ngcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb\nterminal_interface-curses.ads:347:41: size for \"Character_Attribute_Set\" too small, minimum allowed is 32\nterminal_interface-curses.ads:367:33: size for \"Attr\" too small, minimum allowed is 32\nterminal_interface-curses.ads:369:38: size for \"Attributed_Character\" too small, minimum allowed is 64\ngnatmake: \"/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb\" compilation error\nmake[2]: *** [tour] Error 4\nmake[2]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95/samples'\nmake[1]: *** [all] Error 2\nmake[1]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95'\nmake: *** [all] Error 2\nError building ncurses (narrow).\n```\n(#15080 does not help.)\n\nUse spkg at:\n* http://boxen.math.washington.edu/home/jpflori/spkg/ncurses-5.9.p2.spkg\n\n**Apply** [attachment:trac_15080.patch\u200b] to `$SAGE_LOCAL/bin`.\n\nCC:  @vbraun @jdemeyer\n\nKeywords: spkg ncurses solaris\n\nUpstream: Fixed upstream, but not in a stable release.\n\nReviewer: Volker Braun\n\nAuthor: Jean-Pierre Flori\n\nMerged: sage-5.13.beta3\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15268\n\n",
    "closed_at": "2013-11-09T15:30:37Z",
    "created_at": "2013-10-10T09:31:32Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "ncurses fails to build on Solaris/SPARC",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15268",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
I get the following errors on a system Solaris/SPARC (SunOS whocares 5.10 Generic_139555-08 sun4v sparc SUNW,T5140):

```
gnatmake -P../../../Ada95/src/library.gpr -XBUILD_DIR=`cd ..;pwd` -XSOURCE_DIR=`cd ..;pwd` -XSOURCE_DIR2=`cd ../../../Ada95/src;pwd` -XLIB_NAME=AdaCurses -XSONAME=libAdaCurses.so.1 -XLIB_KIND=static
gcc -c -g -O2 -gnatafno -gnatVa -gnatwa -I- -gnatA /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb
terminal_interface-curses.ads:347:41: size for "Character_Attribute_Set" too small, minimum allowed is 32
terminal_interface-curses.ads:367:33: size for "Attr" too small, minimum allowed is 32
terminal_interface-curses.ads:369:38: size for "Attributed_Character" too small, minimum allowed is 64
gnatmake: "/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb" compilation error
make[2]: *** [../lib/libAdaCurses.a] Error 4
```
and

```
gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/tour.adb
gcc -c -gnatpg -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /local/packages/gnat-pro-6.0.1/lib/gcc/sparc-sun-solaris2.8/4.1.2/adainclude/s-stalib.adb
gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb
terminal_interface-curses.ads:347:41: size for "Character_Attribute_Set" too small, minimum allowed is 32
terminal_interface-curses.ads:367:33: size for "Attr" too small, minimum allowed is 32
terminal_interface-curses.ads:369:38: size for "Attributed_Character" too small, minimum allowed is 64
gnatmake: "/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb" compilation error
make[2]: *** [tour] Error 4
make[2]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95/samples'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95'
make: *** [all] Error 2
Error building ncurses (narrow).
```
(#15080 does not help.)

Use spkg at:
* http://boxen.math.washington.edu/home/jpflori/spkg/ncurses-5.9.p2.spkg

**Apply** [attachment:trac_15080.patchâ€‹] to `$SAGE_LOCAL/bin`.

CC:  @vbraun @jdemeyer

Keywords: spkg ncurses solaris

Upstream: Fixed upstream, but not in a stable release.

Reviewer: Volker Braun

Author: Jean-Pierre Flori

Merged: sage-5.13.beta3

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15268





---

archive/issue_comments_241602.json:
```json
{
    "body": "<a id='comment:1'></a>A quick search found http://gcc.gnu.org/bugzilla/show_bug.cgi?id=14997 which looks of interest.\nI'll try lowering the optimization level.",
    "created_at": "2013-10-10T09:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241602",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>A quick search found http://gcc.gnu.org/bugzilla/show_bug.cgi?id=14997 which looks of interest.
I'll try lowering the optimization level.



---

archive/issue_comments_241603.json:
```json
{
    "body": "<a id='comment:2'></a>Obviously, we need a lot more information in the ticket description, in particular Solaris version, gcc version, full build log of ncurses... because it works on some Solaris/SPARC systems.\n\nCan we simply disable the \"Ada\" part of ncurses, that is almost certainly not needed.",
    "created_at": "2013-10-10T09:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241603",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>Obviously, we need a lot more information in the ticket description, in particular Solaris version, gcc version, full build log of ncurses... because it works on some Solaris/SPARC systems.

Can we simply disable the "Ada" part of ncurses, that is almost certainly not needed.



---

archive/issue_comments_241604.json:
```json
{
    "body": "<a id='comment:3'></a>Agree, just configure without ada (possibly none of the skynet machines has ada, which is why we haven't noticed before?)\n\n```\n  --without-ada           suppress check for Ada95, don't build demo\n```",
    "created_at": "2013-10-10T10:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241604",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>Agree, just configure without ada (possibly none of the skynet machines has ada, which is why we haven't noticed before?)

```
  --without-ada           suppress check for Ada95, don't build demo
```



---

archive/issue_comments_241605.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-I get the following errors:\n+I get the following errors on a system Solaris/SPARC (SunOS whocares 5.10 Generic_139555-08 sun4v sparc SUNW,T5140):\n \n ```\n gnatmake -P../../../Ada95/src/library.gpr -XBUILD_DIR=`cd ..;pwd` -XSOURCE_DIR=`cd ..;pwd` -XSOURCE_DIR2=`cd ../../../Ada95/src;pwd` -XLIB_NAME=AdaCurses -XSONAME=libAdaCurses.so.1 -XLIB_KIND=static\n@@ -26,7 +26,6 @@\n make: *** [all] Error 2\n Error building ncurses (narrow).\n ```\n-\n (#15080 does not help.)\n \n Dependencies: #15080\n``````\n",
    "created_at": "2013-10-10T12:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241605",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-I get the following errors:
+I get the following errors on a system Solaris/SPARC (SunOS whocares 5.10 Generic_139555-08 sun4v sparc SUNW,T5140):
 
 ```
 gnatmake -P../../../Ada95/src/library.gpr -XBUILD_DIR=`cd ..;pwd` -XSOURCE_DIR=`cd ..;pwd` -XSOURCE_DIR2=`cd ../../../Ada95/src;pwd` -XLIB_NAME=AdaCurses -XSONAME=libAdaCurses.so.1 -XLIB_KIND=static
@@ -26,7 +26,6 @@
 make: *** [all] Error 2
 Error building ncurses (narrow).
 ```
-
 (#15080 does not help.)
 
 Dependencies: #15080
``````




---

archive/issue_comments_241606.json:
```json
{
    "body": "<a id='comment:4'></a>Disabling ada by passing --without-ada solves this, but it fails when building the wide version of ncurses (enabled by #15080):\n\n```\n/infres/post/flori/sage-5.12+infres1/local/bin/g++ -I../c++ -I../include -I../../c++ -DHAVE_CONFIG_H   -D__EXTENSIONS__ -D_XOPEN_SOURCE_EXTENDED -D_FILE_OFFSET_BITS=64  -DNDEBUG -I. -I../include -I../../c++/../include -I/infres/post/flori/sage-5.12+infres1/local/include  -fPIC -c ../../c++/demo.cc -o ../obj_s/demo.o\nIn file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,\n                 from /usr/include/stdlib.h:18,\n                 from ../../c++/internal.h:53,\n                 from ../../c++/cursesm.cc:34:\n/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nIn file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,\n                 from /usr/include/stdlib.h:18,\n                 from ../../c++/internal.h:53,\n                 from ../../c++/cursesw.cc:42:\n/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nIn file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,\n                 from /usr/include/stdlib.h:18,\n                 from ../../c++/internal.h:53,\n                 from ../../c++/cursesp.cc:34:\n/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nIn file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,\n                 from /usr/include/stdlib.h:18,\n                 from ../../c++/internal.h:53,\n                 from ../../c++/cursespad.cc:34:\n/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nIn file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,\n                 from /usr/include/stdlib.h:18,\n                 from ../../c++/internal.h:53,\n                 from ../../c++/cursesf.cc:34:\n/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nIn file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,\n                 from /usr/include/stdlib.h:18,\n                 from ../../c++/internal.h:53,\n                 from ../../c++/cursesapp.cc:35:\n/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nIn file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,\n                 from /usr/include/stdlib.h:18,\n                 from ../../c++/internal.h:53,\n                 from ../../c++/demo.cc:41:\n/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nIn file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,\n                 from /usr/include/stdlib.h:18,\n                 from ../../c++/internal.h:53,\n                 from ../../c++/cursesmain.cc:34:\n/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nIn file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,\n                 from /usr/include/stdlib.h:18,\n                 from ../../c++/internal.h:53,\n                 from ../../c++/cursslk.cc:34:\n/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nmake[1]: *** [../obj_s/cursesp.o] Error 1\nmake[1]: *** Waiting for unfinished jobs....\nmake[1]: *** [../obj_s/cursesmain.o] Error 1\nmake[1]: *** [../obj_s/cursslk.o] Error 1\nmake: *** [all] Error 2\nError building ncurses (wide).\n```\n\nMaybe this Solaris install is ill configured.",
    "created_at": "2013-10-10T12:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241606",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>Disabling ada by passing --without-ada solves this, but it fails when building the wide version of ncurses (enabled by #15080):

```
/infres/post/flori/sage-5.12+infres1/local/bin/g++ -I../c++ -I../include -I../../c++ -DHAVE_CONFIG_H   -D__EXTENSIONS__ -D_XOPEN_SOURCE_EXTENDED -D_FILE_OFFSET_BITS=64  -DNDEBUG -I. -I../include -I../../c++/../include -I/infres/post/flori/sage-5.12+infres1/local/include  -fPIC -c ../../c++/demo.cc -o ../obj_s/demo.o
In file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,
                 from /usr/include/stdlib.h:18,
                 from ../../c++/internal.h:53,
                 from ../../c++/cursesm.cc:34:
/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
In file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,
                 from /usr/include/stdlib.h:18,
                 from ../../c++/internal.h:53,
                 from ../../c++/cursesw.cc:42:
/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
In file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,
                 from /usr/include/stdlib.h:18,
                 from ../../c++/internal.h:53,
                 from ../../c++/cursesp.cc:34:
/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
In file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,
                 from /usr/include/stdlib.h:18,
                 from ../../c++/internal.h:53,
                 from ../../c++/cursespad.cc:34:
/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
In file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,
                 from /usr/include/stdlib.h:18,
                 from ../../c++/internal.h:53,
                 from ../../c++/cursesf.cc:34:
/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
In file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,
                 from /usr/include/stdlib.h:18,
                 from ../../c++/internal.h:53,
                 from ../../c++/cursesapp.cc:35:
/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
In file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,
                 from /usr/include/stdlib.h:18,
                 from ../../c++/internal.h:53,
                 from ../../c++/demo.cc:41:
/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
In file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,
                 from /usr/include/stdlib.h:18,
                 from ../../c++/internal.h:53,
                 from ../../c++/cursesmain.cc:34:
/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
In file included from /infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/iso/stdlib_iso.h:39:0,
                 from /usr/include/stdlib.h:18,
                 from ../../c++/internal.h:53,
                 from ../../c++/cursslk.cc:34:
/infres/post/flori/sage-5.12+infres1/local/lib/gcc/sparc-sun-solaris2.10/4.7.3/include-fixed/sys/feature_tests.h:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
make[1]: *** [../obj_s/cursesp.o] Error 1
make[1]: *** Waiting for unfinished jobs....
make[1]: *** [../obj_s/cursesmain.o] Error 1
make[1]: *** [../obj_s/cursslk.o] Error 1
make: *** [all] Error 2
Error building ncurses (wide).
```

Maybe this Solaris install is ill configured.



---

archive/issue_comments_241607.json:
```json
{
    "body": "<a id='comment:5'></a>I guess the \"/usr/include/stdlib.h\" might be the problem.\nI think I already had problems on this machine with Singular including stuff from /usr/include and stumbling upon an old version of GCC which was problematic/incompatible.",
    "created_at": "2013-10-10T12:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241607",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>I guess the "/usr/include/stdlib.h" might be the problem.
I think I already had problems on this machine with Singular including stuff from /usr/include and stumbling upon an old version of GCC which was problematic/incompatible.



---

archive/issue_comments_241608.json:
```json
{
    "body": "<a id='comment:6'></a>Found http://stackoverflow.com/questions/6774738/compiling-ncurses-on-solaris-compiler-or-options-invalid-for-pre-unix-03-x-op",
    "created_at": "2013-10-10T12:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241608",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>Found http://stackoverflow.com/questions/6774738/compiling-ncurses-on-solaris-compiler-or-options-invalid-for-pre-unix-03-x-op



---

archive/issue_comments_241609.json:
```json
{
    "body": "<a id='comment:7'></a>...which is already done by SPARC_fixes.patch...",
    "created_at": "2013-10-10T12:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241609",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>...which is already done by SPARC_fixes.patch...



---

archive/issue_comments_241610.json:
```json
{
    "body": "<a id='comment:8'></a>I see: when the wide version is built, -DXOPEN_SOURCE_EXTENDED is passed again (don't know yet from where though).\n\nSo getting a narrow version by disabling ada is easy.\nNot sure about the wide version yet, nor if that's even possible.",
    "created_at": "2013-10-10T13:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241610",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>I see: when the wide version is built, -DXOPEN_SOURCE_EXTENDED is passed again (don't know yet from where though).

So getting a narrow version by disabling ada is easy.
Not sure about the wide version yet, nor if that's even possible.



---

archive/issue_comments_241611.json:
```json
{
    "body": "<a id='comment:9'></a>The configure output lines\n\n```\nchecking if you want wide-character code... yes\nchecking if we must define _XOPEN_SOURCE_EXTENDED... yes\n```\nmake it doubtful.",
    "created_at": "2013-10-10T13:06:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241611",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>The configure output lines

```
checking if you want wide-character code... yes
checking if we must define _XOPEN_SOURCE_EXTENDED... yes
```
make it doubtful.



---

archive/issue_comments_241612.json:
```json
{
    "body": "<a id='comment:10'></a>Not sure where my post went, but here was the solution I used:\nin case wide characters have to be used, _XOPEN_SOURCE_EXTENDED should be added to CFLAGS (so that gcc gets it) and not to CPPFLAGS (or g++ will get it).\nSee:\nhttps://bitbucket.org/lmnd/lmnd-prefix/src/5901f00d116284a75b9142d13f06ea60df568758/sys-libs/ncurses/ncurses-5.9-r02.1.ebuild?at=lmnd#cl-75",
    "created_at": "2013-10-17T12:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241612",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>Not sure where my post went, but here was the solution I used:
in case wide characters have to be used, _XOPEN_SOURCE_EXTENDED should be added to CFLAGS (so that gcc gets it) and not to CPPFLAGS (or g++ will get it).
See:
https://bitbucket.org/lmnd/lmnd-prefix/src/5901f00d116284a75b9142d13f06ea60df568758/sys-libs/ncurses/ncurses-5.9-r02.1.ebuild?at=lmnd#cl-75



---

archive/issue_comments_241613.json:
```json
{
    "body": "<a id='comment:11'></a>I've reported the two problems upstream.\nThomas is very reactive and I'm sure it will be fixed in a few days, so we could just package the dev release then (and that would also fix the ncurses issue from #15317).\n\nStill packaging an spkg for testing in between (without the #15317 fix).",
    "created_at": "2013-11-04T10:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241613",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:11'></a>I've reported the two problems upstream.
Thomas is very reactive and I'm sure it will be fixed in a few days, so we could just package the dev release then (and that would also fix the ncurses issue from #15317).

Still packaging an spkg for testing in between (without the #15317 fix).



---

archive/issue_comments_241614.json:
```json
{
    "body": "Spkg diff, for review only.",
    "created_at": "2013-11-04T10:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241614",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Spkg diff, for review only.



---

archive/issue_comments_241615.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,35 @@\n+I get the following errors on a system Solaris/SPARC (SunOS whocares 5.10 Generic_139555-08 sun4v sparc SUNW,T5140):\n \n+```\n+gnatmake -P../../../Ada95/src/library.gpr -XBUILD_DIR=`cd ..;pwd` -XSOURCE_DIR=`cd ..;pwd` -XSOURCE_DIR2=`cd ../../../Ada95/src;pwd` -XLIB_NAME=AdaCurses -XSONAME=libAdaCurses.so.1 -XLIB_KIND=static\n+gcc -c -g -O2 -gnatafno -gnatVa -gnatwa -I- -gnatA /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb\n+terminal_interface-curses.ads:347:41: size for \"Character_Attribute_Set\" too small, minimum allowed is 32\n+terminal_interface-curses.ads:367:33: size for \"Attr\" too small, minimum allowed is 32\n+terminal_interface-curses.ads:369:38: size for \"Attributed_Character\" too small, minimum allowed is 64\n+gnatmake: \"/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb\" compilation error\n+make[2]: *** [../lib/libAdaCurses.a] Error 4\n+```\n+and\n+\n+```\n+gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/tour.adb\n+gcc -c -gnatpg -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /local/packages/gnat-pro-6.0.1/lib/gcc/sparc-sun-solaris2.8/4.1.2/adainclude/s-stalib.adb\n+gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb\n+terminal_interface-curses.ads:347:41: size for \"Character_Attribute_Set\" too small, minimum allowed is 32\n+terminal_interface-curses.ads:367:33: size for \"Attr\" too small, minimum allowed is 32\n+terminal_interface-curses.ads:369:38: size for \"Attributed_Character\" too small, minimum allowed is 64\n+gnatmake: \"/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb\" compilation error\n+make[2]: *** [tour] Error 4\n+make[2]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95/samples'\n+make[1]: *** [all] Error 2\n+make[1]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95'\n+make: *** [all] Error 2\n+Error building ncurses (narrow).\n+```\n+(#15080 does not help.)\n+\n+Use spkg at:\n+* http://boxen.math.washington.edu/home/jpflori/spkg/ncurses-5.9.p2.spkg\n \n Dependencies: #15080\n \n``````\n",
    "created_at": "2013-11-04T10:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241615",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,35 @@
+I get the following errors on a system Solaris/SPARC (SunOS whocares 5.10 Generic_139555-08 sun4v sparc SUNW,T5140):
 
+```
+gnatmake -P../../../Ada95/src/library.gpr -XBUILD_DIR=`cd ..;pwd` -XSOURCE_DIR=`cd ..;pwd` -XSOURCE_DIR2=`cd ../../../Ada95/src;pwd` -XLIB_NAME=AdaCurses -XSONAME=libAdaCurses.so.1 -XLIB_KIND=static
+gcc -c -g -O2 -gnatafno -gnatVa -gnatwa -I- -gnatA /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb
+terminal_interface-curses.ads:347:41: size for "Character_Attribute_Set" too small, minimum allowed is 32
+terminal_interface-curses.ads:367:33: size for "Attr" too small, minimum allowed is 32
+terminal_interface-curses.ads:369:38: size for "Attributed_Character" too small, minimum allowed is 64
+gnatmake: "/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb" compilation error
+make[2]: *** [../lib/libAdaCurses.a] Error 4
+```
+and
+
+```
+gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/tour.adb
+gcc -c -gnatpg -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /local/packages/gnat-pro-6.0.1/lib/gcc/sparc-sun-solaris2.8/4.1.2/adainclude/s-stalib.adb
+gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb
+terminal_interface-curses.ads:347:41: size for "Character_Attribute_Set" too small, minimum allowed is 32
+terminal_interface-curses.ads:367:33: size for "Attr" too small, minimum allowed is 32
+terminal_interface-curses.ads:369:38: size for "Attributed_Character" too small, minimum allowed is 64
+gnatmake: "/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb" compilation error
+make[2]: *** [tour] Error 4
+make[2]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95/samples'
+make[1]: *** [all] Error 2
+make[1]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95'
+make: *** [all] Error 2
+Error building ncurses (narrow).
+```
+(#15080 does not help.)
+
+Use spkg at:
+* http://boxen.math.washington.edu/home/jpflori/spkg/ncurses-5.9.p2.spkg
 
 Dependencies: #15080
 
``````




---

archive/issue_comments_241616.json:
```json
{
    "body": "Changing author from \"\" to \"Jean-Pierre Flori\"",
    "created_at": "2013-11-04T10:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241616",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing author from "" to "Jean-Pierre Flori"



---

archive/issue_comments_241617.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-11-04T10:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241617",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_241618.json:
```json
{
    "body": "<a id='comment:12'></a>Attachment [ncurses-5.9.p2.diff](tarball://root/attachments/some-uuid/ticket15268/ncurses-5.9.p2.diff) by jpflori created at 2013-11-04 10:56:34\n\nSpkg uploaded at:\n* http://boxen.math.washington.edu/home/jpflori/spkg/ncurses-5.9.p2.spkg\n\nBuilds ok on x86_64/Ubuntu and sparc/Solaris.",
    "created_at": "2013-11-04T10:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241618",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>Attachment [ncurses-5.9.p2.diff](tarball://root/attachments/some-uuid/ticket15268/ncurses-5.9.p2.diff) by jpflori created at 2013-11-04 10:56:34

Spkg uploaded at:
* http://boxen.math.washington.edu/home/jpflori/spkg/ncurses-5.9.p2.spkg

Builds ok on x86_64/Ubuntu and sparc/Solaris.



---

archive/issue_comments_241619.json:
```json
{
    "body": "<a id='comment:13'></a>lgtm",
    "created_at": "2013-11-04T20:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241619",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>lgtm



---

archive/issue_comments_241620.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2013-11-04T20:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241620",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_241621.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-11-04T20:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241621",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_241622.json:
```json
{
    "body": "Changing dependencies from \"#15080\" to \"\"",
    "created_at": "2013-11-06T12:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241622",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#15080" to ""



---

archive/issue_comments_241623.json:
```json
{
    "body": "<a id='comment:15'></a>If you close #15080 as duplicate, you should copy the patch also!",
    "created_at": "2013-11-06T20:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241623",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>If you close #15080 as duplicate, you should copy the patch also!



---

archive/issue_comments_241624.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-11-06T20:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241624",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_241625.json:
```json
{
    "body": "Changing work_issues from \"\" to \".hgignore\"",
    "created_at": "2013-11-06T20:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241625",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "" to ".hgignore"



---

archive/issue_comments_241626.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,37 @@\n+I get the following errors on a system Solaris/SPARC (SunOS whocares 5.10 Generic_139555-08 sun4v sparc SUNW,T5140):\n \n+```\n+gnatmake -P../../../Ada95/src/library.gpr -XBUILD_DIR=`cd ..;pwd` -XSOURCE_DIR=`cd ..;pwd` -XSOURCE_DIR2=`cd ../../../Ada95/src;pwd` -XLIB_NAME=AdaCurses -XSONAME=libAdaCurses.so.1 -XLIB_KIND=static\n+gcc -c -g -O2 -gnatafno -gnatVa -gnatwa -I- -gnatA /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb\n+terminal_interface-curses.ads:347:41: size for \"Character_Attribute_Set\" too small, minimum allowed is 32\n+terminal_interface-curses.ads:367:33: size for \"Attr\" too small, minimum allowed is 32\n+terminal_interface-curses.ads:369:38: size for \"Attributed_Character\" too small, minimum allowed is 64\n+gnatmake: \"/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb\" compilation error\n+make[2]: *** [../lib/libAdaCurses.a] Error 4\n+```\n+and\n+\n+```\n+gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/tour.adb\n+gcc -c -gnatpg -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /local/packages/gnat-pro-6.0.1/lib/gcc/sparc-sun-solaris2.8/4.1.2/adainclude/s-stalib.adb\n+gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb\n+terminal_interface-curses.ads:347:41: size for \"Character_Attribute_Set\" too small, minimum allowed is 32\n+terminal_interface-curses.ads:367:33: size for \"Attr\" too small, minimum allowed is 32\n+terminal_interface-curses.ads:369:38: size for \"Attributed_Character\" too small, minimum allowed is 64\n+gnatmake: \"/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb\" compilation error\n+make[2]: *** [tour] Error 4\n+make[2]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95/samples'\n+make[1]: *** [all] Error 2\n+make[1]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95'\n+make: *** [all] Error 2\n+Error building ncurses (narrow).\n+```\n+(#15080 does not help.)\n+\n+Use spkg at:\n+* http://boxen.math.washington.edu/home/jpflori/spkg/ncurses-5.9.p2.spkg\n+\n+**Apply** [attachment:trac_15080.patch\u200b] to `$SAGE_LOCAL/bin`.\n \n Dependencies: #15080\n \n``````\n",
    "created_at": "2013-11-06T20:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241626",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,37 @@
+I get the following errors on a system Solaris/SPARC (SunOS whocares 5.10 Generic_139555-08 sun4v sparc SUNW,T5140):
 
+```
+gnatmake -P../../../Ada95/src/library.gpr -XBUILD_DIR=`cd ..;pwd` -XSOURCE_DIR=`cd ..;pwd` -XSOURCE_DIR2=`cd ../../../Ada95/src;pwd` -XLIB_NAME=AdaCurses -XSONAME=libAdaCurses.so.1 -XLIB_KIND=static
+gcc -c -g -O2 -gnatafno -gnatVa -gnatwa -I- -gnatA /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb
+terminal_interface-curses.ads:347:41: size for "Character_Attribute_Set" too small, minimum allowed is 32
+terminal_interface-curses.ads:367:33: size for "Attr" too small, minimum allowed is 32
+terminal_interface-curses.ads:369:38: size for "Attributed_Character" too small, minimum allowed is 64
+gnatmake: "/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/src/terminal_interface-curses-aux.adb" compilation error
+make[2]: *** [../lib/libAdaCurses.a] Error 4
+```
+and
+
+```
+gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/tour.adb
+gcc -c -gnatpg -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /local/packages/gnat-pro-6.0.1/lib/gcc/sparc-sun-solaris2.8/4.1.2/adainclude/s-stalib.adb
+gcc -c -I./ -I../../../Ada95/samples -I../src -I../../../Ada95/samples/../src -gnatpn -O3 -I../../../Ada95/samples -I- /infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb
+terminal_interface-curses.ads:347:41: size for "Character_Attribute_Set" too small, minimum allowed is 32
+terminal_interface-curses.ads:367:33: size for "Attr" too small, minimum allowed is 32
+terminal_interface-curses.ads:369:38: size for "Attributed_Character" too small, minimum allowed is 64
+gnatmake: "/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/Ada95/samples/sample.adb" compilation error
+make[2]: *** [tour] Error 4
+make[2]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95/samples'
+make[1]: *** [all] Error 2
+make[1]: Leaving directory `/infres/post/flori/sage-5.12+infres1/spkg/build/ncurses-5.9.p1/src/narrow/Ada95'
+make: *** [all] Error 2
+Error building ncurses (narrow).
+```
+(#15080 does not help.)
+
+Use spkg at:
+* http://boxen.math.washington.edu/home/jpflori/spkg/ncurses-5.9.p2.spkg
+
+**Apply** [attachment:trac_15080.patchâ€‹] to `$SAGE_LOCAL/bin`.
 
 Dependencies: #15080
 
``````




---

archive/issue_comments_241627.json:
```json
{
    "body": "<a id='comment:16'></a>Attachment [trac_15080.patch](tarball://root/attachments/some-uuid/ticket15268/trac_15080.patch) by @jdemeyer created at 2013-11-06 20:07:30",
    "created_at": "2013-11-06T20:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241627",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>Attachment [trac_15080.patch](tarball://root/attachments/some-uuid/ticket15268/trac_15080.patch) by @jdemeyer created at 2013-11-06 20:07:30



---

archive/issue_comments_241628.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-11-06T20:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241628",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_241629.json:
```json
{
    "body": "<a id='comment:17'></a>Thanks, forgot!",
    "created_at": "2013-11-06T22:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241629",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>Thanks, forgot!



---

archive/issue_comments_241630.json:
```json
{
    "body": "Changing work_issues from \".hgignore\" to \"\"",
    "created_at": "2013-11-08T10:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241630",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from ".hgignore" to ""



---

archive/issue_comments_241631.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-11-09T15:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241631",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_241632.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.13.beta3\"",
    "created_at": "2013-11-09T15:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241632",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.13.beta3"



---

archive/issue_events_044195.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-09T15:30:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15268#event-44195"
}
```



---

archive/issue_comments_241633.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Fixed upstream, but not in a stable release.\"",
    "created_at": "2013-11-18T15:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241633",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing upstream from "N/A" to "Fixed upstream, but not in a stable release."



---

archive/issue_comments_241634.json:
```json
{
    "body": "<a id='comment:20'></a>The remaining XOPEN_SOURCE_EXTENDED problem is fixed upstream:\n* http://lists.gnu.org/archive/html/bug-ncurses/2013-11/msg00012.html",
    "created_at": "2013-11-18T15:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15268#issuecomment-241634",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:20'></a>The remaining XOPEN_SOURCE_EXTENDED problem is fixed upstream:
* http://lists.gnu.org/archive/html/bug-ncurses/2013-11/msg00012.html
