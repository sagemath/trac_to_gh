# Issue 15681: Name of immutable graphs

archive/issues_015444.json:
```json
{
    "body": "Travis noticed in #15669 that immutable graphs were nameless. That's terrible.\n\n```\nsage: graphs.PetersenGraph()                      \nPetersen graph: Graph on 10 vertices\nsage: Graph(graphs.PetersenGraph(),immutable=True)\nGraph on 10 vertices\n```\n\nThis patch fixes it. So doing, we now store the `name` attribute in the Python graph itself and not in the backend, where it does not really belong. This thing is for storing the graph data, not fancy attributes !\n\nNew behaviour :\n\n```\nsage: graphs.PetersenGraph()\nPetersen graph: Graph on 10 vertices\nsage: Graph(graphs.PetersenGraph(),immutable=True)\nPetersen graph: Graph on 10 vertices\n```\n\nThis patch is based upon #15623, because God made it that we will have to pay the Poset's `._immutable` hack until #15623 is merged `:-P`\n\nNathann\n\nCC:  simonking @tscrim\n\nReviewer: Travis Scrimshaw\n\nAuthor: Nathann Cohen\n\nBranch: u/tscrim/ticket/15681\n\nDependencies: #15623\n\nCommit: 81fc8a472a2636acfaeaf132b085878f5ec3674f\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15681\n\n",
    "closed_at": "2014-02-01T19:39:13Z",
    "created_at": "2014-01-15T10:16:24Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Name of immutable graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15681",
    "user": "https://github.com/nathanncohen"
}
```
Travis noticed in #15669 that immutable graphs were nameless. That's terrible.

```
sage: graphs.PetersenGraph()                      
Petersen graph: Graph on 10 vertices
sage: Graph(graphs.PetersenGraph(),immutable=True)
Graph on 10 vertices
```

This patch fixes it. So doing, we now store the `name` attribute in the Python graph itself and not in the backend, where it does not really belong. This thing is for storing the graph data, not fancy attributes !

New behaviour :

```
sage: graphs.PetersenGraph()
Petersen graph: Graph on 10 vertices
sage: Graph(graphs.PetersenGraph(),immutable=True)
Petersen graph: Graph on 10 vertices
```

This patch is based upon #15623, because God made it that we will have to pay the Poset's `._immutable` hack until #15623 is merged `:-P`

Nathann

CC:  simonking @tscrim

Reviewer: Travis Scrimshaw

Author: Nathann Cohen

Branch: u/tscrim/ticket/15681

Dependencies: #15623

Commit: 81fc8a472a2636acfaeaf132b085878f5ec3674f

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15681





---

archive/issue_comments_252195.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ncohen/15681\"",
    "created_at": "2014-01-15T10:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252195",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "u/ncohen/15681"



---

archive/issue_comments_252196.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-15T10:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252196",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_252197.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-01-15T10:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252197",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_252198.json:
```json
{
    "body": "Changing commit from \"\" to \"898a8e64f5f96dea06b16d1f9f17b583f75d7fe4\"",
    "created_at": "2014-01-15T10:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "898a8e64f5f96dea06b16d1f9f17b583f75d7fe4"



---

archive/issue_comments_252199.json:
```json
{
    "body": "<a id='comment:4'></a>Hey Nathann,\n\nCould you add a few doctests showing this is fixed and the new behavior?\n\nThanks,\n\nTravis",
    "created_at": "2014-01-15T17:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252199",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>Hey Nathann,

Could you add a few doctests showing this is fixed and the new behavior?

Thanks,

Travis



---

archive/issue_comments_252200.json:
```json
{
    "body": "Changing commit from \"898a8e64f5f96dea06b16d1f9f17b583f75d7fe4\" to \"46cfc90f24aacec0d39f5828709117683ea61b06\"",
    "created_at": "2014-01-15T17:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "898a8e64f5f96dea06b16d1f9f17b583f75d7fe4" to "46cfc90f24aacec0d39f5828709117683ea61b06"



---

archive/issue_comments_252201.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-15T17:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252201",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252202.json:
```json
{
    "body": "<a id='comment:6'></a>I don't know what else to add `O_o`\n\nNathann",
    "created_at": "2014-01-15T17:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252202",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>I don't know what else to add `O_o`

Nathann



---

archive/issue_comments_252203.json:
```json
{
    "body": "<a id='comment:7'></a>Something like\n\n```\nsage: P = graphs.PetersenGraph()\nsage: G = P.copy(immutable=True)\nsage: G.name(\"blah\")\n---------------------------------------------------------------------------\nTraceback (most recent call last):\n...\nNotImplementedError: An immutable graph does not change name\n```\nAlthough I think a `TypeError` is a better error message because IMO `NotImplementedError` are for things which have not been implemented yet. Yet this is only my opinion and I won't hold this ticket up because of that.",
    "created_at": "2014-01-15T17:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252203",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>Something like

```
sage: P = graphs.PetersenGraph()
sage: G = P.copy(immutable=True)
sage: G.name("blah")
---------------------------------------------------------------------------
Traceback (most recent call last):
...
NotImplementedError: An immutable graph does not change name
```
Although I think a `TypeError` is a better error message because IMO `NotImplementedError` are for things which have not been implemented yet. Yet this is only my opinion and I won't hold this ticket up because of that.



---

archive/issue_comments_252204.json:
```json
{
    "body": "<a id='comment:8'></a>Hellooooooooooo !!!\n\nI rebased it on beta5 and added a doctest. I used a `NotImplementedError` here, because Simon made me use NotImplementedError for the `add_edge` function of the immutable graph backend when I wanted to use `ValueError`. I personally think that it does not matter the slightest. And I take as proof that nobody agrees on what it should be, which means that no standard is good here `:-P`\n\nNathann",
    "created_at": "2014-01-16T08:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252204",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>Hellooooooooooo !!!

I rebased it on beta5 and added a doctest. I used a `NotImplementedError` here, because Simon made me use NotImplementedError for the `add_edge` function of the immutable graph backend when I wanted to use `ValueError`. I personally think that it does not matter the slightest. And I take as proof that nobody agrees on what it should be, which means that no standard is good here `:-P`

Nathann



---

archive/issue_comments_252205.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-16T08:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252205",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252206.json:
```json
{
    "body": "Changing commit from \"46cfc90f24aacec0d39f5828709117683ea61b06\" to \"7e9d208f0c1bc4ca3ef237e4bff182ee58e28b82\"",
    "created_at": "2014-01-16T08:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "46cfc90f24aacec0d39f5828709117683ea61b06" to "7e9d208f0c1bc4ca3ef237e4bff182ee58e28b82"



---

archive/issue_comments_252207.json:
```json
{
    "body": "<a id='comment:10'></a>*shrugs* Positive review then. Thanks Nathann!",
    "created_at": "2014-01-16T16:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252207",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>*shrugs* Positive review then. Thanks Nathann!



---

archive/issue_comments_252208.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-16T16:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252208",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_252209.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2014-01-16T16:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252209",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_252210.json:
```json
{
    "body": "<a id='comment:11'></a>It's a pleasure to work when tickets are written and reviewed in a couple of days, really `:-D`\n\nNathann",
    "created_at": "2014-01-16T16:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252210",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>It's a pleasure to work when tickets are written and reviewed in a couple of days, really `:-D`

Nathann



---

archive/issue_comments_252211.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [ncohen](#comment%3A11):\n> It's a pleasure to work when tickets are written and reviewed in a couple of days, really `:-D`\n\n\nAgreed. `XD`",
    "created_at": "2014-01-16T16:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252211",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Replying to [ncohen](#comment%3A11):
> It's a pleasure to work when tickets are written and reviewed in a couple of days, really `:-D`


Agreed. `XD`



---

archive/issue_comments_252212.json:
```json
{
    "body": "<a id='comment:13'></a>Branch with rebased #15623.\n\n---\nNew commits:",
    "created_at": "2014-01-30T15:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252212",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>Branch with rebased #15623.

---
New commits:



---

archive/issue_comments_252213.json:
```json
{
    "body": "Changing commit from \"7e9d208f0c1bc4ca3ef237e4bff182ee58e28b82\" to \"81fc8a472a2636acfaeaf132b085878f5ec3674f\"",
    "created_at": "2014-01-30T15:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252213",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "7e9d208f0c1bc4ca3ef237e4bff182ee58e28b82" to "81fc8a472a2636acfaeaf132b085878f5ec3674f"



---

archive/issue_comments_252214.json:
```json
{
    "body": "Changing branch from \"u/ncohen/15681\" to \"u/tscrim/ticket/15681\"",
    "created_at": "2014-01-30T15:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252214",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "u/ncohen/15681" to "u/tscrim/ticket/15681"



---

archive/issue_events_046013.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15681#event-46013"
}
```



---

archive/issue_events_046014.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-01T19:39:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15681#event-46014"
}
```



---

archive/issue_comments_252215.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-02-01T19:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15681#issuecomment-252215",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
