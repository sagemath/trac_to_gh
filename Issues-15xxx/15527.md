# Issue 15527: Automatically pick up version for bdist

archive/issues_015290.json:
```json
{
    "assignees": [],
    "body": "\n\n**Branch:** [u/vbraun/bdist_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/bdist_version)\n\n**Commit:** [7673476bbfdf8522b86eaed8551a2206cdbfac28](https://github.com/sagemath/sagetrac-mirror/commit/7673476bbfdf8522b86eaed8551a2206cdbfac28)\n\n**Reviewer:** R. Andrew Ohana\n\n**Author:** Volker Braun\n\nIssue created by migration from https://trac.sagemath.org/ticket/15527\n\n",
    "closed_at": "2013-12-16T22:54:26Z",
    "created_at": "2013-12-16T18:46:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20scripts",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Automatically pick up version for bdist",
    "type": "issue",
    "updated_at": "2014-08-14T13:36:29Z",
    "url": "https://github.com/sagemath/sage/issues/15527",
    "user": "https://github.com/vbraun"
}
```


**Branch:** [u/vbraun/bdist_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/bdist_version)

**Commit:** [7673476bbfdf8522b86eaed8551a2206cdbfac28](https://github.com/sagemath/sagetrac-mirror/commit/7673476bbfdf8522b86eaed8551a2206cdbfac28)

**Reviewer:** R. Andrew Ohana

**Author:** Volker Braun

Issue created by migration from https://trac.sagemath.org/ticket/15527





---

archive/issue_events_188410.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:46:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "milestone_number": null,
    "milestone_title": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188410"
}
```



---

archive/issue_comments_196317.json:
```json
{
    "body": "**Branch:** [u/vbraun/bdist_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/bdist_version)",
    "created_at": "2013-12-16T18:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196317",
    "user": "https://github.com/vbraun"
}
```

**Branch:** [u/vbraun/bdist_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/bdist_version)



---

archive/issue_events_188411.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:54:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20scripts",
    "label_color": "08517b",
    "label_name": "component: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188411"
}
```



---

archive/issue_events_188412.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:54:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188412"
}
```



---

archive/issue_events_188413.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:54:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188413"
}
```



---

archive/issue_events_188414.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:54:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "milestone_number": null,
    "milestone_title": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188414"
}
```



---

archive/issue_comments_196318.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td>[7673476](https://github.com/sagemath/sagetrac-mirror/commit/7673476)</td><td><code>Remove the version argument from sage -bdist</code></td></tr></table>\n",
    "created_at": "2013-12-16T18:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196318",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td>[7673476](https://github.com/sagemath/sagetrac-mirror/commit/7673476)</td><td><code>Remove the version argument from sage -bdist</code></td></tr></table>




---

archive/issue_comments_196319.json:
```json
{
    "body": "**Commit:** [7673476bbfdf8522b86eaed8551a2206cdbfac28](https://github.com/sagemath/sagetrac-mirror/commit/7673476bbfdf8522b86eaed8551a2206cdbfac28)",
    "created_at": "2013-12-16T18:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196319",
    "user": "https://github.com/vbraun"
}
```

**Commit:** [7673476bbfdf8522b86eaed8551a2206cdbfac28](https://github.com/sagemath/sagetrac-mirror/commit/7673476bbfdf8522b86eaed8551a2206cdbfac28)



---

archive/issue_events_188415.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:54:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188415"
}
```



---

archive/issue_comments_196320.json:
```json
{
    "body": "**Author:** Volker Braun",
    "created_at": "2013-12-16T18:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196320",
    "user": "https://github.com/vbraun"
}
```

**Author:** Volker Braun



---

archive/issue_comments_196321.json:
```json
{
    "body": "**Reviewer:** R. Andrew Ohana",
    "created_at": "2013-12-16T20:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196321",
    "user": "https://github.com/ohanar"
}
```

**Reviewer:** R. Andrew Ohana



---

archive/issue_events_188416.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-16T20:22:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188416"
}
```



---

archive/issue_events_188417.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-12-16T20:22:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188417"
}
```



---

archive/issue_events_188418.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T22:54:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188418"
}
```



---

archive/issue_events_188419.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "15d89e9d06fd150be0fc741884a8039e9fcac6aa",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2013-12-16T22:54:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15527#event-188419"
}
```



---

archive/issue_comments_196322.json:
```json
{
    "body": "<a id='comment:5'></a>\nSlipped in under the radar!   This is **nowhere documented** (I do not count the `usage` function because that only shows up if one puts in too many arguments, not \"too few\"), there is no Trac number in the commit (I still do not understand why this is not considered a serious regression for ordinary people trying to find out when things happened), and I'll point out that http://ask.sagemath.org/question/7979/exact-syntax-for-bdist/ also now is obsolete.  The only place where `bdist` is even mentioned in the documentation is http://sagemath.org/doc/installation/source.html?highlight=bdist and that still has the old syntax.  But this is a backwards-incompatible change which just wasted a lot of my time.",
    "created_at": "2014-08-12T05:55:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196322",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
Slipped in under the radar!   This is **nowhere documented** (I do not count the `usage` function because that only shows up if one puts in too many arguments, not "too few"), there is no Trac number in the commit (I still do not understand why this is not considered a serious regression for ordinary people trying to find out when things happened), and I'll point out that http://ask.sagemath.org/question/7979/exact-syntax-for-bdist/ also now is obsolete.  The only place where `bdist` is even mentioned in the documentation is http://sagemath.org/doc/installation/source.html?highlight=bdist and that still has the old syntax.  But this is a backwards-incompatible change which just wasted a lot of my time.



---

archive/issue_comments_196323.json:
```json
{
    "body": "<a id='comment:6'></a>\nWhen you make the commit you can't know for sure in which ticket the commit ends up. You can guess, but if you guess wrong its impossible to change (commits are immutable after all). The ticket can easily be found by following forward to the next release manager commit, e.g. automatized by \"git trac find <sha1>\"",
    "created_at": "2014-08-12T11:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196323",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>
When you make the commit you can't know for sure in which ticket the commit ends up. You can guess, but if you guess wrong its impossible to change (commits are immutable after all). The ticket can easily be found by following forward to the next release manager commit, e.g. automatized by "git trac find <sha1>"



---

archive/issue_comments_196324.json:
```json
{
    "body": "<a id='comment:7'></a>\nI don't follow.  Even if a branch has several tickets it ends up closing, each individual commit should surely be connected (if only morally) to a given ticket?  If a ticket is closed as not valid because a later one subsumes it, that is fine - the later one is the ticket.  If this isn't possible in the new workflow, at the very least one could go back to the (quite successful, at the time) policy of asking everyone to put the ticket # in the commit message.  This seems very reasonable and we already did it.\n\nAnd now `git trac` becomes almost necessary, which is sort of unfortunate.\n\n```\n$ git log | grep 15527\n    Trac #15527: Automatically pick up version for bdist\n    URL: http://trac.sagemath.org/15527\ncommit 0c2032f1bbf24a1552715ea3bbefd646def0a902\n$ git log 0c2032f\ncommit 0c2032f1bbf24a1552715ea3bbefd646def0a902\nMerge: fd93366 8a0a800\nAuthor: William Stein <wstein@gmail.com>\nDate:   Mon Aug 27 13:24:26 2007 -0700\n\n    merge\n```\nThis is even more confusing.  In fact, it's commit 15d89e9.\n\nI get that there is this nonlinear structure.  But that means the ticket #s are more important, not less, because `git log` is pretty useless for trying to figure order out (bisecting) and it would be nice not to have to be a git expert to find out what caused a problem.\n\nAnyway, you also shouldn't have to be a git expert - or to have to guess about `git trac find` since [the developer guide section on git trac doesn't have it](http://sagemath.org/doc/developer/git_trac.html#chapter-git-trac) - in order to guess the ticket.\n\nNor to guess the version of Sage a given 'ticket' is merged in!  Since Jeroen automated these things, I can't see why it is so horrible to try them again... but I suppose I don't have much chance of prevailing here.",
    "created_at": "2014-08-12T13:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196324",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>
I don't follow.  Even if a branch has several tickets it ends up closing, each individual commit should surely be connected (if only morally) to a given ticket?  If a ticket is closed as not valid because a later one subsumes it, that is fine - the later one is the ticket.  If this isn't possible in the new workflow, at the very least one could go back to the (quite successful, at the time) policy of asking everyone to put the ticket # in the commit message.  This seems very reasonable and we already did it.

And now `git trac` becomes almost necessary, which is sort of unfortunate.

```
$ git log | grep 15527
    Trac #15527: Automatically pick up version for bdist
    URL: http://trac.sagemath.org/15527
commit 0c2032f1bbf24a1552715ea3bbefd646def0a902
$ git log 0c2032f
commit 0c2032f1bbf24a1552715ea3bbefd646def0a902
Merge: fd93366 8a0a800
Author: William Stein <wstein@gmail.com>
Date:   Mon Aug 27 13:24:26 2007 -0700

    merge
```
This is even more confusing.  In fact, it's commit 15d89e9.

I get that there is this nonlinear structure.  But that means the ticket #s are more important, not less, because `git log` is pretty useless for trying to figure order out (bisecting) and it would be nice not to have to be a git expert to find out what caused a problem.

Anyway, you also shouldn't have to be a git expert - or to have to guess about `git trac find` since [the developer guide section on git trac doesn't have it](http://sagemath.org/doc/developer/git_trac.html#chapter-git-trac) - in order to guess the ticket.

Nor to guess the version of Sage a given 'ticket' is merged in!  Since Jeroen automated these things, I can't see why it is so horrible to try them again... but I suppose I don't have much chance of prevailing here.



---

archive/issue_comments_196325.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [@kcrisman](#comment%3A7):\n> I don't follow.  Even if a branch has several tickets it ends up closing, each individual commit should surely be connected (if only morally) to a given ticket? \n\nYes, but you can only tell for sure after everything is merged. E.g. you make a commit, then discover that ticket is duplicate of another one. Or you might start writing code without a ticket open at all, and only later decide to contribute it.",
    "created_at": "2014-08-12T13:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196325",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>
Replying to [@kcrisman](#comment%3A7):
> I don't follow.  Even if a branch has several tickets it ends up closing, each individual commit should surely be connected (if only morally) to a given ticket? 

Yes, but you can only tell for sure after everything is merged. E.g. you make a commit, then discover that ticket is duplicate of another one. Or you might start writing code without a ticket open at all, and only later decide to contribute it.



---

archive/issue_comments_196326.json:
```json
{
    "body": "<a id='comment:9'></a>\nPS: In your grep, the commit sha1 happens to have the search string inside. Its not the commit that you are looking for. You want\n\n```\n$ git trac log 15527\ncommit 15d89e9d06fd150be0fc741884a8039e9fcac6aa\nMerge: 40ed717 7673476\nAuthor: Release Manager <release@sagemath.org>\nDate:   Mon Dec 16 22:54:25 2013 +0000\n\n    Trac #15527: Automatically pick up version for bdist\n    \n    URL: http://trac.sagemath.org/15527\n    Reported by: vbraun\n    Ticket author(s): Volker Braun\n    Reviewer(s): R. Andrew Ohana\n\ncommit 7673476bbfdf8522b86eaed8551a2206cdbfac28\nAuthor: Volker Braun <vbraun.name@gmail.com>\nDate:   Mon Dec 16 18:52:50 2013 +0000\n\n    Remove the version argument from sage -bdist\n\n```",
    "created_at": "2014-08-12T13:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196326",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
PS: In your grep, the commit sha1 happens to have the search string inside. Its not the commit that you are looking for. You want

```
$ git trac log 15527
commit 15d89e9d06fd150be0fc741884a8039e9fcac6aa
Merge: 40ed717 7673476
Author: Release Manager <release@sagemath.org>
Date:   Mon Dec 16 22:54:25 2013 +0000

    Trac #15527: Automatically pick up version for bdist
    
    URL: http://trac.sagemath.org/15527
    Reported by: vbraun
    Ticket author(s): Volker Braun
    Reviewer(s): R. Andrew Ohana

commit 7673476bbfdf8522b86eaed8551a2206cdbfac28
Author: Volker Braun <vbraun.name@gmail.com>
Date:   Mon Dec 16 18:52:50 2013 +0000

    Remove the version argument from sage -bdist

```



---

archive/issue_comments_196327.json:
```json
{
    "body": "<a id='comment:10'></a>\n> PS: In your grep, the commit sha1 happens to have the search string inside. Its not the commit that you are looking for. You want\n\nThese aren't the droids you're looking for...\n> $ git trac log 15527\n\nBut don't I need to know the ticket number in the first place to find this?",
    "created_at": "2014-08-13T03:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196327",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>
> PS: In your grep, the commit sha1 happens to have the search string inside. Its not the commit that you are looking for. You want

These aren't the droids you're looking for...
> $ git trac log 15527

But don't I need to know the ticket number in the first place to find this?



---

archive/issue_comments_196328.json:
```json
{
    "body": "<a id='comment:11'></a>\nBy the way, I think this shows that the optional directory argument no longer works properly, or so it seems from the way it tries to cd into the temp directory twice... :-(",
    "created_at": "2014-08-14T13:36:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15527",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15527#issuecomment-196328",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
By the way, I think this shows that the optional directory argument no longer works properly, or so it seems from the way it tries to cd into the temp directory twice... :-(
