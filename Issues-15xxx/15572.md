# Issue 15572: Exceptions when multiedges/loops are not supported

archive/issues_015335.json:
```json
{
    "body": "Some Graph functions are not made to handle non-simple graphs, i.e. graphs containing loops or multiple edges. This ticket adds necessary exceptions from place to place, hoping no error remains ignored.\n\nThe exception advises the user to remove loops/multiple edges from his graph and try again (and to update the function if he thinks that not supporting non-simple graphs is a mistake) `:-P`\n\nThis has been reported on sage-support fairly recently [1], and thousands of times before. Past time to deal with those wrong answers `:-/`\n\n[1] https://groups.google.com/d/msg/sage-support/bsXYMXwgW5w/LPrmCNGoah0J\n\nCC:  azi combinat @nthiery @dcoudert\n\nReviewer: Jean-Baptiste Priez\n\nAuthor: Nathann Cohen\n\nBranch: u/ncohen/15572\n\nCommit: 606221c3868cdb2df84654ec92756469c9836d18\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15572\n\n",
    "closed_at": "2014-01-05T00:32:13Z",
    "created_at": "2013-12-23T13:13:06Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.1",
    "title": "Exceptions when multiedges/loops are not supported",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15572",
    "user": "https://github.com/nathanncohen"
}
```
Some Graph functions are not made to handle non-simple graphs, i.e. graphs containing loops or multiple edges. This ticket adds necessary exceptions from place to place, hoping no error remains ignored.

The exception advises the user to remove loops/multiple edges from his graph and try again (and to update the function if he thinks that not supporting non-simple graphs is a mistake) `:-P`

This has been reported on sage-support fairly recently [1], and thousands of times before. Past time to deal with those wrong answers `:-/`

[1] https://groups.google.com/d/msg/sage-support/bsXYMXwgW5w/LPrmCNGoah0J

CC:  azi combinat @nthiery @dcoudert

Reviewer: Jean-Baptiste Priez

Author: Nathann Cohen

Branch: u/ncohen/15572

Commit: 606221c3868cdb2df84654ec92756469c9836d18

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15572





---

archive/issue_comments_210487.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2013-12-23T13:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210487",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_210488.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-23T13:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210488",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_210489.json:
```json
{
    "body": "<a id='comment:2'></a>Looks like `DiGraph.is_directed_acylic` actually has no problems with loops. The exception broke a doctest in `rings/semirings/non_negative_integer_semiring.py`.\n\nFixed !\n\nNathann",
    "created_at": "2013-12-31T14:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210489",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>Looks like `DiGraph.is_directed_acylic` actually has no problems with loops. The exception broke a doctest in `rings/semirings/non_negative_integer_semiring.py`.

Fixed !

Nathann



---

archive/issue_comments_210490.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-31T14:29:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210491.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-12-31T14:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210491",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_210492.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-01-04T05:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210492",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_210493.json:
```json
{
    "body": "<a id='comment:6'></a>Doctest failures:\n\n```\nsage -t --long src/sage/graphs/digraph.py\n**********************************************************************\nFile \"src/sage/graphs/digraph.py\", line 1035, in sage.graphs.digraph.DiGraph.is_directed_acyclic\nFailed example:\n    g.allow_loops(True)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/SSD1/mod_buildslave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/mnt/SSD1/mod_buildslave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.graphs.digraph.DiGraph.is_directed_acyclic[11]>\", line 1, in <module>\n        g.allow_loops(True)\n    NameError: name 'g' is not defined\n**********************************************************************\n```",
    "created_at": "2014-01-04T05:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210493",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>Doctest failures:

```
sage -t --long src/sage/graphs/digraph.py
**********************************************************************
File "src/sage/graphs/digraph.py", line 1035, in sage.graphs.digraph.DiGraph.is_directed_acyclic
Failed example:
    g.allow_loops(True)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/SSD1/mod_buildslave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/mnt/SSD1/mod_buildslave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.graphs.digraph.DiGraph.is_directed_acyclic[11]>", line 1, in <module>
        g.allow_loops(True)
    NameError: name 'g' is not defined
**********************************************************************
```



---

archive/issue_comments_210494.json:
```json
{
    "body": "<a id='comment:7'></a>Sorry 'bout that. Just fixed it by updating the last commit.\n\nNathann",
    "created_at": "2014-01-04T09:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210494",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>Sorry 'bout that. Just fixed it by updating the last commit.

Nathann



---

archive/issue_comments_210495.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-01-04T09:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210495",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_210496.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-01-04T09:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_210497.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-01-05T00:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15572#issuecomment-210497",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_045522.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-05T00:32:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15572",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15572#event-45522"
}
```
