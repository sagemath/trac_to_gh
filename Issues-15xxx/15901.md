# Issue 15901: git-related doctest failures after moving sage installation

archive/issues_015664.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nI've compiled sage in `/local/data/krenn/sage-dev/sage-6.1.1` and then moved it to another directory. I am getting the following when testing sage:\n\n```\nFile \"src/sage/dev/test/config.py\", line 43, in sage.dev.test.config.DoctestConfig\nFailed example:\n    DoctestConfig()\nExpected:\n    Config('''\n    [trac]\n    username = doctest\n    ticket_cache = ...\n    [UI]\n    log_level = 1\n    [git]\n    ssh_key_set = True\n    repository_anonymous = remote_repository_undefined\n    repository = remote_repository_undefined\n    src = ...\n    dot_git = ...\n    [sagedev]\n    ''')\nGot:\n    warning: templates not found /local/data/krenn/sage-dev/sage-6.1.1/local/share/git-core/templates\n    Config('''\n    [trac]\n    username = doctest\n    ticket_cache = /home/krenn/.sage/temp/brown/8826/dir_0ABZH9/ticket_cache\n    [UI]\n    log_level = 1\n    [git]\n    ssh_key_set = True\n    repository_anonymous = remote_repository_undefined\n    repository = remote_repository_undefined\n    src = /home/blub/.sage/temp/brown/8826/dir_0ABZH9/repo\n    dot_git = /home/blub/.sage/temp/brown/8826/dir_0ABZH9/repo/.git\n    user.name = doctest\n    user.email = doc@test.test\n    user_email_set = True\n    [sagedev]\n    ''')\n```\nThere are a couple of other files with similar warnings.\n\nCC:  @ppurka\n\nComponent: **misc**\n\nKeywords: **git, relocate**\n\nAuthor: **John Palmieri**\n\nBranch/Commit: **[`782e3f6`](https://github.com/sagemath/sagetrac-mirror/commit/782e3f6cc0a3852dbb83e26d1f1e41563821a8e5)**\n\nReviewer: **Peter Bruin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15901_\n\n",
    "closed_at": "2014-05-08T11:50:47Z",
    "created_at": "2014-03-06T16:50:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/doctest%20coverage"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "git-related doctest failures after moving sage installation",
    "type": "issue",
    "updated_at": "2014-05-08T11:50:47Z",
    "url": "https://github.com/sagemath/sage/issues/15901",
    "user": "https://github.com/dkrenn"
}
```
<div id="comment:0"></div>

I've compiled sage in `/local/data/krenn/sage-dev/sage-6.1.1` and then moved it to another directory. I am getting the following when testing sage:

```
File "src/sage/dev/test/config.py", line 43, in sage.dev.test.config.DoctestConfig
Failed example:
    DoctestConfig()
Expected:
    Config('''
    [trac]
    username = doctest
    ticket_cache = ...
    [UI]
    log_level = 1
    [git]
    ssh_key_set = True
    repository_anonymous = remote_repository_undefined
    repository = remote_repository_undefined
    src = ...
    dot_git = ...
    [sagedev]
    ''')
Got:
    warning: templates not found /local/data/krenn/sage-dev/sage-6.1.1/local/share/git-core/templates
    Config('''
    [trac]
    username = doctest
    ticket_cache = /home/krenn/.sage/temp/brown/8826/dir_0ABZH9/ticket_cache
    [UI]
    log_level = 1
    [git]
    ssh_key_set = True
    repository_anonymous = remote_repository_undefined
    repository = remote_repository_undefined
    src = /home/blub/.sage/temp/brown/8826/dir_0ABZH9/repo
    dot_git = /home/blub/.sage/temp/brown/8826/dir_0ABZH9/repo/.git
    user.name = doctest
    user.email = doc@test.test
    user_email_set = True
    [sagedev]
    ''')
```
There are a couple of other files with similar warnings.

CC:  @ppurka

Component: **misc**

Keywords: **git, relocate**

Author: **John Palmieri**

Branch/Commit: **[`782e3f6`](https://github.com/sagemath/sagetrac-mirror/commit/782e3f6cc0a3852dbb83e26d1f1e41563821a8e5)**

Reviewer: **Peter Bruin**

_Issue created by migration from https://trac.sagemath.org/ticket/15901_





---

archive/issue_events_224897.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-03-06T16:50:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224897"
}
```



---

archive/issue_events_224898.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-03-06T16:50:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224898"
}
```



---

archive/issue_events_224899.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-03-06T16:50:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224899"
}
```



---

archive/issue_events_224900.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-03-06T16:50:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224900"
}
```



---

archive/issue_comments_201382.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFYI: A manual fix is to use\n\n```\nrm local/var/lib/sage/installed/git-1.8.4.4\nmake\n```\nto rebuild git.",
    "created_at": "2014-03-26T16:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201382",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:1" align="right">comment:1</div>

FYI: A manual fix is to use

```
rm local/var/lib/sage/installed/git-1.8.4.4
make
```
to rebuild git.



---

archive/issue_comments_201383.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@dkrenn](#comment%3A1):\n> FYI: A manual fix is to use\n> \n> ```\n> rm local/var/lib/sage/installed/git-1.8.4.4\n> make\n> ```\n> to rebuild git.\n\nOr just\n\n```\n./sage -f git\n```",
    "created_at": "2014-04-03T23:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201383",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@dkrenn](#comment%3A1):
> FYI: A manual fix is to use
> 
> ```
> rm local/var/lib/sage/installed/git-1.8.4.4
> make
> ```
> to rebuild git.

Or just

```
./sage -f git
```



---

archive/issue_comments_201384.json:
```json
{
    "body": "Branch: **[u/jhpalmieri/git-relocate](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/git-relocate)**",
    "created_at": "2014-05-02T20:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201384",
    "user": "https://github.com/jhpalmieri"
}
```

Branch: **[u/jhpalmieri/git-relocate](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/git-relocate)**



---

archive/issue_events_224901.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2014-05-02T20:15:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224901"
}
```



---

archive/issue_comments_201385.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHere's an attempt at a patch. Works for me.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62524f6e67df98602d37d6be82315357e8ea6b0b\"><code>62524f6</code></a></td><td><code>Get rid of warnings about missing git templates after relocating Sage</code></td></tr></table>\n",
    "created_at": "2014-05-02T20:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201385",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

Here's an attempt at a patch. Works for me.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62524f6e67df98602d37d6be82315357e8ea6b0b"><code>62524f6</code></a></td><td><code>Get rid of warnings about missing git templates after relocating Sage</code></td></tr></table>




---

archive/issue_comments_201386.json:
```json
{
    "body": "Commit: **[`62524f6`](https://github.com/sagemath/sagetrac-mirror/commit/62524f6e67df98602d37d6be82315357e8ea6b0b)**",
    "created_at": "2014-05-02T20:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201386",
    "user": "https://github.com/jhpalmieri"
}
```

Commit: **[`62524f6`](https://github.com/sagemath/sagetrac-mirror/commit/62524f6e67df98602d37d6be82315357e8ea6b0b)**



---

archive/issue_comments_201387.json:
```json
{
    "body": "Author: **John Palmieri**",
    "created_at": "2014-05-02T20:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201387",
    "user": "https://github.com/jhpalmieri"
}
```

Author: **John Palmieri**



---

archive/issue_comments_201388.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHow do you compile sage after this?\n\n```\nsage --dev checkout --ticket 15901\nsage -btp --long src/sage/dev\n```\ndoes not work.\n\nEven the following doesn't work\n\n```\ncp {src,local}/bin/sage-env\nsage -btp --long src/sage/dev\n```",
    "created_at": "2014-05-03T13:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201388",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:5" align="right">comment:5</div>

How do you compile sage after this?

```
sage --dev checkout --ticket 15901
sage -btp --long src/sage/dev
```
does not work.

Even the following doesn't work

```
cp {src,local}/bin/sage-env
sage -btp --long src/sage/dev
```



---

archive/issue_comments_201389.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@ppurka](#comment%3A5):\n> How do you compile sage after this?\n\nYou have to touch the `src/sage/dev/[test/]` Python files (or remove their `.pyc` files).\n\n(I *think*.)",
    "created_at": "2014-05-03T13:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201389",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@ppurka](#comment%3A5):
> How do you compile sage after this?

You have to touch the `src/sage/dev/[test/]` Python files (or remove their `.pyc` files).

(I *think*.)



---

archive/issue_comments_201390.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAhem, or maybe something else... 8-)",
    "created_at": "2014-05-03T13:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201390",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:7" align="right">comment:7</div>

Ahem, or maybe something else... 8-)



---

archive/issue_comments_201391.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHmm. I guess I should have said \"Worked for me yesterday on one machine.\" I can't get it to work today on a different machine (and haven't tried on the first one yet).",
    "created_at": "2014-05-03T16:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201391",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Hmm. I guess I should have said "Worked for me yesterday on one machine." I can't get it to work today on a different machine (and haven't tried on the first one yet).



---

archive/issue_comments_201392.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/782e3f6cc0a3852dbb83e26d1f1e41563821a8e5\"><code>782e3f6</code></a></td><td><code>Get rid of warnings about missing git templates after relocating Sage</code></td></tr></table>\n",
    "created_at": "2014-05-05T19:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201392",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/782e3f6cc0a3852dbb83e26d1f1e41563821a8e5"><code>782e3f6</code></a></td><td><code>Get rid of warnings about missing git templates after relocating Sage</code></td></tr></table>




---

archive/issue_comments_201393.json:
```json
{
    "body": "Changed commit from **[`62524f6`](https://github.com/sagemath/sagetrac-mirror/commit/62524f6e67df98602d37d6be82315357e8ea6b0b)** to **[`782e3f6`](https://github.com/sagemath/sagetrac-mirror/commit/782e3f6cc0a3852dbb83e26d1f1e41563821a8e5)**",
    "created_at": "2014-05-05T19:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201393",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`62524f6`](https://github.com/sagemath/sagetrac-mirror/commit/62524f6e67df98602d37d6be82315357e8ea6b0b)** to **[`782e3f6`](https://github.com/sagemath/sagetrac-mirror/commit/782e3f6cc0a3852dbb83e26d1f1e41563821a8e5)**



---

archive/issue_comments_201394.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOkay, here's another attempt. Please try this one. (I hope that just `sage -tp src/sage/dev` works. There are no changes to Python files, so `sage -b` should be unnecessary.)",
    "created_at": "2014-05-05T19:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201394",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:10" align="right">comment:10</div>

Okay, here's another attempt. Please try this one. (I hope that just `sage -tp src/sage/dev` works. There are no changes to Python files, so `sage -b` should be unnecessary.)



---

archive/issue_events_224902.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224902"
}
```



---

archive/issue_events_224903.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224903"
}
```



---

archive/issue_comments_201395.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThis must explain the failures in the first patchbot run of 6.2 (`http://patchbot.sagemath.org/ticket/0/`, 2014-05-06 20:45:32 +0100); I made a fresh Sage install for experimenting with the patchbot, but then decided to move it.  Patchbot is now running in the original location, but I'll try this patch on another copy.",
    "created_at": "2014-05-06T23:07:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201395",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:12" align="right">comment:12</div>

This must explain the failures in the first patchbot run of 6.2 (`http://patchbot.sagemath.org/ticket/0/`, 2014-05-06 20:45:32 +0100); I made a fresh Sage install for experimenting with the patchbot, but then decided to move it.  Patchbot is now running in the original location, but I'll try this patch on another copy.



---

archive/issue_comments_201396.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe patchbot instance is now getting doctest failures in `sage/plot/plot.py`:\n\n```\nRuntimeError: Could not open facefile /home/pbruin/src/sage/local/lib/python2.7/site-packages/matplotlib-1.3.1-py2.7-linux-x86_64.egg/matplotlib/mpl-data/fonts/ttf/Vera.ttf; Cannot_Open_Resource\n```\nThe directory it is looking in is where my *other* Sage copy was before moving that copy to test this ticket!  The path seems to have been obtained from a cache living in my home directory: `~/.cache/matplotlib/fontList.cache`.  Does this mean that `sage-location` potentially has to worry about hardcoded paths existing in `$DOT_SAGE`?",
    "created_at": "2014-05-06T23:27:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201396",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:13" align="right">comment:13</div>

The patchbot instance is now getting doctest failures in `sage/plot/plot.py`:

```
RuntimeError: Could not open facefile /home/pbruin/src/sage/local/lib/python2.7/site-packages/matplotlib-1.3.1-py2.7-linux-x86_64.egg/matplotlib/mpl-data/fonts/ttf/Vera.ttf; Cannot_Open_Resource
```
The directory it is looking in is where my *other* Sage copy was before moving that copy to test this ticket!  The path seems to have been obtained from a cache living in my home directory: `~/.cache/matplotlib/fontList.cache`.  Does this mean that `sage-location` potentially has to worry about hardcoded paths existing in `$DOT_SAGE`?



---

archive/issue_comments_201397.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nCuriously, sometime after the above failures in `sage/plot`, my patchbot copy of Sage seems to have updated the paths in `~/.cache/matplotlib`.  Anyway, I can confirm that the failures in `sage/dev` are fixed by this patch.",
    "created_at": "2014-05-06T23:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201397",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:14" align="right">comment:14</div>

Curiously, sometime after the above failures in `sage/plot`, my patchbot copy of Sage seems to have updated the paths in `~/.cache/matplotlib`.  Anyway, I can confirm that the failures in `sage/dev` are fixed by this patch.



---

archive/issue_comments_201398.json:
```json
{
    "body": "Reviewer: **Peter Bruin**",
    "created_at": "2014-05-07T19:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201398",
    "user": "https://github.com/pjbruin"
}
```

Reviewer: **Peter Bruin**



---

archive/issue_comments_201399.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@pjbruin](#comment%3A14):\n> I can confirm that the failures in `sage/dev` are fixed by this patch.\n\n... which should be enough for a positive review.  If there really is a problem with the `matplotlib` cache, it should be dealt with on a different ticket.",
    "created_at": "2014-05-07T19:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201399",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@pjbruin](#comment%3A14):
> I can confirm that the failures in `sage/dev` are fixed by this patch.

... which should be enough for a positive review.  If there really is a problem with the `matplotlib` cache, it should be dealt with on a different ticket.



---

archive/issue_events_224904.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-07T19:17:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224904"
}
```



---

archive/issue_events_224905.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-07T19:17:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224905"
}
```



---

archive/issue_comments_201400.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@pjbruin](#comment%3A15):\n> Replying to [@pjbruin](#comment%3A14):\n> > I can confirm that the failures in `sage/dev` are fixed by this patch.\n> \n> ... which should be enough for a positive review.  If there really is a problem with the `matplotlib` cache, it should be dealt with on a different ticket.\n\nThen we should probably also change the ticket's title accordingly.",
    "created_at": "2014-05-07T19:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201400",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@pjbruin](#comment%3A15):
> Replying to [@pjbruin](#comment%3A14):
> > I can confirm that the failures in `sage/dev` are fixed by this patch.
> 
> ... which should be enough for a positive review.  If there really is a problem with the `matplotlib` cache, it should be dealt with on a different ticket.

Then we should probably also change the ticket's title accordingly.



---

archive/issue_comments_201401.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@pjbruin](#comment%3A15):\n> If there really is a problem with the `matplotlib` cache, it should be dealt with on a different ticket.\n\nThis really deserves its own ticket (and btw. is pretty unrelated to relocating Sage; just imagine having different versions of Sage running at the same time).\n\nIMHO Sage's matplotlib must not put its cache into `$HOME` (if at all, it should be in `$DOT_SAGE/.cache/...`), and it should somehow be versioned (with matplotlib's and/or Sage's version in the folder name).",
    "created_at": "2014-05-07T19:39:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201401",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@pjbruin](#comment%3A15):
> If there really is a problem with the `matplotlib` cache, it should be dealt with on a different ticket.

This really deserves its own ticket (and btw. is pretty unrelated to relocating Sage; just imagine having different versions of Sage running at the same time).

IMHO Sage's matplotlib must not put its cache into `$HOME` (if at all, it should be in `$DOT_SAGE/.cache/...`), and it should somehow be versioned (with matplotlib's and/or Sage's version in the folder name).



---

archive/issue_comments_201402.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@nexttime](#comment%3A17):\n> IMHO Sage's matplotlib must not put its cache into `$HOME` (if at all, it should be in `$DOT_SAGE/.cache/...`), and it should somehow be versioned (with matplotlib's and/or Sage's version in the folder name).\n\n... or probably `$SAGE_LOCAL/var/{lib,tmp}/matplotlib/...`",
    "created_at": "2014-05-07T19:42:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201402",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@nexttime](#comment%3A17):
> IMHO Sage's matplotlib must not put its cache into `$HOME` (if at all, it should be in `$DOT_SAGE/.cache/...`), and it should somehow be versioned (with matplotlib's and/or Sage's version in the folder name).

... or probably `$SAGE_LOCAL/var/{lib,tmp}/matplotlib/...`



---

archive/issue_comments_201403.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nDoes it need to be writeable? Anyway, it looks like we can modify this by setting the environment variable `XDG_CACHE_HOME`: see the functions `_get_cachedir` and `_get_xdg_cache_dir` in `sage/local/lib/python/site-packages/matplotlib-1.3.1-py2.7-macosx-10.8-x86_64.egg/matplotlib/__init__.py`. I also think this belongs on another ticket.",
    "created_at": "2014-05-07T19:49:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201403",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:19" align="right">comment:19</div>

Does it need to be writeable? Anyway, it looks like we can modify this by setting the environment variable `XDG_CACHE_HOME`: see the functions `_get_cachedir` and `_get_xdg_cache_dir` in `sage/local/lib/python/site-packages/matplotlib-1.3.1-py2.7-macosx-10.8-x86_64.egg/matplotlib/__init__.py`. I also think this belongs on another ticket.



---

archive/issue_events_224906.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2014-05-07T19:49:53Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "title_is": "git-related doctest failures after moving sage installation",
    "title_was": "doctest failures after moving sage installation",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224906"
}
```



---

archive/issue_comments_201404.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nexttime](#comment%3A17):\n> IMHO Sage's matplotlib must not put its cache into `$HOME` (if at all, it should be in `$DOT_SAGE/.cache/...`), and it should somehow be versioned (with matplotlib's and/or Sage's version in the folder name).\n\nIn fact that is where it used to be: I have an old directory `~/.sage/matplotlib-1.2.1/` lying around, containing `fontList.cache` and `tex.cache/`, just like `~/.cache/matplotlib/` looks now.",
    "created_at": "2014-05-07T19:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201404",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nexttime](#comment%3A17):
> IMHO Sage's matplotlib must not put its cache into `$HOME` (if at all, it should be in `$DOT_SAGE/.cache/...`), and it should somehow be versioned (with matplotlib's and/or Sage's version in the folder name).

In fact that is where it used to be: I have an old directory `~/.sage/matplotlib-1.2.1/` lying around, containing `fontList.cache` and `tex.cache/`, just like `~/.cache/matplotlib/` looks now.



---

archive/issue_comments_201405.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nBy default, Sage's matplotlib should write to `.sage/matplotlib-1.3.1`. Do you have any environment variables set, like `MPLCONFIGDIR`? On my OS X machine, I just checked: `MPLCONFIGDIR` (which Sage sets to `.sage/matplotlib-1.3.1` if it's unset) still gets `fontList.cache` and `tex.cache/` added to it when you call `plot` from Sage. My `$HOME/.cache` directory only contains `fontconfig/`.",
    "created_at": "2014-05-07T19:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201405",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

By default, Sage's matplotlib should write to `.sage/matplotlib-1.3.1`. Do you have any environment variables set, like `MPLCONFIGDIR`? On my OS X machine, I just checked: `MPLCONFIGDIR` (which Sage sets to `.sage/matplotlib-1.3.1` if it's unset) still gets `fontList.cache` and `tex.cache/` added to it when you call `plot` from Sage. My `$HOME/.cache` directory only contains `fontconfig/`.



---

archive/issue_comments_201406.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jhpalmieri](#comment%3A21):\n> By default, Sage's matplotlib should write to `.sage/matplotlib-1.3.1`. Do you have any environment variables set, like `MPLCONFIGDIR`? On my OS X machine, I just checked: `MPLCONFIGDIR` (which Sage sets to `.sage/matplotlib-1.3.1` if it's unset) still gets `fontList.cache` and `tex.cache/` added to it when you call `plot` from Sage. My `$HOME/.cache` directory only contains `fontconfig/`.\n\nWell, setting up MPL's config dir based on its version in `sage-env` in turn can indeed break upon relocation... :-)\n\n(as it calls Python before `sage-location` is called, and the Python interpreter may try to load libraries that have moved, as I already mentioned elsewhere).",
    "created_at": "2014-05-07T20:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201406",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jhpalmieri](#comment%3A21):
> By default, Sage's matplotlib should write to `.sage/matplotlib-1.3.1`. Do you have any environment variables set, like `MPLCONFIGDIR`? On my OS X machine, I just checked: `MPLCONFIGDIR` (which Sage sets to `.sage/matplotlib-1.3.1` if it's unset) still gets `fontList.cache` and `tex.cache/` added to it when you call `plot` from Sage. My `$HOME/.cache` directory only contains `fontconfig/`.

Well, setting up MPL's config dir based on its version in `sage-env` in turn can indeed break upon relocation... :-)

(as it calls Python before `sage-location` is called, and the Python interpreter may try to load libraries that have moved, as I already mentioned elsewhere).



---

archive/issue_comments_201407.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nexttime](#comment%3A22):\n> Well, setting up MPL's config dir based on its version in `sage-env` in turn can indeed break upon relocation... :-)\n> \n> (as it calls Python before `sage-location` is called, and the Python interpreter may try to load libraries that have moved, as I already mentioned elsewhere).\n\nSee for example [#16044 comment:7](https://github.com/sagemath/sage/issues/16044#comment:7) ff.\n\n(Note that IIRC `sage-location` currently wouldn't help there anyway, as  it doesn't mess with `install_name`s.)",
    "created_at": "2014-05-07T20:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201407",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nexttime](#comment%3A22):
> Well, setting up MPL's config dir based on its version in `sage-env` in turn can indeed break upon relocation... :-)
> 
> (as it calls Python before `sage-location` is called, and the Python interpreter may try to load libraries that have moved, as I already mentioned elsewhere).

See for example [#16044 comment:7](https://github.com/sagemath/sage/issues/16044#comment:7) ff.

(Note that IIRC `sage-location` currently wouldn't help there anyway, as  it doesn't mess with `install_name`s.)



---

archive/issue_comments_201408.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jhpalmieri](#comment%3A21):\n> By default, Sage's matplotlib should write to `.sage/matplotlib-1.3.1`. Do you have any environment variables set, like `MPLCONFIGDIR`? On my OS X machine, I just checked: `MPLCONFIGDIR` (which Sage sets to `.sage/matplotlib-1.3.1` if it's unset) still gets `fontList.cache` and `tex.cache/` added to it when you call `plot` from Sage. My `$HOME/.cache` directory only contains `fontconfig/`.\n\nOn GNU/Linux x86_64, I don't seem to have any environment variables with names containing \"MPL\", neither in the normal shell nor in `sage -sh`.  This is despite `logs/pkgs/matplotlib-1.3.1.log saying\n\n```\nWhen Sage runs, MPLCONFIGDIR will be set to '$DOT_SAGE/matplotlib-1.3.1'.\n```",
    "created_at": "2014-05-07T20:25:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201408",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jhpalmieri](#comment%3A21):
> By default, Sage's matplotlib should write to `.sage/matplotlib-1.3.1`. Do you have any environment variables set, like `MPLCONFIGDIR`? On my OS X machine, I just checked: `MPLCONFIGDIR` (which Sage sets to `.sage/matplotlib-1.3.1` if it's unset) still gets `fontList.cache` and `tex.cache/` added to it when you call `plot` from Sage. My `$HOME/.cache` directory only contains `fontconfig/`.

On GNU/Linux x86_64, I don't seem to have any environment variables with names containing "MPL", neither in the normal shell nor in `sage -sh`.  This is despite `logs/pkgs/matplotlib-1.3.1.log saying

```
When Sage runs, MPLCONFIGDIR will be set to '$DOT_SAGE/matplotlib-1.3.1'.
```



---

archive/issue_comments_201409.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@pjbruin](#comment%3A24):\n> On GNU/Linux x86_64, I don't seem to have any environment variables with names containing \"MPL\", neither in the normal shell nor in `sage -sh`.\n\nTrue. B)\n\n```sh\n$ ./sage --sh -c 'env | grep MPL'; uname -sm\nLinux x86_64\n```",
    "created_at": "2014-05-07T20:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201409",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@pjbruin](#comment%3A24):
> On GNU/Linux x86_64, I don't seem to have any environment variables with names containing "MPL", neither in the normal shell nor in `sage -sh`.

True. B)

```sh
$ ./sage --sh -c 'env | grep MPL'; uname -sm
Linux x86_64
```



---

archive/issue_comments_201410.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@nexttime](#comment%3A25):\n> Replying to [@pjbruin](#comment%3A24):\n> > On GNU/Linux x86_64, I don't seem to have any environment variables with names containing \"MPL\", neither in the normal shell nor in `sage -sh`.\n> \n> \n> True. B)\n\nIt turns out that this is because the following command in `sage-env` fails (I removed the `2>/dev/null` at the end:\n\n```\n\"$SAGE_ROOT/local/bin/python\" -c 'import pkg_resources; pkg_resources.get_distribution(\"matplotlib\").version'\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\nzipimport.ZipImportError: can't decompress data; zlib not available\n```",
    "created_at": "2014-05-07T20:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201410",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@nexttime](#comment%3A25):
> Replying to [@pjbruin](#comment%3A24):
> > On GNU/Linux x86_64, I don't seem to have any environment variables with names containing "MPL", neither in the normal shell nor in `sage -sh`.
> 
> 
> True. B)

It turns out that this is because the following command in `sage-env` fails (I removed the `2>/dev/null` at the end:

```
"$SAGE_ROOT/local/bin/python" -c 'import pkg_resources; pkg_resources.get_distribution("matplotlib").version'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
zipimport.ZipImportError: can't decompress data; zlib not available
```



---

archive/issue_comments_201411.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@pjbruin](#comment%3A26):\n> Replying to [@nexttime](#comment%3A25):\n> > Replying to [@pjbruin](#comment%3A24):\n> > > On GNU/Linux x86_64, I don't seem to have any environment variables with names containing \"MPL\", neither in the normal shell nor in `sage -sh`.\n> > \n> > \n> > True. B)\n> \n> It turns out that this is because the following command in `sage-env` fails (I removed the `2>/dev/null` at the end:\n> \n> ```\n> \"$SAGE_ROOT/local/bin/python\" -c 'import pkg_resources; pkg_resources.get_distribution(\"matplotlib\").version'\n> Traceback (most recent call last):\n>   File \"<string>\", line 1, in <module>\n> zipimport.ZipImportError: can't decompress data; zlib not available\n> ```\n\nI'm getting\n\n```\n.../local/bin/python: error while loading shared libraries: libpython2.7.so.1.0: cannot open shared object file: No such file or directory\n```\n\nSo apparently `LD_LIBRARY_PATH` isn't set up properly to that time.",
    "created_at": "2014-05-07T20:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201411",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@pjbruin](#comment%3A26):
> Replying to [@nexttime](#comment%3A25):
> > Replying to [@pjbruin](#comment%3A24):
> > > On GNU/Linux x86_64, I don't seem to have any environment variables with names containing "MPL", neither in the normal shell nor in `sage -sh`.
> > 
> > 
> > True. B)
> 
> It turns out that this is because the following command in `sage-env` fails (I removed the `2>/dev/null` at the end:
> 
> ```
> "$SAGE_ROOT/local/bin/python" -c 'import pkg_resources; pkg_resources.get_distribution("matplotlib").version'
> Traceback (most recent call last):
>   File "<string>", line 1, in <module>
> zipimport.ZipImportError: can't decompress data; zlib not available
> ```

I'm getting

```
.../local/bin/python: error while loading shared libraries: libpython2.7.so.1.0: cannot open shared object file: No such file or directory
```

So apparently `LD_LIBRARY_PATH` isn't set up properly to that time.



---

archive/issue_comments_201412.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThe problem in [comment:26](#comment%3A26) was on 6.2.rc0; with 6.2 on a different system I get\n\n```\nTraceback (most recent call last):\n...\nImportError: cannot import name MAXREPEAT\n```\nI guess the `MPLCONFIGDIR`-relevant part of `sage-env` should be moved down to a point where all required setting up has been done.",
    "created_at": "2014-05-07T20:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201412",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:28" align="right">comment:28</div>

The problem in [comment:26](#comment%3A26) was on 6.2.rc0; with 6.2 on a different system I get

```
Traceback (most recent call last):
...
ImportError: cannot import name MAXREPEAT
```
I guess the `MPLCONFIGDIR`-relevant part of `sage-env` should be moved down to a point where all required setting up has been done.



---

archive/issue_comments_201413.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOh, just noticed:\n\n```sh\n# Use a matplotlib config directory specific to Sage and specific to\n# the version number of matplotlib, by setting the environment\n# variable MPLCONFIGDIR. Note that we can't find the version number by\n# importing matplotlib, because that could create matplotlib's standard\n# config directory. So we use pkg_resources.\n\"$SAGE_ROOT/local/bin/python\" -c 'import pkg_resources; pkg_resources.get_distribution(\"matplotlib\").version' 2>/dev/null\nif [ $? -eq 0 ]; then\n    MPLVERSION=`\"$SAGE_ROOT/local/bin/python\" -c 'import pkg_resources; print pkg_resources.get_distribution(\"matplotlib\").version'`\n    MPLCONFIGDIR=\"$DOT_SAGE/matplotlib-$MPLVERSION\"\n    export MPLCONFIGDIR\n    # The directory is created when Sage starts (see sage.misc.misc).\nfi\n\n# Add some directories to $LD_LIBRARY_PATH:\n# * lib/openmpi is needed for openmpi.\n# * lib/R/lib is needed for R in case the Sage install is moved.\n# * lib32 and lib64 are needed for GCC, see #12405.\nfor d in lib/openmpi lib/R/lib lib32 lib64 lib; do\n    libdir=\"$SAGE_LOCAL/$d\"\n    # Add only existing directories\n    if [ -d \"$libdir\" ]; then\n        [ -z \"$LD_LIBRARY_PATH\" ] || LD_LIBRARY_PATH=\":${LD_LIBRARY_PATH}\"\n        LD_LIBRARY_PATH=\"${libdir}$LD_LIBRARY_PATH\"\n    fi\ndone\nexport LD_LIBRARY_PATH\n```\n\n`>8-O`",
    "created_at": "2014-05-07T20:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201413",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:29" align="right">comment:29</div>

Oh, just noticed:

```sh
# Use a matplotlib config directory specific to Sage and specific to
# the version number of matplotlib, by setting the environment
# variable MPLCONFIGDIR. Note that we can't find the version number by
# importing matplotlib, because that could create matplotlib's standard
# config directory. So we use pkg_resources.
"$SAGE_ROOT/local/bin/python" -c 'import pkg_resources; pkg_resources.get_distribution("matplotlib").version' 2>/dev/null
if [ $? -eq 0 ]; then
    MPLVERSION=`"$SAGE_ROOT/local/bin/python" -c 'import pkg_resources; print pkg_resources.get_distribution("matplotlib").version'`
    MPLCONFIGDIR="$DOT_SAGE/matplotlib-$MPLVERSION"
    export MPLCONFIGDIR
    # The directory is created when Sage starts (see sage.misc.misc).
fi

# Add some directories to $LD_LIBRARY_PATH:
# * lib/openmpi is needed for openmpi.
# * lib/R/lib is needed for R in case the Sage install is moved.
# * lib32 and lib64 are needed for GCC, see #12405.
for d in lib/openmpi lib/R/lib lib32 lib64 lib; do
    libdir="$SAGE_LOCAL/$d"
    # Add only existing directories
    if [ -d "$libdir" ]; then
        [ -z "$LD_LIBRARY_PATH" ] || LD_LIBRARY_PATH=":${LD_LIBRARY_PATH}"
        LD_LIBRARY_PATH="${libdir}$LD_LIBRARY_PATH"
    fi
done
export LD_LIBRARY_PATH
```

`>8-O`



---

archive/issue_comments_201414.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n(I meant to say it's done right *after* we try to call `python`; I've slightly edited the snippet.)",
    "created_at": "2014-05-07T21:00:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201414",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:30" align="right">comment:30</div>

(I meant to say it's done right *after* we try to call `python`; I've slightly edited the snippet.)



---

archive/issue_comments_201415.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI created #16305 for this.",
    "created_at": "2014-05-07T21:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201415",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:31" align="right">comment:31</div>

I created #16305 for this.



---

archive/issue_comments_201416.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/git-relocate](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/git-relocate)** to **[`782e3f6`](https://github.com/sagemath/sagetrac-mirror/commit/782e3f6cc0a3852dbb83e26d1f1e41563821a8e5)**",
    "created_at": "2014-05-08T11:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15901#issuecomment-201416",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/git-relocate](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/git-relocate)** to **[`782e3f6`](https://github.com/sagemath/sagetrac-mirror/commit/782e3f6cc0a3852dbb83e26d1f1e41563821a8e5)**



---

archive/issue_events_224907.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-08T11:50:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224907"
}
```



---

archive/issue_events_224908.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "49ae00b6542aee637e0eb1b35ef4fa4ba6241fae",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-05-08T11:50:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15901",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15901#event-224908"
}
```
