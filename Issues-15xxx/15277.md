# Issue 15277: CartanMatrix to DynkinDiagram adds edges with zeros

archive/issues_015040.json:
```json
{
    "body": "Currently we have:\n\n```\nsage: CM = CartanMatrix([[2,-1,0,0],[-3,2,-2,-2],[0,-1,2,-1],[0,-1,-1,2]])\nsage: CM\n[ 2 -1  0  0]\n[-3  2 -2 -2]\n[ 0 -1  2 -1]\n[ 0 -1 -1  2]\nsage: CM.dynkin_diagram().edges()\n[(0, 1, 3),\n (0, 2, 0),\n (0, 3, 0),\n (1, 0, 1),\n (1, 2, 1),\n (1, 3, 1),\n (2, 0, 0),\n (2, 1, 2),\n (2, 3, 1),\n (3, 0, 0),\n (3, 1, 2),\n (3, 2, 1)]\n```\nThe edges with the label of 0 should not be included.\n\n**Assignee:** sage-combinat\n\n**CC:**  sage-combinat @anneschilling @nthiery\n\n**Keywords:** Cartan matrix Dynkin diagram\n\n**Reviewer:** Nicolas M. Thi\u00e9ry, Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Travis Scrimshaw\n\n**Merged:** sage-5.13.beta1\n\nIssue created by migration from https://trac.sagemath.org/ticket/15277\n\n",
    "closed_at": "2013-10-19T09:21:22Z",
    "created_at": "2013-10-14T02:23:56Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "CartanMatrix to DynkinDiagram adds edges with zeros",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15277",
    "user": "https://github.com/tscrim"
}
```
Currently we have:

```
sage: CM = CartanMatrix([[2,-1,0,0],[-3,2,-2,-2],[0,-1,2,-1],[0,-1,-1,2]])
sage: CM
[ 2 -1  0  0]
[-3  2 -2 -2]
[ 0 -1  2 -1]
[ 0 -1 -1  2]
sage: CM.dynkin_diagram().edges()
[(0, 1, 3),
 (0, 2, 0),
 (0, 3, 0),
 (1, 0, 1),
 (1, 2, 1),
 (1, 3, 1),
 (2, 0, 0),
 (2, 1, 2),
 (2, 3, 1),
 (3, 0, 0),
 (3, 1, 2),
 (3, 2, 1)]
```
The edges with the label of 0 should not be included.

**Assignee:** sage-combinat

**CC:**  sage-combinat @anneschilling @nthiery

**Keywords:** Cartan matrix Dynkin diagram

**Reviewer:** Nicolas M. Thiéry, Frédéric Chapoton

**Author:** Travis Scrimshaw

**Merged:** sage-5.13.beta1

Issue created by migration from https://trac.sagemath.org/ticket/15277





---

archive/issue_comments_231775.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,3 +21,4 @@\n  (3, 1, 2),\n  (3, 2, 1)]\n ```\n+The edges with the label of 0 should not be included.\n``````\n",
    "created_at": "2013-10-14T02:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231775",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,3 +21,4 @@
  (3, 1, 2),
  (3, 2, 1)]
 ```
+The edges with the label of 0 should not be included.
``````




---

archive/issue_comments_231776.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-10-14T02:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231776",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_231777.json:
```json
{
    "body": "<a id='comment:2'></a>\nSounds good!\n\nWhile we are at it, what about using the following idiom:\n\n```\n    for (i,j) in M.nonzero_positions():\n        ...\n```\n\nGranted, exploiting sparseness here is essentially an eye candy:\nwe are not really likely to compute the dynkin diagrams of many large sparse cartan matrices where this would actually do a difference timewise. But still an eye candy :-)",
    "created_at": "2013-10-14T07:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231777",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:2'></a>
Sounds good!

While we are at it, what about using the following idiom:

```
    for (i,j) in M.nonzero_positions():
        ...
```

Granted, exploiting sparseness here is essentially an eye candy:
we are not really likely to compute the dynkin diagrams of many large sparse cartan matrices where this would actually do a difference timewise. But still an eye candy :-)



---

archive/attachments_020362.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_15277-dynkin_diagram_fix-ts.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket15277/trac_15277-dynkin_diagram_fix-ts.patch",
    "created_at": "2013-10-14T16:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/tscrim"
}
```



---

archive/issue_comments_231778.json:
```json
{
    "body": "<a id='comment:3'></a>\nDone.",
    "created_at": "2013-10-14T16:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231778",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Done.



---

archive/attachments_020363.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_15277_review.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket15277/trac_15277_review.patch",
    "created_at": "2013-10-14T18:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/fchapoton"
}
```



---

archive/issue_comments_231779.json:
```json
{
    "body": "<a id='comment:4'></a>\nHello,\n\nLooks good to me. I have added a small review patch.\n\n1) removing an unused import of sgn\n\n2) computing the value of ct, where it was needed\n\n3) removing the variable n\n\nIf you agree with these details (found with pyflakes), you can set positive review",
    "created_at": "2013-10-14T18:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231779",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
Hello,

Looks good to me. I have added a small review patch.

1) removing an unused import of sgn

2) computing the value of ct, where it was needed

3) removing the variable n

If you agree with these details (found with pyflakes), you can set positive review



---

archive/issue_comments_231780.json:
```json
{
    "body": "<a id='comment:5'></a>\nI'm happy with it. Nicolas?",
    "created_at": "2013-10-14T18:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231780",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
I'm happy with it. Nicolas?



---

archive/issue_comments_231781.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe changes to please pyflakes are not directly related with this ticket; but if there is no ongoing ticket which conflicts with this one, this occasion is as good as another. Thanks Travis and Frederic.",
    "created_at": "2013-10-14T19:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231781",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:6'></a>
The changes to please pyflakes are not directly related with this ticket; but if there is no ongoing ticket which conflicts with this one, this occasion is as good as another. Thanks Travis and Frederic.



---

archive/issue_comments_231782.json:
```json
{
    "body": "**Reviewer:** Nicolas Thiery, Frederic Chapoton",
    "created_at": "2013-10-14T19:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231782",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Nicolas Thiery, Frederic Chapoton



---

archive/issue_comments_231783.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-10-14T19:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231783",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_231784.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis is the only ticket I know of that is changing `dynkin_diagram.py`, so I'm going to set this to positive review. Thanks Nicolas and Frederic.",
    "created_at": "2013-10-14T19:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231784",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
This is the only ticket I know of that is changing `dynkin_diagram.py`, so I'm going to set this to positive review. Thanks Nicolas and Frederic.



---

archive/issue_comments_231785.json:
```json
{
    "body": "**Changing reviewer** from \"Nicolas Thiery, Frederic Chapoton\" to \"Nicolas Thiery, Fr\u00e9d\u00e9ric Chapoton\".",
    "created_at": "2013-10-15T07:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231785",
    "user": "https://github.com/fchapoton"
}
```

**Changing reviewer** from "Nicolas Thiery, Frederic Chapoton" to "Nicolas Thiery, Frédéric Chapoton".



---

archive/issue_comments_231786.json:
```json
{
    "body": "**Changing reviewer** from \"Nicolas Thiery, Fr\u00e9d\u00e9ric Chapoton\" to \"Nicolas M. Thi\u00e9ry, Fr\u00e9d\u00e9ric Chapoton\".",
    "created_at": "2013-10-15T07:54:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231786",
    "user": "https://github.com/nthiery"
}
```

**Changing reviewer** from "Nicolas Thiery, Frédéric Chapoton" to "Nicolas M. Thiéry, Frédéric Chapoton".



---

archive/issue_events_050907.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-19T09:21:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15277#event-50907"
}
```



---

archive/issue_comments_231787.json:
```json
{
    "body": "**Merged:** sage-5.13.beta1",
    "created_at": "2013-10-19T09:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15277#issuecomment-231787",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.13.beta1
