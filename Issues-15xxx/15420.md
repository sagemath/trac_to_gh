# Issue 15420: Borken git doctests.

archive/issues_015183.json:
```json
{
    "body": "Github master, at 094712a285895ceac4c1521fb04cc9cc343a4b3a (head)\n\nhttp://patchbot.sagemath.org/log/0/Ubuntu/12.10/x86_64/3.5.0-17-generic/pi/2013-11-14%2002:54:22%20-0800?short\n\nLooks like we just need to sort this list. \n\n**CC:**  @ohanar\n\n**Branch:** [u/ohanar/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/ticket/15420)\n\n**Commit:** [2e778682424ed6a72c1689f787d144301e7026f2](https://github.com/sagemath/sagetrac-mirror/commit/2e778682424ed6a72c1689f787d144301e7026f2)\n\n**Reviewer:** R. Andrew Ohana\n\n**Author:** Robert Bradshaw, R. Andrew Ohana\n\nIssue created by migration from https://trac.sagemath.org/ticket/15420\n\n",
    "closed_at": "2013-12-16T14:07:43Z",
    "created_at": "2013-11-14T18:55:20Z",
    "labels": [
        "component: misc",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.0",
    "title": "Borken git doctests.",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/15420",
    "user": "https://github.com/robertwb"
}
```
Github master, at 094712a285895ceac4c1521fb04cc9cc343a4b3a (head)

http://patchbot.sagemath.org/log/0/Ubuntu/12.10/x86_64/3.5.0-17-generic/pi/2013-11-14%2002:54:22%20-0800?short

Looks like we just need to sort this list. 

**CC:**  @ohanar

**Branch:** [u/ohanar/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/ticket/15420)

**Commit:** [2e778682424ed6a72c1689f787d144301e7026f2](https://github.com/sagemath/sagetrac-mirror/commit/2e778682424ed6a72c1689f787d144301e7026f2)

**Reviewer:** R. Andrew Ohana

**Author:** Robert Bradshaw, R. Andrew Ohana

Issue created by migration from https://trac.sagemath.org/ticket/15420





---

archive/issue_comments_194216.json:
```json
{
    "body": "**Branch:** [u/robertwb/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/ticket/15420)",
    "created_at": "2013-11-14T18:59:04Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194216",
    "user": "https://github.com/robertwb"
}
```

**Branch:** [u/robertwb/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/ticket/15420)



---

archive/issue_comments_194217.json:
```json
{
    "body": "**Commit:** [5f2cbc31d441cfa8fa2ca091a1b17bab2f457005](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc31d441cfa8fa2ca091a1b17bab2f457005)",
    "created_at": "2013-11-14T19:00:02Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194217",
    "user": "https://github.com/robertwb"
}
```

**Commit:** [5f2cbc31d441cfa8fa2ca091a1b17bab2f457005](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc31d441cfa8fa2ca091a1b17bab2f457005)



---

archive/issue_comments_194218.json:
```json
{
    "body": "**Author:** Robert Bradshaw",
    "created_at": "2013-11-14T19:00:02Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194218",
    "user": "https://github.com/robertwb"
}
```

**Author:** Robert Bradshaw



---

archive/issue_events_136115.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-14T19:00:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-136115"
}
```



---

archive/issue_comments_194219.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td>[5f2cbc3](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc3)</td><td><code>Sort output for doctests.</code></td></tr></table>\n",
    "created_at": "2013-11-14T19:00:02Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194219",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td>[5f2cbc3](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc3)</td><td><code>Sort output for doctests.</code></td></tr></table>




---

archive/issue_events_136116.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-11-14T21:32:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-136116"
}
```



---

archive/issue_events_136117.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-11-14T21:32:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-136117"
}
```



---

archive/issue_comments_194220.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe docstring says it should be sorted by last commit time, and the code looks like it does that, so sorting the output (alphabetically) is wrong. Really we should spoof the commit time using an environment variable (it is something like `GIT_COMMITTER_DATE`), rather than using `time.sleep`.",
    "created_at": "2013-11-14T21:32:55Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194220",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:3'></a>
The docstring says it should be sorted by last commit time, and the code looks like it does that, so sorting the output (alphabetically) is wrong. Really we should spoof the commit time using an environment variable (it is something like `GIT_COMMITTER_DATE`), rather than using `time.sleep`.



---

archive/issue_comments_194221.json:
```json
{
    "body": "**Changing commit** from \"[5f2cbc31d441cfa8fa2ca091a1b17bab2f457005](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc31d441cfa8fa2ca091a1b17bab2f457005)\" to \"[e977e693b256ed48dd79ba62f5b0821697a677fe](https://github.com/sagemath/sagetrac-mirror/commit/e977e693b256ed48dd79ba62f5b0821697a677fe)\".",
    "created_at": "2013-11-15T07:05:23Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194221",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5f2cbc31d441cfa8fa2ca091a1b17bab2f457005](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc31d441cfa8fa2ca091a1b17bab2f457005)" to "[e977e693b256ed48dd79ba62f5b0821697a677fe](https://github.com/sagemath/sagetrac-mirror/commit/e977e693b256ed48dd79ba62f5b0821697a677fe)".



---

archive/issue_comments_194222.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** Recent commits:\n|                                                                                                                |                                   |\n|----------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[e977e69](https://github.com/sagemath/sagetrac-mirror/commit/e977e69)|Use explicit date for git doctests.|",
    "created_at": "2013-11-15T07:05:23Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** Recent commits:
|                                                                                                                |                                   |
|----------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[e977e69](https://github.com/sagemath/sagetrac-mirror/commit/e977e69)|Use explicit date for git doctests.|



---

archive/issue_comments_194223.json:
```json
{
    "body": "<a id='comment:5'></a>\nAh, yes. Fixed to set the date.",
    "created_at": "2013-11-15T07:06:46Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194223",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:5'></a>
Ah, yes. Fixed to set the date.



---

archive/issue_events_136118.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-15T07:06:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-136118"
}
```



---

archive/issue_events_136119.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-15T07:06:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-136119"
}
```



---

archive/issue_comments_194224.json:
```json
{
    "body": "**Changing branch** from \"[u/robertwb/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/ticket/15420)\" to \"[u/ohanar/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/ticket/15420)\".",
    "created_at": "2013-11-15T21:33:49Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194224",
    "user": "https://github.com/ohanar"
}
```

**Changing branch** from "[u/robertwb/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/ticket/15420)" to "[u/ohanar/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/ticket/15420)".



---

archive/issue_comments_194225.json:
```json
{
    "body": "**Reviewer:** R. Andrew Ohana",
    "created_at": "2013-11-15T21:33:49Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194225",
    "user": "https://github.com/ohanar"
}
```

**Reviewer:** R. Andrew Ohana



---

archive/issue_comments_194226.json:
```json
{
    "body": "**Changing commit** from \"[e977e693b256ed48dd79ba62f5b0821697a677fe](https://github.com/sagemath/sagetrac-mirror/commit/e977e693b256ed48dd79ba62f5b0821697a677fe)\" to \"[2e778682424ed6a72c1689f787d144301e7026f2](https://github.com/sagemath/sagetrac-mirror/commit/2e778682424ed6a72c1689f787d144301e7026f2)\".",
    "created_at": "2013-11-15T21:33:49Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194226",
    "user": "https://github.com/ohanar"
}
```

**Changing commit** from "[e977e693b256ed48dd79ba62f5b0821697a677fe](https://github.com/sagemath/sagetrac-mirror/commit/e977e693b256ed48dd79ba62f5b0821697a677fe)" to "[2e778682424ed6a72c1689f787d144301e7026f2](https://github.com/sagemath/sagetrac-mirror/commit/2e778682424ed6a72c1689f787d144301e7026f2)".



---

archive/issue_comments_194227.json:
```json
{
    "body": "<a id='comment:6'></a>\nSeems like `os.environ` is ignored (at least on my system). I changed the doctest to explicitly set the environment. Otherwise, positive review.\n\n---\n**New commits:**\n<table><tr><td>[2e77868](https://github.com/sagemath/sagetrac-mirror/commit/2e77868)</td><td><code>specify environment explicitly for doctests</code></td></tr></table>\n",
    "created_at": "2013-11-15T21:33:49Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194227",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:6'></a>
Seems like `os.environ` is ignored (at least on my system). I changed the doctest to explicitly set the environment. Otherwise, positive review.

---
**New commits:**
<table><tr><td>[2e77868](https://github.com/sagemath/sagetrac-mirror/commit/2e77868)</td><td><code>specify environment explicitly for doctests</code></td></tr></table>




---

archive/issue_comments_194228.json:
```json
{
    "body": "**Changing author** from \"Robert Bradshaw\" to \"Robert Bradshaw, R. Andrew Ohana\".",
    "created_at": "2013-11-15T21:33:49Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194228",
    "user": "https://github.com/ohanar"
}
```

**Changing author** from "Robert Bradshaw" to "Robert Bradshaw, R. Andrew Ohana".



---

archive/issue_events_136120.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-15T22:51:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-136120"
}
```



---

archive/issue_events_136121.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-15T22:51:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-136121"
}
```



---

archive/issue_comments_194229.json:
```json
{
    "body": "<a id='comment:7'></a>\nInteresting. Your change looks good to me.",
    "created_at": "2013-11-15T22:51:27Z",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-194229",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:7'></a>
Interesting. Your change looks good to me.



---

archive/issue_events_136122.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T14:07:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-136122"
}
```



---

archive/issue_events_136123.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3ec5f9ac039bb999f0453c575c52a9452eb65165",
    "created_at": "2013-12-16T14:07:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-136123"
}
```
