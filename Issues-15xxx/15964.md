# Issue 15964: Remove superfluous import statement in ell_point

archive/issues_015727.json:
```json
{
    "body": "As reported on sage-devel, in Sage 6.1.1 this works as designed:\n\n```\nsage: N = 1715761513\nsage: E = EllipticCurve(Integers(N),[3,-13])\nsage: P = E(2,1)\nsage: LCM([2..60])*P\n...ZeroDivisionError: Inverse of 1520944668 does not exist (characteristic = 1715761513 = 26927*63719)\n```\nbut this fails in the wrong way:\n\n```\nN = 35\nE = EllipticCurve(Integers(N),[5,1])\nP = E(0,1)\nLCM([2..6])*P\n...\nUnboundLocalError: local variable 'ZZ' referenced before assignment\n```\nThe problem is that there are two places where the fail condiction can be triggered (and in this situation this happens by design, as it is used to detect the fact that the modulus is not prime and factor it): one in addition of points and one in duplication.  In the latter there is an explicit \"import ZZ\" while in the former there is not.   This could be fixed by deleting the import on line 708 (thus relying on the import at the top of the file in line 130), or by deleting line 130 (since ZZ is not referred to elsehere in the file) and inderting a copy of line 708 before line 696.\n\n\nBranch/Commit: d3224bbd5f0e51f3230da8e84c8f73196e634eb4\n\nReviewer: Peter Bruin\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15964\n\n",
    "closed_at": "2014-04-07T19:08:52Z",
    "created_at": "2014-03-17T15:39:52Z",
    "labels": [
        "component: elliptic curves",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Remove superfluous import statement in ell_point",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15964",
    "user": "https://github.com/JohnCremona"
}
```
As reported on sage-devel, in Sage 6.1.1 this works as designed:

```
sage: N = 1715761513
sage: E = EllipticCurve(Integers(N),[3,-13])
sage: P = E(2,1)
sage: LCM([2..60])*P
...ZeroDivisionError: Inverse of 1520944668 does not exist (characteristic = 1715761513 = 26927*63719)
```
but this fails in the wrong way:

```
N = 35
E = EllipticCurve(Integers(N),[5,1])
P = E(0,1)
LCM([2..6])*P
...
UnboundLocalError: local variable 'ZZ' referenced before assignment
```
The problem is that there are two places where the fail condiction can be triggered (and in this situation this happens by design, as it is used to detect the fact that the modulus is not prime and factor it): one in addition of points and one in duplication.  In the latter there is an explicit "import ZZ" while in the former there is not.   This could be fixed by deleting the import on line 708 (thus relying on the import at the top of the file in line 130), or by deleting line 130 (since ZZ is not referred to elsehere in the file) and inderting a copy of line 708 before line 696.


Branch/Commit: d3224bbd5f0e51f3230da8e84c8f73196e634eb4

Reviewer: Peter Bruin

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15964





---

archive/issue_comments_258462.json:
```json
{
    "body": "<a id='comment:1'></a>Alternative: changing `ZZ(value)` to `value.lift()`, so that ZZ doesn't need to be imported at all.\n\nReally we'd need to check that R is a quotient of ZZ before attempting any of this, not just if R is finite.\n\nIn general: doing in import of ZZ at module instantiation time should be cheap enough, but it's not required at all here, since integers mod N come with a method to get a representing integer.",
    "created_at": "2014-03-17T17:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258462",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:1'></a>Alternative: changing `ZZ(value)` to `value.lift()`, so that ZZ doesn't need to be imported at all.

Really we'd need to check that R is a quotient of ZZ before attempting any of this, not just if R is finite.

In general: doing in import of ZZ at module instantiation time should be cheap enough, but it's not required at all here, since integers mod N come with a method to get a representing integer.



---

archive/issue_comments_258463.json:
```json
{
    "body": "<a id='comment:2'></a>Here is a branch, please review\n\n---\nNew commits:",
    "created_at": "2014-03-21T20:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258463",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>Here is a branch, please review

---
New commits:



---

archive/issue_comments_258464.json:
```json
{
    "body": "Changing author from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2014-03-21T20:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258464",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "" to "Frédéric Chapoton"



---

archive/issue_comments_258465.json:
```json
{
    "body": "Changing commit from \"\" to \"d3224bbd5f0e51f3230da8e84c8f73196e634eb4\"",
    "created_at": "2014-03-21T20:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258465",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "d3224bbd5f0e51f3230da8e84c8f73196e634eb4"



---

archive/issue_comments_258466.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-03-21T20:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258466",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_258467.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/15964\"",
    "created_at": "2014-03-21T20:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258467",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/15964"



---

archive/issue_comments_258468.json:
```json
{
    "body": "<a id='comment:3'></a>Hello, this seems to be an easy ticket, and should be rather simple to review.",
    "created_at": "2014-04-01T19:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258468",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>Hello, this seems to be an easy ticket, and should be rather simple to review.



---

archive/issue_comments_258469.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Peter Bruin\"",
    "created_at": "2014-04-07T00:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258469",
    "user": "https://github.com/pjbruin"
}
```

Changing reviewer from "" to "Peter Bruin"



---

archive/issue_comments_258470.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-07T00:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258470",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_046943.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-07T19:08:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15964#event-46943"
}
```



---

archive/issue_comments_258471.json:
```json
{
    "body": "Changing branch from \"u/chapoton/15964\" to \"d3224bbd5f0e51f3230da8e84c8f73196e634eb4\"",
    "created_at": "2014-04-07T19:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258471",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/15964" to "d3224bbd5f0e51f3230da8e84c8f73196e634eb4"



---

archive/issue_comments_258472.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-07T19:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15964#issuecomment-258472",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
