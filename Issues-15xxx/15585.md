# Issue 15585: Random failure in SimplicialComplex.is_cohen_macaulay

archive/issues_015348.json:
```json
{
    "body": "This is fairly unlikely but occasionally comes up on the buildbot:\n\n```\nsage -t --long src/sage/homology/simplicial_complex.py\n**********************************************************************\nFile \"src/sage/homology/simplicial_complex.py\", line 2236, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay\nFailed example:\n    S.is_cohen_macaulay(ncpus=3)\nExpected:\n    False\nGot:\n    [Errno 2] No such file or directory: '/home/buildbot/build/sage/snapperkob/sage_git/dot_sage/temp/snapperkob/10634/dir_n0BDmn/10759.out'\n    False\n```\n\nThis is because a race condition in ``@`parallel`. This is a parallel generator which forks processes, each process handling one item of the generator. The output of each finished process is stored as pickle in a working directory and then `yield`ed by the main process.\n\nWhen the generator is closed (for example, the generator is used as argument to `all()` and a `False` condition is found), the following happens in a `finally` block:\n\n1. The working directory is removed.\n\n2. The remaining processes are killed.\n\nThis is a race condition because it can happen that a subprocess finishes between these steps. Then that process wants to write its output in the deleted directory. The fix is obvious: first kill the processes, then delete the directory.\n\nCC:  @jdemeyer @roed314 @seblabbe\n\nKeywords: random_fail\n\nBranch/Commit: 51b2030a38280980cb8837d1f6b452ca1084ea8e\n\nReviewer: S\u00e9bastien Labb\u00e9\n\nAuthor: Jeroen Demeyer\n\nDependencies: #22462\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15585\n\n",
    "closed_at": "2017-07-26T22:13:04Z",
    "created_at": "2013-12-25T12:32:04Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Random failure in SimplicialComplex.is_cohen_macaulay",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15585",
    "user": "https://github.com/vbraun"
}
```
This is fairly unlikely but occasionally comes up on the buildbot:

```
sage -t --long src/sage/homology/simplicial_complex.py
**********************************************************************
File "src/sage/homology/simplicial_complex.py", line 2236, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay
Failed example:
    S.is_cohen_macaulay(ncpus=3)
Expected:
    False
Got:
    [Errno 2] No such file or directory: '/home/buildbot/build/sage/snapperkob/sage_git/dot_sage/temp/snapperkob/10634/dir_n0BDmn/10759.out'
    False
```

This is because a race condition in ``@`parallel`. This is a parallel generator which forks processes, each process handling one item of the generator. The output of each finished process is stored as pickle in a working directory and then `yield`ed by the main process.

When the generator is closed (for example, the generator is used as argument to `all()` and a `False` condition is found), the following happens in a `finally` block:

1. The working directory is removed.

2. The remaining processes are killed.

This is a race condition because it can happen that a subprocess finishes between these steps. Then that process wants to write its output in the deleted directory. The fix is obvious: first kill the processes, then delete the directory.

CC:  @jdemeyer @roed314 @seblabbe

Keywords: random_fail

Branch/Commit: 51b2030a38280980cb8837d1f6b452ca1084ea8e

Reviewer: Sébastien Labbé

Author: Jeroen Demeyer

Dependencies: #22462

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15585





---

archive/issue_comments_249692.json:
```json
{
    "body": "<a id='comment:1'></a>Full log (but really nothing interesting) at http://build.sagemath.org/sage/builders/%20%20fast%20AIMS%20snapperkob%20%28Ubuntu%2012.04%20x86_64%29%20incremental/builds/28/steps/shell_3/logs/stdio",
    "created_at": "2013-12-25T12:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249692",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>Full log (but really nothing interesting) at http://build.sagemath.org/sage/builders/%20%20fast%20AIMS%20snapperkob%20%28Ubuntu%2012.04%20x86_64%29%20incremental/builds/28/steps/shell_3/logs/stdio



---

archive/issue_comments_249693.json:
```json
{
    "body": "<a id='comment:2'></a>My guess would be that forke'd process writes temp file, and parent tries to read it after the fork quits. That is inherently racy since the sage cleaner will attempt to delete the child's temp files as it has another pid.",
    "created_at": "2013-12-25T12:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249693",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>My guess would be that forke'd process writes temp file, and parent tries to read it after the fork quits. That is inherently racy since the sage cleaner will attempt to delete the child's temp files as it has another pid.



---

archive/issue_events_045583.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45583"
}
```



---

archive/issue_events_045584.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45584"
}
```



---

archive/issue_events_045585.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45585"
}
```



---

archive/issue_comments_249694.json:
```json
{
    "body": "Changing keywords from \"\" to \"random_fail\".",
    "created_at": "2014-07-25T05:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249694",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "" to "random_fail".



---

archive/issue_events_045586.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45586"
}
```



---

archive/issue_events_045587.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45587"
}
```



---

archive/issue_comments_249695.json:
```json
{
    "body": "<a id='comment:7'></a>Still happens occasionally",
    "created_at": "2015-11-09T04:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249695",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>Still happens occasionally



---

archive/issue_comments_249696.json:
```json
{
    "body": "<a id='comment:8'></a>Seen this today for the first ever I think.  (Sage 7.3.rc0)",
    "created_at": "2016-07-31T09:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249696",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>Seen this today for the first ever I think.  (Sage 7.3.rc0)



---

archive/issue_comments_249697.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 leif]:\n> Seen this today for the first ever I think.  (Sage 7.3.rc0)\n\n\nP.S.:  Same error, different test:\n\n```\nsage -t --long --warn-long 68.2 src/sage/homology/simplicial_complex.py\n**********************************************************************\nFile \"src/sage/homology/simplicial_complex.py\", line 2813, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay\nFailed example:\n    X.is_cohen_macaulay(ZZ)\nExpected:\n    False\nGot:\n    [Errno 2] No such file or directory: '/home/leif/.sage/temp/tunguska/16183/dir_5o8pnH/16223.out'\n    False\n**********************************************************************\n```",
    "created_at": "2016-07-31T09:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249697",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:9'></a>Replying to [comment:8 leif]:
> Seen this today for the first ever I think.  (Sage 7.3.rc0)


P.S.:  Same error, different test:

```
sage -t --long --warn-long 68.2 src/sage/homology/simplicial_complex.py
**********************************************************************
File "src/sage/homology/simplicial_complex.py", line 2813, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay
Failed example:
    X.is_cohen_macaulay(ZZ)
Expected:
    False
Got:
    [Errno 2] No such file or directory: '/home/leif/.sage/temp/tunguska/16183/dir_5o8pnH/16223.out'
    False
**********************************************************************
```



---

archive/issue_comments_249698.json:
```json
{
    "body": "<a id='comment:10'></a>I've seen this a few times recently, too.",
    "created_at": "2016-07-31T17:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249698",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>I've seen this a few times recently, too.



---

archive/issue_events_045588.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-08-17T09:25:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45588"
}
```



---

archive/issue_events_045589.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-08-17T09:25:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45589"
}
```



---

archive/issue_comments_249699.json:
```json
{
    "body": "<a id='comment:12'></a>still there in 7.5 and [7.6.betas](https://groups.google.com/d/msg/sage-release/TMI3trb0G74/8z7F8V52DgAJ).",
    "created_at": "2017-02-02T16:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249699",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>still there in 7.5 and [7.6.betas](https://groups.google.com/d/msg/sage-release/TMI3trb0G74/8z7F8V52DgAJ).



---

archive/issue_events_045590.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-02-02T16:14:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45590"
}
```



---

archive/issue_events_045591.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-02-02T16:14:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45591"
}
```



---

archive/issue_comments_249700.json:
```json
{
    "body": "<a id='comment:13'></a>I wonder if it would help if the tests all used just 1 CPU.",
    "created_at": "2017-02-24T20:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249700",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>I wonder if it would help if the tests all used just 1 CPU.



---

archive/issue_comments_249701.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 jhpalmieri]:\n> I wonder if it would help if the tests all used just 1 CPU.\n\n\nMaybe, but that's not fixing the problem, just hiding it.\n\nIf you want to \"fix\" the problem but not hide it, just add `# known bug`.",
    "created_at": "2017-02-25T07:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249701",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Replying to [comment:13 jhpalmieri]:
> I wonder if it would help if the tests all used just 1 CPU.


Maybe, but that's not fixing the problem, just hiding it.

If you want to "fix" the problem but not hide it, just add `# known bug`.



---

archive/issue_comments_249702.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 jdemeyer]:\n> Replying to [comment:13 jhpalmieri]:\n> > I wonder if it would help if the tests all used just 1 CPU.\n\n> \n> Maybe, but that's not fixing the problem, just hiding it.\n> \n> If you want to \"fix\" the problem but not hide it, just add `# known bug`.\n\n\nat least it would be good to know what part of the code in question writes temp files with extension .out\n(In my admittedly limited experience with parallel code I never saw slaves doing any file I/O; if they do they ought to clean up after themselves, otherwise there is not telling as to what will happen)",
    "created_at": "2017-02-25T12:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249702",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>Replying to [comment:14 jdemeyer]:
> Replying to [comment:13 jhpalmieri]:
> > I wonder if it would help if the tests all used just 1 CPU.

> 
> Maybe, but that's not fixing the problem, just hiding it.
> 
> If you want to "fix" the problem but not hide it, just add `# known bug`.


at least it would be good to know what part of the code in question writes temp files with extension .out
(In my admittedly limited experience with parallel code I never saw slaves doing any file I/O; if they do they ought to clean up after themselves, otherwise there is not telling as to what will happen)



---

archive/issue_comments_249703.json:
```json
{
    "body": "<a id='comment:16'></a>It would be also nice to know what kinds of systems produce the error: OS, number of CPUs, file system, etc.",
    "created_at": "2017-02-25T15:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249703",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:16'></a>It would be also nice to know what kinds of systems produce the error: OS, number of CPUs, file system, etc.



---

archive/issue_comments_249704.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 jhpalmieri]:\n> It would be also nice to know what kinds of systems produce the error: OS, number of CPUs, file system, etc.\n\n\nAs a rule, I get it on a gentoo linux laptop, running on a 4-core Intel i7, and the usual ext4 file systems on an SSD.",
    "created_at": "2017-02-26T20:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249704",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>Replying to [comment:16 jhpalmieri]:
> It would be also nice to know what kinds of systems produce the error: OS, number of CPUs, file system, etc.


As a rule, I get it on a gentoo linux laptop, running on a 4-core Intel i7, and the usual ext4 file systems on an SSD.



---

archive/issue_comments_249705.json:
```json
{
    "body": "<a id='comment:18'></a>See #22462.",
    "created_at": "2017-02-27T16:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249705",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>See #22462.



---

archive/issue_comments_249706.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:16 jhpalmieri]:\n> It would be also nice to know what kinds of systems produce the error: OS, number of CPUs, file system, etc.\n\n\nI almost always get this problem when running `MAKE='make -j8' make ptestlong` on a Ubuntu 16.04, with 8 cpus, with file system ext4.\n\nI am now running `make testlong` in serially to see the difference.",
    "created_at": "2017-07-04T15:39:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249706",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:19'></a>Replying to [comment:16 jhpalmieri]:
> It would be also nice to know what kinds of systems produce the error: OS, number of CPUs, file system, etc.


I almost always get this problem when running `MAKE='make -j8' make ptestlong` on a Ubuntu 16.04, with 8 cpus, with file system ext4.

I am now running `make testlong` in serially to see the difference.



---

archive/issue_comments_249707.json:
```json
{
    "body": "<a id='comment:20'></a>> I am now running `make testlong` in serially to see the difference.\n\n\nI get `All tests passed!` with `make testlong`.",
    "created_at": "2017-07-05T19:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249707",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:20'></a>> I am now running `make testlong` in serially to see the difference.


I get `All tests passed!` with `make testlong`.



---

archive/issue_comments_249708.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#22462\"",
    "created_at": "2017-07-06T15:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249708",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#22462"



---

archive/issue_comments_249709.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2017-07-06T15:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249709",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_249710.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,7 +12,16 @@\n     [Errno 2] No such file or directory: '/home/buildbot/build/sage/snapperkob/sage_git/dot_sage/temp/snapperkob/10634/dir_n0BDmn/10759.out'\n     False\n ```\n-Apparently the code uses `@`parallel and there was already a race fixed in #14150.\n+\n+This is because a race condition in ``@`parallel`. This is a parallel generator which forks processes, each process handling one item of the generator. The output of each finished process is stored as pickle in a working directory and then `yield`ed by the main process.\n+\n+When the generator is closed (for example, the generator is used as argument to `all()` and a `False` condition is found), the following happens in a `finally` block:\n+\n+1. The working directory is removed.\n+\n+2. The remaining processes are killed.\n+\n+This is a race condition because it can happen that a subprocess finishes between these steps. Then that process wants to write its output in the deleted directory. The fix is obvious: first kill the processes, then delete the directory.\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-07-07T07:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249710",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,7 +12,16 @@
     [Errno 2] No such file or directory: '/home/buildbot/build/sage/snapperkob/sage_git/dot_sage/temp/snapperkob/10634/dir_n0BDmn/10759.out'
     False
 ```
-Apparently the code uses `@`parallel and there was already a race fixed in #14150.
+
+This is because a race condition in ``@`parallel`. This is a parallel generator which forks processes, each process handling one item of the generator. The output of each finished process is stored as pickle in a working directory and then `yield`ed by the main process.
+
+When the generator is closed (for example, the generator is used as argument to `all()` and a `False` condition is found), the following happens in a `finally` block:
+
+1. The working directory is removed.
+
+2. The remaining processes are killed.
+
+This is a race condition because it can happen that a subprocess finishes between these steps. Then that process wants to write its output in the deleted directory. The fix is obvious: first kill the processes, then delete the directory.
 
 Comment: 1
 
``````




---

archive/issue_comments_249711.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/ticket/15585\"",
    "created_at": "2017-07-07T08:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249711",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/ticket/15585"



---

archive/issue_comments_249712.json:
```json
{
    "body": "Changing commit from \"\" to \"51b2030a38280980cb8837d1f6b452ca1084ea8e\"",
    "created_at": "2017-07-07T08:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249712",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "51b2030a38280980cb8837d1f6b452ca1084ea8e"



---

archive/issue_comments_249713.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-07T08:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249713",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_249714.json:
```json
{
    "body": "<a id='comment:24'></a>New commits:",
    "created_at": "2017-07-07T08:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249714",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>New commits:



---

archive/issue_comments_249715.json:
```json
{
    "body": "<a id='comment:25'></a>On a machine that almost always gives the error on `is_cohen_macaulay`, I get `All tests passed!` on a single run of `MAKE='make -j6' make ptestlong`.",
    "created_at": "2017-07-11T13:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249715",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:25'></a>On a machine that almost always gives the error on `is_cohen_macaulay`, I get `All tests passed!` on a single run of `MAKE='make -j6' make ptestlong`.



---

archive/issue_comments_249716.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-07-11T16:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249716",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_249717.json:
```json
{
    "body": "<a id='comment:26'></a>On a second run of `make ptestlong`, I still do not get the error. -> Great! Positive review.",
    "created_at": "2017-07-11T16:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249717",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:26'></a>On a second run of `make ptestlong`, I still do not get the error. -> Great! Positive review.



---

archive/issue_comments_249718.json:
```json
{
    "body": "Changing reviewer from \"\" to \"S\u00e9bastien Labb\u00e9\"",
    "created_at": "2017-07-11T16:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249718",
    "user": "https://github.com/seblabbe"
}
```

Changing reviewer from "" to "Sébastien Labbé"



---

archive/issue_comments_249719.json:
```json
{
    "body": "<a id='comment:28'></a>Thanks for investigating this.  I've been seeing this problem too, but thought it was a weird case of the sage-cleaner being overly aggressive for some reason.",
    "created_at": "2017-07-17T08:48:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249719",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'></a>Thanks for investigating this.  I've been seeing this problem too, but thought it was a weird case of the sage-cleaner being overly aggressive for some reason.



---

archive/issue_comments_249720.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/ticket/15585\" to \"51b2030a38280980cb8837d1f6b452ca1084ea8e\"",
    "created_at": "2017-07-26T22:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249720",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/ticket/15585" to "51b2030a38280980cb8837d1f6b452ca1084ea8e"



---

archive/issue_comments_249721.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-07-26T22:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15585#issuecomment-249721",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_045592.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-26T22:13:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15585",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15585#event-45592"
}
```
