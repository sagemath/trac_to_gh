# Issue 15790: GCD of univariate polynomials: generic implementation for UFD, and sparse case

archive/issues_015553.json:
```json
{
    "body": "**[Update]** Due to #13442, the purpose of this ticket changed slightly. It provides two functionalities:\n\n1. A generic implementation for the GCD of two polynomials over a UFD;\n2. A `gcd` method for sparse polynomials which allows to choose between the `generic` implementation, or using the implementation for `dense` polynomials. Default is generally `generic`, but for polynomial over `ZZ` it is `dense`. This is due to the very fast implementations available in Flint and NTL.\n\nThese implementations solve the problem mentioned in the first version of this ticket, that remains below for information.\n\n---\n**[Old description, not relevant anymore]**\n\nThe GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem.\n\n```\nsage: R1.<x>=PolynomialRing(ZZ,'x',sparse=true)\nsage: R2.<x>=PolynomialRing(ZZ,'x',sparse=false)\nsage: R3.<x>=PolynomialRing(QQ,'x',sparse=true)\nsage: p=x^2-3*x+2\nsage: q=x^2-1\nsage: gcd(R2(p),R2(q))\nx - 1\nsage: gcd(R3(p),R3(q))\nx - 1\nsage: gcd(R1(p),R1(q))\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-6-0d7380207fef> in <module>()\n----> 1 gcd(R1(p),R1(q))\n\n/home/bgrenet/bin/sage-6.0-x86_64-Linux/local/lib/python2.7/site-packages/sage/rings/arith.pyc in gcd(a, b, **kwargs)\n   1605                 return ZZ(a).gcd(ZZ(b))\n   1606             except TypeError:\n-> 1607                 raise TypeError(\"unable to find gcd\")\n   1608         return GCD(b, **kwargs)\n   1609 \n\nTypeError: unable to find gcd\n```\n\n**CC:**  @videlec\n\n**Keywords:** polynomial, gcd\n\n**Branch/Commit:** [d77ee902e808082dcc44daf71bb0ea2756c621bb](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)\n\n**Reviewer:** Julian Rueth\n\n**Author:** Bruno Grenet\n\nIssue created by migration from https://trac.sagemath.org/ticket/15790\n\n",
    "closed_at": "2015-10-14T21:03:48Z",
    "created_at": "2014-02-06T12:23:40Z",
    "labels": [
        "component: basic arithmetic",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "title": "GCD of univariate polynomials: generic implementation for UFD, and sparse case",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/15790",
    "user": "https://github.com/bgrenet"
}
```
**[Update]** Due to #13442, the purpose of this ticket changed slightly. It provides two functionalities:

1. A generic implementation for the GCD of two polynomials over a UFD;
2. A `gcd` method for sparse polynomials which allows to choose between the `generic` implementation, or using the implementation for `dense` polynomials. Default is generally `generic`, but for polynomial over `ZZ` it is `dense`. This is due to the very fast implementations available in Flint and NTL.

These implementations solve the problem mentioned in the first version of this ticket, that remains below for information.

---
**[Old description, not relevant anymore]**

The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem.

```
sage: R1.<x>=PolynomialRing(ZZ,'x',sparse=true)
sage: R2.<x>=PolynomialRing(ZZ,'x',sparse=false)
sage: R3.<x>=PolynomialRing(QQ,'x',sparse=true)
sage: p=x^2-3*x+2
sage: q=x^2-1
sage: gcd(R2(p),R2(q))
x - 1
sage: gcd(R3(p),R3(q))
x - 1
sage: gcd(R1(p),R1(q))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-6-0d7380207fef> in <module>()
----> 1 gcd(R1(p),R1(q))

/home/bgrenet/bin/sage-6.0-x86_64-Linux/local/lib/python2.7/site-packages/sage/rings/arith.pyc in gcd(a, b, **kwargs)
   1605                 return ZZ(a).gcd(ZZ(b))
   1606             except TypeError:
-> 1607                 raise TypeError("unable to find gcd")
   1608         return GCD(b, **kwargs)
   1609 

TypeError: unable to find gcd
```

**CC:**  @videlec

**Keywords:** polynomial, gcd

**Branch/Commit:** [d77ee902e808082dcc44daf71bb0ea2756c621bb](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)

**Reviewer:** Julian Rueth

**Author:** Bruno Grenet

Issue created by migration from https://trac.sagemath.org/ticket/15790





---

archive/issue_comments_201586.json:
```json
{
    "body": "<a id='comment:1'></a>\nFor `PolynomialRing(ZZ,'x',sparse=false)`, one of FLINT or NTL is used (FLINT by default). \n\nFor `PolynomialRing(QQ,'x',sparse=true)`, the `gcd` computation is based on `quo_rem`. This is not possible over the integer since `quo_rem` works for polynomials over a field. \n\nThere are several possible solutions: \n1. Coerce the polynomials to `PolynomialRing(QQ,'x',sparse=true)`; compute their GCD `g`, the LCM `l` of the denominators of the coefficients of `g`, and return `l*g`.\n2. Coerce the polynomials to `PolynomialRing(ZZ,'x',sparse=false)`; compute their GCD and return the result in sparse representation with a second coercion.\n3. Implement a *pseudo-division* algorithm (//cf.// Cohen GTM 138 Algorithm 3.1.2) and a GCD algorithm based on the sub-resultant (//cf.// Cohen GTM 138 Algorithm 3.3.1).\n\nSolution 3 seems cleaner but does not give especially efficient results since the algorithms described in Cohen GTM 138 have complexity polynomial in the degree of the input polynomial. Actually, computing the GCD of two sparse polynomial is NP-hard ![1] so no better solution than converting to the dense representation is likely to exist. To my mind, Solution 2 is then the best one. \n\nYet, I am new to Sage so comments are welcome!\n\n![1] D. Plaisted, Sparse complex polynomials and polynomial reducibility. J. Comput. Syst. Sci. 14 (2), 210\u2013221, 1977.",
    "created_at": "2014-02-06T15:26:41Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201586",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:1'></a>
For `PolynomialRing(ZZ,'x',sparse=false)`, one of FLINT or NTL is used (FLINT by default). 

For `PolynomialRing(QQ,'x',sparse=true)`, the `gcd` computation is based on `quo_rem`. This is not possible over the integer since `quo_rem` works for polynomials over a field. 

There are several possible solutions: 
1. Coerce the polynomials to `PolynomialRing(QQ,'x',sparse=true)`; compute their GCD `g`, the LCM `l` of the denominators of the coefficients of `g`, and return `l*g`.
2. Coerce the polynomials to `PolynomialRing(ZZ,'x',sparse=false)`; compute their GCD and return the result in sparse representation with a second coercion.
3. Implement a *pseudo-division* algorithm (//cf.// Cohen GTM 138 Algorithm 3.1.2) and a GCD algorithm based on the sub-resultant (//cf.// Cohen GTM 138 Algorithm 3.3.1).

Solution 3 seems cleaner but does not give especially efficient results since the algorithms described in Cohen GTM 138 have complexity polynomial in the degree of the input polynomial. Actually, computing the GCD of two sparse polynomial is NP-hard ![1] so no better solution than converting to the dense representation is likely to exist. To my mind, Solution 2 is then the best one. 

Yet, I am new to Sage so comments are welcome!

![1] D. Plaisted, Sparse complex polynomials and polynomial reducibility. J. Comput. Syst. Sci. 14 (2), 210â€“221, 1977.



---

archive/issue_comments_201587.json:
```json
{
    "body": "<a id='comment:2'></a>\nI'd implement all 3 with an optional `algorithm` argument since each has different strengths/weaknesses. For example, 2 is good as long as the polynomials are relatively dense, but for something like `x^100000 - 2`, I wouldn't want to convert that to a dense polynomial because of the memory usage (and take the time to construct it). From that, I think 3 should be the default. Possible names:\n\n1. `\"fraction_field\"`\n2. `\"dense\"`\n3. `\"pseudo-division\"`\n\nNevertheless, I think we should have some `gcd` since this would be a surprise for the more casual user.",
    "created_at": "2014-02-07T15:34:33Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201587",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
I'd implement all 3 with an optional `algorithm` argument since each has different strengths/weaknesses. For example, 2 is good as long as the polynomials are relatively dense, but for something like `x^100000 - 2`, I wouldn't want to convert that to a dense polynomial because of the memory usage (and take the time to construct it). From that, I think 3 should be the default. Possible names:

1. `"fraction_field"`
2. `"dense"`
3. `"pseudo-division"`

Nevertheless, I think we should have some `gcd` since this would be a surprise for the more casual user.



---

archive/issue_events_140370.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140370"
}
```



---

archive/issue_events_140371.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140371"
}
```



---

archive/issue_comments_201588.json:
```json
{
    "body": "**Branch:** [u/bruno/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/gcd_of_sparse_univariate_polynomials_over_zz)",
    "created_at": "2014-06-25T21:42:35Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201588",
    "user": "https://github.com/bgrenet"
}
```

**Branch:** [u/bruno/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/gcd_of_sparse_univariate_polynomials_over_zz)



---

archive/issue_comments_201589.json:
```json
{
    "body": "**Commit:** [8ddbb9efad8d53552fa26727fb484720bda66025](https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025)",
    "created_at": "2014-06-25T22:45:17Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201589",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [8ddbb9efad8d53552fa26727fb484720bda66025](https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025)



---

archive/issue_comments_201590.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025\">8ddbb9e</a></td><td><code>Add gcd method to class Polynomial_generic_sparse</code></td></tr></table>\n",
    "created_at": "2014-06-25T22:45:17Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201590",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025">8ddbb9e</a></td><td><code>Add gcd method to class Polynomial_generic_sparse</code></td></tr></table>




---

archive/issue_comments_201591.json:
```json
{
    "body": "<a id='comment:7'></a>\nI've implemented the `gcd` method in the class `Polynomial` using the pseudo-division algorithm, as well as a method `gcd` in `Polynomial_generic_sparse` which allows to choose the algorithm between `\"pseudo-division\"`, `\"dense\"` or `\"fraction_field\"`. \n\nNeeds review!\n\nOne remaining limitation is the absence of `quo_rem` method in `Polynomial_generic_sparse`. I created a specific ticket #16544 for this.",
    "created_at": "2014-06-25T22:54:55Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201591",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:7'></a>
I've implemented the `gcd` method in the class `Polynomial` using the pseudo-division algorithm, as well as a method `gcd` in `Polynomial_generic_sparse` which allows to choose the algorithm between `"pseudo-division"`, `"dense"` or `"fraction_field"`. 

Needs review!

One remaining limitation is the absence of `quo_rem` method in `Polynomial_generic_sparse`. I created a specific ticket #16544 for this.



---

archive/issue_events_140372.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-06-25T22:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140372"
}
```



---

archive/issue_comments_201592.json:
```json
{
    "body": "**Changing keywords** from \"GCD sparse\" to \"sparse polynomial, gcd\".",
    "created_at": "2014-06-25T22:55:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201592",
    "user": "https://github.com/bgrenet"
}
```

**Changing keywords** from "GCD sparse" to "sparse polynomial, gcd".



---

archive/issue_comments_201593.json:
```json
{
    "body": "**Author:** Bruno Grenet",
    "created_at": "2014-06-26T16:41:54Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201593",
    "user": "https://github.com/bgrenet"
}
```

**Author:** Bruno Grenet



---

archive/issue_comments_201594.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96f11a1e1dee02d6409b3885958accc66103f240\">96f11a1</a></td><td><code>Add special case for p.pseudo_quo_rem(q) when q is a constant</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9000fb85706fa54e1dd315b8eab9241e7ea45e8a\">9000fb8</a></td><td><code>Add quo_rem method in class Polynomial_generic_sparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84833c9ad72727913a0cec5ca1e9f4f9d9e16d73\">84833c9</a></td><td><code>Move inversion of unit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb1d21cbee05d6be577bf66120aa20d3bd498ace\">fb1d21c</a></td><td><code>Add doc tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102\">65943e1</a></td><td><code>Merge branch 't/16544/fb1d21cbee05d6be577bf66120aa20d3bd498ace' into t/15790/gcd_of_sparse_univariate_polynomials_over_zz</code></td></tr></table>\n",
    "created_at": "2014-07-11T17:33:06Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201594",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96f11a1e1dee02d6409b3885958accc66103f240">96f11a1</a></td><td><code>Add special case for p.pseudo_quo_rem(q) when q is a constant</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9000fb85706fa54e1dd315b8eab9241e7ea45e8a">9000fb8</a></td><td><code>Add quo_rem method in class Polynomial_generic_sparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84833c9ad72727913a0cec5ca1e9f4f9d9e16d73">84833c9</a></td><td><code>Move inversion of unit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb1d21cbee05d6be577bf66120aa20d3bd498ace">fb1d21c</a></td><td><code>Add doc tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102">65943e1</a></td><td><code>Merge branch 't/16544/fb1d21cbee05d6be577bf66120aa20d3bd498ace' into t/15790/gcd_of_sparse_univariate_polynomials_over_zz</code></td></tr></table>




---

archive/issue_comments_201595.json:
```json
{
    "body": "**Changing commit** from \"[8ddbb9efad8d53552fa26727fb484720bda66025](https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025)\" to \"[65943e1a4ae6da9d2c7579ba14317aeada6eb102](https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102)\".",
    "created_at": "2014-07-11T17:33:06Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201595",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8ddbb9efad8d53552fa26727fb484720bda66025](https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025)" to "[65943e1a4ae6da9d2c7579ba14317aeada6eb102](https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102)".



---

archive/issue_events_140373.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-07-11T17:36:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140373"
}
```



---

archive/issue_events_140374.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-07-11T17:36:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140374"
}
```



---

archive/issue_events_140375.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140375"
}
```



---

archive/issue_events_140376.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140376"
}
```



---

archive/issue_comments_201596.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf5a84643938e85b7cb7cbc6454eb27544c103ca\">bf5a846</a></td><td><code>Correct formatting of doctests + raise error for unknown algorithm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4\">5c84d71</a></td><td><code>Change Error for pseudo-division by zero</code></td></tr></table>\n",
    "created_at": "2014-12-13T14:20:41Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201596",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf5a84643938e85b7cb7cbc6454eb27544c103ca">bf5a846</a></td><td><code>Correct formatting of doctests + raise error for unknown algorithm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4">5c84d71</a></td><td><code>Change Error for pseudo-division by zero</code></td></tr></table>




---

archive/issue_comments_201597.json:
```json
{
    "body": "**Changing commit** from \"[65943e1a4ae6da9d2c7579ba14317aeada6eb102](https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102)\" to \"[5c84d7115a1e5406487b5d59746554b44be995e4](https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4)\".",
    "created_at": "2014-12-13T14:20:41Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201597",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[65943e1a4ae6da9d2c7579ba14317aeada6eb102](https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102)" to "[5c84d7115a1e5406487b5d59746554b44be995e4](https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4)".



---

archive/issue_events_140377.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-12-13T14:36:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140377"
}
```



---

archive/issue_events_140378.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-12-13T14:36:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140378"
}
```



---

archive/issue_comments_201598.json:
```json
{
    "body": "<a id='comment:14'></a>\nThe ticket is ready for review. Note that as default, I have the \"dense\" algorithm for polynomials over ZZ and \"pseudo-division\" for the other ones. The idea is that arithmetic on ZZ[X] is very efficient. \n\nOf course, `gcd(x<sup>100000-1,x</sup>1000-1)` is much faster (by a factor approx. 400) with \"pseudo-division\" algorithm because of memory allocation for the \"dense\" algorithm, and thanks to a very good behavior of the \"pseudo-division\" algorithm on this example. Yet, if you consider `gcd(x<sup>100000-1,x</sup>2-1)` (which should be easy btw), the \"dense\" algorithm is faster and I even stopped the \"pseudo-division\" algorithm after a quite long time. \n\n*Note:* It may be possible to reduce the huge allocation time since with NTL implementation, this is much faster: https://groups.google.com/forum/#!topic/sage-devel/6qhW90dgd1k.",
    "created_at": "2014-12-13T14:36:28Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201598",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:14'></a>
The ticket is ready for review. Note that as default, I have the "dense" algorithm for polynomials over ZZ and "pseudo-division" for the other ones. The idea is that arithmetic on ZZ[X] is very efficient. 

Of course, `gcd(x<sup>100000-1,x</sup>1000-1)` is much faster (by a factor approx. 400) with "pseudo-division" algorithm because of memory allocation for the "dense" algorithm, and thanks to a very good behavior of the "pseudo-division" algorithm on this example. Yet, if you consider `gcd(x<sup>100000-1,x</sup>2-1)` (which should be easy btw), the "dense" algorithm is faster and I even stopped the "pseudo-division" algorithm after a quite long time. 

*Note:* It may be possible to reduce the huge allocation time since with NTL implementation, this is much faster: https://groups.google.com/forum/#!topic/sage-devel/6qhW90dgd1k.



---

archive/issue_comments_201599.json:
```json
{
    "body": "<a id='comment:15'></a>\nDo you have a heuristic for determining when one algorithm is faster than another (when the base ring is `ZZ`)? It doesn't have to be a particularly good one, but considering the time differences you're getting, it seems like we should have some automatic choice of algorithm.",
    "created_at": "2014-12-13T17:34:30Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201599",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
Do you have a heuristic for determining when one algorithm is faster than another (when the base ring is `ZZ`)? It doesn't have to be a particularly good one, but considering the time differences you're getting, it seems like we should have some automatic choice of algorithm.



---

archive/issue_comments_201600.json:
```json
{
    "body": "**Changing commit** from \"[5c84d7115a1e5406487b5d59746554b44be995e4](https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4)\" to \"[ec2ef11336040e95c8cdf1bed7523006747b5ab1](https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1)\".",
    "created_at": "2014-12-15T17:35:34Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201600",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c84d7115a1e5406487b5d59746554b44be995e4](https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4)" to "[ec2ef11336040e95c8cdf1bed7523006747b5ab1](https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1)".



---

archive/issue_comments_201601.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1\">ec2ef11</a></td><td><code>Choice between FLINT and NTL</code></td></tr></table>\n",
    "created_at": "2014-12-15T17:35:34Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201601",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1">ec2ef11</a></td><td><code>Choice between FLINT and NTL</code></td></tr></table>




---

archive/issue_comments_201602.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [tscrim](#comment%3A15):\n> Do you have a heuristic for determining when one algorithm is faster than another (when the base ring is `ZZ`)? It doesn't have to be a particularly good one, but considering the time differences you're getting, it seems like we should have some automatic choice of algorithm.\n\n\nI don't have one. Based on the comments on https://groups.google.com/forum/#!topic/sage-devel/6qhW90dgd1k, I add the possibility\u00b9 for the \"dense\" algorithm to use NTL instead of FLINT. After some tests, I chose a heuristic for using NTL rather than FLINT (basically, FLINT is faster for low-degree polynomials and *not-too-sparse* ones). Then the \"dense\" algorithm is almost always faster than \"pseudo-division\" but for some very specific examples (I haven't been able to build other ones): `gcd(x<sup>N-1,x</sup>M-1)` with both `N` and `M` pretty large. An the ratio is not hundreds anymore, but approx. 10. \n\n\u00b9 Actually, no choice for the user but only an automatic switch.",
    "created_at": "2014-12-15T17:40:13Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201602",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:17'></a>
Replying to [tscrim](#comment%3A15):
> Do you have a heuristic for determining when one algorithm is faster than another (when the base ring is `ZZ`)? It doesn't have to be a particularly good one, but considering the time differences you're getting, it seems like we should have some automatic choice of algorithm.


I don't have one. Based on the comments on https://groups.google.com/forum/#!topic/sage-devel/6qhW90dgd1k, I add the possibilityÂ¹ for the "dense" algorithm to use NTL instead of FLINT. After some tests, I chose a heuristic for using NTL rather than FLINT (basically, FLINT is faster for low-degree polynomials and *not-too-sparse* ones). Then the "dense" algorithm is almost always faster than "pseudo-division" but for some very specific examples (I haven't been able to build other ones): `gcd(x<sup>N-1,x</sup>M-1)` with both `N` and `M` pretty large. An the ratio is not hundreds anymore, but approx. 10. 

Â¹ Actually, no choice for the user but only an automatic switch.



---

archive/issue_events_140379.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-07T06:45:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140379"
}
```



---

archive/issue_events_140380.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-07T06:45:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140380"
}
```



---

archive/issue_comments_201603.json:
```json
{
    "body": "<a id='comment:18'></a>\nneeds work, does not build, see patchbot report:\n\n```\nFile \"sage/structure/element.pyx\", line 3433, in sage.structure.element.NamedBinopMethod.__init__ (build/cythonized/sage/structure/element.c:26905)\nAttributeError: 'sage.structure.element.NamedBinopMethod' object has no attribute '__name__'\n```",
    "created_at": "2015-08-07T06:45:49Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201603",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'></a>
needs work, does not build, see patchbot report:

```
File "sage/structure/element.pyx", line 3433, in sage.structure.element.NamedBinopMethod.__init__ (build/cythonized/sage/structure/element.c:26905)
AttributeError: 'sage.structure.element.NamedBinopMethod' object has no attribute '__name__'
```



---

archive/issue_comments_201604.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b27296098cc6a7e86dca7ea1bac66e4ef2dc429b\">b272960</a></td><td><code>Add pseudo-division and gcd for Polynomials (as generic as possible)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c88b600cc02a37759e5a33346a52115842c85050\">c88b600</a></td><td><code>Add gcd method to class Polynomial_generic_sparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f6a167671cffbdcc0c1d91a226a77a26f3c1cc5\">6f6a167</a></td><td><code>Add special case for p.pseudo_quo_rem(q) when q is a constant</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f797ef3ab0b1714454c7a6f1080e46f4f654411\">9f797ef</a></td><td><code>Correct formatting of doctests + raise error for unknown algorithm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c31b67522c46efa26f5b7b60db6ee2b4869e89a\">6c31b67</a></td><td><code>Change Error for pseudo-division by zero</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f623b8893f9b08689be7e3df95e99a51d8c744ce\">f623b88</a></td><td><code>Choice between FLINT and NTL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a\">3015456</a></td><td><code>Adapted to 6.9beta1 => Merged two gcd methods</code></td></tr></table>\n",
    "created_at": "2015-08-07T14:52:17Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201604",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b27296098cc6a7e86dca7ea1bac66e4ef2dc429b">b272960</a></td><td><code>Add pseudo-division and gcd for Polynomials (as generic as possible)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c88b600cc02a37759e5a33346a52115842c85050">c88b600</a></td><td><code>Add gcd method to class Polynomial_generic_sparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f6a167671cffbdcc0c1d91a226a77a26f3c1cc5">6f6a167</a></td><td><code>Add special case for p.pseudo_quo_rem(q) when q is a constant</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f797ef3ab0b1714454c7a6f1080e46f4f654411">9f797ef</a></td><td><code>Correct formatting of doctests + raise error for unknown algorithm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c31b67522c46efa26f5b7b60db6ee2b4869e89a">6c31b67</a></td><td><code>Change Error for pseudo-division by zero</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f623b8893f9b08689be7e3df95e99a51d8c744ce">f623b88</a></td><td><code>Choice between FLINT and NTL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a">3015456</a></td><td><code>Adapted to 6.9beta1 => Merged two gcd methods</code></td></tr></table>




---

archive/issue_comments_201605.json:
```json
{
    "body": "**Changing commit** from \"[ec2ef11336040e95c8cdf1bed7523006747b5ab1](https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1)\" to \"[3015456844cb54f37cf4bbae8423521cdd33624a](https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a)\".",
    "created_at": "2015-08-07T14:52:17Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201605",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ec2ef11336040e95c8cdf1bed7523006747b5ab1](https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1)" to "[3015456844cb54f37cf4bbae8423521cdd33624a](https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a)".



---

archive/issue_comments_201606.json:
```json
{
    "body": "<a id='comment:20'></a>\nThis is rebased, and now works (as far as I can tell).",
    "created_at": "2015-08-07T15:08:59Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201606",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:20'></a>
This is rebased, and now works (as far as I can tell).



---

archive/issue_comments_201607.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+**[Update]** Due to #13442, the implementation of this ticket can be viewed as a fallback GCD implementation for rings which do not have a method `_gcd_univariate_polynomial`.\n+\n The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem. \n \n ```\n``````\n",
    "created_at": "2015-08-07T15:08:59Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201607",
    "user": "https://github.com/bgrenet"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+**[Update]** Due to #13442, the implementation of this ticket can be viewed as a fallback GCD implementation for rings which do not have a method `_gcd_univariate_polynomial`.
+
 The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem. 
 
 ```
``````




---

archive/issue_events_140381.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140381"
}
```



---

archive/issue_events_140382.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140382"
}
```



---

archive/issue_events_140383.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "rename": {
        "from": "GCD of sparse univariate polynomials over ZZ",
        "to": "GCD of [sparse] univariate polynomials [over ZZ] [updated]"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140383"
}
```



---

archive/issue_events_140384.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140384"
}
```



---

archive/issue_events_140385.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140385"
}
```



---

archive/issue_comments_201608.json:
```json
{
    "body": "<a id='comment:21'></a>\nDoc does not build\n\n```\nOSError: [polynomia] docstring of sage.rings.polynomial.polynomial_element.Polynomial.pseudo_quo_rem:38: WARNING: Duplicate explicit target name: \"gtm138\".\n```",
    "created_at": "2015-08-07T17:52:16Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201608",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>
Doc does not build

```
OSError: [polynomia] docstring of sage.rings.polynomial.polynomial_element.Polynomial.pseudo_quo_rem:38: WARNING: Duplicate explicit target name: "gtm138".
```



---

archive/issue_events_140386.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-07T17:52:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140386"
}
```



---

archive/issue_events_140387.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-07T17:52:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140387"
}
```



---

archive/issue_comments_201609.json:
```json
{
    "body": "**Changing commit** from \"[3015456844cb54f37cf4bbae8423521cdd33624a](https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a)\" to \"[47badc1b7322077ffbf2f89ab6ad2acc2dce18b4](https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4)\".",
    "created_at": "2015-08-25T14:11:44Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201609",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3015456844cb54f37cf4bbae8423521cdd33624a](https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a)" to "[47badc1b7322077ffbf2f89ab6ad2acc2dce18b4](https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4)".



---

archive/issue_comments_201610.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4\">47badc1</a></td><td><code>Move fallback algorithm to category UFD</code></td></tr></table>\n",
    "created_at": "2015-08-25T14:11:44Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201610",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4">47badc1</a></td><td><code>Move fallback algorithm to category UFD</code></td></tr></table>




---

archive/issue_comments_201611.json:
```json
{
    "body": "**Changing commit** from \"[47badc1b7322077ffbf2f89ab6ad2acc2dce18b4](https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4)\" to \"[f9089369482cc589372b0f3a7461d633d9540964](https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964)\".",
    "created_at": "2015-08-25T14:51:30Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201611",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[47badc1b7322077ffbf2f89ab6ad2acc2dce18b4](https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4)" to "[f9089369482cc589372b0f3a7461d633d9540964](https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964)".



---

archive/issue_comments_201612.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964\">f908936</a></td><td><code>Simplify GCD for sparse polynomials</code></td></tr></table>\n",
    "created_at": "2015-08-25T14:51:30Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201612",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964">f908936</a></td><td><code>Simplify GCD for sparse polynomials</code></td></tr></table>




---

archive/issue_events_140388.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-25T15:07:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "rename": {
        "from": "GCD of [sparse] univariate polynomials [over ZZ] [updated]",
        "to": "GCD of univariate polynomials: generic implementation for UFD, and sparse case"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140388"
}
```



---

archive/issue_comments_201613.json:
```json
{
    "body": "<a id='comment:24'></a>\nIn the two latest commits, I propose the following changes:\n\n1. Instead of having a fallback algorithm in the method `Polynomial.gcd` which tests whether the base ring in a unique factorization domain, this algorithm is moved to the category `UniqueFactorizationDomains`.\n2. I simplified the method `Polynomial_generic_sparse.gcd`: There remain only two possibilities (out of three), namely the one previously called `pseudo-division` (renamed `generic`, since it uses the generic code) and the `dense` version, which may in some cases be faster, for instance over `ZZ`. I removed the `fraction_field` option which does not make much sense I think.\n\nAt the same time, I also take [Fr\u00e9d\u00e9ric's comment](#comment%3A21) into account.",
    "created_at": "2015-08-25T15:07:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201613",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:24'></a>
In the two latest commits, I propose the following changes:

1. Instead of having a fallback algorithm in the method `Polynomial.gcd` which tests whether the base ring in a unique factorization domain, this algorithm is moved to the category `UniqueFactorizationDomains`.
2. I simplified the method `Polynomial_generic_sparse.gcd`: There remain only two possibilities (out of three), namely the one previously called `pseudo-division` (renamed `generic`, since it uses the generic code) and the `dense` version, which may in some cases be faster, for instance over `ZZ`. I removed the `fraction_field` option which does not make much sense I think.

At the same time, I also take [FrÃ©dÃ©ric's comment](#comment%3A21) into account.



---

archive/issue_comments_201614.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,14 @@\n-**[Update]** Due to #13442, the implementation of this ticket can be viewed as a fallback GCD implementation for rings which do not have a method `_gcd_univariate_polynomial`.\n+**[Update]** Due to #13442, the purpose of this ticket changed slightly. It provides two functionalities:\n \n-The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem. \n+1. A generic implementation for the GCD of two polynomials over a UFD;\n+2. A `gcd` method for sparse polynomials which allows to choose between the `generic` implementation, or using the implementation for `dense` polynomials. Default is generally `generic`, but for polynomial over `ZZ` it is `dense`. This is due to the very fast implementations available in Flint and NTL.\n+\n+These implementations solve the problem mentioned in the first version of this ticket, that remains below for information.\n+\n+---\n+**[Old description, not relevant anymore]**\n+\n+The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem.\n \n ```\n sage: R1.<x>=PolynomialRing(ZZ,'x',sparse=true)\n``````\n",
    "created_at": "2015-08-25T15:07:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201614",
    "user": "https://github.com/bgrenet"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,14 @@
-**[Update]** Due to #13442, the implementation of this ticket can be viewed as a fallback GCD implementation for rings which do not have a method `_gcd_univariate_polynomial`.
+**[Update]** Due to #13442, the purpose of this ticket changed slightly. It provides two functionalities:
 
-The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem. 
+1. A generic implementation for the GCD of two polynomials over a UFD;
+2. A `gcd` method for sparse polynomials which allows to choose between the `generic` implementation, or using the implementation for `dense` polynomials. Default is generally `generic`, but for polynomial over `ZZ` it is `dense`. This is due to the very fast implementations available in Flint and NTL.
+
+These implementations solve the problem mentioned in the first version of this ticket, that remains below for information.
+
+---
+**[Old description, not relevant anymore]**
+
+The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem.
 
 ```
 sage: R1.<x>=PolynomialRing(ZZ,'x',sparse=true)
``````




---

archive/issue_events_140389.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-25T15:07:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140389"
}
```



---

archive/issue_events_140390.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-25T15:07:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140390"
}
```



---

archive/issue_comments_201615.json:
```json
{
    "body": "**Changing keywords** from \"sparse polynomial, gcd\" to \"polynomial, gcd\".",
    "created_at": "2015-08-25T15:07:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201615",
    "user": "https://github.com/bgrenet"
}
```

**Changing keywords** from "sparse polynomial, gcd" to "polynomial, gcd".



---

archive/issue_comments_201616.json:
```json
{
    "body": "**Changing branch** from \"[u/bruno/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/gcd_of_sparse_univariate_polynomials_over_zz)\" to \"[u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz)\".",
    "created_at": "2015-10-04T02:27:37Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201616",
    "user": "https://github.com/saraedum"
}
```

**Changing branch** from "[u/bruno/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/gcd_of_sparse_univariate_polynomials_over_zz)" to "[u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz)".



---

archive/issue_comments_201617.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb\">d77ee90</a></td><td><code>Improved docstring of PolynomialElement.pseudo_quo_rem()</code></td></tr></table>\n",
    "created_at": "2015-10-04T03:16:55Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201617",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb">d77ee90</a></td><td><code>Improved docstring of PolynomialElement.pseudo_quo_rem()</code></td></tr></table>




---

archive/issue_comments_201618.json:
```json
{
    "body": "**Changing commit** from \"[f9089369482cc589372b0f3a7461d633d9540964](https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964)\" to \"[d77ee902e808082dcc44daf71bb0ea2756c621bb](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)\".",
    "created_at": "2015-10-04T03:16:55Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201618",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f9089369482cc589372b0f3a7461d633d9540964](https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964)" to "[d77ee902e808082dcc44daf71bb0ea2756c621bb](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)".



---

archive/issue_events_140391.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2015-10-04T03:17:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140391"
}
```



---

archive/issue_events_140392.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2015-10-04T03:17:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140392"
}
```



---

archive/issue_comments_201619.json:
```json
{
    "body": "<a id='comment:27'></a>\nMade some minor docstring changes. Everything else looks fine.",
    "created_at": "2015-10-04T03:17:28Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201619",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:27'></a>
Made some minor docstring changes. Everything else looks fine.



---

archive/issue_comments_201620.json:
```json
{
    "body": "<a id='comment:28'></a>\nThanks for improving the docstring, and for the review! I add your name as a reviewer.",
    "created_at": "2015-10-05T06:58:40Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201620",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:28'></a>
Thanks for improving the docstring, and for the review! I add your name as a reviewer.



---

archive/issue_comments_201621.json:
```json
{
    "body": "**Reviewer:** Julian Rueth",
    "created_at": "2015-10-05T06:58:40Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201621",
    "user": "https://github.com/bgrenet"
}
```

**Reviewer:** Julian Rueth



---

archive/issue_events_140393.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-14T21:03:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140393"
}
```



---

archive/issue_events_140394.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "21795e326487b6dad433a27e3ee95a221279623d",
    "created_at": "2015-10-14T21:03:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-140394"
}
```



---

archive/issue_comments_201622.json:
```json
{
    "body": "**Changing branch** from \"[u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz)\" to \"[d77ee902e808082dcc44daf71bb0ea2756c621bb](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)\".",
    "created_at": "2015-10-14T21:03:48Z",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-201622",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz)" to "[d77ee902e808082dcc44daf71bb0ea2756c621bb](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)".
