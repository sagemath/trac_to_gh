# Issue 15790: GCD of univariate polynomials: generic implementation for UFD, and sparse case

archive/issues_015553.json:
```json
{
    "assignees": [],
    "body": "**[Update]** Due to #13442, the purpose of this ticket changed slightly. It provides two functionalities:\n\n1. A generic implementation for the GCD of two polynomials over a UFD;\n2. A `gcd` method for sparse polynomials which allows to choose between the `generic` implementation, or using the implementation for `dense` polynomials. Default is generally `generic`, but for polynomial over `ZZ` it is `dense`. This is due to the very fast implementations available in Flint and NTL.\n\nThese implementations solve the problem mentioned in the first version of this ticket, that remains below for information.\n\n---\n**[Old description, not relevant anymore]**\n\nThe GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem.\n\n```\nsage: R1.<x>=PolynomialRing(ZZ,'x',sparse=true)\nsage: R2.<x>=PolynomialRing(ZZ,'x',sparse=false)\nsage: R3.<x>=PolynomialRing(QQ,'x',sparse=true)\nsage: p=x^2-3*x+2\nsage: q=x^2-1\nsage: gcd(R2(p),R2(q))\nx - 1\nsage: gcd(R3(p),R3(q))\nx - 1\nsage: gcd(R1(p),R1(q))\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-6-0d7380207fef> in <module>()\n----> 1 gcd(R1(p),R1(q))\n\n/home/bgrenet/bin/sage-6.0-x86_64-Linux/local/lib/python2.7/site-packages/sage/rings/arith.pyc in gcd(a, b, **kwargs)\n   1605                 return ZZ(a).gcd(ZZ(b))\n   1606             except TypeError:\n-> 1607                 raise TypeError(\"unable to find gcd\")\n   1608         return GCD(b, **kwargs)\n   1609 \n\nTypeError: unable to find gcd\n```\n\nCC:  @videlec\n\nKeywords: **polynomial, gcd**\n\nBranch/Commit: **[`d77ee90`](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)**\n\nReviewer: **Julian Rueth**\n\nAuthor: **Bruno Grenet**\n\nComponent: **basic arithmetic**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15790_\n\n",
    "closed_at": "2015-10-14T21:03:48Z",
    "created_at": "2014-02-06T12:23:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "GCD of univariate polynomials: generic implementation for UFD, and sparse case",
    "type": "issue",
    "updated_at": "2015-10-14T21:03:48Z",
    "url": "https://github.com/sagemath/sage/issues/15790",
    "user": "https://github.com/bgrenet"
}
```
**[Update]** Due to #13442, the purpose of this ticket changed slightly. It provides two functionalities:

1. A generic implementation for the GCD of two polynomials over a UFD;
2. A `gcd` method for sparse polynomials which allows to choose between the `generic` implementation, or using the implementation for `dense` polynomials. Default is generally `generic`, but for polynomial over `ZZ` it is `dense`. This is due to the very fast implementations available in Flint and NTL.

These implementations solve the problem mentioned in the first version of this ticket, that remains below for information.

---
**[Old description, not relevant anymore]**

The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem.

```
sage: R1.<x>=PolynomialRing(ZZ,'x',sparse=true)
sage: R2.<x>=PolynomialRing(ZZ,'x',sparse=false)
sage: R3.<x>=PolynomialRing(QQ,'x',sparse=true)
sage: p=x^2-3*x+2
sage: q=x^2-1
sage: gcd(R2(p),R2(q))
x - 1
sage: gcd(R3(p),R3(q))
x - 1
sage: gcd(R1(p),R1(q))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-6-0d7380207fef> in <module>()
----> 1 gcd(R1(p),R1(q))

/home/bgrenet/bin/sage-6.0-x86_64-Linux/local/lib/python2.7/site-packages/sage/rings/arith.pyc in gcd(a, b, **kwargs)
   1605                 return ZZ(a).gcd(ZZ(b))
   1606             except TypeError:
-> 1607                 raise TypeError("unable to find gcd")
   1608         return GCD(b, **kwargs)
   1609 

TypeError: unable to find gcd
```

CC:  @videlec

Keywords: **polynomial, gcd**

Branch/Commit: **[`d77ee90`](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)**

Reviewer: **Julian Rueth**

Author: **Bruno Grenet**

Component: **basic arithmetic**

_Issue created by migration from https://trac.sagemath.org/ticket/15790_





---

archive/issue_events_225477.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-02-06T12:23:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225477"
}
```



---

archive/issue_events_225478.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-02-06T12:23:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225478"
}
```



---

archive/issue_events_225479.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-02-06T12:23:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225479"
}
```



---

archive/issue_events_225480.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-02-06T12:23:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225480"
}
```



---

archive/issue_comments_199221.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFor `PolynomialRing(ZZ,'x',sparse=false)`, one of FLINT or NTL is used (FLINT by default). \n\nFor `PolynomialRing(QQ,'x',sparse=true)`, the `gcd` computation is based on `quo_rem`. This is not possible over the integer since `quo_rem` works for polynomials over a field. \n\nThere are several possible solutions: \n1. Coerce the polynomials to `PolynomialRing(QQ,'x',sparse=true)`; compute their GCD `g`, the LCM `l` of the denominators of the coefficients of `g`, and return `l*g`.\n2. Coerce the polynomials to `PolynomialRing(ZZ,'x',sparse=false)`; compute their GCD and return the result in sparse representation with a second coercion.\n3. Implement a *pseudo-division* algorithm (//cf.// Cohen GTM 138 Algorithm 3.1.2) and a GCD algorithm based on the sub-resultant (//cf.// Cohen GTM 138 Algorithm 3.3.1).\n\nSolution 3 seems cleaner but does not give especially efficient results since the algorithms described in Cohen GTM 138 have complexity polynomial in the degree of the input polynomial. Actually, computing the GCD of two sparse polynomial is NP-hard ![1] so no better solution than converting to the dense representation is likely to exist. To my mind, Solution 2 is then the best one. \n\nYet, I am new to Sage so comments are welcome!\n\n![1] D. Plaisted, Sparse complex polynomials and polynomial reducibility. J. Comput. Syst. Sci. 14 (2), 210\u2013221, 1977.",
    "created_at": "2014-02-06T15:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199221",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:1" align="right">comment:1</div>

For `PolynomialRing(ZZ,'x',sparse=false)`, one of FLINT or NTL is used (FLINT by default). 

For `PolynomialRing(QQ,'x',sparse=true)`, the `gcd` computation is based on `quo_rem`. This is not possible over the integer since `quo_rem` works for polynomials over a field. 

There are several possible solutions: 
1. Coerce the polynomials to `PolynomialRing(QQ,'x',sparse=true)`; compute their GCD `g`, the LCM `l` of the denominators of the coefficients of `g`, and return `l*g`.
2. Coerce the polynomials to `PolynomialRing(ZZ,'x',sparse=false)`; compute their GCD and return the result in sparse representation with a second coercion.
3. Implement a *pseudo-division* algorithm (//cf.// Cohen GTM 138 Algorithm 3.1.2) and a GCD algorithm based on the sub-resultant (//cf.// Cohen GTM 138 Algorithm 3.3.1).

Solution 3 seems cleaner but does not give especially efficient results since the algorithms described in Cohen GTM 138 have complexity polynomial in the degree of the input polynomial. Actually, computing the GCD of two sparse polynomial is NP-hard ![1] so no better solution than converting to the dense representation is likely to exist. To my mind, Solution 2 is then the best one. 

Yet, I am new to Sage so comments are welcome!

![1] D. Plaisted, Sparse complex polynomials and polynomial reducibility. J. Comput. Syst. Sci. 14 (2), 210–221, 1977.



---

archive/issue_comments_199222.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'd implement all 3 with an optional `algorithm` argument since each has different strengths/weaknesses. For example, 2 is good as long as the polynomials are relatively dense, but for something like `x^100000 - 2`, I wouldn't want to convert that to a dense polynomial because of the memory usage (and take the time to construct it). From that, I think 3 should be the default. Possible names:\n\n1. `\"fraction_field\"`\n2. `\"dense\"`\n3. `\"pseudo-division\"`\n\nNevertheless, I think we should have some `gcd` since this would be a surprise for the more casual user.",
    "created_at": "2014-02-07T15:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199222",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

I'd implement all 3 with an optional `algorithm` argument since each has different strengths/weaknesses. For example, 2 is good as long as the polynomials are relatively dense, but for something like `x^100000 - 2`, I wouldn't want to convert that to a dense polynomial because of the memory usage (and take the time to construct it). From that, I think 3 should be the default. Possible names:

1. `"fraction_field"`
2. `"dense"`
3. `"pseudo-division"`

Nevertheless, I think we should have some `gcd` since this would be a surprise for the more casual user.



---

archive/issue_events_225481.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225481"
}
```



---

archive/issue_events_225482.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225482"
}
```



---

archive/issue_comments_199223.json:
```json
{
    "body": "Branch: **[u/bruno/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/gcd_of_sparse_univariate_polynomials_over_zz)**",
    "created_at": "2014-06-25T21:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199223",
    "user": "https://github.com/bgrenet"
}
```

Branch: **[u/bruno/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/gcd_of_sparse_univariate_polynomials_over_zz)**



---

archive/issue_comments_199224.json:
```json
{
    "body": "Commit: **[`8ddbb9e`](https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025)**",
    "created_at": "2014-06-25T22:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199224",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`8ddbb9e`](https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025)**



---

archive/issue_comments_199225.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025\"><code>8ddbb9e</code></a></td><td><code>Add gcd method to class Polynomial_generic_sparse</code></td></tr></table>\n",
    "created_at": "2014-06-25T22:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199225",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025"><code>8ddbb9e</code></a></td><td><code>Add gcd method to class Polynomial_generic_sparse</code></td></tr></table>




---

archive/issue_comments_199226.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI've implemented the `gcd` method in the class `Polynomial` using the pseudo-division algorithm, as well as a method `gcd` in `Polynomial_generic_sparse` which allows to choose the algorithm between `\"pseudo-division\"`, `\"dense\"` or `\"fraction_field\"`. \n\nNeeds review!\n\nOne remaining limitation is the absence of `quo_rem` method in `Polynomial_generic_sparse`. I created a specific ticket #16544 for this.",
    "created_at": "2014-06-25T22:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199226",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:7" align="right">comment:7</div>

I've implemented the `gcd` method in the class `Polynomial` using the pseudo-division algorithm, as well as a method `gcd` in `Polynomial_generic_sparse` which allows to choose the algorithm between `"pseudo-division"`, `"dense"` or `"fraction_field"`. 

Needs review!

One remaining limitation is the absence of `quo_rem` method in `Polynomial_generic_sparse`. I created a specific ticket #16544 for this.



---

archive/issue_events_225483.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-06-25T22:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225483"
}
```



---

archive/issue_comments_199227.json:
```json
{
    "body": "Changed keywords from **GCD sparse** to **sparse polynomial, gcd**",
    "created_at": "2014-06-25T22:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199227",
    "user": "https://github.com/bgrenet"
}
```

Changed keywords from **GCD sparse** to **sparse polynomial, gcd**



---

archive/issue_comments_199228.json:
```json
{
    "body": "Author: **Bruno Grenet**",
    "created_at": "2014-06-26T16:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199228",
    "user": "https://github.com/bgrenet"
}
```

Author: **Bruno Grenet**



---

archive/issue_comments_199229.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96f11a1e1dee02d6409b3885958accc66103f240\"><code>96f11a1</code></a></td><td><code>Add special case for p.pseudo_quo_rem(q) when q is a constant</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9000fb85706fa54e1dd315b8eab9241e7ea45e8a\"><code>9000fb8</code></a></td><td><code>Add quo_rem method in class Polynomial_generic_sparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84833c9ad72727913a0cec5ca1e9f4f9d9e16d73\"><code>84833c9</code></a></td><td><code>Move inversion of unit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb1d21cbee05d6be577bf66120aa20d3bd498ace\"><code>fb1d21c</code></a></td><td><code>Add doc tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102\"><code>65943e1</code></a></td><td><code>Merge branch 't/16544/fb1d21cbee05d6be577bf66120aa20d3bd498ace' into t/15790/gcd_of_sparse_univariate_polynomials_over_zz</code></td></tr></table>\n",
    "created_at": "2014-07-11T17:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199229",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96f11a1e1dee02d6409b3885958accc66103f240"><code>96f11a1</code></a></td><td><code>Add special case for p.pseudo_quo_rem(q) when q is a constant</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9000fb85706fa54e1dd315b8eab9241e7ea45e8a"><code>9000fb8</code></a></td><td><code>Add quo_rem method in class Polynomial_generic_sparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84833c9ad72727913a0cec5ca1e9f4f9d9e16d73"><code>84833c9</code></a></td><td><code>Move inversion of unit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb1d21cbee05d6be577bf66120aa20d3bd498ace"><code>fb1d21c</code></a></td><td><code>Add doc tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102"><code>65943e1</code></a></td><td><code>Merge branch 't/16544/fb1d21cbee05d6be577bf66120aa20d3bd498ace' into t/15790/gcd_of_sparse_univariate_polynomials_over_zz</code></td></tr></table>




---

archive/issue_comments_199230.json:
```json
{
    "body": "Changed commit from **[`8ddbb9e`](https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025)** to **[`65943e1`](https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102)**",
    "created_at": "2014-07-11T17:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199230",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ddbb9e`](https://github.com/sagemath/sagetrac-mirror/commit/8ddbb9efad8d53552fa26727fb484720bda66025)** to **[`65943e1`](https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102)**



---

archive/issue_events_225484.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-07-11T17:36:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225484"
}
```



---

archive/issue_events_225485.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-07-11T17:36:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225485"
}
```



---

archive/issue_events_225486.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225486"
}
```



---

archive/issue_events_225487.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225487"
}
```



---

archive/issue_comments_199231.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf5a84643938e85b7cb7cbc6454eb27544c103ca\"><code>bf5a846</code></a></td><td><code>Correct formatting of doctests + raise error for unknown algorithm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4\"><code>5c84d71</code></a></td><td><code>Change Error for pseudo-division by zero</code></td></tr></table>\n",
    "created_at": "2014-12-13T14:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199231",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf5a84643938e85b7cb7cbc6454eb27544c103ca"><code>bf5a846</code></a></td><td><code>Correct formatting of doctests + raise error for unknown algorithm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4"><code>5c84d71</code></a></td><td><code>Change Error for pseudo-division by zero</code></td></tr></table>




---

archive/issue_comments_199232.json:
```json
{
    "body": "Changed commit from **[`65943e1`](https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102)** to **[`5c84d71`](https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4)**",
    "created_at": "2014-12-13T14:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199232",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`65943e1`](https://github.com/sagemath/sagetrac-mirror/commit/65943e1a4ae6da9d2c7579ba14317aeada6eb102)** to **[`5c84d71`](https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4)**



---

archive/issue_events_225488.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-12-13T14:36:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225488"
}
```



---

archive/issue_events_225489.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2014-12-13T14:36:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225489"
}
```



---

archive/issue_comments_199233.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThe ticket is ready for review. Note that as default, I have the \"dense\" algorithm for polynomials over ZZ and \"pseudo-division\" for the other ones. The idea is that arithmetic on ZZ[X] is very efficient. \n\nOf course, `gcd(x<sup>100000-1,x</sup>1000-1)` is much faster (by a factor approx. 400) with \"pseudo-division\" algorithm because of memory allocation for the \"dense\" algorithm, and thanks to a very good behavior of the \"pseudo-division\" algorithm on this example. Yet, if you consider `gcd(x<sup>100000-1,x</sup>2-1)` (which should be easy btw), the \"dense\" algorithm is faster and I even stopped the \"pseudo-division\" algorithm after a quite long time. \n\n*Note:* It may be possible to reduce the huge allocation time since with NTL implementation, this is much faster: https://groups.google.com/forum/#!topic/sage-devel/6qhW90dgd1k.",
    "created_at": "2014-12-13T14:36:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199233",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:14" align="right">comment:14</div>

The ticket is ready for review. Note that as default, I have the "dense" algorithm for polynomials over ZZ and "pseudo-division" for the other ones. The idea is that arithmetic on ZZ[X] is very efficient. 

Of course, `gcd(x<sup>100000-1,x</sup>1000-1)` is much faster (by a factor approx. 400) with "pseudo-division" algorithm because of memory allocation for the "dense" algorithm, and thanks to a very good behavior of the "pseudo-division" algorithm on this example. Yet, if you consider `gcd(x<sup>100000-1,x</sup>2-1)` (which should be easy btw), the "dense" algorithm is faster and I even stopped the "pseudo-division" algorithm after a quite long time. 

*Note:* It may be possible to reduce the huge allocation time since with NTL implementation, this is much faster: https://groups.google.com/forum/#!topic/sage-devel/6qhW90dgd1k.



---

archive/issue_comments_199234.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nDo you have a heuristic for determining when one algorithm is faster than another (when the base ring is `ZZ`)? It doesn't have to be a particularly good one, but considering the time differences you're getting, it seems like we should have some automatic choice of algorithm.",
    "created_at": "2014-12-13T17:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199234",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Do you have a heuristic for determining when one algorithm is faster than another (when the base ring is `ZZ`)? It doesn't have to be a particularly good one, but considering the time differences you're getting, it seems like we should have some automatic choice of algorithm.



---

archive/issue_comments_199235.json:
```json
{
    "body": "Changed commit from **[`5c84d71`](https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4)** to **[`ec2ef11`](https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1)**",
    "created_at": "2014-12-15T17:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199235",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5c84d71`](https://github.com/sagemath/sagetrac-mirror/commit/5c84d7115a1e5406487b5d59746554b44be995e4)** to **[`ec2ef11`](https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1)**



---

archive/issue_comments_199236.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1\"><code>ec2ef11</code></a></td><td><code>Choice between FLINT and NTL</code></td></tr></table>\n",
    "created_at": "2014-12-15T17:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199236",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1"><code>ec2ef11</code></a></td><td><code>Choice between FLINT and NTL</code></td></tr></table>




---

archive/issue_comments_199237.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@tscrim](#comment:15):\n> Do you have a heuristic for determining when one algorithm is faster than another (when the base ring is `ZZ`)? It doesn't have to be a particularly good one, but considering the time differences you're getting, it seems like we should have some automatic choice of algorithm.\n\nI don't have one. Based on the comments on https://groups.google.com/forum/#!topic/sage-devel/6qhW90dgd1k, I add the possibility\u00b9 for the \"dense\" algorithm to use NTL instead of FLINT. After some tests, I chose a heuristic for using NTL rather than FLINT (basically, FLINT is faster for low-degree polynomials and *not-too-sparse* ones). Then the \"dense\" algorithm is almost always faster than \"pseudo-division\" but for some very specific examples (I haven't been able to build other ones): `gcd(x<sup>N-1,x</sup>M-1)` with both `N` and `M` pretty large. An the ratio is not hundreds anymore, but approx. 10. \n\n\u00b9 Actually, no choice for the user but only an automatic switch.",
    "created_at": "2014-12-15T17:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199237",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@tscrim](#comment:15):
> Do you have a heuristic for determining when one algorithm is faster than another (when the base ring is `ZZ`)? It doesn't have to be a particularly good one, but considering the time differences you're getting, it seems like we should have some automatic choice of algorithm.

I don't have one. Based on the comments on https://groups.google.com/forum/#!topic/sage-devel/6qhW90dgd1k, I add the possibility¹ for the "dense" algorithm to use NTL instead of FLINT. After some tests, I chose a heuristic for using NTL rather than FLINT (basically, FLINT is faster for low-degree polynomials and *not-too-sparse* ones). Then the "dense" algorithm is almost always faster than "pseudo-division" but for some very specific examples (I haven't been able to build other ones): `gcd(x<sup>N-1,x</sup>M-1)` with both `N` and `M` pretty large. An the ratio is not hundreds anymore, but approx. 10. 

¹ Actually, no choice for the user but only an automatic switch.



---

archive/issue_events_225490.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-07T06:45:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225490"
}
```



---

archive/issue_events_225491.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-07T06:45:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225491"
}
```



---

archive/issue_comments_199238.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nneeds work, does not build, see patchbot report:\n\n```\nFile \"sage/structure/element.pyx\", line 3433, in sage.structure.element.NamedBinopMethod.__init__ (build/cythonized/sage/structure/element.c:26905)\nAttributeError: 'sage.structure.element.NamedBinopMethod' object has no attribute '__name__'\n```",
    "created_at": "2015-08-07T06:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199238",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

needs work, does not build, see patchbot report:

```
File "sage/structure/element.pyx", line 3433, in sage.structure.element.NamedBinopMethod.__init__ (build/cythonized/sage/structure/element.c:26905)
AttributeError: 'sage.structure.element.NamedBinopMethod' object has no attribute '__name__'
```



---

archive/issue_comments_199239.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b27296098cc6a7e86dca7ea1bac66e4ef2dc429b\"><code>b272960</code></a></td><td><code>Add pseudo-division and gcd for Polynomials (as generic as possible)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c88b600cc02a37759e5a33346a52115842c85050\"><code>c88b600</code></a></td><td><code>Add gcd method to class Polynomial_generic_sparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f6a167671cffbdcc0c1d91a226a77a26f3c1cc5\"><code>6f6a167</code></a></td><td><code>Add special case for p.pseudo_quo_rem(q) when q is a constant</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f797ef3ab0b1714454c7a6f1080e46f4f654411\"><code>9f797ef</code></a></td><td><code>Correct formatting of doctests + raise error for unknown algorithm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c31b67522c46efa26f5b7b60db6ee2b4869e89a\"><code>6c31b67</code></a></td><td><code>Change Error for pseudo-division by zero</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f623b8893f9b08689be7e3df95e99a51d8c744ce\"><code>f623b88</code></a></td><td><code>Choice between FLINT and NTL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a\"><code>3015456</code></a></td><td><code>Adapted to 6.9beta1 => Merged two gcd methods</code></td></tr></table>\n",
    "created_at": "2015-08-07T14:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199239",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b27296098cc6a7e86dca7ea1bac66e4ef2dc429b"><code>b272960</code></a></td><td><code>Add pseudo-division and gcd for Polynomials (as generic as possible)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c88b600cc02a37759e5a33346a52115842c85050"><code>c88b600</code></a></td><td><code>Add gcd method to class Polynomial_generic_sparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f6a167671cffbdcc0c1d91a226a77a26f3c1cc5"><code>6f6a167</code></a></td><td><code>Add special case for p.pseudo_quo_rem(q) when q is a constant</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f797ef3ab0b1714454c7a6f1080e46f4f654411"><code>9f797ef</code></a></td><td><code>Correct formatting of doctests + raise error for unknown algorithm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c31b67522c46efa26f5b7b60db6ee2b4869e89a"><code>6c31b67</code></a></td><td><code>Change Error for pseudo-division by zero</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f623b8893f9b08689be7e3df95e99a51d8c744ce"><code>f623b88</code></a></td><td><code>Choice between FLINT and NTL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a"><code>3015456</code></a></td><td><code>Adapted to 6.9beta1 => Merged two gcd methods</code></td></tr></table>




---

archive/issue_comments_199240.json:
```json
{
    "body": "Changed commit from **[`ec2ef11`](https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1)** to **[`3015456`](https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a)**",
    "created_at": "2015-08-07T14:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199240",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ec2ef11`](https://github.com/sagemath/sagetrac-mirror/commit/ec2ef11336040e95c8cdf1bed7523006747b5ab1)** to **[`3015456`](https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a)**



---

archive/issue_comments_199241.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThis is rebased, and now works (as far as I can tell).",
    "created_at": "2015-08-07T15:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199241",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:20" align="right">comment:20</div>

This is rebased, and now works (as far as I can tell).



---

archive/issue_comments_199242.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+**[Update]** Due to #13442, the implementation of this ticket can be viewed as a fallback GCD implementation for rings which do not have a method `_gcd_univariate_polynomial`.\n+\n The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem. \n \n ```\n``````\n",
    "created_at": "2015-08-07T15:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199242",
    "user": "https://github.com/bgrenet"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+**[Update]** Due to #13442, the implementation of this ticket can be viewed as a fallback GCD implementation for rings which do not have a method `_gcd_univariate_polynomial`.
+
 The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem. 
 
 ```
``````




---

archive/issue_events_225492.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225492"
}
```



---

archive/issue_events_225493.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225493"
}
```



---

archive/issue_events_225494.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "title_is": "GCD of [sparse] univariate polynomials [over ZZ] [updated]",
    "title_was": "GCD of sparse univariate polynomials over ZZ",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225494"
}
```



---

archive/issue_events_225495.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225495"
}
```



---

archive/issue_events_225496.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-07T15:08:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225496"
}
```



---

archive/issue_comments_199243.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nDoc does not build\n\n```\nOSError: [polynomia] docstring of sage.rings.polynomial.polynomial_element.Polynomial.pseudo_quo_rem:38: WARNING: Duplicate explicit target name: \"gtm138\".\n```",
    "created_at": "2015-08-07T17:52:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199243",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

Doc does not build

```
OSError: [polynomia] docstring of sage.rings.polynomial.polynomial_element.Polynomial.pseudo_quo_rem:38: WARNING: Duplicate explicit target name: "gtm138".
```



---

archive/issue_events_225497.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-07T17:52:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225497"
}
```



---

archive/issue_events_225498.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-07T17:52:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225498"
}
```



---

archive/issue_comments_199244.json:
```json
{
    "body": "Changed commit from **[`3015456`](https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a)** to **[`47badc1`](https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4)**",
    "created_at": "2015-08-25T14:11:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199244",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3015456`](https://github.com/sagemath/sagetrac-mirror/commit/3015456844cb54f37cf4bbae8423521cdd33624a)** to **[`47badc1`](https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4)**



---

archive/issue_comments_199245.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4\"><code>47badc1</code></a></td><td><code>Move fallback algorithm to category UFD</code></td></tr></table>\n",
    "created_at": "2015-08-25T14:11:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199245",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4"><code>47badc1</code></a></td><td><code>Move fallback algorithm to category UFD</code></td></tr></table>




---

archive/issue_comments_199246.json:
```json
{
    "body": "Changed commit from **[`47badc1`](https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4)** to **[`f908936`](https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964)**",
    "created_at": "2015-08-25T14:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199246",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`47badc1`](https://github.com/sagemath/sagetrac-mirror/commit/47badc1b7322077ffbf2f89ab6ad2acc2dce18b4)** to **[`f908936`](https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964)**



---

archive/issue_comments_199247.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964\"><code>f908936</code></a></td><td><code>Simplify GCD for sparse polynomials</code></td></tr></table>\n",
    "created_at": "2015-08-25T14:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199247",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964"><code>f908936</code></a></td><td><code>Simplify GCD for sparse polynomials</code></td></tr></table>




---

archive/issue_events_225499.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-25T15:07:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "title_is": "GCD of univariate polynomials: generic implementation for UFD, and sparse case",
    "title_was": "GCD of [sparse] univariate polynomials [over ZZ] [updated]",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225499"
}
```



---

archive/issue_comments_199248.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIn the two latest commits, I propose the following changes:\n\n1. Instead of having a fallback algorithm in the method `Polynomial.gcd` which tests whether the base ring in a unique factorization domain, this algorithm is moved to the category `UniqueFactorizationDomains`.\n2. I simplified the method `Polynomial_generic_sparse.gcd`: There remain only two possibilities (out of three), namely the one previously called `pseudo-division` (renamed `generic`, since it uses the generic code) and the `dense` version, which may in some cases be faster, for instance over `ZZ`. I removed the `fraction_field` option which does not make much sense I think.\n\nAt the same time, I also take [Fr\u00e9d\u00e9ric's comment](#comment:21) into account.",
    "created_at": "2015-08-25T15:07:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199248",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:24" align="right">comment:24</div>

In the two latest commits, I propose the following changes:

1. Instead of having a fallback algorithm in the method `Polynomial.gcd` which tests whether the base ring in a unique factorization domain, this algorithm is moved to the category `UniqueFactorizationDomains`.
2. I simplified the method `Polynomial_generic_sparse.gcd`: There remain only two possibilities (out of three), namely the one previously called `pseudo-division` (renamed `generic`, since it uses the generic code) and the `dense` version, which may in some cases be faster, for instance over `ZZ`. I removed the `fraction_field` option which does not make much sense I think.

At the same time, I also take [Frédéric's comment](#comment:21) into account.



---

archive/issue_comments_199249.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,14 @@\n-**[Update]** Due to #13442, the implementation of this ticket can be viewed as a fallback GCD implementation for rings which do not have a method `_gcd_univariate_polynomial`.\n+**[Update]** Due to #13442, the purpose of this ticket changed slightly. It provides two functionalities:\n \n-The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem. \n+1. A generic implementation for the GCD of two polynomials over a UFD;\n+2. A `gcd` method for sparse polynomials which allows to choose between the `generic` implementation, or using the implementation for `dense` polynomials. Default is generally `generic`, but for polynomial over `ZZ` it is `dense`. This is due to the very fast implementations available in Flint and NTL.\n+\n+These implementations solve the problem mentioned in the first version of this ticket, that remains below for information.\n+\n+---\n+**[Old description, not relevant anymore]**\n+\n+The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem.\n \n ```\n sage: R1.<x>=PolynomialRing(ZZ,'x',sparse=true)\n``````\n",
    "created_at": "2015-08-25T15:07:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199249",
    "user": "https://github.com/bgrenet"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,14 @@
-**[Update]** Due to #13442, the implementation of this ticket can be viewed as a fallback GCD implementation for rings which do not have a method `_gcd_univariate_polynomial`.
+**[Update]** Due to #13442, the purpose of this ticket changed slightly. It provides two functionalities:
 
-The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem. 
+1. A generic implementation for the GCD of two polynomials over a UFD;
+2. A `gcd` method for sparse polynomials which allows to choose between the `generic` implementation, or using the implementation for `dense` polynomials. Default is generally `generic`, but for polynomial over `ZZ` it is `dense`. This is due to the very fast implementations available in Flint and NTL.
+
+These implementations solve the problem mentioned in the first version of this ticket, that remains below for information.
+
+---
+**[Old description, not relevant anymore]**
+
+The GCD of two sparse polynomials over `ZZ` is not computed. If the polynomials are in dense representation or if they are in sparse representation but defined over `QQ`, there is no problem.
 
 ```
 sage: R1.<x>=PolynomialRing(ZZ,'x',sparse=true)
``````




---

archive/issue_events_225500.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-25T15:07:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225500"
}
```



---

archive/issue_events_225501.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-25T15:07:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225501"
}
```



---

archive/issue_comments_199250.json:
```json
{
    "body": "Changed keywords from **sparse polynomial, gcd** to **polynomial, gcd**",
    "created_at": "2015-08-25T15:07:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199250",
    "user": "https://github.com/bgrenet"
}
```

Changed keywords from **sparse polynomial, gcd** to **polynomial, gcd**



---

archive/issue_comments_199251.json:
```json
{
    "body": "Changed branch from **[u/bruno/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/gcd_of_sparse_univariate_polynomials_over_zz)** to **[u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz)**",
    "created_at": "2015-10-04T02:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199251",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/bruno/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/gcd_of_sparse_univariate_polynomials_over_zz)** to **[u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz)**



---

archive/issue_comments_199252.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb\"><code>d77ee90</code></a></td><td><code>Improved docstring of PolynomialElement.pseudo_quo_rem()</code></td></tr></table>\n",
    "created_at": "2015-10-04T03:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199252",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb"><code>d77ee90</code></a></td><td><code>Improved docstring of PolynomialElement.pseudo_quo_rem()</code></td></tr></table>




---

archive/issue_comments_199253.json:
```json
{
    "body": "Changed commit from **[`f908936`](https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964)** to **[`d77ee90`](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)**",
    "created_at": "2015-10-04T03:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199253",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f908936`](https://github.com/sagemath/sagetrac-mirror/commit/f9089369482cc589372b0f3a7461d633d9540964)** to **[`d77ee90`](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)**



---

archive/issue_events_225502.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2015-10-04T03:17:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225502"
}
```



---

archive/issue_events_225503.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2015-10-04T03:17:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225503"
}
```



---

archive/issue_comments_199254.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nMade some minor docstring changes. Everything else looks fine.",
    "created_at": "2015-10-04T03:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199254",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:27" align="right">comment:27</div>

Made some minor docstring changes. Everything else looks fine.



---

archive/issue_comments_199255.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThanks for improving the docstring, and for the review! I add your name as a reviewer.",
    "created_at": "2015-10-05T06:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199255",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:28" align="right">comment:28</div>

Thanks for improving the docstring, and for the review! I add your name as a reviewer.



---

archive/issue_comments_199256.json:
```json
{
    "body": "Reviewer: **Julian Rueth**",
    "created_at": "2015-10-05T06:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199256",
    "user": "https://github.com/bgrenet"
}
```

Reviewer: **Julian Rueth**



---

archive/issue_events_225504.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-14T21:03:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225504"
}
```



---

archive/issue_events_225505.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "21795e326487b6dad433a27e3ee95a221279623d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-10-14T21:03:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15790#event-225505"
}
```



---

archive/issue_comments_199257.json:
```json
{
    "body": "Changed branch from **[u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz)** to **[`d77ee90`](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)**",
    "created_at": "2015-10-14T21:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15790#issuecomment-199257",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/gcd_of_sparse_univariate_polynomials_over_zz)** to **[`d77ee90`](https://github.com/sagemath/sagetrac-mirror/commit/d77ee902e808082dcc44daf71bb0ea2756c621bb)**
