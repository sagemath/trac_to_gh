# Issue 15704: Stupid waste of time in graphs 1

archive/issues_015467.json:
```json
{
    "body": "............\n\nThe point is that MY computations are never long because of the add/remove edge functions. I should pay more attention `T_T`\n\nBefore\n\n```\nsage: g = graphs.RandomGNP(1500,.4)\nsage: edges = g.edges(labels=False)\nsage: %time Graph(edges)\nCPU times: user 2.50 s, sys: 0.03 s, total: 2.52 s\nWall time: 2.55 s\nGraph on 1500 vertices\nsage: h = Graph()\nsage: %time h.add_edges(edges)\nCPU times: user 4.90 s, sys: 0.02 s, total: 4.92 s\nWall time: 4.93 s\n```\n\nAfter\n\n```\nsage: g = graphs.RandomGNP(1500,.4)\nsage: edges = g.edges(labels=False)\nsage: %time Graph(edges)\nCPU times: user 2.12 s, sys: 0.02 s, total: 2.14 s\nWall time: 2.16 s\nGraph on 1500 vertices\nsage: h = Graph()\nsage: %time h.add_edges(edges)\nCPU times: user 1.48 s, sys: 0.02 s, total: 1.50 s\nWall time: 1.52 s\n```\n\nNathann\n\n**CC:**  azi\n\n**Branch/Commit:** [297b1b3c2ee4bf868cc43f529ec04dc99230fc1d](https://github.com/sagemath/sagetrac-mirror/commit/297b1b3c2ee4bf868cc43f529ec04dc99230fc1d)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Nathann Cohen\n\nIssue created by migration from https://trac.sagemath.org/ticket/15704\n\n",
    "closed_at": "2014-05-12T11:34:42Z",
    "created_at": "2014-01-21T18:49:01Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Stupid waste of time in graphs 1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15704",
    "user": "https://github.com/nathanncohen"
}
```
............

The point is that MY computations are never long because of the add/remove edge functions. I should pay more attention `T_T`

Before

```
sage: g = graphs.RandomGNP(1500,.4)
sage: edges = g.edges(labels=False)
sage: %time Graph(edges)
CPU times: user 2.50 s, sys: 0.03 s, total: 2.52 s
Wall time: 2.55 s
Graph on 1500 vertices
sage: h = Graph()
sage: %time h.add_edges(edges)
CPU times: user 4.90 s, sys: 0.02 s, total: 4.92 s
Wall time: 4.93 s
```

After

```
sage: g = graphs.RandomGNP(1500,.4)
sage: edges = g.edges(labels=False)
sage: %time Graph(edges)
CPU times: user 2.12 s, sys: 0.02 s, total: 2.14 s
Wall time: 2.16 s
Graph on 1500 vertices
sage: h = Graph()
sage: %time h.add_edges(edges)
CPU times: user 1.48 s, sys: 0.02 s, total: 1.50 s
Wall time: 1.52 s
```

Nathann

**CC:**  azi

**Branch/Commit:** [297b1b3c2ee4bf868cc43f529ec04dc99230fc1d](https://github.com/sagemath/sagetrac-mirror/commit/297b1b3c2ee4bf868cc43f529ec04dc99230fc1d)

**Reviewer:** Vincent Delecroix

**Author:** Nathann Cohen

Issue created by migration from https://trac.sagemath.org/ticket/15704





---

archive/issue_events_142324.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-01-21T18:49:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142324"
}
```



---

archive/issue_comments_201770.json:
```json
{
    "body": "**Branch:** [u/ncohen/15604](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15604)",
    "created_at": "2014-01-21T18:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201770",
    "user": "https://github.com/nathanncohen"
}
```

**Branch:** [u/ncohen/15604](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15604)



---

archive/issue_comments_201771.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis is the kind of patches that breaks code everywhere in Sage. We better wait for the patchbot to say it passes tests before getting it in.\n\nNathann",
    "created_at": "2014-01-21T18:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201771",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>
This is the kind of patches that breaks code everywhere in Sage. We better wait for the patchbot to say it passes tests before getting it in.

Nathann



---

archive/issue_comments_201772.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636\">ce049ba</a></td><td><code>trac 15704: Stupid waste of time in graphs 1</code></td></tr></table>\n",
    "created_at": "2014-01-21T18:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201772",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636">ce049ba</a></td><td><code>trac 15704: Stupid waste of time in graphs 1</code></td></tr></table>




---

archive/issue_comments_201773.json:
```json
{
    "body": "**Commit:** [ce049ba02d81d3208fb33ac54579d6690468a636](https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636)",
    "created_at": "2014-01-21T18:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201773",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [ce049ba02d81d3208fb33ac54579d6690468a636](https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636)



---

archive/issue_comments_201774.json:
```json
{
    "body": "<a id='comment:4'></a>\nI think you should have something documenting what happens with the old \"bad\" behavior.  I assume it raises a well-formed error that tells people exactly what to do?\n\nAlso, it's not clear from the diff whether there are now no examples of adding edges with 2-tuples, which I assume is still supported.",
    "created_at": "2014-01-21T20:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201774",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'></a>
I think you should have something documenting what happens with the old "bad" behavior.  I assume it raises a well-formed error that tells people exactly what to do?

Also, it's not clear from the diff whether there are now no examples of adding edges with 2-tuples, which I assume is still supported.



---

archive/issue_comments_201775.json:
```json
{
    "body": "<a id='comment:5'></a>\nYo !\n\n> I think you should have something documenting what happens with the old \"bad\" behavior.  I assume it raises a well-formed error that tells people exactly what to do?\n\n\nWell, it raises the same error as `u,v=1`. To be honest I was afraid of adding a try/catch around the loop for the exception is a `ValueError`, and I don't it to catch a `ValueError` in `_backend.add_edge` if there is one.\n\n```\nsage: g = Graph()                \nsage: g.add_edges([(0,1),(0,1,1)])\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-4-edffa551e119> in <module>()\n----> 1 g.add_edges([(Integer(0),Integer(1)),(Integer(0),Integer(1),Integer(1))])\n\n/home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in add_edges(self, edges)\n   8970         else:\n   8971             self._backend.add_edge(e0[0], e0[1], None, self._directed)\n-> 8972             for u,v in it:\n   8973                 self._backend.add_edge(u, v, None, self._directed)\n   8974 \n\nValueError: too many values to unpack\n```\n\nI hope it will be explicit enough for the users, and that they will notice they feed the loop with heterogeneous data.\n\nAs for testing `add_edges()` with only pairs, not only it is still supported but I think most calls to this function only feed pairs `:-P`\n\nI added a commit.\n\nNathann",
    "created_at": "2014-01-22T08:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201775",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Yo !

> I think you should have something documenting what happens with the old "bad" behavior.  I assume it raises a well-formed error that tells people exactly what to do?


Well, it raises the same error as `u,v=1`. To be honest I was afraid of adding a try/catch around the loop for the exception is a `ValueError`, and I don't it to catch a `ValueError` in `_backend.add_edge` if there is one.

```
sage: g = Graph()                
sage: g.add_edges([(0,1),(0,1,1)])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-4-edffa551e119> in <module>()
----> 1 g.add_edges([(Integer(0),Integer(1)),(Integer(0),Integer(1),Integer(1))])

/home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in add_edges(self, edges)
   8970         else:
   8971             self._backend.add_edge(e0[0], e0[1], None, self._directed)
-> 8972             for u,v in it:
   8973                 self._backend.add_edge(u, v, None, self._directed)
   8974 

ValueError: too many values to unpack
```

I hope it will be explicit enough for the users, and that they will notice they feed the loop with heterogeneous data.

As for testing `add_edges()` with only pairs, not only it is still supported but I think most calls to this function only feed pairs `:-P`

I added a commit.

Nathann



---

archive/issue_comments_201776.json:
```json
{
    "body": "**Changing branch** from \"[u/ncohen/15604](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15604)\" to \"[u/ncohen/15704](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15704)\".",
    "created_at": "2014-01-22T08:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201776",
    "user": "https://github.com/nathanncohen"
}
```

**Changing branch** from "[u/ncohen/15604](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15604)" to "[u/ncohen/15704](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15704)".



---

archive/issue_comments_201777.json:
```json
{
    "body": "**Changing commit** from \"[ce049ba02d81d3208fb33ac54579d6690468a636](https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636)\" to \"\".",
    "created_at": "2014-01-22T08:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201777",
    "user": "https://github.com/nathanncohen"
}
```

**Changing commit** from "[ce049ba02d81d3208fb33ac54579d6690468a636](https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636)" to "".



---

archive/issue_comments_201778.json:
```json
{
    "body": "**Commit:** [037c189e6cb6eeadfd18e5433a860e2b8c7a784f](https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f)",
    "created_at": "2014-01-22T08:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [037c189e6cb6eeadfd18e5433a860e2b8c7a784f](https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f)



---

archive/issue_comments_201779.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636\">ce049ba</a></td><td><code>trac 15704: Stupid waste of time in graphs 1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f\">037c189</a></td><td><code>trac #15704: Adding a doctest</code></td></tr></table>\n",
    "created_at": "2014-01-22T08:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201779",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636">ce049ba</a></td><td><code>trac 15704: Stupid waste of time in graphs 1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f">037c189</a></td><td><code>trac #15704: Adding a doctest</code></td></tr></table>




---

archive/issue_comments_201780.json:
```json
{
    "body": "<a id='comment:8'></a>\nA commit to haul what we sow.\n\nNathann",
    "created_at": "2014-01-22T10:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201780",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
A commit to haul what we sow.

Nathann



---

archive/issue_comments_201781.json:
```json
{
    "body": "**Changing commit** from \"[037c189e6cb6eeadfd18e5433a860e2b8c7a784f](https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f)\" to \"[4056325aec3ed5f2f7a275b78ccc2b558dfe9f70](https://github.com/sagemath/sagetrac-mirror/commit/4056325aec3ed5f2f7a275b78ccc2b558dfe9f70)\".",
    "created_at": "2014-01-22T10:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201781",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[037c189e6cb6eeadfd18e5433a860e2b8c7a784f](https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f)" to "[4056325aec3ed5f2f7a275b78ccc2b558dfe9f70](https://github.com/sagemath/sagetrac-mirror/commit/4056325aec3ed5f2f7a275b78ccc2b558dfe9f70)".



---

archive/issue_comments_201782.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4056325aec3ed5f2f7a275b78ccc2b558dfe9f70\">4056325</a></td><td><code>Heeeeeeeeeeeeeeeeee</code></td></tr></table>\n",
    "created_at": "2014-01-22T10:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201782",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4056325aec3ed5f2f7a275b78ccc2b558dfe9f70">4056325</a></td><td><code>Heeeeeeeeeeeeeeeeee</code></td></tr></table>




---

archive/issue_comments_201783.json:
```json
{
    "body": "<a id='comment:10'></a>\nOOps. Perhaps I should change the commit message `:-PPPP`",
    "created_at": "2014-01-22T10:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201783",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
OOps. Perhaps I should change the commit message `:-PPPP`



---

archive/issue_comments_201784.json:
```json
{
    "body": "**Changing commit** from \"[4056325aec3ed5f2f7a275b78ccc2b558dfe9f70](https://github.com/sagemath/sagetrac-mirror/commit/4056325aec3ed5f2f7a275b78ccc2b558dfe9f70)\" to \"[499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6](https://github.com/sagemath/sagetrac-mirror/commit/499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6)\".",
    "created_at": "2014-01-22T10:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201784",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4056325aec3ed5f2f7a275b78ccc2b558dfe9f70](https://github.com/sagemath/sagetrac-mirror/commit/4056325aec3ed5f2f7a275b78ccc2b558dfe9f70)" to "[499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6](https://github.com/sagemath/sagetrac-mirror/commit/499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6)".



---

archive/issue_comments_201785.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636\">ce049ba</a></td><td><code>trac 15704: Stupid waste of time in graphs 1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f\">037c189</a></td><td><code>trac #15704: Adding a doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6\">499e287</a></td><td><code>trac #15704: Changing add_edge to _backend.add_edge in the (Di)Graph constructor</code></td></tr></table>\n",
    "created_at": "2014-01-22T10:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201785",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636">ce049ba</a></td><td><code>trac 15704: Stupid waste of time in graphs 1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f">037c189</a></td><td><code>trac #15704: Adding a doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6">499e287</a></td><td><code>trac #15704: Changing add_edge to _backend.add_edge in the (Di)Graph constructor</code></td></tr></table>




---

archive/issue_events_142325.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142325"
}
```



---

archive/issue_events_142326.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142326"
}
```



---

archive/issue_comments_201786.json:
```json
{
    "body": "<a id='comment:13'></a>\nHi Nathann,\n\nmy branch: u/vdelecroix/15704\n\nI simplified the `add_edges`. That way we can use the old syntax and is not much slower (as calling `len` is very cheap). What do you think?",
    "created_at": "2014-04-22T14:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201786",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>
Hi Nathann,

my branch: u/vdelecroix/15704

I simplified the `add_edges`. That way we can use the old syntax and is not much slower (as calling `len` is very cheap). What do you think?



---

archive/issue_comments_201787.json:
```json
{
    "body": "<a id='comment:14'></a>\nCan you provide timings for this change ? If it is not that bad it is good to have indeed.\n\nNathann",
    "created_at": "2014-04-23T13:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201787",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
Can you provide timings for this change ? If it is not that bad it is good to have indeed.

Nathann



---

archive/issue_comments_201788.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [ncohen](#comment%3A14):\n> Can you provide timings for this change ? If it is not that bad it is good to have indeed.\n\n\nHere they are. Your version\n\n```\nsage: g = graphs.RandomGNP(1500,.4)\nsage: edges = g.edges(labels=False)\nsage: h = Graph()\nsage: %time h.add_edges(edges)\nCPU times: user 2.21 s, sys: 32 ms, total: 2.24 s\nWall time: 2.23 s\n```\nmine\n\n```\nsage: g = graphs.RandomGNP(1500,.4)\nsage: edges = g.edges(labels=False)\nsage: h = Graph()\nsage: %time h.add_edges(edges)\nCPU times: user 2.48 s, sys: 32 ms, total: 2.51 s\nWall time: 2.51 s\n```\n\n(Be careful the branch is not yet merged with 6.2.rc0 and `sage -b` is horribly long)",
    "created_at": "2014-04-23T15:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201788",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
Replying to [ncohen](#comment%3A14):
> Can you provide timings for this change ? If it is not that bad it is good to have indeed.


Here they are. Your version

```
sage: g = graphs.RandomGNP(1500,.4)
sage: edges = g.edges(labels=False)
sage: h = Graph()
sage: %time h.add_edges(edges)
CPU times: user 2.21 s, sys: 32 ms, total: 2.24 s
Wall time: 2.23 s
```
mine

```
sage: g = graphs.RandomGNP(1500,.4)
sage: edges = g.edges(labels=False)
sage: h = Graph()
sage: %time h.add_edges(edges)
CPU times: user 2.48 s, sys: 32 ms, total: 2.51 s
Wall time: 2.51 s
```

(Be careful the branch is not yet merged with 6.2.rc0 and `sage -b` is horribly long)



---

archive/issue_comments_201789.json:
```json
{
    "body": "<a id='comment:16'></a>\nHmmm.... 10%... I'd vote for the first version. What do you think ? Yours handles more case, but it would mean that input is a bit messy ?...\n\nNathann",
    "created_at": "2014-04-23T15:12:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201789",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>
Hmmm.... 10%... I'd vote for the first version. What do you think ? Yours handles more case, but it would mean that input is a bit messy ?...

Nathann



---

archive/issue_comments_201790.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [ncohen](#comment%3A16):\n> Hmmm.... 10%... I'd vote for the first version. What do you think ? Yours handles more case, but it would mean that input is a bit messy ?...\n\n\n   - + 10% is a lot\n   - - the messy input was in the documentation before you removed it\n\nThe main question: is this function critical? Is there any piece of code that uses it intensively?",
    "created_at": "2014-04-23T15:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201790",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'></a>
Replying to [ncohen](#comment%3A16):
> Hmmm.... 10%... I'd vote for the first version. What do you think ? Yours handles more case, but it would mean that input is a bit messy ?...


   - + 10% is a lot
   - - the messy input was in the documentation before you removed it

The main question: is this function critical? Is there any piece of code that uses it intensively?



---

archive/issue_comments_201791.json:
```json
{
    "body": "<a id='comment:18'></a>\nWell, I began to write those patches because Jernej was not able to build a Graph with Sage .... I do not think that it really is the bottleneck in any code, but if the error message is clear, I don't think anybody can really complain that Sage refuses inputs like `G.add_edges([(0,1,'l'), (0,1)])`.\n\nSo well. I'd go for the most efficient way to do it, given that I do not see this being a real problem for anybody.... I don't like to know that everybody loses 10% to prevent several users from cleaning their input a bit `:-P`\n\nNathann",
    "created_at": "2014-04-23T15:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201791",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
Well, I began to write those patches because Jernej was not able to build a Graph with Sage .... I do not think that it really is the bottleneck in any code, but if the error message is clear, I don't think anybody can really complain that Sage refuses inputs like `G.add_edges([(0,1,'l'), (0,1)])`.

So well. I'd go for the most efficient way to do it, given that I do not see this being a real problem for anybody.... I don't like to know that everybody loses 10% to prevent several users from cleaning their input a bit `:-P`

Nathann



---

archive/issue_events_142327.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T15:56:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142327"
}
```



---

archive/issue_events_142328.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T15:56:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142328"
}
```



---

archive/issue_comments_201792.json:
```json
{
    "body": "<a id='comment:19'></a>\nThen leeeeet's go!\n\nVincent",
    "created_at": "2014-04-23T15:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201792",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>
Then leeeeet's go!

Vincent



---

archive/issue_comments_201793.json:
```json
{
    "body": "<a id='comment:20'></a>\nThaaaaaanks !\n\nNathann",
    "created_at": "2014-04-23T15:57:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201793",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
Thaaaaaanks !

Nathann



---

archive/issue_events_142329.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142329"
}
```



---

archive/issue_events_142330.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142330"
}
```



---

archive/issue_comments_201794.json:
```json
{
    "body": "<a id='comment:22'></a>\nReviewer name",
    "created_at": "2014-05-07T15:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201794",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
Reviewer name



---

archive/issue_comments_201795.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2014-05-07T15:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201795",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_201796.json:
```json
{
    "body": "<a id='comment:24'></a>\ndoctest failures after merge",
    "created_at": "2014-05-08T09:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201796",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'></a>
doctest failures after merge



---

archive/issue_events_142331.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-08T09:11:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142331"
}
```



---

archive/issue_events_142332.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-08T09:11:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142332"
}
```



---

archive/issue_comments_201797.json:
```json
{
    "body": "<a id='comment:25'></a>\nturns out some combinat code was feeding the function with non-uniform input.\n\nTesting the whole Sage code... It would be cool if I could set up a patchbot on my office's computer, really `:-/`\n\nNathann",
    "created_at": "2014-05-08T09:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201797",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:25'></a>
turns out some combinat code was feeding the function with non-uniform input.

Testing the whole Sage code... It would be cool if I could set up a patchbot on my office's computer, really `:-/`

Nathann



---

archive/issue_comments_201798.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f66f5f2b1af2ae053cd87e145a80dfa66b9c491d\">f66f5f2</a></td><td><code>Merge branch 'u/ncohen/15704' of trac.sagemath.org:sage into tmp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/297b1b3c2ee4bf868cc43f529ec04dc99230fc1d\">297b1b3</a></td><td><code>trac #15704: Broken doctests</code></td></tr></table>\n",
    "created_at": "2014-05-08T10:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f66f5f2b1af2ae053cd87e145a80dfa66b9c491d">f66f5f2</a></td><td><code>Merge branch 'u/ncohen/15704' of trac.sagemath.org:sage into tmp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/297b1b3c2ee4bf868cc43f529ec04dc99230fc1d">297b1b3</a></td><td><code>trac #15704: Broken doctests</code></td></tr></table>




---

archive/issue_comments_201799.json:
```json
{
    "body": "**Changing commit** from \"[499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6](https://github.com/sagemath/sagetrac-mirror/commit/499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6)\" to \"[297b1b3c2ee4bf868cc43f529ec04dc99230fc1d](https://github.com/sagemath/sagetrac-mirror/commit/297b1b3c2ee4bf868cc43f529ec04dc99230fc1d)\".",
    "created_at": "2014-05-08T10:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6](https://github.com/sagemath/sagetrac-mirror/commit/499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6)" to "[297b1b3c2ee4bf868cc43f529ec04dc99230fc1d](https://github.com/sagemath/sagetrac-mirror/commit/297b1b3c2ee4bf868cc43f529ec04dc99230fc1d)".



---

archive/issue_events_142333.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-08T10:04:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142333"
}
```



---

archive/issue_events_142334.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-08T10:04:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142334"
}
```



---

archive/issue_comments_201800.json:
```json
{
    "body": "<a id='comment:27'></a>\nPasses all long tests.",
    "created_at": "2014-05-08T10:04:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201800",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:27'></a>
Passes all long tests.



---

archive/issue_events_142335.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-12T11:34:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142335"
}
```



---

archive/issue_events_142336.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-12T11:34:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15704#event-142336"
}
```



---

archive/issue_comments_201801.json:
```json
{
    "body": "**Changing branch** from \"[u/ncohen/15704](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15704)\" to \"[297b1b3c2ee4bf868cc43f529ec04dc99230fc1d](https://github.com/sagemath/sagetrac-mirror/commit/297b1b3c2ee4bf868cc43f529ec04dc99230fc1d)\".",
    "created_at": "2014-05-12T11:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15704#issuecomment-201801",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/ncohen/15704](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15704)" to "[297b1b3c2ee4bf868cc43f529ec04dc99230fc1d](https://github.com/sagemath/sagetrac-mirror/commit/297b1b3c2ee4bf868cc43f529ec04dc99230fc1d)".
