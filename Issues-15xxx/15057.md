# Issue 15057: SymPy conversions for symbolic functions that are missing them

archive/issues_014820.json:
```json
{
    "body": "Some symbolic functions are missing SymPy conversions.\n\n**CC:**  @burcin asmeurer\n\n**Branch/Commit:** [341de9a2f88d2195cccf83204357a456c6bdd62c](https://github.com/sagemath/sagetrac-mirror/commit/341de9a2f88d2195cccf83204357a456c6bdd62c)\n\n**Reviewer:** Ralf Stephan\n\n**Author:** Eviatar Bach\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15057\n\n",
    "closed_at": "2014-09-09T22:01:04Z",
    "created_at": "2013-08-17T20:14:06Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "SymPy conversions for symbolic functions that are missing them",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15057",
    "user": "https://github.com/eviatarbach"
}
```
Some symbolic functions are missing SymPy conversions.

**CC:**  @burcin asmeurer

**Branch/Commit:** [341de9a2f88d2195cccf83204357a456c6bdd62c](https://github.com/sagemath/sagetrac-mirror/commit/341de9a2f88d2195cccf83204357a456c6bdd62c)

**Reviewer:** Ralf Stephan

**Author:** Eviatar Bach

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/15057





---

archive/attachments_020177.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac15057.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket15057/trac15057.patch",
    "created_at": "2013-08-17T20:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/eviatarbach"
}
```



---

archive/issue_comments_242105.json:
```json
{
    "body": "",
    "created_at": "2013-08-17T20:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242105",
    "user": "https://github.com/eviatarbach"
}
```





---

archive/issue_comments_242106.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-08-17T20:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242106",
    "user": "https://github.com/eviatarbach"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_242107.json:
```json
{
    "body": "<a id='comment:1'></a>\nThe patch adds conversions for all the symbolic functions in Sage that I could find that have a SymPy equivalent.\n\nPatchbot apply trac15057.patch\u200b",
    "created_at": "2013-08-17T20:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242107",
    "user": "https://github.com/eviatarbach"
}
```

<a id='comment:1'></a>
The patch adds conversions for all the symbolic functions in Sage that I could find that have a SymPy equivalent.

Patchbot apply trac15057.patchâ€‹



---

archive/issue_comments_242108.json:
```json
{
    "body": "<a id='comment:3'></a>\nYou must be using an old version of SymPy. KroneckerDelta is just KroneckerDelta. The rest look fine.",
    "created_at": "2013-08-27T05:08:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242108",
    "user": "https://trac.sagemath.org/admin/accounts/users/asmeurer"
}
```

<a id='comment:3'></a>
You must be using an old version of SymPy. KroneckerDelta is just KroneckerDelta. The rest look fine.



---

archive/attachments_020178.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac15057_2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket15057/trac15057_2.patch",
    "created_at": "2013-08-27T16:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/eviatarbach"
}
```



---

archive/issue_comments_242109.json:
```json
{
    "body": "<a id='comment:4'></a>\nAh, alright. I was using 0.7.1, which is the version currently in Sage. This should be merged after #14694 then. I also added doctests in case the names change again in the future.",
    "created_at": "2013-08-27T16:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242109",
    "user": "https://github.com/eviatarbach"
}
```

<a id='comment:4'></a>
Ah, alright. I was using 0.7.1, which is the version currently in Sage. This should be merged after #14694 then. I also added doctests in case the names change again in the future.



---

archive/issue_comments_242110.json:
```json
{
    "body": "**Dependencies:** #14694",
    "created_at": "2013-08-27T16:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242110",
    "user": "https://github.com/eviatarbach"
}
```

**Dependencies:** #14694



---

archive/issue_comments_242111.json:
```json
{
    "body": "<a id='comment:6'></a>\nA bunch of new special functions have been added since then too, so this is probably not complete.",
    "created_at": "2013-08-27T16:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242111",
    "user": "https://trac.sagemath.org/admin/accounts/users/asmeurer"
}
```

<a id='comment:6'></a>
A bunch of new special functions have been added since then too, so this is probably not complete.



---

archive/issue_comments_242112.json:
```json
{
    "body": "<a id='comment:7'></a>\nI think I checked fairly thoroughly (I believe that I automatically ran through all the functions in `sage/functions` and tried to call their `_sympy_` method, and if it failed I checked if there was a SymPy equivalent), and with the current SymPy documentation. I may have missed a few though.",
    "created_at": "2013-08-27T17:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242112",
    "user": "https://github.com/eviatarbach"
}
```

<a id='comment:7'></a>
I think I checked fairly thoroughly (I believe that I automatically ran through all the functions in `sage/functions` and tried to call their `_sympy_` method, and if it failed I checked if there was a SymPy equivalent), and with the current SymPy documentation. I may have missed a few though.



---

archive/issue_comments_242113.json:
```json
{
    "body": "<a id='comment:8'></a>\nCan you provide the list of functions without equivalents?",
    "created_at": "2013-08-27T17:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242113",
    "user": "https://trac.sagemath.org/admin/accounts/users/asmeurer"
}
```

<a id='comment:8'></a>
Can you provide the list of functions without equivalents?



---

archive/issue_comments_242114.json:
```json
{
    "body": "<a id='comment:9'></a>\nActually, I didn't include the conversions for the exponential integrals and `lambert_w`. Patch for that coming up.\n\nHere are the functions in Sage that are not in SymPy as far as I can tell. I haven't checked the ones in `sage/rings/arith.py` yet, and of course there are tons of combinatorial functions.\n\n* Dickman's function (`dickman_rho` in Sage)\n* Heaviside step function and unit step function (`heaviside` and `unit_step` in Sage; they only seem to differ in that `heaviside` is undefined at 0)\n* Inverse Jacobi functions (`inverse_jacobi` in Sage)\n* Jacobi amplitude function (to be added in #14996 as `jacobi_am`)\n* Spherical Bessel and spherical Hankel functions (`spherical_bessel_J`, `spherical_bessel_Y`, `spherical_hankel1`, and `spherical_hankel2` in Sage)\n* Symmetric zeta function (`zeta_symmetric` in Sage)\n* Derivatives of the zeta function (`zetaderiv` in Sage)\n\nNote that some SymPy conversions are going to be added in pending tickets that transition functions to use Sage's `BuiltinFunction` instead of being simple Maxima wrappers. For example, #15046 and #14996.",
    "created_at": "2013-08-27T17:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242114",
    "user": "https://github.com/eviatarbach"
}
```

<a id='comment:9'></a>
Actually, I didn't include the conversions for the exponential integrals and `lambert_w`. Patch for that coming up.

Here are the functions in Sage that are not in SymPy as far as I can tell. I haven't checked the ones in `sage/rings/arith.py` yet, and of course there are tons of combinatorial functions.

* Dickman's function (`dickman_rho` in Sage)
* Heaviside step function and unit step function (`heaviside` and `unit_step` in Sage; they only seem to differ in that `heaviside` is undefined at 0)
* Inverse Jacobi functions (`inverse_jacobi` in Sage)
* Jacobi amplitude function (to be added in #14996 as `jacobi_am`)
* Spherical Bessel and spherical Hankel functions (`spherical_bessel_J`, `spherical_bessel_Y`, `spherical_hankel1`, and `spherical_hankel2` in Sage)
* Symmetric zeta function (`zeta_symmetric` in Sage)
* Derivatives of the zeta function (`zetaderiv` in Sage)

Note that some SymPy conversions are going to be added in pending tickets that transition functions to use Sage's `BuiltinFunction` instead of being simple Maxima wrappers. For example, #15046 and #14996.



---

archive/issue_comments_242115.json:
```json
{
    "body": "<a id='comment:10'></a>\nSymPy has Heaviside, which gives 1/2 at 0. It also has (I believe all) the bessel functions (I don't remember, but some of them may be new in the most recent version). \n\nI opened https://code.google.com/p/sympy/issues/detail?id=3992 to implement the rest :)",
    "created_at": "2013-08-27T21:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242115",
    "user": "https://trac.sagemath.org/admin/accounts/users/asmeurer"
}
```

<a id='comment:10'></a>
SymPy has Heaviside, which gives 1/2 at 0. It also has (I believe all) the bessel functions (I don't remember, but some of them may be new in the most recent version). 

I opened https://code.google.com/p/sympy/issues/detail?id=3992 to implement the rest :)



---

archive/issue_comments_242116.json:
```json
{
    "body": "<a id='comment:11'></a>\nRight, the spherical Bessel functions are implemented, but not the spherical Hankel functions. They're not in mpmath, but numeric evaluation is quite trivial to implement; see the function `spherical_bessel_f` at http://trac.sagemath.org/attachment/ticket/15024/trac15024.patch.",
    "created_at": "2013-08-28T03:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242116",
    "user": "https://github.com/eviatarbach"
}
```

<a id='comment:11'></a>
Right, the spherical Bessel functions are implemented, but not the spherical Hankel functions. They're not in mpmath, but numeric evaluation is quite trivial to implement; see the function `spherical_bessel_f` at http://trac.sagemath.org/attachment/ticket/15024/trac15024.patch.



---

archive/issue_comments_242117.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis patch adds conversions for exponential integrals as well. I didn't add a Lambert W conversion since it has a different number of arguments in SymPy (Sage allows you to choose the branch), and there doesn't seem to be a good way of doing more complicated conversions yet. It should be easy to add functionality for doing so, however.",
    "created_at": "2013-08-29T06:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242117",
    "user": "https://github.com/eviatarbach"
}
```

<a id='comment:12'></a>
This patch adds conversions for exponential integrals as well. I didn't add a Lambert W conversion since it has a different number of arguments in SymPy (Sage allows you to choose the branch), and there doesn't seem to be a good way of doing more complicated conversions yet. It should be easy to add functionality for doing so, however.



---

archive/attachments_020179.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac15057_3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket15057/trac15057_3.patch",
    "created_at": "2013-09-01T23:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/eviatarbach"
}
```



---

archive/issue_comments_242118.json:
```json
{
    "body": "<a id='comment:13'></a>\nApparently SymPy doesn't have Jacobi elliptic functions at all. That's another one to add to the list.",
    "created_at": "2013-09-01T23:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242118",
    "user": "https://github.com/eviatarbach"
}
```

<a id='comment:13'></a>
Apparently SymPy doesn't have Jacobi elliptic functions at all. That's another one to add to the list.



---

archive/issue_events_049705.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15057#event-49705"
}
```



---

archive/issue_events_049706.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15057#event-49706"
}
```



---

archive/issue_events_049707.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15057#event-49707"
}
```



---

archive/issue_events_049708.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15057#event-49708"
}
```



---

archive/issue_events_049709.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15057#event-49709"
}
```



---

archive/issue_comments_242119.json:
```json
{
    "body": "<a id='comment:17'></a>\nSee also #14723",
    "created_at": "2014-08-12T12:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242119",
    "user": "https://github.com/rwst"
}
```

<a id='comment:17'></a>
See also #14723



---

archive/issue_comments_242120.json:
```json
{
    "body": "**Branch:** [u/rws/sympy_conversions_for_symbolic_functions_that_are_missing_them](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/sympy_conversions_for_symbolic_functions_that_are_missing_them)",
    "created_at": "2014-08-12T13:21:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242120",
    "user": "https://github.com/rwst"
}
```

**Branch:** [u/rws/sympy_conversions_for_symbolic_functions_that_are_missing_them](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/sympy_conversions_for_symbolic_functions_that_are_missing_them)



---

archive/issue_comments_242121.json:
```json
{
    "body": "<a id='comment:19'></a>\nIt's all straightforward addition of conversions. Long doctests pass in `functions`.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c7174fed44ee1686b49d64b5f7a21e6009be343\">2c7174f</a></td><td><code>15057: Adding SymPy conversions, with reviewer's additions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/341de9a2f88d2195cccf83204357a456c6bdd62c\">341de9a</a></td><td><code>15057: fix typo</code></td></tr></table>\n",
    "created_at": "2014-08-12T13:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242121",
    "user": "https://github.com/rwst"
}
```

<a id='comment:19'></a>
It's all straightforward addition of conversions. Long doctests pass in `functions`.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c7174fed44ee1686b49d64b5f7a21e6009be343">2c7174f</a></td><td><code>15057: Adding SymPy conversions, with reviewer's additions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/341de9a2f88d2195cccf83204357a456c6bdd62c">341de9a</a></td><td><code>15057: fix typo</code></td></tr></table>




---

archive/issue_comments_242122.json:
```json
{
    "body": "**Reviewer:** Ralf Stephan",
    "created_at": "2014-08-12T13:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242122",
    "user": "https://github.com/rwst"
}
```

**Reviewer:** Ralf Stephan



---

archive/issue_comments_242123.json:
```json
{
    "body": "**Commit:** [341de9a2f88d2195cccf83204357a456c6bdd62c](https://github.com/sagemath/sagetrac-mirror/commit/341de9a2f88d2195cccf83204357a456c6bdd62c)",
    "created_at": "2014-08-12T13:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242123",
    "user": "https://github.com/rwst"
}
```

**Commit:** [341de9a2f88d2195cccf83204357a456c6bdd62c](https://github.com/sagemath/sagetrac-mirror/commit/341de9a2f88d2195cccf83204357a456c6bdd62c)



---

archive/issue_comments_242124.json:
```json
{
    "body": "**Author:** Eviatar Bach",
    "created_at": "2014-08-12T13:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242124",
    "user": "https://github.com/rwst"
}
```

**Author:** Eviatar Bach



---

archive/issue_comments_242125.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-08-12T13:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242125",
    "user": "https://github.com/rwst"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_242126.json:
```json
{
    "body": "<a id='comment:20'></a>\nMy release management script doesn't understand dependencies that predate the git transition ;-)",
    "created_at": "2014-09-09T14:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242126",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>
My release management script doesn't understand dependencies that predate the git transition ;-)



---

archive/issue_comments_242127.json:
```json
{
    "body": "**Changing dependencies** from \"#14694\" to \"\".",
    "created_at": "2014-09-09T14:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242127",
    "user": "https://github.com/vbraun"
}
```

**Changing dependencies** from "#14694" to "".



---

archive/issue_events_049710.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-09T22:01:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15057#event-49710"
}
```



---

archive/issue_comments_242128.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/sympy_conversions_for_symbolic_functions_that_are_missing_them](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/sympy_conversions_for_symbolic_functions_that_are_missing_them)\" to \"[341de9a2f88d2195cccf83204357a456c6bdd62c](https://github.com/sagemath/sagetrac-mirror/commit/341de9a2f88d2195cccf83204357a456c6bdd62c)\".",
    "created_at": "2014-09-09T22:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242128",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/rws/sympy_conversions_for_symbolic_functions_that_are_missing_them](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/sympy_conversions_for_symbolic_functions_that_are_missing_them)" to "[341de9a2f88d2195cccf83204357a456c6bdd62c](https://github.com/sagemath/sagetrac-mirror/commit/341de9a2f88d2195cccf83204357a456c6bdd62c)".



---

archive/issue_comments_242129.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2014-09-09T22:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15057",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15057#issuecomment-242129",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
