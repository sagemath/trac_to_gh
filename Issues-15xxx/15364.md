# Issue 15364: Introduce factor_or_zero into global namespace

archive/issues_015127.json:
```json
{
    "assignees": [],
    "body": "The current top level factor command raises an error if factor is applied to 0.  This is inconvenient for trying to factor polynomial expressions which reduce to 0 or lists of integers.\n\nA function which does not force the user to handle 0 as a corner case is SUPER useful for users who just want to observe patterns in factorizations of lists or expressions that might reduce to 0.  The error message of factor should indicate to the user to call `factor_or_zero` an error message such as `ArithmeticError:  Prime factorization of 0 not defined.  Use factor_or_zero to return 0 as the factorization of 0.`\n\nCC:  @vbraun @tscrim @mguaypaq\n\nBranch/Commit: **[public/ticket/15364/zabrocki/factor_or_zero](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15364/zabrocki/factor_or_zero) @ [`1e0e3da`](https://github.com/sagemath/sagetrac-mirror/commit/1e0e3da44e609c65c2b6b269f80991d01a33b844)**\n\nAuthor: **Mike Zabrocki**\n\nComponent: **factorization**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15364_\n\n",
    "closed_at": "2020-02-06T12:05:30Z",
    "created_at": "2013-11-06T19:34:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20factorization",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Introduce factor_or_zero into global namespace",
    "type": "issue",
    "updated_at": "2020-02-06T12:05:30Z",
    "url": "https://github.com/sagemath/sage/issues/15364",
    "user": "https://github.com/zabrocki"
}
```
The current top level factor command raises an error if factor is applied to 0.  This is inconvenient for trying to factor polynomial expressions which reduce to 0 or lists of integers.

A function which does not force the user to handle 0 as a corner case is SUPER useful for users who just want to observe patterns in factorizations of lists or expressions that might reduce to 0.  The error message of factor should indicate to the user to call `factor_or_zero` an error message such as `ArithmeticError:  Prime factorization of 0 not defined.  Use factor_or_zero to return 0 as the factorization of 0.`

CC:  @vbraun @tscrim @mguaypaq

Branch/Commit: **[public/ticket/15364/zabrocki/factor_or_zero](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15364/zabrocki/factor_or_zero) @ [`1e0e3da`](https://github.com/sagemath/sagetrac-mirror/commit/1e0e3da44e609c65c2b6b269f80991d01a33b844)**

Author: **Mike Zabrocki**

Component: **factorization**

_Issue created by migration from https://trac.sagemath.org/ticket/15364_





---

archive/issue_events_216509.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-06T19:34:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216509"
}
```



---

archive/issue_events_216510.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-06T19:34:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20factorization",
    "label_color": "0000ff",
    "label_name": "c: factorization",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216510"
}
```



---

archive/issue_events_216511.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-06T19:34:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216511"
}
```



---

archive/issue_comments_190573.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI guess your usage scenario is\n\n```\n[factor_or_zero(a) for a in some_list_of_expressions]\n```\nCan't you do:\n\n```\n[(factor(a) if a !=0 else None) for a in some_list_of_expressions]\n```\nit's not that much longer (you can save some parentheses if you want) and that way sage doesn't have to choose an arbitrary sentinel value. Plus, the pattern can be used in other similar situations as well.\n\nAt some point it's more beneficial to teach users how to use the building blocks available than to provide them with increasingly special-purpose bricks.",
    "created_at": "2013-11-06T20:40:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190573",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:1" align="right">comment:1</div>

I guess your usage scenario is

```
[factor_or_zero(a) for a in some_list_of_expressions]
```
Can't you do:

```
[(factor(a) if a !=0 else None) for a in some_list_of_expressions]
```
it's not that much longer (you can save some parentheses if you want) and that way sage doesn't have to choose an arbitrary sentinel value. Plus, the pattern can be used in other similar situations as well.

At some point it's more beneficial to teach users how to use the building blocks available than to provide them with increasingly special-purpose bricks.



---

archive/issue_comments_190574.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI think that is one of many scenarios.  The purpose of `factor` is biased towards number theory.  Most of my colleagues use it in algebra to put coefficients in a readable form.  I just want to give people who use algebra a less onerous alternative.  I don't want to have to put an if statement *every* time that I factor an algebraic expression.\n\nSolution during Sage Days on Monday (which completely stopped everything for much longer than was necessary):\n\n```\nsage: map(factor, list_of_coefficients)\nArithmeticError\nsage: list_coefficients.remove(0)\nsage: map(factor, list_of_coefficients)\n```\n\nA more common scenario is\n\n```\nsage: factor(1/(1-x)-x/(1-x)-1)\nValueError: factorization of 0 not defined\n```\nOr that a similar expression should come up as the coefficient of some element in an algebra and one should want to\n`elt.map_coefficients(factor)`.",
    "created_at": "2013-11-06T23:00:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190574",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:2" align="right">comment:2</div>

I think that is one of many scenarios.  The purpose of `factor` is biased towards number theory.  Most of my colleagues use it in algebra to put coefficients in a readable form.  I just want to give people who use algebra a less onerous alternative.  I don't want to have to put an if statement *every* time that I factor an algebraic expression.

Solution during Sage Days on Monday (which completely stopped everything for much longer than was necessary):

```
sage: map(factor, list_of_coefficients)
ArithmeticError
sage: list_coefficients.remove(0)
sage: map(factor, list_of_coefficients)
```

A more common scenario is

```
sage: factor(1/(1-x)-x/(1-x)-1)
ValueError: factorization of 0 not defined
```
Or that a similar expression should come up as the coefficient of some element in an algebra and one should want to
`elt.map_coefficients(factor)`.



---

archive/issue_events_216512.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-06T23:01:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216512"
}
```



---

archive/issue_comments_190575.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><code>[9b38cf3](https://github.com/sagemath/sagetrac-mirror/commit/9b38cf3)</code></td><td><code>Merge remote-tracking branch 'origin/master' into trac_15364</code></td></tr><tr><td><code>[c5e89e6](https://github.com/sagemath/sagetrac-mirror/commit/c5e89e6)</code></td><td><code>edited more error message about factorization of 0</code></td></tr><tr><td><code>[d952c1f](https://github.com/sagemath/sagetrac-mirror/commit/d952c1f)</code></td><td><code>added additional error message to Prime factorization of 0.</code></td></tr><tr><td><code>[de95445](https://github.com/sagemath/sagetrac-mirror/commit/de95445)</code></td><td><code>added function factor_or_zero</code></td></tr></table>\n",
    "created_at": "2013-11-07T22:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190575",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><code>[9b38cf3](https://github.com/sagemath/sagetrac-mirror/commit/9b38cf3)</code></td><td><code>Merge remote-tracking branch 'origin/master' into trac_15364</code></td></tr><tr><td><code>[c5e89e6](https://github.com/sagemath/sagetrac-mirror/commit/c5e89e6)</code></td><td><code>edited more error message about factorization of 0</code></td></tr><tr><td><code>[d952c1f](https://github.com/sagemath/sagetrac-mirror/commit/d952c1f)</code></td><td><code>added additional error message to Prime factorization of 0.</code></td></tr><tr><td><code>[de95445](https://github.com/sagemath/sagetrac-mirror/commit/de95445)</code></td><td><code>added function factor_or_zero</code></td></tr></table>




---

archive/issue_events_216513.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-07T22:33:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216513"
}
```



---

archive/issue_events_216514.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-07T22:33:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216514"
}
```



---

archive/issue_comments_190576.json:
```json
{
    "body": "Branch: **[public/ticket/15364-factor_or_zero](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15364-factor_or_zero)**",
    "created_at": "2013-11-07T22:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190576",
    "user": "https://github.com/zabrocki"
}
```

Branch: **[public/ticket/15364-factor_or_zero](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15364-factor_or_zero)**



---

archive/issue_comments_190577.json:
```json
{
    "body": "Commit: **[`9b38cf3`](https://github.com/sagemath/sagetrac-mirror/commit/9b38cf339cc53f2f6e3e03e18aef94e7a8bda075)**",
    "created_at": "2013-11-07T22:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190577",
    "user": "https://github.com/zabrocki"
}
```

Commit: **[`9b38cf3`](https://github.com/sagemath/sagetrac-mirror/commit/9b38cf339cc53f2f6e3e03e18aef94e7a8bda075)**



---

archive/issue_comments_190578.json:
```json
{
    "body": "Changed commit from **[`9b38cf3`](https://github.com/sagemath/sagetrac-mirror/commit/9b38cf339cc53f2f6e3e03e18aef94e7a8bda075)** to **[`16e72e7`](https://github.com/sagemath/sagetrac-mirror/commit/16e72e7244e735bcbfc3cc4bf8effb2ea7fae330)**",
    "created_at": "2013-11-07T23:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190578",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9b38cf3`](https://github.com/sagemath/sagetrac-mirror/commit/9b38cf339cc53f2f6e3e03e18aef94e7a8bda075)** to **[`16e72e7`](https://github.com/sagemath/sagetrac-mirror/commit/16e72e7244e735bcbfc3cc4bf8effb2ea7fae330)**



---

archive/issue_comments_190579.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[16e72e7](https://github.com/sagemath/sagetrac-mirror/commit/16e72e7)</code></td><td><code>changes to docstring in factor_or_zero</code></td></tr></table>\n",
    "created_at": "2013-11-07T23:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190579",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[16e72e7](https://github.com/sagemath/sagetrac-mirror/commit/16e72e7)</code></td><td><code>changes to docstring in factor_or_zero</code></td></tr></table>




---

archive/issue_events_216515.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-08T00:04:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216515"
}
```



---

archive/issue_comments_190580.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nPlease be aware that `Factorization` objects (which is what `factor` normally returns) have some methods which should probably be imitated by the `0` object, or else the can is merely being kicked down the road. For instance, the `value` method of a factorization multiplies it back together, and it is way more useful than it looks from that description:\n\n```\nsage: Q = FractionField(P)\nsage: Q(14*x) / Q(28*(x+1))\n14*x/(28*x + 28)\nsage: factor(_).value()\n1/2*x/(x + 1)\n```\n\n0, of course, doesn't have that attribute:\n\n```\nsage: 0.value()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-4-65708360c0e8> in <module>()\n----> 1 Integer(0).value()\n\n/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.Element.__getattr__ (sage/structure/element.c:3873)()\n\n/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/structure/misc.so in sage.structure.misc.getattr_from_other_class (sage/structure/misc.c:1696)()\n\nAttributeError: 'sage.rings.integer.Integer' object has no attribute 'value'\n```",
    "created_at": "2013-11-08T08:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190580",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:7" align="right">comment:7</div>

Please be aware that `Factorization` objects (which is what `factor` normally returns) have some methods which should probably be imitated by the `0` object, or else the can is merely being kicked down the road. For instance, the `value` method of a factorization multiplies it back together, and it is way more useful than it looks from that description:

```
sage: Q = FractionField(P)
sage: Q(14*x) / Q(28*(x+1))
14*x/(28*x + 28)
sage: factor(_).value()
1/2*x/(x + 1)
```

0, of course, doesn't have that attribute:

```
sage: 0.value()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-4-65708360c0e8> in <module>()
----> 1 Integer(0).value()

/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.Element.__getattr__ (sage/structure/element.c:3873)()

/home/darij/gitsage/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/structure/misc.so in sage.structure.misc.getattr_from_other_class (sage/structure/misc.c:1696)()

AttributeError: 'sage.rings.integer.Integer' object has no attribute 'value'
```



---

archive/issue_events_216516.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-08T10:06:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216516"
}
```



---

archive/issue_events_216517.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-08T10:06:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216517"
}
```



---

archive/issue_comments_190581.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYou are right.  For consistency it should return a factorization object rather than an actual 0.\n\n---\nNew commits:\n<table><tr><td><code>[1e0e3da](https://github.com/sagemath/sagetrac-mirror/commit/1e0e3da)</code></td><td><code>should return a factorization object</code></td></tr></table>\n",
    "created_at": "2013-11-08T15:44:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190581",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:9" align="right">comment:9</div>

You are right.  For consistency it should return a factorization object rather than an actual 0.

---
New commits:
<table><tr><td><code>[1e0e3da](https://github.com/sagemath/sagetrac-mirror/commit/1e0e3da)</code></td><td><code>should return a factorization object</code></td></tr></table>




---

archive/issue_comments_190582.json:
```json
{
    "body": "Changed commit from **[`16e72e7`](https://github.com/sagemath/sagetrac-mirror/commit/16e72e7244e735bcbfc3cc4bf8effb2ea7fae330)** to **[`1e0e3da`](https://github.com/sagemath/sagetrac-mirror/commit/1e0e3da44e609c65c2b6b269f80991d01a33b844)**",
    "created_at": "2013-11-08T15:44:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190582",
    "user": "https://github.com/zabrocki"
}
```

Changed commit from **[`16e72e7`](https://github.com/sagemath/sagetrac-mirror/commit/16e72e7244e735bcbfc3cc4bf8effb2ea7fae330)** to **[`1e0e3da`](https://github.com/sagemath/sagetrac-mirror/commit/1e0e3da44e609c65c2b6b269f80991d01a33b844)**



---

archive/issue_comments_190583.json:
```json
{
    "body": "Changed branch from **[public/ticket/15364-factor_or_zero](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15364-factor_or_zero)** to **[public/ticket/15364/zabrocki/factor_or_zero](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15364/zabrocki/factor_or_zero)**",
    "created_at": "2013-11-08T15:44:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190583",
    "user": "https://github.com/zabrocki"
}
```

Changed branch from **[public/ticket/15364-factor_or_zero](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15364-factor_or_zero)** to **[public/ticket/15364/zabrocki/factor_or_zero](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15364/zabrocki/factor_or_zero)**



---

archive/issue_comments_190584.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@zabrocki](#comment:9):\n> You are right.  For consistency it should return a factorization object rather than an actual 0.\n\nAnd now compare:\n\n```\nsage: var('x')\nx\nsage: factor(x^2-1) #this is just a symbolic_expression\n(x - 1)*(x + 1)\nsage: PQ.<X>=QQ[]\nsage: factor(X^2-1)\n(X - 1) * (X + 1)\nsage: factor(X^2-1).universe()\nUnivariate Polynomial Ring in X over Rational Field\nsage: PZ.<Y>=ZZ[]\nsage: factor(Y^2-1)\n(Y - 1) * (Y + 1)\nsage: factor(Y^2-1).universe()\nUnivariate Polynomial Ring in Y over Integer Ring\n```\nyou should probably be consistent with that too.\n\nFrom the application you describe, I guess you're mostly interested in application to SR (the first case) in which case the most appropriate thing to do is probably to add a method `simplify_factor` to SymbolicExpression, which could happily simplify the expression \"0\" to the product \"0\". In the other cases, the code is just a lot clearer if people specify their own little one-off function that does with 0 what they want.",
    "created_at": "2013-11-08T16:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190584",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@zabrocki](#comment:9):
> You are right.  For consistency it should return a factorization object rather than an actual 0.

And now compare:

```
sage: var('x')
x
sage: factor(x^2-1) #this is just a symbolic_expression
(x - 1)*(x + 1)
sage: PQ.<X>=QQ[]
sage: factor(X^2-1)
(X - 1) * (X + 1)
sage: factor(X^2-1).universe()
Univariate Polynomial Ring in X over Rational Field
sage: PZ.<Y>=ZZ[]
sage: factor(Y^2-1)
(Y - 1) * (Y + 1)
sage: factor(Y^2-1).universe()
Univariate Polynomial Ring in Y over Integer Ring
```
you should probably be consistent with that too.

From the application you describe, I guess you're mostly interested in application to SR (the first case) in which case the most appropriate thing to do is probably to add a method `simplify_factor` to SymbolicExpression, which could happily simplify the expression "0" to the product "0". In the other cases, the code is just a lot clearer if people specify their own little one-off function that does with 0 what they want.



---

archive/issue_comments_190585.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nFor Factorization objects: I think you really don't want those to get out into the wild when constructed with 0:\n\n```\nsage: a=Factorization([(0,1)])\nsage: b=Factorization([(2,1)])\nsage: a.gcd(b)\n1\nsage: a^(-1)\n0^-1\n```\nThat's just wrong. I think that's even worse than getting an attribute error on `.value()`.",
    "created_at": "2013-11-08T18:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190585",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:11" align="right">comment:11</div>

For Factorization objects: I think you really don't want those to get out into the wild when constructed with 0:

```
sage: a=Factorization([(0,1)])
sage: b=Factorization([(2,1)])
sage: a.gcd(b)
1
sage: a^(-1)
0^-1
```
That's just wrong. I think that's even worse than getting an attribute error on `.value()`.



---

archive/issue_events_216518.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-08T19:14:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216518"
}
```



---

archive/issue_events_216519.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-11-08T19:14:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216519"
}
```



---

archive/issue_comments_190586.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n> From the application you describe, I guess you're mostly interested in application to SR (the first case) in which case the most appropriate thing to do is probably to add a method `simplify_factor` to SymbolicExpression, which could happily simplify the expression \"0\" to the product \"0\". In the other cases, the code is just a lot clearer if people specify their own little one-off function that does with 0 what they want.\n\nI (and my colleagues that are likely to use this code) will probably be working with algebras over polynomial rings/fraction fields or integer coefficients.  SR is rather slow so I don't use it much.  This is a convenience function.  I can go through my list worksheets and could say that in about 1/3 of them I've had to work around factor throwing errors at me.\n\n> For Factorization objects: I think you really don't want those to get out into the wild when constructed with 0:\n> \n> ```\n> sage: a=Factorization([(0,1)])\n> sage: b=Factorization([(2,1)])\n> sage: a.gcd(b)\n> 1\n> sage: a^(-1)\n> 0^-1\n> ```\n> That's just wrong. I think that's even worse than getting an attribute error on `.value()`.\n\nYou are right.  We might need to clean up the factorization code so that it handles the 0 object properly.",
    "created_at": "2013-11-08T19:14:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190586",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:13" align="right">comment:13</div>

> From the application you describe, I guess you're mostly interested in application to SR (the first case) in which case the most appropriate thing to do is probably to add a method `simplify_factor` to SymbolicExpression, which could happily simplify the expression "0" to the product "0". In the other cases, the code is just a lot clearer if people specify their own little one-off function that does with 0 what they want.

I (and my colleagues that are likely to use this code) will probably be working with algebras over polynomial rings/fraction fields or integer coefficients.  SR is rather slow so I don't use it much.  This is a convenience function.  I can go through my list worksheets and could say that in about 1/3 of them I've had to work around factor throwing errors at me.

> For Factorization objects: I think you really don't want those to get out into the wild when constructed with 0:
> 
> ```
> sage: a=Factorization([(0,1)])
> sage: b=Factorization([(2,1)])
> sage: a.gcd(b)
> 1
> sage: a^(-1)
> 0^-1
> ```
> That's just wrong. I think that's even worse than getting an attribute error on `.value()`.

You are right.  We might need to clean up the factorization code so that it handles the 0 object properly.



---

archive/issue_events_216520.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2013-12-17T18:42:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216520"
}
```



---

archive/issue_events_216521.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2013-12-17T18:42:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216521"
}
```



---

archive/issue_events_216522.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216522"
}
```



---

archive/issue_events_216523.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216523"
}
```



---

archive/issue_comments_190587.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI noticed another problem with `factor` and the factorization objects that it returns.   I took a symmetric function expression and used `.map_coefficients(factor)` and my coefficients which were 1 and -1 disappeared (I was applying it to an expression with polynomial coefficients, but you get the idea from the following expression).\n\n```\nsage: s = SymmetricFunctions(QQ).s()\nsage: (s[3,2]+2*s[2,2,1]).map_coefficients(factor)\n2*s[2, 2, 1]\n```\n\nThis happens because `map_coefficients` is calling `s.sum_of_terms` which calls `s.term` which calls `s._from_dict` and we have the strange behavior that `s._from_dict({Partition([3,2]) : factor(1)})` is 0.\n\nIf you trace it further, you see that `_from_dict` removes the zeros and computes \n\n`dict( (key, coeff) for key, coeff in d.iteritems() if coeff)`\n\nNow `bool(factor(2))` is `True` while `bool(factor(1))` and `bool(factor(-1))` is `False`.  I don't know if there is a good reason that `factor(1)` and `factor(-1)` should be `False` or if this bug should be fixed in `combinat/free_module.py` in the code for `_from_dict`.",
    "created_at": "2014-03-12T20:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190587",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:16" align="right">comment:16</div>

I noticed another problem with `factor` and the factorization objects that it returns.   I took a symmetric function expression and used `.map_coefficients(factor)` and my coefficients which were 1 and -1 disappeared (I was applying it to an expression with polynomial coefficients, but you get the idea from the following expression).

```
sage: s = SymmetricFunctions(QQ).s()
sage: (s[3,2]+2*s[2,2,1]).map_coefficients(factor)
2*s[2, 2, 1]
```

This happens because `map_coefficients` is calling `s.sum_of_terms` which calls `s.term` which calls `s._from_dict` and we have the strange behavior that `s._from_dict({Partition([3,2]) : factor(1)})` is 0.

If you trace it further, you see that `_from_dict` removes the zeros and computes 

`dict( (key, coeff) for key, coeff in d.iteritems() if coeff)`

Now `bool(factor(2))` is `True` while `bool(factor(1))` and `bool(factor(-1))` is `False`.  I don't know if there is a good reason that `factor(1)` and `factor(-1)` should be `False` or if this bug should be fixed in `combinat/free_module.py` in the code for `_from_dict`.



---

archive/issue_events_216524.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216524"
}
```



---

archive/issue_events_216525.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216525"
}
```



---

archive/issue_events_216526.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216526"
}
```



---

archive/issue_events_216527.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216527"
}
```



---

archive/issue_events_216528.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2020-01-26T12:56:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216528"
}
```



---

archive/issue_events_216529.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2020-01-26T12:56:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216529"
}
```



---

archive/issue_events_216530.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2020-01-26T12:56:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216530"
}
```



---

archive/issue_comments_190588.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI was the one pushing for a means of gussying up algebraic expressions through a `factor_or_zero` command and this ticket hasn't been modified in 6 years.  I propose that it be closed.  While I do think that this is a problem that sometimes I am able to find no combination of `expand`, `simplify` and `factor` can clean up a coefficients of an element in an algebra, after the discussions here I don't think that doing that through playing with `factor` is the right way to go.",
    "created_at": "2020-01-26T12:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15364#issuecomment-190588",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:19" align="right">comment:19</div>

I was the one pushing for a means of gussying up algebraic expressions through a `factor_or_zero` command and this ticket hasn't been modified in 6 years.  I propose that it be closed.  While I do think that this is a problem that sometimes I am able to find no combination of `expand`, `simplify` and `factor` can clean up a coefficients of an element in an algebra, after the discussions here I don't think that doing that through playing with `factor` is the right way to go.



---

archive/issue_events_216531.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2020-02-06T01:01:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216531"
}
```



---

archive/issue_events_216532.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2020-02-06T01:01:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216532"
}
```



---

archive/issue_events_216533.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-02-06T12:05:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216533"
}
```



---

archive/issue_events_216534.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-02-06T12:05:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "c6c6c6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216534"
}
```



---

archive/issue_events_216535.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-02-06T12:05:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216535"
}
```



---

archive/issue_events_216536.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-02-06T12:05:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15364",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15364#event-216536"
}
```
