# Issue 15526: banner is not updated

archive/issues_015289.json:
```json
{
    "assignees": [],
    "body": "Starting up sage-6.0.rc0 still shows the wrong version.\n\nBranch/Commit: **[u/vbraun/banner_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/banner_version) @ [`40446e2`](https://github.com/sagemath/sagetrac-mirror/commit/40446e20ffdfbe0360059a6b9e1e494d4eab0c45)**\n\nReviewer: **Volker Braun**\n\nAuthor: **Volker Braun**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15526_\n\n",
    "closed_at": "2013-12-16T22:54:04Z",
    "created_at": "2013-12-16T17:13:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "banner is not updated",
    "type": "issue",
    "updated_at": "2013-12-16T22:54:04Z",
    "url": "https://github.com/sagemath/sage/issues/15526",
    "user": "https://github.com/vbraun"
}
```
Starting up sage-6.0.rc0 still shows the wrong version.

Branch/Commit: **[u/vbraun/banner_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/banner_version) @ [`40446e2`](https://github.com/sagemath/sagetrac-mirror/commit/40446e20ffdfbe0360059a6b9e1e494d4eab0c45)**

Reviewer: **Volker Braun**

Author: **Volker Braun**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/15526_





---

archive/issue_events_221282.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T17:13:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "milestone_number": null,
    "milestone_title": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221282"
}
```



---

archive/issue_events_221283.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T17:13:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221283"
}
```



---

archive/issue_events_221284.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T17:13:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221284"
}
```



---

archive/issue_events_221285.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T17:13:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221285"
}
```



---

archive/issue_comments_193917.json:
```json
{
    "body": "Branch: **[u/vbraun/banner_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/banner_version)**",
    "created_at": "2013-12-16T17:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193917",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/banner_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/banner_version)**



---

archive/issue_comments_193918.json:
```json
{
    "body": "Commit: **[`40446e2`](https://github.com/sagemath/sagetrac-mirror/commit/40446e20ffdfbe0360059a6b9e1e494d4eab0c45)**",
    "created_at": "2013-12-16T17:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193918",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`40446e2`](https://github.com/sagemath/sagetrac-mirror/commit/40446e20ffdfbe0360059a6b9e1e494d4eab0c45)**



---

archive/issue_comments_193919.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td>[40446e2](https://github.com/sagemath/sagetrac-mirror/commit/40446e2)</td><td><code>Use the updated version for the banner, not the old one</code></td></tr></table>\n",
    "created_at": "2013-12-16T17:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193919",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td>[40446e2](https://github.com/sagemath/sagetrac-mirror/commit/40446e2)</td><td><code>Use the updated version for the banner, not the old one</code></td></tr></table>




---

archive/issue_events_221286.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T17:36:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221286"
}
```



---

archive/issue_comments_193920.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2013-12-16T17:36:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193920",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_comments_193921.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td>[40446e2](https://github.com/sagemath/sagetrac-mirror/commit/40446e2)</td><td><code>Use the updated version for the banner, not the old one</code></td></tr></table>\n",
    "created_at": "2013-12-16T17:36:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193921",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td>[40446e2](https://github.com/sagemath/sagetrac-mirror/commit/40446e2)</td><td><code>Use the updated version for the banner, not the old one</code></td></tr></table>




---

archive/issue_events_221287.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:05:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221287"
}
```



---

archive/issue_events_221288.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "40ed717359843bbc927a7e034124499929121428",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2013-12-16T18:05:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221288"
}
```



---

archive/issue_events_221289.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T18:08:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221289"
}
```



---

archive/issue_comments_193922.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSorry wrong button... needs review",
    "created_at": "2013-12-16T18:08:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193922",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

Sorry wrong button... needs review



---

archive/issue_comments_193923.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nPlease be patient, this is the first time I have ever tried to review a git ticket.\n\nI had an up-to-date sage git build with precisely  branches, master (the current HEAD) and build_system (presumably obsolete).  I did \n\n```\n ./sage -dev checkout --ticket 15526  \n```\nand saw this:\n\n```\nOn ticket #15526 with associated local branch \"ticket/15526\".\n\n#  Use \"sage --dev merge\" to include another ticket/branch.\n#  Use \"sage --dev commit\" to save changes into a new commit.\n```\nbut now\n\n```\n./sage -dev diff\n```\nshows no changes.  However \"git diff HEAD master\" does show the expected diffs.  Is this a bug in \"./sage -dev diff\" or did I do something wrong already?",
    "created_at": "2013-12-16T19:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193923",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:7" align="right">comment:7</div>

Please be patient, this is the first time I have ever tried to review a git ticket.

I had an up-to-date sage git build with precisely  branches, master (the current HEAD) and build_system (presumably obsolete).  I did 

```
 ./sage -dev checkout --ticket 15526  
```
and saw this:

```
On ticket #15526 with associated local branch "ticket/15526".

#  Use "sage --dev merge" to include another ticket/branch.
#  Use "sage --dev commit" to save changes into a new commit.
```
but now

```
./sage -dev diff
```
shows no changes.  However "git diff HEAD master" does show the expected diffs.  Is this a bug in "./sage -dev diff" or did I do something wrong already?



---

archive/issue_comments_193924.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThats the expected behavior:\n\n```\n$ sage -dev help diff\nusage: sage-dev diff [-h] [--base BASE]\n\nShow how the current file system differs from \"base\".\n\noptional arguments:\n  -h, --help   show this help message and exit\n  --base BASE  a string; show the differences against the latest \"'commit'\"\n               (the default), against the branch \"'master'\" (or any other\n               branch name), or the merge of the \"'dependencies'\" of the\n               current ticket (if the dependencies merge cleanly)\n```\nIt matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.",
    "created_at": "2013-12-16T20:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193924",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

Thats the expected behavior:

```
$ sage -dev help diff
usage: sage-dev diff [-h] [--base BASE]

Show how the current file system differs from "base".

optional arguments:
  -h, --help   show this help message and exit
  --base BASE  a string; show the differences against the latest "'commit'"
               (the default), against the branch "'master'" (or any other
               branch name), or the merge of the "'dependencies'" of the
               current ticket (if the dependencies merge cleanly)
```
It matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.



---

archive/issue_comments_193925.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@vbraun](#comment:8):\n> Thats the expected behavior:\n> \n> ```\n> $ sage -dev help diff\n> usage: sage-dev diff [-h] [--base BASE]\n> \n> Show how the current file system differs from \"base\".\n> \n> optional arguments:\n>   -h, --help   show this help message and exit\n>   --base BASE  a string; show the differences against the latest \"'commit'\"\n>                (the default), against the branch \"'master'\" (or any other\n>                branch name), or the merge of the \"'dependencies'\" of the\n>                current ticket (if the dependencies merge cleanly)\n> ```\n> It matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.\n\n\nOK, that makes perfect sense, though it is not what I was expecting after reading the development guide which says that (with nothing after the diff) \"which lists all source code changes that are part of the current branch. That is, it lists the changes from the current master to the current branch.\"   I'm learning, but I think the dev. guide could be clearer.",
    "created_at": "2013-12-16T20:34:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193925",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@vbraun](#comment:8):
> Thats the expected behavior:
> 
> ```
> $ sage -dev help diff
> usage: sage-dev diff [-h] [--base BASE]
> 
> Show how the current file system differs from "base".
> 
> optional arguments:
>   -h, --help   show this help message and exit
>   --base BASE  a string; show the differences against the latest "'commit'"
>                (the default), against the branch "'master'" (or any other
>                branch name), or the merge of the "'dependencies'" of the
>                current ticket (if the dependencies merge cleanly)
> ```
> It matches what `git diff` does, by default is shows the changed local files relative to the current head commit. I.e., nothing if you haven't made any changes yet.


OK, that makes perfect sense, though it is not what I was expecting after reading the development guide which says that (with nothing after the diff) "which lists all source code changes that are part of the current branch. That is, it lists the changes from the current master to the current branch."   I'm learning, but I think the dev. guide could be clearer.



---

archive/issue_comments_193926.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOK, so after applying the patch (in oldspeak) i.e. creating the branch from this ticket and waiting for \"make\" to finish, the banner is exactly the same: 5.13.  So, I don't know what to do to test this.  At least it passes the \"patch applies ok\"  test since that seens automatic with git.\n\nI am running a \"make ptestlong\" and see the string \"sage-6.0.rc0\" appearing,  but I don't know if that is a waste of time.",
    "created_at": "2013-12-16T20:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193926",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:10" align="right">comment:10</div>

OK, so after applying the patch (in oldspeak) i.e. creating the branch from this ticket and waiting for "make" to finish, the banner is exactly the same: 5.13.  So, I don't know what to do to test this.  At least it passes the "patch applies ok"  test since that seens automatic with git.

I am running a "make ptestlong" and see the string "sage-6.0.rc0" appearing,  but I don't know if that is a waste of time.



---

archive/issue_comments_193927.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCorrect. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.",
    "created_at": "2013-12-16T20:50:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193927",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:11" align="right">comment:11</div>

Correct. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.



---

archive/issue_comments_193928.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@vbraun](#comment:11):\n> Correct. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.\n\nThis seems to suggest that people other than release managers will have difficulties in testing this, then!  I get 3 errors in cmdline.py, all like\n\n```\nFile \"src/sage/tests/cmdline.py\", line 185, in sage.tests.cmdline.test_executable\nFailed example:\n    out.find(version()) >= 0\nExpected: \n    True\nGot:\n    False\n```\n\nI'll go and look for a different and more normal ticket to test out my reviewing skills.",
    "created_at": "2013-12-16T22:04:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193928",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@vbraun](#comment:11):
> Correct. The point of this ticket is that the `sage-update-version` script writes the correct banner. The script is run as part of the release process, not whenever you build sage.

This seems to suggest that people other than release managers will have difficulties in testing this, then!  I get 3 errors in cmdline.py, all like

```
File "src/sage/tests/cmdline.py", line 185, in sage.tests.cmdline.test_executable
Failed example:
    out.find(version()) >= 0
Expected: 
    True
Got:
    False
```

I'll go and look for a different and more normal ticket to test out my reviewing skills.



---

archive/issue_events_221290.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T22:51:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221290"
}
```



---

archive/issue_events_221291.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T22:51:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221291"
}
```



---

archive/issue_comments_193929.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe test failures are to be expected...  I guess there is nothing to review here after all ;-)",
    "created_at": "2013-12-16T22:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193929",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:13" align="right">comment:13</div>

The test failures are to be expected...  I guess there is nothing to review here after all ;-)



---

archive/issue_comments_193930.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2013-12-16T22:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15526#issuecomment-193930",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_221292.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T22:54:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221292"
}
```



---

archive/issue_events_221293.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T22:54:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15526",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15526#event-221293"
}
```
