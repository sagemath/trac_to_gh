# Issue 15384: Improvements to root systems

archive/issues_015147.json:
```json
{
    "body": "Implement various things for affine root systems:\n\n- The symmetric form `( | )`.\n- Methods for checking the short/long/imaginary roots.\n- Modelling the positive roots roots in affine types.\n- Basic untwisted types (so type A<sub>2n</sub><sup>(2)</sup> would give A<sub>2n</sub>).\n- (Dual) Coxeter numbers for finite types.\n\nAssignee: sage-combinat\n\nCC:  sage-combinat @anneschilling @nthiery @darijgr @bsalisbury1 @dwbump\n\nKeywords: root systems, days54\n\nBranch/Commit: 72859401196f2a2893043c555146ce56102acabf\n\nReviewer: Daniel Bump\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15384\n\n",
    "closed_at": "2014-05-30T11:35:42Z",
    "created_at": "2013-11-08T20:46:03Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Improvements to root systems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15384",
    "user": "https://github.com/tscrim"
}
```
Implement various things for affine root systems:

- The symmetric form `( | )`.
- Methods for checking the short/long/imaginary roots.
- Modelling the positive roots roots in affine types.
- Basic untwisted types (so type A<sub>2n</sub><sup>(2)</sup> would give A<sub>2n</sub>).
- (Dual) Coxeter numbers for finite types.

Assignee: sage-combinat

CC:  sage-combinat @anneschilling @nthiery @darijgr @bsalisbury1 @dwbump

Keywords: root systems, days54

Branch/Commit: 72859401196f2a2893043c555146ce56102acabf

Reviewer: Daniel Bump

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15384





---

archive/issue_comments_194110.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2013-11-08T20:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194110",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_194111.json:
```json
{
    "body": "Changing keywords from \"root systems\" to \"root systems, days54\".",
    "created_at": "2013-11-09T00:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194111",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "root systems" to "root systems, days54".



---

archive/issue_comments_194112.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-15T03:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194112",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194113.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-18T07:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194113",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_044707.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15384#event-44707"
}
```



---

archive/issue_comments_194114.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-03-04T18:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194114",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_194115.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-13T05:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194115",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194116.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-15T02:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194116",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_044708.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15384#event-44708"
}
```



---

archive/issue_events_044709.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15384#event-44709"
}
```



---

archive/issue_comments_194117.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-06T21:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194117",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194118.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-07T00:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194118",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194119.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-07T03:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194119",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194120.json:
```json
{
    "body": "<a id='comment:14'></a>Hey Dan,\n\nI've fixed it. The (first `r`) columns are given by `P.simple_roots()`, and it's the inverse matrix should have the Kac labels (which it does).",
    "created_at": "2014-05-07T04:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194120",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>Hey Dan,

I've fixed it. The (first `r`) columns are given by `P.simple_roots()`, and it's the inverse matrix should have the Kac labels (which it does).



---

archive/issue_comments_194121.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-07T04:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194121",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_194122.json:
```json
{
    "body": "<a id='comment:15'></a>Glad you got it fixed. I'll start looking at the patch.",
    "created_at": "2014-05-08T20:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194122",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:15'></a>Glad you got it fixed. I'll start looking at the patch.



---

archive/issue_comments_194123.json:
```json
{
    "body": "<a id='comment:16'></a>Travis: do you mind updating the description of the ticket to give an overview of the changes?\n\nThanks!",
    "created_at": "2014-05-08T21:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194123",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:16'></a>Travis: do you mind updating the description of the ticket to give an overview of the changes?

Thanks!



---

archive/issue_comments_194124.json:
```json
{
    "body": "<a id='comment:19'></a>The scalar product that was implemented is fundamental in Kac' book and for that alone this is an important patch.\n\nI got one doctest failure in weight_space.py:\n\n```\nsage -t weight_space.py\n**********************************************************************\nFile \"weight_space.py\", line 131, in sage.combinat.root_system.weight_space.WeightSpace\nFailed example:\n    for ct in CartanType.samples(crystallographic=True)+[CartanType([\"A\",2],[\"C\",5,1])]:\n          TestSuite(ct.root_system().weight_lattice()).run()\n          TestSuite(ct.root_system().weight_space()).run()\nExpected nothing\nGot:\n    Failure in _test_not_implemented_methods:\n    Traceback (most recent call last):\n    [snip]\n    AssertionError: Not implemented method: _symmetric_form_matrix\n```\nIn `cartan_type.py` you could delete the sentence on line 108 since you do implement Coxeter numbers!\n\nFor the positive roots, imaginary roots, etc. The user might like to know how to get a list of them. For *untwisted* types you can do this.\n\n```\nsage: PR=RootSystem(['A',3,1]).root_lattice().positive_real_roots()\nsage: [PR.unrank(i) for i in [0..4]]\n[alpha[1], alpha[2], alpha[3], alpha[1] + alpha[2], alpha[2] + alpha[3]]\n```\n\nIs there a more obvious way? And should something like this be in the doctest?\n\nIn the method basic_imaginary_roots the docstring still refers to simple imaginary roots (twice).\n\nIt would be good if there were pointers to Kac' book in some places. For example, in symmetric_form, the doc could have a pointer to Chapter 6. The Coxeter number method could have a pointer to Bourbaki, Lie Groups and Lie Algebras V.6.1.",
    "created_at": "2014-05-09T20:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194124",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:19'></a>The scalar product that was implemented is fundamental in Kac' book and for that alone this is an important patch.

I got one doctest failure in weight_space.py:

```
sage -t weight_space.py
**********************************************************************
File "weight_space.py", line 131, in sage.combinat.root_system.weight_space.WeightSpace
Failed example:
    for ct in CartanType.samples(crystallographic=True)+[CartanType(["A",2],["C",5,1])]:
          TestSuite(ct.root_system().weight_lattice()).run()
          TestSuite(ct.root_system().weight_space()).run()
Expected nothing
Got:
    Failure in _test_not_implemented_methods:
    Traceback (most recent call last):
    [snip]
    AssertionError: Not implemented method: _symmetric_form_matrix
```
In `cartan_type.py` you could delete the sentence on line 108 since you do implement Coxeter numbers!

For the positive roots, imaginary roots, etc. The user might like to know how to get a list of them. For *untwisted* types you can do this.

```
sage: PR=RootSystem(['A',3,1]).root_lattice().positive_real_roots()
sage: [PR.unrank(i) for i in [0..4]]
[alpha[1], alpha[2], alpha[3], alpha[1] + alpha[2], alpha[2] + alpha[3]]
```

Is there a more obvious way? And should something like this be in the doctest?

In the method basic_imaginary_roots the docstring still refers to simple imaginary roots (twice).

It would be good if there were pointers to Kac' book in some places. For example, in symmetric_form, the doc could have a pointer to Chapter 6. The Coxeter number method could have a pointer to Bourbaki, Lie Groups and Lie Algebras V.6.1.



---

archive/issue_comments_194125.json:
```json
{
    "body": "<a id='comment:20'></a>I've created #16320 to make it easier to access elements in an infinite list (but I have not merged it in so it's not a dependency). I'm not sure if at the end of the day we want to keep using `DisjointUnionEnumeratedSets` and possibly adding better general support for those or making our own special subclasses and having them be better targeted for the roots here. Nicolas, do you have any thoughts/comments on this?\n\nIMO this can be left for a follow-up ticket unless there is a simple and clear better solution. Although if #16320 is a good way to go, I'll merge that in and update the doctests accordingly.",
    "created_at": "2014-05-10T02:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194125",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>I've created #16320 to make it easier to access elements in an infinite list (but I have not merged it in so it's not a dependency). I'm not sure if at the end of the day we want to keep using `DisjointUnionEnumeratedSets` and possibly adding better general support for those or making our own special subclasses and having them be better targeted for the roots here. Nicolas, do you have any thoughts/comments on this?

IMO this can be left for a follow-up ticket unless there is a simple and clear better solution. Although if #16320 is a good way to go, I'll merge that in and update the doctests accordingly.



---

archive/issue_comments_194126.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-10T02:33:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194126",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194127.json:
```json
{
    "body": "<a id='comment:22'></a>Still two doctest failures in `root_lattice_realizations.py`.\n\n```\nsage -t root_lattice_realizations.py\n**********************************************************************\nFile \"root_lattice_realizations.py\", line 634, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.positive_real_roots\nFailed example:\n    PRR = L.positive_real_roots(); PRR\nExpected nothing\nGot:\n    Positive real roots of type ['A', 3, 1]\n**********************************************************************\nFile \"root_lattice_realizations.py\", line 635, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.positive_real_roots\nFailed example:\n    [PRR.unrank(i) for i in range(10)]\nExpected:\n    Positive real roots of type ['A', 3, 1]\n    [alpha[1],\n\n   -snip-\n```",
    "created_at": "2014-05-10T15:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194127",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:22'></a>Still two doctest failures in `root_lattice_realizations.py`.

```
sage -t root_lattice_realizations.py
**********************************************************************
File "root_lattice_realizations.py", line 634, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.positive_real_roots
Failed example:
    PRR = L.positive_real_roots(); PRR
Expected nothing
Got:
    Positive real roots of type ['A', 3, 1]
**********************************************************************
File "root_lattice_realizations.py", line 635, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.positive_real_roots
Failed example:
    [PRR.unrank(i) for i in range(10)]
Expected:
    Positive real roots of type ['A', 3, 1]
    [alpha[1],

   -snip-
```



---

archive/issue_comments_194128.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-10T15:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194128",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194129.json:
```json
{
    "body": "<a id='comment:24'></a>Whoops, forgot to commit.",
    "created_at": "2014-05-10T15:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194129",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>Whoops, forgot to commit.



---

archive/issue_comments_194130.json:
```json
{
    "body": "<a id='comment:25'></a>All tests passed!\n\nThe following breaks:\n\n[RootSystem(['A',2,2]).root_lattice().positive_roots().unrank(x) for x in [0..10]]\n\nIt works for untwisted types. Is this a limitation of the patch or an unexpected failure?\n\nIf it is a limitation of the patch maybe it should be noted in the patch description. Also it\nmight be better to fail with a not implemented error than with:\n\n```\nTypeError: unsupported operand type(s) for //: 'RootSpace_with_category.element_class' and 'int'\n```",
    "created_at": "2014-05-10T16:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194130",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:25'></a>All tests passed!

The following breaks:

[RootSystem(['A',2,2]).root_lattice().positive_roots().unrank(x) for x in [0..10]]

It works for untwisted types. Is this a limitation of the patch or an unexpected failure?

If it is a limitation of the patch maybe it should be noted in the patch description. Also it
might be better to fail with a not implemented error than with:

```
TypeError: unsupported operand type(s) for //: 'RootSpace_with_category.element_class' and 'int'
```



---

archive/issue_comments_194131.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-10T16:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194131",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194132.json:
```json
{
    "body": "<a id='comment:27'></a>That was an error. Fixed now.",
    "created_at": "2014-05-10T16:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194132",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>That was an error. Fixed now.



---

archive/issue_comments_194133.json:
```json
{
    "body": "<a id='comment:28'></a>What about this?\n\n```\nsage: RootSystem(['D',4,2]).root_lattice().positive_roots()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-11-ea364fc7aada> in <module>()\n----> 1 RootSystem(['D',Integer(4),Integer(2)]).root_lattice().positive_roots()\n\n-snip -\n\nAttributeError: 'NoneType' object has no attribute 'dual'\n```\n\nBTW Sage reports this root system as Root lattice of the Root system of type ['C', 3, 1]^*\n\nIf I have my facts straight Macdonald introduced a classification of affine root systems in his\npaper \"Affine root systems and the Dedekind eta function\" Inventiones 1972 but\nKac didn't follow Macdonald. He introduced his own classification. So we are\nentering root systems in Kac' notation and they are getting converted automatically\nto Macdonald's notation. Of course that policy was not introduced by this patch but\nI mention that I've personally found it a little confusing.",
    "created_at": "2014-05-10T19:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194133",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:28'></a>What about this?

```
sage: RootSystem(['D',4,2]).root_lattice().positive_roots()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-11-ea364fc7aada> in <module>()
----> 1 RootSystem(['D',Integer(4),Integer(2)]).root_lattice().positive_roots()

-snip -

AttributeError: 'NoneType' object has no attribute 'dual'
```

BTW Sage reports this root system as Root lattice of the Root system of type ['C', 3, 1]^*

If I have my facts straight Macdonald introduced a classification of affine root systems in his
paper "Affine root systems and the Dedekind eta function" Inventiones 1972 but
Kac didn't follow Macdonald. He introduced his own classification. So we are
entering root systems in Kac' notation and they are getting converted automatically
to Macdonald's notation. Of course that policy was not introduced by this patch but
I mention that I've personally found it a little confusing.



---

archive/issue_comments_194134.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-10T22:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194134",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194135.json:
```json
{
    "body": "<a id='comment:30'></a>Another (stupid) error on my part. Fixed.\n\nAlso if you want to display in Kac's notation, you can do the following (it's somewhat hidden at the bottom of `CatanType?`):\n\n```\nsage: CartanType.global_options(notation='Kac')\nsage: CartanType(['D',4,2])\n['D', 4, 2]\n```",
    "created_at": "2014-05-10T22:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194135",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'></a>Another (stupid) error on my part. Fixed.

Also if you want to display in Kac's notation, you can do the following (it's somewhat hidden at the bottom of `CatanType?`):

```
sage: CartanType.global_options(notation='Kac')
sage: CartanType(['D',4,2])
['D', 4, 2]
```



---

archive/issue_comments_194136.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-21T00:26:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194136",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194137.json:
```json
{
    "body": "<a id='comment:32'></a>The following returns an error:\n\n```\nsage: sr=RootSystem(['A',6,2]).weight_lattice().simple_roots()\nsage: sr[0].symmetric_form(sr[1])\n...\nTypeError: no conversion of this rational to integer\n```\n\nThere is no error if we use the root_lattice.",
    "created_at": "2014-05-23T18:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194137",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:32'></a>The following returns an error:

```
sage: sr=RootSystem(['A',6,2]).weight_lattice().simple_roots()
sage: sr[0].symmetric_form(sr[1])
...
TypeError: no conversion of this rational to integer
```

There is no error if we use the root_lattice.



---

archive/issue_comments_194138.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-26T02:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194138",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194139.json:
```json
{
    "body": "<a id='comment:34'></a>Hey Dan,\n\nI've fixed the issue; the matrix `stack()` command doesn't coerce (well, it's more of I've worked around it and is now #16399). I've added some more doctests about this. I'll merge in the latest beta later tonight.",
    "created_at": "2014-05-26T03:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194139",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'></a>Hey Dan,

I've fixed the issue; the matrix `stack()` command doesn't coerce (well, it's more of I've worked around it and is now #16399). I've added some more doctests about this. I'll merge in the latest beta later tonight.



---

archive/issue_comments_194140.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-26T04:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194140",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194141.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-29T02:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194141",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_194142.json:
```json
{
    "body": "<a id='comment:36'></a>This patch implements some important things from Chapter 6 of Kac' book for both twisted and untwisted affine Lie algebras, as methods of the root_lattice_realization or the weight_lattice_realization. These include a method of enumerating the positive roots (both real and imaginary), the invariant bilinear form, and a few other things. I tested with Kac' book in front of me, and all the problems I found have been addressed.",
    "created_at": "2014-05-29T02:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194142",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:36'></a>This patch implements some important things from Chapter 6 of Kac' book for both twisted and untwisted affine Lie algebras, as methods of the root_lattice_realization or the weight_lattice_realization. These include a method of enumerating the positive roots (both real and imaginary), the invariant bilinear form, and a few other things. I tested with Kac' book in front of me, and all the problems I found have been addressed.



---

archive/issue_comments_194143.json:
```json
{
    "body": "<a id='comment:37'></a>Thank you for doing the review Dan.",
    "created_at": "2014-05-29T05:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194143",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:37'></a>Thank you for doing the review Dan.



---

archive/issue_comments_194144.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-29T14:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194144",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_194145.json:
```json
{
    "body": "<a id='comment:38'></a>Doctests fail",
    "created_at": "2014-05-29T14:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194145",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>Doctests fail



---

archive/issue_comments_194146.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-29T16:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194146",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_194147.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-05-29T16:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194147",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_194148.json:
```json
{
    "body": "<a id='comment:40'></a>Bad merging on my part; ended up overwriting `simple_roots_tilde()`.",
    "created_at": "2014-05-29T16:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194148",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:40'></a>Bad merging on my part; ended up overwriting `simple_roots_tilde()`.



---

archive/issue_events_044710.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-30T11:35:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15384#event-44710"
}
```



---

archive/issue_comments_194149.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-30T11:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-194149",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
