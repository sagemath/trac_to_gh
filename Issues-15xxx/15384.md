# Issue 15384: Improvements to root systems

archive/issues_015147.json:
```json
{
    "body": "Implement various things for affine root systems:\n\n- The symmetric form `( | )`.\n- Methods for checking the short/long/imaginary roots.\n- Modelling the positive roots roots in affine types.\n- Basic untwisted types (so type A<sub>2n</sub><sup>(2)</sup> would give A<sub>2n</sub>).\n- (Dual) Coxeter numbers for finite types.\n\nAssignee: sage-combinat\n\nCC:  sage-combinat @anneschilling @nthiery @darijgr @bsalisbury1 @dwbump\n\nKeywords: root systems, days54\n\nBranch/Commit: 72859401196f2a2893043c555146ce56102acabf\n\nReviewer: Daniel Bump\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/15384\n\n",
    "closed_at": "2014-05-30T11:35:42Z",
    "created_at": "2013-11-08T20:46:03Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Improvements to root systems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15384",
    "user": "https://github.com/tscrim"
}
```
Implement various things for affine root systems:

- The symmetric form `( | )`.
- Methods for checking the short/long/imaginary roots.
- Modelling the positive roots roots in affine types.
- Basic untwisted types (so type A<sub>2n</sub><sup>(2)</sup> would give A<sub>2n</sub>).
- (Dual) Coxeter numbers for finite types.

Assignee: sage-combinat

CC:  sage-combinat @anneschilling @nthiery @darijgr @bsalisbury1 @dwbump

Keywords: root systems, days54

Branch/Commit: 72859401196f2a2893043c555146ce56102acabf

Reviewer: Daniel Bump

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/15384





---

archive/issue_comments_244747.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                         |                                        |\n|---------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[0fa598a](http://git.sagemath.org/sage.git/commit/?id=0fa598a)|imported patch root_system_data-ts.patch|\n|[870837f](http://git.sagemath.org/sage.git/commit/?id=870837f)|imported patch root_systems-ts.patch|",
    "created_at": "2013-11-08T20:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244747",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                         |                                        |
|---------------------------------------------------------------------------------------------------------|----------------------------------------|
|[0fa598a](http://git.sagemath.org/sage.git/commit/?id=0fa598a)|imported patch root_system_data-ts.patch|
|[870837f](http://git.sagemath.org/sage.git/commit/?id=870837f)|imported patch root_systems-ts.patch|



---

archive/issue_comments_244748.json:
```json
{
    "body": "Changing commit from \"\" to \"0fa598a6ae59bc8a336e93140998a8db0e26a081\"",
    "created_at": "2013-11-08T20:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244748",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "0fa598a6ae59bc8a336e93140998a8db0e26a081"



---

archive/issue_comments_244749.json:
```json
{
    "body": "Changing branch from \"\" to \"public/combinat/root_systems/improvements-15384\"",
    "created_at": "2013-11-08T20:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244749",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/combinat/root_systems/improvements-15384"



---

archive/issue_comments_244750.json:
```json
{
    "body": "Changing keywords from \"root systems\" to \"root systems, days54\".",
    "created_at": "2013-11-09T00:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244750",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "root systems" to "root systems, days54".



---

archive/issue_comments_244751.json:
```json
{
    "body": "Changing commit from \"0fa598a6ae59bc8a336e93140998a8db0e26a081\" to \"e40f89241889ecdc2d7f5fc8ad2d623f75584bc3\"",
    "created_at": "2013-11-15T03:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0fa598a6ae59bc8a336e93140998a8db0e26a081" to "e40f89241889ecdc2d7f5fc8ad2d623f75584bc3"



---

archive/issue_comments_244752.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                         |                                      |\n|---------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[e40f892](http://git.sagemath.org/sage.git/commit/?id=e40f892)|Changed horizontal to basic_untwisted.|\n|[930782b](http://git.sagemath.org/sage.git/commit/?id=930782b)|Fixed indentation error.|\n|[f87789d](http://git.sagemath.org/sage.git/commit/?id=f87789d)|Merge branch 'master' into public/combinat/root_systems/improvements-15384|",
    "created_at": "2013-11-15T03:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244752",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                         |                                      |
|---------------------------------------------------------------------------------------------------------|--------------------------------------|
|[e40f892](http://git.sagemath.org/sage.git/commit/?id=e40f892)|Changed horizontal to basic_untwisted.|
|[930782b](http://git.sagemath.org/sage.git/commit/?id=930782b)|Fixed indentation error.|
|[f87789d](http://git.sagemath.org/sage.git/commit/?id=f87789d)|Merge branch 'master' into public/combinat/root_systems/improvements-15384|



---

archive/issue_comments_244753.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                         |                                                                          |\n|---------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|\n|[b4c7865](http://git.sagemath.org/sage.git/commit/?id=b4c7865)|Merge branch 'master' into public/combinat/root_systems/improvements-15384|",
    "created_at": "2013-11-18T07:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244753",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                         |                                                                          |
|---------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
|[b4c7865](http://git.sagemath.org/sage.git/commit/?id=b4c7865)|Merge branch 'master' into public/combinat/root_systems/improvements-15384|



---

archive/issue_comments_244754.json:
```json
{
    "body": "Changing commit from \"e40f89241889ecdc2d7f5fc8ad2d623f75584bc3\" to \"b4c7865c9dff6241915b6491c5f097486ee052df\"",
    "created_at": "2013-11-18T07:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244754",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e40f89241889ecdc2d7f5fc8ad2d623f75584bc3" to "b4c7865c9dff6241915b6491c5f097486ee052df"



---

archive/issue_events_044707.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15384#event-44707"
}
```



---

archive/issue_comments_244755.json:
```json
{
    "body": "Changing commit from \"b4c7865c9dff6241915b6491c5f097486ee052df\" to \"dd976c77935b077ef7917c413e1357b9254801f5\"",
    "created_at": "2014-03-04T18:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244755",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b4c7865c9dff6241915b6491c5f097486ee052df" to "dd976c77935b077ef7917c413e1357b9254801f5"



---

archive/issue_comments_244756.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                          |                                                                                                                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|\n|[6100a4b](http://git.sagemath.org/sage.git/commit/?id=6100a4b7c31b2180f244529f59f89e5ade600f0b)|`Merge branch 'public/combinat/root_systems/improvements-15384' of trac.sagemath.org:sage into public/combinat/root_systems/improvements-15384`|\n|[a5a6b1c](http://git.sagemath.org/sage.git/commit/?id=a5a6b1c04668dd25153d060b4cbfb2288c90baaa)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[f802ae1](http://git.sagemath.org/sage.git/commit/?id=f802ae15fa9bc1c8fad397434f7ee1950a614bb5)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[d83982c](http://git.sagemath.org/sage.git/commit/?id=d83982cd317aba5927cc13292ee2127d467f1012)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[ecf8f76](http://git.sagemath.org/sage.git/commit/?id=ecf8f76daee89cf01ddd8af55bad6046fe9da1ba)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[c52545c](http://git.sagemath.org/sage.git/commit/?id=c52545cbfffb2e30e4dbe9d1ecc6bec1a5f4e265)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[14c367e](http://git.sagemath.org/sage.git/commit/?id=14c367e4c6b2c1af87946d1b61893980255982c7)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[fe68bf6](http://git.sagemath.org/sage.git/commit/?id=fe68bf622e4d5f4397711b1bd4c341a9a80d9076)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[896e682](http://git.sagemath.org/sage.git/commit/?id=896e6827b157b81af637e26f5f946e93d8d22b71)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[dd976c7](http://git.sagemath.org/sage.git/commit/?id=dd976c77935b077ef7917c413e1357b9254801f5)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|",
    "created_at": "2014-03-04T18:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244756",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                          |                                                                                                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
|[6100a4b](http://git.sagemath.org/sage.git/commit/?id=6100a4b7c31b2180f244529f59f89e5ade600f0b)|`Merge branch 'public/combinat/root_systems/improvements-15384' of trac.sagemath.org:sage into public/combinat/root_systems/improvements-15384`|
|[a5a6b1c](http://git.sagemath.org/sage.git/commit/?id=a5a6b1c04668dd25153d060b4cbfb2288c90baaa)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[f802ae1](http://git.sagemath.org/sage.git/commit/?id=f802ae15fa9bc1c8fad397434f7ee1950a614bb5)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[d83982c](http://git.sagemath.org/sage.git/commit/?id=d83982cd317aba5927cc13292ee2127d467f1012)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[ecf8f76](http://git.sagemath.org/sage.git/commit/?id=ecf8f76daee89cf01ddd8af55bad6046fe9da1ba)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[c52545c](http://git.sagemath.org/sage.git/commit/?id=c52545cbfffb2e30e4dbe9d1ecc6bec1a5f4e265)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[14c367e](http://git.sagemath.org/sage.git/commit/?id=14c367e4c6b2c1af87946d1b61893980255982c7)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[fe68bf6](http://git.sagemath.org/sage.git/commit/?id=fe68bf622e4d5f4397711b1bd4c341a9a80d9076)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[896e682](http://git.sagemath.org/sage.git/commit/?id=896e6827b157b81af637e26f5f946e93d8d22b71)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[dd976c7](http://git.sagemath.org/sage.git/commit/?id=dd976c77935b077ef7917c413e1357b9254801f5)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|



---

archive/issue_comments_244757.json:
```json
{
    "body": "Changing commit from \"dd976c77935b077ef7917c413e1357b9254801f5\" to \"2c7f793553819baad0d054082c69e029edd42e98\"",
    "created_at": "2014-03-13T05:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244757",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dd976c77935b077ef7917c413e1357b9254801f5" to "2c7f793553819baad0d054082c69e029edd42e98"



---

archive/issue_comments_244758.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[2c7f793](http://git.sagemath.org/sage.git/commit/?id=2c7f793553819baad0d054082c69e029edd42e98)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|",
    "created_at": "2014-03-13T05:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244758",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[2c7f793](http://git.sagemath.org/sage.git/commit/?id=2c7f793553819baad0d054082c69e029edd42e98)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|



---

archive/issue_comments_244759.json:
```json
{
    "body": "Changing commit from \"2c7f793553819baad0d054082c69e029edd42e98\" to \"122ca6eca844a35e402b30cbbf71efcc6afb1e2a\"",
    "created_at": "2014-04-15T02:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244759",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2c7f793553819baad0d054082c69e029edd42e98" to "122ca6eca844a35e402b30cbbf71efcc6afb1e2a"



---

archive/issue_comments_244760.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[ea1641f](http://git.sagemath.org/sage.git/commit/?id=ea1641f529173b9b1c0d188a06beef57e1877674)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[054b37c](http://git.sagemath.org/sage.git/commit/?id=054b37c20601b11031a3bfd91ae9b0ba1ebefb53)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[30de9e8](http://git.sagemath.org/sage.git/commit/?id=30de9e83cada3d4f2bc8c1b7dc4126b243ff671b)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[122ca6e](http://git.sagemath.org/sage.git/commit/?id=122ca6eca844a35e402b30cbbf71efcc6afb1e2a)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|",
    "created_at": "2014-04-15T02:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244760",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[ea1641f](http://git.sagemath.org/sage.git/commit/?id=ea1641f529173b9b1c0d188a06beef57e1877674)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[054b37c](http://git.sagemath.org/sage.git/commit/?id=054b37c20601b11031a3bfd91ae9b0ba1ebefb53)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[30de9e8](http://git.sagemath.org/sage.git/commit/?id=30de9e83cada3d4f2bc8c1b7dc4126b243ff671b)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[122ca6e](http://git.sagemath.org/sage.git/commit/?id=122ca6eca844a35e402b30cbbf71efcc6afb1e2a)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|



---

archive/issue_events_044708.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15384#event-44708"
}
```



---

archive/issue_events_044709.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15384#event-44709"
}
```



---

archive/issue_comments_244761.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                                                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|\n|[87cf9ed](http://git.sagemath.org/sage.git/commit/?id=87cf9edaa61ba7586ab27c8ea009181b64714a70)|`Merge branch 'public/combinat/root_systems/improvements-15384' of trac.sagemath.org:sage into public/combinat/root_systems/improvements-15384`|\n|[c5f9747](http://git.sagemath.org/sage.git/commit/?id=c5f9747fec3223739db314c9f9a29953b0ccef77)|`Added placeholder for symmetric_form in WLR.`|\n|[64ac7a5](http://git.sagemath.org/sage.git/commit/?id=64ac7a57e4b41d533e270b875d883cd7d910dae3)|`Fixed doctests.`|",
    "created_at": "2014-05-06T21:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244761",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
|[87cf9ed](http://git.sagemath.org/sage.git/commit/?id=87cf9edaa61ba7586ab27c8ea009181b64714a70)|`Merge branch 'public/combinat/root_systems/improvements-15384' of trac.sagemath.org:sage into public/combinat/root_systems/improvements-15384`|
|[c5f9747](http://git.sagemath.org/sage.git/commit/?id=c5f9747fec3223739db314c9f9a29953b0ccef77)|`Added placeholder for symmetric_form in WLR.`|
|[64ac7a5](http://git.sagemath.org/sage.git/commit/?id=64ac7a57e4b41d533e270b875d883cd7d910dae3)|`Fixed doctests.`|



---

archive/issue_comments_244762.json:
```json
{
    "body": "Changing commit from \"122ca6eca844a35e402b30cbbf71efcc6afb1e2a\" to \"64ac7a57e4b41d533e270b875d883cd7d910dae3\"",
    "created_at": "2014-05-06T21:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244762",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "122ca6eca844a35e402b30cbbf71efcc6afb1e2a" to "64ac7a57e4b41d533e270b875d883cd7d910dae3"



---

archive/issue_comments_244763.json:
```json
{
    "body": "Changing reviewer from \"\" to \"bump\"",
    "created_at": "2014-05-06T23:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244763",
    "user": "https://github.com/dwbump"
}
```

Changing reviewer from "" to "bump"



---

archive/issue_comments_244764.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |               |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n|[1817877](http://git.sagemath.org/sage.git/commit/?id=1817877be05246ac3248a6b8fc82a159dc27351c)|`Almost there.`|",
    "created_at": "2014-05-07T00:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244764",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |               |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------|
|[1817877](http://git.sagemath.org/sage.git/commit/?id=1817877be05246ac3248a6b8fc82a159dc27351c)|`Almost there.`|



---

archive/issue_comments_244765.json:
```json
{
    "body": "Changing commit from \"64ac7a57e4b41d533e270b875d883cd7d910dae3\" to \"1817877be05246ac3248a6b8fc82a159dc27351c\"",
    "created_at": "2014-05-07T00:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244765",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "64ac7a57e4b41d533e270b875d883cd7d910dae3" to "1817877be05246ac3248a6b8fc82a159dc27351c"



---

archive/issue_comments_244766.json:
```json
{
    "body": "Changing commit from \"1817877be05246ac3248a6b8fc82a159dc27351c\" to \"18fd0946874e2e54a75cdcd761311dea3f2810a4\"",
    "created_at": "2014-05-07T03:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244766",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1817877be05246ac3248a6b8fc82a159dc27351c" to "18fd0946874e2e54a75cdcd761311dea3f2810a4"



---

archive/issue_comments_244767.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[18fd094](http://git.sagemath.org/sage.git/commit/?id=18fd0946874e2e54a75cdcd761311dea3f2810a4)|`Fixed affine weight lattice symmetric form.`|",
    "created_at": "2014-05-07T03:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244767",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[18fd094](http://git.sagemath.org/sage.git/commit/?id=18fd0946874e2e54a75cdcd761311dea3f2810a4)|`Fixed affine weight lattice symmetric form.`|



---

archive/issue_comments_244768.json:
```json
{
    "body": "Changing reviewer from \"bump\" to \"Dan Bump\"",
    "created_at": "2014-05-07T04:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244768",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "bump" to "Dan Bump"



---

archive/issue_comments_244769.json:
```json
{
    "body": "<a id='comment:14'></a>\nHey Dan,\n\nI've fixed it. The (first `r`) columns are given by `P.simple_roots()`, and it's the inverse matrix should have the Kac labels (which it does).",
    "created_at": "2014-05-07T04:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244769",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
Hey Dan,

I've fixed it. The (first `r`) columns are given by `P.simple_roots()`, and it's the inverse matrix should have the Kac labels (which it does).



---

archive/issue_comments_244770.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-07T04:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244770",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_244771.json:
```json
{
    "body": "<a id='comment:15'></a>\nGlad you got it fixed. I'll start looking at the patch.",
    "created_at": "2014-05-08T20:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244771",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:15'></a>
Glad you got it fixed. I'll start looking at the patch.



---

archive/issue_comments_244772.json:
```json
{
    "body": "<a id='comment:16'></a>\nTravis: do you mind updating the description of the ticket to give an overview of the changes?\n\nThanks!",
    "created_at": "2014-05-08T21:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244772",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:16'></a>
Travis: do you mind updating the description of the ticket to give an overview of the changes?

Thanks!



---

archive/issue_comments_244773.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n-Implement various things for affine root systems and other commonly used operations and things (the `( | )` product for example).\n+Implement various things for affine root systems:\n+\n+- The symmetric form `( | )`.\n+- Methods for checking the short/long/imaginary roots.\n+- Modelling the positive roots roots in affine types.\n``````\n",
    "created_at": "2014-05-09T01:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244773",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
-Implement various things for affine root systems and other commonly used operations and things (the `( | )` product for example).
+Implement various things for affine root systems:
+
+- The symmetric form `( | )`.
+- Methods for checking the short/long/imaginary roots.
+- Modelling the positive roots roots in affine types.
``````




---

archive/issue_comments_244774.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n - The symmetric form `( | )`.\n - Methods for checking the short/long/imaginary roots.\n - Modelling the positive roots roots in affine types.\n+- Basic untwisted types (so type A<sub>2n</sub><sup>(2)</sup> would give A<sub>2n</sub>).\n+- (Dual) Coxeter numbers for finite types.\n``````\n",
    "created_at": "2014-05-09T01:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244774",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 - The symmetric form `( | )`.
 - Methods for checking the short/long/imaginary roots.
 - Modelling the positive roots roots in affine types.
+- Basic untwisted types (so type A<sub>2n</sub><sup>(2)</sup> would give A<sub>2n</sub>).
+- (Dual) Coxeter numbers for finite types.
``````




---

archive/issue_comments_244775.json:
```json
{
    "body": "<a id='comment:19'></a>\nThe scalar product that was implemented is fundamental in Kac' book and for that alone this is an important patch.\n\nI got one doctest failure in weight_space.py:\n\n```\nsage -t weight_space.py\n**********************************************************************\nFile \"weight_space.py\", line 131, in sage.combinat.root_system.weight_space.WeightSpace\nFailed example:\n    for ct in CartanType.samples(crystallographic=True)+[CartanType([\"A\",2],[\"C\",5,1])]:\n          TestSuite(ct.root_system().weight_lattice()).run()\n          TestSuite(ct.root_system().weight_space()).run()\nExpected nothing\nGot:\n    Failure in _test_not_implemented_methods:\n    Traceback (most recent call last):\n    [snip]\n    AssertionError: Not implemented method: _symmetric_form_matrix\n```\nIn `cartan_type.py` you could delete the sentence on line 108 since you do implement Coxeter numbers!\n\nFor the positive roots, imaginary roots, etc. The user might like to know how to get a list of them. For *untwisted* types you can do this.\n\n```\nsage: PR=RootSystem(['A',3,1]).root_lattice().positive_real_roots()\nsage: [PR.unrank(i) for i in [0..4]]\n[alpha[1], alpha[2], alpha[3], alpha[1] + alpha[2], alpha[2] + alpha[3]]\n```\n\nIs there a more obvious way? And should something like this be in the doctest?\n\nIn the method basic_imaginary_roots the docstring still refers to simple imaginary roots (twice).\n\nIt would be good if there were pointers to Kac' book in some places. For example, in symmetric_form, the doc could have a pointer to Chapter 6. The Coxeter number method could have a pointer to Bourbaki, Lie Groups and Lie Algebras V.6.1.",
    "created_at": "2014-05-09T20:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244775",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:19'></a>
The scalar product that was implemented is fundamental in Kac' book and for that alone this is an important patch.

I got one doctest failure in weight_space.py:

```
sage -t weight_space.py
**********************************************************************
File "weight_space.py", line 131, in sage.combinat.root_system.weight_space.WeightSpace
Failed example:
    for ct in CartanType.samples(crystallographic=True)+[CartanType(["A",2],["C",5,1])]:
          TestSuite(ct.root_system().weight_lattice()).run()
          TestSuite(ct.root_system().weight_space()).run()
Expected nothing
Got:
    Failure in _test_not_implemented_methods:
    Traceback (most recent call last):
    [snip]
    AssertionError: Not implemented method: _symmetric_form_matrix
```
In `cartan_type.py` you could delete the sentence on line 108 since you do implement Coxeter numbers!

For the positive roots, imaginary roots, etc. The user might like to know how to get a list of them. For *untwisted* types you can do this.

```
sage: PR=RootSystem(['A',3,1]).root_lattice().positive_real_roots()
sage: [PR.unrank(i) for i in [0..4]]
[alpha[1], alpha[2], alpha[3], alpha[1] + alpha[2], alpha[2] + alpha[3]]
```

Is there a more obvious way? And should something like this be in the doctest?

In the method basic_imaginary_roots the docstring still refers to simple imaginary roots (twice).

It would be good if there were pointers to Kac' book in some places. For example, in symmetric_form, the doc could have a pointer to Chapter 6. The Coxeter number method could have a pointer to Bourbaki, Lie Groups and Lie Algebras V.6.1.



---

archive/issue_comments_244776.json:
```json
{
    "body": "<a id='comment:20'></a>\nI've created #16320 to make it easier to access elements in an infinite list (but I have not merged it in so it's not a dependency). I'm not sure if at the end of the day we want to keep using `DisjointUnionEnumeratedSets` and possibly adding better general support for those or making our own special subclasses and having them be better targeted for the roots here. Nicolas, do you have any thoughts/comments on this?\n\nIMO this can be left for a follow-up ticket unless there is a simple and clear better solution. Although if #16320 is a good way to go, I'll merge that in and update the doctests accordingly.",
    "created_at": "2014-05-10T02:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244776",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
I've created #16320 to make it easier to access elements in an infinite list (but I have not merged it in so it's not a dependency). I'm not sure if at the end of the day we want to keep using `DisjointUnionEnumeratedSets` and possibly adding better general support for those or making our own special subclasses and having them be better targeted for the roots here. Nicolas, do you have any thoughts/comments on this?

IMO this can be left for a follow-up ticket unless there is a simple and clear better solution. Although if #16320 is a good way to go, I'll merge that in and update the doctests accordingly.



---

archive/issue_comments_244777.json:
```json
{
    "body": "Changing commit from \"18fd0946874e2e54a75cdcd761311dea3f2810a4\" to \"760194b3d8ce7cb38574208255e65b4b8ef62a85\"",
    "created_at": "2014-05-10T02:33:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244777",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "18fd0946874e2e54a75cdcd761311dea3f2810a4" to "760194b3d8ce7cb38574208255e65b4b8ef62a85"



---

archive/issue_comments_244778.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[cb88df7](http://git.sagemath.org/sage.git/commit/?id=cb88df7106ac6fa93fe33af69f953dac731cc710)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[760194b](http://git.sagemath.org/sage.git/commit/?id=760194b3d8ce7cb38574208255e65b4b8ef62a85)|`More changes and fixes.`|",
    "created_at": "2014-05-10T02:33:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[cb88df7](http://git.sagemath.org/sage.git/commit/?id=cb88df7106ac6fa93fe33af69f953dac731cc710)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[760194b](http://git.sagemath.org/sage.git/commit/?id=760194b3d8ce7cb38574208255e65b4b8ef62a85)|`More changes and fixes.`|



---

archive/issue_comments_244779.json:
```json
{
    "body": "<a id='comment:22'></a>\nStill two doctest failures in `root_lattice_realizations.py`.\n\n```\nsage -t root_lattice_realizations.py\n**********************************************************************\nFile \"root_lattice_realizations.py\", line 634, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.positive_real_roots\nFailed example:\n    PRR = L.positive_real_roots(); PRR\nExpected nothing\nGot:\n    Positive real roots of type ['A', 3, 1]\n**********************************************************************\nFile \"root_lattice_realizations.py\", line 635, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.positive_real_roots\nFailed example:\n    [PRR.unrank(i) for i in range(10)]\nExpected:\n    Positive real roots of type ['A', 3, 1]\n    [alpha[1],\n\n   -snip-\n```",
    "created_at": "2014-05-10T15:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244779",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:22'></a>
Still two doctest failures in `root_lattice_realizations.py`.

```
sage -t root_lattice_realizations.py
**********************************************************************
File "root_lattice_realizations.py", line 634, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.positive_real_roots
Failed example:
    PRR = L.positive_real_roots(); PRR
Expected nothing
Got:
    Positive real roots of type ['A', 3, 1]
**********************************************************************
File "root_lattice_realizations.py", line 635, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.positive_real_roots
Failed example:
    [PRR.unrank(i) for i in range(10)]
Expected:
    Positive real roots of type ['A', 3, 1]
    [alpha[1],

   -snip-
```



---

archive/issue_comments_244780.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[eab1afe](http://git.sagemath.org/sage.git/commit/?id=eab1afea3f8f66c65802d2a7362928d65b47ea77)|`Fixed doctest.`|",
    "created_at": "2014-05-10T15:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244780",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[eab1afe](http://git.sagemath.org/sage.git/commit/?id=eab1afea3f8f66c65802d2a7362928d65b47ea77)|`Fixed doctest.`|



---

archive/issue_comments_244781.json:
```json
{
    "body": "Changing commit from \"760194b3d8ce7cb38574208255e65b4b8ef62a85\" to \"eab1afea3f8f66c65802d2a7362928d65b47ea77\"",
    "created_at": "2014-05-10T15:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244781",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "760194b3d8ce7cb38574208255e65b4b8ef62a85" to "eab1afea3f8f66c65802d2a7362928d65b47ea77"



---

archive/issue_comments_244782.json:
```json
{
    "body": "<a id='comment:24'></a>\nWhoops, forgot to commit.",
    "created_at": "2014-05-10T15:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244782",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
Whoops, forgot to commit.



---

archive/issue_comments_244783.json:
```json
{
    "body": "<a id='comment:25'></a>\nAll tests passed!\n\nThe following breaks:\n\n[RootSystem(['A',2,2]).root_lattice().positive_roots().unrank(x) for x in [0..10]]\n\nIt works for untwisted types. Is this a limitation of the patch or an unexpected failure?\n\nIf it is a limitation of the patch maybe it should be noted in the patch description. Also it\nmight be better to fail with a not implemented error than with:\n\n```\nTypeError: unsupported operand type(s) for //: 'RootSpace_with_category.element_class' and 'int'\n```",
    "created_at": "2014-05-10T16:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244783",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:25'></a>
All tests passed!

The following breaks:

[RootSystem(['A',2,2]).root_lattice().positive_roots().unrank(x) for x in [0..10]]

It works for untwisted types. Is this a limitation of the patch or an unexpected failure?

If it is a limitation of the patch maybe it should be noted in the patch description. Also it
might be better to fail with a not implemented error than with:

```
TypeError: unsupported operand type(s) for //: 'RootSpace_with_category.element_class' and 'int'
```



---

archive/issue_comments_244784.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[66f5674](http://git.sagemath.org/sage.git/commit/?id=66f5674bf4281706f71f01202091ed02e1ee8bcc)|`Fixed type BC positive roots.`|",
    "created_at": "2014-05-10T16:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244784",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[66f5674](http://git.sagemath.org/sage.git/commit/?id=66f5674bf4281706f71f01202091ed02e1ee8bcc)|`Fixed type BC positive roots.`|



---

archive/issue_comments_244785.json:
```json
{
    "body": "Changing commit from \"eab1afea3f8f66c65802d2a7362928d65b47ea77\" to \"66f5674bf4281706f71f01202091ed02e1ee8bcc\"",
    "created_at": "2014-05-10T16:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244785",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eab1afea3f8f66c65802d2a7362928d65b47ea77" to "66f5674bf4281706f71f01202091ed02e1ee8bcc"



---

archive/issue_comments_244786.json:
```json
{
    "body": "<a id='comment:27'></a>\nThat was an error. Fixed now.",
    "created_at": "2014-05-10T16:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244786",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
That was an error. Fixed now.



---

archive/issue_comments_244787.json:
```json
{
    "body": "<a id='comment:28'></a>\nWhat about this?\n\n```\nsage: RootSystem(['D',4,2]).root_lattice().positive_roots()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-11-ea364fc7aada> in <module>()\n----> 1 RootSystem(['D',Integer(4),Integer(2)]).root_lattice().positive_roots()\n\n-snip -\n\nAttributeError: 'NoneType' object has no attribute 'dual'\n```\n\nBTW Sage reports this root system as Root lattice of the Root system of type ['C', 3, 1]^*\n\nIf I have my facts straight Macdonald introduced a classification of affine root systems in his\npaper \"Affine root systems and the Dedekind eta function\" Inventiones 1972 but\nKac didn't follow Macdonald. He introduced his own classification. So we are\nentering root systems in Kac' notation and they are getting converted automatically\nto Macdonald's notation. Of course that policy was not introduced by this patch but\nI mention that I've personally found it a little confusing.",
    "created_at": "2014-05-10T19:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244787",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:28'></a>
What about this?

```
sage: RootSystem(['D',4,2]).root_lattice().positive_roots()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-11-ea364fc7aada> in <module>()
----> 1 RootSystem(['D',Integer(4),Integer(2)]).root_lattice().positive_roots()

-snip -

AttributeError: 'NoneType' object has no attribute 'dual'
```

BTW Sage reports this root system as Root lattice of the Root system of type ['C', 3, 1]^*

If I have my facts straight Macdonald introduced a classification of affine root systems in his
paper "Affine root systems and the Dedekind eta function" Inventiones 1972 but
Kac didn't follow Macdonald. He introduced his own classification. So we are
entering root systems in Kac' notation and they are getting converted automatically
to Macdonald's notation. Of course that policy was not introduced by this patch but
I mention that I've personally found it a little confusing.



---

archive/issue_comments_244788.json:
```json
{
    "body": "<a id='comment:29'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[e17ce53](http://git.sagemath.org/sage.git/commit/?id=e17ce53acf06514cd57c67b1a5d66a151eee1347)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[7e83910](http://git.sagemath.org/sage.git/commit/?id=7e8391003096463970d0ee0254d2043930d047d0)|`Fixes for other twisted root systems.`|",
    "created_at": "2014-05-10T22:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244788",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[e17ce53](http://git.sagemath.org/sage.git/commit/?id=e17ce53acf06514cd57c67b1a5d66a151eee1347)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[7e83910](http://git.sagemath.org/sage.git/commit/?id=7e8391003096463970d0ee0254d2043930d047d0)|`Fixes for other twisted root systems.`|



---

archive/issue_comments_244789.json:
```json
{
    "body": "Changing commit from \"66f5674bf4281706f71f01202091ed02e1ee8bcc\" to \"7e8391003096463970d0ee0254d2043930d047d0\"",
    "created_at": "2014-05-10T22:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244789",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "66f5674bf4281706f71f01202091ed02e1ee8bcc" to "7e8391003096463970d0ee0254d2043930d047d0"



---

archive/issue_comments_244790.json:
```json
{
    "body": "<a id='comment:30'></a>\nAnother (stupid) error on my part. Fixed.\n\nAlso if you want to display in Kac's notation, you can do the following (it's somewhat hidden at the bottom of `CatanType?`):\n\n```\nsage: CartanType.global_options(notation='Kac')\nsage: CartanType(['D',4,2])\n['D', 4, 2]\n```",
    "created_at": "2014-05-10T22:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244790",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'></a>
Another (stupid) error on my part. Fixed.

Also if you want to display in Kac's notation, you can do the following (it's somewhat hidden at the bottom of `CatanType?`):

```
sage: CartanType.global_options(notation='Kac')
sage: CartanType(['D',4,2])
['D', 4, 2]
```



---

archive/issue_comments_244791.json:
```json
{
    "body": "<a id='comment:31'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[c91754d](http://git.sagemath.org/sage.git/commit/?id=c91754d5ad584b01fe32150f6f3dbb1661e99940)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|\n|[82c6257](http://git.sagemath.org/sage.git/commit/?id=82c6257bbff83fd5a19f0d602ed93f304660b0e0)|`Fixed doctest.`|\n|[1ffb4bb](http://git.sagemath.org/sage.git/commit/?id=1ffb4bb5a6cde5edc337357f463a6efa1c91d068)|`Fixed doctest and for the weight lattice.`|",
    "created_at": "2014-05-21T00:26:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244791",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[c91754d](http://git.sagemath.org/sage.git/commit/?id=c91754d5ad584b01fe32150f6f3dbb1661e99940)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|
|[82c6257](http://git.sagemath.org/sage.git/commit/?id=82c6257bbff83fd5a19f0d602ed93f304660b0e0)|`Fixed doctest.`|
|[1ffb4bb](http://git.sagemath.org/sage.git/commit/?id=1ffb4bb5a6cde5edc337357f463a6efa1c91d068)|`Fixed doctest and for the weight lattice.`|



---

archive/issue_comments_244792.json:
```json
{
    "body": "Changing commit from \"7e8391003096463970d0ee0254d2043930d047d0\" to \"1ffb4bb5a6cde5edc337357f463a6efa1c91d068\"",
    "created_at": "2014-05-21T00:26:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244792",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7e8391003096463970d0ee0254d2043930d047d0" to "1ffb4bb5a6cde5edc337357f463a6efa1c91d068"



---

archive/issue_comments_244793.json:
```json
{
    "body": "<a id='comment:32'></a>\nThe following returns an error:\n\n```\nsage: sr=RootSystem(['A',6,2]).weight_lattice().simple_roots()\nsage: sr[0].symmetric_form(sr[1])\n...\nTypeError: no conversion of this rational to integer\n```\n\nThere is no error if we use the root_lattice.",
    "created_at": "2014-05-23T18:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244793",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:32'></a>
The following returns an error:

```
sage: sr=RootSystem(['A',6,2]).weight_lattice().simple_roots()
sage: sr[0].symmetric_form(sr[1])
...
TypeError: no conversion of this rational to integer
```

There is no error if we use the root_lattice.



---

archive/issue_comments_244794.json:
```json
{
    "body": "Changing commit from \"1ffb4bb5a6cde5edc337357f463a6efa1c91d068\" to \"bccea25662638e48c34e91e3051f47a821613f90\"",
    "created_at": "2014-05-26T02:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244794",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1ffb4bb5a6cde5edc337357f463a6efa1c91d068" to "bccea25662638e48c34e91e3051f47a821613f90"



---

archive/issue_comments_244795.json:
```json
{
    "body": "<a id='comment:33'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|\n|[bccea25](http://git.sagemath.org/sage.git/commit/?id=bccea25662638e48c34e91e3051f47a821613f90)|`Worked around a minor coercion issue and added doctests.`|",
    "created_at": "2014-05-26T02:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244795",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
|[bccea25](http://git.sagemath.org/sage.git/commit/?id=bccea25662638e48c34e91e3051f47a821613f90)|`Worked around a minor coercion issue and added doctests.`|



---

archive/issue_comments_244796.json:
```json
{
    "body": "<a id='comment:34'></a>\nHey Dan,\n\nI've fixed the issue; the matrix `stack()` command doesn't coerce (well, it's more of I've worked around it and is now #16399). I've added some more doctests about this. I'll merge in the latest beta later tonight.",
    "created_at": "2014-05-26T03:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244796",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'></a>
Hey Dan,

I've fixed the issue; the matrix `stack()` command doesn't coerce (well, it's more of I've worked around it and is now #16399). I've added some more doctests about this. I'll merge in the latest beta later tonight.



---

archive/issue_comments_244797.json:
```json
{
    "body": "Changing commit from \"bccea25662638e48c34e91e3051f47a821613f90\" to \"f4cee52a23d5d1c0092100981c46c04dd59dbc37\"",
    "created_at": "2014-05-26T04:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244797",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bccea25662638e48c34e91e3051f47a821613f90" to "f4cee52a23d5d1c0092100981c46c04dd59dbc37"



---

archive/issue_comments_244798.json:
```json
{
    "body": "<a id='comment:35'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[f4cee52](http://git.sagemath.org/sage.git/commit/?id=f4cee52a23d5d1c0092100981c46c04dd59dbc37)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|",
    "created_at": "2014-05-26T04:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[f4cee52](http://git.sagemath.org/sage.git/commit/?id=f4cee52a23d5d1c0092100981c46c04dd59dbc37)|`Merge branch 'develop' into public/combinat/root_systems/improvements-15384`|



---

archive/issue_comments_244799.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-29T02:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244799",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_244800.json:
```json
{
    "body": "Changing reviewer from \"Dan Bump\" to \"Daniel Bump\"",
    "created_at": "2014-05-29T02:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244800",
    "user": "https://github.com/dwbump"
}
```

Changing reviewer from "Dan Bump" to "Daniel Bump"



---

archive/issue_comments_244801.json:
```json
{
    "body": "<a id='comment:36'></a>\nThis patch implements some important things from Chapter 6 of Kac' book for both twisted and untwisted affine Lie algebras, as methods of the root_lattice_realization or the weight_lattice_realization. These include a method of enumerating the positive roots (both real and imaginary), the invariant bilinear form, and a few other things. I tested with Kac' book in front of me, and all the problems I found have been addressed.",
    "created_at": "2014-05-29T02:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244801",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:36'></a>
This patch implements some important things from Chapter 6 of Kac' book for both twisted and untwisted affine Lie algebras, as methods of the root_lattice_realization or the weight_lattice_realization. These include a method of enumerating the positive roots (both real and imaginary), the invariant bilinear form, and a few other things. I tested with Kac' book in front of me, and all the problems I found have been addressed.



---

archive/issue_comments_244802.json:
```json
{
    "body": "<a id='comment:37'></a>\nThank you for doing the review Dan.",
    "created_at": "2014-05-29T05:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244802",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:37'></a>
Thank you for doing the review Dan.



---

archive/issue_comments_244803.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-29T14:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244803",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_244804.json:
```json
{
    "body": "<a id='comment:38'></a>\nDoctests fail",
    "created_at": "2014-05-29T14:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244804",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>
Doctests fail



---

archive/issue_comments_244805.json:
```json
{
    "body": "Changing commit from \"f4cee52a23d5d1c0092100981c46c04dd59dbc37\" to \"72859401196f2a2893043c555146ce56102acabf\"",
    "created_at": "2014-05-29T16:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f4cee52a23d5d1c0092100981c46c04dd59dbc37" to "72859401196f2a2893043c555146ce56102acabf"



---

archive/issue_comments_244806.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[7285940](http://git.sagemath.org/sage.git/commit/?id=72859401196f2a2893043c555146ce56102acabf)|`Fixed bad merging in simple_roots_tilde.`|",
    "created_at": "2014-05-29T16:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[7285940](http://git.sagemath.org/sage.git/commit/?id=72859401196f2a2893043c555146ce56102acabf)|`Fixed bad merging in simple_roots_tilde.`|



---

archive/issue_comments_244807.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-05-29T16:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244807",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_244808.json:
```json
{
    "body": "<a id='comment:40'></a>\nBad merging on my part; ended up overwriting `simple_roots_tilde()`.",
    "created_at": "2014-05-29T16:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244808",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:40'></a>
Bad merging on my part; ended up overwriting `simple_roots_tilde()`.



---

archive/issue_events_044710.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-30T11:35:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15384#event-44710"
}
```



---

archive/issue_comments_244809.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-30T11:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244809",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_244810.json:
```json
{
    "body": "Changing branch from \"public/combinat/root_systems/improvements-15384\" to \"72859401196f2a2893043c555146ce56102acabf\"",
    "created_at": "2014-05-30T11:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15384#issuecomment-244810",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/combinat/root_systems/improvements-15384" to "72859401196f2a2893043c555146ce56102acabf"
