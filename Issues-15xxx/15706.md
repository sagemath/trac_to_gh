# Issue 15706: Graph built from their edges are simple by default

archive/issues_015469.json:
```json
{
    "assignees": [],
    "body": "The `Graph/DiGraph` constructor are scary to look at, and waste a lot of computations in order to guess whether the user wants loops or multiple edges. In order to reduce this number of tests and make those functions more efficient, we can change the default and force the user to specify explicitly what they want to obtain.\n\nNote that this is not a bad idea on its own, for graphs which allow multiple edges/loops behave differently with respect to the `add_edge` function, and by specifying this explicitly the user is forced to be aware of what is going to happen next.\n\nAfter many small patches like that, it may become possible to simplify a lot of things in those huge constructors. But first, deprecation for one year `T_T`\n\nNathann\n\n(example of why this could be useful https://groups.google.com/d/topic/sage-support/4ffCepWrjDc/discussion)\n\nDepends on #15704\n\nCC:  @sagetrac-azi @videlec @rbeezer @jasongrout @dimpase @jm58660\n\nBranch/Commit: **[`7c69f25`](https://github.com/sagemath/sagetrac-mirror/commit/7c69f250922b0373de62e16b16baaab7f8b2fd32)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Nathann Cohen**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15706_\n\n",
    "closed_at": "2014-12-12T12:29:52Z",
    "created_at": "2014-01-22T10:52:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Graph built from their edges are simple by default",
    "type": "issue",
    "updated_at": "2014-12-12T12:29:52Z",
    "url": "https://github.com/sagemath/sage/issues/15706",
    "user": "https://github.com/nathanncohen"
}
```
The `Graph/DiGraph` constructor are scary to look at, and waste a lot of computations in order to guess whether the user wants loops or multiple edges. In order to reduce this number of tests and make those functions more efficient, we can change the default and force the user to specify explicitly what they want to obtain.

Note that this is not a bad idea on its own, for graphs which allow multiple edges/loops behave differently with respect to the `add_edge` function, and by specifying this explicitly the user is forced to be aware of what is going to happen next.

After many small patches like that, it may become possible to simplify a lot of things in those huge constructors. But first, deprecation for one year `T_T`

Nathann

(example of why this could be useful https://groups.google.com/d/topic/sage-support/4ffCepWrjDc/discussion)

Depends on #15704

CC:  @sagetrac-azi @videlec @rbeezer @jasongrout @dimpase @jm58660

Branch/Commit: **[`7c69f25`](https://github.com/sagemath/sagetrac-mirror/commit/7c69f250922b0373de62e16b16baaab7f8b2fd32)**

Reviewer: **Dima Pasechnik**

Author: **Nathann Cohen**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/15706_





---

archive/issue_events_222088.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-01-22T10:52:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222088"
}
```



---

archive/issue_events_222089.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-01-22T10:52:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222089"
}
```



---

archive/issue_events_222090.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-01-22T10:52:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222090"
}
```



---

archive/issue_events_222091.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-01-22T10:52:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222091"
}
```



---

archive/issue_events_222092.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-01-22T11:16:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222092"
}
```



---

archive/issue_comments_197782.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The Graph/DiGraph constructor are scary to look at, and waste a lot of computations in order to guess whether the user wants loops or multiple edges. In order to reduce this number of tests and make those functions more efficient, we can change the default and force the user to specify explicitly what they want to obtain.\n+The `Graph/DiGraph` constructor are scary to look at, and waste a lot of computations in order to guess whether the user wants loops or multiple edges. In order to reduce this number of tests and make those functions more efficient, we can change the default and force the user to specify explicitly what they want to obtain.\n \n Note that this is not a bad idea on its own, for graphs which allow multiple edges/loops behave differently with respect to the `add_edge` function, and by specifying this explicitly the user is forced to be aware of what is going to happen next.\n \n``````\n",
    "created_at": "2014-01-22T11:16:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197782",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The Graph/DiGraph constructor are scary to look at, and waste a lot of computations in order to guess whether the user wants loops or multiple edges. In order to reduce this number of tests and make those functions more efficient, we can change the default and force the user to specify explicitly what they want to obtain.
+The `Graph/DiGraph` constructor are scary to look at, and waste a lot of computations in order to guess whether the user wants loops or multiple edges. In order to reduce this number of tests and make those functions more efficient, we can change the default and force the user to specify explicitly what they want to obtain.
 
 Note that this is not a bad idea on its own, for graphs which allow multiple edges/loops behave differently with respect to the `add_edge` function, and by specifying this explicitly the user is forced to be aware of what is going to happen next.
 
``````




---

archive/issue_comments_197783.json:
```json
{
    "body": "Branch: **[u/ncohen/15706](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15706)**",
    "created_at": "2014-01-22T11:16:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197783",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/15706](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15706)**



---

archive/issue_comments_197784.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636\"><code>ce049ba</code></a></td><td><code>trac 15704: Stupid waste of time in graphs 1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f\"><code>037c189</code></a></td><td><code>trac #15704: Adding a doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6\"><code>499e287</code></a></td><td><code>trac #15704: Changing add_edge to _backend.add_edge in the (Di)Graph constructor</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdbf92b364b0fb0a69307abaf792be21d8403ef1\"><code>fdbf92b</code></a></td><td><code>trac #15706: Graphs built from their edges will be simple by default</code></td></tr></table>\n",
    "created_at": "2014-01-22T11:47:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197784",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce049ba02d81d3208fb33ac54579d6690468a636"><code>ce049ba</code></a></td><td><code>trac 15704: Stupid waste of time in graphs 1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/037c189e6cb6eeadfd18e5433a860e2b8c7a784f"><code>037c189</code></a></td><td><code>trac #15704: Adding a doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/499e287061a2b9ba8a686dc3ec0ab6bb6ed177a6"><code>499e287</code></a></td><td><code>trac #15704: Changing add_edge to _backend.add_edge in the (Di)Graph constructor</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdbf92b364b0fb0a69307abaf792be21d8403ef1"><code>fdbf92b</code></a></td><td><code>trac #15706: Graphs built from their edges will be simple by default</code></td></tr></table>




---

archive/issue_comments_197785.json:
```json
{
    "body": "Commit: **[`fdbf92b`](https://github.com/sagemath/sagetrac-mirror/commit/fdbf92b364b0fb0a69307abaf792be21d8403ef1)**",
    "created_at": "2014-01-22T11:47:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197785",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`fdbf92b`](https://github.com/sagemath/sagetrac-mirror/commit/fdbf92b364b0fb0a69307abaf792be21d8403ef1)**



---

archive/issue_comments_197786.json:
```json
{
    "body": "Dependencies: **15704**",
    "created_at": "2014-01-22T11:47:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197786",
    "user": "https://github.com/nathanncohen"
}
```

Dependencies: **15704**



---

archive/issue_events_222093.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222093"
}
```



---

archive/issue_events_222094.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222094"
}
```



---

archive/issue_comments_197787.json:
```json
{
    "body": "Changed dependencies from **15704** to **#15704**",
    "created_at": "2014-03-11T20:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197787",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **15704** to **#15704**



---

archive/issue_comments_197788.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n After many small patches like that, it may become possible to simplify a lot of things in those huge constructors. But first, deprecation for one year `T_T`\n \n Nathann\n+\n+(example of why this could be useful https://groups.google.com/d/topic/sage-support/4ffCepWrjDc/discussion)\n``````\n",
    "created_at": "2014-04-06T07:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197788",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 After many small patches like that, it may become possible to simplify a lot of things in those huge constructors. But first, deprecation for one year `T_T`
 
 Nathann
+
+(example of why this could be useful https://groups.google.com/d/topic/sage-support/4ffCepWrjDc/discussion)
``````




---

archive/issue_events_222095.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222095"
}
```



---

archive/issue_events_222096.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222096"
}
```



---

archive/issue_comments_197789.json:
```json
{
    "body": "Work Issues: **merge conflict**",
    "created_at": "2014-05-18T16:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197789",
    "user": "https://github.com/rwst"
}
```

Work Issues: **merge conflict**



---

archive/issue_comments_197790.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a049551c0d1c8d95cc4301d82f70f4f50bd8fc51\"><code>a049551</code></a></td><td><code>trac #15706: Merged with 6.3.beta1</code></td></tr></table>\n",
    "created_at": "2014-05-18T16:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197790",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a049551c0d1c8d95cc4301d82f70f4f50bd8fc51"><code>a049551</code></a></td><td><code>trac #15706: Merged with 6.3.beta1</code></td></tr></table>




---

archive/issue_comments_197791.json:
```json
{
    "body": "Changed commit from **[`fdbf92b`](https://github.com/sagemath/sagetrac-mirror/commit/fdbf92b364b0fb0a69307abaf792be21d8403ef1)** to **[`a049551`](https://github.com/sagemath/sagetrac-mirror/commit/a049551c0d1c8d95cc4301d82f70f4f50bd8fc51)**",
    "created_at": "2014-05-18T16:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197791",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fdbf92b`](https://github.com/sagemath/sagetrac-mirror/commit/fdbf92b364b0fb0a69307abaf792be21d8403ef1)** to **[`a049551`](https://github.com/sagemath/sagetrac-mirror/commit/a049551c0d1c8d95cc4301d82f70f4f50bd8fc51)**



---

archive/issue_comments_197792.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nFixed.\n\nNathann",
    "created_at": "2014-05-18T16:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197792",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Fixed.

Nathann



---

archive/issue_comments_197793.json:
```json
{
    "body": "Changed work issues from **merge conflict** to none",
    "created_at": "2014-05-18T16:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197793",
    "user": "https://github.com/nathanncohen"
}
```

Changed work issues from **merge conflict** to none



---

archive/issue_events_222097.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-19T05:59:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222097"
}
```



---

archive/issue_events_222098.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-19T05:59:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222098"
}
```



---

archive/issue_comments_197794.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n\n```\nsage -t --long src/sage/combinat/finite_state_machine.py  # 2 doctests failed\nsage -t --long src/sage/quivers/path_semigroup.py  # 1 doctest failed\n```",
    "created_at": "2014-05-19T05:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197794",
    "user": "https://github.com/rwst"
}
```

<div id="comment:12" align="right">comment:12</div>


```
sage -t --long src/sage/combinat/finite_state_machine.py  # 2 doctests failed
sage -t --long src/sage/quivers/path_semigroup.py  # 1 doctest failed
```



---

archive/issue_comments_197795.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6087ffcf2370bdfe45a1162c7d7106c9829ad5c\"><code>f6087ff</code></a></td><td><code>trac #15706: Broken doctests</code></td></tr></table>\n",
    "created_at": "2014-05-19T08:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197795",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6087ffcf2370bdfe45a1162c7d7106c9829ad5c"><code>f6087ff</code></a></td><td><code>trac #15706: Broken doctests</code></td></tr></table>




---

archive/issue_comments_197796.json:
```json
{
    "body": "Changed commit from **[`a049551`](https://github.com/sagemath/sagetrac-mirror/commit/a049551c0d1c8d95cc4301d82f70f4f50bd8fc51)** to **[`f6087ff`](https://github.com/sagemath/sagetrac-mirror/commit/f6087ffcf2370bdfe45a1162c7d7106c9829ad5c)**",
    "created_at": "2014-05-19T08:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197796",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a049551`](https://github.com/sagemath/sagetrac-mirror/commit/a049551c0d1c8d95cc4301d82f70f4f50bd8fc51)** to **[`f6087ff`](https://github.com/sagemath/sagetrac-mirror/commit/f6087ffcf2370bdfe45a1162c7d7106c9829ad5c)**



---

archive/issue_events_222099.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-19T08:51:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222099"
}
```



---

archive/issue_events_222100.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-19T08:51:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222100"
}
```



---

archive/issue_events_222101.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222101"
}
```



---

archive/issue_events_222102.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222102"
}
```



---

archive/issue_comments_197797.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nInteresting idea - that graphs aren't simple by default bit me recently, had to use `to_simple()` everywhere... but I have no particular opinion on what the *best* default is.",
    "created_at": "2014-11-13T19:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197797",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

Interesting idea - that graphs aren't simple by default bit me recently, had to use `to_simple()` everywhere... but I have no particular opinion on what the *best* default is.



---

archive/issue_comments_197798.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWhat I would like to do is reach a state where people have to say explicitly what they expect. Right now it is automatically detected and this had a real cost in runtime, which is actually pure waste when you only create simple graphs.\n\nWhat this branch does is prepare deprecations so that, one year from now, I am able to rewrite the code correctly without this loss of time. So if you have some time to review it ?... (and discuss whatever is needed of course)\n\nNathann",
    "created_at": "2014-11-14T04:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197798",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

What I would like to do is reach a state where people have to say explicitly what they expect. Right now it is automatically detected and this had a real cost in runtime, which is actually pure waste when you only create simple graphs.

What this branch does is prepare deprecations so that, one year from now, I am able to rewrite the code correctly without this loss of time. So if you have some time to review it ?... (and discuss whatever is needed of course)

Nathann



---

archive/issue_comments_197799.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWell, like I said, I'm not sure I want to change that behavior or not.  It seems like the kind of thing that should be discussed at some length.  I do agree there should be a flag to avoid the runtime cost, that seems clear - but again, I am agnostic on the *default*.\n\nAs a constructive comment, maybe one ticket could be to have a flag (how that is named, I don't know) and then this one for making defaults, assuming there is something approaching consensus.",
    "created_at": "2014-11-14T13:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197799",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:18" align="right">comment:18</div>

Well, like I said, I'm not sure I want to change that behavior or not.  It seems like the kind of thing that should be discussed at some length.  I do agree there should be a flag to avoid the runtime cost, that seems clear - but again, I am agnostic on the *default*.

As a constructive comment, maybe one ticket could be to have a flag (how that is named, I don't know) and then this one for making defaults, assuming there is something approaching consensus.



---

archive/issue_comments_197800.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nYo !\n\n> Well, like I said, I'm not sure I want to change that behavior or not.  It seems like the kind of thing that should be discussed at some length.\n\nWell... I would be glad to discuss it at length with anybody but this ticket has been here for 10 months already....\n\n> I do agree there should be a flag to avoid the runtime cost, that seems clear - but again, I am agnostic on the *default*.\n\nWell... Again, all graph books usually begin by saying that all graphs considered are simple, i.e. no loops nor multiple edges. There is such a thing as \"multigraph\", too. And I really don't like this behaviour:\n\n```\nsage: G=Graph([(1,2),(1,2),(1,1)]); G.edges()\n[(1, 1, None), (1, 2, None), (1, 2, None)]\nsage: G=Graph(); G.add_edge(1,2); G.add_edge(1,2); G.add_edge(1,1); G.edges()\n[(1, 2, None)]\n```\n\nSomehow the current behaviour of `add_edge` depends on non-explicit information, and considers simple graphs as the default. I would feel better if everybody got used to state clearly what they want to work with and dealt with the consequences. A guy who wants to build multigraphs and initializes them from a list of edges will experience seriously inconsistent behaviour depending on whether the initial information contains multiple edges and/or loops !\n\n> As a constructive comment, maybe one ticket could be to have a flag (how that is named, I don't know) and then this one for making defaults, assuming there is something approaching consensus.\n\nHmmmmm.... Well, what do you expect consensus to look like when it seems after 10 months that only one person cares ? `:-P`\n\nNathann",
    "created_at": "2014-11-15T18:04:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197800",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

Yo !

> Well, like I said, I'm not sure I want to change that behavior or not.  It seems like the kind of thing that should be discussed at some length.

Well... I would be glad to discuss it at length with anybody but this ticket has been here for 10 months already....

> I do agree there should be a flag to avoid the runtime cost, that seems clear - but again, I am agnostic on the *default*.

Well... Again, all graph books usually begin by saying that all graphs considered are simple, i.e. no loops nor multiple edges. There is such a thing as "multigraph", too. And I really don't like this behaviour:

```
sage: G=Graph([(1,2),(1,2),(1,1)]); G.edges()
[(1, 1, None), (1, 2, None), (1, 2, None)]
sage: G=Graph(); G.add_edge(1,2); G.add_edge(1,2); G.add_edge(1,1); G.edges()
[(1, 2, None)]
```

Somehow the current behaviour of `add_edge` depends on non-explicit information, and considers simple graphs as the default. I would feel better if everybody got used to state clearly what they want to work with and dealt with the consequences. A guy who wants to build multigraphs and initializes them from a list of edges will experience seriously inconsistent behaviour depending on whether the initial information contains multiple edges and/or loops !

> As a constructive comment, maybe one ticket could be to have a flag (how that is named, I don't know) and then this one for making defaults, assuming there is something approaching consensus.

Hmmmmm.... Well, what do you expect consensus to look like when it seems after 10 months that only one person cares ? `:-P`

Nathann



---

archive/issue_comments_197801.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n> Hmmmmm.... Well, what do you expect consensus to look like when it seems after 10 months that only one person cares ? :-P\n\nWell, I don't consider no one cares when it's only on a ticket.  Only the seriously obsessed (like me?) just look at random tickets without invitation ;-)  And stuff that is actually important often languishes for years.\n\nI think the problem is that while some people like me are lazy and will put in double edges but don't mean it, the most likely thing when people put in extra edges is that they want them.  I don't feel competent to resolve this question - and definitely not *all* graph things assume all are simple.",
    "created_at": "2014-11-17T13:22:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197801",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:20" align="right">comment:20</div>

> Hmmmmm.... Well, what do you expect consensus to look like when it seems after 10 months that only one person cares ? :-P

Well, I don't consider no one cares when it's only on a ticket.  Only the seriously obsessed (like me?) just look at random tickets without invitation ;-)  And stuff that is actually important often languishes for years.

I think the problem is that while some people like me are lazy and will put in double edges but don't mean it, the most likely thing when people put in extra edges is that they want them.  I don't feel competent to resolve this question - and definitely not *all* graph things assume all are simple.



---

archive/issue_comments_197802.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHello !\n\n> Well, I don't consider no one cares when it's only on a ticket.  Only the seriously obsessed (like me?) just look at random tickets without invitation ;-)  And stuff that is actually important often languishes for years.\n\nHmmm... `:-P`\n\n> I think the problem is that while some people like me are lazy and will put in double edges but don't mean it, the most likely thing when people put in extra edges is that they want them.\n\nTrue, but I really worry of those who create many graphs, most of which have multiple edges, and all of a sudden create one from data which (by chance) corresponds to a simple graph. There is a danger of wrong results later on.\n\n> I don't feel competent to resolve this question - and definitely not *all* graph things assume all are simple.\n\n?\n\nWell no, we have stuff that works for both, and stuff that works for simple graphs.. \"recently\" I added a function called \"scream if not simple\" that is used in several places in the graph code, as really some functions that should not be called on non-simple graphs were not checked at all. It is a bit better, but this constructor thing remains a problem, especially when the behaviour of the constructor and the behaviour of `add_edge` is not the same.\n\nNathann",
    "created_at": "2014-11-17T14:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197802",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Hello !

> Well, I don't consider no one cares when it's only on a ticket.  Only the seriously obsessed (like me?) just look at random tickets without invitation ;-)  And stuff that is actually important often languishes for years.

Hmmm... `:-P`

> I think the problem is that while some people like me are lazy and will put in double edges but don't mean it, the most likely thing when people put in extra edges is that they want them.

True, but I really worry of those who create many graphs, most of which have multiple edges, and all of a sudden create one from data which (by chance) corresponds to a simple graph. There is a danger of wrong results later on.

> I don't feel competent to resolve this question - and definitely not *all* graph things assume all are simple.

?

Well no, we have stuff that works for both, and stuff that works for simple graphs.. "recently" I added a function called "scream if not simple" that is used in several places in the graph code, as really some functions that should not be called on non-simple graphs were not checked at all. It is a bit better, but this constructor thing remains a problem, especially when the behaviour of the constructor and the behaviour of `add_edge` is not the same.

Nathann



---

archive/issue_comments_197803.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n>There is a danger of wrong results later on.\n\nReally?  So some of our algorithms only work for multigraphs?  That would be interesting/scary.  I really thought the bigger danger was in the other direction, but that it was user error (such as mine) in that event.\n> ?\n\nSorry, by 'things' I meant 'books'.",
    "created_at": "2014-11-17T14:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197803",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:22" align="right">comment:22</div>

>There is a danger of wrong results later on.

Really?  So some of our algorithms only work for multigraphs?  That would be interesting/scary.  I really thought the bigger danger was in the other direction, but that it was user error (such as mine) in that event.
> ?

Sorry, by 'things' I meant 'books'.



---

archive/issue_comments_197804.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nHello !\n\n> >There is a danger of wrong results later on.\n\n> Really?  So some of our algorithms only work for multigraphs?\n\nNonono, not that I know. But I only deal with simple graphs, remember ? `:-P`\n\nI was thinking of algebraists, or people doing automata theory. I expect them to create some graphs and to modify them later, and `add_edge` will only create a multiple edge if the graph \"allows\" multiple edge (this is decided at creation time).\n\nIf the first graph does not have multiple edge (by luck) this could make the later parts of their algorithms meaningless. I do not think that such a problem would exist in Sage, though. Some functions have no meaning for multigraphs (like .density()) but not the other way around.\n\nNathann",
    "created_at": "2014-11-17T14:35:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197804",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">comment:23</div>

Hello !

> >There is a danger of wrong results later on.

> Really?  So some of our algorithms only work for multigraphs?

Nonono, not that I know. But I only deal with simple graphs, remember ? `:-P`

I was thinking of algebraists, or people doing automata theory. I expect them to create some graphs and to modify them later, and `add_edge` will only create a multiple edge if the graph "allows" multiple edge (this is decided at creation time).

If the first graph does not have multiple edge (by luck) this could make the later parts of their algorithms meaningless. I do not think that such a problem would exist in Sage, though. Some functions have no meaning for multigraphs (like .density()) but not the other way around.

Nathann



---

archive/issue_comments_197805.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI see, I didn't realize that it was impossible to convert a simple graph into a multigraph.  Is there at least an error thrown?",
    "created_at": "2014-11-17T14:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197805",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

I see, I didn't realize that it was impossible to convert a simple graph into a multigraph.  Is there at least an error thrown?



---

archive/issue_comments_197806.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n> I see, I didn't realize that it was impossible to convert a simple graph into a multigraph.\n\nNonononono, it is possible ! You can do `G.allow_multiple_edges(True)`, but then you have to *know* that you need to do that.\n\n> Is there at least an error thrown?\n\nI don't understand what you are talking about, so I will answer the two possibilities:\n\n1) For .density() yes an error is thrown:\n\n```\nsage: Graph([(1,2),(1,2)]).density()\n...\nTypeError: Density is not well-defined for multigraphs.\n```\n\n2) For functions that use `scream_if_not_simple` too:\n\n```\nsage: Graph([(1,2),(1,2)]).is_split()\n...\nValueError: This method is not known to work on graphs with multiedges. Perhaps this method can be updated to handle them, but in the meantime if you want to use it please disallow multiedges using allow_multiple_edges().\n```\n\n3) No error is thrown when you want to add an edge to a (simple) graph that already has it:\n\n```\nsage: g = Graph([(0,1)])\nsage: g.edges()\n[(0, 1, None)]\nsage: g.add_edge(0,1)\nsage: g.edges()\n[(0, 1, None)]\n```\n\nI believe that this is what should happen, but of course it can be a problem if you have created a simple graph by mistake, which can happen with this automatic detection.\n\nNathann",
    "created_at": "2014-11-17T14:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197806",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:25" align="right">comment:25</div>

> I see, I didn't realize that it was impossible to convert a simple graph into a multigraph.

Nonononono, it is possible ! You can do `G.allow_multiple_edges(True)`, but then you have to *know* that you need to do that.

> Is there at least an error thrown?

I don't understand what you are talking about, so I will answer the two possibilities:

1) For .density() yes an error is thrown:

```
sage: Graph([(1,2),(1,2)]).density()
...
TypeError: Density is not well-defined for multigraphs.
```

2) For functions that use `scream_if_not_simple` too:

```
sage: Graph([(1,2),(1,2)]).is_split()
...
ValueError: This method is not known to work on graphs with multiedges. Perhaps this method can be updated to handle them, but in the meantime if you want to use it please disallow multiedges using allow_multiple_edges().
```

3) No error is thrown when you want to add an edge to a (simple) graph that already has it:

```
sage: g = Graph([(0,1)])
sage: g.edges()
[(0, 1, None)]
sage: g.add_edge(0,1)
sage: g.edges()
[(0, 1, None)]
```

I believe that this is what should happen, but of course it can be a problem if you have created a simple graph by mistake, which can happen with this automatic detection.

Nathann



---

archive/issue_comments_197807.json:
```json
{
    "body": "Changed commit from **[`f6087ff`](https://github.com/sagemath/sagetrac-mirror/commit/f6087ffcf2370bdfe45a1162c7d7106c9829ad5c)** to **[`321f51f`](https://github.com/sagemath/sagetrac-mirror/commit/321f51f489b3dd53f8cfe780e710d2d2f0cb4df3)**",
    "created_at": "2014-12-09T21:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197807",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`f6087ff`](https://github.com/sagemath/sagetrac-mirror/commit/f6087ffcf2370bdfe45a1162c7d7106c9829ad5c)** to **[`321f51f`](https://github.com/sagemath/sagetrac-mirror/commit/321f51f489b3dd53f8cfe780e710d2d2f0cb4df3)**



---

archive/issue_comments_197808.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nrebased on 6.5.b2\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/321f51f489b3dd53f8cfe780e710d2d2f0cb4df3\"><code>321f51f</code></a></td><td><code>Merge branch 'u/ncohen/15706' into 6.5.b2</code></td></tr></table>\n",
    "created_at": "2014-12-09T21:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197808",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:26" align="right">comment:26</div>

rebased on 6.5.b2

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/321f51f489b3dd53f8cfe780e710d2d2f0cb4df3"><code>321f51f</code></a></td><td><code>Merge branch 'u/ncohen/15706' into 6.5.b2</code></td></tr></table>




---

archive/issue_comments_197809.json:
```json
{
    "body": "Changed branch from **[u/ncohen/15706](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15706)** to **[public/ticket/15706](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15706)**",
    "created_at": "2014-12-09T21:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197809",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/ncohen/15706](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/15706)** to **[public/ticket/15706](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15706)**



---

archive/issue_comments_197810.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThanks... It would be cool if somebody was willing to review it, though.\n\nNathann",
    "created_at": "2014-12-10T19:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197810",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

Thanks... It would be cool if somebody was willing to review it, though.

Nathann



---

archive/issue_comments_197811.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n> > Is there at least an error thrown?\n\n> I don't understand what you are talking about,\n\nI said that when I thought it was impossible to convert to multigraphs.\n\nThat said, this current behavior you mention is troubling.\n\n```\nsage: g = Graph([(0,1)])\nsage: g.edges()\n[(0, 1, None)]\nsage: g.add_edge(0,1)\nsage: g.edges()\n[(0, 1, None)]\n```\nIdeally, this should raise a warning (once per session, like a deprecation) that you should change to a multigraph, and after the deprecation period it would still raise the warning but now *force* it to be a multigraph.\n\nAs I mentioned before, I'm not a heavy graph theory user (though I do use it) so I think would be better to at least see whether any opinions existed on sage-devel - cc:ing one person who may have an opinion (?).",
    "created_at": "2014-12-10T19:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197811",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:28" align="right">comment:28</div>

> > Is there at least an error thrown?

> I don't understand what you are talking about,

I said that when I thought it was impossible to convert to multigraphs.

That said, this current behavior you mention is troubling.

```
sage: g = Graph([(0,1)])
sage: g.edges()
[(0, 1, None)]
sage: g.add_edge(0,1)
sage: g.edges()
[(0, 1, None)]
```
Ideally, this should raise a warning (once per session, like a deprecation) that you should change to a multigraph, and after the deprecation period it would still raise the warning but now *force* it to be a multigraph.

As I mentioned before, I'm not a heavy graph theory user (though I do use it) so I think would be better to at least see whether any opinions existed on sage-devel - cc:ing one person who may have an opinion (?).



---

archive/issue_comments_197812.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n> Ideally, this should raise a warning (once per session, like a deprecation) that you should change to a multigraph\n\nNot necessarily. I work on simple graphs only, and I use this from time to time. When I add an edge which is already there <do nothing> is what I expect.\n\nCurrently, users may not even know if their graph is simple or may contain multiedges, that's what I think is the problem.\n\n> As I mentioned before, I'm not a heavy graph theory user (though I do use it) so I think would be better to at least see whether any opinions existed on sage-devel - cc:ing one person who may have an opinion (?).\n\nOkay, I'll post there....\n\nNathann",
    "created_at": "2014-12-10T20:10:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197812",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

> Ideally, this should raise a warning (once per session, like a deprecation) that you should change to a multigraph

Not necessarily. I work on simple graphs only, and I use this from time to time. When I add an edge which is already there <do nothing> is what I expect.

Currently, users may not even know if their graph is simple or may contain multiedges, that's what I think is the problem.

> As I mentioned before, I'm not a heavy graph theory user (though I do use it) so I think would be better to at least see whether any opinions existed on sage-devel - cc:ing one person who may have an opinion (?).

Okay, I'll post there....

Nathann



---

archive/issue_comments_197813.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nhttps://groups.google.com/forum/#!topic/sage-devel/78OBybXrfI8",
    "created_at": "2014-12-10T20:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197813",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:30" align="right">comment:30</div>

https://groups.google.com/forum/#!topic/sage-devel/78OBybXrfI8



---

archive/issue_events_222103.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-12-11T07:18:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222103"
}
```



---

archive/issue_events_222104.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-12-11T07:18:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222104"
}
```



---

archive/issue_comments_197814.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n`Graph([(1, 2, 0), (1,2,1)])` gives `NameError: global name 'deprecation' is not defined`.",
    "created_at": "2014-12-11T07:18:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197814",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:32" align="right">comment:32</div>

`Graph([(1, 2, 0), (1,2,1)])` gives `NameError: global name 'deprecation' is not defined`.



---

archive/issue_comments_197815.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nTo be honest, I think that I do not know enought of graphs code to really review this. Sorry.\n\nIn one place there is missing space after `,` before `multiedges=True`.",
    "created_at": "2014-12-11T08:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197815",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:33" align="right">comment:33</div>

To be honest, I think that I do not know enought of graphs code to really review this. Sorry.

In one place there is missing space after `,` before `multiedges=True`.



---

archive/issue_comments_197816.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c69f250922b0373de62e16b16baaab7f8b2fd32\"><code>7c69f25</code></a></td><td><code>trac #15706: Graphs built from their edges will be simple by default</code></td></tr></table>\n",
    "created_at": "2014-12-11T08:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197816",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c69f250922b0373de62e16b16baaab7f8b2fd32"><code>7c69f25</code></a></td><td><code>trac #15706: Graphs built from their edges will be simple by default</code></td></tr></table>




---

archive/issue_comments_197817.json:
```json
{
    "body": "Changed commit from **[`321f51f`](https://github.com/sagemath/sagetrac-mirror/commit/321f51f489b3dd53f8cfe780e710d2d2f0cb4df3)** to **[`7c69f25`](https://github.com/sagemath/sagetrac-mirror/commit/7c69f250922b0373de62e16b16baaab7f8b2fd32)**",
    "created_at": "2014-12-11T08:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197817",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`321f51f`](https://github.com/sagemath/sagetrac-mirror/commit/321f51f489b3dd53f8cfe780e710d2d2f0cb4df3)** to **[`7c69f25`](https://github.com/sagemath/sagetrac-mirror/commit/7c69f250922b0373de62e16b16baaab7f8b2fd32)**



---

archive/issue_comments_197818.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nYo !\n\n> `Graph([(1, 2, 0), (1,2,1)])` gives `NameError: global name 'deprecation' is not defined`.\n\nThe module-level import of 'deprecation' was probably removed since the branch was written. I just rebased it (and removed the merge commits on the way).\n\n> To be honest, I think that I do not know enought of graphs code to really review this. Sorry.\n\nI see. Well, I do not think that there is much to know about graph code in this case. It deals with the constructor allright, but it is just an user interface decision.\n\nAnybodyyyyyyyyyyyy ?...\n\nNathann",
    "created_at": "2014-12-11T08:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197818",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:35" align="right">comment:35</div>

Yo !

> `Graph([(1, 2, 0), (1,2,1)])` gives `NameError: global name 'deprecation' is not defined`.

The module-level import of 'deprecation' was probably removed since the branch was written. I just rebased it (and removed the merge commits on the way).

> To be honest, I think that I do not know enought of graphs code to really review this. Sorry.

I see. Well, I do not think that there is much to know about graph code in this case. It deals with the constructor allright, but it is just an user interface decision.

Anybodyyyyyyyyyyyy ?...

Nathann



---

archive/issue_comments_197819.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nIs it ready for review?",
    "created_at": "2014-12-11T10:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197819",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

Is it ready for review?



---

archive/issue_comments_197820.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nIt is.\n\nNathann",
    "created_at": "2014-12-11T10:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197820",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:37" align="right">comment:37</div>

It is.

Nathann



---

archive/issue_events_222105.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-12-11T11:04:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222105"
}
```



---

archive/issue_events_222106.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-12-11T11:04:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222106"
}
```



---

archive/issue_comments_197821.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nOops, sorry.",
    "created_at": "2014-12-11T11:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197821",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:39" align="right">comment:39</div>

Oops, sorry.



---

archive/issue_comments_197822.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nLGTM",
    "created_at": "2014-12-11T13:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197822",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

LGTM



---

archive/issue_events_222107.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-12-11T13:42:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222107"
}
```



---

archive/issue_events_222108.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-12-11T13:42:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222108"
}
```



---

archive/issue_comments_197823.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2014-12-11T13:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197823",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_197824.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nWowwwwwwww !! Super cool, thanks `:-)`\n\nNathann",
    "created_at": "2014-12-11T14:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197824",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:41" align="right">comment:41</div>

Wowwwwwwww !! Super cool, thanks `:-)`

Nathann



---

archive/issue_comments_197825.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nOkay, I'll let Dima take the fall if users complain ;-)  Seriously, I hope this leads to less confusion in the long-run for people who like both multigraphs and simple ones; I just didn't want to make that UI decision.\n\nI do have one question that probably has an answer of \"yes\"; are there still enough examples of graphs not in the extremely cryptic/hermetic dictionary of dictionary notation?  I noticed you changed quite a few of the dict of lists ones, and I had never seen that other constructor before.",
    "created_at": "2014-12-11T15:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197825",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:42" align="right">comment:42</div>

Okay, I'll let Dima take the fall if users complain ;-)  Seriously, I hope this leads to less confusion in the long-run for people who like both multigraphs and simple ones; I just didn't want to make that UI decision.

I do have one question that probably has an answer of "yes"; are there still enough examples of graphs not in the extremely cryptic/hermetic dictionary of dictionary notation?  I noticed you changed quite a few of the dict of lists ones, and I had never seen that other constructor before.



---

archive/issue_comments_197826.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n> Okay, I'll let Dima take the fall if users complain ;-)  Seriously, I hope this leads to less confusion in the long-run for people who like both multigraphs and simple ones; I just didn't want to make that UI decision.\n\nWell. Regardless of changing the default to \"always simple\", it is already good that  `add_edge` will become consistent with the constructor.\n\n> I do have one question that probably has an answer of \"yes\"; are there still enough examples of graphs not in the extremely cryptic/hermetic dictionary of dictionary notation?  I noticed you changed quite a few of the dict of lists ones, and I had never seen that other constructor before.\n\nI changed dicts to lists ? Can you tell me where ?\n\nThe dictionary notation is only cryptic when you want \"edge-labelled multigraphs\". When you want simple graphs, it is rather simple: associate to each vertex the list of its neighbors.\n\nTo answer your question a bit more completely: I hope that Sage (the code, not the doctests) contains no occurrence of `Graph(list_of_edges)`, for this is slower than `g=Graph();g.add_edges(list_of_edges)`. This is also the point of this ticket: making both equally fast.\n\nNathann",
    "created_at": "2014-12-11T15:20:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197826",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:43" align="right">comment:43</div>

> Okay, I'll let Dima take the fall if users complain ;-)  Seriously, I hope this leads to less confusion in the long-run for people who like both multigraphs and simple ones; I just didn't want to make that UI decision.

Well. Regardless of changing the default to "always simple", it is already good that  `add_edge` will become consistent with the constructor.

> I do have one question that probably has an answer of "yes"; are there still enough examples of graphs not in the extremely cryptic/hermetic dictionary of dictionary notation?  I noticed you changed quite a few of the dict of lists ones, and I had never seen that other constructor before.

I changed dicts to lists ? Can you tell me where ?

The dictionary notation is only cryptic when you want "edge-labelled multigraphs". When you want simple graphs, it is rather simple: associate to each vertex the list of its neighbors.

To answer your question a bit more completely: I hope that Sage (the code, not the doctests) contains no occurrence of `Graph(list_of_edges)`, for this is slower than `g=Graph();g.add_edges(list_of_edges)`. This is also the point of this ticket: making both equally fast.

Nathann



---

archive/issue_comments_197827.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nBesides, just for your own information:\n\n```\nsage: g = Graph()\nsage: edges = list(combinations(range(1000),2))\nsage: %time g.add_edges(edges)\nCPU times: user 992 ms, sys: 44 ms, total: 1.04 s\nWall time: 989 ms\nsage: g = Graph()\nsage: %time for e in edges: g.add_edge(e)\nCPU times: user 1.8 s, sys: 44 ms, total: 1.84 s\nWall time: 1.79 s\n```\n\nThis, because `add_edge(u,v)`, `add_edge(u,v,l)`, `add_edge((u,v))`, `add_edge((u,v,l))` are all valid, and that deciding which should be used takes time, at each `add_edge` call.\n\nNathann",
    "created_at": "2014-12-11T15:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197827",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

Besides, just for your own information:

```
sage: g = Graph()
sage: edges = list(combinations(range(1000),2))
sage: %time g.add_edges(edges)
CPU times: user 992 ms, sys: 44 ms, total: 1.04 s
Wall time: 989 ms
sage: g = Graph()
sage: %time for e in edges: g.add_edge(e)
CPU times: user 1.8 s, sys: 44 ms, total: 1.84 s
Wall time: 1.79 s
```

This, because `add_edge(u,v)`, `add_edge(u,v,l)`, `add_edge((u,v))`, `add_edge((u,v,l))` are all valid, and that deciding which should be used takes time, at each `add_edge` call.

Nathann



---

archive/issue_comments_197828.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\n> I changed dicts to lists ? Can you tell me where ?\n\nNo, you changed lists to dicts, e.g. \n\n```diff\n-        sage: G=DiGraph([[0,0],[0,0],[0,0],[1,1],[1,1],[1,1]])\n-        sage: H=DiGraph([[0,0],[0,0],[0,0],[0,0],[1,1],[1,1]])\n+        sage: G=DiGraph({0:[0,0,0],1:[1,1,1]})\n+        sage: H=DiGraph({0:[0,0,0,0],1:[1,1]})\n```\nand some similar, which is okay, but also\n\n```diff\n-            sage: DiGraph([(1, 2, 0), (1,2,1)])\n+            sage: DiGraph({1:{2:[0,1]}})\n```\nwhich I didn't even know was possible, and certainly don't know how to interpret (though I barely know how to interpret the other one, I guess the last element of each triple is for the direction?).  Edit: after thinking about it for a little, I now get it, but still find it pretty terse.",
    "created_at": "2014-12-11T15:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197828",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:45" align="right">comment:45</div>

> I changed dicts to lists ? Can you tell me where ?

No, you changed lists to dicts, e.g. 

```diff
-        sage: G=DiGraph([[0,0],[0,0],[0,0],[1,1],[1,1],[1,1]])
-        sage: H=DiGraph([[0,0],[0,0],[0,0],[0,0],[1,1],[1,1]])
+        sage: G=DiGraph({0:[0,0,0],1:[1,1,1]})
+        sage: H=DiGraph({0:[0,0,0,0],1:[1,1]})
```
and some similar, which is okay, but also

```diff
-            sage: DiGraph([(1, 2, 0), (1,2,1)])
+            sage: DiGraph({1:{2:[0,1]}})
```
which I didn't even know was possible, and certainly don't know how to interpret (though I barely know how to interpret the other one, I guess the last element of each triple is for the direction?).  Edit: after thinking about it for a little, I now get it, but still find it pretty terse.



---

archive/issue_comments_197829.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\n> No, you changed lists to dicts, e.g. \n\nOh sorrysorry, I thought that you were speaking of Sage's code.\n\n> ```diff\n> -            sage: DiGraph([(1, 2, 0), (1,2,1)])\n> +            sage: DiGraph({1:{2:[0,1]}})\n> ```\n> which I didn't even know was possible, and certainly don't know how to interpret (though I barely know how to interpret the other one, I guess the last element of each triple is for the direction?).  Edit: after thinking about it for a little, I now get it, but still find it pretty terse.\n\nAhaha. Well, indeed, \"multigraph with labelled edges\". It is the most awful thing we handle I believe `:-P`\n\nThis being said, it is \"the right data structure\" in terms of elementary operations. Though hard to read. By the way, it can give you an idea of why I hate multiple edges and loops. It makes everything more complicated, and none of the additional complexities is very interesting from the theoretical point of view. It is just more work and more corner-cases `:-P`\n\nNathann",
    "created_at": "2014-12-11T16:22:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197829",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:46" align="right">comment:46</div>

> No, you changed lists to dicts, e.g. 

Oh sorrysorry, I thought that you were speaking of Sage's code.

> ```diff
> -            sage: DiGraph([(1, 2, 0), (1,2,1)])
> +            sage: DiGraph({1:{2:[0,1]}})
> ```
> which I didn't even know was possible, and certainly don't know how to interpret (though I barely know how to interpret the other one, I guess the last element of each triple is for the direction?).  Edit: after thinking about it for a little, I now get it, but still find it pretty terse.

Ahaha. Well, indeed, "multigraph with labelled edges". It is the most awful thing we handle I believe `:-P`

This being said, it is "the right data structure" in terms of elementary operations. Though hard to read. By the way, it can give you an idea of why I hate multiple edges and loops. It makes everything more complicated, and none of the additional complexities is very interesting from the theoretical point of view. It is just more work and more corner-cases `:-P`

Nathann



---

archive/issue_comments_197830.json:
```json
{
    "body": "Changed branch from **[public/ticket/15706](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15706)** to **[`7c69f25`](https://github.com/sagemath/sagetrac-mirror/commit/7c69f250922b0373de62e16b16baaab7f8b2fd32)**",
    "created_at": "2014-12-12T12:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15706#issuecomment-197830",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/15706](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/15706)** to **[`7c69f25`](https://github.com/sagemath/sagetrac-mirror/commit/7c69f250922b0373de62e16b16baaab7f8b2fd32)**



---

archive/issue_events_222109.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-12T12:29:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222109"
}
```



---

archive/issue_events_222110.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c929d471400cbc5b1f1e9971dfcfc4eaef298275",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-12-12T12:29:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15706",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15706#event-222110"
}
```
