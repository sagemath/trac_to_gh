# Issue 15908: guava must be explicitly loaded

archive/issues_015671.json:
```json
{
    "body": "CC:  @ppurka @wdjoyner @nilesjohnson\n\nguava must be explicitly loaded before the corresponding GAP functions are invoked.\nThe patch fixes this. There are still two test failures (see #14979) in the guava-related `codes/linear_code.py`, but this is not obvious and should be left to #14979.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15908\n\n",
    "closed_at": "2014-03-13T21:05:45Z",
    "created_at": "2014-03-08T00:31:00Z",
    "labels": [
        "component: coding theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "guava must be explicitly loaded",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15908",
    "user": "https://github.com/dimpase"
}
```
CC:  @ppurka @wdjoyner @nilesjohnson

guava must be explicitly loaded before the corresponding GAP functions are invoked.
The patch fixes this. There are still two test failures (see #14979) in the guava-related `codes/linear_code.py`, but this is not obvious and should be left to #14979.

Issue created by migration from https://trac.sagemath.org/ticket/15908





---

archive/issue_comments_202555.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-03-08T00:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15908#issuecomment-202555",
    "user": "https://github.com/dimpase"
}
```

New commits:



---

archive/issue_comments_202556.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-03-08T01:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15908#issuecomment-202556",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_202557.json:
```json
{
    "body": "Somehow this is not in my version of sage (6.1.beta2) for the file guava.py:\n\n```\nsage: BinaryReedMullerCode(2, 3)\n/home/punarbasu/tmp/sage/src/bin/sage-ipython:1: DeprecationWarning: This method soon will not be available in that way anymore. To use it, you can now call it by typing codes.BinaryReedMullerCode\nSee http://trac.sagemath.org/15445 for details.\n  #!/usr/bin/env python\nLinear code of length 8, dimension 7 over Finite Field of size 2\nsage: BinaryReedMullerCode(1, 3) \nLinear code of length 8, dimension 4 over Finite Field of size 2\nsage: codes.QuasiQuadraticResidueCode(3)\nLinear code of length 6, dimension 3 over Finite Field of size 2\nsage: codes.Rando\ncodes.RandomLinearCode       codes.RandomLinearCodeGuava  \nsage: codes.RandomLinearCodeGuava(4, 2, GF(2))\nLinear code of length 4, dimension 2 over Finite Field of size 2\n```",
    "created_at": "2014-03-08T02:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15908#issuecomment-202557",
    "user": "https://github.com/ppurka"
}
```

Somehow this is not in my version of sage (6.1.beta2) for the file guava.py:

```
sage: BinaryReedMullerCode(2, 3)
/home/punarbasu/tmp/sage/src/bin/sage-ipython:1: DeprecationWarning: This method soon will not be available in that way anymore. To use it, you can now call it by typing codes.BinaryReedMullerCode
See http://trac.sagemath.org/15445 for details.
  #!/usr/bin/env python
Linear code of length 8, dimension 7 over Finite Field of size 2
sage: BinaryReedMullerCode(1, 3) 
Linear code of length 8, dimension 4 over Finite Field of size 2
sage: codes.QuasiQuadraticResidueCode(3)
Linear code of length 6, dimension 3 over Finite Field of size 2
sage: codes.Rando
codes.RandomLinearCode       codes.RandomLinearCodeGuava  
sage: codes.RandomLinearCodeGuava(4, 2, GF(2))
Linear code of length 4, dimension 2 over Finite Field of size 2
```



---

archive/issue_comments_202558.json:
```json
{
    "body": "Replying to [comment:5 ppurka]:\n> Somehow this is not in my version of sage (6.1.beta2) for the file guava.py:\n\n\nthis must be the last GAP update. What does your gap_console() print? In my case:\n\n```\nsage: gap_console()\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   GAP, Version 4.7.4 of 20-Feb-2014 (free software, GPL)\n \u2502  GAP  \u2502   http://www.gap-system.org\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   Architecture: x86_64-apple-darwin10.8.0-gcc-default64\n Libs used:  gmp, readline\n Loading the library and packages ...\n Packages:   Alnuth 3.0.0, AutPGrp 1.5, CTblLib 1.2.2, FactInt 1.5.3, GAPDoc 1.5.1, LAGUNA 3.6.3, Polycyclic 2.11\n Try '?help' for help. See also  '?copyright' and  '?authors'\ngap> \n```\nso no guava loaded, even after `gap_packages` spkg are installed.",
    "created_at": "2014-03-08T10:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15908#issuecomment-202558",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:5 ppurka]:
> Somehow this is not in my version of sage (6.1.beta2) for the file guava.py:


this must be the last GAP update. What does your gap_console() print? In my case:

```
sage: gap_console()
 ┌───────┐   GAP, Version 4.7.4 of 20-Feb-2014 (free software, GPL)
 │  GAP  │   http://www.gap-system.org
 └───────┘   Architecture: x86_64-apple-darwin10.8.0-gcc-default64
 Libs used:  gmp, readline
 Loading the library and packages ...
 Packages:   Alnuth 3.0.0, AutPGrp 1.5, CTblLib 1.2.2, FactInt 1.5.3, GAPDoc 1.5.1, LAGUNA 3.6.3, Polycyclic 2.11
 Try '?help' for help. See also  '?copyright' and  '?authors'
gap> 
```
so no guava loaded, even after `gap_packages` spkg are installed.



---

archive/issue_comments_202559.json:
```json
{
    "body": "Please see http://trac.sagemath.org/ticket/15873#comment:26",
    "created_at": "2014-03-08T11:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15908#issuecomment-202559",
    "user": "https://github.com/dimpase"
}
```

Please see http://trac.sagemath.org/ticket/15873#comment:26



---

archive/issue_comments_202560.json:
```json
{
    "body": "Why does GAP disable guava by default? Maybe there are some potential name clashes lurking there? Is it really a good idea to patch this out? IMHO the prudent thing to do is to only load it if needed as in this patch.",
    "created_at": "2014-03-08T11:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15908#issuecomment-202560",
    "user": "https://github.com/vbraun"
}
```

Why does GAP disable guava by default? Maybe there are some potential name clashes lurking there? Is it really a good idea to patch this out? IMHO the prudent thing to do is to only load it if needed as in this patch.



---

archive/issue_comments_202561.json:
```json
{
    "body": "Replying to [comment:8 vbraun]:\n> Why does GAP disable guava by default? Maybe there are some potential name clashes lurking there? Is it really a good idea to patch this out? IMHO the prudent thing to do is to only load it if needed as in this patch.\n\n\nIMHO guava should not be preloaded, given its limited scope. It was a remnant from earlier Sage versions (with GAP-4.4, IIRC) where it was explicitly preloaded directly inside the GAP spkg. That's why I would rather prefer to go ahead with the patch on this ticket.",
    "created_at": "2014-03-08T17:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15908#issuecomment-202561",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:8 vbraun]:
> Why does GAP disable guava by default? Maybe there are some potential name clashes lurking there? Is it really a good idea to patch this out? IMHO the prudent thing to do is to only load it if needed as in this patch.


IMHO guava should not be preloaded, given its limited scope. It was a remnant from earlier Sage versions (with GAP-4.4, IIRC) where it was explicitly preloaded directly inside the GAP spkg. That's why I would rather prefer to go ahead with the patch on this ticket.



---

archive/issue_comments_202562.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-08T17:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15908#issuecomment-202562",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_046796.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-13T21:05:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15908#event-46796"
}
```



---

archive/issue_comments_202563.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-13T21:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15908#issuecomment-202563",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
