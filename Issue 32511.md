# Issue 32511: clean the processing of networkx (Multi)(Di)Graph in the (Di)Graph constructor

Issue created by migration from https://trac.sagemath.org/ticket/32748

Original creator: dcoudert

Original creation time: 2021-10-23 16:59:39

CC:  chapoton tscrim tmonteil

We have tests to distinguish between networkx `Graph` and `MultiGraph` which are silently failing since for the following reason:

```
sage: H = networkx.MultiGraph()
sage: H.add_edge(0, 1)
0
sage: H.add_edge(0, 1)
1
sage: isinstance(H, networkx.MultiGraph)
True
sage: isinstance(H, networkx.Graph)
True
```

and so some code that should lead to an error is unreachable. In particular, the `DiGraph` constructor expect to call `data.selfloops` when data is a networkx `MultiDiGraph`, but the test is `is instance(data, networkx.DiGraph)` which is always true. Observe that method `selfloops` is no longer in networkx.

Here, we add a specific helper method to feed a (di)graph with data from a networkx (Multi)(Di)Graph.


---

Comment by dcoudert created at 2021-10-23 17:01:30

Changing status from new to needs_review.


---

Comment by dcoudert created at 2021-10-23 17:01:30

New commits:


---

Comment by dcoudert created at 2021-10-23 18:12:10

Changing component from game theory to graph theory.


---

Comment by tscrim created at 2021-10-29 00:10:33

LGTM modulo the trivial extra space on the second line of some of the `INPUT:` in `from_networkx_graph`.


---

Comment by git created at 2021-10-29 06:38:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2021-10-29 06:38:35

Good catch. Thanks.


---

Comment by tscrim created at 2021-10-29 06:51:04

Thank you.


---

Comment by tscrim created at 2021-10-29 06:51:04

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-10-31 22:20:55

Resolution: fixed
