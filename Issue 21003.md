# Issue 21003: replace __cmp__ by __richcmp__ in period_lattices

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2016-08-13 13:57:44

CC:  jdemeyer cremona

as another experimental tiny move towards python3


---

Comment by chapoton created at 2016-08-13 13:58:44

Changing status from new to needs_review.


---

Comment by chapoton created at 2016-08-13 13:58:44

New commits:


---

Comment by cremona created at 2016-08-13 14:34:16

I confess that I do not know the difference between cmp and rich_cmp.  Otherwise the changes look harmless so if the tests still pass I'm sure this is OK.


---

Comment by jdemeyer created at 2016-08-15 07:33:50

This is silly and obviously not the right way to implement rich comparisons:

```
        if op is not Py_EQ:
            return NotImplemented
```



---

Comment by jdemeyer created at 2016-08-15 07:33:58

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2016-08-15 07:45:25

Then could you please tell what you propose as an alternative ?

This function is explicitly useful only for equality, and one cannot implement just `__eq__` in a cython file.


---

Comment by jdemeyer created at 2016-08-15 08:02:24

At least, you should support `!=` also in addition to `==`.


---

Comment by git created at 2016-08-15 08:47:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-08-15 09:35:36

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2016-08-15 09:35:36

I have added NE.


---

Comment by chapoton created at 2016-08-17 07:38:55

ping ?


---

Comment by cremona created at 2016-08-17 08:21:17

As I said before, since this changes nothing visible to the user, provided that everything still works and is no slower then I have no objections.


---

Comment by chapoton created at 2016-08-17 12:54:59

all tests pass. Jeroen, do you still object ?


---

Comment by chapoton created at 2016-08-20 06:44:31

patchbot is green (modulo one unrelated problem)

`@`jdemeyer, please tell if you still object


---

Comment by jdemeyer created at 2016-08-20 08:40:28

I don't object, I just didn't really look at it (yet).


---

Comment by chapoton created at 2016-08-22 07:39:22

ok. Would you please have a look ?


---

Comment by chapoton created at 2016-08-30 19:53:23

Jeroen, would you mind if I take John's answer as a positive review ?


---

Comment by jdemeyer created at 2016-08-30 20:20:28

Replying to [comment:10 cremona]:
> and is no slower

Is efficiency an issue for this function? I am asking because neither the old nor the new implementation are written with efficiency in mind.


---

Comment by jdemeyer created at 2016-08-30 20:20:28

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-09-04 00:13:58

Resolution: fixed
