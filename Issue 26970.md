# Issue 26970: py3: one partial fix for KR crystals

Issue created by migration from https://trac.sagemath.org/ticket/27207

Original creator: chapoton

Original creation time: 2019-02-02 15:17:27

CC:  tscrim




---

Comment by chapoton created at 2019-02-02 15:17:52

New commits:


---

Comment by chapoton created at 2019-02-02 15:17:52

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-02-03 10:44:59

not sure if this is the right thing to do. The behaviour of `list(x.classical_weight())` is bad in python3, as it returns the monomial/coeffs in reverse order..


---

Comment by tscrim created at 2019-02-03 16:19:58

This looks right. (The following explanation is also for my self in part.) The classical weight is a `CombinatorialFreeModule` element in the ambient space (the natural *Q*<sup>n</sup> that defines the (type B) root system), so it is a dict indexed by `(index, coeff)`, where `index` is an element of the index set. Each tuple is basically a partition, and the i-th row value is the coefficient of e<sub>i</sub>. Since it is a dominant weight, we will never have any "missing" values (e.g., a support of {1,2,4}), and we want it to be sorted by the `index` (there is more-or-less an assumption that the index set is {1,2,...n}).

TL;DR, LGTM.


---

Comment by tscrim created at 2019-02-03 16:19:58

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-02-05 16:57:41

Resolution: fixed
