# Issue 28527: 2 internet doctest failed in hadamard_matrix.py

Issue created by migration from https://trac.sagemath.org/ticket/28764

Original creator: slabbe

Original creation time: 2019-11-19 09:04:35

With version 9.0.beta6, Release Date: 2019-11-18, the following


```
sage -t --optional=sage,optional,external src/sage/combinat/matrices/hadamard_matrix.py
```


gives


```
sage -t src/sage/combinat/matrices/hadamard_matrix.py
**********************************************************************
File "src/sage/combinat/matrices/hadamard_matrix.py", line 471, in sage.combinat.matrices.hadamard_matrix.hadamard_matrix_www
Failed example:
    hadamard_matrix_www("had.4.txt")      # optional - internet
Expected:
    [ 1  1  1  1]
    [ 1 -1  1 -1]
    [ 1  1 -1 -1]
    [ 1 -1 -1  1]
Got:
    [-1 -1 -1 -1]
    [-1 -1 -1 -1]
    [-1 -1 -1 -1]
    [-1 -1 -1 -1]
**********************************************************************
File "src/sage/combinat/matrices/hadamard_matrix.py", line 476, in sage.combinat.matrices.hadamard_matrix.hadamard_matrix_www
Failed example:
    hadamard_matrix_www("had.16.2.txt",comments=True)   # optional - internet
Expected:
    Automorphism group has order = 49152 = 2^14 * 3
    [ 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1]
    [ 1 -1  1 -1  1 -1  1 -1  1 -1  1 -1  1 -1  1 -1]
    [ 1  1 -1 -1  1  1 -1 -1  1  1 -1 -1  1  1 -1 -1]
    [ 1 -1 -1  1  1 -1 -1  1  1 -1 -1  1  1 -1 -1  1]
    [ 1  1  1  1 -1 -1 -1 -1  1  1  1  1 -1 -1 -1 -1]
    [ 1 -1  1 -1 -1  1 -1  1  1 -1  1 -1 -1  1 -1  1]
    [ 1  1 -1 -1 -1 -1  1  1  1  1 -1 -1 -1 -1  1  1]
    [ 1 -1 -1  1 -1  1  1 -1  1 -1 -1  1 -1  1  1 -1]
    [ 1  1  1  1  1  1  1  1 -1 -1 -1 -1 -1 -1 -1 -1]
    [ 1  1  1  1 -1 -1 -1 -1 -1 -1 -1 -1  1  1  1  1]
    [ 1  1 -1 -1  1 -1  1 -1 -1 -1  1  1 -1  1 -1  1]
    [ 1  1 -1 -1 -1  1 -1  1 -1 -1  1  1  1 -1  1 -1]
    [ 1 -1  1 -1  1 -1 -1  1 -1  1 -1  1 -1  1  1 -1]
    [ 1 -1  1 -1 -1  1  1 -1 -1  1 -1  1  1 -1 -1  1]
    [ 1 -1 -1  1  1  1 -1 -1 -1  1  1 -1 -1 -1  1  1]
    [ 1 -1 -1  1 -1 -1  1  1 -1  1  1 -1  1  1 -1 -1]
Got:
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
    [-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1]
**********************************************************************
1 item had failures:
   2 of   3 in sage.combinat.matrices.hadamard_matrix.hadamard_matrix_www
    [104 tests, 2 failures, 1.24 s]
----------------------------------------------------------------------
sage -t src/sage/combinat/matrices/hadamard_matrix.py  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 1.6 seconds
    cpu time: 0.6 seconds
    cumulative wall time: 1.2 seconds
External software detected for doctesting: internet
```



---

Comment by chapoton created at 2019-11-19 12:33:55

ok, here is a fix
----
New commits:


---

Comment by chapoton created at 2019-11-19 12:33:55

Changing status from new to needs_review.


---

Comment by slabbe created at 2019-11-19 16:06:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-11-30 13:36:19

Resolution: fixed
