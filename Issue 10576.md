# Issue 10576: weird performance issue -- why is this SOOOO slow !?

Issue created by migration from https://trac.sagemath.org/ticket/10629

Original creator: was

Original creation time: 2011-01-13 22:09:40

Assignee: burcin


```

sage: f(z) = (((-2)^z + 3^z)/((-2)^z - 3^z))^(1/z)
sage: f(2)
sqrt(-13/5)
sage: f(10)
(-60073/58025)^(1/10)
sage: f(100)
(-515377520732011332304111729993850674198810727377/515377520732011329768810529537391871205404316625)^(1/100)

sage: f(100)
(-515377520732011332304111729993850674198810727377/515377520732011329768810529537391871205404316625)^(1/100)
sage: f(110)
(-30432527221704537087670067466163877438919371148942073/30432527221704537085073919036896463624654122984332025)^(1/110)
sage: f(120)
(-1797010299914431210414509057505389955604379434598131450977/1797010299914431210411850601513820123858571820477570761825)^(1/120)
sage: f(140)
(-6265787482177970379256225588138505240370640792793057315382192174577/6265787482177970379256222800545355424042748100828273234337003927025)^(1/140)
sage: f(160)
(-21847450052839212624230656504451736779897953023116436713529106968318864898177/21847450052839212624230656501528733505236147186709067048096540929006999812225)^(1/160)
sage: f(180)
(-76177348045866392339289727720617094245965667291253555071028716054140756082155221621777/76177348045866392339289727720614029254883935513536838376974415435773518603910854417425)^(1/180)
```

... and these start getting INSANELY SLOW.  Why?

(This was found by Vladimir V. Bondarenko.)


---

Comment by was created at 2011-01-13 22:14:22

Note the traceback:

```

/Users/wstein/sd27/sage-4.6.1.rc1/local/lib/python2.6/site-packages/sage/rings/arith.pyc in __factor_using_pari(n, int_, debug_level, proof)
   2140         pari.set_debug_level(debug_level)
   2141         
-> 2142     F = pari(n).factor(proof=proof)
   2143     B = F[0]
   2144     e = F[1]

...
```


so it is factoring.


---

Comment by ddrake created at 2011-01-13 23:26:16

Looking briefly over this, it's not surprising that it's factoring:

```
sage: (2^6 * 7^6)^(1/3)
196
sage: parent(_)
Rational Field
sage: (2^6 * 7^5)^(1/3)
28*49^(1/3)
sage: parent(_)
Symbolic Ring
```

So we need to factor to decide if the result is in the rationals or not.


---

Comment by rws created at 2015-02-01 06:42:13

Replying to [comment:2 ddrake]:
> So we need to factor to decide if the result is in the rationals or not.
Can someone explain this further? I mean technically, factoring is overkill for this---if the exponent is a rational `a/b` then it suffices to check if the base is a b-th power, doesn't it?


---

Comment by rws created at 2015-02-01 17:30:11

Changing status from new to needs_review.


---

Comment by rws created at 2015-02-01 17:30:11

Ah ok, it's not so important to decide whether rational or not, but to get the "rational power parts" in order to get a simplified expression of form `x*y^(a/b)`. Since there is no way out of factoring I propose to close the ticket.


---

Comment by kcrisman created at 2015-02-03 02:43:03

Hmm, but one could possibly ask for it not to do that simplified form, to just always go straight to the symbolic ring... but in this case I agree that unless William really complains, we can close this.


---

Comment by kcrisman created at 2015-02-03 02:43:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-02-08 15:30:50

Resolution: invalid
