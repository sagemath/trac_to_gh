# Issue 23171: py3: richcmp for algebraic closures of finite fields

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-07-12 12:42:13

CC:  tscrim jdemeyer

trying to get rid of cmp there

(plus a pep8 cleanup of the modified file)

issue: conflict between the richcmp_method decorator and WithEqualityByID inheritance for a subclass.


---

Comment by chapoton created at 2017-07-12 12:44:28

I have failed to make this work. The problem is that using either "`__richcmp__`" or ("`__eq__`" and "`__ne__`") in the generic class breaks the comparison by Id in the pseudo-Conway subclass.
----
New commits:


---

Comment by chapoton created at 2017-07-12 12:44:28

Changing status from new to needs_info.


---

Comment by jdemeyer created at 2017-07-12 12:57:41

Your patch touches a lot of lines with unrelated cleanup. It would be good to clearly identify the non-working part and perhaps make a separate ticket for that.


---

Comment by chapoton created at 2017-07-12 13:08:34

Yes, I thought it would be easy, so I took the opportunity for a little cleanup. Sadly, turning to richcmp was not easy...


---

Comment by chapoton created at 2017-07-13 08:44:38

I remade a bare branch, but the core problem is untouched.
----
New commits:


---

Comment by git created at 2017-08-06 09:23:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-08-06 09:23:31

Changing status from needs_info to needs_review.


---

Comment by chapoton created at 2017-08-06 09:23:31

I think I have found a way.
----
New commits:


---

Comment by chapoton created at 2017-08-06 10:55:27

green bot, please review


---

Comment by tscrim created at 2017-08-06 15:09:19

Did you try putting `WithEqualityById` at the first inherited class so it is higher up in the MRO? If the decorator is well-behaved with subclasses, then I think this should work without having to (re)do an `__eq__()`.


---

Comment by git created at 2017-08-06 15:19:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-08-06 15:19:52

Thank you, Travis. This seems to work.


---

Comment by tscrim created at 2017-08-06 15:24:28

No problem. Thank you for your continued work on getting to Python3.


---

Comment by tscrim created at 2017-08-06 15:24:28

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-08-11 18:17:55

Resolution: fixed
