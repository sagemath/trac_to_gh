# Issue 13725: Wrong comparison of sparse

Issue created by migration from https://trac.sagemath.org/ticket/13929

Original creator: tfeulner

Original creation time: 2013-01-08 15:18:39

Assignee: jason, was

Keywords: comparison, sparse, free module

The comparison of sparse vectors gives wrong results at the moment:


```
sage: V = FreeModule( GF(3), 2, sparse=True)
sage: a = V([0,1])
sage: b = V([1,0])
sage: cmp(a, b)
1 # should be -1, since we are using the lexicographic order
```


In particular, this leads to different results when using sparse and dense vectors at the same time:


```
sage: cmp(a.dense_vector(), b)
-1
sage: cmp(a, b.dense_vector())
1
```




---

Attachment


---

Comment by tfeulner created at 2013-01-09 05:57:11

Changing status from new to needs_review.


---

Comment by cnassau created at 2013-01-24 16:28:05

The patch seems to be correct (tested it against Sage 5.5) and does indeed fix a bug in the sorting order. I would have chosen a more informative doctest, for example

```python
sage: sorted(FreeModule(GF(3),2,sparse=True))
[(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]
sage: sorted(FreeModule(GF(3),2,sparse=False))
[(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]
```

But I think the patch is ready to go as it is, so I'm giving it a positive review.


---

Comment by cnassau created at 2013-01-24 16:28:05

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-01-30 07:35:37

Resolution: fixed
