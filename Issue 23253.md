# Issue 23253: Correct definition of Alternating Sign Matrix

archive/issues_023253.json:
```json
{
    "body": "CC:  chapoton tscrim\n\nThe documentation and the method `__contains__` of alternating sign matrices is wrong\n\n```\nsage: A = AlternatingSignMatrices(3)\nsage: A.cardinality()\n7\nsage: M = MatrixSpace(ZZ, 3)\nsage: from itertools import product\nsage: sum(1 for p in product([-1,0,1], repeat=9) if p in A)\n9\n```\n\nIndeed the matrix\n\n```\n0  1 0\n0  1 0\n1 -1 1\n```\n\nis not an asm.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23490\n\n",
    "created_at": "2017-07-20T08:42:31Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "title": "Correct definition of Alternating Sign Matrix",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23253",
    "user": "vdelecroix"
}
```
CC:  chapoton tscrim

The documentation and the method `__contains__` of alternating sign matrices is wrong

```
sage: A = AlternatingSignMatrices(3)
sage: A.cardinality()
7
sage: M = MatrixSpace(ZZ, 3)
sage: from itertools import product
sage: sum(1 for p in product([-1,0,1], repeat=9) if p in A)
9
```

Indeed the matrix

```
0  1 0
0  1 0
1 -1 1
```

is not an asm.

Issue created by migration from https://trac.sagemath.org/ticket/23490





---

archive/issue_comments_325355.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-07-20T08:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325355",
    "user": "vdelecroix"
}
```

New commits:



---

archive/issue_comments_325356.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-20T08:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325356",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_325357.json:
```json
{
    "body": "The current definition is correct. Alternating in sign and sum=1 implies that the first and last must be 1.",
    "created_at": "2017-07-20T11:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325357",
    "user": "chapoton"
}
```

The current definition is correct. Alternating in sign and sum=1 implies that the first and last must be 1.



---

archive/issue_comments_325358.json:
```json
{
    "body": "But as mentioned in the ticket description the `__contains__` is not working... I will revert the change in documentation.",
    "created_at": "2017-07-20T12:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325358",
    "user": "vdelecroix"
}
```

But as mentioned in the ticket description the `__contains__` is not working... I will revert the change in documentation.



---

archive/issue_comments_325359.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-07-20T12:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325359",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_325360.json:
```json
{
    "body": "Thanks for the comment Fr\u00e9d\u00e9ric. I updated the commit.",
    "created_at": "2017-07-20T12:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325360",
    "user": "vdelecroix"
}
```

Thanks for the comment Frédéric. I updated the commit.



---

archive/issue_comments_325361.json:
```json
{
    "body": "The `check` is ignored in the `_element_constructor_`.\n\nIt is better to have the more standard `assert m not in A`.\n\nOtherwise LGTM.",
    "created_at": "2017-07-20T12:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325361",
    "user": "tscrim"
}
```

The `check` is ignored in the `_element_constructor_`.

It is better to have the more standard `assert m not in A`.

Otherwise LGTM.



---

archive/issue_comments_325362.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-20T12:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325362",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_325363.json:
```json
{
    "body": "missing sage: here\n\n```\n+            AlternatingSignMatrices(3).list()\n```\n",
    "created_at": "2017-07-20T16:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325363",
    "user": "chapoton"
}
```

missing sage: here

```
+            AlternatingSignMatrices(3).list()
```




---

archive/issue_comments_325364.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-20T16:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325364",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_325365.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-20T16:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325365",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_325366.json:
```json
{
    "body": "typo here:\n\n```\n+            # check that the total sums of the i-th\n+            # rwo and i-th column is 1\n```\n\nOnce corrected, the rest looks good.",
    "created_at": "2017-07-20T18:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325366",
    "user": "chapoton"
}
```

typo here:

```
+            # check that the total sums of the i-th
+            # rwo and i-th column is 1
```

Once corrected, the rest looks good.



---

archive/issue_comments_325367.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-20T18:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325367",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_325368.json:
```json
{
    "body": "Idneed ;-)",
    "created_at": "2017-07-20T18:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325368",
    "user": "vdelecroix"
}
```

Idneed ;-)



---

archive/issue_comments_325369.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-07-20T18:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325369",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_325370.json:
```json
{
    "body": "thx",
    "created_at": "2017-07-20T18:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325370",
    "user": "chapoton"
}
```

thx



---

archive/issue_comments_325371.json:
```json
{
    "body": "Thanks to you for the review! I have an amazlingly fast random generation to come (I can generate 50x50 uniform asm in 1.5sec and 100x100 in 45secs). Still using CFTP as it is now in Sage, but way smarter code.",
    "created_at": "2017-07-20T18:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325371",
    "user": "vdelecroix"
}
```

Thanks to you for the review! I have an amazlingly fast random generation to come (I can generate 50x50 uniform asm in 1.5sec and 100x100 in 45secs). Still using CFTP as it is now in Sage, but way smarter code.



---

archive/issue_comments_325372.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-07-31T20:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23253#issuecomment-325372",
    "user": "vbraun"
}
```

Resolution: fixed
