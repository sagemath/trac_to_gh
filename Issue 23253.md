# Issue 23253: Correct definition of Alternating Sign Matrix

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2017-07-20 08:42:31

CC:  chapoton tscrim

The documentation and the method `__contains__` of alternating sign matrices is wrong

```
sage: A = AlternatingSignMatrices(3)
sage: A.cardinality()
7
sage: M = MatrixSpace(ZZ, 3)
sage: from itertools import product
sage: sum(1 for p in product([-1,0,1], repeat=9) if p in A)
9
```

Indeed the matrix

```
0  1 0
0  1 0
1 -1 1
```

is not an asm.


---

Comment by vdelecroix created at 2017-07-20 08:43:51

New commits:


---

Comment by vdelecroix created at 2017-07-20 08:43:51

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-07-20 11:26:02

The current definition is correct. Alternating in sign and sum=1 implies that the first and last must be 1.


---

Comment by vdelecroix created at 2017-07-20 12:08:33

But as mentioned in the ticket description the `__contains__` is not working... I will revert the change in documentation.


---

Comment by git created at 2017-07-20 12:28:27

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2017-07-20 12:29:03

Thanks for the comment Frédéric. I updated the commit.


---

Comment by tscrim created at 2017-07-20 12:38:10

The `check` is ignored in the `_element_constructor_`.

It is better to have the more standard `assert m not in A`.

Otherwise LGTM.


---

Comment by git created at 2017-07-20 12:53:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-07-20 16:37:49

missing sage: here

```
+            AlternatingSignMatrices(3).list()
```



---

Comment by git created at 2017-07-20 16:51:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-07-20 16:54:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-07-20 18:30:00

typo here:

```
+            # check that the total sums of the i-th
+            # rwo and i-th column is 1
```

Once corrected, the rest looks good.


---

Comment by git created at 2017-07-20 18:32:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2017-07-20 18:33:54

Idneed ;-)


---

Comment by chapoton created at 2017-07-20 18:41:25

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-07-20 18:41:25

thx


---

Comment by vdelecroix created at 2017-07-20 18:48:20

Thanks to you for the review! I have an amazlingly fast random generation to come (I can generate 50x50 uniform asm in 1.5sec and 100x100 in 45secs). Still using CFTP as it is now in Sage, but way smarter code.


---

Comment by vbraun created at 2017-07-31 20:19:21

Resolution: fixed
