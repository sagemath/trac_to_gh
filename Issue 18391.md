# Issue 18391: Implementation of Foata bijection on words

Issue created by migration from https://trac.sagemath.org/ticket/18628

Original creator: aschilling

Original creation time: 2015-06-07 05:18:12

CC:  sage-combinat

Keywords: words, permutations

The Foata bijection is implemented for permutations, but it also exists on words with repeated entries. This ticket implements this.


---

Comment by aschilling created at 2015-06-07 05:56:13

New commits:


---

Comment by git created at 2015-06-08 14:16:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2015-06-08 23:07:04

Changing keywords from "words, permutations" to "words, permutations, days65".


---

Comment by git created at 2015-06-09 02:08:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2015-06-09 15:53:20

Changing status from new to needs_review.


---

Comment by aschilling created at 2015-06-09 15:53:20

New commits:


---

Comment by zabrocki created at 2015-06-09 15:53:42

I am not sure if the name `de_standardize` is clear.  I kind of sounds like a German standardization.  What do you think about the name `standardize_inverse`, `unstandardize` or `un_standardize`?


---

Comment by MariaMonks created at 2015-06-09 15:55:49

Glad you are implementing this generalization!  I will take a look.  :)


---

Comment by saliola created at 2015-06-09 15:56:05

The code needs a slight modification to deal with words that are not lists.

```
sage: w = Word('121314')                                                                                                                                                 
sage: w.foata_bijection()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-19-9c058c286599> in <module>()
----> 1 w.foata_bijection()

/projects/24aaf173-6355-4bc5-9515-ee1048da3ea3/sage-dev-images/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/combinat/words/finite_word.pyc in foata_bijection(self)
    610         """
    611         s = self.standard_permutation()
--> 612         weight = [self.count(i) for i in range(1,max(self)+1)]
    613         return (s.foata_bijection()).de_standardize(weight)
    614 

TypeError: cannot concatenate 'str' and 'int' objects
```



---

Comment by aschilling created at 2015-06-09 15:57:28

Replying to [comment:6 zabrocki]:
> I am not sure if the name `de_standardize` is clear.  I kind of sounds like a German standardization.  What do you think about the name `standardize_inverse`, `unstandardize` or `un_standardize`?

We took a poll at Sage Days 65 and the majority of people is in favor of destandardize.


---

Comment by saliola created at 2015-06-09 15:58:12

Also, a documentation request: could you add a reference to a paper where the bijection is defined and proved?


---

Comment by saliola created at 2015-06-09 15:58:22

Changing status from needs_review to needs_work.


---

Comment by zabrocki created at 2015-06-09 16:05:26

I made some minor changes to the documentation.
----
New commits:


---

Comment by git created at 2015-06-09 16:07:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2015-06-09 19:59:52

New commits:


---

Comment by aschilling created at 2015-06-09 19:59:52

Changing status from needs_work to needs_review.


---

Comment by aschilling created at 2015-06-09 20:00:48

I hope all issues are now fixed!


---

Comment by zabrocki created at 2015-06-09 22:33:29

I think that this looks fine and all tests pass.


---

Comment by zabrocki created at 2015-06-09 22:33:29

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-06-11 13:50:48

Resolution: fixed


---

Comment by jdemeyer created at 2015-07-26 15:32:40

Real author names only please.
