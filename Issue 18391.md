# Issue 18391: Implementation of Foata bijection on words

archive/issues_018391.json:
```json
{
    "body": "CC:  sage-combinat\n\nKeywords: words, permutations\n\nThe Foata bijection is implemented for permutations, but it also exists on words with repeated entries. This ticket implements this.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18628\n\n",
    "created_at": "2015-06-07T05:18:12Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Implementation of Foata bijection on words",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18391",
    "user": "aschilling"
}
```
CC:  sage-combinat

Keywords: words, permutations

The Foata bijection is implemented for permutations, but it also exists on words with repeated entries. This ticket implements this.

Issue created by migration from https://trac.sagemath.org/ticket/18628





---

archive/issue_comments_249773.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-06-07T05:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249773",
    "user": "aschilling"
}
```

New commits:



---

archive/issue_comments_249774.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-08T14:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249774",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249775.json:
```json
{
    "body": "Changing keywords from \"words, permutations\" to \"words, permutations, days65\".",
    "created_at": "2015-06-08T23:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249775",
    "user": "aschilling"
}
```

Changing keywords from "words, permutations" to "words, permutations, days65".



---

archive/issue_comments_249776.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-09T02:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249776",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249777.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-09T15:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249777",
    "user": "aschilling"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_249778.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-06-09T15:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249778",
    "user": "aschilling"
}
```

New commits:



---

archive/issue_comments_249779.json:
```json
{
    "body": "I am not sure if the name `de_standardize` is clear.  I kind of sounds like a German standardization.  What do you think about the name `standardize_inverse`, `unstandardize` or `un_standardize`?",
    "created_at": "2015-06-09T15:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249779",
    "user": "zabrocki"
}
```

I am not sure if the name `de_standardize` is clear.  I kind of sounds like a German standardization.  What do you think about the name `standardize_inverse`, `unstandardize` or `un_standardize`?



---

archive/issue_comments_249780.json:
```json
{
    "body": "Glad you are implementing this generalization!  I will take a look.  :)",
    "created_at": "2015-06-09T15:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249780",
    "user": "MariaMonks"
}
```

Glad you are implementing this generalization!  I will take a look.  :)



---

archive/issue_comments_249781.json:
```json
{
    "body": "The code needs a slight modification to deal with words that are not lists.\n\n```\nsage: w = Word('121314')                                                                                                                                                 \nsage: w.foata_bijection()\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-19-9c058c286599> in <module>()\n----> 1 w.foata_bijection()\n\n/projects/24aaf173-6355-4bc5-9515-ee1048da3ea3/sage-dev-images/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/combinat/words/finite_word.pyc in foata_bijection(self)\n    610         \"\"\"\n    611         s = self.standard_permutation()\n--> 612         weight = [self.count(i) for i in range(1,max(self)+1)]\n    613         return (s.foata_bijection()).de_standardize(weight)\n    614 \n\nTypeError: cannot concatenate 'str' and 'int' objects\n```\n",
    "created_at": "2015-06-09T15:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249781",
    "user": "saliola"
}
```

The code needs a slight modification to deal with words that are not lists.

```
sage: w = Word('121314')                                                                                                                                                 
sage: w.foata_bijection()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-19-9c058c286599> in <module>()
----> 1 w.foata_bijection()

/projects/24aaf173-6355-4bc5-9515-ee1048da3ea3/sage-dev-images/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/combinat/words/finite_word.pyc in foata_bijection(self)
    610         """
    611         s = self.standard_permutation()
--> 612         weight = [self.count(i) for i in range(1,max(self)+1)]
    613         return (s.foata_bijection()).de_standardize(weight)
    614 

TypeError: cannot concatenate 'str' and 'int' objects
```




---

archive/issue_comments_249782.json:
```json
{
    "body": "Replying to [comment:6 zabrocki]:\n> I am not sure if the name `de_standardize` is clear.  I kind of sounds like a German standardization.  What do you think about the name `standardize_inverse`, `unstandardize` or `un_standardize`?\n\nWe took a poll at Sage Days 65 and the majority of people is in favor of destandardize.",
    "created_at": "2015-06-09T15:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249782",
    "user": "aschilling"
}
```

Replying to [comment:6 zabrocki]:
> I am not sure if the name `de_standardize` is clear.  I kind of sounds like a German standardization.  What do you think about the name `standardize_inverse`, `unstandardize` or `un_standardize`?

We took a poll at Sage Days 65 and the majority of people is in favor of destandardize.



---

archive/issue_comments_249783.json:
```json
{
    "body": "Also, a documentation request: could you add a reference to a paper where the bijection is defined and proved?",
    "created_at": "2015-06-09T15:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249783",
    "user": "saliola"
}
```

Also, a documentation request: could you add a reference to a paper where the bijection is defined and proved?



---

archive/issue_comments_249784.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-09T15:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249784",
    "user": "saliola"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_249785.json:
```json
{
    "body": "I made some minor changes to the documentation.\n----\nNew commits:",
    "created_at": "2015-06-09T16:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249785",
    "user": "zabrocki"
}
```

I made some minor changes to the documentation.
----
New commits:



---

archive/issue_comments_249786.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-09T16:07:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249786",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249787.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-06-09T19:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249787",
    "user": "aschilling"
}
```

New commits:



---

archive/issue_comments_249788.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-09T19:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249788",
    "user": "aschilling"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_249789.json:
```json
{
    "body": "I hope all issues are now fixed!",
    "created_at": "2015-06-09T20:00:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249789",
    "user": "aschilling"
}
```

I hope all issues are now fixed!



---

archive/issue_comments_249790.json:
```json
{
    "body": "I think that this looks fine and all tests pass.",
    "created_at": "2015-06-09T22:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249790",
    "user": "zabrocki"
}
```

I think that this looks fine and all tests pass.



---

archive/issue_comments_249791.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-09T22:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249791",
    "user": "zabrocki"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_249792.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-11T13:50:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249792",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_249793.json:
```json
{
    "body": "Real author names only please.",
    "created_at": "2015-07-26T15:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18391#issuecomment-249793",
    "user": "jdemeyer"
}
```

Real author names only please.
