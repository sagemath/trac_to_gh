# Issue 12716: Set new default parameters for RandomGNP

archive/issues_012716.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  ncohen jdemeyer\n\nThis patch changes the default parameters of graphs.RandomGNP, following  discussion for patch #12362.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12888\n\n",
    "created_at": "2012-04-28T20:01:28Z",
    "labels": [
        "graph theory",
        "major",
        "bug"
    ],
    "title": "Set new default parameters for RandomGNP",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12716",
    "user": "dcoudert"
}
```
Assignee: jason, ncohen, rlm

CC:  ncohen jdemeyer

This patch changes the default parameters of graphs.RandomGNP, following  discussion for patch #12362.

Issue created by migration from https://trac.sagemath.org/ticket/12888





---

archive/issue_comments_152284.json:
```json
{
    "body": "I added a set_random_seed in generic_graph.py, because randomly generated graphs are not always hamiltonian.",
    "created_at": "2012-04-28T20:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152284",
    "user": "dcoudert"
}
```

I added a set_random_seed in generic_graph.py, because randomly generated graphs are not always hamiltonian.



---

archive/issue_comments_152285.json:
```json
{
    "body": "The default method is now set to ``Sage`` since it seems faster than the ``networkx`` method, except for very sparse graphs where networkx with ``fast=True`` is faster. Bellow are some experiments from very dense to very spare graphs.\n\n1) When ``method=\"networkx\"`` and ``fast=False`` (so before this patch and after patch #12362)\n\n```\nsage: timeit('graphs.RandomGNP(2000, .8, method = \"networkx\", fast = False)') \n5 loops, best of 3: 22.5 s per loop\nsage: timeit('graphs.RandomGNP(2000, .1, method = \"networkx\", fast = False)') \n5 loops, best of 3: 6.38 s per loop\nsage: timeit('graphs.RandomGNP(2000, .01, method = \"networkx\", fast = False)') \n5 loops, best of 3: 4.21 s per loop\nsage: timeit('graphs.RandomGNP(2000, .001, method = \"networkx\", fast = False)') \n5 loops, best of 3: 4.07 s per loop\n```\n\n\n2) When ``method=\"networkx\"`` and ``fast=True``\n\n```\nsage: timeit('graphs.RandomGNP(2000, .8, method = \"networkx\", fast = True)') \n5 loops, best of 3: 19.6 s per loop\nsage: timeit('graphs.RandomGNP(2000, .1, method = \"networkx\", fast = True)') \n5 loops, best of 3: 2.44 s per loop\nsage: timeit('graphs.RandomGNP(2000, .01, method = \"networkx\", fast = True)') \n5 loops, best of 3: 237 ms per loop\nsage: timeit('graphs.RandomGNP(2000, .001, method = \"networkx\", fast = True)') \n25 loops, best of 3: 27.9 ms per loop\n```\n\n\n3) When ``method=\"Sage\"`` (with this patch)\n\n```\nsage: timeit('graphs.RandomGNP(2000, .8, method = \"Sage\")') \n5 loops, best of 3: 11.3 s per loop\nsage: timeit('graphs.RandomGNP(2000, .1, method = \"Sage\")') \n5 loops, best of 3: 1.38 s per loop\nsage: timeit('graphs.RandomGNP(2000, .01, method = \"Sage\")') \n5 loops, best of 3: 166 ms per loop\nsage: timeit('graphs.RandomGNP(2000, .001, method = \"Sage\")') \n5 loops, best of 3: 49 ms per loop\n```\n",
    "created_at": "2012-04-29T07:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152285",
    "user": "dcoudert"
}
```

The default method is now set to ``Sage`` since it seems faster than the ``networkx`` method, except for very sparse graphs where networkx with ``fast=True`` is faster. Bellow are some experiments from very dense to very spare graphs.

1) When ``method="networkx"`` and ``fast=False`` (so before this patch and after patch #12362)

```
sage: timeit('graphs.RandomGNP(2000, .8, method = "networkx", fast = False)') 
5 loops, best of 3: 22.5 s per loop
sage: timeit('graphs.RandomGNP(2000, .1, method = "networkx", fast = False)') 
5 loops, best of 3: 6.38 s per loop
sage: timeit('graphs.RandomGNP(2000, .01, method = "networkx", fast = False)') 
5 loops, best of 3: 4.21 s per loop
sage: timeit('graphs.RandomGNP(2000, .001, method = "networkx", fast = False)') 
5 loops, best of 3: 4.07 s per loop
```


2) When ``method="networkx"`` and ``fast=True``

```
sage: timeit('graphs.RandomGNP(2000, .8, method = "networkx", fast = True)') 
5 loops, best of 3: 19.6 s per loop
sage: timeit('graphs.RandomGNP(2000, .1, method = "networkx", fast = True)') 
5 loops, best of 3: 2.44 s per loop
sage: timeit('graphs.RandomGNP(2000, .01, method = "networkx", fast = True)') 
5 loops, best of 3: 237 ms per loop
sage: timeit('graphs.RandomGNP(2000, .001, method = "networkx", fast = True)') 
25 loops, best of 3: 27.9 ms per loop
```


3) When ``method="Sage"`` (with this patch)

```
sage: timeit('graphs.RandomGNP(2000, .8, method = "Sage")') 
5 loops, best of 3: 11.3 s per loop
sage: timeit('graphs.RandomGNP(2000, .1, method = "Sage")') 
5 loops, best of 3: 1.38 s per loop
sage: timeit('graphs.RandomGNP(2000, .01, method = "Sage")') 
5 loops, best of 3: 166 ms per loop
sage: timeit('graphs.RandomGNP(2000, .001, method = "Sage")') 
5 loops, best of 3: 49 ms per loop
```




---

archive/issue_comments_152286.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-04-29T07:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152286",
    "user": "dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_152287.json:
```json
{
    "body": "I think it would be good to merge this in sage-5.0.",
    "created_at": "2012-04-29T12:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152287",
    "user": "jdemeyer"
}
```

I think it would be good to merge this in sage-5.0.



---

archive/issue_comments_152288.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2012-04-29T12:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152288",
    "user": "jdemeyer"
}
```

Changing priority from major to critical.



---

archive/issue_comments_152289.json:
```json
{
    "body": "Hellooo !!! Short of the \"defaault\" I think this patch is good `:-)`\n\nNathann",
    "created_at": "2012-04-29T13:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152289",
    "user": "ncohen"
}
```

Hellooo !!! Short of the "defaault" I think this patch is good `:-)`

Nathann



---

archive/issue_comments_152290.json:
```json
{
    "body": "Attachment\n\nI have changed \"defaault\" -> \"default\". \n\nLet me know if other modifications are needed.",
    "created_at": "2012-04-29T14:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152290",
    "user": "dcoudert"
}
```

Attachment

I have changed "defaault" -> "default". 

Let me know if other modifications are needed.



---

archive/issue_comments_152291.json:
```json
{
    "body": "Well, as all long test pass in the graph/ folder... `:-)`\n\nThanks for this patch, and to Jeroen too ! `;-)`\n\nNathann",
    "created_at": "2012-04-29T21:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152291",
    "user": "ncohen"
}
```

Well, as all long test pass in the graph/ folder... `:-)`

Thanks for this patch, and to Jeroen too ! `;-)`

Nathann



---

archive/issue_comments_152292.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-29T21:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152292",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_152293.json:
```json
{
    "body": "Thanks for the review.\n\nLong test also pass in combinat/ folder and sandpiles/ folder.",
    "created_at": "2012-04-30T05:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152293",
    "user": "dcoudert"
}
```

Thanks for the review.

Long test also pass in combinat/ folder and sandpiles/ folder.



---

archive/issue_comments_152294.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-05-01T05:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-152294",
    "user": "jdemeyer"
}
```

Resolution: fixed
