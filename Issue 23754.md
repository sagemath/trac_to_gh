# Issue 23754: Update curl to 7.56.0

archive/issues_023754.json:
```json
{
    "body": "On at least one OS X High Sierra machine, Sage's current version of curl (7.53.1) does not build, while 7.56.0 does. So let's upgrade.\n\nTarball: https://curl.haxx.se/download/curl-7.56.0.tar.bz2\n\nIssue created by migration from https://trac.sagemath.org/ticket/23991\n\n",
    "created_at": "2017-10-08T16:54:27Z",
    "labels": [
        "packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Update curl to 7.56.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23754",
    "user": "@jhpalmieri"
}
```
On at least one OS X High Sierra machine, Sage's current version of curl (7.53.1) does not build, while 7.56.0 does. So let's upgrade.

Tarball: https://curl.haxx.se/download/curl-7.56.0.tar.bz2

Issue created by migration from https://trac.sagemath.org/ticket/23991





---

archive/issue_comments_332862.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-08T16:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332862",
    "user": "@jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_332863.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-10-08T16:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332863",
    "user": "@jhpalmieri"
}
```

New commits:



---

archive/issue_comments_332864.json:
```json
{
    "body": "One test in the testsuite fails for me:\n\n```\n[curl-7.56.0] test 1014...Mismatch in features lists:\n[curl-7.56.0] curl:        asynchdns ipv6 libz multissl ntlm ntlm_wb ssl tls-srp unixsockets\n[curl-7.56.0] curl-config: asynchdns https-proxy ipv6 libz multissl ntlm ntlm_wb ssl tls-srp unixsockets\n[curl-7.56.0]  postcheck FAILED\n```\n\nBut the testsuite has failed in the past for OS X: see #22686. So I don't think this should be an obstacle.",
    "created_at": "2017-10-08T16:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332864",
    "user": "@jhpalmieri"
}
```

One test in the testsuite fails for me:

```
[curl-7.56.0] test 1014...Mismatch in features lists:
[curl-7.56.0] curl:        asynchdns ipv6 libz multissl ntlm ntlm_wb ssl tls-srp unixsockets
[curl-7.56.0] curl-config: asynchdns https-proxy ipv6 libz multissl ntlm ntlm_wb ssl tls-srp unixsockets
[curl-7.56.0]  postcheck FAILED
```

But the testsuite has failed in the past for OS X: see #22686. So I don't think this should be an obstacle.



---

archive/issue_comments_332865.json:
```json
{
    "body": "On another machine the test suite passes, so maybe it's because I installed the Sage `openssl` package that is causing the failure.",
    "created_at": "2017-10-08T18:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332865",
    "user": "@jhpalmieri"
}
```

On another machine the test suite passes, so maybe it's because I installed the Sage `openssl` package that is causing the failure.



---

archive/issue_comments_332866.json:
```json
{
    "body": "Sorry if this is a newbie question. I'm trying to install patch #23898 on OSX High Sierra. Curl-7.53.1 fails for me too. I deleted the old version and downloaded curl-7.56.0 in the upstream folder and reran \n\n```\nSAGE_INSTALL_GCC=yes make ptestlong\n```\n\nbut it again downloaded curl-7.53.1 and gave the same error. What should I do to avoid this?\nThanks.",
    "created_at": "2017-10-17T06:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332866",
    "user": "@ayyer"
}
```

Sorry if this is a newbie question. I'm trying to install patch #23898 on OSX High Sierra. Curl-7.53.1 fails for me too. I deleted the old version and downloaded curl-7.56.0 in the upstream folder and reran 

```
SAGE_INSTALL_GCC=yes make ptestlong
```

but it again downloaded curl-7.53.1 and gave the same error. What should I do to avoid this?
Thanks.



---

archive/issue_comments_332867.json:
```json
{
    "body": "> but it again downloaded curl-7.53.1 and gave the same error. What should I do to avoid this?\n\nI got this working by manually changing the two files as described in the ticket. Sorry for polluting the discussion.",
    "created_at": "2017-10-17T08:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332867",
    "user": "@ayyer"
}
```

> but it again downloaded curl-7.53.1 and gave the same error. What should I do to avoid this?

I got this working by manually changing the two files as described in the ticket. Sorry for polluting the discussion.



---

archive/issue_comments_332868.json:
```json
{
    "body": "Why do we need to build curl on OSX, is there a reason?\n\nIsn't curl is in the set of command-line tools which are shipped by default, even without Xcode installed?",
    "created_at": "2017-10-18T08:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332868",
    "user": "@dimpase"
}
```

Why do we need to build curl on OSX, is there a reason?

Isn't curl is in the set of command-line tools which are shipped by default, even without Xcode installed?



---

archive/issue_comments_332869.json:
```json
{
    "body": "Replying to [comment:7 dimpase]:\n> Why do we need to build curl on OSX, is there a reason?\n> \n> Isn't curl is in the set of command-line tools which are shipped by default, even without Xcode installed?\n\ncurl isn't just a command-line program. Probably the other curl stuff (in particular the header files) isn't installed by default.",
    "created_at": "2017-10-18T09:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332869",
    "user": "@jdemeyer"
}
```

Replying to [comment:7 dimpase]:
> Why do we need to build curl on OSX, is there a reason?
> 
> Isn't curl is in the set of command-line tools which are shipped by default, even without Xcode installed?

curl isn't just a command-line program. Probably the other curl stuff (in particular the header files) isn't installed by default.



---

archive/issue_comments_332870.json:
```json
{
    "body": "Oh, you are right. Sorry for noise.",
    "created_at": "2017-10-18T09:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332870",
    "user": "@dimpase"
}
```

Oh, you are right. Sorry for noise.



---

archive/issue_comments_332871.json:
```json
{
    "body": "`/usr/include` is not present without Xcode and/or the command line tools. On a machine on which I've installed Xcode and the command line tools, I have `/usr/lib/libcurl.4.dylib` and a directory `/usr/include/curl` with various header files, so this might be good enough for what Sage needs. But we can think about that on another ticket.",
    "created_at": "2017-10-18T14:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332871",
    "user": "@jhpalmieri"
}
```

`/usr/include` is not present without Xcode and/or the command line tools. On a machine on which I've installed Xcode and the command line tools, I have `/usr/lib/libcurl.4.dylib` and a directory `/usr/include/curl` with various header files, so this might be good enough for what Sage needs. But we can think about that on another ticket.



---

archive/issue_comments_332872.json:
```json
{
    "body": "Replying to [comment:10 jhpalmieri]:\n> On a machine on which I've installed Xcode and the command line tools\n\n...which you need anyway if you build Sage from source. That's good to know because it means that we can assume that those headers exist on OS X.",
    "created_at": "2017-10-18T15:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332872",
    "user": "@jdemeyer"
}
```

Replying to [comment:10 jhpalmieri]:
> On a machine on which I've installed Xcode and the command line tools

...which you need anyway if you build Sage from source. That's good to know because it means that we can assume that those headers exist on OS X.



---

archive/issue_comments_332873.json:
```json
{
    "body": "Oh, it is also curl version 7.54.0, which is not that old.",
    "created_at": "2017-10-18T15:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332873",
    "user": "@jhpalmieri"
}
```

Oh, it is also curl version 7.54.0, which is not that old.



---

archive/issue_comments_332874.json:
```json
{
    "body": "See #24081.",
    "created_at": "2017-10-20T18:12:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332874",
    "user": "@jhpalmieri"
}
```

See #24081.



---

archive/issue_comments_332875.json:
```json
{
    "body": "(Let's keep this open because it might be worth upgrading curl anyway.)",
    "created_at": "2017-10-20T18:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332875",
    "user": "@jhpalmieri"
}
```

(Let's keep this open because it might be worth upgrading curl anyway.)



---

archive/issue_comments_332876.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-31T10:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332876",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_332877.json:
```json
{
    "body": "Changing priority from critical to major.",
    "created_at": "2017-10-31T10:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332877",
    "user": "@jdemeyer"
}
```

Changing priority from critical to major.



---

archive/issue_comments_332878.json:
```json
{
    "body": "7.56.0 -> 7.56.1\n----\nNew commits:",
    "created_at": "2017-10-31T11:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332878",
    "user": "@jdemeyer"
}
```

7.56.0 -> 7.56.1
----
New commits:



---

archive/issue_comments_332879.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-31T11:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332879",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_332880.json:
```json
{
    "body": "Seems to work. John, I'll let you set positive_review if you agree.",
    "created_at": "2017-10-31T11:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332880",
    "user": "@jdemeyer"
}
```

Seems to work. John, I'll let you set positive_review if you agree.



---

archive/issue_comments_332881.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-31T14:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332881",
    "user": "@jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_332882.json:
```json
{
    "body": "Builds and passes its test-suite.",
    "created_at": "2017-10-31T14:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332882",
    "user": "@jhpalmieri"
}
```

Builds and passes its test-suite.



---

archive/issue_comments_332883.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-11-02T11:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23754#issuecomment-332883",
    "user": "@vbraun"
}
```

Resolution: fixed
