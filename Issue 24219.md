# Issue 24219: class for the field of real number

archive/issues_024219.json:
```json
{
    "body": "CC:  rws tscrim egourgoulhon @mjungmath\n\nWe create a (mostly abstract) class to model the set of real numbers.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24456\n\n",
    "created_at": "2018-01-01T16:17:45Z",
    "labels": [
        "basic arithmetic",
        "major",
        "enhancement"
    ],
    "title": "class for the field of real number",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24219",
    "user": "vdelecroix"
}
```
CC:  rws tscrim egourgoulhon @mjungmath

We create a (mostly abstract) class to model the set of real numbers.

Issue created by migration from https://trac.sagemath.org/ticket/24456





---

archive/issue_comments_339166.json:
```json
{
    "body": "+1",
    "created_at": "2018-01-01T17:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339166",
    "user": "tscrim"
}
```

+1



---

archive/issue_comments_339167.json:
```json
{
    "body": ":-) pushing in a minute...",
    "created_at": "2018-01-01T17:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339167",
    "user": "vdelecroix"
}
```

:-) pushing in a minute...



---

archive/issue_comments_339168.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-01T18:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339168",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_339169.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-01-01T18:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339169",
    "user": "vdelecroix"
}
```

New commits:



---

archive/issue_comments_339170.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-01-01T21:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339170",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_339171.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-01T22:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339171",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_339172.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-01-01T22:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339172",
    "user": "vdelecroix"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_339173.json:
```json
{
    "body": "For me this looks fine (I can now create the object and use it in formal expressions) and patchbot is green. If you think this is not enough for a review then please set back to \"needs review\".",
    "created_at": "2018-01-02T07:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339173",
    "user": "rws"
}
```

For me this looks fine (I can now create the object and use it in formal expressions) and patchbot is green. If you think this is not enough for a review then please set back to "needs review".



---

archive/issue_comments_339174.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-02T07:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339174",
    "user": "rws"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_339175.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-01-02T14:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339175",
    "user": "tmonteil"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_339176.json:
```json
{
    "body": "Thanks. I also had a question turning up while working on #24457. The code here does not support `RealField(prec)` anymore---the init method only has self argument, is this intended? Since `real_mpfr.RealField()` will be renamed should `create_RealField(prec)` be used everywhere instead?",
    "created_at": "2018-01-02T16:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339176",
    "user": "rws"
}
```

Thanks. I also had a question turning up while working on #24457. The code here does not support `RealField(prec)` anymore---the init method only has self argument, is this intended? Since `real_mpfr.RealField()` will be renamed should `create_RealField(prec)` be used everywhere instead?



---

archive/issue_comments_339177.json:
```json
{
    "body": "Replying to [comment:12 rws]:\n> Thanks. I also had a question turning up while working on #24457. The code here does not support `RealField(prec)` anymore---the init method only has self argument, is this intended? \n\nIt is intended: *the field of real number is the field of real number* (see e.g. [wikipedia](https://en.wikipedia.org/wiki/Real_number)). The code provided in the branch `u/vdelecroix/24456` is new, so it never used to support anything.\n\n> Since `real_mpfr.RealField()` will be renamed should `create_RealField(prec)` be used everywhere instead?\n\nNo. `create_RealField` is a convenience to handle options for the completion functor. There is no reason to use it directly.\n\nThe `real_field.RealField` in this branch has (almost) nothing to do with `real_mpfr.RealField`.",
    "created_at": "2018-01-02T16:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339177",
    "user": "vdelecroix"
}
```

Replying to [comment:12 rws]:
> Thanks. I also had a question turning up while working on #24457. The code here does not support `RealField(prec)` anymore---the init method only has self argument, is this intended? 

It is intended: *the field of real number is the field of real number* (see e.g. [wikipedia](https://en.wikipedia.org/wiki/Real_number)). The code provided in the branch `u/vdelecroix/24456` is new, so it never used to support anything.

> Since `real_mpfr.RealField()` will be renamed should `create_RealField(prec)` be used everywhere instead?

No. `create_RealField` is a convenience to handle options for the completion functor. There is no reason to use it directly.

The `real_field.RealField` in this branch has (almost) nothing to do with `real_mpfr.RealField`.



---

archive/issue_comments_339178.json:
```json
{
    "body": "Some comments:\n\n- I think the completion of `ZZ` should be in a separate ticket for better granularity.\n- Similarly for changing the output of `CompletionFunctor` to have `prec`.\n- Should be \"field of real numbers\".\n- Why the check for fa\u00e7ade sets in those tests? Are tests failing otherwise? I don't think they should be necessary...\n- It would be nice if `RealField` could be a common ABC for all classes that model **R**, but that is not possible because it inherits from `Singleton` (IMO, is a shortcoming of that class, but that is a different issue).",
    "created_at": "2018-01-03T00:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339178",
    "user": "tscrim"
}
```

Some comments:

- I think the completion of `ZZ` should be in a separate ticket for better granularity.
- Similarly for changing the output of `CompletionFunctor` to have `prec`.
- Should be "field of real numbers".
- Why the check for fa√ßade sets in those tests? Are tests failing otherwise? I don't think they should be necessary...
- It would be nice if `RealField` could be a common ABC for all classes that model **R**, but that is not possible because it inherits from `Singleton` (IMO, is a shortcoming of that class, but that is a different issue).



---

archive/issue_comments_339179.json:
```json
{
    "body": "I don't quite understand the purpose of this new `RealField`. Maybe it would be good to elaborate on that.\n\nWhy is this thing a `Parent`? Given that it doesn't have Elements (in the Sage sense), it probably should be a `CategoryObject` and not a `Parent`.",
    "created_at": "2018-01-03T08:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339179",
    "user": "jdemeyer"
}
```

I don't quite understand the purpose of this new `RealField`. Maybe it would be good to elaborate on that.

Why is this thing a `Parent`? Given that it doesn't have Elements (in the Sage sense), it probably should be a `CategoryObject` and not a `Parent`.



---

archive/issue_comments_339180.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-01-03T08:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339180",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_339181.json:
```json
{
    "body": "Replying to [comment:15 jdemeyer]:\n> I don't quite understand the purpose of this new `RealField`. Maybe it would be good to elaborate on that.\n\n#24171 depends on this.",
    "created_at": "2018-01-03T11:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339181",
    "user": "rws"
}
```

Replying to [comment:15 jdemeyer]:
> I don't quite understand the purpose of this new `RealField`. Maybe it would be good to elaborate on that.

#24171 depends on this.



---

archive/issue_comments_339182.json:
```json
{
    "body": "OK, I sort of see where this is going. But it doesn't explain why it is a `Parent`.",
    "created_at": "2018-01-03T14:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339182",
    "user": "jdemeyer"
}
```

OK, I sort of see where this is going. But it doesn't explain why it is a `Parent`.



---

archive/issue_comments_339183.json:
```json
{
    "body": "I am fine making it a `CategoryObject` with category `Fields().Infinite()`.",
    "created_at": "2018-01-03T15:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339183",
    "user": "vdelecroix"
}
```

I am fine making it a `CategoryObject` with category `Fields().Infinite()`.



---

archive/issue_comments_339184.json:
```json
{
    "body": "This is initialized as a facade parent, so it should not have an `Element` class.",
    "created_at": "2018-01-03T16:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339184",
    "user": "tscrim"
}
```

This is initialized as a facade parent, so it should not have an `Element` class.



---

archive/issue_comments_339185.json:
```json
{
    "body": "Replying to [comment:21 tscrim]:\n> This is initialized as a facade parent\n\nWhy? As I said above, I don't see why this should be a `Parent` in the first place.\n\nAlso, it would be good to replace the `coerce_map_from` method by a real [PEP 3119](https://www.python.org/dev/peps/pep-3119/) check like\n\n```\nsage: R = RealField()  # abstract real numbers\nsage: issubclass(RR, R)\nTrue\n```\n\nIs that in line with what you have in mind?",
    "created_at": "2018-01-03T16:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339185",
    "user": "jdemeyer"
}
```

Replying to [comment:21 tscrim]:
> This is initialized as a facade parent

Why? As I said above, I don't see why this should be a `Parent` in the first place.

Also, it would be good to replace the `coerce_map_from` method by a real [PEP 3119](https://www.python.org/dev/peps/pep-3119/) check like

```
sage: R = RealField()  # abstract real numbers
sage: issubclass(RR, R)
True
```

Is that in line with what you have in mind?



---

archive/issue_comments_339186.json:
```json
{
    "body": "Replying to [comment:22 jdemeyer]:\n> Replying to [comment:21 tscrim]:\n> > This is initialized as a facade parent\n> \n> Why? As I said above, I don't see why this should be a `Parent` in the first place.\n> \n> Also, it would be good to replace the `coerce_map_from` method by a real [PEP 3119](https://www.python.org/dev/peps/pep-3119/) check like\n> {{{\n> sage: R = RealField()  # abstract real numbers\n> sage: issubclass(RR, R)\n> True\n> }}}\n> Is that in line with what you have in mind?\n\nThis is the kind of purposes I want this class for. `RealField()` should know about all ways of modelling concretely real numbers in Sage (but how?) and it should be possible to query it about real number questions, like the example you mentioned (but how?). The main problem I have is how to handle the distinction between exact subrings (e.g. QQ) versus approximations (e.g. RDF).\n\nNote that in your example we might also want to make the following works\n\n```\nsage: import numbers\nsage: isinstance(RR.element_class, numbers.Real)\n```\n",
    "created_at": "2018-01-03T17:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339186",
    "user": "vdelecroix"
}
```

Replying to [comment:22 jdemeyer]:
> Replying to [comment:21 tscrim]:
> > This is initialized as a facade parent
> 
> Why? As I said above, I don't see why this should be a `Parent` in the first place.
> 
> Also, it would be good to replace the `coerce_map_from` method by a real [PEP 3119](https://www.python.org/dev/peps/pep-3119/) check like
> {{{
> sage: R = RealField()  # abstract real numbers
> sage: issubclass(RR, R)
> True
> }}}
> Is that in line with what you have in mind?

This is the kind of purposes I want this class for. `RealField()` should know about all ways of modelling concretely real numbers in Sage (but how?) and it should be possible to query it about real number questions, like the example you mentioned (but how?). The main problem I have is how to handle the distinction between exact subrings (e.g. QQ) versus approximations (e.g. RDF).

Note that in your example we might also want to make the following works

```
sage: import numbers
sage: isinstance(RR.element_class, numbers.Real)
```




---

archive/issue_comments_339187.json:
```json
{
    "body": "Replying to [comment:23 vdelecroix]:\n> This is the kind of purposes I want this class for.\n\nExcellent! A big +1 from me.",
    "created_at": "2018-01-04T10:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339187",
    "user": "jdemeyer"
}
```

Replying to [comment:23 vdelecroix]:
> This is the kind of purposes I want this class for.

Excellent! A big +1 from me.



---

archive/issue_comments_339188.json:
```json
{
    "body": "Replying to [comment:23 vdelecroix]:\n> {{{\n> sage: import numbers\n> sage: isinstance(RR.element_class, numbers.Real)\n> }}}\n\nThis already works except for the fact that `RR` doesn't have an `element_class` attribute:\n\n```\nsage: import numbers\nsage: isinstance(RR.an_element(), numbers.Real)\nTrue\n```\n\n\nBut I'd really like it to work on the *parent* since it's the parent which models the real numbers. Also, the coercion framework mostly works with parents, so this could be useful there too.",
    "created_at": "2018-01-04T10:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339188",
    "user": "jdemeyer"
}
```

Replying to [comment:23 vdelecroix]:
> {{{
> sage: import numbers
> sage: isinstance(RR.element_class, numbers.Real)
> }}}

This already works except for the fact that `RR` doesn't have an `element_class` attribute:

```
sage: import numbers
sage: isinstance(RR.an_element(), numbers.Real)
True
```


But I'd really like it to work on the *parent* since it's the parent which models the real numbers. Also, the coercion framework mostly works with parents, so this could be useful there too.



---

archive/issue_comments_339189.json:
```json
{
    "body": "It would be nice if this could serve as the base field for real manifolds. \nFor the moment we have:\n\n```\nsage: M = Manifold(3, 'M', field='real'); M\n3-dimensional differentiable manifold M\nsage: M.base_field()\nReal Field with 53 bits of precision\nsage: M.base_field() is RR\nTrue\n```\n\nwhich is a bit awkward, since all subsequent calculus on `M` has nothing to do with `RR`. Actually `RR` is used as a proxy for the field of real numbers, so it would be very nice to replace it by something closer to the actual field of real numbers, as the new `RealField` proposed here (as far as I understand).",
    "created_at": "2018-01-04T15:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339189",
    "user": "egourgoulhon"
}
```

It would be nice if this could serve as the base field for real manifolds. 
For the moment we have:

```
sage: M = Manifold(3, 'M', field='real'); M
3-dimensional differentiable manifold M
sage: M.base_field()
Real Field with 53 bits of precision
sage: M.base_field() is RR
True
```

which is a bit awkward, since all subsequent calculus on `M` has nothing to do with `RR`. Actually `RR` is used as a proxy for the field of real numbers, so it would be very nice to replace it by something closer to the actual field of real numbers, as the new `RealField` proposed here (as far as I understand).



---

archive/issue_comments_339190.json:
```json
{
    "body": "Sorry for being mute, i did not have time to write something when i put this ticket back on needs-review, but i did not want it to be merged that way. Blitzkrieg is not the way, there have been too much projects within Sage dying because of a lack of consensus, and i do not want the idea of a \"genuine\" real field to end like this.\n\nOf course i am in favor of having such an abstraction and i am happy that some people support this as well, however when i promoted such an idea in various sage days, tutorials, discussions, tickets, it was clear from that experience that there was no consensus about that question, at all.\n\nHence, i think that a collectively approved decision on such subject should happen before code. For example, the proposed branch implies behaviors such as (random undocumented examples):\n\n\n```\nsage: R = QQ.completion(infinity, infinity) ; R\nReal Field\n\nsage: QQbar(sqrt(2)).parent()\nAlgebraic Field\nsage: R(QQbar(sqrt(2))).parent()\nAlgebraic Real Field\n\nsage: QQbar(sqrt(1)).parent()\nAlgebraic Field\nsage: R(QQbar(sqrt(1))).parent()\nRational Field\n\nsage: 0.1 in R\nFalse\n\nsage: R(RDF(0.1))\n1/10\n\nsage: R(pi)\nValueError: Can't coerce `pi` in any parent `Real Field` is a facade for\n\nsage: R(ZZ(1)).parent()\nRational Field\n```\n\n\nWhich behavior do we want for this ? Which interplay with existing representations of real numbers ? What are the implications in the whole Sage ? How do we ensure a smooth transition from the current ill-named `RR` and a genuine `RR` corresponding to the field of real numbers ? Since real numbers are everywhere, we should think about the consequences before being tied with wrong design and the imperative of backward compatibility.\n\nAll this to say that we need to have a plan with a boarder view, on which the community agrees.\n\nNote that Ralf opened a ticket on that subject, and since ticket #17713 already has some debates on this subject and a similar purpose, let me suggest to continue the discussion there (so that we collect every input in a single place), and make it a task with appropriate subtickets once we reach a consensus.",
    "created_at": "2018-01-05T01:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339190",
    "user": "tmonteil"
}
```

Sorry for being mute, i did not have time to write something when i put this ticket back on needs-review, but i did not want it to be merged that way. Blitzkrieg is not the way, there have been too much projects within Sage dying because of a lack of consensus, and i do not want the idea of a "genuine" real field to end like this.

Of course i am in favor of having such an abstraction and i am happy that some people support this as well, however when i promoted such an idea in various sage days, tutorials, discussions, tickets, it was clear from that experience that there was no consensus about that question, at all.

Hence, i think that a collectively approved decision on such subject should happen before code. For example, the proposed branch implies behaviors such as (random undocumented examples):


```
sage: R = QQ.completion(infinity, infinity) ; R
Real Field

sage: QQbar(sqrt(2)).parent()
Algebraic Field
sage: R(QQbar(sqrt(2))).parent()
Algebraic Real Field

sage: QQbar(sqrt(1)).parent()
Algebraic Field
sage: R(QQbar(sqrt(1))).parent()
Rational Field

sage: 0.1 in R
False

sage: R(RDF(0.1))
1/10

sage: R(pi)
ValueError: Can't coerce `pi` in any parent `Real Field` is a facade for

sage: R(ZZ(1)).parent()
Rational Field
```


Which behavior do we want for this ? Which interplay with existing representations of real numbers ? What are the implications in the whole Sage ? How do we ensure a smooth transition from the current ill-named `RR` and a genuine `RR` corresponding to the field of real numbers ? Since real numbers are everywhere, we should think about the consequences before being tied with wrong design and the imperative of backward compatibility.

All this to say that we need to have a plan with a boarder view, on which the community agrees.

Note that Ralf opened a ticket on that subject, and since ticket #17713 already has some debates on this subject and a similar purpose, let me suggest to continue the discussion there (so that we collect every input in a single place), and make it a task with appropriate subtickets once we reach a consensus.



---

archive/issue_comments_339191.json:
```json
{
    "body": "The depending ticket #24171 could work with `numbers.*` as well, as the objects are used only internally.",
    "created_at": "2018-01-05T07:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339191",
    "user": "rws"
}
```

The depending ticket #24171 could work with `numbers.*` as well, as the objects are used only internally.



---

archive/issue_comments_339192.json:
```json
{
    "body": "Replying to [comment:29 rws]:\n> The depending ticket #24171 could work with `numbers.*` as well, as the objects are used only internally.\n\nAh no, the numbers classes are abstract, sorry.",
    "created_at": "2018-01-05T07:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339192",
    "user": "rws"
}
```

Replying to [comment:29 rws]:
> The depending ticket #24171 could work with `numbers.*` as well, as the objects are used only internally.

Ah no, the numbers classes are abstract, sorry.



---

archive/issue_comments_339193.json:
```json
{
    "body": "Replying to [comment:28 tmonteil]:\n> For example, the proposed branch implies behaviors such as (random undocumented examples):\n\nThe current `RealField` as it is in the branch is a [facade](http://doc.sagemath.org/html/en/reference/categories/sage/categories/sets_cat.html#facade-sets). Which means that it does not have any element of its own. The sets for which it is a facade are *concrete* subrings/subfields of the set of real numbers. In the current branch it is only `QQ` and `AA`. Beyond adding more subrings/subfields, I don't see how it could be otherwise.\n\nAll the examples you mention come from the way `_element_constructor_` is designed for facade sets. For each set for which it is a facade the element constructor tries a conversion to this set. The behavior might be wrong, I am just explaining the mechanic.\n\n> sage: QQbar(sqrt(2)).parent()\n> Algebraic Field\n> sage: R(QQbar(sqrt(2))).parent()\n> Algebraic Real Field\n\nThis is because `AA(QQbar(sqrt(2)))` is the first to succeed (`QQ(QQbar(sqrt(2)))` does not).\n\n> sage: QQbar(sqrt(1)).parent()\n> Algebraic Field\n> sage: R(QQbar(sqrt(1))).parent()\n> Rational Field\n\nThis is because `QQ(QQbar(sqrt(1)))` does succeed.\n\n> sage: 0.1 in R\n> False\n\nAs it should be!\n\n> sage: R(RDF(0.1))\n> 1/10\n\nBecause `QQ(RDF(0.1))` works that way.\n\n> sage: R(pi)\n> ValueError: Can't coerce `pi` in any parent `Real Field` is a facade for\n\nBecause there is not yet any subset of the real numbers handling pi. As soon as there is one, it should be added to the facades and the above will work.\n\n> sage: R(ZZ(1)).parent()\n> Rational Field\n\nThis is because `QQ(ZZ(1))` is the first to succeed (we might add `ZZ` to the list of facades).\n\n> Which behavior do we want for this?\n\nFor me, the current behavior of element construction is close to what it should be. To make things smoother, we might want to modify the `QQbar -> QQ` to a `QQbar -> AA`. This can be achieved by using a friend complex field on which we could call `.real()`. More precisely\n\n```\ndef _element_constructor_(self, x):\n    if parent(x) in self.facade_for():\n        return x\n\n    CC = ComplexField()   # the genuine one of course\n    try:\n        z = CC(x)\n    except (ValueError,TypeError):\n        pass\n    else:\n        if z.is_real():   # does not currently work for QQbar\n            return z.real()\n\n    raise ValueError(\"x not recognized as a real number\")\n```\n\n\n> Which interplay with existing representations of real numbers?\n\nThis is precisely the question in [comment:23] that you are not helping with by asking it again.\n\n> What are the implications in the whole Sage?\n\nJust new features. To be able to do\n\n- mathematical construction relying on an (abstract) field of real numbers (such as manifolds, see [comment:27])\n- querries like \"is parent X is a model for real numbers\" (see [comment:22] and follow-up)\n\n> How do we ensure a smooth transition from the current ill-named `RR` and a genuine `RR` corresponding to the field of real numbers?\n\nThis question is beyond the scope of this ticket. But see #24457.\n\n> Since real numbers are everywhere, we should think about the consequences before being tied with wrong design and the imperative of backward compatibility.\n>\n> All this to say that we need to have a plan with a boarder view, on which the community agrees.\n> \n> Note that Ralf opened a ticket on that subject, and since ticket #17713 already has some debates on this subject and a similar purpose, let me suggest to continue the discussion there (so that we collect every input in a single place), and make it a task with appropriate subtickets once we reach a consensus.\n\nTo balance, let me add that ticket #17713 was opened 3 years ago, contains three messages and no concrete proposal. It refers to another ticket #15944 that was untouched during 4 years. This ticket on the other hand, started with a concrete proposal and 4 people expressed their opinions. I am about to propose a new version taking into account all comments. We are also not likely to merge it soon as the discussion is going on.\n\nTickets are also dying because of absence of action. Status-quo is not the way to go either.",
    "created_at": "2018-01-05T10:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339193",
    "user": "vdelecroix"
}
```

Replying to [comment:28 tmonteil]:
> For example, the proposed branch implies behaviors such as (random undocumented examples):

The current `RealField` as it is in the branch is a [facade](http://doc.sagemath.org/html/en/reference/categories/sage/categories/sets_cat.html#facade-sets). Which means that it does not have any element of its own. The sets for which it is a facade are *concrete* subrings/subfields of the set of real numbers. In the current branch it is only `QQ` and `AA`. Beyond adding more subrings/subfields, I don't see how it could be otherwise.

All the examples you mention come from the way `_element_constructor_` is designed for facade sets. For each set for which it is a facade the element constructor tries a conversion to this set. The behavior might be wrong, I am just explaining the mechanic.

> sage: QQbar(sqrt(2)).parent()
> Algebraic Field
> sage: R(QQbar(sqrt(2))).parent()
> Algebraic Real Field

This is because `AA(QQbar(sqrt(2)))` is the first to succeed (`QQ(QQbar(sqrt(2)))` does not).

> sage: QQbar(sqrt(1)).parent()
> Algebraic Field
> sage: R(QQbar(sqrt(1))).parent()
> Rational Field

This is because `QQ(QQbar(sqrt(1)))` does succeed.

> sage: 0.1 in R
> False

As it should be!

> sage: R(RDF(0.1))
> 1/10

Because `QQ(RDF(0.1))` works that way.

> sage: R(pi)
> ValueError: Can't coerce `pi` in any parent `Real Field` is a facade for

Because there is not yet any subset of the real numbers handling pi. As soon as there is one, it should be added to the facades and the above will work.

> sage: R(ZZ(1)).parent()
> Rational Field

This is because `QQ(ZZ(1))` is the first to succeed (we might add `ZZ` to the list of facades).

> Which behavior do we want for this?

For me, the current behavior of element construction is close to what it should be. To make things smoother, we might want to modify the `QQbar -> QQ` to a `QQbar -> AA`. This can be achieved by using a friend complex field on which we could call `.real()`. More precisely

```
def _element_constructor_(self, x):
    if parent(x) in self.facade_for():
        return x

    CC = ComplexField()   # the genuine one of course
    try:
        z = CC(x)
    except (ValueError,TypeError):
        pass
    else:
        if z.is_real():   # does not currently work for QQbar
            return z.real()

    raise ValueError("x not recognized as a real number")
```


> Which interplay with existing representations of real numbers?

This is precisely the question in [comment:23] that you are not helping with by asking it again.

> What are the implications in the whole Sage?

Just new features. To be able to do

- mathematical construction relying on an (abstract) field of real numbers (such as manifolds, see [comment:27])
- querries like "is parent X is a model for real numbers" (see [comment:22] and follow-up)

> How do we ensure a smooth transition from the current ill-named `RR` and a genuine `RR` corresponding to the field of real numbers?

This question is beyond the scope of this ticket. But see #24457.

> Since real numbers are everywhere, we should think about the consequences before being tied with wrong design and the imperative of backward compatibility.
>
> All this to say that we need to have a plan with a boarder view, on which the community agrees.
> 
> Note that Ralf opened a ticket on that subject, and since ticket #17713 already has some debates on this subject and a similar purpose, let me suggest to continue the discussion there (so that we collect every input in a single place), and make it a task with appropriate subtickets once we reach a consensus.

To balance, let me add that ticket #17713 was opened 3 years ago, contains three messages and no concrete proposal. It refers to another ticket #15944 that was untouched during 4 years. This ticket on the other hand, started with a concrete proposal and 4 people expressed their opinions. I am about to propose a new version taking into account all comments. We are also not likely to merge it soon as the discussion is going on.

Tickets are also dying because of absence of action. Status-quo is not the way to go either.



---

archive/issue_comments_339194.json:
```json
{
    "body": "Replying to [comment:28 tmonteil]:\n> {{{\n> sage: R(QQbar(sqrt(2))).parent()\n> Algebraic Real Field\n> \n> sage: R(QQbar(sqrt(1))).parent()\n> Rational Field\n> \n> sage: R(RDF(0.1))\n> 1/10\n> \n> sage: R(pi)\n> ValueError: Can't coerce `pi` in any parent `Real Field` is a facade for\n> \n> sage: R(ZZ(1)).parent()\n> Rational Field\n> }}}\n\nAll of these could be fixed by simply not letting `R` be a `Parent` and disallowing `R(anything)`. As I said in some comments above, I don't see why `R` should be a `Parent` (facade or not).",
    "created_at": "2018-01-07T13:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339194",
    "user": "jdemeyer"
}
```

Replying to [comment:28 tmonteil]:
> {{{
> sage: R(QQbar(sqrt(2))).parent()
> Algebraic Real Field
> 
> sage: R(QQbar(sqrt(1))).parent()
> Rational Field
> 
> sage: R(RDF(0.1))
> 1/10
> 
> sage: R(pi)
> ValueError: Can't coerce `pi` in any parent `Real Field` is a facade for
> 
> sage: R(ZZ(1)).parent()
> Rational Field
> }}}

All of these could be fixed by simply not letting `R` be a `Parent` and disallowing `R(anything)`. As I said in some comments above, I don't see why `R` should be a `Parent` (facade or not).



---

archive/issue_comments_339195.json:
```json
{
    "body": "Replying to [comment:31 vdelecroix]:\n> > {{{\n> > sage: 0.1 in R\n> > False\n> > }}}\n> \n> As it should be!\n\nIf you think that `0.1` should not be contained in the field of real numbers, you'll need to justify that better. For me, it is obvious that `0.1` is a real number, such that `0.1 in R` must be `True`.",
    "created_at": "2018-01-07T13:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339195",
    "user": "jdemeyer"
}
```

Replying to [comment:31 vdelecroix]:
> > {{{
> > sage: 0.1 in R
> > False
> > }}}
> 
> As it should be!

If you think that `0.1` should not be contained in the field of real numbers, you'll need to justify that better. For me, it is obvious that `0.1` is a real number, such that `0.1 in R` must be `True`.



---

archive/issue_comments_339196.json:
```json
{
    "body": "Replying to [comment:28 tmonteil]:\n> Hence, i think that a collectively approved decision on such subject should happen before code.\n\n+1\n\nIt is clear that people support the idea of having a true \"real field\" object in Sage. However, it is not clear at all what kind of object this should be and how it should be used.",
    "created_at": "2018-01-07T13:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339196",
    "user": "jdemeyer"
}
```

Replying to [comment:28 tmonteil]:
> Hence, i think that a collectively approved decision on such subject should happen before code.

+1

It is clear that people support the idea of having a true "real field" object in Sage. However, it is not clear at all what kind of object this should be and how it should be used.



---

archive/issue_comments_339197.json:
```json
{
    "body": "Maybe we should start by thinking about possible use cases for this \"real field\":\n\n1. As some placeholder object to denote the field of real numbers, for example as output of `QQ.completion(oo)`. This implies that it should be a unique object.\n\n2. As a Sage analogy to [PEP 3141](https://www.python.org/dev/peps/pep-3141/): it should provide a way to ask \"is `x` a real number\" or \"is `X` a substructure of the reals\" or maybe \"does parent `X` represent the real numbers\". Note that Sage already has partial support for PEP 3141 but only for elements (not parents).",
    "created_at": "2018-01-07T14:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339197",
    "user": "jdemeyer"
}
```

Maybe we should start by thinking about possible use cases for this "real field":

1. As some placeholder object to denote the field of real numbers, for example as output of `QQ.completion(oo)`. This implies that it should be a unique object.

2. As a Sage analogy to [PEP 3141](https://www.python.org/dev/peps/pep-3141/): it should provide a way to ask "is `x` a real number" or "is `X` a substructure of the reals" or maybe "does parent `X` represent the real numbers". Note that Sage already has partial support for PEP 3141 but only for elements (not parents).



---

archive/issue_comments_339198.json:
```json
{
    "body": "Replying to [comment:36 jdemeyer]:\n> Maybe we should start by thinking about possible use cases for this \"real field\":\n> \n> 1. As some placeholder object to denote the field of real numbers, for example as output of `QQ.completion(oo)`. This implies that it should be a unique object.\n\nAgreed.\n\n> 2. As a Sage analogy to [PEP 3141](https://www.python.org/dev/peps/pep-3141/): it should provide a way to ask \"is `x` a real number\" or \"is `X` a substructure of the reals\" or maybe \"does parent `X` represent the real numbers\". Note that Sage already has partial support for PEP 3141 but only for elements (not parents).\n\nI want to be able distinguish between exact subrings and non-exact approximations. This is for coercion reasons: *each exact subring coerces into all non-exact approximations*. This is also why I claimed that `0.1 in R` should be `False`.\n\nLet me add\n\n3. As a way to check for `is x an exact real number?` and `is x a non-exact real number?`. We should specify clearly that `isinstance(x, numbers.Real)` means exact real **or** non-exact real (I take that as given because both `issubclass(int, numbers.Real)` and `issubclass(float, numbers.Real)` are `True`).\n\n4. As a pointers to all real field implementations (exact subrings and non-exact approximations). In particular it should contain a class factory for all concrete real fields (e.g. the `create_RealField` function that is currently used for non-exact approximations).",
    "created_at": "2018-01-08T09:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339198",
    "user": "vdelecroix"
}
```

Replying to [comment:36 jdemeyer]:
> Maybe we should start by thinking about possible use cases for this "real field":
> 
> 1. As some placeholder object to denote the field of real numbers, for example as output of `QQ.completion(oo)`. This implies that it should be a unique object.

Agreed.

> 2. As a Sage analogy to [PEP 3141](https://www.python.org/dev/peps/pep-3141/): it should provide a way to ask "is `x` a real number" or "is `X` a substructure of the reals" or maybe "does parent `X` represent the real numbers". Note that Sage already has partial support for PEP 3141 but only for elements (not parents).

I want to be able distinguish between exact subrings and non-exact approximations. This is for coercion reasons: *each exact subring coerces into all non-exact approximations*. This is also why I claimed that `0.1 in R` should be `False`.

Let me add

3. As a way to check for `is x an exact real number?` and `is x a non-exact real number?`. We should specify clearly that `isinstance(x, numbers.Real)` means exact real **or** non-exact real (I take that as given because both `issubclass(int, numbers.Real)` and `issubclass(float, numbers.Real)` are `True`).

4. As a pointers to all real field implementations (exact subrings and non-exact approximations). In particular it should contain a class factory for all concrete real fields (e.g. the `create_RealField` function that is currently used for non-exact approximations).



---

archive/issue_comments_339199.json:
```json
{
    "body": "If you want to ask about exact reals, you should have a 2', where you have a subclass of generic all reals class for the exact reals.",
    "created_at": "2018-01-08T16:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339199",
    "user": "tscrim"
}
```

If you want to ask about exact reals, you should have a 2', where you have a subclass of generic all reals class for the exact reals.



---

archive/issue_comments_339200.json:
```json
{
    "body": "Concerning approximations (like floating point numbers), there are often the three special values `NaN`, `+inf` and `-inf` which are not real numbers (in the mathematical sense). For `-inf` and `+inf` one can still argue that they approximate very negative and very positive reals. But `NaN` is not an approximation of anything. This is one more argument for having `RealField()` to mean *exact real numbers*.\n\nOn the other hand, Python `numbers.Real` means both floating and exact. Having different semantic for `RealField()` and `numbers.Real` might be disturbing.",
    "created_at": "2018-01-09T09:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339200",
    "user": "vdelecroix"
}
```

Concerning approximations (like floating point numbers), there are often the three special values `NaN`, `+inf` and `-inf` which are not real numbers (in the mathematical sense). For `-inf` and `+inf` one can still argue that they approximate very negative and very positive reals. But `NaN` is not an approximation of anything. This is one more argument for having `RealField()` to mean *exact real numbers*.

On the other hand, Python `numbers.Real` means both floating and exact. Having different semantic for `RealField()` and `numbers.Real` might be disturbing.



---

archive/issue_comments_339201.json:
```json
{
    "body": "Replying to [comment:39 vdelecroix]:\n> This is also why I claimed that `0.1 in R` should be `False`.\n\nI still don't get this. Please elaborate...",
    "created_at": "2018-01-10T10:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339201",
    "user": "jdemeyer"
}
```

Replying to [comment:39 vdelecroix]:
> This is also why I claimed that `0.1 in R` should be `False`.

I still don't get this. Please elaborate...



---

archive/issue_comments_339202.json:
```json
{
    "body": "Replying to [comment:39 vdelecroix]:\n> 4. As a pointers to all real field implementations (exact subrings and non-exact approximations). In particular **it** should contain a class factory for all concrete real fields (e.g. the `create_RealField` function that is currently used for non-exact approximations).\n\nWhat is the **it** in this last sentence?",
    "created_at": "2018-01-10T10:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339202",
    "user": "jdemeyer"
}
```

Replying to [comment:39 vdelecroix]:
> 4. As a pointers to all real field implementations (exact subrings and non-exact approximations). In particular **it** should contain a class factory for all concrete real fields (e.g. the `create_RealField` function that is currently used for non-exact approximations).

What is the **it** in this last sentence?



---

archive/issue_comments_339203.json:
```json
{
    "body": "Replying to [comment:42 jdemeyer]:\n> Replying to [comment:39 vdelecroix]:\n> > This is also why I claimed that `0.1 in R` should be `False`.\n> \n> I still don't get this. Please elaborate...\n\nFor me `RealField` means the field of real numbers in the mathematical sense together with its exact operations `+`, `-`, `log`, `exp`, etc. Floating-point numbers do not respect exactness of operations and for me do not qualify as being real numbers. I agree that you can think of a floating point number in two ways. As an approximation of a real number \"m \u00b1 2<sup>-e</sup>\" or as a diadic number \"p 2<sup>-n</sup>\". The latter is the actual datastructure but it is mostly useless to think of it this way when doing mathematics. This is moreover how it works in Sage: `QQ` coerces into `RealField(prec)` and not the contrary even though `RealField(prec)` is formally a subset of `QQ`.",
    "created_at": "2018-01-10T10:27:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339203",
    "user": "vdelecroix"
}
```

Replying to [comment:42 jdemeyer]:
> Replying to [comment:39 vdelecroix]:
> > This is also why I claimed that `0.1 in R` should be `False`.
> 
> I still don't get this. Please elaborate...

For me `RealField` means the field of real numbers in the mathematical sense together with its exact operations `+`, `-`, `log`, `exp`, etc. Floating-point numbers do not respect exactness of operations and for me do not qualify as being real numbers. I agree that you can think of a floating point number in two ways. As an approximation of a real number "m ¬± 2<sup>-e</sup>" or as a diadic number "p 2<sup>-n</sup>". The latter is the actual datastructure but it is mostly useless to think of it this way when doing mathematics. This is moreover how it works in Sage: `QQ` coerces into `RealField(prec)` and not the contrary even though `RealField(prec)` is formally a subset of `QQ`.



---

archive/issue_comments_339204.json:
```json
{
    "body": "Replying to [comment:44 jdemeyer]:\n> Replying to [comment:39 vdelecroix]:\n> > 4. As a pointers to all real field implementations (exact subrings and non-exact approximations). In particular **it** should contain a class factory for all concrete real fields (e.g. the `create_RealField` function that is currently used for non-exact approximations).\n> \n> What is the **it** in this last sentence?\n\nI meant the genuine real field that we are trying to design.",
    "created_at": "2018-01-10T10:28:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339204",
    "user": "vdelecroix"
}
```

Replying to [comment:44 jdemeyer]:
> Replying to [comment:39 vdelecroix]:
> > 4. As a pointers to all real field implementations (exact subrings and non-exact approximations). In particular **it** should contain a class factory for all concrete real fields (e.g. the `create_RealField` function that is currently used for non-exact approximations).
> 
> What is the **it** in this last sentence?

I meant the genuine real field that we are trying to design.



---

archive/issue_comments_339205.json:
```json
{
    "body": "Replying to [comment:46 vdelecroix]:\n> I meant the genuine real field that we are trying to design.\n\nOK, so what would it mean for a Python object (representing the real field) to \"contain a class factory\"? Do you want something like\n\n```\nsage: R = RealField()\nsage: R.create(prec=53, implementation=\"mpfr\")\nReal Floating-point field with 53 bits of precision\n```\n\nor maybe\n\n```\nsage: R = RealField()\nsage: R(prec=53, implementation=\"mpfr\")\nReal Floating-point field with 53 bits of precision\n```\n",
    "created_at": "2018-01-10T10:31:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339205",
    "user": "jdemeyer"
}
```

Replying to [comment:46 vdelecroix]:
> I meant the genuine real field that we are trying to design.

OK, so what would it mean for a Python object (representing the real field) to "contain a class factory"? Do you want something like

```
sage: R = RealField()
sage: R.create(prec=53, implementation="mpfr")
Real Floating-point field with 53 bits of precision
```

or maybe

```
sage: R = RealField()
sage: R(prec=53, implementation="mpfr")
Real Floating-point field with 53 bits of precision
```




---

archive/issue_comments_339206.json:
```json
{
    "body": "Replying to [comment:45 vdelecroix]:\n> For me `RealField` means the field of real numbers in the mathematical sense together with its exact operations `+`, `-`, `log`, `exp`, etc. Floating-point numbers do not respect exactness of operations and for me do not qualify as being real numbers.\n\nThat point of view is technically mathematically true but also completely useless. Clearly, the real floating-point field is meant to model the real numbers. For technical reasons, the operations are not exact. But that is an implementation detail and not a mathematical property. For practical purposes, it behaves as a field.\n\nI do agree that it makes sense to differentiate between exact real fields and approximate real fields, but both are real fields.",
    "created_at": "2018-01-10T10:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339206",
    "user": "jdemeyer"
}
```

Replying to [comment:45 vdelecroix]:
> For me `RealField` means the field of real numbers in the mathematical sense together with its exact operations `+`, `-`, `log`, `exp`, etc. Floating-point numbers do not respect exactness of operations and for me do not qualify as being real numbers.

That point of view is technically mathematically true but also completely useless. Clearly, the real floating-point field is meant to model the real numbers. For technical reasons, the operations are not exact. But that is an implementation detail and not a mathematical property. For practical purposes, it behaves as a field.

I do agree that it makes sense to differentiate between exact real fields and approximate real fields, but both are real fields.



---

archive/issue_comments_339207.json:
```json
{
    "body": "Replying to [comment:48 jdemeyer]:\n> Replying to [comment:45 vdelecroix]:\n> > For me `RealField` means the field of real numbers in the mathematical sense together with its exact operations `+`, `-`, `log`, `exp`, etc. Floating-point numbers do not respect exactness of operations and for me do not qualify as being real numbers.\n> \n> That point of view is technically mathematically true but also completely useless. Clearly, the real floating-point field is meant to model the real numbers.\n\nIndeed!\n\n> For technical reasons, the operations are not exact. But that is an implementation detail and not a mathematical property. For practical purposes, it behaves as a field.\n\nIt is not associative! Equality dramatically fails! This is not a **detail**.\n\n> I do agree that it makes sense to differentiate between exact real fields and approximate real fields, but both are real fields.\n\nI also agree and IMHO, for consistency with `numbers.Real`, the genuine `RealField` should be both used for approximate (= projection) and exact (= subset). And this should be very clearly stated.",
    "created_at": "2018-01-10T10:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339207",
    "user": "vdelecroix"
}
```

Replying to [comment:48 jdemeyer]:
> Replying to [comment:45 vdelecroix]:
> > For me `RealField` means the field of real numbers in the mathematical sense together with its exact operations `+`, `-`, `log`, `exp`, etc. Floating-point numbers do not respect exactness of operations and for me do not qualify as being real numbers.
> 
> That point of view is technically mathematically true but also completely useless. Clearly, the real floating-point field is meant to model the real numbers.

Indeed!

> For technical reasons, the operations are not exact. But that is an implementation detail and not a mathematical property. For practical purposes, it behaves as a field.

It is not associative! Equality dramatically fails! This is not a **detail**.

> I do agree that it makes sense to differentiate between exact real fields and approximate real fields, but both are real fields.

I also agree and IMHO, for consistency with `numbers.Real`, the genuine `RealField` should be both used for approximate (= projection) and exact (= subset). And this should be very clearly stated.



---

archive/issue_comments_339208.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-23T16:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339208",
    "user": "rws"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_339209.json:
```json
{
    "body": "Rebased on the dependency.\n----\nNew commits:",
    "created_at": "2018-02-23T16:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339209",
    "user": "rws"
}
```

Rebased on the dependency.
----
New commits:



---

archive/issue_comments_339210.json:
```json
{
    "body": "Does not apply anymore.",
    "created_at": "2019-03-28T08:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339210",
    "user": "dkrenn"
}
```

Does not apply anymore.



---

archive/issue_comments_339211.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-28T08:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339211",
    "user": "dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_339212.json:
```json
{
    "body": "I think, this is a splendid idea. What can be done to stress this forward? Can I help?",
    "created_at": "2020-10-08T12:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339212",
    "user": "@mjungmath"
}
```

I think, this is a splendid idea. What can be done to stress this forward? Can I help?



---

archive/issue_comments_339213.json:
```json
{
    "body": "Replying to [comment:54 gh-mjungmath]:\n> I think, this is a splendid idea. What can be done to stress this forward? Can I help?\n\nIndeed, it was a terrible design from the start. The main obstruction to change it is backward compatibility... You can work on any of #24483, #24489 and #24457 that are prerequisite for this ticket.",
    "created_at": "2020-10-08T15:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24219",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24219#issuecomment-339213",
    "user": "vdelecroix"
}
```

Replying to [comment:54 gh-mjungmath]:
> I think, this is a splendid idea. What can be done to stress this forward? Can I help?

Indeed, it was a terrible design from the start. The main obstruction to change it is backward compatibility... You can work on any of #24483, #24489 and #24457 that are prerequisite for this ticket.
