# Issue 14249: libGAP error handling bug

Issue created by migration from https://trac.sagemath.org/ticket/14453

Original creator: jdemeyer

Original creation time: 2013-04-15 13:54:04

Assignee: was

CC:  vbraun

The libGAP error handler (`error_handler()`) in `sage/libs/gap/util.pyx` should use `set_sage_signal_handler_message()` instead of `sig_str()`. Doing this replacement shows that currently, a bug is masked where `error_handler()` is called outside a `sig_on()` block.


---

Attachment


---

Comment by jdemeyer created at 2013-04-15 22:14:40

Looks like a GCC compiler bug (GCC-4.8.0).


---

Comment by vbraun created at 2013-04-16 15:03:37

Thanks for debugging this! Should we still treat this as critical or maybe just wait until gcc-4.8.1 is out?


---

Comment by jdemeyer created at 2013-04-16 16:39:09

Independently of the GCC issue, there still is a segmentation fault with Cython-0.19b2. Perhaps we should also fix that here.


---

Comment by jdemeyer created at 2013-04-16 17:22:45

The Cython segfault also looks like an upstream (Cython-0.19b2) problem.  So libGAP does a good job of testing various upstream projects :-)


---

Comment by jdemeyer created at 2013-04-16 18:19:04

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2013-04-16 18:19:04

Modulo upstream issues, this patch should be fine and can be applied.


---

Attachment

The critical bug is #14460.


---

Comment by jdemeyer created at 2013-04-16 18:34:40

Changing priority from critical to minor.


---

Comment by vbraun created at 2013-04-16 21:53:36

Looks good to me.


---

Comment by vbraun created at 2013-04-16 21:53:36

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-04-23 09:44:17

Resolution: fixed
