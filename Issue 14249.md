# Issue 14249: libGAP error handling bug

archive/issues_014249.json:
```json
{
    "body": "Assignee: was\n\nCC:  vbraun\n\nThe libGAP error handler (`error_handler()`) in `sage/libs/gap/util.pyx` should use `set_sage_signal_handler_message()` instead of `sig_str()`. Doing this replacement shows that currently, a bug is masked where `error_handler()` is called outside a `sig_on()` block.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14453\n\n",
    "created_at": "2013-04-15T13:54:04Z",
    "labels": [
        "interfaces",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "libGAP error handling bug",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14249",
    "user": "jdemeyer"
}
```
Assignee: was

CC:  vbraun

The libGAP error handler (`error_handler()`) in `sage/libs/gap/util.pyx` should use `set_sage_signal_handler_message()` instead of `sig_str()`. Doing this replacement shows that currently, a bug is masked where `error_handler()` is called outside a `sig_on()` block.

Issue created by migration from https://trac.sagemath.org/ticket/14453





---

archive/issue_comments_179284.json:
```json
{
    "body": "Attachment [sage_crash_ihsJs4.log](tarball://root/attachments/some-uuid/ticket14453/sage_crash_ihsJs4.log) by jdemeyer created at 2013-04-15 14:03:13",
    "created_at": "2013-04-15T14:03:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179284",
    "user": "jdemeyer"
}
```

Attachment [sage_crash_ihsJs4.log](tarball://root/attachments/some-uuid/ticket14453/sage_crash_ihsJs4.log) by jdemeyer created at 2013-04-15 14:03:13



---

archive/issue_comments_179285.json:
```json
{
    "body": "Looks like a GCC compiler bug (GCC-4.8.0).",
    "created_at": "2013-04-15T22:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179285",
    "user": "jdemeyer"
}
```

Looks like a GCC compiler bug (GCC-4.8.0).



---

archive/issue_comments_179286.json:
```json
{
    "body": "Thanks for debugging this! Should we still treat this as critical or maybe just wait until gcc-4.8.1 is out?",
    "created_at": "2013-04-16T15:03:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179286",
    "user": "vbraun"
}
```

Thanks for debugging this! Should we still treat this as critical or maybe just wait until gcc-4.8.1 is out?



---

archive/issue_comments_179287.json:
```json
{
    "body": "Independently of the GCC issue, there still is a segmentation fault with Cython-0.19b2. Perhaps we should also fix that here.",
    "created_at": "2013-04-16T16:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179287",
    "user": "jdemeyer"
}
```

Independently of the GCC issue, there still is a segmentation fault with Cython-0.19b2. Perhaps we should also fix that here.



---

archive/issue_comments_179288.json:
```json
{
    "body": "The Cython segfault also looks like an upstream (Cython-0.19b2) problem.  So libGAP does a good job of testing various upstream projects :-)",
    "created_at": "2013-04-16T17:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179288",
    "user": "jdemeyer"
}
```

The Cython segfault also looks like an upstream (Cython-0.19b2) problem.  So libGAP does a good job of testing various upstream projects :-)



---

archive/issue_comments_179289.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-16T18:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179289",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_179290.json:
```json
{
    "body": "Modulo upstream issues, this patch should be fine and can be applied.",
    "created_at": "2013-04-16T18:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179290",
    "user": "jdemeyer"
}
```

Modulo upstream issues, this patch should be fine and can be applied.



---

archive/issue_comments_179291.json:
```json
{
    "body": "Attachment [14453_libgap.patch](tarball://root/attachments/some-uuid/ticket14453/14453_libgap.patch) by jdemeyer created at 2013-04-16 18:34:40\n\nThe critical bug is #14460.",
    "created_at": "2013-04-16T18:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179291",
    "user": "jdemeyer"
}
```

Attachment [14453_libgap.patch](tarball://root/attachments/some-uuid/ticket14453/14453_libgap.patch) by jdemeyer created at 2013-04-16 18:34:40

The critical bug is #14460.



---

archive/issue_comments_179292.json:
```json
{
    "body": "Changing priority from critical to minor.",
    "created_at": "2013-04-16T18:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179292",
    "user": "jdemeyer"
}
```

Changing priority from critical to minor.



---

archive/issue_comments_179293.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2013-04-16T21:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179293",
    "user": "vbraun"
}
```

Looks good to me.



---

archive/issue_comments_179294.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-16T21:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179294",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_179295.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-04-23T09:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14249#issuecomment-179295",
    "user": "jdemeyer"
}
```

Resolution: fixed
