# Issue 29588: Clean-up for src/bin/sage-env, move src/bin/sage-clone-source, src/bin/sage-sdist to build/bin

archive/issues_029588.json:
```json
{
    "body": "CC:  @orlitzky @kiwifb @antonio-rojas @vbraun\n\nWe remove some unused environment variables from the sage runtime environment.\n\nPart of Meta-ticket #21707: Split sage-env into 5 to clean up sage configuration\n\nIssue created by migration from https://trac.sagemath.org/ticket/29825\n\n",
    "closed_at": "2020-08-07T19:07:35Z",
    "created_at": "2020-06-08T05:38:52Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Clean-up for src/bin/sage-env, move src/bin/sage-clone-source, src/bin/sage-sdist to build/bin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29588",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @orlitzky @kiwifb @antonio-rojas @vbraun

We remove some unused environment variables from the sage runtime environment.

Part of Meta-ticket #21707: Split sage-env into 5 to clean up sage configuration

Issue created by migration from https://trac.sagemath.org/ticket/29825





---

archive/issue_comments_419625.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-08T06:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419625",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_419626.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-06-08T06:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419626",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_419627.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-16T20:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419627",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_419628.json:
```json
{
    "body": "Looks okay to me.",
    "created_at": "2020-06-16T20:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419628",
    "user": "https://github.com/jhpalmieri"
}
```

Looks okay to me.



---

archive/issue_comments_419629.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-06-16T23:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419629",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_419630.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-06-27T09:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419630",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_076388.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-27T09:25:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29588#event-76388"
}
```



---

archive/issue_comments_419631.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2020-07-04T15:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419631",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_076389.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-04T15:51:26Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29588#event-76389"
}
```



---

archive/issue_comments_419632.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2020-07-04T15:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419632",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_419633.json:
```json
{
    "body": "This breaks `sage -sdist` which is part of the release process:\n\n```\nrm -f /openblas.pc\n(echo \"Name: openblas\"; echo \"Description: OpenBLAS\"; echo \"Version: 0.3\"; echo \"Libs: -lopenblas \") > \"/openblas.pc\"\n/bin/sh: /openblas.pc: Permission denied\nmake[1]: *** [Makefile:59: /openblas.pc] Error 1\nmake[1]: Leaving directory '/home/release/Sage/build/make'\nmake: *** [Makefile:1766: download-for-sdist] Error 2\n```",
    "created_at": "2020-07-04T15:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419633",
    "user": "https://github.com/vbraun"
}
```

This breaks `sage -sdist` which is part of the release process:

```
rm -f /openblas.pc
(echo "Name: openblas"; echo "Description: OpenBLAS"; echo "Version: 0.3"; echo "Libs: -lopenblas ") > "/openblas.pc"
/bin/sh: /openblas.pc: Permission denied
make[1]: *** [Makefile:59: /openblas.pc] Error 1
make[1]: Leaving directory '/home/release/Sage/build/make'
make: *** [Makefile:1766: download-for-sdist] Error 2
```



---

archive/issue_comments_419634.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-16T00:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419634",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_419635.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-16T00:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419635",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_419636.json:
```json
{
    "body": "LGTM. This is all fairly minor spring cleaning. Apart from the `dist` stuff which was annoying.",
    "created_at": "2020-07-27T00:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419636",
    "user": "https://github.com/kiwifb"
}
```

LGTM. This is all fairly minor spring cleaning. Apart from the `dist` stuff which was annoying.



---

archive/issue_comments_419637.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-27T00:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419637",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_419638.json:
```json
{
    "body": "Thanks.",
    "created_at": "2020-07-27T00:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419638",
    "user": "https://github.com/mkoeppe"
}
```

Thanks.



---

archive/issue_comments_419639.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-07-30T20:45:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419639",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_419640.json:
```json
{
    "body": "```\n[sagelib-9.2.beta6] copying bin/sage-cachegrind -> build/scripts-3.7\n[sagelib-9.2.beta6] copying bin/sage-callgrind -> build/scripts-3.7\n[sagelib-9.2.beta6] copying bin/sage-massif -> build/scripts-3.7\n[sagelib-9.2.beta6] copying bin/sage-omega -> build/scripts-3.7\n[sagelib-9.2.beta6] copying bin/sage-valgrind -> build/scripts-3.7\n[sagelib-9.2.beta6] copying bin/sage-version.sh -> build/scripts-3.7\n[sagelib-9.2.beta6] copying and adjusting bin/sage-cleaner -> build/scripts-3.7\n[sagelib-9.2.beta6] copying and adjusting bin/sage-list-packages -> build/scripts-3.7\n[sagelib-9.2.beta6] error: file '/home/release/Sage/src/bin/sage-clone-source' does not exist\n[sagelib-9.2.beta6] \n[sagelib-9.2.beta6] real        5m25.685s\n[sagelib-9.2.beta6] user        49m14.730s\n[sagelib-9.2.beta6] sys 1m10.018s\nmake[4]: *** [Makefile:2090: sagelib-no-deps] Error 1\nmake[4]: Leaving directory '/home/release/Sage/build/make'\nmake[3]: *** [Makefile:2090: /home/release/Sage/local/var/lib/sage/installed/sagelib-9.2.beta6] Error 2\nmake[3]: Leaving directory '/home/release/Sage/build/make'\nmake[2]: *** [Makefile:1701: all-start] Error 2\nmake[2]: Leaving directory '/home/release/Sage/build/make'\n```",
    "created_at": "2020-07-30T20:45:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419640",
    "user": "https://github.com/vbraun"
}
```

```
[sagelib-9.2.beta6] copying bin/sage-cachegrind -> build/scripts-3.7
[sagelib-9.2.beta6] copying bin/sage-callgrind -> build/scripts-3.7
[sagelib-9.2.beta6] copying bin/sage-massif -> build/scripts-3.7
[sagelib-9.2.beta6] copying bin/sage-omega -> build/scripts-3.7
[sagelib-9.2.beta6] copying bin/sage-valgrind -> build/scripts-3.7
[sagelib-9.2.beta6] copying bin/sage-version.sh -> build/scripts-3.7
[sagelib-9.2.beta6] copying and adjusting bin/sage-cleaner -> build/scripts-3.7
[sagelib-9.2.beta6] copying and adjusting bin/sage-list-packages -> build/scripts-3.7
[sagelib-9.2.beta6] error: file '/home/release/Sage/src/bin/sage-clone-source' does not exist
[sagelib-9.2.beta6] 
[sagelib-9.2.beta6] real        5m25.685s
[sagelib-9.2.beta6] user        49m14.730s
[sagelib-9.2.beta6] sys 1m10.018s
make[4]: *** [Makefile:2090: sagelib-no-deps] Error 1
make[4]: Leaving directory '/home/release/Sage/build/make'
make[3]: *** [Makefile:2090: /home/release/Sage/local/var/lib/sage/installed/sagelib-9.2.beta6] Error 2
make[3]: Leaving directory '/home/release/Sage/build/make'
make[2]: *** [Makefile:1701: all-start] Error 2
make[2]: Leaving directory '/home/release/Sage/build/make'
```



---

archive/issue_comments_419641.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-30T20:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419641",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_419642.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-07-30T20:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419642",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_419643.json:
```json
{
    "body": "Now, that's something I should have checked. All good now as far as I can see it.",
    "created_at": "2020-07-30T21:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419643",
    "user": "https://github.com/kiwifb"
}
```

Now, that's something I should have checked. All good now as far as I can see it.



---

archive/issue_comments_419644.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-30T21:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419644",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_419645.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-07-30T21:21:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419645",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_419646.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-07T19:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29588#issuecomment-419646",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_076390.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-07T19:07:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29588",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29588#event-76390"
}
```
