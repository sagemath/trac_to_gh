# Issue 14383: Gr√∂bner bases via Macaulay2 broken

Issue created by migration from Trac.

Original creator: malb

Original creation time: 2013-05-15 10:03:11

Assignee: was

CC:  wstein

this shouldn't happen:


```
P.<a,b,c> = PolynomialRing(ZZ,3)
I = sage.rings.ideal.Katsura(P,3) # regenerate to prevent caching
I.groebner_basis('!macaulay2:gb') # optional - macaulay2
TypeError: _groebner_basis_macaulay2() got an unexpected keyword argument 'prot'
```



---

Attachment


---

Comment by vbraun created at 2013-05-15 14:44:26

I can confirm that the fix works (with Macaulay2 installed from Fedora). 

There are some failing doctests, for example

```
sage -t sage/rings/polynomial/polynomial_ring.py
**********************************************************************
File "sage/rings/polynomial/polynomial_ring.py", line 693, in sage.rings.polynomial.polynomial_ring.PolynomialRing_general._macaulay2_
Failed example:
    macaulay2(R) # optional - macaulay2
Expected:
    QQ [x]
Got:
    QQ[x, Degrees => {1}, Heft => {1}, MonomialOrder => {MonomialSize => 32}, DegreeRank => 1]
                                                        {GRevLex => {1}    }
                                                        {Position => Up    }
**********************************************************************
1 item had failures:
   1 of   3 in sage.rings.polynomial.polynomial_ring.PolynomialRing_general._macaulay2_
    [319 tests, 1 failure, 2.01 s]
```

Can you clean those up, too?


---

Comment by malb created at 2013-05-15 14:58:10

I cannot test the fixes (Debian doesn't have M2). I can address that one, but it's probably quicker if you or someone with M2 fixes them?


---

Comment by vbraun created at 2013-05-15 17:39:26

Initial patch


---

Attachment

Ok, done. Positive review to your half of the patch...


---

Comment by vbraun created at 2013-05-15 17:39:53

Changing status from new to needs_review.


---

Comment by dimpase created at 2013-05-23 04:59:20

works on Sage 5.9 with system-wide M2 1.6 (OSX 10.6.8)

```
sage -bt --optional=sage,macaulay2 --long sage/rings/
...
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 862.0 seconds
    cpu time: 774.6 seconds
    cumulative wall time: 828.1 seconds
```



---

Comment by dimpase created at 2013-05-23 04:59:20

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-05-23 16:28:16

Which patch(es) should be applied?


---

Comment by jdemeyer created at 2013-05-23 16:28:16

Changing status from positive_review to needs_info.


---

Comment by dimpase created at 2013-05-23 16:37:03

Changing status from needs_info to needs_review.


---

Comment by dimpase created at 2013-05-23 16:37:25

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-05-29 06:51:27

Resolution: fixed
