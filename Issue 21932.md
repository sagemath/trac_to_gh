# Issue 21932: flint 2.5.2.p0 build failure on Cygwin 32-bit

archive/issues_021932.json:
```json
{
    "body": "Assignee: @embray\n\nCC:  @tscrim\n\nKeywords: windows, cygwin, flint, ntl, cygwin32\n\nI'm starting to work on getting Sage working on 32-bit Cygwin again (64-bit is basically working minus a few unmerged patches).\n\nThe build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  Buried among hundreds of warnings about `long long` is the actual error:\n\n```\n/opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member function 'void NTL::AlignedArray<T, align>::SetLength(long int)':\n/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error: there are no arguments to 'posix_memalign' that depend on a template parameter, so a declaration of 'posix_memalign' must be available [-fpermissive]\n   if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();\n                                            ^\n/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/22169\n\n",
    "closed_at": "2021-09-10T04:50:10Z",
    "created_at": "2017-01-11T11:18:54Z",
    "labels": [
        "component: porting: cygwin",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "flint 2.5.2.p0 build failure on Cygwin 32-bit",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21932",
    "user": "https://github.com/embray"
}
```
Assignee: @embray

CC:  @tscrim

Keywords: windows, cygwin, flint, ntl, cygwin32

I'm starting to work on getting Sage working on 32-bit Cygwin again (64-bit is basically working minus a few unmerged patches).

The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  Buried among hundreds of warnings about `long long` is the actual error:

```
/opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member function 'void NTL::AlignedArray<T, align>::SetLength(long int)':
/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error: there are no arguments to 'posix_memalign' that depend on a template parameter, so a declaration of 'posix_memalign' must be available [-fpermissive]
   if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();
                                            ^
/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)
```

Issue created by migration from https://trac.sagemath.org/ticket/22169





---

archive/issue_comments_304309.json:
```json
{
    "body": "Attachment [flint-2.5.2.p0.log](tarball://root/attachments/some-uuid/ticket22169/flint-2.5.2.p0.log) by @embray created at 2017-01-11 11:22:03",
    "created_at": "2017-01-11T11:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21932#issuecomment-304309",
    "user": "https://github.com/embray"
}
```

Attachment [flint-2.5.2.p0.log](tarball://root/attachments/some-uuid/ticket22169/flint-2.5.2.p0.log) by @embray created at 2017-01-11 11:22:03



---

archive/issue_comments_304310.json:
```json
{
    "body": "Haven't fully tested yet, but i think adding `-std=gnu++98` to the `CXXFLAGS` should work around it, a la #20381.",
    "created_at": "2017-01-11T11:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21932#issuecomment-304310",
    "user": "https://github.com/embray"
}
```

Haven't fully tested yet, but i think adding `-std=gnu++98` to the `CXXFLAGS` should work around it, a la #20381.



---

archive/issue_comments_304311.json:
```json
{
    "body": "Yes, that seems to have done the trick.",
    "created_at": "2017-01-11T13:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21932#issuecomment-304311",
    "user": "https://github.com/embray"
}
```

Yes, that seems to have done the trick.



---

archive/issue_comments_304312.json:
```json
{
    "body": "Set assignee to @embray.",
    "created_at": "2017-01-11T13:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21932#issuecomment-304312",
    "user": "https://github.com/embray"
}
```

Set assignee to @embray.



---

archive/issue_events_058284.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-11T14:11:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21932#event-58284"
}
```



---

archive/issue_comments_304313.json:
```json
{
    "body": "Changing keywords from \"windows cygwin flint ntl\" to \"windows, cygwin, flint, ntl, cygwin32\".",
    "created_at": "2017-04-18T09:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21932#issuecomment-304313",
    "user": "https://github.com/embray"
}
```

Changing keywords from "windows cygwin flint ntl" to "windows, cygwin, flint, ntl, cygwin32".



---

archive/issue_events_058285.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T08:48:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21932#event-58285"
}
```



---

archive/issue_events_058286.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T08:48:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21932#event-58286"
}
```



---

archive/issue_comments_304314.json:
```json
{
    "body": "Outdated, should close",
    "created_at": "2021-09-07T08:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21932#issuecomment-304314",
    "user": "https://github.com/mkoeppe"
}
```

Outdated, should close



---

archive/issue_comments_304315.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-07T08:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21932#issuecomment-304315",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_304316.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-10T04:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21932#issuecomment-304316",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_304317.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-09-10T04:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21932#issuecomment-304317",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid



---

archive/issue_events_058287.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-10T04:50:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21932",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21932#event-58287"
}
```
