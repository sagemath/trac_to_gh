# Issue 17295: Convexity properties on graphs works incorrectly

archive/issues_017295.json:
```json
{
    "body": "CC:  @nathanncohen\n\nHello!\n\nIt appears that the convexity properties module gives incorrect results. The hull (geodetic) number of the Petersen graph is 4 while Sage says it is 3.\n\n\n```\nsage: G.convexity_properties().hull_number(value_only=false)\n[4, 7, 8]\nsage: G.convexity_properties().hull([4,7,8])\n[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n```\n\n\nI have implemented a corrected version of the hull number algorithm that I believe to be faster as well. I'd suggest we make these two function part of the graph class instead of having a separate convexity module.\n\nWhat do you guys think?\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17532\n\n",
    "created_at": "2014-12-20T15:38:59Z",
    "labels": [
        "graph theory",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Convexity properties on graphs works incorrectly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17295",
    "user": "azi"
}
```
CC:  @nathanncohen

Hello!

It appears that the convexity properties module gives incorrect results. The hull (geodetic) number of the Petersen graph is 4 while Sage says it is 3.


```
sage: G.convexity_properties().hull_number(value_only=false)
[4, 7, 8]
sage: G.convexity_properties().hull([4,7,8])
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```


I have implemented a corrected version of the hull number algorithm that I believe to be faster as well. I'd suggest we make these two function part of the graph class instead of having a separate convexity module.

What do you guys think?


Issue created by migration from https://trac.sagemath.org/ticket/17532





---

archive/issue_comments_230272.json:
```json
{
    "body": "Hello !\n\nI don't get it: I look at Petersen's graph, I look at vertices 4,7,8, and to me their convex hull is the whole graph. If you want to convince me that the answer is not correct, you have to tell me which vertex among the 10 is not in the convex hull of 4,7,8.\n\nActually, here is how it works for me:\n\n4,7,8 are in the convex hull of 4,7,8\n\n3 is the only neighbor of 4,8, so it is inside\n2 is the only neighbor of 7,3, so it is inside\n5 is the only neighbor of 7,8, so it is inside\n9 is the only neighbor of 4,7, so it is inside\n6 is the only neighbor of 7,9, so it is inside\n1 is the only neighbor of 2,6, so it is inside\n0 is the only neighbor of 4,1, so it is inside\n\nAs a conclusion, the hull number of Petersen's graph cannot be 4 `:-P`\n\nNathann",
    "created_at": "2014-12-20T17:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230272",
    "user": "@nathanncohen"
}
```

Hello !

I don't get it: I look at Petersen's graph, I look at vertices 4,7,8, and to me their convex hull is the whole graph. If you want to convince me that the answer is not correct, you have to tell me which vertex among the 10 is not in the convex hull of 4,7,8.

Actually, here is how it works for me:

4,7,8 are in the convex hull of 4,7,8

3 is the only neighbor of 4,8, so it is inside
2 is the only neighbor of 7,3, so it is inside
5 is the only neighbor of 7,8, so it is inside
9 is the only neighbor of 4,7, so it is inside
6 is the only neighbor of 7,9, so it is inside
1 is the only neighbor of 2,6, so it is inside
0 is the only neighbor of 4,1, so it is inside

As a conclusion, the hull number of Petersen's graph cannot be 4 `:-P`

Nathann



---

archive/issue_comments_230273.json:
```json
{
    "body": "I have verified the result in 4ways\n\n1. By implementing a different algorithm and getting 4 as an answer\n2. By drawing the  solution given by sage and seeing that it does not give the whole graph\n3. Arguing as follows. In the Petersen graph any pair of vertices is connected by a UNIQUE shortest path and has diameter 2. Hence 3 vertices give you a hull of size at most 3+ (3 \\choose 2)*1 = 9\n4. By checking this paper http://ajc.maths.uq.edu.au/pdf/26/ajc_v26_p011.pdf where it says that the Petersen graph has hull number 4.\n\nBest,\n\nJernej",
    "created_at": "2014-12-20T17:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230273",
    "user": "azi"
}
```

I have verified the result in 4ways

1. By implementing a different algorithm and getting 4 as an answer
2. By drawing the  solution given by sage and seeing that it does not give the whole graph
3. Arguing as follows. In the Petersen graph any pair of vertices is connected by a UNIQUE shortest path and has diameter 2. Hence 3 vertices give you a hull of size at most 3+ (3 \choose 2)*1 = 9
4. By checking this paper http://ajc.maths.uq.edu.au/pdf/26/ajc_v26_p011.pdf where it says that the Petersen graph has hull number 4.

Best,

Jernej



---

archive/issue_comments_230274.json:
```json
{
    "body": "> 1. By implementing a different algorithm and getting 4 as an answer\n> 2. By drawing the  solution given by sage and seeing that it does not give the whole graph\n> 3. Arguing as follows. In the Petersen graph any pair of vertices is connected by a UNIQUE shortest path and has diameter 2. Hence 3 vertices give you a hull of size at most 3+ (3 \\choose 2)*1 = 9\n> 4. By checking this paper http://ajc.maths.uq.edu.au/pdf/26/ajc_v26_p011.pdf where it says that the Petersen graph has hull number 4.\n\nThe paper you cite talks about the geodetic number, not the hull number. The computation that you do in 3 is only correct for the geodetic number. Thus I tend to think that the same reason explains 1 and 2 as well.\n\nNathann",
    "created_at": "2014-12-20T17:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230274",
    "user": "@nathanncohen"
}
```

> 1. By implementing a different algorithm and getting 4 as an answer
> 2. By drawing the  solution given by sage and seeing that it does not give the whole graph
> 3. Arguing as follows. In the Petersen graph any pair of vertices is connected by a UNIQUE shortest path and has diameter 2. Hence 3 vertices give you a hull of size at most 3+ (3 \choose 2)*1 = 9
> 4. By checking this paper http://ajc.maths.uq.edu.au/pdf/26/ajc_v26_p011.pdf where it says that the Petersen graph has hull number 4.

The paper you cite talks about the geodetic number, not the hull number. The computation that you do in 3 is only correct for the geodetic number. Thus I tend to think that the same reason explains 1 and 2 as well.

Nathann



---

archive/issue_comments_230275.json:
```json
{
    "body": "Ooooh, but what is the thing with the cited paper about the geodetic number? Isnt that the same thing?",
    "created_at": "2014-12-20T17:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230275",
    "user": "azi"
}
```

Ooooh, but what is the thing with the cited paper about the geodetic number? Isnt that the same thing?



---

archive/issue_comments_230276.json:
```json
{
    "body": "> Ooooh, but what is the thing with the cited paper about the geodetic number? Isnt that the same thing?\n\nNo, as you can see the hull number of Petersen's graph is 3, while is geodetic number is 4 `:-P`\n\nMore seriously, in one case you take a set S, and add to it all points that are on a shortest uv-path, where u,v\\in S.\n\nIn the second case, after having added those vertices you repeat the procedure again with the extended set S, then again, then again, then again, until you don't add anything new.\n\nThis second (larger) set is the convex hull of your initial set of points.\n\nNathann",
    "created_at": "2014-12-20T17:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230276",
    "user": "@nathanncohen"
}
```

> Ooooh, but what is the thing with the cited paper about the geodetic number? Isnt that the same thing?

No, as you can see the hull number of Petersen's graph is 3, while is geodetic number is 4 `:-P`

More seriously, in one case you take a set S, and add to it all points that are on a shortest uv-path, where u,v\in S.

In the second case, after having added those vertices you repeat the procedure again with the extended set S, then again, then again, then again, until you don't add anything new.

This second (larger) set is the convex hull of your initial set of points.

Nathann



---

archive/issue_comments_230277.json:
```json
{
    "body": "Ooooh. So the convex hull of S is *not* the set of all vertices that lie on a shortest path between any u,v in S?",
    "created_at": "2014-12-20T17:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230277",
    "user": "azi"
}
```

Ooooh. So the convex hull of S is *not* the set of all vertices that lie on a shortest path between any u,v in S?



---

archive/issue_comments_230278.json:
```json
{
    "body": "> Ooooh. So the convex hull of S is *not* the set of all vertices that lie on a shortest path between any u,v in S?\n\nIndeed, it is strictly larger than that in some cases. It is an iterated procedure.\n\nNathann",
    "created_at": "2014-12-20T17:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230278",
    "user": "@nathanncohen"
}
```

> Ooooh. So the convex hull of S is *not* the set of all vertices that lie on a shortest path between any u,v in S?

Indeed, it is strictly larger than that in some cases. It is an iterated procedure.

Nathann



---

archive/issue_comments_230279.json:
```json
{
    "body": "Ohhh I got confused by the cited paper then I thought its the same notion.\n\nClosing this as fixed!",
    "created_at": "2014-12-20T17:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230279",
    "user": "azi"
}
```

Ohhh I got confused by the cited paper then I thought its the same notion.

Closing this as fixed!



---

archive/issue_comments_230280.json:
```json
{
    "body": "Changing type from defect to PLEASE CHANGE.",
    "created_at": "2014-12-20T17:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230280",
    "user": "azi"
}
```

Changing type from defect to PLEASE CHANGE.



---

archive/issue_comments_230281.json:
```json
{
    "body": "Changing priority from critical to trivial.",
    "created_at": "2014-12-20T17:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230281",
    "user": "azi"
}
```

Changing priority from critical to trivial.



---

archive/issue_comments_230282.json:
```json
{
    "body": "Set assignee to azi.",
    "created_at": "2014-12-20T17:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230282",
    "user": "azi"
}
```

Set assignee to azi.



---

archive/issue_comments_230283.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-20T18:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230283",
    "user": "@nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_230284.json:
```json
{
    "body": "The way to 'close' a ticket is to set its milestone to wontfix and to change its status to positive_review. THeeeeeen the release manager will close it.\n\nGood evening,\n\nNathann",
    "created_at": "2014-12-20T18:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230284",
    "user": "@nathanncohen"
}
```

The way to 'close' a ticket is to set its milestone to wontfix and to change its status to positive_review. THeeeeeen the release manager will close it.

Good evening,

Nathann



---

archive/issue_comments_230285.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-20T18:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230285",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_230286.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2015-01-13T01:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17295#issuecomment-230286",
    "user": "@vbraun"
}
```

Resolution: worksforme
