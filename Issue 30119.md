# Issue 30119: Graphs: grouped sporadic distance-regular graphs in a function

Issue created by migration from https://trac.sagemath.org/ticket/30356

Original creator: @Ivo-Maffei

Original creation time: 2020-08-14 13:32:17

CC:  dimpase

Added a function `distance_regular_graph` with the purpose to build distance-regular graphs given their intersection array. At the moment we grouped only the sporadic constructions and serious existence checks are only done via the external package https://github.com/jaanos/sage-drg.


---

Comment by @Ivo-Maffei created at 2020-08-14 13:38:42

I will add more constructions to this function later on.
Now I'm mainly concerned with how to handle the drg package.
----
Last 10 new commits:


---

Comment by @Ivo-Maffei created at 2020-08-14 13:38:42

Changing status from new to needs_review.


---

Comment by git created at 2020-08-18 12:20:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2020-08-22 09:57:47

Changing status from needs_review to needs_work.


---

Comment by dimpase created at 2020-08-22 09:57:47

after merging beta9 in, doctests fail, e.g.

```
File "src/sage/graphs/generators/distance_regular.pyx", line 15, in sage.graphs.generators.distance_regular
Failed example:
    H = graphs.distance_regular_graph([15, 14, 10, 3, 1, 5, 12, 15])
Exception raised:
    Traceback (most recent call last):
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.generators.distance_regular[2]>", line 1, in <module>
        H = graphs.distance_regular_graph([Integer(15), Integer(14), Integer(10), Integer(3), Integer(1), Integer(5), Integer(12), Integer(15)])
      File "sage/graphs/generators/distance_regular.pyx", line 1902, in sage.graphs.generators.distance_regular.distance_regular_graph (build/cythonized/sage/graphs/generators/distance_regular.c:25204)
        any([(arr[d+i+1] - arr[d+i]) < 0 for i in range(d)]):
    IndexError: list index out of range
```



---

Comment by git created at 2020-08-22 10:49:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @Ivo-Maffei created at 2020-08-22 10:51:06

I forgot to test the code without the drg module. Now it should be fixed.


---

Comment by @Ivo-Maffei created at 2020-08-22 10:51:06

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2020-08-23 09:58:28

this ticket also gets shot down by dog-slow and memory-hungry `sage.graphs.generators.distance_regular.HermitianFormsGraph`


---

Comment by dimpase created at 2020-08-23 09:58:28

Changing status from needs_review to needs_work.


---

Comment by git created at 2020-08-29 08:46:30

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2020-08-29 09:27:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2020-09-05 20:30:00

should this be rebased over the latests positively reviewed tickets by you?


---

Comment by @Ivo-Maffei created at 2020-09-06 09:07:37

Replying to [comment:10 dimpase]:
> should this be rebased over the latests positively reviewed tickets by you?
Yes. The dependency chain is #30312 -> #30329 -> #30337 -> #30343 -> #30356
At the moment #30312 and #30329 are done. When #30343 will be sorted (rebased on updated #30337), I'll fix this ticket as well


---

Comment by chapoton created at 2020-09-12 07:06:07

It seems to be a not-so-good idea to have such long chains of dependencies, if not really required. This can be blocked at any step. Think parallel instead of series.


---

Comment by dimpase created at 2020-09-13 07:03:12

without refactoring into smaller modules, this looks hard to avoid.


---

Comment by chapoton created at 2020-09-13 07:08:28

Indeed. This was just a non-specific comment.

Note that one of the patchbot plugins is not green.


---

Comment by git created at 2020-09-14 08:45:11

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by @Ivo-Maffei created at 2020-09-14 08:47:02

Merged all dependencies and fixed a bug


---

Comment by @Ivo-Maffei created at 2020-09-14 08:47:02

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2020-09-16 18:06:17

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-09-16 18:06:17

OK


---

Comment by git created at 2020-12-15 14:01:04

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:


---

Comment by git created at 2020-12-15 14:01:04

Changing status from positive_review to needs_review.


---

Comment by dimpase created at 2020-12-15 14:01:56

rebased over #30343


---

Comment by git created at 2020-12-15 14:11:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by dimpase created at 2020-12-15 14:17:45

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-12-27 00:23:15

Resolution: fixed
