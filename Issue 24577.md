# Issue 24577: Don't abuse prepare_dict() in ChainComplex

Issue created by migration from https://trac.sagemath.org/ticket/24814

Original creator: jdemeyer

Original creation time: 2018-02-22 11:25:40

The function `prepare_dict` is meant to be used by the matrix constructor. However, it is also used in a convoluted and inefficient way in `ChainComplex`.

This should be fixed because #24742 plans to remove the `prepare_dict` function.


---

Comment by jdemeyer created at 2018-02-22 11:48:38

New commits:


---

Comment by jdemeyer created at 2018-02-22 11:48:38

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2018-02-22 16:09:43

I think `mat` should be `dict[guess]`.


---

Comment by jhpalmieri created at 2018-02-22 16:11:31

But chain complexes with `grading_group` not equal to `ZZ` are not well tested in general...


---

Comment by jdemeyer created at 2018-02-23 14:39:11

Replying to [comment:3 jhpalmieri]:
> I think `mat` should be `dict[guess]`.

I put your suggestion on #24826


---

Comment by git created at 2018-02-23 14:55:11

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2018-02-24 18:37:59

Sorry, changed the branch for the wrong ticket. Fixed now.


---

Comment by chapoton created at 2018-02-24 19:29:34

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2018-02-24 19:29:34

ok


---

Comment by vbraun created at 2018-02-25 19:59:00

Resolution: fixed
