# Issue 27776: Build Python 3 docker images

archive/issues_027776.json:
```json
{
    "body": "CC:  @videlec\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28013\n\n",
    "created_at": "2019-06-19T00:59:57Z",
    "labels": [
        "component: distribution"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Build Python 3 docker images",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27776",
    "user": "https://github.com/saraedum"
}
```
CC:  @videlec



Issue created by migration from https://trac.sagemath.org/ticket/28013





---

archive/issue_comments_391979.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2019-06-19T01:09:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391979",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_391980.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2019-06-19T01:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391980",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_391981.json:
```json
{
    "body": "Currently, this is a hack to see whether building on Docker works. We should of course build both Py2 and Py3.",
    "created_at": "2019-06-19T01:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391981",
    "user": "https://github.com/saraedum"
}
```

Currently, this is a hack to see whether building on Docker works. We should of course build both Py2 and Py3.



---

archive/issue_comments_391982.json:
```json
{
    "body": "Changing keywords from \"\" to \"days101, py3, docker\".",
    "created_at": "2019-06-19T01:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391982",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "days101, py3, docker".



---

archive/issue_comments_391983.json:
```json
{
    "body": "You can see the status of this at: https://gitlab.com/sagemath/dev/trac/commits/u/slelievre/t-28013-py3-docker-images\n\n---\nNew commits:",
    "created_at": "2019-06-19T01:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391983",
    "user": "https://github.com/saraedum"
}
```

You can see the status of this at: https://gitlab.com/sagemath/dev/trac/commits/u/slelievre/t-28013-py3-docker-images

---
New commits:



---

archive/issue_comments_391984.json:
```json
{
    "body": "Currently it looks like my gitlab runners *are* working, but every ticket build is timing out because for some reason they're all trying to build openblas, and then timing out after 3 hours.\n\nThe openblas update is new as of I think 8.8.rc0 (I think it was maybe a mistake to update as big a package as openblas in a *release candidate*).  The docker build of 8.8.rc0 seems to have failed in the test-dev job for some random reason.  So I'll try re-running it...  Then all the 8.8.rc1 builds failed as well for some non-obvious reason.\n\n---\nNew commits:",
    "created_at": "2019-06-19T13:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391984",
    "user": "https://github.com/embray"
}
```

Currently it looks like my gitlab runners *are* working, but every ticket build is timing out because for some reason they're all trying to build openblas, and then timing out after 3 hours.

The openblas update is new as of I think 8.8.rc0 (I think it was maybe a mistake to update as big a package as openblas in a *release candidate*).  The docker build of 8.8.rc0 seems to have failed in the test-dev job for some random reason.  So I'll try re-running it...  Then all the 8.8.rc1 builds failed as well for some non-obvious reason.

---
New commits:



---

archive/issue_comments_391985.json:
```json
{
    "body": "Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the \"Release\" stage didn't run...?",
    "created_at": "2019-06-19T13:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391985",
    "user": "https://github.com/embray"
}
```

Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the "Release" stage didn't run...?



---

archive/issue_comments_391986.json:
```json
{
    "body": "Replying to [comment:8 embray]:\n> Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the \"Release\" stage didn't run...?\n\n\nOh, I see, building/releasing from the 8.8.rc1 *tag* did pass, but from the *develop* branch did not pass.\n\nI guess then maybe many of the trac tickets are not based off 8.8.rc1 yet so they're still pulling docker images of older builds that don't include the openblas update.",
    "created_at": "2019-06-19T14:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391986",
    "user": "https://github.com/embray"
}
```

Replying to [comment:8 embray]:
> Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the "Release" stage didn't run...?


Oh, I see, building/releasing from the 8.8.rc1 *tag* did pass, but from the *develop* branch did not pass.

I guess then maybe many of the trac tickets are not based off 8.8.rc1 yet so they're still pulling docker images of older builds that don't include the openblas update.



---

archive/issue_comments_391987.json:
```json
{
    "body": "Let's use a public branch for this.\n\n---\nNew commits:",
    "created_at": "2019-06-19T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391987",
    "user": "https://github.com/slel"
}
```

Let's use a public branch for this.

---
New commits:



---

archive/issue_comments_391988.json:
```json
{
    "body": "Duplicate of #28041.",
    "created_at": "2019-08-19T18:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391988",
    "user": "https://github.com/saraedum"
}
```

Duplicate of #28041.



---

archive/issue_comments_391989.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-08-19T18:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391989",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_069444.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27776#event-69444"
}
```



---

archive/issue_comments_391990.json:
```json
{
    "body": "Ok.",
    "created_at": "2019-08-20T05:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391990",
    "user": "https://github.com/slel"
}
```

Ok.



---

archive/issue_comments_391991.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2019-08-22T06:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27776#issuecomment-391991",
    "user": "https://github.com/fchapoton"
}
```

Resolution: duplicate



---

archive/issue_events_069445.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-22T06:46:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27776",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27776#event-69445"
}
```
