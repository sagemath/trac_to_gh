# Issue 25607: Remove package pycrypto

Issue created by migration from https://trac.sagemath.org/ticket/25844

Original creator: slelievre

Original creation time: 2018-07-12 11:28:53

CC:  arojas chapoton cschwan embray fbissey @timokau infinity0 novoselt pcpa saraedum schilly slelievre strogdon thansen tmonteil vbraun was

Keywords: remove, package, pycrypto

In short: pycrypto is no longer maintained, but also no longer used in Sage.

We should stop shipping it.

If needed, pycryptodome could serve as a replacement.

More detail below.

-----

In this [sage-packaging discussion](https://groups.google.com/d/topic/sage-packaging/rynI5UjHFqs/discussion), FranÃ§ois Bissey, who maintains
Sage-on-Gentoo, reports that

> pycrypto is dead upstream and contains unfixed security bugs.

and considers removing it for Gentoo.

Antonio Rojas, who packages Sage for Arch Linux, says it was already
removed from Arch Linux:

> AFAIK pycrypto wasn't used by sagenb itself, but only via twisted,
> and they switched to cryptography in 16.0 [1]. Anyhow, secure
> sagenb works fine here without pycrypto.

The [latest pycrypto on PyPI](https://pypi.org/project/pycrypto/#history)
is release 2.6.1 from 17 Oct 2013.

This
[message from Fri 21 Jul 2017 19:21:01 UTC](https://lists.dlitz.net/pipermail/pycrypto/2017/000900.html)
on the
[pycrypto mailing list](https://lists.dlitz.net/pipermail/pycrypto/)
reads:

> As this project hasn't seen commits on master (or perhaps any branch)
> in over three years, it appears to be dead.
>
> However, pycryptodome is alive and well! It's a fork off the latest
> pycrypto and contains many bugfixes, enhancements. Most importantly,
> it's an ongoing project.
>
> https://github.com/Legrandin/pycryptodome
>
> https://www.pycryptodome.org/
>
> There are two ways to install it: for a seamless experience I recommend 
> uninstalling pycrypto (if present) and installing pycryptodome.
>
> (pycryptodomex has its uses for some, but would mean editing your
> imports, whereas pycryptodome is a drop-in replacement for pycrypto.)
>
> If you have issues with installing or using pycryptodome, there are
> resources there to guide you and an active issue tracker as well.



---

Comment by embray created at 2018-07-12 12:56:49

+1 I don't think we should even provide a replacement.  There shouldn't be packages in Sage-the-distribution that aren't even used by Sage, directly or indirectly.


---

Comment by embray created at 2018-07-12 12:57:22

It would be nice if we could do this for 8.3 since it will help packagers.


---

Comment by @timokau created at 2018-07-12 12:59:29

Grepping through my source tree: I have pycrypto listed as a dependency of python-openid, which is a dependency of sagenb. Is that the dependency that is not actually used?


---

Comment by embray created at 2018-07-12 13:07:56

Changing status from new to needs_review.


---

Comment by embray created at 2018-07-12 13:07:56

Changing priority from major to critical.


---

Comment by embray created at 2018-07-12 13:07:56

New commits:


---

Comment by embray created at 2018-07-12 13:08:28

Replying to [comment:3 gh-timokau]:
> Grepping through my source tree: I have pycrypto listed as a dependency of python-openid, which is a dependency of sagenb. Is that the dependency that is not actually used?

It's an optional dependency, and I think we're actually removing openid from sagenb as well, since it no longer works on Python 3.


---

Comment by tmonteil created at 2018-07-12 18:32:43

It is OK for me, you just forgot to remove the licensing informations about pycrypto. If you agree with this trivial change, you can set the ticket to positive_review.
----
New commits:


---

Comment by @timokau created at 2018-07-12 19:26:42

If it wasn't used in sage in the first place and just stuff in `build` is modified, it shouldn't make a difference to packagers either way. We (at least I and pretty sure the others too) don't use anything from `build/pkgs`.

That doesn't mean I have anything against including this in 8.3, just clarifying.


---

Comment by fbissey created at 2018-07-12 20:49:13

Replying to [comment:3 gh-timokau]:
> Grepping through my source tree: I have pycrypto listed as a dependency of python-openid, which is a dependency of sagenb. Is that the dependency that is not actually used?
Well in Gentoo python-openid doesn't depend on it. May be it is an optional runtime dependency?
In any case I am all for removing it now. Shaves a few bytes from the release tarball, smaller build/pkg folder what's not to love :)


---

Comment by @timokau created at 2018-07-12 20:52:13

Yeah I agree. In nix the `python-openid` package wasn't accepted into the main tree anyways. It is only used as a dependency for sage(nb), since it has the same problem `pycrypto` has (unmaintained, known problems).


---

Comment by embray created at 2018-07-12 22:37:34

Changing status from needs_review to positive_review.


---

Comment by embray created at 2018-07-12 22:37:34

I even meant to check COPYING.txt but got distracted and forgot at the last second.


---

Comment by vdelecroix created at 2018-08-03 19:20:18

update milestone 8.3 -> 8.4


---

Comment by vbraun created at 2018-08-05 08:43:28

Resolution: fixed
