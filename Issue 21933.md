# Issue 21933: plot3d : the option "mesh=True" does not work in Jupyter

Issue created by migration from https://trac.sagemath.org/ticket/22170

Original creator: ams

Original creation time: 2017-01-11 11:33:43

CC:  jhonrubia6 chapoton egourgoulhon paulmasson kcrisman

Keywords: plot3d, jupyter, mesh, days82

This test from documentation : 


```
sage: var('x,y')
sage: plot3d(sin(x-y)*y*cos(x),(x,-3,3),(y,-3,3), mesh=True)
```


works on terminal, `*.sagews` in the cloud, local sage notebooks but... not in Jupyter notebook (both local and cloud-based). Trying it in Jupyter gives an empty `AssertionError`. (Full text of the error in the comment.)


---

Comment by ams created at 2017-01-11 11:35:55

Full text o


---

Comment by chapoton created at 2017-01-11 12:25:39

no idea for this, sorry


---

Comment by jhonrubia6 created at 2017-01-11 14:26:09

no idea either (never worked on jupyter), sorry


---

Comment by paulmasson created at 2017-01-12 20:23:05

This is happening because `mesh=True` adds a line to the Jmol data file starting with `pmesh` that does not have a quote-enclosed filename at the end of the line, hence the `AssertionError`. The `script` method in `repl/display/jsmol_iframe.py` needs to be modified.


---

Comment by chapoton created at 2018-01-24 12:35:16

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-01-24 12:35:16

I have fixed that, please double check. 
----
New commits:


---

Comment by egourgoulhon created at 2018-01-26 17:28:56

Thanks for the fix!
I confirm it works.

Side note: with `viewer='threejs'`, the mesh is not displayed, but this is another issue, not related to this ticket.


---

Comment by egourgoulhon created at 2018-01-26 17:28:56

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-01-27 16:00:03

Resolution: fixed
