# Issue 32241: trivial __copy__ and __deepcopy__ methods for number field elements

Issue created by migration from https://trac.sagemath.org/ticket/32478

Original creator: mkoeppe

Original creation time: 2021-09-05 23:06:33

CC:  tscrim nbruin klee vdelecroix mmezzarobba

(split out from #13811, follow-up on #32454)

Most Sage objects are immutable. Nevertheless, `copy` and `deepcopy` make copies (through pickling/unpickling) for them because we have not provided the classes with `__copy__` methods (which should just return the object) and `__deepcopy__` methods (which in many cases should just return the object).

```
sage: a = 0
sage: copy(a) is a
False
```


In this ticket, we take care of number field elements.


---

Comment by mkoeppe created at 2021-09-05 23:20:20

As mentioned in #13811#comment:37, the change for `NumberFieldElement` leads to doctest errors. 
----
New commits:


---

Comment by git created at 2021-09-09 21:30:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-09-09 21:32:28

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-09-09 21:32:28

The failures came from the defective pattern discussed in #13811#comment:49, fixed now.


---

Comment by git created at 2021-09-09 21:36:11

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2021-09-09 23:27:20

A while-we-are-at-it, we probably should optimize `def _copy_for_parent(self, parent):` as

```
cpdef _copy_for_parent(self, Parent parent):
```

Otherwise LGTM.


---

Comment by git created at 2021-09-10 00:24:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2021-09-10 01:51:30

Thank you.

Sorry, there one other doc thing I just noticed. For `NumberFieldElement_quadratic.__deepcopy__()`, the documentation is wrong as it does not return a copy.


---

Comment by git created at 2021-09-10 03:51:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2021-09-10 04:10:59

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2021-09-10 04:10:59

Thank you. LGTM.


---

Comment by mkoeppe created at 2021-09-10 04:11:58

Thanks!


---

Comment by vbraun created at 2021-09-19 09:58:25

Resolution: fixed
