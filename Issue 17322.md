# Issue 17322: load_session loses variable's latex_name

Issue created by migration from https://trac.sagemath.org/ticket/17559

Original creator: wonder

Original creation time: 2014-12-28 03:07:16

Saving and loading variables apparently doesn't reload the `latex_name` attribute:


```
┌────────────────────────────────────────────────────────────────────┐
│ Sage Version 6.4.1, Release Date: 2014-11-23                       │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
sage: xhat = SR.symbol( 'xhat', latex_name='\hat{x}' )
sage: latex(xhat)
\hat{x}
sage: save_session( 'xhat' )
sage: l = load( 'xhat.sobj' )
sage: latex( l['xhat'] )
\hat{x}
sage: 
Exiting Sage (CPU time 0m0.20s, Wall time 2m49.25s).
```



```
┌────────────────────────────────────────────────────────────────────┐
│ Sage Version 6.4.1, Release Date: 2014-11-23                       │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
sage: l = load( 'xhat.sobj' )
sage: latex( l['xhat'] )
\mathit{xhat}
```


It looks as if it tries to keep these objects unique, and `load()` will leave an existing variable's `latex_name` in place, but won't set it when creating a variable.

I can see arguments for and against considering `SR.symbol('x', latex_name='y')` a different variable from `SR.symbol('x')`.  It seems reasonable to consider them the same, in which case the latex name should be discarded if there's already a variable of the same name.  But it should use the saved latex name when loading a variable that isn't already defined.

Seems possibly related: #5466


---

Comment by wonder created at 2015-01-30 19:01:28

Changing component from pickling to symbolics.


---

Comment by kcrisman created at 2015-02-10 21:55:35

According to the sage-support thread in question, perhaps the more recent bug is different

```

The problem above is caused by sage reusing 
"already existing variables" in the symbol function 
in sage/symbolic/ring.pyx. This "fixes" the above bug: 

diff --git a/src/sage/symbolic/ring.pyx b/src/sage/symbolic/ring.pyx 
index f87f622..6972018 100644 
--- a/src/sage/symbolic/ring.pyx 
+++ b/src/sage/symbolic/ring.pyx 
@@ -555,7 +555,7 @@ cdef class SymbolicRing(CommutativeRing): 
         e = pynac_symbol_registry.get(name) 

         # fast path to get an already existing variable 
-        if e is not None: 
+        if False: # e is not None: 
             if domain is None: 
                 if latex_name is None: 
                     return e 
```

