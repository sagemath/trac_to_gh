# Issue 33183: fix E111 (indentation) in quadratic_forms

Issue created by migration from https://trac.sagemath.org/ticket/33420

Original creator: chapoton

Original creation time: 2022-02-26 19:35:53




---

Comment by chapoton created at 2022-02-26 19:36:21

Changing status from new to needs_review.


---

Comment by chapoton created at 2022-02-26 19:36:21

New commits:


---

Comment by tscrim created at 2022-02-27 00:49:57

LGTM although if you want to while-we-are-at-it:

```diff
-            auts = [matrix(ZZ, 3, [a, b, c, d, e, f, g, h, i]) for a in I for b in I for c in I for d in I for e in I for f in I for g in I for h in I for i in I]
+            import itertools
+            auts = [matrix(ZZ, 3, m) for m in itertools.product([I]*9)]
```


```diff
-            raise ValueError("Oops, only implemented for definite forms.")
+            raise NotImplementedError("only implemented for definite forms")
```

Maybe also more professional error messages in `sum_by_coefficients_with` too.

If you don't want to do any of these, feel free to ignore. You can set a positive review on my behalf after making any subset of these changes.


---

Comment by git created at 2022-02-27 07:30:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-02-27 07:42:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-02-27 13:37:22

thanks, setting to positive. All these Oops messages should be changed, but not here


---

Comment by chapoton created at 2022-02-27 13:37:29

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2022-02-27 13:42:15

funny:

```
git grep -c "Oo*ps" src/sage
src/sage/combinat/root_system/cartan_type.py:1
src/sage/geometry/fan.py:1
src/sage/quadratic_forms/constructions.py:2
src/sage/quadratic_forms/extras.py:5
src/sage/quadratic_forms/quadratic_form.py:16
src/sage/quadratic_forms/quadratic_form__equivalence_testing.py:5
src/sage/quadratic_forms/quadratic_form__local_density_congruence.py:2
src/sage/quadratic_forms/quadratic_form__local_density_interfaces.py:2
src/sage/quadratic_forms/quadratic_form__local_field_invariants.py:3
src/sage/quadratic_forms/quadratic_form__local_normal_form.py:8
src/sage/quadratic_forms/quadratic_form__local_representation_conditions.py:1
src/sage/quadratic_forms/quadratic_form__mass__Conway_Sloane_masses.py:5
src/sage/quadratic_forms/quadratic_form__mass__Siegel_densities.py:1
src/sage/quadratic_forms/quadratic_form__reduction_theory.py:1
src/sage/quadratic_forms/quadratic_form__split_local_covering.py:2
src/sage/quadratic_forms/quadratic_form__theta.py:2
src/sage/quadratic_forms/quadratic_form__variable_substitutions.py:2
src/sage/quadratic_forms/random_quadraticform.py:2
src/sage/quadratic_forms/special_values.py:1
src/sage/quadratic_forms/ternary_qf.py:6
src/sage/rings/bernmm/bern_modp_util.h:1
src/sage/rings/qqbar.py:1
src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py:1
```



---

Comment by slelievre created at 2022-02-27 17:20:51

Optionally, pushing the while-we-are-at-it slightly further:

```diff
-            I = [[-1, 0, 1]] * 9
-            auts = (matrix(ZZ, 3, 3, m) for m in itertools.product(*I))
+            I = itertools.product([-1, 0, 1], repeat=9)
+            auts = (matrix(ZZ, 3, 3, m) for m in I)
```



---

Comment by tscrim created at 2022-02-28 04:02:42

I always forget about the `repeat` option.


---

Comment by chapoton created at 2022-02-28 08:16:28

Changing status from positive_review to needs_work.


---

Comment by git created at 2022-02-28 08:21:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-02-28 08:22:05

so back to "needs review" now


---

Comment by chapoton created at 2022-02-28 08:22:05

Changing status from needs_work to needs_review.


---

Comment by slelievre created at 2022-02-28 18:49:32

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-03-01 21:31:23

Resolution: fixed
