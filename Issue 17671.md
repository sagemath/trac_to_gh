# Issue 17671: Sage doesn't grok unsolved integral results from fricas

archive/issues_017671.json:
```json
{
    "body": "Keywords: FriCAS\n\nIn cases where Fricas gives back an unsolved integral:\n\n```\nsage: integrate(abs(x), x, algorithm='fricas')\n...\nValueError: Unable to parse: integral(abs(x),x::Symbol)\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/17908\n\n",
    "closed_at": "2019-06-07T22:44:08Z",
    "created_at": "2015-03-07T14:44:18Z",
    "labels": [
        "component: interfaces: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Sage doesn't grok unsolved integral results from fricas",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17671",
    "user": "https://github.com/rwst"
}
```
Keywords: FriCAS

In cases where Fricas gives back an unsolved integral:

```
sage: integrate(abs(x), x, algorithm='fricas')
...
ValueError: Unable to parse: integral(abs(x),x::Symbol)
```

Issue created by migration from https://trac.sagemath.org/ticket/17908





---

archive/issue_comments_235876.json:
```json
{
    "body": "Changing component from interfaces to interfaces: optional.",
    "created_at": "2015-06-23T13:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235876",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from interfaces to interfaces: optional.



---

archive/issue_comments_235877.json:
```json
{
    "body": "Changing keywords from \"\" to \"FriCAS\".",
    "created_at": "2019-02-15T16:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235877",
    "user": "https://github.com/mantepse"
}
```

Changing keywords from "" to "FriCAS".



---

archive/issue_comments_235878.json:
```json
{
    "body": "In current develop, this almost works:\n\n```\nsage: r = integrate(abs(x), x, algorithm='fricas'); r\nintegral(abs(x), x)\nsage: r.operands()\n[abs(x), x]\nsage: r.operands()[0].subs(x=-1)\nabs(-1)\n```\n\nThe cure is, as observed by `@`slelievre, to do `register_symbol` for `abs`.",
    "created_at": "2019-02-15T16:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235878",
    "user": "https://github.com/mantepse"
}
```

In current develop, this almost works:

```
sage: r = integrate(abs(x), x, algorithm='fricas'); r
integral(abs(x), x)
sage: r.operands()
[abs(x), x]
sage: r.operands()[0].subs(x=-1)
abs(-1)
```

The cure is, as observed by `@`slelievre, to do `register_symbol` for `abs`.



---

archive/issue_comments_235879.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-02-15T20:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235879",
    "user": "https://github.com/mantepse"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_235880.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-02-15T20:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235880",
    "user": "https://github.com/mantepse"
}
```

New commits:



---

archive/issue_comments_235881.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-02-15T23:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_235882.json:
```json
{
    "body": "there are merge commits than actual commits on your branch... which makes it very hard to read. You would better rewrite the branch.",
    "created_at": "2019-03-04T19:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235882",
    "user": "https://github.com/videlec"
}
```

there are merge commits than actual commits on your branch... which makes it very hard to read. You would better rewrite the branch.



---

archive/issue_comments_235883.json:
```json
{
    "body": "My develop version is currently bombed but the code and fix look exactly correct, nice fix.  Does green patchbot mean anything since this is an optional test?",
    "created_at": "2019-03-08T13:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235883",
    "user": "https://github.com/kcrisman"
}
```

My develop version is currently bombed but the code and fix look exactly correct, nice fix.  Does green patchbot mean anything since this is an optional test?



---

archive/issue_comments_235884.json:
```json
{
    "body": "green patchbot means little, however, you can check the result by arando (which has unrelated failures, though).  It does work on my computer, too :-)",
    "created_at": "2019-03-08T13:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235884",
    "user": "https://github.com/mantepse"
}
```

green patchbot means little, however, you can check the result by arando (which has unrelated failures, though).  It does work on my computer, too :-)



---

archive/issue_comments_235885.json:
```json
{
    "body": "The doctest seems to work (in 8.8.b7) without the changes..",
    "created_at": "2019-06-05T11:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235885",
    "user": "https://github.com/fchapoton"
}
```

The doctest seems to work (in 8.8.b7) without the changes..



---

archive/issue_comments_235886.json:
```json
{
    "body": "Indeed, in `sage.functions.other` we have:\n\n```\n2c7174fed (Eviatar Bach         2014-08-12 15:06:19 +0200  122)         GinacFunction.__init__(self, \"abs\", latex_name=r\"\\mathrm{abs}\",\n017571be1 (Marcelo Forets       2017-05-14 21:10:12 +0200  123)                                conversions=dict(sympy='Abs',\n666c2f36f (Marcelo Forets       2017-05-25 23:03:03 +0200  124)                                                 mathematica='Abs',\n2b35b3b2f (Fr\u00e9d\u00e9ric Chapoton    2019-03-30 21:01:43 +0100  125)                                                 giac='abs',\n2b35b3b2f (Fr\u00e9d\u00e9ric Chapoton    2019-03-30 21:01:43 +0100  126)                                                 fricas='abs'))\n```",
    "created_at": "2019-06-06T06:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235886",
    "user": "https://github.com/mantepse"
}
```

Indeed, in `sage.functions.other` we have:

```
2c7174fed (Eviatar Bach         2014-08-12 15:06:19 +0200  122)         GinacFunction.__init__(self, "abs", latex_name=r"\mathrm{abs}",
017571be1 (Marcelo Forets       2017-05-14 21:10:12 +0200  123)                                conversions=dict(sympy='Abs',
666c2f36f (Marcelo Forets       2017-05-25 23:03:03 +0200  124)                                                 mathematica='Abs',
2b35b3b2f (Frédéric Chapoton    2019-03-30 21:01:43 +0100  125)                                                 giac='abs',
2b35b3b2f (Frédéric Chapoton    2019-03-30 21:01:43 +0100  126)                                                 fricas='abs'))
```



---

archive/issue_comments_235887.json:
```json
{
    "body": "So we need a clean branch just adding the doctest and not the other changes. Will you do that ?",
    "created_at": "2019-06-06T18:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235887",
    "user": "https://github.com/fchapoton"
}
```

So we need a clean branch just adding the doctest and not the other changes. Will you do that ?



---

archive/issue_comments_235888.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-06T18:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_235889.json:
```json
{
    "body": "ok, thx",
    "created_at": "2019-06-06T18:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235889",
    "user": "https://github.com/fchapoton"
}
```

ok, thx



---

archive/issue_comments_235890.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-06-06T18:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235890",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_050976.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-07T11:55:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17671#event-50976"
}
```



---

archive/issue_events_050977.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-07T22:44:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17671#event-50977"
}
```



---

archive/issue_comments_235891.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-07T22:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17671#issuecomment-235891",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
