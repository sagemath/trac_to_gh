# Issue 17671: Sage doesn't grok unsolved integral results from fricas

Issue created by migration from Trac.

Original creator: rws

Original creation time: 2015-03-07 14:44:18

In cases where Fricas gives back an unsolved integral:

```
sage: integrate(abs(x), x, algorithm='fricas')
...
ValueError: Unable to parse: integral(abs(x),x::Symbol)
```



---

Comment by jdemeyer created at 2015-06-23 13:49:26

Changing component from interfaces to interfaces: optional.


---

Comment by mantepse created at 2019-02-15 16:47:05

Changing keywords from "" to "FriCAS".


---

Comment by mantepse created at 2019-02-15 16:58:50

In current develop, this almost works:

```
sage: r = integrate(abs(x), x, algorithm='fricas'); r
integral(abs(x), x)
sage: r.operands()
[abs(x), x]
sage: r.operands()[0].subs(x=-1)
abs(-1)
```


The cure is, as observed by `@`slelievre, to do `register_symbol` for `abs`.


---

Comment by mantepse created at 2019-02-15 20:12:19

Changing status from new to needs_review.


---

Comment by mantepse created at 2019-02-15 20:12:19

New commits:


---

Comment by git created at 2019-02-15 23:15:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2019-03-04 19:51:40

there are merge commits than actual commits on your branch... which makes it very hard to read. You would better rewrite the branch.


---

Comment by kcrisman created at 2019-03-08 13:10:19

My develop version is currently bombed but the code and fix look exactly correct, nice fix.  Does green patchbot mean anything since this is an optional test?


---

Comment by mantepse created at 2019-03-08 13:25:40

green patchbot means little, however, you can check the result by arando (which has unrelated failures, though).  It does work on my computer, too :-)


---

Comment by chapoton created at 2019-06-05 11:42:18

The doctest seems to work (in 8.8.b7) without the changes..


---

Comment by mantepse created at 2019-06-06 06:53:20

Indeed, in `sage.functions.other` we have:

```
2c7174fed (Eviatar Bach         2014-08-12 15:06:19 +0200  122)         GinacFunction.__init__(self, "abs", latex_name=r"\mathrm{abs}",
017571be1 (Marcelo Forets       2017-05-14 21:10:12 +0200  123)                                conversions=dict(sympy='Abs',
666c2f36f (Marcelo Forets       2017-05-25 23:03:03 +0200  124)                                                 mathematica='Abs',
2b35b3b2f (Frédéric Chapoton    2019-03-30 21:01:43 +0100  125)                                                 giac='abs',
2b35b3b2f (Frédéric Chapoton    2019-03-30 21:01:43 +0100  126)                                                 fricas='abs'))
```



---

Comment by chapoton created at 2019-06-06 18:38:55

So we need a clean branch just adding the doctest and not the other changes. Will you do that ?


---

Comment by git created at 2019-06-06 18:52:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2019-06-06 18:59:40

ok, thx


---

Comment by chapoton created at 2019-06-06 18:59:40

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-06-07 22:44:08

Resolution: fixed
