# Issue 33952: Remove imports from sage.rings.all

Issue created by migration from https://trac.sagemath.org/ticket/34189

Original creator: mkoeppe

Original creation time: 2022-07-16 15:25:01

as found by `./sage -tox -e relint`


---

Comment by mkoeppe created at 2022-07-16 16:01:03

New commits:


---

Comment by git created at 2022-07-16 16:10:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-07-16 16:11:06

Changing status from new to needs_review.


---

Comment by git created at 2022-07-18 05:31:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-18 05:48:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-18 05:50:49

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @GMS103 created at 2022-07-25 11:40:22

In `src/sage/rings/quotient_ring.py`, should

`from sage.all import Infinity`

be replaced by

`from sage.rings.infinity import Infinity`?

(If this is the case, I can look for other instances.)


---

Comment by mkoeppe created at 2022-07-25 16:19:10

Yes, thanks for catching this. Not sure how it slipped through.


---

Comment by @GMS103 created at 2022-07-25 17:59:50

There is also
`from sage.rings.all import IntegerModRing`
in
`src/sage/rings/padics/padic_template_element.pxi`

but perhaps this is normal?


---

Comment by git created at 2022-07-25 18:50:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-25 18:53:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-07-25 18:57:12

OK, fixed the tooling and fixed these two.


---

Comment by klee created at 2022-07-28 02:22:21

In

```
pattern: 'from\s+sage(|[.](arith|categories|combinat|ext|graphs(|[.]decompositions)|interfaces|libs|matrix|misc|numerical(|[.]backends)|rings|sets))[.]all\s+import'
```

is the final `.` before `all` really optional?

The namespace package hierarchy is hardcoded into this pattern. Thus the pattern would need constant updating as the hierarchy evolves. Perhaps we need a central source of the namespace package hierarchy and this pattern could be constructed from the source. No?


---

Comment by mkoeppe created at 2022-07-28 02:53:59

Replying to [comment:17 klee]:
> In
> {{{
> pattern: 'from\s+sage(|[.](arith|categories|combinat|ext|graphs(|[.]decompositions)|interfaces|libs|matrix|misc|numerical(|[.]backends)|rings|sets))[.]all\s+import'
> }}}
> is the final `.` before `all` really optional?

These patterns are regular expressions. Square brackets are character sets, not optional items. `[.]` accepts the literal character `.` only


---

Comment by mkoeppe created at 2022-07-28 02:56:26

Replying to [comment:17 klee]:
> Thus the pattern would need constant updating as the hierarchy evolves. Perhaps we need a central source of the namespace package hierarchy and this pattern could be constructed from the source.

In #34201, I mention a more semantic code analysis tool that could perhaps be used instead of this simple regular expression based check. But for now I'd like to keep this as simple as possible


---

Comment by klee created at 2022-07-28 03:06:07

Replying to [comment:18 mkoeppe]:
> Replying to [comment:17 klee]:
> > In
> > {{{
> > pattern: 'from\s+sage(|[.](arith|categories|combinat|ext|graphs(|[.]decompositions)|interfaces|libs|matrix|misc|numerical(|[.]backends)|rings|sets))[.]all\s+import'
> > }}}
> > is the final `.` before `all` really optional?
> 
> These patterns are regular expressions. Square brackets are character sets, not optional items. `[.]` accepts the literal character `.` only

Right. I misunderstood.


---

Comment by klee created at 2022-07-28 05:03:47

Replying to [comment:19 mkoeppe]:
> In #34201, I mention a more semantic code analysis tool that could perhaps be used instead of this simple regular expression based check. But for now I'd like to keep this as simple as possible

Okay. 

Then I am positive with this ticket.


---

Comment by @GMS103 created at 2022-07-28 08:46:20

> Then I am positive with this ticket. 

Me too.


---

Comment by klee created at 2022-07-28 09:05:53

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-07-28 19:59:49

Thanks both!


---

Comment by vbraun created at 2022-08-01 20:22:58

Resolution: fixed
