# Issue 14396: Update to Python-2.7.5

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2013-05-16 19:15:12

Assignee: jdemeyer

Just came out, fixes some regressions in Python-2.7.4


---

Comment by leif created at 2013-05-16 19:39:53

Most importantly, suppresses the _"‘`PyArg_ParseTuple`’ is an unrecognized format function type"_ warning with newer GCCs.

Also fixes the potential `IndexError` in `inspect.findsource()`.


---

Comment by vbraun created at 2013-05-16 20:37:58

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-05-16 20:37:58

All tests pass on my machine


---

Comment by novoselt created at 2013-05-16 20:56:52

I am getting constant rebuild of several files on "sage -b" even when there are no changes, e.g. if I repeat it twice. I recall such a problem appearing because of nanosecond timestamps that python didn't handle correctly and Volker fixed it by either upgrading python or patching it. Maybe the fix has disappeared?..


---

Comment by novoselt created at 2013-05-16 20:57:40

Should probably add that this is with 5.10.beta3 and installing this package didn't help so far.


---

Comment by leif created at 2013-05-16 21:46:38

Replying to [comment:4 novoselt]:
> I am getting constant rebuild of several files on "sage -b" even when there are no changes, e.g. if I repeat it twice. I recall such a problem appearing because of nanosecond timestamps that python didn't handle correctly and Volker fixed it by either upgrading python or patching it. Maybe the fix has disappeared?..

So you're saying this happens with the 2.7.4.p0 spkg as well?  On which platform?  Which files keep getting rebuilt?


---

Comment by novoselt created at 2013-05-16 22:00:04

Yes, before and after python-2.7.5 on sage-5.10.beta3. This is on Debian Wheezy with ext4 file system. May be completely unrelated to python, but it was in the past. I've just done some changes to my sage-5.9, which has python-2.7.3.p6 and everything was smooth, only files that I have changed got rebuilt. Below is the output of `sage -b` right after `sage -b`:



```
novoselt`@`sage:~/sage/devel/sage$ sage -b

----------------------------------------------------------
sage: Building and installing modified Sage library files.


Installing c_lib
scons: `install' is up to date.
Updating Cython code....
Finished compiling Cython code (time = 2.19156885147 seconds)
running install
running build
running build_py
running build_ext
building 'sage.algebras.quatalg.quaternion_algebra_element' extension
building 'sage.graphs.matchpoly' extension
building 'sage.groups.perm_gps.partn_ref.automorphism_group_canonical_label' extension
building 'sage.groups.perm_gps.partn_ref.canonical_augmentation' extension
building 'sage.groups.perm_gps.partn_ref.double_coset' extension
building 'sage.groups.perm_gps.partn_ref.refinement_binary' extension
building 'sage.groups.perm_gps.partn_ref.refinement_graphs' extension
building 'sage.groups.perm_gps.partn_ref.refinement_lists' extension
building 'sage.groups.perm_gps.partn_ref.refinement_matrices' extension
building 'sage.groups.perm_gps.partn_ref.refinement_python' extension
building 'sage.groups.perm_gps.partn_ref.refinement_sets' extension
building 'sage.libs.flint.flint' extension
building 'sage.libs.flint.fmpz_poly' extension
building 'sage.modular.modform.eis_series_cython' extension
building 'sage.modular.modsym.apply' extension
building 'sage.modular.modsym.heilbronn' extension
building 'sage.rings.integer' extension
building 'sage.rings.fraction_field_FpT' extension
building 'sage.rings.polynomial.polynomial_zmod_flint' extension
building 'sage.rings.polynomial.polynomial_integer_dense_flint' extension
building 'sage.rings.polynomial.polynomial_rational_flint' extension
building 'sage.schemes.elliptic_curves.descent_two_isogeny' extension
building 'sage.sets.disjoint_set' extension
Executing 23 commands (using 6 threads)
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/algebras/quatalg/quaternion_algebra_element.cpp -o build/temp.linux-x86_64-2.7/sage/algebras/quatalg/quaternion_algebra_element.o -w
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/graphs/matchpoly.c -o build/temp.linux-x86_64-2.7/sage/graphs/matchpoly.o -std=c99 -w
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/groups/perm_gps/partn_ref/automorphism_group_canonical_label.c -o build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/automorphism_group_canonical_label.o -std=c99 -w
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/groups/perm_gps/partn_ref/canonical_augmentation.c -o build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/canonical_augmentation.o -std=c99 -w
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/groups/perm_gps/partn_ref/double_coset.c -o build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/double_coset.o -std=c99 -w
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/groups/perm_gps/partn_ref/refinement_binary.c -o build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_binary.o -std=c99 -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/graphs/matchpoly.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/graphs/matchpoly.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/groups/perm_gps/partn_ref/refinement_graphs.c -o build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_graphs.o -std=c99 -w
g++ -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/algebras/quatalg/quaternion_algebra_element.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lcsage -lflint -lgmp -lgmpxx -lm -lstdc++ -lntl -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/algebras/quatalg/quaternion_algebra_element.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/groups/perm_gps/partn_ref/refinement_lists.c -o build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_lists.o -std=c99 -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/canonical_augmentation.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/canonical_augmentation.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/groups/perm_gps/partn_ref/refinement_matrices.c -o build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_matrices.o -std=c99 -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/double_coset.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/double_coset.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/groups/perm_gps/partn_ref/refinement_python.c -o build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_python.o -std=c99 -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/automorphism_group_canonical_label.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/automorphism_group_canonical_label.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/groups/perm_gps/partn_ref/refinement_sets.c -o build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_sets.o -std=c99 -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_binary.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_binary.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/libs/flint/flint.c -o build/temp.linux-x86_64-2.7/sage/libs/flint/flint.o -std=c99 -D_XPG6 -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/libs/flint/flint.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lcsage -lflint -lgmp -lgmpxx -lm -lstdc++ -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/libs/flint/flint.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/libs/flint/fmpz_poly.c -o build/temp.linux-x86_64-2.7/sage/libs/flint/fmpz_poly.o -std=c99 -D_XPG6 -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_lists.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_lists.so
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/libs/flint/fmpz_poly.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lcsage -lflint -lgmp -lgmpxx -lm -lstdc++ -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/libs/flint/fmpz_poly.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/modular/modform/eis_series_cython.c -o build/temp.linux-x86_64-2.7/sage/modular/modform/eis_series_cython.o -std=c99 -w
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/modular/modsym/apply.c -o build/temp.linux-x86_64-2.7/sage/modular/modsym/apply.o -std=c99 -D_XPG6 -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/modular/modsym/apply.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lcsage -lflint -lgmp -lgmpxx -lm -lstdc++ -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/modular/modsym/apply.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/modular/modsym/heilbronn.c -o build/temp.linux-x86_64-2.7/sage/modular/modsym/heilbronn.o -std=c99 -D_XPG6 -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/modular/modform/eis_series_cython.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/modular/modform/eis_series_cython.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/rings/integer.c -o build/temp.linux-x86_64-2.7/sage/rings/integer.o -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_python.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_python.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/rings/fraction_field_FpT.cpp -o build/temp.linux-x86_64-2.7/sage/rings/fraction_field_FpT.o -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_matrices.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_matrices.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/rings/polynomial/polynomial_zmod_flint.cpp -o build/temp.linux-x86_64-2.7/sage/rings/polynomial/polynomial_zmod_flint.o -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_graphs.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_graphs.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/rings/polynomial/polynomial_integer_dense_flint.cpp -o build/temp.linux-x86_64-2.7/sage/rings/polynomial/polynomial_integer_dense_flint.o -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/modular/modsym/heilbronn.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lcsage -lflint -lgmp -lgmpxx -lm -lstdc++ -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/modular/modsym/heilbronn.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -Isage/libs/flint/ -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/rings/polynomial/polynomial_rational_flint.cpp -o build/temp.linux-x86_64-2.7/sage/rings/polynomial/polynomial_rational_flint.o -w
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_sets.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_sets.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/schemes/elliptic_curves/descent_two_isogeny.c -o build/temp.linux-x86_64-2.7/sage/schemes/elliptic_curves/descent_two_isogeny.o -std=c99 -w
g++ -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/rings/fraction_field_FpT.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lcsage -lflint -lgmp -lgmpxx -lntl -lzn_poly -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/rings/fraction_field_FpT.so
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/novoselt/sage-5.10.beta3/local/include/FLINT -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include -I/home/novoselt/sage-5.10.beta3/local/include/csage -I/home/novoselt/sage-5.10.beta3/devel/sage -I/home/novoselt/sage-5.10.beta3/devel/sage/sage/ext -I/home/novoselt/sage-5.10.beta3/local/include/python2.7 -c sage/sets/disjoint_set.c -o build/temp.linux-x86_64-2.7/sage/sets/disjoint_set.o -std=c99 -w
g++ -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/rings/polynomial/polynomial_integer_dense_flint.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lcsage -lflint -lntl -lgmpxx -lgmp -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/rings/polynomial/polynomial_integer_dense_flint.so
g++ -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/rings/polynomial/polynomial_zmod_flint.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lcsage -lflint -lgmp -lgmpxx -lntl -lzn_poly -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/rings/polynomial/polynomial_zmod_flint.so
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/schemes/elliptic_curves/descent_two_isogeny.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lflint -lgmp -lratpoints -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/schemes/elliptic_curves/descent_two_isogeny.so
g++ -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/rings/polynomial/polynomial_rational_flint.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lcsage -lflint -lntl -lgmpxx -lgmp -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/rings/polynomial/polynomial_rational_flint.so
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/rings/integer.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lntl -lpari -lflint -lgmp -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/rings/integer.so
gcc -pthread -shared -L/home/novoselt/sage-5.10.beta3/local/lib build/temp.linux-x86_64-2.7/sage/sets/disjoint_set.o -L/home/novoselt/sage-5.10.beta3/local/lib -L/home/novoselt/sage-5.10.beta3/local/lib -lcsage -lgmp -lflint -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/sets/disjoint_set.so
Time to execute 23 commands: 31.4551699162 seconds
Total time spent compiling C/C++ extensions:  31.5465672016 seconds.
running install_lib
copying build/lib.linux-x86_64-2.7/sage/schemes/elliptic_curves/descent_two_isogeny.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves
copying build/lib.linux-x86_64-2.7/sage/libs/flint/flint.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/libs/flint
copying build/lib.linux-x86_64-2.7/sage/libs/flint/fmpz_poly.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/libs/flint
copying build/lib.linux-x86_64-2.7/sage/graphs/matchpoly.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/graphs
copying build/lib.linux-x86_64-2.7/sage/rings/integer.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/rings
copying build/lib.linux-x86_64-2.7/sage/rings/polynomial/polynomial_zmod_flint.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/rings/polynomial
copying build/lib.linux-x86_64-2.7/sage/rings/polynomial/polynomial_rational_flint.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/rings/polynomial
copying build/lib.linux-x86_64-2.7/sage/rings/polynomial/polynomial_integer_dense_flint.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/rings/polynomial
copying build/lib.linux-x86_64-2.7/sage/rings/fraction_field_FpT.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/rings
copying build/lib.linux-x86_64-2.7/sage/algebras/quatalg/quaternion_algebra_element.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/algebras/quatalg
copying build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_lists.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/groups/perm_gps/partn_ref
copying build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_sets.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/groups/perm_gps/partn_ref
copying build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/canonical_augmentation.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/groups/perm_gps/partn_ref
copying build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_graphs.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/groups/perm_gps/partn_ref
copying build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_binary.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/groups/perm_gps/partn_ref
copying build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_python.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/groups/perm_gps/partn_ref
copying build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/double_coset.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/groups/perm_gps/partn_ref
copying build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/automorphism_group_canonical_label.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/groups/perm_gps/partn_ref
copying build/lib.linux-x86_64-2.7/sage/groups/perm_gps/partn_ref/refinement_matrices.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/groups/perm_gps/partn_ref
copying build/lib.linux-x86_64-2.7/sage/modular/modsym/apply.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/modular/modsym
copying build/lib.linux-x86_64-2.7/sage/modular/modsym/heilbronn.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/modular/modsym
copying build/lib.linux-x86_64-2.7/sage/modular/modform/eis_series_cython.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/modular/modform
copying build/lib.linux-x86_64-2.7/sage/sets/disjoint_set.so -> /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage/sets
running install_egg_info
Removing /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage-0.0.0-py2.7.egg-info
Writing /home/novoselt/sage-5.10.beta3/local/lib/python2.7/site-packages/sage-0.0.0-py2.7.egg-info

real	0m35.067s
user	2m16.429s
sys	0m4.020s
novoselt`@`sage:~/sage/devel/sage$ 

```



---

Comment by leif created at 2013-05-16 22:20:17

That's either some Cython dependency tracking bug (supposed to have been fixed, meanwhile upstream as well IIRC), or you're having some header(?) file(s) these modules depend on with modification time(s) in the future.


---

Comment by vbraun created at 2013-05-16 22:30:27

I can confirm that this happens on my machine, too (Fedora 18 on btrfs). Except slightly faster

```
Time to execute 23 commands: 0.795454025269 seconds
Total time spent compiling C/C++ extensions:  0.879875183105 seconds.
```



---

Comment by leif created at 2013-05-16 22:35:26

Replying to [comment:9 vbraun]:
> I can confirm that this happens on my machine, too (Fedora 18 on btrfs). Except slightly faster
> {{{
> Time to execute 23 commands: 0.795454025269 seconds
> Total time spent compiling C/C++ extensions:  0.879875183105 seconds.
> }}}

Exact same modules?


---

Comment by vbraun created at 2013-05-16 22:46:36

Yes, same 23 modules.

For the record, this worked (i.e. no superfluous building) with plain sage-5.10.beta2.

There are no future mtimes, `find . -newermt "0 days"` yields nothing in the Sage tree.


---

Comment by jdemeyer created at 2013-05-16 22:48:40

Then this must almost certainly be #14569.


---

Comment by novoselt created at 2013-05-16 22:54:43

Replying to [comment:9 vbraun]:
> I can confirm that this happens on my machine, too (Fedora 18 on btrfs). Except slightly faster
> {{{
> Time to execute 23 commands: 0.795454025269 seconds
> Total time spent compiling C/C++ extensions:  0.879875183105 seconds.
> }}}

After installing ccache I get 1.16328787804 seconds on RAID10 HDDs, but without ccache and on slower machines this gets quite annoying and confusing, so would be nice to resolve before 5.10. Sorry for hijacking the ticket ;-)


---

Comment by vbraun created at 2013-05-16 22:55:07

Looking through `module_list.py`, this seems to be those that have

```
include_dirs = [SAGE_INC + '/FLINT'],
```

Note that its actually lower-case `sage/local/include/flint`


---

Comment by vbraun created at 2013-05-16 22:56:51

Fixing the case in module_list.py fixes this for me.


---

Comment by leif created at 2013-05-17 00:46:02

Replying to [comment:15 vbraun]:
> Fixing the case in module_list.py fixes this for me.

Wrong ticket. ;-)

FLINT btw. was my second (or third) guess.  And a non-existent file has mtime in the future... B)


---

Comment by ncohen created at 2013-05-17 09:24:31

It fixes this "sage -b" problem, and there's nothing to be really worried about for the new spkg is just an upgrade. I'm running all tests on my computer, and if those pass this ticket is good to go `:-)`

Nathann


---

Comment by ncohen created at 2013-05-17 10:13:42

Changing status from needs_review to needs_info.


---

Comment by ncohen created at 2013-05-17 10:13:42

Hellooooooooooooo !!

I see doctests errors in the following four files... Could it be related ?


```
sage -t -l tests/cmdline.py misc/interpreter.py misc/trace.py tests/interrupt.pyx
```


Nathann


---

Comment by leif created at 2013-05-17 10:47:00

Honestly, shouldn't we move the completely unrelated (FLINT include directory) Sage library patch to some other ticket?

Not that one or the other was more important, but to me it doesn't make sense to bundle them.


---

Comment by vbraun created at 2013-05-17 10:47:31

You can't run doctests from the $SAGE_ROOT/devel/sage/sage` directory. This doesn't work with the new doctest framework regardless of this ticket.


---

Comment by vbraun created at 2013-05-17 10:48:42

Leif: feel free to split the ticket any way you want if you review it ;-)


---

Comment by vbraun created at 2013-05-17 10:55:06

Changing status from needs_info to needs_review.


---

Comment by leif created at 2013-05-17 11:07:38

Replying to [comment:21 vbraun]:
> Leif: feel free to split the ticket any way you want if you review it ;-)

Which one? ;-)

Not getting build _errors_ indicates the many `include_dirs = [SAGE_INC + '/FLINT']` were (and still are) superfluous anyway; i.e., apparently all files using FLINT already `#include "flint/foo.h"` rather than just `foo.h`.

[Moving that to another ticket once my skateboard is operational again.]


---

Comment by leif created at 2013-05-17 11:46:56

Ok, I've now created #14603 for the FLINT / rebuild issue; Volker, could you reattach your patch to that (as otherwise you wouldn't be able to change it later).

(I haven't cc'ed Andrey nor Nathann, please add yourself as reviewers if you like.)


---

Comment by ncohen created at 2013-05-17 12:10:01

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2013-05-17 12:10:01

> You can't run doctests from the $SAGE_ROOT/devel/sage/sage` directory. This doesn't work with the new doctest framework regardless of this ticket.

Ahahah. Right. Funny that only those four failed, though, I would have expected all of them to scream.

Anyway I ran the doctests on those four files and there's nothing wrong with them. I set this ticket to `positive_review` and I delete the patch which is now in #14603.

Nathann


---

Comment by jdemeyer created at 2013-05-17 14:49:20

On `iras`:

```
Testing importing of various modules...
ctypes module imported OK
math module imported OK
ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha512
hashlib module imported OK
crypt module imported OK
readline module imported OK
socket module imported OK
```

This causes a build failure with various Python packages, for example `setuptools`:

```
setuptools-0.6.16.p0
====================================================
Extracting package /home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/spkg/standard/setuptools-0.6.16.p0.spkg
-rw-r--r-- 1 buildbot sage 1126400 May 17 07:00 /home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/spkg/standard/setuptools-0.6.16.p0.spkg
Finished extraction
****************************************************
Host system:
Linux iras 2.6.16.46-0.12-default #1 SMP Thu May 17 14:00:09 UTC 2007 ia64 ia64 ia64 GNU/Linux
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/libexec/gcc/ia64-unknown-linux-gnu/4.7.3/lto-wrapper
Target: ia64-unknown-linux-gnu
Configured with: ../src/configure --prefix=/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local --with-local-prefix=/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local --with-gmp=/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local --with-mpfr=/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local --with-mpc=/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local --with-system-zlib --disable-multilib --disable-nls  
Thread model: posix
gcc version 4.7.3 (GCC) 
****************************************************
patching file setup.py
patching file pkg_resources.py
patching file setuptools/command/bdist_egg.py
patching file setuptools/command/build_ext.py
patching file setuptools/command/easy_install.py
ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha512
Before install bootstrap.
Scanning installed packages
No setuptools distribution found
running install
Traceback (most recent call last):
  File "setup.py", line 210, in <module>
    scripts = scripts,
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/spkg/build/setuptools-0.6.16.p0/src/setuptools/command/install.py", line 73, in run
    self.do_egg_install()
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/spkg/build/setuptools-0.6.16.p0/src/setuptools/command/install.py", line 82, in do_egg_install
    easy_install = self.distribution.get_command_class('easy_install')
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/spkg/build/setuptools-0.6.16.p0/src/setuptools/dist.py", line 361, in get_command_class
    self.cmdclass[command] = cmdclass = ep.load()
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/spkg/build/setuptools-0.6.16.p0/src/pkg_resources.py", line 1955, in load
    entry = __import__(self.module_name, globals(),globals(), ['__name__'])
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/spkg/build/setuptools-0.6.16.p0/src/setuptools/command/easy_install.py", line 38, in <module>
    from setuptools.package_index import PackageIndex
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/spkg/build/setuptools-0.6.16.p0/src/setuptools/package_index.py", line 10, in <module>
    from md5 import md5
  File "/home/buildbot/build/sage/iras-1/iras_full/build/sage-5.10.beta4/local/lib/python/md5.py", line 10, in <module>
    from hashlib import md5
ImportError: cannot import name md5
```



---

Comment by jdemeyer created at 2013-05-17 14:49:20

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-05-17 14:50:04

On `arando` (I assume this failure is because of Python):

```
polybori-0.8.3
====================================================
Extracting package /var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.10.beta4/spkg/standard/polybori-0.8.3.spkg
-rw-r--r-- 1 buildbot buildbot 13301760 May 17 18:34 /var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.10.beta4/spkg/standard/polybori-0.8.3.spkg
Finished extraction
****************************************************
Host system:
Linux arando 3.5.0-26-generic #42-Ubuntu SMP Fri Mar 8 23:20:06 UTC 2013 i686 i686 i686 GNU/Linux
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-linux-gnu/4.7/lto-wrapper
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.3-1ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --with-system-zlib --enable-objc-gc --enable-targets=all --with-cloog --enable-cloog-backend=ppl --disable-cloog-version-check --disable-ppl-version-check --enable-multiarch --disable-werror --with-arch-32=i686 --with-multilib-list=m32,m64,mx32 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu
Thread model: posix
gcc version 4.7.3 (Ubuntu/Linaro 4.7.3-1ubuntu1) 
****************************************************
Starting build...
Running build_polybori...
scons: Reading SConscript files ...
Platform:  linux2
Detecting type sizes... got SIZEOF_VOID_P=4 SIZEOF_INT=4 SIZEOF_LONG=4...yes
Checking whether C++ knows about long long... yes
Checking for C++ header file unordered_map... no
Checking for C++ header file tr1/unordered_map... yes
Detecting Boost version... 1.52.0... yes
Checking for C library boost_unit_test_framework... no
Checking for C library boost_unit_test_framework-1_52... no
Checking for C library boost_unit_test_framework-1_52_0... no
Checking for C library boost_unit_test_framework-2.7... no
Checking for C library boost_unit_test_framework-2.7-1_52... no
Checking for C library boost_unit_test_framework-2.7-1_52_0... no
Checking for C library boost_unit_test_framework-mt... no
Checking for C library boost_unit_test_framework-mt-p... no
Checking for C library boost_unit_test_framework-mt-1_52... no
Checking for C library boost_unit_test_framework-mt-p-1_52... no
Checking for C library boost_unit_test_framework-mt-1_52_0... no
Checking for C library boost_unit_test_framework-mt-p-1_52_0... no
Checking for C library boost_unit_test_framework-2.7-mt... no
Checking for C library boost_unit_test_framework-2.7-mt-p... no
Checking for C library boost_unit_test_framework-2.7-mt-1_52... no
Checking for C library boost_unit_test_framework-2.7-mt-p-1_52... no
Checking for C library boost_unit_test_framework-2.7-mt-1_52_0... no
Checking for C library boost_unit_test_framework-2.7-mt-p-1_52_0... no
Checking for C library boost_unit_test_framework-gcc... no
Checking for C library boost_unit_test_framework-gcc-1_52... no
Checking for C library boost_unit_test_framework-gcc-1_52_0... no
Checking for C library boost_unit_test_framework-2.7-gcc... no
Checking for C library boost_unit_test_framework-2.7-gcc-1_52... no
Checking for C library boost_unit_test_framework-2.7-gcc-1_52_0... no
Checking for C library boost_unit_test_framework-gcc-mt... no
Checking for C library boost_unit_test_framework-gcc-mt-p... no
Checking for C library boost_unit_test_framework-gcc-mt-1_52... no
Checking for C library boost_unit_test_framework-gcc-mt-p-1_52... no
Checking for C library boost_unit_test_framework-gcc-mt-1_52_0... no
Checking for C library boost_unit_test_framework-gcc-mt-p-1_52_0... no
Checking for C library boost_unit_test_framework-2.7-gcc-mt... no
Checking for C library boost_unit_test_framework-2.7-gcc-mt-p... no
Checking for C library boost_unit_test_framework-2.7-gcc-mt-1_52... no
Checking for C library boost_unit_test_framework-2.7-gcc-mt-p-1_52... no
Checking for C library boost_unit_test_framework-2.7-gcc-mt-1_52_0... no
Checking for C library boost_unit_test_framework-2.7-gcc-mt-p-1_52_0... no
Warning Boost/unit test framework library BOOST_TEST = 'boost_unit_test_framework'  not available. Skipping tests.
Warning: No LaTeX to html converter found, Tutorial will not be installed
Checking for C library m4ri... yes
Checking for C function testing_m4ri_PNGs()... no
Guessing m4ri compile flags...  -mmmx -msse -msse2 -msse3 yes
Checking for C header file gd.h... yes
Checking for C library gd... yes
Checking for C function testing_PNGs()... yes
RuntimeError: internal error in regular expression engine:
  File "/var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.10.beta4/spkg/build/polybori-0.8.3/src/SConstruct", line 1164:
    pb_symlinks = SymlinkReadableLibname(libpbShared)
  File "/var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.10.beta4/spkg/build/polybori-0.8.3/src/SConstruct", line 1111:
    sonameversion = soPattern.findall(path.basename(env.subst('$LIBRARY_VERSION')))[0]
Error building PolyBoRi.
```



---

Comment by leif created at 2013-05-17 14:55:12

On _Solaris_ I get:

```
./spkg-install: line 145: command: dpkg: not found
```


:-)

(The `_cytpe` module still fails to build with GCC 4.7.0 on SPARC, Sun `ld` IIRC.  I was hoping the `libffi`(?) issue got fixed in 2.7.5 as well...)


---

Comment by jdemeyer created at 2013-05-17 15:09:41

arando issue reported upstream: [http://bugs.python.org/issue17998](http://bugs.python.org/issue17998)


---

Comment by vbraun created at 2013-05-17 20:28:09

I've added the upstream patch from http://bugs.python.org/issue17998 to the spkg in case anybody feels lucky ;-)


---

Comment by vbraun created at 2013-05-18 11:39:12

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2013-05-18 11:39:12

Also added backport of the Python 3.3 fix for http://bugs.python.org/issue18000. This should work now...


---

Attachment

diff for review only


---

Comment by jpflori created at 2013-05-26 21:44:34

Not sure how it goes on usual systems, but I was giving Cygwin64 a try and at some points it fails when building modules (let's say the array one) because it cannot find some UCS4 related symbols.

Looking at the linking command line, it has -lpython2.7 and the just built core python dll located in . has the ucs4 related stuff, but it also has -L$SAGE_LOCAL that we add to LDFLAGS and then "-L/lib -L/usr/lib -L/usr/x86_64-pc-cygwin/lib -L/usr/local/lib -L." so that the system-wide python lib in /usr/lib gets picked up first, but it does not have the ucs4 related stuff.

I don't get these inclusions of system dirs with the 2.7.3 spkg.


---

Comment by jpflori created at 2013-06-03 09:08:38

I've been looking into the Cygwin64 issues and think I got most of them except for a strange segfualt occuring when I run "make" from a Sage's shell rather than directly.

FYI the current version of the haslib fix backport does not work for me, maybe because the Cygwin64 installation is really minimal, it did not even have the crypt library installed by default, which is definitively needed to build Python crypt module.
It fails to build the md5 (mda5.c is not even built :)) and sha1 modules (sha1module.c is not generated), but that should not be too hard to fix.
I also just remarked it seems to be the same problem on iras as reported in http://trac.sagemath.org/sage_trac/ticket/14600#comment:26.


---

Comment by jpflori created at 2013-06-03 09:11:32

The path issue is more or less fixed by http://bugs.python.org/issue17990
thought the real problem is that system-wide dirs are included before "." so that the system-wide python is used rather than the one the build procedure just produced and they may have different options built in (let's say UCS2 vs UCS4).


---

Comment by jpflori created at 2013-06-03 09:11:32

Changing status from needs_review to needs_work.


---

Comment by jpflori created at 2013-06-03 20:34:38

Ok, only the segfault on cygwin64 should still be here.
spkg not committed yet, I'm running tests.

Haven't looked at Polybori (http://trac.sagemath.org/sage_trac/ticket/14600#comment:27) or Solaris _ctypes issue.


---

Comment by jpflori created at 2013-06-03 21:29:12

Ok, got the segfault: gcc gets "confused" and picks up the mpc/mpfr/gmp/iconv libraries in $SAGE_LOCAL/bin what leads to the segfault when building longobject.c, quite lucky it did not happen before, I guess the Cygwin(32) shipped gcc used older version of these libs, not sure how to properly handle that one...


---

Comment by jpflori created at 2013-06-03 21:30:23

Perhaps not adding $SAGE_LOCAL/bin to PATH at build time, but only at runtime.


---

Comment by jpflori created at 2013-06-03 21:31:15

Except after we built our own GCC if we do.


---

Comment by jpflori created at 2013-06-03 21:34:14

But of course we surely need some executables in $SAGE_LOCAL/bin so it should be in PATH, quite boring.


---

Comment by leif created at 2013-06-03 21:44:18

Replying to [comment:41 jpflori]:
> But of course we surely need some executables in $SAGE_LOCAL/bin so it should be in PATH, quite boring.

I can't imagine Python is the only spkg with that problem.

If that's a general problem on Cygwin(64), create wrapper scripts (like `sage-native-execute`) unless `gcc` is already Sage's GCC.


---

Comment by jpflori created at 2013-06-03 21:49:55

Yeah, lapack just failed as well because of gfortran getting abused.


---

Comment by jpflori created at 2013-06-04 10:03:41

I guess only the failure on arando has to be investigated.

Jeroen, do you have some logs to look at available?
The Python build log and Polybori config.log?


---

Comment by jpflori created at 2013-06-04 10:03:41

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2013-06-04 10:07:51

Replying to [comment:44 jpflori]:
> I guess only the failure on arando has to be investigated.
> 
> Jeroen, do you have some logs to look at available?
There is nothing interesting in the logs. Just try the example from the Python ticket:

```
>>> import re
>>> re.compile('(.*)\.[0-9]*\.[0-9]*$', re.I|re.S).findall('3.0.0')
```



---

Comment by jpflori created at 2013-06-04 10:09:22

Oh sorry, I missed these comments...
So we can hope everything is fine now.


---

Comment by vbraun created at 2013-06-04 10:26:54

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-06-04 10:26:54

Looks good to me. I think its just a matter of running this on the build bot, everything that we know about should be fixed.


---

Comment by jpflori created at 2013-06-04 14:51:37

Spkg diff, for review only.


---

Attachment

Replying to [comment:47 vbraun]:
> I think its just a matter of running this on the build bot, everything that we know about should be fixed.

Except for [http://bugs.python.org/issue9400](http://bugs.python.org/issue9400), but you presumably meant issues reported here on the ticket... ;-)


---

Comment by jdemeyer created at 2013-06-10 08:42:17

Resolution: fixed
