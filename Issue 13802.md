# Issue 13802: Bug with dumps of hasse diargams

Issue created by migration from https://trac.sagemath.org/ticket/14006

Original creator: VivianePons

Original creation time: 2013-01-24 14:58:14

Assignee: VivianePons

CC:  sage-combinat chapoton

Keywords: Hasse_diagrams, poset

The call of the _rank_function of a hasse diagrams breaks the dumps method of the object because of a nasty implementation of a cached parameter. (I suppose it's an old stuff that should be changed to lazy_attribute or something similar)


```

sage: P = Poset()
sage: H = P._hasse_diagram
sage: s = dumps(H)         
sage: H.rank_function()
<built-in method !__getitem!__ of dict object at 0x8a3ecec>
sage: s = dumps(H)
Traceback (most recent call last)
...
!TypeError: expected string or Unicode object, !NoneType found
```



---

Comment by VivianePons created at 2013-01-24 18:10:25

apply         _[trac_14006-hasse-diagrams-dumps-bug.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/14006/trac_14006-hasse-diagrams-dumps-bug.patch)_


---

Comment by VivianePons created at 2013-01-24 18:11:20

Changing status from new to needs_review.


---

Attachment


---

Comment by chapoton created at 2013-01-25 11:51:26

ok for me, positive review


---

Comment by chapoton created at 2013-01-25 11:51:26

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-01-30 07:36:19

Resolution: fixed
