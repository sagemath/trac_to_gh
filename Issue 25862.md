# Issue 25862: trim lattices

Issue created by migration from https://trac.sagemath.org/ticket/26099

Original creator: chapoton

Original creation time: 2018-08-20 15:40:17

CC:  jmantysalo




---

Comment by chapoton created at 2018-08-20 15:40:42

Changing status from new to needs_review.


---

Comment by git created at 2018-08-20 15:40:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2018-08-20 15:55:18

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2018-08-20 15:55:18

All other functions always returns a pair when `certificate=True`, i.e.

`x.foo() == x.foo(certificate=True)[0]`

Change to this convention is possible, but should be discussed in sage-devel.

I suppose this also conflicts with #26095 because of a cross-link.


---

Comment by git created at 2018-08-20 16:13:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-08-20 16:14:48

done. For the conflict, I will just rebase the branch here when needed.


---

Comment by chapoton created at 2018-08-20 16:15:17

Changing status from needs_work to needs_review.


---

Comment by git created at 2018-08-20 18:33:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2018-08-21 05:25:29

OK.

(References should go to the master bibliography file, but that can be corrected later.)


---

Comment by jmantysalo created at 2018-08-21 05:25:29

Changing status from needs_review to positive_review.


---

Comment by jmantysalo created at 2018-08-21 06:38:14

A question still: The paper you refers says that a trim lattice must have a chain of _maximum_ length having only left modular elements. The code seems to search a _maximal_ chain having only left modular elements. So is the code sufficient?


---

Comment by chapoton created at 2018-08-21 07:02:05

Replying to [comment:10 jmantysalo]:
> A question still: The paper you refers says that a trim lattice must have a chain of _maximum_ length having only left modular elements. The code seems to search a _maximal_ chain having only left modular elements. So is the code sufficient?

Right. I am also using a result of https://arxiv.org/abs/1712.10123, saying that in a trim lattice, left modular elements are exactly the elements that belong to the spine (union of all chains of maximum length).


---

Comment by jmantysalo created at 2018-08-21 07:09:58

Replying to [comment:11 chapoton]:
> Replying to [comment:10 jmantysalo]:
> > A question still: The paper you refers says that a trim lattice must have a chain of _maximum_ length having only left modular elements. The code seems to search a _maximal_ chain having only left modular elements. So is the code sufficient?
> 
> Right. I am also using a result of https://arxiv.org/abs/1712.10123, saying that in a trim lattice, left modular elements are exactly the elements that belong to the spine (union of all chains of maximum length).

But just this is what I am saying. You only need to check _one_ chain of a maximum cardinality, not all of them. But your code does not do that, it tries to found some maximal chain, not necessarily of the max cardinality.


---

Comment by chapoton created at 2018-08-21 07:11:28

Ha. Indeed. So this needs work. Let us keep this aside for some time, I have more urgent business right now.


---

Comment by chapoton created at 2018-08-21 07:11:28

Changing status from positive_review to needs_work.


---

Comment by jmantysalo created at 2018-08-21 07:16:12

Replying to [comment:13 chapoton]:
> Ha. Indeed. So this needs work. Let us keep this aside for some time, I have more urgent business right now.

OK. Could this be just

`self.is_extremal() and all(self.is_left_modular_element(e) for e in self.height(certificate=True)[1])`

?


---

Comment by git created at 2018-08-21 19:08:55

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2018-08-21 19:10:17

Here is a new tentative, along the lines of your proposal. I did compare the timings with the corrected version of my code, and they were very similar. So I kept the simplest.


---

Comment by chapoton created at 2018-08-22 06:07:34

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2018-08-22 06:13:47

OK.


---

Comment by jmantysalo created at 2018-08-22 06:13:47

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-09-02 00:35:14

Merge conflict


---

Comment by vbraun created at 2018-09-02 00:35:14

Changing status from positive_review to needs_work.


---

Comment by git created at 2018-10-08 15:41:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-10-08 15:41:54

Changing status from needs_work to positive_review.


---

Comment by chapoton created at 2018-10-08 15:41:54

trivial rebase, I am setting back to positive


---

Comment by vbraun created at 2018-10-20 19:02:29

Resolution: fixed


---

Comment by embray created at 2018-10-28 14:52:23

This should be re-targeted for 8.5.
