# Issue 33619: Fix a few issues occuring when doctesting with pytest

Issue created by migration from https://trac.sagemath.org/ticket/33856

Original creator: @tobiasdiez

Original creation time: 2022-05-16 18:49:05

CC:  mkoeppe chapoton jhpalmieri diampase

Namely


```
E   ValueError: line 18 of the docstring for sage.databases.findstat._submit has inconsistent leading whitespace: '[1,2,3]=>83",'
E   ValueError: line 42 of the docstring for sage.databases.sql_db._create_print_table has inconsistent leading whitespace: '--------------------'
E   ValueError: line 8 of the docstring for sage.doctest.control.Logger.__init__ has inconsistent leading whitespace: '")  # no-op'
E   ValueError: line 12 of the docstring for sage.doctest.sources.StringDocTestSource.__iter__ has inconsistent leading whitespace: '\'\'\'"'
E   ValueError: line 29 of the docstring for sage.game_theory.normal_form_game.NormalFormGame._lrs_nash_format has inconsistent leading whitespace: "', legacy_format[0])"
E   ValueError: line 36 of the docstring for sage.repl.rich_output.backend_emacs.BackendEmacs.displayhook has inconsistent leading whitespace: "BEGIN_LATEX:\\newcommand{\\Bold}[1]{\\mathbf{#1}}\\int \\sin\\left(x\\right)\\,{d x}:END_LATEX'},"
E   ValueError: line 17 of the docstring for sage.parallel.decorate.ParallelFunction._instancedoc_ has inconsistent leading whitespace: "'"
```

-> convert to `r"""..."""` strings


```
___________ ERROR collecting sage/ext_data/nbconvert/postprocess.py ____________
sage/ext_data/nbconvert/postprocess.py:20: in <module>
    with open(file_name, 'r') as f:
E   FileNotFoundError: [Errno 2] No such file or directory: '-c'

sage/repl/ipython_kernel/__main__.py:3: in <module>
...
__main__.py: error: unrecognized arguments: --doctest-modules

sage_setup/autogen/giacpy-mkkeywords.py:49: in <module>
    with open('aide_cas.txt') as f:
E   FileNotFoundError: [Errno 2] No such file or directory: 'aide_cas.txt'
```

-> ignore from test collection


```
________ ERROR collecting sage/geometry/polyhedron/backend_normaliz.py _________
sage/misc/lazy_import.pyx:253: in sage.misc.lazy_import.LazyImport._get_object
    self._object = getattr(__import__(self._module, {}, {}, [self._name]), self._name)
E   ModuleNotFoundError: No module named 'PyNormaliz'
```

-> skip if feature is not installed


```
sage/homology/cubical_complex.py:16: in <module>
    cubical_complexes = deprecated_function_alias(31925,
sage/misc/superseded.py:558: in deprecated_function_alias
    return DeprecatedFunctionAlias(trac_number, func, module_name)
sage/misc/superseded.py:379: in __init__
    doc += 'Use :' + sphinxrole + ':`' + self.func.__name__ + '` instead.\n'
E   AttributeError: 'CubicalComplexExamples' object has no attribute '__name__'
```

-> don't use explicit `__name__`


---

Comment by git created at 2022-05-21 13:55:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-05-21 14:07:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-05-22 14:15:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-03 15:51:41

Branch pushed to git repo; I updated commit sha1. New commits:
