# Issue 33619: Fix a few issues occuring when doctesting with pytest

archive/issues_033619.json:
```json
{
    "body": "CC:  @mkoeppe @fchapoton @jhpalmieri diampase\n\nNamely\n\n\n```\nE   ValueError: line 18 of the docstring for sage.databases.findstat._submit has inconsistent leading whitespace: '[1,2,3]=>83\",'\nE   ValueError: line 42 of the docstring for sage.databases.sql_db._create_print_table has inconsistent leading whitespace: '--------------------'\nE   ValueError: line 8 of the docstring for sage.doctest.control.Logger.__init__ has inconsistent leading whitespace: '\")  # no-op'\nE   ValueError: line 12 of the docstring for sage.doctest.sources.StringDocTestSource.__iter__ has inconsistent leading whitespace: '\\'\\'\\'\"'\nE   ValueError: line 29 of the docstring for sage.game_theory.normal_form_game.NormalFormGame._lrs_nash_format has inconsistent leading whitespace: \"', legacy_format[0])\"\nE   ValueError: line 36 of the docstring for sage.repl.rich_output.backend_emacs.BackendEmacs.displayhook has inconsistent leading whitespace: \"BEGIN_LATEX:\\\\newcommand{\\\\Bold}[1]{\\\\mathbf{#1}}\\\\int \\\\sin\\\\left(x\\\\right)\\\\,{d x}:END_LATEX'},\"\nE   ValueError: line 17 of the docstring for sage.parallel.decorate.ParallelFunction._instancedoc_ has inconsistent leading whitespace: \"'\"\n```\n\n-> convert to `r\"\"\"...\"\"\"` strings\n\n\n```\n___________ ERROR collecting sage/ext_data/nbconvert/postprocess.py ____________\nsage/ext_data/nbconvert/postprocess.py:20: in <module>\n    with open(file_name, 'r') as f:\nE   FileNotFoundError: [Errno 2] No such file or directory: '-c'\n\nsage/repl/ipython_kernel/__main__.py:3: in <module>\n...\n__main__.py: error: unrecognized arguments: --doctest-modules\n\nsage_setup/autogen/giacpy-mkkeywords.py:49: in <module>\n    with open('aide_cas.txt') as f:\nE   FileNotFoundError: [Errno 2] No such file or directory: 'aide_cas.txt'\n```\n\n-> ignore from test collection\n\n\n```\n________ ERROR collecting sage/geometry/polyhedron/backend_normaliz.py _________\nsage/misc/lazy_import.pyx:253: in sage.misc.lazy_import.LazyImport._get_object\n    self._object = getattr(__import__(self._module, {}, {}, [self._name]), self._name)\nE   ModuleNotFoundError: No module named 'PyNormaliz'\n```\n\n-> skip if feature is not installed\n\n\n```\nsage/homology/cubical_complex.py:16: in <module>\n    cubical_complexes = deprecated_function_alias(31925,\nsage/misc/superseded.py:558: in deprecated_function_alias\n    return DeprecatedFunctionAlias(trac_number, func, module_name)\nsage/misc/superseded.py:379: in __init__\n    doc += 'Use :' + sphinxrole + ':`' + self.func.__name__ + '` instead.\\n'\nE   AttributeError: 'CubicalComplexExamples' object has no attribute '__name__'\n```\n\n-> don't use explicit `__name__`\n\nIssue created by migration from https://trac.sagemath.org/ticket/33856\n\n",
    "created_at": "2022-05-16T18:49:05Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Fix a few issues occuring when doctesting with pytest",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33619",
    "user": "https://github.com/tobiasdiez"
}
```
CC:  @mkoeppe @fchapoton @jhpalmieri diampase

Namely


```
E   ValueError: line 18 of the docstring for sage.databases.findstat._submit has inconsistent leading whitespace: '[1,2,3]=>83",'
E   ValueError: line 42 of the docstring for sage.databases.sql_db._create_print_table has inconsistent leading whitespace: '--------------------'
E   ValueError: line 8 of the docstring for sage.doctest.control.Logger.__init__ has inconsistent leading whitespace: '")  # no-op'
E   ValueError: line 12 of the docstring for sage.doctest.sources.StringDocTestSource.__iter__ has inconsistent leading whitespace: '\'\'\'"'
E   ValueError: line 29 of the docstring for sage.game_theory.normal_form_game.NormalFormGame._lrs_nash_format has inconsistent leading whitespace: "', legacy_format[0])"
E   ValueError: line 36 of the docstring for sage.repl.rich_output.backend_emacs.BackendEmacs.displayhook has inconsistent leading whitespace: "BEGIN_LATEX:\\newcommand{\\Bold}[1]{\\mathbf{#1}}\\int \\sin\\left(x\\right)\\,{d x}:END_LATEX'},"
E   ValueError: line 17 of the docstring for sage.parallel.decorate.ParallelFunction._instancedoc_ has inconsistent leading whitespace: "'"
```

-> convert to `r"""..."""` strings


```
___________ ERROR collecting sage/ext_data/nbconvert/postprocess.py ____________
sage/ext_data/nbconvert/postprocess.py:20: in <module>
    with open(file_name, 'r') as f:
E   FileNotFoundError: [Errno 2] No such file or directory: '-c'

sage/repl/ipython_kernel/__main__.py:3: in <module>
...
__main__.py: error: unrecognized arguments: --doctest-modules

sage_setup/autogen/giacpy-mkkeywords.py:49: in <module>
    with open('aide_cas.txt') as f:
E   FileNotFoundError: [Errno 2] No such file or directory: 'aide_cas.txt'
```

-> ignore from test collection


```
________ ERROR collecting sage/geometry/polyhedron/backend_normaliz.py _________
sage/misc/lazy_import.pyx:253: in sage.misc.lazy_import.LazyImport._get_object
    self._object = getattr(__import__(self._module, {}, {}, [self._name]), self._name)
E   ModuleNotFoundError: No module named 'PyNormaliz'
```

-> skip if feature is not installed


```
sage/homology/cubical_complex.py:16: in <module>
    cubical_complexes = deprecated_function_alias(31925,
sage/misc/superseded.py:558: in deprecated_function_alias
    return DeprecatedFunctionAlias(trac_number, func, module_name)
sage/misc/superseded.py:379: in __init__
    doc += 'Use :' + sphinxrole + ':`' + self.func.__name__ + '` instead.\n'
E   AttributeError: 'CubicalComplexExamples' object has no attribute '__name__'
```

-> don't use explicit `__name__`

Issue created by migration from https://trac.sagemath.org/ticket/33856





---

archive/issue_comments_478043.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-21T13:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33619#issuecomment-478043",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478044.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-21T14:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33619#issuecomment-478044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478045.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-22T14:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33619#issuecomment-478045",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478046.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-03T15:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33619#issuecomment-478046",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:
