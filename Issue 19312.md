# Issue 19312: Get rid of libtool archives (*.la)

archive/issues_019312.json:
```json
{
    "body": "CC:  @kiwifb\n\n* They are a nuisance since they can't contain relative paths. \n* Fedora packaging guide line says \"Libtool archives, foo.la files, should not be included\"\n* the whole idea of Libtool Archives is, nowadays, considered obsolete (https://autotools.io/libtool/lafiles.html)\n* Anything that can be done with libtool archives can be done better with pkg-config\n\nIssue created by migration from https://trac.sagemath.org/ticket/19549\n\n",
    "created_at": "2015-11-08T16:31:41Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Get rid of libtool archives (*.la)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19312",
    "user": "https://github.com/vbraun"
}
```
CC:  @kiwifb

* They are a nuisance since they can't contain relative paths. 
* Fedora packaging guide line says "Libtool archives, foo.la files, should not be included"
* the whole idea of Libtool Archives is, nowadays, considered obsolete (https://autotools.io/libtool/lafiles.html)
* Anything that can be done with libtool archives can be done better with pkg-config

Issue created by migration from https://trac.sagemath.org/ticket/19549





---

archive/issue_comments_264901.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd70\".",
    "created_at": "2015-11-08T16:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264901",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "" to "sd70".



---

archive/issue_comments_264902.json:
```json
{
    "body": "Francois, any objection?",
    "created_at": "2015-11-08T17:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264902",
    "user": "https://github.com/vbraun"
}
```

Francois, any objection?



---

archive/issue_comments_264903.json:
```json
{
    "body": "Replying to [comment:2 vbraun]:\n> Francois, any objection?\n\nNone.",
    "created_at": "2015-11-08T18:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264903",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:2 vbraun]:
> Francois, any objection?

None.



---

archive/issue_comments_264904.json:
```json
{
    "body": "I am not sure what other answer you were expecting from me. Distros like Gentoo (and most others I would think) get rid of them. The good question is how to do it in sage? The easiest way would be for `sage-spkg` to do the scanning. We don't want it to be done as an afterthought once the `sage` build is finished.\n\nThe problem is that you don't have a staging phase before putting the file in your tree. So you cannot `stage` then remove the ugly stuff and then put it in your tree (or prefix if you will). Which means that essentially you may have to scan the whole `$SAGE_LOCAL/lib` for `.la` file after you have issued `make install` for every package. Could it be added to `sage-spkg` to do once `spkg-install` proper is finished? How would that interact with `spkg-check` is also something to think about because building test may rely on these `.la` files.",
    "created_at": "2015-11-08T21:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264904",
    "user": "https://github.com/kiwifb"
}
```

I am not sure what other answer you were expecting from me. Distros like Gentoo (and most others I would think) get rid of them. The good question is how to do it in sage? The easiest way would be for `sage-spkg` to do the scanning. We don't want it to be done as an afterthought once the `sage` build is finished.

The problem is that you don't have a staging phase before putting the file in your tree. So you cannot `stage` then remove the ugly stuff and then put it in your tree (or prefix if you will). Which means that essentially you may have to scan the whole `$SAGE_LOCAL/lib` for `.la` file after you have issued `make install` for every package. Could it be added to `sage-spkg` to do once `spkg-install` proper is finished? How would that interact with `spkg-check` is also something to think about because building test may rely on these `.la` files.



---

archive/issue_comments_264905.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-11-10T15:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264905",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_264906.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-10T15:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264906",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_264907.json:
```json
{
    "body": "I'm just deleting them after spkg-check; Not sure if its necessary but can't hurt.",
    "created_at": "2015-11-10T15:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264907",
    "user": "https://github.com/vbraun"
}
```

I'm just deleting them after spkg-check; Not sure if its necessary but can't hurt.



---

archive/issue_comments_264908.json:
```json
{
    "body": "That'll do, it will depend on the package. In `m4rie` test are built during `make all`. Not really fantastic in my opinion but that's a case where it wouldn't be necessary.",
    "created_at": "2015-11-10T18:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264908",
    "user": "https://github.com/kiwifb"
}
```

That'll do, it will depend on the package. In `m4rie` test are built during `make all`. Not really fantastic in my opinion but that's a case where it wouldn't be necessary.



---

archive/issue_comments_264909.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-10T18:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264909",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_053826.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-11T19:40:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19312#event-53826"
}
```



---

archive/issue_comments_264910.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-11T19:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-264910",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
