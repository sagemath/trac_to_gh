# Issue 14006: clean up Matrix_mpolynomial_dense

Issue created by migration from https://trac.sagemath.org/ticket/14210

Original creator: malb

Original creation time: 2013-03-01 14:24:07

Assignee: jason, was

CC:  bouillaguet simonking

`Matrix_mpolynomial_dense` while short is a mess. It's docstrings are not doctested due to formatting errors and it used hardcoded calls to libSingular where the more modern libSingular function factory should be used.


---

Attachment


---

Comment by malb created at 2013-03-01 14:26:41

The attached patch

 * removes hardcoded calls from `matrix_mpolynomial_dense.pyx` and replaces them by calls through the libSingular function interface.
 * speeds up calls to det() for small matrices (n<= 3)
 * fixes formatting errors which meant that the file was not doctested
 * makes conversions from SingularElement to BooleanPolynomials faster (used to test code in `matrix_mpolynomial_dense.pyx`)


---

Comment by malb created at 2013-03-01 14:26:41

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-07-03 18:40:17

Looks good. You touch `det` but don't fix the following bug:

``` 
sage: R.<x,y> = QQ[]
sage: m = matrix([[y,y,y,y]] * 4)
sage: m.charpoly()
x^4 - 4*y*x^3
sage: m.det()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-13-398222b460ca> in <module>()
----> 1 m.det()

/home/vbraun/opt/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.det (sage/matrix/matrix2.c:9875)()

/home/vbraun/opt/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so in sage.matrix.matrix_mpolynomial_dense.Matrix_mpolynomial_dense.determinant (sage/matrix/matrix_mpolynomial_dense.cpp:5736)()

/home/vbraun/opt/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.Element.__getattr__ (sage/structure/element.c:3871)()

/home/vbraun/opt/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/structure/misc.so in sage.structure.misc.getattr_from_other_class (sage/structure/misc.c:1696)()

AttributeError: 'sage.rings.polynomial.polynomial_element.Polynomial_generic_dense' object has no attribute 'keys'
```



---

Comment by vbraun created at 2013-07-03 19:25:08

Updated patch


---

Attachment

I've added a reviewer patch that cleans up the docstrings some more, achieves 100% coverage, and actually adds it to the reference manual. And fixes the det() bug.

Positive review to the original patch...


---

Comment by vbraun created at 2013-07-03 19:29:13

Changing type from PLEASE CHANGE to defect.


---

Comment by malb created at 2013-07-04 09:08:20

Changing status from needs_review to positive_review.


---

Comment by malb created at 2013-07-04 09:08:20

Reviewer patch looks okay to me.


---

Comment by jdemeyer created at 2013-08-16 21:11:01

Resolution: fixed
