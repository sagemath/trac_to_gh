# Issue 15801: C function profiler

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2014-03-31 23:55:11

This ticket complements the `%prun` magic for Python profiler with a `%crun` magic that given C function profile information using gperftools (optional, expected to be provided by the OS).


---

Comment by ncohen created at 2014-04-01 08:18:10

(DEAD curious)
----
New commits:


---

Comment by git created at 2014-04-01 14:15:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-04-01 17:20:11

Helloooooooooo !!!

It would be cool to have an explicit error message when there is no output due to this 10ms thing. Could you also add this new file to the reference manual ?

By the way, what it this `:param s:/:type s:` ? I never saw them before. Could you wrap that in a "INPUT" block btw (the two crun functions need one) ?

Also : the gif output is cool but would there  be a way to make it available through %crun directly ? Or at least crun("cmd") ?

There is also an unfinished sentence in the doc :


```
By default, a if 
```


Nathann

(super nice tool !)


---

Comment by ncohen created at 2014-04-01 17:20:11

Changing status from new to needs_info.


---

Comment by git created at 2014-04-04 16:51:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-04-04 16:52:50

Changing status from needs_info to needs_review.


---

Comment by vbraun created at 2014-04-04 16:52:50

Done.

The `:param` is standard Python syntax which we don't use in Sage. I changed it to our conventions.


---

Comment by ncohen created at 2014-04-04 17:25:06

Yoooooooooooo !

> Done.

Thanks ! And we'll add this .gif output some later day if we need it `:-)`

Nathann

P.S. : By the way, why didn't you raise an exception when the program runs <100ms ?


---

Comment by ncohen created at 2014-04-04 17:25:06

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-04 18:51:36

Its not really an error, maybe you know what you are doing. The user might have changed the sampling frequency, for example.


---

Comment by git created at 2014-04-04 19:41:50

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2014-04-04 19:41:50

Changing status from positive_review to needs_review.


---

Comment by ncohen created at 2014-04-04 19:56:41

Ahahah. Is that for sage -coverage ? :-P

Nathann


---

Comment by vbraun created at 2014-04-04 19:58:33

No, `# random output` still fails if there is an exception raised...


---

Comment by ncohen created at 2014-04-04 21:23:52

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-04-04 21:23:52

oops, right !

Passes all tests, with/without gperftools installed. Good to go again.

Nathann


---

Comment by git created at 2014-04-04 21:54:09

Changing status from positive_review to needs_review.


---

Comment by git created at 2014-04-04 21:54:09

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by vbraun created at 2014-04-05 10:43:42

Resolution: fixed
