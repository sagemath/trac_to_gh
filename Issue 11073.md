# Issue 11073: broken tar on cygwin (Windows 7), cddlib fails to install

archive/issues_011073.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @vbraun mhampton\n\non Windows 7 tar does not unpack cddlib spkg correctly, symbolic \nlinks get broken. See\nhttp://groups.google.com/group/sage-windows/browse_thread/thread/d4965bfbc83a9bf8# \n\nA remedy is to replace them with files, i.e. use tar with -h option to recreate the spkg. Works for me.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11245\n\n",
    "created_at": "2011-04-24T05:48:51Z",
    "labels": [
        "porting: Cygwin",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "broken tar on cygwin (Windows 7), cddlib fails to install",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11073",
    "user": "@dimpase"
}
```
Assignee: tbd

CC:  @vbraun mhampton

on Windows 7 tar does not unpack cddlib spkg correctly, symbolic 
links get broken. See
http://groups.google.com/group/sage-windows/browse_thread/thread/d4965bfbc83a9bf8# 

A remedy is to replace them with files, i.e. use tar with -h option to recreate the spkg. Works for me.

Issue created by migration from https://trac.sagemath.org/ticket/11245





---

archive/issue_comments_120846.json:
```json
{
    "body": "Using \n\n\n```\ntar -format=posix\n```\n\n\nmight be more reliable. Sun's tar command can't extract the archives created in Sage.",
    "created_at": "2011-04-24T20:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120846",
    "user": "drkirkby"
}
```

Using 


```
tar -format=posix
```


might be more reliable. Sun's tar command can't extract the archives created in Sage.



---

archive/issue_comments_120847.json:
```json
{
    "body": "Replying to [comment:2 drkirkby]:\n> Using \n> \n> {{{\n> tar -format=posix\n> }}}\n> \n> might be more reliable. Sun's tar command can't extract the archives created in Sage. \n\nIt's a different story here. Actually, it is a GNU tar ported to create some kind of Windows symlinks. It does not untar files it itself creates correctly...",
    "created_at": "2011-04-25T01:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120847",
    "user": "@dimpase"
}
```

Replying to [comment:2 drkirkby]:
> Using 
> 
> {{{
> tar -format=posix
> }}}
> 
> might be more reliable. Sun's tar command can't extract the archives created in Sage. 

It's a different story here. Actually, it is a GNU tar ported to create some kind of Windows symlinks. It does not untar files it itself creates correctly...



---

archive/issue_comments_120848.json:
```json
{
    "body": "Replying to [ticket:11245 dimpase]:\n> on Windows 7 tar does not unpack cddlib spkg correctly, symbolic \n> links get broken. See\n> http://groups.google.com/group/sage-windows/browse_thread/thread/d4965bfbc83a9bf8# \n\nhopefully, this will be patched in Cygwin, as proposed by Dan Grayson:\nhttp://cygwin.com/ml/cygwin/2011-04/msg00385.html",
    "created_at": "2011-04-27T16:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120848",
    "user": "@dimpase"
}
```

Replying to [ticket:11245 dimpase]:
> on Windows 7 tar does not unpack cddlib spkg correctly, symbolic 
> links get broken. See
> http://groups.google.com/group/sage-windows/browse_thread/thread/d4965bfbc83a9bf8# 

hopefully, this will be patched in Cygwin, as proposed by Dan Grayson:
http://cygwin.com/ml/cygwin/2011-04/msg00385.html



---

archive/issue_comments_120849.json:
```json
{
    "body": "I can confirm this problem on Windows 7 only.  Testing the fix now, though I'm not sure exactly how this would get incorporated into Sage...",
    "created_at": "2011-06-27T20:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120849",
    "user": "@kcrisman"
}
```

I can confirm this problem on Windows 7 only.  Testing the fix now, though I'm not sure exactly how this would get incorporated into Sage...



---

archive/issue_comments_120850.json:
```json
{
    "body": "I can confirm that this enables building of cddlib on Windows 7.  \n\nWhile waiting to try for other things, I have a question.  The process is \n\n1. Untar\n2. Tar with links followed\n3. Untar again\n4. Use `sage -pkg` to create the new spkg\n\nSo does that mean that the untarred one the second time does have the followed links, not just symbolic ones?  I guess I am curious as to why steps 3 and 4 are needed, though I assume it is in order to get the correct spkg checking.",
    "created_at": "2011-06-27T20:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120850",
    "user": "@kcrisman"
}
```

I can confirm that this enables building of cddlib on Windows 7.  

While waiting to try for other things, I have a question.  The process is 

1. Untar
2. Tar with links followed
3. Untar again
4. Use `sage -pkg` to create the new spkg

So does that mean that the untarred one the second time does have the followed links, not just symbolic ones?  I guess I am curious as to why steps 3 and 4 are needed, though I assume it is in order to get the correct spkg checking.



---

archive/issue_comments_120851.json:
```json
{
    "body": "Replying to [comment:7 kcrisman]:\n> I can confirm that this enables building of cddlib on Windows 7.  \n> \n> While waiting to try for other things, I have a question.  The process is \n> \n>  1. Untar\n>  1. Tar with links followed\n>  1. Untar again\n>  1. Use `sage -pkg` to create the new spkg\n> \n> So does that mean that the untarred one the second time does have the followed links, not just symbolic ones?  I guess I am curious as to why steps 3 and 4 are needed, though I assume it is in order to get the correct spkg checking.\n\n\nright, 1,2 and 3 replace links by file copies, and 4 makes a kosher spkg.\nThis must be done on a system with working tar, not on Win7, obviously... \n\nIn fact, hopefully Cygwin will have a patched tar soon, patch supplied by Dan Grayson (yes, the K-theorist!), and this won't be needed.",
    "created_at": "2011-06-27T20:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120851",
    "user": "@dimpase"
}
```

Replying to [comment:7 kcrisman]:
> I can confirm that this enables building of cddlib on Windows 7.  
> 
> While waiting to try for other things, I have a question.  The process is 
> 
>  1. Untar
>  1. Tar with links followed
>  1. Untar again
>  1. Use `sage -pkg` to create the new spkg
> 
> So does that mean that the untarred one the second time does have the followed links, not just symbolic ones?  I guess I am curious as to why steps 3 and 4 are needed, though I assume it is in order to get the correct spkg checking.


right, 1,2 and 3 replace links by file copies, and 4 makes a kosher spkg.
This must be done on a system with working tar, not on Win7, obviously... 

In fact, hopefully Cygwin will have a patched tar soon, patch supplied by Dan Grayson (yes, the K-theorist!), and this won't be needed.



---

archive/issue_comments_120852.json:
```json
{
    "body": "Yes, I saw that on your thread :)\n\nBut until that time (which would also fix some of our other problems, iirc) we might as well have this option.\n\nI wonder if most spkgs just don't have symlinks?  It would seem weird to me, in a source package, but maybe it's normal.\n\nAny ideas on how to make this 'portable', or would we just have a special Cygwin-only version of the spkg?",
    "created_at": "2011-06-28T01:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120852",
    "user": "@kcrisman"
}
```

Yes, I saw that on your thread :)

But until that time (which would also fix some of our other problems, iirc) we might as well have this option.

I wonder if most spkgs just don't have symlinks?  It would seem weird to me, in a source package, but maybe it's normal.

Any ideas on how to make this 'portable', or would we just have a special Cygwin-only version of the spkg?



---

archive/issue_comments_120853.json:
```json
{
    "body": "On another note:\n\nJust as a data point, I did not have trouble with this issue on networkx.  Perhaps there are fewer symlinks, so there is some chance greater than epsilon that that spkg will unpack correctly.",
    "created_at": "2011-06-28T03:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120853",
    "user": "@kcrisman"
}
```

On another note:

Just as a data point, I did not have trouble with this issue on networkx.  Perhaps there are fewer symlinks, so there is some chance greater than epsilon that that spkg will unpack correctly.



---

archive/issue_comments_120854.json:
```json
{
    "body": "I made an spkg for cddlib for myself at [this link](http://sage.math.washington.edu/home/kcrisman/cddlib-094f.p8.spkg), but I don't know whether this is something that could be merged... because, for one thing, I didn't update the instructions, and every time this is remade this problem would happen again.    One way to fix this would be to change the symlinks in this package to copies \"by hand\" and put that in the spkg notes...",
    "created_at": "2011-06-30T14:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120854",
    "user": "@kcrisman"
}
```

I made an spkg for cddlib for myself at [this link](http://sage.math.washington.edu/home/kcrisman/cddlib-094f.p8.spkg), but I don't know whether this is something that could be merged... because, for one thing, I didn't update the instructions, and every time this is remade this problem would happen again.    One way to fix this would be to change the symlinks in this package to copies "by hand" and put that in the spkg notes...



---

archive/issue_comments_120855.json:
```json
{
    "body": "I've still never seen this on networkx.\n\nI think that it would be enough to fix this issue to do the spkg this special way ONCE and then from then on just make sure there are build instructions to this effect in the spkg. My spkg doesn't have any changes like that, so this is not ready for review.",
    "created_at": "2011-07-01T03:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120855",
    "user": "@kcrisman"
}
```

I've still never seen this on networkx.

I think that it would be enough to fix this issue to do the spkg this special way ONCE and then from then on just make sure there are build instructions to this effect in the spkg. My spkg doesn't have any changes like that, so this is not ready for review.



---

archive/issue_comments_120856.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-07-01T16:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120856",
    "user": "@kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_120857.json:
```json
{
    "body": "Okay, I now have a p9 version of cddlib which just changes the instructions to indicate this needs to be done (and of course has had it done!).  \n\nNew spkg available at [cddlib-094f.p9.spkg](http://sage.math.washington.edu/home/kcrisman/cddlib-094f.p9.spkg).  The *only* change is in SPKG.txt and in having done the tar -h above.\n\nAlso cc:ing the spkg maintainers!",
    "created_at": "2011-07-01T16:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120857",
    "user": "@kcrisman"
}
```

Okay, I now have a p9 version of cddlib which just changes the instructions to indicate this needs to be done (and of course has had it done!).  

New spkg available at [cddlib-094f.p9.spkg](http://sage.math.washington.edu/home/kcrisman/cddlib-094f.p9.spkg).  The *only* change is in SPKG.txt and in having done the tar -h above.

Also cc:ing the spkg maintainers!



---

archive/issue_comments_120858.json:
```json
{
    "body": "Replying to [comment:12 kcrisman]:\n> I've still never seen this on networkx.\n> \n> I think that it would be enough to fix this issue to do the spkg this special way ONCE and then from then on just make sure there are build instructions to this effect in the spkg. My spkg doesn't have any changes like that, so this is not ready for review.\n\n\nCygwin developers finally managed to reproduce the problem:\nhttp://permalink.gmane.org/gmane.os.cygwin/127433\n\nit boils down to a bug/feature introduced in 1.7.9, and not really related to tar itself; so apparently it will be fixed soon.",
    "created_at": "2011-07-06T13:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120858",
    "user": "@dimpase"
}
```

Replying to [comment:12 kcrisman]:
> I've still never seen this on networkx.
> 
> I think that it would be enough to fix this issue to do the spkg this special way ONCE and then from then on just make sure there are build instructions to this effect in the spkg. My spkg doesn't have any changes like that, so this is not ready for review.


Cygwin developers finally managed to reproduce the problem:
http://permalink.gmane.org/gmane.os.cygwin/127433

it boils down to a bug/feature introduced in 1.7.9, and not really related to tar itself; so apparently it will be fixed soon.



---

archive/issue_comments_120859.json:
```json
{
    "body": "User \"RegB\" was able to use this successfully for this on Vista - see [this sage-windows thread](http://groups.google.com/group/sage-windows/browse_thread/thread/b7d6ed4902914726).  \n\nThis still needs review on Windows 7, of course, since that is where the problem is.",
    "created_at": "2011-07-29T19:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120859",
    "user": "@kcrisman"
}
```

User "RegB" was able to use this successfully for this on Vista - see [this sage-windows thread](http://groups.google.com/group/sage-windows/browse_thread/thread/b7d6ed4902914726).  

This still needs review on Windows 7, of course, since that is where the problem is.



---

archive/issue_comments_120860.json:
```json
{
    "body": "So does the cddlib package work?  Then I (or someone else) would just have to test the networkx one and make sure it untars correctly.",
    "created_at": "2011-11-28T13:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120860",
    "user": "@kcrisman"
}
```

So does the cddlib package work?  Then I (or someone else) would just have to test the networkx one and make sure it untars correctly.



---

archive/issue_comments_120861.json:
```json
{
    "body": "Replying to [comment:18 kcrisman]:\n> So does the cddlib package work?  Then I (or someone else) would just have to test the networkx one and make sure it untars correctly.\n\nYou mean, your cdd package? Yes, it works. I guess if you can test the networkx one that I made we can give this ticket positive review.",
    "created_at": "2011-11-28T14:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120861",
    "user": "@dimpase"
}
```

Replying to [comment:18 kcrisman]:
> So does the cddlib package work?  Then I (or someone else) would just have to test the networkx one and make sure it untars correctly.

You mean, your cdd package? Yes, it works. I guess if you can test the networkx one that I made we can give this ticket positive review.



---

archive/issue_comments_120862.json:
```json
{
    "body": "Replying to [comment:19 dimpase]:\n> Replying to [comment:18 kcrisman]:\n> > So does the cddlib package work?  Then I (or someone else) would just have to test the networkx one and make sure it untars correctly.\n> \n> You mean, your cdd package? Yes, it works. I guess if you can test the networkx one that I made we can give this ticket positive review.\n\nOkay, tomorrow morning I'm going to be able to start a Win 7 build (at least I assume so), so I should be able to deal with this.  Have to have *something* to do during the Putnam other than grade exams :)",
    "created_at": "2011-12-03T02:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120862",
    "user": "@kcrisman"
}
```

Replying to [comment:19 dimpase]:
> Replying to [comment:18 kcrisman]:
> > So does the cddlib package work?  Then I (or someone else) would just have to test the networkx one and make sure it untars correctly.
> 
> You mean, your cdd package? Yes, it works. I guess if you can test the networkx one that I made we can give this ticket positive review.

Okay, tomorrow morning I'm going to be able to start a Win 7 build (at least I assume so), so I should be able to deal with this.  Have to have *something* to do during the Putnam other than grade exams :)



---

archive/issue_comments_120863.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-07T03:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120863",
    "user": "@kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_120864.json:
```json
{
    "body": "After other problems discussed on other tickets, I did pass this point on two different builds on Win 7.   Goes in fine on OSX, tests in graphs directory pass.   Adding patches to hg was a good idea too.  Assuming there are no other changes to the spkg, should be good to go.",
    "created_at": "2011-12-07T03:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120864",
    "user": "@kcrisman"
}
```

After other problems discussed on other tickets, I did pass this point on two different builds on Win 7.   Goes in fine on OSX, tests in graphs directory pass.   Adding patches to hg was a good idea too.  Assuming there are no other changes to the spkg, should be good to go.



---

archive/issue_comments_120865.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2011-12-08T14:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120865",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_120866.json:
```json
{
    "body": "It seems the problem is fixed with more recent versions of Cygwin, so I see no reason to merge this...",
    "created_at": "2011-12-08T14:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120866",
    "user": "@jdemeyer"
}
```

It seems the problem is fixed with more recent versions of Cygwin, so I see no reason to merge this...



---

archive/issue_comments_120867.json:
```json
{
    "body": "> It seems the problem is fixed with more recent versions of Cygwin, so I see no reason to merge this...\nMy sense is that Dima wouldn't have made the networkx package still if it was working properly.  I didn't even try without it, though, and am having other problems with my build currently, so I'm not going to be able to in the immediate future.",
    "created_at": "2011-12-08T14:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120867",
    "user": "@kcrisman"
}
```

> It seems the problem is fixed with more recent versions of Cygwin, so I see no reason to merge this...
My sense is that Dima wouldn't have made the networkx package still if it was working properly.  I didn't even try without it, though, and am having other problems with my build currently, so I'm not going to be able to in the immediate future.



---

archive/issue_comments_120868.json:
```json
{
    "body": "Replying to [comment:22 jdemeyer]:\n> It seems the problem is fixed with more recent versions of Cygwin, so I see no reason to merge this...\n\nwith a stable version, Cygwin 1.7.9-1, less than a month ago, they were still present, and 1.7.10 is still far from being released.",
    "created_at": "2011-12-09T02:49:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120868",
    "user": "@dimpase"
}
```

Replying to [comment:22 jdemeyer]:
> It seems the problem is fixed with more recent versions of Cygwin, so I see no reason to merge this...

with a stable version, Cygwin 1.7.9-1, less than a month ago, they were still present, and 1.7.10 is still far from being released.



---

archive/issue_comments_120869.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-12-09T02:49:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120869",
    "user": "@dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_120870.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-11T03:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120870",
    "user": "@kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_120871.json:
```json
{
    "body": "So I think we can go back to positive review?",
    "created_at": "2011-12-11T03:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120871",
    "user": "@kcrisman"
}
```

So I think we can go back to positive review?



---

archive/issue_comments_120872.json:
```json
{
    "body": "cddlib needs to be rebased to #12131.",
    "created_at": "2011-12-16T08:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120872",
    "user": "@jdemeyer"
}
```

cddlib needs to be rebased to #12131.



---

archive/issue_comments_120873.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-12-16T08:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120873",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_120874.json:
```json
{
    "body": "> cddlib needs to be rebased to #12131.\nI understand the prerogative to merge a massive spkg bomb by the release manager.  But considering that this has had positive review for 10 days - *since before #12131 even existed!!!* - it seems like it would have been reasonable to merge this first.  \n\nIt's just not that easy to test that things still work on Cygwin, and now I will have to wait until I (or someone else) gets access to make sure this new spkg from #12131 still works there, and to do Dima's little trick to it, and make that a p10.  And by then I'm sure something *else* will happen to networkx and we'll have to change that one.\n\nSorry, just had to get that out.  I understand that OpenSUSE is more important than Cygwin for now.  Though hopefully if we ever get Cygwin going, we'll have several orders of magnitude more downloads of it than any Linux other than Ubuntu...",
    "created_at": "2011-12-16T21:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120874",
    "user": "@kcrisman"
}
```

> cddlib needs to be rebased to #12131.
I understand the prerogative to merge a massive spkg bomb by the release manager.  But considering that this has had positive review for 10 days - *since before #12131 even existed!!!* - it seems like it would have been reasonable to merge this first.  

It's just not that easy to test that things still work on Cygwin, and now I will have to wait until I (or someone else) gets access to make sure this new spkg from #12131 still works there, and to do Dima's little trick to it, and make that a p10.  And by then I'm sure something *else* will happen to networkx and we'll have to change that one.

Sorry, just had to get that out.  I understand that OpenSUSE is more important than Cygwin for now.  Though hopefully if we ever get Cygwin going, we'll have several orders of magnitude more downloads of it than any Linux other than Ubuntu...



---

archive/issue_comments_120875.json:
```json
{
    "body": "Let's try that again. It wasn't all supposed to be italicized.  I forgot about the magical properties of the exclamation point.\n\n> cddlib needs to be rebased to #12131.\nI understand the prerogative to merge a massive spkg bomb by the release manager.  But considering that this has had positive review for 10 days - *since before #12131 even existed!!! * - it seems like it would have been reasonable to merge this first.  \n \nIt's just not that easy to test that things still work on Cygwin, and now I will have to wait until I (or someone else) gets access to make sure this new spkg from #12131 still works there, and to do Dima's little trick to it, and make that a p10.  And by then I'm sure something *else* will happen to networkx and we'll have to change that one.\n\nSorry, just had to get that out.  I understand that OpenSUSE is more important than Cygwin for now.  Though hopefully if we ever get Cygwin going, we'll have several orders of magnitude more downloads of it than any Linux other than Ubuntu...",
    "created_at": "2011-12-16T21:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120875",
    "user": "@kcrisman"
}
```

Let's try that again. It wasn't all supposed to be italicized.  I forgot about the magical properties of the exclamation point.

> cddlib needs to be rebased to #12131.
I understand the prerogative to merge a massive spkg bomb by the release manager.  But considering that this has had positive review for 10 days - *since before #12131 even existed!!! * - it seems like it would have been reasonable to merge this first.  
 
It's just not that easy to test that things still work on Cygwin, and now I will have to wait until I (or someone else) gets access to make sure this new spkg from #12131 still works there, and to do Dima's little trick to it, and make that a p10.  And by then I'm sure something *else* will happen to networkx and we'll have to change that one.

Sorry, just had to get that out.  I understand that OpenSUSE is more important than Cygwin for now.  Though hopefully if we ever get Cygwin going, we'll have several orders of magnitude more downloads of it than any Linux other than Ubuntu...



---

archive/issue_comments_120876.json:
```json
{
    "body": "Forget it...",
    "created_at": "2011-12-16T21:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120876",
    "user": "@kcrisman"
}
```

Forget it...



---

archive/issue_comments_120877.json:
```json
{
    "body": "Unless...''",
    "created_at": "2011-12-16T21:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120877",
    "user": "@kcrisman"
}
```

Unless...''



---

archive/issue_comments_120878.json:
```json
{
    "body": "Replying to [comment:28 kcrisman]:\n> > cddlib needs to be rebased to #12131.\n> I understand the prerogative to merge a massive spkg bomb by the release manager.  But considering that this has had positive review for 10 days - *since before #12131 even existed!!!* - it seems like it would have been reasonable to merge this first.\nWell, maybe you are right but this is just the way things worked out.  I don't have a sophisticated bookkeeping of which tickets change which packages, it just happened that I merged #12131 first.  Besides, making the change required for this ticket is quite simple, so it can't be a big problem.\n\n> It's just not that easy to test that things still work on Cygwin, and now I will have to wait until I (or someone else) gets access to make sure this new spkg from #12131 still works there\nWhy is this specific to `cddlib`?  *Any* of the 29 packages merged in #12131 could be broken in Cygwin.\n\n> And by then I'm sure something *else* will happen to networkx and we'll have to change that one.\nI can assure you I won't let this happen.",
    "created_at": "2011-12-16T21:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120878",
    "user": "@jdemeyer"
}
```

Replying to [comment:28 kcrisman]:
> > cddlib needs to be rebased to #12131.
> I understand the prerogative to merge a massive spkg bomb by the release manager.  But considering that this has had positive review for 10 days - *since before #12131 even existed!!!* - it seems like it would have been reasonable to merge this first.
Well, maybe you are right but this is just the way things worked out.  I don't have a sophisticated bookkeeping of which tickets change which packages, it just happened that I merged #12131 first.  Besides, making the change required for this ticket is quite simple, so it can't be a big problem.

> It's just not that easy to test that things still work on Cygwin, and now I will have to wait until I (or someone else) gets access to make sure this new spkg from #12131 still works there
Why is this specific to `cddlib`?  *Any* of the 29 packages merged in #12131 could be broken in Cygwin.

> And by then I'm sure something *else* will happen to networkx and we'll have to change that one.
I can assure you I won't let this happen.



---

archive/issue_comments_120879.json:
```json
{
    "body": "> Well, maybe you are right but this is just the way things worked out.  I don't have a sophisticated bookkeeping of which tickets change which packages, it just happened that I merged #12131 first.  Besides, making the change required for this ticket is quite simple, so it can't be a big problem.\n\nWell, it's still time-consuming for me.   I know that sounds lame, but it's a fact :(\n\n> > It's just not that easy to test that things still work on Cygwin, and now I will have to wait until I (or someone else) gets access to make sure this new spkg from #12131 still works there\n> Why is this specific to `cddlib`?  *Any* of the 29 packages merged in #12131 could be broken in Cygwin.\n\nHaha!  Good point... maybe I need to start another build of the \"proto\" alpha5 tonight.\n\nExcept that mpir doesn't work because of the yasm business (if not other things) - #12115.  And going all the way up to 2.5 looks like a big deal, one I don't want to do without the experts who actually use those big integers on a daily basis.\n\nStill can't figure out how to remove the italics.  I know someone was hoping to upgrade Trac at some point, but it's not really that important.",
    "created_at": "2011-12-16T21:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120879",
    "user": "@kcrisman"
}
```

> Well, maybe you are right but this is just the way things worked out.  I don't have a sophisticated bookkeeping of which tickets change which packages, it just happened that I merged #12131 first.  Besides, making the change required for this ticket is quite simple, so it can't be a big problem.

Well, it's still time-consuming for me.   I know that sounds lame, but it's a fact :(

> > It's just not that easy to test that things still work on Cygwin, and now I will have to wait until I (or someone else) gets access to make sure this new spkg from #12131 still works there
> Why is this specific to `cddlib`?  *Any* of the 29 packages merged in #12131 could be broken in Cygwin.

Haha!  Good point... maybe I need to start another build of the "proto" alpha5 tonight.

Except that mpir doesn't work because of the yasm business (if not other things) - #12115.  And going all the way up to 2.5 looks like a big deal, one I don't want to do without the experts who actually use those big integers on a daily basis.

Still can't figure out how to remove the italics.  I know someone was hoping to upgrade Trac at some point, but it's not really that important.



---

archive/issue_comments_120880.json:
```json
{
    "body": "Easy, I'll rebase it.",
    "created_at": "2011-12-16T21:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120880",
    "user": "@vbraun"
}
```

Easy, I'll rebase it.



---

archive/issue_comments_120881.json:
```json
{
    "body": "I'll switch it back to positive review since its just a trivial rebase.",
    "created_at": "2011-12-16T22:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120881",
    "user": "@vbraun"
}
```

I'll switch it back to positive review since its just a trivial rebase.



---

archive/issue_comments_120882.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-12-16T22:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120882",
    "user": "@vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_120883.json:
```json
{
    "body": "> I'll switch it back to positive review since its just a trivial rebase.\n\nI'd feel most comfortable actually trying this out on a Win 7 box (where the problem is) but I won't have access to one for quite some time now, afaik. But this is the part I was most worried about - I don't quite understand why this change makes the difference (Dima does, of course) and so I was hoping to test it.  I guess if Volker vouches that he carried out the \"special instructions\" we can be reasonably confident.  :)  Thanks.\n\nI find the date order of the SPKG.txt info amusing as well.",
    "created_at": "2011-12-17T01:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120883",
    "user": "@kcrisman"
}
```

> I'll switch it back to positive review since its just a trivial rebase.

I'd feel most comfortable actually trying this out on a Win 7 box (where the problem is) but I won't have access to one for quite some time now, afaik. But this is the part I was most worried about - I don't quite understand why this change makes the difference (Dima does, of course) and so I was hoping to test it.  I guess if Volker vouches that he carried out the "special instructions" we can be reasonably confident.  :)  Thanks.

I find the date order of the SPKG.txt info amusing as well.



---

archive/issue_comments_120884.json:
```json
{
    "body": "Replying to [comment:36 kcrisman]:\n> > I'll switch it back to positive review since its just a trivial rebase.\n> \n> I'd feel most comfortable actually trying this out on a Win 7 box (where the problem is) but I won't have access to one for quite some time now, afaik. But this is the part I was most worried about - I don't quite understand why this change makes the difference (Dima does, of course) and so I was hoping to test it.  I guess if Volker vouches that he carried out the \"special instructions\" we can be reasonably confident.  :)  Thanks.\n\nI might be able to try this on Win  7 on Monday - provided that VPN will let me login to NTU from Tohoku, etc...",
    "created_at": "2011-12-17T05:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120884",
    "user": "@dimpase"
}
```

Replying to [comment:36 kcrisman]:
> > I'll switch it back to positive review since its just a trivial rebase.
> 
> I'd feel most comfortable actually trying this out on a Win 7 box (where the problem is) but I won't have access to one for quite some time now, afaik. But this is the part I was most worried about - I don't quite understand why this change makes the difference (Dima does, of course) and so I was hoping to test it.  I guess if Volker vouches that he carried out the "special instructions" we can be reasonably confident.  :)  Thanks.

I might be able to try this on Win  7 on Monday - provided that VPN will let me login to NTU from Tohoku, etc...



---

archive/issue_comments_120885.json:
```json
{
    "body": "For the record, I just forward-ported the one-line change from #12131 to this spkg, no special treatment necessary ;-)\n\n//italic// *be* gone.",
    "created_at": "2011-12-17T19:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120885",
    "user": "@vbraun"
}
```

For the record, I just forward-ported the one-line change from #12131 to this spkg, no special treatment necessary ;-)

//italic// *be* gone.



---

archive/issue_comments_120886.json:
```json
{
    "body": "> For the record, I just forward-ported the one-line change from #12131 to this spkg, no special treatment necessary ;-)\nAnd you also did the \"special instructions\" with tar -h?\n> //italic// *be* gone.\nNice to see there are things we can't fix, keeps us humble :)",
    "created_at": "2011-12-17T21:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120886",
    "user": "@kcrisman"
}
```

> For the record, I just forward-ported the one-line change from #12131 to this spkg, no special treatment necessary ;-)
And you also did the "special instructions" with tar -h?
> //italic// *be* gone.
Nice to see there are things we can't fix, keeps us humble :)



---

archive/issue_comments_120887.json:
```json
{
    "body": "tar -h just dereferences symlinks. You only need to dereference them once. There were no symlinks in the spkg before I added the change from #12131, and there are none now.",
    "created_at": "2011-12-17T21:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120887",
    "user": "@vbraun"
}
```

tar -h just dereferences symlinks. You only need to dereference them once. There were no symlinks in the spkg before I added the change from #12131, and there are none now.



---

archive/issue_comments_120888.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-12-21T09:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120888",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_120889.json:
```json
{
    "body": "The new cddlib here breaks a doctest on OS X:\n\n```\nsage -t -long  -force_lib devel/sage/sage/schemes/generic/toric_divisor.py\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.8.alpha5/devel/sage-main/sage/schemes/generic/toric_divisor.py\", line 1590:\n    sage: supp.Vrepresentation()\nExpected:\n    [A vertex at (-1, 1), A vertex at (0, 2), A vertex at (0, -1), A vertex at (3, -1)]\nGot:\n    [A vertex at (-1, 1), A vertex at (0, 2), A vertex at (3, -1), A vertex at (0, -1)]\n**********************************************************************\n```\n",
    "created_at": "2011-12-21T09:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120889",
    "user": "@jdemeyer"
}
```

The new cddlib here breaks a doctest on OS X:

```
sage -t -long  -force_lib devel/sage/sage/schemes/generic/toric_divisor.py
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.8.alpha5/devel/sage-main/sage/schemes/generic/toric_divisor.py", line 1590:
    sage: supp.Vrepresentation()
Expected:
    [A vertex at (-1, 1), A vertex at (0, 2), A vertex at (0, -1), A vertex at (3, -1)]
Got:
    [A vertex at (-1, 1), A vertex at (0, 2), A vertex at (3, -1), A vertex at (0, -1)]
**********************************************************************
```




---

archive/issue_comments_120890.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-12-21T11:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120890",
    "user": "@vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_120891.json:
```json
{
    "body": "Thats the old problem of cdd relying on the libc rng which produces different random numbers on different platforms. I patched that earlier to be the same on all platforms, but the source file is symlinked into another directory. Now that we dereferenced the symlinks, we need to patch both places. I've updated the spkg to do so.\n\nI've verified that the doctest is fixed on bsd.math.",
    "created_at": "2011-12-21T11:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120891",
    "user": "@vbraun"
}
```

Thats the old problem of cdd relying on the libc rng which produces different random numbers on different platforms. I patched that earlier to be the same on all platforms, but the source file is symlinked into another directory. Now that we dereferenced the symlinks, we need to patch both places. I've updated the spkg to do so.

I've verified that the doctest is fixed on bsd.math.



---

archive/issue_comments_120892.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-28T22:00:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120892",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_120893.json:
```json
{
    "body": "Looks good to me.  I made an updated spkg, with only the permissions of `src` changed.",
    "created_at": "2011-12-28T22:00:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120893",
    "user": "@jdemeyer"
}
```

Looks good to me.  I made an updated spkg, with only the permissions of `src` changed.



---

archive/issue_comments_120894.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-29T07:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11073#issuecomment-120894",
    "user": "@jdemeyer"
}
```

Resolution: fixed
