# Issue 13212: pyOpenSSL SPKG

archive/issues_013212.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @novoselt\n\npyOpenSSL 0.13 doesn't build on systems with sufficiently old OpenSSL versions. A patch exists for this but has not been included upstream. So, we have to make an SPKG.\n\n(This SPKG continues the history of an old pyOpenSSL SPKG I found somewhere.)\n\nIssue created by migration from https://trac.sagemath.org/ticket/13384\n\n",
    "created_at": "2012-08-20T06:15:39Z",
    "labels": [
        "component: packages"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "pyOpenSSL SPKG",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13212",
    "user": "https://github.com/kini"
}
```
Assignee: tbd

CC:  @novoselt

pyOpenSSL 0.13 doesn't build on systems with sufficiently old OpenSSL versions. A patch exists for this but has not been included upstream. So, we have to make an SPKG.

(This SPKG continues the history of an old pyOpenSSL SPKG I found somewhere.)

Issue created by migration from https://trac.sagemath.org/ticket/13384





---

archive/issue_comments_161326.json:
```json
{
    "body": "Changing keywords from \"\" to \"OpenSSL pyOpenSSL spkg\".",
    "created_at": "2012-08-20T06:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161326",
    "user": "https://github.com/kini"
}
```

Changing keywords from "" to "OpenSSL pyOpenSSL spkg".



---

archive/issue_comments_161327.json:
```json
{
    "body": "Setting this ticket to depend on #13121 because the current sagenb SPKG will overwrite this pyOpenSSL with its own internally included pyOpenSSL 0.12, making it difficult to test this SPKG.",
    "created_at": "2012-08-20T08:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161327",
    "user": "https://github.com/kini"
}
```

Setting this ticket to depend on #13121 because the current sagenb SPKG will overwrite this pyOpenSSL with its own internally included pyOpenSSL 0.12, making it difficult to test this SPKG.



---

archive/issue_comments_161328.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-08-20T08:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161328",
    "user": "https://github.com/kini"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_161329.json:
```json
{
    "body": "Actually maybe we should make this an optional SPKG. It looks like we barely use OpenSSL at all - we can probably just wrap the import and handle it gracefully when pyOpenSSL isn't installed. See also William's comments a while ago [here](http://thread.gmane.org/gmane.comp.mathematics.sage.devel/54802/).",
    "created_at": "2012-08-21T03:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161329",
    "user": "https://github.com/kini"
}
```

Actually maybe we should make this an optional SPKG. It looks like we barely use OpenSSL at all - we can probably just wrap the import and handle it gracefully when pyOpenSSL isn't installed. See also William's comments a while ago [here](http://thread.gmane.org/gmane.comp.mathematics.sage.devel/54802/).



---

archive/issue_comments_161330.json:
```json
{
    "body": "See #13385.",
    "created_at": "2012-08-21T07:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161330",
    "user": "https://github.com/kini"
}
```

See #13385.



---

archive/issue_comments_161331.json:
```json
{
    "body": "Keshav: the naming convention for spkgs seems to be to use lowercase almost exclusively. So I would suggest calling this \"pyopenssl\".",
    "created_at": "2012-08-22T01:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161331",
    "user": "https://github.com/jhpalmieri"
}
```

Keshav: the naming convention for spkgs seems to be to use lowercase almost exclusively. So I would suggest calling this "pyopenssl".



---

archive/issue_comments_161332.json:
```json
{
    "body": "OK.",
    "created_at": "2012-08-22T05:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161332",
    "user": "https://github.com/kini"
}
```

OK.



---

archive/issue_comments_161333.json:
```json
{
    "body": "Actually I take back my suggestion about waiting for #13121 to go in before testing this - #13121 depends on this, because if #13121 goes in without this ticket going in, people won't have an SPKG-based way to install pyOpenSSL into their Sage.",
    "created_at": "2012-08-22T17:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161333",
    "user": "https://github.com/kini"
}
```

Actually I take back my suggestion about waiting for #13121 to go in before testing this - #13121 depends on this, because if #13121 goes in without this ticket going in, people won't have an SPKG-based way to install pyOpenSSL into their Sage.



---

archive/issue_comments_161334.json:
```json
{
    "body": "If we're making this an optional spkg, then we don't need to patch deps.",
    "created_at": "2012-08-22T17:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161334",
    "user": "https://github.com/jhpalmieri"
}
```

If we're making this an optional spkg, then we don't need to patch deps.



---

archive/issue_comments_161335.json:
```json
{
    "body": "Yes, the attached patch was mentioned in the description before I decided this should be an optional SPKG. Now it is not mentioned in the description.\n\nActually now I see there's a way to delete my attachment, so I'm doing so.",
    "created_at": "2012-08-22T17:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161335",
    "user": "https://github.com/kini"
}
```

Yes, the attached patch was mentioned in the description before I decided this should be an optional SPKG. Now it is not mentioned in the description.

Actually now I see there's a way to delete my attachment, so I'm doing so.



---

archive/issue_comments_161336.json:
```json
{
    "body": "Should the patch command have the form `patch ... || die ...`?\n\nOtherwise, this seems to build properly. People who have issues with old versions of OpenSSL should test it, though.",
    "created_at": "2012-08-22T21:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161336",
    "user": "https://github.com/jhpalmieri"
}
```

Should the patch command have the form `patch ... || die ...`?

Otherwise, this seems to build properly. People who have issues with old versions of OpenSSL should test it, though.



---

archive/issue_comments_161337.json:
```json
{
    "body": "I figured applying the patch is not going to fail on someone else's system if it worked on my system. I suppose it can't hurt to add a `|| die` though.\n\nUpdated SPKG is at the same URL.",
    "created_at": "2012-09-02T07:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161337",
    "user": "https://github.com/kini"
}
```

I figured applying the patch is not going to fail on someone else's system if it worked on my system. I suppose it can't hurt to add a `|| die` though.

Updated SPKG is at the same URL.



---

archive/issue_comments_161338.json:
```json
{
    "body": "As I said earlier, this builds properly for me. The patch makes sense, too.\n\nI think we have two options with this ticket: (1) Accept the spkg as is, so we can get the new notebook (etc.) merged; then if there are remaining issues with conflicting versions of OpenSSL, we can work on fixing them. (2) Try to get people who have already had issues with old versions of OpenSSL to see if this spkg fixes them.\n\nSince this is an optional spkg, and since I don't know who to ask about option (2), I'm inclined to go with option (1). Keshav, what do you think?",
    "created_at": "2012-09-02T16:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161338",
    "user": "https://github.com/jhpalmieri"
}
```

As I said earlier, this builds properly for me. The patch makes sense, too.

I think we have two options with this ticket: (1) Accept the spkg as is, so we can get the new notebook (etc.) merged; then if there are remaining issues with conflicting versions of OpenSSL, we can work on fixing them. (2) Try to get people who have already had issues with old versions of OpenSSL to see if this spkg fixes them.

Since this is an optional spkg, and since I don't know who to ask about option (2), I'm inclined to go with option (1). Keshav, what do you think?



---

archive/issue_comments_161339.json:
```json
{
    "body": "Jeroen is the one to ask, as I believe this problem first came up when Jeroen was testing on a buildbot which had an old OpenSSL (OS X 10.4 I think).\n\nBut personally I'd go for (1) as I want to see #13121 and its web of dependencies get merged ASAP :)",
    "created_at": "2012-09-02T17:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161339",
    "user": "https://github.com/kini"
}
```

Jeroen is the one to ask, as I believe this problem first came up when Jeroen was testing on a buildbot which had an old OpenSSL (OS X 10.4 I think).

But personally I'd go for (1) as I want to see #13121 and its web of dependencies get merged ASAP :)



---

archive/issue_comments_161340.json:
```json
{
    "body": "If it's an *optional* package: go for it!  I don't really care about OpenSSL on this OS X 10.4 machine.\n\nBe sure to test the combination of the OpenSSL spkg with the PyOpenSSL spkg though.",
    "created_at": "2012-09-02T21:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161340",
    "user": "https://github.com/jdemeyer"
}
```

If it's an *optional* package: go for it!  I don't really care about OpenSSL on this OS X 10.4 machine.

Be sure to test the combination of the OpenSSL spkg with the PyOpenSSL spkg though.



---

archive/issue_comments_161341.json:
```json
{
    "body": "Changing component from packages to optional packages.",
    "created_at": "2012-09-02T21:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161341",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from packages to optional packages.



---

archive/issue_comments_161342.json:
```json
{
    "body": "OK report: I have started with a fresh 5.3.rc0 and got a crash on Debian Wheezy. Then I followed instructions on #13121 and got a message to read README, which after #13385 tells to install pyopenssl. Installing it from this ticket made everything work.",
    "created_at": "2012-09-02T23:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161342",
    "user": "https://github.com/novoselt"
}
```

OK report: I have started with a fresh 5.3.rc0 and got a crash on Debian Wheezy. Then I followed instructions on #13121 and got a message to read README, which after #13385 tells to install pyopenssl. Installing it from this ticket made everything work.



---

archive/issue_comments_161343.json:
```json
{
    "body": "It certainly builds on top of the Sage OpenSSL package, for example on skynet/iras. Then I can load the pyOpenSSL example files and use them, although they're not very well documented, so I can't use them very much. They work without giving any errors about missing imports or bad libraries or anything like that. So I say it's ready.",
    "created_at": "2012-09-02T23:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161343",
    "user": "https://github.com/jhpalmieri"
}
```

It certainly builds on top of the Sage OpenSSL package, for example on skynet/iras. Then I can load the pyOpenSSL example files and use them, although they're not very well documented, so I can't use them very much. They work without giving any errors about missing imports or bad libraries or anything like that. So I say it's ready.



---

archive/issue_comments_161344.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-09-02T23:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161344",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_161345.json:
```json
{
    "body": "i just put this optional spkg on the server+mirrors.",
    "created_at": "2012-09-03T14:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161345",
    "user": "https://github.com/haraldschilly"
}
```

i just put this optional spkg on the server+mirrors.



---

archive/issue_events_013119.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2012-09-05T07:19:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13212#event-13119"
}
```



---

archive/issue_comments_161346.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-09-05T07:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13212#issuecomment-161346",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
