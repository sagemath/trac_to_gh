# Issue 12561: norm of symbolic matrices gives an error

Issue created by migration from Trac.

Original creator: jason

Original creation time: 2012-03-23 07:51:55

Assignee: jason, was

CC:  rbeezer mmasdeu

This was reported on ask.sagemath.org: http://ask.sagemath.org/question/1244/symbolic-vector-norm

Here is an example


```
sage: matrix(SR,[This is the Trac macro *x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#x-macro)).norm()

---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/Users/grout/<ipython console> in <module>()

/Users/grout/sage-trees/sage-5.0.beta6/local/lib/python2.7/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.norm (sage/matrix/matrix2.c:47759)()

/Users/grout/sage-trees/sage-5.0.beta6/local/lib/python2.7/site-packages/sage/matrix/matrix0.so in sage.matrix.matrix0.Matrix.change_ring (sage/matrix/matrix0.c:8151)()

/Users/grout/sage-trees/sage-5.0.beta6/local/lib/python2.7/site-packages/sage/matrix/matrix_space.pyc in __call__(self, entries, coerce, copy, rows)
    554             return self(entries.matrix(), copy=False)
    555 
--> 556         return self.matrix(entries, copy=copy, coerce=coerce, rows=rows)
    557 
    558     def change_ring(self, R):

/Users/grout/sage-trees/sage-5.0.beta6/local/lib/python2.7/site-packages/sage/matrix/matrix_space.pyc in matrix(self, x, coerce, copy, rows)
   1403                     x = new_x
   1404                     copy = False
-> 1405         return self.__matrix_class(self, entries=x, copy=copy, coerce=coerce) 
   1406      
   1407     def matrix_space(self, nrows=None, ncols=None, sparse=False):

/Users/grout/sage-trees/sage-5.0.beta6/local/lib/python2.7/site-packages/sage/matrix/matrix_double_dense.so in sage.matrix.matrix_double_dense.Matrix_double_dense.__init__ (sage/matrix/matrix_double_dense.c:3215)()

/Users/grout/sage-trees/sage-5.0.beta6/local/lib/python2.7/site-packages/sage/symbolic/expression.so in sage.symbolic.expression.Expression.__complex__ (sage/symbolic/expression.cpp:5926)()

TypeError: unable to simplify to complex approximation
```


The problem appears to be an automatic coercion to RDF or CDF.  Maybe symbolic matrices should override the method.


---

Attachment


---

Comment by abrochard created at 2012-06-12 19:58:08

Patch submitted. I also added an example to be sure, and corrected a little mistake in a test in sage/misc/functional.py


---

Comment by chapoton created at 2012-07-10 14:46:12

Changing status from new to needs_review.


---

Comment by chapoton created at 2012-07-10 16:00:25

This ticket (and the added tests in particular) does not make much sense, unless there exists a symbolic max function. In my opinion, it would be better to return a NotImplementedError than to return nonsense results.


---

Comment by jason created at 2012-07-10 16:45:42

Use max_symbolic then: 


```
sage: max_symbolic(a,b)
max(a, b)
```



---

Comment by chapoton created at 2012-07-10 19:15:19

Changing keywords from "" to "matrix, symbolic".


---

Comment by chapoton created at 2012-07-10 19:15:19

Changing status from needs_review to needs_work.
