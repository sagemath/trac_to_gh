# Issue 12832: make micro_release doesn't work

Issue created by migration from https://trac.sagemath.org/ticket/13004

Original creator: was

Original creation time: 2012-05-25 04:18:02

Assignee: GeorgSWeber




```
wstein@sage:/scratch/wstein/may/sage-5.0.rc1$ make micro_release
bash -c ". spkg/bin/sage-env && local/bin/sage-micro_release"
Stripping .so files in local/lib
strip "/scratch/wstein/may/sage-5.0.rc1/local/lib/libzn_poly.so"
...
strip "/scratch/wstein/may/sage-5.0.rc1/local/lib/libpython2.7.so"
bash: line 1: 31544 Segmentation fault      local/bin/sage-micro_release
make: *** [micro_release] Error 139
wstein@sage:/scratch/wstein/may/sage-5.0.rc1$ 
```



---

Comment by was created at 2012-05-25 04:19:01

Oops -- stripping python from a python script!?


---

Comment by vbraun created at 2012-07-03 20:42:01

Initial patch


---

Attachment

The attached patch splits sage-micro_release into a shell script that does the stripping
and a python script that does all the rest.


---

Comment by mmezzarobba created at 2013-05-06 19:59:27

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2013-05-06 19:59:27

Why isn't this ticket flagged _need_review_?


---

Comment by mmezzarobba created at 2013-05-06 20:02:45

Changing status from needs_review to positive_review.


---

Comment by mmezzarobba created at 2013-05-06 20:02:45

Anyway, the patch looks reasonable and works for me, so I took the liberty to give it _positive_review_. I hope this is acceptable.

(Apply to `local/bin`.)


---

Comment by jdemeyer created at 2013-05-07 09:49:45

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-05-07 09:49:45

Would it not be a good idea to limit the stripping to files which are executable?

```
find "$SAGE_LOCAL/bin" "$SAGE_LOCAL/lib" -type f -executable -exec strip '{}' ';'
```



---

Comment by vbraun created at 2013-05-07 10:10:12

You can also strip static libraries (`.a`) and those should not be executable.


---

Comment by vbraun created at 2013-05-07 10:10:12

Changing status from needs_work to positive_review.


---

Comment by jpflori created at 2013-05-09 10:16:51

I guess #11743 becomes a duplicate.


---

Comment by jdemeyer created at 2013-05-13 13:25:46

Resolution: fixed
