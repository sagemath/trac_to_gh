# Issue 19863: A new structure for Cyclic codes

archive/issues_019863.json:
```json
{
    "body": "CC:  jsrn cpernet\n\nThis ticket proposes a new implementation for cyclic codes.\n\nIt contains:\n\n- a new code class, `CyclicCode`,\n- a dedicated encoder to compute the generator matrix of a Cyclic Code, and \n- an encoder whose message space is a polynomial ring.\n\nThis new structure has the following features:\n\n- it is now possible to build a cyclic code in three different ways:\n  - either by using the generator polynomial, which is passed as an argument,\n  - either by using the defining set, which is passed as an argument (and can even be partial), or\n  - by passing a linear code as argument. In that case, a generator polynomial will be computed (if possible) and used to reformat the input code as a cyclic code.\n- it also comes with a method to compute the BCH bound, either from a constructed code or directly from the necessary parameters. \n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/20100\n\n",
    "created_at": "2016-02-23T13:58:42Z",
    "labels": [
        "coding theory",
        "major",
        "enhancement"
    ],
    "title": "A new structure for Cyclic codes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19863",
    "user": "dlucas"
}
```
CC:  jsrn cpernet

This ticket proposes a new implementation for cyclic codes.

It contains:

- a new code class, `CyclicCode`,
- a dedicated encoder to compute the generator matrix of a Cyclic Code, and 
- an encoder whose message space is a polynomial ring.

This new structure has the following features:

- it is now possible to build a cyclic code in three different ways:
  - either by using the generator polynomial, which is passed as an argument,
  - either by using the defining set, which is passed as an argument (and can even be partial), or
  - by passing a linear code as argument. In that case, a generator polynomial will be computed (if possible) and used to reformat the input code as a cyclic code.
- it also comes with a method to compute the BCH bound, either from a constructed code or directly from the necessary parameters. 



Issue created by migration from https://trac.sagemath.org/ticket/20100





---

archive/issue_comments_273037.json:
```json
{
    "body": "I pushed my work, as it is almost done.\nThere's still one bug to fix, documented in `defining_set`'s broken docstring.\n----\nLast 10 new commits:",
    "created_at": "2016-02-24T09:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273037",
    "user": "dlucas"
}
```

I pushed my work, as it is almost done.
There's still one bug to fix, documented in `defining_set`'s broken docstring.
----
Last 10 new commits:



---

archive/issue_comments_273038.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-24T09:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273038",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273039.json:
```json
{
    "body": "Ok, found it and fixed it. It's now open for review.",
    "created_at": "2016-02-24T09:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273039",
    "user": "dlucas"
}
```

Ok, found it and fixed it. It's now open for review.



---

archive/issue_comments_273040.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-24T09:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273040",
    "user": "dlucas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_273041.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-03-02T12:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273041",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_273042.json:
```json
{
    "body": "I merged with latest beta, fixed conflicts with GRS branch, this is still open for review.",
    "created_at": "2016-03-02T12:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273042",
    "user": "dlucas"
}
```

I merged with latest beta, fixed conflicts with GRS branch, this is still open for review.



---

archive/issue_comments_273043.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-23T13:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273043",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273044.json:
```json
{
    "body": "I fixed the broken doctests in `code_constructions.py`. \nThey occured because the old implementation of `CyclicCode` allowed to use generator polynomials which do not divide `x^n - 1`, `n` being the length of the code.\nI fixed this by replacing these polynomials (say, `g`) by `gcd(g, x^n - 1)`.\n\nThis is still open for review.",
    "created_at": "2016-03-23T14:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273044",
    "user": "dlucas"
}
```

I fixed the broken doctests in `code_constructions.py`. 
They occured because the old implementation of `CyclicCode` allowed to use generator polynomials which do not divide `x^n - 1`, `n` being the length of the code.
I fixed this by replacing these polynomials (say, `g`) by `gcd(g, x^n - 1)`.

This is still open for review.



---

archive/issue_comments_273045.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-31T09:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273045",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273046.json:
```json
{
    "body": "I updated to the latest beta.\nI also added a new optional argument: `primitive_element`. If filled, it will be used as the \"base root\" for the consecutive root sequence of the generator polynomial over the splitting field.",
    "created_at": "2016-03-31T09:07:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273046",
    "user": "dlucas"
}
```

I updated to the latest beta.
I also added a new optional argument: `primitive_element`. If filled, it will be used as the "base root" for the consecutive root sequence of the generator polynomial over the splitting field.



---

archive/issue_comments_273047.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-28T12:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273047",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273048.json:
```json
{
    "body": "Hello,\n\nI updated this ticket to latest beta version (7.3b5) and made some changes:\n\n- I removed dependency to #20039.\n- I improved documentation in many places, by defining terms more precisely.\n- I removed now useless `__ne__` methods\n- I changed helper methods and made them private methods.\n\nThis is open for review.\n\nDavid",
    "created_at": "2016-06-28T12:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273048",
    "user": "dlucas"
}
```

Hello,

I updated this ticket to latest beta version (7.3b5) and made some changes:

- I removed dependency to #20039.
- I improved documentation in many places, by defining terms more precisely.
- I removed now useless `__ne__` methods
- I changed helper methods and made them private methods.

This is open for review.

David



---

archive/issue_comments_273049.json:
```json
{
    "body": "Fixed merge conflicts.\n----\nNew commits:",
    "created_at": "2016-08-11T09:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273049",
    "user": "jsrn"
}
```

Fixed merge conflicts.
----
New commits:



---

archive/issue_comments_273050.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-22T12:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273050",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273051.json:
```json
{
    "body": "Hi,\n\nAs some sd75 participants may want to follow this ticket, I push some changes:\n- I fixed some typos;\n- I removed the probabilistic algorithm from the `find_generator_polynomial()` method, because it didn't always output the right result;\n- As we discussed quickly with Johan, only single-root cyclic codes are now implemented (that is, `n` and `q` must be coprimes);\n- I removed your local `_cyclotomic_cosets()` method;\n- I added some sanity checks;\n- maybe other things\n\nThat's still a work in progress. Especially, it remarked that (non exhaustive):\n- `__eq__` sometimes gives fake negatives (or type II errors). For example, when building cyclic codes from the same (mathematically speaking) generator polynomial, but belonging to two different instances of `PolynomialRing`.\n- I don't remember why we let the user choose the primitive element (does the code really depend on that?)\n- BCH bound computation will be hard to review :)\n- the defining set looks to depend on the choice of `beta`, the n-th root of unity.\n- I don't understand what is the `_known_generator_matrix` attribute\n- it seems weird that the `CyclicCodeVectorEncoder` encodes with a polynomial multiplication.\n\nAs I said, it's definitely a WIP.\n\nJulien\n----\nNew commits:",
    "created_at": "2016-08-23T21:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273051",
    "user": "jlavauzelle"
}
```

Hi,

As some sd75 participants may want to follow this ticket, I push some changes:
- I fixed some typos;
- I removed the probabilistic algorithm from the `find_generator_polynomial()` method, because it didn't always output the right result;
- As we discussed quickly with Johan, only single-root cyclic codes are now implemented (that is, `n` and `q` must be coprimes);
- I removed your local `_cyclotomic_cosets()` method;
- I added some sanity checks;
- maybe other things

That's still a work in progress. Especially, it remarked that (non exhaustive):
- `__eq__` sometimes gives fake negatives (or type II errors). For example, when building cyclic codes from the same (mathematically speaking) generator polynomial, but belonging to two different instances of `PolynomialRing`.
- I don't remember why we let the user choose the primitive element (does the code really depend on that?)
- BCH bound computation will be hard to review :)
- the defining set looks to depend on the choice of `beta`, the n-th root of unity.
- I don't understand what is the `_known_generator_matrix` attribute
- it seems weird that the `CyclicCodeVectorEncoder` encodes with a polynomial multiplication.

As I said, it's definitely a WIP.

Julien
----
New commits:



---

archive/issue_comments_273052.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-23T21:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273052",
    "user": "jlavauzelle"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_273053.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-08-25T08:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273053",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_273054.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-25T12:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273054",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273055.json:
```json
{
    "body": "Hi,\n\nI made some minor changes after merging the right 'develop' branch. I think now it compiles well (at least, in my machine; Joe Fields reported a compiling problem with guava in the previous push that I couldn't reproduce).\n\nI reviewed almost all the code, i.e. all but the BCH bound. It looks quite fine now, but as it's a quite big patch, it clearly need a second review (besides, someone must review my own commits).\n\nJulien",
    "created_at": "2016-08-25T12:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273055",
    "user": "jlavauzelle"
}
```

Hi,

I made some minor changes after merging the right 'develop' branch. I think now it compiles well (at least, in my machine; Joe Fields reported a compiling problem with guava in the previous push that I couldn't reproduce).

I reviewed almost all the code, i.e. all but the BCH bound. It looks quite fine now, but as it's a quite big patch, it clearly need a second review (besides, someone must review my own commits).

Julien



---

archive/issue_comments_273056.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-25T13:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273056",
    "user": "jlavauzelle"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_273057.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-25T14:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273057",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273058.json:
```json
{
    "body": "Hi David and Julien,\n\nUsing `codes.CyclicCode.<TAB>` I went through all methods which are worth mentionning. I will just first make a few remarks about them and their associated  docstrings.\n\n* `codes.CyclicCode?`\n  * \"generator_pol\" : in the sentence \"the unique monic polynomial which divides every codeword\" the meaning of \"divides\" is not mathematically clear. If you mean division in `F[X]/(X^n-1)`, then you need to furthermore say it has lowest degree to make it unique.\n  * \"D\": recall it is a set of (positive ? reduced mod n ?) integers\n  * method (3): a few words should be said about the default root of unity used in building the generator polynomial\n* `codes.CyclicCode.bch_bound?`\n  * is it possible to use `BCH_bound` to honor the authors ?\n* `codes.CyclicCode.defining_set?` is very neat. For more completeness, I think it would be nice to briefly recall it depends on the choice of the primitive root (which is not shown or discussed in the examples).\n* `codes.CyclicCode.dual_code()` not a docstring problem, and more a design problem. As I just tested it, the resulting code is not a member of the `CyclicCode class`.\n* `codes.CyclicCode.primitive_element?` in the string \"Returns the primitive element that was used as a root  the   generator polynomial over the extension field.\", the words \"that was used\" are not very clear, since it is not mentionned by which method it has been used. For instance it should be clear from the docstring what is the result  when calling `codes.CyclicCode` using an arbritrary code.\n* somehow the class inherits `C.variable_name`. Wouldn't it be a neat to use it to get the variable for the underlying polynomial ring ? \n\nI will go through the implementation this afternoon.\n\nDaniel",
    "created_at": "2016-08-26T10:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273058",
    "user": "danielaugot"
}
```

Hi David and Julien,

Using `codes.CyclicCode.<TAB>` I went through all methods which are worth mentionning. I will just first make a few remarks about them and their associated  docstrings.

* `codes.CyclicCode?`
  * "generator_pol" : in the sentence "the unique monic polynomial which divides every codeword" the meaning of "divides" is not mathematically clear. If you mean division in `F[X]/(X^n-1)`, then you need to furthermore say it has lowest degree to make it unique.
  * "D": recall it is a set of (positive ? reduced mod n ?) integers
  * method (3): a few words should be said about the default root of unity used in building the generator polynomial
* `codes.CyclicCode.bch_bound?`
  * is it possible to use `BCH_bound` to honor the authors ?
* `codes.CyclicCode.defining_set?` is very neat. For more completeness, I think it would be nice to briefly recall it depends on the choice of the primitive root (which is not shown or discussed in the examples).
* `codes.CyclicCode.dual_code()` not a docstring problem, and more a design problem. As I just tested it, the resulting code is not a member of the `CyclicCode class`.
* `codes.CyclicCode.primitive_element?` in the string "Returns the primitive element that was used as a root  the   generator polynomial over the extension field.", the words "that was used" are not very clear, since it is not mentionned by which method it has been used. For instance it should be clear from the docstring what is the result  when calling `codes.CyclicCode` using an arbritrary code.
* somehow the class inherits `C.variable_name`. Wouldn't it be a neat to use it to get the variable for the underlying polynomial ring ? 

I will go through the implementation this afternoon.

Daniel



---

archive/issue_comments_273059.json:
```json
{
    "body": "Proper test for the base ring to be finite field.\n----\nNew commits:",
    "created_at": "2016-08-26T11:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273059",
    "user": "danielaugot"
}
```

Proper test for the base ring to be finite field.
----
New commits:



---

archive/issue_comments_273060.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T13:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273060",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273061.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T13:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273061",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273062.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T13:12:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273062",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273063.json:
```json
{
    "body": "About the internals and the implementation (I)\n\n* `codes.CyclicCode`, case (3). Why do you check if primitive_element is nice ? Why do not you force it, since the user did not provide any such element in case (3)?\n\n* `find_generator_polynomial` I would be happy to have a proof that the proposed algorithm is correct.\n\n* `find_generator_polynomial` should return a monic polynomial. That would avoid doing the work in the constructor.\n\n* `parity_check_matrix` is cached in the case of cyclic codes and not for general linear codes.\n\n* `defining_set`: it would be nice to be able to give an alternate root as an argument, to see the defining set in another disguise.\n\n* In many places, we have the following unpleasant code\n\n```\n            s = 1\n            while not (q ** s - 1) % n == 0:\n                s += 1\n```\n\n   to find the degree of the extension field where lies the nth-root of unity. Sage can compute the splitting field by itself, as follows\n\n```\nsage: K.<x>=PolynomialRing(GF(2))\nsage: pol=x^31-1\nsage: F=pol.splitting_field('y')\nsage: F\nFinite Field in y of size 2^5\n```\n\n  I guess this could be used to have a more pleasant and mathematicall oriented coding style.\n\nC'est tout pour ce soir.\n\nDaniel",
    "created_at": "2016-08-26T15:45:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273063",
    "user": "danielaugot"
}
```

About the internals and the implementation (I)

* `codes.CyclicCode`, case (3). Why do you check if primitive_element is nice ? Why do not you force it, since the user did not provide any such element in case (3)?

* `find_generator_polynomial` I would be happy to have a proof that the proposed algorithm is correct.

* `find_generator_polynomial` should return a monic polynomial. That would avoid doing the work in the constructor.

* `parity_check_matrix` is cached in the case of cyclic codes and not for general linear codes.

* `defining_set`: it would be nice to be able to give an alternate root as an argument, to see the defining set in another disguise.

* In many places, we have the following unpleasant code

```
            s = 1
            while not (q ** s - 1) % n == 0:
                s += 1
```

   to find the degree of the extension field where lies the nth-root of unity. Sage can compute the splitting field by itself, as follows

```
sage: K.<x>=PolynomialRing(GF(2))
sage: pol=x^31-1
sage: F=pol.splitting_field('y')
sage: F
Finite Field in y of size 2^5
```

  I guess this could be used to have a more pleasant and mathematicall oriented coding style.

C'est tout pour ce soir.

Daniel



---

archive/issue_comments_273064.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T15:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273064",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273065.json:
```json
{
    "body": "Attachment [proof_cyclic_code.pdf](tarball://root/attachments/some-uuid/ticket20100/proof_cyclic_code.pdf) by jlavauzelle created at 2016-08-29 12:22:09\n\nA proof of the cyclic code criteria in the \"find_generator_polynomial()\" method.",
    "created_at": "2016-08-29T12:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273065",
    "user": "jlavauzelle"
}
```

Attachment [proof_cyclic_code.pdf](tarball://root/attachments/some-uuid/ticket20100/proof_cyclic_code.pdf) by jlavauzelle created at 2016-08-29 12:22:09

A proof of the cyclic code criteria in the "find_generator_polynomial()" method.



---

archive/issue_comments_273066.json:
```json
{
    "body": "Hi,\n\nI merged the latest beta (7.4.beta2). I also improved the doc according to Daniel's comments.\n\nAbout your remarks:\n- calling the method `BCH_bound` instead of `bch_bound` would not respect naming conventions;\n- I didn't made the `dual_code()` fix yet;\n- the problem with the variable name is not easy. A solution could be to internally force it to be `x` (however the code is built), but we don't want this to happen:\n\n```\nsage: R = PolynomialRing(GF(2), 'y')\nsage: y = R.gen()\nsage: g = y + 1\nsage: C = codesCyclicCode(g, 5)\nsage: C.generator_polynomial() == g\nFalse\n```\n\n- in the third construction (3), the user can provide a `primitive_element`;\n- I give a proof of my criteria in attachment;\n- I agree for the optional alternate root as an argument of `defining_set`. Not done yet;\n- concerning the use of the `splitting_field()` method, I'm worrying about its computation cost, as we may only want the extension degree. But I agree your code is more pleasant to read.\n\nStill a WIP (but reviews are welcome).\n\nJulien\n----\nNew commits:",
    "created_at": "2016-08-29T12:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273066",
    "user": "jlavauzelle"
}
```

Hi,

I merged the latest beta (7.4.beta2). I also improved the doc according to Daniel's comments.

About your remarks:
- calling the method `BCH_bound` instead of `bch_bound` would not respect naming conventions;
- I didn't made the `dual_code()` fix yet;
- the problem with the variable name is not easy. A solution could be to internally force it to be `x` (however the code is built), but we don't want this to happen:

```
sage: R = PolynomialRing(GF(2), 'y')
sage: y = R.gen()
sage: g = y + 1
sage: C = codesCyclicCode(g, 5)
sage: C.generator_polynomial() == g
False
```

- in the third construction (3), the user can provide a `primitive_element`;
- I give a proof of my criteria in attachment;
- I agree for the optional alternate root as an argument of `defining_set`. Not done yet;
- concerning the use of the `splitting_field()` method, I'm worrying about its computation cost, as we may only want the extension degree. But I agree your code is more pleasant to read.

Still a WIP (but reviews are welcome).

Julien
----
New commits:



---

archive/issue_comments_273067.json:
```json
{
    "body": "Replying to [comment:34 jlavauzelle]:\n> - concerning the use of the `splitting_field()` method, I'm worrying about its computation cost, as we may only want the extension degree. But I agree your code is more pleasant to read.\n\nIn all places where we computate `s`, we immediately construct the splitting field as well, AFAICS. So we could indeed just use Daniel's loop (otherwise you are right, Julien, that computing the degree is much much faster. But in that case the loop should be wrapped as a function call).\n\nBest,\nJohan",
    "created_at": "2016-08-29T13:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273067",
    "user": "jsrn"
}
```

Replying to [comment:34 jlavauzelle]:
> - concerning the use of the `splitting_field()` method, I'm worrying about its computation cost, as we may only want the extension degree. But I agree your code is more pleasant to read.

In all places where we computate `s`, we immediately construct the splitting field as well, AFAICS. So we could indeed just use Daniel's loop (otherwise you are right, Julien, that computing the degree is much much faster. But in that case the loop should be wrapped as a function call).

Best,
Johan



---

archive/issue_comments_273068.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-31T10:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273068",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273069.json:
```json
{
    "body": "Hi,\n\nI fixed issues in `defining_set()` and in `primitive_element()`. I also completely changed `bch_bound()` because it was not very clear and not that much efficient. I think now it's a bit faster.\n\nNow it's really open for review.\n\nJulien",
    "created_at": "2016-08-31T10:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273069",
    "user": "jlavauzelle"
}
```

Hi,

I fixed issues in `defining_set()` and in `primitive_element()`. I also completely changed `bch_bound()` because it was not very clear and not that much efficient. I think now it's a bit faster.

Now it's really open for review.

Julien



---

archive/issue_comments_273070.json:
```json
{
    "body": "Writing a BCH-bound algorithm that is compact and fast yet readable is a fun challenge :-) Here is my proposal, which is shorter than yours and to my mind more readable. I also added the small optimisation that the arithmetic step size doesn't need to be considered beyond `n/2`.\n\nOn a related note, shouldn't `bch_bound` always just output `bch_parameters`?\n\n\n```\ndef bch_bound(n, D, arithmetic=False):\n    def longest_streak(step):\n        max_len = 1\n        max_offset = 0\n        j = 0\n        while j < n:\n            h = j\n            while isD[h*step % n]:\n                h += 1\n            if h - j > max_len:\n                max_offset = j\n                max_len = h - j\n            j = h + 1\n        return (max_len, max_offset)\n\n    isD = [ 1 if d in D else 0 for d in range(n) ]\n    if not arithmetic:\n        one_len, offset = longest_streak(1)\n        return (one_len + 1, (1, offset))\n    else:\n        step, (max_len, offset) = max([ (step, longest_streak(step)) for step in range(1,n//2) ],\n                                      key=lambda (step,(step_len,_)): step_len)\n        return (max_len + 1, (step, offset))\n```\n\n\n(This is not a review: I didn't look much at the rest of the code.)",
    "created_at": "2016-08-31T11:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273070",
    "user": "jsrn"
}
```

Writing a BCH-bound algorithm that is compact and fast yet readable is a fun challenge :-) Here is my proposal, which is shorter than yours and to my mind more readable. I also added the small optimisation that the arithmetic step size doesn't need to be considered beyond `n/2`.

On a related note, shouldn't `bch_bound` always just output `bch_parameters`?


```
def bch_bound(n, D, arithmetic=False):
    def longest_streak(step):
        max_len = 1
        max_offset = 0
        j = 0
        while j < n:
            h = j
            while isD[h*step % n]:
                h += 1
            if h - j > max_len:
                max_offset = j
                max_len = h - j
            j = h + 1
        return (max_len, max_offset)

    isD = [ 1 if d in D else 0 for d in range(n) ]
    if not arithmetic:
        one_len, offset = longest_streak(1)
        return (one_len + 1, (1, offset))
    else:
        step, (max_len, offset) = max([ (step, longest_streak(step)) for step in range(1,n//2) ],
                                      key=lambda (step,(step_len,_)): step_len)
        return (max_len + 1, (step, offset))
```


(This is not a review: I didn't look much at the rest of the code.)



---

archive/issue_comments_273071.json:
```json
{
    "body": "For both implementation of the `bch_bound`, I could be annoying and set `D = range(n)` ...",
    "created_at": "2016-08-31T15:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273071",
    "user": "ylchapuy"
}
```

For both implementation of the `bch_bound`, I could be annoying and set `D = range(n)` ...



---

archive/issue_comments_273072.json:
```json
{
    "body": "Replying to [comment:39 ylchapuy]:\n> For both implementation of the `bch_bound`, I could be annoying and set `D = range(n)` ...\n\nIn which case, in `O(n^2)`, the algorithm returns n+1 as minimum distance of the corresponding code. That input doesn't make much sense from a coding point of view, since it corresponds to the zero code of length n. Which according to some definitions has minimum distance n+1.",
    "created_at": "2016-08-31T15:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273072",
    "user": "jsrn"
}
```

Replying to [comment:39 ylchapuy]:
> For both implementation of the `bch_bound`, I could be annoying and set `D = range(n)` ...

In which case, in `O(n^2)`, the algorithm returns n+1 as minimum distance of the corresponding code. That input doesn't make much sense from a coding point of view, since it corresponds to the zero code of length n. Which according to some definitions has minimum distance n+1.



---

archive/issue_comments_273073.json:
```json
{
    "body": "Hi\n\nI am a bit concerned with the terminology `primitive_element` where I think it should be `primitive_root` or `primitive_root_of_unity`.\n\nIn the finite field realm, `primitive_element` really means a generator of the  cyclic group of all invertible elements. \n\nEven wikipedia says so https://en.wikipedia.org/wiki/Primitive_element_(finite_field).\n\nOn the other side, https://en.wikipedia.org/wiki/Root_of_unity#primitive really means what you want.\n\nSo `primitive_element` here does not respect the standard finite field terminology.\n\nDaniel",
    "created_at": "2016-08-31T16:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273073",
    "user": "danielaugot"
}
```

Hi

I am a bit concerned with the terminology `primitive_element` where I think it should be `primitive_root` or `primitive_root_of_unity`.

In the finite field realm, `primitive_element` really means a generator of the  cyclic group of all invertible elements. 

Even wikipedia says so https://en.wikipedia.org/wiki/Primitive_element_(finite_field).

On the other side, https://en.wikipedia.org/wiki/Root_of_unity#primitive really means what you want.

So `primitive_element` here does not respect the standard finite field terminology.

Daniel



---

archive/issue_comments_273074.json:
```json
{
    "body": "Replying to [comment:40 jsrn]:\n> Replying to [comment:39 ylchapuy]:\n> > For both implementation of the `bch_bound`, I could be annoying and set `D = range(n)` ...\n> \n> In which case, in `O(n^2)`, the algorithm returns n+1 as minimum distance of the corresponding code. That input doesn't make much sense from a coding point of view, since it corresponds to the zero code of length n. Which according to some definitions has minimum distance n+1.\n\nYou may have to wait a bit more than `O(n^2)`: ` while table_D[i*j % n] == 1: ...` and `table_D` is all `1`\n\nFrom a coding point of view, I do agree this doesn't make sense, but is the user aware of that?",
    "created_at": "2016-08-31T16:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273074",
    "user": "ylchapuy"
}
```

Replying to [comment:40 jsrn]:
> Replying to [comment:39 ylchapuy]:
> > For both implementation of the `bch_bound`, I could be annoying and set `D = range(n)` ...
> 
> In which case, in `O(n^2)`, the algorithm returns n+1 as minimum distance of the corresponding code. That input doesn't make much sense from a coding point of view, since it corresponds to the zero code of length n. Which according to some definitions has minimum distance n+1.

You may have to wait a bit more than `O(n^2)`: ` while table_D[i*j % n] == 1: ...` and `table_D` is all `1`

From a coding point of view, I do agree this doesn't make sense, but is the user aware of that?



---

archive/issue_comments_273075.json:
```json
{
    "body": "Hi Yann\n\nthank you for looking at this ! And please be annoying : since our codes may be tortured with various operations for combining codes, it could well happen that someone ends with such a situation.\n\nConcerning the cyclic code on length `n` which are `{0}`, I think n+1 is a correct math answer for the minimum distance d. At least it gives the MDS bound k+d=n+1. \n\nSo both Yann's remark and Johan's answer are correct.\n\nBest,\n\nDaniel",
    "created_at": "2016-08-31T16:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273075",
    "user": "danielaugot"
}
```

Hi Yann

thank you for looking at this ! And please be annoying : since our codes may be tortured with various operations for combining codes, it could well happen that someone ends with such a situation.

Concerning the cyclic code on length `n` which are `{0}`, I think n+1 is a correct math answer for the minimum distance d. At least it gives the MDS bound k+d=n+1. 

So both Yann's remark and Johan's answer are correct.

Best,

Daniel



---

archive/issue_comments_273076.json:
```json
{
    "body": "Replying to [comment:42 ylchapuy]:\n> You may have to wait a bit more than `O(n^2)`: ` while table_D[i*j % n] == 1: ...` and `table_D` is all `1`\n\nHehe, yeah good point :-)",
    "created_at": "2016-09-01T07:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273076",
    "user": "jsrn"
}
```

Replying to [comment:42 ylchapuy]:
> You may have to wait a bit more than `O(n^2)`: ` while table_D[i*j % n] == 1: ...` and `table_D` is all `1`

Hehe, yeah good point :-)



---

archive/issue_comments_273077.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-01T08:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273077",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273078.json:
```json
{
    "body": "Hi,\n\nThanks for all your comments! According to them, I made some changes:\n- Johan, I picked your proposal (a way more readable, I didn't know it was possible to add optional parameters to the `max()` function, that's nice :)). I just replaced `n//2` by `n//2+1` in a loop.\n- I added some sanity-checks and fixed the problem raised by Yann (thanks!). As you said, `n+1` seems a good bound (at least) for the minimum distance of the zero code.\n- I replaced `primitive_element` by `primitive_root`.\n\nStill open for review.\n\nJulien",
    "created_at": "2016-09-01T08:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273078",
    "user": "jlavauzelle"
}
```

Hi,

Thanks for all your comments! According to them, I made some changes:
- Johan, I picked your proposal (a way more readable, I didn't know it was possible to add optional parameters to the `max()` function, that's nice :)). I just replaced `n//2` by `n//2+1` in a loop.
- I added some sanity-checks and fixed the problem raised by Yann (thanks!). As you said, `n+1` seems a good bound (at least) for the minimum distance of the zero code.
- I replaced `primitive_element` by `primitive_root`.

Still open for review.

Julien



---

archive/issue_comments_273079.json:
```json
{
    "body": "You may still come to an infinite loop if you skip the `gcd`. Try e.g. `bch_bound(6, [0,2,4], True)`. Also the `key` trick is nice but useless, just reorder the tuple to `(longest_streak(step), step)` and be happy with the lexicographic order.\n\nI might read the rest of this if I find some more time.",
    "created_at": "2016-09-01T08:48:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273079",
    "user": "ylchapuy"
}
```

You may still come to an infinite loop if you skip the `gcd`. Try e.g. `bch_bound(6, [0,2,4], True)`. Also the `key` trick is nice but useless, just reorder the tuple to `(longest_streak(step), step)` and be happy with the lexicographic order.

I might read the rest of this if I find some more time.



---

archive/issue_comments_273080.json:
```json
{
    "body": "Some remarks:\n* arguments are silently ignored if you feed `__init__` too much (e.g. give a polynomial and a code)\n* line continuations are considered bad style in Python, prefer parentheses, braces, etc (see [https://www.python.org/dev/peps/pep-0008/#id19](https://www.python.org/dev/peps/pep-0008/#id19))\n* use sorted instead of .sort() when possible\n* why do your own caching and not using ``@`cached_method` (e.g. for check_polynomial)\n* instead of `self._known_generator_matrix` you could just check `self.generator_matrix.cache is not None`",
    "created_at": "2016-09-01T12:47:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273080",
    "user": "ylchapuy"
}
```

Some remarks:
* arguments are silently ignored if you feed `__init__` too much (e.g. give a polynomial and a code)
* line continuations are considered bad style in Python, prefer parentheses, braces, etc (see [https://www.python.org/dev/peps/pep-0008/#id19](https://www.python.org/dev/peps/pep-0008/#id19))
* use sorted instead of .sort() when possible
* why do your own caching and not using ``@`cached_method` (e.g. for check_polynomial)
* instead of `self._known_generator_matrix` you could just check `self.generator_matrix.cache is not None`



---

archive/issue_comments_273081.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-02T10:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273081",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273082.json:
```json
{
    "body": "Hi Yann,\n\nThanks again for you helpful comments (especially concerning the python/sage tricks). I pushed the corresponding fixes.\n\nI also merged with the latest beta.\n\nJulien",
    "created_at": "2016-09-02T10:16:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273082",
    "user": "jlavauzelle"
}
```

Hi Yann,

Thanks again for you helpful comments (especially concerning the python/sage tricks). I pushed the corresponding fixes.

I also merged with the latest beta.

Julien



---

archive/issue_comments_273083.json:
```json
{
    "body": "So much for the 7.4beta3. develop does not compile, because linbox fails to compile on my fedora24. I can not test the ticket.",
    "created_at": "2016-09-06T12:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273083",
    "user": "danielaugot"
}
```

So much for the 7.4beta3. develop does not compile, because linbox fails to compile on my fedora24. I can not test the ticket.



---

archive/issue_comments_273084.json:
```json
{
    "body": "Hi\n\nLine 425, there is this:\n\n```\n            if primitive_root is not None:\n                if (primitive_root not in Fsplit or\n                    multiplicative_order(primitive_root) != n):\n                    raise ValueError(\"primitive_root has to be an element of multiplicative order n in the extension field used to compute the generator polynomial\")\n```\n\n\nwhere `primitive_root` has been provided by the user in case (3) of the constructor. But `Fsplit ` has been constructed line 420:\n\n```\n            while not (q ** s - 1) % n == 0:\n                s += 1\n\n            if s == 1: # splitting field is F\n                Fsplit = F\n            else: # must compute a splitting field\n                Fsplit, F_to_Fsplit = F.extension(Integer(s), map = True)\n```\n\nthis implies that the user may have provided his own, mathematically correct `primitive_root` with his own finite field, which then will not be accepted by the code on line 425, because `Fsplit` may be different from the field of user's `primitive_root` (from sage point of view)\n\nThe following example triggers the problem\n\n```\nsage: F=GF(16,'a')\nsage: K=GF(256,'X')\nsage: alpha=K.primitive_element()\nsage: C=codes.CyclicCode(length = 255, field = F, D = [1,2], primitive_root=alpha)\n```\n\nand casts the error\n\n```\nValueError: primitive_root has to be an element of multiplicative order n in the extension field used to compute the generator polynomial\n```\n\n\nIt would be better to check first for the `primitive_root`, and then build `Fsplit` according to the one given by the user and build `Fsplit` later if needed.\n\nDaniel",
    "created_at": "2016-09-16T15:56:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273084",
    "user": "danielaugot"
}
```

Hi

Line 425, there is this:

```
            if primitive_root is not None:
                if (primitive_root not in Fsplit or
                    multiplicative_order(primitive_root) != n):
                    raise ValueError("primitive_root has to be an element of multiplicative order n in the extension field used to compute the generator polynomial")
```


where `primitive_root` has been provided by the user in case (3) of the constructor. But `Fsplit ` has been constructed line 420:

```
            while not (q ** s - 1) % n == 0:
                s += 1

            if s == 1: # splitting field is F
                Fsplit = F
            else: # must compute a splitting field
                Fsplit, F_to_Fsplit = F.extension(Integer(s), map = True)
```

this implies that the user may have provided his own, mathematically correct `primitive_root` with his own finite field, which then will not be accepted by the code on line 425, because `Fsplit` may be different from the field of user's `primitive_root` (from sage point of view)

The following example triggers the problem

```
sage: F=GF(16,'a')
sage: K=GF(256,'X')
sage: alpha=K.primitive_element()
sage: C=codes.CyclicCode(length = 255, field = F, D = [1,2], primitive_root=alpha)
```

and casts the error

```
ValueError: primitive_root has to be an element of multiplicative order n in the extension field used to compute the generator polynomial
```


It would be better to check first for the `primitive_root`, and then build `Fsplit` according to the one given by the user and build `Fsplit` later if needed.

Daniel



---

archive/issue_comments_273085.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-21T08:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273085",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273086.json:
```json
{
    "body": "Hi Daniel,\n\nThanks for the comment. You're completely right, I fixed the bug and merged with the latest beta.\n\nStill open for review.\n\nJulien",
    "created_at": "2016-09-21T08:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273086",
    "user": "jlavauzelle"
}
```

Hi Daniel,

Thanks for the comment. You're completely right, I fixed the bug and merged with the latest beta.

Still open for review.

Julien



---

archive/issue_comments_273087.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-21T08:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273087",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273088.json:
```json
{
    "body": "Well, I forgot to fix doctests. Done now.",
    "created_at": "2016-09-21T08:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273088",
    "user": "jlavauzelle"
}
```

Well, I forgot to fix doctests. Done now.



---

archive/issue_comments_273089.json:
```json
{
    "body": "Hi,\n\n* futurize imports (see e.g. #20945)\n* you should avoid bare except (even if `RelativeFiniteFieldExtension(GF(5), GF(7))` fails in a strange way, which should probably be another ticket), at least check assertions with `AssertionError`\n* you should add doctests for exceptions too\n\nfinally other more cosmetic remarks:\n* `_complete_list` is always used after `.coefficients(sparse = False)`, you could go one step further with \n\n```python\ndef _to_complete_list(poly, list_len):\n    L = poly.coefficients(sparse = False)\n    return L + [poly.base_ring().zero()] * (list_len - len(L))\n```\n\n ( for `parity_check_polynomial` try `h.reverse()`)\n* regarding comment:31 , why not `Zmod(n)(q).multiplicative_order()`\n* use `root.log(alpha)` (special cased for each field) instead of `discrete_log` (generic)\n* here are some one liner you could use:\n  - `g = gcd(R(row.list()) for row in G)`\n  - `if any(vector(c[k:] + c[:k]) not in code for k in range(n)):`\n  - `H = matrix([l[-i:] + l[:-i] for i in range(n-k)])`\n  - `G = matrix([l[-i:] + l[:-i] for i in range(k)])`",
    "created_at": "2016-09-21T12:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273089",
    "user": "ylchapuy"
}
```

Hi,

* futurize imports (see e.g. #20945)
* you should avoid bare except (even if `RelativeFiniteFieldExtension(GF(5), GF(7))` fails in a strange way, which should probably be another ticket), at least check assertions with `AssertionError`
* you should add doctests for exceptions too

finally other more cosmetic remarks:
* `_complete_list` is always used after `.coefficients(sparse = False)`, you could go one step further with 

```python
def _to_complete_list(poly, list_len):
    L = poly.coefficients(sparse = False)
    return L + [poly.base_ring().zero()] * (list_len - len(L))
```

 ( for `parity_check_polynomial` try `h.reverse()`)
* regarding comment:31 , why not `Zmod(n)(q).multiplicative_order()`
* use `root.log(alpha)` (special cased for each field) instead of `discrete_log` (generic)
* here are some one liner you could use:
  - `g = gcd(R(row.list()) for row in G)`
  - `if any(vector(c[k:] + c[:k]) not in code for k in range(n)):`
  - `H = matrix([l[-i:] + l[:-i] for i in range(n-k)])`
  - `G = matrix([l[-i:] + l[:-i] for i in range(k)])`



---

archive/issue_comments_273090.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-21T13:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273090",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273091.json:
```json
{
    "body": "Hi Yann,\n\nThanks again for the helpful comments. I did the modification.\n\nJulien",
    "created_at": "2016-09-21T13:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273091",
    "user": "jlavauzelle"
}
```

Hi Yann,

Thanks again for the helpful comments. I did the modification.

Julien



---

archive/issue_comments_273092.json:
```json
{
    "body": "Hi,\n\nalmost good, here are some more remarks:\n\n* line 413, probably `ValueError as e` but what is the point of catching an exception to reraise it?\n\n* found with [flake8](https://pypi.python.org/pypi/flake8):\n\n```sh\ncyclic_code.py:60:1: F401 '.decoder.Decoder' imported but unused\ncyclic_code.py:66:1: F401 'sage.rings.polynomial.polynomial_ring.PolynomialRing_general' imported but unused\ncyclic_code.py:67:1: F401 'sage.rings.finite_rings.finite_field_constructor.GF' imported but unused\ncyclic_code.py:69:1: F401 'sage.categories.homset.Hom' imported but unused\ncyclic_code.py:70:1: F401 'sage.groups.generic.discrete_log' imported but unused\ncyclic_code.py:71:1: F401 'sage.misc.functional.multiplicative_order' imported but unused\ncyclic_code.py:103:5: F841 local variable 'x' is assigned to but never used\ncyclic_code.py:433:13: F841 local variable 'x' is assigned to but never used\ncyclic_code.py:725:9: F841 local variable 'R' is assigned to but never used\n```\n\n\nplus many [PEP8](https://www.python.org/dev/peps/pep-0008/) comments, mainly:\n* no space around `=` for keyword arguments\n* whitespace after `[` or before `]`",
    "created_at": "2016-09-22T07:34:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273092",
    "user": "ylchapuy"
}
```

Hi,

almost good, here are some more remarks:

* line 413, probably `ValueError as e` but what is the point of catching an exception to reraise it?

* found with [flake8](https://pypi.python.org/pypi/flake8):

```sh
cyclic_code.py:60:1: F401 '.decoder.Decoder' imported but unused
cyclic_code.py:66:1: F401 'sage.rings.polynomial.polynomial_ring.PolynomialRing_general' imported but unused
cyclic_code.py:67:1: F401 'sage.rings.finite_rings.finite_field_constructor.GF' imported but unused
cyclic_code.py:69:1: F401 'sage.categories.homset.Hom' imported but unused
cyclic_code.py:70:1: F401 'sage.groups.generic.discrete_log' imported but unused
cyclic_code.py:71:1: F401 'sage.misc.functional.multiplicative_order' imported but unused
cyclic_code.py:103:5: F841 local variable 'x' is assigned to but never used
cyclic_code.py:433:13: F841 local variable 'x' is assigned to but never used
cyclic_code.py:725:9: F841 local variable 'R' is assigned to but never used
```


plus many [PEP8](https://www.python.org/dev/peps/pep-0008/) comments, mainly:
* no space around `=` for keyword arguments
* whitespace after `[` or before `]`



---

archive/issue_comments_273093.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-23T12:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273093",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273094.json:
```json
{
    "body": "Hi Yann,\n\nI didn't know flake8, great tool. I improved the coding style according to it.\n\nJulien",
    "created_at": "2016-09-23T12:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273094",
    "user": "jlavauzelle"
}
```

Hi Yann,

I didn't know flake8, great tool. I improved the coding style according to it.

Julien



---

archive/issue_comments_273095.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-25T17:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273095",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273096.json:
```json
{
    "body": "Hi,\n\nI updated to the latest beta (7.4.beta6).\n\nStill open for review.\n\nJulien",
    "created_at": "2016-09-25T17:08:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273096",
    "user": "jlavauzelle"
}
```

Hi,

I updated to the latest beta (7.4.beta6).

Still open for review.

Julien



---

archive/issue_comments_273097.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd75\".",
    "created_at": "2016-09-25T17:08:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273097",
    "user": "jlavauzelle"
}
```

Changing keywords from "" to "sd75".



---

archive/issue_comments_273098.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-19T12:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273098",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273099.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-10-20T16:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273099",
    "user": "ylchapuy"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_273100.json:
```json
{
    "body": "Previous comments have been taken into account, tests pass (failures on gentoo seem unrelated), coverage for the new file is 100%, doc builds and looks OK.\n\nAll good for me.",
    "created_at": "2016-10-20T16:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273100",
    "user": "ylchapuy"
}
```

Previous comments have been taken into account, tests pass (failures on gentoo seem unrelated), coverage for the new file is 100%, doc builds and looks OK.

All good for me.



---

archive/issue_comments_273101.json:
```json
{
    "body": "Conflicts; Please wait for next beta and then fix the references:\n\n```\n[dochtml] [coding   ] /mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/coding/cyclic_code.py:docstring of sage.coding.cyclic_code:1: WARNING: citation not found: R06\n[dochtml] [coding   ] /mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/coding/cyclic_code.py:docstring of sage.coding.cyclic_code:24: WARNING: citation not found: R06\n```\n",
    "created_at": "2016-10-20T22:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273101",
    "user": "vbraun"
}
```

Conflicts; Please wait for next beta and then fix the references:

```
[dochtml] [coding   ] /mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/coding/cyclic_code.py:docstring of sage.coding.cyclic_code:1: WARNING: citation not found: R06
[dochtml] [coding   ] /mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/coding/cyclic_code.py:docstring of sage.coding.cyclic_code:24: WARNING: citation not found: R06
```




---

archive/issue_comments_273102.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-10-20T22:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273102",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_273103.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-22T21:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273103",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273104.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-23T08:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273104",
    "user": "jlavauzelle"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_273105.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-10T14:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273105",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273106.json:
```json
{
    "body": "Hi,\n\nI updated to the latest beta (7.5.beta2) and fixed conflicts.\n\nFollowing #21691, I also produced shorter printing for cyclic codes (basically, I removed the generator polynomial which can have a quite long printing).\n\nBest,\n\nJulien",
    "created_at": "2016-11-10T14:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273106",
    "user": "jlavauzelle"
}
```

Hi,

I updated to the latest beta (7.5.beta2) and fixed conflicts.

Following #21691, I also produced shorter printing for cyclic codes (basically, I removed the generator polynomial which can have a quite long printing).

Best,

Julien



---

archive/issue_comments_273107.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-03T09:14:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273107",
    "user": "danielaugot"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_273108.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-18T20:39:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19863#issuecomment-273108",
    "user": "vbraun"
}
```

Resolution: fixed
