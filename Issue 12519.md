# Issue 12519: Create a stopgap warning

archive/issues_012519.json:
```json
{
    "body": "Assignee: jason\n\nSometimes issues can produce mathematically incorrect results, and we should warn users of the problem.  If the issue is fixed promptly then nothing more needs to be done, but sometimes tickets remain unresolved for months or years (c.f. #11358).  This ticket adds a function that makes it easy to create a second ticket warning users of the problem while it's being resolved.\n\nOn trac, this functionality will be supported by the Stopgaps field.  Create a new ticket that uses the `stopgap` function and include a link to it in the Stopgaps field in the original ticket.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12691\n\n",
    "created_at": "2012-03-18T23:37:52Z",
    "labels": [
        "misc",
        "major",
        "enhancement"
    ],
    "title": "Create a stopgap warning",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12519",
    "user": "roed"
}
```
Assignee: jason

Sometimes issues can produce mathematically incorrect results, and we should warn users of the problem.  If the issue is fixed promptly then nothing more needs to be done, but sometimes tickets remain unresolved for months or years (c.f. #11358).  This ticket adds a function that makes it easy to create a second ticket warning users of the problem while it's being resolved.

On trac, this functionality will be supported by the Stopgaps field.  Create a new ticket that uses the `stopgap` function and include a link to it in the Stopgaps field in the original ticket.

Issue created by migration from https://trac.sagemath.org/ticket/12691





---

archive/issue_comments_148292.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-18T23:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148292",
    "user": "roed"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_148293.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-03-19T00:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148293",
    "user": "roed"
}
```

Attachment



---

archive/issue_comments_148294.json:
```json
{
    "body": "Looks good.",
    "created_at": "2012-03-19T00:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148294",
    "user": "jen"
}
```

Looks good.



---

archive/issue_comments_148295.json:
```json
{
    "body": "Changing keywords from \"\" to \"rd2\".",
    "created_at": "2012-03-19T00:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148295",
    "user": "jen"
}
```

Changing keywords from "" to "rd2".



---

archive/issue_comments_148296.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-19T00:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148296",
    "user": "jen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_148297.json:
```json
{
    "body": "See #12702 for a followup.",
    "created_at": "2012-03-19T18:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148297",
    "user": "jhpalmieri"
}
```

See #12702 for a followup.



---

archive/issue_comments_148298.json:
```json
{
    "body": "I think this code is too slow.  We want it to be highly optimized so as to not have much of a performance penalty for introducing a stopgap.  I'm going to attach a different patch that implements stopgaps, and is an *order of magnitude* faster than this code:\n\n```\nsage: timeit(\"sage.misc.misc.stopgap('abc', 123)\", number=10^5)\n100000 loops, best of 3: 2.49 \u00b5s per loop\nsage: import sage.misc.stopgap\nsage: timeit(\"sage.misc.stopgap.stopgap('abc', 123)\", number=10^5)\n100000 loops, best of 3: 388 ns per loop\nsage: 2.49 / .388\n6.41752577319588\n```\n",
    "created_at": "2012-03-19T22:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148298",
    "user": "was"
}
```

I think this code is too slow.  We want it to be highly optimized so as to not have much of a performance penalty for introducing a stopgap.  I'm going to attach a different patch that implements stopgaps, and is an *order of magnitude* faster than this code:

```
sage: timeit("sage.misc.misc.stopgap('abc', 123)", number=10^5)
100000 loops, best of 3: 2.49 Âµs per loop
sage: import sage.misc.stopgap
sage: timeit("sage.misc.stopgap.stopgap('abc', 123)", number=10^5)
100000 loops, best of 3: 388 ns per loop
sage: 2.49 / .388
6.41752577319588
```




---

archive/issue_comments_148299.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-03-19T22:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148299",
    "user": "was"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_148300.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-19T22:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148300",
    "user": "was"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_148301.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-20T00:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148301",
    "user": "ohanar"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_148302.json:
```json
{
    "body": "Attachment\n\neverything looks good to me and works how I expect it to, positive review!",
    "created_at": "2012-03-20T00:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148302",
    "user": "ohanar"
}
```

Attachment

everything looks good to me and works how I expect it to, positive review!



---

archive/issue_comments_148303.json:
```json
{
    "body": "Just clarification; this doesn't \n\n```\ncreate a second ticket warning users of the problem\n```\n\nright, or even 'make it easy' to do so?  It seems to function more like deprecations; it doesn't *do* anything, but warns users that something might be wrong.  Let me know if I'm wrong about this, otherwise I hope to use it in the future.\n\nNice addition.",
    "created_at": "2012-03-20T17:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148303",
    "user": "kcrisman"
}
```

Just clarification; this doesn't 

```
create a second ticket warning users of the problem
```

right, or even 'make it easy' to do so?  It seems to function more like deprecations; it doesn't *do* anything, but warns users that something might be wrong.  Let me know if I'm wrong about this, otherwise I hope to use it in the future.

Nice addition.



---

archive/issue_comments_148304.json:
```json
{
    "body": "kcrisman: you're right, it doesn't create a ticket or make it easy to create a ticket, but it makes it easy to print a nice warning, like a deprecation.  Does the documentation at #12702 make it clearer?",
    "created_at": "2012-03-20T17:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148304",
    "user": "jhpalmieri"
}
```

kcrisman: you're right, it doesn't create a ticket or make it easy to create a ticket, but it makes it easy to print a nice warning, like a deprecation.  Does the documentation at #12702 make it clearer?



---

archive/issue_comments_148305.json:
```json
{
    "body": "Yeah, that's great.   Wish I could be helping with this, but looks like RD2 is going very well.",
    "created_at": "2012-03-20T18:37:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148305",
    "user": "kcrisman"
}
```

Yeah, that's great.   Wish I could be helping with this, but looks like RD2 is going very well.



---

archive/issue_comments_148306.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-23T15:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148306",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_148307.json:
```json
{
    "body": "Why not display the stopgap warnings in doctests?  I would prefer documentation to show the stopgap warnings.  It also would allow to see which parts of Sage are affected by stopgapped tickets.\n\nIt would also prevent sillyness like\n\n```\nsage: 1+1\n********************************************************************************\nAddition of integers can sometimes return wrong results.\nThis issue is being tracked at http://trac.sagemath.org/sage_trac/ticket/123456.\n********************************************************************************\n2\n```\n",
    "created_at": "2012-04-03T15:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12519#issuecomment-148307",
    "user": "jdemeyer"
}
```

Why not display the stopgap warnings in doctests?  I would prefer documentation to show the stopgap warnings.  It also would allow to see which parts of Sage are affected by stopgapped tickets.

It would also prevent sillyness like

```
sage: 1+1
********************************************************************************
Addition of integers can sometimes return wrong results.
This issue is being tracked at http://trac.sagemath.org/sage_trac/ticket/123456.
********************************************************************************
2
```

