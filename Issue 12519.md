# Issue 12519: Create a stopgap warning

Issue created by migration from Trac.

Original creator: roed

Original creation time: 2012-03-18 23:37:52

Assignee: jason

Sometimes issues can produce mathematically incorrect results, and we should warn users of the problem.  If the issue is fixed promptly then nothing more needs to be done, but sometimes tickets remain unresolved for months or years (c.f. #11358).  This ticket adds a function that makes it easy to create a second ticket warning users of the problem while it's being resolved.

On trac, this functionality will be supported by the Stopgaps field.  Create a new ticket that uses the `stopgap` function and include a link to it in the Stopgaps field in the original ticket.


---

Comment by roed created at 2012-03-18 23:39:35

Changing status from new to needs_review.


---

Attachment


---

Comment by jen created at 2012-03-19 00:54:21

Looks good.


---

Comment by jen created at 2012-03-19 00:54:21

Changing keywords from "" to "rd2".


---

Comment by jen created at 2012-03-19 00:54:21

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2012-03-19 18:56:03

See #12702 for a followup.


---

Comment by was created at 2012-03-19 22:20:17

I think this code is too slow.  We want it to be highly optimized so as to not have much of a performance penalty for introducing a stopgap.  I'm going to attach a different patch that implements stopgaps, and is an *order of magnitude* faster than this code:

```
sage: timeit("sage.misc.misc.stopgap('abc', 123)", number=10^5)
100000 loops, best of 3: 2.49 Âµs per loop
sage: import sage.misc.stopgap
sage: timeit("sage.misc.stopgap.stopgap('abc', 123)", number=10^5)
100000 loops, best of 3: 388 ns per loop
sage: 2.49 / .388
6.41752577319588
```



---

Comment by was created at 2012-03-19 22:21:55

Changing status from positive_review to needs_work.


---

Comment by was created at 2012-03-19 22:22:03

Changing status from needs_work to needs_review.


---

Comment by ohanar created at 2012-03-20 00:41:14

Changing status from needs_review to positive_review.


---

Attachment

everything looks good to me and works how I expect it to, positive review!


---

Comment by kcrisman created at 2012-03-20 17:42:41

Just clarification; this doesn't 

```
create a second ticket warning users of the problem
```

right, or even 'make it easy' to do so?  It seems to function more like deprecations; it doesn't _do_ anything, but warns users that something might be wrong.  Let me know if I'm wrong about this, otherwise I hope to use it in the future.

Nice addition.


---

Comment by jhpalmieri created at 2012-03-20 17:58:11

kcrisman: you're right, it doesn't create a ticket or make it easy to create a ticket, but it makes it easy to print a nice warning, like a deprecation.  Does the documentation at #12702 make it clearer?


---

Comment by kcrisman created at 2012-03-20 18:37:03

Yeah, that's great.   Wish I could be helping with this, but looks like RD2 is going very well.


---

Comment by jdemeyer created at 2012-03-23 15:23:41

Resolution: fixed


---

Comment by jdemeyer created at 2012-04-03 15:09:24

Why not display the stopgap warnings in doctests?  I would prefer documentation to show the stopgap warnings.  It also would allow to see which parts of Sage are affected by stopgapped tickets.

It would also prevent sillyness like

```
sage: 1+1
********************************************************************************
Addition of integers can sometimes return wrong results.
This issue is being tracked at http://trac.sagemath.org/sage_trac/ticket/123456.
********************************************************************************
2
```

