# Issue 16100: key parameter of cached_method is not correctly propagated

Issue created by migration from https://trac.sagemath.org/ticket/16337

Original creator: saraedum

Original creation time: 2014-05-12 16:59:00

In the following example, the last line is incorrect:

```
sage: class Foo:
....:     @cached_method(key=lambda self,y: y+1)
....:     def f(self, y): 
....:         return y - 1
sage: class Bar:
....:     f = Foo.f   

sage: b = Bar()
sage: b.f(0)
-1
sage: b.f.cache
{((0,), ()): -1}
```


It appears that I forgot to propagate the `key` parameter in some places while working on #15657.


---

Comment by saraedum created at 2014-05-12 17:21:20

Changing status from new to needs_review.


---

Comment by SimonKing created at 2014-05-13 11:10:13

The changes look good to me (and, by the way, I have not been aware that we now have a key parameter for cached methods). So, it will be a positive review, provided that the tests pass (which I am running now).
----
New commits:


---

Comment by SimonKing created at 2014-05-13 13:59:43

Tests pass, hence, positive review as announced!


---

Comment by SimonKing created at 2014-05-13 13:59:43

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-05-15 17:18:41

Resolution: fixed
