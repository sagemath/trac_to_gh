# Issue 12668: update M4RI to newest upstream release

archive/issues_012668.json:
```json
{
    "body": "Assignee: tbd\n\nAs the title says.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12840\n\n",
    "created_at": "2012-04-13T19:33:46Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "title": "update M4RI to newest upstream release",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12668",
    "user": "malb"
}
```
Assignee: tbd

As the title says.

Issue created by migration from https://trac.sagemath.org/ticket/12840





---

archive/issue_comments_151185.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-04-13T23:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151185",
    "user": "malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_151186.json:
```json
{
    "body": "Attachment\n\nUpdated the patch because I forgot to raise a `ZeroDivisionError` in `__invert__`. Fixed now.",
    "created_at": "2012-04-14T10:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151186",
    "user": "malb"
}
```

Attachment

Updated the patch because I forgot to raise a `ZeroDivisionError` in `__invert__`. Fixed now.



---

archive/issue_comments_151187.json:
```json
{
    "body": "After applying the patch and the spkg and rebuilding the polybori spkg, sage -br failed with\n\n```\ngcc -pthread -shared -L/mnt/local/king/SAGE/stable/sage-5.0.beta13/local/lib build/temp.linux-x86_64-2.7/sage/matrix/matrix_integer_dense.o -L/mnt/local/king/SAGE/stable/sage-5.0.beta13/local/lib -L/mnt/local/king/SAGE/stable/sage-5.0.beta13/local/lib -lcsage -liml -lpari -lm -lgmp -lcblas -latlas -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/matrix/matrix_integer_dense.so\nerror: command 'gcc' failed with exit status 1\nError installing modified sage library code.\n```\n\nNo error message, I am afraid.",
    "created_at": "2012-05-03T14:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151187",
    "user": "SimonKing"
}
```

After applying the patch and the spkg and rebuilding the polybori spkg, sage -br failed with

```
gcc -pthread -shared -L/mnt/local/king/SAGE/stable/sage-5.0.beta13/local/lib build/temp.linux-x86_64-2.7/sage/matrix/matrix_integer_dense.o -L/mnt/local/king/SAGE/stable/sage-5.0.beta13/local/lib -L/mnt/local/king/SAGE/stable/sage-5.0.beta13/local/lib -lcsage -liml -lpari -lm -lgmp -lcblas -latlas -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/matrix/matrix_integer_dense.so
error: command 'gcc' failed with exit status 1
Error installing modified sage library code.
```

No error message, I am afraid.



---

archive/issue_comments_151188.json:
```json
{
    "body": "PS: That was with sage-5.0.beta13 plus a lot of patches, but none of them changing matrices.",
    "created_at": "2012-05-03T14:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151188",
    "user": "SimonKing"
}
```

PS: That was with sage-5.0.beta13 plus a lot of patches, but none of them changing matrices.



---

archive/issue_comments_151189.json:
```json
{
    "body": "And repeating sage -br, I finally got a proper error:\n\n```\nIn file included from /mnt/local/king/SAGE/stable/sage-5.0.beta13/local/include/m4rie/m4rie.h:56,\n                 from sage/matrix/matrix_mod2e_dense.cpp:240:\n/mnt/local/king/SAGE/stable/sage-5.0.beta13/local/include/m4rie/permutation.h:30:30: error: m4ri/permutation.h: Datei oder Verzeichnis nicht gefunden\nerror: command 'gcc' failed with exit status 1\nError installing modified sage library code.\n```\n",
    "created_at": "2012-05-03T14:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151189",
    "user": "SimonKing"
}
```

And repeating sage -br, I finally got a proper error:

```
In file included from /mnt/local/king/SAGE/stable/sage-5.0.beta13/local/include/m4rie/m4rie.h:56,
                 from sage/matrix/matrix_mod2e_dense.cpp:240:
/mnt/local/king/SAGE/stable/sage-5.0.beta13/local/include/m4rie/permutation.h:30:30: error: m4ri/permutation.h: Datei oder Verzeichnis nicht gefunden
error: command 'gcc' failed with exit status 1
Error installing modified sage library code.
```




---

archive/issue_comments_151190.json:
```json
{
    "body": "PS: permutation.h seems not to be present in the sources.",
    "created_at": "2012-05-03T14:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151190",
    "user": "SimonKing"
}
```

PS: permutation.h seems not to be present in the sources.



---

archive/issue_comments_151191.json:
```json
{
    "body": "PS: The same error occurs when trying to rebuild libm4rie spkg: M4RIE expects permutation.h",
    "created_at": "2012-05-03T14:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151191",
    "user": "SimonKing"
}
```

PS: The same error occurs when trying to rebuild libm4rie spkg: M4RIE expects permutation.h



---

archive/issue_comments_151192.json:
```json
{
    "body": "Yes, #12841 is a dependency of this ticket.",
    "created_at": "2012-05-03T14:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151192",
    "user": "malb"
}
```

Yes, #12841 is a dependency of this ticket.



---

archive/issue_comments_151193.json:
```json
{
    "body": "Ouch. I missed #12841. Sorry.",
    "created_at": "2012-05-03T15:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151193",
    "user": "SimonKing"
}
```

Ouch. I missed #12841. Sorry.



---

archive/issue_comments_151194.json:
```json
{
    "body": "Am I right that both spkgs have to be installed, but #12840 goes before #12841?",
    "created_at": "2012-05-03T15:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151194",
    "user": "SimonKing"
}
```

Am I right that both spkgs have to be installed, but #12840 goes before #12841?



---

archive/issue_comments_151195.json:
```json
{
    "body": "Yippie! Applying the patches from #12840 and #12841, installing the new m4ri spkg from here, then installing the new m4rie spkg from #12841 (why is it on a different ticket? Can one live without the other?), re-installing polybori and finally sage -br, Sage starts!",
    "created_at": "2012-05-03T16:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151195",
    "user": "SimonKing"
}
```

Yippie! Applying the patches from #12840 and #12841, installing the new m4ri spkg from here, then installing the new m4rie spkg from #12841 (why is it on a different ticket? Can one live without the other?), re-installing polybori and finally sage -br, Sage starts!



---

archive/issue_comments_151196.json:
```json
{
    "body": "Replying to [comment:16 SimonKing]:\n> Yippie! Applying the patches from #12840 and #12841, installing the new m4ri spkg from here, then installing the new m4rie spkg from #12841 (why is it on a different ticket? Can one live without the other?), \n\nNo, you're right, they are co-dependent.",
    "created_at": "2012-05-03T16:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151196",
    "user": "malb"
}
```

Replying to [comment:16 SimonKing]:
> Yippie! Applying the patches from #12840 and #12841, installing the new m4ri spkg from here, then installing the new m4rie spkg from #12841 (why is it on a different ticket? Can one live without the other?), 

No, you're right, they are co-dependent.



---

archive/issue_comments_151197.json:
```json
{
    "body": "First of all: make ptestlong works with the two new spkgs (even though I have a few other patches applied...).\n\nHere is a small timing.\n\nVanilla Sage-5.0.rc0:\n\n```\nsage: K = GF(2)\nsage: %time A = random_matrix(K,20000,20000)\nCPU times: user 0.29 s, sys: 0.02 s, total: 0.31 s\nWall time: 0.31 s\nsage: %time B = random_matrix(K,20000,20000)\nCPU times: user 0.23 s, sys: 0.03 s, total: 0.26 s\nWall time: 0.27 s\nsage: %time (A*B).rank()\nCPU times: user 11.70 s, sys: 0.05 s, total: 11.75 s\nWall time: 11.81 s\n19937\n```\n\n\nSage-5.0.beta13 with the new spkgs (and some other patches that shouldn't affect the timing for matrix multiplication):\n\n```\nsage: K = GF(2)\nsage: %time A = random_matrix(K,20000,20000)\nCPU times: user 0.30 s, sys: 0.03 s, total: 0.33 s\nWall time: 0.33 s\nsage: %time B = random_matrix(K,20000,20000)\nCPU times: user 0.32 s, sys: 0.01 s, total: 0.33 s\nWall time: 0.33 s\nsage: %time (A*B).rank()\nCPU times: user 11.70 s, sys: 0.10 s, total: 11.80 s\nWall time: 11.83 s\n19937\n```\n\nWell, at least there is no slow-down...\n\nDo you claim that the new version of M4RI is faster? You do claim a speed-up for M4RIE, on #12841.",
    "created_at": "2012-05-03T19:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151197",
    "user": "SimonKing"
}
```

First of all: make ptestlong works with the two new spkgs (even though I have a few other patches applied...).

Here is a small timing.

Vanilla Sage-5.0.rc0:

```
sage: K = GF(2)
sage: %time A = random_matrix(K,20000,20000)
CPU times: user 0.29 s, sys: 0.02 s, total: 0.31 s
Wall time: 0.31 s
sage: %time B = random_matrix(K,20000,20000)
CPU times: user 0.23 s, sys: 0.03 s, total: 0.26 s
Wall time: 0.27 s
sage: %time (A*B).rank()
CPU times: user 11.70 s, sys: 0.05 s, total: 11.75 s
Wall time: 11.81 s
19937
```


Sage-5.0.beta13 with the new spkgs (and some other patches that shouldn't affect the timing for matrix multiplication):

```
sage: K = GF(2)
sage: %time A = random_matrix(K,20000,20000)
CPU times: user 0.30 s, sys: 0.03 s, total: 0.33 s
Wall time: 0.33 s
sage: %time B = random_matrix(K,20000,20000)
CPU times: user 0.32 s, sys: 0.01 s, total: 0.33 s
Wall time: 0.33 s
sage: %time (A*B).rank()
CPU times: user 11.70 s, sys: 0.10 s, total: 11.80 s
Wall time: 11.83 s
19937
```

Well, at least there is no slow-down...

Do you claim that the new version of M4RI is faster? You do claim a speed-up for M4RIE, on #12841.



---

archive/issue_comments_151198.json:
```json
{
    "body": "Replying to [comment:18 SimonKing]:\n> Do you claim that the new version of M4RI is faster? You do claim a speed-up for M4RIE, on #12841.\n\nNo, M4RI shouldn't have changed (at least the stuff, only bugfixes & refactoring. \n\nThat said, there's a new function for inverting upper triangular matrices which is much faster than the generic method, but it's not exposed yet. I need to implement the same for lower triangular matrices, then we can speed up inversions in general.\n\nFurthermore, M4RI ships its own PNG reader/writer now which is much faster than what we have in Sage and uses much less memory. Again, it's not used yet. This patch just gets the new version in.",
    "created_at": "2012-05-03T20:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151198",
    "user": "malb"
}
```

Replying to [comment:18 SimonKing]:
> Do you claim that the new version of M4RI is faster? You do claim a speed-up for M4RIE, on #12841.

No, M4RI shouldn't have changed (at least the stuff, only bugfixes & refactoring. 

That said, there's a new function for inverting upper triangular matrices which is much faster than the generic method, but it's not exposed yet. I need to implement the same for lower triangular matrices, then we can speed up inversions in general.

Furthermore, M4RI ships its own PNG reader/writer now which is much faster than what we have in Sage and uses much less memory. Again, it's not used yet. This patch just gets the new version in.



---

archive/issue_comments_151199.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-04T11:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151199",
    "user": "SimonKing"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_151200.json:
```json
{
    "body": "Since make ptestlong passes and the hg repository in the package is fine and SPKG.txt is up to date, I think I can give a positive review. However, I only tested on one platform. So, if the release manager believes that this is not enough, then please speak up!",
    "created_at": "2012-05-04T11:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151200",
    "user": "SimonKing"
}
```

Since make ptestlong passes and the hg repository in the package is fine and SPKG.txt is up to date, I think I can give a positive review. However, I only tested on one platform. So, if the release manager believes that this is not enough, then please speak up!



---

archive/issue_comments_151201.json:
```json
{
    "body": "This fails to install on the Skynet machine \"eno\" (Fedora 16 x86_64):\n\n```\n/bin/sh ./libtool --tag=CC   --mode=link gcc -std=gnu99 -mmmx -msse -msse2 -msse3   -g -fPIC -Wall -pedantic -O2 -release 0.0.20111203 -no\n-undefined  -o libm4ri.la -rpath /home/buildbot/build/sage/eno-1/eno_full/build/sage-5.1.beta1/local/lib brilliantrussian.lo misc.lo mzd.l\no graycode.lo strassen.lo mzp.lo triangular.lo triangular_russian.lo ple.lo ple_russian.lo solve.lo echelonform.lo mmc.lo debug_dump.lo io\n.lo -lm -lpng\nlibtool: link: gcc -shared  -fPIC -DPIC  .libs/brilliantrussian.o .libs/misc.o .libs/mzd.o .libs/graycode.o .libs/strassen.o .libs/mzp.o .\nlibs/triangular.o .libs/triangular_russian.o .libs/ple.o .libs/ple_russian.o .libs/solve.o .libs/echelonform.o .libs/mmc.o .libs/debug_dum\np.o .libs/io.o   -lm -lpng  -mmmx -msse -msse2 -msse3 -O2   -Wl,-soname -Wl,libm4ri-0.0.20111203.so -o .libs/libm4ri-0.0.20111203.so\n/usr/bin/ld: cannot find -lpng\ncollect2: ld returned 1 exit status\nmake[1]: *** [libm4ri.la] Error 1\nmake[1]: Leaving directory `/home/buildbot/build/sage/eno-1/eno_full/build/sage-5.1.beta1/spkg/build/libm4ri-20120415/src'\nmake: *** [all] Error 2\nError building libm4ri\n```\n\n\n\n```\n$ ls -l local/lib/libpng*\n36k -rw-r--r-- 1 buildbot sage 828k May  8 06:16 local/lib/libpng12.a\n4.1k -rwxr-xr-x 1 buildbot sage 1.1k May  8 06:16 local/lib/libpng12.la*\n   0 lrwxrwxrwx 1 buildbot sage   18 May  8 06:16 local/lib/libpng12.so -> libpng12.so.0.35.0*\n   0 lrwxrwxrwx 1 buildbot sage   18 May  8 06:16 local/lib/libpng12.so.0 -> libpng12.so.0.35.0*\n467k -rwxr-xr-x 1 buildbot sage 460k May  8 06:16 local/lib/libpng12.so.0.35.0*\n\n$ ls -l /lib*/libpng* /usr/lib*/libpng*\nls: cannot access /lib*/libpng*: No such file or directory\n   0 lrwxrwxrwx 1 root root   16 May  2 11:53 /usr/lib64/libpng.so.3 -> libpng.so.3.49.0*\n173k -rwxr-xr-x 1 root root 172k Apr  7 14:33 /usr/lib64/libpng.so.3.49.0*\n   0 lrwxrwxrwx 1 root root   18 May  2 11:53 /usr/lib64/libpng12.so.0 -> libpng12.so.0.49.0*\n164k -rwxr-xr-x 1 root root 162k Apr  7 14:33 /usr/lib64/libpng12.so.0.49.0*\n```\n\n\nNote that there is no file `/usr/lib64/libpng.so`, so obviously there cannot be proper PNG support on this machine.  I consider this to be an upstream (not Sage) error.\n\n\n```\n$ grep -i png spkg/logs/libm4ri-20120415.log\nchecking whether to build with PNG support... yes\nchecking for PNG... no\nchecking for PNG... yes\n/bin/sh ./libtool --tag=CC   --mode=link gcc -std=gnu99 -mmmx -msse -msse2 -msse3   -g -fPIC -Wall -pedantic -O2 -release 0.0.20111203 -no-undefined  -o libm4ri.la -rpath /home/buildbot/build/sage/eno-1/eno_full/build/sage-5.1.beta1/local/lib brilliantrussian.lo misc.lo mzd.lo graycode.lo strassen.lo mzp.lo triangular.lo triangular_russian.lo ple.lo ple_russian.lo solve.lo echelonform.lo mmc.lo debug_dump.lo io.lo -lm -lpng\nlibtool: link: gcc -shared  -fPIC -DPIC  .libs/brilliantrussian.o .libs/misc.o .libs/mzd.o .libs/graycode.o .libs/strassen.o .libs/mzp.o .libs/triangular.o .libs/triangular_russian.o .libs/ple.o .libs/ple_russian.o .libs/solve.o .libs/echelonform.o .libs/mmc.o .libs/debug_dump.o .libs/io.o   -lm -lpng  -mmmx -msse -msse2 -msse3 -O2   -Wl,-soname -Wl,libm4ri-0.0.20111203.so -o .libs/libm4ri-0.0.20111203.so\n/usr/bin/ld: cannot find -lpng\n```\n",
    "created_at": "2012-05-08T12:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151201",
    "user": "jdemeyer"
}
```

This fails to install on the Skynet machine "eno" (Fedora 16 x86_64):

```
/bin/sh ./libtool --tag=CC   --mode=link gcc -std=gnu99 -mmmx -msse -msse2 -msse3   -g -fPIC -Wall -pedantic -O2 -release 0.0.20111203 -no
-undefined  -o libm4ri.la -rpath /home/buildbot/build/sage/eno-1/eno_full/build/sage-5.1.beta1/local/lib brilliantrussian.lo misc.lo mzd.l
o graycode.lo strassen.lo mzp.lo triangular.lo triangular_russian.lo ple.lo ple_russian.lo solve.lo echelonform.lo mmc.lo debug_dump.lo io
.lo -lm -lpng
libtool: link: gcc -shared  -fPIC -DPIC  .libs/brilliantrussian.o .libs/misc.o .libs/mzd.o .libs/graycode.o .libs/strassen.o .libs/mzp.o .
libs/triangular.o .libs/triangular_russian.o .libs/ple.o .libs/ple_russian.o .libs/solve.o .libs/echelonform.o .libs/mmc.o .libs/debug_dum
p.o .libs/io.o   -lm -lpng  -mmmx -msse -msse2 -msse3 -O2   -Wl,-soname -Wl,libm4ri-0.0.20111203.so -o .libs/libm4ri-0.0.20111203.so
/usr/bin/ld: cannot find -lpng
collect2: ld returned 1 exit status
make[1]: *** [libm4ri.la] Error 1
make[1]: Leaving directory `/home/buildbot/build/sage/eno-1/eno_full/build/sage-5.1.beta1/spkg/build/libm4ri-20120415/src'
make: *** [all] Error 2
Error building libm4ri
```



```
$ ls -l local/lib/libpng*
36k -rw-r--r-- 1 buildbot sage 828k May  8 06:16 local/lib/libpng12.a
4.1k -rwxr-xr-x 1 buildbot sage 1.1k May  8 06:16 local/lib/libpng12.la*
   0 lrwxrwxrwx 1 buildbot sage   18 May  8 06:16 local/lib/libpng12.so -> libpng12.so.0.35.0*
   0 lrwxrwxrwx 1 buildbot sage   18 May  8 06:16 local/lib/libpng12.so.0 -> libpng12.so.0.35.0*
467k -rwxr-xr-x 1 buildbot sage 460k May  8 06:16 local/lib/libpng12.so.0.35.0*

$ ls -l /lib*/libpng* /usr/lib*/libpng*
ls: cannot access /lib*/libpng*: No such file or directory
   0 lrwxrwxrwx 1 root root   16 May  2 11:53 /usr/lib64/libpng.so.3 -> libpng.so.3.49.0*
173k -rwxr-xr-x 1 root root 172k Apr  7 14:33 /usr/lib64/libpng.so.3.49.0*
   0 lrwxrwxrwx 1 root root   18 May  2 11:53 /usr/lib64/libpng12.so.0 -> libpng12.so.0.49.0*
164k -rwxr-xr-x 1 root root 162k Apr  7 14:33 /usr/lib64/libpng12.so.0.49.0*
```


Note that there is no file `/usr/lib64/libpng.so`, so obviously there cannot be proper PNG support on this machine.  I consider this to be an upstream (not Sage) error.


```
$ grep -i png spkg/logs/libm4ri-20120415.log
checking whether to build with PNG support... yes
checking for PNG... no
checking for PNG... yes
/bin/sh ./libtool --tag=CC   --mode=link gcc -std=gnu99 -mmmx -msse -msse2 -msse3   -g -fPIC -Wall -pedantic -O2 -release 0.0.20111203 -no-undefined  -o libm4ri.la -rpath /home/buildbot/build/sage/eno-1/eno_full/build/sage-5.1.beta1/local/lib brilliantrussian.lo misc.lo mzd.lo graycode.lo strassen.lo mzp.lo triangular.lo triangular_russian.lo ple.lo ple_russian.lo solve.lo echelonform.lo mmc.lo debug_dump.lo io.lo -lm -lpng
libtool: link: gcc -shared  -fPIC -DPIC  .libs/brilliantrussian.o .libs/misc.o .libs/mzd.o .libs/graycode.o .libs/strassen.o .libs/mzp.o .libs/triangular.o .libs/triangular_russian.o .libs/ple.o .libs/ple_russian.o .libs/solve.o .libs/echelonform.o .libs/mmc.o .libs/debug_dump.o .libs/io.o   -lm -lpng  -mmmx -msse -msse2 -msse3 -O2   -Wl,-soname -Wl,libm4ri-0.0.20111203.so -o .libs/libm4ri-0.0.20111203.so
/usr/bin/ld: cannot find -lpng
```




---

archive/issue_comments_151202.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-05-08T12:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151202",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_151203.json:
```json
{
    "body": "Why are you using `PKG_CHECK_MODULES()` to check for PNG support in `configure.ac`?  Why not `AC_CHECK_LIB()` or `AC_SEARCH_LIBS()`?",
    "created_at": "2012-05-08T12:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151203",
    "user": "jdemeyer"
}
```

Why are you using `PKG_CHECK_MODULES()` to check for PNG support in `configure.ac`?  Why not `AC_CHECK_LIB()` or `AC_SEARCH_LIBS()`?



---

archive/issue_comments_151204.json:
```json
{
    "body": "Exactly the same problem with `-lpng` happens on Skynet \"cleo\" (RHEL 5.3 ia64)",
    "created_at": "2012-05-08T13:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151204",
    "user": "jdemeyer"
}
```

Exactly the same problem with `-lpng` happens on Skynet "cleo" (RHEL 5.3 ia64)



---

archive/issue_comments_151205.json:
```json
{
    "body": "Replying to [comment:24 jdemeyer]:\n> Why are you using `PKG_CHECK_MODULES()` to check for PNG support in `configure.ac`?  Why not `AC_CHECK_LIB()` or `AC_SEARCH_LIBS()`?\n\nWe are doing both. We try `pkg-config` first and if that fails we fall back to `AC_CHECK_LIB`. In your log above, `PKG_CHECK_MODULES()` fails to find libpng and `AC_CHECK_LIB()` finds it.",
    "created_at": "2012-05-08T20:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151205",
    "user": "malb"
}
```

Replying to [comment:24 jdemeyer]:
> Why are you using `PKG_CHECK_MODULES()` to check for PNG support in `configure.ac`?  Why not `AC_CHECK_LIB()` or `AC_SEARCH_LIBS()`?

We are doing both. We try `pkg-config` first and if that fails we fall back to `AC_CHECK_LIB`. In your log above, `PKG_CHECK_MODULES()` fails to find libpng and `AC_CHECK_LIB()` finds it.



---

archive/issue_comments_151206.json:
```json
{
    "body": "Note that stand-alone M4RI builds fine on eno.\n\n\n```\nchecking pkg-config is at least version 0.9.0... yes\nchecking for PNG... no\nchecking for PNG... no\nchecking for PNG... no\nchecking for PNG... no\nchecking for png_create_write_struct in -lpng... no\n```\n\n\nSo I don't know why it fails when built inside Sage. In any case, Sage **ships** libpng so we should adapt `deps` to make M4RI dependent on libpng. I'll provide a patch to that effect.",
    "created_at": "2012-05-08T20:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151206",
    "user": "malb"
}
```

Note that stand-alone M4RI builds fine on eno.


```
checking pkg-config is at least version 0.9.0... yes
checking for PNG... no
checking for PNG... no
checking for PNG... no
checking for PNG... no
checking for png_create_write_struct in -lpng... no
```


So I don't know why it fails when built inside Sage. In any case, Sage **ships** libpng so we should adapt `deps` to make M4RI dependent on libpng. I'll provide a patch to that effect.



---

archive/issue_comments_151207.json:
```json
{
    "body": "Attachment\n\nReplying to [comment:26 malb]:\n> In your log above, `PKG_CHECK_MODULES()` fails to find libpng and `AC_CHECK_LIB()` finds it.\nActually, it's not quite like that.  `PKG_CHECK_MODULES()` found `libpng12`  but you still try to link with `-lpng` instead of `-lpng12` (the first failure comes from the `libpng14` check).  `AC_CHECK_LIB()` isn't called (but it would fail).",
    "created_at": "2012-05-08T20:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151207",
    "user": "jdemeyer"
}
```

Attachment

Replying to [comment:26 malb]:
> In your log above, `PKG_CHECK_MODULES()` fails to find libpng and `AC_CHECK_LIB()` finds it.
Actually, it's not quite like that.  `PKG_CHECK_MODULES()` found `libpng12`  but you still try to link with `-lpng` instead of `-lpng12` (the first failure comes from the `libpng14` check).  `AC_CHECK_LIB()` isn't called (but it would fail).



---

archive/issue_comments_151208.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-08T20:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151208",
    "user": "malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_151209.json:
```json
{
    "body": "I recommend against using `PKG_CHECK_MODULES()` and would use only `AC_SEARCH_LIBS()`.",
    "created_at": "2012-05-08T20:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151209",
    "user": "jdemeyer"
}
```

I recommend against using `PKG_CHECK_MODULES()` and would use only `AC_SEARCH_LIBS()`.



---

archive/issue_comments_151210.json:
```json
{
    "body": "The patch you attached is probably good, but that's just part of the problem.",
    "created_at": "2012-05-08T20:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151210",
    "user": "jdemeyer"
}
```

The patch you attached is probably good, but that's just part of the problem.



---

archive/issue_comments_151211.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-05-08T20:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151211",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_151212.json:
```json
{
    "body": "Replying to [comment:31 jdemeyer]:\n> The patch you attached is probably good, but that's just part of the problem.\n\nCan you elaborate on that? I don't understand.",
    "created_at": "2012-05-08T20:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151212",
    "user": "malb"
}
```

Replying to [comment:31 jdemeyer]:
> The patch you attached is probably good, but that's just part of the problem.

Can you elaborate on that? I don't understand.



---

archive/issue_comments_151213.json:
```json
{
    "body": "Replying to [comment:32 malb]:\n> Can you elaborate on that? I don't understand.\nWell, I tried to explain in [http://trac.sagemath.org/sage_trac/ticket/12840#comment:28](http://trac.sagemath.org/sage_trac/ticket/12840#comment:28).  The fact that\n\n```\nPKG_CHECK_MODULES([PNG], [libpng12])\n```\n\nsucceeds, does not imply that the library file `libpng.so` exists.  I don't see what you're trying to accomplish with those `PKG_CHECK_MODULES()` checks.",
    "created_at": "2012-05-09T06:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151213",
    "user": "jdemeyer"
}
```

Replying to [comment:32 malb]:
> Can you elaborate on that? I don't understand.
Well, I tried to explain in [http://trac.sagemath.org/sage_trac/ticket/12840#comment:28](http://trac.sagemath.org/sage_trac/ticket/12840#comment:28).  The fact that

```
PKG_CHECK_MODULES([PNG], [libpng12])
```

succeeds, does not imply that the library file `libpng.so` exists.  I don't see what you're trying to accomplish with those `PKG_CHECK_MODULES()` checks.



---

archive/issue_comments_151214.json:
```json
{
    "body": "I can try to write a patch if you like.",
    "created_at": "2012-05-09T06:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151214",
    "user": "jdemeyer"
}
```

I can try to write a patch if you like.



---

archive/issue_comments_151215.json:
```json
{
    "body": "Replying to [comment:33 jdemeyer]:\n> Replying to [comment:32 malb]:\n> > Can you elaborate on that? I don't understand.\n> {{{\n> PKG_CHECK_MODULES([PNG], [libpng12])\n> }}}\n> succeeds, does not imply that the library file `libpng.so` exists.  \n\nAh, right. It would need `-lpng12`. Yep, that's a bug. I'll fix that next week-ish.\n\n> I don't see what you're trying to accomplish with those `PKG_CHECK_MODULES()` checks.\n\nI am trying to use pkg-config for what it's intended. Making linking easier.",
    "created_at": "2012-05-10T08:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151215",
    "user": "malb"
}
```

Replying to [comment:33 jdemeyer]:
> Replying to [comment:32 malb]:
> > Can you elaborate on that? I don't understand.
> {{{
> PKG_CHECK_MODULES([PNG], [libpng12])
> }}}
> succeeds, does not imply that the library file `libpng.so` exists.  

Ah, right. It would need `-lpng12`. Yep, that's a bug. I'll fix that next week-ish.

> I don't see what you're trying to accomplish with those `PKG_CHECK_MODULES()` checks.

I am trying to use pkg-config for what it's intended. Making linking easier.



---

archive/issue_comments_151216.json:
```json
{
    "body": "Maybe you're using it for *what* it's intended, but not *how* it's intended.",
    "created_at": "2012-05-10T09:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151216",
    "user": "jdemeyer"
}
```

Maybe you're using it for *what* it's intended, but not *how* it's intended.



---

archive/issue_comments_151217.json:
```json
{
    "body": "Replying to [comment:28 jdemeyer]:\n> Replying to [comment:26 malb]:\n> > In your log above, `PKG_CHECK_MODULES()` fails to find libpng and `AC_CHECK_LIB()` finds it.\n> Actually, it's not quite like that.  `PKG_CHECK_MODULES()` found `libpng12`  but you still try to link with `-lpng` instead of `-lpng12` (the first failure comes from the `libpng14` check).  `AC_CHECK_LIB()` isn't called (but it would fail).\n\nFor some reason I missed this comment earlier, sorry. That makes sense & is an upstream bug which I intend to fix.",
    "created_at": "2012-05-10T11:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151217",
    "user": "malb"
}
```

Replying to [comment:28 jdemeyer]:
> Replying to [comment:26 malb]:
> > In your log above, `PKG_CHECK_MODULES()` fails to find libpng and `AC_CHECK_LIB()` finds it.
> Actually, it's not quite like that.  `PKG_CHECK_MODULES()` found `libpng12`  but you still try to link with `-lpng` instead of `-lpng12` (the first failure comes from the `libpng14` check).  `AC_CHECK_LIB()` isn't called (but it would fail).

For some reason I missed this comment earlier, sorry. That makes sense & is an upstream bug which I intend to fix.



---

archive/issue_comments_151218.json:
```json
{
    "body": "Replying to [comment:36 jdemeyer]:\n> Maybe you're using it for *what* it's intended, but not *how* it's intended.\n\nThis is a remarkably unhelpful comment.",
    "created_at": "2012-05-10T11:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151218",
    "user": "malb"
}
```

Replying to [comment:36 jdemeyer]:
> Maybe you're using it for *what* it's intended, but not *how* it's intended.

This is a remarkably unhelpful comment.



---

archive/issue_comments_151219.json:
```json
{
    "body": "Replying to [comment:38 malb]:\n> This is a remarkably unhelpful comment.\nI know, but I have never done anything with pkgconfig, so I can't help more.",
    "created_at": "2012-05-10T11:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151219",
    "user": "jdemeyer"
}
```

Replying to [comment:38 malb]:
> This is a remarkably unhelpful comment.
I know, but I have never done anything with pkgconfig, so I can't help more.



---

archive/issue_comments_151220.json:
```json
{
    "body": "I've updated the SPKG with a new upstream release which should fix the png issue.\n\nhttp://sage.math.washington.edu/home/malb/spkgs/libm4ri-20120522.spkg",
    "created_at": "2012-05-22T15:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151220",
    "user": "malb"
}
```

I've updated the SPKG with a new upstream release which should fix the png issue.

http://sage.math.washington.edu/home/malb/spkgs/libm4ri-20120522.spkg



---

archive/issue_comments_151221.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-22T15:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151221",
    "user": "malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_151222.json:
```json
{
    "body": "Could someone please review this. I am looking into updating LinBox and updating M4RIE is a requirement for that (long story involving Givaro).",
    "created_at": "2012-06-06T20:48:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151222",
    "user": "malb"
}
```

Could someone please review this. I am looking into updating LinBox and updating M4RIE is a requirement for that (long story involving Givaro).



---

archive/issue_comments_151223.json:
```json
{
    "body": "Replying to [comment:42 malb]:\n> Could someone please review this. I am looking into updating LinBox and updating M4RIE is a requirement for that (long story involving Givaro).\n\nI could test the code on one or two linuxes. But I couldn't test whether the png problems on eno (as observed by Jeroen) are fixed. Jeroen, could you finish the review?",
    "created_at": "2012-06-07T09:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151223",
    "user": "SimonKing"
}
```

Replying to [comment:42 malb]:
> Could someone please review this. I am looking into updating LinBox and updating M4RIE is a requirement for that (long story involving Givaro).

I could test the code on one or two linuxes. But I couldn't test whether the png problems on eno (as observed by Jeroen) are fixed. Jeroen, could you finish the review?



---

archive/issue_comments_151224.json:
```json
{
    "body": "The **previous** version installed fine on eno within Sage.  It seems the `libpng` check is totally gone now.",
    "created_at": "2012-06-07T16:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151224",
    "user": "jdemeyer"
}
```

The **previous** version installed fine on eno within Sage.  It seems the `libpng` check is totally gone now.



---

archive/issue_comments_151225.json:
```json
{
    "body": "Replying to [comment:46 jdemeyer]:\n> The **previous** version installed fine on eno within Sage. \n\n\n>It seems the `libpng` check is totally gone now.\n\nThat's strange, it doesn't check?\n\nI had to update SPKG because I didn't add \"-I$SAGE_LOCAL/include\" before but we need it now because of the PNG dependency. The newest SPKG installs fine on geom.math which doesn't have a system libpng-dev.",
    "created_at": "2012-06-07T16:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151225",
    "user": "malb"
}
```

Replying to [comment:46 jdemeyer]:
> The **previous** version installed fine on eno within Sage. 


>It seems the `libpng` check is totally gone now.

That's strange, it doesn't check?

I had to update SPKG because I didn't add "-I$SAGE_LOCAL/include" before but we need it now because of the PNG dependency. The newest SPKG installs fine on geom.math which doesn't have a system libpng-dev.



---

archive/issue_comments_151226.json:
```json
{
    "body": "I've tried this on Fedora 17 (which doesn't have libpng12 either, its up to libpng15 now) and configure works as intended:\n\n```\nchecking whether to build with PNG support... yes\nchecking for pkg-config... /usr/bin/pkg-config\nchecking pkg-config is at least version 0.9.0... yes\nchecking for PNG... yes\n```\n\nJeroen, you might have overlooked this part in the log since it comes after the lengthy \"checking for cache sizes...\".\n\nI'm building on eno right now and if it works I'll set this ticket to positive review.",
    "created_at": "2012-06-17T13:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151226",
    "user": "vbraun"
}
```

I've tried this on Fedora 17 (which doesn't have libpng12 either, its up to libpng15 now) and configure works as intended:

```
checking whether to build with PNG support... yes
checking for pkg-config... /usr/bin/pkg-config
checking pkg-config is at least version 0.9.0... yes
checking for PNG... yes
```

Jeroen, you might have overlooked this part in the log since it comes after the lengthy "checking for cache sizes...".

I'm building on eno right now and if it works I'll set this ticket to positive review.



---

archive/issue_comments_151227.json:
```json
{
    "body": "So Fedora has libpng.so then? I am asking because I am not checking for png15 explicitly.\n\n\n```\nif test \"x${want_png}\" = \"xyes\" ; then\n   PKG_CHECK_MODULES([PNG], [libpng],\n      [have_libpng=\"yes\"; LIBPNG_LIBADD=`pkg-config --libs libpng`],\n      [have_libpng=\"no\"])\n   if ! test \"x${have_libpng}\" = \"xyes\" ; then\n      AC_CHECK_LIB([png],\n         [png_create_write_struct],\n         [have_libpng=\"yes\"; LIBPNG_LIBADD=\"-lpng\"],\n         [AC_CHECK_LIB([png14],\n            [png_create_write_struct],\n            [have_libpng=\"yes\"; LIBPNG_LIBADD=\"-lpng14\"],\n            [AC_CHECK_LIB([png12],\n               [png_create_write_struct],\n               [have_libpng=\"yes\"; LIBPNG_LIBADD=\"-lpng12\"],\n               [AC_CHECK_LIB([png10],\n                  [png_create_write_struct],\n                  [have_libpng=\"yes\"; LIBPNG_LIBADD=\"-lpng10\"],\n                  [have_libpng=\"no\"])\n               ])\n            ])\n        ])\n   fi\n   if test \"x${have_libpng}\" = \"xno\" ; then\n      AC_MSG_WARN([Can not find a usuable PNG library. Make sure that CPPFLAGS and LDFLAGS are correctly set.])\n   fi\nfi\n\n```\n",
    "created_at": "2012-06-17T13:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151227",
    "user": "malb"
}
```

So Fedora has libpng.so then? I am asking because I am not checking for png15 explicitly.


```
if test "x${want_png}" = "xyes" ; then
   PKG_CHECK_MODULES([PNG], [libpng],
      [have_libpng="yes"; LIBPNG_LIBADD=`pkg-config --libs libpng`],
      [have_libpng="no"])
   if ! test "x${have_libpng}" = "xyes" ; then
      AC_CHECK_LIB([png],
         [png_create_write_struct],
         [have_libpng="yes"; LIBPNG_LIBADD="-lpng"],
         [AC_CHECK_LIB([png14],
            [png_create_write_struct],
            [have_libpng="yes"; LIBPNG_LIBADD="-lpng14"],
            [AC_CHECK_LIB([png12],
               [png_create_write_struct],
               [have_libpng="yes"; LIBPNG_LIBADD="-lpng12"],
               [AC_CHECK_LIB([png10],
                  [png_create_write_struct],
                  [have_libpng="yes"; LIBPNG_LIBADD="-lpng10"],
                  [have_libpng="no"])
               ])
            ])
        ])
   fi
   if test "x${have_libpng}" = "xno" ; then
      AC_MSG_WARN([Can not find a usuable PNG library. Make sure that CPPFLAGS and LDFLAGS are correctly set.])
   fi
fi

```




---

archive/issue_comments_151228.json:
```json
{
    "body": "Replying to [comment:49 malb]:\n\n> So Fedora has libpng.so then? I am asking because I am not checking for png15 explicitly.\u00a0\n\nArgh, I am stupid. It would find libpng12 as included in Sage. Sorry bout the noise.",
    "created_at": "2012-06-17T13:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151228",
    "user": "malb"
}
```

Replying to [comment:49 malb]:

> So Fedora has libpng.so then? I am asking because I am not checking for png15 explicitly. 

Argh, I am stupid. It would find libpng12 as included in Sage. Sorry bout the noise.



---

archive/issue_comments_151229.json:
```json
{
    "body": "Yes the `PKG_CHECK_MODULES` test wins in Sage, which is the way it should be. pkg-config is the way to go imho. Though if libpng were to use standard libtool versioning we would live in a better world, too ;-)\n\nIn any case, built and tested fine on eno. Positive review.",
    "created_at": "2012-06-18T10:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151229",
    "user": "vbraun"
}
```

Yes the `PKG_CHECK_MODULES` test wins in Sage, which is the way it should be. pkg-config is the way to go imho. Though if libpng were to use standard libtool versioning we would live in a better world, too ;-)

In any case, built and tested fine on eno. Positive review.



---

archive/issue_comments_151230.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-18T10:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151230",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_151231.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-06-30T17:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151231",
    "user": "jhpalmieri"
}
```

Attachment



---

archive/issue_comments_151232.json:
```json
{
    "body": "The deprecations here should use the format from #13109.",
    "created_at": "2012-06-30T17:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151232",
    "user": "jhpalmieri"
}
```

The deprecations here should use the format from #13109.



---

archive/issue_comments_151233.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-06-30T17:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151233",
    "user": "jhpalmieri"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_151234.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-30T17:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151234",
    "user": "jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_151235.json:
```json
{
    "body": "The deprecations are not doctested.",
    "created_at": "2012-06-30T19:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151235",
    "user": "vbraun"
}
```

The deprecations are not doctested.



---

archive/issue_comments_151236.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-30T19:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151236",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_151237.json:
```json
{
    "body": "Hmm deprecations (and any other warnings) don't work in cdef methods. I guess we can't doctest them, for now.",
    "created_at": "2012-06-30T19:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151237",
    "user": "vbraun"
}
```

Hmm deprecations (and any other warnings) don't work in cdef methods. I guess we can't doctest them, for now.



---

archive/issue_comments_151238.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-07-27T20:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151238",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_151239.json:
```json
{
    "body": "This needs to be rebased to sage-5.2.rc1.",
    "created_at": "2012-07-27T20:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151239",
    "user": "jdemeyer"
}
```

This needs to be rebased to sage-5.2.rc1.



---

archive/issue_comments_151240.json:
```json
{
    "body": "Can you clarify the rebasing issues? I have no problems applying the patches from here and from #12841 on top of sage-5.2.rc1.",
    "created_at": "2012-07-27T21:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151240",
    "user": "jhpalmieri"
}
```

Can you clarify the rebasing issues? I have no problems applying the patches from here and from #12841 on top of sage-5.2.rc1.



---

archive/issue_comments_151241.json:
```json
{
    "body": "I'm with John here, I've been carrying the mari/e/givaro/linbox patches in my queue for a while now and there was no breakage in sage-5.2.rc1 as far as I can tell.",
    "created_at": "2012-07-28T03:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151241",
    "user": "vbraun"
}
```

I'm with John here, I've been carrying the mari/e/givaro/linbox patches in my queue for a while now and there was no breakage in sage-5.2.rc1 as far as I can tell.



---

archive/issue_comments_151242.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-07-28T09:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151242",
    "user": "jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_151243.json:
```json
{
    "body": "My mistake, I only applied the second Sage library patch and that didn't work.",
    "created_at": "2012-07-28T09:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151243",
    "user": "jdemeyer"
}
```

My mistake, I only applied the second Sage library patch and that didn't work.



---

archive/issue_comments_151244.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-08-01T12:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12668#issuecomment-151244",
    "user": "jdemeyer"
}
```

Resolution: fixed
