# Issue 29653: src/bin/sage-system-python: Try "python" first

Issue created by migration from https://trac.sagemath.org/ticket/29890

Original creator: mkoeppe

Original creation time: 2020-06-17 19:01:54

CC:  jhpalmieri

This has an advantage on macOS, where the python2 urllib works correctly with ssl but the python3 may not.


---

Comment by mkoeppe created at 2020-06-18 00:50:11

New commits:


---

Comment by mkoeppe created at 2020-06-18 00:50:11

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2020-06-19 04:48:41

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2020-06-19 04:48:41

Seems to work with a build from scratch and also building a bunch of optional packages. I didn't see any new breakages with those, just packages which were broken independently of this branch: boost, database_stein_watkins_mini, sage_numerical_backends_cplex, sage_numerical_backends_gurobi, texlive (although why anyone would want to install texlive via Sage is baffling to me).

I tested this on OS X using very few system packages, to try out installing as many of Sage's packages as possible (in case some package used Python 3 syntax in its installation process). I used the system's gfortran because of lack of patience, and I used the system's curl because Sage's build of R failed when Sage built its own curl. That is, I used this command:

```
./configure --with-system-boost_cropped=no --with-system-curl=yes --with-system-freetype=no --with-system-glpk=no --with-system-gmp=no --with-system-gsl=no --with-system-iconv=no --with-system-libffi=no --with-system-libgd=no --with-system-libpng=no --with-system-mpc=no --with-system-mpfi=no --with-system-mpfr=no --with-system-mpir=no --with-system-ncurses=no --with-system-ninja_build=no --with-system-ntl=no --with-system-openblas=no --with-system-pkgconf=no --with-system-ppl=no --with-system-python3=no --with-system-r=no --with-system-readline=no --with-system-sqlite=no --with-system-suitesparse=no --with-system-xz=no --with-system-yasm=no --with-system-zeromq=no --with-system-zlib=no
```

Was there some quicker way to tell `./configure` to ignore system packages?


---

Comment by jhpalmieri created at 2020-06-19 05:00:01

`database_stein_watkins_mini` is taken care of at #29897.


---

Comment by mkoeppe created at 2020-06-19 05:09:29

Replying to [comment:5 jhpalmieri]:
> I used this command:
> {{{
> ./configure --with-system-boost_cropped=no --with-system-curl=yes --with-system-freetype=no --with-system-glpk=no --with-system-gmp=no --with-system-gsl=no --with-system-iconv=no --with-system-libffi=no --with-system-libgd=no --with-system-libpng=no --with-system-mpc=no --with-system-mpfi=no --with-system-mpfr=no --with-system-mpir=no --with-system-ncurses=no --with-system-ninja_build=no --with-system-ntl=no --with-system-openblas=no --with-system-pkgconf=no --with-system-ppl=no --with-system-python3=no --with-system-r=no --with-system-readline=no --with-system-sqlite=no --with-system-suitesparse=no --with-system-xz=no --with-system-yasm=no --with-system-zeromq=no --with-system-zlib=no
> }}}
> Was there some quicker way to tell `./configure` to ignore system packages?
Unfortunately, no.


---

Comment by mkoeppe created at 2020-06-19 05:18:07

Replying to [comment:5 jhpalmieri]:
> Seems to work with a build from scratch and also building a bunch of optional packages. I didn't see any new breakages with those, just packages which were broken independently of this branch: boost, database_stein_watkins_mini, sage_numerical_backends_cplex, sage_numerical_backends_gurobi, texlive (although why anyone would want to install texlive via Sage is baffling to me).

Probably we should add automatic testing for all optional packages. `.github/workflows/tox-optional.yml` only tests the following: 

  `4ti2 pynormaliz qepcad lrslib latte_int topcom barvinok isl qhull sage_numerical_backends_coin primecount plantri polymake jupymake kenzo libsemigroups mcqd meataxe mpfrcx openssl p_group_cohomology rst2ipynb sirocco tdlib tides` 

(and their dependencies).


---

Comment by jhpalmieri created at 2020-06-19 15:54:21

The experimental packages are even worse: I tried most of them, and only one (`compilerwrapper`) succeeded.


---

Comment by mkoeppe created at 2020-06-19 16:35:38

Let's continue on #29900 (Meta-ticket: Fix optional and experimental packages for Sage 9.2)


---

Comment by git created at 2020-06-19 20:12:48

Changing status from positive_review to needs_review.


---

Comment by git created at 2020-06-19 20:12:48

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2020-06-19 20:19:17

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2020-06-19 20:19:33

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-06-19 20:19:33

Sorry, pushed to the wrong ticket.


---

Comment by vbraun created at 2020-07-02 21:29:49

Resolution: fixed


---

Comment by mkoeppe created at 2020-07-05 19:07:25

Follow up in #29929
