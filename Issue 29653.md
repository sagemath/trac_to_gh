# Issue 29653: src/bin/sage-system-python: Try "python" first

archive/issues_029653.json:
```json
{
    "body": "CC:  @jhpalmieri\n\nThis has an advantage on macOS, where the python2 urllib works correctly with ssl but the python3 may not.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29890\n\n",
    "created_at": "2020-06-17T19:01:54Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "src/bin/sage-system-python: Try \"python\" first",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29653",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @jhpalmieri

This has an advantage on macOS, where the python2 urllib works correctly with ssl but the python3 may not.

Issue created by migration from https://trac.sagemath.org/ticket/29890





---

archive/issue_comments_420653.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-06-18T00:50:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420653",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_420654.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-18T00:50:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420654",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_420655.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-19T04:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420655",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420656.json:
```json
{
    "body": "Seems to work with a build from scratch and also building a bunch of optional packages. I didn't see any new breakages with those, just packages which were broken independently of this branch: boost, database_stein_watkins_mini, sage_numerical_backends_cplex, sage_numerical_backends_gurobi, texlive (although why anyone would want to install texlive via Sage is baffling to me).\n\nI tested this on OS X using very few system packages, to try out installing as many of Sage's packages as possible (in case some package used Python 3 syntax in its installation process). I used the system's gfortran because of lack of patience, and I used the system's curl because Sage's build of R failed when Sage built its own curl. That is, I used this command:\n\n```\n./configure --with-system-boost_cropped=no --with-system-curl=yes --with-system-freetype=no --with-system-glpk=no --with-system-gmp=no --with-system-gsl=no --with-system-iconv=no --with-system-libffi=no --with-system-libgd=no --with-system-libpng=no --with-system-mpc=no --with-system-mpfi=no --with-system-mpfr=no --with-system-mpir=no --with-system-ncurses=no --with-system-ninja_build=no --with-system-ntl=no --with-system-openblas=no --with-system-pkgconf=no --with-system-ppl=no --with-system-python3=no --with-system-r=no --with-system-readline=no --with-system-sqlite=no --with-system-suitesparse=no --with-system-xz=no --with-system-yasm=no --with-system-zeromq=no --with-system-zlib=no\n```\n\nWas there some quicker way to tell `./configure` to ignore system packages?",
    "created_at": "2020-06-19T04:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420656",
    "user": "https://github.com/jhpalmieri"
}
```

Seems to work with a build from scratch and also building a bunch of optional packages. I didn't see any new breakages with those, just packages which were broken independently of this branch: boost, database_stein_watkins_mini, sage_numerical_backends_cplex, sage_numerical_backends_gurobi, texlive (although why anyone would want to install texlive via Sage is baffling to me).

I tested this on OS X using very few system packages, to try out installing as many of Sage's packages as possible (in case some package used Python 3 syntax in its installation process). I used the system's gfortran because of lack of patience, and I used the system's curl because Sage's build of R failed when Sage built its own curl. That is, I used this command:

```
./configure --with-system-boost_cropped=no --with-system-curl=yes --with-system-freetype=no --with-system-glpk=no --with-system-gmp=no --with-system-gsl=no --with-system-iconv=no --with-system-libffi=no --with-system-libgd=no --with-system-libpng=no --with-system-mpc=no --with-system-mpfi=no --with-system-mpfr=no --with-system-mpir=no --with-system-ncurses=no --with-system-ninja_build=no --with-system-ntl=no --with-system-openblas=no --with-system-pkgconf=no --with-system-ppl=no --with-system-python3=no --with-system-r=no --with-system-readline=no --with-system-sqlite=no --with-system-suitesparse=no --with-system-xz=no --with-system-yasm=no --with-system-zeromq=no --with-system-zlib=no
```

Was there some quicker way to tell `./configure` to ignore system packages?



---

archive/issue_comments_420657.json:
```json
{
    "body": "`database_stein_watkins_mini` is taken care of at #29897.",
    "created_at": "2020-06-19T05:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420657",
    "user": "https://github.com/jhpalmieri"
}
```

`database_stein_watkins_mini` is taken care of at #29897.



---

archive/issue_comments_420658.json:
```json
{
    "body": "Replying to [comment:5 jhpalmieri]:\n> I used this command:\n> {{{\n> ./configure --with-system-boost_cropped=no --with-system-curl=yes --with-system-freetype=no --with-system-glpk=no --with-system-gmp=no --with-system-gsl=no --with-system-iconv=no --with-system-libffi=no --with-system-libgd=no --with-system-libpng=no --with-system-mpc=no --with-system-mpfi=no --with-system-mpfr=no --with-system-mpir=no --with-system-ncurses=no --with-system-ninja_build=no --with-system-ntl=no --with-system-openblas=no --with-system-pkgconf=no --with-system-ppl=no --with-system-python3=no --with-system-r=no --with-system-readline=no --with-system-sqlite=no --with-system-suitesparse=no --with-system-xz=no --with-system-yasm=no --with-system-zeromq=no --with-system-zlib=no\n> }}}\n> Was there some quicker way to tell `./configure` to ignore system packages?\nUnfortunately, no.",
    "created_at": "2020-06-19T05:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420658",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:5 jhpalmieri]:
> I used this command:
> {{{
> ./configure --with-system-boost_cropped=no --with-system-curl=yes --with-system-freetype=no --with-system-glpk=no --with-system-gmp=no --with-system-gsl=no --with-system-iconv=no --with-system-libffi=no --with-system-libgd=no --with-system-libpng=no --with-system-mpc=no --with-system-mpfi=no --with-system-mpfr=no --with-system-mpir=no --with-system-ncurses=no --with-system-ninja_build=no --with-system-ntl=no --with-system-openblas=no --with-system-pkgconf=no --with-system-ppl=no --with-system-python3=no --with-system-r=no --with-system-readline=no --with-system-sqlite=no --with-system-suitesparse=no --with-system-xz=no --with-system-yasm=no --with-system-zeromq=no --with-system-zlib=no
> }}}
> Was there some quicker way to tell `./configure` to ignore system packages?
Unfortunately, no.



---

archive/issue_comments_420659.json:
```json
{
    "body": "Replying to [comment:5 jhpalmieri]:\n> Seems to work with a build from scratch and also building a bunch of optional packages. I didn't see any new breakages with those, just packages which were broken independently of this branch: boost, database_stein_watkins_mini, sage_numerical_backends_cplex, sage_numerical_backends_gurobi, texlive (although why anyone would want to install texlive via Sage is baffling to me).\n\nProbably we should add automatic testing for all optional packages. `.github/workflows/tox-optional.yml` only tests the following: \n\n  `4ti2 pynormaliz qepcad lrslib latte_int topcom barvinok isl qhull sage_numerical_backends_coin primecount plantri polymake jupymake kenzo libsemigroups mcqd meataxe mpfrcx openssl p_group_cohomology rst2ipynb sirocco tdlib tides` \n\n(and their dependencies).",
    "created_at": "2020-06-19T05:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420659",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:5 jhpalmieri]:
> Seems to work with a build from scratch and also building a bunch of optional packages. I didn't see any new breakages with those, just packages which were broken independently of this branch: boost, database_stein_watkins_mini, sage_numerical_backends_cplex, sage_numerical_backends_gurobi, texlive (although why anyone would want to install texlive via Sage is baffling to me).

Probably we should add automatic testing for all optional packages. `.github/workflows/tox-optional.yml` only tests the following: 

  `4ti2 pynormaliz qepcad lrslib latte_int topcom barvinok isl qhull sage_numerical_backends_coin primecount plantri polymake jupymake kenzo libsemigroups mcqd meataxe mpfrcx openssl p_group_cohomology rst2ipynb sirocco tdlib tides` 

(and their dependencies).



---

archive/issue_comments_420660.json:
```json
{
    "body": "The experimental packages are even worse: I tried most of them, and only one (`compilerwrapper`) succeeded.",
    "created_at": "2020-06-19T15:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420660",
    "user": "https://github.com/jhpalmieri"
}
```

The experimental packages are even worse: I tried most of them, and only one (`compilerwrapper`) succeeded.



---

archive/issue_comments_420661.json:
```json
{
    "body": "Let's continue on #29900 (Meta-ticket: Fix optional and experimental packages for Sage 9.2)",
    "created_at": "2020-06-19T16:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420661",
    "user": "https://github.com/mkoeppe"
}
```

Let's continue on #29900 (Meta-ticket: Fix optional and experimental packages for Sage 9.2)



---

archive/issue_comments_420662.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-06-19T20:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_420663.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-06-19T20:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_420664.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-06-19T20:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_420665.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-19T20:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420665",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420666.json:
```json
{
    "body": "Sorry, pushed to the wrong ticket.",
    "created_at": "2020-06-19T20:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420666",
    "user": "https://github.com/mkoeppe"
}
```

Sorry, pushed to the wrong ticket.



---

archive/issue_comments_420667.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-02T21:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420667",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_420668.json:
```json
{
    "body": "Follow up in #29929",
    "created_at": "2020-07-05T19:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29653#issuecomment-420668",
    "user": "https://github.com/mkoeppe"
}
```

Follow up in #29929
