# Issue 25439: py3: Automatically alias OSError subclases in exception doctests

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2018-06-27 16:13:17

CC:  slelievre vklein

Keywords: doctests

There are at least a handful of doctests that expect `OSError` to be raised.  However, Python 3 added many [OSError subclasses](https://docs.python.org/3/library/exceptions.html#os-exceptions) that are raised in many common cases instead (e.g. `FileNotFoundError`).

This patches doctest results to paper over this difference in doctests written against Python 2.


---

Comment by embray created at 2018-06-27 17:18:31

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-06-28 13:47:01

pyflakes plugin is not happy..


---

Comment by embray created at 2018-06-28 14:49:04

Replying to [comment:3 chapoton]:
> pyflakes plugin is not happy..

Not due to anything related to these changes.  If someone will otherwise give a conditional positive review to this ticket I'll make sure the pyflakes warnings get taken care of as a rider to this before it's merged.


---

Comment by vklein created at 2018-07-05 14:43:31

**Edit** remove old comment as it matters only with twisted ways of building error messages.


---

Comment by vklein created at 2018-07-06 07:58:01

Why two line break ?

```
                                    exc_msg = exc_msg.replace(subcls, 'OSError',

                                                              1)
```



---

Comment by embray created at 2018-07-06 08:46:07

Huh?


---

Comment by vklein created at 2018-07-06 09:06:52

i mean why writing :


```
exc_msg = exc_msg.replace(subcls, 'OSError',

                          1)
```

rather than 

```
exc_msg = exc_msg.replace(subcls, 'OSError',
                          1)
```


I am not saying it's an important issue (it's not). I just wonder why.


---

Comment by embray created at 2018-07-09 09:22:18

I don't know.  My editor is configured to enforce a 79 character line and knows Python syntax (most of the time) so it will bump things onto the next line when it can.


---

Comment by slelievre created at 2018-07-09 11:52:20

Name the subclass "sc" instead of "subcls" 
in the for loop to get a shorter line?


---

Comment by embray created at 2018-07-10 12:24:11

It's....really okay.


---

Comment by chapoton created at 2018-07-12 05:41:37

let it be


---

Comment by chapoton created at 2018-07-12 05:41:37

Changing status from needs_review to positive_review.


---

Comment by embray created at 2018-07-18 11:47:03

I believe this issue can reasonably be addressed for Sage 8.4.


---

Comment by vbraun created at 2018-08-05 08:18:03

Resolution: fixed
