# Issue 15507: Speed up MPC multiplication

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2014-01-27 14:08:47

CC:  zimmerma jpflori

Add a patch from upstream which significantly speeds up MPC multiplication.


---

Comment by jdemeyer created at 2014-01-27 14:58:09

New commits:


---

Comment by jdemeyer created at 2014-01-27 14:58:09

Changing status from new to needs_review.


---

Comment by jpflori created at 2014-02-19 12:39:19

For future ref, patch taken from upstream commit r1439 (https://gforge.inria.fr/scm/viewvc.php/trunk/src/mul.c?root=mpc&r1=1298&r2=1439).


---

Comment by jpflori created at 2014-02-19 13:08:19

Everything looks fine and multiplication is indeed sped up.


---

Comment by jpflori created at 2014-02-19 13:08:19

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-02-22 06:45:33

Resolution: fixed


---

Comment by zimmerma created at 2016-01-15 08:37:14

I have added a new function `mpfr_fmma` (and its companion `mpfr_fmms`) in the development version of MPFR. This function is now used in the development version of MPC. Those functions should be faster than the patch used in this ticket. Please could someone update the timings with those new functions?

1. Get the development (svn) version of MPFR.
2. Get the development (git) version of MPC, and check that configure finds `mpfr_fmma` and it is used in `mpc_mul`.
3. Rebuild Sage with those version of MPFR and MPC.

Paul

PS: the 1.74ms for ComplexField in 1024 bits looks dubious to me, if you compare to 0.77ms for 360 bits. What is the command used for those timings?


---

Comment by zimmerma created at 2016-02-17 08:10:30

Jeroen, please could you redo the timings with the new `mpfr_fmma` from the development version of MPFR (as indicated in comment [comment:11]), and publish the code you used in the description so that we can reproduce your timings?
