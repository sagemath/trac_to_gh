# Issue 30252: Two fixes for test suite for products of polyhedra

Issue created by migration from https://trac.sagemath.org/ticket/30489

Original creator: @kliem

Original creation time: 2020-09-02 07:04:04

CC:  mkoeppe vbraun


```
File "src/sage/geometry/polyhedron/library.py", line 553, in sage.geometry.polyhedron.library.Polytopes.regular_polygon
Warning, slow doctest:
    TestSuite(octagon).run()                                    # long time
Test ran for 154.93 s
    [409 tests, 301.67 s]
```

We shouldn't do large construction with base ring `AA`.

Also here the second line doesn't make any sense and should be like the fourth line:


```diff
+            if AA.has_coerce_map_from(self.base_ring()):
+                P = polytopes.regular_polygon(5, exact=True)
+            if RDF.has_coerce_map_from(self.base_ring()):
+                R = self*polytopes.regular_polygon(5, exact=False)
```



---

Comment by @kliem created at 2020-09-02 07:05:10

Marked this as critical, because it is super annoying if a doctest takes this long.


---

Comment by @kliem created at 2020-09-02 07:38:40

Changing status from new to needs_review.


---

Comment by @kliem created at 2020-09-02 07:38:40

New commits:


---

Comment by mkoeppe created at 2020-09-02 16:01:58

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2020-09-02 16:02:58

Thanks.


---

Comment by vbraun created at 2020-09-06 21:51:55

Resolution: fixed
