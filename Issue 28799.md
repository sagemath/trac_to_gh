# Issue 28799: sage -v cannot work : sage's env hasn't been sourced yet!

Issue created by migration from https://trac.sagemath.org/ticket/29036

Original creator: Snark

Original creation time: 2020-01-18 12:30:55

CC:  jhpalmieri

The problem was reported on Debian, but I checked the source on git to see it was also there upstream.

The problem is that the sage_version function in src/bin/sage is using $SAGE_foo variables, but is called (by itself and through others, like usage and usage_advanced) by functions which are called before the environment has been set. Run where $0-version.sh isn't readily available, it even tries to source a file on a wrong path, which just gives an error.


---

Comment by mkoeppe created at 2020-05-03 16:19:13

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-05-03 16:19:13

Works for me in 9.1.rc2


---

Comment by jhpalmieri created at 2020-05-03 17:29:37

Works for me, too:

```
% ls
% tar xf ../../tar-files/sage-9.1.rc2.tar.gz 
% cd sage-9.1.rc2 
% ./sage -v
SageMath version 9.1.rc2, Release Date: 2020-04-25
```

I suppose it could be a Debian problem, or more generally a problem for the distros. `@`Snark: Is there a reason to keep this open?


---

Comment by jhpalmieri created at 2021-02-26 19:52:35

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2021-02-26 19:52:35

Let's close this. We can open a new ticket if the problem resurfaces.


---

Comment by mkoeppe created at 2021-06-24 20:15:37

Resolution: invalid
