# Issue 10234: singular-3-1-1-4.p3 is missing Singular.rc.in

Issue created by migration from https://trac.sagemath.org/ticket/10235

Original creator: mhansen

Original creation time: 2010-11-08 02:20:29

Assignee: tbd

CC:  malb dimpase mhansen

Keywords: singular, cygwin

This is needed in order to build Singular on Cygwin.  It has been in previous releases, but I don't know why it is gone now.  This has happened before; see:

http://www.mail-archive.com/sage-devel`@`googlegroups.com/msg02800.html

and

http://www.mail-archive.com/sage-devel`@`googlegroups.com/msg02767.html


---

Comment by kcrisman created at 2011-06-28 15:38:57

Another ticket related to this issue is #11550.  Not recommending to close this until we're sure this is all the same.


---

Comment by kcrisman created at 2011-07-01 15:09:46

I can confirm that Singular builds and works fine (via `sage -singular`, computed the free resolution of an ideal) on Cygwin with the fix at #11550.   Should this be closed?


---

Comment by kcrisman created at 2011-07-29 19:35:08

I'm going to leave this open because it might be needed later, but for now I'm removing it from the list of needed changes on the [wiki page for Cygwin](CygwinPort) because it's apparently not an issue right now.


---

Comment by kcrisman created at 2011-07-29 19:35:08

Changing component from packages to cygwin.


---

Comment by leif created at 2011-08-06 19:18:14

Changing status from new to needs_info.


---

Comment by leif created at 2011-08-06 19:18:14

Replying to [comment:3 kcrisman]:
> I'm going to leave this open because it might be needed later, but for now I'm removing it from the list of needed changes on the [wiki page for Cygwin](CygwinPort) because it's apparently not an issue right now.

Well, the file is at least present in the p9 (and I guess also in your p10), so if the potential problem is documented in Singular's `SPKG.txt` (_Special Update/Build Instructions_), I think we should close this ticket.


---

Comment by kcrisman created at 2011-08-08 13:17:54

Replying to [comment:4 leif]:
> Replying to [comment:3 kcrisman]:
> > I'm going to leave this open because it might be needed later, but for now I'm removing it from the list of needed changes on the [wiki page for Cygwin](CygwinPort) because it's apparently not an issue right now.
> 
> Well, the file is at least present in the p9 (and I guess also in your p10), so if the potential problem is documented in Singular's `SPKG.txt` (_Special Update/Build Instructions_), I think we should close this ticket.
Yes, I just checked and it is indeed in there (in the `src/Singular/` directory, where I hadn't looked beforehand, only toplevel).

However, this is only mentioned in one place in the SPKG.txt, just as an update from four years ago, so I would say that solving this requires changing SPKG.txt to mention this, as you say.  However, that could in principle be added in some other ticket, so as not to multiply p's beyond belief.


---

Comment by kcrisman created at 2011-08-08 18:55:29

Changing status from needs_info to needs_review.


---

Comment by kcrisman created at 2011-08-08 18:55:29

Okay, I've included a comment to this effect in the p11 for #11550 (that spkg _does_ have this file).  I suppose one would review this by checking that that spkg has that comment in the correct place.


---

Comment by leif created at 2011-08-09 02:08:39

Replying to [comment:6 kcrisman]:
> Okay, I've included a comment to this effect in the p11 for #11550 (that spkg _does_ have this file).  I suppose one would review this by checking that that spkg has that comment in the correct place.

Another thing would be to just check _in `spkg-install`_ (at least on Cygwin) that
 * the file is present in the upstream sources, and / or
 * the file generated from it indeed did get installed (as `Singular.rc` I guess). [Where does this file get installed to / where is it supposed to be located? I think I don't have such on Linux.]


---

Comment by kcrisman created at 2011-08-09 02:22:57

I don't know the answer to your questions, and while I know that something like `[ -x file]` (?) would do this. I don't know anything else about this file.  Apparently it is in the upstream sources.  It lives in `src/Singular/`.  I feel like that is more than needed for this; the perfect will otherwise become the enemy of the done.


---

Comment by leif created at 2011-08-09 03:06:38

Replying to [comment:8 kcrisman]:
> I don't know the answer to your questions, and while I know that something like `[ -x file]` (?) would do this. I don't know anything else about this file.  Apparently it is in the upstream sources.  It lives in `src/Singular/`.  I feel like that is more than needed for this; the perfect will otherwise become the enemy of the done.

Wie Du weisst, der Feind des Guten ist das Bessere... ;-)

But you could just search for a file named `Singular.rc` or `singular.rc` on your Cygwin installation, since if Singular there doesn't work without its template file, there must be something installed which was generated from it, perhaps in your Cygwin home directory or somewhere in `$SAGE_LOCAL/share/singular`, or `$SAGE_LOCAL/bin`.

(`spkg/logs/singular-*.log` perhaps gives some hint.)

I won't object giving this ticket a positive review when a positively reviewed p11 at #11550 has just the comment you added in `SPKG.txt`. I don't care much about Cygwin anyway... B)


---

Comment by kcrisman created at 2011-08-09 18:42:22

There is now something to review at #11550. It's the same as it was, except now based on #11563 and #11645, in principle.


---

Comment by kcrisman created at 2011-08-12 12:24:00

Replying to [comment:10 kcrisman]:
> There is now something to review at #11550. It's the same as it was, except now based on #11563 and #11645, in principle.
I mean #11663 and #11645, of course.


---

Comment by kcrisman created at 2011-08-12 12:51:12

> I won't object giving this ticket a positive review when a positively reviewed p11 at #11550 has just the comment you added in `SPKG.txt`.

Okay, the spkg at #11550 is now based on the spkgs in rc2 and it's ready for review that it includes this comment.  Thanks!


---

Comment by leif created at 2011-08-12 14:36:22

Provisional positive review; I'll revert the status in case something unexpected should happen with the p13 at #11550 (which I've added as a dependency anyway).

P.S.: I also checked that the build on Cygwin should fail in the case `Singular.rc.in` was *not* present.


---

Comment by leif created at 2011-08-12 14:36:22

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2011-08-12 14:42:32

> P.S.: I also checked that the build on Cygwin should fail in the case `Singular.rc.in` was *not* present.
Really?  How?  You mean in spkg-install?  I don't see anything relevant there.  Did you trace through the actual Singular build scripts?  Hut ab!


---

Comment by leif created at 2011-08-12 14:55:01

Replying to [comment:14 kcrisman]:
> Did you trace through the actual Singular build scripts?  Hut ab!

`Singular.rc` depends on, i.e. is generated from `Singular.rc.in`; the former is used to generate some object files with `windres` on Cygwin / Windows (`{Singular,ESingular,TSingular}_res.o`), which are then linked to the executables (`Singular.exe`, `runESingular.exe` and `runTSingular.exe`).

`grep` is your friend.


---

Comment by jdemeyer created at 2011-08-16 09:20:15

Resolution: duplicate
