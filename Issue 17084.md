# Issue 17084: Pynac RuntimeError: comparing typeid's

Issue created by migration from https://trac.sagemath.org/ticket/17321

Original creator: vbraun

Original creation time: 2014-11-12 16:03:55

CC:  burcin

Series times variable raises the following exception:

```
sage: ex = sin(x).series(x==0, 3) * x
sage: str(ex)
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-5-c277618b0823> in <module>()
----> 1 str(ex)

/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.SageObject.__repr__ (build/cythonized/sage/structure/sage_object.c:1962)()

/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/symbolic/expression.so in sage.symbolic.expression.Expression._repr_ (build/cythonized/sage/symbolic/expression.cpp:4749)()

/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/symbolic/ring.so in sage.symbolic.ring.SymbolicRing._repr_element_ (build/cythonized/sage/symbolic/ring.cpp:8462)()

RuntimeError: comparing typeid's
```



---

Comment by rws created at 2014-12-11 15:14:35

I get the same(?) error in the current #7660.

```
sage: theta = var('theta')
sage: eqn =   (x^3 + theta < sin(x*theta))
sage: eqn/theta
<repr(<sage.symbolic.expression.Expression at 0x7f3fe34efef0>) failed: RuntimeError: comparing typeid's>
```



---

Comment by rws created at 2015-04-25 06:20:12

Also, from comment 16 of #12967:

```
sage: cmp(SR(oo), sqrt(2))
RuntimeError: comparing typeid's
```



---

Comment by rws created at 2015-05-02 08:31:03

With the latest commit in Pynac we now have:

```
sage: ex = sin(x).series(x==0, 3) * x
sage: str(ex)
'x*(1*x + Order(x^3))'
sage: cmp(SR(oo), sqrt(2))
1
sage: bool(SR(oo) < sqrt(2))  
False
sage: bool(SR(oo) > sqrt(2))
False
```

This means there is no longer a runtime error, there is however still code missing in Pynac and Sage to correctly handle these requests (see #12967 and the discussion in #18393).


---

Comment by rws created at 2015-07-12 06:41:22

The last of the cases given in the comments is now fixed in #18877, so this ticket should doctest all related ones.


---

Comment by rws created at 2015-07-16 06:52:03

Wrong, the `cmp` problem still remains...

```
sage: cmp(SR(oo), sqrt(2))
1
sage: cmp(SR(-oo), sqrt(2))
1
sage: cmp(sqrt(2), SR(oo))
1
sage: cmp(sqrt(2), SR(-oo))
1
```

but this is clearly #16397 so this ticket should doctest the `bool` fixes.


---

Comment by rws created at 2015-07-16 08:04:13

Changing status from new to needs_review.


---

Comment by rws created at 2015-07-16 08:04:13

New commits:


---

Comment by jdemeyer created at 2015-07-16 13:22:46

Please remove all those `bool`s. You can just write `assert(x > y)` or `assert(not x > y)`.


---

Comment by jdemeyer created at 2015-07-16 13:22:46

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-07-16 15:02:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2015-07-16 15:02:52

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-07-17 11:22:27

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-07-18 09:36:45

Resolution: fixed
