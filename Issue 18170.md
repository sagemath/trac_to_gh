# Issue 18170: Fix standard_packages(), optional_packages(), and experimental_packages()

archive/issues_018170.json:
```json
{
    "body": "CC:  @videlec @vbraun @nexttime\n\nThose functions are broken (and not doctested) in the latest beta. This branches fixes it.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18407\n\n",
    "created_at": "2015-05-12T14:54:14Z",
    "labels": [
        "distribution",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "Fix standard_packages(), optional_packages(), and experimental_packages()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18170",
    "user": "@nathanncohen"
}
```
CC:  @videlec @vbraun @nexttime

Those functions are broken (and not doctested) in the latest beta. This branches fixes it.

Issue created by migration from https://trac.sagemath.org/ticket/18407





---

archive/issue_comments_245021.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-12T14:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245021",
    "user": "@nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_245022.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-12T14:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245022",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245023.json:
```json
{
    "body": "Is it disjoint from the bash scripts that we have\n\n```\n$ sage -standard\nUsing Sage Server http://www.sagemath.org/packages\n\nStandard packages:\n\natlas-3.10.1.p7 ........................ installed version: 3.10.2\nboehm_gc-7.2d.p0 ....................... already installed\nboost_cropped-1.52.0 ................... already installed\n...\ntachyon-0.98.9.p5 ...................... already installed\nzlib-1.2.8.p0 .......................... already installed\nzn_poly-0.9.p11 ........................ already installed\n\n$ sage -optional\nUsing Sage Server http://www.sagemath.org/packages\n\nOptional packages:\n\n4ti2-1.6.2 ............................. not installed\nPyQt_x11-4.9.1.p0 ...................... not installed\nTOPCOM-0.17.4 .......................... not installed\nautotools-20121217 ..................... not installed\n...\ntrac-0.11.5.p0 ......................... not installed\nvalgrind-3.8.1.p0 ...................... not installed\nzeromq-3.2.0.p0 ........................ installed version: 4.0.5\n```\n",
    "created_at": "2015-05-12T15:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245023",
    "user": "@videlec"
}
```

Is it disjoint from the bash scripts that we have

```
$ sage -standard
Using Sage Server http://www.sagemath.org/packages

Standard packages:

atlas-3.10.1.p7 ........................ installed version: 3.10.2
boehm_gc-7.2d.p0 ....................... already installed
boost_cropped-1.52.0 ................... already installed
...
tachyon-0.98.9.p5 ...................... already installed
zlib-1.2.8.p0 .......................... already installed
zn_poly-0.9.p11 ........................ already installed

$ sage -optional
Using Sage Server http://www.sagemath.org/packages

Optional packages:

4ti2-1.6.2 ............................. not installed
PyQt_x11-4.9.1.p0 ...................... not installed
TOPCOM-0.17.4 .......................... not installed
autotools-20121217 ..................... not installed
...
trac-0.11.5.p0 ......................... not installed
valgrind-3.8.1.p0 ...................... not installed
zeromq-3.2.0.p0 ........................ installed version: 4.0.5
```




---

archive/issue_comments_245024.json:
```json
{
    "body": "Hmmm,\n\n* that's only part of the problem,\n* I was going to rather fix it by adding a `--machine-readable` (say) option to `sage-list-packages` (at #16759, but I haven't written any code yet, also because of #15642).",
    "created_at": "2015-05-12T15:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245024",
    "user": "@nexttime"
}
```

Hmmm,

* that's only part of the problem,
* I was going to rather fix it by adding a `--machine-readable` (say) option to `sage-list-packages` (at #16759, but I haven't written any code yet, also because of #15642).



---

archive/issue_comments_245025.json:
```json
{
    "body": "> Is it disjoint from the bash scripts that we have\n\nNo, it parses the output.",
    "created_at": "2015-05-12T15:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245025",
    "user": "@nathanncohen"
}
```

> Is it disjoint from the bash scripts that we have

No, it parses the output.



---

archive/issue_comments_245026.json:
```json
{
    "body": ">  * that's only part of the problem,\n>  * I was going to rather fix it by adding a `--machine-readable` (say) option to `sage-list-packages` (at #16759, but I haven't written any code yet, also because of #15642).\n\nWell, that branch fixes the old function, and has the nice property of being ready and implemented. We will still need those functions in the long run, so it is not incompatible with what you plan on doing anyway. I really have nothing against seeing this parsing code rewritten in the future.\n\nI am writing a doc patch at the moment, which uses these functions to make sure that all packages appear in our doc.\n\nNathann",
    "created_at": "2015-05-12T15:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245026",
    "user": "@nathanncohen"
}
```

>  * that's only part of the problem,
>  * I was going to rather fix it by adding a `--machine-readable` (say) option to `sage-list-packages` (at #16759, but I haven't written any code yet, also because of #15642).

Well, that branch fixes the old function, and has the nice property of being ready and implemented. We will still need those functions in the long run, so it is not incompatible with what you plan on doing anyway. I really have nothing against seeing this parsing code rewritten in the future.

I am writing a doc patch at the moment, which uses these functions to make sure that all packages appear in our doc.

Nathann



---

archive/issue_comments_245027.json:
```json
{
    "body": "Hmmm ok, although it now exposes the brokenness of the shell script in Python as well... ;-)\n\nOne tiny thing:\n\n```python\n        print(\"Standard package list (shown above) appears to be currently\")\n```\n\n=>\n\n```python\n        print(\"List of %s packages (shown above) appears to be currently\" % package_type)\n```\n",
    "created_at": "2015-05-12T15:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245027",
    "user": "@nexttime"
}
```

Hmmm ok, although it now exposes the brokenness of the shell script in Python as well... ;-)

One tiny thing:

```python
        print("Standard package list (shown above) appears to be currently")
```

=>

```python
        print("List of %s packages (shown above) appears to be currently" % package_type)
```




---

archive/issue_comments_245028.json:
```json
{
    "body": "Can you add a commit? I am working on another patch at the moment.",
    "created_at": "2015-05-12T15:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245028",
    "user": "@nathanncohen"
}
```

Can you add a commit? I am working on another patch at the moment.



---

archive/issue_comments_245029.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-12T15:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245029",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245030.json:
```json
{
    "body": "Thanks !! I am almost done with my other patch which lists all packages in the doc. I also noticed some problem in the output of this one, which I will fix real soon `;-)`",
    "created_at": "2015-05-12T15:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245030",
    "user": "@nathanncohen"
}
```

Thanks !! I am almost done with my other patch which lists all packages in the doc. I also noticed some problem in the output of this one, which I will fix real soon `;-)`



---

archive/issue_comments_245031.json:
```json
{
    "body": "Replying to [comment:8 ncohen]:\n> Can you add a commit? I am working on another patch at the moment.\n\nDone, but\n\n```\n$ ./sage -c 'print optional_packages()'\n(['4ti2', 'git', 'pyzmq', 'zeromq'], ['PyQt_x11', 'TOPCOM', 'autotools', 'beautifulsoup', 'benzene', 'biopython', 'brian', 'buckygen', 'cbc', 'ccache', 'chomp', 'cluster_seed', 'coxeter3', 'cryptominisat', 'cunningham_tables', 'database_cremona_ellcurve', 'database_gap', 'database_jones_numfield', 'database_kohel', 'database_odlyzko_zeta .................. not installe', 'database_pari', 'database_stein_watkins_mini.p0 ......... not installe', 'database_symbolic_data', 'dot2tex', 'extra_docs', 'gap_packages', 'gcc', 'gdbm', 'ginv-1.9', 'gnuplotpy', 'guppy', 'java3d', 'kash3-2008-07', 'knoboo', 'libogg', 'libtheora', 'lie', 'lrs', 'mpi4py', 'nauty', 'normaliz', 'nose', 'nzmath', 'openmpi', 'openssl', 'ore_algebra', 'p_group_cohomology', 'patchbot', 'phc', 'pybtex', 'pycryptoplus-20100809', 'pyx', 'qhull', 'sage_mode', 'sip', 'trac', 'valgrind'])\n$ ./sage -c 'print experimental_packages()'\n(['pexpect'], ['PyQt4', 'PyVTK', 'QScintilla2', 'asymptote', 'bison', 'boost_1_34_1 ........................... not installe', 'cadabra', 'clapack', 'clisp', 'cmake', 'csdp', 'dvipng', 'ets', 'fes', 'flex', 'gcc', 'gdb', 'gnofract4d', 'gnuplot', 'graphviz', 'latte_int', 'libcprops', 'libjpeg', 'libsigsegv', 'macaulay2-1.1', 'mayavi_2.2.1 ........................... not installe', 'meataxe', 'modglue', 'mpich2', 'numarray', 'numeric', 'openopt', 'pcre', 'phcpack', 'polymake', 'processing', 'pygame', 'pygsl', 'pygtk', 'pynifti', 'pyqt', 'pyrexembed-0.1.1', 'qasm', 'qepcad', 'quantlib', 'quantlib_swig', 'reallib3-linux', 'sandpile', 'scitools++ ............................. not installe', 'semigroupe-2.0', 'simpqs', 'sip', 'soya', 'soya_cvs', 'superlu', 'surf', 'vtk_meta', 'wxPython', 'yafray', 'yassl'])\n```\n",
    "created_at": "2015-05-12T15:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245031",
    "user": "@nexttime"
}
```

Replying to [comment:8 ncohen]:
> Can you add a commit? I am working on another patch at the moment.

Done, but

```
$ ./sage -c 'print optional_packages()'
(['4ti2', 'git', 'pyzmq', 'zeromq'], ['PyQt_x11', 'TOPCOM', 'autotools', 'beautifulsoup', 'benzene', 'biopython', 'brian', 'buckygen', 'cbc', 'ccache', 'chomp', 'cluster_seed', 'coxeter3', 'cryptominisat', 'cunningham_tables', 'database_cremona_ellcurve', 'database_gap', 'database_jones_numfield', 'database_kohel', 'database_odlyzko_zeta .................. not installe', 'database_pari', 'database_stein_watkins_mini.p0 ......... not installe', 'database_symbolic_data', 'dot2tex', 'extra_docs', 'gap_packages', 'gcc', 'gdbm', 'ginv-1.9', 'gnuplotpy', 'guppy', 'java3d', 'kash3-2008-07', 'knoboo', 'libogg', 'libtheora', 'lie', 'lrs', 'mpi4py', 'nauty', 'normaliz', 'nose', 'nzmath', 'openmpi', 'openssl', 'ore_algebra', 'p_group_cohomology', 'patchbot', 'phc', 'pybtex', 'pycryptoplus-20100809', 'pyx', 'qhull', 'sage_mode', 'sip', 'trac', 'valgrind'])
$ ./sage -c 'print experimental_packages()'
(['pexpect'], ['PyQt4', 'PyVTK', 'QScintilla2', 'asymptote', 'bison', 'boost_1_34_1 ........................... not installe', 'cadabra', 'clapack', 'clisp', 'cmake', 'csdp', 'dvipng', 'ets', 'fes', 'flex', 'gcc', 'gdb', 'gnofract4d', 'gnuplot', 'graphviz', 'latte_int', 'libcprops', 'libjpeg', 'libsigsegv', 'macaulay2-1.1', 'mayavi_2.2.1 ........................... not installe', 'meataxe', 'modglue', 'mpich2', 'numarray', 'numeric', 'openopt', 'pcre', 'phcpack', 'polymake', 'processing', 'pygame', 'pygsl', 'pygtk', 'pynifti', 'pyqt', 'pyrexembed-0.1.1', 'qasm', 'qepcad', 'quantlib', 'quantlib_swig', 'reallib3-linux', 'sandpile', 'scitools++ ............................. not installe', 'semigroupe-2.0', 'simpqs', 'sip', 'soya', 'soya_cvs', 'superlu', 'surf', 'vtk_meta', 'wxPython', 'yafray', 'yassl'])
```




---

archive/issue_comments_245032.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-12T15:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245032",
    "user": "@nexttime"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_245033.json:
```json
{
    "body": "Seems you already noticed the *pas install\u00e9*(?)",
    "created_at": "2015-05-12T15:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245033",
    "user": "@nexttime"
}
```

Seems you already noticed the *pas installé*(?)



---

archive/issue_comments_245034.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-12T15:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245034",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245035.json:
```json
{
    "body": "> Seems you already noticed the *pas install\u00e9*(?)\n\nIndeed. But come on, that's written in french on my console too `;-)`\n\nNathann",
    "created_at": "2015-05-12T15:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245035",
    "user": "@nathanncohen"
}
```

> Seems you already noticed the *pas installé*(?)

Indeed. But come on, that's written in french on my console too `;-)`

Nathann



---

archive/issue_comments_245036.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-12T15:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245036",
    "user": "@nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_245037.json:
```json
{
    "body": "Replying to [comment:14 ncohen]:\n> > Seems you already noticed the *pas install\u00e9*(?)\n> \n> Indeed. But come on, that's written in french on my console too `;-)`\n\nI thought you'd just `s/not/pas/`...\n\n\n\n\nAnd I won't complain about removing `lambda` I love so much, nor efficiency w.r.t. using `in` **and** `.rfind()`. ;-)",
    "created_at": "2015-05-12T16:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245037",
    "user": "@nexttime"
}
```

Replying to [comment:14 ncohen]:
> > Seems you already noticed the *pas installé*(?)
> 
> Indeed. But come on, that's written in french on my console too `;-)`

I thought you'd just `s/not/pas/`...




And I won't complain about removing `lambda` I love so much, nor efficiency w.r.t. using `in` **and** `.rfind()`. ;-)



---

archive/issue_comments_245038.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-12T16:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245038",
    "user": "@nexttime"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_245039.json:
```json
{
    "body": "> And I won't complain about removing `lambda` I love so much, nor efficiency w.r.t. using `in` **and** `.rfind()`. ;-)\n\nI would have loved to do it with lambda functions only, but I really needed to define a variable here `:-P`\n\nThank you very much for the review. The list of packages is built by #18408 `:-)`\n\nNathann",
    "created_at": "2015-05-12T16:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245039",
    "user": "@nathanncohen"
}
```

> And I won't complain about removing `lambda` I love so much, nor efficiency w.r.t. using `in` **and** `.rfind()`. ;-)

I would have loved to do it with lambda functions only, but I really needed to define a variable here `:-P`

Thank you very much for the review. The list of packages is built by #18408 `:-)`

Nathann



---

archive/issue_comments_245040.json:
```json
{
    "body": "Hmmm, may I revert the status or do we have to open a follow-up? XD\n\nWe have to `s/# internet/# optional -- internet/` I think...\n\nSorry, tested but missed that somehow.",
    "created_at": "2015-05-12T16:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245040",
    "user": "@nexttime"
}
```

Hmmm, may I revert the status or do we have to open a follow-up? XD

We have to `s/# internet/# optional -- internet/` I think...

Sorry, tested but missed that somehow.



---

archive/issue_comments_245041.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-12T16:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245041",
    "user": "@nathanncohen"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_245042.json:
```json
{
    "body": "> Hmmm, may I revert the status or do we have to open a follow-up? XD\n\nOh True, True `:-/`\n\nJust a second.\n\nNathann",
    "created_at": "2015-05-12T16:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245042",
    "user": "@nathanncohen"
}
```

> Hmmm, may I revert the status or do we have to open a follow-up? XD

Oh True, True `:-/`

Just a second.

Nathann



---

archive/issue_comments_245043.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-12T16:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245043",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245044.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-12T16:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245044",
    "user": "@nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_245045.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-12T16:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245045",
    "user": "@nexttime"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_245046.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-13T11:33:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18170#issuecomment-245046",
    "user": "@vbraun"
}
```

Resolution: fixed
