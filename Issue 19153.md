# Issue 19153: Update the documentation of Graph/DiGraph constructors

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2015-10-11 09:37:07

CC:  vdelecroix dcoudert borassi tscrim simonking

All this documentation was pretty outdated, and some formats were missing.

I also tried to make it easier to read/parse, by displaying at the beginning of the INPUT blocks the different formats (and not just by giving their names).

In particular, I do not think that it is very important to burden the users with a 'format' flag in most cases, when there is no ambiguity. However, when the input is a matrix and the behaviour depends on its properties, it is advertised.

A lot of documentation is also removed: some of it is replaced by links toward dedicated modules (i.e. 'how to access the graph catalog') or simply removed: the `__init__` entry in th reference manual is no place to explain how to compute connected components.

There is still a lot of verbosity in this module, and in particular all the file formats *also* appear in the module's documentation (and are, of course, outdated). This will be for later.

One of the points of this branch is also to ease maintainability: when the same things are documented in different places at once, we forget to update all of it when it would be needed. Short, and to the point: that's a reference manual, not a tutorial.

Nathann


---

Comment by ncohen created at 2015-10-11 09:38:57

Last 10 new commits:


---

Comment by ncohen created at 2015-10-11 09:38:57

Changing status from new to needs_review.


---

Comment by dcoudert created at 2015-10-11 10:40:22

will be long to review...

in digraph.py
- `<http://en.wikipedia.org/wiki/Digraph_%28mathematics%29>`_.For a collection`  one space missing
- ```DiGraph({1: {2: 'a', 3:'b'} ,3:{2:'c'}})`` -- return a graph by`  a digraph. Same in several places
- `DiGraph(a_nonsquare_matrix)`  an incidence matrix ?
- `edge `u,f` whenever ``f(u,v)`` is ``True```   -> edge `u,v`
- ```DiGraph(another_digraph)`` -- return a graph from a Sage graph,`  from a Sage graph or digraph ?


in graph.py
- `edge `u,f` whenever ``f(u,v)`` is ``True```   -> edge `u,v`
- ```Graph(another_graph)`` -- return a graph from a Sage graph,`  from a Sage graph or digraph ?
- `only the integers 0, ..., n-1, where n is the number of vertices.`  math mode around 0, ..., n-1 and n ?

may be more later ;)


---

Comment by git created at 2015-10-11 13:44:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-10-11 13:50:22

Helloooooo,

> in digraph.py
> - `<http://en.wikipedia.org/wiki/Digraph_%28mathematics%29>`_.For a collection`  one space missing

Done.

> - ```DiGraph({1: {2: 'a', 3:'b'} ,3:{2:'c'}})`` -- return a graph by`  a digraph. Same in several places

Sorry... Done.

> - `DiGraph(a_nonsquare_matrix)`  an incidence matrix ?

I did not change that, but I will change it if you want me to: let me just tell you why I wrote it this way. I chose to say "nonsquare_matrix" to hint that this is how a matrix is "automatically detected" to be an incidence matrix, and that to make sure one should use the explicit 'format' flag. That's why. If you think that it is still better the other way, tell me and I will update.

> - `edge `u,f` whenever ``f(u,v)`` is ``True```   -> edge `u,v`

Done.

> - ```DiGraph(another_digraph)`` -- return a graph from a Sage graph,`  from a Sage graph or digraph ?

Done.


> in graph.py
> - `edge `u,f` whenever ``f(u,v)`` is ``True```   -> edge `u,v`
Done.

> - ```Graph(another_graph)`` -- return a graph from a Sage graph,`  from a Sage graph or digraph ?
Done.
> - `only the integers 0, ..., n-1, where n is the number of vertices.`  math mode around 0, ..., n-1 and n ?

Done, though I will do something about this parameter because it does not make any sense. It was apparently added during the igraph tickets, but its name (`vertex_labels`) does not hint *at all* at igraph. The doc does not either. People could wonder about its effect with every other possible combinations of inputs, and it only appears in the code because of igraph. So I think we should remove it quick and deal with the igraph case otherwise.

Nathann


---

Comment by borassi created at 2015-10-11 14:10:06

Hellooooooo!

Sorry if I am not very active in these tickets, but I'm quite busy in these days...

Just to say that when I inserted `igraph`, the variable `vertex_labels` was already there, and I only used it in my code. Indeed, you can find examples (written before igraph) where this variable was used (for instance, in `cliques_get_max_clique_graph`).

Though, I have no idea what it was used for! The comment in the code before my modifications was:


```
    -  ``vertex_labels`` - only for implementation == 'c_graph'.
       Whether to allow any object as a vertex (slower), or
       only the integers 0, ..., n-1, where n is the number of vertices.
```

Hope this helps!

Michele

> > - `only the integers 0, ..., n-1, where n is the number of vertices.`  math mode around 0, ..., n-1 and n ?
> > 
> 
> Done, though I will do something about this parameter because it does not make any sense. It was apparently added during the igraph tickets, but its name (`vertex_labels`) does not hint *at all* at igraph. The doc does not either. People could wonder about its effect with every other possible combinations of inputs, and it only appears in the code because of igraph. So I think we should remove it quick and deal with the igraph case otherwise.
> 
> Nathann


---

Comment by ncohen created at 2015-10-11 14:18:42

Yooooooo,

> Sorry if I am not very active in these tickets, but I'm quite busy in these days...

Okay okay. I write these tickets because I want to have some `Graph(filename)` constructor in order to not meet again this problem I had with your .nde files.

> Just to say that when I inserted `igraph`, the variable `vertex_labels` was already there, and I only used it in my code. Indeed, you can find examples (written before igraph) where this variable was used (for instance, in `cliques_get_max_clique_graph`).
> 
> Though, I have no idea what it was used for!

In `cliques_get_max_clique_graph` it seems to be an argument of `.show()` (to display the labels) not an argument of `Graph.__init__`. In the constructor, the only occurrence of this `vertex_labels` argument is in the igraph code. If it is user anywhere else, well, it is actually ignored. It is not very bad anyway, just something that has to be done.

Nathann


---

Comment by dcoudert created at 2015-10-11 14:19:28

> > - `DiGraph(a_nonsquare_matrix)`  an incidence matrix ?
> 
> I did not change that, but I will change it if you want me to: let me just tell you why I wrote it this way. I chose to say "nonsquare_matrix" to hint that this is how a matrix is "automatically detected" to be an incidence matrix, and that to make sure one should use the explicit 'format' flag. That's why. If you think that it is still better the other way, tell me and I will update.
Now I understand and I agree with you.


---

Comment by git created at 2015-10-15 06:38:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-10-15 06:40:17

Added a mention that a function must be symmetric, because of the following thread: https://groups.google.com/d/topic/sage-devel/TYpyrKCw8Zc/discussion


---

Comment by git created at 2015-10-16 10:26:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-16 10:36:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-16 10:37:16

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by dcoudert created at 2015-10-24 12:27:22

Hello,

the patch passes all tests and the produced doc is much better.
For me the patch is good to go, but you will certainly have to rebase it on last beta first.

David.


---

Comment by ncohen created at 2015-10-25 07:43:24

Hello !

Thank you for the review ! It seems that there is nothing to rebase -- there is no conflict with the latest beta.

Nathann


---

Comment by ncohen created at 2015-10-25 07:43:33

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2015-10-25 11:38:42

Good.


---

Comment by vbraun created at 2015-10-25 22:08:47

Resolution: fixed
