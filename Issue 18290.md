# Issue 18290: Hughes Plane for block_design

Issue created by migration from https://trac.sagemath.org/ticket/18527

Original creator: q.honore

Original creation time: 2015-05-27 15:45:34

CC:  vdelecroix ncohen

Add functions to build Hughes planes.


---

Comment by git created at 2015-05-27 15:46:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-05-27 16:20:25

Hello Quentin,

You need to start a *new* branch for this ticket. Here you started from the same as for #18439.

Vincent


---

Comment by vdelecroix created at 2015-05-27 17:02:27

Some more comments:

1. you should break the lines in your comments. The line `The construction of a Hughes plane is based on a nearfield ...` is one kilometer long. Try to keep the width around 80.

2. you should align the comments `# xyz` with the code

3. It would be cool to have some code in the `EXAMPLES` section which proves that Hughes plane are indeed different from the standard finite projective plane. You can show that the theorem of Desargues is not satisfied.

4. For the function `normalize` it would be better to say that it is only intended to be used in `HughesPlane`. And you can even call it `normalize_hughes_plane_point`, in other words choose something more explicit.

5. In the function `HughesPlane`, it would be nice to add few words explaining the construction and also add references (for example to Hughes original article and also Dembowski 1971)

Vincent


---

Comment by git created at 2015-06-01 08:38:12

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2015-06-01 08:41:02

Instead of calling 'is_projective_plane' in the constructor of desarguesian projective planes, could you make it return a BIBD instead of a Block Design? This way, the constructor would automatically check the property.

Thanks,

Nathann


---

Comment by git created at 2015-06-02 11:41:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-06-02 15:38:28

The modification in `5a7832b` is responsible for this failure:

```
sage -t --long combinat/designs/incidence_structures.py
**********************************************************************
File "combinat/designs/incidence_structures.py", line 1500, in sage.combinat.designs.incidence_structures.IncidenceStructure.automorphism_group
Failed example:
    P = designs.DesarguesianProjectivePlaneDesign(2); P
Expected:
    Incidence structure with 7 points and 7 blocks
Got:
    (7,3,1)-Balanced Incomplete Block Design
**********************************************************************
1 item had failures:
   1 of  12 in sage.combinat.designs.incidence_structures.IncidenceStructure.automorphism_group
    [294 tests, 1 failure, 1.42 s]
```


When you are done with this correction, you can switch the status to `needs review`.

Vincent


---

Comment by vdelecroix created at 2015-06-02 15:38:28

Changing type from PLEASE CHANGE to enhancement.


---

Comment by git created at 2015-06-03 07:06:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-06-03 07:51:04

From [comment:7 comment:7]:
> *When you are done with this correction, you can switch the status to `needs_review`.*

This means: go to _modify ticket_ in the bottom of the page. And in the _Action_ part chose the _needs_review_.


---

Comment by q.honore created at 2015-06-03 08:03:24

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2015-06-03 08:49:28

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2015-06-03 08:49:28

Hello Quentin,

There is a lot of work to do in the documentation. Most of it is uncomprehensible. Hopefully I know what you are trying to do but any other person will not get a word. I already modified some of it in my commit at `public/18527` but there are still a lot of things to do:
 - In `HughesPlane` the following sentence is uncomprehensible

```
    For p an odd prime.
    If kernel K of order `p^n` coincides with the center of a nearfield N.
    The construction of a Hughes plane is based on N of order `p^2n`.
```

   you should explain *simply* what is the Hughes plane. If it is complicated just make a reference to wikipedia and just explain what it is (e.g. The Hughes plane is a finite projective plane introduced by XYZ and which is not Desarguesian)

- If you want to include mathematics formula in the documentation you must use the block `MATH`. This is described in details in [the developer's guide](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings)

- the example that shows that the Hughes plane is not Desarguesian is not finished... And you should explain what you are doing with sentences (not Python comments starting with `#`). I already modified and simplified the begining.

Vincent
----
New commits:


---

Comment by vdelecroix created at 2015-06-03 08:50:16

And also: always put a space around equality signs `a = b` and not `a=b`. Similarly, in functions write `f(a, b, c)` and not `f(a,b,c)`.


---

Comment by git created at 2015-06-03 10:11:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-06-03 10:56:31

Hello,

When you are done with your changes, you need to set back to `needs review`. That way I know that I need to have a look.

Some more comments:

- with your last commit the test do not pass
- put spaces around equality signs `a = b` and not `a=b`. Similarly, add spaces in function declaration `f(a, b)` and not `f(a,b)`.
- When you define the Hughes plane you start with `p` being an odd prime but it is never used
- for coherence of notations, instead of using `n2` and `n` it would be better to use `q2` and `q` (and do not forget to modify the `INPUT` section)

I did a bit of profiling and it appears that most of the time is spent in doing matrix by vector multiplication! I will try to see whether it is possible to improve that part (in another ticket).

Vincent


---

Comment by git created at 2015-06-03 11:53:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by q.honore created at 2015-06-03 11:54:39

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-06-03 11:58:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-06-03 12:25:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-06-03 12:26:47

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2015-06-03 12:26:47

In my review commits I changed few things (removed `random` from `random_q3_minus_one_matrix`, make `HughesPlane` works for non prime `q` and improve a bit the code).

There are still some issues with the documentation. Please pay more attention to what you write.

You wrote

```
Return the Hughes projective plane of order `n2`.
```

But the name of the parameter is now `q2`. Moreover you must use double quotes for the parameters ```q2````. Simple ones are for latex code.

This is not a sentence

```
For q an odd prime.
```


When you test the fact that it is not Desarguesian, it is weird to do it in two ways. Here you print the name of the points

```
        sage: set(b_0_1).intersection(b_57_70)
        {2}
        sage: set(b_1_10).intersection(b_70_59)
        {73}
        sage: set(b_10_0).intersection(b_59_57)
        {60}
```

But then you just test equality

```
        sage: p = set(b_0_57).intersection(b_1_70)
        sage: q = set(b_1_70).intersection(b_10_59)
        sage: p == q
        False
```

You should do it coherently.

You can also add a section `AUTHORS` with your name in the function `HughesPlane` (see the developer guide).

Vincent


---

Comment by vdelecroix created at 2015-06-03 12:34:40

Replying to [comment:19 vdelecroix]:
> When you test the fact that it is not Desarguesian, it is weird to do it in two ways. Here you print the name of the points
> <SNIP>
> But then you just test equality
> <SNIP>

Oups. I understood... you are not testing the same thing! Sorry. Forget about this specific comment.


---

Comment by git created at 2015-06-03 13:02:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by q.honore created at 2015-06-03 13:03:05

New commits:
----
New commits:


---

Comment by q.honore created at 2015-06-03 13:03:05

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-06-03 13:51:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-06-03 13:54:13

When you add some stuff pay attention to the fact that you do not add trailing whitespaces (i.e. spaces at the end of the lines).

I added a small commit which move around some stuff and simplify the documentation.

There is one more thing to do: the new function `HughesPlane` does not appear in the list of the functions available in the top of the file `design_catalog.py`. You can put the reference just after `DesarguesianProjectivePlaneDesign`.

Vincent


---

Comment by vdelecroix created at 2015-06-03 13:54:13

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-06-04 07:02:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by q.honore created at 2015-06-04 07:09:16

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2015-06-04 08:12:10

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-06-04 22:46:29

Resolution: fixed
