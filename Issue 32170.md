# Issue 32170: sage.symbolic.function: Remove direct use of cimports from pynac

Issue created by migration from https://trac.sagemath.org/ticket/32407

Original creator: mkoeppe

Original creation time: 2021-08-22 03:12:44

CC:  @kliem tscrim

Similar and in extension of #32391.

Preparation for #32386.


---

Comment by git created at 2021-08-22 20:20:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-08-22 20:25:05

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2021-08-22 21:28:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-08-22 21:49:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-08-22 21:52:10

Changing status from new to needs_review.


---

Comment by git created at 2021-08-22 21:53:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2021-08-23 06:05:40

Changing status from needs_review to needs_work.


---

Comment by @kliem created at 2021-08-23 06:05:40

The `cpdef` functions should have doctests for coverage.


---

Comment by git created at 2021-08-24 18:51:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-08-24 20:39:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-08-24 20:40:18

Changing status from needs_work to needs_review.


---

Comment by @kliem created at 2021-08-25 07:26:25


```diff
         sage: from sage.symbolic.function import BuiltinFunction
-        sage: from sage.symbolic.expression import register_or_update_function, call_registered_function
         sage: class Archosaurian(BuiltinFunction):
         ....:     def __init__(self):
         ....:         BuiltinFunction.__init__(self, 'archsaur', nargs=1)
         ....:     def _eval_(self, x):
         ....:         return x * exp(x)
         sage: archsaur = Archosaurian()  # indirect doctest
         sage: archsaur(2)
         2*e^2
```


The import isn't used.


---

Comment by git created at 2021-08-25 21:51:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-08-26 18:31:25

patchbot is morally green (failures are from a missing docbuild on the patchbot)


---

Comment by @kliem created at 2021-08-26 19:18:29

Actually this ticket leads to failure of docbuild and this should be fixed.

It is fixed in #32386 and can be somewhat cherry-picked from there.

The problem seems to be with


```
:class:`Expression`s
```


This doesn't seem to work, but you can do

```
:class:`Expression` (Expressions)
```

which supposedly has `Expressions` as the link text
(for some reason I have fixed it with `Expression's` in #32386, which is wrong grammar.


---

Comment by mkoeppe created at 2021-08-26 19:21:42

Ah! Thanks for the explanation


---

Comment by git created at 2021-08-26 19:36:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2021-08-26 23:47:46

Replying to [comment:16 gh-kliem]:
> Actually this ticket leads to failure of docbuild and this should be fixed.
> 
> It is fixed in #32386 and can be somewhat cherry-picked from there.
> 
> The problem seems to be with
> 
> {{{
> :class:`Expression`s
> }}}
> 
> This doesn't seem to work, but you can do
> {{{
> :class:`Expression` (Expressions)
> }}}
> which supposedly has `Expressions` as the link text
> (for some reason I have fixed it with `Expression's` in #32386, which is wrong grammar.

That is also not quite correct as I believe you want

```
:class:`Expressions <Expression>`
```

to show `Expressions` but link to the class `Expression`. Although you can also do something like `:class:`Expression`-s` or `'s`, but I won't worry too much about the grammar there...


---

Comment by mkoeppe created at 2021-08-27 00:02:11

In the meantime (in 06e8c31) I have reworded it in a different way


---

Comment by @kliem created at 2021-08-27 06:09:41

Replying to [comment:19 tscrim]:
> Replying to [comment:16 gh-kliem]:
> > Actually this ticket leads to failure of docbuild and this should be fixed.
> > 
> > It is fixed in #32386 and can be somewhat cherry-picked from there.
> > 
> > The problem seems to be with
> > 
> > {{{
> > :class:`Expression`s
> > }}}
> > 
> > This doesn't seem to work, but you can do
> > {{{
> > :class:`Expression` (Expressions)
> > }}}
> > which supposedly has `Expressions` as the link text
> > (for some reason I have fixed it with `Expression's` in #32386, which is wrong grammar.
> 
> That is also not quite correct as I believe you want
> {{{
> :class:`Expressions <Expression>`
> }}}
> to show `Expressions` but link to the class `Expression`. Although you can also do something like `:class:`Expression`-s` or `'s`, but I won't worry too much about the grammar there...

I see. I got confused by the documentation.


---

Comment by @kliem created at 2021-08-27 16:13:53

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2021-08-27 16:13:53

LGTM.


---

Comment by mkoeppe created at 2021-08-27 18:47:49

Thank you!


---

Comment by vbraun created at 2021-09-13 22:19:05

Resolution: fixed
