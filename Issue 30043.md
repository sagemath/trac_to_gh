# Issue 30043: Immutability of Affine Connections

Issue created by migration from https://trac.sagemath.org/ticket/30280

Original creator: @mjungmath

Original creation time: 2020-08-03 16:47:39




---

Comment by @mjungmath created at 2020-08-03 16:58:12

Changing component from PLEASE CHANGE to manifolds.


---

Comment by @mjungmath created at 2020-08-03 16:58:12

Changing type from PLEASE CHANGE to defect.


---

Comment by @mjungmath created at 2020-08-03 18:28:57

Two things are strange here. First, the test suite starts a pickling test, that didn't happen before. Secondly, for some reason `is_immutable()` does not invoke properly. The doctests fail.

I have uploaded my code. Can someone please take a short look?
----
New commits:


---

Comment by git created at 2020-08-03 22:22:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mjungmath created at 2020-08-03 22:31:24

I have no idea what the problem was. Until this is resolved, I propose to remove the inheritance and implement the immutability manually, see last commit.


---

Comment by @mjungmath created at 2020-08-04 07:54:31

Changing status from new to needs_review.


---

Comment by git created at 2020-08-04 08:22:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-08-04 15:14:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-08-04 16:59:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-08-04 21:50:16

I think it would be better to rebase it, removing the reverted commit and the reverting commit.


---

Comment by git created at 2020-08-04 22:13:22

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @mjungmath created at 2020-08-04 22:13:58

Replying to [comment:12 mkoeppe]:
> I think it would be better to rebase it, removing the reverted commit and the reverting commit.

Like this? I hope everything worked out during the rebase.


---

Comment by @mjungmath created at 2020-08-04 22:15:47

No, apparently not...I hate rebasing...


---

Comment by git created at 2020-08-04 22:18:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mjungmath created at 2020-08-04 22:19:08

Damn it...


---

Comment by @mjungmath created at 2020-08-04 22:19:20

Can you fix this? Please? :-/

I don't even know what went wrong during the rebase. The last commit is somehow missing, but it shouldn't.

Then I messed it up by merging that last commit again. That was stupid.


---

Comment by mkoeppe created at 2020-08-04 22:50:12

Sure, let me take a look


---

Comment by @mjungmath created at 2020-08-04 23:01:41

Thank you! :)


---

Comment by mkoeppe created at 2020-08-05 00:30:03

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-08-05 00:30:03

New commits:


---

Comment by @mjungmath created at 2020-08-05 05:56:08

Thanks! May I ask how you did it?


---

Comment by mkoeppe created at 2020-08-05 14:19:38

I got really weird merge conflicts when trying to do `git rebase -i`, so I just squashed everything on top of #30285 by doing `git trac fetch 30285 && git reset FETCH_HEAD && git commit -a`.


---

Comment by vbraun created at 2020-08-10 18:50:10

Resolution: fixed
