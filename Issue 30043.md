# Issue 30043: Immutability of Affine Connections

archive/issues_030043.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/30280\n\n",
    "created_at": "2020-08-03T16:47:39Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Immutability of Affine Connections",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30043",
    "user": "https://github.com/mjungmath"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/30280





---

archive/issue_comments_426563.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to manifolds.",
    "created_at": "2020-08-03T16:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426563",
    "user": "https://github.com/mjungmath"
}
```

Changing component from PLEASE CHANGE to manifolds.



---

archive/issue_comments_426564.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2020-08-03T16:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426564",
    "user": "https://github.com/mjungmath"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_426565.json:
```json
{
    "body": "Two things are strange here. First, the test suite starts a pickling test, that didn't happen before. Secondly, for some reason `is_immutable()` does not invoke properly. The doctests fail.\n\nI have uploaded my code. Can someone please take a short look?\n----\nNew commits:",
    "created_at": "2020-08-03T18:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426565",
    "user": "https://github.com/mjungmath"
}
```

Two things are strange here. First, the test suite starts a pickling test, that didn't happen before. Secondly, for some reason `is_immutable()` does not invoke properly. The doctests fail.

I have uploaded my code. Can someone please take a short look?
----
New commits:



---

archive/issue_comments_426566.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-03T22:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426566",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426567.json:
```json
{
    "body": "I have no idea what the problem was. Until this is resolved, I propose to remove the inheritance and implement the immutability manually, see last commit.",
    "created_at": "2020-08-03T22:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426567",
    "user": "https://github.com/mjungmath"
}
```

I have no idea what the problem was. Until this is resolved, I propose to remove the inheritance and implement the immutability manually, see last commit.



---

archive/issue_comments_426568.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-04T07:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426568",
    "user": "https://github.com/mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_426569.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T08:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426569",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426570.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T15:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426570",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426571.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T16:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426572.json:
```json
{
    "body": "I think it would be better to rebase it, removing the reverted commit and the reverting commit.",
    "created_at": "2020-08-04T21:50:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426572",
    "user": "https://github.com/mkoeppe"
}
```

I think it would be better to rebase it, removing the reverted commit and the reverting commit.



---

archive/issue_comments_426573.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-04T22:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426573",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_426574.json:
```json
{
    "body": "Replying to [comment:12 mkoeppe]:\n> I think it would be better to rebase it, removing the reverted commit and the reverting commit.\n\nLike this? I hope everything worked out during the rebase.",
    "created_at": "2020-08-04T22:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426574",
    "user": "https://github.com/mjungmath"
}
```

Replying to [comment:12 mkoeppe]:
> I think it would be better to rebase it, removing the reverted commit and the reverting commit.

Like this? I hope everything worked out during the rebase.



---

archive/issue_comments_426575.json:
```json
{
    "body": "No, apparently not...I hate rebasing...",
    "created_at": "2020-08-04T22:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426575",
    "user": "https://github.com/mjungmath"
}
```

No, apparently not...I hate rebasing...



---

archive/issue_comments_426576.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T22:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426576",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426577.json:
```json
{
    "body": "Damn it...",
    "created_at": "2020-08-04T22:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426577",
    "user": "https://github.com/mjungmath"
}
```

Damn it...



---

archive/issue_comments_426578.json:
```json
{
    "body": "Can you fix this? Please? :-/\n\nI don't even know what went wrong during the rebase. The last commit is somehow missing, but it shouldn't.\n\nThen I messed it up by merging that last commit again. That was stupid.",
    "created_at": "2020-08-04T22:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426578",
    "user": "https://github.com/mjungmath"
}
```

Can you fix this? Please? :-/

I don't even know what went wrong during the rebase. The last commit is somehow missing, but it shouldn't.

Then I messed it up by merging that last commit again. That was stupid.



---

archive/issue_comments_426579.json:
```json
{
    "body": "Sure, let me take a look",
    "created_at": "2020-08-04T22:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426579",
    "user": "https://github.com/mkoeppe"
}
```

Sure, let me take a look



---

archive/issue_comments_426580.json:
```json
{
    "body": "Thank you! :)",
    "created_at": "2020-08-04T23:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426580",
    "user": "https://github.com/mjungmath"
}
```

Thank you! :)



---

archive/issue_comments_426581.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-05T00:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426581",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426582.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-08-05T00:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426582",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_426583.json:
```json
{
    "body": "Thanks! May I ask how you did it?",
    "created_at": "2020-08-05T05:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426583",
    "user": "https://github.com/mjungmath"
}
```

Thanks! May I ask how you did it?



---

archive/issue_comments_426584.json:
```json
{
    "body": "I got really weird merge conflicts when trying to do `git rebase -i`, so I just squashed everything on top of #30285 by doing `git trac fetch 30285 && git reset FETCH_HEAD && git commit -a`.",
    "created_at": "2020-08-05T14:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426584",
    "user": "https://github.com/mkoeppe"
}
```

I got really weird merge conflicts when trying to do `git rebase -i`, so I just squashed everything on top of #30285 by doing `git trac fetch 30285 && git reset FETCH_HEAD && git commit -a`.



---

archive/issue_events_027641.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-10T18:50:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30043#event-27641"
}
```



---

archive/issue_comments_426585.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-10T18:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-426585",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
