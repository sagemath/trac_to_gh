# Issue 30043: Immutability of Affine Connections

archive/issues_030043.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/30280\n\n",
    "created_at": "2020-08-03T16:47:39Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Immutability of Affine Connections",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30043",
    "user": "@mjungmath"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/30280





---

archive/issue_comments_427039.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to manifolds.",
    "created_at": "2020-08-03T16:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427039",
    "user": "@mjungmath"
}
```

Changing component from PLEASE CHANGE to manifolds.



---

archive/issue_comments_427040.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2020-08-03T16:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427040",
    "user": "@mjungmath"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_427041.json:
```json
{
    "body": "Two things are strange here. First, the test suite starts a pickling test, that didn't happen before. Secondly, for some reason `is_immutable()` does not invoke properly. The doctests fail.\n\nI have uploaded my code. Can someone please take a short look?\n----\nNew commits:",
    "created_at": "2020-08-03T18:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427041",
    "user": "@mjungmath"
}
```

Two things are strange here. First, the test suite starts a pickling test, that didn't happen before. Secondly, for some reason `is_immutable()` does not invoke properly. The doctests fail.

I have uploaded my code. Can someone please take a short look?
----
New commits:



---

archive/issue_comments_427042.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-03T22:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427042",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_427043.json:
```json
{
    "body": "I have no idea what the problem was. Until this is resolved, I propose to remove the inheritance and implement the immutability manually, see last commit.",
    "created_at": "2020-08-03T22:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427043",
    "user": "@mjungmath"
}
```

I have no idea what the problem was. Until this is resolved, I propose to remove the inheritance and implement the immutability manually, see last commit.



---

archive/issue_comments_427044.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-04T07:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427044",
    "user": "@mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_427045.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T08:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427045",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_427046.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T15:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427046",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_427047.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T16:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427047",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_427048.json:
```json
{
    "body": "I think it would be better to rebase it, removing the reverted commit and the reverting commit.",
    "created_at": "2020-08-04T21:50:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427048",
    "user": "mkoeppe"
}
```

I think it would be better to rebase it, removing the reverted commit and the reverting commit.



---

archive/issue_comments_427049.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-04T22:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427049",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_427050.json:
```json
{
    "body": "Replying to [comment:12 mkoeppe]:\n> I think it would be better to rebase it, removing the reverted commit and the reverting commit.\n\nLike this? I hope everything worked out during the rebase.",
    "created_at": "2020-08-04T22:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427050",
    "user": "@mjungmath"
}
```

Replying to [comment:12 mkoeppe]:
> I think it would be better to rebase it, removing the reverted commit and the reverting commit.

Like this? I hope everything worked out during the rebase.



---

archive/issue_comments_427051.json:
```json
{
    "body": "No, apparently not...I hate rebasing...",
    "created_at": "2020-08-04T22:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427051",
    "user": "@mjungmath"
}
```

No, apparently not...I hate rebasing...



---

archive/issue_comments_427052.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-04T22:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427052",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_427053.json:
```json
{
    "body": "Damn it...",
    "created_at": "2020-08-04T22:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427053",
    "user": "@mjungmath"
}
```

Damn it...



---

archive/issue_comments_427054.json:
```json
{
    "body": "Can you fix this? Please? :-/\n\nI don't even know what went wrong during the rebase. The last commit is somehow missing, but it shouldn't.\n\nThen I messed it up by merging that last commit again. That was stupid.",
    "created_at": "2020-08-04T22:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427054",
    "user": "@mjungmath"
}
```

Can you fix this? Please? :-/

I don't even know what went wrong during the rebase. The last commit is somehow missing, but it shouldn't.

Then I messed it up by merging that last commit again. That was stupid.



---

archive/issue_comments_427055.json:
```json
{
    "body": "Sure, let me take a look",
    "created_at": "2020-08-04T22:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427055",
    "user": "mkoeppe"
}
```

Sure, let me take a look



---

archive/issue_comments_427056.json:
```json
{
    "body": "Thank you! :)",
    "created_at": "2020-08-04T23:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427056",
    "user": "@mjungmath"
}
```

Thank you! :)



---

archive/issue_comments_427057.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-05T00:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427057",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_427058.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-08-05T00:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427058",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_427059.json:
```json
{
    "body": "Thanks! May I ask how you did it?",
    "created_at": "2020-08-05T05:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427059",
    "user": "@mjungmath"
}
```

Thanks! May I ask how you did it?



---

archive/issue_comments_427060.json:
```json
{
    "body": "I got really weird merge conflicts when trying to do `git rebase -i`, so I just squashed everything on top of #30285 by doing `git trac fetch 30285 && git reset FETCH_HEAD && git commit -a`.",
    "created_at": "2020-08-05T14:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427060",
    "user": "mkoeppe"
}
```

I got really weird merge conflicts when trying to do `git rebase -i`, so I just squashed everything on top of #30285 by doing `git trac fetch 30285 && git reset FETCH_HEAD && git commit -a`.



---

archive/issue_comments_427061.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-10T18:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30043#issuecomment-427061",
    "user": "vbraun"
}
```

Resolution: fixed
