# Issue 13864: nauty_geng is naughty

Issue created by migration from https://trac.sagemath.org/ticket/14068

Original creator: azi

Original creation time: 2013-02-06 13:25:04

Assignee: jason, ncohen, rlm

CC:  dimpase

I think nauty_geng should not ignore geng's return value and return an exception if the returned value is not 0. Consider the following:


```
def find_counterexample(n):
   for G in graphs.nauty_geng("-c" + str(n)):
     if is_counterexample(G):
        print 'Yeees, there is a counterexample'
        return 
   print 'No counterexamples! Conjecture holds'
```


the code appears to be just fine but it has a bug! Namely it tries to run the program geng with the parameter "-cn" instead of "-c n". Hence geng returns an error and instead of getting an error in Sage, it simply does not generate  any graphs.

There are plenty of ways one could shot himself in the foot in this way and not know it. Hence I propose this gets fixed somehow!


---

Comment by dcoudert created at 2019-09-17 15:44:06

Changing status from new to needs_review.


---

Comment by dcoudert created at 2019-09-17 15:44:06

A possible fix is to raise an error only when parameter debug is False and that something goes wrong.

When debug is True, the behavior remains the same as before and so we continue to display the message output by geng in stderr.
----
New commits:


---

Comment by dcoudert created at 2019-09-18 09:58:35

I don't understand the reported pyflakes error with `sage.graphs.strongly_regular_db`. Other modules are imported the same way without causing pyflakes errors.


---

Comment by dimpase created at 2019-09-21 22:28:16

Replying to [comment:6 dcoudert]:
> I don't understand the reported pyflakes error with `sage.graphs.strongly_regular_db`. Other modules are imported the same way without causing pyflakes errors.

perhaps pyflakes is confused by `staticmethod()` thing.
The only place where a method from `strongly_regular_db` is used is

```
strongly_regular_graph = staticmethod(sage.graphs.strongly_regular_db.strongly_regular_graph)
```

by the way, I don't understand why it's not written as

```
from . import strongly_regular_db
...
strongly_regular_graph = staticmethod(strongly_regular_db.strongly_regular_graph)
```

Is it cause this code pre-dates `from .` syntax?


---

Comment by git created at 2019-09-22 00:19:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2019-09-22 00:20:19

OK, otherwise looks good. let's see if this commit makes pyflakes happy


---

Comment by dcoudert created at 2019-09-22 08:46:06

pyflakes is now happy !


---

Comment by dimpase created at 2019-09-22 08:58:12

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-09-30 08:12:27

moving milestone to 9.0 (after release of 8.9)


---

Comment by vbraun created at 2019-10-03 17:58:42

Resolution: fixed
