# Issue 13864: nauty_geng is naughty

archive/issues_013864.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  dimpase\n\nI think nauty_geng should not ignore geng's return value and return an exception if the returned value is not 0. Consider the following:\n\n\n```\ndef find_counterexample(n):\n   for G in graphs.nauty_geng(\"-c\" + str(n)):\n     if is_counterexample(G):\n        print 'Yeees, there is a counterexample'\n        return \n   print 'No counterexamples! Conjecture holds'\n```\n\n\nthe code appears to be just fine but it has a bug! Namely it tries to run the program geng with the parameter \"-cn\" instead of \"-c n\". Hence geng returns an error and instead of getting an error in Sage, it simply does not generate  any graphs.\n\nThere are plenty of ways one could shot himself in the foot in this way and not know it. Hence I propose this gets fixed somehow!\n\nIssue created by migration from https://trac.sagemath.org/ticket/14068\n\n",
    "created_at": "2013-02-06T13:25:04Z",
    "labels": [
        "graph theory",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "nauty_geng is naughty",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13864",
    "user": "azi"
}
```
Assignee: jason, ncohen, rlm

CC:  dimpase

I think nauty_geng should not ignore geng's return value and return an exception if the returned value is not 0. Consider the following:


```
def find_counterexample(n):
   for G in graphs.nauty_geng("-c" + str(n)):
     if is_counterexample(G):
        print 'Yeees, there is a counterexample'
        return 
   print 'No counterexamples! Conjecture holds'
```


the code appears to be just fine but it has a bug! Namely it tries to run the program geng with the parameter "-cn" instead of "-c n". Hence geng returns an error and instead of getting an error in Sage, it simply does not generate  any graphs.

There are plenty of ways one could shot himself in the foot in this way and not know it. Hence I propose this gets fixed somehow!

Issue created by migration from https://trac.sagemath.org/ticket/14068





---

archive/issue_comments_172623.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-09-17T15:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172623",
    "user": "dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_172624.json:
```json
{
    "body": "A possible fix is to raise an error only when parameter debug is False and that something goes wrong.\n\nWhen debug is True, the behavior remains the same as before and so we continue to display the message output by geng in stderr.\n----\nNew commits:",
    "created_at": "2019-09-17T15:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172624",
    "user": "dcoudert"
}
```

A possible fix is to raise an error only when parameter debug is False and that something goes wrong.

When debug is True, the behavior remains the same as before and so we continue to display the message output by geng in stderr.
----
New commits:



---

archive/issue_comments_172625.json:
```json
{
    "body": "I don't understand the reported pyflakes error with `sage.graphs.strongly_regular_db`. Other modules are imported the same way without causing pyflakes errors.",
    "created_at": "2019-09-18T09:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172625",
    "user": "dcoudert"
}
```

I don't understand the reported pyflakes error with `sage.graphs.strongly_regular_db`. Other modules are imported the same way without causing pyflakes errors.



---

archive/issue_comments_172626.json:
```json
{
    "body": "Replying to [comment:6 dcoudert]:\n> I don't understand the reported pyflakes error with `sage.graphs.strongly_regular_db`. Other modules are imported the same way without causing pyflakes errors.\n\nperhaps pyflakes is confused by `staticmethod()` thing.\nThe only place where a method from `strongly_regular_db` is used is\n\n```\nstrongly_regular_graph = staticmethod(sage.graphs.strongly_regular_db.strongly_regular_graph)\n```\n\nby the way, I don't understand why it's not written as\n\n```\nfrom . import strongly_regular_db\n...\nstrongly_regular_graph = staticmethod(strongly_regular_db.strongly_regular_graph)\n```\n\nIs it cause this code pre-dates `from .` syntax?",
    "created_at": "2019-09-21T22:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172626",
    "user": "dimpase"
}
```

Replying to [comment:6 dcoudert]:
> I don't understand the reported pyflakes error with `sage.graphs.strongly_regular_db`. Other modules are imported the same way without causing pyflakes errors.

perhaps pyflakes is confused by `staticmethod()` thing.
The only place where a method from `strongly_regular_db` is used is

```
strongly_regular_graph = staticmethod(sage.graphs.strongly_regular_db.strongly_regular_graph)
```

by the way, I don't understand why it's not written as

```
from . import strongly_regular_db
...
strongly_regular_graph = staticmethod(strongly_regular_db.strongly_regular_graph)
```

Is it cause this code pre-dates `from .` syntax?



---

archive/issue_comments_172627.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-09-22T00:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172627",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_172628.json:
```json
{
    "body": "OK, otherwise looks good. let's see if this commit makes pyflakes happy",
    "created_at": "2019-09-22T00:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172628",
    "user": "dimpase"
}
```

OK, otherwise looks good. let's see if this commit makes pyflakes happy



---

archive/issue_comments_172629.json:
```json
{
    "body": "pyflakes is now happy !",
    "created_at": "2019-09-22T08:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172629",
    "user": "dcoudert"
}
```

pyflakes is now happy !



---

archive/issue_comments_172630.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-09-22T08:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172630",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172631.json:
```json
{
    "body": "moving milestone to 9.0 (after release of 8.9)",
    "created_at": "2019-09-30T08:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172631",
    "user": "chapoton"
}
```

moving milestone to 9.0 (after release of 8.9)



---

archive/issue_comments_172632.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-03T17:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-172632",
    "user": "vbraun"
}
```

Resolution: fixed
