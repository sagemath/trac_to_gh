# Issue 10024: sloane_sequence(111776)[2][:36] != sloane.A111776.list(36)

archive/issues_010024.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat\n\nKeywords: combinat sloane\n\nsage: sloane_sequence(111776)[2][:36] != sloane.A111776.list(36)\n\nSearching Sloane's online database...\n\nTrue\n\nsage: sloane_sequence(111776)[2][:36] == sloane.A111776.list(36)\n\nSearching Sloane's online database...\n\nFalse\n\nsage: sloane_sequence(111776)[2][:36]\n\nSearching Sloane's online database...\n\n[1, 1, 1, 1, 2, 3, 1, 4, 6, 10, 1, 8, 12, 20, 35, 1, 16, 24, 40, 70, 125, 1, 32, 48, 80, 140, 250, 450, 1, 64, 96, 160, 280, 500, 900, 1625]\n\nsage: sloane.A111776.list(36)\n\n[1, 1, 1, 2, 1, 2, 3, 2, 1, 3, 4, 2, 3, 2, 4, 5, 1, 2, 4, 2, 5, 6, 4, 2, 3, 5, 4, 6, 7, 2, 5, 2, 1, 6, 4, 7]\n\nsage: len(sloane_sequence(111776)[2][:36]) == len(sloane.A111776.list(36))\n\nSearching Sloane's online database...\n\nTrue\n\nIssue created by migration from https://trac.sagemath.org/ticket/10025\n\n",
    "created_at": "2010-09-27T23:08:39Z",
    "labels": [
        "component: combinatorics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.1",
    "title": "sloane_sequence(111776)[2][:36] != sloane.A111776.list(36)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10024",
    "user": "https://trac.sagemath.org/admin/accounts/users/donmorrison"
}
```
Assignee: sage-combinat

CC:  sage-combinat

Keywords: combinat sloane

sage: sloane_sequence(111776)[2][:36] != sloane.A111776.list(36)

Searching Sloane's online database...

True

sage: sloane_sequence(111776)[2][:36] == sloane.A111776.list(36)

Searching Sloane's online database...

False

sage: sloane_sequence(111776)[2][:36]

Searching Sloane's online database...

[1, 1, 1, 1, 2, 3, 1, 4, 6, 10, 1, 8, 12, 20, 35, 1, 16, 24, 40, 70, 125, 1, 32, 48, 80, 140, 250, 450, 1, 64, 96, 160, 280, 500, 900, 1625]

sage: sloane.A111776.list(36)

[1, 1, 1, 2, 1, 2, 3, 2, 1, 3, 4, 2, 3, 2, 4, 5, 1, 2, 4, 2, 5, 6, 4, 2, 3, 5, 4, 6, 7, 2, 5, 2, 1, 6, 4, 7]

sage: len(sloane_sequence(111776)[2][:36]) == len(sloane.A111776.list(36))

Searching Sloane's online database...

True

Issue created by migration from https://trac.sagemath.org/ticket/10025





---

archive/issue_comments_100557.json:
```json
{
    "body": "A couple of points\n* The **Authors** field is used to indicate who has written code to patch a problem, or new code to add functionality - not who wrote the original code. So at this point in time, since this is just a bug report, with no patch, the Author's field should be blank. \n* The **Reported upstream** is used only when the bug is in code that's not directly maintained by Sage. So bugs in Python, GSL, ATLAS etc which are found should be reported upstream.",
    "created_at": "2010-09-27T23:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100557",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

A couple of points
* The **Authors** field is used to indicate who has written code to patch a problem, or new code to add functionality - not who wrote the original code. So at this point in time, since this is just a bug report, with no patch, the Author's field should be blank. 
* The **Reported upstream** is used only when the bug is in code that's not directly maintained by Sage. So bugs in Python, GSL, ATLAS etc which are found should be reported upstream.



---

archive/issue_comments_100558.json:
```json
{
    "body": "Attachment [trac10025-correct_sloane_sequences.patch](tarball://root/attachments/some-uuid/ticket10025/trac10025-correct_sloane_sequences.patch) by ylchapuy created at 2010-09-28 10:04:26\n\nThe given patch does the following:\n\n- rename A111776 to it's correct name A109814\n- correct the discrepancy with the online version\n- correct an offset problem with A000272 (there *is* one tree with no node)\n- add an optional long doctest requiring internet to test tha sage keeps on par with OEIS",
    "created_at": "2010-09-28T10:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100558",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

Attachment [trac10025-correct_sloane_sequences.patch](tarball://root/attachments/some-uuid/ticket10025/trac10025-correct_sloane_sequences.patch) by ylchapuy created at 2010-09-28 10:04:26

The given patch does the following:

- rename A111776 to it's correct name A109814
- correct the discrepancy with the online version
- correct an offset problem with A000272 (there *is* one tree with no node)
- add an optional long doctest requiring internet to test tha sage keeps on par with OEIS



---

archive/issue_comments_100559.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-09-28T10:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100559",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

Changing status from new to needs_review.



---

archive/issue_events_025420.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/ylchapuy",
    "created_at": "2010-09-28T10:04:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "milestone": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10024#event-25420"
}
```



---

archive/issue_events_025421.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/ylchapuy",
    "created_at": "2010-10-11T06:31:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "milestone": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10024#event-25421"
}
```



---

archive/issue_events_025422.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/ylchapuy",
    "created_at": "2010-10-11T06:31:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "milestone": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10024#event-25422"
}
```



---

archive/issue_comments_100560.json:
```json
{
    "body": "4.6 is feature freezed...",
    "created_at": "2010-10-11T06:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100560",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

4.6 is feature freezed...



---

archive/issue_comments_100561.json:
```json
{
    "body": "Hello !!!\n\nHere is another patch to add to yours... The doctests did not pass, as the sloane_sequence method always outputs \"Searching Sloane's online database...\". I tried to find ways around, then thought the best was to just let it forward a verbose parameter to find_sloane... Anyway, I made this modification, and I also moved most of the documentation written in the __init__ method of class A109814 just after the class definition. This way, it appears in the documentation when it is built. \n\nThe same should be done for the other methods, as currently very few of them appear : http://www.sagemath.org/doc/reference/sage/combinat/sloane_functions.html\n\nOnly my patch needs done to be reviewed before this ticket can be set as positively reviewed ! `:-)`\n\nNathann",
    "created_at": "2010-10-24T14:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100561",
    "user": "https://github.com/nathanncohen"
}
```

Hello !!!

Here is another patch to add to yours... The doctests did not pass, as the sloane_sequence method always outputs "Searching Sloane's online database...". I tried to find ways around, then thought the best was to just let it forward a verbose parameter to find_sloane... Anyway, I made this modification, and I also moved most of the documentation written in the __init__ method of class A109814 just after the class definition. This way, it appears in the documentation when it is built. 

The same should be done for the other methods, as currently very few of them appear : http://www.sagemath.org/doc/reference/sage/combinat/sloane_functions.html

Only my patch needs done to be reviewed before this ticket can be set as positively reviewed ! `:-)`

Nathann



---

archive/issue_comments_100562.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-10-24T15:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100562",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_100563.json:
```json
{
    "body": "Attachment [trac_10025-smallfixes.patch](tarball://root/attachments/some-uuid/ticket10025/trac_10025-smallfixes.patch) by drkirkby created at 2010-10-24 15:19:54\n\nWhat version of Sage is your patch against? I get problems if I try to apply to sage-4.6.rc0.\n\n\n```\ndrkirkby@hawk:~/sage-4.6.rc0/devel/sage-main$ hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10025/trac_10025-smallfixes.patch\nadding trac_10025-smallfixes.patch to series file\ndrkirkby@hawk:~/sage-4.6.rc0/devel/sage-main$ hg qpush\napplying trac_10025-smallfixes.patch\npatching file sage/combinat/sloane_functions.py\nHunk #1 FAILED at 49\nHunk #2 FAILED at 8992\nHunk #3 FAILED at 9031\n3 out of 3 hunks FAILED -- saving rejects to file sage/combinat/sloane_functions.py.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh trac_10025-smallfixes.patch\ndrkirkby@hawk:~/sage-4.6.rc0/devel/sage-main$ \n```\n",
    "created_at": "2010-10-24T15:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100563",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Attachment [trac_10025-smallfixes.patch](tarball://root/attachments/some-uuid/ticket10025/trac_10025-smallfixes.patch) by drkirkby created at 2010-10-24 15:19:54

What version of Sage is your patch against? I get problems if I try to apply to sage-4.6.rc0.


```
drkirkby@hawk:~/sage-4.6.rc0/devel/sage-main$ hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10025/trac_10025-smallfixes.patch
adding trac_10025-smallfixes.patch to series file
drkirkby@hawk:~/sage-4.6.rc0/devel/sage-main$ hg qpush
applying trac_10025-smallfixes.patch
patching file sage/combinat/sloane_functions.py
Hunk #1 FAILED at 49
Hunk #2 FAILED at 8992
Hunk #3 FAILED at 9031
3 out of 3 hunks FAILED -- saving rejects to file sage/combinat/sloane_functions.py.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac_10025-smallfixes.patch
drkirkby@hawk:~/sage-4.6.rc0/devel/sage-main$ 
```




---

archive/issue_comments_100564.json:
```json
{
    "body": "Replying to [comment:7 drkirkby]:\n> What version of Sage is your patch against? I get problems if I try to apply to sage-4.6.rc0.\n\nWell, I am working on 4.6.rc0 too... Though both patch need to be applied !\n\nNathann",
    "created_at": "2010-10-24T15:26:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100564",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:7 drkirkby]:
> What version of Sage is your patch against? I get problems if I try to apply to sage-4.6.rc0.

Well, I am working on 4.6.rc0 too... Though both patch need to be applied !

Nathann



---

archive/issue_comments_100565.json:
```json
{
    "body": "Yes, i missed the first patch needed to be applied first. \n\nShould this not return an error, rather than waste bandwidth looking on the database?\n\n```\nsage: sloane_find(32.23)\nSearching Sloane's online database...\n[]\n```\n\n\nI's also puzzled that\n\n\n```\nsage: sloane_find(sin(x)) # where I have not defined x\nSearching Sloane's online database...\n```\n\n\nshould actually produce any output, but it does. \n\nI'm not really into OEIS, so perhaps I'm mistaken.\n\nDave",
    "created_at": "2010-10-24T15:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100565",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Yes, i missed the first patch needed to be applied first. 

Should this not return an error, rather than waste bandwidth looking on the database?

```
sage: sloane_find(32.23)
Searching Sloane's online database...
[]
```


I's also puzzled that


```
sage: sloane_find(sin(x)) # where I have not defined x
Searching Sloane's online database...
```


should actually produce any output, but it does. 

I'm not really into OEIS, so perhaps I'm mistaken.

Dave



---

archive/issue_comments_100566.json:
```json
{
    "body": "Replying to [comment:9 drkirkby]:\n\n> I's also puzzled that\n> \n> {{{\n> sage: sloane_find(sin(x)) # where I have not defined x\n> Searching Sloane's online database...\n> }}}\n\nWell, by default x is a symbolic variable, so \"sin(x)\" has some meaning already... Later on, I think the argument gets translated into a string, which still has meaning, and there shouldn't be anything wrong until the website answers that there is no sequence corresponding to this non-integer.\n\nTo be honest I had used this method once or twice only since I know Sage, and I already did not like the fact that it could not be told to stay mute (and also that verbosity is the default behaviour). Well, it's getting slowly fixed `:-)`\n\nNathann",
    "created_at": "2010-10-24T15:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100566",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:9 drkirkby]:

> I's also puzzled that
> 
> {{{
> sage: sloane_find(sin(x)) # where I have not defined x
> Searching Sloane's online database...
> }}}

Well, by default x is a symbolic variable, so "sin(x)" has some meaning already... Later on, I think the argument gets translated into a string, which still has meaning, and there shouldn't be anything wrong until the website answers that there is no sequence corresponding to this non-integer.

To be honest I had used this method once or twice only since I know Sage, and I already did not like the fact that it could not be told to stay mute (and also that verbosity is the default behaviour). Well, it's getting slowly fixed `:-)`

Nathann



---

archive/issue_comments_100567.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-10-24T15:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100567",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_100568.json:
```json
{
    "body": "Hi,\nHere, the primary goal is to correct the fact that sloane.A111776 is in fact the sequence A109814.\nI also added a test to check that be sure this doesn't happen again, which test every sequences against the online version.\nWith respect to this, I'm happy with the changes made by Nathann and would give a positive review.\n\nI do agree that it's a bad thing not to test the input for correctness, but it's not the point of this ticket. David, please feel free to open another one to adress this issue. I also let you make the decision about giving a positive review or not, as I'm a little bit biased as an author.\n\ncheers,\n   Yann",
    "created_at": "2010-10-24T16:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100568",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

Hi,
Here, the primary goal is to correct the fact that sloane.A111776 is in fact the sequence A109814.
I also added a test to check that be sure this doesn't happen again, which test every sequences against the online version.
With respect to this, I'm happy with the changes made by Nathann and would give a positive review.

I do agree that it's a bad thing not to test the input for correctness, but it's not the point of this ticket. David, please feel free to open another one to adress this issue. I also let you make the decision about giving a positive review or not, as I'm a little bit biased as an author.

cheers,
   Yann



---

archive/issue_comments_100569.json:
```json
{
    "body": "I think it is better that you and Nathan review each others patches, as I don't consider myself qualified to check this - my pthon skills are not good. There is no problem in having two authors and two reviewers, as long as they review each others work, and not their own. \n\nI guess I should open a ticket for the fact the code does not check its input, but there are more serious cases. Try\n\n\n```\nsage: seed(1,2)\n```\n\n\nfor example. \n\nDave",
    "created_at": "2010-10-24T16:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100569",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

I think it is better that you and Nathan review each others patches, as I don't consider myself qualified to check this - my pthon skills are not good. There is no problem in having two authors and two reviewers, as long as they review each others work, and not their own. 

I guess I should open a ticket for the fact the code does not check its input, but there are more serious cases. Try


```
sage: seed(1,2)
```


for example. 

Dave



---

archive/issue_comments_100570.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-10-24T16:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100570",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_100571.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-11-01T10:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100571",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_025423.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-01T10:13:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10024#event-25423"
}
```



---

archive/issue_comments_100572.json:
```json
{
    "body": "Related note: sloane_find is now completely broken. See #10358.",
    "created_at": "2010-12-01T03:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10024#issuecomment-100572",
    "user": "https://github.com/williamstein"
}
```

Related note: sloane_find is now completely broken. See #10358.
