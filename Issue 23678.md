# Issue 23678: include the inner_product_matrix in module comparison

Issue created by migration from Trac.

Original creator: sbrandhorst

Original creation time: 2017-09-22 09:23:16


```
sage: FreeModule(ZZ,1)==FreeModule(ZZ,1,inner_product_matrix=matrix.identity(1)*2)
True
```

Since these two objects are mathematically rather different,
this should return False.



---

Comment by sbrandhorst created at 2017-09-22 09:27:10

Changing component from PLEASE CHANGE to linear algebra.


---

Comment by sbrandhorst created at 2017-09-22 09:29:17

Changing keywords from "" to "sd91".


---

Comment by git created at 2017-09-30 22:27:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by sbrandhorst created at 2017-09-30 22:29:16

Changing status from new to needs_review.


---

Comment by roed created at 2017-09-30 22:37:36

Changing status from needs_review to positive_review.


---

Comment by roed created at 2017-09-30 22:37:36

Looks good to me.


---

Comment by kedlaya created at 2017-10-02 02:29:52

I'm afraid these doctest failures from patchbot appear to be reproducible:

```
sage -t --long src/sage/categories/pushout.py  # 2 doctests failed
sage -t --long src/sage/categories/homset.py  # 3 doctests failed
```

Is it just that these were based on wrong behavior and should be changed?


---

Comment by kedlaya created at 2017-10-02 02:29:52

Changing status from positive_review to needs_work.


---

Comment by git created at 2017-10-02 04:04:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by sbrandhorst created at 2017-10-02 04:10:07

Changing status from needs_work to needs_review.


---

Comment by sbrandhorst created at 2017-10-02 04:10:07

Some were based on wrong behavior and some are new bugs. Please check carefully. This is the first time I messed with categores. Not 100% sure I know the consequences. The doctests you mentioned pass now.


---

Comment by kedlaya created at 2017-10-02 04:43:28

Changing status from needs_review to positive_review.


---

Comment by kedlaya created at 2017-10-02 04:43:28

Changes look fine to me. All tests pass on k8s. Positive review!


---

Comment by vbraun created at 2017-10-05 06:53:46

Resolution: fixed
