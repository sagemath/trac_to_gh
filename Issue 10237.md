# Issue 10237: Containment checks are wrong for empty polyhedra

Issue created by migration from https://trac.sagemath.org/ticket/10238

Original creator: novoselt

Original creation time: 2010-11-08 15:41:40

Assignee: mhampton

CC:  vbraun novoselt


```
sage: p = Polyhedron()
sage: p
The empty polyhedron in QQ^0.
sage: p.contains(0)
True
sage: p.contains(1)
True
sage: p.contains([0, 1])
True
sage: p.contains([(0, 1)])
True
sage: p.interior_contains([0, 1])
True
sage: p.relative_interior_contains([0, 1])
True
```


I think all of the above should return False.


---

Comment by vbraun created at 2010-11-08 18:38:10

Changing status from new to needs_review.


---

Comment by vbraun created at 2010-11-08 18:38:10

I changed the "empty" polyhedron to contain one equation `0==-1`. I also modified the "contains" checks to be slightly more general and work with points whose coordinates are not necessarily in the same field as the polyhedron.


---

Comment by novoselt created at 2010-11-08 20:24:45

Replying to [comment:1 vbraun]:
> I changed the "empty" polyhedron to contain one equation `0==-1`.

This seems reasonable, but it shows in the doctest as "[An equation () x + -1 == 0]" which is confusing: what is "() x" and why "+ -"?

This is not directly related to this ticket, but how about omitting "() x +" for 0-dimensional equations/inequalities and taking into account the "+ -" situation in general?


---

Comment by novoselt created at 2010-11-08 20:24:45

Changing status from needs_review to needs_work.


---

Comment by vbraun created at 2010-11-08 21:40:42

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2010-11-08 21:40:42

I guess this ticket is as good as any other to fix the string '_repr_()' of (in)equalities :-)  The updated patch skips "zero coefficient times x" and handles the sign of the constant term nicer.


---

Comment by novoselt created at 2010-11-08 22:03:27

Patch order issues:

```
applying trac_10238_containment_check_for_empty_polyhedra.patch
patching file sage/geometry/polyhedra.py
Hunk #8 succeeded at 4208 with fuzz 2 (offset 446 lines).
now at: trac_10238_containment_check_for_empty_polyhedra.patch
```

(Tested on top of face lattice.)

I am fine with this version, but just to make sure: you really want to start the line with "+" if there are no variables and have space between the sign and the coefficient only if there are variables?


---

Comment by novoselt created at 2010-11-08 22:03:27

Changing status from needs_review to needs_info.


---

Comment by vbraun created at 2010-11-09 02:31:29

I rearranged the patches an in #9604, should apply cleanly now.

My preferred prettyprinting is

```
  An equation (-1) x + 1 >= 0
  An equation (2) x - 1 >= 0
  An equation 1 == 0
  An equation -1 == 0
```

and I fixed the 3rd one in the patch.


---

Attachment

Updated patch


---

Comment by novoselt created at 2010-11-09 05:52:29

Cool!


---

Comment by novoselt created at 2010-11-09 05:52:29

Changing status from needs_info to needs_review.


---

Comment by novoselt created at 2010-11-09 05:52:39

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2010-11-11 13:02:49

Resolution: fixed
