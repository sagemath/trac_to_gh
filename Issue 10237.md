# Issue 10237: Containment checks are wrong for empty polyhedra

archive/issues_010237.json:
```json
{
    "body": "Assignee: mhampton\n\nCC:  @vbraun @novoselt\n\n\n```\nsage: p = Polyhedron()\nsage: p\nThe empty polyhedron in QQ^0.\nsage: p.contains(0)\nTrue\nsage: p.contains(1)\nTrue\nsage: p.contains([0, 1])\nTrue\nsage: p.contains([(0, 1)])\nTrue\nsage: p.interior_contains([0, 1])\nTrue\nsage: p.relative_interior_contains([0, 1])\nTrue\n```\n\n\nI think all of the above should return False.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10238\n\n",
    "created_at": "2010-11-08T15:41:40Z",
    "labels": [
        "geometry",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.1",
    "title": "Containment checks are wrong for empty polyhedra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10237",
    "user": "@novoselt"
}
```
Assignee: mhampton

CC:  @vbraun @novoselt


```
sage: p = Polyhedron()
sage: p
The empty polyhedron in QQ^0.
sage: p.contains(0)
True
sage: p.contains(1)
True
sage: p.contains([0, 1])
True
sage: p.contains([(0, 1)])
True
sage: p.interior_contains([0, 1])
True
sage: p.relative_interior_contains([0, 1])
True
```


I think all of the above should return False.

Issue created by migration from https://trac.sagemath.org/ticket/10238





---

archive/issue_comments_104344.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-11-08T18:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104344",
    "user": "@vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_104345.json:
```json
{
    "body": "I changed the \"empty\" polyhedron to contain one equation `0==-1`. I also modified the \"contains\" checks to be slightly more general and work with points whose coordinates are not necessarily in the same field as the polyhedron.",
    "created_at": "2010-11-08T18:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104345",
    "user": "@vbraun"
}
```

I changed the "empty" polyhedron to contain one equation `0==-1`. I also modified the "contains" checks to be slightly more general and work with points whose coordinates are not necessarily in the same field as the polyhedron.



---

archive/issue_comments_104346.json:
```json
{
    "body": "Replying to [comment:1 vbraun]:\n> I changed the \"empty\" polyhedron to contain one equation `0==-1`.\n\nThis seems reasonable, but it shows in the doctest as \"[An equation () x + -1 == 0]\" which is confusing: what is \"() x\" and why \"+ -\"?\n\nThis is not directly related to this ticket, but how about omitting \"() x +\" for 0-dimensional equations/inequalities and taking into account the \"+ -\" situation in general?",
    "created_at": "2010-11-08T20:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104346",
    "user": "@novoselt"
}
```

Replying to [comment:1 vbraun]:
> I changed the "empty" polyhedron to contain one equation `0==-1`.

This seems reasonable, but it shows in the doctest as "[An equation () x + -1 == 0]" which is confusing: what is "() x" and why "+ -"?

This is not directly related to this ticket, but how about omitting "() x +" for 0-dimensional equations/inequalities and taking into account the "+ -" situation in general?



---

archive/issue_comments_104347.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-11-08T20:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104347",
    "user": "@novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_104348.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-11-08T21:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104348",
    "user": "@vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_104349.json:
```json
{
    "body": "I guess this ticket is as good as any other to fix the string '_repr_()' of (in)equalities :-)  The updated patch skips \"zero coefficient times x\" and handles the sign of the constant term nicer.",
    "created_at": "2010-11-08T21:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104349",
    "user": "@vbraun"
}
```

I guess this ticket is as good as any other to fix the string '_repr_()' of (in)equalities :-)  The updated patch skips "zero coefficient times x" and handles the sign of the constant term nicer.



---

archive/issue_comments_104350.json:
```json
{
    "body": "Patch order issues:\n\n```\napplying trac_10238_containment_check_for_empty_polyhedra.patch\npatching file sage/geometry/polyhedra.py\nHunk #8 succeeded at 4208 with fuzz 2 (offset 446 lines).\nnow at: trac_10238_containment_check_for_empty_polyhedra.patch\n```\n\n(Tested on top of face lattice.)\n\nI am fine with this version, but just to make sure: you really want to start the line with \"+\" if there are no variables and have space between the sign and the coefficient only if there are variables?",
    "created_at": "2010-11-08T22:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104350",
    "user": "@novoselt"
}
```

Patch order issues:

```
applying trac_10238_containment_check_for_empty_polyhedra.patch
patching file sage/geometry/polyhedra.py
Hunk #8 succeeded at 4208 with fuzz 2 (offset 446 lines).
now at: trac_10238_containment_check_for_empty_polyhedra.patch
```

(Tested on top of face lattice.)

I am fine with this version, but just to make sure: you really want to start the line with "+" if there are no variables and have space between the sign and the coefficient only if there are variables?



---

archive/issue_comments_104351.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2010-11-08T22:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104351",
    "user": "@novoselt"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_104352.json:
```json
{
    "body": "I rearranged the patches an in #9604, should apply cleanly now.\n\nMy preferred prettyprinting is\n\n```\n  An equation (-1) x + 1 >= 0\n  An equation (2) x - 1 >= 0\n  An equation 1 == 0\n  An equation -1 == 0\n```\n\nand I fixed the 3rd one in the patch.",
    "created_at": "2010-11-09T02:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104352",
    "user": "@vbraun"
}
```

I rearranged the patches an in #9604, should apply cleanly now.

My preferred prettyprinting is

```
  An equation (-1) x + 1 >= 0
  An equation (2) x - 1 >= 0
  An equation 1 == 0
  An equation -1 == 0
```

and I fixed the 3rd one in the patch.



---

archive/issue_comments_104353.json:
```json
{
    "body": "Attachment [trac_10238_containment_check_for_empty_polyhedra.patch](tarball://root/attachments/some-uuid/ticket10238/trac_10238_containment_check_for_empty_polyhedra.patch) by @vbraun created at 2010-11-09 02:31:59\n\nUpdated patch",
    "created_at": "2010-11-09T02:31:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104353",
    "user": "@vbraun"
}
```

Attachment [trac_10238_containment_check_for_empty_polyhedra.patch](tarball://root/attachments/some-uuid/ticket10238/trac_10238_containment_check_for_empty_polyhedra.patch) by @vbraun created at 2010-11-09 02:31:59

Updated patch



---

archive/issue_comments_104354.json:
```json
{
    "body": "Cool!",
    "created_at": "2010-11-09T05:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104354",
    "user": "@novoselt"
}
```

Cool!



---

archive/issue_comments_104355.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2010-11-09T05:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104355",
    "user": "@novoselt"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_104356.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-11-09T05:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104356",
    "user": "@novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_104357.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-11-11T13:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10237#issuecomment-104357",
    "user": "@jdemeyer"
}
```

Resolution: fixed
