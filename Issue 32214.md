# Issue 32214: slightly better support for asymptotic expansions with interval coefficients

Issue created by migration from https://trac.sagemath.org/ticket/32451

Original creator: mmezzarobba

Original creation time: 2021-09-02 15:31:10

CC:  cheuberg behackl dkrenn




---

Comment by mmezzarobba created at 2021-09-02 15:39:28

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2021-09-02 15:39:28

Comments from experts of the Asymptotic Ring more than welcome as I have about zero experience with it `:-)`
----
New commits:


---

Comment by git created at 2021-09-03 09:39:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-12-18 19:53:12

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.


---

Comment by behackl created at 2021-12-19 00:31:03

Marc, apologies for taking so long for a response. Your changes here look good to me, thank you! There is one thing that should be fixed:

- In one of the examples this branch adds there is `sage: basy = asy.exact_part() + A(B(asy.error_part().summands.pop().growth, coefficient=1/3))` where `B` is a `BTermMonoid` -- it is probably easier to not construct the monoid directly, but rather use the method of the asymptotic ring `A.B` to create the `BTerm`. Otherwise you will have to specify the bound which the term is valid from; this currently causes doctest failures.

And one thing I am curious about:

- You generate a tuple of the string representations of the generators using `gens_str = tuple(str(g) for g in self.parent().growth_group.gens_monomial())`, instead of `gens_str = tuple(str(g) for g in self.parent().gens()` -- do you, by any chance, recall why you chose to do that? The `AsymptoticRing.gens` does a somewhat similar thing, it takes the monomial_gens of the growth group, but instead of returning the string representation of that, it creates an exact term with coefficient 1, so the string representations should be the same. Is that maybe not the case with some particular choices of the coefficient ring?

I'm also happy to fix the doctest, just let me know!


---

Comment by behackl created at 2021-12-19 00:31:03

Changing status from needs_review to needs_work.


---

Comment by git created at 2021-12-27 17:54:58

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mmezzarobba created at 2021-12-27 18:00:13

Replying to [comment:5 behackl]:
> Marc, apologies for taking so long for a response.

No problem at all. Thank you for the review!

> - In one of the examples this branch adds there is `sage: basy = asy.exact_part() + A(B(asy.error_part().summands.pop().growth, coefficient=1/3))` where `B` is a `BTermMonoid` -- it is probably easier to not construct the monoid directly, but rather use the method of the asymptotic ring `A.B` to create the `BTerm`. Otherwise you will have to specify the bound which the term is valid from; this currently causes doctest failures.

Done in the last commit.

> And one thing I am curious about:
> 
> - You generate a tuple of the string representations of the generators using `gens_str = tuple(str(g) for g in self.parent().growth_group.gens_monomial())`, instead of `gens_str = tuple(str(g) for g in self.parent().gens()` -- do you, by any chance, recall why you chose to do that? The `AsymptoticRing.gens` does a somewhat similar thing, it takes the monomial_gens of the growth group, but instead of returning the string representation of that, it creates an exact term with coefficient 1, so the string representations should be the same. Is that maybe not the case with some particular choices of the coefficient ring?

Yes, for inexact rings(?) one has:

```
sage: A.<n> = AsymptoticRing('n^ZZ', RR)
sage: [str(g) for g in A.gens()]
['1.00000000000000*n']
sage: [str(g) for g in A.growth_group.gens_monomial()]
['n']
```



---

Comment by behackl created at 2022-01-05 14:04:11

Changing status from needs_work to positive_review.


---

Comment by behackl created at 2022-01-05 14:04:11

> Yes, for inexact rings(?) one has:

Alright, I suspected as much. Thanks for the clarification!


---

Comment by vbraun created at 2022-01-31 23:31:28

Resolution: fixed
