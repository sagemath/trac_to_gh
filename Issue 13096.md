# Issue 13096: Proposal of a DifferentialAlgebra package, relying on the C BLAD libraries

archive/issues_013096.json:
```json
{
    "body": "Assignee: Francois.Boulier@univ-lille1.fr\n\nCC:  sage-combinat boulier @burcin @kcrisman @brentbaccala\n\nKeywords: package, differential algebra, elimination theory\n\n**Introduction**\n\nThe `DifferentialAlgebra` Sage package is an analogue of the MAPLE 14 `DifferentialAlgebra` package.\nThe underlying theory is the differential algebra of Ritt and Kolchin.\nIts main tool is a simplifier for systems of polynomial differential equations, ordinary or with partial derivatives, called `RosenfeldGroebner`. It is related to the differential elimination theory. This simplifier decomposes the radical differential ideal I generated by an input system, as an intersection of radical differential ideals presented by regular differential chains (a slight generalization of Ritt characteristic sets). The output permits to test membership in the differential ideal I.\n\n**Further developments**\n\n* The package should be developed to enhance numerical solvers of DAE (computation of the underlying ODE and of the equations which give the constraints on the initial values).\n* The package provides an implementation of differential fields, which could be very important for many developments (Ore algebra, differential modules, K\u00e4hler differentials, ...).\n* The package involves an implementation of Ritt's Low Power Theorem, for analysing the solutions of a single polynomial differential equation (general, particular, singular solution).\n* The development of the package was undertaken as first step, towards a control theory package. \n\n**Software**\n\nThe package is written in Cython.\nThe computations are performed by the BLAD libraries (C libraries, 60000 lines, LGPL license).\nThe interface between Sage and BLAD is handled by the BMI library (C library, 10000 lines, LGPL license).\n\n**Getting started**\n\nThe attached `rebuild` file is a shell command file which should help to build the whole stuff.\nThis file was tested on Linux architectures.\n\n**An example**\n\nBorrowed from `DifferentialAlgebra.pyx`, to motivate (hopefully) reviewers.\n\n\n\n```\n        sage: from sage.libs.blad.DifferentialAlgebra import DifferentialRing, RegularDifferentialChain, BaseFieldExtension\n        sage: leader,order,rank = var ('leader,order,rank')\n        sage: derivative = function ('derivative')\n\n    This example shows how to build the Henri Michaelis Menten formula by differential elimination. One considers a chemical reaction system describing the enzymatic reaction:\n\n                   k(1)\n        E + S  -----------> ES\n                   k(-1)\n        ES     -----------> E + S\n                   k(2)\n        ES     -----------> E + P\n\n    A substrate S is transformed into a product P, in the presence of an enzyme E. An intermediate complex ES is formed.\n\n        sage: t = var('t')\n        sage: k,F_1,E,S,ES,P = function('k,F_1,E,S,ES,P')\n        sage: params = [k(-1),k(1),k(2)]\n        sage: params\n        [k(-1), k(1), k(2)]\n\n    The main assumption is that k(1), k(-1) >> k(2) i.e. that the revertible reaction is much faster than the last one. One performs a quasi-steady state approximation by considering the following differential-algebraic system (it comes from the mass-action law kinetics, replacing the contribution of the fast reactions by an unknown function F_1(t), on the algebraic variety where the fast reaction would equilibrate if they were alone).\n\n        sage: syst = [diff(E(t),t) == - F_1(t) + k(2)*ES(t), diff(S(t),t) == - F_1(t), diff (ES(t),t) == - k(2)*ES(t) + F_1(t), diff (P(t),t) == k(2)*ES(t), 0 == k(-1)*E(t)*S(t) - k(1)*ES(t) ]\n        sage: syst\n        [D[0](E)(t) == k(2)*ES(t) - F_1(t), D[0](S)(t) == -F_1(t), D[0](ES)(t) == -k(2)*ES(t) + F_1(t), D[0](P)(t) == k(2)*ES(t), 0 == k(-1)*E(t)*S(t) - k(1)*ES(t)]\n\n    Differential elimination permits to simplify this DAE. To avoid discussing the possible vanishing of ``params``, one moves them to the base field of the equations.\n\n        sage: Field = BaseFieldExtension (generators = params)\n        sage: Field\n        differential_field\n\n        sage: R = DifferentialRing (derivations = [t], blocks = [F_1, [E,ES,P,S], params], parameters = params)\n        sage: R\n        differential_ring\n\n    The RosenfeldGroebner considers three cases. The two last ones are degenerate cases.\n\n        sage: ideal = R.RosenfeldGroebner (syst, basefield = Field)\n        sage: ideal\n        [regular_differential_chain, regular_differential_chain, regular_differential_chain]\n        sage: [ C.equations (solved = true) for C in ideal ]\n        [[E(t) == k(1)*ES(t)/(k(-1)*S(t)), D[0](S)(t) == -(k(-1)*k(2)*S(t)^2*ES(t) + k(1)*k(2)*S(t)*ES(t))/(k(-1)*S(t)^2 + k(1)*S(t) + k(1)*ES(t)), D[0](P)(t) == k(2)*ES(t), D[0](ES)(t) == -k(1)*k(2)*ES(t)^2/(k(-1)*S(t)^2 + k(1)*S(t) + k(1)*ES(t)), F_1(t) == (k(-1)*k(2)*S(t)^2*ES(t) + k(1)*k(2)*S(t)*ES(t))/(k(-1)*S(t)^2 + k(1)*S(t) + k(1)*ES(t))], [S(t) == -k(1)/k(-1), ES(t) == 0, E(t) == 0, D[0](P)(t) == 0, F_1(t) == 0], [S(t) == 0, ES(t) == 0, D[0](P)(t) == 0, D[0](E)(t) == 0, F_1(t) == 0]]\n\n    The sought equation, below, is not yet the Henri-Michaelis-Menten formula. This is expected, since some minor hypotheses have not yet been taken into account\n\n        sage: ideal [0].equations (solved = true, selection = leader == derivative (S(t)))\n        [D[0](S)(t) == -(k(-1)*k(2)*S(t)^2*ES(t) + k(1)*k(2)*S(t)*ES(t))/(k(-1)*S(t)^2 + k(1)*S(t) + k(1)*ES(t))]\n\n    Let us take them into account. First create two new constants. Put them among ``params``, together with initial values.\n\n        sage: K,V_max = var ('K,V_max')\n        sage: params = [k(-1),k(1),k(2),E(0),ES(0),P(0),S(0),K,V_max]\n        sage: params\n        [k(-1), k(1), k(2), E(0), ES(0), P(0), S(0), K, V_max]\n\n        sage: R = DifferentialRing (blocks = [F_1, [ES,E,P,S], params], parameters = params, derivations = [t])\n        sage: R\n        differential_ring\n\n    There are relations among the parameters: initial values supposed to be zero, and equations meant to rename constants.\n\n        sage: relations_among_params = RegularDifferentialChain ([P(0) == 0, ES(0) == 0, K == k(1)/k(-1), V_max == k(2)*E(0)], R)\n        sage: relations_among_params\n        regular_differential_chain\n\n    Coming computations will be performed over a base field defined by generators and relations\n\n        sage: Field = BaseFieldExtension (generators = params, relations = relations_among_params)\n        sage: Field\n        differential_field\n\n    Extend the DAE with linear conservation laws. They could have been computed from the stoichimetry matrix of the chemical system.\n\n        sage: newsyst = syst\n        sage: newsyst.append (E(t) + ES(t) == E(0) + ES(0))\n        sage: newsyst.append (S(t) + ES(t) + P(t) == S(0) + ES(0) + P(0))\n        sage: newsyst\n        [D[0](E)(t) == k(2)*ES(t) - F_1(t), D[0](S)(t) == -F_1(t), D[0](ES)(t) == -k(2)*ES(t) + F_1(t), D[0](P)(t) == k(2)*ES(t), 0 == k(-1)*E(t)*S(t) - k(1)*ES(t), E(t) + ES(t) == E(0) + ES(0), S(t) + ES(t) + P(t) == S(0) + ES(0) + P(0)]\n\n    Simplify again. Only one case is left.\n\n        sage: ideal = R.RosenfeldGroebner (newsyst, basefield = Field)\n        sage: ideal\n        [regular_differential_chain]\n\n    To get the traditional Henri-Michaelis-Menten formula, one still needs to neglect the term K*E(0)\n\n        sage: ideal[0].equations (solved = true, selection = leader == derivative (S(t)))\n        [D[0](S)(t) == -(K*V_max*S(t) + V_max*S(t)^2)/(K^2 + K*E(0) + 2*K*S(t) + S(t)^2)]\n\n    One can also get it by computing the right hand side of the equation which gives the evolution of the product P\n\n        sage: ideal[0].normal_form (diff(P(t),t))\n        V_max*S(t)/(K + S(t))\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/13268\n\n",
    "created_at": "2012-07-18T13:23:43Z",
    "labels": [
        "component: packages"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-wishlist",
    "title": "Proposal of a DifferentialAlgebra package, relying on the C BLAD libraries",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13096",
    "user": "https://trac.sagemath.org/admin/accounts/users/boulier"
}
```
Assignee: Francois.Boulier@univ-lille1.fr

CC:  sage-combinat boulier @burcin @kcrisman @brentbaccala

Keywords: package, differential algebra, elimination theory

**Introduction**

The `DifferentialAlgebra` Sage package is an analogue of the MAPLE 14 `DifferentialAlgebra` package.
The underlying theory is the differential algebra of Ritt and Kolchin.
Its main tool is a simplifier for systems of polynomial differential equations, ordinary or with partial derivatives, called `RosenfeldGroebner`. It is related to the differential elimination theory. This simplifier decomposes the radical differential ideal I generated by an input system, as an intersection of radical differential ideals presented by regular differential chains (a slight generalization of Ritt characteristic sets). The output permits to test membership in the differential ideal I.

**Further developments**

* The package should be developed to enhance numerical solvers of DAE (computation of the underlying ODE and of the equations which give the constraints on the initial values).
* The package provides an implementation of differential fields, which could be very important for many developments (Ore algebra, differential modules, Kähler differentials, ...).
* The package involves an implementation of Ritt's Low Power Theorem, for analysing the solutions of a single polynomial differential equation (general, particular, singular solution).
* The development of the package was undertaken as first step, towards a control theory package. 

**Software**

The package is written in Cython.
The computations are performed by the BLAD libraries (C libraries, 60000 lines, LGPL license).
The interface between Sage and BLAD is handled by the BMI library (C library, 10000 lines, LGPL license).

**Getting started**

The attached `rebuild` file is a shell command file which should help to build the whole stuff.
This file was tested on Linux architectures.

**An example**

Borrowed from `DifferentialAlgebra.pyx`, to motivate (hopefully) reviewers.



```
        sage: from sage.libs.blad.DifferentialAlgebra import DifferentialRing, RegularDifferentialChain, BaseFieldExtension
        sage: leader,order,rank = var ('leader,order,rank')
        sage: derivative = function ('derivative')

    This example shows how to build the Henri Michaelis Menten formula by differential elimination. One considers a chemical reaction system describing the enzymatic reaction:

                   k(1)
        E + S  -----------> ES
                   k(-1)
        ES     -----------> E + S
                   k(2)
        ES     -----------> E + P

    A substrate S is transformed into a product P, in the presence of an enzyme E. An intermediate complex ES is formed.

        sage: t = var('t')
        sage: k,F_1,E,S,ES,P = function('k,F_1,E,S,ES,P')
        sage: params = [k(-1),k(1),k(2)]
        sage: params
        [k(-1), k(1), k(2)]

    The main assumption is that k(1), k(-1) >> k(2) i.e. that the revertible reaction is much faster than the last one. One performs a quasi-steady state approximation by considering the following differential-algebraic system (it comes from the mass-action law kinetics, replacing the contribution of the fast reactions by an unknown function F_1(t), on the algebraic variety where the fast reaction would equilibrate if they were alone).

        sage: syst = [diff(E(t),t) == - F_1(t) + k(2)*ES(t), diff(S(t),t) == - F_1(t), diff (ES(t),t) == - k(2)*ES(t) + F_1(t), diff (P(t),t) == k(2)*ES(t), 0 == k(-1)*E(t)*S(t) - k(1)*ES(t) ]
        sage: syst
        [D[0](E)(t) == k(2)*ES(t) - F_1(t), D[0](S)(t) == -F_1(t), D[0](ES)(t) == -k(2)*ES(t) + F_1(t), D[0](P)(t) == k(2)*ES(t), 0 == k(-1)*E(t)*S(t) - k(1)*ES(t)]

    Differential elimination permits to simplify this DAE. To avoid discussing the possible vanishing of ``params``, one moves them to the base field of the equations.

        sage: Field = BaseFieldExtension (generators = params)
        sage: Field
        differential_field

        sage: R = DifferentialRing (derivations = [t], blocks = [F_1, [E,ES,P,S], params], parameters = params)
        sage: R
        differential_ring

    The RosenfeldGroebner considers three cases. The two last ones are degenerate cases.

        sage: ideal = R.RosenfeldGroebner (syst, basefield = Field)
        sage: ideal
        [regular_differential_chain, regular_differential_chain, regular_differential_chain]
        sage: [ C.equations (solved = true) for C in ideal ]
        [[E(t) == k(1)*ES(t)/(k(-1)*S(t)), D[0](S)(t) == -(k(-1)*k(2)*S(t)^2*ES(t) + k(1)*k(2)*S(t)*ES(t))/(k(-1)*S(t)^2 + k(1)*S(t) + k(1)*ES(t)), D[0](P)(t) == k(2)*ES(t), D[0](ES)(t) == -k(1)*k(2)*ES(t)^2/(k(-1)*S(t)^2 + k(1)*S(t) + k(1)*ES(t)), F_1(t) == (k(-1)*k(2)*S(t)^2*ES(t) + k(1)*k(2)*S(t)*ES(t))/(k(-1)*S(t)^2 + k(1)*S(t) + k(1)*ES(t))], [S(t) == -k(1)/k(-1), ES(t) == 0, E(t) == 0, D[0](P)(t) == 0, F_1(t) == 0], [S(t) == 0, ES(t) == 0, D[0](P)(t) == 0, D[0](E)(t) == 0, F_1(t) == 0]]

    The sought equation, below, is not yet the Henri-Michaelis-Menten formula. This is expected, since some minor hypotheses have not yet been taken into account

        sage: ideal [0].equations (solved = true, selection = leader == derivative (S(t)))
        [D[0](S)(t) == -(k(-1)*k(2)*S(t)^2*ES(t) + k(1)*k(2)*S(t)*ES(t))/(k(-1)*S(t)^2 + k(1)*S(t) + k(1)*ES(t))]

    Let us take them into account. First create two new constants. Put them among ``params``, together with initial values.

        sage: K,V_max = var ('K,V_max')
        sage: params = [k(-1),k(1),k(2),E(0),ES(0),P(0),S(0),K,V_max]
        sage: params
        [k(-1), k(1), k(2), E(0), ES(0), P(0), S(0), K, V_max]

        sage: R = DifferentialRing (blocks = [F_1, [ES,E,P,S], params], parameters = params, derivations = [t])
        sage: R
        differential_ring

    There are relations among the parameters: initial values supposed to be zero, and equations meant to rename constants.

        sage: relations_among_params = RegularDifferentialChain ([P(0) == 0, ES(0) == 0, K == k(1)/k(-1), V_max == k(2)*E(0)], R)
        sage: relations_among_params
        regular_differential_chain

    Coming computations will be performed over a base field defined by generators and relations

        sage: Field = BaseFieldExtension (generators = params, relations = relations_among_params)
        sage: Field
        differential_field

    Extend the DAE with linear conservation laws. They could have been computed from the stoichimetry matrix of the chemical system.

        sage: newsyst = syst
        sage: newsyst.append (E(t) + ES(t) == E(0) + ES(0))
        sage: newsyst.append (S(t) + ES(t) + P(t) == S(0) + ES(0) + P(0))
        sage: newsyst
        [D[0](E)(t) == k(2)*ES(t) - F_1(t), D[0](S)(t) == -F_1(t), D[0](ES)(t) == -k(2)*ES(t) + F_1(t), D[0](P)(t) == k(2)*ES(t), 0 == k(-1)*E(t)*S(t) - k(1)*ES(t), E(t) + ES(t) == E(0) + ES(0), S(t) + ES(t) + P(t) == S(0) + ES(0) + P(0)]

    Simplify again. Only one case is left.

        sage: ideal = R.RosenfeldGroebner (newsyst, basefield = Field)
        sage: ideal
        [regular_differential_chain]

    To get the traditional Henri-Michaelis-Menten formula, one still needs to neglect the term K*E(0)

        sage: ideal[0].equations (solved = true, selection = leader == derivative (S(t)))
        [D[0](S)(t) == -(K*V_max*S(t) + V_max*S(t)^2)/(K^2 + K*E(0) + 2*K*S(t) + S(t)^2)]

    One can also get it by computing the right hand side of the equation which gives the evolution of the product P

        sage: ideal[0].normal_form (diff(P(t),t))
        V_max*S(t)/(K + S(t))
```


Issue created by migration from https://trac.sagemath.org/ticket/13268





---

archive/issue_comments_159064.json:
```json
{
    "body": "Attachment [rebuild](tarball://root/attachments/some-uuid/ticket13268/rebuild) by boulier created at 2012-07-18 13:24:42\n\nshell script to help building the package",
    "created_at": "2012-07-18T13:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159064",
    "user": "https://trac.sagemath.org/admin/accounts/users/boulier"
}
```

Attachment [rebuild](tarball://root/attachments/some-uuid/ticket13268/rebuild) by boulier created at 2012-07-18 13:24:42

shell script to help building the package



---

archive/issue_comments_159065.json:
```json
{
    "body": "I assume that this is somewhere in the sage-combinat queue, but just for completeness, if you could put links to an spkg, the other Sage library files needed, etc., that would be great.  I'm constantly amazed at what you guys come up with!",
    "created_at": "2012-07-20T15:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159065",
    "user": "https://github.com/kcrisman"
}
```

I assume that this is somewhere in the sage-combinat queue, but just for completeness, if you could put links to an spkg, the other Sage library files needed, etc., that would be great.  I'm constantly amazed at what you guys come up with!



---

archive/issue_comments_159066.json:
```json
{
    "body": "Replying to [comment:1 kcrisman]:\n> I assume that this is somewhere in the sage-combinat queue, but just for completeness, if you could put links to an spkg, the other Sage library files needed, etc., that would be great.  I'm constantly amazed at what you guys come up with!\n\nThe shell script (rebuild) builds two spkg. I thought it was simpler that way.",
    "created_at": "2012-07-21T22:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159066",
    "user": "https://trac.sagemath.org/admin/accounts/users/boulier"
}
```

Replying to [comment:1 kcrisman]:
> I assume that this is somewhere in the sage-combinat queue, but just for completeness, if you could put links to an spkg, the other Sage library files needed, etc., that would be great.  I'm constantly amazed at what you guys come up with!

The shell script (rebuild) builds two spkg. I thought it was simpler that way.



---

archive/issue_comments_159067.json:
```json
{
    "body": "> > I assume that this is somewhere in the sage-combinat queue, but just for completeness, if you could put links to an spkg, the other Sage library files needed, etc., that would be great.  I'm constantly amazed at what you guys come up with!\n> \n> The shell script (rebuild) builds two spkg. I thought it was simpler that way.\n\nFair enough for those testing, but in the end I think that the release manager is likely (?) to want an actual spkg.  For instance, Sage should be buildable without the internet (that is, once it is downloaded or the tarball is otherwise acquired, the internet should not be a dependency).\n\nAlso, is this a proposal for an optional spkg?\n\nFinally, you'll almost certainly need to provide the DifferentialAlgebra.pyx file and the changes to setup.py and the module list as a patch.\n\nBut you are right that this script would be very convenient for testing, which hopefully some experts in differential algebra will do!",
    "created_at": "2012-07-23T12:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159067",
    "user": "https://github.com/kcrisman"
}
```

> > I assume that this is somewhere in the sage-combinat queue, but just for completeness, if you could put links to an spkg, the other Sage library files needed, etc., that would be great.  I'm constantly amazed at what you guys come up with!
> 
> The shell script (rebuild) builds two spkg. I thought it was simpler that way.

Fair enough for those testing, but in the end I think that the release manager is likely (?) to want an actual spkg.  For instance, Sage should be buildable without the internet (that is, once it is downloaded or the tarball is otherwise acquired, the internet should not be a dependency).

Also, is this a proposal for an optional spkg?

Finally, you'll almost certainly need to provide the DifferentialAlgebra.pyx file and the changes to setup.py and the module list as a patch.

But you are right that this script would be very convenient for testing, which hopefully some experts in differential algebra will do!



---

archive/issue_comments_159068.json:
```json
{
    "body": "Interesting!  I'll take a careful look at this in the coming weeks as a possible base for a moving-frames/exterior differential geometry package.",
    "created_at": "2012-07-23T19:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159068",
    "user": "https://trac.sagemath.org/admin/accounts/users/adsmith"
}
```

Interesting!  I'll take a careful look at this in the coming weeks as a possible base for a moving-frames/exterior differential geometry package.



---

archive/issue_comments_159069.json:
```json
{
    "body": "I have tried to repackage F. Boulier's code in (what I understand is) the Right Way.\n\nIf you want to enjoy the power of the DifferentialAlgebra package, which is yet not-even-optionnal, you have to download the two spkg's, and apply the patch\n\n* Download [http://www.lifl.fr/~bouillaguet/download/blad-3.9.spkg](http://www.lifl.fr/~bouillaguet/download/blad-3.9.spkg)\n* Download [http://www.lifl.fr/~bouillaguet/download/bmi-3.2.spkg](http://www.lifl.fr/~bouillaguet/download/bmi-3.2.spkg)\n* Apply [attachment:13268_differential_algebra.patch]\n\n\n**Note to release manager:** \n\nThe SPKGs are optional/experimental/whatever but the patch for the Sage library should be merged so that the packages can be used later on",
    "created_at": "2012-07-26T18:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159069",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

I have tried to repackage F. Boulier's code in (what I understand is) the Right Way.

If you want to enjoy the power of the DifferentialAlgebra package, which is yet not-even-optionnal, you have to download the two spkg's, and apply the patch

* Download [http://www.lifl.fr/~bouillaguet/download/blad-3.9.spkg](http://www.lifl.fr/~bouillaguet/download/blad-3.9.spkg)
* Download [http://www.lifl.fr/~bouillaguet/download/bmi-3.2.spkg](http://www.lifl.fr/~bouillaguet/download/bmi-3.2.spkg)
* Apply [attachment:13268_differential_algebra.patch]


**Note to release manager:** 

The SPKGs are optional/experimental/whatever but the patch for the Sage library should be merged so that the packages can be used later on



---

archive/issue_comments_159070.json:
```json
{
    "body": "Pretty minor points, though worth thinking about:\n* For helping reviewers, you might want to separate the header file and the changes in `module_list.py` in a separate patch; I *think* that might make them \"viewable\" in Trac, given its MB limits for viewing.\n* You have a lot of things like `R.sort (L)` which I presume is valid Python syntax, but very different from the rest of the documentation, where we would have `R.sort(L)`.  I don't know how important this is, but it was a little jarring to me, at least.\n* I wonder if maybe it wouldn't be better somewhere (sage/combinat? sage/rings? I'm not sure where) to put the \"main interface\", so that the sage/libs piece is really just for headers and wrapping.  You can see that the files and folders there are really even named after the things, so that having sage/libs/blad or sage/libs/bmi and then having differential algebra basic commands elsewhere would be good.  You might want to ask some people who have done these other packages, or poke around the code.\n\nLess minor, I think:\n* How many of these doctests would actually work without both of those packages installed?  So most would have to be marked optional with the correct keyword.  It might be worth looking at the way other optional spkgs handle this maybe the Lie package or the p-group-cohomology one?\n* I think we no longer have any double-underscore methods - I can't remember exactly when this was done, but there was a discussion about this at Sage Days 40.5, at least.  E.g. your `__ranking`.\n\nGood luck!  Looks cool.",
    "created_at": "2012-07-27T14:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159070",
    "user": "https://github.com/kcrisman"
}
```

Pretty minor points, though worth thinking about:
* For helping reviewers, you might want to separate the header file and the changes in `module_list.py` in a separate patch; I *think* that might make them "viewable" in Trac, given its MB limits for viewing.
* You have a lot of things like `R.sort (L)` which I presume is valid Python syntax, but very different from the rest of the documentation, where we would have `R.sort(L)`.  I don't know how important this is, but it was a little jarring to me, at least.
* I wonder if maybe it wouldn't be better somewhere (sage/combinat? sage/rings? I'm not sure where) to put the "main interface", so that the sage/libs piece is really just for headers and wrapping.  You can see that the files and folders there are really even named after the things, so that having sage/libs/blad or sage/libs/bmi and then having differential algebra basic commands elsewhere would be good.  You might want to ask some people who have done these other packages, or poke around the code.

Less minor, I think:
* How many of these doctests would actually work without both of those packages installed?  So most would have to be marked optional with the correct keyword.  It might be worth looking at the way other optional spkgs handle this maybe the Lie package or the p-group-cohomology one?
* I think we no longer have any double-underscore methods - I can't remember exactly when this was done, but there was a discussion about this at Sage Days 40.5, at least.  E.g. your `__ranking`.

Good luck!  Looks cool.



---

archive/issue_comments_159071.json:
```json
{
    "body": "Changing assignee from Francois.Boulier@univ-lille1.fr to boulier.",
    "created_at": "2012-07-27T14:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159071",
    "user": "https://github.com/kcrisman"
}
```

Changing assignee from Francois.Boulier@univ-lille1.fr to boulier.



---

archive/issue_comments_159072.json:
```json
{
    "body": "Patch and spkg's updated. The package was broken since 5.1, but is now fixed.",
    "created_at": "2012-09-24T17:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159072",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Patch and spkg's updated. The package was broken since 5.1, but is now fixed.



---

archive/issue_comments_159073.json:
```json
{
    "body": "Changing component from packages to optional packages.",
    "created_at": "2012-11-26T08:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159073",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing component from packages to optional packages.



---

archive/issue_comments_159074.json:
```json
{
    "body": "Attachment [13268_differential_algebra_support_files.patch](tarball://root/attachments/some-uuid/ticket13268/13268_differential_algebra_support_files.patch) by Bouillaguet created at 2012-11-26 08:29:37\n\nCython library headers for BLAD/BMI",
    "created_at": "2012-11-26T08:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159074",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Attachment [13268_differential_algebra_support_files.patch](tarball://root/attachments/some-uuid/ticket13268/13268_differential_algebra_support_files.patch) by Bouillaguet created at 2012-11-26 08:29:37

Cython library headers for BLAD/BMI



---

archive/issue_comments_159075.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2012-11-26T08:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159075",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_159076.json:
```json
{
    "body": "tell SAGE about the optional package",
    "created_at": "2012-11-26T08:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159076",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

tell SAGE about the optional package



---

archive/issue_comments_159077.json:
```json
{
    "body": "Attachment [13268_differential_algebra_reference_manual_update.patch](tarball://root/attachments/some-uuid/ticket13268/13268_differential_algebra_reference_manual_update.patch) by Bouillaguet created at 2012-11-26 11:26:09\n\nupdates the reference manual",
    "created_at": "2012-11-26T11:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159077",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Attachment [13268_differential_algebra_reference_manual_update.patch](tarball://root/attachments/some-uuid/ticket13268/13268_differential_algebra_reference_manual_update.patch) by Bouillaguet created at 2012-11-26 11:26:09

updates the reference manual



---

archive/issue_comments_159078.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-26T11:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159078",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_159079.json:
```json
{
    "body": "Attachment [13268_differential_algebra.patch](tarball://root/attachments/some-uuid/ticket13268/13268_differential_algebra.patch) by Bouillaguet created at 2012-11-26 14:47:25\n\nActual DifferentialAlgebra Class",
    "created_at": "2012-11-26T14:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159079",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Attachment [13268_differential_algebra.patch](tarball://root/attachments/some-uuid/ticket13268/13268_differential_algebra.patch) by Bouillaguet created at 2012-11-26 14:47:25

Actual DifferentialAlgebra Class



---

archive/issue_events_036665.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13096#event-36665"
}
```



---

archive/issue_comments_159080.json:
```json
{
    "body": "The ticket description doesn't have a link to the bmi spkg, is it still needed? Also, has anybody considered reviewing this ticket?",
    "created_at": "2013-09-11T13:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159080",
    "user": "https://github.com/vbraun"
}
```

The ticket description doesn't have a link to the bmi spkg, is it still needed? Also, has anybody considered reviewing this ticket?



---

archive/issue_comments_159081.json:
```json
{
    "body": "Replying to [comment:13 vbraun]:\n> The ticket description doesn't have a link to the bmi spkg, is it still needed? \n\nI don't think so. I think I updated the spkg to contain both, because it would not make much sense to have both separated.\n\n> Also, has anybody considered reviewing this ticket? \n\nI did ask for this several times on the mailing list....",
    "created_at": "2013-09-11T14:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159081",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Replying to [comment:13 vbraun]:
> The ticket description doesn't have a link to the bmi spkg, is it still needed? 

I don't think so. I think I updated the spkg to contain both, because it would not make much sense to have both separated.

> Also, has anybody considered reviewing this ticket? 

I did ask for this several times on the mailing list....



---

archive/issue_comments_159082.json:
```json
{
    "body": "With the switch to git we are really aiming to distribute one upstream tarball for each \"spkg\" install script if possible. Since the two libraries are distributed separately they should be separate spkgs.\n\nAll patches need a commit message, only the first one has one right now.",
    "created_at": "2013-09-11T14:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159082",
    "user": "https://github.com/vbraun"
}
```

With the switch to git we are really aiming to distribute one upstream tarball for each "spkg" install script if possible. Since the two libraries are distributed separately they should be separate spkgs.

All patches need a commit message, only the first one has one right now.



---

archive/issue_comments_159083.json:
```json
{
    "body": "I'm a bit confused by the code... the DifferentialRing isn't really a ring in the Sage sense (with elements that have ring operations). Am I missing something? The starting point should be a proper differential algebra ring, e.g.\n\n```\nsage: R = DifferentialRing(vars=['x'], functions=['f'])\nsage: x = R.var(0)\nsage: f = R.function(0)\nsage: (2*x*f).parent() is R\nTrue\n```\n\nand perhaps slightly extend the preparser to allow\n\n```\nsage: R.<f(x)> = DifferentialRing()\n```\n",
    "created_at": "2013-09-11T14:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159083",
    "user": "https://github.com/vbraun"
}
```

I'm a bit confused by the code... the DifferentialRing isn't really a ring in the Sage sense (with elements that have ring operations). Am I missing something? The starting point should be a proper differential algebra ring, e.g.

```
sage: R = DifferentialRing(vars=['x'], functions=['f'])
sage: x = R.var(0)
sage: f = R.function(0)
sage: (2*x*f).parent() is R
True
```

and perhaps slightly extend the preparser to allow

```
sage: R.<f(x)> = DifferentialRing()
```




---

archive/issue_comments_159084.json:
```json
{
    "body": "Dear vbraun,\n\nThank you for your feedback. I really appreciate it.\n\nThere are two ways to \"view\" differential algebra. Either you view it as an algebraic theory and then, you are right, the starting point should be a differential ring (that's the way Ritt and Kolchin books are written). Or you take a more engineering point of view: the starting point is the system of equations to be solved and differential algebra is one tool among others (such as numerical integration, bifurcation theory, ...) to investigate them. It is the point of view which was chosen for the design. Indeed, I believe this point of view is likely to be the most appealing for many scientists.\n\nThe ideal scenario could look like this: A Sage user first enters the differential equations he/she wants to study. After many computations, he/she decides that differential algebra might be useful. He/she loads the package and applies its methods over the equations. He/she is very happy not to have convert all the time objects from one data type to another one.\n\nI hope my explanations make sense :-)\n\nAll the best,\nFran\u00e7ois",
    "created_at": "2013-09-13T11:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159084",
    "user": "https://trac.sagemath.org/admin/accounts/users/boulier"
}
```

Dear vbraun,

Thank you for your feedback. I really appreciate it.

There are two ways to "view" differential algebra. Either you view it as an algebraic theory and then, you are right, the starting point should be a differential ring (that's the way Ritt and Kolchin books are written). Or you take a more engineering point of view: the starting point is the system of equations to be solved and differential algebra is one tool among others (such as numerical integration, bifurcation theory, ...) to investigate them. It is the point of view which was chosen for the design. Indeed, I believe this point of view is likely to be the most appealing for many scientists.

The ideal scenario could look like this: A Sage user first enters the differential equations he/she wants to study. After many computations, he/she decides that differential algebra might be useful. He/she loads the package and applies its methods over the equations. He/she is very happy not to have convert all the time objects from one data type to another one.

I hope my explanations make sense :-)

All the best,
François



---

archive/issue_comments_159085.json:
```json
{
    "body": "OK, fair enough. I'm happy with thinking of it as a tool to simplify differential equations. But then you shouldn't introduce global names like DifferentialRing that are likely to be used at one point for the more abstract ring of differential operators.\n\nIn that spirit, it would be nice if the code were organized in the way you describe it verbally. The starting point should be an object that encapsulates the differential system, e.g.\n\n```\nsage: syst = DifferentialAlgebraicSystem(vars=[t], functions=[f,g], parameters=[phi])\n```\n\nAnd then everything is a method of that object. There you need to decide whether you want DifferentialAlgebraicSystem to be mutable or immutable; In the immutable case the user interface would be\n\n```\nsage: sys_extd = syst.extend_base_field(phi)\nsage: sys_reln = sys_extd.add_relation(f(0) == 0)\nsage: sys_reln\nDifferential algebraic system ... over base field RR(phi) with relation f(0) == 0\nsage: ideal = sys_reln.Rosenfeld_Groebner()\n```\n\nand if it is mutable you'd have\n\n```\nsage: syst.extend_base_field(phi)\nsage: syst.add_relation(f(0) == 0)\nsage: syst\nDifferential algebraic system ... over base field RR(phi) with relation f(0) == 0\n```\n\nMutable is slightly simpler but also means that you can't cache intermediate results.\n\nIn general, your objects should print something more informative than `regular_differential_chain`. It doesn't necessarily have to print all equations, but enough to see if its trivial or not would be nice.",
    "created_at": "2013-09-13T12:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159085",
    "user": "https://github.com/vbraun"
}
```

OK, fair enough. I'm happy with thinking of it as a tool to simplify differential equations. But then you shouldn't introduce global names like DifferentialRing that are likely to be used at one point for the more abstract ring of differential operators.

In that spirit, it would be nice if the code were organized in the way you describe it verbally. The starting point should be an object that encapsulates the differential system, e.g.

```
sage: syst = DifferentialAlgebraicSystem(vars=[t], functions=[f,g], parameters=[phi])
```

And then everything is a method of that object. There you need to decide whether you want DifferentialAlgebraicSystem to be mutable or immutable; In the immutable case the user interface would be

```
sage: sys_extd = syst.extend_base_field(phi)
sage: sys_reln = sys_extd.add_relation(f(0) == 0)
sage: sys_reln
Differential algebraic system ... over base field RR(phi) with relation f(0) == 0
sage: ideal = sys_reln.Rosenfeld_Groebner()
```

and if it is mutable you'd have

```
sage: syst.extend_base_field(phi)
sage: syst.add_relation(f(0) == 0)
sage: syst
Differential algebraic system ... over base field RR(phi) with relation f(0) == 0
```

Mutable is slightly simpler but also means that you can't cache intermediate results.

In general, your objects should print something more informative than `regular_differential_chain`. It doesn't necessarily have to print all equations, but enough to see if its trivial or not would be nice.



---

archive/issue_events_036666.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13096#event-36666"
}
```



---

archive/issue_events_036667.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13096#event-36667"
}
```



---

archive/issue_events_036668.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13096#event-36668"
}
```



---

archive/issue_events_036669.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13096#event-36669"
}
```



---

archive/issue_events_036670.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13096#event-36670"
}
```



---

archive/issue_events_036671.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13096#event-36671"
}
```



---

archive/issue_comments_159086.json:
```json
{
    "body": "Here's my (first) attempt at a git version. I downloaded the BLAD and BMI tarballs from [upstream](http://www.lifl.fr/~boulier/pmwiki/pmwiki.php?n=Main.BLAD), renamed them `*.tgz` -> `*.tar.gz`, and I was able to install them. However there was no `$SAGE_LOCAL/include/bmi.h` created, and so either my build or the `module_list.py` isn't correct. So that's where I'm stuck at right now and I don't know how to proceed.\n\nI agree with Volker in that they should remain as separate patches as it makes our lives easier for inclusion in Sage as the upstream packages are updated. I also am against the global name `DifferentialRing` as this is ambiguous, so this will need a name change.\n\nI'd love to see this get into Sage as this looks like some cool functionality.\n----\nNew commits:",
    "created_at": "2014-11-17T07:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159086",
    "user": "https://github.com/tscrim"
}
```

Here's my (first) attempt at a git version. I downloaded the BLAD and BMI tarballs from [upstream](http://www.lifl.fr/~boulier/pmwiki/pmwiki.php?n=Main.BLAD), renamed them `*.tgz` -> `*.tar.gz`, and I was able to install them. However there was no `$SAGE_LOCAL/include/bmi.h` created, and so either my build or the `module_list.py` isn't correct. So that's where I'm stuck at right now and I don't know how to proceed.

I agree with Volker in that they should remain as separate patches as it makes our lives easier for inclusion in Sage as the upstream packages are updated. I also am against the global name `DifferentialRing` as this is ambiguous, so this will need a name change.

I'd love to see this get into Sage as this looks like some cool functionality.
----
New commits:



---

archive/issue_comments_159087.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-11-17T07:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159087",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_159088.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-27T03:52:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159088",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_159089.json:
```json
{
    "body": "Updated to Sage 8.2\n\nI added an **Installation** section to the ticket description.  I think it should be fairly simple now to work with this code, if not, let me know.\n\nI'd also like to see this code in Sage.  Fran\u00e7ois Boulier has done a fantastic job with the blad library.  I've tried to implement Rosenfeld-Gr\u00f6bner from scratch, and believe me, Fran\u00e7ois's library is the way to go.\n\nWith that said, I do think that this code belongs in `sage.rings` and not `sage.calculus`.  Regarding the discussion between `vbraun` and `boulier`, I come at it from the opposite angle - I'm working in polynomial rings all the time, and find it annoying to have to constantly convert back and forth to the symbolic ring.\n\nSo I'm thinking that `DifferentialRing` should behave a lot like `PolynomialRing` - it should take a first argument to specify the coefficient field, and implement `DifferentialRingElement` and probably `DifferentialIdeal`.  We should deal with the situation that Fran\u00e7ois described (the user has created a bunch of equations in the symbolic ring and now wants to use differential algebra tools) by making it easier to move from the symbolic ring to polynomial / differential rings, not by basing `DifferentialRing` on the symbolic ring (like is done currently).\n\nThe code still needs a good bit of work before we mainline it, so I'll try to keep some patches coming on this ticket...",
    "created_at": "2018-05-27T04:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159089",
    "user": "https://github.com/BrentBaccala"
}
```

Updated to Sage 8.2

I added an **Installation** section to the ticket description.  I think it should be fairly simple now to work with this code, if not, let me know.

I'd also like to see this code in Sage.  François Boulier has done a fantastic job with the blad library.  I've tried to implement Rosenfeld-Gröbner from scratch, and believe me, François's library is the way to go.

With that said, I do think that this code belongs in `sage.rings` and not `sage.calculus`.  Regarding the discussion between `vbraun` and `boulier`, I come at it from the opposite angle - I'm working in polynomial rings all the time, and find it annoying to have to constantly convert back and forth to the symbolic ring.

So I'm thinking that `DifferentialRing` should behave a lot like `PolynomialRing` - it should take a first argument to specify the coefficient field, and implement `DifferentialRingElement` and probably `DifferentialIdeal`.  We should deal with the situation that François described (the user has created a bunch of equations in the symbolic ring and now wants to use differential algebra tools) by making it easier to move from the symbolic ring to polynomial / differential rings, not by basing `DifferentialRing` on the symbolic ring (like is done currently).

The code still needs a good bit of work before we mainline it, so I'll try to keep some patches coming on this ticket...



---

archive/issue_comments_159090.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-05-28T05:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159090",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_159091.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-29T05:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159091",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_159092.json:
```json
{
    "body": "Remove assignee boulier.",
    "created_at": "2018-05-29T05:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159092",
    "user": "https://github.com/BrentBaccala"
}
```

Remove assignee boulier.



---

archive/issue_comments_159093.json:
```json
{
    "body": "I disowned this ticket, since Fran\u00e7ois Boulier indicated to me via email that he's not working on the Sage package anymore.",
    "created_at": "2018-05-29T05:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159093",
    "user": "https://github.com/BrentBaccala"
}
```

I disowned this ticket, since François Boulier indicated to me via email that he's not working on the Sage package anymore.



---

archive/issue_comments_159094.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-25T04:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159094",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_159095.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-22T20:48:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159095",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_159096.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-22T21:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159096",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_159097.json:
```json
{
    "body": "Some quick comments about technicalities:\n\n1. Why do you want these to be experimental packages, as opposed to optional?\n\n2. To avoid confusion, there should be a direct link to the upstream tarballs easily visible in the ticket description.\n\n3. You mention dependencies in `SPKG.txt` while the `dependencies` files have `# no dependencies`\n\n4. The `spkg-install` files should use the more modern sdh helpers. Look at some other `spkg-install` files if you don't know what I mean.\n\n5. Compiling with `-Werror` is a bad idea: it's likely to break stuff for no good reason.\n\n6. `# This file is automatically generated from the blad header files`: if that's true, include the script to autogenerate those files instead of the output of that script.\n\n7. In a lot of places, you use `bytes` or `char*` where you really mean a string. That will break badly on Python 3.\n\n8. Don't overdo Cython typing: for example, I would write\n\n```\ndef __init__(self, derivations=[], blocks=[], parameters=[], notation=\"D\")\n```\n\ninstead of\n\n```\ndef __init__ (\n                self,\n                list derivations = [],\n                list blocks = [],\n                list parameters = [],\n                char* notation = BMI_IX_D)\n```\n\n\n9. Remove pointless comments or docstrings like `# __init__` and `\"\"\" The destructor \"\"\"`\n\n10. Use `is None` instead of `== None`.\n\n21. Try to follow PEP 8 style, I find the extra spaces quite annoying: `DifferentialRing (derivations = [t], blocks = [u,v])` should be `DifferentialRing(derivations=[t], blocks=[u, v])`.\n\n32. `raise Exception, message` should be `raise Exception(message)`.\n\n43. What's up with `bmi_strings.pyx`? Why do you write `BMI_IX_undefined` instead of just `\"undefined\"`?\n\n54. There shouldn't be indentation here:\n\n```\nEXAMPLES:\n\n    This example shows how to build the Henri Michaelis Menten formula\n    by differential elimination. One considers a chemical reaction\n    system describing the enzymatic reaction::\n```\n\nSame problem here:\n\n```\nEXAMPLE:\n\n    This example shows how to compute an input/output relation, having\n    a nice form, for a compartmental model...\n```\n\nand here:\n\n```\n    The class DifferentialRing implements differential polynomial rings\n\n        Differential rings can be endowed with zero, one or many different\n        derivations.\n```\n\n\n15. Please use the standard copyright notice.\n\n26. It's preferred to use `# distutils: libraries` declarations in Cython files instead of `libraries = [\"blad\", \"bmi\"]` in `module_list.py`. And the `language` and `depends` in `module_list.py` are not needed as far as I can tell.\n\n37. `from cpython cimport bool` is probably not what you want: it refers to the Python `bool` class. What you probably want to use is `bint`, which is more like a C boolean (using the C `int` type).",
    "created_at": "2019-03-23T22:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159097",
    "user": "https://github.com/jdemeyer"
}
```

Some quick comments about technicalities:

1. Why do you want these to be experimental packages, as opposed to optional?

2. To avoid confusion, there should be a direct link to the upstream tarballs easily visible in the ticket description.

3. You mention dependencies in `SPKG.txt` while the `dependencies` files have `# no dependencies`

4. The `spkg-install` files should use the more modern sdh helpers. Look at some other `spkg-install` files if you don't know what I mean.

5. Compiling with `-Werror` is a bad idea: it's likely to break stuff for no good reason.

6. `# This file is automatically generated from the blad header files`: if that's true, include the script to autogenerate those files instead of the output of that script.

7. In a lot of places, you use `bytes` or `char*` where you really mean a string. That will break badly on Python 3.

8. Don't overdo Cython typing: for example, I would write

```
def __init__(self, derivations=[], blocks=[], parameters=[], notation="D")
```

instead of

```
def __init__ (
                self,
                list derivations = [],
                list blocks = [],
                list parameters = [],
                char* notation = BMI_IX_D)
```


9. Remove pointless comments or docstrings like `# __init__` and `""" The destructor """`

10. Use `is None` instead of `== None`.

21. Try to follow PEP 8 style, I find the extra spaces quite annoying: `DifferentialRing (derivations = [t], blocks = [u,v])` should be `DifferentialRing(derivations=[t], blocks=[u, v])`.

32. `raise Exception, message` should be `raise Exception(message)`.

43. What's up with `bmi_strings.pyx`? Why do you write `BMI_IX_undefined` instead of just `"undefined"`?

54. There shouldn't be indentation here:

```
EXAMPLES:

    This example shows how to build the Henri Michaelis Menten formula
    by differential elimination. One considers a chemical reaction
    system describing the enzymatic reaction::
```

Same problem here:

```
EXAMPLE:

    This example shows how to compute an input/output relation, having
    a nice form, for a compartmental model...
```

and here:

```
    The class DifferentialRing implements differential polynomial rings

        Differential rings can be endowed with zero, one or many different
        derivations.
```


15. Please use the standard copyright notice.

26. It's preferred to use `# distutils: libraries` declarations in Cython files instead of `libraries = ["blad", "bmi"]` in `module_list.py`. And the `language` and `depends` in `module_list.py` are not needed as far as I can tell.

37. `from cpython cimport bool` is probably not what you want: it refers to the Python `bool` class. What you probably want to use is `bint`, which is more like a C boolean (using the C `int` type).



---

archive/issue_comments_159098.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-11-30T00:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159098",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_159099.json:
```json
{
    "body": "Do we have a TODO list here? I'm debating working on this.\n\nReplying to [comment:25 gh-BrentBaccala]:\n> Updated to Sage 8.2\n> \n> I added an **Installation** section to the ticket description.  I think it should be fairly simple now to work with this code, if not, let me know.\n> \n> I'd also like to see this code in Sage.  Fran\u00e7ois Boulier has done a fantastic job with the blad library.  I've tried to implement Rosenfeld-Gr\u00f6bner from scratch, and believe me, Fran\u00e7ois's library is the way to go.\n> \n> With that said, I do think that this code belongs in `sage.rings` and not `sage.calculus`.  Regarding the discussion between `vbraun` and `boulier`, I come at it from the opposite angle - I'm working in polynomial rings all the time, and find it annoying to have to constantly convert back and forth to the symbolic ring.\n> \n> So I'm thinking that `DifferentialRing` should behave a lot like `PolynomialRing` - it should take a first argument to specify the coefficient field, and implement `DifferentialRingElement` and probably `DifferentialIdeal`.  We should deal with the situation that Fran\u00e7ois described (the user has created a bunch of equations in the symbolic ring and now wants to use differential algebra tools) by making it easier to move from the symbolic ring to polynomial / differential rings, not by basing `DifferentialRing` on the symbolic ring (like is done currently).\n> \n> The code still needs a good bit of work before we mainline it, so I'll try to keep some patches coming on this ticket...",
    "created_at": "2020-02-24T21:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159099",
    "user": "https://github.com/tdupu"
}
```

Do we have a TODO list here? I'm debating working on this.

Replying to [comment:25 gh-BrentBaccala]:
> Updated to Sage 8.2
> 
> I added an **Installation** section to the ticket description.  I think it should be fairly simple now to work with this code, if not, let me know.
> 
> I'd also like to see this code in Sage.  François Boulier has done a fantastic job with the blad library.  I've tried to implement Rosenfeld-Gröbner from scratch, and believe me, François's library is the way to go.
> 
> With that said, I do think that this code belongs in `sage.rings` and not `sage.calculus`.  Regarding the discussion between `vbraun` and `boulier`, I come at it from the opposite angle - I'm working in polynomial rings all the time, and find it annoying to have to constantly convert back and forth to the symbolic ring.
> 
> So I'm thinking that `DifferentialRing` should behave a lot like `PolynomialRing` - it should take a first argument to specify the coefficient field, and implement `DifferentialRingElement` and probably `DifferentialIdeal`.  We should deal with the situation that François described (the user has created a bunch of equations in the symbolic ring and now wants to use differential algebra tools) by making it easier to move from the symbolic ring to polynomial / differential rings, not by basing `DifferentialRing` on the symbolic ring (like is done currently).
> 
> The code still needs a good bit of work before we mainline it, so I'll try to keep some patches coming on this ticket...



---

archive/issue_comments_159100.json:
```json
{
    "body": "Replying to [comment:35 gh-tdupu]:\n> Do we have a TODO list here? I'm debating working on this.\n\nI'd think, first, get it running on the newest Sage release, then hit the issues jdemeyer listed a year ago, then look at implementing a `DifferentialRing` class.\n\nWe're both on the U.S. East Coast (I'm in the Washington, DC area), so maybe I'll give you a call at your office and we can talk more about it.",
    "created_at": "2020-02-25T04:06:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159100",
    "user": "https://github.com/BrentBaccala"
}
```

Replying to [comment:35 gh-tdupu]:
> Do we have a TODO list here? I'm debating working on this.

I'd think, first, get it running on the newest Sage release, then hit the issues jdemeyer listed a year ago, then look at implementing a `DifferentialRing` class.

We're both on the U.S. East Coast (I'm in the Washington, DC area), so maybe I'll give you a call at your office and we can talk more about it.



---

archive/issue_comments_159101.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2020-06-19T18:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159101",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_159102.json:
```json
{
    "body": "Setting spkg proposals that have not seen recent activity to \"sage-wishlist\".",
    "created_at": "2020-06-19T18:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159102",
    "user": "https://github.com/mkoeppe"
}
```

Setting spkg proposals that have not seen recent activity to "sage-wishlist".



---

archive/issue_events_036672.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-19T18:16:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13096#event-36672"
}
```



---

archive/issue_events_036673.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-19T18:16:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13096#event-36673"
}
```



---

archive/issue_comments_159103.json:
```json
{
    "body": "Are BLAD/BMI still maintained upstream?",
    "created_at": "2020-08-18T15:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159103",
    "user": "https://github.com/mkoeppe"
}
```

Are BLAD/BMI still maintained upstream?



---

archive/issue_comments_159104.json:
```json
{
    "body": "In the above example there is supposed to be a DifferentialAlgebra.pyx in this branch of sage: \n\nhttps://github.com/sagemath/sagetrac-mirror/tree/public/optional_spkg/differential_algebra-13268/src/sage\n\nsee the examples at the very beginning which has the line:\n\n\n```\nfrom sage.libs.blad.DifferentialAlgebra import DifferentialRing, RegularDifferentialChain, BaseFieldExtension\n```\n\n\nWhere is this now?",
    "created_at": "2022-06-30T18:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159104",
    "user": "https://github.com/tdupu"
}
```

In the above example there is supposed to be a DifferentialAlgebra.pyx in this branch of sage: 

https://github.com/sagemath/sagetrac-mirror/tree/public/optional_spkg/differential_algebra-13268/src/sage

see the examples at the very beginning which has the line:


```
from sage.libs.blad.DifferentialAlgebra import DifferentialRing, RegularDifferentialChain, BaseFieldExtension
```


Where is this now?



---

archive/issue_comments_159105.json:
```json
{
    "body": "Replying to [comment:39 gh-tdupu]:\n> In the above example there is supposed to be a DifferentialAlgebra.pyx in this branch of sage: \n> \n> https://github.com/sagemath/sagetrac-mirror/tree/public/optional_spkg/differential_algebra-13268/src/sage\n> \n> see the examples at the very beginning which has the line:\n> \n> {{{\n> from sage.libs.blad.DifferentialAlgebra import DifferentialRing, RegularDifferentialChain, BaseFieldExtension\n> }}}\n> \n> Where is this now?\n\n`DifferentialRing` is defined in `src/sage/calculus/DifferentialAlgebra.pyx`\n\nYou also need to install the BLAD and BMI libraries.\n\nIf you checkout the `public/optional_spkg/differential_algebra-13268` branch and run `git diff 9.0.beta4 --stat`, that should give you a good idea of where things are in this branch.",
    "created_at": "2022-07-02T00:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13096#issuecomment-159105",
    "user": "https://github.com/BrentBaccala"
}
```

Replying to [comment:39 gh-tdupu]:
> In the above example there is supposed to be a DifferentialAlgebra.pyx in this branch of sage: 
> 
> https://github.com/sagemath/sagetrac-mirror/tree/public/optional_spkg/differential_algebra-13268/src/sage
> 
> see the examples at the very beginning which has the line:
> 
> {{{
> from sage.libs.blad.DifferentialAlgebra import DifferentialRing, RegularDifferentialChain, BaseFieldExtension
> }}}
> 
> Where is this now?

`DifferentialRing` is defined in `src/sage/calculus/DifferentialAlgebra.pyx`

You also need to install the BLAD and BMI libraries.

If you checkout the `public/optional_spkg/differential_algebra-13268` branch and run `git diff 9.0.beta4 --stat`, that should give you a good idea of where things are in this branch.
