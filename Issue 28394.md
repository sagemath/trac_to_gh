# Issue 28394: Implement polynomial factorization over universal cyclotomic field

archive/issues_028394.json:
```json
{
    "body": "CC:  tscrim\n\nKeywords: universal cyclotomic field, factorization\n\nIndeed, that hasn't been done so far:\n\n\n```\nsage: UCF = UniversalCyclotomicField()\nsage: P.<x> = UCF[]\nsage: p = x**5-1\nsage: p.roots()\nTraceback (most recent call last):\n...\nNotImplementedError: root finding for this polynomial not implemented\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28631\n\n",
    "created_at": "2019-10-19T06:33:19Z",
    "labels": [
        "number fields",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Implement polynomial factorization over universal cyclotomic field",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28394",
    "user": "soehms"
}
```
CC:  tscrim

Keywords: universal cyclotomic field, factorization

Indeed, that hasn't been done so far:


```
sage: UCF = UniversalCyclotomicField()
sage: P.<x> = UCF[]
sage: p = x**5-1
sage: p.roots()
Traceback (most recent call last):
...
NotImplementedError: root finding for this polynomial not implemented
```



Issue created by migration from https://trac.sagemath.org/ticket/28631





---

archive/issue_comments_401046.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-19T06:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28394#issuecomment-401046",
    "user": "soehms"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_401047.json:
```json
{
    "body": "I add an implementation of `_factor_univariate_polynomial`.\n----\nNew commits:",
    "created_at": "2019-10-19T06:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28394#issuecomment-401047",
    "user": "soehms"
}
```

I add an implementation of `_factor_univariate_polynomial`.
----
New commits:



---

archive/issue_comments_401048.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-19T22:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28394#issuecomment-401048",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_401049.json:
```json
{
    "body": "LGTM.",
    "created_at": "2019-10-19T22:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28394#issuecomment-401049",
    "user": "tscrim"
}
```

LGTM.



---

archive/issue_comments_401050.json:
```json
{
    "body": "Thanks!",
    "created_at": "2019-10-20T10:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28394#issuecomment-401050",
    "user": "soehms"
}
```

Thanks!



---

archive/issue_comments_401051.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-21T22:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28394#issuecomment-401051",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_401052.json:
```json
{
    "body": "What is your code supposed to do!?\n\n```\nsage: x = polygen(UCF)\nsage: (x**2 - 3).factor()\nx^2 - 3\n```\n\nBut there is a square root\n\n```\nsage: UCF(3).sqrt()\nE(12)^7 - E(12)^11\nsage: UCF(3).sqrt()**2\n3\n```\n\nI propose to simply revert all of what this ticket did in #28659.\n\nNote that the `sqrt` used above is implemented for integers only since this is more or less trivial. But it fails for general UCF elements. Implementing more is definitely welcome\n- factorization of rational polynomials over UCF\n- square root for any UCF element\n(these are non-trivial tasks)\n\nPlease be more careful with your code submissions and reviews. Code discussion is very welcome on sage-devel and sage-nt.",
    "created_at": "2019-10-27T00:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28394#issuecomment-401052",
    "user": "vdelecroix"
}
```

What is your code supposed to do!?

```
sage: x = polygen(UCF)
sage: (x**2 - 3).factor()
x^2 - 3
```

But there is a square root

```
sage: UCF(3).sqrt()
E(12)^7 - E(12)^11
sage: UCF(3).sqrt()**2
3
```

I propose to simply revert all of what this ticket did in #28659.

Note that the `sqrt` used above is implemented for integers only since this is more or less trivial. But it fails for general UCF elements. Implementing more is definitely welcome
- factorization of rational polynomials over UCF
- square root for any UCF element
(these are non-trivial tasks)

Please be more careful with your code submissions and reviews. Code discussion is very welcome on sage-devel and sage-nt.



---

archive/issue_comments_401053.json:
```json
{
    "body": "Replying to [comment:6 vdelecroix]:\n> Please be more careful with your code submissions and reviews. Code discussion is very welcome on sage-devel and sage-nt.\n\nI'm sorry for that, Vincent, and will be more careful in future! I didn't become aware, that there was a serious reason that this was not implemented.\n\nOn the other hand, I think there are reasons, that Sage should be able to find roots of unity over the UCF. At least the following two:\n\n1) Code which needs a root of unity over an unspecified ring should not need an separate implementation for UCF.\n\n2) Sage is not only a tool for experts, but satisfies educational requirements, as well. But, what I've displayed in the ticket-description would at least cause irritations.\n\nMy code can be easily improved (adding two lines), in order to be not vastly any more. I will explain this in the new ticket.",
    "created_at": "2019-10-27T15:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28394#issuecomment-401053",
    "user": "soehms"
}
```

Replying to [comment:6 vdelecroix]:
> Please be more careful with your code submissions and reviews. Code discussion is very welcome on sage-devel and sage-nt.

I'm sorry for that, Vincent, and will be more careful in future! I didn't become aware, that there was a serious reason that this was not implemented.

On the other hand, I think there are reasons, that Sage should be able to find roots of unity over the UCF. At least the following two:

1) Code which needs a root of unity over an unspecified ring should not need an separate implementation for UCF.

2) Sage is not only a tool for experts, but satisfies educational requirements, as well. But, what I've displayed in the ticket-description would at least cause irritations.

My code can be easily improved (adding two lines), in order to be not vastly any more. I will explain this in the new ticket.
