# Issue 13833: plot of piecewise defined function raises UnboundLocalError

Issue created by migration from Trac.

Original creator: slabbe

Original creation time: 2013-01-29 22:00:29

Assignee: jason, was

This was reported to me by Mathieu Roux:


```
sage: f = piecewise([[(0,1),1],[(1,2),x-1]],x) 
sage: plot(f,0,2)                                
verbose 0 (575: plot.py, plot) there were 4 extra arguments (besides <sage.ext.fast_eval.FastDoubleFunc object at 0xb912618>)
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)

...

/Users/slabbe/Applications/sage-5.6.rc0/local/lib/python2.7/site-packages/sage/plot/plot.pyc in plot(funcs, *args, **kwds)
   1117             sage.misc.misc.verbose("there were %s extra arguments (besides %s)" % (n, funcs), level=0)
   1118 
-> 1119     G._set_extra_kwds(G_kwds)
   1120     if do_show:
   1121         G.show()

UnboundLocalError: local variable 'G' referenced before assignment
```


It seems related to a problem cited on [sage-support](https://groups.google.com/forum/?fromgroups=#!topic/sage-support/920l9d7covs) in 2008.

Note that the following works:


```
sage: f.plot()
```



---

Comment by nthiery created at 2013-05-22 01:55:17

Probably a variation on the same theme:

```
sage:  plot(exp, 0,10,x,(x,0,10),color='green')
verbose 0 (578: plot.py, plot) there were 4 extra arguments (besides exp)
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
<ipython-input-1-d893a3ab5a9f> in <module>()
----> 1 plot(exp, Integer(0),Integer(10),x,(x,Integer(0),Integer(10)),color='green')

...
/opt/sage-5.10.beta2/local/lib/python2.7/site-packages/sage/plot/plot.pyc in plot(funcs, *args, **kwds)
   1140             sage.misc.misc.verbose("there were %s extra arguments (besides %s)" % (n, funcs), level=0)
   1141 
-> 1142     G._set_extra_kwds(G_kwds)
   1143     if do_show:
   1144         G.show()

UnboundLocalError: local variable 'G' referenced before assignment
```


Reported by Isabelle Rouanet.


---

Comment by mkoeppe created at 2016-06-25 17:17:14

Description modified. This is a bug in the old (deprecated in #14801) `Piecewise` (capital P).
Can close this bug when the old `Piecewise` is removed completely.
