# Issue 23519: add shape method to crystal of tableaux elements

archive/issues_023519.json:
```json
{
    "body": "CC:  @anneschilling\n\nKeywords: crystals, tableaux\n\nIt would be nice if the following worked:\n\n```\nsage: C = crystals.Tableaux([\"A\", 2], shape=[2,1])\nsage: x = list(C)[0]\nsage: x.to_tableau().shape()\n[2, 1]\nsage: x.shape() # boom! no attribute 'shape'\n[2, 1]\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/23756\n\n",
    "created_at": "2017-08-30T17:55:48Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "add shape method to crystal of tableaux elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23519",
    "user": "https://github.com/saliola"
}
```
CC:  @anneschilling

Keywords: crystals, tableaux

It would be nice if the following worked:

```
sage: C = crystals.Tableaux(["A", 2], shape=[2,1])
sage: x = list(C)[0]
sage: x.to_tableau().shape()
[2, 1]
sage: x.shape() # boom! no attribute 'shape'
[2, 1]
```


Issue created by migration from https://trac.sagemath.org/ticket/23756





---

archive/issue_comments_329200.json:
```json
{
    "body": "Note: We are writing a patch that we will push soon.",
    "created_at": "2017-08-30T17:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23519#issuecomment-329200",
    "user": "https://github.com/saliola"
}
```

Note: We are writing a patch that we will push soon.



---

archive/issue_comments_329201.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-30T18:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23519#issuecomment-329201",
    "user": "https://github.com/saliola"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_329202.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-08-30T18:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23519#issuecomment-329202",
    "user": "https://github.com/saliola"
}
```

New commits:



---

archive/issue_comments_329203.json:
```json
{
    "body": "Thanks for implementing this! Some crystals have spins and behave a little differently from the usual. For those one gets an error message:\n\n```\nsage: C = crystals.Tableaux(['B',2],shape=[1/2,1/2])\nsage: c = C.an_element()\nsage: c.shape()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-19-d69d3b969a7c> in <module>()\n----> 1 c.shape()\n\n/Applications/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__getattr__ (/Applications/sage/src/build/cythonized/sage/structure/element.c:4285)()\n    477             AttributeError: 'LeftZeroSemigroup_with_category.element_class' object has no attribute 'blah_blah'\n    478         \"\"\"\n--> 479         return self.getattr_from_category(name)\n    480 \n    481     cdef getattr_from_category(self, name):\n\n/Applications/sage/src/sage/structure/element.pyx in sage.structure.element.Element.getattr_from_category (/Applications/sage/src/build/cythonized/sage/structure/element.c:4394)()\n    490         else:\n    491             cls = P._abstract_element_class\n--> 492         return getattr_from_other_class(self, cls, name)\n    493 \n    494     def __dir__(self):\n\n/Applications/sage/src/sage/cpython/getattr.pyx in sage.cpython.getattr.getattr_from_other_class (/Applications/sage/src/build/cythonized/sage/cpython/getattr.c:1758)()\n    247         dummy_error_message.cls = type(self)\n    248         dummy_error_message.name = name\n--> 249         raise dummy_attribute_error\n    250     cdef PyObject* attr = _PyType_Lookup(<type>cls, name)\n    251     if attr is NULL:\n\nAttributeError: 'TensorProductOfRegularCrystalsWithGenerators_with_category.element_class' object has no attribute 'shape'\n```\n\nOne option might be to get the shape from the parent:\n\n```\nsage: C = crystals.Tableaux(['B',2],shape=[1/2,1/2])\nsage: C.shapes\n((1/2, 1/2),)\n```\n\nAlternatively, one needs to treat the spin cases separately.",
    "created_at": "2017-08-30T20:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23519#issuecomment-329203",
    "user": "https://github.com/anneschilling"
}
```

Thanks for implementing this! Some crystals have spins and behave a little differently from the usual. For those one gets an error message:

```
sage: C = crystals.Tableaux(['B',2],shape=[1/2,1/2])
sage: c = C.an_element()
sage: c.shape()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-19-d69d3b969a7c> in <module>()
----> 1 c.shape()

/Applications/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__getattr__ (/Applications/sage/src/build/cythonized/sage/structure/element.c:4285)()
    477             AttributeError: 'LeftZeroSemigroup_with_category.element_class' object has no attribute 'blah_blah'
    478         """
--> 479         return self.getattr_from_category(name)
    480 
    481     cdef getattr_from_category(self, name):

/Applications/sage/src/sage/structure/element.pyx in sage.structure.element.Element.getattr_from_category (/Applications/sage/src/build/cythonized/sage/structure/element.c:4394)()
    490         else:
    491             cls = P._abstract_element_class
--> 492         return getattr_from_other_class(self, cls, name)
    493 
    494     def __dir__(self):

/Applications/sage/src/sage/cpython/getattr.pyx in sage.cpython.getattr.getattr_from_other_class (/Applications/sage/src/build/cythonized/sage/cpython/getattr.c:1758)()
    247         dummy_error_message.cls = type(self)
    248         dummy_error_message.name = name
--> 249         raise dummy_attribute_error
    250     cdef PyObject* attr = _PyType_Lookup(<type>cls, name)
    251     if attr is NULL:

AttributeError: 'TensorProductOfRegularCrystalsWithGenerators_with_category.element_class' object has no attribute 'shape'
```

One option might be to get the shape from the parent:

```
sage: C = crystals.Tableaux(['B',2],shape=[1/2,1/2])
sage: C.shapes
((1/2, 1/2),)
```

Alternatively, one needs to treat the spin cases separately.



---

archive/issue_comments_329204.json:
```json
{
    "body": "Also, in general I think it might be a good idea to have the trac # as part of the branch name.",
    "created_at": "2017-08-30T20:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23519#issuecomment-329204",
    "user": "https://github.com/anneschilling"
}
```

Also, in general I think it might be a good idea to have the trac # as part of the branch name.



---

archive/issue_comments_329205.json:
```json
{
    "body": "Replying to [comment:4 aschilling]:\n> Thanks for implementing this! Some crystals have spins and behave a little differently from the usual. For those one gets an error message:\n\nWell, for these crystals, the elements don't have a `to_tableau` method. We put the `shape` method in the same class as the `to_tableau` method. So one could define `to_tableau` for these other crystals as well. Does that make sense? Would that be part of this ticket or another ticket?",
    "created_at": "2017-09-06T12:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23519#issuecomment-329205",
    "user": "https://github.com/saliola"
}
```

Replying to [comment:4 aschilling]:
> Thanks for implementing this! Some crystals have spins and behave a little differently from the usual. For those one gets an error message:

Well, for these crystals, the elements don't have a `to_tableau` method. We put the `shape` method in the same class as the `to_tableau` method. So one could define `to_tableau` for these other crystals as well. Does that make sense? Would that be part of this ticket or another ticket?



---

archive/issue_comments_329206.json:
```json
{
    "body": "Replying to [comment:5 aschilling]:\n> Also, in general I think it might be a good idea to have the trac # as part of the branch name.\n\nI think so too! But I didn't pick the branch name. It was what came out of the `git-trac` scripts. Here are the commands I used:\n\n```\ngit trac checkout 23756       # created branch since there was none\n...\ngit trac push\n```\n",
    "created_at": "2017-09-06T12:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23519#issuecomment-329206",
    "user": "https://github.com/saliola"
}
```

Replying to [comment:5 aschilling]:
> Also, in general I think it might be a good idea to have the trac # as part of the branch name.

I think so too! But I didn't pick the branch name. It was what came out of the `git-trac` scripts. Here are the commands I used:

```
git trac checkout 23756       # created branch since there was none
...
git trac push
```




---

archive/issue_comments_329207.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-06T18:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23519#issuecomment-329207",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_022037.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-09-11T13:47:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23519#event-22037"
}
```



---

archive/issue_comments_329208.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-11T13:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23519#issuecomment-329208",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
