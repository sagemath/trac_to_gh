# Issue 11333: ideals_of_bdd_norm misterious bug?

archive/issues_011333.json:
```json
{
    "body": "Assignee: davidloeffler\n\nKeywords: ideallist, ideals of bounded norm, memory\n\nHere is a code that I try to run in my laptop:\n\n\n```\nsage: R.<t>=QQ['x']\nsage: F.<a>=NumberField(t^2-t-7)\nsage: V=F.ideals_of_bdd_norm(150000)\nsage: assert(len(V[14369])>0)\nsage: I=F.ideal(V[14369][0])\nsage: assert(I.norm()==14369)\n```\n\n\nThe last assertion should not complain, because ideals_of_bdd_norm(N) should return a dict of integral ideals of norm up to N, indexed by the norm.\n\nI have only observed this when I ask for very large norms (I would like to go up to 10e6, and the above is the smallest example that I got). If I ask for norms up to 15000 say, then it works as expected.\n\nI suspect that it is a problem with the communication with pari, but I don't know enough about it to tell. Also, I should say that this doesn't happen in other (bigger) machines that I have tried, so it might be architecture-related, or maybe memory dirtyness...\n\nI am running this on Sage 4.7, on a Thinkpad X41t with an updated Arch distribution, if that is of any help. Also I will be happy to do more tests if asked, of course!\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/11505\n\n",
    "created_at": "2011-06-16T16:59:35Z",
    "labels": [
        "number fields",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "ideals_of_bdd_norm misterious bug?",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11333",
    "user": "mmasdeu"
}
```
Assignee: davidloeffler

Keywords: ideallist, ideals of bounded norm, memory

Here is a code that I try to run in my laptop:


```
sage: R.<t>=QQ['x']
sage: F.<a>=NumberField(t^2-t-7)
sage: V=F.ideals_of_bdd_norm(150000)
sage: assert(len(V[14369])>0)
sage: I=F.ideal(V[14369][0])
sage: assert(I.norm()==14369)
```


The last assertion should not complain, because ideals_of_bdd_norm(N) should return a dict of integral ideals of norm up to N, indexed by the norm.

I have only observed this when I ask for very large norms (I would like to go up to 10e6, and the above is the smallest example that I got). If I ask for norms up to 15000 say, then it works as expected.

I suspect that it is a problem with the communication with pari, but I don't know enough about it to tell. Also, I should say that this doesn't happen in other (bigger) machines that I have tried, so it might be architecture-related, or maybe memory dirtyness...

I am running this on Sage 4.7, on a Thinkpad X41t with an updated Arch distribution, if that is of any help. Also I will be happy to do more tests if asked, of course!


Issue created by migration from https://trac.sagemath.org/ticket/11505





---

archive/issue_comments_125257.json:
```json
{
    "body": "I just ran the code and the first assert failed, i.e. `len(V[14369])` is 0 for me. And it should be since 14369 is inert in that quadratic field and so is not the norm of an ideal of that field.",
    "created_at": "2013-04-04T03:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11333#issuecomment-125257",
    "user": "robharron"
}
```

I just ran the code and the first assert failed, i.e. `len(V[14369])` is 0 for me. And it should be since 14369 is inert in that quadratic field and so is not the norm of an ideal of that field.
