# Issue 27130: update mpfrcx to version 0.5

archive/issues_027130.json:
```json
{
    "body": "CC:  slelievre embray fbissey\n\ntarball: http://www.multiprecision.org/downloads/mpfrcx-0.5.tar.gz\n\nit fixes a problem with #27212, which does not work with the present version.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27367\n\n",
    "created_at": "2019-02-26T22:31:13Z",
    "labels": [
        "packages: optional",
        "major",
        "bug"
    ],
    "title": "update mpfrcx to version 0.5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27130",
    "user": "dimpase"
}
```
CC:  slelievre embray fbissey

tarball: http://www.multiprecision.org/downloads/mpfrcx-0.5.tar.gz

it fixes a problem with #27212, which does not work with the present version.

Issue created by migration from https://trac.sagemath.org/ticket/27367





---

archive/issue_comments_382188.json:
```json
{
    "body": "needs testing with Sage-supplied GMP/MPIR (works with #27212 - system GMP)\n----\nNew commits:",
    "created_at": "2019-02-26T22:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382188",
    "user": "dimpase"
}
```

needs testing with Sage-supplied GMP/MPIR (works with #27212 - system GMP)
----
New commits:



---

archive/issue_comments_382189.json:
```json
{
    "body": "Adding keyword \"upgrade\" so the release manager knows to upload the tarball.",
    "created_at": "2019-02-27T12:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382189",
    "user": "slelievre"
}
```

Adding keyword "upgrade" so the release manager knows to upload the tarball.



---

archive/issue_comments_382190.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, mpfrcx\".",
    "created_at": "2019-02-27T12:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382190",
    "user": "slelievre"
}
```

Changing keywords from "" to "upgrade, mpfrcx".



---

archive/issue_comments_382191.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-02-27T12:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382191",
    "user": "dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_382192.json:
```json
{
    "body": "I tested this a bit with `SAGE_CHECK=yes`, looks good.\n(tested on OSX 10.13 with clang, on Ubuntus, on Fedora...)",
    "created_at": "2019-02-27T12:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382192",
    "user": "dimpase"
}
```

I tested this a bit with `SAGE_CHECK=yes`, looks good.
(tested on OSX 10.13 with clang, on Ubuntus, on Fedora...)



---

archive/issue_comments_382193.json:
```json
{
    "body": "LGTM. May the buildbots smile upon you. `:P`",
    "created_at": "2019-02-28T22:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382193",
    "user": "tscrim"
}
```

LGTM. May the buildbots smile upon you. `:P`



---

archive/issue_comments_382194.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-02-28T22:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382194",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_382195.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-03-03T22:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382195",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_382196.json:
```json
{
    "body": "I would really like to get the Cygwin buildbot working again but I'll never get there if we keep merging package upgrades without giving me an opportunity to test them...",
    "created_at": "2019-03-04T16:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382196",
    "user": "embray"
}
```

I would really like to get the Cygwin buildbot working again but I'll never get there if we keep merging package upgrades without giving me an opportunity to test them...



---

archive/issue_comments_382197.json:
```json
{
    "body": "tell me how to set up a Windows buildbot. I tried using GCE running Windows, but it's just hopeless...",
    "created_at": "2019-03-04T16:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382197",
    "user": "dimpase"
}
```

tell me how to set up a Windows buildbot. I tried using GCE running Windows, but it's just hopeless...



---

archive/issue_comments_382198.json:
```json
{
    "body": "We already have one, but it was previously broken due to something (probably openblas) causing the docbuild to hang, and it's just never been working since then: http://build.sagemath.org/#/builders/37",
    "created_at": "2019-03-04T16:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382198",
    "user": "embray"
}
```

We already have one, but it was previously broken due to something (probably openblas) causing the docbuild to hang, and it's just never been working since then: http://build.sagemath.org/#/builders/37



---

archive/issue_comments_382199.json:
```json
{
    "body": "Seems like the Cygwin buildbot is in slightly better shape than I thought?  It is *building* successfully, but then when it gets to running the doctests, it bizarrely exits with error code 1 immediately:\n\nhttp://build.sagemath.org/#/builders/37/builds/15/steps/8/logs/stdio\n\nThis despite being perfectly able to run the tests manually.  When run from buildbot it just fails immediately.",
    "created_at": "2019-03-04T17:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382199",
    "user": "embray"
}
```

Seems like the Cygwin buildbot is in slightly better shape than I thought?  It is *building* successfully, but then when it gets to running the doctests, it bizarrely exits with error code 1 immediately:

http://build.sagemath.org/#/builders/37/builds/15/steps/8/logs/stdio

This despite being perfectly able to run the tests manually.  When run from buildbot it just fails immediately.



---

archive/issue_comments_382200.json:
```json
{
    "body": "a usual Cygwin/PTY related headache? Random googling only finds netbeans-related stuff, and I don't even know what netbeans is. https://stackoverflow.com/questions/27284742/unable-to-start-pty-process",
    "created_at": "2019-03-04T17:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382200",
    "user": "dimpase"
}
```

a usual Cygwin/PTY related headache? Random googling only finds netbeans-related stuff, and I don't even know what netbeans is. https://stackoverflow.com/questions/27284742/unable-to-start-pty-process



---

archive/issue_comments_382201.json:
```json
{
    "body": "Replying to [comment:11 embray]:\n> We already have one, but it was previously broken due to something (probably openblas) causing the docbuild to hang, and it's just never been working since then: http://build.sagemath.org/#/builders/37\n\nSorry Eric, I thought that buildbot was there to catch when upgrades like this break things.",
    "created_at": "2019-03-04T21:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382201",
    "user": "tscrim"
}
```

Replying to [comment:11 embray]:
> We already have one, but it was previously broken due to something (probably openblas) causing the docbuild to hang, and it's just never been working since then: http://build.sagemath.org/#/builders/37

Sorry Eric, I thought that buildbot was there to catch when upgrades like this break things.



---

archive/issue_comments_382202.json:
```json
{
    "body": "It's ok, it's probably fine.  Turns out the Cygwin buildbot has at least been doing *builds* just not running the tests.  Which is not to say something couldn't have still broken with this, but at least we know it builds.  I think Volker just isn't checking that buildbot since it still isn't stable.\n\nI'm going to test this locally ASAP but I don't think it's likely to cause any headaches.",
    "created_at": "2019-03-05T16:15:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27130#issuecomment-382202",
    "user": "embray"
}
```

It's ok, it's probably fine.  Turns out the Cygwin buildbot has at least been doing *builds* just not running the tests.  Which is not to say something couldn't have still broken with this, but at least we know it builds.  I think Volker just isn't checking that buildbot since it still isn't stable.

I'm going to test this locally ASAP but I don't think it's likely to cause any headaches.
