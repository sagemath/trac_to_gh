# Issue 21782: py3 remove cmp() in two pyx files in rings

Issue created by migration from https://trac.sagemath.org/ticket/22019

Original creator: chapoton

Original creation time: 2016-12-04 11:04:35

CC:  tscrim aapitzsch jdemeyer

where _richcmp calls _cmp_


---

Comment by chapoton created at 2016-12-04 11:05:42

Changing status from new to needs_review.


---

Comment by chapoton created at 2016-12-04 11:05:42

New commits:


---

Comment by chapoton created at 2016-12-04 16:35:47

bot is morally green, please review


---

Comment by chapoton created at 2016-12-06 16:32:57

*ping*


---

Comment by jdemeyer created at 2016-12-08 11:32:29

Why don't you change `_cmp_` to `_richcmp_` here?


---

Comment by chapoton created at 2016-12-08 12:28:31

Because here (like in #22013), `_cmp_` is called indirectly by `_richcmp`.

And also because my aim is to get rid of cmp(), not necessarily to change `_cmp_` to `_richcmp_`


---

Comment by chapoton created at 2016-12-09 16:28:23

Could we please get try to move on here, and in the similar #22013, so that we can then try to attack the question of `_cmp_` and `_richcmp` inside Parent ?

See also #22029


---

Comment by tscrim created at 2016-12-11 15:05:08

Instead of an arbitrary `-1`, how about a `NotImplemented` as in #21971? This is at least a valid hack until we move to `_richcmp_`.


---

Comment by chapoton created at 2016-12-12 20:10:22

Replying to [comment:7 tscrim]:
> Instead of an arbitrary `-1`, how about a `NotImplemented` as in #21971? This is at least a valid hack until we move to `_richcmp_`.

Hmm, maybe the NotImplemented in #21971 was an error. Anyway, here it is not allowed by the type of the `_cmp_`function, so arbitrary -1 is the only option.


---

Comment by chapoton created at 2017-01-12 18:11:27

I would like this one to go in also, even if it is only a partial progress.

Recall that my current aim is to cythonize every pyx file in python3, and for that one has to remove all cmp() in pyx files.


---

Comment by tscrim created at 2017-01-12 21:52:34

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-01-12 21:52:34

This will work for now. Since these are parents, they probably should just use `__richcmp__` directly, but that can be an issue for another day.


---

Comment by vbraun created at 2017-01-18 20:38:53

Resolution: fixed
