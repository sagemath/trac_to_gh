# Issue 33716: Add degree() method to projective morphisms (aka rational maps)

Issue created by migration from https://trac.sagemath.org/ticket/33953

Original creator: klee

Original creation time: 2022-06-05 08:02:18

Add `graph()`, `projective_degrees()` and `degree` methods to projective morphisms.


---

Comment by git created at 2022-06-05 08:04:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-06-05 08:05:14

New commits:


---

Comment by klee created at 2022-06-05 08:06:43

Changing status from new to needs_review.


---

Comment by git created at 2022-06-05 08:20:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-06 02:32:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-11 12:20:47

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-06-11 12:38:28

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-08-04 06:42:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-08-08 06:19:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2022-08-22 02:53:39

There seems to be some real doctest failures reported by the patchbot:

```
sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/schemes/projective/projective_morphism.py  # 1 doctest failed
```

which I can reproduce. The others

```
sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/homology/graded_resolution.py  # 1 doctest failed
sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/homology/free_resolution.py  # 5 doctests failed
```

I cannot.

Here are my comments:

Since `projective_degrees()` potentially is an expensive computation, I would cache the result (which would also mean it returns a `tuple`).

Perhaps we should call `morphism()` instead `as_morphim()` to indicate that it is an equivalent but different type of object?


---

Comment by tscrim created at 2022-08-22 02:55:42

Also, if you could split this line:

```diff
-n1 = n + 1; m1 = m + 1
+n1 = n + 1
+m1 = m + 1
```

for our style guidelines (see patchbot).


---

Comment by klee created at 2022-08-22 03:27:05

Changing status from needs_review to needs_work.


---

Comment by klee created at 2022-08-22 03:27:05

Replying to [comment:14 tscrim]:
> There seems to be some real doctest failures reported by the patchbot:
> {{{
> sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/schemes/projective/projective_morphism.py  # 1 doctest failed
> }}}
> which I can reproduce. 

Yes. It is related with a deep-rooted problem of conic curves modules. I am working on it. If I fail, then I would simply change the doctest slightly.


---

Comment by git created at 2022-08-22 07:19:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-08-22 07:21:50

Replying to [comment:14 tscrim]:
> There seems to be some real doctest failures reported by the patchbot:
> {{{
> sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/schemes/projective/projective_morphism.py  # 1 doctest failed
> }}}
> which I can reproduce. 

Fixed.

> Since `projective_degrees()` potentially is an expensive computation, I would cache the result (which would also mean it returns a `tuple`).

Done. Also `graph()` is cached.

> Perhaps we should call `morphism()` instead `as_morphim()` to indicate that it is an equivalent but different type of object?

Yes. Done.


---

Comment by klee created at 2022-08-22 07:22:21

Replying to [comment:15 tscrim]:
> Also, if you could split this line:
> {{{#!diff
> -n1 = n + 1; m1 = m + 1
> +n1 = n + 1
> +m1 = m + 1
> }}}
> for our style guidelines (see patchbot).

Done. Thanks.


---

Comment by klee created at 2022-08-22 07:22:29

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2022-08-22 07:25:34

Thank you. Green bot => positive review.


---

Comment by klee created at 2022-08-22 12:29:02

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-08-30 19:04:57

Resolution: fixed
