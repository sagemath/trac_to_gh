# Issue 33716: Add degree() method to projective morphisms (aka rational maps)

archive/issues_033716.json:
```json
{
    "body": "Add `graph()`, `projective_degrees()` and `degree` methods to projective morphisms.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33953\n\n",
    "created_at": "2022-06-05T08:02:18Z",
    "labels": [
        "component: algebraic geometry",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Add degree() method to projective morphisms (aka rational maps)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33716",
    "user": "https://github.com/kwankyu"
}
```
Add `graph()`, `projective_degrees()` and `degree` methods to projective morphisms.

Issue created by migration from https://trac.sagemath.org/ticket/33953





---

archive/issue_comments_479054.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-05T08:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479055.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-06-05T08:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479055",
    "user": "https://github.com/kwankyu"
}
```

New commits:



---

archive/issue_comments_479056.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-06-05T08:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479056",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_479057.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-05T08:20:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479057",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479058.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-06T02:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479058",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479059.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-11T12:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_479060.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-11T12:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479060",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_479061.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-04T06:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479061",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479062.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-08T06:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479062",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479063.json:
```json
{
    "body": "There seems to be some real doctest failures reported by the patchbot:\n\n```\nsage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/schemes/projective/projective_morphism.py  # 1 doctest failed\n```\n\nwhich I can reproduce. The others\n\n```\nsage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/homology/graded_resolution.py  # 1 doctest failed\nsage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/homology/free_resolution.py  # 5 doctests failed\n```\n\nI cannot.\n\nHere are my comments:\n\nSince `projective_degrees()` potentially is an expensive computation, I would cache the result (which would also mean it returns a `tuple`).\n\nPerhaps we should call `morphism()` instead `as_morphim()` to indicate that it is an equivalent but different type of object?",
    "created_at": "2022-08-22T02:53:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479063",
    "user": "https://github.com/tscrim"
}
```

There seems to be some real doctest failures reported by the patchbot:

```
sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/schemes/projective/projective_morphism.py  # 1 doctest failed
```

which I can reproduce. The others

```
sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/homology/graded_resolution.py  # 1 doctest failed
sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/homology/free_resolution.py  # 5 doctests failed
```

I cannot.

Here are my comments:

Since `projective_degrees()` potentially is an expensive computation, I would cache the result (which would also mean it returns a `tuple`).

Perhaps we should call `morphism()` instead `as_morphim()` to indicate that it is an equivalent but different type of object?



---

archive/issue_comments_479064.json:
```json
{
    "body": "Also, if you could split this line:\n\n```diff\n-n1 = n + 1; m1 = m + 1\n+n1 = n + 1\n+m1 = m + 1\n```\n\nfor our style guidelines (see patchbot).",
    "created_at": "2022-08-22T02:55:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479064",
    "user": "https://github.com/tscrim"
}
```

Also, if you could split this line:

```diff
-n1 = n + 1; m1 = m + 1
+n1 = n + 1
+m1 = m + 1
```

for our style guidelines (see patchbot).



---

archive/issue_comments_479065.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-08-22T03:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479065",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_479066.json:
```json
{
    "body": "Replying to [comment:14 tscrim]:\n> There seems to be some real doctest failures reported by the patchbot:\n> {{{\n> sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/schemes/projective/projective_morphism.py  # 1 doctest failed\n> }}}\n> which I can reproduce. \n\nYes. It is related with a deep-rooted problem of conic curves modules. I am working on it. If I fail, then I would simply change the doctest slightly.",
    "created_at": "2022-08-22T03:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479066",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:14 tscrim]:
> There seems to be some real doctest failures reported by the patchbot:
> {{{
> sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/schemes/projective/projective_morphism.py  # 1 doctest failed
> }}}
> which I can reproduce. 

Yes. It is related with a deep-rooted problem of conic curves modules. I am working on it. If I fail, then I would simply change the doctest slightly.



---

archive/issue_comments_479067.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T07:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479067",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479068.json:
```json
{
    "body": "Replying to [comment:14 tscrim]:\n> There seems to be some real doctest failures reported by the patchbot:\n> {{{\n> sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/schemes/projective/projective_morphism.py  # 1 doctest failed\n> }}}\n> which I can reproduce. \n\nFixed.\n\n> Since `projective_degrees()` potentially is an expensive computation, I would cache the result (which would also mean it returns a `tuple`).\n\nDone. Also `graph()` is cached.\n\n> Perhaps we should call `morphism()` instead `as_morphim()` to indicate that it is an equivalent but different type of object?\n\nYes. Done.",
    "created_at": "2022-08-22T07:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479068",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:14 tscrim]:
> There seems to be some real doctest failures reported by the patchbot:
> {{{
> sage -t --long --random-seed=28903988791302297014049808319140034392 src/sage/schemes/projective/projective_morphism.py  # 1 doctest failed
> }}}
> which I can reproduce. 

Fixed.

> Since `projective_degrees()` potentially is an expensive computation, I would cache the result (which would also mean it returns a `tuple`).

Done. Also `graph()` is cached.

> Perhaps we should call `morphism()` instead `as_morphim()` to indicate that it is an equivalent but different type of object?

Yes. Done.



---

archive/issue_comments_479069.json:
```json
{
    "body": "Replying to [comment:15 tscrim]:\n> Also, if you could split this line:\n> {{{#!diff\n> -n1 = n + 1; m1 = m + 1\n> +n1 = n + 1\n> +m1 = m + 1\n> }}}\n> for our style guidelines (see patchbot).\n\nDone. Thanks.",
    "created_at": "2022-08-22T07:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479069",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:15 tscrim]:
> Also, if you could split this line:
> {{{#!diff
> -n1 = n + 1; m1 = m + 1
> +n1 = n + 1
> +m1 = m + 1
> }}}
> for our style guidelines (see patchbot).

Done. Thanks.



---

archive/issue_comments_479070.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-08-22T07:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479070",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_479071.json:
```json
{
    "body": "Thank you. Green bot => positive review.",
    "created_at": "2022-08-22T07:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479071",
    "user": "https://github.com/tscrim"
}
```

Thank you. Green bot => positive review.



---

archive/issue_comments_479072.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-22T12:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479072",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_479073.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-08-30T19:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33716#issuecomment-479073",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
