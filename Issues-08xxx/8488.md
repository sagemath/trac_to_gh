# Issue 8488: Add support for @interact to the Sage library and module for a library of interacts

archive/issues_008488.json:
```json
{
    "assignees": [],
    "body": "See http://groups.google.com/group/sage-devel/browse_frm/thread/240592d465bd4f84#\n\nAssignee: **@jasongrout**\n\nCC:  mhampton\n\nAuthor: **William Stein, Jason Grout**\n\nReviewer: **Jason Grout, William Stein, John Palmieri**\n\nMerged: **sage-4.4.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8488_\n\n",
    "closed_at": "2010-04-19T05:22:30Z",
    "created_at": "2010-03-10T13:16:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interact",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add support for @interact to the Sage library and module for a library of interacts",
    "type": "issue",
    "updated_at": "2010-04-19T05:22:30Z",
    "url": "https://github.com/sagemath/sage/issues/8488",
    "user": "https://github.com/williamstein"
}
```
See http://groups.google.com/group/sage-devel/browse_frm/thread/240592d465bd4f84#

Assignee: **@jasongrout**

CC:  mhampton

Author: **William Stein, Jason Grout**

Reviewer: **Jason Grout, William Stein, John Palmieri**

Merged: **sage-4.4.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/8488_





---

archive/issue_events_094041.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-10T13:16:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "milestone_number": null,
    "milestone_title": "sage-4.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94041"
}
```



---

archive/issue_events_094042.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-10T13:16:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interact",
    "label_color": "0000ff",
    "label_name": "component: interact",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94042"
}
```



---

archive/issue_events_094043.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-10T13:16:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94043"
}
```



---

archive/issue_events_094044.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-10T13:16:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94044"
}
```



---

archive/issue_comments_069323.json:
```json
{
    "body": "Author: **William Stein, Jason Grout**",
    "created_at": "2010-03-10T13:17:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69323",
    "user": "https://github.com/williamstein"
}
```

Author: **William Stein, Jason Grout**



---

archive/issue_events_094045.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-10T13:22:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94045"
}
```



---

archive/issue_comments_069324.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nAttachment: **[trac_8488.patch.gz](https://github.com/sagemath/sage/files/ticket8488/trac_8488.patch.gz)**",
    "created_at": "2010-03-10T13:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69324",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'>Comment 2:</a>
Attachment: **[trac_8488.patch.gz](https://github.com/sagemath/sage/files/ticket8488/trac_8488.patch.gz)**



---

archive/issue_events_094046.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-10T18:43:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94046"
}
```



---

archive/issue_events_094047.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-10T18:43:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94047"
}
```



---

archive/issue_comments_069325.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI think it would be better to use the `@`wraps decorator in python, which automatically copies the documentation, etc.  Also, the source inspection probably won't work here (I haven't checked, though).  We should spruce up this decorator to follow the pattern in sage/plot/misc.py (see the `@`options or `@`suboptions decorator classes).",
    "created_at": "2010-03-10T18:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69325",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'>Comment 3:</a>
I think it would be better to use the `@`wraps decorator in python, which automatically copies the documentation, etc.  Also, the source inspection probably won't work here (I haven't checked, though).  We should spruce up this decorator to follow the pattern in sage/plot/misc.py (see the `@`options or `@`suboptions decorator classes).



---

archive/issue_comments_069326.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nor even better, we should make a `@`wrap_sage decorator which does the same thing as `@`wraps and additionally does:\n\n```\n        from sage.misc.sageinspect import sage_getsource\n        wrapper._sage_src_ = lambda: sage_getsource(func)\n```\n\nlike in the sage/plot/misc.py files.",
    "created_at": "2010-03-10T18:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69326",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:4'>Comment 4:</a>
or even better, we should make a `@`wrap_sage decorator which does the same thing as `@`wraps and additionally does:

```
        from sage.misc.sageinspect import sage_getsource
        wrapper._sage_src_ = lambda: sage_getsource(func)
```

like in the sage/plot/misc.py files.



---

archive/issue_comments_069327.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI just attached a patch which implements a \"sage_wraps\" decorator which mirrors the functools wraps decorator, but also adds the sage-specific `_sage_src_` attribute, so that `interacts.demo??` works.\n\nThis is still \"needs work\", since the sage_wraps function needs some doctests.\n\nWe can now simplify the code in sage/plot/misc.py and a few other places that call the `@`wraps decorator using `@`sage_wraps.",
    "created_at": "2010-03-10T20:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69327",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'>Comment 5:</a>
I just attached a patch which implements a "sage_wraps" decorator which mirrors the functools wraps decorator, but also adds the sage-specific `_sage_src_` attribute, so that `interacts.demo??` works.

This is still "needs work", since the sage_wraps function needs some doctests.

We can now simplify the code in sage/plot/misc.py and a few other places that call the `@`wraps decorator using `@`sage_wraps.



---

archive/issue_comments_069328.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nNote that there is a bug in the ReST formatting.  After applying both patches above, `interacts.demo??` gives output that is all messed up since apparently the formatting engine doesn't deal well with the single newlines that _sage_src_() returns.  I've run out of time to try to track this down and see if it is a bug in the introspection or in the file or what.",
    "created_at": "2010-03-10T20:26:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69328",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'>Comment 6:</a>
Note that there is a bug in the ReST formatting.  After applying both patches above, `interacts.demo??` gives output that is all messed up since apparently the formatting engine doesn't deal well with the single newlines that _sage_src_() returns.  I've run out of time to try to track this down and see if it is a bug in the introspection or in the file or what.



---

archive/issue_comments_069329.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nAlso, I don't think we should import library_interact into the interacts namespace.  I think interacts.<tab> should just give a list of interacts (in fact, I think it should be broken down a bit further, so that interacts.calculus.<tab> gives calculus interacts, etc.)  Note that because of wonderful namespaces, the same interact could be imported into interacts.calculus and interacts.linear_algebra, for example.",
    "created_at": "2010-03-10T20:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69329",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'>Comment 7:</a>
Also, I don't think we should import library_interact into the interacts namespace.  I think interacts.<tab> should just give a list of interacts (in fact, I think it should be broken down a bit further, so that interacts.calculus.<tab> gives calculus interacts, etc.)  Note that because of wonderful namespaces, the same interact could be imported into interacts.calculus and interacts.linear_algebra, for example.



---

archive/issue_events_094048.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-11T01:50:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94048"
}
```



---

archive/issue_events_094049.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-11T01:50:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94049"
}
```



---

archive/issue_events_094050.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-11T01:50:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "milestone_number": null,
    "milestone_title": "sage-4.3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94050"
}
```



---

archive/issue_comments_069330.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Okay, William or Marshall, the ball's back in your court to review my patch.\n``````\n",
    "created_at": "2010-03-11T01:50:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69330",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Okay, William or Marshall, the ball's back in your court to review my patch.
``````




---

archive/issue_comments_069331.json:
```json
{
    "body": "Changed assignee from **@itolkov** to **@jasongrout**",
    "created_at": "2010-03-11T01:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69331",
    "user": "https://github.com/jasongrout"
}
```

Changed assignee from **@itolkov** to **@jasongrout**



---

archive/issue_comments_069332.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Okay, William or Marshall, the ball's back in your court to review my patch.\n+See http://groups.google.com/group/sage-devel/browse_frm/thread/240592d465bd4f84#\n``````\n",
    "created_at": "2010-03-11T01:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69332",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-Okay, William or Marshall, the ball's back in your court to review my patch.
+See http://groups.google.com/group/sage-devel/browse_frm/thread/240592d465bd4f84#
``````




---

archive/issue_comments_069333.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nOops, I deleted the title, instead of adding a comment, apparently.\n\nOkay, William or Marshall, the ball's back in your court to review my patch.",
    "created_at": "2010-03-11T01:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69333",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'>Comment 9:</a>
Oops, I deleted the title, instead of adding a comment, apparently.

Okay, William or Marshall, the ball's back in your court to review my patch.



---

archive/issue_comments_069334.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nREVIEW:\n\n* very nice using the python wrapping stuff, and making source code introspection work, in theory!\n\n* In practice, source code introspection does not work, though this is due to a lazy assumption *I* made I think when implementing interact in the notebook, namely I think when the notebook server sees \"@interact\" in the output, it does something funny with formatting.  Anyway, if you try:\n\n```\ninteracts.calculus.taylor_polynomial??\n```\nin a cell then shift-enter, you'll see the source is all on one long line, which isn't good.  That said, fixing this shouldn't be part of this patch, since it's a very different issue in the sage notebook itself, and maybe quite tricky to deal with.\n\n* Important. Try this in an input cell:\n\n```\ninteracts.calculus.[tab]\n```\nInstead of getting *one* thing, you get 15.  This *has* to be fixed. \n\n* Otherwise, I'm happy with this patch.",
    "created_at": "2010-03-11T04:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69334",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:11'>Comment 11:</a>
REVIEW:

* very nice using the python wrapping stuff, and making source code introspection work, in theory!

* In practice, source code introspection does not work, though this is due to a lazy assumption *I* made I think when implementing interact in the notebook, namely I think when the notebook server sees "@interact" in the output, it does something funny with formatting.  Anyway, if you try:

```
interacts.calculus.taylor_polynomial??
```
in a cell then shift-enter, you'll see the source is all on one long line, which isn't good.  That said, fixing this shouldn't be part of this patch, since it's a very different issue in the sage notebook itself, and maybe quite tricky to deal with.

* Important. Try this in an input cell:

```
interacts.calculus.[tab]
```
Instead of getting *one* thing, you get 15.  This *has* to be fixed. 

* Otherwise, I'm happy with this patch.



---

archive/issue_events_094051.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-11T04:54:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94051"
}
```



---

archive/issue_events_094052.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-11T04:54:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94052"
}
```



---

archive/issue_events_094053.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-11T05:31:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94053"
}
```



---

archive/issue_events_094054.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-11T05:31:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94054"
}
```



---

archive/issue_comments_069335.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@williamstein](#comment%3A11):\n\n> REVIEW: * very nice using the python wrapping stuff, and making source code introspection work, in theory! * In practice, source code introspection does not work, though this is due to a lazy assumption *I* made I think when implementing interact in the notebook, namely I think when the notebook server sees \"@interact\" in the output, it does something funny with formatting.  Anyway, if you try: ` interacts.calculus.taylor_polynomial?? ` in a cell then shift-enter, you'll see the source is all on one long line, which isn't good.  That said, fixing this shouldn't be part of this patch, since it's a very different issue in the sage notebook itself, and maybe quite tricky to deal with.\n\nAh, that makes sense.  I saw this, and even started writing a ticket for it, but I couldn't reproduce it with anything besides the interact stuff (see my comment above about ReST formatting), and then I ran out of time.\n\nI'm attaching a new patch which takes care of the namespace issue you mentioned.\u00a0 Basically, I lump everything into a library file, and then just import into calculus.py the actual interact. I'm sure there's a fancy object we could make that would nicely categorize everything, but this quick solution takes advantage of the nice namespace framework we already have.",
    "created_at": "2010-03-11T05:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69335",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@williamstein](#comment%3A11):

> REVIEW: * very nice using the python wrapping stuff, and making source code introspection work, in theory! * In practice, source code introspection does not work, though this is due to a lazy assumption *I* made I think when implementing interact in the notebook, namely I think when the notebook server sees "@interact" in the output, it does something funny with formatting.  Anyway, if you try: ` interacts.calculus.taylor_polynomial?? ` in a cell then shift-enter, you'll see the source is all on one long line, which isn't good.  That said, fixing this shouldn't be part of this patch, since it's a very different issue in the sage notebook itself, and maybe quite tricky to deal with.

Ah, that makes sense.  I saw this, and even started writing a ticket for it, but I couldn't reproduce it with anything besides the interact stuff (see my comment above about ReST formatting), and then I ran out of time.

I'm attaching a new patch which takes care of the namespace issue you mentioned.  Basically, I lump everything into a library file, and then just import into calculus.py the actual interact. I'm sure there's a fancy object we could make that would nicely categorize everything, but this quick solution takes advantage of the nice namespace framework we already have.



---

archive/issue_comments_069336.json:
```json
{
    "body": "Attachment: **[trac-8488-sage_wrap_decorator.patch.gz](https://github.com/sagemath/sage/files/ticket8488/trac-8488-sage_wrap_decorator.patch.gz)**\n\napply on top of previous patch",
    "created_at": "2010-03-11T05:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69336",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac-8488-sage_wrap_decorator.patch.gz](https://github.com/sagemath/sage/files/ticket8488/trac-8488-sage_wrap_decorator.patch.gz)**

apply on top of previous patch



---

archive/issue_comments_069337.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@williamstein](#comment%3A11):\n\n> * Otherwise, I'm happy with this patch. \n\nFYI, I'm leaving it to you to set \"positive review\" after my last patch, if you're still happy.",
    "created_at": "2010-03-11T15:55:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69337",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@williamstein](#comment%3A11):

> * Otherwise, I'm happy with this patch. 

FYI, I'm leaving it to you to set "positive review" after my last patch, if you're still happy.



---

archive/issue_events_094055.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-27T17:45:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94055"
}
```



---

archive/issue_events_094056.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-27T17:45:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94056"
}
```



---

archive/issue_comments_069338.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nI applied both patches to 4.3.5 and I'm getting doctest failures:\n\n```\nsage -t  devel/sage/sage/interacts/library.py\n**********************************************************************\nFile \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/devel/sage-new/sage/interacts/library.py\", line 18:\n    sage: @interacts.decorator.library_interact\n    def f(n=Integer(5)): print n\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[2]>\", line 1, in <module>\n        @interacts.decorator.library_interact###line 18:\n    sage: @interacts.decorator.library_interact\n    AttributeError: 'module' object has no attribute 'decorator'\n**********************************************************************\nFile \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/devel/sage-new/sage/interacts/library.py\", line 21:\n    sage: f()  # an interact appears\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[3]>\", line 1, in <module>\n        f()  # an interact appears###line 21:\n    sage: f()  # an interact appears\n    NameError: name 'f' is not defined\n**********************************************************************\nFile \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/devel/sage-new/sage/interacts/library.py\", line 45:\n    sage: interacts.decorator.demo()\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_2[2]>\", line 1, in <module>\n        interacts.decorator.demo()###line 45:\n    sage: interacts.decorator.demo()\n    AttributeError: 'module' object has no attribute 'decorator'\n**********************************************************************\n2 items had failures:\n   2 of   4 in __main__.example_1\n   1 of   3 in __main__.example_2\n***Test Failed*** 3 failures.\n```",
    "created_at": "2010-04-16T19:59:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69338",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'>Comment 15:</a>
I applied both patches to 4.3.5 and I'm getting doctest failures:

```
sage -t  devel/sage/sage/interacts/library.py
**********************************************************************
File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/devel/sage-new/sage/interacts/library.py", line 18:
    sage: @interacts.decorator.library_interact
    def f(n=Integer(5)): print n
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[2]>", line 1, in <module>
        @interacts.decorator.library_interact###line 18:
    sage: @interacts.decorator.library_interact
    AttributeError: 'module' object has no attribute 'decorator'
**********************************************************************
File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/devel/sage-new/sage/interacts/library.py", line 21:
    sage: f()  # an interact appears
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[3]>", line 1, in <module>
        f()  # an interact appears###line 21:
    sage: f()  # an interact appears
    NameError: name 'f' is not defined
**********************************************************************
File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/devel/sage-new/sage/interacts/library.py", line 45:
    sage: interacts.decorator.demo()
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_2[2]>", line 1, in <module>
        interacts.decorator.demo()###line 45:
    sage: interacts.decorator.demo()
    AttributeError: 'module' object has no attribute 'decorator'
**********************************************************************
2 items had failures:
   2 of   4 in __main__.example_1
   1 of   3 in __main__.example_2
***Test Failed*** 3 failures.
```



---

archive/issue_events_094057.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T19:59:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94057"
}
```



---

archive/issue_events_094058.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T19:59:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94058"
}
```



---

archive/issue_events_094059.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-18T00:31:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94059"
}
```



---

archive/issue_events_094060.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-18T00:31:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94060"
}
```



---

archive/issue_comments_069339.json:
```json
{
    "body": "Attachment: **[trac_8488-part3.patch.gz](https://github.com/sagemath/sage/files/ticket8488/trac_8488-part3.patch.gz)**",
    "created_at": "2010-04-18T00:33:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69339",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_8488-part3.patch.gz](https://github.com/sagemath/sage/files/ticket8488/trac_8488-part3.patch.gz)**



---

archive/issue_events_094061.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-18T00:33:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94061"
}
```



---

archive/issue_events_094062.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-18T00:33:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94062"
}
```



---

archive/issue_events_094063.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-18T18:59:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94063"
}
```



---

archive/issue_events_094064.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-18T18:59:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94064"
}
```



---

archive/issue_comments_069340.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nWhen I apply this, I get a new doctest failure:\n\n```\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.4.alpha0/devel/sage-new/sage/symbolic/ring.pyx\", line 443:\n    sage: SR.symbol() # temporary variable\nExpected:\n    symbol160\nGot:\n    symbol162\n**********************************************************************\n```\nI don't know why these patches cause this file to file.  Can we just change \"160\" to \"162\"?",
    "created_at": "2010-04-18T18:59:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69340",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'>Comment 18:</a>
When I apply this, I get a new doctest failure:

```
**********************************************************************
File "/Applications/sage_builds/sage-4.4.alpha0/devel/sage-new/sage/symbolic/ring.pyx", line 443:
    sage: SR.symbol() # temporary variable
Expected:
    symbol160
Got:
    symbol162
**********************************************************************
```
I don't know why these patches cause this file to file.  Can we just change "160" to "162"?



---

archive/issue_comments_069341.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@jhpalmieri](#comment%3A18):\n> When I apply this, I get a new doctest failure:\n> \n> ```\n> **********************************************************************\n> File \"/Applications/sage_builds/sage-4.4.alpha0/devel/sage-new/sage/symbolic/ring.pyx\", line 443:\n>     sage: SR.symbol() # temporary variable\n> Expected:\n>     symbol160\n> Got:\n>     symbol162\n> **********************************************************************\n> ```\n> I don't know why these patches cause this file to file.  Can we just change \"160\" to \"162\"?\n\nYes.  It's just some internal counter.   That's a stupid doctest though, since an unrelated change anywhere else in Sage could break it.  Can you change the output to\n\n   symbol...\n\n?\n\nWilliam",
    "created_at": "2010-04-18T22:04:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69341",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@jhpalmieri](#comment%3A18):
> When I apply this, I get a new doctest failure:
> 
> ```
> **********************************************************************
> File "/Applications/sage_builds/sage-4.4.alpha0/devel/sage-new/sage/symbolic/ring.pyx", line 443:
>     sage: SR.symbol() # temporary variable
> Expected:
>     symbol160
> Got:
>     symbol162
> **********************************************************************
> ```
> I don't know why these patches cause this file to file.  Can we just change "160" to "162"?

Yes.  It's just some internal counter.   That's a stupid doctest though, since an unrelated change anywhere else in Sage could break it.  Can you change the output to

   symbol...

?

William



---

archive/issue_comments_069342.json:
```json
{
    "body": "Reviewer: **Jason Grout, William Stein, John Palmieri**",
    "created_at": "2010-04-19T00:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69342",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **Jason Grout, William Stein, John Palmieri**



---

archive/issue_comments_069343.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nOkay, here's a patch.",
    "created_at": "2010-04-19T00:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69343",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'>Comment 20:</a>
Okay, here's a patch.



---

archive/issue_events_094065.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-19T00:07:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94065"
}
```



---

archive/issue_events_094066.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-19T00:07:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94066"
}
```



---

archive/issue_comments_069344.json:
```json
{
    "body": "Attachment: **[trac_8488-part4.patch.gz](https://github.com/sagemath/sage/files/ticket8488/trac_8488-part4.patch.gz)**",
    "created_at": "2010-04-19T00:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69344",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_8488-part4.patch.gz](https://github.com/sagemath/sage/files/ticket8488/trac_8488-part4.patch.gz)**



---

archive/issue_events_094067.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-19T05:09:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94067"
}
```



---

archive/issue_events_094068.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-19T05:09:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94068"
}
```



---

archive/issue_comments_069345.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\n(I just got around now to applying the patch and running doctests.)",
    "created_at": "2010-04-19T05:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69345",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:22'>Comment 22:</a>
(I just got around now to applying the patch and running doctests.)



---

archive/issue_comments_069346.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nMerged into 4.4.alpha1:\n- trac_8488.patch\n- trac-8488-sage_wrap_decorator.patch\n- trac_8488-part3.patch\n- trac_8488-part4.patch",
    "created_at": "2010-04-19T05:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69346",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'>Comment 23:</a>
Merged into 4.4.alpha1:
- trac_8488.patch
- trac-8488-sage_wrap_decorator.patch
- trac_8488-part3.patch
- trac_8488-part4.patch



---

archive/issue_comments_069347.json:
```json
{
    "body": "Merged: **sage-4.4.alpha1**",
    "created_at": "2010-04-19T05:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8488#issuecomment-69347",
    "user": "https://github.com/jhpalmieri"
}
```

Merged: **sage-4.4.alpha1**



---

archive/issue_events_094069.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-19T05:22:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94069"
}
```



---

archive/issue_events_094070.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-19T05:22:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8488",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8488#event-94070"
}
```
