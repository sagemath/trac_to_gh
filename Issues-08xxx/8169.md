# Issue 8169: include TOPCOM as optional spkg

archive/issues_008169.json:
```json
{
    "assignees": [
        "https://github.com/vbraun"
    ],
    "body": "TOPCOM is a C++ program for triangulating polyhedra. More generally, it can find a single triangulation as well as enumerate all triangulations of a \"point configuration\", that is, the convex hull of points in euclidean space such that all vertices of simplices of the triangulation are in the given (finite) list of points.\n\nOne problem with the upstream distribution is that it statically links many helper programs, yielding almost 200mb of binaries. Therefore, I changed the TOPCOM build system to dynamically link TOPCOM via libtools to reduce size\n\nMy libtoolized TOPCOM spkg is here:\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg\n\nNone of the patches in this ticket should be applied to the Sage library! The TOPCOM binaries are (optionally) used by the patches in #9918: triangulate point configurations.\n\nCC:  @sagetrac-mhampton @novoselt\n\nComponent: **packages: optional**\n\nAuthor: **Volker Braun**\n\nReviewer: **Marshall Hampton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8169_\n\n",
    "closed_at": "2011-02-06T09:58:18Z",
    "created_at": "2010-02-03T12:11:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "include TOPCOM as optional spkg",
    "type": "issue",
    "updated_at": "2011-02-06T09:58:18Z",
    "url": "https://github.com/sagemath/sage/issues/8169",
    "user": "https://github.com/vbraun"
}
```
TOPCOM is a C++ program for triangulating polyhedra. More generally, it can find a single triangulation as well as enumerate all triangulations of a "point configuration", that is, the convex hull of points in euclidean space such that all vertices of simplices of the triangulation are in the given (finite) list of points.

One problem with the upstream distribution is that it statically links many helper programs, yielding almost 200mb of binaries. Therefore, I changed the TOPCOM build system to dynamically link TOPCOM via libtools to reduce size

My libtoolized TOPCOM spkg is here:

http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg

None of the patches in this ticket should be applied to the Sage library! The TOPCOM binaries are (optionally) used by the patches in #9918: triangulate point configurations.

CC:  @sagetrac-mhampton @novoselt

Component: **packages: optional**

Author: **Volker Braun**

Reviewer: **Marshall Hampton**

_Issue created by migration from https://trac.sagemath.org/ticket/8169_





---

archive/issue_events_100786.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-02-03T12:11:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100786"
}
```



---

archive/issue_events_100787.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-02-03T12:11:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100787"
}
```



---

archive/issue_events_100788.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-02-03T12:11:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100788"
}
```



---

archive/issue_events_100789.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-02-03T12:11:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100789"
}
```



---

archive/issue_events_100790.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-02-03T12:11:31Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "subject": "https://github.com/vbraun",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100790"
}
```



---

archive/issue_comments_063125.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis looks great.  I looked into TOPCOM briefly but because of its size and some build issues I gave up thinking about it.  I don't have time to review this week, but I will try to take a look at it soon.\n\n-Marshall",
    "created_at": "2010-02-03T13:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63125",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:1" align="right">comment:1</div>

This looks great.  I looked into TOPCOM briefly but because of its size and some build issues I gave up thinking about it.  I don't have time to review this week, but I will try to take a look at it soon.

-Marshall



---

archive/issue_comments_063126.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThanks to a contribution by Josh Whitney we can now compute volumes and the secondary polytope.\n\nStill todo: the TOPCOM spkg crashes when checking for coherency/regularity of a triangulation, investigating...",
    "created_at": "2010-06-05T12:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63126",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

Thanks to a contribution by Josh Whitney we can now compute volumes and the secondary polytope.

Still todo: the TOPCOM spkg crashes when checking for coherency/regularity of a triangulation, investigating...



---

archive/issue_comments_063127.json:
```json
{
    "body": "updated version",
    "created_at": "2010-06-05T12:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63127",
    "user": "https://github.com/vbraun"
}
```

updated version



---

archive/issue_comments_063128.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAttachment: **[triangulation.2.py.gz](https://github.com/sagemath/sage/files/ticket8169/triangulation.2.py.gz)**\n\nI fixed the segfaulting regularity check, it works for me now. Updated spkg is here:\n[http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p1.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p1.spkg)\n\nAlso, doctests now all pass in the updated triangulation.py",
    "created_at": "2010-06-05T20:04:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63128",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

Attachment: **[triangulation.2.py.gz](https://github.com/sagemath/sage/files/ticket8169/triangulation.2.py.gz)**

I fixed the segfaulting regularity check, it works for me now. Updated spkg is here:
[http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p1.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p1.spkg)

Also, doctests now all pass in the updated triangulation.py



---

archive/issue_comments_063129.json:
```json
{
    "body": "updated version",
    "created_at": "2010-06-05T20:05:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63129",
    "user": "https://github.com/vbraun"
}
```

updated version



---

archive/issue_comments_063130.json:
```json
{
    "body": "Attachment: **[triangulation.3.py.gz](https://github.com/sagemath/sage/files/ticket8169/triangulation.3.py.gz)**\n\nAttachment: **[triangulation.4.py.gz](https://github.com/sagemath/sage/files/ticket8169/triangulation.4.py.gz)**\n\nUpdated patch for timeout issue",
    "created_at": "2010-08-09T19:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63130",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[triangulation.3.py.gz](https://github.com/sagemath/sage/files/ticket8169/triangulation.3.py.gz)**

Attachment: **[triangulation.4.py.gz](https://github.com/sagemath/sage/files/ticket8169/triangulation.4.py.gz)**

Updated patch for timeout issue



---

archive/issue_comments_063131.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe previous version would raise `pexpect.TIMEOUT` after 30 seconds of computation. The new version will unconditionally wait for the computation to end. \n\nWhoever is interested in using it can now either apply `trac_8169_triangulate_using_TOPCOM.patch` or manually load the `triangulation.py` code as before.",
    "created_at": "2010-08-09T19:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63131",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">comment:4</div>

The previous version would raise `pexpect.TIMEOUT` after 30 seconds of computation. The new version will unconditionally wait for the computation to end. 

Whoever is interested in using it can now either apply `trac_8169_triangulate_using_TOPCOM.patch` or manually load the `triangulation.py` code as before.



---

archive/issue_comments_063132.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI get the following error when trying to install the spkg on a mac (10.5.8):\n\n```\nconfig.status: executing libtool commands\nCDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing --run aclocal-1.11 -I m4\n/Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing: line 52: aclocal-1.11: command not found\nWARNING: `aclocal-1.11' is missing on your system.  You should only need it if\n         you modified `acinclude.m4' or `configure.ac'.  You might want\n         to install the `Automake' and `Perl' packages.  Grab them from\n         any GNU archive site.\n cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing --run automake-1.11 --gnu\n/Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing: line 52: automake-1.11: command not found\nWARNING: `automake-1.11' is missing on your system.  You should only need it if\n         you modified `Makefile.am', `acinclude.m4' or `configure.ac'.\n         You might want to install the `Automake' and `Perl' packages.\n         Grab them from any GNU archive site.\nCDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing --run autoconf\naclocal.m4:20: warning: this file was generated for autoconf 2.63.\nYou have another version of autoconf.  It may work, but is not guaranteed to.\nIf you have problems, you may need to regenerate the build system entirely.\nTo do so, use the procedure documented by the package, typically `autoreconf'.\n/usr/bin/gm4:aclocal.m4:953: cannot open `m4/ltoptions.m4': No such file or directory\nautom4te: /usr/bin/gm4 failed with exit status: 1\nmake: *** [configure] Error 1\nError building TOPCOM.\n```",
    "created_at": "2010-08-14T15:20:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63132",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:5" align="right">comment:5</div>

I get the following error when trying to install the spkg on a mac (10.5.8):

```
config.status: executing libtool commands
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing --run aclocal-1.11 -I m4
/Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing: line 52: aclocal-1.11: command not found
WARNING: `aclocal-1.11' is missing on your system.  You should only need it if
         you modified `acinclude.m4' or `configure.ac'.  You might want
         to install the `Automake' and `Perl' packages.  Grab them from
         any GNU archive site.
 cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing --run automake-1.11 --gnu
/Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing: line 52: automake-1.11: command not found
WARNING: `automake-1.11' is missing on your system.  You should only need it if
         you modified `Makefile.am', `acinclude.m4' or `configure.ac'.
         You might want to install the `Automake' and `Perl' packages.
         Grab them from any GNU archive site.
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2.p1/src/missing --run autoconf
aclocal.m4:20: warning: this file was generated for autoconf 2.63.
You have another version of autoconf.  It may work, but is not guaranteed to.
If you have problems, you may need to regenerate the build system entirely.
To do so, use the procedure documented by the package, typically `autoreconf'.
/usr/bin/gm4:aclocal.m4:953: cannot open `m4/ltoptions.m4': No such file or directory
autom4te: /usr/bin/gm4 failed with exit status: 1
make: *** [configure] Error 1
Error building TOPCOM.
```



---

archive/issue_comments_063133.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe `patches/autogenerated/m4` directory had symlinks to `/usr` instead of copies, this probably caused the build failure on OSX. I guess all previous users had `automake-1.11` already... I've updated the spkg, can you try the updated spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg",
    "created_at": "2010-08-14T15:41:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63133",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

The `patches/autogenerated/m4` directory had symlinks to `/usr` instead of copies, this probably caused the build failure on OSX. I guess all previous users had `automake-1.11` already... I've updated the spkg, can you try the updated spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg



---

archive/issue_comments_063134.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nGreat! That fixed it.  Patch applies fine too (to sage-4.5.2).\n\nI get the following coverage issues, which I would be happy to work on if you don't mind:\n\n```\nSCORE devel/sage-p1/sage/geometry//triangulation.py: 66% (14 of 21)\n\nMissing documentation:\n\t * __len__(self):\n\t * _TOPCOM_points(self):\n\t * liststring(container, conversion=str):\n\n\nMissing doctests:\n\t * __iter__(self):\n\t * __getitem__(self, i):\n\t * __init__(self, points, projective=False):\n\t * _repr_(self):\n\n\nPossibly wrong (function name doesn't occur in doctests):\n\t * _render_2d(triangulation, **kwds):\n\t * _render_3d(triangulation, **kwds):\n\t * _repr_(self):\n```",
    "created_at": "2010-08-14T16:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63134",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:7" align="right">comment:7</div>

Great! That fixed it.  Patch applies fine too (to sage-4.5.2).

I get the following coverage issues, which I would be happy to work on if you don't mind:

```
SCORE devel/sage-p1/sage/geometry//triangulation.py: 66% (14 of 21)

Missing documentation:
	 * __len__(self):
	 * _TOPCOM_points(self):
	 * liststring(container, conversion=str):


Missing doctests:
	 * __iter__(self):
	 * __getitem__(self, i):
	 * __init__(self, points, projective=False):
	 * _repr_(self):


Possibly wrong (function name doesn't occur in doctests):
	 * _render_2d(triangulation, **kwds):
	 * _render_3d(triangulation, **kwds):
	 * _repr_(self):
```



---

archive/issue_comments_063135.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFeel free to make changes! I'm right now working on other tickets.",
    "created_at": "2010-08-14T16:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63135",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

Feel free to make changes! I'm right now working on other tickets.



---

archive/issue_comments_063136.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI'm getting lots of doctest failures; I think most of them are because points2placingtriang doesn't work:\n\n```\n(sage subshell) thorn:bin mh$ ./points2placingtriang\nBus error\n```\n\nI didn't see any errors relating to this during compilation; not sure what is going on.",
    "created_at": "2010-08-14T18:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63136",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:9" align="right">comment:9</div>

I'm getting lots of doctest failures; I think most of them are because points2placingtriang doesn't work:

```
(sage subshell) thorn:bin mh$ ./points2placingtriang
Bus error
```

I didn't see any errors relating to this during compilation; not sure what is going on.



---

archive/issue_comments_063137.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nA few comments. \n* There appears to be no code for 64-bit builds on systems which don't default to 64-bit, but want it. Take a look at spkg-install of the latest GSL library for an example how to do it. \n* There's no spkg-check file. It is possible to add one? I note you delete the examples, but often those can be used in tests of the package. \n* You appear to copy over configure.ac, but no configure script. Is that intentional? Whilst I agree configure.ac is the preferred usage over configure.in, I'm not sure its actually worth patching that. I think the patch will cause more confusion. If you have actually patched the file, then sure, call it configure.ac. But in that case the configure script will need to be updated too. \n* Since we don't ship GMP, I think the dependencies should list MPIR rather than GMP, or at least have a note like \"MPIR (used in Sage instead of GMP)\"",
    "created_at": "2010-08-14T23:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63137",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:10" align="right">comment:10</div>

A few comments. 
* There appears to be no code for 64-bit builds on systems which don't default to 64-bit, but want it. Take a look at spkg-install of the latest GSL library for an example how to do it. 
* There's no spkg-check file. It is possible to add one? I note you delete the examples, but often those can be used in tests of the package. 
* You appear to copy over configure.ac, but no configure script. Is that intentional? Whilst I agree configure.ac is the preferred usage over configure.in, I'm not sure its actually worth patching that. I think the patch will cause more confusion. If you have actually patched the file, then sure, call it configure.ac. But in that case the configure script will need to be updated too. 
* Since we don't ship GMP, I think the dependencies should list MPIR rather than GMP, or at least have a note like "MPIR (used in Sage instead of GMP)"



---

archive/issue_events_100791.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-08-14T23:31:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100791"
}
```



---

archive/issue_comments_063138.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI'll try to add the 64-bit stuff and a spkg-check. The examples are huge (the upstream distribution is 22M gzipped), but we probably should keep some for the check. \n\nSince the intention is to eventually move the changes upstream I would prefer to move the deprecated `configure.in` to `configure.ac`. We do copy `patches/autogenerated/configure` over the configure script.\n\nAs for the bus error, I don't have a OSX machine to test on. But running points2placingtriangs in gdb and producing a stack trace would probably help.",
    "created_at": "2010-08-14T23:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63138",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:11" align="right">comment:11</div>

I'll try to add the 64-bit stuff and a spkg-check. The examples are huge (the upstream distribution is 22M gzipped), but we probably should keep some for the check. 

Since the intention is to eventually move the changes upstream I would prefer to move the deprecated `configure.in` to `configure.ac`. We do copy `patches/autogenerated/configure` over the configure script.

As for the bus error, I don't have a OSX machine to test on. But running points2placingtriangs in gdb and producing a stack trace would probably help.



---

archive/issue_comments_063139.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@vbraun](#comment%3A11):\n> I'll try to add the 64-bit stuff and a spkg-check. The examples are huge (the upstream distribution is 22M gzipped), but we probably should keep some for the check. \n\nI think we should keep them **all** for the check myself if they can be used in a check. The problem with the doc tests is that they test so little really in most cases. \n\n> Since the intention is to eventually move the changes upstream I would prefer to move the deprecated `configure.in` to `configure.ac`. We do copy `patches/autogenerated/configure` over the configure script.\n\nI must have missed that. \n \n> As for the bus error, I don't have a OSX machine to test on. But running points2placingtriangs in gdb and producing a stack trace would probably help.\n\nWilliam will give you access to bsd.math I expect. That runs OS X.",
    "created_at": "2010-08-14T23:59:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63139",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@vbraun](#comment%3A11):
> I'll try to add the 64-bit stuff and a spkg-check. The examples are huge (the upstream distribution is 22M gzipped), but we probably should keep some for the check. 

I think we should keep them **all** for the check myself if they can be used in a check. The problem with the doc tests is that they test so little really in most cases. 

> Since the intention is to eventually move the changes upstream I would prefer to move the deprecated `configure.in` to `configure.ac`. We do copy `patches/autogenerated/configure` over the configure script.

I must have missed that. 
 
> As for the bus error, I don't have a OSX machine to test on. But running points2placingtriangs in gdb and producing a stack trace would probably help.

William will give you access to bsd.math I expect. That runs OS X.



---

archive/issue_comments_063140.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2010-08-22T14:20:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63140",
    "user": "https://github.com/novoselt"
}
```

Author: **Volker Braun**



---

archive/issue_events_100792.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-09-02T10:49:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100792"
}
```



---

archive/issue_events_100793.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-09-02T10:49:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100793"
}
```



---

archive/issue_comments_063141.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI do not plan to review this ticket since it involves a package, but I'll allow myself some critical remarks anyway ;-)\n\n1. Module level description is probably not what it was supposed to be (\"all vertices of points\" does not quite make sense).\n2. It would be nice to explain what's the point of using projective coordinates even when the input is affine.\n3. I think it is counter-intuitive that iterating over a point configuration deals with projective coordinates and over its points - affine ones. If the default input is affine, I think that default iterating also should be over affine version with `points(projective=True)` returning projective coordinates.\n4. I personally don't like getting generators as output of methods like `points` and people less familiar with Python find it quite confusing. So I think it would be better to return a tuple (or a list, if it is not cached) and obtain a generator either using something like `point_generator()` method or by passing an optional argument like `points(generator=True)`. I understand that generators are more efficient, but when efficiency is an issue users should be willing to work a little harder to get them, while for interactive work and new users tuples and lists are more convenient.\n5. I like the interface to restricting type of triangulations, but it would be nice for each restricting function to have a precise definition of the corresponding triangulation type.\n\nP.S. My previous attempts to install and use TOPCOM didn't succeed, but with Volker's package installation was completely painless. So I hope that it will make its way into Sage in the near future!",
    "created_at": "2010-09-10T03:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63141",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:15" align="right">comment:15</div>

I do not plan to review this ticket since it involves a package, but I'll allow myself some critical remarks anyway ;-)

1. Module level description is probably not what it was supposed to be ("all vertices of points" does not quite make sense).
2. It would be nice to explain what's the point of using projective coordinates even when the input is affine.
3. I think it is counter-intuitive that iterating over a point configuration deals with projective coordinates and over its points - affine ones. If the default input is affine, I think that default iterating also should be over affine version with `points(projective=True)` returning projective coordinates.
4. I personally don't like getting generators as output of methods like `points` and people less familiar with Python find it quite confusing. So I think it would be better to return a tuple (or a list, if it is not cached) and obtain a generator either using something like `point_generator()` method or by passing an optional argument like `points(generator=True)`. I understand that generators are more efficient, but when efficiency is an issue users should be willing to work a little harder to get them, while for interactive work and new users tuples and lists are more convenient.
5. I like the interface to restricting type of triangulations, but it would be nice for each restricting function to have a precise definition of the corresponding triangulation type.

P.S. My previous attempts to install and use TOPCOM didn't succeed, but with Volker's package installation was completely painless. So I hope that it will make its way into Sage in the near future!



---

archive/issue_comments_063142.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n4. I think thats fine with points, but triangulations should default to a generator. Almost always there will be a lot of them and we should train the user to not create an unpacked list of them all :-)\n\nOther TODO's:\n\n6. If the point configuration is not full-dimensional TOPCOM will refuse to work. We should keep an internal auxiliary copy of the point configuration on the spanned hyperplane.\n\n7. Implement the basic edge traversal algorithm on the secondary polytope without resorting to TOPCOM, hence making TOPCOM optional :-) This would really help in getting the triangulation code into Sage, I think.",
    "created_at": "2010-09-10T11:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63142",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

4. I think thats fine with points, but triangulations should default to a generator. Almost always there will be a lot of them and we should train the user to not create an unpacked list of them all :-)

Other TODO's:

6. If the point configuration is not full-dimensional TOPCOM will refuse to work. We should keep an internal auxiliary copy of the point configuration on the spanned hyperplane.

7. Implement the basic edge traversal algorithm on the secondary polytope without resorting to TOPCOM, hence making TOPCOM optional :-) This would really help in getting the triangulation code into Sage, I think.



---

archive/issue_comments_063143.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n4. Good point, let triangulations be implemented as a generator. Looking at a list of triangulations is not enlightening anyway (in their default repr-output, that is).\n\n   7. In what sense it will make TOPCOM optional? If you already have both the point configuration and its secondary polytope?",
    "created_at": "2010-09-10T14:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63143",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:17" align="right">comment:17</div>

4. Good point, let triangulations be implemented as a generator. Looking at a list of triangulations is not enlightening anyway (in their default repr-output, that is).

   7. In what sense it will make TOPCOM optional? If you already have both the point configuration and its secondary polytope?



---

archive/issue_comments_063144.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI will post a patch improving the coverage sometime today (US Central time).\n\nI am wondering what the point of the function \"liststring\" is in the _TOPCOM_points method.  Seems like overkill to make this function given the very limited way its used.  \n\nI still haven't fixed the build on OS X; on the TOPCOM page it says \"The current version compiles successfully under Darwin gcc-4.0 and gcc-4.2 if you choose the -m32 or -m64 architecture manually for all libraries.\" - which maybe means that we need to add such flags somewhere.  I am not good with build issues though.",
    "created_at": "2010-09-11T14:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63144",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:18" align="right">comment:18</div>

I will post a patch improving the coverage sometime today (US Central time).

I am wondering what the point of the function "liststring" is in the _TOPCOM_points method.  Seems like overkill to make this function given the very limited way its used.  

I still haven't fixed the build on OS X; on the TOPCOM page it says "The current version compiles successfully under Darwin gcc-4.0 and gcc-4.2 if you choose the -m32 or -m64 architecture manually for all libraries." - which maybe means that we need to add such flags somewhere.  I am not good with build issues though.



---

archive/issue_comments_063145.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI think this is a bug in the secondary polytope code, maybe from the optional argument reduce_dimension not being set correctly in the LatticePolytope call.\n\n```\nc = polytopes.n_cube(3)\np = PointConfiguration(c.vertices())\np.secondary_polytope()\n```\n\n...this results in:\n\n```\nRuntimeError: Error executing \"poly.x -fv\" for a polytope sequence!\nOutput:\npoly.x: Vertex.c:613: Finish_Find_Equations: Assertion `_V->nv<64' failed.\nAborted\n```\n\nA similar command with an octahedron instead of a cube works fine.",
    "created_at": "2010-09-11T19:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63145",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:19" align="right">comment:19</div>

I think this is a bug in the secondary polytope code, maybe from the optional argument reduce_dimension not being set correctly in the LatticePolytope call.

```
c = polytopes.n_cube(3)
p = PointConfiguration(c.vertices())
p.secondary_polytope()
```

...this results in:

```
RuntimeError: Error executing "poly.x -fv" for a polytope sequence!
Output:
poly.x: Vertex.c:613: Finish_Find_Equations: Assertion `_V->nv<64' failed.
Aborted
```

A similar command with an octahedron instead of a cube works fine.



---

archive/issue_comments_063146.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOops, I don't think my initial guess about the above problem was correct, since the octahedron secondary polytope is also in a larger ambient dimension.  Would it be OK to switch the secondary polytope to a Polyhedron instead of a lattice polytope?",
    "created_at": "2010-09-11T19:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63146",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:20" align="right">comment:20</div>

Oops, I don't think my initial guess about the above problem was correct, since the octahedron secondary polytope is also in a larger ambient dimension.  Would it be OK to switch the secondary polytope to a Polyhedron instead of a lattice polytope?



---

archive/issue_comments_063147.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nYes, the secondary polytope needs to be returned as a Polyhedron to avoid the dimension and #of point restrictions of PALP.",
    "created_at": "2010-09-11T21:40:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63147",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">comment:21</div>

Yes, the secondary polytope needs to be returned as a Polyhedron to avoid the dimension and #of point restrictions of PALP.



---

archive/issue_comments_063148.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI was checking some things from the TOPCOM examples, and this seems odd:\n\n```\nsage: q = [[0,0,0,0,0,1],[1,1,1,1,1,1],[2,4,8,16,32,1],[3,9,27,81,243,1],[4,16,64,256,1024,1],[5,25,125,625,3125,1],[6,36,216,1296,7776,1],[7,49,343,2401,16807,1],[8,64,512,4096,32768,1],[9,81,729,6561,59049,1],[10,100,1000,10000,100000,1]]\nsage: p = PointConfiguration(q)\nsage: t = p.triangulations_list()\nsage: len(t)\n0\n```\n\nThis is a 5-dimensional point configuration with 11 points.  Shouldn't it have some triangulations?",
    "created_at": "2010-09-11T22:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63148",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:22" align="right">comment:22</div>

I was checking some things from the TOPCOM examples, and this seems odd:

```
sage: q = [[0,0,0,0,0,1],[1,1,1,1,1,1],[2,4,8,16,32,1],[3,9,27,81,243,1],[4,16,64,256,1024,1],[5,25,125,625,3125,1],[6,36,216,1296,7776,1],[7,49,343,2401,16807,1],[8,64,512,4096,32768,1],[9,81,729,6561,59049,1],[10,100,1000,10000,100000,1]]
sage: p = PointConfiguration(q)
sage: t = p.triangulations_list()
sage: len(t)
0
```

This is a 5-dimensional point configuration with 11 points.  Shouldn't it have some triangulations?



---

archive/issue_comments_063149.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nHere's a simpler example with similar problems.\n\n```\nsage: p = [[0,0,0,1],[0,3,0,1],[3,0,0,1],[0,0,1,1],[0,3,1,1],[3,0,1,1],[1,1,2,1]]\nsage: pc = PointConfiguration(p)\nsage: t = pc.triangulations_list()\nsage: len(t)\n0\n```\n\nAnd this blows up:\n\n```\nsage: pc.restrict_to_nonregular_triangulations()\nsage: t = pc.triangulations_list()\n```\n\nIs this the same problem that is noted by the line:\n\\# TOPCOM bug: points2alltriangs --nonregular does not work\n?",
    "created_at": "2010-09-11T22:51:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63149",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:23" align="right">comment:23</div>

Here's a simpler example with similar problems.

```
sage: p = [[0,0,0,1],[0,3,0,1],[3,0,0,1],[0,0,1,1],[0,3,1,1],[3,0,1,1],[1,1,2,1]]
sage: pc = PointConfiguration(p)
sage: t = pc.triangulations_list()
sage: len(t)
0
```

And this blows up:

```
sage: pc.restrict_to_nonregular_triangulations()
sage: t = pc.triangulations_list()
```

Is this the same problem that is noted by the line:
\# TOPCOM bug: points2alltriangs --nonregular does not work
?



---

archive/issue_comments_063150.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOK, I have to work on some other things now.  I didn't finish adding doctests to some of the restrict_to_* functions since I am a little stymied by failures.  My current version is:\n[http://sage.math.washington.edu/home/mhampton/triangulation_mh1.py](http://sage.math.washington.edu/home/mhampton/triangulation_mh1.py)",
    "created_at": "2010-09-11T23:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63150",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:24" align="right">comment:24</div>

OK, I have to work on some other things now.  I didn't finish adding doctests to some of the restrict_to_* functions since I am a little stymied by failures.  My current version is:
[http://sage.math.washington.edu/home/mhampton/triangulation_mh1.py](http://sage.math.washington.edu/home/mhampton/triangulation_mh1.py)



---

archive/issue_comments_063151.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAs a general PSA: please use the `pc.triangulate(verbose=True)` option when reporting bugs. \n\n* Your problem is point number 6. above. \n* Indeed, `points2alltriangs --nonregular` segfaults (as indicated by my comments in the source). There is a workaround already in place. But thats not the reason why it blows up in your example.\n\nI'll work on it later today.",
    "created_at": "2010-09-12T00:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63151",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

As a general PSA: please use the `pc.triangulate(verbose=True)` option when reporting bugs. 

* Your problem is point number 6. above. 
* Indeed, `points2alltriangs --nonregular` segfaults (as indicated by my comments in the source). There is a workaround already in place. But thats not the reason why it blows up in your example.

I'll work on it later today.



---

archive/issue_comments_063152.json:
```json
{
    "body": "Attachment: **[trac_8169_triangulate_using_TOPCOM.patch.gz](https://github.com/sagemath/sage/files/ticket8169/trac_8169_triangulate_using_TOPCOM.patch.gz)**\n\nUpdated patch",
    "created_at": "2010-09-12T20:30:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63152",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_8169_triangulate_using_TOPCOM.patch.gz](https://github.com/sagemath/sage/files/ticket8169/trac_8169_triangulate_using_TOPCOM.patch.gz)**

Updated patch



---

archive/issue_comments_063153.json:
```json
{
    "body": "Updated version",
    "created_at": "2010-09-12T20:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63153",
    "user": "https://github.com/vbraun"
}
```

Updated version



---

archive/issue_comments_063154.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,17 +7,26 @@\n \n As an initial submission, my libtoolized TOPCOM spkg is here:\n \n-http://www.stp.dias.ie/~vbraun/TOPCOM-0.16.2.spkg\n+http://www.stp.dias.ie/~vbraun/TOPCOM-0.16.2.p2.spkg\n \n and a first draft of triangulation.py is attached. The basic usage is\n \n ```\n sage: points = PointConfiguration([[0,0],[0,1],[1,0],[1,1],[-1,-1]]);\n sage: points\n-A point configuration in QQ^2 consisting of 5 points.\n+A point configuration in QQ^2 consisting of 5 points. The \n+triangulations of this point configuration are assumed to \n+be connected, not necessarily fine, not necessarily regular.\n sage: triang = points.triangulate()   # find one triangulation       \n sage: triang\n-A triangulation in QQ^2 consisting of 4 simplices.\n+(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>)\n+sage: triang[0]\n+(0, 1, 2)\n+sage: list( points.triangulations() )\n+[(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>), \n+ (<0,1,3>, <0,1,4>, <0,2,3>, <0,2,4>), \n+ (<1,2,3>, <1,2,4>), \n+ (<1,3,4>, <2,3,4>)]\n sage: triang.plot(axes=False)                                        \n ```\n \n``````\n",
    "created_at": "2010-09-12T20:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63154",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,17 +7,26 @@
 
 As an initial submission, my libtoolized TOPCOM spkg is here:
 
-http://www.stp.dias.ie/~vbraun/TOPCOM-0.16.2.spkg
+http://www.stp.dias.ie/~vbraun/TOPCOM-0.16.2.p2.spkg
 
 and a first draft of triangulation.py is attached. The basic usage is
 
 ```
 sage: points = PointConfiguration([[0,0],[0,1],[1,0],[1,1],[-1,-1]]);
 sage: points
-A point configuration in QQ^2 consisting of 5 points.
+A point configuration in QQ^2 consisting of 5 points. The 
+triangulations of this point configuration are assumed to 
+be connected, not necessarily fine, not necessarily regular.
 sage: triang = points.triangulate()   # find one triangulation       
 sage: triang
-A triangulation in QQ^2 consisting of 4 simplices.
+(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>)
+sage: triang[0]
+(0, 1, 2)
+sage: list( points.triangulations() )
+[(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>), 
+ (<0,1,3>, <0,1,4>, <0,2,3>, <0,2,4>), 
+ (<1,2,3>, <1,2,4>), 
+ (<1,3,4>, <2,3,4>)]
 sage: triang.plot(axes=False)                                        
 ```
 
``````




---

archive/issue_events_100794.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-12T20:41:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100794"
}
```



---

archive/issue_events_100795.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-12T20:41:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100795"
}
```



---

archive/issue_comments_063155.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[triangulation.py.gz](https://github.com/sagemath/sage/files/ticket8169/triangulation.py.gz)**\n\nI've dealt with 3. and 4. in comment 15, and 6. in comment 16. Now generally tuples instead of lists are returned, and a new `class Point` is added which has methods for affine, projective, or reduced (with linearities removed) coordinates. This should also fix Marshall's problems.\n\nNow `PointConfiguration`/`Triangulation` have a Parent/Element relationship. In particular, the `PointConfiguration` is unique and immutable. The `restrict_to_...` interface for restricting the admissible triangulations has been slightly changed, and now returns a **new** `PointConfiguration`. I think that also fits better with the general Sage philosophy.",
    "created_at": "2010-09-12T20:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63155",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[triangulation.py.gz](https://github.com/sagemath/sage/files/ticket8169/triangulation.py.gz)**

I've dealt with 3. and 4. in comment 15, and 6. in comment 16. Now generally tuples instead of lists are returned, and a new `class Point` is added which has methods for affine, projective, or reduced (with linearities removed) coordinates. This should also fix Marshall's problems.

Now `PointConfiguration`/`Triangulation` have a Parent/Element relationship. In particular, the `PointConfiguration` is unique and immutable. The `restrict_to_...` interface for restricting the admissible triangulations has been slightly changed, and now returns a **new** `PointConfiguration`. I think that also fits better with the general Sage philosophy.



---

archive/issue_comments_063156.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI've split off a self-contained triangulation module into #9918. This ticket will focus on getting the TOPCOM spkg build on all platforms. In particular, OSX seems to be broken at the moment. \n\nI still don't have access to an OSX machine, but will get this sorted out eventually...",
    "created_at": "2010-09-16T11:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63156",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

I've split off a self-contained triangulation module into #9918. This ticket will focus on getting the TOPCOM spkg build on all platforms. In particular, OSX seems to be broken at the moment. 

I still don't have access to an OSX machine, but will get this sorted out eventually...



---

archive/issue_events_100796.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-16T11:29:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "title_is": "include TOPCOM as optional spkg",
    "title_was": "include TOPCOM",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100796"
}
```



---

archive/issue_comments_063157.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,35 +1,9 @@\n TOPCOM is a C++ program for triangulating polyhedra. More generally, it can find a single triangulation as well as enumerate all triangulations of a \"point configuration\", that is, the convex hull of points in euclidean space such that all vertices of simplices of the triangulation are in the given (finite) list of points.\n \n-One problem with the upstream distribution is that it statically links many helper programs, yielding almost 200mb of binaries. Therefore, I suggest the following:\n+One problem with the upstream distribution is that it statically links many helper programs, yielding almost 200mb of binaries. Therefore, I changed the TOPCOM build system to dynamically link TOPCOM via libtools to reduce size\n \n-- dynamically link TOPCOM via libtools to reduce size\n-- Write a sage<->TOPCOM interface at sage.geometry.triangulation.py\n-\n-As an initial submission, my libtoolized TOPCOM spkg is here:\n+My libtoolized TOPCOM spkg is here:\n \n http://www.stp.dias.ie/~vbraun/TOPCOM-0.16.2.p2.spkg\n \n-and a first draft of triangulation.py is attached. The basic usage is\n-\n-```\n-sage: points = PointConfiguration([[0,0],[0,1],[1,0],[1,1],[-1,-1]]);\n-sage: points\n-A point configuration in QQ^2 consisting of 5 points. The \n-triangulations of this point configuration are assumed to \n-be connected, not necessarily fine, not necessarily regular.\n-sage: triang = points.triangulate()   # find one triangulation       \n-sage: triang\n-(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>)\n-sage: triang[0]\n-(0, 1, 2)\n-sage: list( points.triangulations() )\n-[(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>), \n- (<0,1,3>, <0,1,4>, <0,2,3>, <0,2,4>), \n- (<1,2,3>, <1,2,4>), \n- (<1,3,4>, <2,3,4>)]\n-sage: triang.plot(axes=False)                                        \n-```\n-\n-After we confirm that the libtoolized TOPCOM builds on all sage platforms, I'll contact upstream for eventual inclusion of the autotools sources.\n-\n-Note: see #8115 for a modified cddlib (required by TOPCOM) that provides a non-static cddlib library.\n+See also: #9918: triangulate point configurations, an extension to the Sage library that optionally uses TOPCOM.\n``````\n",
    "created_at": "2010-09-16T11:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63157",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,35 +1,9 @@
 TOPCOM is a C++ program for triangulating polyhedra. More generally, it can find a single triangulation as well as enumerate all triangulations of a "point configuration", that is, the convex hull of points in euclidean space such that all vertices of simplices of the triangulation are in the given (finite) list of points.
 
-One problem with the upstream distribution is that it statically links many helper programs, yielding almost 200mb of binaries. Therefore, I suggest the following:
+One problem with the upstream distribution is that it statically links many helper programs, yielding almost 200mb of binaries. Therefore, I changed the TOPCOM build system to dynamically link TOPCOM via libtools to reduce size
 
-- dynamically link TOPCOM via libtools to reduce size
-- Write a sage<->TOPCOM interface at sage.geometry.triangulation.py
-
-As an initial submission, my libtoolized TOPCOM spkg is here:
+My libtoolized TOPCOM spkg is here:
 
 http://www.stp.dias.ie/~vbraun/TOPCOM-0.16.2.p2.spkg
 
-and a first draft of triangulation.py is attached. The basic usage is
-
-```
-sage: points = PointConfiguration([[0,0],[0,1],[1,0],[1,1],[-1,-1]]);
-sage: points
-A point configuration in QQ^2 consisting of 5 points. The 
-triangulations of this point configuration are assumed to 
-be connected, not necessarily fine, not necessarily regular.
-sage: triang = points.triangulate()   # find one triangulation       
-sage: triang
-(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>)
-sage: triang[0]
-(0, 1, 2)
-sage: list( points.triangulations() )
-[(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>), 
- (<0,1,3>, <0,1,4>, <0,2,3>, <0,2,4>), 
- (<1,2,3>, <1,2,4>), 
- (<1,3,4>, <2,3,4>)]
-sage: triang.plot(axes=False)                                        
-```
-
-After we confirm that the libtoolized TOPCOM builds on all sage platforms, I'll contact upstream for eventual inclusion of the autotools sources.
-
-Note: see #8115 for a modified cddlib (required by TOPCOM) that provides a non-static cddlib library.
+See also: #9918: triangulate point configurations, an extension to the Sage library that optionally uses TOPCOM.
``````




---

archive/issue_events_100797.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-26T16:16:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100797"
}
```



---

archive/issue_events_100798.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-26T16:16:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100798"
}
```



---

archive/issue_comments_063158.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOk, I got a Mac OS X machine (10.6.4, 64 bit) and TOPCOM compiles and runs fine, including the regular/nonregular checks. In particular, I don't get the \"bus error\". I also don't get the segfault with the nonregularity check any more. Marshall, can you try again? \n\nAll I did was refresh the automake files, maybe there was a bug in the older autotools that got fixed? I did upgrade from Fedora 12 -> Fedora 13 in the meantime.\n\nIn any case, doctests pass on OS X and Fedora 13 x86_64",
    "created_at": "2010-09-26T16:16:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63158",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">comment:28</div>

Ok, I got a Mac OS X machine (10.6.4, 64 bit) and TOPCOM compiles and runs fine, including the regular/nonregular checks. In particular, I don't get the "bus error". I also don't get the segfault with the nonregularity check any more. Marshall, can you try again? 

All I did was refresh the automake files, maybe there was a bug in the older autotools that got fixed? I did upgrade from Fedora 12 -> Fedora 13 in the meantime.

In any case, doctests pass on OS X and Fedora 13 x86_64



---

archive/issue_comments_063159.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nTrying on OS X 10.5, against sage-4.6.alpha1, and using your http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg, I get:\n\n```\nCDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing --run aclocal-1.11 -I m4\n/Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing: line 46: aclocal-1.11: command not found\nWARNING: `aclocal-1.11' is missing on your system.  You should only need it if\n         you modified `acinclude.m4' or `configure.ac'.  You might want\n         to install the `Automake' and `Perl' packages.  Grab them from\n         any GNU archive site.\n cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing --run automake-1.11 --gnu\n/Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing: line 46: automake-1.11: command not found\nWARNING: `automake-1.11' is missing on your system.  You should only need it if\n         you modified `Makefile.am', `acinclude.m4' or `configure.ac'.\n         You might want to install the `Automake' and `Perl' packages.\n         Grab them from any GNU archive site.\nCDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing --run autoconf\naclocal.m4:20: warning: this file was generated for autoconf 2.63.\nYou have another version of autoconf.  It may work, but is not guaranteed to.\nIf you have problems, you may need to regenerate the build system entirely.\nTo do so, use the procedure documented by the package, typically `autoreconf'.\n/usr/bin/gm4:aclocal.m4:953: cannot open `m4/ltoptions.m4': No such file or directory\nautom4te: /usr/bin/gm4 failed with exit status: 1\nmake: *** [configure] Error 1\nError building TOPCOM.\n```",
    "created_at": "2010-09-26T16:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63159",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:29" align="right">comment:29</div>

Trying on OS X 10.5, against sage-4.6.alpha1, and using your http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg, I get:

```
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing --run aclocal-1.11 -I m4
/Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing: line 46: aclocal-1.11: command not found
WARNING: `aclocal-1.11' is missing on your system.  You should only need it if
         you modified `acinclude.m4' or `configure.ac'.  You might want
         to install the `Automake' and `Perl' packages.  Grab them from
         any GNU archive site.
 cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing --run automake-1.11 --gnu
/Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing: line 46: automake-1.11: command not found
WARNING: `automake-1.11' is missing on your system.  You should only need it if
         you modified `Makefile.am', `acinclude.m4' or `configure.ac'.
         You might want to install the `Automake' and `Perl' packages.
         Grab them from any GNU archive site.
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /Users/mh/sagestuff/sage-4-x/spkg/build/TOPCOM-0.16.2/src/missing --run autoconf
aclocal.m4:20: warning: this file was generated for autoconf 2.63.
You have another version of autoconf.  It may work, but is not guaranteed to.
If you have problems, you may need to regenerate the build system entirely.
To do so, use the procedure documented by the package, typically `autoreconf'.
/usr/bin/gm4:aclocal.m4:953: cannot open `m4/ltoptions.m4': No such file or directory
autom4te: /usr/bin/gm4 failed with exit status: 1
make: *** [configure] Error 1
Error building TOPCOM.
```



---

archive/issue_events_100799.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-09-26T16:21:56Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100799"
}
```



---

archive/issue_events_100800.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-09-26T16:21:56Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100800"
}
```



---

archive/issue_events_100801.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-09-26T16:22:08Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100801"
}
```



---

archive/issue_events_100802.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-26T16:22:08Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100802"
}
```



---

archive/issue_events_100803.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-26T18:34:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100803"
}
```



---

archive/issue_events_100804.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-26T18:34:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100804"
}
```



---

archive/issue_comments_063160.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThe warnings are ok except for the \"cannot open m4/ltoptions.m4\"; This looks like you have the old version where I had not correctly packaged the m4/ directory. The current TOPCOM spkg should be 766185 bytes long. Can you double check that?",
    "created_at": "2010-09-26T18:34:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63160",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:31" align="right">comment:31</div>

The warnings are ok except for the "cannot open m4/ltoptions.m4"; This looks like you have the old version where I had not correctly packaged the m4/ directory. The current TOPCOM spkg should be 766185 bytes long. Can you double check that?



---

archive/issue_comments_063161.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOK, sorry about that.  I had some older versions lying around and mistakenly installed one of those.  The new one seems to build fine, but after installing 9918 it doesn't seem to work.  The first doctest failure looks like this:\n\n```\nsage -t  \"devel/sage-t2/sage/geometry/triangulation/base.pyx\"\n**********************************************************************\nFile \"/Users/mh/sagestuff/sage-4-x/devel/sage-t2/sage/geometry/triangulation/base.pyx\", line 259:\n    sage: p = PointConfiguration([[0, 1], [0, 0], [1, 0]])   # indirect doctest\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mh/sagestuff/sage-4-x/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/mh/sagestuff/sage-4-x/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/mh/sagestuff/sage-4-x/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_12[2]>\", line 1, in <module>\n        p = PointConfiguration([[Integer(0), Integer(1)], [Integer(0), Integer(0)], [Integer(1), Integer(0)]])   # indirect doctest###line 259:\n    sage: p = PointConfiguration([[0, 1], [0, 0], [1, 0]])   # indirect doctest\n      File \"/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/misc/classcall_metaclass.py\", line 258, in __call__\n        return cls.__classcall__(cls, *args, **options)\n      File \"/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/geometry/triangulation/point_configuration.py\", line 759, in __classcall__\n        .__classcall__(cls, points, connected, fine, regular, star)\n      File \"/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/misc/cachefunc.py\", line 115, in __call__\n        w = self.f(*args, **kwds)\n      File \"/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/structure/unique_representation.py\", line 449, in __classcall__\n        instance = type.__call__(cls, *args, **options)\n      File \"/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/geometry/triangulation/point_configuration.py\", line 793, in __init__\n        self.set_engine()\n      File \"/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/geometry/triangulation/point_configuration.py\", line 821, in set_engine\n        self._use_TOPCOM = (engine=='TOPCOM') or (engine=='auto' and PointConfiguration._have_TOPCOM())\n      File \"/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/geometry/triangulation/point_configuration.py\", line 730, in _have_TOPCOM\n        except ExceptionPexpect:\n    NameError: global name 'ExceptionPexpect' is not defined\n**********************************************************************\n```",
    "created_at": "2010-09-26T18:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63161",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:32" align="right">comment:32</div>

OK, sorry about that.  I had some older versions lying around and mistakenly installed one of those.  The new one seems to build fine, but after installing 9918 it doesn't seem to work.  The first doctest failure looks like this:

```
sage -t  "devel/sage-t2/sage/geometry/triangulation/base.pyx"
**********************************************************************
File "/Users/mh/sagestuff/sage-4-x/devel/sage-t2/sage/geometry/triangulation/base.pyx", line 259:
    sage: p = PointConfiguration([[0, 1], [0, 0], [1, 0]])   # indirect doctest
Exception raised:
    Traceback (most recent call last):
      File "/Users/mh/sagestuff/sage-4-x/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/mh/sagestuff/sage-4-x/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/mh/sagestuff/sage-4-x/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_12[2]>", line 1, in <module>
        p = PointConfiguration([[Integer(0), Integer(1)], [Integer(0), Integer(0)], [Integer(1), Integer(0)]])   # indirect doctest###line 259:
    sage: p = PointConfiguration([[0, 1], [0, 0], [1, 0]])   # indirect doctest
      File "/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/misc/classcall_metaclass.py", line 258, in __call__
        return cls.__classcall__(cls, *args, **options)
      File "/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/geometry/triangulation/point_configuration.py", line 759, in __classcall__
        .__classcall__(cls, points, connected, fine, regular, star)
      File "/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/misc/cachefunc.py", line 115, in __call__
        w = self.f(*args, **kwds)
      File "/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/structure/unique_representation.py", line 449, in __classcall__
        instance = type.__call__(cls, *args, **options)
      File "/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/geometry/triangulation/point_configuration.py", line 793, in __init__
        self.set_engine()
      File "/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/geometry/triangulation/point_configuration.py", line 821, in set_engine
        self._use_TOPCOM = (engine=='TOPCOM') or (engine=='auto' and PointConfiguration._have_TOPCOM())
      File "/Users/mh/sagestuff/sage-4-x/local/lib/python/site-packages/sage/geometry/triangulation/point_configuration.py", line 730, in _have_TOPCOM
        except ExceptionPexpect:
    NameError: global name 'ExceptionPexpect' is not defined
**********************************************************************
```



---

archive/issue_comments_063162.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI tried installing the patch for this ticket but it seems to conflict with the one at 9918.  Are these out of sync now?  Sorry for my confusion.",
    "created_at": "2010-09-26T19:04:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63162",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:33" align="right">comment:33</div>

I tried installing the patch for this ticket but it seems to conflict with the one at 9918.  Are these out of sync now?  Sorry for my confusion.



---

archive/issue_comments_063163.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI tried directly running points2facets from $SAGE_LOCAL/bin and got this:\n\n```\nsage-4-x: local/bin/points2facets \ndyld: Library not loaded: /Users/mh/sagestuff/sage-4.6.alpha0/local/lib/libgmpxx.3.dylib\n  Referenced from: /Users/mh/sagestuff/sage-4-x/local/bin/points2facets\n  Reason: image not found\nTrace/BPT trap\n```\n\nI had renamed my sage folder from \"sage-4.6.alpha0\" to \"sage-4-x\" after upgrading to 4.6.alpha1, and apparently that is causing some problems.  So I'll try this again with a cleaner 4.6.alpha1 but that will take me a while.",
    "created_at": "2010-09-26T19:17:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63163",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:34" align="right">comment:34</div>

I tried directly running points2facets from $SAGE_LOCAL/bin and got this:

```
sage-4-x: local/bin/points2facets 
dyld: Library not loaded: /Users/mh/sagestuff/sage-4.6.alpha0/local/lib/libgmpxx.3.dylib
  Referenced from: /Users/mh/sagestuff/sage-4-x/local/bin/points2facets
  Reason: image not found
Trace/BPT trap
```

I had renamed my sage folder from "sage-4.6.alpha0" to "sage-4-x" after upgrading to 4.6.alpha1, and apparently that is causing some problems.  So I'll try this again with a cleaner 4.6.alpha1 but that will take me a while.



---

archive/issue_events_100805.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-26T19:43:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100805"
}
```



---

archive/issue_events_100806.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-09-26T19:43:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100806"
}
```



---

archive/issue_comments_063164.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThanks for testing!\n\nThe precise version of the sage<->TOPCOM interface in #9918 should not matter. Of course you need *some* version, or there is no interface.\n\nIn case anyone else wants to give it a try: Since TOPCOM compiled correctly it should work.",
    "created_at": "2010-09-26T19:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63164",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:35" align="right">comment:35</div>

Thanks for testing!

The precise version of the sage<->TOPCOM interface in #9918 should not matter. Of course you need *some* version, or there is no interface.

In case anyone else wants to give it a try: Since TOPCOM compiled correctly it should work.



---

archive/issue_comments_063165.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nTo be more precise in my question:  should I ignore the patch https://github.com/sagemath/sage/files/ticket8169/trac_8169_triangulate_using_TOPCOM.patch.gz if I install the patch from #9918?",
    "created_at": "2010-09-26T19:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63165",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:36" align="right">comment:36</div>

To be more precise in my question:  should I ignore the patch https://github.com/sagemath/sage/files/ticket8169/trac_8169_triangulate_using_TOPCOM.patch.gz if I install the patch from #9918?



---

archive/issue_comments_063166.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nEither patch should work should work for testing the TOPCOM spkg. You can't install both of them as they definitely conflict. If you have a choice, I would recommend using the newer one at #9918.",
    "created_at": "2010-09-26T20:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63166",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>

Either patch should work should work for testing the TOPCOM spkg. You can't install both of them as they definitely conflict. If you have a choice, I would recommend using the newer one at #9918.



---

archive/issue_comments_063167.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI started with sage-4.6.alpha1 compiled from source on OS X 10.5.  After cloning I installed the TOPCOM package and the patch from 9918.  Everything seemed to compile OK with TOPCOM.\n\nIf I try to run one of the TOPCOM programs in $SAGE_ROOT/local/bin, I get a \"bus error\".  If I do \"sage -sh\" and try again, it seems to work.  But if I test geometry/triangulation/base.pyx or triangulation/point_configuration.py, everything fails.  So I think there is some sort of linking issue here.",
    "created_at": "2010-09-27T12:29:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63167",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:38" align="right">comment:38</div>

I started with sage-4.6.alpha1 compiled from source on OS X 10.5.  After cloning I installed the TOPCOM package and the patch from 9918.  Everything seemed to compile OK with TOPCOM.

If I try to run one of the TOPCOM programs in $SAGE_ROOT/local/bin, I get a "bus error".  If I do "sage -sh" and try again, it seems to work.  But if I test geometry/triangulation/base.pyx or triangulation/point_configuration.py, everything fails.  So I think there is some sort of linking issue here.



---

archive/issue_comments_063168.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThat sounds strange; can you post the output of `otool -L points2alltriangs` before running `sage -sh` (when you get the bus error) and `gcc --version`?",
    "created_at": "2010-09-27T13:12:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63168",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:39" align="right">comment:39</div>

That sounds strange; can you post the output of `otool -L points2alltriangs` before running `sage -sh` (when you get the bus error) and `gcc --version`?



---

archive/issue_comments_063169.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nOK, here it is:\n\n```\nbin: otool -L points2alltriangs\npoints2alltriangs:\n\t/Users/mh/sagestuff/sage-4-x/local/lib/libcddgmp.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n\t/Users/mh/sagestuff/sage-4-x/local/lib/libgmpxx.3.dylib (compatibility version 5.0.0, current version 5.6.0)\n\t/Users/mh/sagestuff/sage-4-x/local/lib/libgmp.3.dylib (compatibility version 8.0.0, current version 8.6.0)\n\t/Users/mh/sagestuff/sage-4-x/local/lib/libTOPCOM.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n\t/Users/mh/sagestuff/sage-4-x/local/lib/libCHECKREG.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n\t/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.4.0)\n\t/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 111.1.5)\n```\n\n```\nbin: gcc --version\ni686-apple-darwin9-gcc-4.0.1 (GCC) 4.0.1 (Apple Inc. build 5465)\nCopyright (C) 2005 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n```",
    "created_at": "2010-09-28T00:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63169",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:40" align="right">comment:40</div>

OK, here it is:

```
bin: otool -L points2alltriangs
points2alltriangs:
	/Users/mh/sagestuff/sage-4-x/local/lib/libcddgmp.0.dylib (compatibility version 1.0.0, current version 1.0.0)
	/Users/mh/sagestuff/sage-4-x/local/lib/libgmpxx.3.dylib (compatibility version 5.0.0, current version 5.6.0)
	/Users/mh/sagestuff/sage-4-x/local/lib/libgmp.3.dylib (compatibility version 8.0.0, current version 8.6.0)
	/Users/mh/sagestuff/sage-4-x/local/lib/libTOPCOM.0.dylib (compatibility version 1.0.0, current version 1.0.0)
	/Users/mh/sagestuff/sage-4-x/local/lib/libCHECKREG.0.dylib (compatibility version 1.0.0, current version 1.0.0)
	/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.4.0)
	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 111.1.5)
```

```
bin: gcc --version
i686-apple-darwin9-gcc-4.0.1 (GCC) 4.0.1 (Apple Inc. build 5465)
Copyright (C) 2005 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
```



---

archive/issue_comments_063170.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nSounds like it should work? Is this on `bsd.math`? Trying to debug this via trac is painfull... Maybe you can post a stack backtrace from gdb?",
    "created_at": "2010-09-28T10:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63170",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:41" align="right">comment:41</div>

Sounds like it should work? Is this on `bsd.math`? Trying to debug this via trac is painfull... Maybe you can post a stack backtrace from gdb?



---

archive/issue_comments_063171.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,6 @@\n \n My libtoolized TOPCOM spkg is here:\n \n-http://www.stp.dias.ie/~vbraun/TOPCOM-0.16.2.p2.spkg\n+http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg\n \n See also: #9918: triangulate point configurations, an extension to the Sage library that optionally uses TOPCOM.\n``````\n",
    "created_at": "2010-11-17T20:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63171",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,6 @@
 
 My libtoolized TOPCOM spkg is here:
 
-http://www.stp.dias.ie/~vbraun/TOPCOM-0.16.2.p2.spkg
+http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg
 
 See also: #9918: triangulate point configurations, an extension to the Sage library that optionally uses TOPCOM.
``````




---

archive/issue_comments_063172.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg\n \n-See also: #9918: triangulate point configurations, an extension to the Sage library that optionally uses TOPCOM.\n+None of the patches in this ticket should be applied to the Sage library! The TOPCOM binaries are (optionally) used by the patches in #9918: triangulate point configurations.\n``````\n",
    "created_at": "2010-12-22T16:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63172",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 http://www.stp.dias.ie/~vbraun/Sage/spkg/TOPCOM-0.16.2.p2.spkg
 
-See also: #9918: triangulate point configurations, an extension to the Sage library that optionally uses TOPCOM.
+None of the patches in this ticket should be applied to the Sage library! The TOPCOM binaries are (optionally) used by the patches in #9918: triangulate point configurations.
``````




---

archive/issue_comments_063173.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThis works for me now on OS X 10.5.  Works for OS X 10.6 and linux, so I think this is OK for an optional spkg.",
    "created_at": "2011-01-13T02:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63173",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:44" align="right">comment:44</div>

This works for me now on OS X 10.5.  Works for OS X 10.6 and linux, so I think this is OK for an optional spkg.



---

archive/issue_events_100807.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T02:16:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100807"
}
```



---

archive/issue_events_100808.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T02:16:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100808"
}
```



---

archive/issue_events_100809.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-01-15T00:32:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100809"
}
```



---

archive/issue_events_100810.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-01-15T00:32:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100810"
}
```



---

archive/issue_comments_063174.json:
```json
{
    "body": "Reviewer: **Marshall Hampton**",
    "created_at": "2011-01-15T00:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8169#issuecomment-63174",
    "user": "https://github.com/novoselt"
}
```

Reviewer: **Marshall Hampton**



---

archive/issue_events_100811.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-27T14:01:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100811"
}
```



---

archive/issue_events_100812.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-27T14:01:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100812"
}
```



---

archive/issue_events_100813.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-06T09:58:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100813"
}
```



---

archive/issue_events_100814.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-06T09:58:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8169",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8169#event-100814"
}
```
