# Issue 8302: cubical complexes, delta complexes, and more

archive/issues_008302.json:
```json
{
    "assignees": [
        "https://github.com/jhpalmieri"
    ],
    "body": "The attached patch adds lots of functionality to Sage's algebraic topology capabilities:\n\n- it implements cubical complexes: complexes constructed from cubes of various dimensions, glued together in prescribed ways.\n\n- it implements Delta complexes: this is a variant on a simplicial complex which allows for more efficient construction of many spaces.  For example, the minimal triangulation of the torus as a simplicial complex uses 14 triangles, while there is a Delta complex version with only two triangles.  Allen Hatcher uses these in his popular algebraic topology book.\n\n- it \"implements\" generic cell complexes, as a parent class to the previous two, and also to simplicial complexes.  This is not intended for use by casual Sage users, but instead for developers who want to add another kind of complex (CW complexes?  Prodsimplicial complexes?)  Many methods in this class are not implemented, but instead provide a template of what should be implemented in any derived class.\n\n- it modifies simplicial complexes a bit, allowing them to be defined without specifying a vertex set: just list the maximal simplices and it will deduce what the vertex set is.  It also defines `connected_sum` for arbitrary simplicial complexes, not just simplicial surfaces, with a warning that it's not well-defined if you don't call it on manifolds.  It renames `ProjectivePlane` to `RealProjectivePlane` (keeping the old name as an alias for backward compatibility).\n\n- it provides an interface to CHomP, which is now an experimental spkg for Sage.  CHomP provides programs to compute homology which are faster than anything Sage can do.  See [http://chomp.rutgers.edu/](http://chomp.rutgers.edu/) for more information.\n\n- it changes how the `homology` and `chain_complex` methods work: these now pass keywords to each other, so it's easy to implement new keywords: just implement it for `ChainComplex.homology`, for instance, and when you compute the homology of any simplicial complex, you can give it the keyword and it will get passed on to this method.\n\n- it adds a file `tests.py` which compares the results of CHomP with the built-in Sage homology computations, raising an error if they ever disagree.\n\nCC:  @sagetrac-sault @antieau @sagetrac-mhampton\n\nComponent: **algebraic topology**\n\nAuthor: **John Palmieri**\n\nReviewer: **Marshall Hampton, Minh Van Nguyen**\n\nMerged: **sage-4.3.4.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8302_\n\n",
    "closed_at": "2010-03-03T02:19:25Z",
    "created_at": "2010-02-19T02:28:51Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20topology",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "cubical complexes, delta complexes, and more",
    "type": "issue",
    "updated_at": "2010-03-03T02:31:37Z",
    "url": "https://github.com/sagemath/sage/issues/8302",
    "user": "https://github.com/jhpalmieri"
}
```
The attached patch adds lots of functionality to Sage's algebraic topology capabilities:

- it implements cubical complexes: complexes constructed from cubes of various dimensions, glued together in prescribed ways.

- it implements Delta complexes: this is a variant on a simplicial complex which allows for more efficient construction of many spaces.  For example, the minimal triangulation of the torus as a simplicial complex uses 14 triangles, while there is a Delta complex version with only two triangles.  Allen Hatcher uses these in his popular algebraic topology book.

- it "implements" generic cell complexes, as a parent class to the previous two, and also to simplicial complexes.  This is not intended for use by casual Sage users, but instead for developers who want to add another kind of complex (CW complexes?  Prodsimplicial complexes?)  Many methods in this class are not implemented, but instead provide a template of what should be implemented in any derived class.

- it modifies simplicial complexes a bit, allowing them to be defined without specifying a vertex set: just list the maximal simplices and it will deduce what the vertex set is.  It also defines `connected_sum` for arbitrary simplicial complexes, not just simplicial surfaces, with a warning that it's not well-defined if you don't call it on manifolds.  It renames `ProjectivePlane` to `RealProjectivePlane` (keeping the old name as an alias for backward compatibility).

- it provides an interface to CHomP, which is now an experimental spkg for Sage.  CHomP provides programs to compute homology which are faster than anything Sage can do.  See [http://chomp.rutgers.edu/](http://chomp.rutgers.edu/) for more information.

- it changes how the `homology` and `chain_complex` methods work: these now pass keywords to each other, so it's easy to implement new keywords: just implement it for `ChainComplex.homology`, for instance, and when you compute the homology of any simplicial complex, you can give it the keyword and it will get passed on to this method.

- it adds a file `tests.py` which compares the results of CHomP with the built-in Sage homology computations, raising an error if they ever disagree.

CC:  @sagetrac-sault @antieau @sagetrac-mhampton

Component: **algebraic topology**

Author: **John Palmieri**

Reviewer: **Marshall Hampton, Minh Van Nguyen**

Merged: **sage-4.3.4.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/8302_





---

archive/issue_events_102635.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-02-19T02:28:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "milestone_number": null,
    "milestone_title": "sage-4.3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102635"
}
```



---

archive/issue_events_102636.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-02-19T02:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20topology",
    "label_color": "0000ff",
    "label_name": "c: algebraic topology",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102636"
}
```



---

archive/issue_events_102637.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-02-19T02:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102637"
}
```



---

archive/issue_events_102638.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-02-19T02:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102638"
}
```



---

archive/issue_events_102639.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-02-19T02:28:51Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "subject": "https://github.com/jhpalmieri",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102639"
}
```



---

archive/issue_events_102640.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-02-19T02:29:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102640"
}
```



---

archive/issue_comments_064657.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,4 @@\n \n - it changes how the `homology` and `chain_complex` methods work: these now pass keywords to each other, so it's easy to implement new keywords: just implement it for `ChainComplex.homology`, for instance, and when you compute the homology of any simplicial complex, you can give it the keyword and it will get passed on to this method.\n \n-\n+- it adds a file `tests.py` which compares the results of CHomP with the built-in Sage homology computations, raising an error if they ever disagree.\n``````\n",
    "created_at": "2010-02-21T20:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64657",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,4 @@
 
 - it changes how the `homology` and `chain_complex` methods work: these now pass keywords to each other, so it's easy to implement new keywords: just implement it for `ChainComplex.homology`, for instance, and when you compute the homology of any simplicial complex, you can give it the keyword and it will get passed on to this method.
 
-
+- it adds a file `tests.py` which compares the results of CHomP with the built-in Sage homology computations, raising an error if they ever disagree.
``````




---

archive/issue_comments_064658.json:
```json
{
    "body": "Attachment: **[Cell_complexes.patch.gz](https://github.com/sagemath/sage/files/ticket8302/Cell_complexes.patch.gz)**",
    "created_at": "2010-02-22T18:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64658",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[Cell_complexes.patch.gz](https://github.com/sagemath/sage/files/ticket8302/Cell_complexes.patch.gz)**



---

archive/issue_comments_064659.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nDocumentation looks fantastic.\n\nAll tests pass, 100% coverage.  Only coverage issue is that a few files bring up a\n\n```\nERROR: Please add a `TestSuite(s).run()` doctest.\n```\nerror from sage -coverage.  Its unclear to me how important that is.\n\nI will test this out a little more before giving a positive review.",
    "created_at": "2010-02-25T23:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64659",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:4" align="right">comment:4</div>

Documentation looks fantastic.

All tests pass, 100% coverage.  Only coverage issue is that a few files bring up a

```
ERROR: Please add a `TestSuite(s).run()` doctest.
```
error from sage -coverage.  Its unclear to me how important that is.

I will test this out a little more before giving a positive review.



---

archive/issue_events_102641.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-02-26T01:46:12Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102641"
}
```



---

archive/issue_events_102642.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-02-26T01:46:12Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102642"
}
```



---

archive/issue_comments_064660.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIn several modules, instead of INPUT and OUTPUT blocks, \"parameter\" or \"param\" is used, or \"results\".  It would be better if these conformed more to the official conventions.  I don't think this is reason enough to block the inclusion of all this functionality though - the functions are very well described otherwise.",
    "created_at": "2010-02-26T01:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64660",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:5" align="right">comment:5</div>

In several modules, instead of INPUT and OUTPUT blocks, "parameter" or "param" is used, or "results".  It would be better if these conformed more to the official conventions.  I don't think this is reason enough to block the inclusion of all this functionality though - the functions are very well described otherwise.



---

archive/issue_events_102643.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-02-26T01:46:56Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102643"
}
```



---

archive/issue_events_102644.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-02-26T01:46:56Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102644"
}
```



---

archive/issue_comments_064661.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@sagetrac-mhampton](#comment:5):\n> In several modules, instead of INPUT and OUTPUT blocks, \"parameter\" or \"param\" is used, or \"results\".  It would be better if these conformed more to the official conventions.\n\nJust so you know, the :param: form is the official Sphinx/reST format.  It's mentioned (briefly) in the Sage developer's guide: see the third bullet point [here](http://www.sagemath.org/doc/developer/conventions.html#documentation-strings).",
    "created_at": "2010-02-26T02:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64661",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@sagetrac-mhampton](#comment:5):
> In several modules, instead of INPUT and OUTPUT blocks, "parameter" or "param" is used, or "results".  It would be better if these conformed more to the official conventions.

Just so you know, the :param: form is the official Sphinx/reST format.  It's mentioned (briefly) in the Sage developer's guide: see the third bullet point [here](http://www.sagemath.org/doc/developer/conventions.html#documentation-strings).



---

archive/issue_events_102645.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-02-26T03:17:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102645"
}
```



---

archive/issue_events_102646.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-02-26T03:17:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102646"
}
```



---

archive/issue_comments_064662.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAh, sorry, I had missed that in the developer's guide.  My apologies.  It seems like we should choose one or the other, but that's a debate for another time and place.\n\nI installed CHomP on several machines and encountered no problems.  Didn't try yet on Solaris but if that works OK then maybe it can be moved into optional soon.\n\nI see no reason not to give this a positive review.",
    "created_at": "2010-02-26T03:17:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64662",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:8" align="right">comment:8</div>

Ah, sorry, I had missed that in the developer's guide.  My apologies.  It seems like we should choose one or the other, but that's a debate for another time and place.

I installed CHomP on several machines and encountered no problems.  Didn't try yet on Solaris but if that works OK then maybe it can be moved into optional soon.

I see no reason not to give this a positive review.



---

archive/issue_events_102647.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T11:29:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102647"
}
```



---

archive/issue_events_102648.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T11:29:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102648"
}
```



---

archive/issue_comments_064663.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI got the following doctest failures after applying [Cell_complexes.patch](https://github.com/sagemath/sage/files/ticket8302/Cell_complexes.patch.gz) to Sage 4.3.3:\n\n```sh\n[mvngu@sage sage-4.3.3]$ ./sage -t -long devel/sage-main/sage/structure/sage_object.pyx\nsage -t -long \"devel/sage-main/sage/structure/sage_object.pyx\"\n**********************************************************************\nFile \"/dev/shm/mvngu/release/sage-4.3.3/devel/sage-main/sage/structure/sage_object.pyx\", line 1001:\n    sage: print \"x\"; sage.structure.sage_object.unpickle_all(std)\nExpected:\n    x...\n    Successfully unpickled ... objects.\n    Failed to unpickle 0 objects.\nGot:\n    x\n    doctest:1: DeprecationWarning: Your word object is saved in an old file format since FiniteWord_over_OrderedAlphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing \"word.save(filename)\" to ensure that it will load in future versions of Sage.\n    doctest:1: DeprecationWarning: Your word object is saved in an old file format since AbstractWord is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing \"word.save(filename)\" to ensure that it will load in future versions of Sage.\n    doctest:1: DeprecationWarning: Your word object is saved in an old file format since Word_over_Alphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing \"word.save(filename)\" to ensure that it will load in future versions of Sage.\n    doctest:1: DeprecationWarning: Your word object is saved in an old file format since Word_over_OrderedAlphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing \"word.save(filename)\" to ensure that it will load in future versions of Sage.\n    doctest:1: DeprecationWarning: ChristoffelWord_Lower is deprecated, use LowerChristoffelWord instead\n    ** failed:  _class__sage_homology_examples_SimplicialSurface__.sobj\n    Failed:\n    _class__sage_homology_examples_SimplicialSurface__.sobj\n    Successfully unpickled 570 objects.\n    Failed to unpickle 1 objects.\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_23\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /dev/shm/mvngu/dot_sage/tmp/.doctest_sage_object.py\n\t [5.3 s]\n```\nI don't know how to explain the above failure. Also note the following failure directly resulting from [Cell_complexes.patch](https://github.com/sagemath/sage/files/ticket8302/Cell_complexes.patch.gz):\n\n```sh\n[mvngu@sage sage-4.3.3]$ ./sage -t -long devel/sage-main/sage/interfaces/chomp.py\nsage -t -long \"devel/sage-main/sage/interfaces/chomp.py\"    \n**********************************************************************\nFile \"/dev/shm/mvngu/release/sage-4.3.3/devel/sage-main/sage/interfaces/chomp.py\", line 564:\n    sage: homchain(C2, generators=True, base_ring=GF(2))[2]\nException raised:\n    Traceback (most recent call last):\n      File \"/dev/shm/mvngu/release/sage-4.3.3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/dev/shm/mvngu/release/sage-4.3.3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/dev/shm/mvngu/release/sage-4.3.3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_8[5]>\", line 1, in <module>\n        homchain(C2, generators=True, base_ring=GF(Integer(2)))[Integer(2)]###line 564:\n    sage: homchain(C2, generators=True, base_ring=GF(2))[2]\n      File \"/dev/shm/mvngu/release/sage-4.3.3/local/lib/python/site-packages/sage/interfaces/chomp.py\", line 584, in homchain\n        return CHomP()('homchain', complex, **kwds)\n      File \"/dev/shm/mvngu/release/sage-4.3.3/local/lib/python/site-packages/sage/interfaces/chomp.py\", line 145, in __call__\n        raise OSError, \"Program %s not found\" % program\n    OSError: Program homchain not found\n**********************************************************************\n1 items had failures:\n   1 of   8 in __main__.example_8\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /dev/shm/mvngu/dot_sage/tmp/.doctest_chomp.py\n\t [1.8 s]\n```\nI think the failure results from a missing \"# optional\" comment on line 564 of the module `sage/interfaces/chomp.py`. Something like the following change would fix the above failure:\n\n```diff\ndiff -r 0fa662e0a843 sage/interfaces/chomp.py\n--- a/sage/interfaces/chomp.py\n+++ b/sage/interfaces/chomp.py\n@@ -561,7 +561,7 @@\n         sage: C2 = delta_complexes.Sphere(2).chain_complex()\n         sage: homchain(C2, generators=True)[2]  # optional: need CHomP\n         (Z, [(1, -1)])\n-        sage: homchain(C2, generators=True, base_ring=GF(2))[2]\n+        sage: homchain(C2, generators=True, base_ring=GF(2))[2]  # optional: need CHomP\n         (Vector space of dimension 1 over Finite Field of size 2, [(1, 1)])\n \n     TESTS:\n```",
    "created_at": "2010-03-02T11:29:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64663",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:9" align="right">comment:9</div>

I got the following doctest failures after applying [Cell_complexes.patch](https://github.com/sagemath/sage/files/ticket8302/Cell_complexes.patch.gz) to Sage 4.3.3:

```sh
[mvngu@sage sage-4.3.3]$ ./sage -t -long devel/sage-main/sage/structure/sage_object.pyx
sage -t -long "devel/sage-main/sage/structure/sage_object.pyx"
**********************************************************************
File "/dev/shm/mvngu/release/sage-4.3.3/devel/sage-main/sage/structure/sage_object.pyx", line 1001:
    sage: print "x"; sage.structure.sage_object.unpickle_all(std)
Expected:
    x...
    Successfully unpickled ... objects.
    Failed to unpickle 0 objects.
Got:
    x
    doctest:1: DeprecationWarning: Your word object is saved in an old file format since FiniteWord_over_OrderedAlphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing "word.save(filename)" to ensure that it will load in future versions of Sage.
    doctest:1: DeprecationWarning: Your word object is saved in an old file format since AbstractWord is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing "word.save(filename)" to ensure that it will load in future versions of Sage.
    doctest:1: DeprecationWarning: Your word object is saved in an old file format since Word_over_Alphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing "word.save(filename)" to ensure that it will load in future versions of Sage.
    doctest:1: DeprecationWarning: Your word object is saved in an old file format since Word_over_OrderedAlphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing "word.save(filename)" to ensure that it will load in future versions of Sage.
    doctest:1: DeprecationWarning: ChristoffelWord_Lower is deprecated, use LowerChristoffelWord instead
    ** failed:  _class__sage_homology_examples_SimplicialSurface__.sobj
    Failed:
    _class__sage_homology_examples_SimplicialSurface__.sobj
    Successfully unpickled 570 objects.
    Failed to unpickle 1 objects.
**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_23
***Test Failed*** 1 failures.
For whitespace errors, see the file /dev/shm/mvngu/dot_sage/tmp/.doctest_sage_object.py
	 [5.3 s]
```
I don't know how to explain the above failure. Also note the following failure directly resulting from [Cell_complexes.patch](https://github.com/sagemath/sage/files/ticket8302/Cell_complexes.patch.gz):

```sh
[mvngu@sage sage-4.3.3]$ ./sage -t -long devel/sage-main/sage/interfaces/chomp.py
sage -t -long "devel/sage-main/sage/interfaces/chomp.py"    
**********************************************************************
File "/dev/shm/mvngu/release/sage-4.3.3/devel/sage-main/sage/interfaces/chomp.py", line 564:
    sage: homchain(C2, generators=True, base_ring=GF(2))[2]
Exception raised:
    Traceback (most recent call last):
      File "/dev/shm/mvngu/release/sage-4.3.3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/dev/shm/mvngu/release/sage-4.3.3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/dev/shm/mvngu/release/sage-4.3.3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_8[5]>", line 1, in <module>
        homchain(C2, generators=True, base_ring=GF(Integer(2)))[Integer(2)]###line 564:
    sage: homchain(C2, generators=True, base_ring=GF(2))[2]
      File "/dev/shm/mvngu/release/sage-4.3.3/local/lib/python/site-packages/sage/interfaces/chomp.py", line 584, in homchain
        return CHomP()('homchain', complex, **kwds)
      File "/dev/shm/mvngu/release/sage-4.3.3/local/lib/python/site-packages/sage/interfaces/chomp.py", line 145, in __call__
        raise OSError, "Program %s not found" % program
    OSError: Program homchain not found
**********************************************************************
1 items had failures:
   1 of   8 in __main__.example_8
***Test Failed*** 1 failures.
For whitespace errors, see the file /dev/shm/mvngu/dot_sage/tmp/.doctest_chomp.py
	 [1.8 s]
```
I think the failure results from a missing "# optional" comment on line 564 of the module `sage/interfaces/chomp.py`. Something like the following change would fix the above failure:

```diff
diff -r 0fa662e0a843 sage/interfaces/chomp.py
--- a/sage/interfaces/chomp.py
+++ b/sage/interfaces/chomp.py
@@ -561,7 +561,7 @@
         sage: C2 = delta_complexes.Sphere(2).chain_complex()
         sage: homchain(C2, generators=True)[2]  # optional: need CHomP
         (Z, [(1, -1)])
-        sage: homchain(C2, generators=True, base_ring=GF(2))[2]
+        sage: homchain(C2, generators=True, base_ring=GF(2))[2]  # optional: need CHomP
         (Vector space of dimension 1 over Finite Field of size 2, [(1, 1)])
 
     TESTS:
```



---

archive/issue_comments_064664.json:
```json
{
    "body": "Work Issues: **doctest failures**",
    "created_at": "2010-03-02T11:29:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64664",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Work Issues: **doctest failures**



---

archive/issue_comments_064665.json:
```json
{
    "body": "Attachment: **[trac_8302-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket8302/trac_8302-reviewer.patch.gz)**\n\napply on top of previous patch",
    "created_at": "2010-03-02T13:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64665",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Attachment: **[trac_8302-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket8302/trac_8302-reviewer.patch.gz)**

apply on top of previous patch



---

archive/issue_events_102649.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T13:04:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102649"
}
```



---

archive/issue_events_102650.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T13:04:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102650"
}
```



---

archive/issue_comments_064666.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI have attached a reviewer patch fixing the reported failure where the CHomP spkg is not installed. Only this reviewer patch needs reviewing by anyone but me. \n\nJohn: When this ticket is closed, do you also want the CHomP spkg at\n\nhttp://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p1.spkg\n\nto be uploaded to the experimental spkg repository?",
    "created_at": "2010-03-02T13:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64666",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:10" align="right">comment:10</div>

I have attached a reviewer patch fixing the reported failure where the CHomP spkg is not installed. Only this reviewer patch needs reviewing by anyone but me. 

John: When this ticket is closed, do you also want the CHomP spkg at

http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p1.spkg

to be uploaded to the experimental spkg repository?



---

archive/issue_comments_064667.json:
```json
{
    "body": "Changed work issues from **doctest failures** to none",
    "created_at": "2010-03-02T13:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64667",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Changed work issues from **doctest failures** to none



---

archive/issue_comments_064668.json:
```json
{
    "body": "Reviewer: **Marshall Hampton, Minh Van Nguyen**",
    "created_at": "2010-03-02T13:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64668",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Reviewer: **Marshall Hampton, Minh Van Nguyen**



---

archive/issue_comments_064669.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nMarshall's patch gets a positive review.  I've attached another small patch to deal with the pickling problem.  I had deleted the class `SimplicialSurface` since with the patch it doesn't provide anything extra compared to `SimplicialComplex`.  The new patch just makes `SimplicialSurface` a synonym for `SimplicialComplex`.  This fixes the pickling problem for me.",
    "created_at": "2010-03-02T17:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64669",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

Marshall's patch gets a positive review.  I've attached another small patch to deal with the pickling problem.  I had deleted the class `SimplicialSurface` since with the patch it doesn't provide anything extra compared to `SimplicialComplex`.  The new patch just makes `SimplicialSurface` a synonym for `SimplicialComplex`.  This fixes the pickling problem for me.



---

archive/issue_comments_064670.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@sagetrac-mvngu](#comment:10):\n\n> John: When this ticket is closed, do you also want the CHomP spkg at\n> \n> http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p1.spkg\n> \n> to be uploaded to the experimental spkg repository?\n\nYes, that would be good.  William already uploaded an earlier version, so I don't even think it has to wait for this ticket to be closed...",
    "created_at": "2010-03-02T18:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64670",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@sagetrac-mvngu](#comment:10):

> John: When this ticket is closed, do you also want the CHomP spkg at
> 
> http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p1.spkg
> 
> to be uploaded to the experimental spkg repository?

Yes, that would be good.  William already uploaded an earlier version, so I don't even think it has to wait for this ticket to be closed...



---

archive/issue_comments_064671.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nWith [trac_8302-pickle.patch](https://github.com/sagemath/sage/files/ticket8302/trac_8302-pickle.patch.gz), the pickling issue reported above is fixed.",
    "created_at": "2010-03-02T19:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64671",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:13" align="right">comment:13</div>

With [trac_8302-pickle.patch](https://github.com/sagemath/sage/files/ticket8302/trac_8302-pickle.patch.gz), the pickling issue reported above is fixed.



---

archive/issue_events_102651.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T19:12:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102651"
}
```



---

archive/issue_events_102652.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T19:12:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102652"
}
```



---

archive/issue_comments_064672.json:
```json
{
    "body": "Attachment: **[trac_8302-pickle.patch.gz](https://github.com/sagemath/sage/files/ticket8302/trac_8302-pickle.patch.gz)**\n\napply on top of other patches",
    "created_at": "2010-03-02T19:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64672",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_8302-pickle.patch.gz](https://github.com/sagemath/sage/files/ticket8302/trac_8302-pickle.patch.gz)**

apply on top of other patches



---

archive/issue_comments_064673.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI just changed the pickle patch: I just added a comment.  The old version had\n\n```\nSimplicialSurface = SimplicialComplex \n```\nand the new version has\n\n```\n# for backwards compatibility:  \nSimplicialSurface = SimplicialComplex \n```\nI don't think this needs to be reviewed again...",
    "created_at": "2010-03-02T19:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64673",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

I just changed the pickle patch: I just added a comment.  The old version had

```
SimplicialSurface = SimplicialComplex 
```
and the new version has

```
# for backwards compatibility:  
SimplicialSurface = SimplicialComplex 
```
I don't think this needs to be reviewed again...



---

archive/issue_comments_064674.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nMerged in this order:\n\n1. [Cell_complexes.patch](https://github.com/sagemath/sage/files/ticket8302/Cell_complexes.patch.gz)\n2. [trac_8302-reviewer.patch](https://github.com/sagemath/sage/files/ticket8302/trac_8302-reviewer.patch.gz)\n3. [trac_8302-pickle.patch](https://github.com/sagemath/sage/files/ticket8302/trac_8302-pickle.patch.gz)\n4. Merged [chomp-20100213.p1.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p1.spkg) in the experimental spkg repository at http://www.sagemath.org/packages/experimental.",
    "created_at": "2010-03-03T02:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64674",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:15" align="right">comment:15</div>

Merged in this order:

1. [Cell_complexes.patch](https://github.com/sagemath/sage/files/ticket8302/Cell_complexes.patch.gz)
2. [trac_8302-reviewer.patch](https://github.com/sagemath/sage/files/ticket8302/trac_8302-reviewer.patch.gz)
3. [trac_8302-pickle.patch](https://github.com/sagemath/sage/files/ticket8302/trac_8302-pickle.patch.gz)
4. Merged [chomp-20100213.p1.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p1.spkg) in the experimental spkg repository at http://www.sagemath.org/packages/experimental.



---

archive/issue_events_102653.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-03T02:19:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102653"
}
```



---

archive/issue_events_102654.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-03T02:19:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8302#event-102654"
}
```



---

archive/issue_comments_064675.json:
```json
{
    "body": "Merged: **sage-4.3.4.alpha0**",
    "created_at": "2010-03-03T02:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64675",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Merged: **sage-4.3.4.alpha0**



---

archive/issue_comments_064676.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nBy the way, Marshall, thanks for reviewing this!",
    "created_at": "2010-03-03T02:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8302#issuecomment-64676",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

By the way, Marshall, thanks for reviewing this!
