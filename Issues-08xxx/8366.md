# Issue 8366: make contour plot labels and linestyles work when fill=True

archive/issues_008366.json:
```json
{
    "body": "We have an artificial limitation in that contour labels and linestyles don't work when fill=True.  This patch lets these options work with filling.  Furthermore, it draws the contour lines on top of filled plots by default, which (at least I think) makes the plot look a little nicer anyway.\n\n**Assignee:** @williamstein\n\n**CC:**  @kcrisman wcauchois @robert-marik\n\n**Keywords:** contour, plot\n\n**Author:** Jason Grout\n\n**Reviewer:** Robert Ma\u0159\u00edk\n\n**Merged:** sage-4.4.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/8366\n\n",
    "closed_at": "2010-04-15T23:44:44Z",
    "created_at": "2010-02-25T17:24:26Z",
    "labels": [
        "component: graphics",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.4",
    "title": "make contour plot labels and linestyles work when fill=True",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8366",
    "user": "https://github.com/jasongrout"
}
```
We have an artificial limitation in that contour labels and linestyles don't work when fill=True.  This patch lets these options work with filling.  Furthermore, it draws the contour lines on top of filled plots by default, which (at least I think) makes the plot look a little nicer anyway.

**Assignee:** @williamstein

**CC:**  @kcrisman wcauchois @robert-marik

**Keywords:** contour, plot

**Author:** Jason Grout

**Reviewer:** Robert Mařík

**Merged:** sage-4.4.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/8366





---

archive/attachments_010384.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-8366-label-filled-contours.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8366/trac-8366-label-filled-contours.patch",
    "created_at": "2010-02-25T17:25:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jasongrout"
}
```



---

archive/issue_comments_069194.json:
```json
{
    "body": "",
    "created_at": "2010-02-25T17:25:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69194",
    "user": "https://github.com/jasongrout"
}
```





---

archive/issue_events_060253.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-02-25T17:26:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8366#event-60253"
}
```



---

archive/issue_comments_069195.json:
```json
{
    "body": "apply after previous patch, this patch fixes docstrings",
    "created_at": "2010-03-04T16:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69195",
    "user": "https://github.com/robert-marik"
}
```

apply after previous patch, this patch fixes docstrings



---

archive/issue_events_060254.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-03-04T16:33:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8366#event-60254"
}
```



---

archive/issue_events_060255.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-03-04T16:33:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8366#event-60255"
}
```



---

archive/attachments_010385.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-8366-fixed-docstrings.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8366/trac-8366-fixed-docstrings.patch",
    "created_at": "2010-03-04T16:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/robert-marik"
}
```



---

archive/issue_comments_069196.json:
```json
{
    "body": "<a id='comment:2'></a>\nWorks as advertaised, but region_plot gives error after installing this patch.\n\n```\nsage: x,y=var('x y')\nsage: region_plot(cos(x^2+y^2) <= 0, (x, -3, 3), (y, -3, 3))\n\nTraceback (click to the left of this block for traceback)\n...\nKeyError: 'linewidths'\n```\n\ndid you try this?\n\n```\n./sage -t devel/sage/sage/plot/contour_plot.py\n```\n\nMy patch fixes long lines (which make help for contour_plot too wide for typical screen) and split contour_plot exmaples into groups (this allows to try commands immediatelly when reading live reference manual).\n\nOne suggestion: could we set label_colors to something resonable (gray? red? blue?) when both fill and labels are True, but label_color is not specified?",
    "created_at": "2010-03-04T16:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69196",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:2'></a>
Works as advertaised, but region_plot gives error after installing this patch.

```
sage: x,y=var('x y')
sage: region_plot(cos(x^2+y^2) <= 0, (x, -3, 3), (y, -3, 3))

Traceback (click to the left of this block for traceback)
...
KeyError: 'linewidths'
```

did you try this?

```
./sage -t devel/sage/sage/plot/contour_plot.py
```

My patch fixes long lines (which make help for contour_plot too wide for typical screen) and split contour_plot exmaples into groups (this allows to try commands immediatelly when reading live reference manual).

One suggestion: could we set label_colors to something resonable (gray? red? blue?) when both fill and labels are True, but label_color is not specified?



---

archive/issue_comments_069197.json:
```json
{
    "body": "<a id='comment:3'></a>\nJason, thank you for this patch and thank you also for the patch to #8368. I hope that the issue above could be fixed easily. I suggest you to include the ticket #8368 to this one -- this could make the life of our release manager easier :)",
    "created_at": "2010-03-04T16:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69197",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:3'></a>
Jason, thank you for this patch and thank you also for the patch to #8368. I hope that the issue above could be fixed easily. I suggest you to include the ticket #8368 to this one -- this could make the life of our release manager easier :)



---

archive/issue_comments_069198.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [robert.marik](#comment%3A3):\n> Jason, thank you for this patch and thank you also for the patch to #8368. I hope that the issue above could be fixed easily. I suggest you to include the ticket #8368 to this one -- this could make the life of our release manager easier :) \n\n\nI'm afraid I would get in trouble with our (wonderfully!) picky release manager for combining tickets which arguably have different issues.  (I really appreciate Minh's reminders about the details we need to follow!)",
    "created_at": "2010-03-04T18:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69198",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>
Replying to [robert.marik](#comment%3A3):
> Jason, thank you for this patch and thank you also for the patch to #8368. I hope that the issue above could be fixed easily. I suggest you to include the ticket #8368 to this one -- this could make the life of our release manager easier :) 


I'm afraid I would get in trouble with our (wonderfully!) picky release manager for combining tickets which arguably have different issues.  (I really appreciate Minh's reminders about the details we need to follow!)



---

archive/attachments_010386.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-8366-fix-code.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8366/trac-8366-fix-code.patch",
    "created_at": "2010-04-15T03:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jasongrout"
}
```



---

archive/issue_comments_069199.json:
```json
{
    "body": "apply on top of previous patches",
    "created_at": "2010-04-15T03:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69199",
    "user": "https://github.com/jasongrout"
}
```

apply on top of previous patches



---

archive/issue_events_060256.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-04-15T03:28:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8366#event-60256"
}
```



---

archive/issue_events_060257.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-04-15T03:28:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8366#event-60257"
}
```



---

archive/issue_comments_069200.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [robert.marik](#comment%3A2):\n> did you try this?\n> \n> ```\n> ./sage -t devel/sage/sage/plot/contour_plot.py\n> ```\n\n\n\nWeird---I thought I did.  Well, the new patch fixes this error.\n\n> One suggestion: could we set label_colors to something resonable (gray? red? blue?) when both fill and labels are True, but label_color is not specified?\n\n\nThe new patch addresses this issue as well.\n\nCan you look at this and review it again?\n\nThanks",
    "created_at": "2010-04-15T03:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69200",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'></a>
Replying to [robert.marik](#comment%3A2):
> did you try this?
> 
> ```
> ./sage -t devel/sage/sage/plot/contour_plot.py
> ```



Weird---I thought I did.  Well, the new patch fixes this error.

> One suggestion: could we set label_colors to something resonable (gray? red? blue?) when both fill and labels are True, but label_color is not specified?


The new patch addresses this issue as well.

Can you look at this and review it again?

Thanks



---

archive/issue_events_060258.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-04-15T09:49:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8366#event-60258"
}
```



---

archive/issue_events_060259.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-04-15T09:49:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8366#event-60259"
}
```



---

archive/issue_comments_069201.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks for fixing - the patch introduces new functionality, tests passed now. Positive review.\n\nRelease manager: apply all three patches:  trac-8366-label-filled-contours.patch, trac-8366-fixed-docstrings.patch, trac-8366-fix-code.patch",
    "created_at": "2010-04-15T09:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69201",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:7'></a>
Thanks for fixing - the patch introduces new functionality, tests passed now. Positive review.

Release manager: apply all three patches:  trac-8366-label-filled-contours.patch, trac-8366-fixed-docstrings.patch, trac-8366-fix-code.patch



---

archive/issue_comments_069202.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"contour, plot\".",
    "created_at": "2010-04-15T09:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69202",
    "user": "https://github.com/robert-marik"
}
```

**Changing keywords** from "" to "contour, plot".



---

archive/issue_comments_069203.json:
```json
{
    "body": "**Reviewer:** Robert Ma\u0159\u00edk",
    "created_at": "2010-04-15T09:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69203",
    "user": "https://github.com/robert-marik"
}
```

**Reviewer:** Robert Mařík



---

archive/issue_events_060260.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-15T23:44:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8366#event-60260"
}
```



---

archive/issue_events_060261.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-15T23:44:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8366#event-60261"
}
```



---

archive/issue_comments_069204.json:
```json
{
    "body": "**Merged:** sage-4.4.alpha0",
    "created_at": "2010-04-15T23:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69204",
    "user": "https://github.com/jhpalmieri"
}
```

**Merged:** sage-4.4.alpha0



---

archive/issue_comments_069205.json:
```json
{
    "body": "<a id='comment:8'></a>\nMerged into 4.4.alpha0:\n- trac-8366-label-filled-contours.patch\n- trac-8366-fixed-docstrings.patch\n- trac-8366-fix-code.patch",
    "created_at": "2010-04-15T23:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8366#issuecomment-69205",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
Merged into 4.4.alpha0:
- trac-8366-label-filled-contours.patch
- trac-8366-fixed-docstrings.patch
- trac-8366-fix-code.patch
