# Issue 8654: add "sage -sqlite3" command line option

archive/issues_008654.json:
```json
{
    "body": "Just like \"sage -gap\", we should have \"sage -sqlite3\" to run the command line sqlite3 database included with Sage.\n\nApply [attachment:8654_test.patch] to the Sage **library** and [attachment:trac_8654.patch] to Sage **scripts**.\n\nAssignee: @jasongrout\n\nResolution: fixed\n\nAuthor: R. Andrew Ohana, Jeroen Demeyer\n\nReviewer: William Stein, Leif Leonhardy, John Palmieri\n\nMerged: sage-4.8.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/8654\n\n",
    "closed_at": "2011-11-03T08:51:31Z",
    "created_at": "2010-04-06T16:49:12Z",
    "labels": [
        "component: misc",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "add \"sage -sqlite3\" command line option",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8654",
    "user": "https://github.com/williamstein"
}
```
Just like "sage -gap", we should have "sage -sqlite3" to run the command line sqlite3 database included with Sage.

Apply [attachment:8654_test.patch] to the Sage **library** and [attachment:trac_8654.patch] to Sage **scripts**.

Assignee: @jasongrout

Resolution: fixed

Author: R. Andrew Ohana, Jeroen Demeyer

Reviewer: William Stein, Leif Leonhardy, John Palmieri

Merged: sage-4.8.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/8654





---

archive/issue_comments_078386.json:
```json
{
    "body": "<a id='comment:1'></a>#21 fixes this.",
    "created_at": "2010-11-12T11:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78386",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:1'></a>#21 fixes this.



---

archive/issue_comments_078387.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-09-13T01:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78387",
    "user": "https://github.com/ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_078388.json:
```json
{
    "body": "<a id='comment:2'></a>Attachment [trac_8654.patch](tarball://root/attachments/some-uuid/ticket8654/trac_8654.patch) by @ohanar created at 2011-09-13 01:51:15\n\nSince #21 probably needs to be rewritten from scratch by now.",
    "created_at": "2011-09-13T01:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78388",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:2'></a>Attachment [trac_8654.patch](tarball://root/attachments/some-uuid/ticket8654/trac_8654.patch) by @ohanar created at 2011-09-13 01:51:15

Since #21 probably needs to be rewritten from scratch by now.



---

archive/issue_comments_078389.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-09-28T04:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78389",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_078390.json:
```json
{
    "body": "<a id='comment:4'></a>Nice.  I'm glad you implemented this.  Works fine.",
    "created_at": "2011-09-28T04:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78390",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:4'></a>Nice.  I'm glad you implemented this.  Works fine.



---

archive/issue_comments_078391.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-10-04T08:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78391",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_078392.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-10-04T08:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78392",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_078393.json:
```json
{
    "body": "<a id='comment:7'></a>[attachment:8654_test.patch] needs review.",
    "created_at": "2011-10-04T08:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78393",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>[attachment:8654_test.patch] needs review.



---

archive/issue_comments_078394.json:
```json
{
    "body": "<a id='comment:9'></a>Ping.  Needs review.",
    "created_at": "2011-10-10T10:18:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78394",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>Ping.  Needs review.



---

archive/issue_comments_078395.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-10-29T21:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78395",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_078396.json:
```json
{
    "body": "<a id='comment:10'></a>Testing for the exact version number in `sage/tests/cmdline.py` is certainly suboptimal.\n\n\n`install_scripts()` (in `sage/misc/dist.py`) needs to be updated, too.\n\n\n---\n\nCould do some bikeshedding here:\n\n* The following\n\n```sh\n    some_program \"$@\"\n    exit $?\n```\n   should be just\n\n```sh\n    exec some_program \"$@\"\n```\n   (perhaps followed by `exit $?` if we want to go triple-safe).\n\n* The help messages should use the long option form (`--foo` rather than `-foo`). \n\n  Stating that `sage -foobar` runs Sage's version of `foobar` foreach foobar \\in {A,...,Z} is of questionable value.\n\n* Doing\n\n```sh\nif [ foo = bar -o foo = BAR ]; then\n    ...\nfi\n\nif [ foo = baz -o foo = BAZ ]; then\n    ...\nfi\n\nif [ foo = whatever ]; then\n    ...\nfi\n```\n   is very poor.  It should simply be\n\n```sh\ncase foo in\n    bar|BAR)\n        ...\n        ;;\n    baz|BAZ)\n        ...\n        ;;\n    ...\nesac\n```\n   which is faster, safer, easier to read and also less error-prone.\n\n\nOne could change *all* of these at once on a separate ticket, but it's IMHO dumb to always replicate the same bad code again.  So I'd change it at least in the new parts (and in general those one touches anyway or the ones near to them.)",
    "created_at": "2011-10-29T21:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78396",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>Testing for the exact version number in `sage/tests/cmdline.py` is certainly suboptimal.


`install_scripts()` (in `sage/misc/dist.py`) needs to be updated, too.


---

Could do some bikeshedding here:

* The following

```sh
    some_program "$@"
    exit $?
```
   should be just

```sh
    exec some_program "$@"
```
   (perhaps followed by `exit $?` if we want to go triple-safe).

* The help messages should use the long option form (`--foo` rather than `-foo`). 

  Stating that `sage -foobar` runs Sage's version of `foobar` foreach foobar \in {A,...,Z} is of questionable value.

* Doing

```sh
if [ foo = bar -o foo = BAR ]; then
    ...
fi

if [ foo = baz -o foo = BAZ ]; then
    ...
fi

if [ foo = whatever ]; then
    ...
fi
```
   is very poor.  It should simply be

```sh
case foo in
    bar|BAR)
        ...
        ;;
    baz|BAZ)
        ...
        ;;
    ...
esac
```
   which is faster, safer, easier to read and also less error-prone.


One could change *all* of these at once on a separate ticket, but it's IMHO dumb to always replicate the same bad code again.  So I'd change it at least in the new parts (and in general those one touches anyway or the ones near to them.)



---

archive/issue_comments_078397.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 leif]:\n> Could do some bikeshedding here: \n\n\n> ... \n\n\n> One could change *all* of these at once on a separate ticket, but it's IMHO dumb to always replicate the same bad code again.  So I'd change it at least in the new parts (and in general those one touches anyway or the ones near to them.)\n\n\nSee #21, although that patch will probably need to get rewritten with argparse now that optparse has been deprecated.",
    "created_at": "2011-10-30T00:46:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78397",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:11'></a>Replying to [comment:10 leif]:
> Could do some bikeshedding here: 


> ... 


> One could change *all* of these at once on a separate ticket, but it's IMHO dumb to always replicate the same bad code again.  So I'd change it at least in the new parts (and in general those one touches anyway or the ones near to them.)


See #21, although that patch will probably need to get rewritten with argparse now that optparse has been deprecated.



---

archive/issue_comments_078398.json:
```json
{
    "body": "Attachment [8654_test.patch](tarball://root/attachments/some-uuid/ticket8654/8654_test.patch) by @jdemeyer created at 2011-10-30 11:06:14\n\nAdd test for --sqlite3 command line option",
    "created_at": "2011-10-30T11:06:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78398",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [8654_test.patch](tarball://root/attachments/some-uuid/ticket8654/8654_test.patch) by @jdemeyer created at 2011-10-30 11:06:14

Add test for --sqlite3 command line option



---

archive/issue_comments_078399.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 leif]:\n> Testing for the exact version number in `sage/tests/cmdline.py` is certainly suboptimal.\n\nChanged.\n\n> `install_scripts()` (in `sage/misc/dist.py`) needs to be updated, too.\n\nDone.\n\n> One could change *all* of these at once on a separate ticket, but it's IMHO dumb to always replicate the same bad code again.  So I'd change it at least in the new parts (and in general those one touches anyway or the ones near to them.)\n\nWell, I agree that we should change all this in a separate ticket (I guess #21 is the place to be).  By copying the same so-called \"bad\" code we at least have consistency which is also a good thing.  If every command line option is implemented in a different way, that will make the code harder to understand.  Moreover, this ticket is not the correct place to discuss what the \"right\" code is.",
    "created_at": "2011-10-30T11:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78399",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:10 leif]:
> Testing for the exact version number in `sage/tests/cmdline.py` is certainly suboptimal.

Changed.

> `install_scripts()` (in `sage/misc/dist.py`) needs to be updated, too.

Done.

> One could change *all* of these at once on a separate ticket, but it's IMHO dumb to always replicate the same bad code again.  So I'd change it at least in the new parts (and in general those one touches anyway or the ones near to them.)

Well, I agree that we should change all this in a separate ticket (I guess #21 is the place to be).  By copying the same so-called "bad" code we at least have consistency which is also a good thing.  If every command line option is implemented in a different way, that will make the code harder to understand.  Moreover, this ticket is not the correct place to discuss what the "right" code is.



---

archive/issue_comments_078400.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-10-30T11:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78400",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_078401.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-11-02T01:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78401",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_078402.json:
```json
{
    "body": "<a id='comment:13'></a>Looks good to me.",
    "created_at": "2011-11-02T01:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78402",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>Looks good to me.



---

archive/issue_comments_078403.json:
```json
{
    "body": "<a id='comment:14'></a>Many thanks for the review, this has taken long enough.",
    "created_at": "2011-11-02T08:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78403",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Many thanks for the review, this has taken long enough.



---

archive/issue_comments_078404.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-11-03T08:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78404",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_020944.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T08:51:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8654#event-20944"
}
```



---

archive/issue_comments_078405.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8654#issuecomment-78405",
    "user": "https://github.com/jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_events_020945.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T20:35:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8654",
    "milestone": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8654#event-20945"
}
```
