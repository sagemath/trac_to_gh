# Issue 8288: Depth/Breadth improvement for SearchForest

archive/issues_008288.json:
```json
{
    "body": "The goal of this patch is to include breadth enumeration method for SearchForest, categorify SearchForest and make it very simple for inherit from it.\n\nAdd an example of Parent which inherit from SearchForest should be also fine.\n\nNote to the buildbot / release manager:\napply trac_8288_search_forest_depth_and_breath_improvement-nb.patch\n\nAssignee: sage-combinat\n\nCC:  sage-combinat @nthiery\n\nKeywords: enumeration depth breadth forest children\n\nResolution: fixed\n\nAuthor: Nicolas Borie\n\nReviewer: Florent Hivert, Minh Van Nguyen, Nicolas M. Thi\u00e9ry\n\nMerged: sage-4.7.alpha4\n\nIssue created by migration from https://trac.sagemath.org/ticket/8288\n\n",
    "closed_at": "2011-04-07T13:48:05Z",
    "created_at": "2010-02-16T22:17:26Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Depth/Breadth improvement for SearchForest",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8288",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```
The goal of this patch is to include breadth enumeration method for SearchForest, categorify SearchForest and make it very simple for inherit from it.

Add an example of Parent which inherit from SearchForest should be also fine.

Note to the buildbot / release manager:
apply trac_8288_search_forest_depth_and_breath_improvement-nb.patch

Assignee: sage-combinat

CC:  sage-combinat @nthiery

Keywords: enumeration depth breadth forest children

Resolution: fixed

Author: Nicolas Borie

Reviewer: Florent Hivert, Minh Van Nguyen, Nicolas M. Thi√©ry

Merged: sage-4.7.alpha4

Issue created by migration from https://trac.sagemath.org/ticket/8288





---

archive/issue_comments_075915.json:
```json
{
    "body": "<a id='comment:1'></a>One more time, my english is still bad... Feel free to point <my langage mistakes> and thus, make my english increasing....",
    "created_at": "2010-02-16T22:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75915",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:1'></a>One more time, my english is still bad... Feel free to point <my langage mistakes> and thus, make my english increasing....



---

archive/issue_comments_075916.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-02-16T22:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75916",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_075917.json:
```json
{
    "body": "<a id='comment:2'></a>Hello !! I know nothing about the file sage/combinat/backtrack.py, and I intend to read it as soon as possible but I saw on TRAC the same of this patch, and I was convinced it woukd be using the Graph library : in sage/graphs/base/c_graph.pyx are written iterators for depth/breadth-first-search in general graphs.. Wouldn't it be better for this class to use such functions, are they are written in Cython and should be more efficient ? Or directly use the Graph structure, as it would automatically call these functions.. :-)\n\nNathann",
    "created_at": "2010-02-17T07:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75917",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>Hello !! I know nothing about the file sage/combinat/backtrack.py, and I intend to read it as soon as possible but I saw on TRAC the same of this patch, and I was convinced it woukd be using the Graph library : in sage/graphs/base/c_graph.pyx are written iterators for depth/breadth-first-search in general graphs.. Wouldn't it be better for this class to use such functions, are they are written in Cython and should be more efficient ? Or directly use the Graph structure, as it would automatically call these functions.. :-)

Nathann



---

archive/issue_comments_075918.json:
```json
{
    "body": "<a id='comment:3'></a>Nathann, using the code the graphs code is not appropriate here as that would require the entire search tree to be created/known beforehand.",
    "created_at": "2010-02-17T07:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75918",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:3'></a>Nathann, using the code the graphs code is not appropriate here as that would require the entire search tree to be created/known beforehand.



---

archive/issue_comments_075919.json:
```json
{
    "body": "<a id='comment:4'></a>while it is not... Ok, I got it, then you can forget what I said :-)",
    "created_at": "2010-02-17T07:39:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75919",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>while it is not... Ok, I got it, then you can forget what I said :-)



---

archive/issue_comments_075920.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,8 @@\n \n Using extra argument : father and next_brother method, it is possible to enumerate not starting from the roots of trees. a _iter_from_to method build an iterator keeping nothing in memory than the first and the last point.\n \n+#8361 #6812  will follow after this ticket.\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/8288\n``````\n",
    "created_at": "2010-02-25T13:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75920",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,8 @@
 
 Using extra argument : father and next_brother method, it is possible to enumerate not starting from the roots of trees. a _iter_from_to method build an iterator keeping nothing in memory than the first and the last point.
 
+#8361 #6812  will follow after this ticket.
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/8288
``````




---

archive/issue_comments_075921.json:
```json
{
    "body": "<a id='comment:6'></a>As discussed with Nicolas on irc. the patch needs some cleanup.",
    "created_at": "2010-03-04T23:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75921",
    "user": "https://github.com/hivert"
}
```

<a id='comment:6'></a>As discussed with Nicolas on irc. the patch needs some cleanup.



---

archive/issue_comments_075922.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-03-04T23:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75922",
    "user": "https://github.com/hivert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_075923.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-03-05T00:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75923",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_075924.json:
```json
{
    "body": "<a id='comment:8'></a>Discussed on trac: there is an algorithmic problem:\nHere is my tests example:\n\n```\n    I = SearchForest([[3]], lambda l: (l+[i] for i in range(l[-1])))\n```\nDo you have an easy father function for this tree ?\nYes : `lambda l -> l[:-1]`\nIt simply generate strictly decreasing lists starting with 3.\nFor me a call to\n\n```\n    list(I.element_of_depth_iterator(2, \"Children\"))\n```\nraise a `StopIteration` ...\nWhereas:\n\n```\n    sage: list(I.element_of_depth_iterator(2))\n    [[3, 1, 0], [3, 2, 0], [3, 2, 1]]\n```",
    "created_at": "2010-03-05T10:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75924",
    "user": "https://github.com/hivert"
}
```

<a id='comment:8'></a>Discussed on trac: there is an algorithmic problem:
Here is my tests example:

```
    I = SearchForest([[3]], lambda l: (l+[i] for i in range(l[-1])))
```
Do you have an easy father function for this tree ?
Yes : `lambda l -> l[:-1]`
It simply generate strictly decreasing lists starting with 3.
For me a call to

```
    list(I.element_of_depth_iterator(2, "Children"))
```
raise a `StopIteration` ...
Whereas:

```
    sage: list(I.element_of_depth_iterator(2))
    [[3, 1, 0], [3, 2, 0], [3, 2, 1]]
```



---

archive/issue_comments_075925.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-03-05T10:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75925",
    "user": "https://github.com/hivert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_075926.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-03-05T17:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75926",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_075927.json:
```json
{
    "body": "Attachment [search_forest_depth_and_breath_improvement-nb.patch](tarball://root/attachments/some-uuid/ticket8288/search_forest_depth_and_breath_improvement-nb.patch) by nborie created at 2010-03-05 17:23:14\n\nOne more time, my english is still bad... Feel free to point them and thus, make my english increasing....",
    "created_at": "2010-03-05T17:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75927",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Attachment [search_forest_depth_and_breath_improvement-nb.patch](tarball://root/attachments/some-uuid/ticket8288/search_forest_depth_and_breath_improvement-nb.patch) by nborie created at 2010-03-05 17:23:14

One more time, my english is still bad... Feel free to point them and thus, make my english increasing....



---

archive/issue_comments_075928.json:
```json
{
    "body": "Attachment [trac_8288-reviewer.patch](tarball://root/attachments/some-uuid/ticket8288/trac_8288-reviewer.patch) by mvngu created at 2010-04-19 02:52:24",
    "created_at": "2010-04-19T02:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75928",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Attachment [trac_8288-reviewer.patch](tarball://root/attachments/some-uuid/ticket8288/trac_8288-reviewer.patch) by mvngu created at 2010-04-19 02:52:24



---

archive/issue_comments_075929.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-04-19T02:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75929",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_075930.json:
```json
{
    "body": "<a id='comment:10'></a>Don't use the keyword \"method\" to specify the algorithm to be used. Instead use \"algorithm\". See #6094 and #7971 for two attempts to get rid of using \"method\" for specifying the algorithm to be used. My reviewer patch makes this change to your implementation.\n\n\n\nFor any argument that can take more than one value, provide all the possible values. For example, if possible, list all the possible values for the argument \"algorithm\".\n\n\n\nThere is a slight bug in the method `search_forest_iterator()`. If `method=\"depth\"`, then we would use depth-first search. But to get `search_forest_iterator()` to use breadth-first search, we could assign any value to the keyword `method`:\n\n```\nsage: from sage.combinat.backtrack import search_forest_iterator\nsage: list(search_forest_iterator([[]], lambda l: [l+[0], l+[1]] if len(l) < 3 else [], method=\"breadth\"))\n[[], [0], [1], [0, 0], [0, 1], [1, 0], [1, 1], [0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0], [1, 0, 1], [1, 1, 0], [1, 1, 1]]\nsage: list(search_forest_iterator([[]], lambda l: [l+[0], l+[1]] if len(l) < 3 else [], method=None))\n[[], [0], [1], [0, 0], [0, 1], [1, 0], [1, 1], [0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0], [1, 0, 1], [1, 1, 0], [1, 1, 1]]\nsage: list(search_forest_iterator([[]], lambda l: [l+[0], l+[1]] if len(l) < 3 else [], method=\"some sanity\"))\n[[], [0], [1], [0, 0], [0, 1], [1, 0], [1, 1], [0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0], [1, 0, 1], [1, 1, 0], [1, 1, 1]]\n```\n\nTo remedy this bug, we could explicitly test for \"breadth\" and \"depth\" and set the value `position` accordingly. For any other value assigned to `algorithm`, we raise an exception. The reviewer patch implements this fix.\n\n\n\nThere is a slight bug in the method `element_of_depth_iterator()`. From your example given for that method, we can do this:\n\n```\nsage: father = lambda t: (t[0]-1,0) if t[1] == 0 else (t[0],t[1]-1)\nsage: I = SearchForest([(0,0)], lambda l: [(l[0]+1, l[1]), (l[0], 1)] if l[1] == 0 else [(l[0], l[1]+1)], father=father)\nsage: list(I.element_of_depth_iterator(10, method=\"father\"))\n[(10, 0), (9, 1), (8, 2), (7, 3), (6, 4), (5, 5), (4, 6), (3, 7), (2, 8), (1, 9), (0, 10)]\n```\n\nBut then, we could assign the keyword `method` with any value and get the same result as above:\n\n```\nsage: father = lambda t: (t[0]-1,0) if t[1] == 0 else (t[0],t[1]-1)\nsage: I = SearchForest([(0,0)], lambda l: [(l[0]+1, l[1]), (l[0], 1)] if l[1] == 0 else [(l[0], l[1]+1)], father=father)\nsage: list(I.element_of_depth_iterator(10, method=\"mother\"))\n[(10, 0), (9, 1), (8, 2), (7, 3), (6, 4), (5, 5), (4, 6), (3, 7), (2, 8), (1, 9), (0, 10)]\nsage: list(I.element_of_depth_iterator(10, method=\"grandma\"))\n[(10, 0), (9, 1), (8, 2), (7, 3), (6, 4), (5, 5), (4, 6), (3, 7), (2, 8), (1, 9), (0, 10)]\nsage: list(I.element_of_depth_iterator(10, method=\"abc\"))\n[(10, 0), (9, 1), (8, 2), (7, 3), (6, 4), (5, 5), (4, 6), (3, 7), (2, 8), (1, 9), (0, 10)]\n```\n\nOne way to fix this is to make `full_generation` into a boolean keyword. If `full_generation=True`, the search starts from the root and generate all elements until the given depth is reached. If `full_generation=False`, the search algorithm makes use of the `father` and `next_brother` methods. My reviewer patch makes this change.\n\n\n\n\nOther general remarks:\n\n* Whenever possible, avoid going over 79 characters per line.\n* When testing for `None`, don't use \"!=\". Instead use \"is not\", which is much faster than \"!=\". The same remark applies when testing for equality of an object with `None`.\n* For the method `first_element_of_depth()`, I don't understand what is the purpose of the keyword \"father_with_depth\". You need to document that keyword.\n* Some stylistic clean-ups in accordance with [PEP 8](http://www.python.org/dev/peps/pep-0008/).\n\nI have provided a reviewer patch that implements some changes on top of nborie's patch. Someone needs to review the technical aspect of the features implemented by nborie's patch.",
    "created_at": "2010-04-19T02:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75930",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:10'></a>Don't use the keyword "method" to specify the algorithm to be used. Instead use "algorithm". See #6094 and #7971 for two attempts to get rid of using "method" for specifying the algorithm to be used. My reviewer patch makes this change to your implementation.



For any argument that can take more than one value, provide all the possible values. For example, if possible, list all the possible values for the argument "algorithm".



There is a slight bug in the method `search_forest_iterator()`. If `method="depth"`, then we would use depth-first search. But to get `search_forest_iterator()` to use breadth-first search, we could assign any value to the keyword `method`:

```
sage: from sage.combinat.backtrack import search_forest_iterator
sage: list(search_forest_iterator([[]], lambda l: [l+[0], l+[1]] if len(l) < 3 else [], method="breadth"))
[[], [0], [1], [0, 0], [0, 1], [1, 0], [1, 1], [0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0], [1, 0, 1], [1, 1, 0], [1, 1, 1]]
sage: list(search_forest_iterator([[]], lambda l: [l+[0], l+[1]] if len(l) < 3 else [], method=None))
[[], [0], [1], [0, 0], [0, 1], [1, 0], [1, 1], [0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0], [1, 0, 1], [1, 1, 0], [1, 1, 1]]
sage: list(search_forest_iterator([[]], lambda l: [l+[0], l+[1]] if len(l) < 3 else [], method="some sanity"))
[[], [0], [1], [0, 0], [0, 1], [1, 0], [1, 1], [0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0], [1, 0, 1], [1, 1, 0], [1, 1, 1]]
```

To remedy this bug, we could explicitly test for "breadth" and "depth" and set the value `position` accordingly. For any other value assigned to `algorithm`, we raise an exception. The reviewer patch implements this fix.



There is a slight bug in the method `element_of_depth_iterator()`. From your example given for that method, we can do this:

```
sage: father = lambda t: (t[0]-1,0) if t[1] == 0 else (t[0],t[1]-1)
sage: I = SearchForest([(0,0)], lambda l: [(l[0]+1, l[1]), (l[0], 1)] if l[1] == 0 else [(l[0], l[1]+1)], father=father)
sage: list(I.element_of_depth_iterator(10, method="father"))
[(10, 0), (9, 1), (8, 2), (7, 3), (6, 4), (5, 5), (4, 6), (3, 7), (2, 8), (1, 9), (0, 10)]
```

But then, we could assign the keyword `method` with any value and get the same result as above:

```
sage: father = lambda t: (t[0]-1,0) if t[1] == 0 else (t[0],t[1]-1)
sage: I = SearchForest([(0,0)], lambda l: [(l[0]+1, l[1]), (l[0], 1)] if l[1] == 0 else [(l[0], l[1]+1)], father=father)
sage: list(I.element_of_depth_iterator(10, method="mother"))
[(10, 0), (9, 1), (8, 2), (7, 3), (6, 4), (5, 5), (4, 6), (3, 7), (2, 8), (1, 9), (0, 10)]
sage: list(I.element_of_depth_iterator(10, method="grandma"))
[(10, 0), (9, 1), (8, 2), (7, 3), (6, 4), (5, 5), (4, 6), (3, 7), (2, 8), (1, 9), (0, 10)]
sage: list(I.element_of_depth_iterator(10, method="abc"))
[(10, 0), (9, 1), (8, 2), (7, 3), (6, 4), (5, 5), (4, 6), (3, 7), (2, 8), (1, 9), (0, 10)]
```

One way to fix this is to make `full_generation` into a boolean keyword. If `full_generation=True`, the search starts from the root and generate all elements until the given depth is reached. If `full_generation=False`, the search algorithm makes use of the `father` and `next_brother` methods. My reviewer patch makes this change.




Other general remarks:

* Whenever possible, avoid going over 79 characters per line.
* When testing for `None`, don't use "!=". Instead use "is not", which is much faster than "!=". The same remark applies when testing for equality of an object with `None`.
* For the method `first_element_of_depth()`, I don't understand what is the purpose of the keyword "father_with_depth". You need to document that keyword.
* Some stylistic clean-ups in accordance with [PEP 8](http://www.python.org/dev/peps/pep-0008/).

I have provided a reviewer patch that implements some changes on top of nborie's patch. Someone needs to review the technical aspect of the features implemented by nborie's patch.



---

archive/issue_comments_075931.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,17 @@\n+The goal of this patch is to include breadth enumeration method for SearchForest...\n \n+The interested is for enumerated Set defined by a set of roots and a children function. For a finite set of roots but infinite set (infinite depth of the tree), the breadth method is a necessity.\n+\n+The breadth method is also a need to define properly indices of infinite Graded algebra (but finite degree by degree). The patch contains method returning iterator of all element of given depth.\n+\n+Using extra argument : father and next_brother method, it is possible to enumerate not starting from the roots of trees. a _iter_from_to method build an iterator keeping nothing in memory than the first and the last point.\n+\n+#8361 #6812  will follow after this ticket.\n+\n+Apply patches in this order:\n+\n+1. [search_forest_depth_and_breath_improvement-nb.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/8288/search_forest_depth_and_breath_improvement-nb.patch)\n+2. [trac_8288-reviewer.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/8288/trac_8288-reviewer.patch)\n \n Comment: 1\n \n``````\n",
    "created_at": "2010-04-19T02:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75931",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,17 @@
+The goal of this patch is to include breadth enumeration method for SearchForest...
 
+The interested is for enumerated Set defined by a set of roots and a children function. For a finite set of roots but infinite set (infinite depth of the tree), the breadth method is a necessity.
+
+The breadth method is also a need to define properly indices of infinite Graded algebra (but finite degree by degree). The patch contains method returning iterator of all element of given depth.
+
+Using extra argument : father and next_brother method, it is possible to enumerate not starting from the roots of trees. a _iter_from_to method build an iterator keeping nothing in memory than the first and the last point.
+
+#8361 #6812  will follow after this ticket.
+
+Apply patches in this order:
+
+1. [search_forest_depth_and_breath_improvement-nb.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/8288/search_forest_depth_and_breath_improvement-nb.patch)
+2. [trac_8288-reviewer.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/8288/trac_8288-reviewer.patch)
 
 Comment: 1
 
``````




---

archive/issue_comments_075932.json:
```json
{
    "body": "<a id='comment:11'></a>Hi Nicolas,\n\nI'm currently using search forest and I run into some troubles... I also want\nto suggest some improvements in the code:\n\n- please define method `_repr_` (Sage way) rather than `__repr__`\n  (Python's way).\n\n- when you need to link a class in the same file you don't have to give the\n  full path for exampe `:class:`SearchForest`` is sufficient compared to\n  `:class:`~sage.combinat.backtrack.SearchForest``\n\n- please make sure and **document** that a common intended use of\n  `SearchForest` is to inherit from it, calling only\n  `Parent.__init__` and overload the methods \n  `roots, children, post_process` rather than passing them to the constructors. \n  Please make sure to specify their result type (iterable vs. iterator).\n  By the way, should'nt those methods be private methods (eg: `_roots`\n  vs. `roots`. I don't expect the user to call them in my use-case.\n\nThanks for all this ! I'm using it...\n\nFlorent",
    "created_at": "2010-06-02T14:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75932",
    "user": "https://github.com/hivert"
}
```

<a id='comment:11'></a>Hi Nicolas,

I'm currently using search forest and I run into some troubles... I also want
to suggest some improvements in the code:

- please define method `_repr_` (Sage way) rather than `__repr__`
  (Python's way).

- when you need to link a class in the same file you don't have to give the
  full path for exampe `:class:`SearchForest`` is sufficient compared to
  `:class:`~sage.combinat.backtrack.SearchForest``

- please make sure and **document** that a common intended use of
  `SearchForest` is to inherit from it, calling only
  `Parent.__init__` and overload the methods 
  `roots, children, post_process` rather than passing them to the constructors. 
  Please make sure to specify their result type (iterable vs. iterator).
  By the way, should'nt those methods be private methods (eg: `_roots`
  vs. `roots`. I don't expect the user to call them in my use-case.

Thanks for all this ! I'm using it...

Florent



---

archive/issue_comments_075933.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+The goal of this patch is to include breadth enumeration method for SearchForest, categorify SearchForest and make it very simple for inherit from it.\n \n+Add an example of Parent which inherit from SearchForest should be also fine.\n+\n+#8361 #6812  will follow after this ticket.\n \n Comment: 1\n \n``````\n",
    "created_at": "2010-06-02T15:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75933",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+The goal of this patch is to include breadth enumeration method for SearchForest, categorify SearchForest and make it very simple for inherit from it.
 
+Add an example of Parent which inherit from SearchForest should be also fine.
+
+#8361 #6812  will follow after this ticket.
 
 Comment: 1
 
``````




---

archive/issue_comments_075934.json:
```json
{
    "body": "<a id='comment:12'></a>I upload a patch for this ticket to be discussed on http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/fbedf039a549c68b\n\nThanks for your comments Florent.\n\nNicolas.",
    "created_at": "2010-06-02T15:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75934",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:12'></a>I upload a patch for this ticket to be discussed on http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/fbedf039a549c68b

Thanks for your comments Florent.

Nicolas.



---

archive/issue_comments_075935.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-06-04T14:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75935",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_075936.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 nborie]:\n\nSome more remarks: please check your sphinx markup:\n\n- ``...`` is for mathematic ie is set up by TeX\n- ```...``` is for Sage/Python code. There are some ``__init__`` which doesn't compile.",
    "created_at": "2010-06-07T16:43:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75936",
    "user": "https://github.com/hivert"
}
```

<a id='comment:14'></a>Replying to [comment:13 nborie]:

Some more remarks: please check your sphinx markup:

- ``...`` is for mathematic ie is set up by TeX
- ```...``` is for Sage/Python code. There are some ``__init__`` which doesn't compile.



---

archive/issue_comments_075937.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-06-07T16:43:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75937",
    "user": "https://github.com/hivert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_075938.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-07-13T16:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75938",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_075939.json:
```json
{
    "body": "<a id='comment:15'></a>the last trac_8288_search_forest_depth_and_breath_improvement-nb.patch is ready from my side...",
    "created_at": "2010-07-13T16:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75939",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:15'></a>the last trac_8288_search_forest_depth_and_breath_improvement-nb.patch is ready from my side...



---

archive/issue_comments_075940.json:
```json
{
    "body": "<a id='comment:16'></a>rebased for 4.5.1",
    "created_at": "2010-08-01T23:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75940",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:16'></a>rebased for 4.5.1



---

archive/issue_comments_075941.json:
```json
{
    "body": "<a id='comment:17'></a>I put a patch up with some minor changes on the patch server.  Do you want to fold them into your patch.\n\nFlorent, what is the status of this ticket?",
    "created_at": "2010-11-26T02:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75941",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:17'></a>I put a patch up with some minor changes on the patch server.  Do you want to fold them into your patch.

Florent, what is the status of this ticket?



---

archive/issue_comments_075942.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+The goal of this patch is to include breadth enumeration method for SearchForest, categorify SearchForest and make it very simple for inherit from it.\n \n+Add an example of Parent which inherit from SearchForest should be also fine.\n+\n+#6812  will follow after this ticket.\n \n Comment: 1\n \n``````\n",
    "created_at": "2010-11-26T10:59:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75942",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+The goal of this patch is to include breadth enumeration method for SearchForest, categorify SearchForest and make it very simple for inherit from it.
 
+Add an example of Parent which inherit from SearchForest should be also fine.
+
+#6812  will follow after this ticket.
 
 Comment: 1
 
``````




---

archive/issue_comments_075943.json:
```json
{
    "body": "<a id='comment:18'></a>Thanks Mike for yours changes.\n\nI folded your patch in mine and uploaded it to the trac. I also just checked (one more time) it apply well on 4.6, that all the tests pass and the doc seems fine to me (accordingly I am a bad English language reviewer).\n\nIt will be fine to finalize this work... (Was this point in your TODO list Nicolas ?)",
    "created_at": "2010-11-26T10:59:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75943",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:18'></a>Thanks Mike for yours changes.

I folded your patch in mine and uploaded it to the trac. I also just checked (one more time) it apply well on 4.6, that all the tests pass and the doc seems fine to me (accordingly I am a bad English language reviewer).

It will be fine to finalize this work... (Was this point in your TODO list Nicolas ?)



---

archive/issue_comments_075944.json:
```json
{
    "body": "<a id='comment:19'></a>Yes: we should just take 1/2 hour shortly to finalize this together.",
    "created_at": "2010-11-29T13:04:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75944",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:19'></a>Yes: we should just take 1/2 hour shortly to finalize this together.



---

archive/issue_comments_075945.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n+The goal of this patch is to include breadth enumeration method for SearchForest, categorify SearchForest and make it very simple for inherit from it.\n \n+Add an example of Parent which inherit from SearchForest should be also fine.\n+\n+Note to the buildbot / release manager:\n+apply trac_8288_search_forest_depth_and_breath_improvement-nb.patch\n \n Comment: 1\n \n``````\n",
    "created_at": "2011-01-17T15:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75945",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,9 @@
+The goal of this patch is to include breadth enumeration method for SearchForest, categorify SearchForest and make it very simple for inherit from it.
 
+Add an example of Parent which inherit from SearchForest should be also fine.
+
+Note to the buildbot / release manager:
+apply trac_8288_search_forest_depth_and_breath_improvement-nb.patch
 
 Comment: 1
 
``````




---

archive/issue_comments_075946.json:
```json
{
    "body": "<a id='comment:21'></a>Sorry for this post but with some hope that the buildbot take in care :\n\napply trac_8288_search_forest_depth_and_breath_improvement-nb.patch",
    "created_at": "2011-01-19T11:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75946",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:21'></a>Sorry for this post but with some hope that the buildbot take in care :

apply trac_8288_search_forest_depth_and_breath_improvement-nb.patch



---

archive/issue_comments_075947.json:
```json
{
    "body": "<a id='comment:22'></a>Hi Nicolas,\n\nI just made a couple minor improvements to the documentation on the sage-combinat patch server (directly in your patch). Please have a quick look, upload the new version to trac, and set a positive review on my behalf if you agree with my changes.\n\nCheers,\n                Nicolas",
    "created_at": "2011-03-24T11:07:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75947",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:22'></a>Hi Nicolas,

I just made a couple minor improvements to the documentation on the sage-combinat patch server (directly in your patch). Please have a quick look, upload the new version to trac, and set a positive review on my behalf if you agree with my changes.

Cheers,
                Nicolas



---

archive/issue_comments_075948.json:
```json
{
    "body": "Attachment [trac_8288_search_forest_depth_and_breath_improvement-nb.patch](tarball://root/attachments/some-uuid/ticket8288/trac_8288_search_forest_depth_and_breath_improvement-nb.patch) by nborie created at 2011-03-24 16:41:17",
    "created_at": "2011-03-24T16:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75948",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Attachment [trac_8288_search_forest_depth_and_breath_improvement-nb.patch](tarball://root/attachments/some-uuid/ticket8288/trac_8288_search_forest_depth_and_breath_improvement-nb.patch) by nborie created at 2011-03-24 16:41:17



---

archive/issue_comments_075949.json:
```json
{
    "body": "<a id='comment:23'></a>It is ok with your changes. Let it go in!",
    "created_at": "2011-03-24T17:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75949",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:23'></a>It is ok with your changes. Let it go in!



---

archive/issue_comments_075950.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-24T17:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75950",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_075951.json:
```json
{
    "body": "<a id='comment:24'></a>Oh my GOD `O_O`\n\nThis ticket is reviewed !! `O_O`\n\nWell done `:-)`\n\nNathann",
    "created_at": "2011-03-24T17:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75951",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>Oh my GOD `O_O`

This ticket is reviewed !! `O_O`

Well done `:-)`

Nathann



---

archive/issue_comments_075952.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-04-07T13:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8288#issuecomment-75952",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_019838.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-07T13:48:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8288",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8288#event-19838"
}
```
