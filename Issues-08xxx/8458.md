# Issue 8458: iterator for graphs() doesn't return independent graphs

archive/issues_008458.json:
```json
{
    "body": "From [sage-support](http://groups.google.com/group/sage-support/browse_thread/thread/4f822bba45432f7b):\n\n```\nSo, what you are saying is that the iterator for graphs() does not\nreturn independent graphs which can be changed without affecting the\nothers.\nThat does explain what I am seeing and is consistent with Pat\nLeSmith's suggested workaround.\n\nShould this property of the iterators to the generated graphs be\ndocumented?\n\nSo, I think I will try making a copy of just the graphs I want to\nchange or use the list() trick. \n```\n\nApply:\n    [attachment:trac_8458.patch]\n\n\n**Assignee:** @rlmill\n\n**CC:**  brunellus\n\n**Author:** Luk\u00e1\u0161 L\u00e1nsk\u00fd\n\n**Reviewer:** Nathann Cohen\n\n**Merged:** sage-5.0.beta3\n\nIssue created by migration from https://trac.sagemath.org/ticket/8458\n\n",
    "closed_at": "2012-02-06T21:22:29Z",
    "created_at": "2010-03-06T19:18:00Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "iterator for graphs() doesn't return independent graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8458",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```
From [sage-support](http://groups.google.com/group/sage-support/browse_thread/thread/4f822bba45432f7b):

```
So, what you are saying is that the iterator for graphs() does not
return independent graphs which can be changed without affecting the
others.
That does explain what I am seeing and is consistent with Pat
LeSmith's suggested workaround.

Should this property of the iterators to the generated graphs be
documented?

So, I think I will try making a copy of just the graphs I want to
change or use the list() trick. 
```

Apply:
    [attachment:trac_8458.patch]


**Assignee:** @rlmill

**CC:**  brunellus

**Author:** Lukáš Lánský

**Reviewer:** Nathann Cohen

**Merged:** sage-5.0.beta3

Issue created by migration from https://trac.sagemath.org/ticket/8458





---

archive/issue_comments_068920.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis is an unintended consequence of the fact that when the `graphs(n)` iterator yields a graph, it does not first make a copy. The method of generating graphs is to add on to previously generated graphs in a well-chosen way, and I did not think to make a copy of the graph before having the iterator yield it.\n\nThis shouldn't just be documented, but in fact I think this should be an option to `graphs(n)`. If someone will not modify the graphs in the loop, they can get the speed advantage of not making copies, and someone else who wants to modify them can have the iterator make copies on the fly.",
    "created_at": "2010-03-06T19:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68920",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:1'></a>
This is an unintended consequence of the fact that when the `graphs(n)` iterator yields a graph, it does not first make a copy. The method of generating graphs is to add on to previously generated graphs in a well-chosen way, and I did not think to make a copy of the graph before having the iterator yield it.

This shouldn't just be documented, but in fact I think this should be an option to `graphs(n)`. If someone will not modify the graphs in the loop, they can get the speed advantage of not making copies, and someone else who wants to modify them can have the iterator make copies on the fly.



---

archive/issue_comments_068921.json:
```json
{
    "body": "<a id='comment:2'></a>\nI agree with rlm.  I think the default should be to return a copy of the graph, with an optional argument to return the actual graph.",
    "created_at": "2010-03-09T03:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68921",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'></a>
I agree with rlm.  I think the default should be to return a copy of the graph, with an optional argument to return the actual graph.



---

archive/issue_events_059823.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/brunellus",
    "created_at": "2012-01-03T23:10:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59823"
}
```



---

archive/attachments_010541.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8458_independent_graphs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8458/trac_8458_independent_graphs.patch",
    "created_at": "2012-01-03T23:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```



---

archive/issue_comments_068922.json:
```json
{
    "body": "<a id='comment:4'></a>\nI corrected the main generator. There are several specialized (e.g. tree generator) but I don't think the same problem arises in any of them. Do you agree?",
    "created_at": "2012-01-03T23:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68922",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:4'></a>
I corrected the main generator. There are several specialized (e.g. tree generator) but I don't think the same problem arises in any of them. Do you agree?



---

archive/issue_events_059824.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-29T18:15:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59824"
}
```



---

archive/issue_events_059825.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-29T18:15:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59825"
}
```



---

archive/issue_comments_068923.json:
```json
{
    "body": "<a id='comment:5'></a>\nHelloooooo !!!\n\nThis is a good patch, but I do not think the documentation is very clear. What would you think of changing the new argument's name to \"return_copies\" or \"graph_copy\" ? To be honest I took me 2 minutes to understand that this message's title did not mean \"The independent graph is not returned by graphs(n)\" `:-p`\n\nEither way, with a name like \"independent\" it is not very clear that there may be performances issues hidden in this argument.\n\nHere's what I would write. Of course, it's just my advice, so take or leave whatever you want :\n\n```\n- ``copy_graphs`` (boolean) -- If set to ``True`` (default) this method makes copies of the graphs before returning them. If set to ``False`` the method returns the graph it is working on. The second alternative is faster, but modifying any of the graph instances returned by the method may break the function's behaviour, as it is using these graphs to compute the next ones : only use ``copy_graph = False`` when you stick to *reading* the graphs returned.\n```\n\nPlease tell me what you think `:-)`\n\nNathann",
    "created_at": "2012-01-29T18:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68923",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Helloooooo !!!

This is a good patch, but I do not think the documentation is very clear. What would you think of changing the new argument's name to "return_copies" or "graph_copy" ? To be honest I took me 2 minutes to understand that this message's title did not mean "The independent graph is not returned by graphs(n)" `:-p`

Either way, with a name like "independent" it is not very clear that there may be performances issues hidden in this argument.

Here's what I would write. Of course, it's just my advice, so take or leave whatever you want :

```
- ``copy_graphs`` (boolean) -- If set to ``True`` (default) this method makes copies of the graphs before returning them. If set to ``False`` the method returns the graph it is working on. The second alternative is faster, but modifying any of the graph instances returned by the method may break the function's behaviour, as it is using these graphs to compute the next ones : only use ``copy_graph = False`` when you stick to *reading* the graphs returned.
```

Please tell me what you think `:-)`

Nathann



---

archive/issue_comments_068924.json:
```json
{
    "body": "<a id='comment:6'></a>\nArg.... It's all written on one line. Stupid me. Here it is :\n\n```\n- ``copy_graphs`` (boolean) -- If set to ``True`` (default)\n   this method makes copies of the graphs before returning \n   them. If set to ``False`` the method returns the graph it\n   is working on. The second alternative is faster, but modifying\n   any of the graph instances returned by the method may break\n   the function's behaviour, as it is using these graphs to \n   compute the next ones : only use ``copy_graph = False`` when\n   you stick to *reading* the graphs returned.\n```",
    "created_at": "2012-01-29T18:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68924",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
Arg.... It's all written on one line. Stupid me. Here it is :

```
- ``copy_graphs`` (boolean) -- If set to ``True`` (default)
   this method makes copies of the graphs before returning 
   them. If set to ``False`` the method returns the graph it
   is working on. The second alternative is faster, but modifying
   any of the graph instances returned by the method may break
   the function's behaviour, as it is using these graphs to 
   compute the next ones : only use ``copy_graph = False`` when
   you stick to *reading* the graphs returned.
```



---

archive/issue_comments_068925.json:
```json
{
    "body": "<a id='comment:7'></a>\nCan I suggest `copy=True`, which is shorter and just as clear in the context?",
    "created_at": "2012-01-30T12:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68925",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
Can I suggest `copy=True`, which is shorter and just as clear in the context?



---

archive/issue_comments_068926.json:
```json
{
    "body": "<a id='comment:8'></a>\n> Can I suggest `copy=True`, which is shorter and just as clear in the context?\n\n\n`>_<`\n\nOf course... Much more natural `:-D`\n\nThanks !!\n\nNathann",
    "created_at": "2012-01-30T12:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68926",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
> Can I suggest `copy=True`, which is shorter and just as clear in the context?


`>_<`

Of course... Much more natural `:-D`

Thanks !!

Nathann



---

archive/attachments_010542.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8458_independent_graphs.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8458/trac_8458_independent_graphs.2.patch",
    "created_at": "2012-01-31T12:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```



---

archive/issue_comments_068927.json:
```json
{
    "body": "<a id='comment:9'></a>\nIf you think that \"copy\" is better, I don't mind. I thought that a consumer of the library doesn't care about what is the way we create the graphs (that we copy them), so the relevant property of the output is rather independence. The proposed description is also good.",
    "created_at": "2012-01-31T12:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68927",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:9'></a>
If you think that "copy" is better, I don't mind. I thought that a consumer of the library doesn't care about what is the way we create the graphs (that we copy them), so the relevant property of the output is rather independence. The proposed description is also good.



---

archive/issue_events_059826.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/brunellus",
    "created_at": "2012-01-31T12:34:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59826"
}
```



---

archive/issue_events_059827.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/brunellus",
    "created_at": "2012-01-31T12:34:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59827"
}
```



---

archive/issue_comments_068928.json:
```json
{
    "body": "<a id='comment:10'></a>\nHellooooooo !!!\n\nWell, with a keyword like \"independent\" the user needs to read the documentation to understand what it precisely means. And with \"copy\" he also knows that there is some complexity question hidden in there `:-)`",
    "created_at": "2012-01-31T14:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68928",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
Hellooooooo !!!

Well, with a keyword like "independent" the user needs to read the documentation to understand what it precisely means. And with "copy" he also knows that there is some complexity question hidden in there `:-)`



---

archive/issue_comments_068929.json:
```json
{
    "body": "<a id='comment:11'></a>\n(for me the patch is ok, but it does not apply on 5.0-beta1. I just reinstalled it, so it seems genuine `:-)`)\n\nNathann",
    "created_at": "2012-01-31T17:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68929",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>
(for me the patch is ok, but it does not apply on 5.0-beta1. I just reinstalled it, so it seems genuine `:-)`)

Nathann



---

archive/issue_events_059828.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-31T17:41:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59828"
}
```



---

archive/issue_events_059829.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-31T17:41:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59829"
}
```



---

archive/issue_events_059830.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-31T17:44:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59830"
}
```



---

archive/issue_events_059831.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-31T17:44:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59831"
}
```



---

archive/issue_comments_068930.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,3 +13,7 @@\n So, I think I will try making a copy of just the graphs I want to\n change or use the list() trick. \n ```\n+\n+Apply:\n+    [attachment:trac_8458.patch]\n+\n``````\n",
    "created_at": "2012-01-31T17:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68930",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,3 +13,7 @@
 So, I think I will try making a copy of just the graphs I want to
 change or use the list() trick. 
 ```
+
+Apply:
+    [attachment:trac_8458.patch]
+
``````




---

archive/issue_comments_068931.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2012-01-31T17:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68931",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_comments_068932.json:
```json
{
    "body": "<a id='comment:12'></a>\nWell, I do not like to set tickets back to \"needs work\" in such cases... Here is the same patch rebased on beta1. If it's fine with you too, you can set the ticket to positive_review `:-)`\n\nNathann",
    "created_at": "2012-01-31T17:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68932",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
Well, I do not like to set tickets back to "needs work" in such cases... Here is the same patch rebased on beta1. If it's fine with you too, you can set the ticket to positive_review `:-)`

Nathann



---

archive/attachments_010543.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8458.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8458/trac_8458.patch",
    "created_at": "2012-01-31T17:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nathanncohen"
}
```



---

archive/issue_comments_068933.json:
```json
{
    "body": "",
    "created_at": "2012-01-31T17:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68933",
    "user": "https://github.com/nathanncohen"
}
```





---

archive/issue_events_059832.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/brunellus",
    "created_at": "2012-02-03T13:18:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59832"
}
```



---

archive/issue_events_059833.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/brunellus",
    "created_at": "2012-02-03T13:18:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59833"
}
```



---

archive/issue_comments_068934.json:
```json
{
    "body": "<a id='comment:13'></a>\nThank you. :-)",
    "created_at": "2012-02-03T13:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68934",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:13'></a>
Thank you. :-)



---

archive/issue_comments_068935.json:
```json
{
    "body": "**Author:** Luk\u00e1\u0161 L\u00e1nsk\u00fd",
    "created_at": "2012-02-06T15:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68935",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Lukáš Lánský



---

archive/issue_comments_068936.json:
```json
{
    "body": "<a id='comment:14'></a>\nLuk\u00e1\u0161: in the future try to remember to add yourself as Author.",
    "created_at": "2012-02-06T15:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68936",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Lukáš: in the future try to remember to add yourself as Author.



---

archive/issue_events_059834.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-06T21:22:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59834"
}
```



---

archive/issue_events_059835.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-06T21:22:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8458#event-59835"
}
```



---

archive/issue_comments_068937.json:
```json
{
    "body": "**Merged:** sage-5.0.beta3",
    "created_at": "2012-02-06T21:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8458#issuecomment-68937",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta3
