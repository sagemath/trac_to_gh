# Issue 8807: Adding support for morphisms to the category framework

archive/issues_008807.json:
```json
{
    "assignees": [],
    "body": "Working on the doc tests for sage.category at #8800, I found that support for morphisms is missing in the category framework. I think this is important, and therefore I am opening this ticket.\n\nSome thoughts on implementing support.\n\nLet f be a morphism in a category C, and let F be a functor, F.domain()==C. Then F(f) should by default try F(f.domain()).hom(f,F(f.codomain())). This relies on the call method of F(f.domain()).Hom(F.codomain()), which in turn uses _coerce_impl. I think it is there where the support should be implemented.\n\nExample:\n\nIn sage.rings.homset.RingHomset_generic_with_category._coerce_impl, one has\n\n```\n        ...\n        if x.parent() == self:\n            if isinstance(x, morphism.RingHomomorphism_im_gens):\n                return morphism.RingHomomorphism_im_gens(self, x.im_gens())\n            elif isinstance(x, morphism.RingHomomorphism_cover):\n                return morphism.RingHomomorphism_cover(self)\n        raise TypeError\n```\nWhy not instead\n\n```\n        try:\n            if isinstance(x, morphism.RingHomomorphism_im_gens):\n                return morphism.RingHomomorphism_im_gens(self, x.im_gens())\n            elif isinstance(x, morphism.RingHomomorphism_cover):\n                return morphism.RingHomomorphism_cover(self)\n        except:\n            raise TypeError\n```\n\nIf I do so, the following works:\n\n```\nsage: R.<x> = QQ[]\nsage: f = R.hom([2*x],R)\nsage: C = Fields()\nsage: f2 = C(R).hom(f,C(R))\nsage: f2\nRing endomorphism of Fraction Field of Univariate Polynomial Ring in x over Rational Field\n  Defn: x |--> 2*x\nsage: f2(1/x)\n1/(2*x)\n```\n\nIt should be straight forward to change the call method of ``C`` so that ``C(f)`` reproduces the above construction. Similarly, if ``F`` is a functor then ``F(f)`` should call ``F(f.domain()).hom(f,F(f.codomain()))``.\n\nAssignee: **Simon King**\n\nCC:  @sagetrac-kohel @williamstein @wdjoyner @robertwb\n\nKeywords: **morphisms functors categories**\n\nAuthor: **Simon King**\n\nReviewer: **John Cremona**\n\nMerged: **sage-4.6.2.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8807_\n\n",
    "closed_at": "2011-01-12T06:31:57Z",
    "created_at": "2010-04-28T18:17:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20categories",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Adding support for morphisms to the category framework",
    "type": "issue",
    "updated_at": "2011-01-12T06:31:57Z",
    "url": "https://github.com/sagemath/sage/issues/8807",
    "user": "https://github.com/simon-king-jena"
}
```
Working on the doc tests for sage.category at #8800, I found that support for morphisms is missing in the category framework. I think this is important, and therefore I am opening this ticket.

Some thoughts on implementing support.

Let f be a morphism in a category C, and let F be a functor, F.domain()==C. Then F(f) should by default try F(f.domain()).hom(f,F(f.codomain())). This relies on the call method of F(f.domain()).Hom(F.codomain()), which in turn uses _coerce_impl. I think it is there where the support should be implemented.

Example:

In sage.rings.homset.RingHomset_generic_with_category._coerce_impl, one has

```
        ...
        if x.parent() == self:
            if isinstance(x, morphism.RingHomomorphism_im_gens):
                return morphism.RingHomomorphism_im_gens(self, x.im_gens())
            elif isinstance(x, morphism.RingHomomorphism_cover):
                return morphism.RingHomomorphism_cover(self)
        raise TypeError
```
Why not instead

```
        try:
            if isinstance(x, morphism.RingHomomorphism_im_gens):
                return morphism.RingHomomorphism_im_gens(self, x.im_gens())
            elif isinstance(x, morphism.RingHomomorphism_cover):
                return morphism.RingHomomorphism_cover(self)
        except:
            raise TypeError
```

If I do so, the following works:

```
sage: R.<x> = QQ[]
sage: f = R.hom([2*x],R)
sage: C = Fields()
sage: f2 = C(R).hom(f,C(R))
sage: f2
Ring endomorphism of Fraction Field of Univariate Polynomial Ring in x over Rational Field
  Defn: x |--> 2*x
sage: f2(1/x)
1/(2*x)
```

It should be straight forward to change the call method of ``C`` so that ``C(f)`` reproduces the above construction. Similarly, if ``F`` is a functor then ``F(f)`` should call ``F(f.domain()).hom(f,F(f.codomain()))``.

Assignee: **Simon King**

CC:  @sagetrac-kohel @williamstein @wdjoyner @robertwb

Keywords: **morphisms functors categories**

Author: **Simon King**

Reviewer: **John Cremona**

Merged: **sage-4.6.2.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/8807_





---

archive/issue_events_101593.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-04-28T18:17:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20categories",
    "label_color": "0000ff",
    "label_name": "component: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101593"
}
```



---

archive/issue_events_101594.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-04-28T18:17:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101594"
}
```



---

archive/issue_events_101595.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-04-28T18:17:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101595"
}
```



---

archive/issue_comments_073630.json:
```json
{
    "body": "Implementing induced homomorphisms; Functors on morphisms; some doc tests",
    "created_at": "2010-04-30T13:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73630",
    "user": "https://github.com/simon-king-jena"
}
```

Implementing induced homomorphisms; Functors on morphisms; some doc tests



---

archive/issue_comments_073631.json:
```json
{
    "body": "Attachment: **[8807functors_and_induced_morphisms.patch.gz](https://github.com/sagemath/sage/files/ticket8807/8807functors_and_induced_morphisms.patch.gz)**\n\nFixing a buglet in the construction functor of Laurent Polynomial Rings. To be applied after the first patch",
    "created_at": "2010-04-30T14:21:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73631",
    "user": "https://github.com/simon-king-jena"
}
```

Attachment: **[8807functors_and_induced_morphisms.patch.gz](https://github.com/sagemath/sage/files/ticket8807/8807functors_and_induced_morphisms.patch.gz)**

Fixing a buglet in the construction functor of Laurent Polynomial Rings. To be applied after the first patch



---

archive/issue_comments_073632.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nAttachment: **[8807functors_and_induced_morphisms.p1.patch.gz](https://github.com/sagemath/sage/files/ticket8807/8807functors_and_induced_morphisms.p1.patch.gz)**\n\nCc to the original authors.\n\nI solved the problem. Please apply both patches in order.\n\n**__New Code__**\n\nI cleaned the framework for functors. There is a generic call method that (in contrast to the old generic call method) has a return value. It relies on three methods _coerce_into_domain, _apply_functor and _apply_functor_to_morphism. The default methods are already enough for forgetful functor and most construction functors.\n\nI implemented a new class for Ring Homomorphisms that are induced by a homomorphism of the base ring. This enables the application of the construction functors for matrix and polynomial rings.\n\n**__Tests__**\n\nAll new code is tested, and I added also some doc tests for old code. This is related with #8800. However, #8800 should not be closed, because the old code is still not completely covered by tests yet.\n\nSuggestion: The further work on #8800 will build upon this ticket.\n\n**__Showcases__**\n\nWe start with a homomorphism of polynomial rings.\n\n```\nsage: R.<x,y> = QQ[]\nsage: S.<z> = QQ[]\nsage: f = R.hom([2*z,3*z],S)\n```\n\nNow we construct polynomial rings based on ``R`` and ``S``, and let ``f`` act on the coefficients:\n\n```\nsage: PR.<t> = R[]\nsage: PS = S['t']\nsage: Pf = PR.hom(f,PS)\nsage: Pf\nRing morphism:\n  From: Univariate Polynomial Ring in t over Multivariate Polynomial Ring in x, y over Rational Field\n  To:   Univariate Polynomial Ring in t over Univariate Polynomial Ring in z over Rational Field\n  Defn: Induced from base ring by\n        Ring morphism:\n          From: Multivariate Polynomial Ring in x, y over Rational Field\n          To:   Univariate Polynomial Ring in z over Rational Field\n          Defn: x |--> 2*z\n                y |--> 3*z\nsage: p = (x - 4*y + 1/13)*t^2 + (1/2*x^2 - 1/3*y^2)*t + 2*y^2 + x\nsage: Pf(p)\n(-10*z + 1/13)*t^2 - z^2*t + 18*z^2 + 2*z\n```\n\nThe construction of induced homomorphisms is recursive, and so we have:\n\n```\nsage: MPR = MatrixSpace(PR, 2)\nsage: MPS = MatrixSpace(PS, 2)\nsage: M = MPR([(- x + y)*t^2 + 58*t - 3*x^2 + x*y, (- 1/7*x*y - 1/40*x)*t^2 + (5*x^2 + y^2)*t + 2*y, (- 1/3*y + 1)*t^2 + 1/3*x*y + y^2 + 5/2*y + 1/4, (x + 6*y + 1)*t^2])\nsage: MPf = MPR.hom(f,MPS); MPf\nRing morphism:\n  From: Full MatrixSpace of 2 by 2 dense matrices over Univariate Polynomial Ring in t over Multivariate Polynomial Ring in x, y over Rational Field\n  To:   Full MatrixSpace of 2 by 2 dense matrices over Univariate Polynomial Ring in t over Univariate Polynomial Ring in z over Rational Field\n  Defn: Induced from base ring by\n        Ring morphism:\n          From: Univariate Polynomial Ring in t over Multivariate Polynomial Ring in x, y over Rational Field\n          To:   Univariate Polynomial Ring in t over Univariate Polynomial Ring in z over Rational Field\n          Defn: Induced from base ring by\n                Ring morphism:\n                  From: Multivariate Polynomial Ring in x, y over Rational Field\n                  To:   Univariate Polynomial Ring in z over Rational Field\n                  Defn: x |--> 2*z\n                        y |--> 3*z\nsage: MPf(M)\n[                    z*t^2 + 58*t - 6*z^2 (-6/7*z^2 - 1/20*z)*t^2 + 29*z^2*t + 6*z]\n[    (-z + 1)*t^2 + 11*z^2 + 15/2*z + 1/4                           (20*z + 1)*t^2]\n```\n\nAnd this can also be achieved using construction functors:\n\n```\nsage: from sage.categories.pushout import CompositConstructionFunctor\nsage: F = CompositConstructionFunctor(QQ.construction()[0],ZZ['x'].construction()[0], QQ.construction()[0],ZZ['y'].construction()[0])\nsage: R.<a,b> = QQ[]\nsage: f = R.hom([a+b, a-b])\nsage: F(f) # indirect doctest\nRing endomorphism of Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Fraction Field of Multivariate Polynomial Ring in a, b over Rational Field\n  Defn: Induced from base ring by\n        Ring endomorphism of Fraction Field of Univariate Polynomial Ring in x over Fraction Field of Multivariate Polynomial Ring in a, b over Rational Field\n          Defn: Induced from base ring by\n                Ring endomorphism of Univariate Polynomial Ring in x over Fraction Field of Multivariate Polynomial Ring in a, b over Rational Field\n                  Defn: Induced from base ring by\n                        Ring endomorphism of Fraction Field of Multivariate Polynomial Ring in a, b over Rational Field\n                          Defn: a |--> a + b\n                                b |--> a - b\n```\n\nWith the second patch, Laurent polynomial rings work as well:\n\n```\nsage: P = LaurentPolynomialRing(QQ,'t')\nsage: F = P.construction()[0]\nsage: X.<t> = LaurentPolynomialRing(R)\nsage: p = (a+b)*t^-1 + (a^2)*t + b\nsage: F(f)(p)\n(a^2 + 2*a*b + b^2)*t + a - b + 2*a*t^-1\n```",
    "created_at": "2010-04-30T14:26:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73632",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">Comment 1</div>

Attachment: **[8807functors_and_induced_morphisms.p1.patch.gz](https://github.com/sagemath/sage/files/ticket8807/8807functors_and_induced_morphisms.p1.patch.gz)**

Cc to the original authors.

I solved the problem. Please apply both patches in order.

**__New Code__**

I cleaned the framework for functors. There is a generic call method that (in contrast to the old generic call method) has a return value. It relies on three methods _coerce_into_domain, _apply_functor and _apply_functor_to_morphism. The default methods are already enough for forgetful functor and most construction functors.

I implemented a new class for Ring Homomorphisms that are induced by a homomorphism of the base ring. This enables the application of the construction functors for matrix and polynomial rings.

**__Tests__**

All new code is tested, and I added also some doc tests for old code. This is related with #8800. However, #8800 should not be closed, because the old code is still not completely covered by tests yet.

Suggestion: The further work on #8800 will build upon this ticket.

**__Showcases__**

We start with a homomorphism of polynomial rings.

```
sage: R.<x,y> = QQ[]
sage: S.<z> = QQ[]
sage: f = R.hom([2*z,3*z],S)
```

Now we construct polynomial rings based on ``R`` and ``S``, and let ``f`` act on the coefficients:

```
sage: PR.<t> = R[]
sage: PS = S['t']
sage: Pf = PR.hom(f,PS)
sage: Pf
Ring morphism:
  From: Univariate Polynomial Ring in t over Multivariate Polynomial Ring in x, y over Rational Field
  To:   Univariate Polynomial Ring in t over Univariate Polynomial Ring in z over Rational Field
  Defn: Induced from base ring by
        Ring morphism:
          From: Multivariate Polynomial Ring in x, y over Rational Field
          To:   Univariate Polynomial Ring in z over Rational Field
          Defn: x |--> 2*z
                y |--> 3*z
sage: p = (x - 4*y + 1/13)*t^2 + (1/2*x^2 - 1/3*y^2)*t + 2*y^2 + x
sage: Pf(p)
(-10*z + 1/13)*t^2 - z^2*t + 18*z^2 + 2*z
```

The construction of induced homomorphisms is recursive, and so we have:

```
sage: MPR = MatrixSpace(PR, 2)
sage: MPS = MatrixSpace(PS, 2)
sage: M = MPR([(- x + y)*t^2 + 58*t - 3*x^2 + x*y, (- 1/7*x*y - 1/40*x)*t^2 + (5*x^2 + y^2)*t + 2*y, (- 1/3*y + 1)*t^2 + 1/3*x*y + y^2 + 5/2*y + 1/4, (x + 6*y + 1)*t^2])
sage: MPf = MPR.hom(f,MPS); MPf
Ring morphism:
  From: Full MatrixSpace of 2 by 2 dense matrices over Univariate Polynomial Ring in t over Multivariate Polynomial Ring in x, y over Rational Field
  To:   Full MatrixSpace of 2 by 2 dense matrices over Univariate Polynomial Ring in t over Univariate Polynomial Ring in z over Rational Field
  Defn: Induced from base ring by
        Ring morphism:
          From: Univariate Polynomial Ring in t over Multivariate Polynomial Ring in x, y over Rational Field
          To:   Univariate Polynomial Ring in t over Univariate Polynomial Ring in z over Rational Field
          Defn: Induced from base ring by
                Ring morphism:
                  From: Multivariate Polynomial Ring in x, y over Rational Field
                  To:   Univariate Polynomial Ring in z over Rational Field
                  Defn: x |--> 2*z
                        y |--> 3*z
sage: MPf(M)
[                    z*t^2 + 58*t - 6*z^2 (-6/7*z^2 - 1/20*z)*t^2 + 29*z^2*t + 6*z]
[    (-z + 1)*t^2 + 11*z^2 + 15/2*z + 1/4                           (20*z + 1)*t^2]
```

And this can also be achieved using construction functors:

```
sage: from sage.categories.pushout import CompositConstructionFunctor
sage: F = CompositConstructionFunctor(QQ.construction()[0],ZZ['x'].construction()[0], QQ.construction()[0],ZZ['y'].construction()[0])
sage: R.<a,b> = QQ[]
sage: f = R.hom([a+b, a-b])
sage: F(f) # indirect doctest
Ring endomorphism of Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Fraction Field of Multivariate Polynomial Ring in a, b over Rational Field
  Defn: Induced from base ring by
        Ring endomorphism of Fraction Field of Univariate Polynomial Ring in x over Fraction Field of Multivariate Polynomial Ring in a, b over Rational Field
          Defn: Induced from base ring by
                Ring endomorphism of Univariate Polynomial Ring in x over Fraction Field of Multivariate Polynomial Ring in a, b over Rational Field
                  Defn: Induced from base ring by
                        Ring endomorphism of Fraction Field of Multivariate Polynomial Ring in a, b over Rational Field
                          Defn: a |--> a + b
                                b |--> a - b
```

With the second patch, Laurent polynomial rings work as well:

```
sage: P = LaurentPolynomialRing(QQ,'t')
sage: F = P.construction()[0]
sage: X.<t> = LaurentPolynomialRing(R)
sage: p = (a+b)*t^-1 + (a^2)*t + b
sage: F(f)(p)
(a^2 + 2*a*b + b^2)*t + a - b + 2*a*t^-1
```



---

archive/issue_events_101596.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-04-30T14:26:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101596"
}
```



---

archive/issue_events_101597.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-07-20T14:13:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101597"
}
```



---

archive/issue_events_101598.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-07-20T14:13:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101598"
}
```



---

archive/issue_comments_073633.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI applied this patch to sage-4.5, and ran \"make ptestlong\", and their are failures all over the place, e.g.,\n\n```\n\nwstein@sage:~/build/sage-4.5.alphastein1$ ./sage -t  -long devel/sage/sage/matrix/misc.pyx\nsage -t -long \"devel/sage/sage/matrix/misc.pyx\"\n**********************************************************************\nFile \"/mnt/usb1/scratch/wstein/build/sage-4.5.alphastein1/devel/sage/sage/matrix/misc.pyx\", line 67:\n    sage: B = ((matrix(ZZ, 3,4, [1,2,3,-4,7,2,18,3,4,3,4,5])/3)%500).change_ring(ZZ)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/wstein/build/sage-4.5.alphastein1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/wstein/build/sage-4.5.alphastein1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/wstein/build/sage-4.5.alphastein1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[2]>\", line 1, in <module>\n        B = ((matrix(ZZ, Integer(3),Integer(4), [Integer(1),Integer(2),Integer(3),-Integer(4),Integer(7),Integer(2),Integer(18),Integer(3),Inte\nger(4),Integer(3),Integer(4),Integer(5)])/Integer(3))%Integer(500)).change_ring(ZZ)###line 67:\n    sage: B = ((matrix(ZZ, 3,4, [1,2,3,-4,7,2,18,3,4,3,4,5])/3)%500).change_ring(ZZ)\n      File \"element.pyx\", line 1529, in sage.structure.element.RingElement.__div__ (sage/structure/element.c:11992)\n      File \"coerce.pyx\", line 765, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6966)\n    TypeError: unsupported operand parent(s) for '/': 'Full MatrixSpace of 3 by 4 dense matrices over Integer Ring' and 'Integer Ring'\n...\n```",
    "created_at": "2010-07-20T14:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73633",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:2" align="right">Comment 2</div>

I applied this patch to sage-4.5, and ran "make ptestlong", and their are failures all over the place, e.g.,

```

wstein@sage:~/build/sage-4.5.alphastein1$ ./sage -t  -long devel/sage/sage/matrix/misc.pyx
sage -t -long "devel/sage/sage/matrix/misc.pyx"
**********************************************************************
File "/mnt/usb1/scratch/wstein/build/sage-4.5.alphastein1/devel/sage/sage/matrix/misc.pyx", line 67:
    sage: B = ((matrix(ZZ, 3,4, [1,2,3,-4,7,2,18,3,4,3,4,5])/3)%500).change_ring(ZZ)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/wstein/build/sage-4.5.alphastein1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/wstein/build/sage-4.5.alphastein1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/wstein/build/sage-4.5.alphastein1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[2]>", line 1, in <module>
        B = ((matrix(ZZ, Integer(3),Integer(4), [Integer(1),Integer(2),Integer(3),-Integer(4),Integer(7),Integer(2),Integer(18),Integer(3),Inte
ger(4),Integer(3),Integer(4),Integer(5)])/Integer(3))%Integer(500)).change_ring(ZZ)###line 67:
    sage: B = ((matrix(ZZ, 3,4, [1,2,3,-4,7,2,18,3,4,3,4,5])/3)%500).change_ring(ZZ)
      File "element.pyx", line 1529, in sage.structure.element.RingElement.__div__ (sage/structure/element.c:11992)
      File "coerce.pyx", line 765, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6966)
    TypeError: unsupported operand parent(s) for '/': 'Full MatrixSpace of 3 by 4 dense matrices over Integer Ring' and 'Integer Ring'
...
```



---

archive/issue_comments_073634.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nDear William,\n\nthanks for looking at this! Indeed it has been a long time since I wrote it, so it is time to resume work, taking a fresh look at my own code. I think this will be my project for the rest of Sage Days 24!",
    "created_at": "2010-07-20T19:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73634",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:3" align="right">Comment 3</div>

Dear William,

thanks for looking at this! Indeed it has been a long time since I wrote it, so it is time to resume work, taking a fresh look at my own code. I think this will be my project for the rest of Sage Days 24!



---

archive/issue_comments_073635.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nIt seems that my patch crashed the coercion system. Funny coincidence that I held a tutorial on coercion today...\n\n```\nsage: cm = get_coercion_model()\nsage: M = parent(matrix(ZZ, 3,4, [1,2,3,-4,7,2,18,3,4,3,4,5]))\nsage: cm.explain(M,QQ)\nWill try _r_action and _l_action\nUnknown result parent.\n```\n\nCheers,\nSimon",
    "created_at": "2010-07-20T21:00:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73635",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">Comment 4</div>

It seems that my patch crashed the coercion system. Funny coincidence that I held a tutorial on coercion today...

```
sage: cm = get_coercion_model()
sage: M = parent(matrix(ZZ, 3,4, [1,2,3,-4,7,2,18,3,4,3,4,5]))
sage: cm.explain(M,QQ)
Will try _r_action and _l_action
Unknown result parent.
```

Cheers,
Simon



---

archive/issue_comments_073636.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nAnd there it is:\n\n```\nsage: M = parent(matrix(ZZ, 3,4, [1,2,3,-4,7,2,18,3,4,3,4,5]))\nsage: mf = M.construction()[0]\nsage: mf.domain()\nCategory of rings\nsage: mf.codomain()\nCategory of rings\nsage: M in Rings()\nFalse\n```\n\nSo, the problem is that I gave the matrix constructor got a wrong codomain, namely the category `Rings()` --- and my generic `__call__` method checks whether the output belongs to the intended category. What should be the right choice?\n\n```\nsage: M.categories()\n[Category of modules over Integer Ring, Category of bimodules over Integer Ring on the left and Integer Ring on the right, Category of left modules over Integer Ring, Category of right modules over Integer Ring, Category of commutative additive groups, Category of commutative additive monoids, Category of commutative additive semigroups, Category of additive magmas, Category of sets, Category of sets with partial maps, Category of objects]\n```\nSince the construction functor can not know about the base ring, I guess `CommutativeAdditiveGroups()` would be the way to go.",
    "created_at": "2010-07-20T21:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73636",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">Comment 5</div>

And there it is:

```
sage: M = parent(matrix(ZZ, 3,4, [1,2,3,-4,7,2,18,3,4,3,4,5]))
sage: mf = M.construction()[0]
sage: mf.domain()
Category of rings
sage: mf.codomain()
Category of rings
sage: M in Rings()
False
```

So, the problem is that I gave the matrix constructor got a wrong codomain, namely the category `Rings()` --- and my generic `__call__` method checks whether the output belongs to the intended category. What should be the right choice?

```
sage: M.categories()
[Category of modules over Integer Ring, Category of bimodules over Integer Ring on the left and Integer Ring on the right, Category of left modules over Integer Ring, Category of right modules over Integer Ring, Category of commutative additive groups, Category of commutative additive monoids, Category of commutative additive semigroups, Category of additive magmas, Category of sets, Category of sets with partial maps, Category of objects]
```
Since the construction functor can not know about the base ring, I guess `CommutativeAdditiveGroups()` would be the way to go.



---

archive/issue_comments_073637.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI went through the file and found that indeed in some cases wrong categories were chosen. I count this as an argument *pro* my approach to have a generic `__call__` method, because this checks whether the result is in the expected category.\n\nAfter doing the appropriate changes, I am running ptestlong as well.",
    "created_at": "2010-07-20T21:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73637",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:6" align="right">Comment 6</div>

I went through the file and found that indeed in some cases wrong categories were chosen. I count this as an argument *pro* my approach to have a generic `__call__` method, because this checks whether the result is in the expected category.

After doing the appropriate changes, I am running ptestlong as well.



---

archive/issue_comments_073638.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI produced a new patch (I hope I got the `hg -qfold` command right).\n\nThe problem was: \n\n* Some construction functors used to be defined on the wrong categories. E.g., the `MatrixFunctor` was defined as a functor from Rings() to Rings(), which is of course wrong if the number of rows is different from the number of columns.\n* In the good old times, every functor had a custom `__call__` method. Therefore, it was not noticed that sometimes the return value did not belong to the expected category.\n* My default `__call__` method does check the output - and raises an error if it is wrong.\n* For some reason I forgot to run `sage -testall`\n\nSolution:\n\n* Be more careful with defining domain and codomain of the construction functors.\n* Run `make ptestlong`. Result:\n\n   ```\n   All tests passed!\n   Total time for all tests: 4078.1 seconds\n  ```\n\nOne remark concerning doctests. The genuinely new code (induced morphisms) is doctested. In my patch, I however did not add tests for sage.categories.pushout. This is done in #8800. I hope that the ticket from #8800 still applies with the new patch that I posted here.",
    "created_at": "2010-07-21T08:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73638",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">Comment 7</div>

I produced a new patch (I hope I got the `hg -qfold` command right).

The problem was: 

* Some construction functors used to be defined on the wrong categories. E.g., the `MatrixFunctor` was defined as a functor from Rings() to Rings(), which is of course wrong if the number of rows is different from the number of columns.
* In the good old times, every functor had a custom `__call__` method. Therefore, it was not noticed that sometimes the return value did not belong to the expected category.
* My default `__call__` method does check the output - and raises an error if it is wrong.
* For some reason I forgot to run `sage -testall`

Solution:

* Be more careful with defining domain and codomain of the construction functors.
* Run `make ptestlong`. Result:

   ```
   All tests passed!
   Total time for all tests: 4078.1 seconds
  ```

One remark concerning doctests. The genuinely new code (induced morphisms) is doctested. In my patch, I however did not add tests for sage.categories.pushout. This is done in #8800. I hope that the ticket from #8800 still applies with the new patch that I posted here.



---

archive/issue_events_101599.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-07-21T08:32:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "milestone_number": null,
    "milestone_title": "sage-4.5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101599"
}
```



---

archive/issue_events_101600.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-07-21T08:32:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101600"
}
```



---

archive/issue_events_101601.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-07-21T08:32:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101601"
}
```



---

archive/issue_comments_073639.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@simon-king-jena](#comment%3A7):\n> One remark concerning doctests. The genuinely new code (induced morphisms) is doctested. In my patch, I however did not add tests for sage.categories.pushout. This is done in #8800. I hope that the ticket from #8800 still applies with the new patch that I posted here.\n\nUnfortunately, #8800 does not apply with the new patch from here. \n\nSuggestion: I'll rebase #8800 relative to the new patch here. So, #8807 would be reviewed first, and the next to review would be #8800, which contains many doctests. I hope this is acceptable.",
    "created_at": "2010-07-21T08:43:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73639",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@simon-king-jena](#comment%3A7):
> One remark concerning doctests. The genuinely new code (induced morphisms) is doctested. In my patch, I however did not add tests for sage.categories.pushout. This is done in #8800. I hope that the ticket from #8800 still applies with the new patch that I posted here.

Unfortunately, #8800 does not apply with the new patch from here. 

Suggestion: I'll rebase #8800 relative to the new patch here. So, #8807 would be reviewed first, and the next to review would be #8800, which contains many doctests. I hope this is acceptable.



---

archive/issue_comments_073640.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReview:\n\nJust a few trivial comments, after which I could give this a positive review.  The patch applies fine to 4.6.rc0 (though the related one at #8800 does not then apply cleanly) and all tests pass.  There is no time regression (long tests took 667s before and 642s after, using -tp 20).\n\nHere are the minor issues in docstrings:\n\nline 44: \"one should implement two methods\" -- do you mean three?\n\n_apply_functor_to_morphism: first line of docstring is a copy from the previous function but should presumably be \"Apply the functor to a morphism between ... something\" \n\nIn the new `__call__` function, I would like to see a test of the branch which raises a `TypeError` \"\"%s is ill-defined, ...\"\n\nIs the spelling of \"`CompositConstructionFunctor`\" intentional?  Should it not be \"`CompositeConstructionFunctor`\"?",
    "created_at": "2010-10-26T20:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73640",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:9" align="right">Comment 9</div>

Review:

Just a few trivial comments, after which I could give this a positive review.  The patch applies fine to 4.6.rc0 (though the related one at #8800 does not then apply cleanly) and all tests pass.  There is no time regression (long tests took 667s before and 642s after, using -tp 20).

Here are the minor issues in docstrings:

line 44: "one should implement two methods" -- do you mean three?

_apply_functor_to_morphism: first line of docstring is a copy from the previous function but should presumably be "Apply the functor to a morphism between ... something" 

In the new `__call__` function, I would like to see a test of the branch which raises a `TypeError` ""%s is ill-defined, ..."

Is the spelling of "`CompositConstructionFunctor`" intentional?  Should it not be "`CompositeConstructionFunctor`"?



---

archive/issue_events_101602.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-10-26T20:42:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101602"
}
```



---

archive/issue_events_101603.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-10-26T20:42:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101603"
}
```



---

archive/issue_comments_073641.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nHi John!\n\nReplying to [@JohnCremona](#comment%3A9):\n> Review:\n> \n> Just a few trivial comments, after which I could give this a positive review.  The patch applies fine to 4.6.rc0 (though the related one at #8800 does not then apply cleanly) and all tests pass.  There is no time regression (long tests took 667s before and 642s after, using -tp 20).\n\nThat's good news! As my patch only adds functionality, without changing the method resolution order of existing classes and without replacing existing algorithms, it is no surprise that the speed remains fine.\n\n> Here are the minor issues in docstrings:\n> \n> line 44: \"one should implement two methods\" -- do you mean three?\n\nYou know, there are three types of mathematicians: Some can count, and others can't.\n\nBut isn't it pythonesque? Recall the Holy Hand Grenade of Antioch from the movie \"Monty Python and the Holy Grail\"... :)\n\n> _apply_functor_to_morphism: first line of docstring is a copy from the previous function but should presumably be \"Apply the functor to a morphism between ... something\" \n\nRight.\n\n> In the new `__call__` function, I would like to see a test of the branch which raises a `TypeError` \"\"%s is ill-defined, ...\"\n\nOK, but I hope such example needs to be constructed on purpose. It used to happen with the matrix constructor, for example: The functor was supposed to take a ring R into the ring(!!) of m by n matrices over R. But if the matrix constructor does not produce square matrices, the result is of course not a ring. This bug existed before and is fixed in my patch (now, the functor's codomain is only expected to be the category of rings if m equals n). However, this is exactly the situation that is covered by the `TypeError`.\n\n> Is the spelling of \"`CompositConstructionFunctor`\" intentional?  Should it not be \"`CompositeConstructionFunctor`\"?\n\nThis wasn't my idea. `CompositConstructionFunctor` existed earlier (see pushout.py).\n\nAs I mentioned on the other ticket, I will be unable to do any programming work at least until next week. But it should be one of the first things I'll do once I'm settled in Jena.\n\nBest regards,\n\nSimon",
    "created_at": "2010-10-26T22:31:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73641",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">Comment 10</div>

Hi John!

Replying to [@JohnCremona](#comment%3A9):
> Review:
> 
> Just a few trivial comments, after which I could give this a positive review.  The patch applies fine to 4.6.rc0 (though the related one at #8800 does not then apply cleanly) and all tests pass.  There is no time regression (long tests took 667s before and 642s after, using -tp 20).

That's good news! As my patch only adds functionality, without changing the method resolution order of existing classes and without replacing existing algorithms, it is no surprise that the speed remains fine.

> Here are the minor issues in docstrings:
> 
> line 44: "one should implement two methods" -- do you mean three?

You know, there are three types of mathematicians: Some can count, and others can't.

But isn't it pythonesque? Recall the Holy Hand Grenade of Antioch from the movie "Monty Python and the Holy Grail"... :)

> _apply_functor_to_morphism: first line of docstring is a copy from the previous function but should presumably be "Apply the functor to a morphism between ... something" 

Right.

> In the new `__call__` function, I would like to see a test of the branch which raises a `TypeError` ""%s is ill-defined, ..."

OK, but I hope such example needs to be constructed on purpose. It used to happen with the matrix constructor, for example: The functor was supposed to take a ring R into the ring(!!) of m by n matrices over R. But if the matrix constructor does not produce square matrices, the result is of course not a ring. This bug existed before and is fixed in my patch (now, the functor's codomain is only expected to be the category of rings if m equals n). However, this is exactly the situation that is covered by the `TypeError`.

> Is the spelling of "`CompositConstructionFunctor`" intentional?  Should it not be "`CompositeConstructionFunctor`"?

This wasn't my idea. `CompositConstructionFunctor` existed earlier (see pushout.py).

As I mentioned on the other ticket, I will be unable to do any programming work at least until next week. But it should be one of the first things I'll do once I'm settled in Jena.

Best regards,

Simon



---

archive/issue_comments_073642.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nReplying to [@JohnCremona](#comment%3A9):\n> ...\n> Here are the minor issues in docstrings:\n> \n> line 44: \"one should implement two methods\" -- do you mean three?\n\nCorrected.\n\n> _apply_functor_to_morphism: first line of docstring is a copy from the previous function but should presumably be \"Apply the functor to a morphism between ... something\" \n\nCorrected.\n\n> In the new `__call__` function, I would like to see a test of the branch which raises a `TypeError` \"\"%s is ill-defined, ...\"\n\nDone. I define a class that behaves like the matrix constructor used to.\n\n> Is the spelling of \"`CompositConstructionFunctor`\" intentional?  Should it not be \"`CompositeConstructionFunctor`\"?\n\nThat spelling is old, so, I won't touch it.\n\nI am running `sage -tp 3 sage` right now, but I am replacing the old patch in a minute.\n\nCheers,\nSimon",
    "created_at": "2010-11-24T07:51:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73642",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">Comment 11</div>

Replying to [@JohnCremona](#comment%3A9):
> ...
> Here are the minor issues in docstrings:
> 
> line 44: "one should implement two methods" -- do you mean three?

Corrected.

> _apply_functor_to_morphism: first line of docstring is a copy from the previous function but should presumably be "Apply the functor to a morphism between ... something" 

Corrected.

> In the new `__call__` function, I would like to see a test of the branch which raises a `TypeError` ""%s is ill-defined, ..."

Done. I define a class that behaves like the matrix constructor used to.

> Is the spelling of "`CompositConstructionFunctor`" intentional?  Should it not be "`CompositeConstructionFunctor`"?

That spelling is old, so, I won't touch it.

I am running `sage -tp 3 sage` right now, but I am replacing the old patch in a minute.

Cheers,
Simon



---

archive/issue_events_101604.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-11-24T08:01:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101604"
}
```



---

archive/issue_events_101605.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-11-24T08:01:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101605"
}
```



---

archive/issue_comments_073643.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nOK, patch is updated.\n\nPlease only apply `trac-8807_induced_morphisms.patch`.",
    "created_at": "2010-11-24T08:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73643",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:12" align="right">Comment 12</div>

OK, patch is updated.

Please only apply `trac-8807_induced_morphisms.patch`.



---

archive/issue_comments_073644.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2010-11-24T08:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73644",
    "user": "https://github.com/simon-king-jena"
}
```

Reviewer: **John Cremona**



---

archive/issue_comments_073645.json:
```json
{
    "body": "Attachment: **[trac-8807_induced_morphisms.patch.gz](https://github.com/sagemath/sage/files/ticket8807/trac-8807_induced_morphisms.patch.gz)**\n\nThis patch applies to sage-4.6; it is the only patch to be applied",
    "created_at": "2010-11-24T08:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73645",
    "user": "https://github.com/simon-king-jena"
}
```

Attachment: **[trac-8807_induced_morphisms.patch.gz](https://github.com/sagemath/sage/files/ticket8807/trac-8807_induced_morphisms.patch.gz)**

This patch applies to sage-4.6; it is the only patch to be applied



---

archive/issue_comments_073646.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nLooks good, about to test with 4.6.1.alpha2.",
    "created_at": "2010-11-24T09:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73646",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:13" align="right">Comment 13</div>

Looks good, about to test with 4.6.1.alpha2.



---

archive/issue_comments_073647.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nAll tests pass -- but I forgot -long, so hold on...",
    "created_at": "2010-11-24T09:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73647",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:14" align="right">Comment 14</div>

All tests pass -- but I forgot -long, so hold on...



---

archive/issue_events_101606.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-11-24T09:54:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101606"
}
```



---

archive/issue_events_101607.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-11-24T09:54:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101607"
}
```



---

archive/issue_comments_073648.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\n...all long tests pass!",
    "created_at": "2010-11-24T09:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73648",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:15" align="right">Comment 15</div>

...all long tests pass!



---

archive/issue_events_101608.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-11-24T09:56:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101608"
}
```



---

archive/issue_events_101609.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-11-24T09:56:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101609"
}
```



---

archive/issue_comments_073649.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@JohnCremona](#comment%3A15):\n> ...all long tests pass!\n\nSorry, I am a complete idiot.  I imported the patch and did sage -b but never qpushed it.  Back to square one.",
    "created_at": "2010-11-24T09:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73649",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@JohnCremona](#comment%3A15):
> ...all long tests pass!

Sorry, I am a complete idiot.  I imported the patch and did sage -b but never qpushed it.  Back to square one.



---

archive/issue_events_101610.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-11-24T09:56:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101610"
}
```



---

archive/issue_events_101611.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-11-24T09:56:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101611"
}
```



---

archive/issue_comments_073650.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nThird time lucky: I did apply the patch, and rebuild, and test the entire library with -long, and all tests pass.  (4.6.1.alpha2, 64-bit),",
    "created_at": "2010-11-24T10:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73650",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:18" align="right">Comment 18</div>

Third time lucky: I did apply the patch, and rebuild, and test the entire library with -long, and all tests pass.  (4.6.1.alpha2, 64-bit),



---

archive/issue_events_101612.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-11-24T10:25:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101612"
}
```



---

archive/issue_events_101613.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-11-24T10:25:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101613"
}
```



---

archive/issue_comments_073651.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nRelease manager: after merging this patch, please also do the one at #10318 which has a positive review and just does a lot of spelling corrections, mostly on the file which this one affects most.",
    "created_at": "2010-11-24T13:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73651",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:19" align="right">Comment 19</div>

Release manager: after merging this patch, please also do the one at #10318 which has a positive review and just does a lot of spelling corrections, mostly on the file which this one affects most.



---

archive/issue_events_101614.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-26T22:13:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101614"
}
```



---

archive/issue_events_101615.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-26T22:13:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101615"
}
```



---

archive/issue_comments_073652.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nTo the buildbot and the release manager:\n\nApply trac-8807_induced_morphisms.patch",
    "created_at": "2010-12-08T10:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73652",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:21" align="right">Comment 21</div>

To the buildbot and the release manager:

Apply trac-8807_induced_morphisms.patch



---

archive/issue_comments_073653.json:
```json
{
    "body": "Merged: **sage-4.6.2.alpha0**",
    "created_at": "2011-01-12T06:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8807#issuecomment-73653",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.6.2.alpha0**



---

archive/issue_events_101616.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-12T06:31:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101616"
}
```



---

archive/issue_events_101617.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-12T06:31:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8807",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8807#event-101617"
}
```
