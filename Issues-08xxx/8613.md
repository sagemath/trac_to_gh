# Issue 8613: __dir__() / tab completion returns nonexistent attributes

archive/issues_008613.json:
```json
{
    "body": "On the following example, tab completion suggests ``sum``, which is not an attribute of ``R``.\n\n```\nsage: R = QQ['t']\nsage: R.su       \nR.sum                               R.summation\nR.summation_from_element_class_add             \nsage: R.sum                                    \n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n\n/home/marc/co/sage-4.3.4/<ipython console> in <module>()\n\n/home/marc/co/sage-4.3.4/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (sage/structure/parent.c:5120)()\n\n/home/marc/co/sage-4.3.4/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.raise_attribute_error (sage/structure/parent.c:2638)()                                                                             \n\nAttributeError: 'PolynomialRing_field' object has no attribute 'sum'\nsage: 'sum' in R.__dir__()\nTrue\n```\n\n**Reviewer:** Simon King\n\nIssue created by migration from https://trac.sagemath.org/ticket/8613\n\n",
    "closed_at": "2011-04-11T14:59:48Z",
    "created_at": "2010-03-26T21:46:19Z",
    "labels": [
        "component: categories",
        "bug",
        "duplicate"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "__dir__() / tab completion returns nonexistent attributes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8613",
    "user": "https://github.com/mezzarobba"
}
```
On the following example, tab completion suggests ``sum``, which is not an attribute of ``R``.

```
sage: R = QQ['t']
sage: R.su       
R.sum                               R.summation
R.summation_from_element_class_add             
sage: R.sum                                    
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/home/marc/co/sage-4.3.4/<ipython console> in <module>()

/home/marc/co/sage-4.3.4/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (sage/structure/parent.c:5120)()

/home/marc/co/sage-4.3.4/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.raise_attribute_error (sage/structure/parent.c:2638)()                                                                             

AttributeError: 'PolynomialRing_field' object has no attribute 'sum'
sage: 'sum' in R.__dir__()
True
```

**Reviewer:** Simon King

Issue created by migration from https://trac.sagemath.org/ticket/8613





---

archive/issue_comments_089730.json:
```json
{
    "body": "<a id='comment:1'></a>\nNotice also that other longer summation_from_element_class_add:\n\n```\nsage: search_src('summation_from_element_class_add')\ncategories/commutative_additive_semigroups.py:121:        summation_from_element_class_add = summation\ncategories/commutative_additive_semigroups.py:136:            if (self.summation != self.summation_from_element_class_add) and hasattr(self, \"element_class\") and hasattr(self.element_class, \"_add_parent\"):\n\n```\n\nSo, this suggests that this bug has something to do with Nicolas's category theory rewrite?  I'll post to sage-combinat.",
    "created_at": "2010-03-29T04:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8613#issuecomment-89730",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>
Notice also that other longer summation_from_element_class_add:

```
sage: search_src('summation_from_element_class_add')
categories/commutative_additive_semigroups.py:121:        summation_from_element_class_add = summation
categories/commutative_additive_semigroups.py:136:            if (self.summation != self.summation_from_element_class_add) and hasattr(self, "element_class") and hasattr(self.element_class, "_add_parent"):

```

So, this suggests that this bug has something to do with Nicolas's category theory rewrite?  I'll post to sage-combinat.



---

archive/issue_comments_089731.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis issue happens in both the notebook and command line.",
    "created_at": "2010-03-29T04:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8613#issuecomment-89731",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>
This issue happens in both the notebook and command line.



---

archive/issue_comments_089732.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis should be fixed once #9138 will be implemented.",
    "created_at": "2010-06-07T07:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8613#issuecomment-89732",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:3'></a>
This should be fixed once #9138 will be implemented.



---

archive/issue_comments_089733.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-04-10T15:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8613#issuecomment-89733",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_089734.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-04-10T15:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8613#issuecomment-89734",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_089735.json:
```json
{
    "body": "<a id='comment:5'></a>\nIndeed, it is a duplicate.\n\nWith the patches from #9944 and #9138, one obtains:\n\n```\nsage: R = QQ['t']\nsage: R.sum\n<bound method PolynomialRing_field_with_category.sum of Univariate Polynomial Ring in t over Rational Field>\nsage: R.summ\nR.summation                         R.summation_from_element_class_add\nsage: R.summation_from_element_class_add\n<bound method PolynomialRing_field_with_category.summation of Univariate Polynomial Ring in t over Rational Field>\n```\n\n\nI learnt: In that case, one should give a ticket a positive review and choose the milestone \"duplicate\", so that the release manager may close it.",
    "created_at": "2011-04-10T15:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8613#issuecomment-89735",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>
Indeed, it is a duplicate.

With the patches from #9944 and #9138, one obtains:

```
sage: R = QQ['t']
sage: R.sum
<bound method PolynomialRing_field_with_category.sum of Univariate Polynomial Ring in t over Rational Field>
sage: R.summ
R.summation                         R.summation_from_element_class_add
sage: R.summation_from_element_class_add
<bound method PolynomialRing_field_with_category.summation of Univariate Polynomial Ring in t over Rational Field>
```


I learnt: In that case, one should give a ticket a positive review and choose the milestone "duplicate", so that the release manager may close it.



---

archive/issue_events_025968.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-04-10T15:09:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8613#event-25968"
}
```



---

archive/issue_comments_089736.json:
```json
{
    "body": "**Reviewer:** Simon King",
    "created_at": "2011-04-10T15:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8613#issuecomment-89736",
    "user": "https://github.com/simon-king-jena"
}
```

**Reviewer:** Simon King



---

archive/issue_comments_089737.json:
```json
{
    "body": "<a id='comment:6'></a>\nPS: #9138 needs review (hint...)",
    "created_at": "2011-04-10T15:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8613#issuecomment-89737",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>
PS: #9138 needs review (hint...)



---

archive/issue_events_025969.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T14:59:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8613",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8613#event-25969"
}
```
