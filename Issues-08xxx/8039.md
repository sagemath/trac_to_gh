# Issue 8039: ATLAS libs fail to build on Open Solaris 64 bit due to wrong LDFLAG -melf_x86_64

archive/issues_008039.json:
```json
{
    "body": "in src/CONFIG/src/SpewMakeInc.c LDFLAGS are set for inclusion in Make.inc. This file is included in all Makefiles.\n\nAs a workaround I changed -melf_x86_64 in -64 in Make.inc in the directory where the libraries are built.\n\nThis is SunOS with SAGE64=\"yes\" only.\n\nAn spkg can be found here:\n[http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg)\n\nAssignee: drkirkby\n\nKeywords: building\n\nResolution: fixed\n\nAuthor: Jaap Spies\n\nReviewer: David Kirkby\n\nUpstream: Workaround found; Bug reported upstream.\n\nMerged: sage-4.3.4.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/8039\n\n",
    "closed_at": "2010-03-02T23:08:09Z",
    "created_at": "2010-01-22T13:11:49Z",
    "labels": [
        "component: porting",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3.4",
    "title": "ATLAS libs fail to build on Open Solaris 64 bit due to wrong LDFLAG -melf_x86_64",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8039",
    "user": "https://github.com/jaapspies"
}
```
in src/CONFIG/src/SpewMakeInc.c LDFLAGS are set for inclusion in Make.inc. This file is included in all Makefiles.

As a workaround I changed -melf_x86_64 in -64 in Make.inc in the directory where the libraries are built.

This is SunOS with SAGE64="yes" only.

An spkg can be found here:
[http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg)

Assignee: drkirkby

Keywords: building

Resolution: fixed

Author: Jaap Spies

Reviewer: David Kirkby

Upstream: Workaround found; Bug reported upstream.

Merged: sage-4.3.4.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/8039





---

archive/issue_comments_080663.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-01-22T15:04:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80663",
    "user": "https://github.com/jaapspies"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_080664.json:
```json
{
    "body": "<a id='comment:2'></a>\nWhat has been changed? I can't find the changed file? You should not change the ATLAS source code, but create a patch, which gets applied with spkg-install.",
    "created_at": "2010-01-26T12:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80664",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:2'></a>
What has been changed? I can't find the changed file? You should not change the ATLAS source code, but create a patch, which gets applied with spkg-install.



---

archive/issue_comments_080665.json:
```json
{
    "body": "<a id='comment:3'></a>\nPS, you should also report this failure upstream.",
    "created_at": "2010-01-26T12:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80665",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:3'></a>
PS, you should also report this failure upstream.



---

archive/issue_comments_080666.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [drkirkby](#comment%3A2):\n> What has been changed? I can't find the changed file? You should not change the ATLAS source code, but create a patch, which gets applied with spkg-install. \n> \n\n\nSee the patch.\n\nJaap",
    "created_at": "2010-01-26T18:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80666",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:4'></a>
Replying to [drkirkby](#comment%3A2):
> What has been changed? I can't find the changed file? You should not change the ATLAS source code, but create a patch, which gets applied with spkg-install. 
> 


See the patch.

Jaap



---

archive/issue_comments_080667.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-01-27T02:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80667",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_080668.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis will not work for me, as I believe there is a syntax error in your script.  This might be an example of things that work on one shell do not on another.\n\n```\nATLAS-build/lib/Makefile will be changed.\n'-shared' will be changed to '-G'\n'-soname' will be changed to '-h'\n'--whole-archive' will be changed to '-zallextract'\n'--no-whole-archive' will be changed to '-zdefaultextract'\nA copy of the original Makefile will be copied to Makefile.orig\n./spkg-install-script: line 94: [: yes: unary operator expected\nmake[2]: Entering directory `/export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build/lib'\nrm -f libatlas.so liblapack.so\n```\n\nThis is line 94 of the script, which is causing the problem. \n\n```\n  if [ $SAGE64 =\"yes\" ]; then \n```\n\nI believe there should be a space after the '=' sign. \n\nI'd make a couple of other points tests in general, I've gleaned from studying the shell more, and from things from comp.unix.shell. \n\n* It is better to test for \"x$SAGE64\" = xyes, as some shells have problems if SAGE64 is not defined. Adding an 'x' or anything else you fancy, will avoid that possibility, though 'x' is commonly used, so I would stick to a lower case x. That problem is not true of modern versions of bash, but its a good habit to get into, as then your scripts will work on any shell. \n* It is desirable to quote \"x$SAGE64\" as potentially SAGE64 might be set to something with spaces in it. I know in this case, there unlikely to be spaces, but you don't know if someone has set it correctly or not. \n\nHence the following is the safest test sort of test, and does not contain any unnecessary quotes. Quoting xNO will not hurt, but it is unnecessary as you know xNO will have no spaces, but you don't know that about FOOBAR.\n\n``` \n             if [ \"x$FOOBAR\" = xNO ]; then\n```\n\nI leave you to convert it to what is needed here. Otherwise I become an author and can't review it!\n\nI would also \n* Report this upstream, and add to the trac ticket the URL of the ticket. Currently it is set to N/A which is clearly not true. \n* Stick a note in the spkg-install saying why the change is made. i.e. the original flag is not valid. -64 is needed to build 64-bit, or something like that. \n* I would echo a quick statement like I did before when changing flags, like I did before. \n\n``` \n'-shared' will be changed to '-G'\n```\n\n* You are using a temporary variable of 'makefile' while editing 'Make.inc' I think that is unwise, and I know I was guilty of it above, but 'makefile' has some significance, and you could overwrite such a file if it existed. \n\nBetter would be \n\n```\nsed 's/-melf_x86_64/-64/g' Make.inc > Make.inc.tmp\n```\n\nor perhaps uses Make.inc.$$, which will create a file with the PID appended. \n\nAlso, the description is inaccurate, as it says \"As a workaround I changed -melf_x86_64 in -64 in Make.inc\". I think you mean you changed it *'too* -64. \n\nSo with \n\n* The syntax error removed\n* Description updated. \n* Some other minor changes you might want to consider\n* Reported upstream, the URL posted. \n* Change to \"reported upstream\" from N/A \n* Revised patch attached. \n\nthen I think this should be ok. But now, there is a syntax error so it will not build at all for me. \n\nDave",
    "created_at": "2010-01-27T02:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80668",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:5'></a>
This will not work for me, as I believe there is a syntax error in your script.  This might be an example of things that work on one shell do not on another.

```
ATLAS-build/lib/Makefile will be changed.
'-shared' will be changed to '-G'
'-soname' will be changed to '-h'
'--whole-archive' will be changed to '-zallextract'
'--no-whole-archive' will be changed to '-zdefaultextract'
A copy of the original Makefile will be copied to Makefile.orig
./spkg-install-script: line 94: [: yes: unary operator expected
make[2]: Entering directory `/export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build/lib'
rm -f libatlas.so liblapack.so
```

This is line 94 of the script, which is causing the problem. 

```
  if [ $SAGE64 ="yes" ]; then 
```

I believe there should be a space after the '=' sign. 

I'd make a couple of other points tests in general, I've gleaned from studying the shell more, and from things from comp.unix.shell. 

* It is better to test for "x$SAGE64" = xyes, as some shells have problems if SAGE64 is not defined. Adding an 'x' or anything else you fancy, will avoid that possibility, though 'x' is commonly used, so I would stick to a lower case x. That problem is not true of modern versions of bash, but its a good habit to get into, as then your scripts will work on any shell. 
* It is desirable to quote "x$SAGE64" as potentially SAGE64 might be set to something with spaces in it. I know in this case, there unlikely to be spaces, but you don't know if someone has set it correctly or not. 

Hence the following is the safest test sort of test, and does not contain any unnecessary quotes. Quoting xNO will not hurt, but it is unnecessary as you know xNO will have no spaces, but you don't know that about FOOBAR.

``` 
             if [ "x$FOOBAR" = xNO ]; then
```

I leave you to convert it to what is needed here. Otherwise I become an author and can't review it!

I would also 
* Report this upstream, and add to the trac ticket the URL of the ticket. Currently it is set to N/A which is clearly not true. 
* Stick a note in the spkg-install saying why the change is made. i.e. the original flag is not valid. -64 is needed to build 64-bit, or something like that. 
* I would echo a quick statement like I did before when changing flags, like I did before. 

``` 
'-shared' will be changed to '-G'
```

* You are using a temporary variable of 'makefile' while editing 'Make.inc' I think that is unwise, and I know I was guilty of it above, but 'makefile' has some significance, and you could overwrite such a file if it existed. 

Better would be 

```
sed 's/-melf_x86_64/-64/g' Make.inc > Make.inc.tmp
```

or perhaps uses Make.inc.$$, which will create a file with the PID appended. 

Also, the description is inaccurate, as it says "As a workaround I changed -melf_x86_64 in -64 in Make.inc". I think you mean you changed it *'too* -64. 

So with 

* The syntax error removed
* Description updated. 
* Some other minor changes you might want to consider
* Reported upstream, the URL posted. 
* Change to "reported upstream" from N/A 
* Revised patch attached. 

then I think this should be ok. But now, there is a syntax error so it will not build at all for me. 

Dave



---

archive/issue_comments_080669.json:
```json
{
    "body": "<a id='comment:6'></a>\nAttachment [atlas-3.8.3.p11.patch](tarball://root/attachments/some-uuid/ticket8039/atlas-3.8.3.p11.patch) by @jaapspies created at 2010-01-27 15:02:55\n\nMostly done as you wrote above.\n\nReported upstream:\n[https://sourceforge.net/tracker/?func=detail&aid=2941029&group_id=23725&atid=379483](https://sourceforge.net/tracker/?func=detail&aid=2941029&group_id=23725&atid=379483)\n\nJaap",
    "created_at": "2010-01-27T15:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80669",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:6'></a>
Attachment [atlas-3.8.3.p11.patch](tarball://root/attachments/some-uuid/ticket8039/atlas-3.8.3.p11.patch) by @jaapspies created at 2010-01-27 15:02:55

Mostly done as you wrote above.

Reported upstream:
[https://sourceforge.net/tracker/?func=detail&aid=2941029&group_id=23725&atid=379483](https://sourceforge.net/tracker/?func=detail&aid=2941029&group_id=23725&atid=379483)

Jaap



---

archive/issue_comments_080670.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-01-27T15:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80670",
    "user": "https://github.com/jaapspies"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_080671.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Workaround found; Bug reported upstream.\"",
    "created_at": "2010-01-27T15:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80671",
    "user": "https://github.com/jaapspies"
}
```

Changing upstream from "N/A" to "Workaround found; Bug reported upstream."



---

archive/issue_comments_080672.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-01-28T14:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80672",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_080673.json:
```json
{
    "body": "<a id='comment:7'></a>\nI'm a bit worried about this one:\n\n```\nPlatform detected to be 32 bits\n```\n\nDave",
    "created_at": "2010-01-28T14:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80673",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:7'></a>
I'm a bit worried about this one:

```
Platform detected to be 32 bits
```

Dave



---

archive/issue_comments_080674.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt also fails on my machine\n\n```\nmake[1]: *** [atlas_run] Error 7\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build'\nmake: *** [IRun_comp] Error 2\nAssertion failed: !system(ln), file /export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build/../src//CONFIG/src/config.c, line 125\n\nOS configured as SunOS (2)\n\nAssembly configured as GAS_x8632 (1)\n\nVector ISA Extension configured as  SSE3 (2,28)\n\nArchitecture configured as  Corei7 (16)\n\nClock rate configured as 3325Mhz\nCannot detect CPU throttling.\n/bin/sh: line 1: 22300: Abort(coredump)\nxconfig exited with 6\nmake -f Make.top build\nmake[1]: Entering directory `/export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build'\nmake[1]: Make.top: No such file or directory\nmake[1]: *** No rule to make target `Make.top'.  Stop.\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build'\nmake: *** [build] Error 2\nFailed to build ATLAS.\nFailed to build ATLAS.\n\nreal\t0m3.065s\nuser\t0m1.150s\nsys\t0m1.074s\nsage: An error occurred while installing atlas-3.8.3.p11\n```",
    "created_at": "2010-01-28T14:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80674",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:8'></a>
It also fails on my machine

```
make[1]: *** [atlas_run] Error 7
make[1]: Leaving directory `/export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build'
make: *** [IRun_comp] Error 2
Assertion failed: !system(ln), file /export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build/../src//CONFIG/src/config.c, line 125

OS configured as SunOS (2)

Assembly configured as GAS_x8632 (1)

Vector ISA Extension configured as  SSE3 (2,28)

Architecture configured as  Corei7 (16)

Clock rate configured as 3325Mhz
Cannot detect CPU throttling.
/bin/sh: line 1: 22300: Abort(coredump)
xconfig exited with 6
make -f Make.top build
make[1]: Entering directory `/export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build'
make[1]: Make.top: No such file or directory
make[1]: *** No rule to make target `Make.top'.  Stop.
make[1]: Leaving directory `/export/home/drkirkby/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build'
make: *** [build] Error 2
Failed to build ATLAS.
Failed to build ATLAS.

real	0m3.065s
user	0m1.150s
sys	0m1.074s
sage: An error occurred while installing atlas-3.8.3.p11
```



---

archive/issue_comments_080675.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Kirkby\"",
    "created_at": "2010-01-28T14:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80675",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing reviewer from "" to "David Kirkby"



---

archive/issue_comments_080676.json:
```json
{
    "body": "<a id='comment:9'></a>\nThis is on your machine too:\n\n\n```\nchmod: cannot access `/export/home/jaap/sage_port/sage-4.3.1/local/lib/libptf77blas.a': No such file or directory\nmake[1]: [install_lib] Error 1 (ignored)\nmake[1]: Leaving directory `/export/home/jaap/sage_port/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build'\nDeleting liblapack.so on Solaris due to bug in numpy/scipy\n\nreal    8m49.450s\nuser    7m35.780s\nsys     1m0.353s\nSuccessfully installed atlas-3.8.3.p11\n\n```\n\n\nWhat's wrong?\n\nJaap",
    "created_at": "2010-01-28T14:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80676",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:9'></a>
This is on your machine too:


```
chmod: cannot access `/export/home/jaap/sage_port/sage-4.3.1/local/lib/libptf77blas.a': No such file or directory
make[1]: [install_lib] Error 1 (ignored)
make[1]: Leaving directory `/export/home/jaap/sage_port/sage-4.3.1/spkg/build/atlas-3.8.3.p11/ATLAS-build'
Deleting liblapack.so on Solaris due to bug in numpy/scipy

real    8m49.450s
user    7m35.780s
sys     1m0.353s
Successfully installed atlas-3.8.3.p11

```


What's wrong?

Jaap



---

archive/issue_comments_080677.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-02-05T14:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80677",
    "user": "https://github.com/jaapspies"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_080678.json:
```json
{
    "body": "<a id='comment:10'></a>\nDave, Did you try again? Still no reaction from upstream.\n\nJaap",
    "created_at": "2010-02-05T14:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80678",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:10'></a>
Dave, Did you try again? Still no reaction from upstream.

Jaap



---

archive/issue_comments_080679.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-02-05T17:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80679",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_080680.json:
```json
{
    "body": "<a id='comment:11'></a>\nGiven\n* I found -m64 fixed the problem on the command line, and \n* you have proven it works on my machine\n\nI am going to give this is a positive review.",
    "created_at": "2010-02-05T17:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80680",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:11'></a>
Given
* I found -m64 fixed the problem on the command line, and 
* you have proven it works on my machine

I am going to give this is a positive review.



---

archive/issue_comments_080681.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2010-02-10T17:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80681",
    "user": "https://github.com/qed777"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_080682.json:
```json
{
    "body": "<a id='comment:12'></a>\nSage 4.3.2 includes `atlas-3.8.3.p11.spkg`.  Should the package here be `p12`?",
    "created_at": "2010-02-10T17:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80682",
    "user": "https://github.com/qed777"
}
```

<a id='comment:12'></a>
Sage 4.3.2 includes `atlas-3.8.3.p11.spkg`.  Should the package here be `p12`?



---

archive/issue_comments_080683.json:
```json
{
    "body": "Changing work_issues from \"\" to \"Increase patch level\"",
    "created_at": "2010-02-10T17:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80683",
    "user": "https://github.com/qed777"
}
```

Changing work_issues from "" to "Increase patch level"



---

archive/issue_comments_080684.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [mpatel](#comment%3A12):\n> Sage 4.3.2 includes `atlas-3.8.3.p11.spkg`.  Should the package here be `p12`?\n\n\n\nMaybe now, but not on the moment I wrote the patch!\n\nThere is a real danger that tickets with positive review are not merged for a long time and bitrot.\n\nJaap",
    "created_at": "2010-02-10T19:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80684",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:13'></a>
Replying to [mpatel](#comment%3A12):
> Sage 4.3.2 includes `atlas-3.8.3.p11.spkg`.  Should the package here be `p12`?



Maybe now, but not on the moment I wrote the patch!

There is a real danger that tickets with positive review are not merged for a long time and bitrot.

Jaap



---

archive/issue_comments_080685.json:
```json
{
    "body": "<a id='comment:14'></a>\nI think I've merged all the other Solaris-related tickets at\u00a0{32}\u00a0into a candidate 4.3.3.alpha0.",
    "created_at": "2010-02-10T19:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80685",
    "user": "https://github.com/qed777"
}
```

<a id='comment:14'></a>
I think I've merged all the other Solaris-related tickets at {32} into a candidate 4.3.3.alpha0.



---

archive/issue_comments_080686.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [mpatel](#comment%3A14):\n> I think I've merged all the other Solaris-related tickets at\u00a0{32}\u00a0into a candidate 4.3.3.alpha0.\n\n\nLook at 'porting' to see some more!\n\nJaap",
    "created_at": "2010-02-10T20:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80686",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:15'></a>
Replying to [mpatel](#comment%3A14):
> I think I've merged all the other Solaris-related tickets at {32} into a candidate 4.3.3.alpha0.


Look at 'porting' to see some more!

Jaap



---

archive/issue_comments_080687.json:
```json
{
    "body": "<a id='comment:16'></a>\nYes, I've already those.",
    "created_at": "2010-02-10T22:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80687",
    "user": "https://github.com/qed777"
}
```

<a id='comment:16'></a>
Yes, I've already those.



---

archive/issue_comments_080688.json:
```json
{
    "body": "Changing work_issues from \"Increase patch level\" to \"Rebase vs. #7827\"",
    "created_at": "2010-02-10T22:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80688",
    "user": "https://github.com/qed777"
}
```

Changing work_issues from "Increase patch level" to "Rebase vs. #7827"



---

archive/issue_comments_080689.json:
```json
{
    "body": "Attachment [atlas-3.8.3.p12.patch](tarball://root/attachments/some-uuid/ticket8039/atlas-3.8.3.p12.patch) by @jaapspies created at 2010-02-22 21:39:10\n\nUpdated patch",
    "created_at": "2010-02-22T21:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80689",
    "user": "https://github.com/jaapspies"
}
```

Attachment [atlas-3.8.3.p12.patch](tarball://root/attachments/some-uuid/ticket8039/atlas-3.8.3.p12.patch) by @jaapspies created at 2010-02-22 21:39:10

Updated patch



---

archive/issue_comments_080690.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n This is SunOS with SAGE64=\"yes\" only.\n \n An spkg can be found here:\n-[http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p11.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p11.spkg)\n+[http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg)\n``````\n",
    "created_at": "2010-02-22T21:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80690",
    "user": "https://github.com/jaapspies"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 This is SunOS with SAGE64="yes" only.
 
 An spkg can be found here:
-[http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p11.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p11.spkg)
+[http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg)
``````




---

archive/issue_comments_080691.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-02-22T21:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80691",
    "user": "https://github.com/jaapspies"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_080692.json:
```json
{
    "body": "<a id='comment:18'></a>\nRebased and increased patch level. New spkg:\n\n[http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg)\n\n\n```\nmake[1]: Leaving directory `/export/home/jaap/sage_port/sage-4.3.2.alpha1/spkg/build/atlas-3.8.3.p12/ATLAS-build'\nDeleting liblapack.so on Solaris due to bug in numpy/scipy\n\nreal    9m5.693s\nuser    7m45.589s\nsys     1m3.860s\nSuccessfully installed atlas-3.8.3.p12\nYou can safely delete the temporary build directory\n/export/home/jaap/sage_port/sage-4.3.2.alpha1/spkg/build/atlas-3.8.3.p12\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing atlas-3.8.3.p12.spkg\n-bash-3.2$ file local/lib/libatlas.*\nlocal/lib/libatlas.a:   current ar archive, not a dynamic executable or shared object\nlocal/lib/libatlas.so:  ELF 64-bit LSB dynamic lib AMD64 Version 1, dynamically linked, not stripped, no debugging information available\n\n```\n\nJaap",
    "created_at": "2010-02-22T21:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80692",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:18'></a>
Rebased and increased patch level. New spkg:

[http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg)


```
make[1]: Leaving directory `/export/home/jaap/sage_port/sage-4.3.2.alpha1/spkg/build/atlas-3.8.3.p12/ATLAS-build'
Deleting liblapack.so on Solaris due to bug in numpy/scipy

real    9m5.693s
user    7m45.589s
sys     1m3.860s
Successfully installed atlas-3.8.3.p12
You can safely delete the temporary build directory
/export/home/jaap/sage_port/sage-4.3.2.alpha1/spkg/build/atlas-3.8.3.p12
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing atlas-3.8.3.p12.spkg
-bash-3.2$ file local/lib/libatlas.*
local/lib/libatlas.a:   current ar archive, not a dynamic executable or shared object
local/lib/libatlas.so:  ELF 64-bit LSB dynamic lib AMD64 Version 1, dynamically linked, not stripped, no debugging information available

```

Jaap



---

archive/issue_comments_080693.json:
```json
{
    "body": "Changing work_issues from \"Rebase vs. #7827\" to \"\"",
    "created_at": "2010-02-22T21:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80693",
    "user": "https://github.com/jaapspies"
}
```

Changing work_issues from "Rebase vs. #7827" to ""



---

archive/issue_comments_080694.json:
```json
{
    "body": "<a id='comment:19'></a>\nThat looks good. It would be nice to find out exactly what -melf_x86_64 is supposed to do, but on a practical level, this allows ATLAS to build on OpenSolaris. Some more changees may be needed once Sage builds and we can run the doctests. But at least this builds, only effects Solaris and allows progress to be made.",
    "created_at": "2010-02-22T22:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80694",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:19'></a>
That looks good. It would be nice to find out exactly what -melf_x86_64 is supposed to do, but on a practical level, this allows ATLAS to build on OpenSolaris. Some more changees may be needed once Sage builds and we can run the doctests. But at least this builds, only effects Solaris and allows progress to be made.



---

archive/issue_comments_080695.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-02-22T22:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80695",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_080696.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.3.4.alpha0\"",
    "created_at": "2010-03-02T23:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80696",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing merged from "" to "sage-4.3.4.alpha0"



---

archive/issue_events_031610.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-03-02T23:08:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8039#event-31610"
}
```



---

archive/issue_comments_080697.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-03-02T23:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80697",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Resolution: fixed



---

archive/issue_comments_080698.json:
```json
{
    "body": "<a id='comment:20'></a>\nMerged [atlas-3.8.3.p12.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg) in the standard spkg repository.",
    "created_at": "2010-03-02T23:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8039#issuecomment-80698",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:20'></a>
Merged [atlas-3.8.3.p12.spkg](http://boxen.math.washington.edu/home/jsp/ports/atlas-3.8.3.p12.spkg) in the standard spkg repository.



---

archive/issue_events_031611.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/8039",
    "rename": {
        "from": "[with spkg, needs review] ATLAS libs fail to build on Open Solaris 64 bit due to wrong LDFLAG -melf_x86_64",
        "to": "ATLAS libs fail to build on Open Solaris 64 bit due to wrong LDFLAG -melf_x86_64"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8039#event-31611"
}
```
