# Issue 8478: Programming tutorial page seems incorrect

archive/issues_008478.json:
```json
{
    "body": "The section Standalone !Python/Sage Scripts at http://www.sagemath.org/doc/tutorial/programming.html#section-loadattach seems to have two problems (profuse apologies if these are actually user errors).\n\n1. __`#!/usr/bin/env sage -python`__ doesn't work in linux since a shebang line can only handle a single argument ('sage' in this case). One workaround is to use __`#!/path/to/sage -python`__ -- I have since verified, however, that simply using __`#!/usr/bin/env sage`__ **does** work with sage 5.8.\n2. The script itself seems broken.  When testing it using sage 4.3.3 (and 5.8), running __`./factor 2006`__ works as expected, but __`./factor \"32*x^5-1\"`__ gives:\n\n```\nTraceback (most recent call last):\n  File \"./factor\", line 11, in <module>\n    print factor(sage_eval(sys.argv[1]))\n  File \"/opt/sage-4.3.3-linux-32bit-ubuntu_9.10-i686-Linux/local/lib/python2.6/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n    return eval(source, sage.all.__dict__, locals)\n  File \"<string>\", line 1, in <module>\nNameError: name 'x' is not defined\n```\n\nTo correct this, see the comment attached to this ticket which provides a new version of the 'factor' script.\n\nAssignee: mvngu\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/8478\n\n",
    "created_at": "2010-03-07T20:11:17Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "title": "Programming tutorial page seems incorrect",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8478",
    "user": "https://trac.sagemath.org/admin/accounts/users/lesshaste"
}
```
The section Standalone !Python/Sage Scripts at http://www.sagemath.org/doc/tutorial/programming.html#section-loadattach seems to have two problems (profuse apologies if these are actually user errors).

1. __`#!/usr/bin/env sage -python`__ doesn't work in linux since a shebang line can only handle a single argument ('sage' in this case). One workaround is to use __`#!/path/to/sage -python`__ -- I have since verified, however, that simply using __`#!/usr/bin/env sage`__ **does** work with sage 5.8.
2. The script itself seems broken.  When testing it using sage 4.3.3 (and 5.8), running __`./factor 2006`__ works as expected, but __`./factor "32*x^5-1"`__ gives:

```
Traceback (most recent call last):
  File "./factor", line 11, in <module>
    print factor(sage_eval(sys.argv[1]))
  File "/opt/sage-4.3.3-linux-32bit-ubuntu_9.10-i686-Linux/local/lib/python2.6/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
    return eval(source, sage.all.__dict__, locals)
  File "<string>", line 1, in <module>
NameError: name 'x' is not defined
```

To correct this, see the comment attached to this ticket which provides a new version of the 'factor' script.

Assignee: mvngu

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/8478





---

archive/issue_comments_076286.json:
```json
{
    "body": "<a id='comment:1'></a>A better way of handling the `#!` problem might be to use `#!/usr/bin/env sage-python`.",
    "created_at": "2010-03-07T20:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8478",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8478#issuecomment-76286",
    "user": "https://github.com/wjp"
}
```

<a id='comment:1'></a>A better way of handling the `#!` problem might be to use `#!/usr/bin/env sage-python`.



---

archive/issue_comments_076287.json:
```json
{
    "body": "<a id='comment:2'></a>Here's a version which should work correctly (at least with sage 5.8):\n\n\n```/usr/bin/env sage\n\nimport sys\nfrom sage.all import *\n\nif len(sys.argv) != 2:\n    print \"Usage: %s <n>\"%sys.argv[0]\n    print \"Outputs the prime factorization of n.\"\n    sys.exit(1)\n    \ntry:\n    e = sage_eval(sys.argv[1])\nexcept NameError:\n    e = symbolic_expression(sys.argv[1])\n\nprint factor(e)\n\n```",
    "created_at": "2011-08-08T22:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8478",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8478#issuecomment-76287",
    "user": "https://trac.sagemath.org/admin/accounts/users/edgimar"
}
```

<a id='comment:2'></a>Here's a version which should work correctly (at least with sage 5.8):


```/usr/bin/env sage

import sys
from sage.all import *

if len(sys.argv) != 2:
    print "Usage: %s <n>"%sys.argv[0]
    print "Outputs the prime factorization of n."
    sys.exit(1)
    
try:
    e = sage_eval(sys.argv[1])
except NameError:
    e = symbolic_expression(sys.argv[1])

print factor(e)

```



---

archive/issue_comments_076288.json:
```json
{
    "body": "<a id='comment:4'></a>See also [this commit](https://bitbucket.org/edgimar/sage-main/commits/8f2d381fae7eb0e8de92ecab9f12f4b1d3ef951e) on bitbucket.",
    "created_at": "2013-08-02T15:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8478",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8478#issuecomment-76288",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'></a>See also [this commit](https://bitbucket.org/edgimar/sage-main/commits/8f2d381fae7eb0e8de92ecab9f12f4b1d3ef951e) on bitbucket.
