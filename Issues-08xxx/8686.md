# Issue 8686: gettext related bug in _ (history)

archive/issues_008686.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "In versions of Sage up to 4.3.2, the following worked as expected:\n\n```\n>./sage\n----------------------------------------------------------------------\n| Sage Version 4.3.2, Release Date: 2010-02-06                       |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nsage: _?\n[...]\nsage: _\n''\nsage: _\n''\n```\n\nHowever, with Sage 4.3.3, it has stopped working:\n\n```\n----------------------------------------------------------------------\n| Sage Version 4.3.3, Release Date: 2010-02-21                       |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nsage: _?\n[...]\nsage: _\n''\nsage: _\n<bound method NullTranslations.ugettext of <gettext.NullTranslations instance at 0x4b1a680>>\n```\n\nFor some things, the history works as expected, but for others it does not.  To me it appears that it is \"simple\" things, e.g. above, the empty expression, or simple expressions like \"3+4\" where it does not work anymore, but for more complex things (e.g. if you call a function that returns something), \"_\" still does what you would expect it to do.\n\nThis bug still exists in Sage 4.3.5.\n\nCC:  @williamstein @TimDumol\n\nKeywords: **gettext history documentation**\n\nComponent: **notebook**\n\nAuthor: **Mike Hansen**\n\nReviewer: **Tim Dumol**\n\nMerged: **SageNB 0.8.1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8686_\n\n",
    "closed_at": "2010-07-11T06:02:25Z",
    "created_at": "2010-04-14T13:01:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "gettext related bug in _ (history)",
    "type": "issue",
    "updated_at": "2010-07-11T06:02:25Z",
    "url": "https://github.com/sagemath/sage/issues/8686",
    "user": "https://github.com/sagetrac-logix"
}
```
In versions of Sage up to 4.3.2, the following worked as expected:

```
>./sage
----------------------------------------------------------------------
| Sage Version 4.3.2, Release Date: 2010-02-06                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
sage: _?
[...]
sage: _
''
sage: _
''
```

However, with Sage 4.3.3, it has stopped working:

```
----------------------------------------------------------------------
| Sage Version 4.3.3, Release Date: 2010-02-21                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
sage: _?
[...]
sage: _
''
sage: _
<bound method NullTranslations.ugettext of <gettext.NullTranslations instance at 0x4b1a680>>
```

For some things, the history works as expected, but for others it does not.  To me it appears that it is "simple" things, e.g. above, the empty expression, or simple expressions like "3+4" where it does not work anymore, but for more complex things (e.g. if you call a function that returns something), "_" still does what you would expect it to do.

This bug still exists in Sage 4.3.5.

CC:  @williamstein @TimDumol

Keywords: **gettext history documentation**

Component: **notebook**

Author: **Mike Hansen**

Reviewer: **Tim Dumol**

Merged: **SageNB 0.8.1**

_Issue created by migration from https://trac.sagemath.org/ticket/8686_





---

archive/issue_events_109647.json:
```json
{
    "actor": "https://github.com/sagetrac-logix",
    "created_at": "2010-04-14T13:01:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "milestone_number": null,
    "milestone_title": "sage-4.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109647"
}
```



---

archive/issue_events_109648.json:
```json
{
    "actor": "https://github.com/sagetrac-logix",
    "created_at": "2010-04-14T13:01:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interact",
    "label_color": "0000ff",
    "label_name": "c: interact",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109648"
}
```



---

archive/issue_events_109649.json:
```json
{
    "actor": "https://github.com/sagetrac-logix",
    "created_at": "2010-04-14T13:01:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109649"
}
```



---

archive/issue_events_109650.json:
```json
{
    "actor": "https://github.com/sagetrac-logix",
    "created_at": "2010-04-14T13:01:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109650"
}
```



---

archive/issue_events_109651.json:
```json
{
    "actor": "https://github.com/itolkov",
    "created_at": "2010-04-14T13:01:16Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "subject": "https://github.com/sagetrac-logix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109651"
}
```



---

archive/issue_events_109652.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-04-14T13:01:16Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "subject": "https://github.com/sagetrac-logix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109652"
}
```



---

archive/issue_events_109653.json:
```json
{
    "actor": "https://github.com/itolkov",
    "created_at": "2010-04-14T13:08:09Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "subject": "https://github.com/sagetrac-logix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109653"
}
```



---

archive/issue_events_109654.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-04-14T13:08:09Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "subject": "https://github.com/sagetrac-logix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109654"
}
```



---

archive/issue_events_109655.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-14T13:08:09Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "subject": "https://github.com/sagetrac-logix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109655"
}
```



---

archive/issue_events_109656.json:
```json
{
    "actor": "https://github.com/sagetrac-logix",
    "created_at": "2010-04-14T13:08:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interact",
    "label_color": "0000ff",
    "label_name": "c: interact",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109656"
}
```



---

archive/issue_events_109657.json:
```json
{
    "actor": "https://github.com/sagetrac-logix",
    "created_at": "2010-04-14T13:08:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "000080",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109657"
}
```



---

archive/issue_comments_070105.json:
```json
{
    "body": "Changed author from **Harold Gutch** to none",
    "created_at": "2010-04-14T13:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8686#issuecomment-70105",
    "user": "https://github.com/sagetrac-logix"
}
```

Changed author from **Harold Gutch** to none



---

archive/issue_events_109658.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2010-05-03T22:01:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109658"
}
```



---

archive/issue_comments_070106.json:
```json
{
    "body": "Author: **Mike Hansen**",
    "created_at": "2010-05-03T22:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8686#issuecomment-70106",
    "user": "https://github.com/mwhansen"
}
```

Author: **Mike Hansen**



---

archive/issue_comments_070107.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAttachment: **[trac_8686.patch.gz](https://github.com/sagemath/sage/files/ticket8686/trac_8686.patch.gz)**",
    "created_at": "2010-05-03T22:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8686#issuecomment-70107",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:2" align="right">comment:2</div>

Attachment: **[trac_8686.patch.gz](https://github.com/sagemath/sage/files/ticket8686/trac_8686.patch.gz)**



---

archive/issue_comments_070108.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNice debugging. Works as advertised.",
    "created_at": "2010-05-04T04:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8686#issuecomment-70108",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:4" align="right">comment:4</div>

Nice debugging. Works as advertised.



---

archive/issue_events_109659.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-05-04T04:31:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109659"
}
```



---

archive/issue_events_109660.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-05-04T04:31:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109660"
}
```



---

archive/issue_comments_070109.json:
```json
{
    "body": "Reviewer: **Tim Dumol**",
    "created_at": "2010-06-29T08:10:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8686#issuecomment-70109",
    "user": "https://github.com/loefflerd"
}
```

Reviewer: **Tim Dumol**



---

archive/issue_events_109661.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-07-11T06:02:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109661"
}
```



---

archive/issue_events_109662.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-07-11T06:02:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8686#event-109662"
}
```



---

archive/issue_comments_070110.json:
```json
{
    "body": "Merged: **SageNB 0.8.1**",
    "created_at": "2010-07-11T06:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8686#issuecomment-70110",
    "user": "https://github.com/TimDumol"
}
```

Merged: **SageNB 0.8.1**
