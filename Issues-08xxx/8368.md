# Issue 8368: add colorbar option to contour_plots

archive/issues_008368.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "This patch adds the option of creating a color bar on a filled contour plot.  See the doctests in the patch for examples.\n\nCC:  @kcrisman @sagetrac-wcauchois @robert-marik\n\nComponent: **graphics**\n\nAuthor: **Jason Grout**\n\nReviewer: **Robert Ma\u0159\u00edk**\n\nMerged: **sage-4.4.alpha2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8368_\n\n",
    "closed_at": "2010-04-23T17:11:16Z",
    "created_at": "2010-02-25T19:15:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "add colorbar option to contour_plots",
    "type": "issue",
    "updated_at": "2010-04-23T17:11:16Z",
    "url": "https://github.com/sagemath/sage/issues/8368",
    "user": "https://github.com/jasongrout"
}
```
This patch adds the option of creating a color bar on a filled contour plot.  See the doctests in the patch for examples.

CC:  @kcrisman @sagetrac-wcauchois @robert-marik

Component: **graphics**

Author: **Jason Grout**

Reviewer: **Robert Mařík**

Merged: **sage-4.4.alpha2**

_Issue created by migration from https://trac.sagemath.org/ticket/8368_





---

archive/issue_events_103724.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-02-25T19:15:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "milestone_number": null,
    "milestone_title": "sage-4.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103724"
}
```



---

archive/issue_events_103725.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-02-25T19:15:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103725"
}
```



---

archive/issue_events_103726.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-02-25T19:15:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103726"
}
```



---

archive/issue_events_103727.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-02-25T19:15:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103727"
}
```



---

archive/issue_events_103728.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-02-25T19:15:12Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "subject": "https://github.com/jasongrout",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103728"
}
```



---

archive/issue_comments_065863.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis ticket depends on #8366.",
    "created_at": "2010-02-25T19:17:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65863",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

This ticket depends on #8366.



---

archive/issue_events_103729.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-02-25T19:17:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103729"
}
```



---

archive/issue_comments_065864.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n(update makes colorbars work even when fill=False)",
    "created_at": "2010-02-25T19:43:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65864",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

(update makes colorbars work even when fill=False)



---

archive/issue_comments_065865.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOne thing I don't like about this is that you can't easily get a 1:1 aspect ratio plot - using figsize = [a,a] makes the overall figure square but not the plotted region.",
    "created_at": "2010-04-04T04:05:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65865",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:4" align="right">comment:4</div>

One thing I don't like about this is that you can't easily get a 1:1 aspect ratio plot - using figsize = [a,a] makes the overall figure square but not the plotted region.



---

archive/issue_comments_065866.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@sagetrac-mhampton](#comment%3A4):\n> One thing I don't like about this is that you can't easily get a 1:1 aspect ratio plot - using figsize = [a,a] makes the overall figure square but not the plotted region.\n\nOf course.  If you want the aspect ratio to be 1, then use the aspect_ratio=1 argument, which controls the aspect ratio.  The figsize option controls the \"figure size\", i.e., the size of the entire figure.",
    "created_at": "2010-04-15T03:34:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65866",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@sagetrac-mhampton](#comment%3A4):
> One thing I don't like about this is that you can't easily get a 1:1 aspect ratio plot - using figsize = [a,a] makes the overall figure square but not the plotted region.

Of course.  If you want the aspect ratio to be 1, then use the aspect_ratio=1 argument, which controls the aspect ratio.  The figsize option controls the "figure size", i.e., the size of the entire figure.



---

archive/issue_comments_065867.json:
```json
{
    "body": "apply instead of previous patch (rebased for the new #8366)",
    "created_at": "2010-04-15T03:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65867",
    "user": "https://github.com/jasongrout"
}
```

apply instead of previous patch (rebased for the new #8366)



---

archive/issue_comments_065868.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAttachment: **[trac-8368-colorbars.patch.gz](https://github.com/sagemath/sage/files/ticket8368/trac-8368-colorbars.patch.gz)**\n\nReplying to [@jasongrout](#comment%3A5):\n> Replying to [@sagetrac-mhampton](#comment%3A4):\n> > One thing I don't like about this is that you can't easily get a 1:1 aspect ratio plot - using figsize = [a,a] makes the overall figure square but not the plotted region.\n\n> \n> Of course.  If you want the aspect ratio to be 1, then use the aspect_ratio=1 argument, which controls the aspect ratio.  The figsize option controls the \"figure size\", i.e., the size of the entire figure.\n\nOK.  I think I got into the habit of using figsize before aspect_ratio worked.  I will check the rebased version as soon as I can.",
    "created_at": "2010-04-15T15:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65868",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:6" align="right">comment:6</div>

Attachment: **[trac-8368-colorbars.patch.gz](https://github.com/sagemath/sage/files/ticket8368/trac-8368-colorbars.patch.gz)**

Replying to [@jasongrout](#comment%3A5):
> Replying to [@sagetrac-mhampton](#comment%3A4):
> > One thing I don't like about this is that you can't easily get a 1:1 aspect ratio plot - using figsize = [a,a] makes the overall figure square but not the plotted region.

> 
> Of course.  If you want the aspect ratio to be 1, then use the aspect_ratio=1 argument, which controls the aspect ratio.  The figsize option controls the "figure size", i.e., the size of the entire figure.

OK.  I think I got into the habit of using figsize before aspect_ratio worked.  I will check the rebased version as soon as I can.



---

archive/issue_comments_065869.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThanks for rebasing, I got the following errors. (But I do not switch the 'needs_review' flag unless somebody confirms this issue.)\n\n```\n...\n      File \"/mnt/usb1/scratch/marik/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/lib/python/site-packages/sage/plot/contour_plot.py\", line 193, in _render_on_subplot\n        if options['colorbar']:\n    KeyError: 'colorbar'\n**********************************************************************\n...\n----------------------------------------------------------------------\nThe following tests failed:\n\n        sage -t  \"devel/sage/sage/plot/contour_plot.py\"\nTotal time for all tests: 25.0 seconds\n```\n\nIt would be also nice to add :: in between each pair of different examples - this allows to run any of the examples provided in this patch immediately from reference guide.\nRobert",
    "created_at": "2010-04-16T11:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65869",
    "user": "https://github.com/robert-marik"
}
```

<div id="comment:7" align="right">comment:7</div>

Thanks for rebasing, I got the following errors. (But I do not switch the 'needs_review' flag unless somebody confirms this issue.)

```
...
      File "/mnt/usb1/scratch/marik/sage-4.3.5-sage.math.washington.edu-x86_64-Linux/local/lib/python/site-packages/sage/plot/contour_plot.py", line 193, in _render_on_subplot
        if options['colorbar']:
    KeyError: 'colorbar'
**********************************************************************
...
----------------------------------------------------------------------
The following tests failed:

        sage -t  "devel/sage/sage/plot/contour_plot.py"
Total time for all tests: 25.0 seconds
```

It would be also nice to add :: in between each pair of different examples - this allows to run any of the examples provided in this patch immediately from reference guide.
Robert



---

archive/issue_comments_065870.json:
```json
{
    "body": "apply on top of previous patch",
    "created_at": "2010-04-16T11:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65870",
    "user": "https://github.com/jasongrout"
}
```

apply on top of previous patch



---

archive/issue_comments_065871.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAttachment: **[trac-8368-fix-options.patch.gz](https://github.com/sagemath/sage/files/ticket8368/trac-8368-fix-options.patch.gz)**\n\nI fixed both issues in the above patch.\n\nI also doctested contour_plot.py this time!\u00a0 Things should work now.",
    "created_at": "2010-04-16T11:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65871",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:8" align="right">comment:8</div>

Attachment: **[trac-8368-fix-options.patch.gz](https://github.com/sagemath/sage/files/ticket8368/trac-8368-fix-options.patch.gz)**

I fixed both issues in the above patch.

I also doctested contour_plot.py this time!  Things should work now.



---

archive/issue_comments_065872.json:
```json
{
    "body": "Reviewer: **Robert Ma\u0159\u00edk**",
    "created_at": "2010-04-21T17:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65872",
    "user": "https://github.com/robert-marik"
}
```

Reviewer: **Robert Mařík**



---

archive/issue_events_103730.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-04-21T17:23:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103730"
}
```



---

archive/issue_events_103731.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-04-21T17:23:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103731"
}
```



---

archive/issue_comments_065873.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nInstalls fine, works as excpected, tests passed now, documentation builds fine, positive review and thanks for adding this feature, as well as including my comments.\n\nPositive review.\n\nRelease manager: Apply both trac-8368-colorbars.patch and trac-8368-fix-options.patch patches.",
    "created_at": "2010-04-21T17:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65873",
    "user": "https://github.com/robert-marik"
}
```

<div id="comment:9" align="right">comment:9</div>

Installs fine, works as excpected, tests passed now, documentation builds fine, positive review and thanks for adding this feature, as well as including my comments.

Positive review.

Release manager: Apply both trac-8368-colorbars.patch and trac-8368-fix-options.patch patches.



---

archive/issue_comments_065874.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nMerged into 4.4.alpha2:\n- trac-8368-colorbars.patch\n- trac-8368-fix-options.patch",
    "created_at": "2010-04-23T17:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65874",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:10" align="right">comment:10</div>

Merged into 4.4.alpha2:
- trac-8368-colorbars.patch
- trac-8368-fix-options.patch



---

archive/issue_comments_065875.json:
```json
{
    "body": "Merged: **sage-4.4.alpha2**",
    "created_at": "2010-04-23T17:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8368#issuecomment-65875",
    "user": "https://github.com/jhpalmieri"
}
```

Merged: **sage-4.4.alpha2**



---

archive/issue_events_103732.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-23T17:11:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103732"
}
```



---

archive/issue_events_103733.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-23T17:11:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8368",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8368#event-103733"
}
```
