# Issue 8511: docstring fix for "unexpected indentation"

archive/issues_008511.json:
```json
{
    "assignees": [
        "https://github.com/jhpalmieri"
    ],
    "body": "When building the reference manual for 4.3.4.alpha1, I get several messages of the form\n\n```\n<autodoc>:0: (ERROR/3) Unexpected indentation.\n```\nThe attached patch fixes these.\n\nComponent: **documentation**\n\nAuthor: **John Palmieri**\n\nReviewer: **Minh Van Nguyen**\n\nMerged: **sage-4.3.4.rc0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8511_\n\n",
    "closed_at": "2010-03-14T08:28:12Z",
    "created_at": "2010-03-12T20:24:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20documentation",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "docstring fix for \"unexpected indentation\"",
    "type": "issue",
    "updated_at": "2010-03-14T08:28:12Z",
    "url": "https://github.com/sagemath/sage/issues/8511",
    "user": "https://github.com/jhpalmieri"
}
```
When building the reference manual for 4.3.4.alpha1, I get several messages of the form

```
<autodoc>:0: (ERROR/3) Unexpected indentation.
```
The attached patch fixes these.

Component: **documentation**

Author: **John Palmieri**

Reviewer: **Minh Van Nguyen**

Merged: **sage-4.3.4.rc0**

_Issue created by migration from https://trac.sagemath.org/ticket/8511_





---

archive/issue_events_107340.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-12T20:24:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "milestone_number": null,
    "milestone_title": "sage-4.3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107340"
}
```



---

archive/issue_events_107341.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-12T20:24:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107341"
}
```



---

archive/issue_events_107342.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-12T20:24:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107342"
}
```



---

archive/issue_events_107343.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-12T20:24:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107343"
}
```



---

archive/issue_events_107344.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-03-12T20:24:55Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "subject": "https://github.com/jhpalmieri",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107344"
}
```



---

archive/issue_comments_067841.json:
```json
{
    "body": "Attachment: **[trac_8511-subs.patch.gz](https://github.com/sagemath/sage/files/ticket8511/trac_8511-subs.patch.gz)**",
    "created_at": "2010-03-12T20:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67841",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_8511-subs.patch.gz](https://github.com/sagemath/sage/files/ticket8511/trac_8511-subs.patch.gz)**



---

archive/issue_events_107345.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-12T20:34:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107345"
}
```



---

archive/issue_events_107346.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-12T23:27:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "title_is": "docstring fix for \"unexpected indentation\"",
    "title_was": "docstring fix for symbolic expressions",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107346"
}
```



---

archive/issue_comments_067842.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,6 @@\n-Attached is a trivial fix to make the docstring for the `substitute` method for symbolic expressions look right.\n+When building the reference manual for 4.3.4.alpha1, I get several messages of the form\n \n+```\n+<autodoc>:0: (ERROR/3) Unexpected indentation.\n+```\n+The attached patch fixes these.\n``````\n",
    "created_at": "2010-03-12T23:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67842",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,6 @@
-Attached is a trivial fix to make the docstring for the `substitute` method for symbolic expressions look right.
+When building the reference manual for 4.3.4.alpha1, I get several messages of the form
 
+```
+<autodoc>:0: (ERROR/3) Unexpected indentation.
+```
+The attached patch fixes these.
``````




---

archive/issue_events_107347.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-12T23:27:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107347"
}
```



---

archive/issue_events_107348.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-12T23:27:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107348"
}
```



---

archive/issue_comments_067843.json:
```json
{
    "body": "apply only this patch",
    "created_at": "2010-03-12T23:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67843",
    "user": "https://github.com/jhpalmieri"
}
```

apply only this patch



---

archive/issue_comments_067844.json:
```json
{
    "body": "Attachment: **[trac_8511-unexpected-indentation.patch.gz](https://github.com/sagemath/sage/files/ticket8511/trac_8511-unexpected-indentation.patch.gz)**\n\nreviewer patch; apply on top of previous",
    "created_at": "2010-03-13T00:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67844",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Attachment: **[trac_8511-unexpected-indentation.patch.gz](https://github.com/sagemath/sage/files/ticket8511/trac_8511-unexpected-indentation.patch.gz)**

reviewer patch; apply on top of previous



---

archive/issue_comments_067845.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAttachment: **[trac_8511-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket8511/trac_8511-reviewer.patch.gz)**\n\nWith this patch, plus the ones at #8457 and #8492, the reference manual builds with no warnings.",
    "created_at": "2010-03-13T00:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67845",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

Attachment: **[trac_8511-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket8511/trac_8511-reviewer.patch.gz)**

With this patch, plus the ones at #8457 and #8492, the reference manual builds with no warnings.



---

archive/issue_events_107349.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-03-13T00:22:50Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "subject": "https://github.com/jhpalmieri",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107349"
}
```



---

archive/issue_events_107350.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-13T00:22:50Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "subject": "https://github.com/jhpalmieri",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107350"
}
```



---

archive/issue_events_107351.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-13T00:22:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107351"
}
```



---

archive/issue_events_107352.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-13T00:22:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107352"
}
```



---

archive/issue_comments_067846.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe patch [trac_8511-unexpected-indentation.patch](https://github.com/sagemath/sage/files/ticket8511/trac_8511-unexpected-indentation.patch.gz) solves the three warnings reported at #8492. However, note that the formatting in the following snippet won't properly render in the HTML version as one would expect TESTS and EXAMPLES block to render:\n\n```diff\ndiff -r 29c870e0a9e4 -r 8851bfe046d1 sage/symbolic/expression.pyx\n--- a/sage/symbolic/expression.pyx\tMon Mar 08 20:51:26 2010 -0800\n+++ b/sage/symbolic/expression.pyx\tFri Mar 12 15:12:47 2010 -0800\n@@ -3151,7 +3151,8 @@\n             sage: t.subs({a:b, b:c})\n             (x + y)^3 + b^2 + c^2\n \n-        TESTS:\n+        TESTS::\n+\n             # no arguments return the same expression\n             sage: t.subs()\n             (x + y)^3 + a^2 + b^2\n```\nThis is due to the comment\n\n```\n# no arguments return the same expression\n```\nTo get this TESTS block to render with colours as one would expect of a TESTS block, prefix that comment with \"sage: \". The reviewer patch [trac_8511-reviewer.patch](https://github.com/sagemath/sage/files/ticket8511/trac_8511-reviewer.patch.gz) takes care of that. So only my patch needs review by anyone but me. If it gets a positive review, the whole ticket is good to go into Sage 4.3.4.rc0.",
    "created_at": "2010-03-13T00:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67846",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:4" align="right">comment:4</div>

The patch [trac_8511-unexpected-indentation.patch](https://github.com/sagemath/sage/files/ticket8511/trac_8511-unexpected-indentation.patch.gz) solves the three warnings reported at #8492. However, note that the formatting in the following snippet won't properly render in the HTML version as one would expect TESTS and EXAMPLES block to render:

```diff
diff -r 29c870e0a9e4 -r 8851bfe046d1 sage/symbolic/expression.pyx
--- a/sage/symbolic/expression.pyx	Mon Mar 08 20:51:26 2010 -0800
+++ b/sage/symbolic/expression.pyx	Fri Mar 12 15:12:47 2010 -0800
@@ -3151,7 +3151,8 @@
             sage: t.subs({a:b, b:c})
             (x + y)^3 + b^2 + c^2
 
-        TESTS:
+        TESTS::
+
             # no arguments return the same expression
             sage: t.subs()
             (x + y)^3 + a^2 + b^2
```
This is due to the comment

```
# no arguments return the same expression
```
To get this TESTS block to render with colours as one would expect of a TESTS block, prefix that comment with "sage: ". The reviewer patch [trac_8511-reviewer.patch](https://github.com/sagemath/sage/files/ticket8511/trac_8511-reviewer.patch.gz) takes care of that. So only my patch needs review by anyone but me. If it gets a positive review, the whole ticket is good to go into Sage 4.3.4.rc0.



---

archive/issue_comments_067847.json:
```json
{
    "body": "Reviewer: **Minh Van Nguyen**",
    "created_at": "2010-03-13T00:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67847",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Reviewer: **Minh Van Nguyen**



---

archive/issue_events_107353.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-13T00:53:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107353"
}
```



---

archive/issue_events_107354.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-03-13T00:53:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107354"
}
```



---

archive/issue_comments_067848.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nLooks good to me.  The TESTS block now looks right, and doctests pass.",
    "created_at": "2010-03-13T00:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67848",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

Looks good to me.  The TESTS block now looks right, and doctests pass.



---

archive/issue_events_107355.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-14T08:28:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107355"
}
```



---

archive/issue_events_107356.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-14T08:28:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8511#event-107356"
}
```



---

archive/issue_comments_067849.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nMerged in this order:\n\n1. [trac_8511-unexpected-indentation.patch](https://github.com/sagemath/sage/files/ticket8511/trac_8511-unexpected-indentation.patch.gz)\n2. [trac_8511-reviewer.patch](https://github.com/sagemath/sage/files/ticket8511/trac_8511-reviewer.patch.gz)",
    "created_at": "2010-03-14T08:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67849",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:6" align="right">comment:6</div>

Merged in this order:

1. [trac_8511-unexpected-indentation.patch](https://github.com/sagemath/sage/files/ticket8511/trac_8511-unexpected-indentation.patch.gz)
2. [trac_8511-reviewer.patch](https://github.com/sagemath/sage/files/ticket8511/trac_8511-reviewer.patch.gz)



---

archive/issue_comments_067850.json:
```json
{
    "body": "Merged: **sage-4.3.4.rc0**",
    "created_at": "2010-03-14T08:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8511#issuecomment-67850",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Merged: **sage-4.3.4.rc0**
