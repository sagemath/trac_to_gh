# Issue 8829: Saturation for MW-groups of elliptic curves over number fields.

archive/issues_008829.json:
```json
{
    "body": "Implementation of saturation of points on elliptic curves over number fields.  Original patch by Robert Bradshaw in 2010, refactored and made into a git branch by John Cremona in 2015.\n\nI also implemented the simple case of E.gens() for E(K) when E/Q and [K:Q] = 2. \n\n\nAssignee: @JohnCremona\n\nCC:  @pjbruin @kedlaya\n\nKeywords: saturation\n\nReviewer: David Roe, Kiran Kedlaya, Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Robert Bradshaw, John Cremona\n\nBranch: ae6b11c67e43a3a9ffeb3b34d2b46b627967d432\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/8829\n\n",
    "closed_at": "2017-08-29T19:51:22Z",
    "created_at": "2010-04-30T06:49:16Z",
    "labels": [
        "component: elliptic curves"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Saturation for MW-groups of elliptic curves over number fields.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8829",
    "user": "https://github.com/robertwb"
}
```
Implementation of saturation of points on elliptic curves over number fields.  Original patch by Robert Bradshaw in 2010, refactored and made into a git branch by John Cremona in 2015.

I also implemented the simple case of E.gens() for E(K) when E/Q and [K:Q] = 2. 


Assignee: @JohnCremona

CC:  @pjbruin @kedlaya

Keywords: saturation

Reviewer: David Roe, Kiran Kedlaya, Frédéric Chapoton

Author: Robert Bradshaw, John Cremona

Branch: ae6b11c67e43a3a9ffeb3b34d2b46b627967d432

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/8829





---

archive/issue_comments_096120.json:
```json
{
    "body": "<a id='comment:1'></a>Some dependance on #8828.",
    "created_at": "2010-04-30T06:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96120",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:1'></a>Some dependance on #8828.



---

archive/issue_comments_096121.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-04-30T06:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96121",
    "user": "https://github.com/robertwb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_096122.json:
```json
{
    "body": "<a id='comment:2'></a>I have had a quick look and will go through this in more detail later (after #8828 is completed, probably).  I spent a long time on my C++ implementation of this (over QQ but the algorithm is general) so am quite familiar with the details.\n\nHere are two references you should give:  [1] S. Siksek \"Infinite descent on elliptic curves\", Rocky Mountain J of M, Vol 25 No. 4 (1995), 1501-1538.  [2] M. Prickett, \"Saturation of Mordell-Weil groups of elliptic curves over number fields\", U of Nottingham PhD thesis (2004), http://etheses.nottingham.ac.uk/52/.\n\nMartin Prickett implemented this in Magma, but the code was very slow and hard to read so it never got incorporated into Magma releases.\n\nIncidentally, it was for this that I implemented group structure for curves over GF(q) in the first place!  In my C++ implementation I cache a lot of the information of this group structure so that when you do p-saturation for larger and larger p, the structures are already there.  A good example is to take one of those curves of very high rank:  I think I once successfully p-saturated the rank 24 curve at all p < `10^6`  (the bound was totally out of reach, something like `10^100`).\n\nAnother point which might be useful over number fields:  it suffices to use degree one primes to reduce modulo.",
    "created_at": "2010-04-30T08:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96122",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:2'></a>I have had a quick look and will go through this in more detail later (after #8828 is completed, probably).  I spent a long time on my C++ implementation of this (over QQ but the algorithm is general) so am quite familiar with the details.

Here are two references you should give:  [1] S. Siksek "Infinite descent on elliptic curves", Rocky Mountain J of M, Vol 25 No. 4 (1995), 1501-1538.  [2] M. Prickett, "Saturation of Mordell-Weil groups of elliptic curves over number fields", U of Nottingham PhD thesis (2004), http://etheses.nottingham.ac.uk/52/.

Martin Prickett implemented this in Magma, but the code was very slow and hard to read so it never got incorporated into Magma releases.

Incidentally, it was for this that I implemented group structure for curves over GF(q) in the first place!  In my C++ implementation I cache a lot of the information of this group structure so that when you do p-saturation for larger and larger p, the structures are already there.  A good example is to take one of those curves of very high rank:  I think I once successfully p-saturated the rank 24 curve at all p < `10^6`  (the bound was totally out of reach, something like `10^100`).

Another point which might be useful over number fields:  it suffices to use degree one primes to reduce modulo.



---

archive/issue_comments_096123.json:
```json
{
    "body": "Attachment [8829-ec-nf-sat.patch](tarball://root/attachments/some-uuid/ticket8829/8829-ec-nf-sat.patch) by @robertwb created at 2010-04-30 08:39:16",
    "created_at": "2010-04-30T08:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96123",
    "user": "https://github.com/robertwb"
}
```

Attachment [8829-ec-nf-sat.patch](tarball://root/attachments/some-uuid/ticket8829/8829-ec-nf-sat.patch) by @robertwb created at 2010-04-30 08:39:16



---

archive/issue_comments_096124.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 cremona]:\n> I have had a quick look and will go through this in more detail later (after #8828 is completed, probably).  I spent a long time on my C++ implementation of this (over QQ but the algorithm is general) so am quite familiar with the details.\n> \n> Here are two references you should give:  [1] S. Siksek \"Infinite descent on elliptic curves\", Rocky Mountain J of M, Vol 25 No. 4 (1995), 1501-1538.  [2] M. Prickett, \"Saturation of Mordell-Weil groups of elliptic curves over number fields\", U of Nottingham PhD thesis (2004), http://etheses.nottingham.ac.uk/52/.\n\n\nAh, those look like good references to read too :). \n\n> Martin Prickett implemented this in Magma, but the code was very slow and hard to read so it never got incorporated into Magma releases.\n> \n> Incidentally, it was for this that I implemented group structure for curves over GF(q) in the first place!  In my C++ implementation I cache a lot of the information of this group structure so that when you do p-saturation for larger and larger p, the structures are already there.  \n\n\nThe way I do it is consider many p at once, and for each curve over GF(q) I see which primes in my set it could help with, though this won't scale as far. I'm sure there's still lots of room for improvement. \n\n> A good example is to take one of those curves of very high rank:  I think I once successfully p-saturated the rank 24 curve at all p < `10^6`  (the bound was totally out of reach, something like `10^100`).\n\n\nThat reminds me--I was wondering if there's any way to go from min(h(P)) to a bound on the regulator for rank > 1. \n\n> Another point which might be useful over number fields:  it suffices to use degree one primes to reduce modulo.\n\n\nGood point. Those get pretty rare for large degree number fields though, right?",
    "created_at": "2010-04-30T08:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96124",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:3'></a>Replying to [comment:2 cremona]:
> I have had a quick look and will go through this in more detail later (after #8828 is completed, probably).  I spent a long time on my C++ implementation of this (over QQ but the algorithm is general) so am quite familiar with the details.
> 
> Here are two references you should give:  [1] S. Siksek "Infinite descent on elliptic curves", Rocky Mountain J of M, Vol 25 No. 4 (1995), 1501-1538.  [2] M. Prickett, "Saturation of Mordell-Weil groups of elliptic curves over number fields", U of Nottingham PhD thesis (2004), http://etheses.nottingham.ac.uk/52/.


Ah, those look like good references to read too :). 

> Martin Prickett implemented this in Magma, but the code was very slow and hard to read so it never got incorporated into Magma releases.
> 
> Incidentally, it was for this that I implemented group structure for curves over GF(q) in the first place!  In my C++ implementation I cache a lot of the information of this group structure so that when you do p-saturation for larger and larger p, the structures are already there.  


The way I do it is consider many p at once, and for each curve over GF(q) I see which primes in my set it could help with, though this won't scale as far. I'm sure there's still lots of room for improvement. 

> A good example is to take one of those curves of very high rank:  I think I once successfully p-saturated the rank 24 curve at all p < `10^6`  (the bound was totally out of reach, something like `10^100`).


That reminds me--I was wondering if there's any way to go from min(h(P)) to a bound on the regulator for rank > 1. 

> Another point which might be useful over number fields:  it suffices to use degree one primes to reduce modulo.


Good point. Those get pretty rare for large degree number fields though, right?



---

archive/issue_comments_096125.json:
```json
{
    "body": "<a id='comment:4'></a>You might also like to look at my C++ code which is in eclib, in src/qcurves.  I can point to the right files if it is not clear.  In case you wonder, \"TLSS\" stands for \"Tate-Lichtenbaum-Samir_Siksek\" since I use the TL map when the p-torsion in E(GF(q)) is not cyclic and Samir's original method when it is.  Samir only used reduction modulo primes where p exactly divided the order, and in particular for which the reduction had cyclic p-part.  But Martin and I discovered that this can fail when there is a p-isogeny.  Here, fail means in the sense that there can exist points which are not multiples of p in E(QQ) but which map to zero in E(GF(q))/p for all q.\n\nIn MP's thesis he proves that this cannot happen if you use all q, or all but a finite number, or all but a finite number of degree 1 primes, .... some of these  results we then found had been proved elsewhere (3 or 4 times, independently, within 3 or 4 years!).  But it can happen if you leave out the q for which the quotient has non-cyclic p-part.",
    "created_at": "2010-04-30T11:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96125",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'></a>You might also like to look at my C++ code which is in eclib, in src/qcurves.  I can point to the right files if it is not clear.  In case you wonder, "TLSS" stands for "Tate-Lichtenbaum-Samir_Siksek" since I use the TL map when the p-torsion in E(GF(q)) is not cyclic and Samir's original method when it is.  Samir only used reduction modulo primes where p exactly divided the order, and in particular for which the reduction had cyclic p-part.  But Martin and I discovered that this can fail when there is a p-isogeny.  Here, fail means in the sense that there can exist points which are not multiples of p in E(QQ) but which map to zero in E(GF(q))/p for all q.

In MP's thesis he proves that this cannot happen if you use all q, or all but a finite number, or all but a finite number of degree 1 primes, .... some of these  results we then found had been proved elsewhere (3 or 4 times, independently, within 3 or 4 years!).  But it can happen if you leave out the q for which the quotient has non-cyclic p-part.



---

archive/issue_comments_096126.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-05-09T17:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96126",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_096127.json:
```json
{
    "body": "<a id='comment:5'></a>Patch applies fine to 4.4.1 and tests pass.\n\nThis functionality is badly needed!\n\nWe now have heights for points on curves defined over number_fields\nbut no associated regulator function.  I suggest that the function\nregulator_of_points() be moved up from ell_rational_field to\nell_number_field.  This tcan then be called instead of the code in\nlines 424-432 [line numbers are from the patched file, not the patch].\n\nLine 439 uses a function self.height_function() which does not exist.\nThis block needs to be replaced by something sensible.  If one has a lower bound on the height of non-torsion\npoints, then a bound on the index can be deduced from standard\ngeometry of numbers estimates.   To get such a lower bound, see papers\nof Cremona & Siksek (over Q) and Thongjunthug (over number fields) for\nan algorithm which would need to be implemented.  (Not hard over Q,\nnot much harder for totally real fields, quite a lot worse over fields\nwith a complex embedding).  Until this is done, I don't think this\nsaturation function can allow maxprime==0.\n\nIn the rank one code:   when large primes p (say, over 20!) are being\ntested then the division_points code will be expensive since it\ninvolves constructing the multiplication-by-p map.  I would recommend\nusing a reduction strategy here just as in the general case.  To check\np-saturation just find primes q such that #E(Fq) is divisible by p and\nthen see if the reduction of P mod q is a multiple of p.  This will\nalmost always prove saturation very quickly.  If it fails for several\n(say 5) q then try to divide P by p;  else use more q, and so on.\nThere is one theoretical drawback here:  this strategy might fail if\nthere is a rational p-isogeny.  Over Q,  we know which p this might\nhappen for and I would first test for the existence of isogenies of\nprimes degree, and use the division test (as here) for any primes that\nshow up.  Over number fields that's harder to deal with, but again we\ncan fall back on the division test to rpove that P cannot be divided\nby p.\n\nThe function list_of_multiples(P,n) duplicated the generic function\nmultiples() which I wrote for just this sort of purpose!\n\nI don't like the loop through all linear combinations for small\nprimes.  Even with p=2 there are curves with 24 independent points out\nthere and `2^24` divisions is not nice to contemplate.  If you want this\nshort cut, do it based on the size of `p^r`.\n\nThe main code with reduction etc looks fine to me (but I did not check\nthe logic rigorously).\n\nThe gens function for E(K) when E is defined over Q and [K:Q]=2 looks\nfine.  For a more general case we could always try using\nsimon_two_descent (followed by saturation).  Trying such an examples\nled me to:\n\n```\nsage: K.<a> = NumberField(x^2-2)\nsage: E = EllipticCurve([a,0])\nsage: P = E(0,0)\nsage: P.has_finite_order()\nTrue\nsage: P.order()\n2\nsage: P.height()\n0\nsage: E.saturation([P], verbose=True, max_prime=5)\n## infinite loop\n```\nThis is caused as follows:   The height matrix is [0] with det=0 but\nreg / min(heights) is NaN so reg / min(heights) < 1e-6 is False!.\nThis will need fixing.  At the very least, I would discard any points\nof finite order before doing anything else with them.  Then\nmin(heights) will never be 0.\n\nMost of the above is easy to deal with.  The hard part is computing a\nsuitable max_prime form a lower height bound on points.  I suggest\nthat for now you make it compulsory to have a positive max_prime and\nadd a TODO.",
    "created_at": "2010-05-09T17:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96127",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>Patch applies fine to 4.4.1 and tests pass.

This functionality is badly needed!

We now have heights for points on curves defined over number_fields
but no associated regulator function.  I suggest that the function
regulator_of_points() be moved up from ell_rational_field to
ell_number_field.  This tcan then be called instead of the code in
lines 424-432 [line numbers are from the patched file, not the patch].

Line 439 uses a function self.height_function() which does not exist.
This block needs to be replaced by something sensible.  If one has a lower bound on the height of non-torsion
points, then a bound on the index can be deduced from standard
geometry of numbers estimates.   To get such a lower bound, see papers
of Cremona & Siksek (over Q) and Thongjunthug (over number fields) for
an algorithm which would need to be implemented.  (Not hard over Q,
not much harder for totally real fields, quite a lot worse over fields
with a complex embedding).  Until this is done, I don't think this
saturation function can allow maxprime==0.

In the rank one code:   when large primes p (say, over 20!) are being
tested then the division_points code will be expensive since it
involves constructing the multiplication-by-p map.  I would recommend
using a reduction strategy here just as in the general case.  To check
p-saturation just find primes q such that #E(Fq) is divisible by p and
then see if the reduction of P mod q is a multiple of p.  This will
almost always prove saturation very quickly.  If it fails for several
(say 5) q then try to divide P by p;  else use more q, and so on.
There is one theoretical drawback here:  this strategy might fail if
there is a rational p-isogeny.  Over Q,  we know which p this might
happen for and I would first test for the existence of isogenies of
primes degree, and use the division test (as here) for any primes that
show up.  Over number fields that's harder to deal with, but again we
can fall back on the division test to rpove that P cannot be divided
by p.

The function list_of_multiples(P,n) duplicated the generic function
multiples() which I wrote for just this sort of purpose!

I don't like the loop through all linear combinations for small
primes.  Even with p=2 there are curves with 24 independent points out
there and `2^24` divisions is not nice to contemplate.  If you want this
short cut, do it based on the size of `p^r`.

The main code with reduction etc looks fine to me (but I did not check
the logic rigorously).

The gens function for E(K) when E is defined over Q and [K:Q]=2 looks
fine.  For a more general case we could always try using
simon_two_descent (followed by saturation).  Trying such an examples
led me to:

```
sage: K.<a> = NumberField(x^2-2)
sage: E = EllipticCurve([a,0])
sage: P = E(0,0)
sage: P.has_finite_order()
True
sage: P.order()
2
sage: P.height()
0
sage: E.saturation([P], verbose=True, max_prime=5)
## infinite loop
```
This is caused as follows:   The height matrix is [0] with det=0 but
reg / min(heights) is NaN so reg / min(heights) < 1e-6 is False!.
This will need fixing.  At the very least, I would discard any points
of finite order before doing anything else with them.  Then
min(heights) will never be 0.

Most of the above is easy to deal with.  The hard part is computing a
suitable max_prime form a lower height bound on points.  I suggest
that for now you make it compulsory to have a positive max_prime and
add a TODO.



---

archive/issue_comments_096128.json:
```json
{
    "body": "Changing author from \"\" to \"Robert Bradshaw\"",
    "created_at": "2010-05-09T17:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96128",
    "user": "https://github.com/JohnCremona"
}
```

Changing author from "" to "Robert Bradshaw"



---

archive/issue_comments_096129.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Cremona\"",
    "created_at": "2010-05-09T17:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96129",
    "user": "https://github.com/JohnCremona"
}
```

Changing reviewer from "" to "John Cremona"



---

archive/issue_comments_096130.json:
```json
{
    "body": "<a id='comment:6'></a>Thank you for all your input. `self.height_function` comes from #8828, though as you suggest we could make max_prime mandatory for now (and for rank > 1 once that goes in). That's a good point about large primes in the rank one case. I found the loop through all linear combinations to be much faster in practice for small primes, but the hard coded `p == 2` case was left by accident, I meant to cap that on `p^r` as I did the others. \n\nI probably won't fix and polish this up before finishing my thesis, but at the latest we should be able to get it done during the workshop at MSRI next month.",
    "created_at": "2010-05-11T18:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96130",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:6'></a>Thank you for all your input. `self.height_function` comes from #8828, though as you suggest we could make max_prime mandatory for now (and for rank > 1 once that goes in). That's a good point about large primes in the rank one case. I found the loop through all linear combinations to be much faster in practice for small primes, but the hard coded `p == 2` case was left by accident, I meant to cap that on `p^r` as I did the others. 

I probably won't fix and polish this up before finishing my thesis, but at the latest we should be able to get it done during the workshop at MSRI next month.



---

archive/issue_comments_096131.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 robertwb]:\n> Thank you for all your input. `self.height_function` comes from #8828, though as you suggest we could make max_prime mandatory for now (and for rank > 1 once that goes in). That's a good point about large primes in the rank one case. I found the loop through all linear combinations to be much faster in practice for small primes, but the hard coded `p == 2` case was left by accident, I meant to cap that on `p^r` as I did the others. \n> \n> I probably won't fix and polish this up before finishing my thesis, but at the latest we should be able to get it done during the workshop at MSRI next month. \n\n\nOK -- looking forward to it!  I'll take a look at #8828 by then as well.",
    "created_at": "2010-05-11T20:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96131",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:7'></a>Replying to [comment:6 robertwb]:
> Thank you for all your input. `self.height_function` comes from #8828, though as you suggest we could make max_prime mandatory for now (and for rank > 1 once that goes in). That's a good point about large primes in the rank one case. I found the loop through all linear combinations to be much faster in practice for small primes, but the hard coded `p == 2` case was left by accident, I meant to cap that on `p^r` as I did the others. 
> 
> I probably won't fix and polish this up before finishing my thesis, but at the latest we should be able to get it done during the workshop at MSRI next month. 


OK -- looking forward to it!  I'll take a look at #8828 by then as well.



---

archive/issue_comments_096132.json:
```json
{
    "body": "<a id='comment:8'></a>Since rwb is now busy at Google, and I want this functionality, I am now implementing the changes I suggested above!",
    "created_at": "2010-06-29T04:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96132",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:8'></a>Since rwb is now busy at Google, and I want this functionality, I am now implementing the changes I suggested above!



---

archive/issue_comments_096133.json:
```json
{
    "body": "<a id='comment:9'></a>I made a separate ticket for the regulator functions.  See #9372.",
    "created_at": "2010-06-29T04:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96133",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:9'></a>I made a separate ticket for the regulator functions.  See #9372.



---

archive/issue_comments_096134.json:
```json
{
    "body": "<a id='comment:10'></a>How is this going John?  It seems to have been awhile....",
    "created_at": "2012-10-15T09:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96134",
    "user": "https://github.com/roed314"
}
```

<a id='comment:10'></a>How is this going John?  It seems to have been awhile....



---

archive/issue_comments_096135.json:
```json
{
    "body": "<a id='comment:11'></a>See #12509: until we can fix the height computation, saturation cannot be carried out properly.  It's still on my to-do list though.",
    "created_at": "2013-01-08T09:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96135",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:11'></a>See #12509: until we can fix the height computation, saturation cannot be carried out properly.  It's still on my to-do list though.



---

archive/issue_comments_096136.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 cremona]:\n> See #12509: until we can fix the height computation, saturation cannot be carried out properly.  It's still on my to-do list though.\n\n\n#12509 is now up for review.",
    "created_at": "2013-01-10T09:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96136",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:12'></a>Replying to [comment:11 cremona]:
> See #12509: until we can fix the height computation, saturation cannot be carried out properly.  It's still on my to-do list though.


#12509 is now up for review.



---

archive/issue_events_021551.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21551"
}
```



---

archive/issue_comments_096137.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#8828\"",
    "created_at": "2014-01-07T14:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96137",
    "user": "https://github.com/JohnCremona"
}
```

Changing dependencies from "" to "#8828"



---

archive/issue_events_021552.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21552"
}
```



---

archive/issue_events_021553.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21553"
}
```



---

archive/issue_events_021554.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21554"
}
```



---

archive/issue_events_021555.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21555"
}
```



---

archive/issue_events_021556.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21556"
}
```



---

archive/issue_events_021557.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21557"
}
```



---

archive/issue_comments_096138.json:
```json
{
    "body": "<a id='comment:20'></a>I do not know why this was left drifting, but I really need it myself now so will look at it again, rebase on 6.8 and see what we can do.  But I only have one day before a week off, so...",
    "created_at": "2015-08-13T16:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96138",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:20'></a>I do not know why this was left drifting, but I really need it myself now so will look at it again, rebase on 6.8 and see what we can do.  But I only have one day before a week off, so...



---

archive/issue_comments_096139.json:
```json
{
    "body": "Changing commit from \"\" to \"0e1e35f624edb087d3fb1ddc21226fec7acfafad\"",
    "created_at": "2015-09-11T16:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96139",
    "user": "https://github.com/JohnCremona"
}
```

Changing commit from "" to "0e1e35f624edb087d3fb1ddc21226fec7acfafad"



---

archive/issue_comments_096140.json:
```json
{
    "body": "Changing keywords from \"\" to \"saturation\".",
    "created_at": "2015-09-11T16:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96140",
    "user": "https://github.com/JohnCremona"
}
```

Changing keywords from "" to "saturation".



---

archive/issue_comments_096141.json:
```json
{
    "body": "Changing branch from \"\" to \"u/cremona/8829\"",
    "created_at": "2015-09-11T16:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96141",
    "user": "https://github.com/JohnCremona"
}
```

Changing branch from "" to "u/cremona/8829"



---

archive/issue_comments_096142.json:
```json
{
    "body": "<a id='comment:21'></a>New commits:",
    "created_at": "2015-09-11T16:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96142",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:21'></a>New commits:



---

archive/issue_comments_096143.json:
```json
{
    "body": "Changing author from \"Robert Bradshaw\" to \"Robert Bradshaw, John Cremona\"",
    "created_at": "2015-09-11T16:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96143",
    "user": "https://github.com/JohnCremona"
}
```

Changing author from "Robert Bradshaw" to "Robert Bradshaw, John Cremona"



---

archive/issue_comments_096144.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n-I also implemented the simple case of E.gens() for E(K) when E/Q and [K:Q] = 2.\n+Implementation of saturation of points on elliptic curves over number fields.  Originap patch by Robert Bradshaw in 2010, refactored and made into a git branch by John Cremona in 2015.\n+\n+I also implemented the simple case of E.gens() for E(K) when E/Q and [K:Q] = 2. \n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-09-11T16:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96144",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,7 @@
-I also implemented the simple case of E.gens() for E(K) when E/Q and [K:Q] = 2.
+Implementation of saturation of points on elliptic curves over number fields.  Originap patch by Robert Bradshaw in 2010, refactored and made into a git branch by John Cremona in 2015.
+
+I also implemented the simple case of E.gens() for E(K) when E/Q and [K:Q] = 2. 
+
 
 Comment: 1
 
``````




---

archive/issue_comments_096145.json:
```json
{
    "body": "<a id='comment:22'></a>Current branch works but more doctests and testing are needed; so not ready for review yet.\n\nI did a lot of rewriting of the main saturation routine, separating off p-saturation and also allowing saturation to be done at just one prime.  This is a useful special case, since if you take the images of some saturated points under a p-isogeny the images may not be p-saturated but will still be saturated at all other primes.\n\nThe code for computing E(K) when K is quadratic and E is a base change has been completely rewritten and will now work in many more cases (not just when the coefficients of E are in Q).",
    "created_at": "2015-09-11T16:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96145",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:22'></a>Current branch works but more doctests and testing are needed; so not ready for review yet.

I did a lot of rewriting of the main saturation routine, separating off p-saturation and also allowing saturation to be done at just one prime.  This is a useful special case, since if you take the images of some saturated points under a p-isogeny the images may not be p-saturated but will still be saturated at all other primes.

The code for computing E(K) when K is quadratic and E is a base change has been completely rewritten and will now work in many more cases (not just when the coefficients of E are in Q).



---

archive/issue_comments_096146.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-14T16:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96146",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096147.json:
```json
{
    "body": "Changing commit from \"0e1e35f624edb087d3fb1ddc21226fec7acfafad\" to \"a85f40629df89da829e3a38d9e0443576bced01d\"",
    "created_at": "2015-09-14T16:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96147",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0e1e35f624edb087d3fb1ddc21226fec7acfafad" to "a85f40629df89da829e3a38d9e0443576bced01d"



---

archive/issue_comments_096148.json:
```json
{
    "body": "<a id='comment:24'></a>The latest commit involves more than adding more doctests to the new functions, since bugs were revealed which led to a rewrite of the sieving code for the two cases where the p-rank of the reduction is 1 or 2; the former uses discrete log in the reduction, the latter uses Weil pairing and discrte log in the multiplicative group.  In the sieve I restrict to primes of degree 1.  It is a Theorem (see http://eprints.nottingham.ac.uk/10052/) that this will suffice to prove p-saturation, provided that one does use reductions with p-rank 2 and not just those of p-rank 1 as originally suggested by Siksek in https://ore.exeter.ac.uk/repository/handle/10871/8323 .\n\nI will mark this as ready for review so the bots get to work on it, and of course humans are welcome to look at the new code, but I will now test it thoroughly on the LMFDB curves and report back.",
    "created_at": "2015-09-14T16:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96148",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:24'></a>The latest commit involves more than adding more doctests to the new functions, since bugs were revealed which led to a rewrite of the sieving code for the two cases where the p-rank of the reduction is 1 or 2; the former uses discrete log in the reduction, the latter uses Weil pairing and discrte log in the multiplicative group.  In the sieve I restrict to primes of degree 1.  It is a Theorem (see http://eprints.nottingham.ac.uk/10052/) that this will suffice to prove p-saturation, provided that one does use reductions with p-rank 2 and not just those of p-rank 1 as originally suggested by Siksek in https://ore.exeter.ac.uk/repository/handle/10871/8323 .

I will mark this as ready for review so the bots get to work on it, and of course humans are welcome to look at the new code, but I will now test it thoroughly on the LMFDB curves and report back.



---

archive/issue_comments_096149.json:
```json
{
    "body": "Changing reviewer from \"John Cremona\" to \"\"",
    "created_at": "2015-09-14T16:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96149",
    "user": "https://github.com/JohnCremona"
}
```

Changing reviewer from "John Cremona" to ""



---

archive/issue_comments_096150.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-14T16:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96150",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_096151.json:
```json
{
    "body": "<a id='comment:26'></a>Hello,\n\n1) indent correctly the INPUT and OUTPUT fields:\n\n```\nINPUT:\n\n- first thing\n  goes one there (note the shift of 2 characters)\n```\n\n2) use the new syntax for raise:\n\n```\nraise MyError(\"is rich\")\n```\n\nPoint 1 may be the source of the doc build failure found by the bot:\n\nOSError: [plane_cur] /home/patchbot/sage-patchbot/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_number_field.py:docstring of sage.schemes.elliptic_curves.ell_number_field.EllipticCurve_number_field.saturation:9: WARNING: Bullet list ends without a blank line; unexpected unindent.",
    "created_at": "2015-09-14T17:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96151",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'></a>Hello,

1) indent correctly the INPUT and OUTPUT fields:

```
INPUT:

- first thing
  goes one there (note the shift of 2 characters)
```

2) use the new syntax for raise:

```
raise MyError("is rich")
```

Point 1 may be the source of the doc build failure found by the bot:

OSError: [plane_cur] /home/patchbot/sage-patchbot/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_number_field.py:docstring of sage.schemes.elliptic_curves.ell_number_field.EllipticCurve_number_field.saturation:9: WARNING: Bullet list ends without a blank line; unexpected unindent.



---

archive/issue_comments_096152.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 chapoton]:\n> Hello,\n> \n> 1) indent correctly the INPUT and OUTPUT fields:\n> \n> ```\n> INPUT:\n> \n> - first thing\n>   goes one there (note the shift of 2 characters)\n> ```\n> \n> 2) use the new syntax for raise:\n> \n> ```\n> raise MyError(\"is rich\")\n> ```\n> \n> Point 1 may be the source of the doc build failure found by the bot:\n> \n> OSError: [plane_cur] /home/patchbot/sage-patchbot/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_number_field.py:docstring of sage.schemes.elliptic_curves.ell_number_field.EllipticCurve_number_field.saturation:9: WARNING: Bullet list ends without a blank line; unexpected unindent.\n\n\nThanks, I will fix those.",
    "created_at": "2015-09-14T18:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96152",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:27'></a>Replying to [comment:26 chapoton]:
> Hello,
> 
> 1) indent correctly the INPUT and OUTPUT fields:
> 
> ```
> INPUT:
> 
> - first thing
>   goes one there (note the shift of 2 characters)
> ```
> 
> 2) use the new syntax for raise:
> 
> ```
> raise MyError("is rich")
> ```
> 
> Point 1 may be the source of the doc build failure found by the bot:
> 
> OSError: [plane_cur] /home/patchbot/sage-patchbot/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_number_field.py:docstring of sage.schemes.elliptic_curves.ell_number_field.EllipticCurve_number_field.saturation:9: WARNING: Bullet list ends without a blank line; unexpected unindent.


Thanks, I will fix those.



---

archive/issue_comments_096153.json:
```json
{
    "body": "Changing commit from \"a85f40629df89da829e3a38d9e0443576bced01d\" to \"4f511b89fd199d070bad0d1054efa148d765fdf6\"",
    "created_at": "2015-09-14T19:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a85f40629df89da829e3a38d9e0443576bced01d" to "4f511b89fd199d070bad0d1054efa148d765fdf6"



---

archive/issue_comments_096154.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-14T19:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096155.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-15T09:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96155",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_096156.json:
```json
{
    "body": "<a id='comment:29'></a>many failing doctests, see bot report",
    "created_at": "2015-09-15T09:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96156",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'></a>many failing doctests, see bot report



---

archive/issue_comments_096157.json:
```json
{
    "body": "<a id='comment:30'></a>Apologies, it was a mistake to set this to needs_review prematurely.  Next time I do, I will mean it.",
    "created_at": "2015-09-15T10:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96157",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:30'></a>Apologies, it was a mistake to set this to needs_review prematurely.  Next time I do, I will mean it.



---

archive/issue_comments_096158.json:
```json
{
    "body": "Changing commit from \"4f511b89fd199d070bad0d1054efa148d765fdf6\" to \"2f20f7373a13e2267bc5ae3d2a7cae93278a76c4\"",
    "created_at": "2015-09-15T11:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4f511b89fd199d070bad0d1054efa148d765fdf6" to "2f20f7373a13e2267bc5ae3d2a7cae93278a76c4"



---

archive/issue_comments_096159.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-15T11:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96159",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096160.json:
```json
{
    "body": "<a id='comment:32'></a>Progress report:  I am currently running the p-saturation (for single primes) on lots of LMFDB curves and all is well so far.  This is almost always for very small p (mainly 2 and 3) though, since I am starting with some saturated points on one curve (provided by Magma) and using p-isogenies to map to other curves in the isogeny class.  Higher degree isogenies are not so common.\n\nI did start to veryify that the points from Magma were fully saturated, but ran into problems computing the saturation index, using (line 3717) the lower bound on the height of all non-torsion points -- previously implemented and merged i n6.3 (see #8828).  For example, I had a curve where the value of 5 in that line was insufficient *and led to an infinite loop in the call to min()*, while 10 worked fine, but now I have a curve where I have not yet found a value which gives anything.  For the record I will give that example here:\n\n```\nK.<phi> = NumberField(x^2-x-1) # Q(sqrt(5))\nE = EllipticCurve([phi + 1, -phi + 1, 1, 20*phi - 39, 196*phi + 237])\nH = E.height_function()\nH.min(.1,10,verbose=True) #  does not appear to terminate\n```\n\nStrictly this is about the code merged in #8828, but it will need fixing here before we can let this (useful!) function out into the world.",
    "created_at": "2015-09-16T11:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96160",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:32'></a>Progress report:  I am currently running the p-saturation (for single primes) on lots of LMFDB curves and all is well so far.  This is almost always for very small p (mainly 2 and 3) though, since I am starting with some saturated points on one curve (provided by Magma) and using p-isogenies to map to other curves in the isogeny class.  Higher degree isogenies are not so common.

I did start to veryify that the points from Magma were fully saturated, but ran into problems computing the saturation index, using (line 3717) the lower bound on the height of all non-torsion points -- previously implemented and merged i n6.3 (see #8828).  For example, I had a curve where the value of 5 in that line was insufficient *and led to an infinite loop in the call to min()*, while 10 worked fine, but now I have a curve where I have not yet found a value which gives anything.  For the record I will give that example here:

```
K.<phi> = NumberField(x^2-x-1) # Q(sqrt(5))
E = EllipticCurve([phi + 1, -phi + 1, 1, 20*phi - 39, 196*phi + 237])
H = E.height_function()
H.min(.1,10,verbose=True) #  does not appear to terminate
```

Strictly this is about the code merged in #8828, but it will need fixing here before we can let this (useful!) function out into the world.



---

archive/issue_comments_096161.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-17T13:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096162.json:
```json
{
    "body": "Changing commit from \"2f20f7373a13e2267bc5ae3d2a7cae93278a76c4\" to \"8686677fa5cdf4359fd6f6b8d8e25925f6893a4c\"",
    "created_at": "2015-09-17T13:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2f20f7373a13e2267bc5ae3d2a7cae93278a76c4" to "8686677fa5cdf4359fd6f6b8d8e25925f6893a4c"



---

archive/issue_comments_096163.json:
```json
{
    "body": "<a id='comment:34'></a>The latest branch I just pushed has some merges in it which were not intended but I hope that will not cause any problems -- as well as merging 6.9.beta6 I also merged by branch 'isogs' which has been merged into beta7.\n\nOne bug fix addresses the previous comment -- after re-reading my own 2006 paper I found that the original implementer from #8828 had missed one point (when mu is halved one must increment n_max in order to guarantee termination).   A small additional improvement in the same place (the method min_gr() in height.py) now gives a small improvement in the bound, which is why one doctest there has been changed.\n\nThe second bug was to do with mutability of lists giving unwanted side effects, and is commented at the point in the source which has changed.\n\nIt is likely that users who call the saturation() method will also want to lll_reduce() the output but I have not made that automatic.\n\nI will set this to needs_review once my own full test has completed.",
    "created_at": "2015-09-17T14:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96163",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:34'></a>The latest branch I just pushed has some merges in it which were not intended but I hope that will not cause any problems -- as well as merging 6.9.beta6 I also merged by branch 'isogs' which has been merged into beta7.

One bug fix addresses the previous comment -- after re-reading my own 2006 paper I found that the original implementer from #8828 had missed one point (when mu is halved one must increment n_max in order to guarantee termination).   A small additional improvement in the same place (the method min_gr() in height.py) now gives a small improvement in the bound, which is why one doctest there has been changed.

The second bug was to do with mutability of lists giving unwanted side effects, and is commented at the point in the source which has changed.

It is likely that users who call the saturation() method will also want to lll_reduce() the output but I have not made that automatic.

I will set this to needs_review once my own full test has completed.



---

archive/issue_comments_096164.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-17T14:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96164",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_096165.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-19T09:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96165",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_096166.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+Implementation of saturation of points on elliptic curves over number fields.  Original patch by Robert Bradshaw in 2010, refactored and made into a git branch by John Cremona in 2015.\n+\n+I also implemented the simple case of E.gens() for E(K) when E/Q and [K:Q] = 2. \n \n \n Comment: 1\n``````\n",
    "created_at": "2015-09-19T09:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96166",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+Implementation of saturation of points on elliptic curves over number fields.  Original patch by Robert Bradshaw in 2010, refactored and made into a git branch by John Cremona in 2015.
+
+I also implemented the simple case of E.gens() for E(K) when E/Q and [K:Q] = 2. 
 
 
 Comment: 1
``````




---

archive/issue_comments_096167.json:
```json
{
    "body": "<a id='comment:36'></a>After further testing (on many thousands of curves but only p-saturating for small p) I saw that it was bad to use discrete_log_lambda() for the dlog in the multiplcative group (in the rarer case where the p-rank of the reduction is 2 and the Weil pairing is used), both unnecessary and less efficient than simply w.log(zeta).\nOne additional commit coming up...",
    "created_at": "2015-09-19T09:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96167",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:36'></a>After further testing (on many thousands of curves but only p-saturating for small p) I saw that it was bad to use discrete_log_lambda() for the dlog in the multiplcative group (in the rarer case where the p-rank of the reduction is 2 and the Weil pairing is used), both unnecessary and less efficient than simply w.log(zeta).
One additional commit coming up...



---

archive/issue_comments_096168.json:
```json
{
    "body": "Changing commit from \"8686677fa5cdf4359fd6f6b8d8e25925f6893a4c\" to \"99158817c3895207ebae8f3dc06e83f0b7c6a1cb\"",
    "created_at": "2015-09-19T10:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96168",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8686677fa5cdf4359fd6f6b8d8e25925f6893a4c" to "99158817c3895207ebae8f3dc06e83f0b7c6a1cb"



---

archive/issue_comments_096169.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-19T10:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96169",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096170.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-19T10:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96170",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_096171.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-25T17:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96171",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_096172.json:
```json
{
    "body": "<a id='comment:39'></a>There's some bug in the Weil pairing section which I don't have time to fix now, and this has missed 6.9 anyway.",
    "created_at": "2015-09-25T17:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96172",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:39'></a>There's some bug in the Weil pairing section which I don't have time to fix now, and this has missed 6.9 anyway.



---

archive/issue_comments_096173.json:
```json
{
    "body": "<a id='comment:40'></a>I did do more work on that but did not get to the bottom of it.  Just keeping the ticket alive!",
    "created_at": "2015-12-10T16:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96173",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:40'></a>I did do more work on that but did not get to the bottom of it.  Just keeping the ticket alive!



---

archive/issue_comments_096174.json:
```json
{
    "body": "Changing commit from \"99158817c3895207ebae8f3dc06e83f0b7c6a1cb\" to \"f3eb76aaffcd66e55aa48a0ca3fce51f1a4d3a19\"",
    "created_at": "2015-12-28T13:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96174",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "99158817c3895207ebae8f3dc06e83f0b7c6a1cb" to "f3eb76aaffcd66e55aa48a0ca3fce51f1a4d3a19"



---

archive/issue_comments_096175.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-28T13:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96175",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096176.json:
```json
{
    "body": "Changing commit from \"f3eb76aaffcd66e55aa48a0ca3fce51f1a4d3a19\" to \"a135224f6a7b28c913b4fbe77ade7ed1d15094c3\"",
    "created_at": "2016-01-04T15:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f3eb76aaffcd66e55aa48a0ca3fce51f1a4d3a19" to "a135224f6a7b28c913b4fbe77ade7ed1d15094c3"



---

archive/issue_comments_096177.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-04T15:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096178.json:
```json
{
    "body": "<a id='comment:43'></a>Merging with 7.1.beta3....",
    "created_at": "2016-02-17T13:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96178",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:43'></a>Merging with 7.1.beta3....



---

archive/issue_comments_096179.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-17T16:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096180.json:
```json
{
    "body": "Changing commit from \"a135224f6a7b28c913b4fbe77ade7ed1d15094c3\" to \"70bb203a14669ff411b2035e33112462c7053707\"",
    "created_at": "2016-02-17T16:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a135224f6a7b28c913b4fbe77ade7ed1d15094c3" to "70bb203a14669ff411b2035e33112462c7053707"



---

archive/issue_comments_096181.json:
```json
{
    "body": "Changing commit from \"70bb203a14669ff411b2035e33112462c7053707\" to \"4a7bdc29883e72ceb8e65a8608c6ea3deef4b5fd\"",
    "created_at": "2016-11-20T08:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96181",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "70bb203a14669ff411b2035e33112462c7053707" to "4a7bdc29883e72ceb8e65a8608c6ea3deef4b5fd"



---

archive/issue_comments_096182.json:
```json
{
    "body": "<a id='comment:45'></a>just rebased on 7.5.b3\n\n---\nNew commits:",
    "created_at": "2016-11-20T08:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96182",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:45'></a>just rebased on 7.5.b3

---
New commits:



---

archive/issue_comments_096183.json:
```json
{
    "body": "Changing branch from \"u/cremona/8829\" to \"public/8829\"",
    "created_at": "2016-11-20T08:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96183",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/cremona/8829" to "public/8829"



---

archive/issue_comments_096184.json:
```json
{
    "body": "Changing commit from \"4a7bdc29883e72ceb8e65a8608c6ea3deef4b5fd\" to \"9d66f355dfcba972495f8a459928aeb9488a4baa\"",
    "created_at": "2016-12-11T11:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96184",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4a7bdc29883e72ceb8e65a8608c6ea3deef4b5fd" to "9d66f355dfcba972495f8a459928aeb9488a4baa"



---

archive/issue_comments_096185.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-11T11:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96185",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096186.json:
```json
{
    "body": "<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-06T15:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96186",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096187.json:
```json
{
    "body": "Changing commit from \"9d66f355dfcba972495f8a459928aeb9488a4baa\" to \"a2f50232fc1289a9beec3a488a1cec9907f25f59\"",
    "created_at": "2017-08-06T15:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96187",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9d66f355dfcba972495f8a459928aeb9488a4baa" to "a2f50232fc1289a9beec3a488a1cec9907f25f59"



---

archive/issue_comments_096188.json:
```json
{
    "body": "<a id='comment:48'></a>I just merged 8,0 into the branch prior to looking at it again.",
    "created_at": "2017-08-06T15:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96188",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:48'></a>I just merged 8,0 into the branch prior to looking at it again.



---

archive/issue_comments_096189.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-06T20:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96189",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096190.json:
```json
{
    "body": "Changing commit from \"a2f50232fc1289a9beec3a488a1cec9907f25f59\" to \"5b40a83c70bee0fc21e1057c2b50475fca5f8a5b\"",
    "created_at": "2017-08-06T20:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96190",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a2f50232fc1289a9beec3a488a1cec9907f25f59" to "5b40a83c70bee0fc21e1057c2b50475fca5f8a5b"



---

archive/issue_comments_096191.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-06T20:08:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96191",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_096192.json:
```json
{
    "body": "<a id='comment:50'></a>After merging into 8.0 I fixed some newly failing doctests (trivial things caused by the usual pari number field changes).  I moved the two p-saturation functions to a new file saturation.py, and added that to the reference manual.\nReady for review.  I intend to use this a lot soon over number fields of degree up to 6 for the LMFDB and it would be most helpful to have it merged into 8.1.",
    "created_at": "2017-08-06T20:08:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96192",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:50'></a>After merging into 8.0 I fixed some newly failing doctests (trivial things caused by the usual pari number field changes).  I moved the two p-saturation functions to a new file saturation.py, and added that to the reference manual.
Ready for review.  I intend to use this a lot soon over number fields of degree up to 6 for the LMFDB and it would be most helpful to have it merged into 8.1.



---

archive/issue_comments_096193.json:
```json
{
    "body": "Changing dependencies from \"#8828\" to \"\"",
    "created_at": "2017-08-06T20:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96193",
    "user": "https://github.com/fchapoton"
}
```

Changing dependencies from "#8828" to ""



---

archive/issue_events_021558.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-06T20:09:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21558"
}
```



---

archive/issue_events_021559.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-06T20:09:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21559"
}
```



---

archive/issue_comments_096194.json:
```json
{
    "body": "<a id='comment:52'></a>Quick comments :\n\n* dot not use $ but backticks\n\n* every function must be doctested",
    "created_at": "2017-08-06T20:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96194",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:52'></a>Quick comments :

* dot not use $ but backticks

* every function must be doctested



---

archive/issue_comments_096195.json:
```json
{
    "body": "<a id='comment:53'></a>!!! New docstrings use backticks, and new functions are doctested. !!!  The file ell_number_field is 3800 lines  long.  Both the files I just worked on have 100% coverage.",
    "created_at": "2017-08-06T20:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96195",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:53'></a>!!! New docstrings use backticks, and new functions are doctested. !!!  The file ell_number_field is 3800 lines  long.  Both the files I just worked on have 100% coverage.



---

archive/issue_comments_096196.json:
```json
{
    "body": "<a id='comment:54'></a>Hello ! some dollars there :\n\n```\n+        For rank 1 subgroups, simply do trial divison up to the maximal\n+        prime divisor. For higher rank subgroups, perform trial divison\n+        on all linear combinations for small primes, and look for\n+        projections $E(K) \\rightarrow \\oplus E(k) \\otimes \\FF_p$ which\n+        are either full rank or provide p-divisble linear combinations,\n+        where the $k$ here are residue fields of $K$.\n```\nand no doc for\n\n```\n+    def projections(Q, p):\n```\nwhich is indeed an inner function, but quite a complicated one. Maybe just explain its input and output ?",
    "created_at": "2017-08-07T06:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96196",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:54'></a>Hello ! some dollars there :

```
+        For rank 1 subgroups, simply do trial divison up to the maximal
+        prime divisor. For higher rank subgroups, perform trial divison
+        on all linear combinations for small primes, and look for
+        projections $E(K) \rightarrow \oplus E(k) \otimes \FF_p$ which
+        are either full rank or provide p-divisble linear combinations,
+        where the $k$ here are residue fields of $K$.
```
and no doc for

```
+    def projections(Q, p):
```
which is indeed an inner function, but quite a complicated one. Maybe just explain its input and output ?



---

archive/issue_comments_096197.json:
```json
{
    "body": "<a id='comment:55'></a>I stand corrected and will see to this.",
    "created_at": "2017-08-07T08:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96197",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:55'></a>I stand corrected and will see to this.



---

archive/issue_comments_096198.json:
```json
{
    "body": "<a id='comment:56'></a>For the inner function projections(Q, p) there is already a docstring:\n\n```\n        Project points onto (E mod Q)(K mod Q) \\otimes \\F_p.\n\n        Returns a list of 0, 1 or 2 vectors in \\F_p^n\n```\nwhich explains what it does.  I'll make sure that all the other inner functions are explained.",
    "created_at": "2017-08-07T08:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96198",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:56'></a>For the inner function projections(Q, p) there is already a docstring:

```
        Project points onto (E mod Q)(K mod Q) \otimes \F_p.

        Returns a list of 0, 1 or 2 vectors in \F_p^n
```
which explains what it does.  I'll make sure that all the other inner functions are explained.



---

archive/issue_comments_096199.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-07T11:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096200.json:
```json
{
    "body": "Changing commit from \"5b40a83c70bee0fc21e1057c2b50475fca5f8a5b\" to \"8c715855e54b1b1a12d82364a004f428c9a80097\"",
    "created_at": "2017-08-07T11:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5b40a83c70bee0fc21e1057c2b50475fca5f8a5b" to "8c715855e54b1b1a12d82364a004f428c9a80097"



---

archive/issue_comments_096201.json:
```json
{
    "body": "<a id='comment:58'></a>I hope the latest commits do what was wanted for docstrings.  I did remove some rather unnecessary one-liner internal functions.\nIn the course of doing this I found at least 2 bugs ;)  which is good because the reason this was not finished with 18 months ago was the existence of a bug.\n\nPlease review!",
    "created_at": "2017-08-07T11:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96201",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:58'></a>I hope the latest commits do what was wanted for docstrings.  I did remove some rather unnecessary one-liner internal functions.
In the course of doing this I found at least 2 bugs ;)  which is good because the reason this was not finished with 18 months ago was the existence of a bug.

Please review!



---

archive/issue_comments_096202.json:
```json
{
    "body": "<a id='comment:59'></a>a typo here:\n\n```\ntrial divison\n```\nand also a missing line break here after `r\"\"\"`:\n\n```\n+        r\"\"\" Given a list of rational points on `E` over `K`, compute the\n```\nsame here:\n\n```\n        \"\"\"Return generators for the Mordell-Weil group modulo torsion, for a\n```\nsame there:\n\n```\n+    r\"\"\" Checks whether the list of points is `p`-saturated.\n```\nand\n\n```\n+    r\"\"\" Full `p`-saturation of ``Plist``.\n```\n\nanother typo:\n\n```\ndivisble\n```\nThis :\n\n```\n+        if len(EE)==0:\n```\ncan be replaced by `if not EE`\n\nanother typo:\n\n```\nalgirithm\n```",
    "created_at": "2017-08-07T11:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96202",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:59'></a>a typo here:

```
trial divison
```
and also a missing line break here after `r"""`:

```
+        r""" Given a list of rational points on `E` over `K`, compute the
```
same here:

```
        """Return generators for the Mordell-Weil group modulo torsion, for a
```
same there:

```
+    r""" Checks whether the list of points is `p`-saturated.
```
and

```
+    r""" Full `p`-saturation of ``Plist``.
```

another typo:

```
divisble
```
This :

```
+        if len(EE)==0:
```
can be replaced by `if not EE`

another typo:

```
algirithm
```



---

archive/issue_comments_096203.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-07T12:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96203",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096204.json:
```json
{
    "body": "Changing commit from \"8c715855e54b1b1a12d82364a004f428c9a80097\" to \"7b3c1886b7dbd481f7248c2271233c73ca483c01\"",
    "created_at": "2017-08-07T12:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96204",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8c715855e54b1b1a12d82364a004f428c9a80097" to "7b3c1886b7dbd481f7248c2271233c73ca483c01"



---

archive/issue_comments_096205.json:
```json
{
    "body": "<a id='comment:61'></a>I fixed those, and at least one more.  Thanks",
    "created_at": "2017-08-07T12:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96205",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:61'></a>I fixed those, and at least one more.  Thanks



---

archive/issue_comments_096206.json:
```json
{
    "body": "<a id='comment:62'></a>\"trial divison\" is still there",
    "created_at": "2017-08-07T20:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96206",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:62'></a>"trial divison" is still there



---

archive/issue_comments_096207.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-08T16:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_096208.json:
```json
{
    "body": "Changing commit from \"7b3c1886b7dbd481f7248c2271233c73ca483c01\" to \"d2421238e6f1f174d90f8f81cbbc0606e79171b3\"",
    "created_at": "2017-08-08T16:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96208",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7b3c1886b7dbd481f7248c2271233c73ca483c01" to "d2421238e6f1f174d90f8f81cbbc0606e79171b3"



---

archive/issue_comments_096209.json:
```json
{
    "body": "<a id='comment:64'></a>Not now it isn't.  I also used \"grep -r\" to catch 3 more (not mine).\n\nOne day I might get a review of the __code__!",
    "created_at": "2017-08-08T16:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96209",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:64'></a>Not now it isn't.  I also used "grep -r" to catch 3 more (not mine).

One day I might get a review of the __code__!



---

archive/issue_comments_096210.json:
```json
{
    "body": "<a id='comment:66'></a>Some comments on code:\n\n* There's something weird with the indentation at `for Q in K.primes_above(q, degree=1):` in `p_saturation` (it looks only indented one space).\n* There are various points where you don't have spaces around `==` and `+=`.  If you feel like fixing it, I think that spaces are the Python coding standard.\n* At various points you add commented out code (either verbose print statements or the definition of `pair_max`).  I'm fine with what you have, but I could also see just deleting it.  I just wanted to make sure that the decision to include it, commented out, was conscious.\n\nThere are also test failures.\n\nOther than these comments, the code looks good to me and I'm happy to give it a positive review once they're addressed.",
    "created_at": "2017-08-22T22:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96210",
    "user": "https://github.com/roed314"
}
```

<a id='comment:66'></a>Some comments on code:

* There's something weird with the indentation at `for Q in K.primes_above(q, degree=1):` in `p_saturation` (it looks only indented one space).
* There are various points where you don't have spaces around `==` and `+=`.  If you feel like fixing it, I think that spaces are the Python coding standard.
* At various points you add commented out code (either verbose print statements or the definition of `pair_max`).  I'm fine with what you have, but I could also see just deleting it.  I just wanted to make sure that the decision to include it, commented out, was conscious.

There are also test failures.

Other than these comments, the code looks good to me and I'm happy to give it a positive review once they're addressed.



---

archive/issue_comments_096211.json:
```json
{
    "body": "<a id='comment:67'></a>Also, the example from comment 5 still seems to go into an infinite loop.",
    "created_at": "2017-08-23T00:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96211",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:67'></a>Also, the example from comment 5 still seems to go into an infinite loop.



---

archive/issue_comments_096212.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-23T08:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96212",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_096213.json:
```json
{
    "body": "<a id='comment:68'></a>Thanks to both for the reviews.  I'll look into the spacing issues and the example.  I really really want to get finished with this!",
    "created_at": "2017-08-23T08:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96213",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:68'></a>Thanks to both for the reviews.  I'll look into the spacing issues and the example.  I really really want to get finished with this!



---

archive/issue_comments_096214.json:
```json
{
    "body": "<a id='comment:69'></a>I first merged in the current develop (and fixed one small conflict).  this required a rebuild (i.e. 'make' not just './sage -b' which failed).\n\nI fixed that indentation issue -- logically correct but of course non-standard to have just one space of indentation.  I hope the result is OK, that indented block was very long and had a lot of subsidiary indented parts.\n\nI have fixed all (I hope) the == and += spacing.\n\nI changed some commented-out debugging print statements into comments.  I like having lots of comments since the logic is quite complicated (and if further bugs are found it may well be me who has to fix them so I might as well be helpful).\n\nI'll test the example from comment 5 once the rebuild has finished.",
    "created_at": "2017-08-23T08:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96214",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:69'></a>I first merged in the current develop (and fixed one small conflict).  this required a rebuild (i.e. 'make' not just './sage -b' which failed).

I fixed that indentation issue -- logically correct but of course non-standard to have just one space of indentation.  I hope the result is OK, that indented block was very long and had a lot of subsidiary indented parts.

I have fixed all (I hope) the == and += spacing.

I changed some commented-out debugging print statements into comments.  I like having lots of comments since the logic is quite complicated (and if further bugs are found it may well be me who has to fix them so I might as well be helpful).

I'll test the example from comment 5 once the rebuild has finished.



---

archive/issue_comments_096215.json:
```json
{
    "body": "<a id='comment:70'></a>Dammit, I always use trac branch names of the form u/cremona/nnnnn where nnnnn is the ticket number, but at some point the branch here became public/8829, so I have just been fixing the wrong version.  What a waste of time.  Back soon.",
    "created_at": "2017-08-23T11:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96215",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:70'></a>Dammit, I always use trac branch names of the form u/cremona/nnnnn where nnnnn is the ticket number, but at some point the branch here became public/8829, so I have just been fixing the wrong version.  What a waste of time.  Back soon.



---

archive/issue_comments_096216.json:
```json
{
    "body": "<a id='comment:71'></a>New commits:",
    "created_at": "2017-08-23T11:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96216",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:71'></a>New commits:



---

archive/issue_comments_096217.json:
```json
{
    "body": "Changing commit from \"d2421238e6f1f174d90f8f81cbbc0606e79171b3\" to \"cd2b023195b23ff4fcf753f67a9acff9c5d87d6b\"",
    "created_at": "2017-08-23T11:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96217",
    "user": "https://github.com/JohnCremona"
}
```

Changing commit from "d2421238e6f1f174d90f8f81cbbc0606e79171b3" to "cd2b023195b23ff4fcf753f67a9acff9c5d87d6b"



---

archive/issue_comments_096218.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-23T11:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96218",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_096219.json:
```json
{
    "body": "Changing branch from \"public/8829\" to \"u/cremona/8829\"",
    "created_at": "2017-08-23T11:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96219",
    "user": "https://github.com/JohnCremona"
}
```

Changing branch from "public/8829" to "u/cremona/8829"



---

archive/issue_comments_096220.json:
```json
{
    "body": "<a id='comment:72'></a>OK, back to review.  Note that the branch is now u/cremona/8829.",
    "created_at": "2017-08-23T11:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96220",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:72'></a>OK, back to review.  Note that the branch is now u/cremona/8829.



---

archive/issue_comments_096221.json:
```json
{
    "body": "<a id='comment:73'></a>\"trial divison\" is back, and probably all the other fixes went away.... Sorry for nitpicking, really..",
    "created_at": "2017-08-23T11:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96221",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:73'></a>"trial divison" is back, and probably all the other fixes went away.... Sorry for nitpicking, really..



---

archive/issue_comments_096222.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-23T12:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96222",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_096223.json:
```json
{
    "body": "<a id='comment:74'></a>!`@`$#!.  OK, I will check out commit d242123 by hash to be sure that is what was most recently reviewed, and redo the work I did before.  It's the only way to be certain.",
    "created_at": "2017-08-23T12:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96223",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:74'></a>!`@`$#!.  OK, I will check out commit d242123 by hash to be sure that is what was most recently reviewed, and redo the work I did before.  It's the only way to be certain.



---

archive/issue_comments_096224.json:
```json
{
    "body": "<a id='comment:75'></a>I hope I got it right this time.  The correct branch is public/8829 and I basically redid the edits I had already done this morning on the wrong branch.\n\n---\nLast 10 new commits:",
    "created_at": "2017-08-23T14:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96224",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:75'></a>I hope I got it right this time.  The correct branch is public/8829 and I basically redid the edits I had already done this morning on the wrong branch.

---
Last 10 new commits:



---

archive/issue_comments_096225.json:
```json
{
    "body": "Changing commit from \"cd2b023195b23ff4fcf753f67a9acff9c5d87d6b\" to \"37e22852ecaf466e9d9ce22bc66ffa94f2d7f652\"",
    "created_at": "2017-08-23T14:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96225",
    "user": "https://github.com/JohnCremona"
}
```

Changing commit from "cd2b023195b23ff4fcf753f67a9acff9c5d87d6b" to "37e22852ecaf466e9d9ce22bc66ffa94f2d7f652"



---

archive/issue_comments_096226.json:
```json
{
    "body": "Changing branch from \"u/cremona/8829\" to \"public/8829\"",
    "created_at": "2017-08-23T14:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96226",
    "user": "https://github.com/JohnCremona"
}
```

Changing branch from "u/cremona/8829" to "public/8829"



---

archive/issue_comments_096227.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-23T14:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96227",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_096228.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Roe, Kiran Kedlaya, Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2017-08-23T15:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96228",
    "user": "https://github.com/roed314"
}
```

Changing reviewer from "" to "David Roe, Kiran Kedlaya, Frédéric Chapoton"



---

archive/issue_comments_096229.json:
```json
{
    "body": "<a id='comment:76'></a>It looks like you've addressed everything.  I ran all tests and checked that the loop in comment 5 is no longer a problem.",
    "created_at": "2017-08-23T15:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96229",
    "user": "https://github.com/roed314"
}
```

<a id='comment:76'></a>It looks like you've addressed everything.  I ran all tests and checked that the loop in comment 5 is no longer a problem.



---

archive/issue_comments_096230.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-23T15:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96230",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_096231.json:
```json
{
    "body": "<a id='comment:77'></a>Thanks a lot!  This ticket was opened in 2010, so I'll be celebrating.  Now, if any of you would like to head on over to #22345...",
    "created_at": "2017-08-23T15:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96231",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:77'></a>Thanks a lot!  This ticket was opened in 2010, so I'll be celebrating.  Now, if any of you would like to head on over to #22345...



---

archive/issue_comments_096232.json:
```json
{
    "body": "<a id='comment:78'></a>Very well, and I share your joy, but you introduced a .next(), which is not compatible with python3 (see patchbot plugin report). To be fixed in a later ticket, please.",
    "created_at": "2017-08-23T18:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96232",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:78'></a>Very well, and I share your joy, but you introduced a .next(), which is not compatible with python3 (see patchbot plugin report). To be fixed in a later ticket, please.



---

archive/issue_comments_096233.json:
```json
{
    "body": "<a id='comment:79'></a>That's a pity I thought the next () was rather neat. You can fix it here if you want.",
    "created_at": "2017-08-23T18:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96233",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:79'></a>That's a pity I thought the next () was rather neat. You can fix it here if you want.



---

archive/issue_comments_096234.json:
```json
{
    "body": "<a id='comment:80'></a>no, no, let us wait and do that later",
    "created_at": "2017-08-23T18:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96234",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:80'></a>no, no, let us wait and do that later



---

archive/issue_comments_096235.json:
```json
{
    "body": "<a id='comment:81'></a>By the way, John, could you tell LMFDB people about #23671, please ?",
    "created_at": "2017-08-23T18:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96235",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:81'></a>By the way, John, could you tell LMFDB people about #23671, please ?



---

archive/issue_comments_096236.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-08-23T20:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96236",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_096237.json:
```json
{
    "body": "<a id='comment:82'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2017-08-23T20:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96237",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:82'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_096238.json:
```json
{
    "body": "Changing commit from \"37e22852ecaf466e9d9ce22bc66ffa94f2d7f652\" to \"ae6b11c67e43a3a9ffeb3b34d2b46b627967d432\"",
    "created_at": "2017-08-23T20:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "37e22852ecaf466e9d9ce22bc66ffa94f2d7f652" to "ae6b11c67e43a3a9ffeb3b34d2b46b627967d432"



---

archive/issue_comments_096239.json:
```json
{
    "body": "<a id='comment:83'></a>Replying to [comment:80 chapoton]:\n> no, no, let us wait and do that later\n\n\nIsn't it just this one-line change? If so, no reason to postpone it...",
    "created_at": "2017-08-23T20:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96239",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:83'></a>Replying to [comment:80 chapoton]:
> no, no, let us wait and do that later


Isn't it just this one-line change? If so, no reason to postpone it...



---

archive/issue_comments_096240.json:
```json
{
    "body": "<a id='comment:84'></a>Looks good to me!",
    "created_at": "2017-08-23T22:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96240",
    "user": "https://github.com/roed314"
}
```

<a id='comment:84'></a>Looks good to me!



---

archive/issue_comments_096241.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-23T22:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96241",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_096242.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-29T19:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96242",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_096243.json:
```json
{
    "body": "Changing branch from \"public/8829\" to \"ae6b11c67e43a3a9ffeb3b34d2b46b627967d432\"",
    "created_at": "2017-08-29T19:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96243",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/8829" to "ae6b11c67e43a3a9ffeb3b34d2b46b627967d432"



---

archive/issue_events_021560.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-29T19:51:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8829#event-21560"
}
```



---

archive/issue_comments_096244.json:
```json
{
    "body": "Changing commit from \"ae6b11c67e43a3a9ffeb3b34d2b46b627967d432\" to \"\"",
    "created_at": "2017-09-12T14:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96244",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "ae6b11c67e43a3a9ffeb3b34d2b46b627967d432" to ""



---

archive/issue_comments_096245.json:
```json
{
    "body": "<a id='comment:86'></a>This is causing doctest failures: #23840.",
    "created_at": "2017-09-12T14:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96245",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:86'></a>This is causing doctest failures: #23840.



---

archive/issue_comments_096246.json:
```json
{
    "body": "<a id='comment:87'></a>I'm pretty certain it will be the usual nonsense of mathematically equivalent outputs.  I'll look at #23840 and judge properly.",
    "created_at": "2017-09-12T14:40:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8829#issuecomment-96246",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:87'></a>I'm pretty certain it will be the usual nonsense of mathematically equivalent outputs.  I'll look at #23840 and judge properly.
