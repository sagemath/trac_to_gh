# Issue 8650: Extreme faces of Polyhedra are inconsistent

archive/issues_008650.json:
```json
{
    "body": "Let's look at the first face of each dimension of a polyhedron:\n\n```\nfor lset in polytopes.cross_polytope(2).face_lattice().level_sets():\n    print lset[0]\n```\nThe result is \n\n```\n(None, None)\n((0,), (1, 2))\n((1, 2), (3,))\n((0, 1, 2, 3), (0, 1, 2, 3))\n```\nwhere the first tuple (None, None) corresponds to the empty face of the polytope. The first element gives generating vertices of this face (there are None). The second one should give all facets that contain this face. This should be the set of all facets of the polytope, not None. Similarly, for the last face, i.e. the whole polytope, we need to list all vertices belonging to this face (they are correctly listed), and all facets containing the polytope - there should be None.\n\nWhile it should be easy to fix, I don't quite understand the code of face_lattice, so maybe someone else can do this...\n\n**Assignee:** mhampton\n\n**Resolution:** fixed\n\n**Author:** Marshall Hampton\n\n**Reviewer:** Andrey Novoseltsev\n\n**Merged:** sage-4.4.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/8650\n\n",
    "closed_at": "2010-04-16T18:56:29Z",
    "created_at": "2010-04-04T19:23:02Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.4",
    "title": "Extreme faces of Polyhedra are inconsistent",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8650",
    "user": "https://github.com/novoselt"
}
```
Let's look at the first face of each dimension of a polyhedron:

```
for lset in polytopes.cross_polytope(2).face_lattice().level_sets():
    print lset[0]
```
The result is 

```
(None, None)
((0,), (1, 2))
((1, 2), (3,))
((0, 1, 2, 3), (0, 1, 2, 3))
```
where the first tuple (None, None) corresponds to the empty face of the polytope. The first element gives generating vertices of this face (there are None). The second one should give all facets that contain this face. This should be the set of all facets of the polytope, not None. Similarly, for the last face, i.e. the whole polytope, we need to list all vertices belonging to this face (they are correctly listed), and all facets containing the polytope - there should be None.

While it should be easy to fix, I don't quite understand the code of face_lattice, so maybe someone else can do this...

**Assignee:** mhampton

**Resolution:** fixed

**Author:** Marshall Hampton

**Reviewer:** Andrey Novoseltsev

**Merged:** sage-4.4.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/8650





---

archive/issue_comments_099092.json:
```json
{
    "body": "<a id='comment:1'></a>\nOops.  I wrote face_lattice, so this is my fault.  Thanks for pointing it out.  I think I can fix it pretty soon (hopefully today).",
    "created_at": "2010-04-04T21:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99092",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:1'></a>
Oops.  I wrote face_lattice, so this is my fault.  Thanks for pointing it out.  I think I can fix it pretty soon (hopefully today).



---

archive/issue_comments_099093.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2010-04-04T22:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99093",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_099094.json:
```json
{
    "body": "<a id='comment:2'></a>\nAttachment [trac_8650_patch0.patch](tarball://root/attachments/some-uuid/ticket8650/trac_8650_patch0.patch) by mhampton created at 2010-04-04 22:20:54\n\nOK, I think the attached patch corrects things.",
    "created_at": "2010-04-04T22:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99094",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:2'></a>
Attachment [trac_8650_patch0.patch](tarball://root/attachments/some-uuid/ticket8650/trac_8650_patch0.patch) by mhampton created at 2010-04-04 22:20:54

OK, I think the attached patch corrects things.



---

archive/issue_comments_099095.json:
```json
{
    "body": "Attachment [trac_8650_fix_face_lattice_in_polyhedra.patch](tarball://root/attachments/some-uuid/ticket8650/trac_8650_fix_face_lattice_in_polyhedra.patch) by @novoselt created at 2010-04-05 03:15:30\n\nApply this patch only",
    "created_at": "2010-04-05T03:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99095",
    "user": "https://github.com/novoselt"
}
```

Attachment [trac_8650_fix_face_lattice_in_polyhedra.patch](tarball://root/attachments/some-uuid/ticket8650/trac_8650_fix_face_lattice_in_polyhedra.patch) by @novoselt created at 2010-04-05 03:15:30

Apply this patch only



---

archive/issue_comments_099096.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-04-05T03:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99096",
    "user": "https://github.com/novoselt"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_025923.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-04-05T03:18:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "milestone": "sage-4.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8650#event-25923"
}
```



---

archive/issue_comments_099097.json:
```json
{
    "body": "<a id='comment:3'></a>\nThank you! I have added the code above to the TESTS section.",
    "created_at": "2010-04-05T03:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99097",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:3'></a>
Thank you! I have added the code above to the TESTS section.



---

archive/issue_comments_099098.json:
```json
{
    "body": "**Author:** Marshall Hampton",
    "created_at": "2010-04-05T03:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99098",
    "user": "https://github.com/novoselt"
}
```

**Author:** Marshall Hampton



---

archive/issue_comments_099099.json:
```json
{
    "body": "**Reviewer:** Andrey Novoseltsev",
    "created_at": "2010-04-05T03:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99099",
    "user": "https://github.com/novoselt"
}
```

**Reviewer:** Andrey Novoseltsev



---

archive/issue_comments_099100.json:
```json
{
    "body": "<a id='comment:4'></a>\nMerged \"trac_8650_fix_face_lattice_in_polyhedra.patch\" in 4.4.alpha0.",
    "created_at": "2010-04-16T18:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99100",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
Merged "trac_8650_fix_face_lattice_in_polyhedra.patch" in 4.4.alpha0.



---

archive/issue_comments_099101.json:
```json
{
    "body": "**Merged:** sage-4.4.alpha0",
    "created_at": "2010-04-16T18:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99101",
    "user": "https://github.com/jhpalmieri"
}
```

**Merged:** sage-4.4.alpha0



---

archive/issue_comments_099102.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2010-04-16T18:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99102",
    "user": "https://github.com/jhpalmieri"
}
```

**Resolution:** fixed



---

archive/issue_events_025924.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T18:56:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8650#event-25924"
}
```



---

archive/issue_comments_099103.json:
```json
{
    "body": "<a id='comment:5'></a>\nSee #8709 for a followup.",
    "created_at": "2010-04-18T03:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99103",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
See #8709 for a followup.



---

archive/issue_comments_099104.json:
```json
{
    "body": "<a id='comment:6'></a>\nAnd #8656.",
    "created_at": "2010-04-18T04:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8650#issuecomment-99104",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:6'></a>
And #8656.
