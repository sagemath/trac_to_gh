# Issue 8115: bad patching practice in cddlib-094f.p2.spkg

archive/issues_008115.json:
```json
{
    "assignees": [],
    "body": "A problem with cddlib-094f.p2.spkg is that it patches upstream source using a patch file, rather than copying a patched file over to the appropriate place under the src/ directory. Consequently, there is no clean separation between upstream source and patches that we apply to cddlib-094f. Looking at spkg-install of cddlib-094f.p2.spkg, you get these two lines for applying Sage-specific patches:\n\n```\ncp patches/allfaces.c src/src/\n\npatch -p0 < patches/cdd_both_reps-make.patch\n```\nThe first line is the preferred way to patch an upstream source because it copies the patched file patches/allfaces.c over to src/src/. This issue is reported on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/e599fd37de909264).\n\n\n\n\nThis depends on #8179.\n\n**CC:**  @vbraun mhampton\n\n**Keywords:** cddlib, polyhedra\n\n**Author:** Volker Braun\n\n**Reviewer:** Minh Van Nguyen\n\n**Merged:** sage-4.3.3.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/8115\n\n",
    "closed_at": "2010-02-17T20:58:34Z",
    "created_at": "2010-01-29T09:51:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "bad patching practice in cddlib-094f.p2.spkg",
    "type": "issue",
    "updated_at": "2010-04-20T17:31:47Z",
    "url": "https://github.com/sagemath/sage/issues/8115",
    "user": "https://github.com/sagetrac-mvngu"
}
```
A problem with cddlib-094f.p2.spkg is that it patches upstream source using a patch file, rather than copying a patched file over to the appropriate place under the src/ directory. Consequently, there is no clean separation between upstream source and patches that we apply to cddlib-094f. Looking at spkg-install of cddlib-094f.p2.spkg, you get these two lines for applying Sage-specific patches:

```
cp patches/allfaces.c src/src/

patch -p0 < patches/cdd_both_reps-make.patch
```
The first line is the preferred way to patch an upstream source because it copies the patched file patches/allfaces.c over to src/src/. This issue is reported on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/e599fd37de909264).




This depends on #8179.

**CC:**  @vbraun mhampton

**Keywords:** cddlib, polyhedra

**Author:** Volker Braun

**Reviewer:** Minh Van Nguyen

**Merged:** sage-4.3.3.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/8115





---

archive/issue_events_084462.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-29T09:51:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "milestone_number": null,
    "milestone_title": "sage-4.3.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84462"
}
```



---

archive/issue_events_084463.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-29T09:51:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84463"
}
```



---

archive/issue_events_084464.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-29T09:51:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84464"
}
```



---

archive/issue_comments_064227.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nUpdated spkg is up at\n\nhttp://sage.math.washington.edu/home/mvngu/spkg/standard/cddlib/cddlib-094f.p3.spkg\n\nChanges include:\n\n* clean separation between upstream source and Sage-specific patches\n* add function patch() to spkg-install for managing patches\n* use && for conditional \"and\" instead of \"-a\" in spkg-install",
    "created_at": "2010-01-29T09:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64227",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:1'>**Comment 1:**</a>
Updated spkg is up at

http://sage.math.washington.edu/home/mvngu/spkg/standard/cddlib/cddlib-094f.p3.spkg

Changes include:

* clean separation between upstream source and Sage-specific patches
* add function patch() to spkg-install for managing patches
* use && for conditional "and" instead of "-a" in spkg-install



---

archive/issue_events_084465.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-29T09:57:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84465"
}
```



---

archive/issue_comments_064228.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n \n patch -p0 < patches/cdd_both_reps-make.patch\n ```\n-The first line is the preferred way to patch an upstream source because it copies the patched file patches/allfaces.c over to src/src/.\n+The first line is the preferred way to patch an upstream source because it copies the patched file patches/allfaces.c over to src/src/. This issue is reported on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/e599fd37de909264).\n``````\n",
    "created_at": "2010-01-29T10:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64228",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 
 patch -p0 < patches/cdd_both_reps-make.patch
 ```
-The first line is the preferred way to patch an upstream source because it copies the patched file patches/allfaces.c over to src/src/.
+The first line is the preferred way to patch an upstream source because it copies the patched file patches/allfaces.c over to src/src/. This issue is reported on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/e599fd37de909264).
``````




---

archive/issue_comments_064229.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nThe allfaces.c file is mentioned in the cddlib manual as an example file.  Its been in the sage spkg for a long time, I think.  Probably it was originally included to show sage developers how to use the library.  So it seems to make sense to get rid of it after #8115 is sorted out, since cdd_both_reps provides an example that is actually used.  \n\nMy apologies for missing this issue in review - makefiles and libraries are not my strong suit.\n\n-Marshall",
    "created_at": "2010-01-29T14:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64229",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<a id='comment:3'>**Comment 3:**</a>
The allfaces.c file is mentioned in the cddlib manual as an example file.  Its been in the sage spkg for a long time, I think.  Probably it was originally included to show sage developers how to use the library.  So it seems to make sense to get rid of it after #8115 is sorted out, since cdd_both_reps provides an example that is actually used.  

My apologies for missing this issue in review - makefiles and libraries are not my strong suit.

-Marshall



---

archive/issue_comments_064230.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nNew version now has unmodified src (except for deleting unnecessary subdirectories). \n\nhttp://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg\n\nTo simplify review I'll attach spkg-install in verbatim. \n\nChanges: \n* libtool-ized, see https://github.com/sagemath/sage/issues/3304\n  After implementing the changes, I found that tabbott proposed a\n  similar patch to the automake files earlier:\n  http://sagetrac.org/sage_trac/ticket/3304\n* renamed configure.in -> configure.ac (preferred usage)\n* renamed patches/cdd_both_reps-makefiles.patch -> patches/automake.patch \n* added check for required mpir (aka GMP) to spkg-install\n* added spkg-check\n* corrected src/patch usage\n* removed CFLAGS settings in spkg-install, not required.\n* Workaround for spkg-env setting RM=\"rm\"\n  https://github.com/sagemath/sage/issues/7818#comment:28",
    "created_at": "2010-01-29T16:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64230",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'>**Comment 4:**</a>
New version now has unmodified src (except for deleting unnecessary subdirectories). 

http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg

To simplify review I'll attach spkg-install in verbatim. 

Changes: 
* libtool-ized, see https://github.com/sagemath/sage/issues/3304
  After implementing the changes, I found that tabbott proposed a
  similar patch to the automake files earlier:
  http://sagetrac.org/sage_trac/ticket/3304
* renamed configure.in -> configure.ac (preferred usage)
* renamed patches/cdd_both_reps-makefiles.patch -> patches/automake.patch 
* added check for required mpir (aka GMP) to spkg-install
* added spkg-check
* corrected src/patch usage
* removed CFLAGS settings in spkg-install, not required.
* Workaround for spkg-env setting RM="rm"
  https://github.com/sagemath/sage/issues/7818#comment:28



---

archive/issue_comments_064231.json:
```json
{
    "body": "**Attachment:** [spkg-install.gz](https://github.com/sagemath/sage/files/ticket8115/spkg-install.gz)\n\nspkg-install from cddlib-094f.p4.spkg",
    "created_at": "2010-01-29T16:34:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64231",
    "user": "https://github.com/vbraun"
}
```

**Attachment:** [spkg-install.gz](https://github.com/sagemath/sage/files/ticket8115/spkg-install.gz)

spkg-install from cddlib-094f.p4.spkg



---

archive/issue_comments_064232.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nThere are outstanding changes in \n\nhttp://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg\n\nwhich must be first checked in:\n\n```\n[mvngu@mod cddlib-094f.p4]$ pwd\n/home/mvngu/cddlib-094f.p4\n[mvngu@mod cddlib-094f.p4]$ hg st\nM SPKG.txt\nM spkg-install\nA patches/autogenerated/INSTALL\nA patches/autogenerated/Makefile.in\nA patches/autogenerated/aclocal.m4\nA patches/autogenerated/config.guess\nA patches/autogenerated/config.sub\nA patches/autogenerated/configure\nA patches/autogenerated/configure.ac\nA patches/autogenerated/depcomp\nA patches/autogenerated/install-sh\nA patches/autogenerated/ltmain.sh\nA patches/autogenerated/m4/libtool.m4\nA patches/autogenerated/m4/ltoptions.m4\nA patches/autogenerated/m4/ltsugar.m4\nA patches/autogenerated/m4/ltversion.m4\nA patches/autogenerated/m4/lt~obsolete.m4\nA patches/autogenerated/missing\nA patches/autogenerated/mkinstalldirs\nA patches/automake.patch\nA patches/configure.ac\nA patches/lib-src-Makefile.am\nA patches/lib-src-gmp-Makefile.am\nA patches/src-Makefile.am\nA patches/src-gmp-Makefile.am\nA spkg-check\nR patches/cdd_both_reps-make.patch\n```",
    "created_at": "2010-01-31T01:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64232",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:5'>**Comment 5:**</a>
There are outstanding changes in 

http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg

which must be first checked in:

```
[mvngu@mod cddlib-094f.p4]$ pwd
/home/mvngu/cddlib-094f.p4
[mvngu@mod cddlib-094f.p4]$ hg st
M SPKG.txt
M spkg-install
A patches/autogenerated/INSTALL
A patches/autogenerated/Makefile.in
A patches/autogenerated/aclocal.m4
A patches/autogenerated/config.guess
A patches/autogenerated/config.sub
A patches/autogenerated/configure
A patches/autogenerated/configure.ac
A patches/autogenerated/depcomp
A patches/autogenerated/install-sh
A patches/autogenerated/ltmain.sh
A patches/autogenerated/m4/libtool.m4
A patches/autogenerated/m4/ltoptions.m4
A patches/autogenerated/m4/ltsugar.m4
A patches/autogenerated/m4/ltversion.m4
A patches/autogenerated/m4/lt~obsolete.m4
A patches/autogenerated/missing
A patches/autogenerated/mkinstalldirs
A patches/automake.patch
A patches/configure.ac
A patches/lib-src-Makefile.am
A patches/lib-src-gmp-Makefile.am
A patches/src-Makefile.am
A patches/src-gmp-Makefile.am
A spkg-check
R patches/cdd_both_reps-make.patch
```



---

archive/issue_comments_064233.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nI'm moving this to \"needs work\" until all changes have been checked in.",
    "created_at": "2010-01-31T01:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64233",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:6'>**Comment 6:**</a>
I'm moving this to "needs work" until all changes have been checked in.



---

archive/issue_events_084466.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-31T01:37:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84466"
}
```



---

archive/issue_events_084467.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-31T01:37:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84467"
}
```



---

archive/issue_comments_064234.json:
```json
{
    "body": "**Work Issues:** changes must be checked in",
    "created_at": "2010-01-31T01:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64234",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Work Issues:** changes must be checked in



---

archive/issue_comments_064235.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nHere's an updated spkg \n\nhttp://boxen.math.washington.edu/home/mvngu/patch/cddlib-094f.p4.spkg\n\nwhich commits all outstanding changes in vbraun's name. In this updated spkg, I inserted the following line in spkg-install:\n\n```\n[mvngu@mod cddlib-094f.p4]$ hg diff\ndiff -r 499a1b5d0357 spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -47,6 +47,9 @@\n # See https://github.com/sagemath/sage/issues/7818#comment:28\n unset RM\n \n+# apply patches on top of pristine upstream release under src/\n+patch\n+\n cd src\n \n ./configure --prefix=$SAGE_LOCAL\n```\nThis runs the function `patch()` in `spkg-install` so that the patching is done before configuring the upstream source under `src/`.",
    "created_at": "2010-01-31T02:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64235",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:7'>**Comment 7:**</a>
Here's an updated spkg 

http://boxen.math.washington.edu/home/mvngu/patch/cddlib-094f.p4.spkg

which commits all outstanding changes in vbraun's name. In this updated spkg, I inserted the following line in spkg-install:

```
[mvngu@mod cddlib-094f.p4]$ hg diff
diff -r 499a1b5d0357 spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -47,6 +47,9 @@
 # See https://github.com/sagemath/sage/issues/7818#comment:28
 unset RM
 
+# apply patches on top of pristine upstream release under src/
+patch
+
 cd src
 
 ./configure --prefix=$SAGE_LOCAL
```
This runs the function `patch()` in `spkg-install` so that the patching is done before configuring the upstream source under `src/`.



---

archive/issue_events_084468.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-31T02:03:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84468"
}
```



---

archive/issue_events_084469.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-31T02:03:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84469"
}
```



---

archive/issue_comments_064236.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nI didn't know that I had commit rights to the mercurial repository! Also, I thought that the patch function would be called automatically, but clearly it is not and spkg-install has to call it manually. I did not catch that error because I did not delete $SAGE_LOCAL/*/cdd* before force-reinstalling.\n\nTesting the spkg properly, I now noticed that the main src/Makefile.m4 was not included in patches/, and other Makefile.am's were not copied to the right place.  Here is a fixed spkg:\n\nhttp://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg\n\nAlso, changes now checked into hg repo.",
    "created_at": "2010-01-31T12:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64236",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'>**Comment 8:**</a>
I didn't know that I had commit rights to the mercurial repository! Also, I thought that the patch function would be called automatically, but clearly it is not and spkg-install has to call it manually. I did not catch that error because I did not delete $SAGE_LOCAL/*/cdd* before force-reinstalling.

Testing the spkg properly, I now noticed that the main src/Makefile.m4 was not included in patches/, and other Makefile.am's were not copied to the right place.  Here is a fixed spkg:

http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg

Also, changes now checked into hg repo.



---

archive/issue_comments_064237.json:
```json
{
    "body": "**Changing work issues** from \"changes must be checked in\" to \"\".",
    "created_at": "2010-01-31T12:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64237",
    "user": "https://github.com/vbraun"
}
```

**Changing work issues** from "changes must be checked in" to "".



---

archive/issue_events_084470.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-31T22:48:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84470"
}
```



---

archive/issue_events_084471.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-31T22:48:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84471"
}
```



---

archive/issue_comments_064238.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nReplying to [@vbraun](#comment%3A8):\n> I didn't know that I had commit rights to the mercurial repository! \n\nTo some extent, any Sage developer has commit rights. The idea is that one puts one's username in any Mercurial patch. For spkg updates, all changes need to be checked in before submitting them for review. In this way, people know who did what and when. As for patches against the Sage library, a release manager would commit a patch using the username of the developer who wrote that patch. This process can be made easier if the developer puts their username on their patch. By username, this is understood as being a developer's real name, not the username for logging into the Trac server.\n\n\n\n\n> Here is a fixed spkg:\n> \n> http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg\n> \n> Also, changes now checked into hg repo.\n\nThe updated spkg looks good. I longer see any binaries being moved to the script repository at `SAGE_ROOT/local/bin`. All doctests pass.",
    "created_at": "2010-01-31T22:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64238",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:9'>**Comment 9:**</a>
Replying to [@vbraun](#comment%3A8):
> I didn't know that I had commit rights to the mercurial repository! 

To some extent, any Sage developer has commit rights. The idea is that one puts one's username in any Mercurial patch. For spkg updates, all changes need to be checked in before submitting them for review. In this way, people know who did what and when. As for patches against the Sage library, a release manager would commit a patch using the username of the developer who wrote that patch. This process can be made easier if the developer puts their username on their patch. By username, this is understood as being a developer's real name, not the username for logging into the Trac server.




> Here is a fixed spkg:
> 
> http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg
> 
> Also, changes now checked into hg repo.

The updated spkg looks good. I longer see any binaries being moved to the script repository at `SAGE_ROOT/local/bin`. All doctests pass.



---

archive/issue_comments_064239.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nMerged [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg) in the standard spkg repository.",
    "created_at": "2010-01-31T22:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64239",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:10'>**Comment 10:**</a>
Merged [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg) in the standard spkg repository.



---

archive/issue_events_084472.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-31T22:50:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84472"
}
```



---

archive/issue_events_084473.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-31T22:50:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84473"
}
```



---

archive/issue_comments_064240.json:
```json
{
    "body": "**Reviewer:** Minh Van Nguyen",
    "created_at": "2010-01-31T22:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64240",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Reviewer:** Minh Van Nguyen



---

archive/issue_comments_064241.json:
```json
{
    "body": "**Author:** Volker Braun",
    "created_at": "2010-01-31T22:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64241",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Author:** Volker Braun



---

archive/issue_comments_064242.json:
```json
{
    "body": "**Merged:** sage-4.3.2.alpha1",
    "created_at": "2010-01-31T22:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64242",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Merged:** sage-4.3.2.alpha1



---

archive/issue_comments_064243.json:
```json
{
    "body": "**Changing merged** from \"sage-4.3.2.alpha1\" to \"\".",
    "created_at": "2010-02-01T05:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64243",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Changing merged** from "sage-4.3.2.alpha1" to "".



---

archive/issue_comments_064244.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nThis looks bad. I'm now getting a build error when forcing a re-installation of [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg):\n\n```\n[mvngu@mod sage-4.3.2.alpha0]$ ./sage -f http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg\n<compile-messages>\ncddcore.c:2072: error: expected \u2018)\u2019 before \u2018lc\u2019\ncddcore.c:2084: error: expected \u2018)\u2019 before \u2018prod\u2019\nmake[1]: *** [cddcore.lo] Error 1\nmake[1]: Leaving directory `/scratch/mvngu/release/sage-4.3.2.alpha0/spkg/build/cddlib-094f.p4/src/lib-src-gmp'\nmake: *** [all-recursive] Error 1\nError building cddlib\n\nreal    0m17.132s\nuser    0m8.960s\nsys     0m4.350s\nsage: An error occurred while installing cddlib-094f.p4\n```\nI'm reopening this ticket and backing [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg) out of Sage 4.3.2.alpha1.",
    "created_at": "2010-02-01T05:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64244",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:11'>**Comment 11:**</a>
This looks bad. I'm now getting a build error when forcing a re-installation of [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg):

```
[mvngu@mod sage-4.3.2.alpha0]$ ./sage -f http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg
<compile-messages>
cddcore.c:2072: error: expected ‘)’ before ‘lc’
cddcore.c:2084: error: expected ‘)’ before ‘prod’
make[1]: *** [cddcore.lo] Error 1
make[1]: Leaving directory `/scratch/mvngu/release/sage-4.3.2.alpha0/spkg/build/cddlib-094f.p4/src/lib-src-gmp'
make: *** [all-recursive] Error 1
Error building cddlib

real    0m17.132s
user    0m8.960s
sys     0m4.350s
sage: An error occurred while installing cddlib-094f.p4
```
I'm reopening this ticket and backing [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg) out of Sage 4.3.2.alpha1.



---

archive/issue_events_084474.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-02-01T05:03:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84474"
}
```



---

archive/issue_comments_064245.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nWhich architecture is that error on? Full messages log?\n\nI dug around a bit and the autogenerated files were copied with `cp` instead of `cp -p`, which then tricks `make` into re-running some autotools. This might have been the problem, even though it shouldn't. Updated spkg is here:\n\nhttp://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg",
    "created_at": "2010-02-01T13:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64245",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'>**Comment 13:**</a>
Which architecture is that error on? Full messages log?

I dug around a bit and the autogenerated files were copied with `cp` instead of `cp -p`, which then tricks `make` into re-running some autotools. This might have been the problem, even though it shouldn't. Updated spkg is here:

http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg



---

archive/issue_comments_064246.json:
```json
{
    "body": "**Attachment:** [cddlib.log.bz2](https://github.com/sagemath/sage/files/ticket8115/cddlib.log.bz2)\n\ninstall log for cddlib-094f.p4.spkg",
    "created_at": "2010-02-01T19:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64246",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Attachment:** [cddlib.log.bz2](https://github.com/sagemath/sage/files/ticket8115/cddlib.log.bz2)

install log for cddlib-094f.p4.spkg



---

archive/issue_comments_064247.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nReplying to [@vbraun](#comment%3A13):\n> Which architecture is that error on? Full messages log?\n\nHere is some relevant information about the machine on which I tried to force a re-installation of the previous version of cddlib-094f.p4.spkg:\n\n* OS version: Ubuntu 8.04.3 LTS\n* Machine name: mod.math.washington.edu\n* Architecture: Intel(R) Xeon(R) CPU X7460 @ 2.66GHz\n* 32/64 bit: 64-bit\n* RAM: 124 GB\n* Compiler: GCC 4.2.4\n\nEven with the updated spkg you posted, forcing a re-installation also results in a build failure on the above machine. I have attached an install log.",
    "created_at": "2010-02-01T19:13:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64247",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:14'>**Comment 14:**</a>
Replying to [@vbraun](#comment%3A13):
> Which architecture is that error on? Full messages log?

Here is some relevant information about the machine on which I tried to force a re-installation of the previous version of cddlib-094f.p4.spkg:

* OS version: Ubuntu 8.04.3 LTS
* Machine name: mod.math.washington.edu
* Architecture: Intel(R) Xeon(R) CPU X7460 @ 2.66GHz
* 32/64 bit: 64-bit
* RAM: 124 GB
* Compiler: GCC 4.2.4

Even with the updated spkg you posted, forcing a re-installation also results in a build failure on the above machine. I have attached an install log.



---

archive/issue_comments_064248.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nThe problem is that gmp/mpir headers are not found. On my machine, these are already installed in /usr/include, but not on mod.math.washington.edu. I was under the wrong impression that the sage build process would put $SAGE_LOCAL/include and $SAGE_LOCAL/lib at the beginning of CPPFLAGS and LDFLAGS, respectively. Apparently they need to be set manually in the spkg_install.\n\nHere is an updated spkg that sets these *FLAGS correctly. To test it, I uninstalled gmp on my machine and could still build the cddlib spgk successfully.\n\nhttp://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg",
    "created_at": "2010-02-01T21:14:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64248",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'>**Comment 15:**</a>
The problem is that gmp/mpir headers are not found. On my machine, these are already installed in /usr/include, but not on mod.math.washington.edu. I was under the wrong impression that the sage build process would put $SAGE_LOCAL/include and $SAGE_LOCAL/lib at the beginning of CPPFLAGS and LDFLAGS, respectively. Apparently they need to be set manually in the spkg_install.

Here is an updated spkg that sets these *FLAGS correctly. To test it, I uninstalled gmp on my machine and could still build the cddlib spgk successfully.

http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg



---

archive/issue_comments_064249.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nReplying to [@vbraun](#comment%3A15):\n\n> \n> Here is an updated spkg that sets these *FLAGS correctly. To test it, I uninstalled gmp on my machine and could still build the cddlib spgk successfully.\n> \n> http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg\n\nThis one fails with:\n\n\n```\nconfig.status: creating lib-src/Makefile\nconfig.status: creating src/Makefile\nconfig.status: creating lib-src-gmp/Makefile\nconfig.status: creating src-gmp/Makefile\nconfig.status: creating Makefile\nconfig.status: executing depfiles commands\nconfig.status: executing libtool commands\nmake: Fatal error in reader: Makefile, line 706: Unexpected end of line seen\nError building cddlib\n\nreal    0m3.070s\nuser    0m0.743s\nsys     0m0.886s\nsage: An error occurred while installing cddlib-094f.p4\n\n```\n\nOn Open Solaris x64\n\nJaap",
    "created_at": "2010-02-02T15:20:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64249",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:16'>**Comment 16:**</a>
Replying to [@vbraun](#comment%3A15):

> 
> Here is an updated spkg that sets these *FLAGS correctly. To test it, I uninstalled gmp on my machine and could still build the cddlib spgk successfully.
> 
> http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg

This one fails with:


```
config.status: creating lib-src/Makefile
config.status: creating src/Makefile
config.status: creating lib-src-gmp/Makefile
config.status: creating src-gmp/Makefile
config.status: creating Makefile
config.status: executing depfiles commands
config.status: executing libtool commands
make: Fatal error in reader: Makefile, line 706: Unexpected end of line seen
Error building cddlib

real    0m3.070s
user    0m0.743s
sys     0m0.886s
sage: An error occurred while installing cddlib-094f.p4

```

On Open Solaris x64

Jaap



---

archive/issue_comments_064250.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nReplying to [@jaapspies](#comment%3A16):\n\n> \n> On Open Solaris x64\n> \n\n\n\n\nSorry for the noise. This was due to a configuration error: no libtool in /usr/bin\n\nOn my Open Solaris in VirtualBox no such a problem. There are others!\n\nJaap",
    "created_at": "2010-02-02T16:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64250",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:17'>**Comment 17:**</a>
Replying to [@jaapspies](#comment%3A16):

> 
> On Open Solaris x64
> 




Sorry for the noise. This was due to a configuration error: no libtool in /usr/bin

On my Open Solaris in VirtualBox no such a problem. There are others!

Jaap



---

archive/issue_comments_064251.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,3 +6,17 @@\n patch -p0 < patches/cdd_both_reps-make.patch\n ```\n The first line is the preferred way to patch an upstream source because it copies the patched file patches/allfaces.c over to src/src/. This issue is reported on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/e599fd37de909264).\n+\n+\n+\n+\n+**Note to release manager:** A known issue is that cddlib-094f.p2.spkg places two binaries under the directory `SAGE_LOCAL`, in particular:\n+\n+```\n+[mvngu@mod bin]$ pwd\n+/scratch/mvngu/release/sage-4.3.2.alpha1/local/bin\n+[mvngu@mod bin]$ hg st\n+? cdd_both_reps\n+? cdd_both_reps_gmp\n+```\n+You can remove these two binary files once you have compiled Sage. Also, you need to remove these two binaries before producing a source distribution, whether that be an alpha, rc, or final release.\n``````\n",
    "created_at": "2010-02-03T18:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64251",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,3 +6,17 @@
 patch -p0 < patches/cdd_both_reps-make.patch
 ```
 The first line is the preferred way to patch an upstream source because it copies the patched file patches/allfaces.c over to src/src/. This issue is reported on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/e599fd37de909264).
+
+
+
+
+**Note to release manager:** A known issue is that cddlib-094f.p2.spkg places two binaries under the directory `SAGE_LOCAL`, in particular:
+
+```
+[mvngu@mod bin]$ pwd
+/scratch/mvngu/release/sage-4.3.2.alpha1/local/bin
+[mvngu@mod bin]$ hg st
+? cdd_both_reps
+? cdd_both_reps_gmp
+```
+You can remove these two binary files once you have compiled Sage. Also, you need to remove these two binaries before producing a source distribution, whether that be an alpha, rc, or final release.
``````




---

archive/issue_comments_064252.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n \n \n-**Note to release manager:** A known issue is that cddlib-094f.p2.spkg places two binaries under the directory `SAGE_LOCAL`, in particular:\n+**Note to release manager:** cddlib-094f.p?.spkg places two new binaries under the directory `$SAGE_LOCAL/bin`, in particular:\n \n ```\n [mvngu@mod bin]$ pwd\n@@ -19,4 +19,4 @@\n ? cdd_both_reps\n ? cdd_both_reps_gmp\n ```\n-You can remove these two binary files once you have compiled Sage. Also, you need to remove these two binaries before producing a source distribution, whether that be an alpha, rc, or final release.\n+These are required by the rewritten polyhedra package. A patch to `$SAGE_LOCAL/bin/.hgignore` is attached. \n``````\n",
    "created_at": "2010-02-03T19:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64252",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 
 
-**Note to release manager:** A known issue is that cddlib-094f.p2.spkg places two binaries under the directory `SAGE_LOCAL`, in particular:
+**Note to release manager:** cddlib-094f.p?.spkg places two new binaries under the directory `$SAGE_LOCAL/bin`, in particular:
 
 ```
 [mvngu@mod bin]$ pwd
@@ -19,4 +19,4 @@
 ? cdd_both_reps
 ? cdd_both_reps_gmp
 ```
-You can remove these two binary files once you have compiled Sage. Also, you need to remove these two binaries before producing a source distribution, whether that be an alpha, rc, or final release.
+These are required by the rewritten polyhedra package. A patch to `$SAGE_LOCAL/bin/.hgignore` is attached. 
``````




---

archive/issue_comments_064253.json:
```json
{
    "body": "**Attachment:** [cddlib-local-bin-hgignore.patch.gz](https://github.com/sagemath/sage/files/ticket8115/cddlib-local-bin-hgignore.patch.gz)\n\nAdd cdd_both_reps/cdd_both_reps_gmp binaries to .hgignore.",
    "created_at": "2010-02-03T19:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64253",
    "user": "https://github.com/vbraun"
}
```

**Attachment:** [cddlib-local-bin-hgignore.patch.gz](https://github.com/sagemath/sage/files/ticket8115/cddlib-local-bin-hgignore.patch.gz)

Add cdd_both_reps/cdd_both_reps_gmp binaries to .hgignore.



---

archive/issue_comments_064254.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,13 +10,4 @@\n \n \n \n-**Note to release manager:** cddlib-094f.p?.spkg places two new binaries under the directory `$SAGE_LOCAL/bin`, in particular:\n-\n-```\n-[mvngu@mod bin]$ pwd\n-/scratch/mvngu/release/sage-4.3.2.alpha1/local/bin\n-[mvngu@mod bin]$ hg st\n-? cdd_both_reps\n-? cdd_both_reps_gmp\n-```\n-These are required by the rewritten polyhedra package. A patch to `$SAGE_LOCAL/bin/.hgignore` is attached. \n+This depends on #8179.\n``````\n",
    "created_at": "2010-02-03T19:48:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64254",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,13 +10,4 @@
 
 
 
-**Note to release manager:** cddlib-094f.p?.spkg places two new binaries under the directory `$SAGE_LOCAL/bin`, in particular:
-
-```
-[mvngu@mod bin]$ pwd
-/scratch/mvngu/release/sage-4.3.2.alpha1/local/bin
-[mvngu@mod bin]$ hg st
-? cdd_both_reps
-? cdd_both_reps_gmp
-```
-These are required by the rewritten polyhedra package. A patch to `$SAGE_LOCAL/bin/.hgignore` is attached. 
+This depends on #8179.
``````




---

archive/issue_comments_064255.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nI don't know how long it would take to positively review this ticket. So I have moved [cddlib-local-bin-hgignore.patch](https://github.com/sagemath/sage/files/ticket8115/cddlib-local-bin-hgignore.patch.gz) over to #8179.",
    "created_at": "2010-02-03T19:48:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64255",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:20'>**Comment 20:**</a>
I don't know how long it would take to positively review this ticket. So I have moved [cddlib-local-bin-hgignore.patch](https://github.com/sagemath/sage/files/ticket8115/cddlib-local-bin-hgignore.patch.gz) over to #8179.



---

archive/issue_comments_064256.json:
```json
{
    "body": "**Changing reviewer** from \"Minh Van Nguyen\" to \"\".",
    "created_at": "2010-02-17T01:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64256",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Changing reviewer** from "Minh Van Nguyen" to "".



---

archive/issue_comments_064257.json:
```json
{
    "body": "**Changing author** from \"Volker Braun\" to \"Minh Van Nguyen\".",
    "created_at": "2010-02-17T01:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64257",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Changing author** from "Volker Braun" to "Minh Van Nguyen".



---

archive/issue_comments_064258.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nA reason why this ticket has been stalling is that we have been trying to do too many things at once. The original intention was to get `cddlib-094f.p2.spkg` into such a shape that there is a clear separation between Sage specific patches and upstream source. And also to use `cp` during the patching process. The updated package \n\nhttp://sage.math.washington.edu/home/mvngu/spkg/standard/cddlib/cddlib-094f.p3.spkg\n\ndoes just the above two tasks. Once this spkg is in, we can open another ticket to tidy up cddlib. So only `cddlib-094f.p3.spkg` needs reviewing.",
    "created_at": "2010-02-17T01:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64258",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:21'>**Comment 21:**</a>
A reason why this ticket has been stalling is that we have been trying to do too many things at once. The original intention was to get `cddlib-094f.p2.spkg` into such a shape that there is a clear separation between Sage specific patches and upstream source. And also to use `cp` during the patching process. The updated package 

http://sage.math.washington.edu/home/mvngu/spkg/standard/cddlib/cddlib-094f.p3.spkg

does just the above two tasks. Once this spkg is in, we can open another ticket to tidy up cddlib. So only `cddlib-094f.p3.spkg` needs reviewing.



---

archive/issue_events_084475.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-02-17T01:13:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84475"
}
```



---

archive/issue_events_084476.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-02-17T01:13:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84476"
}
```



---

archive/issue_events_084477.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-02-17T01:32:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84477"
}
```



---

archive/issue_events_084478.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-02-17T01:32:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84478"
}
```



---

archive/issue_comments_064259.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nThe .p3 will break polyhedra.py, please don't apply that. You need those two parts:\n\n```\n    # Required by sage.geometry.polyhedra\n    cp patches/cdd_both_reps.c src/src/\n    cp patches/cdd_both_reps.c src/src-gmp/\n```\n\nTo actually compile these extra .c sources, you need the updated Makefile.am's and rerun autoconf/automake and keep track of the autogenerated files.\n\nCan you be a bit clearer on what you want to separate out? Do you want a spkg with all updates and fixes except the libtools stuff? I can split that out but I don't quite see the point. We'd have to test one new set of autotools-files and then, with the shared library update, trash those autogenerated files and try yet another set of autogenerated files.",
    "created_at": "2010-02-17T01:32:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64259",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'>**Comment 22:**</a>
The .p3 will break polyhedra.py, please don't apply that. You need those two parts:

```
    # Required by sage.geometry.polyhedra
    cp patches/cdd_both_reps.c src/src/
    cp patches/cdd_both_reps.c src/src-gmp/
```

To actually compile these extra .c sources, you need the updated Makefile.am's and rerun autoconf/automake and keep track of the autogenerated files.

Can you be a bit clearer on what you want to separate out? Do you want a spkg with all updates and fixes except the libtools stuff? I can split that out but I don't quite see the point. We'd have to test one new set of autotools-files and then, with the shared library update, trash those autogenerated files and try yet another set of autogenerated files.



---

archive/issue_comments_064260.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nNow I'm looking at [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg). I'm getting this:\n\n```\n[mvngu@sage cddlib-094f.p4]$ hg st\n! patches/autogenerated/configure.ac\n```",
    "created_at": "2010-02-17T01:46:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64260",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:23'>**Comment 23:**</a>
Now I'm looking at [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg). I'm getting this:

```
[mvngu@sage cddlib-094f.p4]$ hg st
! patches/autogenerated/configure.ac
```



---

archive/issue_comments_064261.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nSorry I forgot to commit that change; Fixed now.\n\nSince configure.ac is one of the autotools source files, it belongs into patches/ and not into patches/autogenerated.",
    "created_at": "2010-02-17T12:18:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64261",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'>**Comment 24:**</a>
Sorry I forgot to commit that change; Fixed now.

Since configure.ac is one of the autotools source files, it belongs into patches/ and not into patches/autogenerated.



---

archive/issue_events_084479.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-02-17T12:18:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84479"
}
```



---

archive/issue_events_084480.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-02-17T12:18:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84480"
}
```



---

archive/issue_comments_064262.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nReplying to [@vbraun](#comment%3A24):\n> Sorry I forgot to commit that change; Fixed now.\n\nWhere is the updated spkg. I assume that this is the updated spkg:\n\nhttp://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg\n\nBut that one still gives:\n\n```\n[mvngu@sage cddlib-094f.p4]$ hg st\n! patches/autogenerated/configure.ac\n```",
    "created_at": "2010-02-17T14:51:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64262",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:25'>**Comment 25:**</a>
Replying to [@vbraun](#comment%3A24):
> Sorry I forgot to commit that change; Fixed now.

Where is the updated spkg. I assume that this is the updated spkg:

http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg

But that one still gives:

```
[mvngu@sage cddlib-094f.p4]$ hg st
! patches/autogenerated/configure.ac
```



---

archive/issue_comments_064263.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nOops. Copied updated spgk to\n\nhttp://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg",
    "created_at": "2010-02-17T15:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64263",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'>**Comment 26:**</a>
Oops. Copied updated spgk to

http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg



---

archive/issue_comments_064264.json:
```json
{
    "body": "**Reviewer:** Minh Van Nguyen",
    "created_at": "2010-02-17T20:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64264",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Reviewer:** Minh Van Nguyen



---

archive/issue_comments_064265.json:
```json
{
    "body": "**Changing author** from \"Minh Van Nguyen\" to \"Volker Braun\".",
    "created_at": "2010-02-17T20:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64265",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Changing author** from "Minh Van Nguyen" to "Volker Braun".



---

archive/issue_events_084481.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-02-17T20:57:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84481"
}
```



---

archive/issue_events_084482.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-02-17T20:57:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84482"
}
```



---

archive/issue_comments_064266.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nThe package [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg) now builds on sage.math, bsd.math, rosemary.math, and machines on Skynet.",
    "created_at": "2010-02-17T20:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64266",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:27'>**Comment 27:**</a>
The package [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg) now builds on sage.math, bsd.math, rosemary.math, and machines on Skynet.



---

archive/issue_events_084483.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-02-17T20:58:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84483"
}
```



---

archive/issue_events_084484.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-02-17T20:58:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8115#event-84484"
}
```



---

archive/issue_comments_064267.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nMerged [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg) in the standard spkg repository.",
    "created_at": "2010-02-17T20:58:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64267",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:28'>**Comment 28:**</a>
Merged [cddlib-094f.p4.spkg](http://www.stp.dias.ie/~vbraun/cddlib-094f.p4.spkg) in the standard spkg repository.



---

archive/issue_comments_064268.json:
```json
{
    "body": "**Merged:** sage-4.3.3.alpha1",
    "created_at": "2010-02-17T20:58:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64268",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Merged:** sage-4.3.3.alpha1



---

archive/issue_comments_064269.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nGuys, it would be good to know how to do changes in this  framework of patches you created.\nThe current problem with this spkg is that gmp must be in $SAGE_LOCAL, and not in /usr/local\nThis stops the thing building on Solaris, see [http://groups.google.com/group/sage-release/msg/35b0c600a5ef250f](http://groups.google.com/group/sage-release/msg/35b0c600a5ef250f) and other messages in this thread.\nAnd gmpdir=/usr/local is hardwired in Makefile.am...\n\nThanks,\nDima",
    "created_at": "2010-04-20T13:04:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64269",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'>**Comment 29:**</a>
Guys, it would be good to know how to do changes in this  framework of patches you created.
The current problem with this spkg is that gmp must be in $SAGE_LOCAL, and not in /usr/local
This stops the thing building on Solaris, see [http://groups.google.com/group/sage-release/msg/35b0c600a5ef250f](http://groups.google.com/group/sage-release/msg/35b0c600a5ef250f) and other messages in this thread.
And gmpdir=/usr/local is hardwired in Makefile.am...

Thanks,
Dima



---

archive/issue_comments_064270.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nDima, this ticket has already been closed. I created a new ticket with your problem at #8730, and will post updated spkg there.",
    "created_at": "2010-04-20T17:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8115#issuecomment-64270",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'>**Comment 30:**</a>
Dima, this ticket has already been closed. I created a new ticket with your problem at #8730, and will post updated spkg there.
