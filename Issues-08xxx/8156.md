# Issue 8156: [with code] new function readdata

archive/issues_008156.json:
```json
{
    "body": "I'm missing in Sage a function equivalent to \"readdata\" in Maple,\nwhich reads a file with one object per line, and convert it to a\nlist of the given type. Here is a tentative implementation:\n\n```\ndef readdata(f,typ):\n   fp = open(f,\"r\")\n   l = []\n   while true:\n      s = fp.readline()\n      if s == '':\n         break\n      l.append(typ(s))\n   fp.close()\n   return l\n```\nFor example readdata(\"integers\", ZZ) will read a file containing one\ninteger per line, and convert it to a list of integers. One could\nalso extend the function to read n objects per line.\n\nIf a similar function already exists in Sage, please forgive me.\n\nThe function name might be renamed to read_data.\n\n**Assignee:** @williamstein\n\n**CC:**  mvngu\n\n**Resolution:** fixed\n\n**Author:** Paul Zimmermann, Mitesh Patel\n\n**Reviewer:** Tim Dumol, John Palmieri, Paul Zimmermann\n\n**Merged:** sage-4.5.2.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/8156\n\n",
    "closed_at": "2010-07-22T23:37:01Z",
    "created_at": "2010-02-02T20:57:48Z",
    "labels": [
        "component: interfaces",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.5.2",
    "title": "[with code] new function readdata",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8156",
    "user": "https://github.com/zimmermann6"
}
```
I'm missing in Sage a function equivalent to "readdata" in Maple,
which reads a file with one object per line, and convert it to a
list of the given type. Here is a tentative implementation:

```
def readdata(f,typ):
   fp = open(f,"r")
   l = []
   while true:
      s = fp.readline()
      if s == '':
         break
      l.append(typ(s))
   fp.close()
   return l
```
For example readdata("integers", ZZ) will read a file containing one
integer per line, and convert it to a list of integers. One could
also extend the function to read n objects per line.

If a similar function already exists in Sage, please forgive me.

The function name might be renamed to read_data.

**Assignee:** @williamstein

**CC:**  mvngu

**Resolution:** fixed

**Author:** Paul Zimmermann, Mitesh Patel

**Reviewer:** Tim Dumol, John Palmieri, Paul Zimmermann

**Merged:** sage-4.5.2.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/8156





---

archive/issue_comments_090586.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2010-02-02T20:58:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90586",
    "user": "https://github.com/zimmermann6"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_090587.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-02-22T09:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90587",
    "user": "https://github.com/qed777"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_090588.json:
```json
{
    "body": "**Work_Issues:** No patch",
    "created_at": "2010-02-22T09:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90588",
    "user": "https://github.com/qed777"
}
```

**Work_Issues:** No patch



---

archive/issue_comments_090589.json:
```json
{
    "body": "<a id='comment:3'></a>\nI'd like to propose a patch, but since I never created a new function in Sage I don't know in\nwhich file I should add this function (and how to do so that it is available to the user).\nShould I add it in a specialized package (like io)? Any advice would be welcome.\nShould I add it in misc/misc.py??",
    "created_at": "2010-02-22T21:48:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90589",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:3'></a>
I'd like to propose a patch, but since I never created a new function in Sage I don't know in
which file I should add this function (and how to do so that it is available to the user).
Should I add it in a specialized package (like io)? Any advice would be welcome.
Should I add it in misc/misc.py??



---

archive/issue_comments_090590.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [mpatel](#comment%3A2):\n\nSounds like a useful addition to me. Are you saying this will only read in files for which data entries are separated by newline characters? It seems to me that this could be made more general rather easily, though without more details it is hard to say how exactly.\n\nIn any case, I would like to suggest adding it to the interfaces subdirectory.",
    "created_at": "2010-02-22T21:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90590",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:4'></a>
Replying to [mpatel](#comment%3A2):

Sounds like a useful addition to me. Are you saying this will only read in files for which data entries are separated by newline characters? It seems to me that this could be made more general rather easily, though without more details it is hard to say how exactly.

In any case, I would like to suggest adding it to the interfaces subdirectory.



---

archive/issue_comments_090591.json:
```json
{
    "body": "<a id='comment:5'></a>\n> In any case, I would like to suggest adding it to the interfaces subdirectory. \n\n\nok, I have prepared a patch with a new file interfaces/readdata.py. However hg_sage.diff()\ndoes not show this new file. How to tell Mercurial to consider it?",
    "created_at": "2010-02-23T07:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90591",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:5'></a>
> In any case, I would like to suggest adding it to the interfaces subdirectory. 


ok, I have prepared a patch with a new file interfaces/readdata.py. However hg_sage.diff()
does not show this new file. How to tell Mercurial to consider it?



---

archive/issue_comments_090592.json:
```json
{
    "body": "<a id='comment:6'></a>\nJust do `hg add name_of_the_file`.  Before doing this you can try `hg status`, which should show this file with a question mark in front.  After doing `hg add`, it should show the file with a capital A in front.",
    "created_at": "2010-02-23T08:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90592",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:6'></a>
Just do `hg add name_of_the_file`.  Before doing this you can try `hg status`, which should show this file with a question mark in front.  After doing `hg add`, it should show the file with a capital A in front.



---

archive/attachments_010051.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8156.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8156/trac_8156.patch",
    "created_at": "2010-02-23T09:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/zimmermann6"
}
```



---

archive/issue_comments_090593.json:
```json
{
    "body": "",
    "created_at": "2010-02-23T09:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90593",
    "user": "https://github.com/zimmermann6"
}
```





---

archive/issue_comments_090594.json:
```json
{
    "body": "<a id='comment:7'></a>\nthanks Alex. I have attached my patch, which is ready for review.",
    "created_at": "2010-02-23T09:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90594",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:7'></a>
thanks Alex. I have attached my patch, which is ready for review.



---

archive/issue_comments_090595.json:
```json
{
    "body": "**Author:** Paul Zimmermann",
    "created_at": "2010-02-23T09:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90595",
    "user": "https://github.com/zimmermann6"
}
```

**Author:** Paul Zimmermann



---

archive/issue_comments_090596.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-02-23T09:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90596",
    "user": "https://github.com/zimmermann6"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_090597.json:
```json
{
    "body": "**Reviewer:** Tim Dumol",
    "created_at": "2010-04-18T10:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90597",
    "user": "https://github.com/TimDumol"
}
```

**Reviewer:** Tim Dumol



---

archive/issue_comments_090598.json:
```json
{
    "body": "**Changing work_issues** from \"No patch\" to \"\".",
    "created_at": "2010-04-18T10:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90598",
    "user": "https://github.com/TimDumol"
}
```

**Changing work_issues** from "No patch" to "".



---

archive/issue_comments_090599.json:
```json
{
    "body": "<a id='comment:8'></a>\nLGTM.",
    "created_at": "2010-04-18T10:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90599",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:8'></a>
LGTM.



---

archive/issue_comments_090600.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-04-18T10:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90600",
    "user": "https://github.com/TimDumol"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_090601.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2010-04-18T15:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90601",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_090602.json:
```json
{
    "body": "<a id='comment:9'></a>\nOn sage.math, I get doctest failures:\n\n```\nsage -t  \"devel/sage/sage/interfaces/read_data.py\"          \n**********************************************************************\nFile \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py\", line 24:\n    sage: !echo \"17\" > in.data; echo \"42\" >> in.data\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_1[2]>\", line 1\n         !echo \"17\" > in.data; echo \"42\" >> in.data###line 24:\n    sage: !echo \"17\" > in.data; echo \"42\" >> in.data\n         ^\n     SyntaxError: invalid syntax\n**********************************************************************\nFile \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py\", line 25:\n    sage: cat in.data\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_1[3]>\", line 1\n         cat in.data###line 25:\n    sage: cat in.data\n               ^\n     SyntaxError: invalid syntax\n**********************************************************************\nFile \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py\", line 28:\n    sage: l = read_data(\"in.data\", ZZ); l\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_1[4]>\", line 1, in <module>\n        l = read_data(\"in.data\", ZZ); l###line 28:\n    sage: l = read_data(\"in.data\", ZZ); l\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/lib/python/site-packages/sage/interfaces/read_data.py\", line 34, in read_data\n        fp = open(f,\"r\")\n    IOError: [Errno 2] No such file or directory: 'in.data'\n**********************************************************************\nFile \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py\", line 30:\n    sage: !echo \"1.234\" > in.data; echo \"5.678\" >> in.data\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_1[5]>\", line 1\n         !echo \"1.234\" > in.data; echo \"5.678\" >> in.data###line 30:\n    sage: !echo \"1.234\" > in.data; echo \"5.678\" >> in.data\n         ^\n     SyntaxError: invalid syntax\n**********************************************************************\nFile \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py\", line 31:\n    sage: l = read_data(\"in.data\", RealField(17)); l\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_1[6]>\", line 1, in <module>\n        l = read_data(\"in.data\", RealField(Integer(17))); l###line 31:\n    sage: l = read_data(\"in.data\", RealField(17)); l\n      File \"/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/lib/python/site-packages/sage/interfaces/read_data.py\", line 34, in read_data\n        fp = open(f,\"r\")\n    IOError: [Errno 2] No such file or directory: 'in.data'\n**********************************************************************\n1 items had failures:\n   5 of   7 in `__main__`.example_1\n***Test Failed*** 5 failures.\n```\nFor portability, it might be better to use Python for the doctests: something like\n\n```\nsage: f = open(\"in.data\", \"w\")\nsage: f.write(\"17\\n42\")\nsage: f.close()\n   etc.\n```\nAlso, line 29, `[17. 42]` looks suspicious: should that period be a comma?",
    "created_at": "2010-04-18T15:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90602",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
On sage.math, I get doctest failures:

```
sage -t  "devel/sage/sage/interfaces/read_data.py"          
**********************************************************************
File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py", line 24:
    sage: !echo "17" > in.data; echo "42" >> in.data
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_1[2]>", line 1
         !echo "17" > in.data; echo "42" >> in.data###line 24:
    sage: !echo "17" > in.data; echo "42" >> in.data
         ^
     SyntaxError: invalid syntax
**********************************************************************
File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py", line 25:
    sage: cat in.data
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_1[3]>", line 1
         cat in.data###line 25:
    sage: cat in.data
               ^
     SyntaxError: invalid syntax
**********************************************************************
File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py", line 28:
    sage: l = read_data("in.data", ZZ); l
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_1[4]>", line 1, in <module>
        l = read_data("in.data", ZZ); l###line 28:
    sage: l = read_data("in.data", ZZ); l
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/lib/python/site-packages/sage/interfaces/read_data.py", line 34, in read_data
        fp = open(f,"r")
    IOError: [Errno 2] No such file or directory: 'in.data'
**********************************************************************
File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py", line 30:
    sage: !echo "1.234" > in.data; echo "5.678" >> in.data
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_1[5]>", line 1
         !echo "1.234" > in.data; echo "5.678" >> in.data###line 30:
    sage: !echo "1.234" > in.data; echo "5.678" >> in.data
         ^
     SyntaxError: invalid syntax
**********************************************************************
File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/devel/sage/sage/interfaces/read_data.py", line 31:
    sage: l = read_data("in.data", RealField(17)); l
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_1[6]>", line 1, in <module>
        l = read_data("in.data", RealField(Integer(17))); l###line 31:
    sage: l = read_data("in.data", RealField(17)); l
      File "/mnt/usb1/scratch/palmieri/sage-4.4.alpha0-testing/local/lib/python/site-packages/sage/interfaces/read_data.py", line 34, in read_data
        fp = open(f,"r")
    IOError: [Errno 2] No such file or directory: 'in.data'
**********************************************************************
1 items had failures:
   5 of   7 in `__main__`.example_1
***Test Failed*** 5 failures.
```
For portability, it might be better to use Python for the doctests: something like

```
sage: f = open("in.data", "w")
sage: f.write("17\n42")
sage: f.close()
   etc.
```
Also, line 29, `[17. 42]` looks suspicious: should that period be a comma?



---

archive/issue_comments_090603.json:
```json
{
    "body": "<a id='comment:10'></a>\nOh, also please include an \"INPUT\" block in the docstring.  For instance, what exactly do you mean by a \"type\" for the argument \"t\"?",
    "created_at": "2010-04-18T16:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90603",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>
Oh, also please include an "INPUT" block in the docstring.  For instance, what exactly do you mean by a "type" for the argument "t"?



---

archive/issue_comments_090604.json:
```json
{
    "body": "<a id='comment:11'></a>\nOne more thing: if you're going to create a file in a doctest, then create it in a temporary directory.  See the second point here: [http://www.sagemath.org/doc/developer/conventions.html#further-conventions-for-automated-testing-of-examples](http://www.sagemath.org/doc/developer/conventions.html#further-conventions-for-automated-testing-of-examples).",
    "created_at": "2010-04-18T16:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90604",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
One more thing: if you're going to create a file in a doctest, then create it in a temporary directory.  See the second point here: [http://www.sagemath.org/doc/developer/conventions.html#further-conventions-for-automated-testing-of-examples](http://www.sagemath.org/doc/developer/conventions.html#further-conventions-for-automated-testing-of-examples).



---

archive/issue_comments_090605.json:
```json
{
    "body": "<a id='comment:12'></a>\nMy bad on the false positive. Sorry.",
    "created_at": "2010-04-18T16:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90605",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:12'></a>
My bad on the false positive. Sorry.



---

archive/issue_comments_090606.json:
```json
{
    "body": "**Changing reviewer** from \"Tim Dumol\" to \"Tim Dumol, John H Palmieri\".",
    "created_at": "2010-04-18T16:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90606",
    "user": "https://github.com/TimDumol"
}
```

**Changing reviewer** from "Tim Dumol" to "Tim Dumol, John H Palmieri".



---

archive/issue_comments_090607.json:
```json
{
    "body": "<a id='comment:13'></a>\nNo problem.",
    "created_at": "2010-04-18T18:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90607",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>
No problem.



---

archive/attachments_010052.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8156a.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8156/trac_8156a.patch",
    "created_at": "2010-04-19T16:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/zimmermann6"
}
```



---

archive/issue_comments_090608.json:
```json
{
    "body": "",
    "created_at": "2010-04-19T16:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90608",
    "user": "https://github.com/zimmermann6"
}
```





---

archive/issue_comments_090609.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-04-19T16:37:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90609",
    "user": "https://github.com/zimmermann6"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_090610.json:
```json
{
    "body": "<a id='comment:14'></a>\nthank you Tim and John for your review. I've attached a new patch (to be applied alone). I've\ntested it on 4.3.5. A minor issue is that in the documentation f.write(\"17\\n42\") is split\nalong two lines... Should I put \\\\ in the docstring?\n\nPaul",
    "created_at": "2010-04-19T16:37:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90610",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:14'></a>
thank you Tim and John for your review. I've attached a new patch (to be applied alone). I've
tested it on 4.3.5. A minor issue is that in the documentation f.write("17\n42") is split
along two lines... Should I put \\ in the docstring?

Paul



---

archive/issue_comments_090611.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [zimmerma](#comment%3A14):\n> Should I put \\\\ in the docstring?\n\n\nFirst try changing \"\"\" to r\"\"\" at the beginning of the docstring.  That might fix it.",
    "created_at": "2010-04-19T17:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90611",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'></a>
Replying to [zimmerma](#comment%3A14):
> Should I put \\ in the docstring?


First try changing """ to r""" at the beginning of the docstring.  That might fix it.



---

archive/attachments_010053.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8156b.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8156/trac_8156b.patch",
    "created_at": "2010-04-20T09:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/zimmermann6"
}
```



---

archive/issue_comments_090612.json:
```json
{
    "body": "",
    "created_at": "2010-04-20T09:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90612",
    "user": "https://github.com/zimmermann6"
}
```





---

archive/issue_comments_090613.json:
```json
{
    "body": "<a id='comment:16'></a>\n> First try changing \"\"\" to r\"\"\" at the beginning of the docstring. That might fix it. \n\n\nnot quite. It solves the line break problem, but \"17\\n42\\n\" appears as \"17n42n\" in the ascii\ndocumentation. Anyway this is a different issue, since it also happens with (for example):\n\n```\nsage: from sage.combinat.matrices.latin import *\nsage: B = back_circulant(4)\nsage: B.find_disjoint_mates?\n```\nwhere `print B0, \"\\n,\\n\", B1` appears as `print B0, \"n,n\", B1`.\n\nTo reviewers and release manager: only apply the last patch `trac_8156b.patch`.",
    "created_at": "2010-04-20T09:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90613",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:16'></a>
> First try changing """ to r""" at the beginning of the docstring. That might fix it. 


not quite. It solves the line break problem, but "17\n42\n" appears as "17n42n" in the ascii
documentation. Anyway this is a different issue, since it also happens with (for example):

```
sage: from sage.combinat.matrices.latin import *
sage: B = back_circulant(4)
sage: B.find_disjoint_mates?
```
where `print B0, "\n,\n", B1` appears as `print B0, "n,n", B1`.

To reviewers and release manager: only apply the last patch `trac_8156b.patch`.



---

archive/issue_comments_090614.json:
```json
{
    "body": "<a id='comment:17'></a>\nDoctests pass. Positive review.\n\nManager note: Does the tempfile in $SAGE_TMP need to be explicitly deleted? I don't think so, but if that's the case, please mark as needs work.",
    "created_at": "2010-06-23T08:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90614",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:17'></a>
Doctests pass. Positive review.

Manager note: Does the tempfile in $SAGE_TMP need to be explicitly deleted? I don't think so, but if that's the case, please mark as needs work.



---

archive/issue_comments_090615.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-06-23T08:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90615",
    "user": "https://github.com/TimDumol"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_090616.json:
```json
{
    "body": "**Changing status** from positive_review to needs_info.",
    "created_at": "2010-07-21T03:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90616",
    "user": "https://github.com/qed777"
}
```

**Changing status** from positive_review to needs_info.



---

archive/issue_comments_090617.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [timdumol](#comment%3A17):\n> Doctests pass. Positive review.\n> \n> Manager note: Does the tempfile in $SAGE_TMP need to be explicitly deleted? I don't think so, but if that's the case, please mark as needs work.\n\nI think it's OK if we don't delete the file explicitly.  But maybe it's better to use `tmp_filename`, which increments an internal counter and checks whether the file already exists?\n\nMinh, what do you think?",
    "created_at": "2010-07-21T03:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90617",
    "user": "https://github.com/qed777"
}
```

<a id='comment:18'></a>
Replying to [timdumol](#comment%3A17):
> Doctests pass. Positive review.
> 
> Manager note: Does the tempfile in $SAGE_TMP need to be explicitly deleted? I don't think so, but if that's the case, please mark as needs work.

I think it's OK if we don't delete the file explicitly.  But maybe it's better to use `tmp_filename`, which increments an internal counter and checks whether the file already exists?

Minh, what do you think?



---

archive/issue_comments_090618.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mpatel](#comment%3A18):\n> I think it's OK if we don't delete the file explicitly. \n\n\nIt saves a lot of headache for a program to clean up after itself. This happens when you exit a Sage session; temporary files/directories created under `SAGE_TMP` would automatically be deleted when Sage exits. So there's no need to explicitly delete stuff under `SAGE_TMP`.\n\n\n\n\n> But maybe it's better to use `tmp_filename`, which increments an internal counter and checks whether the file already exists?\n\n\nThat's a very neat idea, especially considering that a lot of doctests do create temporary files. It's very easy to have name clashes when you doctest in parallel. Another useful command is `tmp_dir()` for creating a temporary directory. Both `tmp_filename()` and `tmp_dir()` are highly recommended for use in doctests.",
    "created_at": "2010-07-21T06:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90618",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:19'></a>
Replying to [mpatel](#comment%3A18):
> I think it's OK if we don't delete the file explicitly. 


It saves a lot of headache for a program to clean up after itself. This happens when you exit a Sage session; temporary files/directories created under `SAGE_TMP` would automatically be deleted when Sage exits. So there's no need to explicitly delete stuff under `SAGE_TMP`.




> But maybe it's better to use `tmp_filename`, which increments an internal counter and checks whether the file already exists?


That's a very neat idea, especially considering that a lot of doctests do create temporary files. It's very easy to have name clashes when you doctest in parallel. Another useful command is `tmp_dir()` for creating a temporary directory. Both `tmp_filename()` and `tmp_dir()` are highly recommended for use in doctests.



---

archive/issue_comments_090619.json:
```json
{
    "body": "Use `tmp_filename`.  Apply only this patch.",
    "created_at": "2010-07-21T10:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90619",
    "user": "https://github.com/qed777"
}
```

Use `tmp_filename`.  Apply only this patch.



---

archive/attachments_010054.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8156c.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket8156/trac_8156c.patch",
    "created_at": "2010-07-21T10:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/qed777"
}
```



---

archive/issue_comments_090620.json:
```json
{
    "body": "<a id='comment:20'></a>\nI've attached a patch that uses `tmp_filename`.",
    "created_at": "2010-07-21T10:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90620",
    "user": "https://github.com/qed777"
}
```

<a id='comment:20'></a>
I've attached a patch that uses `tmp_filename`.



---

archive/issue_comments_090621.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2010-07-21T10:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90621",
    "user": "https://github.com/qed777"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_090622.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [mpatel](#comment%3A20):\n> I've attached a patch that uses `tmp_filename`.\n\n\nam I allowed to review that patch, being the author of the original patch?\n\nPaul",
    "created_at": "2010-07-21T19:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90622",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:21'></a>
Replying to [mpatel](#comment%3A20):
> I've attached a patch that uses `tmp_filename`.


am I allowed to review that patch, being the author of the original patch?

Paul



---

archive/issue_comments_090623.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [zimmerma](#comment%3A21):\n> Replying to [mpatel](#comment%3A20):\n> > I've attached a patch that uses `tmp_filename`.\n\n> \n> am I allowed to review that patch, being the author of the original patch?\n\n\nSure!",
    "created_at": "2010-07-21T19:39:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90623",
    "user": "https://github.com/qed777"
}
```

<a id='comment:22'></a>
Replying to [zimmerma](#comment%3A21):
> Replying to [mpatel](#comment%3A20):
> > I've attached a patch that uses `tmp_filename`.

> 
> am I allowed to review that patch, being the author of the original patch?


Sure!



---

archive/issue_comments_090624.json:
```json
{
    "body": "**Changing author** from \"Paul Zimmermann\" to \"Paul Zimmermann, Mitesh Patel\".",
    "created_at": "2010-07-22T08:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90624",
    "user": "https://github.com/zimmermann6"
}
```

**Changing author** from "Paul Zimmermann" to "Paul Zimmermann, Mitesh Patel".



---

archive/issue_comments_090625.json:
```json
{
    "body": "**Changing reviewer** from \"Tim Dumol, John H Palmieri\" to \"Tim Dumol, John H Palmieri, Paul Zimmermann\".",
    "created_at": "2010-07-22T08:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90625",
    "user": "https://github.com/zimmermann6"
}
```

**Changing reviewer** from "Tim Dumol, John H Palmieri" to "Tim Dumol, John H Palmieri, Paul Zimmermann".



---

archive/issue_comments_090626.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-07-22T08:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90626",
    "user": "https://github.com/zimmermann6"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_090627.json:
```json
{
    "body": "<a id='comment:23'></a>\nall doctests still pass, and using tmp_filename is indeed better. Positive review.\n\nPaul",
    "created_at": "2010-07-22T08:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90627",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:23'></a>
all doctests still pass, and using tmp_filename is indeed better. Positive review.

Paul



---

archive/issue_comments_090628.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2010-07-22T23:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90628",
    "user": "https://github.com/dandrake"
}
```

**Resolution:** fixed



---

archive/issue_events_024388.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2010-07-22T23:37:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8156#event-24388"
}
```



---

archive/issue_comments_090629.json:
```json
{
    "body": "<a id='comment:24'></a>\nMerged trac_8156c.patch in 4.5.2.alpha1.",
    "created_at": "2010-07-22T23:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90629",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:24'></a>
Merged trac_8156c.patch in 4.5.2.alpha1.



---

archive/issue_comments_090630.json:
```json
{
    "body": "**Merged:** sage-4.5.2.alpha1",
    "created_at": "2010-07-22T23:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90630",
    "user": "https://github.com/dandrake"
}
```

**Merged:** sage-4.5.2.alpha1



---

archive/issue_comments_090631.json:
```json
{
    "body": "**Changing reviewer** from \"Tim Dumol, John H Palmieri, Paul Zimmermann\" to \"Tim Dumol, John Palmieri, Paul Zimmermann\".",
    "created_at": "2010-08-06T01:55:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8156#issuecomment-90631",
    "user": "https://github.com/qed777"
}
```

**Changing reviewer** from "Tim Dumol, John H Palmieri, Paul Zimmermann" to "Tim Dumol, John Palmieri, Paul Zimmermann".
