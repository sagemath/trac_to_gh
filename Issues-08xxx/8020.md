# Issue 8020: python-2.6.4.p4 spkg *totally breaks* itanium support

archive/issues_008020.json:
```json
{
    "body": "```\ngcc version 4.4.2 (GCC)\n****************************************************\nUpdating readline.c for Linux/Itanium\ncp: cannot create regular file `Modules/readline.c': No such file or directory\nError copying patched readline.c\n\nreal    0m0.029s\nuser    0m0.009s\nsys     0m0.011s\nsage: An error occurred while installing python-2.6.4.p4\nPlease email sage-devel http://groups.google.com/group/sage-devel\nexplaining the problem and send the relevant part of\nof /home/wstein/screen/cleo/sage-4.3.1/install.log.  Describe your c\n```\n\nI missed this doing the release, because our Itaniums weren't accessible.\n\nAssignee: tbd\n\nResolution: fixed\n\nAuthor: William Stein\n\nReviewer: Craig Citro\n\nMerged: sage-4.3.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/8020\n\n",
    "closed_at": "2010-01-24T22:29:02Z",
    "created_at": "2010-01-21T02:18:07Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3.2",
    "title": "python-2.6.4.p4 spkg *totally breaks* itanium support",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8020",
    "user": "https://github.com/williamstein"
}
```
```
gcc version 4.4.2 (GCC)
****************************************************
Updating readline.c for Linux/Itanium
cp: cannot create regular file `Modules/readline.c': No such file or directory
Error copying patched readline.c

real    0m0.029s
user    0m0.009s
sys     0m0.011s
sage: An error occurred while installing python-2.6.4.p4
Please email sage-devel http://groups.google.com/group/sage-devel
explaining the problem and send the relevant part of
of /home/wstein/screen/cleo/sage-4.3.1/install.log.  Describe your c
```

I missed this doing the release, because our Itaniums weren't accessible.

Assignee: tbd

Resolution: fixed

Author: William Stein

Reviewer: Craig Citro

Merged: sage-4.3.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/8020





---

archive/issue_comments_072463.json:
```json
{
    "body": "<a id='comment:1'></a>This appears to be trivial to fix.  In spkg-install change:\n\n```\n# The following patch for fixing broken readline behavior on Itanium\n# Linux definitely does *not* work on anything else.\nif [ \"`uname -m`\" = \"ia64\" -a \"`uname`\" = \"Linux\" ]; then\n    echo \"Updating readline.c for Linux/Itanium\"\n    cp patches/readline.c-Itanium-fix Modules/readline.c\n```   \n\nto\n\n```\n# The following patch for fixing broken readline behavior on Itanium\n# Linux definitely does *not* work on anything else.\nif [ \"`uname -m`\" = \"ia64\" -a \"`uname`\" = \"Linux\" ]; then\n    echo \"Updating readline.c for Linux/Itanium\"\n    cp patches/readline.c-Itanium-fix src/Modules/readline.c\n```",
    "created_at": "2010-01-21T02:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8020#issuecomment-72463",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>This appears to be trivial to fix.  In spkg-install change:

```
# The following patch for fixing broken readline behavior on Itanium
# Linux definitely does *not* work on anything else.
if [ "`uname -m`" = "ia64" -a "`uname`" = "Linux" ]; then
    echo "Updating readline.c for Linux/Itanium"
    cp patches/readline.c-Itanium-fix Modules/readline.c
```   

to

```
# The following patch for fixing broken readline behavior on Itanium
# Linux definitely does *not* work on anything else.
if [ "`uname -m`" = "ia64" -a "`uname`" = "Linux" ]; then
    echo "Updating readline.c for Linux/Itanium"
    cp patches/readline.c-Itanium-fix src/Modules/readline.c
```



---

archive/issue_comments_072464.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-01-21T02:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8020#issuecomment-72464",
    "user": "https://github.com/williamstein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_072465.json:
```json
{
    "body": "<a id='comment:2'></a>Here's the new spkg:\n\n   http://sage.math.washington.edu/home/wstein/patches/python-2.6.4.p5.spkg",
    "created_at": "2010-01-21T02:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8020#issuecomment-72465",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>Here's the new spkg:

   http://sage.math.washington.edu/home/wstein/patches/python-2.6.4.p5.spkg



---

archive/issue_comments_072466.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-01-21T03:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8020#issuecomment-72466",
    "user": "https://github.com/craigcitro"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_072467.json:
```json
{
    "body": "<a id='comment:3'></a>Oops ... yep, that was totally a typo on my part while moving things around in the file. Sorry about that ... fix is obviously the right one.",
    "created_at": "2010-01-21T03:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8020#issuecomment-72467",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:3'></a>Oops ... yep, that was totally a typo on my part while moving things around in the file. Sorry about that ... fix is obviously the right one.



---

archive/issue_events_019216.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-01-24T22:29:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8020",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8020#event-19216"
}
```



---

archive/issue_comments_072468.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-01-24T22:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8020#issuecomment-72468",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Resolution: fixed



---

archive/issue_comments_072469.json:
```json
{
    "body": "<a id='comment:4'></a>William's commit message references ticket #8080, which at present doesn't exist. I've changed the ticket number in his commit message to #8020. For reference, my change (to William's commit message) can be found at\n\nhttp://sage.math.washington.edu/home/mvngu/spkg/standard/python/python-2.6.4.p5.spkg\n\nMerged [python-2.6.4.p5.spkg](http://sage.math.washington.edu/home/mvngu/spkg/standard/python/python-2.6.4.p5.spkg) in the standard spkg repository.",
    "created_at": "2010-01-24T22:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8020#issuecomment-72469",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:4'></a>William's commit message references ticket #8080, which at present doesn't exist. I've changed the ticket number in his commit message to #8020. For reference, my change (to William's commit message) can be found at

http://sage.math.washington.edu/home/mvngu/spkg/standard/python/python-2.6.4.p5.spkg

Merged [python-2.6.4.p5.spkg](http://sage.math.washington.edu/home/mvngu/spkg/standard/python/python-2.6.4.p5.spkg) in the standard spkg repository.
