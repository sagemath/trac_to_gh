# Issue 8553: Minor bugs in solve() if dictionary result requested

archive/issues_008553.json:
```json
{
    "assignees": [
        "https://github.com/nexttime"
    ],
    "body": "`solve()` raises an `IndexError` on empty solutions if a list of solution *dictionaries* is requested.\n\nThe description/examples may mislead w.r.t. the result type.\n\n\n---\n\nApply [attachment: trac_8553_solve_fix_IndexError.3.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.3.patch.gz) and [attachment: trac_8553-review.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz).\n\nCC:  @haraldschilly @mwhansen @burcin @jasongrout @kcrisman\n\nKeywords: **solve, solution_dict**\n\nComponent: **symbolics**\n\nAuthor: **Leif Leonhardy**\n\nReviewer: **Harald Schilly, Mike Hansen, Burcin Erocal, Karl-Dieter Crisman**\n\nMerged: **sage-4.7.1.alpha2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8553_\n\n",
    "closed_at": "2011-06-01T07:16:08Z",
    "created_at": "2010-03-17T15:39:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/good%20first%20issue"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Minor bugs in solve() if dictionary result requested",
    "type": "issue",
    "updated_at": "2011-07-22T19:57:05Z",
    "url": "https://github.com/sagemath/sage/issues/8553",
    "user": "https://github.com/nexttime"
}
```
`solve()` raises an `IndexError` on empty solutions if a list of solution *dictionaries* is requested.

The description/examples may mislead w.r.t. the result type.


---

Apply [attachment: trac_8553_solve_fix_IndexError.3.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.3.patch.gz) and [attachment: trac_8553-review.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz).

CC:  @haraldschilly @mwhansen @burcin @jasongrout @kcrisman

Keywords: **solve, solution_dict**

Component: **symbolics**

Author: **Leif Leonhardy**

Reviewer: **Harald Schilly, Mike Hansen, Burcin Erocal, Karl-Dieter Crisman**

Merged: **sage-4.7.1.alpha2**

_Issue created by migration from https://trac.sagemath.org/ticket/8553_





---

archive/issue_events_107619.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-03-17T15:39:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107619"
}
```



---

archive/issue_events_107620.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-03-17T15:39:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p: 5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107620"
}
```



---

archive/issue_events_107621.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-03-17T15:39:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107621"
}
```



---

archive/issue_events_107622.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-03-17T15:39:40Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "subject": "https://github.com/nexttime",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107622"
}
```



---

archive/issue_comments_068328.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n\n```\nsage: x=var('x')\nsage: x\nx\nsage: solve([0==1], x, solution_dict = True)\n[]\nsage: solve([x==0, 0==1], x, solution_dict = True)\n[]\nsage: solve([(x == 0), (x == 1)], x, solution_dict = True)\n---------------------------------------------------------------------------\nIndexError                                Traceback (most recent call last)\n...\nIndexError: list index out of range\n```",
    "created_at": "2010-03-17T15:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68328",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:1" align="right">comment:1</div>


```
sage: x=var('x')
sage: x
x
sage: solve([0==1], x, solution_dict = True)
[]
sage: solve([x==0, 0==1], x, solution_dict = True)
[]
sage: solve([(x == 0), (x == 1)], x, solution_dict = True)
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
...
IndexError: list index out of range
```



---

archive/issue_events_107623.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-03-17T16:39:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107623"
}
```



---

archive/issue_comments_068329.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAttachment: **[trac_8553_solve_dictionary_result_fix.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_dictionary_result_fix.patch.gz)**",
    "created_at": "2010-03-17T16:39:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68329",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:2" align="right">comment:2</div>

Attachment: **[trac_8553_solve_dictionary_result_fix.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_dictionary_result_fix.patch.gz)**



---

archive/issue_comments_068330.json:
```json
{
    "body": "Reviewer: **schilly**",
    "created_at": "2010-03-17T17:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68330",
    "user": "https://github.com/haraldschilly"
}
```

Reviewer: **schilly**



---

archive/issue_events_107624.json:
```json
{
    "actor": "https://github.com/haraldschilly",
    "created_at": "2010-03-17T17:41:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107624"
}
```



---

archive/issue_events_107625.json:
```json
{
    "actor": "https://github.com/haraldschilly",
    "created_at": "2010-03-17T17:41:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107625"
}
```



---

archive/issue_comments_068331.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\npatch works for 4.3.4.rc0 and looks fine. i would just like to see a \"TESTS::\" header for the additional doctests and a line referring to this ticket, smth. like \"this fixes the problem reported in ticket #8553\".",
    "created_at": "2010-03-17T17:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68331",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:3" align="right">comment:3</div>

patch works for 4.3.4.rc0 and looks fine. i would just like to see a "TESTS::" header for the additional doctests and a line referring to this ticket, smth. like "this fixes the problem reported in ticket #8553".



---

archive/issue_events_107626.json:
```json
{
    "actor": "https://github.com/haraldschilly",
    "created_at": "2010-03-17T17:41:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "milestone_number": null,
    "milestone_title": "sage-4.3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107626"
}
```



---

archive/issue_comments_068332.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nStyle-wise, this\n\n```\n{} if 'solution_dict' in kwds and kwds['solution_dict']==True else []\n```\n\nshould be\n\n```\n{} if kwds.get('solution_dict', False) is True else []\n```",
    "created_at": "2010-03-17T19:49:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68332",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:5" align="right">comment:5</div>

Style-wise, this

```
{} if 'solution_dict' in kwds and kwds['solution_dict']==True else []
```

should be

```
{} if kwds.get('solution_dict', False) is True else []
```



---

archive/issue_comments_068333.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOr even \n\n```\n{} if kwds.get('solution_dict', False) else []\n```\n\nif you want to be a bit more lax with inputs.",
    "created_at": "2010-03-17T19:57:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68333",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:6" align="right">comment:6</div>

Or even 

```
{} if kwds.get('solution_dict', False) else []
```

if you want to be a bit more lax with inputs.



---

archive/issue_comments_068334.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@mwhansen](#comment:6):\n> Or even \n> \n> ```\n> {} if kwds.get('solution_dict', False) else []\n> ```\n> \n> if you want to be a bit more lax with inputs.\n\nPlease correct me, but I do not see any difference to your former suggestion.\nIn what sense does this relax the inputs?",
    "created_at": "2010-03-17T20:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68334",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@mwhansen](#comment:6):
> Or even 
> 
> ```
> {} if kwds.get('solution_dict', False) else []
> ```
> 
> if you want to be a bit more lax with inputs.

Please correct me, but I do not see any difference to your former suggestion.
In what sense does this relax the inputs?



---

archive/issue_comments_068335.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIn the first cases, passing in solution_dict=1 would be the same as passing in solution_dict=False.  In the second case, solution_dict=1 would be the same as solution_dict=True.",
    "created_at": "2010-03-17T20:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68335",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:8" align="right">comment:8</div>

In the first cases, passing in solution_dict=1 would be the same as passing in solution_dict=False.  In the second case, solution_dict=1 would be the same as solution_dict=True.



---

archive/issue_comments_068336.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@mwhansen](#comment:8):\n> In the first cases, passing in solution_dict=1 would be the same as passing in solution_dict=False.  In the second case, solution_dict=1 would be the same as solution_dict=True.\n\n\nThat's perhaps what one would expect.\n\nBut `solution_dict=1` evaluates to `True` in all versions, while `solution_dict=42` surprisingly evaluates to `False`, even in your latter version.",
    "created_at": "2010-03-17T21:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68336",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@mwhansen](#comment:8):
> In the first cases, passing in solution_dict=1 would be the same as passing in solution_dict=False.  In the second case, solution_dict=1 would be the same as solution_dict=True.


That's perhaps what one would expect.

But `solution_dict=1` evaluates to `True` in all versions, while `solution_dict=42` surprisingly evaluates to `False`, even in your latter version.



---

archive/issue_comments_068337.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n\n```\nsage: kwds = {'solution_dict': 42}\nsage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []\n{}\nsage: {} if kwds.get('solution_dict', False) is True else []\n[]\nsage: {} if kwds.get('solution_dict', False) else []\n{}\nsage: kwds = {'solution_dict': 42r}\nsage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []\n[]\nsage: {} if kwds.get('solution_dict', False) is True else []\n[]\nsage: {} if kwds.get('solution_dict', False) else []\n{}\n```",
    "created_at": "2010-03-17T21:24:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68337",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:10" align="right">comment:10</div>


```
sage: kwds = {'solution_dict': 42}
sage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []
{}
sage: {} if kwds.get('solution_dict', False) is True else []
[]
sage: {} if kwds.get('solution_dict', False) else []
{}
sage: kwds = {'solution_dict': 42r}
sage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []
[]
sage: {} if kwds.get('solution_dict', False) is True else []
[]
sage: {} if kwds.get('solution_dict', False) else []
{}
```



---

archive/issue_comments_068338.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI have to corrct myself: `1` gives `True` only in the first (because of `==` comparison) and the last implementation.",
    "created_at": "2010-03-17T21:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68338",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:11" align="right">comment:11</div>

I have to corrct myself: `1` gives `True` only in the first (because of `==` comparison) and the last implementation.



---

archive/issue_comments_068339.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n\n```\nsage: kwds = {'solution_dict': 42}\nsage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []\n[]\nsage: {} if kwds.get('solution_dict', False) is True else []\n[]\nsage: {} if kwds.get('solution_dict', False) else []\n{}\nsage: sage: kwds = {'solution_dict': 42r}\nsage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []\n[]\nsage: {} if kwds.get('solution_dict', False) is True else []\n[]\nsage: {} if kwds.get('solution_dict', False) else []\n{}\n\n```\n4.3.4.alpha1\n\nNotice the difference in the first case; 42 is not true for me ;-)",
    "created_at": "2010-03-17T21:43:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68339",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>


```
sage: kwds = {'solution_dict': 42}
sage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []
[]
sage: {} if kwds.get('solution_dict', False) is True else []
[]
sage: {} if kwds.get('solution_dict', False) else []
{}
sage: sage: kwds = {'solution_dict': 42r}
sage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []
[]
sage: {} if kwds.get('solution_dict', False) is True else []
[]
sage: {} if kwds.get('solution_dict', False) else []
{}

```
4.3.4.alpha1

Notice the difference in the first case; 42 is not true for me ;-)



---

archive/issue_comments_068340.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n\n```\nsage: kwds = {'solution_dict': 42}                                         \nsage: print kwds                  \n{'solution_dict': 42}\nsage: sage: kwds = {'solution_dict': 42r}                                  \nsage: print kwds                         \n{'solution_dict': 42}\n\n```\nPreparser issue?",
    "created_at": "2010-03-17T21:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68340",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>


```
sage: kwds = {'solution_dict': 42}                                         
sage: print kwds                  
{'solution_dict': 42}
sage: sage: kwds = {'solution_dict': 42r}                                  
sage: print kwds                         
{'solution_dict': 42}

```
Preparser issue?



---

archive/issue_comments_068341.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nexttime](#comment:13):\n> Preparser issue?\n\nno, that's a feature and notice there is an \"r\" behind the 42! \n\n```\nsage: preparse('42r + 42')\n'42 + Integer(42)'\n```",
    "created_at": "2010-03-17T22:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68341",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nexttime](#comment:13):
> Preparser issue?

no, that's a feature and notice there is an "r" behind the 42! 

```
sage: preparse('42r + 42')
'42 + Integer(42)'
```



---

archive/issue_comments_068342.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@haraldschilly](#comment:14):\n\nOk, but I still don't understand the different behavior of Mike's and my machine:\n\n```\nsage: kwds = {'solution_dict': 42}\nsage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []\n```\n\nWhile Mike gets the empty set, I get the empty list, and if the doctests passed on your 4.3.4.rc0, your version behaves like my 4.3.4.alpha1 (on Ubuntu 9.04 x86_64), because I added the `solution_dict=42` case with an expected empty **list**.",
    "created_at": "2010-03-17T23:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68342",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@haraldschilly](#comment:14):

Ok, but I still don't understand the different behavior of Mike's and my machine:

```
sage: kwds = {'solution_dict': 42}
sage: {} if 'solution_dict' in kwds and kwds['solution_dict']==True else []
```

While Mike gets the empty set, I get the empty list, and if the doctests passed on your 4.3.4.rc0, your version behaves like my 4.3.4.alpha1 (on Ubuntu 9.04 x86_64), because I added the `solution_dict=42` case with an expected empty **list**.



---

archive/issue_comments_068343.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@nexttime](#comment:15):\n\nI still get the empty **list** for the code above with 4.3.4.rc0 (just built on Ubuntu 9.04 x86_64), but I'll update the patch to the latter suggested version (with the 42-testcase changed, i.e. **inverted**!).",
    "created_at": "2010-03-18T00:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68343",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@nexttime](#comment:15):

I still get the empty **list** for the code above with 4.3.4.rc0 (just built on Ubuntu 9.04 x86_64), but I'll update the patch to the latter suggested version (with the 42-testcase changed, i.e. **inverted**!).



---

archive/issue_comments_068344.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[trac_8553_solve_dictionary_result_fix-variant2.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_dictionary_result_fix-variant2.patch.gz)**\n\nApply **either** the first **or** the second patch, **not both**.",
    "created_at": "2010-03-18T00:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68344",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[trac_8553_solve_dictionary_result_fix-variant2.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_dictionary_result_fix-variant2.patch.gz)**

Apply **either** the first **or** the second patch, **not both**.



---

archive/issue_comments_068345.json:
```json
{
    "body": "Changed reviewer from **schilly** to **Harald Schilly, Mike Hansen, Burcin Erocal**",
    "created_at": "2010-03-18T16:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68345",
    "user": "https://github.com/burcin"
}
```

Changed reviewer from **schilly** to **Harald Schilly, Mike Hansen, Burcin Erocal**



---

archive/issue_events_107627.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-03-18T16:42:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107627"
}
```



---

archive/issue_events_107628.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-03-18T16:42:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107628"
}
```



---

archive/issue_comments_068346.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAFAICT, `solve` returns a list of possible solutions to the given equality. When the `solution_dict` parameter is `True`, this list is populated by dictionaries instead of symbolic relations.\n\nWith this reasoning the current behavior of returning an empty list if we can't find any solutions even if the `solution_dict` parameter is `True` seems correct to me.\n\nIMHO, the only thing that needs to be fixed is the `IndexError` when there is no solution. Comments?",
    "created_at": "2010-03-18T16:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68346",
    "user": "https://github.com/burcin"
}
```

<div id="comment:18" align="right">comment:18</div>

AFAICT, `solve` returns a list of possible solutions to the given equality. When the `solution_dict` parameter is `True`, this list is populated by dictionaries instead of symbolic relations.

With this reasoning the current behavior of returning an empty list if we can't find any solutions even if the `solution_dict` parameter is `True` seems correct to me.

IMHO, the only thing that needs to be fixed is the `IndexError` when there is no solution. Comments?



---

archive/issue_comments_068347.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@burcin](#comment:18):\n> IMHO, the only thing that needs to be fixed is the `IndexError` when there is no solution. Comments?\n\nYes please, I don't get it why this is so complicated! All unrelated issues should be discussed off-ticket.",
    "created_at": "2010-03-18T17:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68347",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@burcin](#comment:18):
> IMHO, the only thing that needs to be fixed is the `IndexError` when there is no solution. Comments?

Yes please, I don't get it why this is so complicated! All unrelated issues should be discussed off-ticket.



---

archive/issue_comments_068348.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@burcin](#comment:18):\n> AFAICT, `solve` returns a list of possible solutions to the given equality. When the `solution_dict` parameter is `True`, this list is populated by dictionaries instead of symbolic relations.\n> \n> With this reasoning the current behavior of returning an empty list if we can't find any solutions even if the `solution_dict` parameter is `True` seems correct to me.\n\nThat's really a matter of design; one could equally well specify the function to return a list containing an empty dictionary in that case; i.e., the current specification is not precise (and that's not the only one).\n\nBut you're right, unless we change the *informal* \"prototype\" (its signature), it should in any case return a ***list** of something*.\n\n\nI'd change the patch to reflect whatever behavior you want... ;-)\n\n-Leif",
    "created_at": "2010-03-18T17:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68348",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@burcin](#comment:18):
> AFAICT, `solve` returns a list of possible solutions to the given equality. When the `solution_dict` parameter is `True`, this list is populated by dictionaries instead of symbolic relations.
> 
> With this reasoning the current behavior of returning an empty list if we can't find any solutions even if the `solution_dict` parameter is `True` seems correct to me.

That's really a matter of design; one could equally well specify the function to return a list containing an empty dictionary in that case; i.e., the current specification is not precise (and that's not the only one).

But you're right, unless we change the *informal* "prototype" (its signature), it should in any case return a ***list** of something*.


I'd change the patch to reflect whatever behavior you want... ;-)

-Leif



---

archive/issue_comments_068349.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@haraldschilly](#comment:19):\n> Replying to [@burcin](#comment:18):\n> > IMHO, the only thing that needs to be fixed is the `IndexError` when there is no solution. Comments?\n\n> \n> Yes please, I don't get it why this is so complicated! All unrelated issues should be discussed off-ticket.\n\nSo we'd change the ticket description and the patch to only address and fix the index error?\n\nOk for me.",
    "created_at": "2010-03-18T17:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68349",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@haraldschilly](#comment:19):
> Replying to [@burcin](#comment:18):
> > IMHO, the only thing that needs to be fixed is the `IndexError` when there is no solution. Comments?

> 
> Yes please, I don't get it why this is so complicated! All unrelated issues should be discussed off-ticket.

So we'd change the ticket description and the patch to only address and fix the index error?

Ok for me.



---

archive/issue_comments_068350.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHi Leif,\n\nReplying to [@nexttime](#comment:21):\n> So we'd change the ticket description and the patch to only address and fix the index error?\n> \n> Ok for me.\n\nCan you provide a patch that fixes the `IndexError` problem? If we get this reviewed in the next few days it might still make it to the next release.",
    "created_at": "2010-04-05T13:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68350",
    "user": "https://github.com/burcin"
}
```

<div id="comment:22" align="right">comment:22</div>

Hi Leif,

Replying to [@nexttime](#comment:21):
> So we'd change the ticket description and the patch to only address and fix the index error?
> 
> Ok for me.

Can you provide a patch that fixes the `IndexError` problem? If we get this reviewed in the next few days it might still make it to the next release.



---

archive/issue_comments_068351.json:
```json
{
    "body": "Attachment: **[trac_8553_solve_fix_IndexError.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.patch.gz)**",
    "created_at": "2010-04-06T04:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68351",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[trac_8553_solve_fix_IndexError.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.patch.gz)**



---

archive/issue_comments_068352.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,5 @@\n-solve() raises an index error on empty solutions if solution dictionary was requested; returns empty list instead of empty dictionary in other cases.\n+`solve()` raises an `IndexError` on empty solutions if a list of solution *dictionaries* is requested.\n \n+The description/examples may mislead w.r.t. the result type.\n+\n+\n``````\n",
    "created_at": "2010-04-06T05:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68352",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,5 @@
-solve() raises an index error on empty solutions if solution dictionary was requested; returns empty list instead of empty dictionary in other cases.
+`solve()` raises an `IndexError` on empty solutions if a list of solution *dictionaries* is requested.
 
+The description/examples may mislead w.r.t. the result type.
+
+
``````




---

archive/issue_comments_068353.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nSorry, unable to delete the previous patches; **apply only the last one**.\n\n* `IndexError` issue fixed.\n* Type of parameter `solution_dict` relaxed as suggested by Mike Hansen (now consistent; also in `expression.pyx`/`Expression.solve()`).\n* (More) Doctests added.\n* Description made more clear. Some typos fixed.",
    "created_at": "2010-04-06T05:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68353",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Sorry, unable to delete the previous patches; **apply only the last one**.

* `IndexError` issue fixed.
* Type of parameter `solution_dict` relaxed as suggested by Mike Hansen (now consistent; also in `expression.pyx`/`Expression.solve()`).
* (More) Doctests added.
* Description made more clear. Some typos fixed.



---

archive/issue_events_107629.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-04-06T05:11:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107629"
}
```



---

archive/issue_events_107630.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-04-06T05:11:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107630"
}
```



---

archive/issue_comments_068354.json:
```json
{
    "body": "Attachment: **[trac_8553_solve_fix_IndexError.2.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.2.patch.gz)**\n\nRebase on sage-4.4.alpha0.",
    "created_at": "2010-04-18T07:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68354",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[trac_8553_solve_fix_IndexError.2.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.2.patch.gz)**

Rebase on sage-4.4.alpha0.



---

archive/issue_comments_068355.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nWorks perfectly after this rebase. Positive review, but someone has to review this rebase first.",
    "created_at": "2010-04-18T07:57:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68355",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:25" align="right">comment:25</div>

Works perfectly after this rebase. Positive review, but someone has to review this rebase first.



---

archive/issue_comments_068356.json:
```json
{
    "body": "Attachment: **[trac_8553_solve_fix_IndexError.3.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.3.patch.gz)**\n\nrevised version of Leif's patch",
    "created_at": "2010-05-05T01:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68356",
    "user": "https://github.com/burcin"
}
```

Attachment: **[trac_8553_solve_fix_IndexError.3.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.3.patch.gz)**

revised version of Leif's patch



---

archive/issue_comments_068357.json:
```json
{
    "body": "reviewer's patch",
    "created_at": "2010-05-05T01:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68357",
    "user": "https://github.com/burcin"
}
```

reviewer's patch



---

archive/issue_comments_068358.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[trac_8553-review.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz)**\n\nThe doctests for using values that are taken to be True in Leif's patch added a few extra seconds to the time to test `sage/symbolic/relation.py`. I uploaded a revised version of Leif's patch, [attachment: trac_8553_solve_fix_IndexError.3.patch,](https://github.com/sagemath/sage/files/ticket8553/38dd7ba34818c1351c34679001aea3b8.gz) which cuts down on these examples.\n\n[attachment: trac_8553-review.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz) adds a new test condition to check if the first argument is a list, after the statement that handles a single symbolic expression.\n\nCan someone review my patch?",
    "created_at": "2010-05-05T01:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68358",
    "user": "https://github.com/burcin"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[trac_8553-review.patch.gz](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz)**

The doctests for using values that are taken to be True in Leif's patch added a few extra seconds to the time to test `sage/symbolic/relation.py`. I uploaded a revised version of Leif's patch, [attachment: trac_8553_solve_fix_IndexError.3.patch,](https://github.com/sagemath/sage/files/ticket8553/38dd7ba34818c1351c34679001aea3b8.gz) which cuts down on these examples.

[attachment: trac_8553-review.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz) adds a new test condition to check if the first argument is a list, after the statement that handles a single symbolic expression.

Can someone review my patch?



---

archive/issue_comments_068359.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@burcin](#comment:26):\n> The doctests for using values that are taken to be True in Leif's patch added a few extra seconds to the time to test `sage/symbolic/relation.py`.\n\n:-) Adding `# optional` or `# long` would have been possible, too.\n\n(Now the tests of Python `int`s vs. Sage's `Integer`s are omitted.)",
    "created_at": "2010-05-05T12:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68359",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@burcin](#comment:26):
> The doctests for using values that are taken to be True in Leif's patch added a few extra seconds to the time to test `sage/symbolic/relation.py`.

:-) Adding `# optional` or `# long` would have been possible, too.

(Now the tests of Python `int`s vs. Sage's `Integer`s are omitted.)



---

archive/issue_comments_068360.json:
```json
{
    "body": "Author: **Leif Leonhardy**",
    "created_at": "2010-05-06T16:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68360",
    "user": "https://github.com/burcin"
}
```

Author: **Leif Leonhardy**



---

archive/issue_comments_068361.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@nexttime](#comment:27):\n> Replying to [@burcin](#comment:26):\n> > The doctests for using values that are taken to be True in Leif's patch added a few extra seconds to the time to test `sage/symbolic/relation.py`.\n\n> \n> :-) Adding `# optional` or `# long` would have been possible, too.\n> \n> (Now the tests of Python `int`s vs. Sage's `Integer`s are omitted.)\n\nSince they weren't testing the functionality of `solve()`, but a convenience in Python, I think it's OK if they are not so extensive. I run doctests on these files very often, so it's rather important that even the long tests take a reasonable time.\n\nCan you review my changes BTW?",
    "created_at": "2010-05-06T16:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68361",
    "user": "https://github.com/burcin"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@nexttime](#comment:27):
> Replying to [@burcin](#comment:26):
> > The doctests for using values that are taken to be True in Leif's patch added a few extra seconds to the time to test `sage/symbolic/relation.py`.

> 
> :-) Adding `# optional` or `# long` would have been possible, too.
> 
> (Now the tests of Python `int`s vs. Sage's `Integer`s are omitted.)

Since they weren't testing the functionality of `solve()`, but a convenience in Python, I think it's OK if they are not so extensive. I run doctests on these files very often, so it's rather important that even the long tests take a reasonable time.

Can you review my changes BTW?



---

archive/issue_events_107631.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-05-26T16:44:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/good%20first%20issue",
    "label_color": "7057ff",
    "label_name": "good first issue",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107631"
}
```



---

archive/issue_events_107632.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-06-07T17:04:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107632"
}
```



---

archive/issue_events_107633.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-06-07T17:04:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107633"
}
```



---

archive/issue_comments_068362.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@burcin](#comment:28):\n> Can you review my changes BTW? \n\n`m.to_poly_solve(variables)` might be called twice.\n\nBtw, I think the patch should be finally reviewed by someone else, not me, as I'm one of the authors.",
    "created_at": "2010-06-07T17:04:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68362",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@burcin](#comment:28):
> Can you review my changes BTW? 

`m.to_poly_solve(variables)` might be called twice.

Btw, I think the patch should be finally reviewed by someone else, not me, as I'm one of the authors.



---

archive/issue_comments_068363.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nJust for reference, see [this sage-support thread](http://groups.google.com/group/sage-support/browse_thread/thread/d54b283435a8ed4b/1eab51e2561da568) for another report of this.",
    "created_at": "2011-05-18T13:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68363",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:32" align="right">comment:32</div>

Just for reference, see [this sage-support thread](http://groups.google.com/group/sage-support/browse_thread/thread/d54b283435a8ed4b/1eab51e2561da568) for another report of this.



---

archive/issue_events_107634.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-05-18T16:04:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107634"
}
```



---

archive/issue_events_107635.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-05-18T16:04:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107635"
}
```



---

archive/issue_events_107636.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-05-18T16:04:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107636"
}
```



---

archive/issue_events_107637.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-05-18T16:04:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107637"
}
```



---

archive/issue_comments_068364.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,6 @@\n The description/examples may mislead w.r.t. the result type.\n \n \n+---\n+\n+Apply [attachment: trac_8553_solve_fix_IndexError.3.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.3.patch.gz) and [attachment: trac_8553-review.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz).\n``````\n",
    "created_at": "2011-05-18T16:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68364",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,6 @@
 The description/examples may mislead w.r.t. the result type.
 
 
+---
+
+Apply [attachment: trac_8553_solve_fix_IndexError.3.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.3.patch.gz) and [attachment: trac_8553-review.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz).
``````




---

archive/issue_comments_068365.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@nexttime](#comment:30):\n> Replying to [@burcin](#comment:28):\n> > Can you review my changes BTW? \n\n> \n> `m.to_poly_solve(variables)` might be called twice.\n\nIt is, but only in the unusual situation that Maxima's solve gave an error and `to_poly_solve` gave the empty list.  More to the point, this was there before, and should be a different ticket.\n\n> Btw, I think the patch should be finally reviewed by someone else, not me, as I'm one of the authors.\n>  \n\nNot at all - usually it is appropriate to review a reviewer patch.  This reviewer patch really is pretty minimally invasive, and in fact provides a much more useful error message.\n\nIt is true that \n\n```\nsage: solve(x==1,x,solution_dict=int(3))\n[{x: 1}]\nsage: solve([0==1],x,solution_dict=int(3))\n[]\nsage: solve(0==1,x,solution_dict=int(3))\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/Users/karl-dietercrisman/Downloads/sage-4.7.rc1/<ipython console> in <module>()\n\n/Users/karl-dietercrisman/Downloads/sage-4.7.rc1/local/lib/python2.6/site-packages/sage/symbolic/relation.pyc in solve(f, *args, **kwds)\n    652 \n    653     if not isinstance(f, (list, tuple)):\n--> 654         raise TypeError(\"The first argument must be a symbolic expression or a list of symbolic expressions.\")\n    655 \n    656     if len(f)==1 and is_Expression(f[0]):\n\nTypeError: The first argument must be a symbolic expression or a list of symbolic expressions.\n```\nwhich is not ideal.  However, this is still better behavior than the mysterious message about bools and len before, so that could be another ticket.  \n\nIn any case, this (somewhat surprisingly) still applies fine to 4.7.rc2!  And does what it says.  And passes tests. Positive review.",
    "created_at": "2011-05-18T16:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68365",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@nexttime](#comment:30):
> Replying to [@burcin](#comment:28):
> > Can you review my changes BTW? 

> 
> `m.to_poly_solve(variables)` might be called twice.

It is, but only in the unusual situation that Maxima's solve gave an error and `to_poly_solve` gave the empty list.  More to the point, this was there before, and should be a different ticket.

> Btw, I think the patch should be finally reviewed by someone else, not me, as I'm one of the authors.
>  

Not at all - usually it is appropriate to review a reviewer patch.  This reviewer patch really is pretty minimally invasive, and in fact provides a much more useful error message.

It is true that 

```
sage: solve(x==1,x,solution_dict=int(3))
[{x: 1}]
sage: solve([0==1],x,solution_dict=int(3))
[]
sage: solve(0==1,x,solution_dict=int(3))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/Users/karl-dietercrisman/Downloads/sage-4.7.rc1/<ipython console> in <module>()

/Users/karl-dietercrisman/Downloads/sage-4.7.rc1/local/lib/python2.6/site-packages/sage/symbolic/relation.pyc in solve(f, *args, **kwds)
    652 
    653     if not isinstance(f, (list, tuple)):
--> 654         raise TypeError("The first argument must be a symbolic expression or a list of symbolic expressions.")
    655 
    656     if len(f)==1 and is_Expression(f[0]):

TypeError: The first argument must be a symbolic expression or a list of symbolic expressions.
```
which is not ideal.  However, this is still better behavior than the mysterious message about bools and len before, so that could be another ticket.  

In any case, this (somewhat surprisingly) still applies fine to 4.7.rc2!  And does what it says.  And passes tests. Positive review.



---

archive/issue_comments_068366.json:
```json
{
    "body": "Changed reviewer from **Harald Schilly, Mike Hansen, Burcin Erocal** to **Harald Schilly, Mike Hansen, Burcin Erocal, Karl-Dieter Crisman**",
    "created_at": "2011-05-18T16:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68366",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Harald Schilly, Mike Hansen, Burcin Erocal** to **Harald Schilly, Mike Hansen, Burcin Erocal, Karl-Dieter Crisman**



---

archive/issue_events_107638.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-01T07:16:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107638"
}
```



---

archive/issue_events_107639.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-01T07:16:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8553#event-107639"
}
```



---

archive/issue_comments_068367.json:
```json
{
    "body": "Merged: **sage-4.7.1.alpha2**",
    "created_at": "2011-06-01T07:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68367",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.1.alpha2**



---

archive/issue_comments_068368.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nFor the sagebot:\n\nApply [attachment: trac_8553_solve_fix_IndexError.3.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.3.patch.gz) [attachment: trac_8553-review.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz)",
    "created_at": "2011-07-22T19:57:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8553#issuecomment-68368",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:35" align="right">comment:35</div>

For the sagebot:

Apply [attachment: trac_8553_solve_fix_IndexError.3.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553_solve_fix_IndexError.3.patch.gz) [attachment: trac_8553-review.patch](https://github.com/sagemath/sage/files/ticket8553/trac_8553-review.patch.gz)
