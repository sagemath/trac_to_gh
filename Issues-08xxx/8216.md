# Issue 8216: Make David Perkinson's sandpile 2.2 module an experimental (at least) package

archive/issues_008216.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nRecently the sandpile-1.51 spkg was included in the experimental components.  This ticket updates the source to version 2.2.\n\nIn addition to updating the source, the installation script has been simplified and the SPKG.txt has been improved in an effort to get this package to optional status.  \n\nThis package does depend on the 4ti2.p0 spkg, which is currently experimental.  As a separate but dependent ticket 4ti2 will be upgraded to an optional package as well to harmonize this dependency.\n\nNew package is at:\n[http://sage.math.washington.edu/home/mhampton/sandpile-2.2.spkg](http://sage.math.washington.edu/home/mhampton/sandpile-2.2.spkg)\n\nCC:  @sagetrac-dperkinson @wdjoyner @jdemeyer\n\nComponent: **packages: optional**\n\nKeywords: **sandpile**\n\nReviewer: **David Kirkby**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8216_\n\n",
    "closed_at": "2011-01-13T04:41:19Z",
    "created_at": "2010-02-08T20:20:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make David Perkinson's sandpile 2.2 module an experimental (at least) package",
    "type": "issue",
    "updated_at": "2011-01-13T04:43:48Z",
    "url": "https://github.com/sagemath/sage/issues/8216",
    "user": "https://github.com/sagetrac-mhampton"
}
```
<div id="comment:0"></div>

Recently the sandpile-1.51 spkg was included in the experimental components.  This ticket updates the source to version 2.2.

In addition to updating the source, the installation script has been simplified and the SPKG.txt has been improved in an effort to get this package to optional status.  

This package does depend on the 4ti2.p0 spkg, which is currently experimental.  As a separate but dependent ticket 4ti2 will be upgraded to an optional package as well to harmonize this dependency.

New package is at:
[http://sage.math.washington.edu/home/mhampton/sandpile-2.2.spkg](http://sage.math.washington.edu/home/mhampton/sandpile-2.2.spkg)

CC:  @sagetrac-dperkinson @wdjoyner @jdemeyer

Component: **packages: optional**

Keywords: **sandpile**

Reviewer: **David Kirkby**

_Issue created by migration from https://trac.sagemath.org/ticket/8216_





---

archive/issue_events_101425.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-02-08T20:20:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101425"
}
```



---

archive/issue_events_101426.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-02-08T20:20:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101426"
}
```



---

archive/issue_events_101427.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-02-08T20:20:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101427"
}
```



---

archive/issue_events_101428.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-02-08T20:20:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101428"
}
```



---

archive/issue_events_101429.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-02-08T20:29:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "milestone_number": null,
    "milestone_title": "sage-4.3.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101429"
}
```



---

archive/issue_comments_063642.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'm not sure what needs review means here. Isn't this supposed to be voted on on sage-devel? Also, does this come after/depend on the 4ti2.p0 spkg ticket/vote https://github.com/sagemath/sage/issues/8217 ?",
    "created_at": "2010-02-09T18:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63642",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:3" align="right">comment:3</div>

I'm not sure what needs review means here. Isn't this supposed to be voted on on sage-devel? Also, does this come after/depend on the 4ti2.p0 spkg ticket/vote https://github.com/sagemath/sage/issues/8217 ?



---

archive/issue_comments_063643.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI don't optional packages require a vote, no.  Making a package standard does.\n\nYes, I guess this does depend on 8217, although for review purposes it isn't in the sense that \"sage -i 4ti2.p0\" will work wether or not its experimental or optional.",
    "created_at": "2010-02-09T18:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63643",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:4" align="right">comment:4</div>

I don't optional packages require a vote, no.  Making a package standard does.

Yes, I guess this does depend on 8217, although for review purposes it isn't in the sense that "sage -i 4ti2.p0" will work wether or not its experimental or optional.



---

archive/issue_comments_063644.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@sagetrac-mhampton](#comment%3A4):\n> I don't optional packages require a vote, no.  Making a package standard does.\n> \n\nOkay.\n\n> Yes, I guess this does depend on 8217, although for review purposes it isn't in the sense that \"sage -i 4ti2.p0\" will work \n> wether or not its experimental or optional.\n\nWhat would you like the review to consist of? \n\nI have read the documentation and used the functions in the spkg and the sandpile.sage file. Is sandpile.sage in this spkg?",
    "created_at": "2010-02-09T21:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63644",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@sagetrac-mhampton](#comment%3A4):
> I don't optional packages require a vote, no.  Making a package standard does.
> 

Okay.

> Yes, I guess this does depend on 8217, although for review purposes it isn't in the sense that "sage -i 4ti2.p0" will work 
> wether or not its experimental or optional.

What would you like the review to consist of? 

I have read the documentation and used the functions in the spkg and the sandpile.sage file. Is sandpile.sage in this spkg?



---

archive/issue_events_101430.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-22T00:38:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101430"
}
```



---

archive/issue_events_101431.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-22T00:38:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101431"
}
```



---

archive/issue_comments_063645.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nMy understanding was that experimental packages did not require a vote, but optional did. As such, this would require a vote. \n\nThis is severely broken on Solaris, but reports it is successfully installed. One obvious problem is the use of a non-POSIX option to grep. \n\n```\nsandpile-2.0/src/\nsandpile-2.0/src/sandpile.py\nFinished extraction\n****************************************************\nHost system\nuname -a:\nSunOS redstart 5.10 Generic sun4u sparc SUNW,Sun-Blade-1000\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nTarget: sparc-sun-solaris2.10\nConfigured with: ../gcc-4.4.3/configure --prefix=/usr/local/gcc-4.4.3 --with-mpfr=/usr/local/gcc-4.4.3 --with-build-time-tools=/usr/ccs/bin --with-gmp=/usr/local/gcc-4.4.3 --enable-languages=c,c++,fortran\nThread model: posix\ngcc version 4.4.3 (GCC) \n****************************************************\nInstalling glpk-4.38.p4\nCalling sage-spkg on glpk-4.38.p4\nWarning: Attempted to overwrite SAGE_ROOT environment variable\nglpk-4.38.p4\nMachine:\nSunOS redstart 5.10 Generic sun4u sparc SUNW,Sun-Blade-1000\nDeleting directories from past builds of previous/current versions of glpk-4.38.p4\n/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-spkg: file glpk-4.38.p4 does not exist\nAttempting to download it.\ngrep: illegal option -- o\nUsage: grep -hblcnsviw pattern file . . .\nSearching for latest version of glpk-4.38.p4\nTraceback (most recent call last):\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-latest-online-package\", line 54, in <module>\n    packages = spkg_list(repository)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-latest-online-package\", line 43, in spkg_list\n    data = urllib2.urlopen(web_url)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 124, in urlopen\n    return _opener.open(url, data, timeout)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 389, in open\n    response = self._open(req, data)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 407, in _open\n    '_open', req)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 367, in _call_chain\n    result = func(*args)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 1146, in http_open\n    return self.do_open(httplib.HTTPConnection, req)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 1121, in do_open\n    raise URLError(err)\nurllib2.URLError: <urlopen error [Errno 8] node name or service name not known>\n\nInstalling 4ti2.p0\nCalling sage-spkg on 4ti2.p0\nWarning: Attempted to overwrite SAGE_ROOT environment variable\n4ti2.p0\nMachine:\nSunOS redstart 5.10 Generic sun4u sparc SUNW,Sun-Blade-1000\nDeleting directories from past builds of previous/current versions of 4ti2.p0\n/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-spkg: file 4ti2.p0 does not exist\nAttempting to download it.\ngrep: illegal option -- o\nUsage: grep -hblcnsviw pattern file . . .\nSearching for latest version of 4ti2.p0\nTraceback (most recent call last):\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-latest-online-package\", line 54, in <module>\n    packages = spkg_list(repository)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-latest-online-package\", line 43, in spkg_list\n    data = urllib2.urlopen(web_url)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 124, in urlopen\n    return _opener.open(url, data, timeout)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 389, in open\n    response = self._open(req, data)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 407, in _open\n    '_open', req)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 367, in _call_chain\n    result = func(*args)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 1146, in http_open\n    return self.do_open(httplib.HTTPConnection, req)\n  File \"/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py\", line 1121, in do_open\n    raise URLError(err)\nurllib2.URLError: <urlopen error [Errno 8] node name or service name not known>\n\n\nreal    0m1.394s\nuser    0m0.631s\nsys     0m0.710s\nSuccessfully installed sandpile-2.0\n```\n\nIt would need to be able to build on Solaris before it could be incorporated into Sage\n\nThere's general information about building on Solaris at\n\n  http://wiki.sagemath.org/solaris\n\n Information specifically for 't2' at\n\n  http://wiki.sagemath.org/devel/Building-Sage-on-the-T5240-t2\n\n Both the source (4.3.0.1 is the latest to build on Solaris) and a binary\n which will run on any SPARC can be found at http://www.sagemath.org\n /download-source.html\n\n Dave",
    "created_at": "2010-02-22T00:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63645",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:6" align="right">comment:6</div>

My understanding was that experimental packages did not require a vote, but optional did. As such, this would require a vote. 

This is severely broken on Solaris, but reports it is successfully installed. One obvious problem is the use of a non-POSIX option to grep. 

```
sandpile-2.0/src/
sandpile-2.0/src/sandpile.py
Finished extraction
****************************************************
Host system
uname -a:
SunOS redstart 5.10 Generic sun4u sparc SUNW,Sun-Blade-1000
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
Target: sparc-sun-solaris2.10
Configured with: ../gcc-4.4.3/configure --prefix=/usr/local/gcc-4.4.3 --with-mpfr=/usr/local/gcc-4.4.3 --with-build-time-tools=/usr/ccs/bin --with-gmp=/usr/local/gcc-4.4.3 --enable-languages=c,c++,fortran
Thread model: posix
gcc version 4.4.3 (GCC) 
****************************************************
Installing glpk-4.38.p4
Calling sage-spkg on glpk-4.38.p4
Warning: Attempted to overwrite SAGE_ROOT environment variable
glpk-4.38.p4
Machine:
SunOS redstart 5.10 Generic sun4u sparc SUNW,Sun-Blade-1000
Deleting directories from past builds of previous/current versions of glpk-4.38.p4
/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-spkg: file glpk-4.38.p4 does not exist
Attempting to download it.
grep: illegal option -- o
Usage: grep -hblcnsviw pattern file . . .
Searching for latest version of glpk-4.38.p4
Traceback (most recent call last):
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-latest-online-package", line 54, in <module>
    packages = spkg_list(repository)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-latest-online-package", line 43, in spkg_list
    data = urllib2.urlopen(web_url)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 124, in urlopen
    return _opener.open(url, data, timeout)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 389, in open
    response = self._open(req, data)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 407, in _open
    '_open', req)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 367, in _call_chain
    result = func(*args)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 1146, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 1121, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 8] node name or service name not known>

Installing 4ti2.p0
Calling sage-spkg on 4ti2.p0
Warning: Attempted to overwrite SAGE_ROOT environment variable
4ti2.p0
Machine:
SunOS redstart 5.10 Generic sun4u sparc SUNW,Sun-Blade-1000
Deleting directories from past builds of previous/current versions of 4ti2.p0
/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-spkg: file 4ti2.p0 does not exist
Attempting to download it.
grep: illegal option -- o
Usage: grep -hblcnsviw pattern file . . .
Searching for latest version of 4ti2.p0
Traceback (most recent call last):
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-latest-online-package", line 54, in <module>
    packages = spkg_list(repository)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/bin/sage-latest-online-package", line 43, in spkg_list
    data = urllib2.urlopen(web_url)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 124, in urlopen
    return _opener.open(url, data, timeout)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 389, in open
    response = self._open(req, data)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 407, in _open
    '_open', req)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 367, in _call_chain
    result = func(*args)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 1146, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/export/home/drkirkby/sage-4.3.3.alpha1/local/lib/python/urllib2.py", line 1121, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 8] node name or service name not known>


real    0m1.394s
user    0m0.631s
sys     0m0.710s
Successfully installed sandpile-2.0
```

It would need to be able to build on Solaris before it could be incorporated into Sage

There's general information about building on Solaris at

  http://wiki.sagemath.org/solaris

 Information specifically for 't2' at

  http://wiki.sagemath.org/devel/Building-Sage-on-the-T5240-t2

 Both the source (4.3.0.1 is the latest to build on Solaris) and a binary
 which will run on any SPARC can be found at http://www.sagemath.org
 /download-source.html

 Dave



---

archive/issue_comments_063646.json:
```json
{
    "body": "Reviewer: **David Kirkby**",
    "created_at": "2010-02-22T00:38:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63646",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Reviewer: **David Kirkby**



---

archive/issue_comments_063647.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNo, optional packages do not require a vote.  Making a package standard does.  However, the expectations for an optional package keep rising.  I think building on Solaris is probably considered a requirement.\n\nI'm not sure where these grep calls are coming from, they look like the installation script uses them somehow when adding glpk and 4ti2 but it just uses \"sage -i\".",
    "created_at": "2010-02-22T14:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63647",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:8" align="right">comment:8</div>

No, optional packages do not require a vote.  Making a package standard does.  However, the expectations for an optional package keep rising.  I think building on Solaris is probably considered a requirement.

I'm not sure where these grep calls are coming from, they look like the installation script uses them somehow when adding glpk and 4ti2 but it just uses "sage -i".



---

archive/issue_comments_063648.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@sagetrac-mhampton](#comment%3A8):\n> No, optional packages do not require a vote. \n\nThank you for clarification on this. \n\nSo what (if any) additional requirements are there for 'optional' as opposed to 'experimental' packages? \n\nhttp://www.sagemath.org/packages/optional/\n\ngives no warnings that the optional packages may be seriously broken, whereas 'experimental'\n\nhttp://www.sagemath.org/packages/experimental/\n\nhas in great big bold letters that **These are EXPERIMENTAL! They probably won't work at all for you! Use at your own risk! Many of these have *never* been successfully built on any platform! (But still, if you can figure out how to build them, I'd like to know about it.) These also may not be available under a GPL-compatible license**\n\n> Making a package standard does.  \n\nYes, I was aware of that. There would be complete chaos if not. \n\n> However, the expectations for an optional package keep rising.  I think building on Solaris is probably considered a requirement.\n\n \nI'd hope so. http://www.sagemath.org/doc/developer/inclusion.html says \n\n**Some Sage developers are willing to help you port to OS X, Solaris and Windows. But this is no guarantee and you or your project are expected to do the heavy lifting and also support those ports upstream if there is no Sage developer who is willing to share the burden.**\n\nI feel at the minute that I'm personally sharing too much responsibility for making sure the packages don't break on Solaris. William sends me a recent email:\n\n'''David,\n\n**(1) I couldn't get anywhere building Sage on x86 Solaris on skynet (fulvia).  Can you?  This was pretty annoying to the people that bought us fulvia.**\n\n**(2) Sun wants to know if we have a Sage available yet for t2.  See below.**\n\n**I really need to shift into the mode of actually providing something that *works* on Solaris, despite hickups, rather than just polishing foundations...**\n\nUnfortunately, without more testing on Solaris, this is just not going to happen. I'm personally not in a position to test everyones patches on Solaris. \n\n> I'm not sure where these grep calls are coming from, they look like the installation script uses them somehow when adding glpk and 4ti2 but it just uses \"sage -i\".  \n\nMe neither. But neither do I have the time to resolve this. A quick check on the man page for 'grep' on Linux shows the option 'o' being:\n\n```\n      -o, --only-matching\n              Print  only  the  matched  (non-empty) parts of a matching line,\n              with each such part on a separate output line.\n```\n\nI'll leave it to others to work out how to implement this in a POSIX compatible way. The POSIX options for 'grep' can be found at http://www.opengroup.org/onlinepubs/9699919799/utilities/grep.html \n\nI hope these comments are helpful, and I'll answer any questions I can, but I'm simply not in a position to sort out these issues. \n\n**PS I realise the author of this package has not requested any help on Solaris, so I'm not suggesting he is personally to blame for my frustration.**\n\nDave",
    "created_at": "2010-02-22T15:54:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63648",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@sagetrac-mhampton](#comment%3A8):
> No, optional packages do not require a vote. 

Thank you for clarification on this. 

So what (if any) additional requirements are there for 'optional' as opposed to 'experimental' packages? 

http://www.sagemath.org/packages/optional/

gives no warnings that the optional packages may be seriously broken, whereas 'experimental'

http://www.sagemath.org/packages/experimental/

has in great big bold letters that **These are EXPERIMENTAL! They probably won't work at all for you! Use at your own risk! Many of these have *never* been successfully built on any platform! (But still, if you can figure out how to build them, I'd like to know about it.) These also may not be available under a GPL-compatible license**

> Making a package standard does.  

Yes, I was aware of that. There would be complete chaos if not. 

> However, the expectations for an optional package keep rising.  I think building on Solaris is probably considered a requirement.

 
I'd hope so. http://www.sagemath.org/doc/developer/inclusion.html says 

**Some Sage developers are willing to help you port to OS X, Solaris and Windows. But this is no guarantee and you or your project are expected to do the heavy lifting and also support those ports upstream if there is no Sage developer who is willing to share the burden.**

I feel at the minute that I'm personally sharing too much responsibility for making sure the packages don't break on Solaris. William sends me a recent email:

'''David,

**(1) I couldn't get anywhere building Sage on x86 Solaris on skynet (fulvia).  Can you?  This was pretty annoying to the people that bought us fulvia.**

**(2) Sun wants to know if we have a Sage available yet for t2.  See below.**

**I really need to shift into the mode of actually providing something that *works* on Solaris, despite hickups, rather than just polishing foundations...**

Unfortunately, without more testing on Solaris, this is just not going to happen. I'm personally not in a position to test everyones patches on Solaris. 

> I'm not sure where these grep calls are coming from, they look like the installation script uses them somehow when adding glpk and 4ti2 but it just uses "sage -i".  

Me neither. But neither do I have the time to resolve this. A quick check on the man page for 'grep' on Linux shows the option 'o' being:

```
      -o, --only-matching
              Print  only  the  matched  (non-empty) parts of a matching line,
              with each such part on a separate output line.
```

I'll leave it to others to work out how to implement this in a POSIX compatible way. The POSIX options for 'grep' can be found at http://www.opengroup.org/onlinepubs/9699919799/utilities/grep.html 

I hope these comments are helpful, and I'll answer any questions I can, but I'm simply not in a position to sort out these issues. 

**PS I realise the author of this package has not requested any help on Solaris, so I'm not suggesting he is personally to blame for my frustration.**

Dave



---

archive/issue_events_101432.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-11-25T17:25:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101432"
}
```



---

archive/issue_events_101433.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-11-25T17:25:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101433"
}
```



---

archive/issue_comments_063649.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI am quite frustrated by the lack of movement on this.  \n\nA new package for the 2.1 version of the sandpile module is at:\n\nhttp://sage.math.washington.edu/home/mhampton/sandpile-2.1.spkg",
    "created_at": "2010-11-25T17:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63649",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:10" align="right">comment:10</div>

I am quite frustrated by the lack of movement on this.  

A new package for the 2.1 version of the sandpile module is at:

http://sage.math.washington.edu/home/mhampton/sandpile-2.1.spkg



---

archive/issue_comments_063650.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@sagetrac-mhampton](#comment%3A10):\n> I am quite frustrated by the lack of movement on this.  \n> \n> A new package for the 2.1 version of the sandpile module is at:\n> \n> http://sage.math.washington.edu/home/mhampton/sandpile-2.1.spkg\n> \n\nI'm happy to review this over the winter break. Please ping me if I forget.",
    "created_at": "2010-11-25T17:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63650",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@sagetrac-mhampton](#comment%3A10):
> I am quite frustrated by the lack of movement on this.  
> 
> A new package for the 2.1 version of the sandpile module is at:
> 
> http://sage.math.washington.edu/home/mhampton/sandpile-2.1.spkg
> 

I'm happy to review this over the winter break. Please ping me if I forget.



---

archive/issue_comments_063651.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThere has been agreement over what are the requires for \n* standard\n* optional\n* experimental\n\nIt's not yet in the developers guide, but soon will be - see #9690. \n\nSince one requirement for optional is **sage project as a whole is responsible** I think that probably means there should be a vote. I would think that pretty much a formality, but it does not seem reasonable for others to support a package if nobody feels it's worth having. \n\nDave",
    "created_at": "2010-12-01T15:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63651",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:12" align="right">comment:12</div>

There has been agreement over what are the requires for 
* standard
* optional
* experimental

It's not yet in the developers guide, but soon will be - see #9690. 

Since one requirement for optional is **sage project as a whole is responsible** I think that probably means there should be a vote. I would think that pretty much a formality, but it does not seem reasonable for others to support a package if nobody feels it's worth having. 

Dave



---

archive/issue_comments_063652.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis new version applies fine to sage 4.6 (on an ubuntu linux machine) \nand to 4.6.1.a2 (on a 10.6.5 imac), and does not introduce any \nfailures in the sage -testall suite.\n\nHowever, some commands in the sandpile.sage file\nhttp://people.reed.edu/~davidp/sand/sage/1.51/sandpile.sage\nnow fail. It seems to me that this should work as well.\nI can work on trying to update that file, since it seems to be\nthe main source of the documentation\nhttp://people.reed.edu/~davidp/sand/sage/2.0/html/sandpile.html\nBecause of this, I'm marking this as \"needs info\", so as to\nget further feedback on this issue.\n\nI know people who are working in the field of research, so I think\nthis is a useful optional package at least for some.",
    "created_at": "2010-12-11T19:39:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63652",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:13" align="right">comment:13</div>

This new version applies fine to sage 4.6 (on an ubuntu linux machine) 
and to 4.6.1.a2 (on a 10.6.5 imac), and does not introduce any 
failures in the sage -testall suite.

However, some commands in the sandpile.sage file
http://people.reed.edu/~davidp/sand/sage/1.51/sandpile.sage
now fail. It seems to me that this should work as well.
I can work on trying to update that file, since it seems to be
the main source of the documentation
http://people.reed.edu/~davidp/sand/sage/2.0/html/sandpile.html
Because of this, I'm marking this as "needs info", so as to
get further feedback on this issue.

I know people who are working in the field of research, so I think
this is a useful optional package at least for some.



---

archive/issue_events_101434.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2010-12-11T19:39:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101434"
}
```



---

archive/issue_events_101435.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2010-12-11T19:39:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101435"
}
```



---

archive/issue_events_101436.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-12-31T21:45:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "title_is": "Make David Perkinson's sandpile 2.2 module an experimental (at least) package",
    "title_was": "Make David Perkinson's sandpile 2.0 module an optional package",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101436"
}
```



---

archive/issue_comments_063653.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n-Recently the sandpile-1.51 spkg was included in the experimental components.  This ticket updates the source to version 2.0.\n+Recently the sandpile-1.51 spkg was included in the experimental components.  This ticket updates the source to version 2.2.\n \n In addition to updating the source, the installation script has been simplified and the SPKG.txt has been improved in an effort to get this package to optional status.  \n \n This package does depend on the 4ti2.p0 spkg, which is currently experimental.  As a separate but dependent ticket 4ti2 will be upgraded to an optional package as well to harmonize this dependency.\n \n New package is at:\n-[http://sage.math.washington.edu/home/mhampton/sandpile-2.0.spkg](http://sage.math.washington.edu/home/mhampton/sandpile-2.0.spkg)\n+[http://sage.math.washington.edu/home/mhampton/sandpile-2.2.spkg](http://sage.math.washington.edu/home/mhampton/sandpile-2.2.spkg)\n``````\n",
    "created_at": "2010-12-31T21:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63653",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
-Recently the sandpile-1.51 spkg was included in the experimental components.  This ticket updates the source to version 2.0.
+Recently the sandpile-1.51 spkg was included in the experimental components.  This ticket updates the source to version 2.2.
 
 In addition to updating the source, the installation script has been simplified and the SPKG.txt has been improved in an effort to get this package to optional status.  
 
 This package does depend on the 4ti2.p0 spkg, which is currently experimental.  As a separate but dependent ticket 4ti2 will be upgraded to an optional package as well to harmonize this dependency.
 
 New package is at:
-[http://sage.math.washington.edu/home/mhampton/sandpile-2.0.spkg](http://sage.math.washington.edu/home/mhampton/sandpile-2.0.spkg)
+[http://sage.math.washington.edu/home/mhampton/sandpile-2.2.spkg](http://sage.math.washington.edu/home/mhampton/sandpile-2.2.spkg)
``````




---

archive/issue_events_101437.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-12-31T21:45:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101437"
}
```



---

archive/issue_events_101438.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-12-31T21:45:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101438"
}
```



---

archive/issue_comments_063654.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThere's no \n\n```\n== Special Update/Build Instructions ==\n```\n\nsection in the spkg-install file. It would be worth adding it. There's no spkg-check file. Are there any self-tests? \n\nThis bit of code is a bit dubious. First it's not a good idea to test on an empty string (though I'm aware lots of bits of Sage do it, but also there's an unnecessary semi-colon. \n\n\n```\nif [ \"$SAGE_LOCAL\" = \"\" ]; then\n   echo \"SAGE_LOCAL undefined ... exiting\";\n   echo \"Maybe run 'sage -sh'?\"\n   exit 1\nfi\n```\n\nBetter would be\n\n```\nif [ \"x$SAGE_LOCAL\" = x ]; then\n   echo \"SAGE_LOCAL undefined ... exiting\"\n   echo \"Maybe run 'sage -sh'?\"\n   exit 1\nfi\n```\n\nThat semi-colon obviously got put in one file at one point, and has been copy/pasted to lots of spkg-install files, but it serves no useful function. \n\nI believe an earlier version of this did not work on Solaris. Has anyone checked if this one does work? I don't see any comments to suggest the issue was resolved. \n\nDave",
    "created_at": "2011-01-02T01:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63654",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:15" align="right">comment:15</div>

There's no 

```
== Special Update/Build Instructions ==
```

section in the spkg-install file. It would be worth adding it. There's no spkg-check file. Are there any self-tests? 

This bit of code is a bit dubious. First it's not a good idea to test on an empty string (though I'm aware lots of bits of Sage do it, but also there's an unnecessary semi-colon. 


```
if [ "$SAGE_LOCAL" = "" ]; then
   echo "SAGE_LOCAL undefined ... exiting";
   echo "Maybe run 'sage -sh'?"
   exit 1
fi
```

Better would be

```
if [ "x$SAGE_LOCAL" = x ]; then
   echo "SAGE_LOCAL undefined ... exiting"
   echo "Maybe run 'sage -sh'?"
   exit 1
fi
```

That semi-colon obviously got put in one file at one point, and has been copy/pasted to lots of spkg-install files, but it serves no useful function. 

I believe an earlier version of this did not work on Solaris. Has anyone checked if this one does work? I don't see any comments to suggest the issue was resolved. 

Dave



---

archive/issue_comments_063655.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI installed this spkg on a 10.6.5 mac running sage 4.6.1.rc0. This seemed to create a number of failed doctests. I'm guessing it is because the spkg-install file has the line\n\n```\nsage -i glpk-4.42.p0\n```\nwhereas the standard version included with Sage is 4.44, according to http://www.sagemath.org/packages/standard/. Is there a reason why glpk-4.42 is loaded? If not, then this line should be deleted.",
    "created_at": "2011-01-03T12:33:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63655",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:16" align="right">comment:16</div>

I installed this spkg on a 10.6.5 mac running sage 4.6.1.rc0. This seemed to create a number of failed doctests. I'm guessing it is because the spkg-install file has the line

```
sage -i glpk-4.42.p0
```
whereas the standard version included with Sage is 4.44, according to http://www.sagemath.org/packages/standard/. Is there a reason why glpk-4.42 is loaded? If not, then this line should be deleted.



---

archive/issue_events_101439.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-01-03T12:33:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101439"
}
```



---

archive/issue_events_101440.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-01-03T12:33:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101440"
}
```



---

archive/issue_events_101441.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T04:41:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101441"
}
```



---

archive/issue_events_101442.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T04:41:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "c6c6c6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101442"
}
```



---

archive/issue_comments_063656.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIt seems to make a lot more sense to me to just move this into the Sage library, since it is already effectively a Sage add-on (as opposed to a truly external component which doesn't depend on Sage).  So I have created ticket #10618 and modified David Perkinson's latest version (2.2) slightly so that it can be directly included.\n\nApparently the incompatibilities with the 1.51 version are unavoidable.  Once in the Sage library, future incompatibilities would have to be first deprecated.",
    "created_at": "2011-01-13T04:41:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63656",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:17" align="right">comment:17</div>

It seems to make a lot more sense to me to just move this into the Sage library, since it is already effectively a Sage add-on (as opposed to a truly external component which doesn't depend on Sage).  So I have created ticket #10618 and modified David Perkinson's latest version (2.2) slightly so that it can be directly included.

Apparently the incompatibilities with the 1.51 version are unavoidable.  Once in the Sage library, future incompatibilities would have to be first deprecated.



---

archive/issue_events_101443.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T04:41:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101443"
}
```



---

archive/issue_events_101444.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T04:41:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8216#event-101444"
}
```



---

archive/issue_comments_063657.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nSorry, I didn't realize that resolving as \"wontfix\" automatically closes the ticket.  But no other status really makes sense.",
    "created_at": "2011-01-13T04:43:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8216",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8216#issuecomment-63657",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:18" align="right">comment:18</div>

Sorry, I didn't realize that resolving as "wontfix" automatically closes the ticket.  But no other status really makes sense.
