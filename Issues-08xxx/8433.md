# Issue 8433: plot3d for tachyon hangs

archive/issues_008433.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "The following plot command fails (tachyon gets all CPU usage and no picture is shown)\n\n```\ny=var('y')\nB=plot3d(sqrt(sin(x)*sin(y)),(x,-2*pi,2*pi),(y,-2*pi,2*pi),viewer='tachyon')\nB.show()\n```\nThis works fine\n\n```\ny=var('y')\nB=plot3d(sqrt(sin(x)*sin(y)),(x,0,2),(y,0,2), viewer='tachyon')\nB.show()\n```\nand this does not work\n\n```\ny=var('y')\nB=plot3d(sqrt(sin(x)*sin(y)),(x,-2,2),(y,-2,2), viewer='tachyon')\nB.show()\n```\nRelated trac is #8424, but the problem seems to be independent.\n\nCC:  @jasongrout @robertwb @sagetrac-drkirkby @sagetrac-mhampton @jdemeyer @sagetrac-mvngu\n\nKeywords: **tachyon**\n\nComponent: **graphics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8433_\n\n",
    "closed_at": "2021-08-26T02:08:43Z",
    "created_at": "2010-03-04T08:08:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "plot3d for tachyon hangs",
    "type": "issue",
    "updated_at": "2021-08-26T02:08:43Z",
    "url": "https://github.com/sagemath/sage/issues/8433",
    "user": "https://github.com/robert-marik"
}
```
The following plot command fails (tachyon gets all CPU usage and no picture is shown)

```
y=var('y')
B=plot3d(sqrt(sin(x)*sin(y)),(x,-2*pi,2*pi),(y,-2*pi,2*pi),viewer='tachyon')
B.show()
```
This works fine

```
y=var('y')
B=plot3d(sqrt(sin(x)*sin(y)),(x,0,2),(y,0,2), viewer='tachyon')
B.show()
```
and this does not work

```
y=var('y')
B=plot3d(sqrt(sin(x)*sin(y)),(x,-2,2),(y,-2,2), viewer='tachyon')
B.show()
```
Related trac is #8424, but the problem seems to be independent.

CC:  @jasongrout @robertwb @sagetrac-drkirkby @sagetrac-mhampton @jdemeyer @sagetrac-mvngu

Keywords: **tachyon**

Component: **graphics**

_Issue created by migration from https://trac.sagemath.org/ticket/8433_





---

archive/issue_events_105649.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-03-04T08:08:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105649"
}
```



---

archive/issue_events_105650.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-03-04T08:08:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105650"
}
```



---

archive/issue_events_105651.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-03-04T08:08:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105651"
}
```



---

archive/issue_events_105652.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-03-04T08:08:52Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "subject": "https://github.com/robert-marik",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105652"
}
```



---

archive/issue_events_105653.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-03-04T08:09:22Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "subject": "https://github.com/robert-marik",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105653"
}
```



---

archive/issue_events_105654.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-04T08:09:22Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "subject": "https://github.com/robert-marik",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105654"
}
```



---

archive/issue_events_105655.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-03-04T08:09:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105655"
}
```



---

archive/issue_events_105656.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-03-04T08:09:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105656"
}
```



---

archive/issue_comments_066751.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis sounds like the NaNs are giving tachyon (or the triangle constructing routine) problems.  That's where I would look first for the problem, anyway.",
    "created_at": "2010-03-04T10:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66751",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

This sounds like the NaNs are giving tachyon (or the triangle constructing routine) problems.  That's where I would look first for the problem, anyway.



---

archive/issue_comments_066752.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAll three commands produce output on my sage-4.5.3 installation.",
    "created_at": "2010-11-03T00:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66752",
    "user": "https://github.com/sagetrac-ryan"
}
```

<div id="comment:4" align="right">comment:4</div>

All three commands produce output on my sage-4.5.3 installation.



---

archive/issue_events_105657.json:
```json
{
    "actor": "https://github.com/sagetrac-ryan",
    "created_at": "2010-11-03T00:41:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105657"
}
```



---

archive/issue_comments_066753.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYep, seems to work for me too (sage 4.6).  I think this has been fixed.\n\nCcing the release manager.  I don't know if he wants to close it as invalid or fixed.  Also CCing Minh, who knows the policy for closing these sorts of things.",
    "created_at": "2010-11-03T00:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66753",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

Yep, seems to work for me too (sage 4.6).  I think this has been fixed.

Ccing the release manager.  I don't know if he wants to close it as invalid or fixed.  Also CCing Minh, who knows the policy for closing these sorts of things.



---

archive/issue_events_105658.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-11-03T07:01:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105658"
}
```



---

archive/issue_events_105659.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-11-03T07:01:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105659"
}
```



---

archive/issue_events_105660.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-11-03T07:01:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105660"
}
```



---

archive/issue_comments_066754.json:
```json
{
    "body": "Author: **Robert Marik, Minh Van Nguyen**",
    "created_at": "2010-11-03T07:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66754",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Author: **Robert Marik, Minh Van Nguyen**



---

archive/issue_comments_066755.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jasongrout](#comment:5):\n> Also CCing Minh, who knows the policy for closing these sorts of things.\n\nIt's better to add the above doctests to the documentation for `plot3d.py` just to be safe. See the attachment.",
    "created_at": "2010-11-03T07:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66755",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jasongrout](#comment:5):
> Also CCing Minh, who knows the policy for closing these sorts of things.

It's better to add the above doctests to the documentation for `plot3d.py` just to be safe. See the attachment.



---

archive/issue_comments_066756.json:
```json
{
    "body": "Changed author from **Robert Marik, Minh Van Nguyen** to **Robert Ma\u0159\u00edk, Minh Van Nguyen**",
    "created_at": "2010-11-03T07:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66756",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Changed author from **Robert Marik, Minh Van Nguyen** to **Robert Mařík, Minh Van Nguyen**



---

archive/issue_events_105661.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-11-03T07:06:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105661"
}
```



---

archive/issue_events_105662.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-11-03T07:06:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p: 5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105662"
}
```



---

archive/issue_events_105663.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-03T09:31:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105663"
}
```



---

archive/issue_events_105664.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-03T09:31:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105664"
}
```



---

archive/issue_comments_066757.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2010-11-03T09:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66757",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_066758.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI agree that these doctests pass, but the actual problem is not solved.  When doing\n\n```\ny=var('y')\nB=plot3d(sqrt(sin(x)*sin(y)),(x,-2,2),(y,-2,2), viewer='tachyon')\nB.show()\n```\nin the notebook, Tachyon runs forever.\n\nMinor comment: the tests should be marked \"long time\".  On my Linux x86_64 machine, testing `plot3d.py` goes from 18s to 30s.",
    "created_at": "2010-11-03T09:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66758",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

I agree that these doctests pass, but the actual problem is not solved.  When doing

```
y=var('y')
B=plot3d(sqrt(sin(x)*sin(y)),(x,-2,2),(y,-2,2), viewer='tachyon')
B.show()
```
in the notebook, Tachyon runs forever.

Minor comment: the tests should be marked "long time".  On my Linux x86_64 machine, testing `plot3d.py` goes from 18s to 30s.



---

archive/issue_comments_066759.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jdemeyer](#comment:10):\n> I agree that these doctests pass, but the actual problem is not solved.  When doing\n> \n> ```\n> y=var('y')\n> B=plot3d(sqrt(sin(x)*sin(y)),(x,-2,2),(y,-2,2), viewer='tachyon')\n> B.show()\n> ```\n> in the notebook, Tachyon runs forever.\n\n\nI didn't run doctests.  I ran the three commands in notebook().  All three produced output (attached is the output I receive for the command above).  What version of sage are you using?",
    "created_at": "2010-11-03T12:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66759",
    "user": "https://github.com/sagetrac-ryan"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jdemeyer](#comment:10):
> I agree that these doctests pass, but the actual problem is not solved.  When doing
> 
> ```
> y=var('y')
> B=plot3d(sqrt(sin(x)*sin(y)),(x,-2,2),(y,-2,2), viewer='tachyon')
> B.show()
> ```
> in the notebook, Tachyon runs forever.


I didn't run doctests.  I ran the three commands in notebook().  All three produced output (attached is the output I receive for the command above).  What version of sage are you using?



---

archive/issue_comments_066760.json:
```json
{
    "body": "Attachment: **[sage0.png](https://github.com/sagemath/sage/files/ticket8433/sage0.png)**\n\nnotebook output to second commmand in bug report",
    "created_at": "2010-11-03T12:17:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66760",
    "user": "https://github.com/sagetrac-ryan"
}
```

Attachment: **[sage0.png](https://github.com/sagemath/sage/files/ticket8433/sage0.png)**

notebook output to second commmand in bug report



---

archive/issue_comments_066761.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nsorry, make the the third command\n\ny=var('y')\nB=plot3d(sqrt(sin(x)*sin(y)),(x,-2,2),(y,-2,2), viewer='tachyon')\nB.show()",
    "created_at": "2010-11-03T12:18:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66761",
    "user": "https://github.com/sagetrac-ryan"
}
```

<div id="comment:12" align="right">comment:12</div>

sorry, make the the third command

y=var('y')
B=plot3d(sqrt(sin(x)*sin(y)),(x,-2,2),(y,-2,2), viewer='tachyon')
B.show()



---

archive/issue_comments_066762.json:
```json
{
    "body": "Attachment: **[trac-8433_plot3d.patch.gz](https://github.com/sagemath/sage/files/ticket8433/trac-8433_plot3d.patch.gz)**",
    "created_at": "2010-11-04T04:48:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66762",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Attachment: **[trac-8433_plot3d.patch.gz](https://github.com/sagemath/sage/files/ticket8433/trac-8433_plot3d.patch.gz)**



---

archive/issue_comments_066763.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jdemeyer](#comment:10):\n> Minor comment: the tests should be marked \"long time\".\n\nDone. See the updated patch.",
    "created_at": "2010-11-04T04:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66763",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jdemeyer](#comment:10):
> Minor comment: the tests should be marked "long time".

Done. See the updated patch.



---

archive/issue_events_105665.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-11-04T04:54:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105665"
}
```



---

archive/issue_events_105666.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-11-04T04:54:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105666"
}
```



---

archive/issue_events_105667.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-04T08:32:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p: 5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105667"
}
```



---

archive/issue_events_105668.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-04T08:32:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105668"
}
```



---

archive/issue_events_105669.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-04T08:32:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105669"
}
```



---

archive/issue_events_105670.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-04T08:32:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105670"
}
```



---

archive/issue_comments_066764.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@sagetrac-ryan](#comment:11):\n> I didn't run doctests.  I ran the three commands in notebook().  All three produced output (attached is the output I receive for the command above).  What version of sage are you using?\n\nThis is with sage-4.6.1.alpha0 on a Gentoo Linux x86_64 system.\n\nFor me, only the second plot in the bug report works.",
    "created_at": "2010-11-04T08:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66764",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@sagetrac-ryan](#comment:11):
> I didn't run doctests.  I ran the three commands in notebook().  All three produced output (attached is the output I receive for the command above).  What version of sage are you using?

This is with sage-4.6.1.alpha0 on a Gentoo Linux x86_64 system.

For me, only the second plot in the bug report works.



---

archive/issue_comments_066765.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nEverything does work on alpha.sagenb.org (sage-4.6.rc0, Ubuntu Linux x86_64).",
    "created_at": "2010-11-04T08:33:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66765",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Everything does work on alpha.sagenb.org (sage-4.6.rc0, Ubuntu Linux x86_64).



---

archive/issue_comments_066766.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAll three work for me (4.6 on ubuntu 64-bit + firefox)",
    "created_at": "2010-11-04T09:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66766",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:16" align="right">comment:16</div>

All three work for me (4.6 on ubuntu 64-bit + firefox)



---

archive/issue_comments_066767.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nPossibly for another ticket, but notice this:\n\n```\nsage: var('y')\nsage: B=plot3d(sqrt(sin(x)*sin(y)),(x,-2*pi,2*pi),(y,-2*pi,2*pi),viewer='tachyon',adaptive=True)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n\n/Users/grout/<ipython console> in <module>()\n\n/Users/grout/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/plot3d.pyc in plot3d(f, urange, vrange, adaptive, transformation, **kwds)\n    684             raise ValueError, 'unknown transformation type'\n    685     elif adaptive:\n--> 686         P = plot3d_adaptive(f, urange, vrange, **kwds)\n    687     else:\n    688         u=fast_float_arg(0)\n\n/Users/grout/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/plot3d.pyc in plot3d_adaptive(f, x_range, y_range, color, grad_f, max_bend, max_depth, initial_depth, num_colors, **kwds)\n    775             else:\n    776                 span = (len(texture)-1) / (max_z - min_z)    # max to avoid dividing by 0\n--> 777             parts = P.partition(lambda x,y,z: int((z-min_z)*span))\n    778         all = []\n    779         for k, G in parts.iteritems():\n\n/Users/grout/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/index_face_set.so in sage.plot.plot3d.index_face_set.IndexFaceSet.partition (sage/plot/plot3d/index_face_set.c:6081)()\n\n/Users/grout/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/plot3d.pyc in <lambda>(x, y, z)\n    775             else:\n    776                 span = (len(texture)-1) / (max_z - min_z)    # max to avoid dividing by 0\n--> 777             parts = P.partition(lambda x,y,z: int((z-min_z)*span))\n    778         all = []\n    779         for k, G in parts.iteritems():\n\nValueError: cannot convert float NaN to integer\n```",
    "created_at": "2010-11-04T12:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66767",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:17" align="right">comment:17</div>

Possibly for another ticket, but notice this:

```
sage: var('y')
sage: B=plot3d(sqrt(sin(x)*sin(y)),(x,-2*pi,2*pi),(y,-2*pi,2*pi),viewer='tachyon',adaptive=True)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)

/Users/grout/<ipython console> in <module>()

/Users/grout/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/plot3d.pyc in plot3d(f, urange, vrange, adaptive, transformation, **kwds)
    684             raise ValueError, 'unknown transformation type'
    685     elif adaptive:
--> 686         P = plot3d_adaptive(f, urange, vrange, **kwds)
    687     else:
    688         u=fast_float_arg(0)

/Users/grout/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/plot3d.pyc in plot3d_adaptive(f, x_range, y_range, color, grad_f, max_bend, max_depth, initial_depth, num_colors, **kwds)
    775             else:
    776                 span = (len(texture)-1) / (max_z - min_z)    # max to avoid dividing by 0
--> 777             parts = P.partition(lambda x,y,z: int((z-min_z)*span))
    778         all = []
    779         for k, G in parts.iteritems():

/Users/grout/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/index_face_set.so in sage.plot.plot3d.index_face_set.IndexFaceSet.partition (sage/plot/plot3d/index_face_set.c:6081)()

/Users/grout/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/plot3d.pyc in <lambda>(x, y, z)
    775             else:
    776                 span = (len(texture)-1) / (max_z - min_z)    # max to avoid dividing by 0
--> 777             parts = P.partition(lambda x,y,z: int((z-min_z)*span))
    778         all = []
    779         for k, G in parts.iteritems():

ValueError: cannot convert float NaN to integer
```



---

archive/issue_comments_066768.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n#7423 would be at least related to the NaN issue.",
    "created_at": "2010-11-04T14:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66768",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:18" align="right">comment:18</div>

#7423 would be at least related to the NaN issue.



---

archive/issue_comments_066769.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@kcrisman](#comment:18):\n> #7423 would be at least related to the NaN issue.\n\nThat ticket now works for me, so maybe people should test it to see if it should be closed too?",
    "created_at": "2010-11-04T14:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66769",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@kcrisman](#comment:18):
> #7423 would be at least related to the NaN issue.

That ticket now works for me, so maybe people should test it to see if it should be closed too?



---

archive/issue_comments_066770.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nWhy are the tests marked \"long time\"? They take about 1.5 seconds on my machine. \n\nDave",
    "created_at": "2010-11-06T00:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66770",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:20" align="right">comment:20</div>

Why are the tests marked "long time"? They take about 1.5 seconds on my machine. 

Dave



---

archive/issue_comments_066771.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@sagetrac-drkirkby](#comment:20):\n> Why are the tests marked \"long time\"? They take about 1.5 seconds on my machine. \n\nI seem to remember a policy that 1 second is the bound for \"long time\".",
    "created_at": "2010-11-06T00:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66771",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@sagetrac-drkirkby](#comment:20):
> Why are the tests marked "long time"? They take about 1.5 seconds on my machine. 

I seem to remember a policy that 1 second is the bound for "long time".



---

archive/issue_events_105671.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105671"
}
```



---

archive/issue_events_105672.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105672"
}
```



---

archive/issue_events_105673.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105673"
}
```



---

archive/issue_events_105674.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105674"
}
```



---

archive/issue_events_105675.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105675"
}
```



---

archive/issue_events_105676.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105676"
}
```



---

archive/issue_comments_066772.json:
```json
{
    "body": "Changed keywords from none to **tachyon**",
    "created_at": "2014-07-25T14:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66772",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **tachyon**



---

archive/issue_events_105677.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105677"
}
```



---

archive/issue_events_105678.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105678"
}
```



---

archive/issue_comments_066773.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to none",
    "created_at": "2021-07-22T01:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66773",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Jeroen Demeyer** to none



---

archive/issue_events_105679.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T01:07:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105679"
}
```



---

archive/issue_events_105680.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T01:07:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105680"
}
```



---

archive/issue_events_105681.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T01:07:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105681"
}
```



---

archive/issue_events_105682.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T01:07:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105682"
}
```



---

archive/issue_events_105683.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T01:07:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105683"
}
```



---

archive/issue_comments_066774.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\noutdated, works for me",
    "created_at": "2021-07-22T01:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66774",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

outdated, works for me



---

archive/issue_comments_066775.json:
```json
{
    "body": "Changed author from **Robert Ma\u0159\u00edk, Minh Van Nguyen** to none",
    "created_at": "2021-07-22T01:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66775",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Robert Mařík, Minh Van Nguyen** to none



---

archive/issue_comments_066776.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n> outdated, works for me\n\nAlready outdated years ago.  Should we still add a doctest?\n\nBy the way, Jason's comment in [comment:17](#comment:17) is still true, so it is now #32261.",
    "created_at": "2021-07-22T01:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66776",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:28" align="right">comment:28</div>

> outdated, works for me

Already outdated years ago.  Should we still add a doctest?

By the way, Jason's comment in [comment:17](#comment:17) is still true, so it is now #32261.



---

archive/issue_comments_066777.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@kcrisman](#comment:28):\n> Should we still add a doctest?\n\nI don't think this would be useful\n\n> By the way, Jason's comment in [comment:17](#comment:17) is still true, so it is now #32261.\n\nThanks! This bug appears to be unrelated to the `fast_float` cleanup that we are doing, but someone who knows about the plotting code may want to take a look",
    "created_at": "2021-07-22T05:48:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8433#issuecomment-66777",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@kcrisman](#comment:28):
> Should we still add a doctest?

I don't think this would be useful

> By the way, Jason's comment in [comment:17](#comment:17) is still true, so it is now #32261.

Thanks! This bug appears to be unrelated to the `fast_float` cleanup that we are doing, but someone who knows about the plotting code may want to take a look



---

archive/issue_events_105684.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2021-07-22T12:21:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105684"
}
```



---

archive/issue_events_105685.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2021-07-22T12:21:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105685"
}
```



---

archive/issue_events_105686.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T02:08:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105686"
}
```



---

archive/issue_events_105687.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T02:08:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8433",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8433#event-105687"
}
```
