# Issue 8347: Test the positivity of a number field element

archive/issues_008347.json:
```json
{
    "body": "test if an element of a number field is positive real.\n\nAssignee: @loefflerd\n\nCC:  sage-combinat\n\nKeywords: test, positivity, real\n\nResolution: fixed\n\nAuthor: Nicolas Borie\n\nReviewer: Paul Zimmermann\n\nMerged: sage-4.3.4.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/8347\n\n",
    "closed_at": "2010-03-03T14:34:01Z",
    "created_at": "2010-02-24T15:40:31Z",
    "labels": [
        "component: number fields",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3.4",
    "title": "Test the positivity of a number field element",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8347",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```
test if an element of a number field is positive real.

Assignee: @loefflerd

CC:  sage-combinat

Keywords: test, positivity, real

Resolution: fixed

Author: Nicolas Borie

Reviewer: Paul Zimmermann

Merged: sage-4.3.4.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/8347





---

archive/issue_comments_077117.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [test_positivity_cyclotomic_field-nb.patch](tarball://root/attachments/some-uuid/ticket8347/test_positivity_cyclotomic_field-nb.patch) by nborie created at 2010-02-24 15:42:52",
    "created_at": "2010-02-24T15:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77117",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:1'></a>Attachment [test_positivity_cyclotomic_field-nb.patch](tarball://root/attachments/some-uuid/ticket8347/test_positivity_cyclotomic_field-nb.patch) by nborie created at 2010-02-24 15:42:52



---

archive/issue_comments_077118.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-02-24T15:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77118",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_077119.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n test if an element of a number field is positive or negative. \n \n-Especially for real element of a CyclotomicField, we need this test for theory representation of complex reflection groups.\n+Especially for element of a CyclotomicField, we need this test for theory representation of complex reflection groups.\n \n Summary: Test the positivity of the real part of a number field element\n \n```\n",
    "created_at": "2010-02-24T16:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77119",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,6 @@
 test if an element of a number field is positive or negative. 
 
-Especially for real element of a CyclotomicField, we need this test for theory representation of complex reflection groups.
+Especially for element of a CyclotomicField, we need this test for theory representation of complex reflection groups.
 
 Summary: Test the positivity of the real part of a number field element
 
```




---

archive/issue_comments_077120.json:
```json
{
    "body": "<a id='comment:2'></a>I am clearly not a speciallist for this kind of job. There is two propositions to solve this problem. The second one comes after some remarks from some guys at Sage Days 20....",
    "created_at": "2010-02-24T16:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77120",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:2'></a>I am clearly not a speciallist for this kind of job. There is two propositions to solve this problem. The second one comes after some remarks from some guys at Sage Days 20....



---

archive/issue_comments_077121.json:
```json
{
    "body": "Attachment [test_positivity_cyclotomic_field_2-nb.patch](tarball://root/attachments/some-uuid/ticket8347/test_positivity_cyclotomic_field_2-nb.patch) by nborie created at 2010-02-24 16:20:47",
    "created_at": "2010-02-24T16:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77121",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Attachment [test_positivity_cyclotomic_field_2-nb.patch](tarball://root/attachments/some-uuid/ticket8347/test_positivity_cyclotomic_field_2-nb.patch) by nborie created at 2010-02-24 16:20:47



---

archive/issue_comments_077122.json:
```json
{
    "body": "<a id='comment:3'></a>Here comes a third version which say True if an algebraic complex number is a real positive and False otherwise. (Another suggest from another people....)\n\nFeel free to give some advises about :\n- the name of this method\n- the test (usable not only in Coxeter Group theory)\n- the way to implement this\n- ....",
    "created_at": "2010-02-24T20:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77122",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:3'></a>Here comes a third version which say True if an algebraic complex number is a real positive and False otherwise. (Another suggest from another people....)

Feel free to give some advises about :
- the name of this method
- the test (usable not only in Coxeter Group theory)
- the way to implement this
- ....



---

archive/issue_comments_077123.json:
```json
{
    "body": "<a id='comment:4'></a>should one test all 3 patches, or only the last one?",
    "created_at": "2010-02-25T14:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77123",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:4'></a>should one test all 3 patches, or only the last one?



---

archive/issue_comments_077124.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2010-02-25T14:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77124",
    "user": "https://github.com/zimmermann6"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_077125.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2010-02-25T15:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77125",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_077126.json:
```json
{
    "body": "<a id='comment:5'></a>Hi Paul,\n\nThis is a question of design. As Nicolas Thiery and Jean Michel got a look on the two first propositions, they ask me to do the third one. You can just look the two first and confirm the disign was not the better... But if you want to test, just test the last one which seems to be the better solution (No error and just True/Flase answering...).\n\nSo, just review the third patch.\n\nThanks for all.",
    "created_at": "2010-02-25T15:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77126",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:5'></a>Hi Paul,

This is a question of design. As Nicolas Thiery and Jean Michel got a look on the two first propositions, they ask me to do the third one. You can just look the two first and confirm the disign was not the better... But if you want to test, just test the last one which seems to be the better solution (No error and just True/Flase answering...).

So, just review the third patch.

Thanks for all.



---

archive/issue_comments_077127.json:
```json
{
    "body": "<a id='comment:6'></a>I've reviewed the 3rd patch.\n\nI noticed a few typos: `dependant` should be `dependent`, `embendding` should be\n`embedding`.\n\nAlso I don't understand why `long time` since the tests are fast.\n\nFinally a test is missing with a `None` result (apparently the last test should return None\ninstead of False).",
    "created_at": "2010-02-25T18:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77127",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:6'></a>I've reviewed the 3rd patch.

I noticed a few typos: `dependant` should be `dependent`, `embendding` should be
`embedding`.

Also I don't understand why `long time` since the tests are fast.

Finally a test is missing with a `None` result (apparently the last test should return None
instead of False).



---

archive/issue_comments_077128.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-02-25T18:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77128",
    "user": "https://github.com/zimmermann6"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_077129.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+test if an element of a number field is positive real.\n \n Summary: Test the positivity of the real part of a number field element\n \n```\n",
    "created_at": "2010-02-26T08:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77129",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+test if an element of a number field is positive real.
 
 Summary: Test the positivity of the real part of a number field element
 
```




---

archive/issue_comments_077130.json:
```json
{
    "body": "<a id='comment:7'></a>I removed the # long time guards. I changed the description of the ticket and I changed the doc of the function (It now does what it is described in the doc... (I hope so...)). I configured my emacs with aspell (It is really time to do it!!!!!). I am very very very sorry to have presented a so much horrible work on the trac. Feel free to scold me very loudly! I hope you didn't lose too much time on that...",
    "created_at": "2010-02-26T08:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77130",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:7'></a>I removed the # long time guards. I changed the description of the ticket and I changed the doc of the function (It now does what it is described in the doc... (I hope so...)). I configured my emacs with aspell (It is really time to do it!!!!!). I am very very very sorry to have presented a so much horrible work on the trac. Feel free to scold me very loudly! I hope you didn't lose too much time on that...



---

archive/issue_comments_077131.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-02-26T08:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77131",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_077132.json:
```json
{
    "body": "<a id='comment:8'></a>Small documentation suggestion:\n\n- First state what the function does mathematically\n- Then give the algorithm, and mention that the result is guaranteed to be correct, and that this is achieved by increasing the approximation order until the decision can be taken. It would be nice to include a complexity result (given the order of a root, and the size of the rational coefficient, one should be able to give an upper bound on the required approximation order)\n\nThanks for your useful work on this!",
    "created_at": "2010-02-26T13:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77132",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:8'></a>Small documentation suggestion:

- First state what the function does mathematically
- Then give the algorithm, and mention that the result is guaranteed to be correct, and that this is achieved by increasing the approximation order until the decision can be taken. It would be nice to include a complexity result (given the order of a root, and the size of the rational coefficient, one should be able to give an upper bound on the required approximation order)

Thanks for your useful work on this!



---

archive/issue_comments_077133.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-02-28T19:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77133",
    "user": "https://github.com/zimmermann6"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_077134.json:
```json
{
    "body": "<a id='comment:9'></a>another problem:\n\n```\nsage: K.<a> = QuadraticField(-3)\nsage: (a-a).is_real_positive() \n...\nTypeError: Unable to convert number to real interval.\n```\n\nPaul",
    "created_at": "2010-02-28T19:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77134",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:9'></a>another problem:

```
sage: K.<a> = QuadraticField(-3)
sage: (a-a).is_real_positive() 
...
TypeError: Unable to convert number to real interval.
```

Paul



---

archive/issue_comments_077135.json:
```json
{
    "body": "Attachment [test_positivity_cyclotomic_field_3-nb.patch](tarball://root/attachments/some-uuid/ticket8347/test_positivity_cyclotomic_field_3-nb.patch) by nborie created at 2010-02-28 20:11:08",
    "created_at": "2010-02-28T20:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77135",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Attachment [test_positivity_cyclotomic_field_3-nb.patch](tarball://root/attachments/some-uuid/ticket8347/test_positivity_cyclotomic_field_3-nb.patch) by nborie created at 2010-02-28 20:11:08



---

archive/issue_comments_077136.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-02-28T20:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77136",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_077137.json:
```json
{
    "body": "<a id='comment:10'></a>I tryed to improve the doc according the advises of Nicolas. I also fix the problem that Paul pointed.",
    "created_at": "2010-02-28T20:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77137",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:10'></a>I tryed to improve the doc according the advises of Nicolas. I also fix the problem that Paul pointed.



---

archive/issue_comments_077138.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-03-01T17:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77138",
    "user": "https://github.com/zimmermann6"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_077139.json:
```json
{
    "body": "<a id='comment:11'></a>I am ok with the new patch.\n\nFor the release manager: apply only `test_positivity_cyclotomic_field_3-nb.patch`.",
    "created_at": "2010-03-01T17:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77139",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:11'></a>I am ok with the new patch.

For the release manager: apply only `test_positivity_cyclotomic_field_3-nb.patch`.



---

archive/issue_comments_077140.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks a lot for your patience and multireview.",
    "created_at": "2010-03-01T17:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77140",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:12'></a>Thanks a lot for your patience and multireview.



---

archive/issue_events_020009.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/nborie",
    "created_at": "2010-03-01T17:57:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "milestone": "sage-4.3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8347#event-20009"
}
```



---

archive/issue_comments_077141.json:
```json
{
    "body": "<a id='comment:14'></a>Merged [test_positivity_cyclotomic_field_3-nb.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/8347/test_positivity_cyclotomic_field_3-nb.patch).\n\n\n\nNicolas: you should put a sensible commit message in your patch, together with the ticket number.",
    "created_at": "2010-03-03T14:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77141",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:14'></a>Merged [test_positivity_cyclotomic_field_3-nb.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/8347/test_positivity_cyclotomic_field_3-nb.patch).



Nicolas: you should put a sensible commit message in your patch, together with the ticket number.



---

archive/issue_comments_077142.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-03-03T14:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8347#issuecomment-77142",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Resolution: fixed



---

archive/issue_events_020010.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-03-03T14:34:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8347",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8347#event-20010"
}
```
