# Issue 8030: Strong generating system returns heavy error for non transitive group

archive/issues_008030.json:
```json
{
    "body": "My fault from #6647\n\nThe method from Gap work only for transitive group.\n\n```\nsage: G = PermutationGroup([[(3,4)]])\nsage: G.strong_generating_system()\n[[()], [()], [()], [()]]\nsage: G.strong_generating_system(base_of_group=[3,1,2,4])\n[[(), (3,4)], [()], [()], [()]]\n```\n\nIf the first position is not moved by the permutation Group. Errors appears...\n\n**Assignee:** joyner\n\n**CC:**  sage-combinat\n\n**Author:** Nicolas Borie\n\n**Reviewer:** Nicolas M. Thi\u00e9ry\n\n**Merged:** sage-4.4.3.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/8030\n\n",
    "closed_at": "2010-06-03T04:18:44Z",
    "created_at": "2010-01-21T19:37:01Z",
    "labels": [
        "component: group theory",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.4.3",
    "title": "Strong generating system returns heavy error for non transitive group",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/8030",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```
My fault from #6647

The method from Gap work only for transitive group.

```
sage: G = PermutationGroup([[(3,4)]])
sage: G.strong_generating_system()
[[()], [()], [()], [()]]
sage: G.strong_generating_system(base_of_group=[3,1,2,4])
[[(), (3,4)], [()], [()], [()]]
```

If the first position is not moved by the permutation Group. Errors appears...

**Assignee:** joyner

**CC:**  sage-combinat

**Author:** Nicolas Borie

**Reviewer:** Nicolas M. Thiéry

**Merged:** sage-4.4.3.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/8030





---

archive/issue_comments_063158.json:
```json
{
    "body": "<a id='comment:1'></a>\nI added a patch which solve the problem...\n\nI just changed the stabilizer method because the old version probably didn't point the right record of GAP for StabChain. The new stabilizer method is based form the Schreier's subgroup lemma.\n\nI ran some:\n\n```\nsage: G = SymmetricGroup(10)\nsage: H = PermutationGroup([G.random_element() for i in range(randrange(1,3,1))])\nsage: prod(map(lambda x : len(x), H.strong_generating_system()),1) == H.cardinality()\nTrue\n```\neverytimes, it was ok... For the speed, the method strong_generating_system is pretty slow! But I have no better idea and I still misunderstand records from GAP.",
    "created_at": "2010-01-23T20:23:33Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63158",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:1'></a>
I added a patch which solve the problem...

I just changed the stabilizer method because the old version probably didn't point the right record of GAP for StabChain. The new stabilizer method is based form the Schreier's subgroup lemma.

I ran some:

```
sage: G = SymmetricGroup(10)
sage: H = PermutationGroup([G.random_element() for i in range(randrange(1,3,1))])
sage: prod(map(lambda x : len(x), H.strong_generating_system()),1) == H.cardinality()
True
```
everytimes, it was ok... For the speed, the method strong_generating_system is pretty slow! But I have no better idea and I still misunderstand records from GAP.



---

archive/issue_events_055865.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/nborie",
    "created_at": "2010-01-23T20:23:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55865"
}
```



---

archive/issue_events_055866.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/nborie",
    "created_at": "2010-01-23T20:23:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "milestone": "sage-4.3.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55866"
}
```



---

archive/issue_comments_063159.json:
```json
{
    "body": "<a id='comment:2'></a>\nI uploaded a new version. There was also a mistake in the doc... That's an ugly bug...",
    "created_at": "2010-03-02T19:03:39Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63159",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:2'></a>
I uploaded a new version. There was also a mistake in the doc... That's an ugly bug...



---

archive/issue_events_055867.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/nborie",
    "created_at": "2010-04-16T16:26:25Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "rename": {
        "from": "Strong generating system work only for transitive group",
        "to": "Strong generating system returns heavy error for non transitive group"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55867"
}
```



---

archive/issue_comments_063160.json:
```json
{
    "body": "<a id='comment:3'></a>\nI change the title hoping someone will pass to check that...",
    "created_at": "2010-04-16T16:26:25Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63160",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:3'></a>
I change the title hoping someone will pass to check that...



---

archive/issue_comments_063161.json:
```json
{
    "body": "**Author:** Nicolas Borie",
    "created_at": "2010-04-18T16:15:49Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63161",
    "user": "https://github.com/nthiery"
}
```

**Author:** Nicolas Borie



---

archive/issue_comments_063162.json:
```json
{
    "body": "<a id='comment:4'></a>\nHi Nicolas!\n\nThe tests are running.\n\nFor the record: I tried to compare the results in the new doctests\nwith GAP, and I get the following difference:\n\n```\ngap> G := Group([ (1,2) (3,4), (1,2,3,4,10) ]);\nGroup([ (1,2)(3,4), (1,2,3,4,10) ])\ngap> Stabilizer(G, 10);                        \nGroup([ (1,2)(3,4), (2,3,4) ])\n```\n\n```\nsage: G = PermutationGroup([[(1,2),(3,4)], [(1,2,3,4,10)]]) \nsage: G.stabilizer(10) \nPermutation Group with generators [(), (1,2)(3,4), (1,2,3), (1,2,4), (1,3,2), (1,3,4), (1,4,2)] \n```\n\nWell, in fact the results are equal:\n\n```\nsage: G2 = PermutationGroup( [ [(1,2),(3,4)], [(2,3,4)] ])\nsage: G.stabilizer(10) == G2\nTrue\n```\n\nbut GAP's result is nicer.",
    "created_at": "2010-04-18T16:15:49Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63162",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:4'></a>
Hi Nicolas!

The tests are running.

For the record: I tried to compare the results in the new doctests
with GAP, and I get the following difference:

```
gap> G := Group([ (1,2) (3,4), (1,2,3,4,10) ]);
Group([ (1,2)(3,4), (1,2,3,4,10) ])
gap> Stabilizer(G, 10);                        
Group([ (1,2)(3,4), (2,3,4) ])
```

```
sage: G = PermutationGroup([[(1,2),(3,4)], [(1,2,3,4,10)]]) 
sage: G.stabilizer(10) 
Permutation Group with generators [(), (1,2)(3,4), (1,2,3), (1,2,4), (1,3,2), (1,3,4), (1,4,2)] 
```

Well, in fact the results are equal:

```
sage: G2 = PermutationGroup( [ [(1,2),(3,4)], [(2,3,4)] ])
sage: G.stabilizer(10) == G2
True
```

but GAP's result is nicer.



---

archive/issue_events_055868.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/nborie",
    "created_at": "2010-04-19T08:53:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55868"
}
```



---

archive/issue_events_055869.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/nborie",
    "created_at": "2010-04-19T08:53:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55869"
}
```



---

archive/issue_comments_063163.json:
```json
{
    "body": "<a id='comment:5'></a>\nStay around, I am going to improve my \"horrible\" fix shortly...",
    "created_at": "2010-04-19T08:53:07Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63163",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:5'></a>
Stay around, I am going to improve my "horrible" fix shortly...



---

archive/issue_events_055870.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/nborie",
    "created_at": "2010-04-19T09:25:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55870"
}
```



---

archive/issue_events_055871.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/nborie",
    "created_at": "2010-04-19T09:25:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55871"
}
```



---

archive/issue_comments_063164.json:
```json
{
    "body": "<a id='comment:6'></a>\nOk, now all the job is made in gap. The number of tests (including a random one) must help these methods to give right answer!\n\nAll tests passes including the optional one...",
    "created_at": "2010-04-19T09:25:52Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63164",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:6'></a>
Ok, now all the job is made in gap. The number of tests (including a random one) must help these methods to give right answer!

All tests passes including the optional one...



---

archive/issue_comments_063165.json:
```json
{
    "body": "**Reviewer:** Nicolas M. Thi\u00e9ry",
    "created_at": "2010-05-18T21:30:58Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63165",
    "user": "https://github.com/nthiery"
}
```

**Reviewer:** Nicolas M. Thiéry



---

archive/attachments_009861.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8030_stabilizer_bug-nb.patch",
    "asset_url": "tarball://root/attachments/ticket8030/trac_8030_stabilizer_bug-nb.patch",
    "created_at": "2010-05-18T21:30:58Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket8030/trac_8030_stabilizer_bug-nb.patch",
    "user": "https://github.com/nthiery"
}
```



---

archive/issue_comments_063166.json:
```json
{
    "body": "<a id='comment:7'></a>\nAttachment [trac_8030_stabilizer_bug-nb.patch](https://github.com/sagemath/sage/files/ticket8030/trac_8030_stabilizer_bug-nb.patch) by @nthiery created at 2010-05-18 21:30:58\n\nThe new implementation does the simplest thing: to just call GAP; and that fixes the problem at hand.The patch also adds a lots of doctests. All tests pass on 4.4.1. Positive review!",
    "created_at": "2010-05-18T21:30:58Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63166",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:7'></a>
Attachment [trac_8030_stabilizer_bug-nb.patch](https://github.com/sagemath/sage/files/ticket8030/trac_8030_stabilizer_bug-nb.patch) by @nthiery created at 2010-05-18 21:30:58

The new implementation does the simplest thing: to just call GAP; and that fixes the problem at hand.The patch also adds a lots of doctests. All tests pass on 4.4.1. Positive review!



---

archive/issue_events_055872.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2010-05-18T21:30:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55872"
}
```



---

archive/issue_events_055873.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2010-05-18T21:30:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55873"
}
```



---

archive/issue_comments_063167.json:
```json
{
    "body": "Fix a trivial typo, and add hg header. Apply only this one.",
    "created_at": "2010-05-18T21:40:22Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63167",
    "user": "https://github.com/nthiery"
}
```

Fix a trivial typo, and add hg header. Apply only this one.



---

archive/attachments_009862.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8030-stabilizer_bug-nb.patch",
    "asset_url": "tarball://root/attachments/ticket8030/trac_8030-stabilizer_bug-nb.patch",
    "created_at": "2010-05-31T03:23:36Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket8030/trac_8030-stabilizer_bug-nb.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_063168.json:
```json
{
    "body": "Attachment [trac_8030-stabilizer_bug-nb.patch](https://github.com/sagemath/sage/files/ticket8030/trac_8030-stabilizer_bug-nb.patch) by @rbeezer created at 2010-05-31 03:23:36\n\nStandalone doctring improvements, reviewer patch",
    "created_at": "2010-05-31T03:23:36Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63168",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_8030-stabilizer_bug-nb.patch](https://github.com/sagemath/sage/files/ticket8030/trac_8030-stabilizer_bug-nb.patch) by @rbeezer created at 2010-05-31 03:23:36

Standalone doctring improvements, reviewer patch



---

archive/attachments_009863.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8030-reviewer-doc-edit.patch",
    "asset_url": "tarball://root/attachments/ticket8030/trac_8030-reviewer-doc-edit.patch",
    "created_at": "2010-05-31T03:30:06Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket8030/trac_8030-reviewer-doc-edit.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_063169.json:
```json
{
    "body": "<a id='comment:8'></a>\nAttachment [trac_8030-reviewer-doc-edit.patch](https://github.com/sagemath/sage/files/ticket8030/trac_8030-reviewer-doc-edit.patch) by @rbeezer created at 2010-05-31 03:30:06\n\nSomehow I thought this needed review, but obviously didn't look close enough.\n\nIn any event, I made some improvements to the docstring, which I just added.  I'm going to move them to a new ticket, so as to not mess this up.  Sorry for the confusion.\n\nRelease manager - you can remove trac_8030-reviewer-doc-edit.patch - it'll appear elsewhere with a new name.\n\nRob",
    "created_at": "2010-05-31T03:30:06Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63169",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:8'></a>
Attachment [trac_8030-reviewer-doc-edit.patch](https://github.com/sagemath/sage/files/ticket8030/trac_8030-reviewer-doc-edit.patch) by @rbeezer created at 2010-05-31 03:30:06

Somehow I thought this needed review, but obviously didn't look close enough.

In any event, I made some improvements to the docstring, which I just added.  I'm going to move them to a new ticket, so as to not mess this up.  Sorry for the confusion.

Release manager - you can remove trac_8030-reviewer-doc-edit.patch - it'll appear elsewhere with a new name.

Rob



---

archive/issue_events_055874.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-03T04:18:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55874"
}
```



---

archive/issue_events_055875.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-03T04:18:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8030#event-55875"
}
```



---

archive/issue_comments_063170.json:
```json
{
    "body": "**Merged:** 4.4.3.alpha2",
    "created_at": "2010-06-03T04:18:44Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63170",
    "user": "https://github.com/williamstein"
}
```

**Merged:** 4.4.3.alpha2



---

archive/issue_comments_063171.json:
```json
{
    "body": "<a id='comment:10'></a>\nIt seems that [attachment:trac_8030-reviewer-doc-edit.patch] made it into 4.4.3.alpha2.  From building the PDF reference manual:\n\n```\n[2668] [2669] [2670] [2671] [2672] [2673] [2674] [2675] [2676] [2677]\n! Undefined control sequence.\nl.217693 ...als}(\\mathrm{pos}_{i+1})]_{1 \\leqslant\n                                                   i \\leqslant n}$\n? \n```\nI suppose #9102 is the place to fix this?",
    "created_at": "2010-06-03T09:14:37Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63171",
    "user": "https://github.com/qed777"
}
```

<a id='comment:10'></a>
It seems that [attachment:trac_8030-reviewer-doc-edit.patch] made it into 4.4.3.alpha2.  From building the PDF reference manual:

```
[2668] [2669] [2670] [2671] [2672] [2673] [2674] [2675] [2676] [2677]
! Undefined control sequence.
l.217693 ...als}(\mathrm{pos}_{i+1})]_{1 \leqslant
                                                   i \leqslant n}$
? 
```
I suppose #9102 is the place to fix this?



---

archive/issue_comments_063172.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [mpatel](#comment%3A10):\n> It seems that [attachment:trac_8030-reviewer-doc-edit.patch] made it into 4.4.3.alpha2.  From building the PDF reference manual:\n> \n> ```\n> [2668] [2669] [2670] [2671] [2672] [2673] [2674] [2675] [2676] [2677]\n> ! Undefined control sequence.\n> l.217693 ...als}(\\mathrm{pos}_{i+1})]_{1 \\leqslant\n>                                                    i \\leqslant n}$\n> ? \n> ```\n> I suppose #9102 is the place to fix this?\n\n\nHi Misha,\n\nThat was a new macro to me, and worked fine in the HTML version of the docs.  Looks like it is part of the AMS packages.  I'll work on a patch as part of #9102, but long-term, does the PDF version need  amsmath or amssymb  packages to be included?  I can investigate later, but have a busy day today, so I'll get a quick fix up first.\n\nRob",
    "created_at": "2010-06-03T15:10:29Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63172",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:11'></a>
Replying to [mpatel](#comment%3A10):
> It seems that [attachment:trac_8030-reviewer-doc-edit.patch] made it into 4.4.3.alpha2.  From building the PDF reference manual:
> 
> ```
> [2668] [2669] [2670] [2671] [2672] [2673] [2674] [2675] [2676] [2677]
> ! Undefined control sequence.
> l.217693 ...als}(\mathrm{pos}_{i+1})]_{1 \leqslant
>                                                    i \leqslant n}$
> ? 
> ```
> I suppose #9102 is the place to fix this?


Hi Misha,

That was a new macro to me, and worked fine in the HTML version of the docs.  Looks like it is part of the AMS packages.  I'll work on a patch as part of #9102, but long-term, does the PDF version need  amsmath or amssymb  packages to be included?  I can investigate later, but have a busy day today, so I'll get a quick fix up first.

Rob



---

archive/issue_comments_063173.json:
```json
{
    "body": "**Changing merged** from \"4.4.3.alpha2\" to \"sage-4.4.3.alpha2\".",
    "created_at": "2010-06-03T15:22:19Z",
    "issue": "https://github.com/sagemath/sage/issues/8030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8030#issuecomment-63173",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Changing merged** from "4.4.3.alpha2" to "sage-4.4.3.alpha2".
