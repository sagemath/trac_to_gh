# Issue 8191: Add iconv needed for Solaris, and possibly Cygwin too

archive/issues_008191.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-drkirkby"
    ],
    "body": "The latest version of R in Sage 2.10.1, needs a powerful version of iconv. The version of iconv in Solaris is not sufficiently powerful.  This is documented in the 'R Installation and Administration' manual under the *Solaris* section.\n\nhttp://cran.r-project.org/doc/manuals/R-admin.pdf\n\n\n#3381 added a command line option to the configure script to disable the use of iconv. \n\nFor a long time R has been reporting messages that this option would be removed, and it would be necessary to install iconv. Well that time has come.\n\n```\nchecking for cblas_cdotu_sub in vecLib framework... no\nchecking iconv.h usability... yes\nchecking iconv.h presence... yes\nchecking for iconv.h... yes\nchecking for iconv... yes\nchecking whether iconv accepts \"UTF-8\", \"latin1\" and \"UCS-*\"... no\nconfigure: error: a suitable iconv is essential\nError configuring R.\n\nreal    2m15.532s\nuser    0m47.020s\nsys    1m9.582s\nsage: An error occurred while installing r-2.10.1\n```\n\nSo we must have an inconv package. I will create one. \n\nIt looks as though this will be needed on Cygwin also - see #7319. \n\n\nCC:  @mwhansen @williamstein\n\nKeywords: **iconv solaris cygwin**\n\nComponent: **packages: standard**\n\nAuthor: **David Kirkby**\n\nReviewer: **Minh Van Nguyen**\n\nMerged: **sage-4.3.4.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8191_\n\n",
    "closed_at": "2010-03-02T22:38:46Z",
    "created_at": "2010-02-05T10:32:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add iconv needed for Solaris, and possibly Cygwin too",
    "type": "issue",
    "updated_at": "2010-03-04T03:58:29Z",
    "url": "https://github.com/sagemath/sage/issues/8191",
    "user": "https://github.com/sagetrac-drkirkby"
}
```
The latest version of R in Sage 2.10.1, needs a powerful version of iconv. The version of iconv in Solaris is not sufficiently powerful.  This is documented in the 'R Installation and Administration' manual under the *Solaris* section.

http://cran.r-project.org/doc/manuals/R-admin.pdf


#3381 added a command line option to the configure script to disable the use of iconv. 

For a long time R has been reporting messages that this option would be removed, and it would be necessary to install iconv. Well that time has come.

```
checking for cblas_cdotu_sub in vecLib framework... no
checking iconv.h usability... yes
checking iconv.h presence... yes
checking for iconv.h... yes
checking for iconv... yes
checking whether iconv accepts "UTF-8", "latin1" and "UCS-*"... no
configure: error: a suitable iconv is essential
Error configuring R.

real    2m15.532s
user    0m47.020s
sys    1m9.582s
sage: An error occurred while installing r-2.10.1
```

So we must have an inconv package. I will create one. 

It looks as though this will be needed on Cygwin also - see #7319. 


CC:  @mwhansen @williamstein

Keywords: **iconv solaris cygwin**

Component: **packages: standard**

Author: **David Kirkby**

Reviewer: **Minh Van Nguyen**

Merged: **sage-4.3.4.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/8191_





---

archive/issue_events_102032.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-05T10:32:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "milestone_number": null,
    "milestone_title": "sage-4.3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102032"
}
```



---

archive/issue_events_102033.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-05T10:32:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20solaris",
    "label_color": "000080",
    "label_name": "c: porting: solaris",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102033"
}
```



---

archive/issue_events_102034.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-05T10:32:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102034"
}
```



---

archive/issue_events_102035.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-05T10:32:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102035"
}
```



---

archive/issue_events_102036.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-05T10:32:33Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "subject": "https://github.com/sagetrac-drkirkby",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102036"
}
```



---

archive/issue_comments_063442.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI'm cc'in Mike on this ticket, as I believe it has implications for his ticket #7319\n\nDave",
    "created_at": "2010-02-05T10:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63442",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:1" align="right">comment:1</div>

I'm cc'in Mike on this ticket, as I believe it has implications for his ticket #7319

Dave



---

archive/issue_events_102037.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-14T04:07:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "title_is": "Add iconv needed for Solaris, and possibly Cygwin too.",
    "title_was": "Add iconv need for Solaris, and possibly Cygwin too.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102037"
}
```



---

archive/issue_comments_063443.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI've created iconv-1.13.1.spkg which is the latest release. \n\nI have **not** added the Mercurial repository, as I was not exactly sure how to do it. This will need to go as a standard package, and another part of Sage will need to ensure that inconv gets built. \n\nI've marked it as 'needs info' rather than for review, as at this stage there is no Mercurial repository. But perhaps people can test it out. \n\nhttp://boxen.math.washington.edu/home/kirkby/new-packages/iconv\n\nI've personally tested it on the following. If the self-tests are uncommented, (see spkg-install), then all tests do pass except on Solaris 10 (SPARC), where ./check-subst dumps core in both 32-bit and 64-bit mode on two separate machines. \n\n* sage.math Linux (defaults to 64-bit) \n* bsd.math OS X (defaults to 64-bit)\n* OpenSolaris 06/2009 on a Sun Ultra 27 (Intel Xeon processor) - 32-bit\n* OpenSolaris 06/2009 on a Sun Ultra 27 (Intel Xeon processor) - 64-bit. \n* Solaris 10 03/2005 on a Sun Blade 1000 (UltraSPARC III+ processor) - 32-bit \n* Solaris 10 03/2005 on a Sun Blade 1000 (UltraSPARC III+ processor) - 64-bit \n\nThere is still an issue with R 2.10.1 building on Solaris (SPARC), but it gets a lot further with this iconv package built. We can sort out the problems with R later. There are tons of options given to the R configure script, at least one of which is not valid. I suspect by changing the options and removing the invalid code in R's spkg-install file, then R can be made to build on Solaris. \n\nDave",
    "created_at": "2010-02-14T04:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63443",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:2" align="right">comment:2</div>

I've created iconv-1.13.1.spkg which is the latest release. 

I have **not** added the Mercurial repository, as I was not exactly sure how to do it. This will need to go as a standard package, and another part of Sage will need to ensure that inconv gets built. 

I've marked it as 'needs info' rather than for review, as at this stage there is no Mercurial repository. But perhaps people can test it out. 

http://boxen.math.washington.edu/home/kirkby/new-packages/iconv

I've personally tested it on the following. If the self-tests are uncommented, (see spkg-install), then all tests do pass except on Solaris 10 (SPARC), where ./check-subst dumps core in both 32-bit and 64-bit mode on two separate machines. 

* sage.math Linux (defaults to 64-bit) 
* bsd.math OS X (defaults to 64-bit)
* OpenSolaris 06/2009 on a Sun Ultra 27 (Intel Xeon processor) - 32-bit
* OpenSolaris 06/2009 on a Sun Ultra 27 (Intel Xeon processor) - 64-bit. 
* Solaris 10 03/2005 on a Sun Blade 1000 (UltraSPARC III+ processor) - 32-bit 
* Solaris 10 03/2005 on a Sun Blade 1000 (UltraSPARC III+ processor) - 64-bit 

There is still an issue with R 2.10.1 building on Solaris (SPARC), but it gets a lot further with this iconv package built. We can sort out the problems with R later. There are tons of options given to the R configure script, at least one of which is not valid. I suspect by changing the options and removing the invalid code in R's spkg-install file, then R can be made to build on Solaris. 

Dave



---

archive/issue_events_102038.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-14T04:07:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102038"
}
```



---

archive/issue_comments_063444.json:
```json
{
    "body": "Work Issues: **Needs Mercurial repository added**",
    "created_at": "2010-02-14T04:16:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63444",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Work Issues: **Needs Mercurial repository added**



---

archive/issue_comments_063445.json:
```json
{
    "body": "Author: **David Kirkby**",
    "created_at": "2010-02-14T04:16:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63445",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Author: **David Kirkby**



---

archive/issue_comments_063446.json:
```json
{
    "body": "Changed work issues from **Needs Mercurial repository added** to none",
    "created_at": "2010-02-15T11:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63446",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Changed work issues from **Needs Mercurial repository added** to none



---

archive/issue_comments_063447.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI believe the iconv package is now ready for review. \n\n* spkg-check has been added. \n* The Mercurial repository has been added. \n* As shown below, iconv is tested by R and found to be suitable. \n\n```\nDisabling libiconv support on Solaris\nchecking iconv.h usability... yes\nchecking iconv.h presence... yes\nchecking for iconv.h... yes\nchecking for iconv... in libiconv\nchecking whether iconv accepts \"UTF-8\", \"latin1\" and \"UCS-*\"... yes\nchecking for iconvlist... yes\nchecking for iconv... yes\n```\n\nThe message \n\n```\nDisabling libiconv support on Solaris\n```\nis from R's spkg-install, so needs to be removed. That is ticket #8272\n\nIt should be noted that.  \n* The test failure seen on Solaris 10 (SPARC) but not on OS X, Linux or OpenSolaris has a trac item for it. #8271\n* The failure of iconv's 'make check' to actually exit with a non-zero exit code when it encounters a failure has a trac ticket for it #8270.",
    "created_at": "2010-02-15T11:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63447",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:4" align="right">comment:4</div>

I believe the iconv package is now ready for review. 

* spkg-check has been added. 
* The Mercurial repository has been added. 
* As shown below, iconv is tested by R and found to be suitable. 

```
Disabling libiconv support on Solaris
checking iconv.h usability... yes
checking iconv.h presence... yes
checking for iconv.h... yes
checking for iconv... in libiconv
checking whether iconv accepts "UTF-8", "latin1" and "UCS-*"... yes
checking for iconvlist... yes
checking for iconv... yes
```

The message 

```
Disabling libiconv support on Solaris
```
is from R's spkg-install, so needs to be removed. That is ticket #8272

It should be noted that.  
* The test failure seen on Solaris 10 (SPARC) but not on OS X, Linux or OpenSolaris has a trac item for it. #8271
* The failure of iconv's 'make check' to actually exit with a non-zero exit code when it encounters a failure has a trac ticket for it #8270.



---

archive/issue_events_102039.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-15T11:28:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102039"
}
```



---

archive/issue_events_102040.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-15T11:28:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102040"
}
```



---

archive/issue_events_102041.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-15T11:28:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20solaris",
    "label_color": "000080",
    "label_name": "c: porting: solaris",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102041"
}
```



---

archive/issue_events_102042.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-15T11:28:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102042"
}
```



---

archive/issue_events_102043.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-15T11:33:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102043"
}
```



---

archive/issue_events_102044.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-15T11:33:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102044"
}
```



---

archive/issue_comments_063448.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOops, I forget to attach the revised spkg/install and spkg/standard/deps. I'll do that in a minute.",
    "created_at": "2010-02-15T11:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63448",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:5" align="right">comment:5</div>

Oops, I forget to attach the revised spkg/install and spkg/standard/deps. I'll do that in a minute.



---

archive/issue_comments_063449.json:
```json
{
    "body": "Attachment: **[install.gz](https://github.com/sagemath/sage/files/ticket8191/install.gz)**\n\nNew $SAGE_ROOT/spkg/install to add support for the new iconv package",
    "created_at": "2010-02-15T11:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63449",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[install.gz](https://github.com/sagemath/sage/files/ticket8191/install.gz)**

New $SAGE_ROOT/spkg/install to add support for the new iconv package



---

archive/issue_comments_063450.json:
```json
{
    "body": "Attachment: **[install.diff.gz](https://github.com/sagemath/sage/files/ticket8191/install.diff.gz)**\n\nDiff for for $SAGE_ROOT/spkg/install",
    "created_at": "2010-02-15T11:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63450",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[install.diff.gz](https://github.com/sagemath/sage/files/ticket8191/install.diff.gz)**

Diff for for $SAGE_ROOT/spkg/install



---

archive/issue_comments_063451.json:
```json
{
    "body": "New $SAGE_ROOT/spkg/standard/deps",
    "created_at": "2010-02-15T11:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63451",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

New $SAGE_ROOT/spkg/standard/deps



---

archive/issue_comments_063452.json:
```json
{
    "body": "Attachment: **[deps.gz](https://github.com/sagemath/sage/files/ticket8191/deps.gz)**\n\nDiff file for $SAGE_ROOT/spkg/standard/deps",
    "created_at": "2010-02-15T11:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63452",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[deps.gz](https://github.com/sagemath/sage/files/ticket8191/deps.gz)**

Diff file for $SAGE_ROOT/spkg/standard/deps



---

archive/issue_comments_063453.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAttachment: **[deps.diff.gz](https://github.com/sagemath/sage/files/ticket8191/deps.diff.gz)**\n\nI've attached the following two files, in addition to diffs to their originals. Neither file appear to be are under revision control, so I assume these two files will have to be manually integrated.  \n\n```\n$SAGE_ROOT/spkg/standard/deps \n$SAGE_ROOT/spkg/install \n```\n\nI've made gdmodule, Python and R all depend on iconv, as all of them check for iconv. \n\n**This is now ready for review!!!**\n\nDave",
    "created_at": "2010-02-15T11:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63453",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:6" align="right">comment:6</div>

Attachment: **[deps.diff.gz](https://github.com/sagemath/sage/files/ticket8191/deps.diff.gz)**

I've attached the following two files, in addition to diffs to their originals. Neither file appear to be are under revision control, so I assume these two files will have to be manually integrated.  

```
$SAGE_ROOT/spkg/standard/deps 
$SAGE_ROOT/spkg/install 
```

I've made gdmodule, Python and R all depend on iconv, as all of them check for iconv. 

**This is now ready for review!!!**

Dave



---

archive/issue_events_102045.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-15T11:59:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102045"
}
```



---

archive/issue_events_102046.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-15T11:59:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102046"
}
```



---

archive/issue_comments_063454.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI'm attaching a Mercurial patch too",
    "created_at": "2010-02-17T00:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63454",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:7" align="right">comment:7</div>

I'm attaching a Mercurial patch too



---

archive/issue_comments_063455.json:
```json
{
    "body": "Mercurial patch",
    "created_at": "2010-02-17T00:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63455",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Mercurial patch



---

archive/issue_comments_063456.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAttachment: **[R.patch.gz](https://github.com/sagemath/sage/files/ticket8191/R.patch.gz)**\n\nI called the Mercurial patch \"R.patch\", which was probably not a very sensible name. It is for the iconv package.",
    "created_at": "2010-02-17T00:21:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63456",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:8" align="right">comment:8</div>

Attachment: **[R.patch.gz](https://github.com/sagemath/sage/files/ticket8191/R.patch.gz)**

I called the Mercurial patch "R.patch", which was probably not a very sensible name. It is for the iconv package.



---

archive/issue_comments_063457.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe new iconv package builds on sage.math, bsd.math, rosemary.math, t2.math, Skynet machines (cleo and iras), and Cygwin (winxp1 on boxen.math). \n\n\n\n\n**Note to release manager:** Replace the current file `spkg/install` with [install](https://github.com/sagemath/sage/files/ticket8191/install.gz). Also replace the current file `spkg/standard/deps` with [deps](https://github.com/sagemath/sage/files/ticket8191/deps.gz). Both `install` and `deps` are not under revision control, so one has to replace them with updated versions. Make sure to turn on the executable bits of `install`.",
    "created_at": "2010-02-21T21:15:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63457",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:9" align="right">comment:9</div>

The new iconv package builds on sage.math, bsd.math, rosemary.math, t2.math, Skynet machines (cleo and iras), and Cygwin (winxp1 on boxen.math). 




**Note to release manager:** Replace the current file `spkg/install` with [install](https://github.com/sagemath/sage/files/ticket8191/install.gz). Also replace the current file `spkg/standard/deps` with [deps](https://github.com/sagemath/sage/files/ticket8191/deps.gz). Both `install` and `deps` are not under revision control, so one has to replace them with updated versions. Make sure to turn on the executable bits of `install`.



---

archive/issue_comments_063458.json:
```json
{
    "body": "Reviewer: **Minh Van Nguyen**",
    "created_at": "2010-02-21T21:15:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63458",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Reviewer: **Minh Van Nguyen**



---

archive/issue_events_102047.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-02-21T21:15:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102047"
}
```



---

archive/issue_events_102048.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-02-21T21:15:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102048"
}
```



---

archive/issue_comments_063459.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAt #8306, I've added iconv to gd's dependencies to keep make from building gd too early.  Should we do that here?",
    "created_at": "2010-02-27T07:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63459",
    "user": "https://github.com/qed777"
}
```

<div id="comment:10" align="right">comment:10</div>

At #8306, I've added iconv to gd's dependencies to keep make from building gd too early.  Should we do that here?



---

archive/issue_comments_063460.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYes, well spotted. You were right to add it to #8036. \n\nIn practice however it will make no difference on Linux, Solaris or OS X as they all come with a version of iconv suitable for gd. It is only R on Solaris which needs this iconv package built, as the iconv shipped with Solaris is not suitable for building the latest versions of R. \n\nSince Minh has already tested this on multiple machines and given it positive review, I'm reluctant to change anything now, which might delay the package getting into Sage, as it would then need reviewing again. \n\nDelaying this getting into Sage will stop Sage working on Solaris. Whether iconv gets built before or after gd will make no difference on any supported platform. \n\nSince #8306 will have a dependancy on this, you have already taken care of the gd dependancy, so again I think that points to the fact there is no need to change this. \n\nDave",
    "created_at": "2010-02-27T14:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63460",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:11" align="right">comment:11</div>

Yes, well spotted. You were right to add it to #8036. 

In practice however it will make no difference on Linux, Solaris or OS X as they all come with a version of iconv suitable for gd. It is only R on Solaris which needs this iconv package built, as the iconv shipped with Solaris is not suitable for building the latest versions of R. 

Since Minh has already tested this on multiple machines and given it positive review, I'm reluctant to change anything now, which might delay the package getting into Sage, as it would then need reviewing again. 

Delaying this getting into Sage will stop Sage working on Solaris. Whether iconv gets built before or after gd will make no difference on any supported platform. 

Since #8306 will have a dependancy on this, you have already taken care of the gd dependancy, so again I think that points to the fact there is no need to change this. 

Dave



---

archive/issue_comments_063461.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@sagetrac-drkirkby](#comment:11):\n> Yes, well spotted. You were right to add it to #8036. \n\nOops, you were right to add it to #8306 was what I meant to write.",
    "created_at": "2010-02-27T14:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63461",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@sagetrac-drkirkby](#comment:11):
> Yes, well spotted. You were right to add it to #8036. 

Oops, you were right to add it to #8306 was what I meant to write.



---

archive/issue_events_102049.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-03-01T16:24:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102049"
}
```



---

archive/issue_events_102050.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-03-01T16:24:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102050"
}
```



---

archive/issue_comments_063462.json:
```json
{
    "body": "apply to script repository; depends on #8307",
    "created_at": "2010-03-02T19:23:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63462",
    "user": "https://github.com/sagetrac-mvngu"
}
```

apply to script repository; depends on #8307



---

archive/issue_comments_063463.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAttachment: **[trac_8191-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket8191/trac_8191-reviewer.patch.gz)**\n\nThe iconv spkg installs a binary called \"iconv\" to `SAGE_LOCAL/bin`, a directory which is under revision control. Usually, we don't put executable binaries under revision control. After installing the iconv spkg, I get this:\n\n```\n[mvngu@sage bin]$ hg st\n? iconv\n```\nThe file `.hgignore` needs to be configured to ignore this file. I have attached [trac_8191-reviewer.patch](https://github.com/sagemath/sage/files/ticket8191/trac_8191-reviewer.patch.gz) which does this. Apply that patch to the script repository. It depends on the patch at #8307. Only my patch needs review by anyone but me.",
    "created_at": "2010-03-02T19:27:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63463",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:14" align="right">comment:14</div>

Attachment: **[trac_8191-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket8191/trac_8191-reviewer.patch.gz)**

The iconv spkg installs a binary called "iconv" to `SAGE_LOCAL/bin`, a directory which is under revision control. Usually, we don't put executable binaries under revision control. After installing the iconv spkg, I get this:

```
[mvngu@sage bin]$ hg st
? iconv
```
The file `.hgignore` needs to be configured to ignore this file. I have attached [trac_8191-reviewer.patch](https://github.com/sagemath/sage/files/ticket8191/trac_8191-reviewer.patch.gz) which does this. Apply that patch to the script repository. It depends on the patch at #8307. Only my patch needs review by anyone but me.



---

archive/issue_events_102051.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T19:27:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102051"
}
```



---

archive/issue_events_102052.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T19:27:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102052"
}
```



---

archive/issue_events_102053.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T19:28:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102053"
}
```



---

archive/issue_events_102054.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T19:28:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102054"
}
```



---

archive/issue_comments_063464.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThanks Minh. Yes, that makes perfect sense. Positive review from me.",
    "created_at": "2010-03-02T20:29:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63464",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:16" align="right">comment:16</div>

Thanks Minh. Yes, that makes perfect sense. Positive review from me.



---

archive/issue_events_102055.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-03-02T20:29:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102055"
}
```



---

archive/issue_events_102056.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-03-02T20:29:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102056"
}
```



---

archive/issue_events_102057.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T22:38:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "title_is": "Add iconv needed for Solaris, and possibly Cygwin too",
    "title_was": "Add iconv needed for Solaris, and possibly Cygwin too.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102057"
}
```



---

archive/issue_events_102058.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T22:38:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102058"
}
```



---

archive/issue_events_102059.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-03-02T22:38:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8191#event-102059"
}
```



---

archive/issue_comments_063465.json:
```json
{
    "body": "Merged: **sage-4.3.4.alpha0**",
    "created_at": "2010-03-02T22:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63465",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Merged: **sage-4.3.4.alpha0**



---

archive/issue_comments_063466.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nMerged in this order:\n\n1. Replace current \"install\" under `SAGE_ROOT/spkg` with [install](https://github.com/sagemath/sage/files/ticket8191/install.gz).\n2. Replace current \"deps\" under `SAGE_ROOT/spkg/standard` with [deps](https://github.com/sagemath/sage/files/ticket8191/deps.gz).\n3. Merged [iconv-1.13.1.spkg](http://boxen.math.washington.edu/home/kirkby/new-packages/iconv/iconv-1.13.1.spkg) in the standard spkg repository.\n4. Merged [trac_8191-reviewer.patch](https://github.com/sagemath/sage/files/ticket8191/trac_8191-reviewer.patch.gz) in the script repository.",
    "created_at": "2010-03-02T22:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63466",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:17" align="right">comment:17</div>

Merged in this order:

1. Replace current "install" under `SAGE_ROOT/spkg` with [install](https://github.com/sagemath/sage/files/ticket8191/install.gz).
2. Replace current "deps" under `SAGE_ROOT/spkg/standard` with [deps](https://github.com/sagemath/sage/files/ticket8191/deps.gz).
3. Merged [iconv-1.13.1.spkg](http://boxen.math.washington.edu/home/kirkby/new-packages/iconv/iconv-1.13.1.spkg) in the standard spkg repository.
4. Merged [trac_8191-reviewer.patch](https://github.com/sagemath/sage/files/ticket8191/trac_8191-reviewer.patch.gz) in the script repository.



---

archive/issue_comments_063467.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@sagetrac-drkirkby](#comment:11):\n> In practice however it will make no difference on Linux, Solaris or OS X as they all come with a version of iconv suitable for gd.\n\nSage 4.3.4.alpha0 fails to build on a Fedora Linux system because iconv is not yet part of the dependency rule for building gd. This issue is now tracked at #8432.",
    "created_at": "2010-03-04T03:58:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8191",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8191#issuecomment-63467",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@sagetrac-drkirkby](#comment:11):
> In practice however it will make no difference on Linux, Solaris or OS X as they all come with a version of iconv suitable for gd.

Sage 4.3.4.alpha0 fails to build on a Fedora Linux system because iconv is not yet part of the dependency rule for building gd. This issue is now tracked at #8432.
