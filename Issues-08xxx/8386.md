# Issue 8386: move iet from sage.combinat to sage.dynamics

archive/issues_008386.json:
```json
{
    "assignees": [
        "https://github.com/videlec"
    ],
    "body": "The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.\n\nApply \n* [attachment: trac_8386_really_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)\n* [attachment: trac_8386_big_clean_fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)\n* [attachment: trac_8386_assert_removal.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_assert_removal.patch.gz)\n\nFollow-up: #14683\n\nDepends on #12643\nDepends on #13677\nDepends on #14669\n\nCC:  @sagetrac-sage-combinat @sagetrac-tmonteil\n\nComponent: **combinatorics**\n\nKeywords: **iet**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nReviewer: **Vincent Delecroix**\n\nMerged: **sage-5.12.beta0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8386_\n\n",
    "closed_at": "2013-08-02T14:14:06Z",
    "created_at": "2010-02-27T13:06:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.12",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "move iet from sage.combinat to sage.dynamics",
    "type": "issue",
    "updated_at": "2013-08-02T14:14:06Z",
    "url": "https://github.com/sagemath/sage/issues/8386",
    "user": "https://github.com/videlec"
}
```
The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.

Apply 
* [attachment: trac_8386_really_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)
* [attachment: trac_8386_big_clean_fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)
* [attachment: trac_8386_assert_removal.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_assert_removal.patch.gz)

Follow-up: #14683

Depends on #12643
Depends on #13677
Depends on #14669

CC:  @sagetrac-sage-combinat @sagetrac-tmonteil

Component: **combinatorics**

Keywords: **iet**

Author: **Frédéric Chapoton**

Reviewer: **Vincent Delecroix**

Merged: **sage-5.12.beta0**

_Issue created by migration from https://trac.sagemath.org/ticket/8386_





---

archive/issue_events_103987.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2010-02-27T13:06:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103987"
}
```



---

archive/issue_events_103988.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2010-02-27T13:06:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103988"
}
```



---

archive/issue_events_103989.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2010-02-27T13:06:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103989"
}
```



---

archive/issue_events_103990.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2010-02-27T13:06:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103990"
}
```



---

archive/issue_events_103991.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2010-02-27T13:06:33Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "subject": "https://github.com/videlec",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103991"
}
```



---

archive/issue_comments_066063.json:
```json
{
    "body": "Attachment: **[trac_8386_iet_alphabet_bug.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_iet_alphabet_bug.patch.gz)**",
    "created_at": "2010-02-27T13:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66063",
    "user": "https://github.com/videlec"
}
```

Attachment: **[trac_8386_iet_alphabet_bug.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_iet_alphabet_bug.patch.gz)**



---

archive/issue_events_103992.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2010-02-27T22:28:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103992"
}
```



---

archive/issue_events_103993.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2010-02-27T22:28:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103993"
}
```



---

archive/issue_events_103994.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2010-02-27T22:28:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103994"
}
```



---

archive/issue_comments_066064.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis patch really needs to be rebased (14 hunk failures) `:-)`",
    "created_at": "2011-10-02T10:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66064",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

This patch really needs to be rebased (14 hunk failures) `:-)`



---

archive/issue_events_103995.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-10-02T10:42:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103995"
}
```



---

archive/issue_events_103996.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-10-02T10:42:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103996"
}
```



---

archive/issue_comments_066065.json:
```json
{
    "body": "Changed keywords from **iet combinatoric** to **iet**",
    "created_at": "2012-03-09T02:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66065",
    "user": "https://github.com/videlec"
}
```

Changed keywords from **iet combinatoric** to **iet**



---

archive/issue_comments_066066.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n-There was a bug for iet.Permutation comparisons. We have the following\n+1) The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.\n+\n+2) The old version for iet uses two kinds of datatype for reduced and labeled versions. The new implementation makes them coherent.\n+\n+3) As a by product of 2), the following behavior is corrected\n \n ```\n sage: p = iet.Permutation('a b','b a')\n@@ -6,5 +10,3 @@\n sage: p == q\n True\n ```\n-\n-The patch correct this feature (we get wrong) and rebased the datatype used for iet.Permutations.\n``````\n",
    "created_at": "2012-03-09T02:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66066",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
-There was a bug for iet.Permutation comparisons. We have the following
+1) The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.
+
+2) The old version for iet uses two kinds of datatype for reduced and labeled versions. The new implementation makes them coherent.
+
+3) As a by product of 2), the following behavior is corrected
 
 ```
 sage: p = iet.Permutation('a b','b a')
@@ -6,5 +10,3 @@
 sage: p == q
 True
 ```
-
-The patch correct this feature (we get wrong) and rebased the datatype used for iet.Permutations.
``````




---

archive/issue_comments_066067.json:
```json
{
    "body": "Dependencies: **#12643**",
    "created_at": "2012-03-09T02:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66067",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#12643**



---

archive/issue_events_103997.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-03-09T02:54:25Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "title_is": "enhanced version of iet",
    "title_was": "iet alphabet bug and rebased datatype",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103997"
}
```



---

archive/issue_events_103998.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-03-09T03:09:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103998"
}
```



---

archive/issue_events_103999.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-03-09T03:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-103999"
}
```



---

archive/issue_comments_066068.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nA bunch of doctests are failing with this patch (see patchbot logs)",
    "created_at": "2012-03-12T17:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66068",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:6" align="right">comment:6</div>

A bunch of doctests are failing with this patch (see patchbot logs)



---

archive/issue_events_104000.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-12T17:55:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104000"
}
```



---

archive/issue_events_104001.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-12T17:55:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104001"
}
```



---

archive/issue_events_104002.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-03-13T14:56:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104002"
}
```



---

archive/issue_events_104003.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-03-13T14:56:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104003"
}
```



---

archive/issue_comments_066069.json:
```json
{
    "body": "Work Issues: **doctest failure**",
    "created_at": "2012-04-06T10:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66069",
    "user": "https://github.com/loefflerd"
}
```

Work Issues: **doctest failure**



---

archive/issue_events_104004.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-04-06T10:43:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104004"
}
```



---

archive/issue_events_104005.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-04-06T10:43:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104005"
}
```



---

archive/issue_comments_066070.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis seems to work with 4.8 but two doctests consistently fail with recent 5.0 betas:\n\n```\n**********************************************************************\nFile \"/storage/masiao/sage-5.0.beta12-patchbot/devel/sage-8386/sage/dynamics/flat_surfaces/abelian_strata.py\", line 1348:\n    sage: c1 != c2_hyp\nException raised:\n    Traceback (most recent call last):\n      File \"/storage/masiao/sage-5.0.beta12-patchbot/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/storage/masiao/sage-5.0.beta12-patchbot/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/storage/masiao/sage-5.0.beta12-patchbot/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_38[13]>\", line 1, in <module>\n        c1 != c2_hyp###line 1348:\n    sage: c1 != c2_hyp\n      File \"/storage/masiao/sage-5.0.beta12-patchbot/local/lib/python/site-packages/sage/dynamics/flat_surfaces/abelian_strata.py\", line 1364, in __cmp__\n        return type.__cmp__(type(self),type(other))\n    AttributeError: type object 'type' has no attribute '__cmp__'\n**********************************************************************\nFile \"/storage/masiao/sage-5.0.beta12-patchbot/devel/sage-8386/sage/dynamics/flat_surfaces/abelian_strata.py\", line 1350:\n    sage: c2_hyp != c2_odd\nException raised:\n    Traceback (most recent call last):\n      File \"/storage/masiao/sage-5.0.beta12-patchbot/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/storage/masiao/sage-5.0.beta12-patchbot/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/storage/masiao/sage-5.0.beta12-patchbot/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_38[14]>\", line 1, in <module>\n        c2_hyp != c2_odd###line 1350:\n    sage: c2_hyp != c2_odd\n      File \"/storage/masiao/sage-5.0.beta12-patchbot/local/lib/python/site-packages/sage/dynamics/flat_surfaces/abelian_strata.py\", line 1364, in __cmp__\n        return type.__cmp__(type(self),type(other))\n    AttributeError: type object 'type' has no attribute '__cmp__'\n**********************************************************************\n```",
    "created_at": "2012-04-06T10:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66070",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:8" align="right">comment:8</div>

This seems to work with 4.8 but two doctests consistently fail with recent 5.0 betas:

```
**********************************************************************
File "/storage/masiao/sage-5.0.beta12-patchbot/devel/sage-8386/sage/dynamics/flat_surfaces/abelian_strata.py", line 1348:
    sage: c1 != c2_hyp
Exception raised:
    Traceback (most recent call last):
      File "/storage/masiao/sage-5.0.beta12-patchbot/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/storage/masiao/sage-5.0.beta12-patchbot/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/storage/masiao/sage-5.0.beta12-patchbot/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_38[13]>", line 1, in <module>
        c1 != c2_hyp###line 1348:
    sage: c1 != c2_hyp
      File "/storage/masiao/sage-5.0.beta12-patchbot/local/lib/python/site-packages/sage/dynamics/flat_surfaces/abelian_strata.py", line 1364, in __cmp__
        return type.__cmp__(type(self),type(other))
    AttributeError: type object 'type' has no attribute '__cmp__'
**********************************************************************
File "/storage/masiao/sage-5.0.beta12-patchbot/devel/sage-8386/sage/dynamics/flat_surfaces/abelian_strata.py", line 1350:
    sage: c2_hyp != c2_odd
Exception raised:
    Traceback (most recent call last):
      File "/storage/masiao/sage-5.0.beta12-patchbot/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/storage/masiao/sage-5.0.beta12-patchbot/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/storage/masiao/sage-5.0.beta12-patchbot/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_38[14]>", line 1, in <module>
        c2_hyp != c2_odd###line 1350:
    sage: c2_hyp != c2_odd
      File "/storage/masiao/sage-5.0.beta12-patchbot/local/lib/python/site-packages/sage/dynamics/flat_surfaces/abelian_strata.py", line 1364, in __cmp__
        return type.__cmp__(type(self),type(other))
    AttributeError: type object 'type' has no attribute '__cmp__'
**********************************************************************
```



---

archive/issue_comments_066071.json:
```json
{
    "body": "Attachment: **[trac_8386-enhanced_iet.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.patch.gz)**\n\napply only this one",
    "created_at": "2012-04-29T19:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66071",
    "user": "https://github.com/videlec"
}
```

Attachment: **[trac_8386-enhanced_iet.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.patch.gz)**

apply only this one



---

archive/issue_comments_066072.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI modify one line in the `__cmp__` method of AbelianStratumComponent in order to make it works.\n\nI suspect an upgrade version of python between sage-4.8 and sage-5.0 as I used the method `__cmp__` of 'type' which no longer exists.",
    "created_at": "2012-04-29T19:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66072",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

I modify one line in the `__cmp__` method of AbelianStratumComponent in order to make it works.

I suspect an upgrade version of python between sage-4.8 and sage-5.0 as I used the method `__cmp__` of 'type' which no longer exists.



---

archive/issue_events_104006.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-04-29T19:30:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104006"
}
```



---

archive/issue_events_104007.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-04-29T19:30:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104007"
}
```



---

archive/issue_comments_066073.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nPlease fill in your real name as Author.",
    "created_at": "2012-07-27T20:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66073",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Please fill in your real name as Author.



---

archive/issue_comments_066074.json:
```json
{
    "body": "Changed author from **vdelecroix** to **Vincent Delecroix**",
    "created_at": "2012-07-27T23:10:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66074",
    "user": "https://github.com/videlec"
}
```

Changed author from **vdelecroix** to **Vincent Delecroix**



---

archive/issue_comments_066075.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nApply only trac_8386-enhanced_iet.v2.patch",
    "created_at": "2012-08-29T19:16:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66075",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:12" align="right">comment:12</div>

Apply only trac_8386-enhanced_iet.v2.patch



---

archive/issue_comments_066076.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,3 +10,5 @@\n sage: p == q\n True\n ```\n+\n+Apply only [attachment: trac_8386-enhanced_iet.v2.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v2.patch.gz)\n``````\n",
    "created_at": "2012-08-29T19:16:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66076",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,3 +10,5 @@
 sage: p == q
 True
 ```
+
+Apply only [attachment: trac_8386-enhanced_iet.v2.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v2.patch.gz)
``````




---

archive/issue_comments_066077.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe bot is not happy: one doctest is missing in dynamics/interval_exchanges/constructors.py\n\nI also complains about the startup, but I do no know what to do about that..",
    "created_at": "2012-09-26T13:09:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66077",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

The bot is not happy: one doctest is missing in dynamics/interval_exchanges/constructors.py

I also complains about the startup, but I do no know what to do about that..



---

archive/issue_comments_066078.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI have added the missing doc.\n\nWhat about the startup problem ?",
    "created_at": "2012-09-27T18:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66078",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

I have added the missing doc.

What about the startup problem ?



---

archive/issue_comments_066079.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nApply only trac_8386-enhanced_iet.v2.patch",
    "created_at": "2012-09-28T08:19:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66079",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

Apply only trac_8386-enhanced_iet.v2.patch



---

archive/issue_comments_066080.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2012-09-30T16:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66080",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_comments_066081.json:
```json
{
    "body": "Changed work issues from **doctest failure** to **startup problem**",
    "created_at": "2012-09-30T16:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66081",
    "user": "https://github.com/fchapoton"
}
```

Changed work issues from **doctest failure** to **startup problem**



---

archive/issue_comments_066082.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nApply only trac_8386-enhanced_iet.v2.patch\n\nHere is a tentative of lazy_import. Let us see what the bot think of that one.",
    "created_at": "2012-11-15T19:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66082",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

Apply only trac_8386-enhanced_iet.v2.patch

Here is a tentative of lazy_import. Let us see what the bot think of that one.



---

archive/issue_comments_066083.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAttachment: **[trac_8386-enhanced_iet.v2.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v2.patch.gz)**\n\nApply only trac_8386-enhanced_iet.v2.patch\n\nanother try, even more lazy !",
    "created_at": "2012-11-15T20:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66083",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

Attachment: **[trac_8386-enhanced_iet.v2.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v2.patch.gz)**

Apply only trac_8386-enhanced_iet.v2.patch

another try, even more lazy !



---

archive/issue_comments_066084.json:
```json
{
    "body": "Changed dependencies from **#12643** to **#12643, #13677**",
    "created_at": "2012-12-11T19:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66084",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#12643** to **#12643, #13677**



---

archive/issue_comments_066085.json:
```json
{
    "body": "Attachment: **[trac_8386-enhanced_iet.v3.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v3.patch.gz)**",
    "created_at": "2012-12-11T20:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66085",
    "user": "https://github.com/fchapoton"
}
```

Attachment: **[trac_8386-enhanced_iet.v3.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v3.patch.gz)**



---

archive/issue_comments_066086.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI have rebased on 5.5rc0.\n\nI hope I have not made a mistake in doing that\n\nApply trac_8386-enhanced_iet.v3.patch",
    "created_at": "2012-12-11T20:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66086",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:20" align="right">comment:20</div>

I have rebased on 5.5rc0.

I hope I have not made a mistake in doing that

Apply trac_8386-enhanced_iet.v3.patch



---

archive/issue_comments_066087.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,4 +11,4 @@\n True\n ```\n \n-Apply only [attachment: trac_8386-enhanced_iet.v2.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v2.patch.gz)\n+Apply only [attachment: trac_8386-enhanced_iet.v3.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v3.patch.gz)\n``````\n",
    "created_at": "2012-12-11T20:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66087",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,4 +11,4 @@
 True
 ```
 
-Apply only [attachment: trac_8386-enhanced_iet.v2.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v2.patch.gz)
+Apply only [attachment: trac_8386-enhanced_iet.v3.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v3.patch.gz)
``````




---

archive/issue_comments_066088.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,4 +11,4 @@\n True\n ```\n \n-Apply only [attachment: trac_8386-enhanced_iet.v3.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v3.patch.gz)\n+Apply only [attachment: trac_8386_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_just_moving-fc.patch.gz)\n``````\n",
    "created_at": "2013-05-19T13:33:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66088",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,4 +11,4 @@
 True
 ```
 
-Apply only [attachment: trac_8386-enhanced_iet.v3.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386-enhanced_iet.v3.patch.gz)
+Apply only [attachment: trac_8386_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_just_moving-fc.patch.gz)
``````




---

archive/issue_comments_066089.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nLet me try to do something for this ticket.\n\nHere is a new patch, that **only** moves the files from \"combinat/iet\" to a new folder \"dynamics\".\n\nThis has been done by starting with the code in 5.10.beta3. So there is something lost, which is the refactoring of datatype.\n\nBut it pass all tests.",
    "created_at": "2013-05-19T13:33:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66089",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

Let me try to do something for this ticket.

Here is a new patch, that **only** moves the files from "combinat/iet" to a new folder "dynamics".

This has been done by starting with the code in 5.10.beta3. So there is something lost, which is the refactoring of datatype.

But it pass all tests.



---

archive/issue_comments_066090.json:
```json
{
    "body": "Changed work issues from **startup problem** to **save the new datatype ?**",
    "created_at": "2013-05-19T13:33:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66090",
    "user": "https://github.com/fchapoton"
}
```

Changed work issues from **startup problem** to **save the new datatype ?**



---

archive/issue_comments_066091.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nfor the bot:\n\napply trac_8386_just_moving-fc.patch",
    "created_at": "2013-05-19T13:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66091",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">comment:22</div>

for the bot:

apply trac_8386_just_moving-fc.patch



---

archive/issue_comments_066092.json:
```json
{
    "body": "Changed work issues from **save the new datatype ?** to **save the new datatype ?; hg mv**",
    "created_at": "2013-05-19T13:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66092",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **save the new datatype ?** to **save the new datatype ?; hg mv**



---

archive/issue_comments_066093.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nIf you move files, use `hg mv` for that instead of `hg remove` the old and `hg add` the new file.",
    "created_at": "2013-05-19T13:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66093",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

If you move files, use `hg mv` for that instead of `hg remove` the old and `hg add` the new file.



---

archive/issue_events_104008.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-19T13:50:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104008"
}
```



---

archive/issue_events_104009.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-19T13:50:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104009"
}
```



---

archive/issue_comments_066094.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI am happy for this ticket if it simply moves iet to sage.dynamics (and keep the refactoring for another ticket) ! But as jdemeyer mentioned it should be done with hg mv (which is a one line patch) instead of hg remove/hg add (which is a 2x(length of the file) patch long).\n\nvincent",
    "created_at": "2013-05-19T14:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66094",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

I am happy for this ticket if it simply moves iet to sage.dynamics (and keep the refactoring for another ticket) ! But as jdemeyer mentioned it should be done with hg mv (which is a one line patch) instead of hg remove/hg add (which is a 2x(length of the file) patch long).

vincent



---

archive/issue_comments_066095.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nWell, I did not now about hg mv.\n\nI have done a lot of work to make the re-location function, including some work on the toc-trees that was rather painful.\n\nAnd I has also taken the opportunity to \n- put all the raise syntax into python3 form\n- correct orthographic errors\n- make the code much closer to pep8 level\n- removed unused import statements\n- make the desired separation into interval_exchanges and flat_surfaces\n\nI spent a few **hours** today on that, and I have already spent a lot of time on this ticket some **months** ago, but nobody did react at that time.\n\nSo, given that all tests pass **now**, it would be great if my work is not lost again.",
    "created_at": "2013-05-19T16:30:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66095",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">comment:25</div>

Well, I did not now about hg mv.

I have done a lot of work to make the re-location function, including some work on the toc-trees that was rather painful.

And I has also taken the opportunity to 
- put all the raise syntax into python3 form
- correct orthographic errors
- make the code much closer to pep8 level
- removed unused import statements
- make the desired separation into interval_exchanges and flat_surfaces

I spent a few **hours** today on that, and I have already spent a lot of time on this ticket some **months** ago, but nobody did react at that time.

So, given that all tests pass **now**, it would be great if my work is not lost again.



---

archive/issue_comments_066096.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@fchapoton](#comment%3A25):\n> Well, I did not now about hg mv.\n> \n> I have done a lot of work to make the re-location function, including some work on the toc-trees that was rather painful.\n> \n> And I has also taken the opportunity to \n> - put all the raise syntax into python3 form\n> - correct orthographic errors\n> - make the code much closer to pep8 level\n> - removed unused import statements\n> - make the desired separation into interval_exchanges and flat_surfaces\n> \n> I spent a few **hours** today on that, and I have already spent a lot of time on this ticket some **months** ago, but nobody did react at that time.\n> \n> So, given that all tests pass **now**, it would be great if my work is not lost again.\n\nI will have a closer look **right now** at your patch. Nevertheless patchbot complains (blue color instead of green) because the doctest framework now wants \"....:\" instead of \"...\" in multiline doctests.",
    "created_at": "2013-05-19T17:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66096",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@fchapoton](#comment%3A25):
> Well, I did not now about hg mv.
> 
> I have done a lot of work to make the re-location function, including some work on the toc-trees that was rather painful.
> 
> And I has also taken the opportunity to 
> - put all the raise syntax into python3 form
> - correct orthographic errors
> - make the code much closer to pep8 level
> - removed unused import statements
> - make the desired separation into interval_exchanges and flat_surfaces
> 
> I spent a few **hours** today on that, and I have already spent a lot of time on this ticket some **months** ago, but nobody did react at that time.
> 
> So, given that all tests pass **now**, it would be great if my work is not lost again.

I will have a closer look **right now** at your patch. Nevertheless patchbot complains (blue color instead of green) because the doctest framework now wants "....:" instead of "..." in multiline doctests.



---

archive/issue_comments_066097.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAttachment: **[trac_8386_just_moving-fc.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_just_moving-fc.patch.gz)**\n\nfor the bot: apply trac_8386_just_moving-fc.patch\n\nhere is a patch that should correct the `....:` point\n\nlet us see what the patchbot says",
    "created_at": "2013-05-19T17:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66097",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">comment:27</div>

Attachment: **[trac_8386_just_moving-fc.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_just_moving-fc.patch.gz)**

for the bot: apply trac_8386_just_moving-fc.patch

here is a patch that should correct the `....:` point

let us see what the patchbot says



---

archive/issue_comments_066098.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@fchapoton](#comment%3A25):\n> Well, I did not now about hg mv.\n> ...\n> So, given that all tests pass **now**, it would be great if my work is not lost again.\n\nYou can quickly recreate your patch using `hg mv` as follow:\n\n- With your patch applied, backup the files that have been moved/modified\n- Unapply the patch\n- Replay the moving the files using `hg mv`\n- Reinstate the backed-up files on top of it.\n- hg qnew a new patch with those, and discard the other one.\n\nYou might want to actually do two patches, one with just the moving,\nand the other with the changes.\n\nBtw: thanks Fr\u00e9d\u00e9ric for all the hard work you are doing lately\n(cleaning, reviewing and more ...)!\n\nCheers,\n                                 Nicolas",
    "created_at": "2013-05-19T18:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66098",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@fchapoton](#comment%3A25):
> Well, I did not now about hg mv.
> ...
> So, given that all tests pass **now**, it would be great if my work is not lost again.

You can quickly recreate your patch using `hg mv` as follow:

- With your patch applied, backup the files that have been moved/modified
- Unapply the patch
- Replay the moving the files using `hg mv`
- Reinstate the backed-up files on top of it.
- hg qnew a new patch with those, and discard the other one.

You might want to actually do two patches, one with just the moving,
and the other with the changes.

Btw: thanks Frédéric for all the hard work you are doing lately
(cleaning, reviewing and more ...)!

Cheers,
                                 Nicolas



---

archive/issue_comments_066099.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThanks Nicolas for this good advice. I am doing that, and I will upload 2 patches",
    "created_at": "2013-05-19T19:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66099",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">comment:29</div>

Thanks Nicolas for this good advice. I am doing that, and I will upload 2 patches



---

archive/issue_comments_066100.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThere is even an option\n\n```\nhg mv --after\n```\nwhich allows one to mark the move after it has happened. But it doesn't work well with queues, as a patch which has been `qrefresh`ed is considered committed. So you need a non-committed version of the patch: apply the patch \"by hand\" using `patch -p1 <x.patch`, then `hg mv --after`, then `hg commit` should work (but I haven't really tried).",
    "created_at": "2013-05-19T19:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66100",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

There is even an option

```
hg mv --after
```
which allows one to mark the move after it has happened. But it doesn't work well with queues, as a patch which has been `qrefresh`ed is considered committed. So you need a non-committed version of the patch: apply the patch "by hand" using `patch -p1 <x.patch`, then `hg mv --after`, then `hg commit` should work (but I haven't really tried).



---

archive/issue_comments_066101.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,4 +11,6 @@\n True\n ```\n \n-Apply only [attachment: trac_8386_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_just_moving-fc.patch.gz)\n+Apply \n+* [attachment: trac_8386_really_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)\n+* [attachment: trac_8386_big_clean_fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)\n``````\n",
    "created_at": "2013-05-19T20:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66101",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,4 +11,6 @@
 True
 ```
 
-Apply only [attachment: trac_8386_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_just_moving-fc.patch.gz)
+Apply 
+* [attachment: trac_8386_really_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)
+* [attachment: trac_8386_big_clean_fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)
``````




---

archive/issue_comments_066102.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAttachment: **[trac_8386_really_just_moving-fc.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)**\n\nok, here it is. It seems that my doc framework is now completely broken (I have by mistake removed the output directory and now docbuild complains a lot about intersphinx and missing files), so I do not know if the doc is ok.\n\nfor the bot:\n\napply trac_8386_really_just_moving-fc.patch trac_8386_big_clean_fc.patch",
    "created_at": "2013-05-19T20:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66102",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">comment:31</div>

Attachment: **[trac_8386_really_just_moving-fc.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)**

ok, here it is. It seems that my doc framework is now completely broken (I have by mistake removed the output directory and now docbuild complains a lot about intersphinx and missing files), so I do not know if the doc is ok.

for the bot:

apply trac_8386_really_just_moving-fc.patch trac_8386_big_clean_fc.patch



---

archive/issue_comments_066103.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@fchapoton](#comment%3A31):\n> ok, here it is. It seems that my doc framework is now completely broken (I have by mistake removed the output directory and now docbuild complains a lot about intersphinx and missing files), so I do not know if the doc is ok.\n\nIt also happens for me. After removing the directory doc/output it works fine again (but you need to rebuild everything with \"sage -docbuild all html\"). If there is a less extremal solution then I would be happy to know.\n\napply trac_8386_really_just_moving-fc.patch trac_8386_big_clean_fc.patch",
    "created_at": "2013-05-19T20:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66103",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@fchapoton](#comment%3A31):
> ok, here it is. It seems that my doc framework is now completely broken (I have by mistake removed the output directory and now docbuild complains a lot about intersphinx and missing files), so I do not know if the doc is ok.

It also happens for me. After removing the directory doc/output it works fine again (but you need to rebuild everything with "sage -docbuild all html"). If there is a less extremal solution then I would be happy to know.

apply trac_8386_really_just_moving-fc.patch trac_8386_big_clean_fc.patch



---

archive/issue_events_104010.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-05-24T11:57:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104010"
}
```



---

archive/issue_events_104011.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-05-24T11:57:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104011"
}
```



---

archive/issue_comments_066104.json:
```json
{
    "body": "Changed work issues from **save the new datatype ?; hg mv** to **save the new datatype ?**",
    "created_at": "2013-05-24T11:57:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66104",
    "user": "https://github.com/fchapoton"
}
```

Changed work issues from **save the new datatype ?; hg mv** to **save the new datatype ?**



---

archive/issue_comments_066105.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThanks Frederic.\n\nI put you as an author and me as a reviewer as it is more like that now. I postponed the modification of the implementation to #14683.",
    "created_at": "2013-06-03T20:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66105",
    "user": "https://github.com/videlec"
}
```

<div id="comment:34" align="right">comment:34</div>

Thanks Frederic.

I put you as an author and me as a reviewer as it is more like that now. I postponed the modification of the implementation to #14683.



---

archive/issue_events_104012.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-06-03T20:45:26Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "title_is": "move iet from sage.combinat to sage.dynamics",
    "title_was": "enhanced version of iet",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104012"
}
```



---

archive/issue_comments_066106.json:
```json
{
    "body": "Changed work issues from **save the new datatype ?** to none",
    "created_at": "2013-06-03T20:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66106",
    "user": "https://github.com/videlec"
}
```

Changed work issues from **save the new datatype ?** to none



---

archive/issue_comments_066107.json:
```json
{
    "body": "Changed reviewer from **Fr\u00e9d\u00e9ric Chapoton** to **Vincent Delecroix**",
    "created_at": "2013-06-03T20:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66107",
    "user": "https://github.com/videlec"
}
```

Changed reviewer from **Frédéric Chapoton** to **Vincent Delecroix**



---

archive/issue_comments_066108.json:
```json
{
    "body": "Changed author from **Vincent Delecroix** to **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2013-06-03T20:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66108",
    "user": "https://github.com/videlec"
}
```

Changed author from **Vincent Delecroix** to **Frédéric Chapoton**



---

archive/issue_comments_066109.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n 1) The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.\n+\n+We postpone 2) and 3) below to #14683\n \n 2) The old version for iet uses two kinds of datatype for reduced and labeled versions. The new implementation makes them coherent.\n \n``````\n",
    "created_at": "2013-06-03T20:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66109",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 1) The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.
+
+We postpone 2) and 3) below to #14683
 
 2) The old version for iet uses two kinds of datatype for reduced and labeled versions. The new implementation makes them coherent.
 
``````




---

archive/issue_events_104013.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-06-03T20:45:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104013"
}
```



---

archive/issue_events_104014.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-06-03T20:45:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104014"
}
```



---

archive/issue_events_104015.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-04T06:28:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104015"
}
```



---

archive/issue_events_104016.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-04T06:28:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104016"
}
```



---

archive/issue_comments_066110.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,18 +1,7 @@\n-1) The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.\n-\n-We postpone 2) and 3) below to #14683\n-\n-2) The old version for iet uses two kinds of datatype for reduced and labeled versions. The new implementation makes them coherent.\n-\n-3) As a by product of 2), the following behavior is corrected\n-\n-```\n-sage: p = iet.Permutation('a b','b a')\n-sage: q = iet.Permutation('b a','a b')\n-sage: p == q\n-True\n-```\n+The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.\n \n Apply \n * [attachment: trac_8386_really_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)\n * [attachment: trac_8386_big_clean_fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)\n+\n+Follow-up: #14683\n``````\n",
    "created_at": "2013-06-04T06:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66110",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,18 +1,7 @@
-1) The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.
-
-We postpone 2) and 3) below to #14683
-
-2) The old version for iet uses two kinds of datatype for reduced and labeled versions. The new implementation makes them coherent.
-
-3) As a by product of 2), the following behavior is corrected
-
-```
-sage: p = iet.Permutation('a b','b a')
-sage: q = iet.Permutation('b a','a b')
-sage: p == q
-True
-```
+The library for iet is moved from sage.combinat.iet to sage.dynamics.interval_exchanges which seems more natural.
 
 Apply 
 * [attachment: trac_8386_really_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)
 * [attachment: trac_8386_big_clean_fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)
+
+Follow-up: #14683
``````




---

archive/issue_events_104017.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-04T06:55:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104017"
}
```



---

archive/issue_events_104018.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-04T06:55:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104018"
}
```



---

archive/issue_comments_066111.json:
```json
{
    "body": "Changed dependencies from **#12643, #13677** to **#12643, #13677, #14669**",
    "created_at": "2013-06-04T06:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66111",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#12643, #13677** to **#12643, #13677, #14669**



---

archive/issue_comments_066112.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nNeeds to be rebased to #14669.",
    "created_at": "2013-06-04T06:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66112",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Needs to be rebased to #14669.



---

archive/issue_comments_066113.json:
```json
{
    "body": "Attachment: **[trac_8386_big_clean_fc.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)**",
    "created_at": "2013-06-13T18:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66113",
    "user": "https://github.com/fchapoton"
}
```

Attachment: **[trac_8386_big_clean_fc.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)**



---

archive/issue_events_104019.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-06-13T18:12:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104019"
}
```



---

archive/issue_events_104020.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-06-13T18:12:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104020"
}
```



---

archive/issue_comments_066114.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nrebased on top of #14669",
    "created_at": "2013-06-13T18:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66114",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:37" align="right">comment:37</div>

rebased on top of #14669



---

archive/issue_comments_066115.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nGreat !",
    "created_at": "2013-06-18T14:26:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66115",
    "user": "https://github.com/videlec"
}
```

<div id="comment:38" align="right">comment:38</div>

Great !



---

archive/issue_events_104021.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-06-18T14:26:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104021"
}
```



---

archive/issue_events_104022.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-06-18T14:26:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104022"
}
```



---

archive/issue_events_104023.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-18T17:11:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104023"
}
```



---

archive/issue_events_104024.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-18T17:11:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104024"
}
```



---

archive/issue_comments_066116.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nNever use `assert` to check user input, use `raise TypeError()` or other exceptions for that.\nAn `AssertionError` appearing in a public function is by definition a bug.\n\nExample:\n\n```\nsage: QuadraticStratum(\"foo\")\n---------------------------------------------------------------------------\nAssertionError                            Traceback (most recent call last)\n<ipython-input-2-ba2d4d1c0bfc> in <module>()\n----> 1 QuadraticStratum(\"foo\")\n\n/mazur/release/merger/sage-5.10/local/lib/python2.7/site-packages/sage/misc/lazy_import.so in sage.misc.lazy_import.LazyImport.__call__ (sage/misc/lazy_import.c:2475)()\n\n/mazur/release/merger/sage-5.10/local/lib/python2.7/site-packages/sage/misc/lazy_import.so in sage.misc.lazy_import.LazyImport.__call__ (sage/misc/lazy_import.c:2475)()\n\n/mazur/release/merger/sage-5.10/local/lib/python2.7/site-packages/sage/dynamics/flat_surfaces/quadratic_strata.pyc in __init__(self, *l)\n     30         else:\n     31             for i in l:\n---> 32                 assert(isinstance(i, (int, Integer)))\n     33             self._zeroes = sorted(list(l), reverse=True)\n     34 \n\nAssertionError: \n```",
    "created_at": "2013-06-18T17:11:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66116",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

Never use `assert` to check user input, use `raise TypeError()` or other exceptions for that.
An `AssertionError` appearing in a public function is by definition a bug.

Example:

```
sage: QuadraticStratum("foo")
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
<ipython-input-2-ba2d4d1c0bfc> in <module>()
----> 1 QuadraticStratum("foo")

/mazur/release/merger/sage-5.10/local/lib/python2.7/site-packages/sage/misc/lazy_import.so in sage.misc.lazy_import.LazyImport.__call__ (sage/misc/lazy_import.c:2475)()

/mazur/release/merger/sage-5.10/local/lib/python2.7/site-packages/sage/misc/lazy_import.so in sage.misc.lazy_import.LazyImport.__call__ (sage/misc/lazy_import.c:2475)()

/mazur/release/merger/sage-5.10/local/lib/python2.7/site-packages/sage/dynamics/flat_surfaces/quadratic_strata.pyc in __init__(self, *l)
     30         else:
     31             for i in l:
---> 32                 assert(isinstance(i, (int, Integer)))
     33             self._zeroes = sorted(list(l), reverse=True)
     34 

AssertionError: 
```



---

archive/issue_comments_066117.json:
```json
{
    "body": "Attachment: **[trac_8386_assert_removal.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_assert_removal.patch.gz)**",
    "created_at": "2013-06-18T19:49:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66117",
    "user": "https://github.com/fchapoton"
}
```

Attachment: **[trac_8386_assert_removal.patch.gz](https://github.com/sagemath/sage/files/ticket8386/trac_8386_assert_removal.patch.gz)**



---

archive/issue_comments_066118.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,5 +3,6 @@\n Apply \n * [attachment: trac_8386_really_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)\n * [attachment: trac_8386_big_clean_fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)\n+* [attachment: trac_8386_assert_removal.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_assert_removal.patch.gz)\n \n Follow-up: #14683\n``````\n",
    "created_at": "2013-06-18T19:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66118",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,5 +3,6 @@
 Apply 
 * [attachment: trac_8386_really_just_moving-fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_really_just_moving-fc.patch.gz)
 * [attachment: trac_8386_big_clean_fc.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_big_clean_fc.patch.gz)
+* [attachment: trac_8386_assert_removal.patch](https://github.com/sagemath/sage/files/ticket8386/trac_8386_assert_removal.patch.gz)
 
 Follow-up: #14683
``````




---

archive/issue_events_104025.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-06-18T19:53:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104025"
}
```



---

archive/issue_events_104026.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-06-18T19:53:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104026"
}
```



---

archive/issue_comments_066119.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nhere is patch that\n\n* removes all \"assert\" statements, using some \"raise xxxError()\" instead\n\n* makes an effort to doctest more of the \"raise xxxError()\"\n\nThere remains to make sure all \"raise\" are doctested, but I would prefer to keep that for another ticket, given the age of this one.\n\nNeeds review",
    "created_at": "2013-06-18T19:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66119",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:40" align="right">comment:40</div>

here is patch that

* removes all "assert" statements, using some "raise xxxError()" instead

* makes an effort to doctest more of the "raise xxxError()"

There remains to make sure all "raise" are doctested, but I would prefer to keep that for another ticket, given the age of this one.

Needs review



---

archive/issue_comments_066120.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI haven't checked in detail (Vincent: can you do that please), but it looks good on first sight. Excellent work!",
    "created_at": "2013-06-18T20:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66120",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

I haven't checked in detail (Vincent: can you do that please), but it looks good on first sight. Excellent work!



---

archive/issue_comments_066121.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nSounds good to me too. Thanks Fr\u00e9d\u00e9ric!\n\nBtw: I noticed a __repr__; but that's probably for another ticket.",
    "created_at": "2013-06-19T05:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66121",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:42" align="right">comment:42</div>

Sounds good to me too. Thanks Frédéric!

Btw: I noticed a __repr__; but that's probably for another ticket.



---

archive/issue_comments_066122.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nVincent, are you able to do the re-review in the next few days? #14772 depends on this ticket because there are two instances in iet which use `Permutation_class`.",
    "created_at": "2013-06-28T16:41:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66122",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:43" align="right">comment:43</div>

Vincent, are you able to do the re-review in the next few days? #14772 depends on this ticket because there are two instances in iet which use `Permutation_class`.



---

archive/issue_comments_066123.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nGood to go! Thanks Frederic.",
    "created_at": "2013-07-04T11:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66123",
    "user": "https://github.com/videlec"
}
```

<div id="comment:44" align="right">comment:44</div>

Good to go! Thanks Frederic.



---

archive/issue_events_104027.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-07-04T11:52:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104027"
}
```



---

archive/issue_events_104028.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-07-04T11:52:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104028"
}
```



---

archive/issue_events_104029.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-21T21:45:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104029"
}
```



---

archive/issue_events_104030.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-21T21:45:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104030"
}
```



---

archive/issue_events_104031.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-02T14:14:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104031"
}
```



---

archive/issue_events_104032.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-02T14:14:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8386#event-104032"
}
```



---

archive/issue_comments_066124.json:
```json
{
    "body": "Merged: **sage-5.12.beta0**",
    "created_at": "2013-08-02T14:14:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8386#issuecomment-66124",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.12.beta0**
