# Issue 8896: 0.0000000000000000000000000000 is parsed completely differently than 1.0000000000000000000000000000 for no good reason

archive/issues_008896.json:
```json
{
    "assignees": [
        "https://github.com/aghitza"
    ],
    "body": "In Sage 0.0 and 0.00000000000000000000000000000000000000 denote exactly the same thing (a zero with the same precision).  However, that 1.0 and 1.00000000000000000000000000000000000000 are different in Sage:\n\n```\nsage: 0.0\n0.000000000000000\nsage: 0.00000000000000000000000000000000000000\n0.000000000000000\nsage: parent(0.00000000000000000000000000000000000000)\nReal Field with 53 bits of precision\nsage: 1.00000000000000000000000000000000000000\n1.0000000000000000000000000000000000000\nsage: 1.0\n1.00000000000000\nsage: parent(1.00000000000000000000000000000000000000)\nReal Field with 130 bits of precision\nsage: parent(1.0)\nReal Field with 53 bits of precision\n```\n\nSome people consider the above inconsistency a bug.\nSee the discussion below and at [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/73d513e2c55d4601).\n\nApply [attachment: 8896-rebased.patch](https://github.com/sagemath/sage/files/ticket8896/8896-rebased.patch.gz)\n\nCC:  @jasongrout\n\nKeywords: **sd32**\n\nComponent: **basic arithmetic**\n\nAuthor: **Robert Bradshaw**\n\nReviewer: **Mariah Lenox**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8896_\n\n",
    "created_at": "2010-05-05T20:17:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/pending",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "0.0000000000000000000000000000 is parsed completely differently than 1.0000000000000000000000000000 for no good reason",
    "type": "issue",
    "updated_at": "2011-08-24T23:43:21Z",
    "url": "https://github.com/sagemath/sage/issues/8896",
    "user": "https://github.com/williamstein"
}
```
In Sage 0.0 and 0.00000000000000000000000000000000000000 denote exactly the same thing (a zero with the same precision).  However, that 1.0 and 1.00000000000000000000000000000000000000 are different in Sage:

```
sage: 0.0
0.000000000000000
sage: 0.00000000000000000000000000000000000000
0.000000000000000
sage: parent(0.00000000000000000000000000000000000000)
Real Field with 53 bits of precision
sage: 1.00000000000000000000000000000000000000
1.0000000000000000000000000000000000000
sage: 1.0
1.00000000000000
sage: parent(1.00000000000000000000000000000000000000)
Real Field with 130 bits of precision
sage: parent(1.0)
Real Field with 53 bits of precision
```

Some people consider the above inconsistency a bug.
See the discussion below and at [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/73d513e2c55d4601).

Apply [attachment: 8896-rebased.patch](https://github.com/sagemath/sage/files/ticket8896/8896-rebased.patch.gz)

CC:  @jasongrout

Keywords: **sd32**

Component: **basic arithmetic**

Author: **Robert Bradshaw**

Reviewer: **Mariah Lenox**

_Issue created by migration from https://trac.sagemath.org/ticket/8896_





---

archive/issue_events_111662.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-05-05T20:17:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111662"
}
```



---

archive/issue_events_111663.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-05-05T20:17:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111663"
}
```



---

archive/issue_events_111664.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-05-05T20:17:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111664"
}
```



---

archive/issue_events_111665.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-05-05T20:17:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111665"
}
```



---

archive/issue_events_111666.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-05-05T20:17:53Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111666"
}
```



---

archive/issue_comments_072789.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis is because 0.00000000000000000000000000000000005 is not considered to have \"high precision.\" We should special-case 0.",
    "created_at": "2010-05-05T22:53:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72789",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:1" align="right">comment:1</div>

This is because 0.00000000000000000000000000000000005 is not considered to have "high precision." We should special-case 0.



---

archive/issue_comments_072790.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nBtw, Sage does not distinguish +0.0 and -0.0 (and 0.0).\n\nNice how trac interprets long decimal fractions of floats. :D",
    "created_at": "2010-05-06T01:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72790",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:2" align="right">comment:2</div>

Btw, Sage does not distinguish +0.0 and -0.0 (and 0.0).

Nice how trac interprets long decimal fractions of floats. :D



---

archive/issue_comments_072791.json:
```json
{
    "body": "Attachment: **[8896-highprec-zero.patch.gz](https://github.com/sagemath/sage/files/ticket8896/8896-highprec-zero.patch.gz)**",
    "created_at": "2010-05-15T22:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72791",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[8896-highprec-zero.patch.gz](https://github.com/sagemath/sage/files/ticket8896/8896-highprec-zero.patch.gz)**



---

archive/issue_events_111667.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2010-05-15T22:36:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111667"
}
```



---

archive/issue_comments_072792.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nLooks okay in general, but the last block \n\n```\nelse: \n        # Must be 0.00000000000000...0 \n        sigfigs = len(mantissa) \n```\nneeds to be indented, n'est pas?\n\nIn the tests, there should be (brief) words to the effect that the first two have the default minimum precision and that is what is being tested for, while in the new tests we are testing for getting high precision.",
    "created_at": "2010-05-26T18:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72792",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

Looks okay in general, but the last block 

```
else: 
        # Must be 0.00000000000000...0 
        sigfigs = len(mantissa) 
```
needs to be indented, n'est pas?

In the tests, there should be (brief) words to the effect that the first two have the default minimum precision and that is what is being tested for, while in the new tests we are testing for getting high precision.



---

archive/issue_events_111668.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-05-26T18:02:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111668"
}
```



---

archive/issue_events_111669.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-05-26T18:02:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111669"
}
```



---

archive/issue_comments_072793.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kcrisman](#comment%3A5):\n> Looks okay in general, but the last block \n> \n> ```\n> else: \n>         # Must be 0.00000000000000...0 \n>         sigfigs = len(mantissa) \n> ```\n> needs to be indented, n'est pas?\n\nNo, the `else` belongs to the `for` statement.\nBut currently, *leading* zeros contribute to the precision, too: :)\n\n```\nsage: RealNumber(0.000000000000000000).prec()\n67\nsage: RealNumber(00.000000000000000000).prec()\n70\nsage: RealNumber(.000000000000000000).prec()\n64\n```\nI'm not sure if this is intentional, it's at least uncommon.\n(And a leading `+` also increases the precision.)\n\nIt looks as if a decimal point is counted as a significant digit.\n\nAnd, sorry, the code is extremely ugly (not due to the patch) and inefficient.\nExamples and parameter description can be improved as well.\n\nI'm not quite sure what kind of strings actually get in (i.e., where/if illegal syntax is catched, it seems all is left to `RealNumber._set()` if not already handled by the parser), this should perhaps be documented, too.",
    "created_at": "2010-05-27T13:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72793",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kcrisman](#comment%3A5):
> Looks okay in general, but the last block 
> 
> ```
> else: 
>         # Must be 0.00000000000000...0 
>         sigfigs = len(mantissa) 
> ```
> needs to be indented, n'est pas?

No, the `else` belongs to the `for` statement.
But currently, *leading* zeros contribute to the precision, too: :)

```
sage: RealNumber(0.000000000000000000).prec()
67
sage: RealNumber(00.000000000000000000).prec()
70
sage: RealNumber(.000000000000000000).prec()
64
```
I'm not sure if this is intentional, it's at least uncommon.
(And a leading `+` also increases the precision.)

It looks as if a decimal point is counted as a significant digit.

And, sorry, the code is extremely ugly (not due to the patch) and inefficient.
Examples and parameter description can be improved as well.

I'm not quite sure what kind of strings actually get in (i.e., where/if illegal syntax is catched, it seems all is left to `RealNumber._set()` if not already handled by the parser), this should perhaps be documented, too.



---

archive/issue_comments_072794.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAlso, is it intentional that the exponent is ignored when computing the required precision?\nE.g., `1.0e-1000000000` as well as `1.0e-10000000000` evaluate to zero, because of only 53 bits precision.",
    "created_at": "2010-05-27T15:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72794",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:7" align="right">comment:7</div>

Also, is it intentional that the exponent is ignored when computing the required precision?
E.g., `1.0e-1000000000` as well as `1.0e-10000000000` evaluate to zero, because of only 53 bits precision.



---

archive/issue_comments_072795.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n`sage.rings.complex_number.create_ComplexNumber()` also needs work.\n\n(It doesn't \"strip\" trailing/fractional zeros, but also doesn't treat a given exponent correctly. Bases (other than 10) aren't supported; perhaps it should just call `create_RealNumber()` or use the same code to compute the necessary precision once this operates as desired.)",
    "created_at": "2010-05-27T16:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72795",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">comment:8</div>

`sage.rings.complex_number.create_ComplexNumber()` also needs work.

(It doesn't "strip" trailing/fractional zeros, but also doesn't treat a given exponent correctly. Bases (other than 10) aren't supported; perhaps it should just call `create_RealNumber()` or use the same code to compute the necessary precision once this operates as desired.)



---

archive/issue_comments_072796.json:
```json
{
    "body": "apply on top of previous",
    "created_at": "2010-05-27T18:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72796",
    "user": "https://github.com/robertwb"
}
```

apply on top of previous



---

archive/issue_events_111670.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2010-05-27T18:51:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111670"
}
```



---

archive/issue_events_111671.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2010-05-27T18:51:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111671"
}
```



---

archive/issue_comments_072797.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAttachment: **[8896-part2.patch.gz](https://github.com/sagemath/sage/files/ticket8896/8896-part2.patch.gz)**\n\nReplying to [@nexttime](#comment%3A6):\n> No, the `else` belongs to the `for` statement.\n\nExactly. \n\n> But currently, *leading* zeros contribute to the precision, too: :)\n> \n> ```\n> sage: RealNumber(0.000000000000000000).prec()\n> 67\n> sage: RealNumber(00.000000000000000000).prec()\n> 70\n> sage: RealNumber(.000000000000000000).prec()\n> 64\n> ```\n> I'm not sure if this is intentional, it's at least uncommon.\n\nThat's the point of this ticket. For 0, all zeros are leading. \n\n> (And a leading `+` also increases the precision.)\n> \n> It looks as if a decimal point is counted as a significant digit.\n\nGood catch, fixed. That required some adjustment to keep the input/str in sync. \n\n> And, sorry, the code is extremely ugly (not due to the patch) and inefficient.\n> Examples and parameter description can be improved as well.\n> \n> I'm not quite sure what kind of strings actually get in (i.e., where/if illegal syntax is catched, it seems all is left to `RealNumber._set()` if not already handled by the parser), this should perhaps be documented, too. \n\nUpdated the docstring a bit. This is mostly for use by the preparser, though of course it gets used directly as well.",
    "created_at": "2010-05-27T18:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72797",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:9" align="right">comment:9</div>

Attachment: **[8896-part2.patch.gz](https://github.com/sagemath/sage/files/ticket8896/8896-part2.patch.gz)**

Replying to [@nexttime](#comment%3A6):
> No, the `else` belongs to the `for` statement.

Exactly. 

> But currently, *leading* zeros contribute to the precision, too: :)
> 
> ```
> sage: RealNumber(0.000000000000000000).prec()
> 67
> sage: RealNumber(00.000000000000000000).prec()
> 70
> sage: RealNumber(.000000000000000000).prec()
> 64
> ```
> I'm not sure if this is intentional, it's at least uncommon.

That's the point of this ticket. For 0, all zeros are leading. 

> (And a leading `+` also increases the precision.)
> 
> It looks as if a decimal point is counted as a significant digit.

Good catch, fixed. That required some adjustment to keep the input/str in sync. 

> And, sorry, the code is extremely ugly (not due to the patch) and inefficient.
> Examples and parameter description can be improved as well.
> 
> I'm not quite sure what kind of strings actually get in (i.e., where/if illegal syntax is catched, it seems all is left to `RealNumber._set()` if not already handled by the parser), this should perhaps be documented, too. 

Updated the docstring a bit. This is mostly for use by the preparser, though of course it gets used directly as well.



---

archive/issue_comments_072798.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nexttime](#comment%3A7):\n> Also, is it intentional that the exponent is ignored when computing the required precision?\n> E.g., `1.0e-1000000000` as well as `1.0e-10000000000` evaluate to zero, because of only 53 bits precision.\n\nYes, of course. The size of the exponent is completely orthogonal to the number of significant figures. I made create_ComplexNumber defer to create_RealNumber as well.",
    "created_at": "2010-05-27T18:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72798",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nexttime](#comment%3A7):
> Also, is it intentional that the exponent is ignored when computing the required precision?
> E.g., `1.0e-1000000000` as well as `1.0e-10000000000` evaluate to zero, because of only 53 bits precision.

Yes, of course. The size of the exponent is completely orthogonal to the number of significant figures. I made create_ComplexNumber defer to create_RealNumber as well.



---

archive/issue_comments_072799.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n> > No, the `else` belongs to the `for` statement.\n\n> \n> Exactly. \n\n[Here](http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops) is the reference for this - I hadn't seen that before.  Thanks for the additional docstring.",
    "created_at": "2010-05-27T19:29:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72799",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">comment:11</div>

> > No, the `else` belongs to the `for` statement.

> 
> Exactly. 

[Here](http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops) is the reference for this - I hadn't seen that before.  Thanks for the additional docstring.



---

archive/issue_comments_072800.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nJust took a first glance:\n\n* `create_ComplexNumber()` now looks nice\n* in the above function, it's `len<15` instead of `len<=15`\n* `min_prec` can be smaller than 53 (if specified)\n* `pad` should be (tested to be) non-negative\n* (`min_prec` perhaps too, or `min_prec+pad>=0`) \n* compare against `min_prec+pad` rather than individually for the \"common\" case\n* `rnd` description in `create_RealNumber()` is slightly messed up\n* IMHO leading zeros **left to the decimal point** should be stripped/ignored\n\nMore to come... ;-)\n\n(I've only looked at the patch to the patch.)",
    "created_at": "2010-05-27T23:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72800",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>

Just took a first glance:

* `create_ComplexNumber()` now looks nice
* in the above function, it's `len<15` instead of `len<=15`
* `min_prec` can be smaller than 53 (if specified)
* `pad` should be (tested to be) non-negative
* (`min_prec` perhaps too, or `min_prec+pad>=0`) 
* compare against `min_prec+pad` rather than individually for the "common" case
* `rnd` description in `create_RealNumber()` is slightly messed up
* IMHO leading zeros **left to the decimal point** should be stripped/ignored

More to come... ;-)

(I've only looked at the patch to the patch.)



---

archive/issue_comments_072801.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@robertwb](#comment%3A9):\n> Replying to [@nexttime](#comment%3A6):\n> > But currently, *leading* zeros contribute to the precision, too: :)\n> > \n> > ```\n> > sage: RealNumber(0.000000000000000000).prec()\n> > 67\n> > sage: RealNumber(00.000000000000000000).prec()\n> > 70\n> > sage: RealNumber(.000000000000000000).prec()\n> > 64\n> > ```\n> > I'm not sure if this is intentional, it's at least uncommon.\n\n> \n> That's the point of this ticket. For 0, all zeros are leading. \n\nNot really. We were (only I think) considering zeros of the **fractional** part.\n\nTruncation only makes sense from the right; and you don't express precision by padding zeros to the left. Stating that the earth's diameter is about 013 million meters doesn't give more information than stating it is about 13 million meters.\n\n> Updated the docstring a bit. This is mostly for use by the preparser, though of course it gets used directly as well. \n\nI was thinking of scientific notation syntax, too. (Also the examples do not contain that form.)",
    "created_at": "2010-05-27T23:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72801",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@robertwb](#comment%3A9):
> Replying to [@nexttime](#comment%3A6):
> > But currently, *leading* zeros contribute to the precision, too: :)
> > 
> > ```
> > sage: RealNumber(0.000000000000000000).prec()
> > 67
> > sage: RealNumber(00.000000000000000000).prec()
> > 70
> > sage: RealNumber(.000000000000000000).prec()
> > 64
> > ```
> > I'm not sure if this is intentional, it's at least uncommon.

> 
> That's the point of this ticket. For 0, all zeros are leading. 

Not really. We were (only I think) considering zeros of the **fractional** part.

Truncation only makes sense from the right; and you don't express precision by padding zeros to the left. Stating that the earth's diameter is about 013 million meters doesn't give more information than stating it is about 13 million meters.

> Updated the docstring a bit. This is mostly for use by the preparser, though of course it gets used directly as well. 

I was thinking of scientific notation syntax, too. (Also the examples do not contain that form.)



---

archive/issue_comments_072802.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nexttime](#comment%3A13):\n> Not really. We were (only I think) considering zeros of the **fractional** part.\n\nTo be more precise, 0.0 and 00.0 denote the same \"thing\", i.e. have the same meaning, while 0.0 and 0.00 do not.",
    "created_at": "2010-05-27T23:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72802",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nexttime](#comment%3A13):
> Not really. We were (only I think) considering zeros of the **fractional** part.

To be more precise, 0.0 and 00.0 denote the same "thing", i.e. have the same meaning, while 0.0 and 0.00 do not.



---

archive/issue_comments_072803.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nFor those interested in printing real numbers in general, I'll just plug #7682, which could use just a bit of polishing work, I believe, and makes printing real/complex numbers much more consistent and easy to adjust.",
    "created_at": "2010-05-28T00:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72803",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:15" align="right">comment:15</div>

For those interested in printing real numbers in general, I'll just plug #7682, which could use just a bit of polishing work, I believe, and makes printing real/complex numbers much more consistent and easy to adjust.



---

archive/issue_comments_072804.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@robertwb](#comment%3A10):\n> Replying to [@nexttime](#comment%3A7):\n> > Also, is it intentional that the exponent is ignored when computing the required precision?\n> > E.g., `1.0e-1000000000` as well as `1.0e-10000000000` evaluate to zero, because of only 53 bits precision.\n\n> \n> Yes, of course. The size of the exponent is completely orthogonal to the number of significant figures.\n\nI don't agree either. If the \"effective\" exponent (the one in normalized form) exceeds the maximum, one should either increase `prec` accordingly or - more practical - raise an exception.\n\nIf not, this could be a pitfall. But **I** don't mind... ;-)",
    "created_at": "2010-05-28T01:00:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72804",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@robertwb](#comment%3A10):
> Replying to [@nexttime](#comment%3A7):
> > Also, is it intentional that the exponent is ignored when computing the required precision?
> > E.g., `1.0e-1000000000` as well as `1.0e-10000000000` evaluate to zero, because of only 53 bits precision.

> 
> Yes, of course. The size of the exponent is completely orthogonal to the number of significant figures.

I don't agree either. If the "effective" exponent (the one in normalized form) exceeds the maximum, one should either increase `prec` accordingly or - more practical - raise an exception.

If not, this could be a pitfall. But **I** don't mind... ;-)



---

archive/issue_comments_072805.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@nexttime](#comment%3A13):\n> Replying to [@robertwb](#comment%3A9):\n> > That's the point of this ticket. For 0, all zeros are leading. \n\n> \n> Not really. We were (only I think) considering zeros of the **fractional** part.\n> \n> Truncation only makes sense from the right; and you don't express precision by padding zeros to the left. Stating that the earth's diameter is about 013 million meters doesn't give more information than stating it is about 13 million meters.\n\nWhich has the same information as saying the Earth's diameter is about 0.000013 trillion meters. Whether or not a digit is significant is not a function of whether it is on the left or right of the decimal. \n\nWould you then say that `0.00e9` and `00.0e8` and `.000e10` have different precisions?",
    "created_at": "2010-05-28T06:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72805",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@nexttime](#comment%3A13):
> Replying to [@robertwb](#comment%3A9):
> > That's the point of this ticket. For 0, all zeros are leading. 

> 
> Not really. We were (only I think) considering zeros of the **fractional** part.
> 
> Truncation only makes sense from the right; and you don't express precision by padding zeros to the left. Stating that the earth's diameter is about 013 million meters doesn't give more information than stating it is about 13 million meters.

Which has the same information as saying the Earth's diameter is about 0.000013 trillion meters. Whether or not a digit is significant is not a function of whether it is on the left or right of the decimal. 

Would you then say that `0.00e9` and `00.0e8` and `.000e10` have different precisions?



---

archive/issue_comments_072806.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@nexttime](#comment%3A12):\n> Just took a first glance:\n> \n> * `create_ComplexNumber()` now looks nice\n> * in the above function, it's `len<15` instead of `len<=15`\n\nAh, oops.\n\n> * `min_prec` can be smaller than 53 (if specified)\n\nYes, but I'm not following what you're trying to say here. \n\n> * `pad` should be (tested to be) non-negative\n> * (`min_prec` perhaps too, or `min_prec+pad>=0`) \n> * compare against `min_prec+pad` rather than individually for the \"common\" case\n\nI don't care if pad is negative (I'll fix the docstring). Same with min_prec, I just pass whatever I get onto the RealField constructor which will raise a perfectly fine exception if the precision is not valid (as defined by MPFR_MIN_PREC and MPFR_MAX_PREC).\n\n> * `rnd` description in `create_RealNumber()` is slightly messed up\n\nAh, I'll fix that. \n\n\n> > > E.g., `1.0e-1000000000` as well as `1.0e-10000000000` evaluate to zero, because of only 53 bits precision.\n\n> > \n> > Yes, of course. The size of the exponent is completely orthogonal to the number of significant figures.\n\n> \n> I don't agree either. If the \"effective\" exponent (the one in normalized form) exceeds the maximum, one should either increase `prec` accordingly or - more practical - raise an exception.\n> \n> If not, this could be a pitfall. But **I** don't mind... ;-)\n\nWell, I'd say the above has only two significant digits of precision, no matter what the exponent, which is all this function tries to deduce. The fact that it's subnormal is outside of the scope of this ticket--if an exception should be raise it's not here. (And in this case you can't raise the precision enough, due to memory/library limitations.)",
    "created_at": "2010-05-28T06:33:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72806",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@nexttime](#comment%3A12):
> Just took a first glance:
> 
> * `create_ComplexNumber()` now looks nice
> * in the above function, it's `len<15` instead of `len<=15`

Ah, oops.

> * `min_prec` can be smaller than 53 (if specified)

Yes, but I'm not following what you're trying to say here. 

> * `pad` should be (tested to be) non-negative
> * (`min_prec` perhaps too, or `min_prec+pad>=0`) 
> * compare against `min_prec+pad` rather than individually for the "common" case

I don't care if pad is negative (I'll fix the docstring). Same with min_prec, I just pass whatever I get onto the RealField constructor which will raise a perfectly fine exception if the precision is not valid (as defined by MPFR_MIN_PREC and MPFR_MAX_PREC).

> * `rnd` description in `create_RealNumber()` is slightly messed up

Ah, I'll fix that. 


> > > E.g., `1.0e-1000000000` as well as `1.0e-10000000000` evaluate to zero, because of only 53 bits precision.

> > 
> > Yes, of course. The size of the exponent is completely orthogonal to the number of significant figures.

> 
> I don't agree either. If the "effective" exponent (the one in normalized form) exceeds the maximum, one should either increase `prec` accordingly or - more practical - raise an exception.
> 
> If not, this could be a pitfall. But **I** don't mind... ;-)

Well, I'd say the above has only two significant digits of precision, no matter what the exponent, which is all this function tries to deduce. The fact that it's subnormal is outside of the scope of this ticket--if an exception should be raise it's not here. (And in this case you can't raise the precision enough, due to memory/library limitations.)



---

archive/issue_comments_072807.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@robertwb](#comment%3A18):\n> Replying to [@nexttime](#comment%3A12):\n> > * `min_prec` can be smaller than 53 (if specified)\n\n> \n> Yes, but I'm not following what you're trying to say here. \n> \n> > * `pad` should be (tested to be) non-negative\n> > * (`min_prec` perhaps too, or `min_prec+pad>=0`) \n> > * compare against `min_prec+pad` rather than individually for the \"common\" case\n\n> \n> I don't care if pad is negative (I'll fix the docstring). Same with min_prec, I just pass whatever I get onto the RealField constructor which will raise a perfectly fine exception if the precision is not valid (as defined by MPFR_MIN_PREC and MPFR_MAX_PREC).\n\nIf you test for `min_prec+pad==53 and ...`, more inputs fall into the simple common case (`RR`).\n(Using `RR`, i.e. 53 bit mantissa, if the sum is *less* than 53 is perhaps not desired.)",
    "created_at": "2010-05-28T09:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72807",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@robertwb](#comment%3A18):
> Replying to [@nexttime](#comment%3A12):
> > * `min_prec` can be smaller than 53 (if specified)

> 
> Yes, but I'm not following what you're trying to say here. 
> 
> > * `pad` should be (tested to be) non-negative
> > * (`min_prec` perhaps too, or `min_prec+pad>=0`) 
> > * compare against `min_prec+pad` rather than individually for the "common" case

> 
> I don't care if pad is negative (I'll fix the docstring). Same with min_prec, I just pass whatever I get onto the RealField constructor which will raise a perfectly fine exception if the precision is not valid (as defined by MPFR_MIN_PREC and MPFR_MAX_PREC).

If you test for `min_prec+pad==53 and ...`, more inputs fall into the simple common case (`RR`).
(Using `RR`, i.e. 53 bit mantissa, if the sum is *less* than 53 is perhaps not desired.)



---

archive/issue_comments_072808.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nexttime](#comment%3A19):\n> (Using `RR`, i.e. 53 bit mantissa, if the sum is *less* than 53 is perhaps not desired.)\n> \n\nMust have been some spot on the screen that covered `min_`... ;-)\n\nOf course it's pretty ok to return `RR` in that case, too. (If someone really wants *less* precision, he can use `RealField(prec)(\"...\")` directly.)",
    "created_at": "2010-05-28T12:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72808",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nexttime](#comment%3A19):
> (Using `RR`, i.e. 53 bit mantissa, if the sum is *less* than 53 is perhaps not desired.)
> 

Must have been some spot on the screen that covered `min_`... ;-)

Of course it's pretty ok to return `RR` in that case, too. (If someone really wants *less* precision, he can use `RealField(prec)("...")` directly.)



---

archive/issue_comments_072809.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAttachment: **[8896-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket8896/8896-doctests.patch.gz)**\n\nDoctest fixes for 4.6.1.",
    "created_at": "2011-01-26T06:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72809",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:21" align="right">comment:21</div>

Attachment: **[8896-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket8896/8896-doctests.patch.gz)**

Doctest fixes for 4.6.1.



---

archive/issue_comments_072810.json:
```json
{
    "body": "Folded and rebased on 4.7. Apply only this patch.",
    "created_at": "2011-05-31T07:03:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72810",
    "user": "https://github.com/robertwb"
}
```

Folded and rebased on 4.7. Apply only this patch.



---

archive/issue_events_111672.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2011-06-06T17:38:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111672"
}
```



---

archive/issue_events_111673.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2011-06-06T17:38:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111673"
}
```



---

archive/issue_comments_072811.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAttachment: **[8896-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket8896/8896-rebased.patch.gz)**\n\nPatch fixes problem.  Ran 'make testlong'.  All tests passed.  Positive review!",
    "created_at": "2011-06-06T17:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72811",
    "user": "https://github.com/sagetrac-mariah"
}
```

<div id="comment:22" align="right">comment:22</div>

Attachment: **[8896-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket8896/8896-rebased.patch.gz)**

Patch fixes problem.  Ran 'make testlong'.  All tests passed.  Positive review!



---

archive/issue_comments_072812.json:
```json
{
    "body": "Reviewer: **Mariah Lenox**",
    "created_at": "2011-06-06T17:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72812",
    "user": "https://github.com/sagetrac-mariah"
}
```

Reviewer: **Mariah Lenox**



---

archive/issue_comments_072813.json:
```json
{
    "body": "Author: **Robert Bradshaw**",
    "created_at": "2011-06-06T17:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72813",
    "user": "https://github.com/sagetrac-mariah"
}
```

Author: **Robert Bradshaw**



---

archive/issue_comments_072814.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks!",
    "created_at": "2011-06-06T17:47:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72814",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks!



---

archive/issue_comments_072815.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,3 +17,5 @@\n Real Field with 53 bits of precision\n ```\n I consider the above inconsistency a bug.\n+\n+Apply [attachment: 8896-rebased.patch](https://github.com/sagemath/sage/files/ticket8896/8896-rebased.patch.gz)\n``````\n",
    "created_at": "2011-06-08T07:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72815",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,3 +17,5 @@
 Real Field with 53 bits of precision
 ```
 I consider the above inconsistency a bug.
+
+Apply [attachment: 8896-rebased.patch](https://github.com/sagemath/sage/files/ticket8896/8896-rebased.patch.gz)
``````




---

archive/issue_events_111674.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-08T07:32:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111674"
}
```



---

archive/issue_events_111675.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-08T07:32:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111675"
}
```



---

archive/issue_comments_072816.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nIn my opinion, this ticket is a huge can of worms and a bad idea.  I don't see any mathematically consistent reason who 0.0 **should** be treated differently than 0.0000000000000.\n\nI really think the current behaviour of Sage is what makes the most sense (mathematically) so I am not in favour of this ticket.  Of course, if the majority thinks this patch is a good idea then I'm all for it.\n\nOne thing about the patch which is very unclear is why zero is treated differently from other numbers.  Consider::\n\n```\nsage: (0.0).prec()\n53\nsage: (0.1).prec()\n53\nsage: (000000000000000000000.0).prec()\n77\nsage: (000000000000000000000.1).prec()\n53\nsage: (0.000000000000000000000).prec()\n77\nsage: (0.000000000000000000001).prec()\n53\n```",
    "created_at": "2011-06-08T07:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72816",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

In my opinion, this ticket is a huge can of worms and a bad idea.  I don't see any mathematically consistent reason who 0.0 **should** be treated differently than 0.0000000000000.

I really think the current behaviour of Sage is what makes the most sense (mathematically) so I am not in favour of this ticket.  Of course, if the majority thinks this patch is a good idea then I'm all for it.

One thing about the patch which is very unclear is why zero is treated differently from other numbers.  Consider::

```
sage: (0.0).prec()
53
sage: (0.1).prec()
53
sage: (000000000000000000000.0).prec()
77
sage: (000000000000000000000.1).prec()
53
sage: (0.000000000000000000000).prec()
77
sage: (0.000000000000000000001).prec()
53
```



---

archive/issue_comments_072817.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jdemeyer](#comment%3A25):\n> In my opinion, this ticket is a huge can of worms and a bad idea.  I don't see any mathematically consistent reason who 0.0 **should** be treated differently than 0.0000000000000.\n\nIt's exactly the same reason that 1.0 is treated differently than 1.0000000000000000000000. The (value-preserving) trailing zeros indicate higher precision. \n\n> I really think the current behaviour of Sage is what makes the most sense (mathematically) so I am not in favour of this ticket.  Of course, if the majority thinks this patch is a good idea then I'm all for it.\n> \n> One thing about the patch which is very unclear is why zero is treated differently from other numbers.  \n\nBecause otherwise there's now way to write a high-precision zero (in fact I can't think of any other interpretation of a large number of trailing zeros). \n\n> Consider::\n> \n> ```\n> sage: (0.0).prec()\n> 53\n> sage: (0.1).prec()\n> 53\n> sage: (000000000000000000000.0).prec()\n> 77\n> sage: (000000000000000000000.1).prec()\n> 53\n> sage: (0.000000000000000000000).prec()\n> 77\n> sage: (0.000000000000000000001).prec()\n> 53\n> ```",
    "created_at": "2011-06-08T15:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72817",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jdemeyer](#comment%3A25):
> In my opinion, this ticket is a huge can of worms and a bad idea.  I don't see any mathematically consistent reason who 0.0 **should** be treated differently than 0.0000000000000.

It's exactly the same reason that 1.0 is treated differently than 1.0000000000000000000000. The (value-preserving) trailing zeros indicate higher precision. 

> I really think the current behaviour of Sage is what makes the most sense (mathematically) so I am not in favour of this ticket.  Of course, if the majority thinks this patch is a good idea then I'm all for it.
> 
> One thing about the patch which is very unclear is why zero is treated differently from other numbers.  

Because otherwise there's now way to write a high-precision zero (in fact I can't think of any other interpretation of a large number of trailing zeros). 

> Consider::
> 
> ```
> sage: (0.0).prec()
> 53
> sage: (0.1).prec()
> 53
> sage: (000000000000000000000.0).prec()
> 77
> sage: (000000000000000000000.1).prec()
> 53
> sage: (0.000000000000000000000).prec()
> 77
> sage: (0.000000000000000000001).prec()
> 53
> ```



---

archive/issue_comments_072818.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAnother argument is that the BDFL suggested this change fairly strongly when opening this ticket :)\n\nMore seriously, I do have a question here.\nRobert's reasoning seems sound in the following example - we want a high-precision zero, and this is the best way to acquire it.\n\n```\n> sage: (0.000000000000000000000).prec()\n> 77\n> sage: (0.000000000000000000001).prec()\n> 53\n```\nBut I agree with Jeroen that the following seems problematic.  Didn't you say yourself (robertwb) that leading zeros *before* the decimal point shouldn't make a difference?  So in the case here maybe we should have the default precision...\n\n```\n> sage: (000000000000000000000.0).prec()\n> 77\n> sage: (000000000000000000000.1).prec()\n> 53\n```\nKeeping in mind that I have very little invested in either outcome for now, so take these only as observations.",
    "created_at": "2011-06-08T15:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72818",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:27" align="right">comment:27</div>

Another argument is that the BDFL suggested this change fairly strongly when opening this ticket :)

More seriously, I do have a question here.
Robert's reasoning seems sound in the following example - we want a high-precision zero, and this is the best way to acquire it.

```
> sage: (0.000000000000000000000).prec()
> 77
> sage: (0.000000000000000000001).prec()
> 53
```
But I agree with Jeroen that the following seems problematic.  Didn't you say yourself (robertwb) that leading zeros *before* the decimal point shouldn't make a difference?  So in the case here maybe we should have the default precision...

```
> sage: (000000000000000000000.0).prec()
> 77
> sage: (000000000000000000000.1).prec()
> 53
```
Keeping in mind that I have very little invested in either outcome for now, so take these only as observations.



---

archive/issue_comments_072819.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@robertwb](#comment%3A26):\n> Replying to [@jdemeyer](#comment%3A25):\n> > In my opinion, this ticket is a huge can of worms and a bad idea.  I don't see any mathematically consistent reason who 0.0 **should** be treated differently than 0.0000000000000.\n\n> \n> It's exactly the same reason that 1.0 is treated differently than 1.0000000000000000000000. The (value-preserving) trailing zeros indicate higher precision. \n\nIt is absolutely *not the same* because with non-zero numbers only digits **after** a non-zero digit contribute to the precision.  Indeed, `0.437` and `0.00000000000437` have exactly the same precision.\n\n> Because otherwise there's now way to write a high-precision zero (in fact I can't think of any other interpretation of a large number of trailing zeros). \n\nWell, you can always do:\n\n```\nsage: zero = RealField(1000)(0)\nsage: zero.prec()\n1000\n```\n\nAn other way to demonstrate the problem with this patch is that truncating decimal numbers (i.e. removing digits from the right) can *increase* the precision, which is very unlogical::\n\n```\nsage: (0.000000000000000000001234567890123456789).prec()\n67\nsage: (0.00000000000000000000123456789012345678).prec()\n64\nsage: (0.000000000000000000001).prec()\n53\nsage: (0.00000000000000000000).prec()\n74\n```",
    "created_at": "2011-06-08T16:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72819",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@robertwb](#comment%3A26):
> Replying to [@jdemeyer](#comment%3A25):
> > In my opinion, this ticket is a huge can of worms and a bad idea.  I don't see any mathematically consistent reason who 0.0 **should** be treated differently than 0.0000000000000.

> 
> It's exactly the same reason that 1.0 is treated differently than 1.0000000000000000000000. The (value-preserving) trailing zeros indicate higher precision. 

It is absolutely *not the same* because with non-zero numbers only digits **after** a non-zero digit contribute to the precision.  Indeed, `0.437` and `0.00000000000437` have exactly the same precision.

> Because otherwise there's now way to write a high-precision zero (in fact I can't think of any other interpretation of a large number of trailing zeros). 

Well, you can always do:

```
sage: zero = RealField(1000)(0)
sage: zero.prec()
1000
```

An other way to demonstrate the problem with this patch is that truncating decimal numbers (i.e. removing digits from the right) can *increase* the precision, which is very unlogical::

```
sage: (0.000000000000000000001234567890123456789).prec()
67
sage: (0.00000000000000000000123456789012345678).prec()
64
sage: (0.000000000000000000001).prec()
53
sage: (0.00000000000000000000).prec()
74
```



---

archive/issue_comments_072820.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@jdemeyer](#comment%3A28):\n> Replying to [@robertwb](#comment%3A26):\n> > Replying to [@jdemeyer](#comment%3A25):\n> > > In my opinion, this ticket is a huge can of worms and a bad idea.  I don't see any mathematically consistent reason who 0.0 **should** be treated differently than 0.0000000000000.\n\n> > \n> > It's exactly the same reason that 1.0 is treated differently than 1.0000000000000000000000. The (value-preserving) trailing zeros indicate higher precision. \n\n> It is absolutely *not the same* because with non-zero numbers only digits **after** a non-zero digit contribute to the precision.  Indeed, `0.437` and `0.00000000000437` have exactly the same precision.\n\nThis hinges on the ambiguity of the term \"trialing zero.\" Sage interprets trailing zeros after the decimal point as additional precision. To me, trailing zeros are those that are not followed by a non-zero digit, to you trailing zeros must also follow a non-zero digit. \n\n> > Because otherwise there's now way to write a high-precision zero (in fact I can't think of any other interpretation of a large number of trailing zeros). \n\n> Well, you can always do:\n> \n> ```\n> sage: zero = RealField(1000)(0)\n> sage: zero.prec()\n> 1000\n> ```\n\nYeah, but that's a pain, but to me the fact that 0.00000000000000000000000000000000 is not high precision is more surprising, as it has many significant digits. \n\n> An other way to demonstrate the problem with this patch is that truncating decimal numbers (i.e. removing digits from the right) can *increase* the precision, which is very unlogical::\n> \n> ```\n> sage: (0.000000000000000000001234567890123456789).prec()\n> 67\n> sage: (0.00000000000000000000123456789012345678).prec()\n> 64\n> sage: (0.000000000000000000001).prec()\n> 53\n> sage: (0.00000000000000000000).prec()\n> 74\n> ```\n\nIt also changes the relative value by a huge amount :) \n\nIs it worth taking this discussion to sage-devel?",
    "created_at": "2011-06-08T16:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72820",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@jdemeyer](#comment%3A28):
> Replying to [@robertwb](#comment%3A26):
> > Replying to [@jdemeyer](#comment%3A25):
> > > In my opinion, this ticket is a huge can of worms and a bad idea.  I don't see any mathematically consistent reason who 0.0 **should** be treated differently than 0.0000000000000.

> > 
> > It's exactly the same reason that 1.0 is treated differently than 1.0000000000000000000000. The (value-preserving) trailing zeros indicate higher precision. 

> It is absolutely *not the same* because with non-zero numbers only digits **after** a non-zero digit contribute to the precision.  Indeed, `0.437` and `0.00000000000437` have exactly the same precision.

This hinges on the ambiguity of the term "trialing zero." Sage interprets trailing zeros after the decimal point as additional precision. To me, trailing zeros are those that are not followed by a non-zero digit, to you trailing zeros must also follow a non-zero digit. 

> > Because otherwise there's now way to write a high-precision zero (in fact I can't think of any other interpretation of a large number of trailing zeros). 

> Well, you can always do:
> 
> ```
> sage: zero = RealField(1000)(0)
> sage: zero.prec()
> 1000
> ```

Yeah, but that's a pain, but to me the fact that 0.00000000000000000000000000000000 is not high precision is more surprising, as it has many significant digits. 

> An other way to demonstrate the problem with this patch is that truncating decimal numbers (i.e. removing digits from the right) can *increase* the precision, which is very unlogical::
> 
> ```
> sage: (0.000000000000000000001234567890123456789).prec()
> 67
> sage: (0.00000000000000000000123456789012345678).prec()
> 64
> sage: (0.000000000000000000001).prec()
> 53
> sage: (0.00000000000000000000).prec()
> 74
> ```

It also changes the relative value by a huge amount :) 

Is it worth taking this discussion to sage-devel?



---

archive/issue_comments_072821.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@robertwb](#comment%3A29):\n> to me the fact that 0.00000000000000000000000000000000 is not high precision is more surprising, as it has many significant digits.\n\nI would say that it does have a lot of *digits* but that none of them is a *significant digit*.",
    "created_at": "2011-06-08T19:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72821",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@robertwb](#comment%3A29):
> to me the fact that 0.00000000000000000000000000000000 is not high precision is more surprising, as it has many significant digits.

I would say that it does have a lot of *digits* but that none of them is a *significant digit*.



---

archive/issue_events_111676.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-02T19:32:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111676"
}
```



---

archive/issue_events_111677.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-02T19:32:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8896#event-111677"
}
```



---

archive/issue_comments_072822.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-In Sage 0.0 and 0.00000000000000000000000000000000000000 should not denote the same thing, though sadly they do.  Note, however, that 1.0 and 1.00000000000000000000000000000000000000 are different in Sage (as I expect):\n+In Sage 0.0 and 0.00000000000000000000000000000000000000 denote exactly the same thing (a zero with the same precision).  However, that 1.0 and 1.00000000000000000000000000000000000000 are different in Sage:\n \n ```\n sage: 0.0\n@@ -16,6 +16,8 @@\n sage: parent(1.0)\n Real Field with 53 bits of precision\n ```\n-I consider the above inconsistency a bug.\n+\n+Some people consider the above inconsistency a bug.\n+See the discussion below and at [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/73d513e2c55d4601).\n \n Apply [attachment: 8896-rebased.patch](https://github.com/sagemath/sage/files/ticket8896/8896-rebased.patch.gz)\n``````\n",
    "created_at": "2011-08-02T19:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72822",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-In Sage 0.0 and 0.00000000000000000000000000000000000000 should not denote the same thing, though sadly they do.  Note, however, that 1.0 and 1.00000000000000000000000000000000000000 are different in Sage (as I expect):
+In Sage 0.0 and 0.00000000000000000000000000000000000000 denote exactly the same thing (a zero with the same precision).  However, that 1.0 and 1.00000000000000000000000000000000000000 are different in Sage:
 
 ```
 sage: 0.0
@@ -16,6 +16,8 @@
 sage: parent(1.0)
 Real Field with 53 bits of precision
 ```
-I consider the above inconsistency a bug.
+
+Some people consider the above inconsistency a bug.
+See the discussion below and at [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/73d513e2c55d4601).
 
 Apply [attachment: 8896-rebased.patch](https://github.com/sagemath/sage/files/ticket8896/8896-rebased.patch.gz)
``````




---

archive/issue_comments_072823.json:
```json
{
    "body": "Changed keywords from none to **sd32**",
    "created_at": "2011-08-24T23:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8896#issuecomment-72823",
    "user": "https://github.com/williamstein"
}
```

Changed keywords from none to **sd32**
