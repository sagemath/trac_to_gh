# Issue 8609: Switch AmbientSpace and Scheme to Parent

archive/issues_008609.json:
```json
{
    "body": "The patch switches AmbientSpace and Scheme to inherit from Parent rather than old-style classes. I used to get random segfaults in \"sage -testall\" with this patch applied, but with 4.3.3 it seems to be smooth and in anyway the patch is very simple and should not introduce new bugs.\n\nTo \"fix\" broken doctests because of the missing list() method I have just removed them, since they were in functions not directly related to list() anyway.\n\n**Assignee:** @aghitza\n\n**Author:** Andrey Novoseltsev\n\n**Reviewer:** John Cremona\n\n**Merged:** sage-4.4.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/8609\n\n",
    "closed_at": "2010-04-16T18:52:33Z",
    "created_at": "2010-03-25T22:39:30Z",
    "labels": [
        "component: algebraic geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.4",
    "title": "Switch AmbientSpace and Scheme to Parent",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/8609",
    "user": "https://github.com/novoselt"
}
```
The patch switches AmbientSpace and Scheme to inherit from Parent rather than old-style classes. I used to get random segfaults in "sage -testall" with this patch applied, but with 4.3.3 it seems to be smooth and in anyway the patch is very simple and should not introduce new bugs.

To "fix" broken doctests because of the missing list() method I have just removed them, since they were in functions not directly related to list() anyway.

**Assignee:** @aghitza

**Author:** Andrey Novoseltsev

**Reviewer:** John Cremona

**Merged:** sage-4.4.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/8609





---

archive/issue_events_061320.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-03-25T22:52:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8609#event-61320"
}
```



---

archive/issue_comments_070692.json:
```json
{
    "body": "**Author:** Andrey Novoseltsev",
    "created_at": "2010-03-25T22:52:48Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8609#issuecomment-70692",
    "user": "https://github.com/novoselt"
}
```

**Author:** Andrey Novoseltsev



---

archive/attachments_010748.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_8609_switch_ambient_space_and_scheme_to_parent.patch",
    "asset_url": "tarball://root/attachments/ticket8609/trac_8609_switch_ambient_space_and_scheme_to_parent.patch",
    "created_at": "2010-03-25T22:52:48Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket8609/trac_8609_switch_ambient_space_and_scheme_to_parent.patch",
    "user": "https://github.com/novoselt"
}
```



---

archive/issue_comments_070693.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [trac_8609_switch_ambient_space_and_scheme_to_parent.patch](https://github.com/sagemath/sage/files/ticket8609/trac_8609_switch_ambient_space_and_scheme_to_parent.patch) by @novoselt created at 2010-03-25 22:52:48",
    "created_at": "2010-03-25T22:52:48Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8609#issuecomment-70693",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:1'></a>
Attachment [trac_8609_switch_ambient_space_and_scheme_to_parent.patch](https://github.com/sagemath/sage/files/ticket8609/trac_8609_switch_ambient_space_and_scheme_to_parent.patch) by @novoselt created at 2010-03-25 22:52:48



---

archive/issue_events_061321.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-02T15:20:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8609#event-61321"
}
```



---

archive/issue_events_061322.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-02T15:20:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8609#event-61322"
}
```



---

archive/issue_comments_070694.json:
```json
{
    "body": "<a id='comment:2'></a>\nPatch applies fine to 4.3.5.  Testing all and will report back....\n\nAndrey, what exactly is the motivation for this?  I see no harm in it, but you must have had a reason for making the change!",
    "created_at": "2010-04-02T15:20:24Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8609#issuecomment-70694",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:2'></a>
Patch applies fine to 4.3.5.  Testing all and will report back....

Andrey, what exactly is the motivation for this?  I see no harm in it, but you must have had a reason for making the change!



---

archive/issue_comments_070695.json:
```json
{
    "body": "<a id='comment:3'></a>\nAll tests pass.  I'll give this a positive review as soon as I know the reason for it!",
    "created_at": "2010-04-02T15:34:59Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8609#issuecomment-70695",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'></a>
All tests pass.  I'll give this a positive review as soon as I know the reason for it!



---

archive/issue_events_061323.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-04-02T15:44:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8609#event-61323"
}
```



---

archive/issue_events_061324.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-04-02T15:44:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8609#event-61324"
}
```



---

archive/issue_comments_070696.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [cremona](#comment%3A2):\n> Patch applies fine to 4.3.5.  Testing all and will report back....\n> \n> Andrey, what exactly is the motivation for this?  I see no harm in it, but you must have had a reason for making the change!\n\n\nYeah, I should have probably explained it better. I am working on support for (Fano) toric varieties and Calabi-Yau hypersurfaces/complete intersections inside (with a hope to finish by this summer). So when I was going over schemes/general to figure out what is already there and what do I need to do to fit nicely into existing framework, I got this question:\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/ddb9f2c592082c02/4120466d01cacae0#4120466d01cacae0\nand wrote the patch. It took me a while to post it due to those Segfaults that ALWAYS were appearing with the patch during non-parallel testing, although in different/unrelated places. Now I did manage to get at least one clean run and think that it should go in. After all, as I understand it, if this patch causes problems, it is because it exposes some deeper bugs in Sage and it actually can be nice if they become more visible...\n\nI also wanted to make the following change (I don't have a ready-to-review patch for this one, but can make one quickly), but nobody got interested in discussing it and I don't think such changes should happen silently:\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/1279e373341da951/e0efa737426d5b19#e0efa737426d5b19\n\nThank you!",
    "created_at": "2010-04-02T15:44:37Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8609#issuecomment-70696",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>
Replying to [cremona](#comment%3A2):
> Patch applies fine to 4.3.5.  Testing all and will report back....
> 
> Andrey, what exactly is the motivation for this?  I see no harm in it, but you must have had a reason for making the change!


Yeah, I should have probably explained it better. I am working on support for (Fano) toric varieties and Calabi-Yau hypersurfaces/complete intersections inside (with a hope to finish by this summer). So when I was going over schemes/general to figure out what is already there and what do I need to do to fit nicely into existing framework, I got this question:
http://groups.google.com/group/sage-devel/browse_thread/thread/ddb9f2c592082c02/4120466d01cacae0#4120466d01cacae0
and wrote the patch. It took me a while to post it due to those Segfaults that ALWAYS were appearing with the patch during non-parallel testing, although in different/unrelated places. Now I did manage to get at least one clean run and think that it should go in. After all, as I understand it, if this patch causes problems, it is because it exposes some deeper bugs in Sage and it actually can be nice if they become more visible...

I also wanted to make the following change (I don't have a ready-to-review patch for this one, but can make one quickly), but nobody got interested in discussing it and I don't think such changes should happen silently:
http://groups.google.com/group/sage-devel/browse_thread/thread/1279e373341da951/e0efa737426d5b19#e0efa737426d5b19

Thank you!



---

archive/issue_events_061325.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-05T15:03:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8609#event-61325"
}
```



---

archive/issue_events_061326.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-05T15:03:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8609#event-61326"
}
```



---

archive/issue_comments_070697.json:
```json
{
    "body": "**Reviewer:** John Cremona",
    "created_at": "2010-04-05T15:03:10Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8609#issuecomment-70697",
    "user": "https://github.com/JohnCremona"
}
```

**Reviewer:** John Cremona



---

archive/issue_comments_070698.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks for the explanation -- and sorry for delay, I did not get a message from trac to say that you had replied.  Anyway -- positive review.",
    "created_at": "2010-04-05T15:03:10Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8609#issuecomment-70698",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>
Thanks for the explanation -- and sorry for delay, I did not get a message from trac to say that you had replied.  Anyway -- positive review.



---

archive/issue_events_061327.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T18:52:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8609#event-61327"
}
```



---

archive/issue_events_061328.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T18:52:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8609#event-61328"
}
```



---

archive/issue_comments_070699.json:
```json
{
    "body": "<a id='comment:6'></a>\nMerged \"trac_8609_switch_ambient_space_and_scheme_to_parent.patch\" in 4.4.alpha0",
    "created_at": "2010-04-16T18:52:33Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8609#issuecomment-70699",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Merged "trac_8609_switch_ambient_space_and_scheme_to_parent.patch" in 4.4.alpha0



---

archive/issue_comments_070700.json:
```json
{
    "body": "**Merged:** sage-4.4.alpha0",
    "created_at": "2010-04-16T18:52:33Z",
    "issue": "https://github.com/sagemath/sage/issues/8609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8609#issuecomment-70700",
    "user": "https://github.com/jhpalmieri"
}
```

**Merged:** sage-4.4.alpha0
