# Issue 8149: files with space in their names do not load properly

archive/issues_008149.json:
```json
{
    "assignees": [],
    "body": "Thanks to the load/attach rewrite most of the weirdness is gone. My only issue left is that files with space in their names somehow only work with the depreciated style of calling load. This behavior is the same in prompt and notebook.\n\n```\nsage: t=tmp_filename()+' space.py'; open(t,'w').write(\"print 'hello world'\")\nsage: load t\nhello world\nsage: load(t)\n---------------------------------------------------------------------------\nValueError  \n```\n\nI should be able to fix this soon, as probably it is a minor tweak, but if anyone wants to go ahead...\n\nReviewer: **Jeroen Demeyer**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8149_\n\n",
    "closed_at": "2015-03-25T19:21:10Z",
    "created_at": "2010-02-02T07:30:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "files with space in their names do not load properly",
    "type": "issue",
    "updated_at": "2015-03-25T19:21:10Z",
    "url": "https://github.com/sagemath/sage/issues/8149",
    "user": "https://github.com/rkirov"
}
```
Thanks to the load/attach rewrite most of the weirdness is gone. My only issue left is that files with space in their names somehow only work with the depreciated style of calling load. This behavior is the same in prompt and notebook.

```
sage: t=tmp_filename()+' space.py'; open(t,'w').write("print 'hello world'")
sage: load t
hello world
sage: load(t)
---------------------------------------------------------------------------
ValueError  
```

I should be able to fix this soon, as probably it is a minor tweak, but if anyone wants to go ahead...

Reviewer: **Jeroen Demeyer**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/8149_





---

archive/issue_events_101796.json:
```json
{
    "actor": "https://github.com/rkirov",
    "created_at": "2010-02-02T07:30:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101796"
}
```



---

archive/issue_events_101797.json:
```json
{
    "actor": "https://github.com/rkirov",
    "created_at": "2010-02-02T07:30:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101797"
}
```



---

archive/issue_events_101798.json:
```json
{
    "actor": "https://github.com/rkirov",
    "created_at": "2010-02-02T07:30:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101798"
}
```



---

archive/issue_comments_062892.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nok, the culprit is in sage.misc.preparser.load \n\n```\n    try:\n        filename = eval(filename, globals)\n    except Exception:\n        # handle multiple input files separated by spaces, which was\n        # maybe a bad idea, but which we have to handle for backwards\n        # compatibility.\n        v = filename.split()\n        if len(v) > 1:\n            for file in v:\n                load(file, globals, attach=attach)\n            return\n```\n\nso I guess any fix for files with spacebars will break the backwards compatibility :/ Maybe for Sage 4 we can go away with backwards compatibility on this issue (also maybe remove 'eval'). The new load() already has capabilities of loading multiple files. Consider \n\n1) load('file1.py file2.py')\n2) load('file1.py','file2.py')\n\n2) looks more pythonic to me.",
    "created_at": "2010-02-26T07:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8149#issuecomment-62892",
    "user": "https://github.com/rkirov"
}
```

<div id="comment:1" align="right">comment:1</div>

ok, the culprit is in sage.misc.preparser.load 

```
    try:
        filename = eval(filename, globals)
    except Exception:
        # handle multiple input files separated by spaces, which was
        # maybe a bad idea, but which we have to handle for backwards
        # compatibility.
        v = filename.split()
        if len(v) > 1:
            for file in v:
                load(file, globals, attach=attach)
            return
```

so I guess any fix for files with spacebars will break the backwards compatibility :/ Maybe for Sage 4 we can go away with backwards compatibility on this issue (also maybe remove 'eval'). The new load() already has capabilities of loading multiple files. Consider 

1) load('file1.py file2.py')
2) load('file1.py','file2.py')

2) looks more pythonic to me.



---

archive/issue_events_101799.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101799"
}
```



---

archive/issue_events_101800.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101800"
}
```



---

archive/issue_events_101801.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101801"
}
```



---

archive/issue_events_101802.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101802"
}
```



---

archive/issue_events_101803.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101803"
}
```



---

archive/issue_events_101804.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101804"
}
```



---

archive/issue_events_101805.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101805"
}
```



---

archive/issue_events_101806.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101806"
}
```



---

archive/issue_comments_062893.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2015-03-25T16:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8149#issuecomment-62893",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_101807.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T16:28:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101807"
}
```



---

archive/issue_comments_062894.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis works correctly now (with a doctest in `src/sage/repl/load.py`)",
    "created_at": "2015-03-25T16:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8149#issuecomment-62894",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

This works correctly now (with a doctest in `src/sage/repl/load.py`)



---

archive/issue_events_101808.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T16:28:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101808"
}
```



---

archive/issue_events_101809.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T16:28:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101809"
}
```



---

archive/issue_events_101810.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T16:28:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "c6c6c6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101810"
}
```



---

archive/issue_events_101811.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T16:28:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101811"
}
```



---

archive/issue_events_101812.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T16:28:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101812"
}
```



---

archive/issue_events_101813.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-25T19:21:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101813"
}
```



---

archive/issue_events_101814.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-25T19:21:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8149",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8149#event-101814"
}
```
