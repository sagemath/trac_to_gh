# Issue 8603: Partial sums are off for Fourier series of piecewise functions

archive/issues_008603.json:
```json
{
    "assignees": [],
    "body": "Doing\n\n```\nf = Piecewise([[(-pi, pi), x]])\nprint f.fourier_series_partial_sum(2, pi)\nprint f.fourier_series_partial_sum(3, pi)\n```\nwe get\n\n```\n2*sin(x)\n-sin(2*x) + 2*sin(x)\n```\nwhile according to the documentation we should get the second output with the first command.\n\nUpdate: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?\n\nUPDATE: this is fixed in Sage 8.1 (see #23672):\n\n```\nsage: f = piecewise([[(-pi, pi), x]])\nsage: f.fourier_series_partial_sum(2, pi)\n-sin(2*x) + 2*sin(x)\n```\n\n\nDepends on #14801\n\n**Assignee:** @burcin\n\n**CC:**  @wdjoyner @jasongrout @jondo @kcrisman @vbraun @slel @mkoeppe @eviatarbach @rwst @novoselt\n\n**Keywords:** sd31\n\n**Work Issues:** other instances of the typo\n\n**Author:** David Joyner\n\nIssue created by migration from https://trac.sagemath.org/ticket/8603\n\n",
    "closed_at": "2017-12-12T08:23:33Z",
    "created_at": "2010-03-25T04:06:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20calculus",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Partial sums are off for Fourier series of piecewise functions",
    "type": "issue",
    "updated_at": "2017-12-12T19:16:22Z",
    "url": "https://github.com/sagemath/sage/issues/8603",
    "user": "https://github.com/novoselt"
}
```
Doing

```
f = Piecewise([[(-pi, pi), x]])
print f.fourier_series_partial_sum(2, pi)
print f.fourier_series_partial_sum(3, pi)
```
we get

```
2*sin(x)
-sin(2*x) + 2*sin(x)
```
while according to the documentation we should get the second output with the first command.

Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?

UPDATE: this is fixed in Sage 8.1 (see #23672):

```
sage: f = piecewise([[(-pi, pi), x]])
sage: f.fourier_series_partial_sum(2, pi)
-sin(2*x) + 2*sin(x)
```


Depends on #14801

**Assignee:** @burcin

**CC:**  @wdjoyner @jasongrout @jondo @kcrisman @vbraun @slel @mkoeppe @eviatarbach @rwst @novoselt

**Keywords:** sd31

**Work Issues:** other instances of the typo

**Author:** David Joyner

Issue created by migration from https://trac.sagemath.org/ticket/8603





---

archive/issue_events_061255.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-03-14T20:25:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61255"
}
```



---

archive/issue_comments_070641.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis is still true, and syntax is also deprecated.\n\n```\n\nsage: f = Piecewise([[(-pi, pi), x]])\nsage: print f.fourier_series_partial_sum(2, pi)\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/functions/piecewise.py:1095: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\n  a0 = self.fourier_series_cosine_coefficient(0,L)\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/functions/piecewise.py:1099: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\n  for n in srange(1,N)])\n2*sin(x)\nsage: print f.fourier_series_partial_sum(3, pi)\n-sin(2*x) + 2*sin(x)\n```",
    "created_at": "2011-03-14T20:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70641",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
This is still true, and syntax is also deprecated.

```

sage: f = Piecewise([[(-pi, pi), x]])
sage: print f.fourier_series_partial_sum(2, pi)
/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/functions/piecewise.py:1095: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
  a0 = self.fourier_series_cosine_coefficient(0,L)
/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/functions/piecewise.py:1099: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
  for n in srange(1,N)])
2*sin(x)
sage: print f.fourier_series_partial_sum(3, pi)
-sin(2*x) + 2*sin(x)
```



---

archive/issue_comments_070642.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd31\".",
    "created_at": "2011-06-18T00:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70642",
    "user": "https://github.com/novoselt"
}
```

**Changing keywords** from "" to "sd31".



---

archive/issue_comments_070643.json:
```json
{
    "body": "<a id='comment:2'></a>\nOn a related note: what is the purpose of `plot` methods for Fourier partial sums? They don't do anything except for passing arguments to the usual global `plot` function, so they seem redundant to me and perhaps can be removed (after deprecation period).",
    "created_at": "2011-06-18T00:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70643",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>
On a related note: what is the purpose of `plot` methods for Fourier partial sums? They don't do anything except for passing arguments to the usual global `plot` function, so they seem redundant to me and perhaps can be removed (after deprecation period).



---

archive/issue_comments_070644.json:
```json
{
    "body": "<a id='comment:3'></a>\nYou may be right.  I'd have to look at it.  Remember, these are all *really* old, so they probably at the time bypassed the non-existent 'plot' function, and then were subsequently changed, perhaps.",
    "created_at": "2011-06-18T00:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70644",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
You may be right.  I'd have to look at it.  Remember, these are all *really* old, so they probably at the time bypassed the non-existent 'plot' function, and then were subsequently changed, perhaps.



---

archive/issue_comments_070645.json:
```json
{
    "body": "one line change in docstring",
    "created_at": "2011-06-18T10:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70645",
    "user": "https://github.com/wdjoyner"
}
```

one line change in docstring



---

archive/issue_events_061256.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-06-18T10:46:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61256"
}
```



---

archive/issue_comments_070646.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Attachment:** [trac_8603-fourier-sum-docstring.patch.gz](https://github.com/sagemath/sage/files/ticket8603/trac_8603-fourier-sum-docstring.patch.gz)\n\nThis fixes the documentation of fourier_series_partial_sum, replacing\n\n```\n f(x) \\sim \\frac{a_0}{2} + \\sum_{n=1}^N [a_n\\cos(\\frac{n\\pi x}{L}) +\nb_n\\sin(\\frac{n\\pi x}{L})],\n```\nby\n\n```\n f(x) \\sim \\frac{a_0}{2} + \\sum_{n=1}^{N-1} [a_n\\cos(\\frac{n\\pi x}{L})\n+ b_n\\sin(\\frac{n\\pi x}{L})],\n```",
    "created_at": "2011-06-18T10:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70646",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:4'></a>
**Attachment:** [trac_8603-fourier-sum-docstring.patch.gz](https://github.com/sagemath/sage/files/ticket8603/trac_8603-fourier-sum-docstring.patch.gz)

This fixes the documentation of fourier_series_partial_sum, replacing

```
 f(x) \sim \frac{a_0}{2} + \sum_{n=1}^N [a_n\cos(\frac{n\pi x}{L}) +
b_n\sin(\frac{n\pi x}{L})],
```
by

```
 f(x) \sim \frac{a_0}{2} + \sum_{n=1}^{N-1} [a_n\cos(\frac{n\pi x}{L})
+ b_n\sin(\frac{n\pi x}{L})],
```



---

archive/issue_comments_070647.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks, David; I don't have time to review this now, but appreciate it.  \n\nAndrey and I were discussing this at Sage Days 31, and thought that maybe changing the behavior instead to match Taylor series would be good, but if this was in fact what you had intended all along, then this solution is better.",
    "created_at": "2011-06-19T01:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70647",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
Thanks, David; I don't have time to review this now, but appreciate it.  

Andrey and I were discussing this at Sage Days 31, and thought that maybe changing the behavior instead to match Taylor series would be good, but if this was in fact what you had intended all along, then this solution is better.



---

archive/issue_comments_070648.json:
```json
{
    "body": "**Author:** David Joyner",
    "created_at": "2011-06-19T01:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70648",
    "user": "https://github.com/kcrisman"
}
```

**Author:** David Joyner



---

archive/issue_comments_070649.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [@kcrisman](#comment%3A5):\n> Thanks, David; I don't have time to review this now, but appreciate it.  \n> \n> Andrey and I were discussing this at Sage Days 31, and thought that maybe changing the behavior instead to match Taylor series would be good, but if this was in fact what you had intended all along, then this solution is better. \n\nThe `.series()` method of symbolic expressions cut off in a pythonic way, like David's change here. If `.taylor()` does something different we should change it.\n\nThis is a trivial change. I'd be happy to give a positive review if it passes all tests but the patch bot doesn't seem to be working for some reason.",
    "created_at": "2011-06-19T02:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70649",
    "user": "https://github.com/burcin"
}
```

<a id='comment:6'></a>
Replying to [@kcrisman](#comment%3A5):
> Thanks, David; I don't have time to review this now, but appreciate it.  
> 
> Andrey and I were discussing this at Sage Days 31, and thought that maybe changing the behavior instead to match Taylor series would be good, but if this was in fact what you had intended all along, then this solution is better. 

The `.series()` method of symbolic expressions cut off in a pythonic way, like David's change here. If `.taylor()` does something different we should change it.

This is a trivial change. I'd be happy to give a positive review if it passes all tests but the patch bot doesn't seem to be working for some reason.



---

archive/issue_events_061257.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-06-21T17:48:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61257"
}
```



---

archive/issue_events_061258.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-06-21T17:48:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61258"
}
```



---

archive/issue_comments_070650.json:
```json
{
    "body": "<a id='comment:7'></a>\nThere are more instances of the same typo in other functions of this module, let's fix them all at once!-)\n\nDavid, do you agree that plot methods can be eliminated as they are not really doing anything?",
    "created_at": "2011-06-21T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70650",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>
There are more instances of the same typo in other functions of this module, let's fix them all at once!-)

David, do you agree that plot methods can be eliminated as they are not really doing anything?



---

archive/issue_comments_070651.json:
```json
{
    "body": "**Work Issues:** other instances of the typo",
    "created_at": "2011-06-21T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70651",
    "user": "https://github.com/novoselt"
}
```

**Work Issues:** other instances of the typo



---

archive/issue_comments_070652.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [@novoselt](#comment%3A7):\n> There are more instances of the same typo in other functions of this module, let's fix them all at once!-)\n\nCan you be more specific?\n> David, do you agree that plot methods can be eliminated as they are not really doing anything?\n\nI think I looked at this at Sage Days 31, but now I forgot whether that statement is true.",
    "created_at": "2011-08-15T14:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70652",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>
Replying to [@novoselt](#comment%3A7):
> There are more instances of the same typo in other functions of this module, let's fix them all at once!-)

Can you be more specific?
> David, do you agree that plot methods can be eliminated as they are not really doing anything?

I think I looked at this at Sage Days 31, but now I forgot whether that statement is true.



---

archive/issue_events_061259.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61259"
}
```



---

archive/issue_events_061260.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61260"
}
```



---

archive/issue_events_061261.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61261"
}
```



---

archive/issue_events_061262.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61262"
}
```



---

archive/issue_comments_070653.json:
```json
{
    "body": "**Dependencies:** #14801",
    "created_at": "2014-02-23T13:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70653",
    "user": "https://github.com/ppurka"
}
```

**Dependencies:** #14801



---

archive/issue_events_061263.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61263"
}
```



---

archive/issue_events_061264.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61264"
}
```



---

archive/issue_events_061265.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61265"
}
```



---

archive/issue_events_061266.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61266"
}
```



---

archive/issue_events_061267.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T03:31:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61267"
}
```



---

archive/issue_events_061268.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T03:31:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61268"
}
```



---

archive/issue_comments_070654.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,4 +13,5 @@\n ```\n while according to the documentation we should get the second output with the first command.\n \n+Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?\n \n``````\n",
    "created_at": "2016-06-27T03:31:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70654",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,4 +13,5 @@
 ```
 while according to the documentation we should get the second output with the first command.
 
+Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?
 
``````




---

archive/issue_comments_070655.json:
```json
{
    "body": "<a id='comment:14'></a>\nUpdated with information regarding the new `piecewise` implementation from #14801.",
    "created_at": "2016-06-27T03:31:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70655",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Updated with information regarding the new `piecewise` implementation from #14801.



---

archive/issue_events_061269.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T03:31:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61269"
}
```



---

archive/issue_events_061270.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T03:31:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61270"
}
```



---

archive/issue_comments_070656.json:
```json
{
    "body": "<a id='comment:15'></a>\nThis is fixed by #23672.\n\nRegarding the example in the ticket description, in Sage 8.1.beta4, we have now\n\n```\nsage: f = piecewise([[(-pi, pi), x]])\nsage: f.fourier_series_partial_sum(2, pi)\n-sin(2*x) + 2*sin(x)\n```\nWe even have, since the half-period is now a default argument,\n\n```\nsage: f.fourier_series_partial_sum(2)\n-sin(2*x) + 2*sin(x)\n```",
    "created_at": "2017-09-07T12:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70656",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:15'></a>
This is fixed by #23672.

Regarding the example in the ticket description, in Sage 8.1.beta4, we have now

```
sage: f = piecewise([[(-pi, pi), x]])
sage: f.fourier_series_partial_sum(2, pi)
-sin(2*x) + 2*sin(x)
```
We even have, since the half-period is now a default argument,

```
sage: f.fourier_series_partial_sum(2)
-sin(2*x) + 2*sin(x)
```



---

archive/issue_events_061271.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-09-07T12:01:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61271"
}
```



---

archive/issue_events_061272.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-09-07T12:01:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61272"
}
```



---

archive/issue_events_061273.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-09-07T12:01:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61273"
}
```



---

archive/issue_comments_070657.json:
```json
{
    "body": "<a id='comment:16'></a>\nExcellent.  Is this documented via a test?",
    "created_at": "2017-09-07T14:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70657",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'></a>
Excellent.  Is this documented via a test?



---

archive/issue_events_061274.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-09-07T14:33:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61274"
}
```



---

archive/issue_events_061275.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-09-07T14:33:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61275"
}
```



---

archive/issue_comments_070658.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [@kcrisman](#comment%3A16):\n> Excellent.  Is this documented via a test?\n\nYes this is documented, both in [Sage Reference Manual](http://doc.sagemath.org/html/en/reference/) and in [Sage Constructions](http://doc.sagemath.org/html/en/constructions/), see [here](https://github.com/sagemath/sagetrac-mirror/commit/ddeef52c783ef2f87c21b4b26e4410ace5007f02).",
    "created_at": "2017-09-07T14:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70658",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:18'></a>
Replying to [@kcrisman](#comment%3A16):
> Excellent.  Is this documented via a test?

Yes this is documented, both in [Sage Reference Manual](http://doc.sagemath.org/html/en/reference/) and in [Sage Constructions](http://doc.sagemath.org/html/en/constructions/), see [here](https://github.com/sagemath/sagetrac-mirror/commit/ddeef52c783ef2f87c21b4b26e4410ace5007f02).



---

archive/issue_comments_070659.json:
```json
{
    "body": "<a id='comment:19'></a>\nSweet.  Strange that it didn't cause any doctest errors then?  If it didn't, we should make sure to include at least two of the examples on the ticket in the doc *somewhere*.",
    "created_at": "2017-09-07T17:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70659",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>
Sweet.  Strange that it didn't cause any doctest errors then?  If it didn't, we should make sure to include at least two of the examples on the ticket in the doc *somewhere*.



---

archive/issue_events_061276.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-09-07T17:30:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61276"
}
```



---

archive/issue_events_061277.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-09-07T17:30:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61277"
}
```



---

archive/issue_comments_070660.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [@kcrisman](#comment%3A19):\n> Sweet.  Strange that it didn't cause any doctest errors then?  If it didn't, we should make sure to include at least two of the examples on the ticket in the doc *somewhere*.\n\nI am not sure to understand what you mean. In the current version, as integrated in Sage 8.1.beta4, there are doctests like\n\n```\nsage: f = piecewise([((-1,0), -1), ((0,1), 1)])\nsage: f.fourier_series_partial_sum(5)\n4/5*sin(5*pi*x)/pi + 4/3*sin(3*pi*x)/pi + 4*sin(pi*x)/pi\n```\nIn Sage <= 8.0, this would have returned (*)\n\n```\n4/3*sin(3*pi*x)/pi + 4*sin(pi*x)/pi\n```\n\n(*) with the half-period added as the second argument, i.e. `f.fourier_series_partial_sum(5, 1)`)",
    "created_at": "2017-09-07T19:30:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70660",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:20'></a>
Replying to [@kcrisman](#comment%3A19):
> Sweet.  Strange that it didn't cause any doctest errors then?  If it didn't, we should make sure to include at least two of the examples on the ticket in the doc *somewhere*.

I am not sure to understand what you mean. In the current version, as integrated in Sage 8.1.beta4, there are doctests like

```
sage: f = piecewise([((-1,0), -1), ((0,1), 1)])
sage: f.fourier_series_partial_sum(5)
4/5*sin(5*pi*x)/pi + 4/3*sin(3*pi*x)/pi + 4*sin(pi*x)/pi
```
In Sage <= 8.0, this would have returned (*)

```
4/3*sin(3*pi*x)/pi + 4*sin(pi*x)/pi
```

(*) with the half-period added as the second argument, i.e. `f.fourier_series_partial_sum(5, 1)`)



---

archive/issue_comments_070661.json:
```json
{
    "body": "<a id='comment:21'></a>\nMy concern was just that the *correct* nature was doctested, not the wrong one, and that we really did have that to test against regression at some point.  Good!",
    "created_at": "2017-09-07T21:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70661",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>
My concern was just that the *correct* nature was doctested, not the wrong one, and that we really did have that to test against regression at some point.  Good!



---

archive/issue_events_061278.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61278"
}
```



---

archive/issue_events_061279.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61279"
}
```



---

archive/issue_events_061280.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "008080",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61280"
}
```



---

archive/issue_comments_070662.json:
```json
{
    "body": "<a id='comment:23'></a>\nI wonder why \"wontfix\" since the issue is fixed in 8.1.beta4.\nPaul",
    "created_at": "2017-12-12T13:27:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70662",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:23'></a>
I wonder why "wontfix" since the issue is fixed in 8.1.beta4.
Paul



---

archive/issue_comments_070663.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [@zimmermann6](#comment%3A23):\n> I wonder why \"wontfix\" since the issue is fixed in 8.1.beta4.\n> Paul\n\nActually, as said in [comment:15](#comment%3A15), the issue is fixed in another ticket: #23672, hence the \"sage-duplicate/invalid/wontfix\" milestone for the current one and the \"wonfix\" resolution.",
    "created_at": "2017-12-12T13:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70663",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:24'></a>
Replying to [@zimmermann6](#comment%3A23):
> I wonder why "wontfix" since the issue is fixed in 8.1.beta4.
> Paul

Actually, as said in [comment:15](#comment%3A15), the issue is fixed in another ticket: #23672, hence the "sage-duplicate/invalid/wontfix" milestone for the current one and the "wonfix" resolution.



---

archive/issue_comments_070664.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,3 +15,11 @@\n \n Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?\n \n+UPDATE: this is fixed in Sage 8.1 (see #23672):\n+\n+```\n+sage: f = piecewise([[(-pi, pi), x]])\n+sage: f.fourier_series_partial_sum(2, pi)\n+-sin(2*x) + 2*sin(x)\n+```\n+\n``````\n",
    "created_at": "2017-12-12T14:13:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70664",
    "user": "https://github.com/egourgoulhon"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,3 +15,11 @@
 
 Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?
 
+UPDATE: this is fixed in Sage 8.1 (see #23672):
+
+```
+sage: f = piecewise([[(-pi, pi), x]])
+sage: f.fourier_series_partial_sum(2, pi)
+-sin(2*x) + 2*sin(x)
+```
+
``````




---

archive/issue_comments_070665.json:
```json
{
    "body": "<a id='comment:26'></a>\nHey, do non-release managers get to mark \"closed\"?  That would be a change in protocol.\n\nAlso, maybe the resolution should be \"fixed\" or \"duplicate\" if it is indeed fixed in another ticket?",
    "created_at": "2017-12-12T15:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70665",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'></a>
Hey, do non-release managers get to mark "closed"?  That would be a change in protocol.

Also, maybe the resolution should be "fixed" or "duplicate" if it is indeed fixed in another ticket?



---

archive/issue_events_061281.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-12-12T15:18:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "008080",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61281"
}
```



---

archive/issue_events_061282.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-12-12T15:18:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "008080",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-61282"
}
```



---

archive/issue_comments_070666.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [@kcrisman](#comment%3A26):\n> Hey, do non-release managers get to mark \"closed\"?  That would be a change in protocol.\n> \n\nThis was announced in https://groups.google.com/d/msg/sage-release/4bIUu1NECwY/we3BMdkeAAAJ with apparently the approval of the release manager.\n\n> Also, maybe the resolution should be \"fixed\" or \"duplicate\" if it is indeed fixed in another ticket?\n\nAh yes, you are right (I thought this was automatically set to \"wontfix\"  while closing \"sage-duplicate/invalid/wontfix\" tickets).",
    "created_at": "2017-12-12T15:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70666",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:27'></a>
Replying to [@kcrisman](#comment%3A26):
> Hey, do non-release managers get to mark "closed"?  That would be a change in protocol.
> 

This was announced in https://groups.google.com/d/msg/sage-release/4bIUu1NECwY/we3BMdkeAAAJ with apparently the approval of the release manager.

> Also, maybe the resolution should be "fixed" or "duplicate" if it is indeed fixed in another ticket?

Ah yes, you are right (I thought this was automatically set to "wontfix"  while closing "sage-duplicate/invalid/wontfix" tickets).



---

archive/issue_comments_070667.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [@egourgoulhon](#comment%3A27):\n> Replying to [@kcrisman](#comment%3A26):\n> > Hey, do non-release managers get to mark \"closed\"?  That would be a change in protocol.\n> > \n\n> \n> This was announced in https://groups.google.com/d/msg/sage-release/4bIUu1NECwY/we3BMdkeAAAJ with apparently the approval of the release manager.\n> \n\n10 hours ago :-) but this will be welcome for obvious dupes etc.\n\n> > Also, maybe the resolution should be \"fixed\" or \"duplicate\" if it is indeed fixed in another ticket?\n\n> \n> Ah yes, you are right (I thought this was automatically set to \"wontfix\"  while closing \"sage-duplicate/invalid/wontfix\" tickets).\n\nYeah, that might be the default, but typically we try to be precise on this. Nice.",
    "created_at": "2017-12-12T19:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-70667",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:28'></a>
Replying to [@egourgoulhon](#comment%3A27):
> Replying to [@kcrisman](#comment%3A26):
> > Hey, do non-release managers get to mark "closed"?  That would be a change in protocol.
> > 

> 
> This was announced in https://groups.google.com/d/msg/sage-release/4bIUu1NECwY/we3BMdkeAAAJ with apparently the approval of the release manager.
> 

10 hours ago :-) but this will be welcome for obvious dupes etc.

> > Also, maybe the resolution should be "fixed" or "duplicate" if it is indeed fixed in another ticket?

> 
> Ah yes, you are right (I thought this was automatically set to "wontfix"  while closing "sage-duplicate/invalid/wontfix" tickets).

Yeah, that might be the default, but typically we try to be precise on this. Nice.
