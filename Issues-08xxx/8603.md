# Issue 8603: Partial sums are off for Fourier series of piecewise functions

archive/issues_008603.json:
```json
{
    "assignees": [
        "https://github.com/burcin"
    ],
    "body": "Doing\n\n```\nf = Piecewise([[(-pi, pi), x]])\nprint f.fourier_series_partial_sum(2, pi)\nprint f.fourier_series_partial_sum(3, pi)\n```\nwe get\n\n```\n2*sin(x)\n-sin(2*x) + 2*sin(x)\n```\nwhile according to the documentation we should get the second output with the first command.\n\nUpdate: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?\n\nUPDATE: this is fixed in Sage 8.1 (see #23672):\n\n```\nsage: f = piecewise([[(-pi, pi), x]])\nsage: f.fourier_series_partial_sum(2, pi)\n-sin(2*x) + 2*sin(x)\n```\n\n\nDepends on #14801\n\nCC:  @wdjoyner @jasongrout @jondo @kcrisman @vbraun @slel @mkoeppe @eviatarbach @rwst @novoselt\n\nKeywords: **sd31**\n\nWork Issues: **other instances of the typo**\n\nAuthor: **David Joyner**\n\nComponent: **calculus**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8603_\n\n",
    "closed_at": "2017-12-12T08:23:33Z",
    "created_at": "2010-03-25T04:06:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20calculus",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Partial sums are off for Fourier series of piecewise functions",
    "type": "issue",
    "updated_at": "2017-12-12T19:16:22Z",
    "url": "https://github.com/sagemath/sage/issues/8603",
    "user": "https://github.com/novoselt"
}
```
Doing

```
f = Piecewise([[(-pi, pi), x]])
print f.fourier_series_partial_sum(2, pi)
print f.fourier_series_partial_sum(3, pi)
```
we get

```
2*sin(x)
-sin(2*x) + 2*sin(x)
```
while according to the documentation we should get the second output with the first command.

Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?

UPDATE: this is fixed in Sage 8.1 (see #23672):

```
sage: f = piecewise([[(-pi, pi), x]])
sage: f.fourier_series_partial_sum(2, pi)
-sin(2*x) + 2*sin(x)
```


Depends on #14801

CC:  @wdjoyner @jasongrout @jondo @kcrisman @vbraun @slel @mkoeppe @eviatarbach @rwst @novoselt

Keywords: **sd31**

Work Issues: **other instances of the typo**

Author: **David Joyner**

Component: **calculus**

_Issue created by migration from https://trac.sagemath.org/ticket/8603_





---

archive/issue_events_107335.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-03-25T04:06:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107335"
}
```



---

archive/issue_events_107336.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-03-25T04:06:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "c: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107336"
}
```



---

archive/issue_events_107337.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-03-25T04:06:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107337"
}
```



---

archive/issue_events_107338.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-03-25T04:06:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107338"
}
```



---

archive/issue_events_107339.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-03-25T04:06:02Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "subject": "https://github.com/novoselt",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107339"
}
```



---

archive/issue_events_107340.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-03-14T20:25:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107340"
}
```



---

archive/issue_events_107341.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-03-14T20:25:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107341"
}
```



---

archive/issue_comments_068849.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis is still true, and syntax is also deprecated.\n\n```\n\nsage: f = Piecewise([[(-pi, pi), x]])\nsage: print f.fourier_series_partial_sum(2, pi)\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/functions/piecewise.py:1095: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\n  a0 = self.fourier_series_cosine_coefficient(0,L)\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/functions/piecewise.py:1099: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)\n  for n in srange(1,N)])\n2*sin(x)\nsage: print f.fourier_series_partial_sum(3, pi)\n-sin(2*x) + 2*sin(x)\n```",
    "created_at": "2011-03-14T20:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68849",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:1" align="right">comment:1</div>

This is still true, and syntax is also deprecated.

```

sage: f = Piecewise([[(-pi, pi), x]])
sage: print f.fourier_series_partial_sum(2, pi)
/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/functions/piecewise.py:1095: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
  a0 = self.fourier_series_cosine_coefficient(0,L)
/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/functions/piecewise.py:1099: DeprecationWarning: Substitution using function-call syntax and unnamed arguments is deprecated and will be removed from a future release of Sage; you can use named arguments instead, like EXPR(x=..., y=...)
  for n in srange(1,N)])
2*sin(x)
sage: print f.fourier_series_partial_sum(3, pi)
-sin(2*x) + 2*sin(x)
```



---

archive/issue_comments_068850.json:
```json
{
    "body": "Changed keywords from none to **sd31**",
    "created_at": "2011-06-18T00:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68850",
    "user": "https://github.com/novoselt"
}
```

Changed keywords from none to **sd31**



---

archive/issue_comments_068851.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nOn a related note: what is the purpose of `plot` methods for Fourier partial sums? They don't do anything except for passing arguments to the usual global `plot` function, so they seem redundant to me and perhaps can be removed (after deprecation period).",
    "created_at": "2011-06-18T00:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68851",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:2" align="right">comment:2</div>

On a related note: what is the purpose of `plot` methods for Fourier partial sums? They don't do anything except for passing arguments to the usual global `plot` function, so they seem redundant to me and perhaps can be removed (after deprecation period).



---

archive/issue_comments_068852.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nYou may be right.  I'd have to look at it.  Remember, these are all *really* old, so they probably at the time bypassed the non-existent 'plot' function, and then were subsequently changed, perhaps.",
    "created_at": "2011-06-18T00:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68852",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">comment:3</div>

You may be right.  I'd have to look at it.  Remember, these are all *really* old, so they probably at the time bypassed the non-existent 'plot' function, and then were subsequently changed, perhaps.



---

archive/issue_comments_068853.json:
```json
{
    "body": "one line change in docstring",
    "created_at": "2011-06-18T10:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68853",
    "user": "https://github.com/wdjoyner"
}
```

one line change in docstring



---

archive/issue_events_107342.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-06-18T10:46:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107342"
}
```



---

archive/issue_comments_068854.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAttachment: **[trac_8603-fourier-sum-docstring.patch.gz](https://github.com/sagemath/sage/files/ticket8603/trac_8603-fourier-sum-docstring.patch.gz)**\n\nThis fixes the documentation of fourier_series_partial_sum, replacing\n\n```\n f(x) \\sim \\frac{a_0}{2} + \\sum_{n=1}^N [a_n\\cos(\\frac{n\\pi x}{L}) +\nb_n\\sin(\\frac{n\\pi x}{L})],\n```\nby\n\n```\n f(x) \\sim \\frac{a_0}{2} + \\sum_{n=1}^{N-1} [a_n\\cos(\\frac{n\\pi x}{L})\n+ b_n\\sin(\\frac{n\\pi x}{L})],\n```",
    "created_at": "2011-06-18T10:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68854",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:4" align="right">comment:4</div>

Attachment: **[trac_8603-fourier-sum-docstring.patch.gz](https://github.com/sagemath/sage/files/ticket8603/trac_8603-fourier-sum-docstring.patch.gz)**

This fixes the documentation of fourier_series_partial_sum, replacing

```
 f(x) \sim \frac{a_0}{2} + \sum_{n=1}^N [a_n\cos(\frac{n\pi x}{L}) +
b_n\sin(\frac{n\pi x}{L})],
```
by

```
 f(x) \sim \frac{a_0}{2} + \sum_{n=1}^{N-1} [a_n\cos(\frac{n\pi x}{L})
+ b_n\sin(\frac{n\pi x}{L})],
```



---

archive/issue_comments_068855.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThanks, David; I don't have time to review this now, but appreciate it.  \n\nAndrey and I were discussing this at Sage Days 31, and thought that maybe changing the behavior instead to match Taylor series would be good, but if this was in fact what you had intended all along, then this solution is better.",
    "created_at": "2011-06-19T01:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68855",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

Thanks, David; I don't have time to review this now, but appreciate it.  

Andrey and I were discussing this at Sage Days 31, and thought that maybe changing the behavior instead to match Taylor series would be good, but if this was in fact what you had intended all along, then this solution is better.



---

archive/issue_comments_068856.json:
```json
{
    "body": "Author: **David Joyner**",
    "created_at": "2011-06-19T01:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68856",
    "user": "https://github.com/kcrisman"
}
```

Author: **David Joyner**



---

archive/issue_comments_068857.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kcrisman](#comment%3A5):\n> Thanks, David; I don't have time to review this now, but appreciate it.  \n> \n> Andrey and I were discussing this at Sage Days 31, and thought that maybe changing the behavior instead to match Taylor series would be good, but if this was in fact what you had intended all along, then this solution is better. \n\nThe `.series()` method of symbolic expressions cut off in a pythonic way, like David's change here. If `.taylor()` does something different we should change it.\n\nThis is a trivial change. I'd be happy to give a positive review if it passes all tests but the patch bot doesn't seem to be working for some reason.",
    "created_at": "2011-06-19T02:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68857",
    "user": "https://github.com/burcin"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kcrisman](#comment%3A5):
> Thanks, David; I don't have time to review this now, but appreciate it.  
> 
> Andrey and I were discussing this at Sage Days 31, and thought that maybe changing the behavior instead to match Taylor series would be good, but if this was in fact what you had intended all along, then this solution is better. 

The `.series()` method of symbolic expressions cut off in a pythonic way, like David's change here. If `.taylor()` does something different we should change it.

This is a trivial change. I'd be happy to give a positive review if it passes all tests but the patch bot doesn't seem to be working for some reason.



---

archive/issue_events_107343.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-06-21T17:48:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107343"
}
```



---

archive/issue_events_107344.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-06-21T17:48:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107344"
}
```



---

archive/issue_comments_068858.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThere are more instances of the same typo in other functions of this module, let's fix them all at once!-)\n\nDavid, do you agree that plot methods can be eliminated as they are not really doing anything?",
    "created_at": "2011-06-21T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68858",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:7" align="right">comment:7</div>

There are more instances of the same typo in other functions of this module, let's fix them all at once!-)

David, do you agree that plot methods can be eliminated as they are not really doing anything?



---

archive/issue_comments_068859.json:
```json
{
    "body": "Work Issues: **other instances of the typo**",
    "created_at": "2011-06-21T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68859",
    "user": "https://github.com/novoselt"
}
```

Work Issues: **other instances of the typo**



---

archive/issue_comments_068860.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@novoselt](#comment%3A7):\n> There are more instances of the same typo in other functions of this module, let's fix them all at once!-)\n\nCan you be more specific?\n> David, do you agree that plot methods can be eliminated as they are not really doing anything?\n\nI think I looked at this at Sage Days 31, but now I forgot whether that statement is true.",
    "created_at": "2011-08-15T14:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68860",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@novoselt](#comment%3A7):
> There are more instances of the same typo in other functions of this module, let's fix them all at once!-)

Can you be more specific?
> David, do you agree that plot methods can be eliminated as they are not really doing anything?

I think I looked at this at Sage Days 31, but now I forgot whether that statement is true.



---

archive/issue_events_107345.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107345"
}
```



---

archive/issue_events_107346.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107346"
}
```



---

archive/issue_events_107347.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107347"
}
```



---

archive/issue_events_107348.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107348"
}
```



---

archive/issue_comments_068861.json:
```json
{
    "body": "Dependencies: **#14801**",
    "created_at": "2014-02-23T13:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68861",
    "user": "https://github.com/ppurka"
}
```

Dependencies: **#14801**



---

archive/issue_events_107349.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107349"
}
```



---

archive/issue_events_107350.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107350"
}
```



---

archive/issue_events_107351.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107351"
}
```



---

archive/issue_events_107352.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107352"
}
```



---

archive/issue_events_107353.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T03:31:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107353"
}
```



---

archive/issue_events_107354.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T03:31:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107354"
}
```



---

archive/issue_comments_068862.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,4 +13,5 @@\n ```\n while according to the documentation we should get the second output with the first command.\n \n+Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?\n \n``````\n",
    "created_at": "2016-06-27T03:31:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68862",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,4 +13,5 @@
 ```
 while according to the documentation we should get the second output with the first command.
 
+Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?
 
``````




---

archive/issue_comments_068863.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nUpdated with information regarding the new `piecewise` implementation from #14801.",
    "created_at": "2016-06-27T03:31:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68863",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Updated with information regarding the new `piecewise` implementation from #14801.



---

archive/issue_events_107355.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T03:31:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107355"
}
```



---

archive/issue_events_107356.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T03:31:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107356"
}
```



---

archive/issue_comments_068864.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThis is fixed by #23672.\n\nRegarding the example in the ticket description, in Sage 8.1.beta4, we have now\n\n```\nsage: f = piecewise([[(-pi, pi), x]])\nsage: f.fourier_series_partial_sum(2, pi)\n-sin(2*x) + 2*sin(x)\n```\nWe even have, since the half-period is now a default argument,\n\n```\nsage: f.fourier_series_partial_sum(2)\n-sin(2*x) + 2*sin(x)\n```",
    "created_at": "2017-09-07T12:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68864",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:15" align="right">comment:15</div>

This is fixed by #23672.

Regarding the example in the ticket description, in Sage 8.1.beta4, we have now

```
sage: f = piecewise([[(-pi, pi), x]])
sage: f.fourier_series_partial_sum(2, pi)
-sin(2*x) + 2*sin(x)
```
We even have, since the half-period is now a default argument,

```
sage: f.fourier_series_partial_sum(2)
-sin(2*x) + 2*sin(x)
```



---

archive/issue_events_107357.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-09-07T12:01:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107357"
}
```



---

archive/issue_events_107358.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-09-07T12:01:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107358"
}
```



---

archive/issue_events_107359.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-09-07T12:01:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107359"
}
```



---

archive/issue_comments_068865.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nExcellent.  Is this documented via a test?",
    "created_at": "2017-09-07T14:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68865",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

Excellent.  Is this documented via a test?



---

archive/issue_events_107360.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-09-07T14:33:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107360"
}
```



---

archive/issue_events_107361.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-09-07T14:33:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107361"
}
```



---

archive/issue_comments_068866.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kcrisman](#comment%3A16):\n> Excellent.  Is this documented via a test?\n\nYes this is documented, both in [Sage Reference Manual](http://doc.sagemath.org/html/en/reference/) and in [Sage Constructions](http://doc.sagemath.org/html/en/constructions/), see [here](https://github.com/sagemath/sagetrac-mirror/commit/ddeef52c783ef2f87c21b4b26e4410ace5007f02).",
    "created_at": "2017-09-07T14:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68866",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kcrisman](#comment%3A16):
> Excellent.  Is this documented via a test?

Yes this is documented, both in [Sage Reference Manual](http://doc.sagemath.org/html/en/reference/) and in [Sage Constructions](http://doc.sagemath.org/html/en/constructions/), see [here](https://github.com/sagemath/sagetrac-mirror/commit/ddeef52c783ef2f87c21b4b26e4410ace5007f02).



---

archive/issue_comments_068867.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nSweet.  Strange that it didn't cause any doctest errors then?  If it didn't, we should make sure to include at least two of the examples on the ticket in the doc *somewhere*.",
    "created_at": "2017-09-07T17:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68867",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:19" align="right">comment:19</div>

Sweet.  Strange that it didn't cause any doctest errors then?  If it didn't, we should make sure to include at least two of the examples on the ticket in the doc *somewhere*.



---

archive/issue_events_107362.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-09-07T17:30:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107362"
}
```



---

archive/issue_events_107363.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-09-07T17:30:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107363"
}
```



---

archive/issue_comments_068868.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@kcrisman](#comment%3A19):\n> Sweet.  Strange that it didn't cause any doctest errors then?  If it didn't, we should make sure to include at least two of the examples on the ticket in the doc *somewhere*.\n\nI am not sure to understand what you mean. In the current version, as integrated in Sage 8.1.beta4, there are doctests like\n\n```\nsage: f = piecewise([((-1,0), -1), ((0,1), 1)])\nsage: f.fourier_series_partial_sum(5)\n4/5*sin(5*pi*x)/pi + 4/3*sin(3*pi*x)/pi + 4*sin(pi*x)/pi\n```\nIn Sage <= 8.0, this would have returned (*)\n\n```\n4/3*sin(3*pi*x)/pi + 4*sin(pi*x)/pi\n```\n\n(*) with the half-period added as the second argument, i.e. `f.fourier_series_partial_sum(5, 1)`)",
    "created_at": "2017-09-07T19:30:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68868",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@kcrisman](#comment%3A19):
> Sweet.  Strange that it didn't cause any doctest errors then?  If it didn't, we should make sure to include at least two of the examples on the ticket in the doc *somewhere*.

I am not sure to understand what you mean. In the current version, as integrated in Sage 8.1.beta4, there are doctests like

```
sage: f = piecewise([((-1,0), -1), ((0,1), 1)])
sage: f.fourier_series_partial_sum(5)
4/5*sin(5*pi*x)/pi + 4/3*sin(3*pi*x)/pi + 4*sin(pi*x)/pi
```
In Sage <= 8.0, this would have returned (*)

```
4/3*sin(3*pi*x)/pi + 4*sin(pi*x)/pi
```

(*) with the half-period added as the second argument, i.e. `f.fourier_series_partial_sum(5, 1)`)



---

archive/issue_comments_068869.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nMy concern was just that the *correct* nature was doctested, not the wrong one, and that we really did have that to test against regression at some point.  Good!",
    "created_at": "2017-09-07T21:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68869",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

My concern was just that the *correct* nature was doctested, not the wrong one, and that we really did have that to test against regression at some point.  Good!



---

archive/issue_events_107364.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107364"
}
```



---

archive/issue_events_107365.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107365"
}
```



---

archive/issue_events_107366.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107366"
}
```



---

archive/issue_events_107367.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "c6c6c6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107367"
}
```



---

archive/issue_comments_068870.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI wonder why \"wontfix\" since the issue is fixed in 8.1.beta4.\nPaul",
    "created_at": "2017-12-12T13:27:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68870",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:23" align="right">comment:23</div>

I wonder why "wontfix" since the issue is fixed in 8.1.beta4.
Paul



---

archive/issue_comments_068871.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@zimmermann6](#comment%3A23):\n> I wonder why \"wontfix\" since the issue is fixed in 8.1.beta4.\n> Paul\n\nActually, as said in [comment:15](#comment%3A15), the issue is fixed in another ticket: #23672, hence the \"sage-duplicate/invalid/wontfix\" milestone for the current one and the \"wonfix\" resolution.",
    "created_at": "2017-12-12T13:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68871",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@zimmermann6](#comment%3A23):
> I wonder why "wontfix" since the issue is fixed in 8.1.beta4.
> Paul

Actually, as said in [comment:15](#comment%3A15), the issue is fixed in another ticket: #23672, hence the "sage-duplicate/invalid/wontfix" milestone for the current one and the "wonfix" resolution.



---

archive/issue_comments_068872.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,11 @@\n \n Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?\n \n+UPDATE: this is fixed in Sage 8.1 (see #23672):\n+\n+```\n+sage: f = piecewise([[(-pi, pi), x]])\n+sage: f.fourier_series_partial_sum(2, pi)\n+-sin(2*x) + 2*sin(x)\n+```\n+\n``````\n",
    "created_at": "2017-12-12T14:13:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68872",
    "user": "https://github.com/egourgoulhon"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,11 @@
 
 Update: Same output with the new `piecewise` from #14801. Does it agree with the documentation there?
 
+UPDATE: this is fixed in Sage 8.1 (see #23672):
+
+```
+sage: f = piecewise([[(-pi, pi), x]])
+sage: f.fourier_series_partial_sum(2, pi)
+-sin(2*x) + 2*sin(x)
+```
+
``````




---

archive/issue_comments_068873.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHey, do non-release managers get to mark \"closed\"?  That would be a change in protocol.\n\nAlso, maybe the resolution should be \"fixed\" or \"duplicate\" if it is indeed fixed in another ticket?",
    "created_at": "2017-12-12T15:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68873",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

Hey, do non-release managers get to mark "closed"?  That would be a change in protocol.

Also, maybe the resolution should be "fixed" or "duplicate" if it is indeed fixed in another ticket?



---

archive/issue_events_107368.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-12-12T15:18:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "c6c6c6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107368"
}
```



---

archive/issue_events_107369.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-12-12T15:18:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "c6c6c6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8603#event-107369"
}
```



---

archive/issue_comments_068874.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@kcrisman](#comment%3A26):\n> Hey, do non-release managers get to mark \"closed\"?  That would be a change in protocol.\n> \n\nThis was announced in https://groups.google.com/d/msg/sage-release/4bIUu1NECwY/we3BMdkeAAAJ with apparently the approval of the release manager.\n\n> Also, maybe the resolution should be \"fixed\" or \"duplicate\" if it is indeed fixed in another ticket?\n\nAh yes, you are right (I thought this was automatically set to \"wontfix\"  while closing \"sage-duplicate/invalid/wontfix\" tickets).",
    "created_at": "2017-12-12T15:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68874",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@kcrisman](#comment%3A26):
> Hey, do non-release managers get to mark "closed"?  That would be a change in protocol.
> 

This was announced in https://groups.google.com/d/msg/sage-release/4bIUu1NECwY/we3BMdkeAAAJ with apparently the approval of the release manager.

> Also, maybe the resolution should be "fixed" or "duplicate" if it is indeed fixed in another ticket?

Ah yes, you are right (I thought this was automatically set to "wontfix"  while closing "sage-duplicate/invalid/wontfix" tickets).



---

archive/issue_comments_068875.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@egourgoulhon](#comment%3A27):\n> Replying to [@kcrisman](#comment%3A26):\n> > Hey, do non-release managers get to mark \"closed\"?  That would be a change in protocol.\n> > \n\n> \n> This was announced in https://groups.google.com/d/msg/sage-release/4bIUu1NECwY/we3BMdkeAAAJ with apparently the approval of the release manager.\n> \n\n10 hours ago :-) but this will be welcome for obvious dupes etc.\n\n> > Also, maybe the resolution should be \"fixed\" or \"duplicate\" if it is indeed fixed in another ticket?\n\n> \n> Ah yes, you are right (I thought this was automatically set to \"wontfix\"  while closing \"sage-duplicate/invalid/wontfix\" tickets).\n\nYeah, that might be the default, but typically we try to be precise on this. Nice.",
    "created_at": "2017-12-12T19:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8603",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8603#issuecomment-68875",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@egourgoulhon](#comment%3A27):
> Replying to [@kcrisman](#comment%3A26):
> > Hey, do non-release managers get to mark "closed"?  That would be a change in protocol.
> > 

> 
> This was announced in https://groups.google.com/d/msg/sage-release/4bIUu1NECwY/we3BMdkeAAAJ with apparently the approval of the release manager.
> 

10 hours ago :-) but this will be welcome for obvious dupes etc.

> > Also, maybe the resolution should be "fixed" or "duplicate" if it is indeed fixed in another ticket?

> 
> Ah yes, you are right (I thought this was automatically set to "wontfix"  while closing "sage-duplicate/invalid/wontfix" tickets).

Yeah, that might be the default, but typically we try to be precise on this. Nice.
