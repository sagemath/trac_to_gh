# Issue 8450: intermediate complex expression in real functions make many plot functions fail

archive/issues_008450.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "All of the following plots fail\n\n```\nx, y = SR.var('x y')\ncontour_plot(abs(x+i*y), (x,-1,1), (y,-1,1))\ndensity_plot(abs(x+i*y), (x,-1,1), (y,-1,1))\nplot3d(abs(x+i*y), (x,-1,1),(y,-1,1))\nstreamline_plot(abs(x+i*y), (x,-1,1),(y,-1,1))\n```\nwith\n\n```\nTypeError: unable to coerce to a real number\n```\nThe culprit is the call to `setup_for_eval_on_grid` (from `sage/plot/misc.py`) that tries to compile the symbolic expression with `fast_float`. But since the expression involves an intermediate complex number the compilation fails. This can be tested with any of the two\n\n```\nfast_float(abs(x + i*y), x, y)\nfast_callable(abs(x + i*y), vars=[x,y])\n```\nThe function compilation succeeds if we ask for a complex function instead\n\n```\nfast_callable(abs(x + i*y), vars=[x,y], domain=complex)\n```\n\nSee also [this question on ask.sagemath.org](https://ask.sagemath.org/question/46275/typeerror-unable-to-coerce-to-a-real-number/).\n\nCC:  @orlitzky @egourgoulhon @jungmath\n\nBranch: **[`6531609`](https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Michael Orlitzky**\n\nComponent: **graphics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8450_\n\n",
    "closed_at": "2022-01-31T23:32:07Z",
    "created_at": "2010-03-05T22:01:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "intermediate complex expression in real functions make many plot functions fail",
    "type": "issue",
    "updated_at": "2022-02-18T12:52:32Z",
    "url": "https://github.com/sagemath/sage/issues/8450",
    "user": "https://github.com/jasongrout"
}
```
All of the following plots fail

```
x, y = SR.var('x y')
contour_plot(abs(x+i*y), (x,-1,1), (y,-1,1))
density_plot(abs(x+i*y), (x,-1,1), (y,-1,1))
plot3d(abs(x+i*y), (x,-1,1),(y,-1,1))
streamline_plot(abs(x+i*y), (x,-1,1),(y,-1,1))
```
with

```
TypeError: unable to coerce to a real number
```
The culprit is the call to `setup_for_eval_on_grid` (from `sage/plot/misc.py`) that tries to compile the symbolic expression with `fast_float`. But since the expression involves an intermediate complex number the compilation fails. This can be tested with any of the two

```
fast_float(abs(x + i*y), x, y)
fast_callable(abs(x + i*y), vars=[x,y])
```
The function compilation succeeds if we ask for a complex function instead

```
fast_callable(abs(x + i*y), vars=[x,y], domain=complex)
```

See also [this question on ask.sagemath.org](https://ask.sagemath.org/question/46275/typeerror-unable-to-coerce-to-a-real-number/).

CC:  @orlitzky @egourgoulhon @jungmath

Branch: **[`6531609`](https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f)**

Reviewer: **Dima Pasechnik**

Author: **Michael Orlitzky**

Component: **graphics**

_Issue created by migration from https://trac.sagemath.org/ticket/8450_





---

archive/issue_events_104966.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-05T22:01:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104966"
}
```



---

archive/issue_events_104967.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-05T22:01:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104967"
}
```



---

archive/issue_events_104968.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-05T22:01:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104968"
}
```



---

archive/issue_events_104969.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-03-05T22:01:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104969"
}
```



---

archive/issue_events_104970.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-03-05T22:01:42Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "subject": "https://github.com/jasongrout",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104970"
}
```



---

archive/issue_comments_067005.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n#5572 will help solve this.",
    "created_at": "2010-04-26T11:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67005",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

#5572 will help solve this.



---

archive/issue_events_104971.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104971"
}
```



---

archive/issue_events_104972.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104972"
}
```



---

archive/issue_events_104973.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104973"
}
```



---

archive/issue_events_104974.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104974"
}
```



---

archive/issue_events_104975.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104975"
}
```



---

archive/issue_events_104976.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104976"
}
```



---

archive/issue_events_104977.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104977"
}
```



---

archive/issue_events_104978.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104978"
}
```



---

archive/issue_events_104979.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-04-19T08:57:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104979"
}
```



---

archive/issue_events_104980.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-04-19T08:57:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104980"
}
```



---

archive/issue_comments_067006.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,3 +17,5 @@\n ```\n contour_plot(imag(log(x+y*I+.001)), (x,-3,3),(y,-3,3),fill=False)\n ```\n+\n+See also [this question on ask.sagemath.org](https://ask.sagemath.org/question/46275/typeerror-unable-to-coerce-to-a-real-number/).\n``````\n",
    "created_at": "2019-04-19T08:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67006",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,3 +17,5 @@
 ```
 contour_plot(imag(log(x+y*I+.001)), (x,-3,3),(y,-3,3),fill=False)
 ```
+
+See also [this question on ask.sagemath.org](https://ask.sagemath.org/question/46275/typeerror-unable-to-coerce-to-a-real-number/).
``````




---

archive/issue_comments_067007.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,21 +1,27 @@\n-This gives an error:\n+All of the following plots fail\n \n ```\n-contour_plot(real_part(log(x+y*I+.001)), (x,-3,3),(y,-3,3),fill=False)\n+x, y = SR.var('x y')\n+contour_plot(abs(x+i*y), (x,-1,1), (y,-1,1))\n+density_plot(abs(x+i*y), (x,-1,1), (y,-1,1))\n+plot3d(abs(x+i*y), (x,-1,1),(y,-1,1))\n+streamline_plot(abs(x+i*y), (x,-1,1),(y,-1,1))\n ```\n-\n-but this works:\n+with\n \n ```\n-a(x,y)=real(log(x+y*I+.001))\n-f=fast_callable(a,domain=CC)\n-contour_plot(f, (x,-3,3),(y,-3,3),fill=False)\n+TypeError: unable to coerce to a real number\n ```\n-\n-and this works:\n+The culprit is the call to `setup_for_eval_on_grid` (from `sage/plot/misc.py`) that tries to compile the symbolic expression with `fast_float`. But since the expression involves an intermediate complex number the compilation fails. This can be tested with any of the two\n \n ```\n-contour_plot(imag(log(x+y*I+.001)), (x,-3,3),(y,-3,3),fill=False)\n+fast_float(abs(x + i*y), x, y)\n+fast_callable(abs(x + i*y), vars=[x,y])\n+```\n+The function compilation succeeds if we ask for a complex function instead\n+\n+```\n+fast_callable(abs(x + i*y), vars=[x,y], domain=CDF)\n ```\n \n See also [this question on ask.sagemath.org](https://ask.sagemath.org/question/46275/typeerror-unable-to-coerce-to-a-real-number/).\n``````\n",
    "created_at": "2019-04-19T09:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67007",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,21 +1,27 @@
-This gives an error:
+All of the following plots fail
 
 ```
-contour_plot(real_part(log(x+y*I+.001)), (x,-3,3),(y,-3,3),fill=False)
+x, y = SR.var('x y')
+contour_plot(abs(x+i*y), (x,-1,1), (y,-1,1))
+density_plot(abs(x+i*y), (x,-1,1), (y,-1,1))
+plot3d(abs(x+i*y), (x,-1,1),(y,-1,1))
+streamline_plot(abs(x+i*y), (x,-1,1),(y,-1,1))
 ```
-
-but this works:
+with
 
 ```
-a(x,y)=real(log(x+y*I+.001))
-f=fast_callable(a,domain=CC)
-contour_plot(f, (x,-3,3),(y,-3,3),fill=False)
+TypeError: unable to coerce to a real number
 ```
-
-and this works:
+The culprit is the call to `setup_for_eval_on_grid` (from `sage/plot/misc.py`) that tries to compile the symbolic expression with `fast_float`. But since the expression involves an intermediate complex number the compilation fails. This can be tested with any of the two
 
 ```
-contour_plot(imag(log(x+y*I+.001)), (x,-3,3),(y,-3,3),fill=False)
+fast_float(abs(x + i*y), x, y)
+fast_callable(abs(x + i*y), vars=[x,y])
+```
+The function compilation succeeds if we ask for a complex function instead
+
+```
+fast_callable(abs(x + i*y), vars=[x,y], domain=CDF)
 ```
 
 See also [this question on ask.sagemath.org](https://ask.sagemath.org/question/46275/typeerror-unable-to-coerce-to-a-real-number/).
``````




---

archive/issue_events_104981.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-04-19T09:11:19Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "title_is": "intermediate complex expression in real functions make many plot functions fail",
    "title_was": "contour_plot chokes on function which involves imaginary numbers",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104981"
}
```



---

archive/issue_comments_067008.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,7 +21,7 @@\n The function compilation succeeds if we ask for a complex function instead\n \n ```\n-fast_callable(abs(x + i*y), vars=[x,y], domain=CDF)\n+fast_callable(abs(x + i*y), vars=[x,y], domain=complex)\n ```\n \n See also [this question on ask.sagemath.org](https://ask.sagemath.org/question/46275/typeerror-unable-to-coerce-to-a-real-number/).\n``````\n",
    "created_at": "2019-04-19T09:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67008",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,7 +21,7 @@
 The function compilation succeeds if we ask for a complex function instead
 
 ```
-fast_callable(abs(x + i*y), vars=[x,y], domain=CDF)
+fast_callable(abs(x + i*y), vars=[x,y], domain=complex)
 ```
 
 See also [this question on ask.sagemath.org](https://ask.sagemath.org/question/46275/typeerror-unable-to-coerce-to-a-real-number/).
``````




---

archive/issue_events_104982.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104982"
}
```



---

archive/issue_comments_067009.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAs the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67009",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_events_104983.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T00:57:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104983"
}
```



---

archive/issue_events_104984.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T00:57:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104984"
}
```



---

archive/issue_comments_067010.json:
```json
{
    "body": "Dependencies: **#32234**",
    "created_at": "2021-07-22T00:57:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67010",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#32234**



---

archive/issue_comments_067011.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2021-07-23T15:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67011",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_comments_067012.json:
```json
{
    "body": "Branch: **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)**",
    "created_at": "2021-07-23T15:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67012",
    "user": "https://github.com/orlitzky"
}
```

Branch: **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)**



---

archive/issue_comments_067013.json:
```json
{
    "body": "Commit: **[`a773fd3`](https://github.com/sagemath/sagetrac-mirror/commit/a773fd3919b69e575d94cdf60135c419b5e08f24)**",
    "created_at": "2021-07-23T15:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67013",
    "user": "https://github.com/orlitzky"
}
```

Commit: **[`a773fd3`](https://github.com/sagemath/sagetrac-mirror/commit/a773fd3919b69e575d94cdf60135c419b5e08f24)**



---

archive/issue_events_104985.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-23T15:13:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104985"
}
```



---

archive/issue_events_104986.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-23T15:13:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104986"
}
```



---

archive/issue_comments_067014.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis is an \"easy fix\" but causes a cascade of other issues because removing `domain=float` turns a lot of things that used to be `Nan` into `TypeError`, `ValueError`, `ZeroDivisionError`, etc.\n\nI'm still running a ptestlong on this, but everything under `sage/plot` now passes. Here are some thoughts:\n\n1. Do we really want to support passing (for example) the integer zero as a function to be plotted? We have doctests that check things like `plot(ZZ(0), x, 0, 1)`. Supporting this requires special cases in the code, and IMO just perpetuates confusion about the difference between the integer 0 and the function const0.\n2. We now have \"try to evaluate this as a real number, and return NaN (or skip it) if we can't\" code in at least five places. Should this be made consistent, or (better yet) factored out? I've made it so that the doctests pass, but in some places we catch only e.g. `TypeError`, while in others we check for a nice long list.\n3. This needs a careful review, since it can change the appearance of plots. There was some other (now fixed) bug involved as you can see from the commit list, but for example, this fix accidentally broke `list_plot`.\n4. I don't really like using try/except in fast loops. Is there a better way to fix the doctest failures that the first commit caused and that the later ones fix?",
    "created_at": "2021-07-23T15:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67014",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:11" align="right">comment:11</div>

This is an "easy fix" but causes a cascade of other issues because removing `domain=float` turns a lot of things that used to be `Nan` into `TypeError`, `ValueError`, `ZeroDivisionError`, etc.

I'm still running a ptestlong on this, but everything under `sage/plot` now passes. Here are some thoughts:

1. Do we really want to support passing (for example) the integer zero as a function to be plotted? We have doctests that check things like `plot(ZZ(0), x, 0, 1)`. Supporting this requires special cases in the code, and IMO just perpetuates confusion about the difference between the integer 0 and the function const0.
2. We now have "try to evaluate this as a real number, and return NaN (or skip it) if we can't" code in at least five places. Should this be made consistent, or (better yet) factored out? I've made it so that the doctests pass, but in some places we catch only e.g. `TypeError`, while in others we check for a nice long list.
3. This needs a careful review, since it can change the appearance of plots. There was some other (now fixed) bug involved as you can see from the commit list, but for example, this fix accidentally broke `list_plot`.
4. I don't really like using try/except in fast loops. Is there a better way to fix the doctest failures that the first commit caused and that the later ones fix?



---

archive/issue_comments_067015.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@orlitzky](#comment:11):\n> 1. Do we really want to support passing (for example) the integer zero as a function to be plotted? We have doctests that check things like `plot(ZZ(0), x, 0, 1)`. Supporting this requires special cases in the code, and IMO just perpetuates confusion about the difference between the integer 0 and the function const0.\n\nAllowing non-callables as input for `plot` is, I think, important to keep. Convenience for casual use is key. Given that `plot` takes variable names as part of its input, it's clear that there is some implicit construction of a symbolic or numerical function happening.",
    "created_at": "2021-07-23T16:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67015",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@orlitzky](#comment:11):
> 1. Do we really want to support passing (for example) the integer zero as a function to be plotted? We have doctests that check things like `plot(ZZ(0), x, 0, 1)`. Supporting this requires special cases in the code, and IMO just perpetuates confusion about the difference between the integer 0 and the function const0.

Allowing non-callables as input for `plot` is, I think, important to keep. Convenience for casual use is key. Given that `plot` takes variable names as part of its input, it's clear that there is some implicit construction of a symbolic or numerical function happening.



---

archive/issue_comments_067016.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@orlitzky](#comment:11):\n> This is an \"easy fix\" but causes a cascade of other issues because removing `domain=float` turns a lot of things that used to be `Nan` into `TypeError`, `ValueError`, `ZeroDivisionError`, etc.\n\nSorry, where do you remove `domain=float`?",
    "created_at": "2021-07-23T16:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67016",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@orlitzky](#comment:11):
> This is an "easy fix" but causes a cascade of other issues because removing `domain=float` turns a lot of things that used to be `Nan` into `TypeError`, `ValueError`, `ZeroDivisionError`, etc.

Sorry, where do you remove `domain=float`?



---

archive/issue_comments_067017.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@mkoeppe](#comment:13):\n> Replying to [@orlitzky](#comment:11):\n> > This is an \"easy fix\" but causes a cascade of other issues because removing `domain=float` turns a lot of things that used to be `Nan` into `TypeError`, `ValueError`, `ZeroDivisionError`, etc.\n\n> \n> Sorry, where do you remove `domain=float`?\n\nThe first thing `fast_float()` tries is to use `fast_callable()` with `domain=float`:\n\n```python\ntry:\n    return fast_callable(f, vars=vars, domain=float,\n                         expect_one_var=expect_one_var)\n```\n\nWe're now using `fast_callable()` directly, and omit the `domain`.",
    "created_at": "2021-07-23T16:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67017",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@mkoeppe](#comment:13):
> Replying to [@orlitzky](#comment:11):
> > This is an "easy fix" but causes a cascade of other issues because removing `domain=float` turns a lot of things that used to be `Nan` into `TypeError`, `ValueError`, `ZeroDivisionError`, etc.

> 
> Sorry, where do you remove `domain=float`?

The first thing `fast_float()` tries is to use `fast_callable()` with `domain=float`:

```python
try:
    return fast_callable(f, vars=vars, domain=float,
                         expect_one_var=expect_one_var)
```

We're now using `fast_callable()` directly, and omit the `domain`.



---

archive/issue_comments_067018.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThanks.\n\nI have not looked at the details, nor done any timing. But it seems to me that a better solution may be to try `domain=float` first, then `domain=complex` (or whatever is needed to make `fast_callable` use `interp_cdf`); and only in the end fall back to the general interpreter.\n\n> 2. We now have \"try to evaluate this as a real number, and return NaN (or skip it) if we can't\" code in at least five places. Should this be made consistent, or (better yet) factored out? \n\nYes, I guess there would be value in a version of the general interpreter that catches errors and replaces them by NaN returns",
    "created_at": "2021-07-23T16:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67018",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Thanks.

I have not looked at the details, nor done any timing. But it seems to me that a better solution may be to try `domain=float` first, then `domain=complex` (or whatever is needed to make `fast_callable` use `interp_cdf`); and only in the end fall back to the general interpreter.

> 2. We now have "try to evaluate this as a real number, and return NaN (or skip it) if we can't" code in at least five places. Should this be made consistent, or (better yet) factored out? 

Yes, I guess there would be value in a version of the general interpreter that catches errors and replaces them by NaN returns



---

archive/issue_comments_067019.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nBy the way, I just came across https://github.com/sagemath/sage/files/ticket5572/improve_fast_callable.6.patch.gz, which seems to have done a lot of what we're doing again now...",
    "created_at": "2021-07-23T17:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67019",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

By the way, I just came across https://github.com/sagemath/sage/files/ticket5572/improve_fast_callable.6.patch.gz, which seems to have done a lot of what we're doing again now...



---

archive/issue_comments_067020.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@mkoeppe](#comment:15):\n> Thanks.\n> \n> I have not looked at the details, nor done any timing. But it seems to me that a better solution may be to try `domain=float` first, then `domain=complex` (or whatever is needed to make `fast_callable` use `interp_cdf`); and only in the end fall back to the general interpreter.\n\nThis is tough because there are so many plotting interfaces, and the fast-callables aren't created near the point of failure. In this case, `setup_for_eval_on_grid()` is preprocessing some of the plotting args and returning them to some other function that orchestrates the plotting. Then the failure occurs in *another* function that actually computes the plot points. \n\nSome major refactoring would be needed to do this all more intelligently. (I think we would also need to generate some kind of custom exception to avoid wrapping ten layers of code in one big `except TypeError` block.)",
    "created_at": "2021-07-23T17:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67020",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@mkoeppe](#comment:15):
> Thanks.
> 
> I have not looked at the details, nor done any timing. But it seems to me that a better solution may be to try `domain=float` first, then `domain=complex` (or whatever is needed to make `fast_callable` use `interp_cdf`); and only in the end fall back to the general interpreter.

This is tough because there are so many plotting interfaces, and the fast-callables aren't created near the point of failure. In this case, `setup_for_eval_on_grid()` is preprocessing some of the plotting args and returning them to some other function that orchestrates the plotting. Then the failure occurs in *another* function that actually computes the plot points. 

Some major refactoring would be needed to do this all more intelligently. (I think we would also need to generate some kind of custom exception to avoid wrapping ten layers of code in one big `except TypeError` block.)



---

archive/issue_events_104987.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-23T17:35:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104987"
}
```



---

archive/issue_events_104988.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-23T17:35:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104988"
}
```



---

archive/issue_comments_067021.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOK, thanks for the explanation. Then I would suggest that we declare the issue of this ticket as \"minor\" and set it aside for later consideration.",
    "created_at": "2021-07-23T17:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67021",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

OK, thanks for the explanation. Then I would suggest that we declare the issue of this ticket as "minor" and set it aside for later consideration.



---

archive/issue_events_104989.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-23T17:35:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104989"
}
```



---

archive/issue_events_104990.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-23T17:35:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104990"
}
```



---

archive/issue_comments_067022.json:
```json
{
    "body": "Changed commit from **[`a773fd3`](https://github.com/sagemath/sagetrac-mirror/commit/a773fd3919b69e575d94cdf60135c419b5e08f24)** to **[`3168bdc`](https://github.com/sagemath/sagetrac-mirror/commit/3168bdc46b2b9cc16bb3bcc9333c95739e0e4791)**",
    "created_at": "2021-07-26T14:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67022",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a773fd3`](https://github.com/sagemath/sagetrac-mirror/commit/a773fd3919b69e575d94cdf60135c419b5e08f24)** to **[`3168bdc`](https://github.com/sagemath/sagetrac-mirror/commit/3168bdc46b2b9cc16bb3bcc9333c95739e0e4791)**



---

archive/issue_comments_067023.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/006dd6156b53473e701f1b42de462c7e5657478d\"><code>006dd61</code></a></td><td><code>Trac #8450: support \"output\" wrapper around fast_callable().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a746166e2dcd11d3e0777bcee2d36e7108165273\"><code>a746166</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3168bdc46b2b9cc16bb3bcc9333c95739e0e4791\"><code>3168bdc</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr></table>\n",
    "created_at": "2021-07-26T14:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67023",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/006dd6156b53473e701f1b42de462c7e5657478d"><code>006dd61</code></a></td><td><code>Trac #8450: support "output" wrapper around fast_callable().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a746166e2dcd11d3e0777bcee2d36e7108165273"><code>a746166</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3168bdc46b2b9cc16bb3bcc9333c95739e0e4791"><code>3168bdc</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr></table>




---

archive/issue_events_104991.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-26T14:25:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104991"
}
```



---

archive/issue_events_104992.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-26T14:25:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104992"
}
```



---

archive/issue_comments_067024.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@mkoeppe](#comment:18):\n> OK, thanks for the explanation. Then I would suggest that we declare the issue of this ticket as \"minor\" and set it aside for later consideration. \n\nI actually hold a grudge against this bug from back when I was generating plots programmatically and the random appearance of `0.000000000001*I` would kill the whole thing after an hour, so I haven't given up.\n\nI tried a few more things, described in the first of the recent commit messages, and discovered problems with all of them. I did however eventually find a solution that is both unobtrusive and fast: wrap fast-callable evaluation in a class that can force the result to a specific output type. With ``domain=<something complex>`` and ``output=<something real>``, we return `NaN` unless the imaginary part is trivial, in which case we return the real part. In all other situations we simply try to coerce the output to the given type.\n\nThis allows us to plot over CDF but convert the result to float (possibly NaN) only on the way out, without having to hack that conversion logic into a hundred plotting functions. It's probably as fast as any solution could be; complex (two-float) operations necessarily take longer than plain float computations, but the difference is small in my non-rigorous tests, less than 10%.\n\nAn output wrapper is not used unless it's needed, so this doesn't affect any other uses of `fast_callable()` in the tree.",
    "created_at": "2021-07-26T14:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67024",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@mkoeppe](#comment:18):
> OK, thanks for the explanation. Then I would suggest that we declare the issue of this ticket as "minor" and set it aside for later consideration. 

I actually hold a grudge against this bug from back when I was generating plots programmatically and the random appearance of `0.000000000001*I` would kill the whole thing after an hour, so I haven't given up.

I tried a few more things, described in the first of the recent commit messages, and discovered problems with all of them. I did however eventually find a solution that is both unobtrusive and fast: wrap fast-callable evaluation in a class that can force the result to a specific output type. With ``domain=<something complex>`` and ``output=<something real>``, we return `NaN` unless the imaginary part is trivial, in which case we return the real part. In all other situations we simply try to coerce the output to the given type.

This allows us to plot over CDF but convert the result to float (possibly NaN) only on the way out, without having to hack that conversion logic into a hundred plotting functions. It's probably as fast as any solution could be; complex (two-float) operations necessarily take longer than plain float computations, but the difference is small in my non-rigorous tests, less than 10%.

An output wrapper is not used unless it's needed, so this doesn't affect any other uses of `fast_callable()` in the tree.



---

archive/issue_comments_067025.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis looks like a fine approach. I won't have time before mid August to look at it in detail. Just a quick comment:\n\n```\n+        # This tolerance was not chosen for any particular reason.\n+        if abs(ipart) < 1e-8:\n+            return self._output(rpart)\n+        else:\n+            return self._output(\"nan\")\n```\nProbably best to make these tolerances user-configurable (as an optional init argument of OutputWrapper and optional argument of `fast_callable`).",
    "created_at": "2021-07-26T20:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67025",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

This looks like a fine approach. I won't have time before mid August to look at it in detail. Just a quick comment:

```
+        # This tolerance was not chosen for any particular reason.
+        if abs(ipart) < 1e-8:
+            return self._output(rpart)
+        else:
+            return self._output("nan")
```
Probably best to make these tolerances user-configurable (as an optional init argument of OutputWrapper and optional argument of `fast_callable`).



---

archive/issue_events_104993.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-26T23:24:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104993"
}
```



---

archive/issue_events_104994.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-26T23:24:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104994"
}
```



---

archive/issue_comments_067026.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@mkoeppe](#comment:22):\n> Probably best to make these tolerances user-configurable (as an optional init argument of OutputWrapper and optional argument of `fast_callable`).\n> \n\nI'm glad you brought this up. I swept it under the rug when I had fifteen things on my internal problem stack, but it's a code smell: using a fixed tolerance isn't right, but adding the argument to `fast_callable()` and trying to explain how it will be used exposes too many implementation details.\n\nI think I can simplify things even further.",
    "created_at": "2021-07-26T23:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67026",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@mkoeppe](#comment:22):
> Probably best to make these tolerances user-configurable (as an optional init argument of OutputWrapper and optional argument of `fast_callable`).
> 

I'm glad you brought this up. I swept it under the rug when I had fifteen things on my internal problem stack, but it's a code smell: using a fixed tolerance isn't right, but adding the argument to `fast_callable()` and trying to explain how it will be used exposes too many implementation details.

I think I can simplify things even further.



---

archive/issue_comments_067027.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58fdf1e7967adb8f82f3bc38506191d2d2be36b2\"><code>58fdf1e</code></a></td><td><code>src/sage/plot/plot3d/parametric_surface.pyx: Remove handling of FastDoubleFunc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec44c61fe547f82735332e51eb987c26e721ea44\"><code>ec44c61</code></a></td><td><code>src/sage/ext/fast_eval.pyx: Reduce/update documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c93ae0be61c08d98bcadcffdd173c010a6f136b\"><code>4c93ae0</code></a></td><td><code>Trac #32234: use fast_callable() for symbolic find_root().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56e9997dd2dd6e5a87b394c68beb1dc32f29126f\"><code>56e9997</code></a></td><td><code>Trac #32234: don't import fast_callable() from sage.ext.fast_eval.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18593fff12d9d4b7b8b8edb21d67662cefd35f06\"><code>18593ff</code></a></td><td><code>Trac #32234: replace fast_float_arg() in plot3d.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fc69cae93c7b8f50800bd43f352ff37758607b4\"><code>5fc69ca</code></a></td><td><code>Trac #32234: fix symbolic find_local_minimum() docs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdef097b77f25f243678bec2f3443068c3982511\"><code>cdef097</code></a></td><td><code>Trac #32234: use domain=float for fast callables used by numpy.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95a887fdf3b6ec3807cb90d05c5023a1ddaf196a\"><code>95a887f</code></a></td><td><code>Trac #8450: new fast-callable output wrapper for plotting.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6966626aa0cd0eee777639d6c8900c6d3a7a949\"><code>f696662</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b88457367c28b5315e60d8223d0d79aa750f474\"><code>2b88457</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr></table>\n",
    "created_at": "2021-07-27T14:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67027",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58fdf1e7967adb8f82f3bc38506191d2d2be36b2"><code>58fdf1e</code></a></td><td><code>src/sage/plot/plot3d/parametric_surface.pyx: Remove handling of FastDoubleFunc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec44c61fe547f82735332e51eb987c26e721ea44"><code>ec44c61</code></a></td><td><code>src/sage/ext/fast_eval.pyx: Reduce/update documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c93ae0be61c08d98bcadcffdd173c010a6f136b"><code>4c93ae0</code></a></td><td><code>Trac #32234: use fast_callable() for symbolic find_root().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56e9997dd2dd6e5a87b394c68beb1dc32f29126f"><code>56e9997</code></a></td><td><code>Trac #32234: don't import fast_callable() from sage.ext.fast_eval.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18593fff12d9d4b7b8b8edb21d67662cefd35f06"><code>18593ff</code></a></td><td><code>Trac #32234: replace fast_float_arg() in plot3d.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fc69cae93c7b8f50800bd43f352ff37758607b4"><code>5fc69ca</code></a></td><td><code>Trac #32234: fix symbolic find_local_minimum() docs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdef097b77f25f243678bec2f3443068c3982511"><code>cdef097</code></a></td><td><code>Trac #32234: use domain=float for fast callables used by numpy.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95a887fdf3b6ec3807cb90d05c5023a1ddaf196a"><code>95a887f</code></a></td><td><code>Trac #8450: new fast-callable output wrapper for plotting.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6966626aa0cd0eee777639d6c8900c6d3a7a949"><code>f696662</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b88457367c28b5315e60d8223d0d79aa750f474"><code>2b88457</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr></table>




---

archive/issue_comments_067028.json:
```json
{
    "body": "Changed commit from **[`3168bdc`](https://github.com/sagemath/sagetrac-mirror/commit/3168bdc46b2b9cc16bb3bcc9333c95739e0e4791)** to **[`2b88457`](https://github.com/sagemath/sagetrac-mirror/commit/2b88457367c28b5315e60d8223d0d79aa750f474)**",
    "created_at": "2021-07-27T14:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67028",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3168bdc`](https://github.com/sagemath/sagetrac-mirror/commit/3168bdc46b2b9cc16bb3bcc9333c95739e0e4791)** to **[`2b88457`](https://github.com/sagemath/sagetrac-mirror/commit/2b88457367c28b5315e60d8223d0d79aa750f474)**



---

archive/issue_comments_067029.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nMuch better now. There's no need to solve the output-conversion problem more generally; we need it only for plotting, and creating the wrapper under sage.plot.misc eliminates all of the problems with the previous iteration.",
    "created_at": "2021-07-27T14:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67029",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:25" align="right">comment:25</div>

Much better now. There's no need to solve the output-conversion problem more generally; we need it only for plotting, and creating the wrapper under sage.plot.misc eliminates all of the problems with the previous iteration.



---

archive/issue_events_104995.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-27T14:07:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104995"
}
```



---

archive/issue_events_104996.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-07-27T14:07:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104996"
}
```



---

archive/issue_comments_067030.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6f88d62cefd70641c7ad0e9467f622c974a467b\"><code>e6f88d6</code></a></td><td><code>src/sage/ext/fast_eval.pyx: Reduce/update documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1353bafad48b129bad52ff18f5f6f8ede6253b3b\"><code>1353baf</code></a></td><td><code>Trac #32234: use fast_callable() for symbolic find_root().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c56fa053a5617c9df785450f624bd6864d9d96fe\"><code>c56fa05</code></a></td><td><code>Trac #32234: don't import fast_callable() from sage.ext.fast_eval.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fcec8e1bcdb881daa4610aa81965be6f159224f\"><code>0fcec8e</code></a></td><td><code>Trac #32234: replace fast_float_arg() in plot3d.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1479666c1fc3500a490faefe19ff3bcadfca0622\"><code>1479666</code></a></td><td><code>Trac #32234: fix symbolic find_local_minimum() docs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19aa975778d411e596e6b72dbdc00b402985dd07\"><code>19aa975</code></a></td><td><code>Trac #32234: use domain=float for fast callables used by numpy.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df062b30005bf8488fa16124cd7c2b9129e7b396\"><code>df062b3</code></a></td><td><code>Trac #32234: replace two trivial fast-callables in plot3d().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/411d34de579d03205e0bccfea2bb893ef827486a\"><code>411d34d</code></a></td><td><code>Trac #8450: new fast-callable output wrapper for plotting.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/660015887c73b1ac55a73260e53ea4ed3036fcdc\"><code>6600158</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8e79086453876c2f1c43931590ffc94801fcaa1\"><code>d8e7908</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr></table>\n",
    "created_at": "2021-07-27T21:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67030",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6f88d62cefd70641c7ad0e9467f622c974a467b"><code>e6f88d6</code></a></td><td><code>src/sage/ext/fast_eval.pyx: Reduce/update documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1353bafad48b129bad52ff18f5f6f8ede6253b3b"><code>1353baf</code></a></td><td><code>Trac #32234: use fast_callable() for symbolic find_root().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c56fa053a5617c9df785450f624bd6864d9d96fe"><code>c56fa05</code></a></td><td><code>Trac #32234: don't import fast_callable() from sage.ext.fast_eval.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fcec8e1bcdb881daa4610aa81965be6f159224f"><code>0fcec8e</code></a></td><td><code>Trac #32234: replace fast_float_arg() in plot3d.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1479666c1fc3500a490faefe19ff3bcadfca0622"><code>1479666</code></a></td><td><code>Trac #32234: fix symbolic find_local_minimum() docs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19aa975778d411e596e6b72dbdc00b402985dd07"><code>19aa975</code></a></td><td><code>Trac #32234: use domain=float for fast callables used by numpy.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df062b30005bf8488fa16124cd7c2b9129e7b396"><code>df062b3</code></a></td><td><code>Trac #32234: replace two trivial fast-callables in plot3d().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/411d34de579d03205e0bccfea2bb893ef827486a"><code>411d34d</code></a></td><td><code>Trac #8450: new fast-callable output wrapper for plotting.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/660015887c73b1ac55a73260e53ea4ed3036fcdc"><code>6600158</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8e79086453876c2f1c43931590ffc94801fcaa1"><code>d8e7908</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr></table>




---

archive/issue_comments_067031.json:
```json
{
    "body": "Changed commit from **[`2b88457`](https://github.com/sagemath/sagetrac-mirror/commit/2b88457367c28b5315e60d8223d0d79aa750f474)** to **[`d8e7908`](https://github.com/sagemath/sagetrac-mirror/commit/d8e79086453876c2f1c43931590ffc94801fcaa1)**",
    "created_at": "2021-07-27T21:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67031",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2b88457`](https://github.com/sagemath/sagetrac-mirror/commit/2b88457367c28b5315e60d8223d0d79aa750f474)** to **[`d8e7908`](https://github.com/sagemath/sagetrac-mirror/commit/d8e79086453876c2f1c43931590ffc94801fcaa1)**



---

archive/issue_comments_067032.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThis is looking nice. Similar to what I said in [comment:22](#comment:22), I think the imaginary tolerance should be customizable on the level of the plot functions -- in the same way that options such as `detect_poles`, `adaptive_tolerance` are offered.",
    "created_at": "2021-08-15T02:53:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67032",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

This is looking nice. Similar to what I said in [comment:22](#comment:22), I think the imaginary tolerance should be customizable on the level of the plot functions -- in the same way that options such as `detect_poles`, `adaptive_tolerance` are offered.



---

archive/issue_comments_067033.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@mkoeppe](#comment:27):\n> This is looking nice. Similar to what I said in [comment:22](#comment:22), I think the imaginary tolerance should be customizable on the level of the plot functions -- in the same way that options such as `detect_poles`, `adaptive_tolerance` are offered.\n\nThose only work for the `plot()` function, and not for anything else that calls `setup_for_eval_on_grid()`. But once #32234 gets reviewed, I guess I wouldn't mind adding `imaginary_tolerance` to `plot.options`. In that case, we should probably go back later and try to make the options to the various plotting functions consistent (in another ticket).",
    "created_at": "2021-08-19T13:37:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67033",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@mkoeppe](#comment:27):
> This is looking nice. Similar to what I said in [comment:22](#comment:22), I think the imaginary tolerance should be customizable on the level of the plot functions -- in the same way that options such as `detect_poles`, `adaptive_tolerance` are offered.

Those only work for the `plot()` function, and not for anything else that calls `setup_for_eval_on_grid()`. But once #32234 gets reviewed, I guess I wouldn't mind adding `imaginary_tolerance` to `plot.options`. In that case, we should probably go back later and try to make the options to the various plotting functions consistent (in another ticket).



---

archive/issue_comments_067034.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)** to **[u/mkoeppe/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/8450)**",
    "created_at": "2021-09-13T23:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67034",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)** to **[u/mkoeppe/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/8450)**



---

archive/issue_comments_067035.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/8450)** to **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)**",
    "created_at": "2021-10-21T00:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67035",
    "user": "https://github.com/orlitzky"
}
```

Changed branch from **[u/mkoeppe/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/8450)** to **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)**



---

archive/issue_comments_067036.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nHere's a rebase and the `plot.options` interface. I still need to look closer at what's going on with `real_nth_root()` though; what's there is a hack.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86c6cdc8db82ffc8774865b94ce4246d9249ba41\"><code>86c6cdc</code></a></td><td><code>Trac #8450: new fast-callable output wrapper for plotting.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eca45ddb800c0920c22de401677b23b1ee850162\"><code>eca45dd</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37955990bb5cff6547dbac4bca5ba6dfcab14e54\"><code>3795599</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/518349ecb0eb4436e8033a988601e584aed10c2b\"><code>518349e</code></a></td><td><code>Trac #8450: pass imaginary tolerance down through plot.options.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b46a44896ed8299d88127db278ea65e2da1b4a4\"><code>5b46a44</code></a></td><td><code>Trac #8450: remove imag_tol default from FastCallablePlotWrapper().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b66d2d19b48849a340131dbc7f55ef19df87682a\"><code>b66d2d1</code></a></td><td><code>Trac #8450: use CDF for symbolic expression fast-callables.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67a321deb8f536af23a4aaf365f6708de3879358\"><code>67a321d</code></a></td><td><code>Trac #8450: catch more cases in setup_for_eval_on_grid.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/920db97ca2519dd423f0721ab348dab3496e9a05\"><code>920db97</code></a></td><td><code>Trac #8450: fix complex type error in real_nth_root().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbea8c6209bd67ecde413d0d0ab4b51b4f2d1caa\"><code>fbea8c6</code></a></td><td><code>Trac #8450: add an example using \"imaginary_tolerance\" in plot().</code></td></tr></table>\n",
    "created_at": "2021-10-21T00:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67036",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:30" align="right">comment:30</div>

Here's a rebase and the `plot.options` interface. I still need to look closer at what's going on with `real_nth_root()` though; what's there is a hack.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86c6cdc8db82ffc8774865b94ce4246d9249ba41"><code>86c6cdc</code></a></td><td><code>Trac #8450: new fast-callable output wrapper for plotting.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eca45ddb800c0920c22de401677b23b1ee850162"><code>eca45dd</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37955990bb5cff6547dbac4bca5ba6dfcab14e54"><code>3795599</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/518349ecb0eb4436e8033a988601e584aed10c2b"><code>518349e</code></a></td><td><code>Trac #8450: pass imaginary tolerance down through plot.options.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b46a44896ed8299d88127db278ea65e2da1b4a4"><code>5b46a44</code></a></td><td><code>Trac #8450: remove imag_tol default from FastCallablePlotWrapper().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b66d2d19b48849a340131dbc7f55ef19df87682a"><code>b66d2d1</code></a></td><td><code>Trac #8450: use CDF for symbolic expression fast-callables.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67a321deb8f536af23a4aaf365f6708de3879358"><code>67a321d</code></a></td><td><code>Trac #8450: catch more cases in setup_for_eval_on_grid.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/920db97ca2519dd423f0721ab348dab3496e9a05"><code>920db97</code></a></td><td><code>Trac #8450: fix complex type error in real_nth_root().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbea8c6209bd67ecde413d0d0ab4b51b4f2d1caa"><code>fbea8c6</code></a></td><td><code>Trac #8450: add an example using "imaginary_tolerance" in plot().</code></td></tr></table>




---

archive/issue_comments_067037.json:
```json
{
    "body": "Changed commit from **[`d8e7908`](https://github.com/sagemath/sagetrac-mirror/commit/d8e79086453876c2f1c43931590ffc94801fcaa1)** to **[`fbea8c6`](https://github.com/sagemath/sagetrac-mirror/commit/fbea8c6209bd67ecde413d0d0ab4b51b4f2d1caa)**",
    "created_at": "2021-10-21T00:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67037",
    "user": "https://github.com/orlitzky"
}
```

Changed commit from **[`d8e7908`](https://github.com/sagemath/sagetrac-mirror/commit/d8e79086453876c2f1c43931590ffc94801fcaa1)** to **[`fbea8c6`](https://github.com/sagemath/sagetrac-mirror/commit/fbea8c6209bd67ecde413d0d0ab4b51b4f2d1caa)**



---

archive/issue_comments_067038.json:
```json
{
    "body": "Changed dependencies from **#32234** to none",
    "created_at": "2021-10-21T00:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67038",
    "user": "https://github.com/orlitzky"
}
```

Changed dependencies from **#32234** to none



---

archive/issue_events_104997.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-10-21T00:29:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104997"
}
```



---

archive/issue_events_104998.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-10-21T00:29:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104998"
}
```



---

archive/issue_comments_067039.json:
```json
{
    "body": "Changed commit from **[`fbea8c6`](https://github.com/sagemath/sagetrac-mirror/commit/fbea8c6209bd67ecde413d0d0ab4b51b4f2d1caa)** to **[`5a70ea6`](https://github.com/sagemath/sagetrac-mirror/commit/5a70ea636d847f134e81c5619411aece0a87c4eb)**",
    "created_at": "2021-11-03T12:31:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67039",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fbea8c6`](https://github.com/sagemath/sagetrac-mirror/commit/fbea8c6209bd67ecde413d0d0ab4b51b4f2d1caa)** to **[`5a70ea6`](https://github.com/sagemath/sagetrac-mirror/commit/5a70ea636d847f134e81c5619411aece0a87c4eb)**



---

archive/issue_comments_067040.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b47adf46d339255507197319788a33a8a8a616fb\"><code>b47adf4</code></a></td><td><code>Trac #8450: use CDF for symbolic expression fast-callables.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b43bb83fb69fe41f0c3c4ff80026c87b741b57f\"><code>8b43bb8</code></a></td><td><code>Trac #8450: catch more cases in setup_for_eval_on_grid.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77ed41cf7d8a2f07ee874a2f05cabffaff83c3df\"><code>77ed41c</code></a></td><td><code>Trac #8450: fix complex type error in real_nth_root().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a70ea636d847f134e81c5619411aece0a87c4eb\"><code>5a70ea6</code></a></td><td><code>Trac #8450: add an example using \"imaginary_tolerance\" in plot().</code></td></tr></table>\n",
    "created_at": "2021-11-03T12:31:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67040",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b47adf46d339255507197319788a33a8a8a616fb"><code>b47adf4</code></a></td><td><code>Trac #8450: use CDF for symbolic expression fast-callables.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b43bb83fb69fe41f0c3c4ff80026c87b741b57f"><code>8b43bb8</code></a></td><td><code>Trac #8450: catch more cases in setup_for_eval_on_grid.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77ed41cf7d8a2f07ee874a2f05cabffaff83c3df"><code>77ed41c</code></a></td><td><code>Trac #8450: fix complex type error in real_nth_root().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a70ea636d847f134e81c5619411aece0a87c4eb"><code>5a70ea6</code></a></td><td><code>Trac #8450: add an example using "imaginary_tolerance" in plot().</code></td></tr></table>




---

archive/issue_events_104999.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-03T12:39:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-104999"
}
```



---

archive/issue_events_105000.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-11-03T12:39:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105000"
}
```



---

archive/issue_comments_067041.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThe `real_nth_root()` fix reveals a new issue that may arise in some cases: symbolic functions that are not prepared to receive \"real\" arguments of the form `x + 0*I`. But the fix is not so bad as you can see. And it should be rare, since most sage operations will try to coerce things to the expected domain (and no other doctests fail, of course). The \"mod\" operation in this cases is a bit special in that regard.",
    "created_at": "2021-11-03T12:39:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67041",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:32" align="right">comment:32</div>

The `real_nth_root()` fix reveals a new issue that may arise in some cases: symbolic functions that are not prepared to receive "real" arguments of the form `x + 0*I`. But the fix is not so bad as you can see. And it should be rare, since most sage operations will try to coerce things to the expected domain (and no other doctests fail, of course). The "mod" operation in this cases is a bit special in that regard.



---

archive/issue_comments_067042.json:
```json
{
    "body": "Changed commit from **[`5a70ea6`](https://github.com/sagemath/sagetrac-mirror/commit/5a70ea636d847f134e81c5619411aece0a87c4eb)** to **[`7899e73`](https://github.com/sagemath/sagetrac-mirror/commit/7899e73a761477386be1334b230e1eb8182f4a2a)**",
    "created_at": "2021-12-03T10:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67042",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`5a70ea6`](https://github.com/sagemath/sagetrac-mirror/commit/5a70ea636d847f134e81c5619411aece0a87c4eb)** to **[`7899e73`](https://github.com/sagemath/sagetrac-mirror/commit/7899e73a761477386be1334b230e1eb8182f4a2a)**



---

archive/issue_comments_067043.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)** to **[u/dimpase/rebased/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/rebased/mjo/ticket/8450)**",
    "created_at": "2021-12-03T10:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67043",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)** to **[u/dimpase/rebased/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/rebased/mjo/ticket/8450)**



---

archive/issue_comments_067044.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nrebased branch, with one `\"\"\" -> r\"\"\"` change\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7899e73a761477386be1334b230e1eb8182f4a2a\"><code>7899e73</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into u/mjo/ticket/8450</code></td></tr></table>\n",
    "created_at": "2021-12-03T10:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67044",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">comment:33</div>

rebased branch, with one `""" -> r"""` change

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7899e73a761477386be1334b230e1eb8182f4a2a"><code>7899e73</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into u/mjo/ticket/8450</code></td></tr></table>




---

archive/issue_comments_067045.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c086e2db74951d6f13066e30a43aa188e61e8e6\"><code>2c086e2</code></a></td><td><code>add missing imports</code></td></tr></table>\n",
    "created_at": "2021-12-03T10:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67045",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c086e2db74951d6f13066e30a43aa188e61e8e6"><code>2c086e2</code></a></td><td><code>add missing imports</code></td></tr></table>




---

archive/issue_comments_067046.json:
```json
{
    "body": "Changed commit from **[`7899e73`](https://github.com/sagemath/sagetrac-mirror/commit/7899e73a761477386be1334b230e1eb8182f4a2a)** to **[`2c086e2`](https://github.com/sagemath/sagetrac-mirror/commit/2c086e2db74951d6f13066e30a43aa188e61e8e6)**",
    "created_at": "2021-12-03T10:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67046",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7899e73`](https://github.com/sagemath/sagetrac-mirror/commit/7899e73a761477386be1334b230e1eb8182f4a2a)** to **[`2c086e2`](https://github.com/sagemath/sagetrac-mirror/commit/2c086e2db74951d6f13066e30a43aa188e61e8e6)**



---

archive/issue_comments_067047.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWanna test this more. The new branch works with 9.5.beta7",
    "created_at": "2021-12-03T10:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67047",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

Wanna test this more. The new branch works with 9.5.beta7



---

archive/issue_comments_067048.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2021-12-03T10:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67048",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_067049.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\noff to the bots",
    "created_at": "2021-12-03T10:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67049",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

off to the bots



---

archive/issue_events_105001.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-03T10:56:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105001"
}
```



---

archive/issue_events_105002.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-03T10:56:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105002"
}
```



---

archive/issue_comments_067050.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nDon't patchbots usually give higher priority to\n\"needs review\" than \"positive review\"?",
    "created_at": "2021-12-03T12:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67050",
    "user": "https://github.com/slel"
}
```

<div id="comment:37" align="right">comment:37</div>

Don't patchbots usually give higher priority to
"needs review" than "positive review"?



---

archive/issue_comments_067051.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@slel](#comment:37):\n> Don't patchbots usually give higher priority to\n> \"needs review\" than \"positive review\"?\n\nI meant buildbots",
    "created_at": "2021-12-03T13:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67051",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@slel](#comment:37):
> Don't patchbots usually give higher priority to
> "needs review" than "positive review"?

I meant buildbots



---

archive/issue_comments_067052.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI missed that part of the developer guide.",
    "created_at": "2021-12-03T23:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67052",
    "user": "https://github.com/slel"
}
```

<div id="comment:39" align="right">comment:39</div>

I missed that part of the developer guide.



---

archive/issue_events_105003.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-27T13:03:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105003"
}
```



---

archive/issue_events_105004.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-27T13:03:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105004"
}
```



---

archive/issue_events_105005.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-04T22:54:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105005"
}
```



---

archive/issue_events_105006.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-04T22:54:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105006"
}
```



---

archive/issue_comments_067053.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nOn OSX:\n\n```\n**********************************************************************\nFile \"src/sage/plot/plot.py\", line 3943, in sage.plot.plot.?\nFailed example:\n    generate_plot_points(sin(x).function(x), (-pi, pi), randomize=False)\nExpected:\n    [(-3.141592653589793, -1.2246...e-16), (-2.748893571891069,\n    -0.3826834323650899), (-2.356194490192345, -0.707106781186547...),\n    (-2.1598449493429825, -0.831469612302545...), (-1.9634954084936207,\n    -0.9238795325112867), (-1.7671458676442586, -0.9807852804032304),\n    (-1.5707963267948966, -1.0), (-1.3744467859455345,\n    -0.9807852804032304), (-1.1780972450961724, -0.9238795325112867),\n    (-0.9817477042468103, -0.831469612302545...), (-0.7853981633974483,\n    -0.707106781186547...), (-0.39269908169872414, -0.3826834323650898),\n    (0.0, 0.0), (0.39269908169872414, 0.3826834323650898),\n    (0.7853981633974483, 0.707106781186547...), (0.9817477042468103,\n    0.831469612302545...), (1.1780972450961724, 0.9238795325112867),\n    (1.3744467859455345, 0.9807852804032304), (1.5707963267948966, 1.0),\n    (1.7671458676442586, 0.9807852804032304), (1.9634954084936207,\n    0.9238795325112867), (2.1598449493429825, 0.831469612302545...),\n    (2.356194490192345, 0.707106781186547...), (2.748893571891069,\n    0.3826834323650899), (3.141592653589793, 1.2246...e-16)]\nGot:\n    [(-3.141592653589793, -1.2246467991473532e-16),\n     (-2.748893571891069, -0.38268343236508984),\n     (-2.356194490192345, -0.7071067811865476),\n     (-2.1598449493429825, -0.8314696123025455),\n     (-1.9634954084936207, -0.9238795325112867),\n     (-1.7671458676442586, -0.9807852804032304),\n     (-1.5707963267948966, -1.0),\n     (-1.3744467859455345, -0.9807852804032304),\n     (-1.1780972450961724, -0.9238795325112867),\n     (-0.9817477042468103, -0.8314696123025451),\n     (-0.7853981633974483, -0.7071067811865475),\n     (-0.39269908169872414, -0.3826834323650898),\n     (0.0, 0.0),\n     (0.39269908169872414, 0.3826834323650898),\n     (0.7853981633974483, 0.7071067811865475),\n     (0.9817477042468103, 0.8314696123025451),\n     (1.1780972450961724, 0.9238795325112867),\n     (1.3744467859455345, 0.9807852804032304),\n     (1.5707963267948966, 1.0),\n     (1.7671458676442586, 0.9807852804032304),\n     (1.9634954084936207, 0.9238795325112867),\n     (2.1598449493429825, 0.8314696123025455),\n     (2.356194490192345, 0.7071067811865476),\n     (2.748893571891069, 0.38268343236508984),\n     (3.141592653589793, 1.2246467991473532e-16)]\n**********************************************************************\n1 item had failures:\n   1 of  44 in sage.plot.plot.?\n    [464 tests, 1 failure, 64.40 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=70775727671966200967886888406969327388 src/sage/plot/plot.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2022-01-04T22:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67053",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:41" align="right">comment:41</div>

On OSX:

```
**********************************************************************
File "src/sage/plot/plot.py", line 3943, in sage.plot.plot.?
Failed example:
    generate_plot_points(sin(x).function(x), (-pi, pi), randomize=False)
Expected:
    [(-3.141592653589793, -1.2246...e-16), (-2.748893571891069,
    -0.3826834323650899), (-2.356194490192345, -0.707106781186547...),
    (-2.1598449493429825, -0.831469612302545...), (-1.9634954084936207,
    -0.9238795325112867), (-1.7671458676442586, -0.9807852804032304),
    (-1.5707963267948966, -1.0), (-1.3744467859455345,
    -0.9807852804032304), (-1.1780972450961724, -0.9238795325112867),
    (-0.9817477042468103, -0.831469612302545...), (-0.7853981633974483,
    -0.707106781186547...), (-0.39269908169872414, -0.3826834323650898),
    (0.0, 0.0), (0.39269908169872414, 0.3826834323650898),
    (0.7853981633974483, 0.707106781186547...), (0.9817477042468103,
    0.831469612302545...), (1.1780972450961724, 0.9238795325112867),
    (1.3744467859455345, 0.9807852804032304), (1.5707963267948966, 1.0),
    (1.7671458676442586, 0.9807852804032304), (1.9634954084936207,
    0.9238795325112867), (2.1598449493429825, 0.831469612302545...),
    (2.356194490192345, 0.707106781186547...), (2.748893571891069,
    0.3826834323650899), (3.141592653589793, 1.2246...e-16)]
Got:
    [(-3.141592653589793, -1.2246467991473532e-16),
     (-2.748893571891069, -0.38268343236508984),
     (-2.356194490192345, -0.7071067811865476),
     (-2.1598449493429825, -0.8314696123025455),
     (-1.9634954084936207, -0.9238795325112867),
     (-1.7671458676442586, -0.9807852804032304),
     (-1.5707963267948966, -1.0),
     (-1.3744467859455345, -0.9807852804032304),
     (-1.1780972450961724, -0.9238795325112867),
     (-0.9817477042468103, -0.8314696123025451),
     (-0.7853981633974483, -0.7071067811865475),
     (-0.39269908169872414, -0.3826834323650898),
     (0.0, 0.0),
     (0.39269908169872414, 0.3826834323650898),
     (0.7853981633974483, 0.7071067811865475),
     (0.9817477042468103, 0.8314696123025451),
     (1.1780972450961724, 0.9238795325112867),
     (1.3744467859455345, 0.9807852804032304),
     (1.5707963267948966, 1.0),
     (1.7671458676442586, 0.9807852804032304),
     (1.9634954084936207, 0.9238795325112867),
     (2.1598449493429825, 0.8314696123025455),
     (2.356194490192345, 0.7071067811865476),
     (2.748893571891069, 0.38268343236508984),
     (3.141592653589793, 1.2246467991473532e-16)]
**********************************************************************
1 item had failures:
   1 of  44 in sage.plot.plot.?
    [464 tests, 1 failure, 64.40 s]
----------------------------------------------------------------------
sage -t --long --random-seed=70775727671966200967886888406969327388 src/sage/plot/plot.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_067054.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nHow about adding `# abs tol 1e-16` or using\nthe following output for the doctest:\n\n```\n    [(-3.141592653589793, -1.2246...e-16),\n     (-2.748893571891069, -0.382683432365089...),\n     (-2.356194490192345, -0.707106781186547...),\n     (-2.1598449493429825, -0.831469612302545...),\n     (-1.9634954084936207, -0.9238795325112867),\n     (-1.7671458676442586, -0.9807852804032304),\n     (-1.5707963267948966, -1.0),\n     (-1.3744467859455345, -0.9807852804032304),\n     (-1.1780972450961724, -0.9238795325112867),\n     (-0.9817477042468103, -0.831469612302545...),\n     (-0.7853981633974483, -0.707106781186547...),\n     (-0.39269908169872414, -0.3826834323650898),\n     (0.0, 0.0),\n     (0.39269908169872414, 0.3826834323650898),\n     (0.7853981633974483, 0.707106781186547...),\n     (0.9817477042468103, 0.831469612302545...),\n     (1.1780972450961724, 0.9238795325112867),\n     (1.3744467859455345, 0.9807852804032304),\n     (1.5707963267948966, 1.0),\n     (1.7671458676442586, 0.9807852804032304),\n     (1.9634954084936207, 0.9238795325112867),\n     (2.1598449493429825, 0.831469612302545...),\n     (2.356194490192345, 0.707106781186547...),\n     (2.748893571891069, 0.382683432365089...),\n     (3.141592653589793, 1.2246...e-16)]\n```",
    "created_at": "2022-01-05T04:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67054",
    "user": "https://github.com/slel"
}
```

<div id="comment:42" align="right">comment:42</div>

How about adding `# abs tol 1e-16` or using
the following output for the doctest:

```
    [(-3.141592653589793, -1.2246...e-16),
     (-2.748893571891069, -0.382683432365089...),
     (-2.356194490192345, -0.707106781186547...),
     (-2.1598449493429825, -0.831469612302545...),
     (-1.9634954084936207, -0.9238795325112867),
     (-1.7671458676442586, -0.9807852804032304),
     (-1.5707963267948966, -1.0),
     (-1.3744467859455345, -0.9807852804032304),
     (-1.1780972450961724, -0.9238795325112867),
     (-0.9817477042468103, -0.831469612302545...),
     (-0.7853981633974483, -0.707106781186547...),
     (-0.39269908169872414, -0.3826834323650898),
     (0.0, 0.0),
     (0.39269908169872414, 0.3826834323650898),
     (0.7853981633974483, 0.707106781186547...),
     (0.9817477042468103, 0.831469612302545...),
     (1.1780972450961724, 0.9238795325112867),
     (1.3744467859455345, 0.9807852804032304),
     (1.5707963267948966, 1.0),
     (1.7671458676442586, 0.9807852804032304),
     (1.9634954084936207, 0.9238795325112867),
     (2.1598449493429825, 0.831469612302545...),
     (2.356194490192345, 0.707106781186547...),
     (2.748893571891069, 0.382683432365089...),
     (3.141592653589793, 1.2246...e-16)]
```



---

archive/issue_comments_067055.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nAlso, the blank line after an example or test block\nis not needed if it ends a docstring.",
    "created_at": "2022-01-05T05:08:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67055",
    "user": "https://github.com/slel"
}
```

<div id="comment:43" align="right">comment:43</div>

Also, the blank line after an example or test block
is not needed if it ends a docstring.



---

archive/issue_comments_067056.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI've reworked that doctest to check something useful (and added `abs tol`) instead of a specific blob of digits.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7feed3de81d12e1726e304403597c5a3c485f7a0\"><code>7feed3d</code></a></td><td><code>Trac #8450: new fast-callable output wrapper for plotting.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82fc41c8c8b786aa09231738cdf323bf42475216\"><code>82fc41c</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1344e0860b811cea7cdda303ff87fdbc07cc496\"><code>f1344e0</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/988abe965883848bda5e180b0b397bb783a88409\"><code>988abe9</code></a></td><td><code>Trac #8450: pass imaginary tolerance down through plot.options.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/633b3d346abefd46431ea4c1e1c9ea991c82958d\"><code>633b3d3</code></a></td><td><code>Trac #8450: remove imag_tol default from FastCallablePlotWrapper().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ee9ddfd66177c64e90f7ee095f89b4e1526194a\"><code>3ee9ddf</code></a></td><td><code>Trac #8450: use CDF for symbolic expression fast-callables.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b80e0f7ddaf1fd456f3ad392e4f3df4986fc49b\"><code>7b80e0f</code></a></td><td><code>Trac #8450: catch more cases in setup_for_eval_on_grid.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d6312c3f7cb6ab7e2f408b5c051c926f76dc48f\"><code>4d6312c</code></a></td><td><code>Trac #8450: fix complex type error in real_nth_root().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3cbfd72bd8aca04ba8e92968c3d83e829f8cb04\"><code>a3cbfd7</code></a></td><td><code>Trac #8450: add an example using \"imaginary_tolerance\" in plot().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25db6da5ba53b396ba40f41c03e36633a83871c4\"><code>25db6da</code></a></td><td><code>Trac #8450: replace a flaky test.</code></td></tr></table>\n",
    "created_at": "2022-01-05T15:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67056",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:44" align="right">comment:44</div>

I've reworked that doctest to check something useful (and added `abs tol`) instead of a specific blob of digits.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7feed3de81d12e1726e304403597c5a3c485f7a0"><code>7feed3d</code></a></td><td><code>Trac #8450: new fast-callable output wrapper for plotting.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82fc41c8c8b786aa09231738cdf323bf42475216"><code>82fc41c</code></a></td><td><code>Trac #8450: use fast_callable() in setup_for_eval_on_grid().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1344e0860b811cea7cdda303ff87fdbc07cc496"><code>f1344e0</code></a></td><td><code>Trac #8450: update the output from a few plotting doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/988abe965883848bda5e180b0b397bb783a88409"><code>988abe9</code></a></td><td><code>Trac #8450: pass imaginary tolerance down through plot.options.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/633b3d346abefd46431ea4c1e1c9ea991c82958d"><code>633b3d3</code></a></td><td><code>Trac #8450: remove imag_tol default from FastCallablePlotWrapper().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ee9ddfd66177c64e90f7ee095f89b4e1526194a"><code>3ee9ddf</code></a></td><td><code>Trac #8450: use CDF for symbolic expression fast-callables.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b80e0f7ddaf1fd456f3ad392e4f3df4986fc49b"><code>7b80e0f</code></a></td><td><code>Trac #8450: catch more cases in setup_for_eval_on_grid.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d6312c3f7cb6ab7e2f408b5c051c926f76dc48f"><code>4d6312c</code></a></td><td><code>Trac #8450: fix complex type error in real_nth_root().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3cbfd72bd8aca04ba8e92968c3d83e829f8cb04"><code>a3cbfd7</code></a></td><td><code>Trac #8450: add an example using "imaginary_tolerance" in plot().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25db6da5ba53b396ba40f41c03e36633a83871c4"><code>25db6da</code></a></td><td><code>Trac #8450: replace a flaky test.</code></td></tr></table>




---

archive/issue_comments_067057.json:
```json
{
    "body": "Changed commit from **[`2c086e2`](https://github.com/sagemath/sagetrac-mirror/commit/2c086e2db74951d6f13066e30a43aa188e61e8e6)** to **[`25db6da`](https://github.com/sagemath/sagetrac-mirror/commit/25db6da5ba53b396ba40f41c03e36633a83871c4)**",
    "created_at": "2022-01-05T15:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67057",
    "user": "https://github.com/orlitzky"
}
```

Changed commit from **[`2c086e2`](https://github.com/sagemath/sagetrac-mirror/commit/2c086e2db74951d6f13066e30a43aa188e61e8e6)** to **[`25db6da`](https://github.com/sagemath/sagetrac-mirror/commit/25db6da5ba53b396ba40f41c03e36633a83871c4)**



---

archive/issue_events_105007.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-01-05T15:31:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105007"
}
```



---

archive/issue_events_105008.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-01-05T15:31:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105008"
}
```



---

archive/issue_comments_067058.json:
```json
{
    "body": "Changed branch from **[u/dimpase/rebased/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/rebased/mjo/ticket/8450)** to **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)**",
    "created_at": "2022-01-05T15:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67058",
    "user": "https://github.com/orlitzky"
}
```

Changed branch from **[u/dimpase/rebased/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/rebased/mjo/ticket/8450)** to **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)**



---

archive/issue_events_105009.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-01-06T11:43:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105009"
}
```



---

archive/issue_events_105010.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-01-06T11:43:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105010"
}
```



---

archive/issue_comments_067059.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nlgtm",
    "created_at": "2022-01-06T11:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67059",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">comment:45</div>

lgtm



---

archive/issue_comments_067060.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nClass `FastCallablePlotWrapper`, method `__call__`,\ntest block needs double-colon:\n\n```diff\n-        Evaluation never fails and always returns a ``float``:\n+        Evaluation never fails and always returns a ``float``::\n```\n\nIt might also be worth checking why all patchbots\nreport pyflakes errors.",
    "created_at": "2022-01-08T06:08:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67060",
    "user": "https://github.com/slel"
}
```

<div id="comment:46" align="right">comment:46</div>

Class `FastCallablePlotWrapper`, method `__call__`,
test block needs double-colon:

```diff
-        Evaluation never fails and always returns a ``float``:
+        Evaluation never fails and always returns a ``float``::
```

It might also be worth checking why all patchbots
report pyflakes errors.



---

archive/issue_comments_067061.json:
```json
{
    "body": "Changed commit from **[`25db6da`](https://github.com/sagemath/sagetrac-mirror/commit/25db6da5ba53b396ba40f41c03e36633a83871c4)** to **[`5f4e2fb`](https://github.com/sagemath/sagetrac-mirror/commit/5f4e2fbd6d6c80f59bc833ff3d3a4071bd18dc0d)**",
    "created_at": "2022-01-08T13:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67061",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`25db6da`](https://github.com/sagemath/sagetrac-mirror/commit/25db6da5ba53b396ba40f41c03e36633a83871c4)** to **[`5f4e2fb`](https://github.com/sagemath/sagetrac-mirror/commit/5f4e2fbd6d6c80f59bc833ff3d3a4071bd18dc0d)**



---

archive/issue_events_105011.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-08T13:25:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105011"
}
```



---

archive/issue_events_105012.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-08T13:25:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105012"
}
```



---

archive/issue_comments_067062.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f4e2fbd6d6c80f59bc833ff3d3a4071bd18dc0d\"><code>5f4e2fb</code></a></td><td><code>Trac #8450: add a missing colon to a doctest.</code></td></tr></table>\n",
    "created_at": "2022-01-08T13:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67062",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f4e2fbd6d6c80f59bc833ff3d3a4071bd18dc0d"><code>5f4e2fb</code></a></td><td><code>Trac #8450: add a missing colon to a doctest.</code></td></tr></table>




---

archive/issue_comments_067063.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nThanks, setting back to positive review as the last commit is trivial.\n\nI looked at the pyflakes failures, but the logs all say that everything is OK.",
    "created_at": "2022-01-08T13:27:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67063",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:48" align="right">comment:48</div>

Thanks, setting back to positive review as the last commit is trivial.

I looked at the pyflakes failures, but the logs all say that everything is OK.



---

archive/issue_events_105013.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-01-08T13:27:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105013"
}
```



---

archive/issue_events_105014.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-01-08T13:27:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105014"
}
```



---

archive/issue_comments_067064.json:
```json
{
    "body": "Changed commit from **[`5f4e2fb`](https://github.com/sagemath/sagetrac-mirror/commit/5f4e2fbd6d6c80f59bc833ff3d3a4071bd18dc0d)** to **[`6531609`](https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f)**",
    "created_at": "2022-01-08T15:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67064",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f4e2fb`](https://github.com/sagemath/sagetrac-mirror/commit/5f4e2fbd6d6c80f59bc833ff3d3a4071bd18dc0d)** to **[`6531609`](https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f)**



---

archive/issue_comments_067065.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f\"><code>6531609</code></a></td><td><code>Trac #8450: drop superfluous set_random_seed() call.</code></td></tr></table>\n",
    "created_at": "2022-01-08T15:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67065",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f"><code>6531609</code></a></td><td><code>Trac #8450: drop superfluous set_random_seed() call.</code></td></tr></table>




---

archive/issue_events_105015.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-08T15:07:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105015"
}
```



---

archive/issue_events_105016.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-08T15:07:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105016"
}
```



---

archive/issue_events_105017.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-01-08T15:08:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105017"
}
```



---

archive/issue_events_105018.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-01-08T15:08:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105018"
}
```



---

archive/issue_comments_067066.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nAlso deleted a `set_random_seed()` call from a doctest that we don't need to add any more.",
    "created_at": "2022-01-08T15:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67066",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:50" align="right">comment:50</div>

Also deleted a `set_random_seed()` call from a doctest that we don't need to add any more.



---

archive/issue_events_105019.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-01-30T15:39:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105019"
}
```



---

archive/issue_events_105020.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-01-30T15:39:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105020"
}
```



---

archive/issue_comments_067067.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nSetting milestone to 9.6 now that 9.5 is out.",
    "created_at": "2022-01-30T15:39:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67067",
    "user": "https://github.com/slel"
}
```

<div id="comment:51" align="right">comment:51</div>

Setting milestone to 9.6 now that 9.5 is out.



---

archive/issue_comments_067068.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)** to **[`6531609`](https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f)**",
    "created_at": "2022-01-31T23:32:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67068",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mjo/ticket/8450](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/8450)** to **[`6531609`](https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f)**



---

archive/issue_events_105021.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-31T23:32:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105021"
}
```



---

archive/issue_events_105022.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0222526fb8646de09e5813efd10ecebe71a21646",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-01-31T23:32:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8450#event-105022"
}
```



---

archive/issue_comments_067069.json:
```json
{
    "body": "Changed commit from **[`6531609`](https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f)** to none",
    "created_at": "2022-02-18T12:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67069",
    "user": "https://github.com/kcrisman"
}
```

Changed commit from **[`6531609`](https://github.com/sagemath/sagetrac-mirror/commit/65316090c88f18dcaa8a1bc4db7965f806ea119f)** to none



---

archive/issue_comments_067070.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThanks for this fix, it will be very helpful!",
    "created_at": "2022-02-18T12:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8450#issuecomment-67070",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:53" align="right">comment:53</div>

Thanks for this fix, it will be very helpful!
