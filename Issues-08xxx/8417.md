# Issue 8417: improve CubeGraph and HyperStarGraph generation

archive/issues_008417.json:
```json
{
    "assignees": [
        "https://github.com/rlmill"
    ],
    "body": "see the title...\n\nComponent: **graph theory**\n\nAuthor: **Yann Laigle-Chapuy**\n\nReviewer: **Robert Miller**\n\nMerged: **sage-4.4.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/8417_\n\n",
    "closed_at": "2010-04-15T23:49:14Z",
    "created_at": "2010-03-02T11:00:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "improve CubeGraph and HyperStarGraph generation",
    "type": "issue",
    "updated_at": "2010-04-15T23:49:14Z",
    "url": "https://github.com/sagemath/sage/issues/8417",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```
see the title...

Component: **graph theory**

Author: **Yann Laigle-Chapuy**

Reviewer: **Robert Miller**

Merged: **sage-4.4.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/8417_





---

archive/issue_events_105772.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2010-03-02T11:00:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "milestone_number": null,
    "milestone_title": "sage-4.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105772"
}
```



---

archive/issue_events_105773.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2010-03-02T11:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "eeeeee",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105773"
}
```



---

archive/issue_events_105774.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2010-03-02T11:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105774"
}
```



---

archive/issue_events_105775.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2010-03-02T11:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105775"
}
```



---

archive/issue_events_105776.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-03-02T11:00:37Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "subject": "https://github.com/sagetrac-ylchapuy",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105776"
}
```



---

archive/issue_comments_066486.json:
```json
{
    "body": "Attachment: **[trac_8417.patch.gz](https://github.com/sagemath/sage/files/ticket8417/trac_8417.patch.gz)**",
    "created_at": "2010-03-02T11:02:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8417#issuecomment-66486",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

Attachment: **[trac_8417.patch.gz](https://github.com/sagemath/sage/files/ticket8417/trac_8417.patch.gz)**



---

archive/issue_comments_066487.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nthe provided patch does also some 'cosmetic' changes, replacing \n`range(2*n)[n:]`with `range(n,2*n)`.",
    "created_at": "2010-03-02T11:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8417#issuecomment-66487",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:1" align="right">comment:1</div>

the provided patch does also some 'cosmetic' changes, replacing 
`range(2*n)[n:]`with `range(n,2*n)`.



---

archive/issue_events_105777.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2010-03-02T11:03:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105777"
}
```



---

archive/issue_comments_066488.json:
```json
{
    "body": "Reviewer: **Robert Miller**",
    "created_at": "2010-03-09T16:56:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8417#issuecomment-66488",
    "user": "https://github.com/rlmill"
}
```

Reviewer: **Robert Miller**



---

archive/issue_comments_066489.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nApply both patches in order.",
    "created_at": "2010-03-09T16:56:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8417#issuecomment-66489",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:2" align="right">comment:2</div>

Apply both patches in order.



---

archive/issue_events_105778.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-03-09T16:56:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105778"
}
```



---

archive/issue_events_105779.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-03-09T16:56:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105779"
}
```



---

archive/issue_comments_066490.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nBeware, with your patch applied I get:\n\n```\nsage: %timeit graphs.CubeGraph(12)\n5 loops, best of 3: 2.95 s per loop\nsage: time g = graphs.CubeGraph(14)\nCPU times: user 72.66 s, sys: 0.42 s, total: 73.08 s\n```\nwhereas with mine only I have:\n\n```\nsage: %timeit graphs.CubeGraph(12)\n5 loops, best of 3: 653 ms per loop\nsage: time g = graphs.CubeGraph(14)\nCPU times: user 3.10 s, sys: 0.06 s, total: 3.16 s\n```\n\nThis is mainly because using the construction `Graph(d, ...)` add\nsome checks I avoid setting vertices and edges myself.",
    "created_at": "2010-03-09T18:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8417#issuecomment-66490",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:3" align="right">comment:3</div>

Beware, with your patch applied I get:

```
sage: %timeit graphs.CubeGraph(12)
5 loops, best of 3: 2.95 s per loop
sage: time g = graphs.CubeGraph(14)
CPU times: user 72.66 s, sys: 0.42 s, total: 73.08 s
```
whereas with mine only I have:

```
sage: %timeit graphs.CubeGraph(12)
5 loops, best of 3: 653 ms per loop
sage: time g = graphs.CubeGraph(14)
CPU times: user 3.10 s, sys: 0.06 s, total: 3.16 s
```

This is mainly because using the construction `Graph(d, ...)` add
some checks I avoid setting vertices and edges myself.



---

archive/issue_comments_066491.json:
```json
{
    "body": "apply on top of other patch",
    "created_at": "2010-03-09T18:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8417#issuecomment-66491",
    "user": "https://github.com/rlmill"
}
```

apply on top of other patch



---

archive/issue_comments_066492.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAttachment: **[trac_8417-ref.patch.gz](https://github.com/sagemath/sage/files/ticket8417/trac_8417-ref.patch.gz)**\n\nReplying to [@sagetrac-ylchapuy](#comment:3):\n> Beware, with your patch applied I get:\n\nThank you for pointing this out. I've reverted that part of the patch.\n\nCan you see any way to make the overhead from checking in this case any better? Also, what do you think about a check=False option in graph construction, more generally?",
    "created_at": "2010-03-09T18:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8417#issuecomment-66492",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:4" align="right">comment:4</div>

Attachment: **[trac_8417-ref.patch.gz](https://github.com/sagemath/sage/files/ticket8417/trac_8417-ref.patch.gz)**

Replying to [@sagetrac-ylchapuy](#comment:3):
> Beware, with your patch applied I get:

Thank you for pointing this out. I've reverted that part of the patch.

Can you see any way to make the overhead from checking in this case any better? Also, what do you think about a check=False option in graph construction, more generally?



---

archive/issue_events_105780.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-15T23:49:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105780"
}
```



---

archive/issue_events_105781.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-15T23:49:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/8417#event-105781"
}
```



---

archive/issue_comments_066493.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMerged into 4.4.alpha0:\n- trac_8417.patch\n- trac_8417-ref.patch",
    "created_at": "2010-04-15T23:49:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8417#issuecomment-66493",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

Merged into 4.4.alpha0:
- trac_8417.patch
- trac_8417-ref.patch



---

archive/issue_comments_066494.json:
```json
{
    "body": "Merged: **sage-4.4.alpha0**",
    "created_at": "2010-04-15T23:49:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/8417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/8417#issuecomment-66494",
    "user": "https://github.com/jhpalmieri"
}
```

Merged: **sage-4.4.alpha0**
