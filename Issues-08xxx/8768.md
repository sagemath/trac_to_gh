# Issue 8768: gnutls-2.2.1.p5 doesn't build on Solaris 10 x86 (fulvia) with GCC-4.5.0

archive/issues_008768.json:
```json
{
    "body": "\n```\ngcc -std=gnu99 -g -O2 -D_REENTRANT -D_THREAD_SAFE -I/home/wstein/screen/fulvia/sage-4.4/local/include -g -O2 -D_REENTRANT -D_THREAD_SAFE -Wno-pointer-sign -o .libs/gnutls-serv serv-gaa.o serv.o common.o select.o  -L/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/lib/.libs ../lib/.libs/libgnutls.so -L/home/wstein/screen/fulvia/sage-4.4/local/lib ../libextra/.libs/libgnutls-extra.so /home/wstein/screen/fulvia/sage-4.4/local/lib/libopencdk.so /home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/lib/.libs/libgnutls.so -lz ../gl/.libs/libgnu.a /home/wstein/screen/fulvia/sage-4.4/local/lib/libgcrypt.so /home/wstein/screen/fulvia/sage-4.4/local/lib/libgpg-error.so -lsocket  -R/home/wstein/screen/fulvia/sage-4.4/local/lib\nserv.o: In function `peer_print_info':\n/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src/serv.c:489: undefined reference to `gnutls_x509_crt_print'\ncommon.o: In function `print_x509_info':\n/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src/common.c:151: undefined reference to `gnutls_x509_crt_check_hostname'\n../libextra/.libs/libgnutls-extra.so: undefined reference to `_gnutls_hostname_compare'\ncollect2: ld returned 1 exit status\nmake[5]: *** [gnutls-serv] Error 1\nmake[5]: Leaving directory `/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src'\nmake[4]: *** [all-recursive] Error 1\nmake[4]: Leaving directory `/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src'\nmake[3]: *** [all-recursive] Error 1\nmake[3]: Leaving directory `/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src'\n```\n\nMore machine details:\n\n```\n-bash-3.00$ uname -a\nSunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500\n-bash-3.00$ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3/libexec/gcc/sparc-sun-solaris2.10/4.5.0/lto-wrapper\nTarget: sparc-sun-solaris2.10\nConfigured with: /usr/local/gcc-4.5.0/src/gcc-4.5.0/configure --enable-languages=c,c++,fortran --with-gnu-as --with-as=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/ld --with-gmp=/usr/local/mpir-1.2.2/sparc-SunOS-ultrasparc3-gcc-4.4.2-abi32 --with-mpfr=/usr/local/mpfr-2.4.2/sparc-SunOS-ultrasparc3-mpir-1.2.2-gcc-4.4.2-abi32 --with-mpc=/usr/local/mpc-0.8.1/sparc-SunOS-ultrasparc3-mpfr-2.4.2-mpir-1.2.2-gcc-4.4.3-abi32 --prefix=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3\nThread model: posix\ngcc version 4.5.0 (GCC)\n```\n\n}}}\n\nAssignee: drkirkby\n\nCC:  @jhpalmieri @jaapspies\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/8768\n\n",
    "closed_at": "2010-07-31T01:15:21Z",
    "created_at": "2010-04-26T18:09:29Z",
    "labels": [
        "component: porting: solaris",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "gnutls-2.2.1.p5 doesn't build on Solaris 10 x86 (fulvia) with GCC-4.5.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8768",
    "user": "https://github.com/williamstein"
}
```

```
gcc -std=gnu99 -g -O2 -D_REENTRANT -D_THREAD_SAFE -I/home/wstein/screen/fulvia/sage-4.4/local/include -g -O2 -D_REENTRANT -D_THREAD_SAFE -Wno-pointer-sign -o .libs/gnutls-serv serv-gaa.o serv.o common.o select.o  -L/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/lib/.libs ../lib/.libs/libgnutls.so -L/home/wstein/screen/fulvia/sage-4.4/local/lib ../libextra/.libs/libgnutls-extra.so /home/wstein/screen/fulvia/sage-4.4/local/lib/libopencdk.so /home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/lib/.libs/libgnutls.so -lz ../gl/.libs/libgnu.a /home/wstein/screen/fulvia/sage-4.4/local/lib/libgcrypt.so /home/wstein/screen/fulvia/sage-4.4/local/lib/libgpg-error.so -lsocket  -R/home/wstein/screen/fulvia/sage-4.4/local/lib
serv.o: In function `peer_print_info':
/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src/serv.c:489: undefined reference to `gnutls_x509_crt_print'
common.o: In function `print_x509_info':
/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src/common.c:151: undefined reference to `gnutls_x509_crt_check_hostname'
../libextra/.libs/libgnutls-extra.so: undefined reference to `_gnutls_hostname_compare'
collect2: ld returned 1 exit status
make[5]: *** [gnutls-serv] Error 1
make[5]: Leaving directory `/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src'
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory `/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src'
```

More machine details:

```
-bash-3.00$ uname -a
SunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500
-bash-3.00$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3/libexec/gcc/sparc-sun-solaris2.10/4.5.0/lto-wrapper
Target: sparc-sun-solaris2.10
Configured with: /usr/local/gcc-4.5.0/src/gcc-4.5.0/configure --enable-languages=c,c++,fortran --with-gnu-as --with-as=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/ld --with-gmp=/usr/local/mpir-1.2.2/sparc-SunOS-ultrasparc3-gcc-4.4.2-abi32 --with-mpfr=/usr/local/mpfr-2.4.2/sparc-SunOS-ultrasparc3-mpir-1.2.2-gcc-4.4.2-abi32 --with-mpc=/usr/local/mpc-0.8.1/sparc-SunOS-ultrasparc3-mpfr-2.4.2-mpir-1.2.2-gcc-4.4.3-abi32 --prefix=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3
Thread model: posix
gcc version 4.5.0 (GCC)
```

}}}

Assignee: drkirkby

CC:  @jhpalmieri @jaapspies

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/8768





---

archive/issue_comments_094971.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2010-04-26T20:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94971",
    "user": "https://github.com/williamstein"
}
```

Changing priority from major to critical.



---

archive/issue_comments_094972.json:
```json
{
    "body": "<a id='comment:1'></a>\nNote: On SPARC Solaris 10, GNUtls *also* fails to build, with a similar error.  However, the reported undefined symbol that stops the build is different than on x86. Here is what we get on mark:\n\n```\nchecking whether we are using the GNU Fortran 77 compiler... yes\nchecking whether gfortran accepts -g... yes\nchecking the maximum length of command line arguments... rint_x509_info':\n/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src/common.c:151: undefined reference to\nnutls_x509_crt_check_hostname'\n../libextra/.libs/libgnutls-extra.so: undefined reference to gnutls_hostname_compare'\ncollect2: ld returned 1 exit status\nmake[5]: *** [gnutls-serv] Error 1\nmake[5]: Leaving directory home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src'\nmake[4]: *** [all-recursive] Error 1\nmake[4]: Leaving directory home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src'\nmake[3]: *** [all-recursive] Error 1\nmake[3]: Leaving directory home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src'\nmake[2]: *** [all] Error 2\nmake[2]: Leaving directory home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src'\nfailed to build GNUTLS\n\nreal    2m45.511s\nuser    0m48.789s\nsys     1m1.201s\nsage: An error occurred while installing gnutls-2.2.1.p5\nq^[^[^[\n\n\n^Cmake: *** [build] Error 130\n-bash-3.00$\n-bash-3.00$  gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3/libexec/gcc/sparc-sun-solaris2.10/4.5.0/lto\n-wrapper\nTarget: sparc-sun-solaris2.10\nConfigured with: /usr/local/gcc-4.5.0/src/gcc-4.5.0/configure --enable-languages=c,c++,fortran --with-gnu-as\n --with-as=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/as --with-gnu-ld --with-ld=/usr/\nlocal/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/ld --with-gmp=/usr/local/mpir-1.2.2/sparc-SunOS-\nultrasparc3-gcc-4.4.2-abi32 --with-mpfr=/usr/local/mpfr-2.4.2/sparc-SunOS-ultrasparc3-mpir-1.2.2-gcc-4.4.2-a\nbi32 --with-mpc=/usr/local/mpc-0.8.1/sparc-SunOS-ultrasparc3-mpfr-2.4.2-mpir-1.2.2-gcc-4.4.3-abi32 --prefix=\n/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3\nThread model: posix\ngcc version 4.5.0 (GCC)\n-bash-3.00$ uname -a\nSunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500\n-bash-3.00$ uname -a\nSunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500\n-bash-3.00$ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3/libexec/gcc/sparc-sun-solaris2.10/4.5.0/lto\n-wrapper\nTarget: sparc-sun-solaris2.10\nConfigured with: /usr/local/gcc-4.5.0/src/gcc-4.5.0/configure --enable-languages=c,c++,fortran --with-gnu-as\n --with-as=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/ld --with-gmp=/usr/local/mpir-1.2.2/sparc-SunOS-ultrasparc3-gcc-4.4.2-abi32 --with-mpfr=/usr/local/mpfr-2.4.2/sparc-SunOS-ultrasparc3-mpir-1.2.2-gcc-4.4.2-abi32 --with-mpc=/usr/local/mpc-0.8.1/sparc-SunOS-ultrasparc3-mpfr-2.4.2-mpir-1.2.2-gcc-4.4.3-abi32 --prefix=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3\nThread model: posix\ngcc version 4.5.0 (GCC)\n-bash-3.00$ hostname\nmark\n```",
    "created_at": "2010-04-26T20:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94972",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>
Note: On SPARC Solaris 10, GNUtls *also* fails to build, with a similar error.  However, the reported undefined symbol that stops the build is different than on x86. Here is what we get on mark:

```
checking whether we are using the GNU Fortran 77 compiler... yes
checking whether gfortran accepts -g... yes
checking the maximum length of command line arguments... rint_x509_info':
/home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src/common.c:151: undefined reference to
nutls_x509_crt_check_hostname'
../libextra/.libs/libgnutls-extra.so: undefined reference to gnutls_hostname_compare'
collect2: ld returned 1 exit status
make[5]: *** [gnutls-serv] Error 1
make[5]: Leaving directory home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src'
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src/src'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src'
make[2]: *** [all] Error 2
make[2]: Leaving directory home/wstein/screen/fulvia/sage-4.4/spkg/build/gnutls-2.2.1.p5/src'
failed to build GNUTLS

real    2m45.511s
user    0m48.789s
sys     1m1.201s
sage: An error occurred while installing gnutls-2.2.1.p5
q^[^[^[


^Cmake: *** [build] Error 130
-bash-3.00$
-bash-3.00$  gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3/libexec/gcc/sparc-sun-solaris2.10/4.5.0/lto
-wrapper
Target: sparc-sun-solaris2.10
Configured with: /usr/local/gcc-4.5.0/src/gcc-4.5.0/configure --enable-languages=c,c++,fortran --with-gnu-as
 --with-as=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/as --with-gnu-ld --with-ld=/usr/
local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/ld --with-gmp=/usr/local/mpir-1.2.2/sparc-SunOS-
ultrasparc3-gcc-4.4.2-abi32 --with-mpfr=/usr/local/mpfr-2.4.2/sparc-SunOS-ultrasparc3-mpir-1.2.2-gcc-4.4.2-a
bi32 --with-mpc=/usr/local/mpc-0.8.1/sparc-SunOS-ultrasparc3-mpfr-2.4.2-mpir-1.2.2-gcc-4.4.3-abi32 --prefix=
/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3
Thread model: posix
gcc version 4.5.0 (GCC)
-bash-3.00$ uname -a
SunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500
-bash-3.00$ uname -a
SunOS mark 5.10 Generic_127111-01 sun4u sparc SUNW,Sun-Blade-2500
-bash-3.00$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3/libexec/gcc/sparc-sun-solaris2.10/4.5.0/lto
-wrapper
Target: sparc-sun-solaris2.10
Configured with: /usr/local/gcc-4.5.0/src/gcc-4.5.0/configure --enable-languages=c,c++,fortran --with-gnu-as
 --with-as=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/ld --with-gmp=/usr/local/mpir-1.2.2/sparc-SunOS-ultrasparc3-gcc-4.4.2-abi32 --with-mpfr=/usr/local/mpfr-2.4.2/sparc-SunOS-ultrasparc3-mpir-1.2.2-gcc-4.4.2-abi32 --with-mpc=/usr/local/mpc-0.8.1/sparc-SunOS-ultrasparc3-mpfr-2.4.2-mpir-1.2.2-gcc-4.4.3-abi32 --prefix=/usr/local/gcc-4.5.0/sparc-SunOS-ultrasparc3
Thread model: posix
gcc version 4.5.0 (GCC)
-bash-3.00$ hostname
mark
```



---

archive/issue_comments_094973.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2010-04-26T20:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94973",
    "user": "https://github.com/williamstein"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_094974.json:
```json
{
    "body": "<a id='comment:3'></a>\nNote, gcc 4.5 is **not** the latest gcc, but gcc 4.4.4 is: See\n\nhttp://gcc.gnu.org/\n\n```\nNews\n\nApril 29, 2010\n    GCC 4.4.4 has been released.\nApril 14, 2010\n    GCC 4.5.0 has been released.\n```\n\nDave",
    "created_at": "2010-05-06T23:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94974",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:3'></a>
Note, gcc 4.5 is **not** the latest gcc, but gcc 4.4.4 is: See

http://gcc.gnu.org/

```
News

April 29, 2010
    GCC 4.4.4 has been released.
April 14, 2010
    GCC 4.5.0 has been released.
```

Dave



---

archive/issue_comments_094975.json:
```json
{
    "body": "<a id='comment:4'></a>\nIt would probably be better if gcc 4.5 was configured with the Sun linker rather than the GNU linker. On OpenSolaris, best results have been achieved using the GNU assembler and the Sun linker. \n\nOn Solaris 10 (SPARC), both the Sun linker and Sun assembler are used, but that combo does not work too well on OpenSolaris, where the GNU assembler seems to be necessary. \n\n\n\nDave",
    "created_at": "2010-05-07T21:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94975",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:4'></a>
It would probably be better if gcc 4.5 was configured with the Sun linker rather than the GNU linker. On OpenSolaris, best results have been achieved using the GNU assembler and the Sun linker. 

On Solaris 10 (SPARC), both the Sun linker and Sun assembler are used, but that combo does not work too well on OpenSolaris, where the GNU assembler seems to be necessary. 



Dave



---

archive/issue_comments_094976.json:
```json
{
    "body": "<a id='comment:5'></a>\nI've not tried gcc 4.5, but gcc 4.4.4 configured with the Sun linker and GNU assembler and it builds OK on my Sun Ultra 27 (Xeon processor) running OpenSolaris 06/2009. \n\nNote the version 4.5 compiler where this problem was observerved was configured with the option\n\n\n```\n--with-ld=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/ld\n```\n\nwhich I've personally always found to cause more problems than the Sun linker. I also note that using the Sun linker is recommended by GNU - see http://gcc.gnu.org/install/specific.html#ix86-x-solaris210 \n\nI think it would be better if the gcc on fulvia was configured the way recommended in the GNU documentation. \n\nDave",
    "created_at": "2010-05-22T08:25:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94976",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:5'></a>
I've not tried gcc 4.5, but gcc 4.4.4 configured with the Sun linker and GNU assembler and it builds OK on my Sun Ultra 27 (Xeon processor) running OpenSolaris 06/2009. 

Note the version 4.5 compiler where this problem was observerved was configured with the option


```
--with-ld=/usr/local/binutils-2.20.1/sparc-SunOS-ultrasparc3-gcc-4.4.3/bin/ld
```

which I've personally always found to cause more problems than the Sun linker. I also note that using the Sun linker is recommended by GNU - see http://gcc.gnu.org/install/specific.html#ix86-x-solaris210 

I think it would be better if the gcc on fulvia was configured the way recommended in the GNU documentation. 

Dave



---

archive/issue_comments_094977.json:
```json
{
    "body": "<a id='comment:6'></a>\nFor the record, this is how gcc 4.4.4 was configured by me:\n\n```\ndrkirkby@hawk:~/sage-4.4.2/spkg$ gcc -v\nUsing built-in specs.\nTarget: i386-pc-solaris2.11\nConfigured with: ../gcc-4.4.4/configure --prefix=/usr/local/gcc-4.4.4 --with-as=/usr/local/binutils-2.20/bin/as --with-ld=/usr/ccs/bin/ld --with-gmp=/usr/local --with-mpfr=/usr/local\nThread model: posix\ngcc version 4.4.4 (GCC) \n```\n\nusing the Sun linker and GNU assembler, as recommended at http://gcc.gnu.org/install/specific.html#ix86-x-solaris210",
    "created_at": "2010-05-22T08:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94977",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:6'></a>
For the record, this is how gcc 4.4.4 was configured by me:

```
drkirkby@hawk:~/sage-4.4.2/spkg$ gcc -v
Using built-in specs.
Target: i386-pc-solaris2.11
Configured with: ../gcc-4.4.4/configure --prefix=/usr/local/gcc-4.4.4 --with-as=/usr/local/binutils-2.20/bin/as --with-ld=/usr/ccs/bin/ld --with-gmp=/usr/local --with-mpfr=/usr/local
Thread model: posix
gcc version 4.4.4 (GCC) 
```

using the Sun linker and GNU assembler, as recommended at http://gcc.gnu.org/install/specific.html#ix86-x-solaris210



---

archive/issue_comments_094978.json:
```json
{
    "body": "<a id='comment:7'></a>\nOops, I see this was Solaris 10, not OpenSolaris (aka Solaris 11). But the link I provided is for Solaris 10 or later on x86, so the point is still valid, that this version of gcc is probably not configured in the ideal way. \n\nIt looks like a linker problem.\n\nDave",
    "created_at": "2010-05-22T08:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94978",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:7'></a>
Oops, I see this was Solaris 10, not OpenSolaris (aka Solaris 11). But the link I provided is for Solaris 10 or later on x86, so the point is still valid, that this version of gcc is probably not configured in the ideal way. 

It looks like a linker problem.

Dave



---

archive/issue_events_021352.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-03T04:07:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8768#event-21352"
}
```



---

archive/issue_comments_094979.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis is not a 4.4.3 blocker.",
    "created_at": "2010-06-03T04:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94979",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:8'></a>
This is not a 4.4.3 blocker.



---

archive/issue_comments_094980.json:
```json
{
    "body": "<a id='comment:9'></a>\nI'm closing this as invalid. gnutls builds fine on fulvia. I've built it, as has John Palmieri. \n\nThe reason you had trouble was that gcc was mis-configured. I'm of the opinion it is better to use both the Sun linker and Sun assembler on SPARC. Since Mariah provided a gcc configured in this way at:\n\n```\n/usr/local/gcc-4.5.0/x86_64-SunOS-core2-sun-ld/bin/gcc\n```\n\nthe problem has gone away. Note, the default compiler on fulvia is not configured like this. \n\n```\n64 drkirkby@fulvia:[~/fulvia/32/sage-4.5.1] $ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/x86_64-SunOS-core2-sun-ld/libexec/gcc/i386-pc-solaris2.10/4.5.0/lto-wrapper\nTarget: i386-pc-solaris2.10\nConfigured with: /usr/local/gcc-4.5.0/src/gcc-4.5.0/configure --enable-languages=c,c++,fortran --with-gnu-as --with-as=/usr/local/binutils-2.20.1/x86_64-SunOS-core2-gcc-4.4.3/bin/as --with-ld=/usr/ccs/bin/ld --with-gmp=/usr/local/gmp-5.0.1/x86_64-SunOS-core2-gcc-4.5.0-abi32 --with-mpfr=/usr/local/mpfr-3.0.0/x86_64-SunOS-core2-gmp-5.0.1-gcc-4.5.0-abi32 --with-mpc=/usr/local/mpc-0.8.2/x86_64-SunOS-core2-mpfr-3.0.0-gmp-5.0.1-gcc-4.5.0-abi32 --prefix=/usr/local/gcc-4.5.0/x86_64-SunOS-core2-sun-ld\nThread model: posix\ngcc version 4.5.0 (GCC) \n```\n\nAn inspection of the log shows gnutls installed OK. \n\n```\n64 drkirkby@fulvia:[~/fulvia/32/sage-4.5.1] $ tail -30  spkg/logs/gnutls-2.2.1.p5.log\n  for file in Makefile.in.in remove-potcdate.sin quot.sed boldquot.sed en@quot.header en@boldquot.header insert-header.sin Rules-quot   Makevars.template; do \\\n    ../build-aux/install-sh -c -m 644 ./$file \\\n\t\t    /home/drkirkby/fulvia/32/sage-4.5.1/local/share/gettext/po/$file; \\\n  done; \\\n  for file in Makevars; do \\\n    rm -f /home/drkirkby/fulvia/32/sage-4.5.1/local/share/gettext/po/$file; \\\n  done; \\\nelse \\\n  : ; \\\nfi\nmake[3]: Leaving directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src/po'\nmake[3]: Entering directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'\nmake[4]: Entering directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'\nmake[4]: warning: -jN forced in submake: disabling jobserver mode.\nmake[4]: Nothing to be done for `install-exec-am'.\nmake[4]: Nothing to be done for `install-data-am'.\nmake[4]: Leaving directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'\nmake[3]: Leaving directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'\nmake[2]: Leaving directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'\n\nreal\t39m58.479s\nuser\t1m9.593s\nsys\t1m50.962s\nSuccessfully installed gnutls-2.2.1.p5\nNow cleaning up tmp files.\nrm: Cannot remove any directory in the path of the current working directory\n/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing gnutls-2.2.1.p5.spkg\n```\n\nDave",
    "created_at": "2010-07-31T01:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94980",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:9'></a>
I'm closing this as invalid. gnutls builds fine on fulvia. I've built it, as has John Palmieri. 

The reason you had trouble was that gcc was mis-configured. I'm of the opinion it is better to use both the Sun linker and Sun assembler on SPARC. Since Mariah provided a gcc configured in this way at:

```
/usr/local/gcc-4.5.0/x86_64-SunOS-core2-sun-ld/bin/gcc
```

the problem has gone away. Note, the default compiler on fulvia is not configured like this. 

```
64 drkirkby@fulvia:[~/fulvia/32/sage-4.5.1] $ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/x86_64-SunOS-core2-sun-ld/libexec/gcc/i386-pc-solaris2.10/4.5.0/lto-wrapper
Target: i386-pc-solaris2.10
Configured with: /usr/local/gcc-4.5.0/src/gcc-4.5.0/configure --enable-languages=c,c++,fortran --with-gnu-as --with-as=/usr/local/binutils-2.20.1/x86_64-SunOS-core2-gcc-4.4.3/bin/as --with-ld=/usr/ccs/bin/ld --with-gmp=/usr/local/gmp-5.0.1/x86_64-SunOS-core2-gcc-4.5.0-abi32 --with-mpfr=/usr/local/mpfr-3.0.0/x86_64-SunOS-core2-gmp-5.0.1-gcc-4.5.0-abi32 --with-mpc=/usr/local/mpc-0.8.2/x86_64-SunOS-core2-mpfr-3.0.0-gmp-5.0.1-gcc-4.5.0-abi32 --prefix=/usr/local/gcc-4.5.0/x86_64-SunOS-core2-sun-ld
Thread model: posix
gcc version 4.5.0 (GCC) 
```

An inspection of the log shows gnutls installed OK. 

```
64 drkirkby@fulvia:[~/fulvia/32/sage-4.5.1] $ tail -30  spkg/logs/gnutls-2.2.1.p5.log
  for file in Makefile.in.in remove-potcdate.sin quot.sed boldquot.sed en@quot.header en@boldquot.header insert-header.sin Rules-quot   Makevars.template; do \
    ../build-aux/install-sh -c -m 644 ./$file \
		    /home/drkirkby/fulvia/32/sage-4.5.1/local/share/gettext/po/$file; \
  done; \
  for file in Makevars; do \
    rm -f /home/drkirkby/fulvia/32/sage-4.5.1/local/share/gettext/po/$file; \
  done; \
else \
  : ; \
fi
make[3]: Leaving directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src/po'
make[3]: Entering directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'
make[4]: Entering directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'
make[4]: warning: -jN forced in submake: disabling jobserver mode.
make[4]: Nothing to be done for `install-exec-am'.
make[4]: Nothing to be done for `install-data-am'.
make[4]: Leaving directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'
make[3]: Leaving directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'
make[2]: Leaving directory `/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5/src'

real	39m58.479s
user	1m9.593s
sys	1m50.962s
Successfully installed gnutls-2.2.1.p5
Now cleaning up tmp files.
rm: Cannot remove any directory in the path of the current working directory
/home/drkirkby/fulvia/32/sage-4.5.1/spkg/build/gnutls-2.2.1.p5
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing gnutls-2.2.1.p5.spkg
```

Dave



---

archive/issue_events_021353.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-07-31T01:15:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8768#event-21353"
}
```



---

archive/issue_comments_094981.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2010-07-31T01:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94981",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Resolution: invalid



---

archive/issue_comments_094982.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [drkirkby](#comment%3A9):\n\n> The reason you had trouble was that gcc was mis-configured. I'm of the opinion it is better to use both the Sun linker and Sun assembler on SPARC. Since Mariah provided a gcc configured in this way at:\n\n\nCorrection, this is not SPARC, but x86. In which case, IMHO, gcc should be configured with the Sun linker and GNU assembler. Since Mariah provided such a gcc at \n\n```\n/usr/local/gcc-4.5.0/x86_64-SunOS-core2-sun-ld/bin/gcc\n```\n\nthe problem has gone. So this remains invalid.",
    "created_at": "2010-07-31T01:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94982",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:10'></a>
Replying to [drkirkby](#comment%3A9):

> The reason you had trouble was that gcc was mis-configured. I'm of the opinion it is better to use both the Sun linker and Sun assembler on SPARC. Since Mariah provided a gcc configured in this way at:


Correction, this is not SPARC, but x86. In which case, IMHO, gcc should be configured with the Sun linker and GNU assembler. Since Mariah provided such a gcc at 

```
/usr/local/gcc-4.5.0/x86_64-SunOS-core2-sun-ld/bin/gcc
```

the problem has gone. So this remains invalid.



---

archive/issue_events_021354.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-07-31T21:54:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8768#event-21354"
}
```



---

archive/issue_events_021355.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-07-31T21:54:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8768#event-21355"
}
```



---

archive/issue_comments_094983.json:
```json
{
    "body": "<a id='comment:12'></a>\nI see the error in the description when I compile 4.5.3 on fulvia.  Perhaps I've misconfigured the environment?  I've sourced `/usr/local/skynet_bash_profile` and I get\n\n```sh\n$ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.1/x86_64-SunOS-core2/libexec/gcc/i386-pc-solaris2.10/4.5.1/lto-wrapper\nTarget: i386-pc-solaris2.10\nConfigured with: /usr/local/gcc-4.5.1/src/gcc-4.5.1/configure --enable-languages=c,c++,fortran --with-gnu-as --with-as=/usr/local/binutils-2.20.1/x86_64-SunOS-core2-gcc-4.4.3/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.20.1/x86_64-SunOS-core2-gcc-4.4.3/bin/ld --with-gmp=/usr/local/gmp-5.0.1/x86_64-SunOS-core2-gcc-4.5.0-abi32 --with-mpfr=/usr/local/mpfr-3.0.0/x86_64-SunOS-core2-gmp-5.0.1-gcc-4.5.0-abi32 --with-mpc=/usr/local/mpc-0.8.2/x86_64-SunOS-core2-mpfr-3.0.0-gmp-5.0.1-gcc-4.5.0-abi32 --prefix=/usr/local/gcc-4.5.1/x86_64-SunOS-core2\nThread model: posix\ngcc version 4.5.1 (GCC) \n```",
    "created_at": "2010-09-12T22:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94983",
    "user": "https://github.com/qed777"
}
```

<a id='comment:12'></a>
I see the error in the description when I compile 4.5.3 on fulvia.  Perhaps I've misconfigured the environment?  I've sourced `/usr/local/skynet_bash_profile` and I get

```sh
$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.1/x86_64-SunOS-core2/libexec/gcc/i386-pc-solaris2.10/4.5.1/lto-wrapper
Target: i386-pc-solaris2.10
Configured with: /usr/local/gcc-4.5.1/src/gcc-4.5.1/configure --enable-languages=c,c++,fortran --with-gnu-as --with-as=/usr/local/binutils-2.20.1/x86_64-SunOS-core2-gcc-4.4.3/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.20.1/x86_64-SunOS-core2-gcc-4.4.3/bin/ld --with-gmp=/usr/local/gmp-5.0.1/x86_64-SunOS-core2-gcc-4.5.0-abi32 --with-mpfr=/usr/local/mpfr-3.0.0/x86_64-SunOS-core2-gmp-5.0.1-gcc-4.5.0-abi32 --with-mpc=/usr/local/mpc-0.8.2/x86_64-SunOS-core2-mpfr-3.0.0-gmp-5.0.1-gcc-4.5.0-abi32 --prefix=/usr/local/gcc-4.5.1/x86_64-SunOS-core2
Thread model: posix
gcc version 4.5.1 (GCC) 
```



---

archive/issue_comments_094984.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [mpatel](#comment%3A12):\n> I see the error in the description when I compile 4.5.3 on fulvia.  Perhaps I've misconfigured the environment?  I've sourced `/usr/local/skynet_bash_profile` and I get [...]\n\n\nPreprending `/usr/local/gcc-4.5.1/x86_64-SunOS-core2-sun-ld/bin` to the `PATH` appears to fix this problem.",
    "created_at": "2010-09-12T23:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94984",
    "user": "https://github.com/qed777"
}
```

<a id='comment:13'></a>
Replying to [mpatel](#comment%3A12):
> I see the error in the description when I compile 4.5.3 on fulvia.  Perhaps I've misconfigured the environment?  I've sourced `/usr/local/skynet_bash_profile` and I get [...]


Preprending `/usr/local/gcc-4.5.1/x86_64-SunOS-core2-sun-ld/bin` to the `PATH` appears to fix this problem.



---

archive/issue_comments_094985.json:
```json
{
    "body": "<a id='comment:14'></a>\nThat's right, the settings in /usr/local/skynet_bash_profile are set up this way, even though Sage won't build with those settings.  See [http://wiki.sagemath.org/skynet](http://wiki.sagemath.org/skynet) for instructions on how to set up fulvia to build Sage.",
    "created_at": "2010-09-13T01:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94985",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'></a>
That's right, the settings in /usr/local/skynet_bash_profile are set up this way, even though Sage won't build with those settings.  See [http://wiki.sagemath.org/skynet](http://wiki.sagemath.org/skynet) for instructions on how to set up fulvia to build Sage.



---

archive/issue_comments_094986.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks.  I'll adapt the settings for fulvia and the marks from the wiki page.",
    "created_at": "2010-09-13T05:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94986",
    "user": "https://github.com/qed777"
}
```

<a id='comment:15'></a>
Thanks.  I'll adapt the settings for fulvia and the marks from the wiki page.



---

archive/issue_comments_094987.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [mpatel](#comment%3A15):\n> Thanks.  I'll adapt the settings for fulvia and the marks from the wiki page.\n  \nI've just updated that Wiki (about 10 minutes ago_, as it said Sage would not build on fulvia, but in fact it does. Also, Sage should now build 64-bit on `mark` and `mark2`, though as I remarked there, the build will be unstable. I suggest you re-read the particular section of interest. \n\nI also added the need to read\n\n```\n/usr/local/README.background_jobs\n```",
    "created_at": "2010-09-13T10:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8768",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8768#issuecomment-94987",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:16'></a>
Replying to [mpatel](#comment%3A15):
> Thanks.  I'll adapt the settings for fulvia and the marks from the wiki page.
  
I've just updated that Wiki (about 10 minutes ago_, as it said Sage would not build on fulvia, but in fact it does. Also, Sage should now build 64-bit on `mark` and `mark2`, though as I remarked there, the build will be unstable. I suggest you re-read the particular section of interest. 

I also added the need to read

```
/usr/local/README.background_jobs
```
