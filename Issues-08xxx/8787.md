# Issue 8787: upgrade the openssl optional spkg to version 1.0

archive/issues_008787.json:
```json
{
    "body": "Amazingly, openssl released version *1.0*! Let's upgrade to this.\n\nAssignee: tbd\n\nCC:  @haraldschilly\n\nResolution: fixed\n\nAuthor: William Stein\n\nReviewer: Mariah Lenox\n\nMerged: sage-4.5.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/8787\n\n",
    "closed_at": "2010-07-08T18:57:45Z",
    "created_at": "2010-04-27T23:02:19Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.5",
    "title": "upgrade the openssl optional spkg to version 1.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8787",
    "user": "https://github.com/williamstein"
}
```
Amazingly, openssl released version *1.0*! Let's upgrade to this.

Assignee: tbd

CC:  @haraldschilly

Resolution: fixed

Author: William Stein

Reviewer: Mariah Lenox

Merged: sage-4.5.rc0

Issue created by migration from https://trac.sagemath.org/ticket/8787





---

archive/issue_comments_101685.json:
```json
{
    "body": "<a id='comment:1'></a>\nHere is the spkg:\n\nhttp://wstein.org/home/wstein/patches/openssl-1.0.0.spkg\n\nI fixed things to be \"modern\" and up to snuff -- a formatted SPKG.txt file, a .hg directory, error messages not all messed up in spkg-install, a src/ directory, etc.",
    "created_at": "2010-04-27T23:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101685",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>
Here is the spkg:

http://wstein.org/home/wstein/patches/openssl-1.0.0.spkg

I fixed things to be "modern" and up to snuff -- a formatted SPKG.txt file, a .hg directory, error messages not all messed up in spkg-install, a src/ directory, etc.



---

archive/issue_comments_101686.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-04-27T23:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101686",
    "user": "https://github.com/williamstein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_101687.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-05-05T15:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101687",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_101688.json:
```json
{
    "body": "<a id='comment:3'></a>\nSadly, building sage-4.3.5 with gcc-4.4.3 and openssl-1.0.0.spkg \ndid NOT work on one of my company's computers (not connected to\nthe Internet).  The machine is similar hardware to Skynet/taurus, \nbut running Red Hat Enterprise Linux Server.\n\nFirst I installed openssl-1.0.0.spkg.  Then I did 'make testlong'.\nThe build failed while trying to build python-2.6.4.p7 with the\nmessage\n  \n  import _md5\nImport Error: No module named _md5\nhashlib module failed to import",
    "created_at": "2010-05-05T15:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101688",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:3'></a>
Sadly, building sage-4.3.5 with gcc-4.4.3 and openssl-1.0.0.spkg 
did NOT work on one of my company's computers (not connected to
the Internet).  The machine is similar hardware to Skynet/taurus, 
but running Red Hat Enterprise Linux Server.

First I installed openssl-1.0.0.spkg.  Then I did 'make testlong'.
The build failed while trying to build python-2.6.4.p7 with the
message
  
  import _md5
Import Error: No module named _md5
hashlib module failed to import



---

archive/issue_comments_101689.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [mariah](#comment%3A3):\n> Sadly, building sage-4.3.5 with gcc-4.4.3 and openssl-1.0.0.spkg \n> did NOT work on one of my company's computers (not connected to\n> the Internet).  The machine is similar hardware to Skynet/taurus, \n> but running Red Hat Enterprise Linux Server.\n> \n> First I installed openssl-1.0.0.spkg.  Then I did 'make testlong'.\n> The build failed while trying to build python-2.6.4.p7 with the\n> message\n\n\nCan you post the log that results from doing\n\n  sage -f openssl-1.0.0\n\nand also the log that results from building python, e.g.,\n\n  sage -f python-2.6.4.p7\n\n\nAlso, did you get this failure on taurus?  If so, I can just test there.",
    "created_at": "2010-05-05T15:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101689",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:4'></a>
Replying to [mariah](#comment%3A3):
> Sadly, building sage-4.3.5 with gcc-4.4.3 and openssl-1.0.0.spkg 
> did NOT work on one of my company's computers (not connected to
> the Internet).  The machine is similar hardware to Skynet/taurus, 
> but running Red Hat Enterprise Linux Server.
> 
> First I installed openssl-1.0.0.spkg.  Then I did 'make testlong'.
> The build failed while trying to build python-2.6.4.p7 with the
> message


Can you post the log that results from doing

  sage -f openssl-1.0.0

and also the log that results from building python, e.g.,

  sage -f python-2.6.4.p7


Also, did you get this failure on taurus?  If so, I can just test there.



---

archive/issue_comments_101690.json:
```json
{
    "body": "<a id='comment:5'></a>\n> Can you post the log that results from doing\n> \n>   sage -f openssl-1.0.0\n> \n> and also the log that results from building python, e.g.,\n> \n>   sage -f python-2.6.4.p7\n\n\nI do not believe I am allowed to export the logs.\nThis problem is happening on one of our internal \ncompany machines.\n\n> Also, did you get this failure on taurus?  If so, I can just test there.\n\n\nI tried to reproduce the problem on taurus, but sadly the \nproblem does NOT seem to be reproducible on taurus.",
    "created_at": "2010-05-05T15:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101690",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:5'></a>
> Can you post the log that results from doing
> 
>   sage -f openssl-1.0.0
> 
> and also the log that results from building python, e.g.,
> 
>   sage -f python-2.6.4.p7


I do not believe I am allowed to export the logs.
This problem is happening on one of our internal 
company machines.

> Also, did you get this failure on taurus?  If so, I can just test there.


I tried to reproduce the problem on taurus, but sadly the 
problem does NOT seem to be reproducible on taurus.



---

archive/issue_comments_101691.json:
```json
{
    "body": "<a id='comment:6'></a>\n\n```\nI have investigated the problem and found that \nthe reason for the failure is that openssl-1.0.0\nputs libraries in $SAGE_ROOT/local/lib64 on 64-bit \nmachines. Sage does not add $SAGE_ROOT/local/lib64\nto the LD_LIBRARY_PATH.\n\nIf you add\n\n  --libdir=lib\n\nto the ./config line in spkg-install, then sage\nbuilds with openssl-1.0.0 and all tests pass.\n```",
    "created_at": "2010-05-27T14:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101691",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:6'></a>

```
I have investigated the problem and found that 
the reason for the failure is that openssl-1.0.0
puts libraries in $SAGE_ROOT/local/lib64 on 64-bit 
machines. Sage does not add $SAGE_ROOT/local/lib64
to the LD_LIBRARY_PATH.

If you add

  --libdir=lib

to the ./config line in spkg-install, then sage
builds with openssl-1.0.0 and all tests pass.
```



---

archive/issue_comments_101692.json:
```json
{
    "body": "<a id='comment:7'></a>\nI've posted a new spkg with the fix you suggest here:\n\n   http://wstein.org/home/wstein/patches/openssl-1.0.0.p0.spkg",
    "created_at": "2010-06-04T05:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101692",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:7'></a>
I've posted a new spkg with the fix you suggest here:

   http://wstein.org/home/wstein/patches/openssl-1.0.0.p0.spkg



---

archive/issue_comments_101693.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-06-04T05:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101693",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_101694.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-06-09T14:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101694",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_101695.json:
```json
{
    "body": "<a id='comment:8'></a>\nOn the machine where I previously was having problems, \nopenssl-1.0.0.p0.spkg builds and 'make testlong' on\nsage-4.4.3 passes all tests.\n\nThus I give this package a positive review!",
    "created_at": "2010-06-09T14:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101695",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:8'></a>
On the machine where I previously was having problems, 
openssl-1.0.0.p0.spkg builds and 'make testlong' on
sage-4.4.3 passes all tests.

Thus I give this package a positive review!



---

archive/issue_comments_101696.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-07-08T18:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101696",
    "user": "https://github.com/rlmill"
}
```

Resolution: fixed



---

archive/issue_comments_101697.json:
```json
{
    "body": "Merged: sage-4.5.rc0",
    "created_at": "2010-07-08T18:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101697",
    "user": "https://github.com/rlmill"
}
```

Merged: sage-4.5.rc0



---

archive/issue_events_026449.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-08T18:57:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/8787#event-26449"
}
```



---

archive/issue_comments_101698.json:
```json
{
    "body": "Author: William Stein",
    "created_at": "2010-07-08T18:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101698",
    "user": "https://github.com/rlmill"
}
```

Author: William Stein



---

archive/issue_comments_101699.json:
```json
{
    "body": "Reviewer: Mariah Lenox",
    "created_at": "2010-07-08T18:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8787#issuecomment-101699",
    "user": "https://github.com/rlmill"
}
```

Reviewer: Mariah Lenox
