# Issue 30044: remove __reduce__ method from Mutability

Issue created by migration from https://trac.sagemath.org/ticket/30281

Original creator: @mjungmath

Original creation time: 2020-08-03 16:48:28

CC:  tscrim mkoeppe egourgoulhon




---

Comment by @mjungmath created at 2020-08-03 16:53:41

Changing type from PLEASE CHANGE to enhancement.


---

Comment by @mjungmath created at 2020-08-03 16:53:41

Changing component from PLEASE CHANGE to misc.


---

Comment by @mjungmath created at 2020-08-03 16:59:30

New commits:


---

Comment by @mjungmath created at 2020-08-03 16:59:30

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-08-03 17:14:36

Is this for a ticket where the existence of this method is a creating a problem?


---

Comment by @mjungmath created at 2020-08-03 17:20:58

Yes. See [comment:10](https://trac.sagemath.org/ticket/30261#comment:10) in #30261 and all the following by Travis.


---

Comment by @mjungmath created at 2020-08-03 18:10:21

It seems that inheriting from `Mutability` causes a pickling test. Probably that is the reason why it is endowed with this method.


---

Comment by mkoeppe created at 2020-08-03 18:57:33

Yes. When there is a `__reduce__` method, then it is tested. 
The correct fix is to implement pickling for your class in #30261.


---

Comment by @mjungmath created at 2020-08-03 19:01:44

Replying to [comment:8 mkoeppe]:
> Yes. When there is a `__reduce__` method, then it is tested. 
> The correct fix is to implement pickling for your class in #30261.

This is exactly the reason why we remove `__reduce__` from `Mutability`. But even then, pickling is tested (see #30280).


---

Comment by tscrim created at 2020-08-04 00:06:17

This `__reduce__` method is bad because it it tries to unpickle anything as a `Mutability` object. So a Python class that inherits from this must then contend with this, which puts more of burden on the implementer. Perhaps there is a better way to do this, but it is not immediate to me how to do this...


---

Comment by tscrim created at 2020-08-07 22:57:16

I really think this should be removed. However, we need to make sure that when we pickle and unpickle an immutable object `X` it remains immutable.


---

Comment by mkoeppe created at 2020-08-07 22:58:49

Fine with me too


---

Comment by mkoeppe created at 2020-08-18 15:55:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-08-20 22:23:03

Resolution: fixed
