# Issue 30549: Multiplying and dividing by 3 hangs

Issue created by migration from https://trac.sagemath.org/ticket/30786

Original creator: @GMS103

Original creation time: 2020-10-17 22:13:16

Tested with https://sagecell.sagemath.org

```
sage: version()
'SageMath version 9.1, Release Date: 2020-05-20'
```

All of these work as expected:

```
sage: exp(-ln(-x))
sage: exp(-3*ln(-x)/3)
sage: exp(-ln(-9*x))
```

However this hangs:

```
sage: exp(-3*ln(-9*x)/3)
```

In case you are curious, this is what I was doing (the expressions were a bit more complex, of course):

```
sage: a=var('a')
sage: y=exp(-3*x)
sage: x0=ln(-9*a)/3
sage: y(x=x0)
```



---

Comment by @DaveWitteMorris created at 2020-10-18 01:25:17

I confirm that there is a problem. `CoCalc` ran out of memory. My laptop (9.2rc2 on MacOS 10.15.7) completed eventually (I think it took about half an hour). The output is a 4GB string of nonsense that seems to be almost entirely digits, but starts with `-1/34723950083` and ends with `91987451449/x`.

These symptoms are somewhat similar to #30446.


---

Comment by @bmlivin created at 2020-10-19 03:22:13

DaveWitteMorris is correct. I checked and this is the same issue as #30446. If you look on that ticket, I submitted a pull request with `pynac` that will fix the issue.


---

Comment by @GMS103 created at 2020-10-19 23:57:53

Thanks for the feedback, I was really surprised by this bug.
Glad to know it will be fixed.


---

Comment by @DaveWitteMorris created at 2021-01-08 20:02:47

Changing priority from major to minor.


---

Comment by @DaveWitteMorris created at 2021-01-08 20:02:47

Changing component from basic arithmetic to symbolics.


---

Comment by @DaveWitteMorris created at 2021-01-08 20:02:47

As pointed out in comment:2, this will be fixed by the patch to pynac in #30446. When that ticket is closed, we can add this as another doctest.


---

Comment by @DaveWitteMorris created at 2021-01-10 22:41:18

Changing status from new to needs_review.


---

Comment by @DaveWitteMorris created at 2021-01-10 22:41:18

The PR adds doctests for the bugs on this ticket, #28620, and #30304. All were fixed by the patch to pynac at #30446 (which has positive review). These doctests are in the `_pow_` method, and I moved the doctest of #30446 to the same place. (It was in the `_latex_` method, which does not seem like such a good place.)
----
New commits:


---

Comment by tscrim created at 2021-01-11 23:45:26

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2021-01-11 23:45:26

LGTM.


---

Comment by @DaveWitteMorris created at 2021-01-12 00:12:33

Thanks!


---

Comment by dimpase created at 2021-01-24 21:48:02

rebase over new #30446


---

Comment by dimpase created at 2021-01-24 21:48:02

Changing status from positive_review to needs_work.


---

Comment by git created at 2021-01-24 21:57:53

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by dimpase created at 2021-01-24 22:02:57

Changing status from needs_work to positive_review.


---

Comment by dimpase created at 2021-01-24 22:02:57

OK, done


---

Comment by vbraun created at 2021-03-09 00:00:44

Resolution: fixed
