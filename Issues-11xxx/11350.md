# Issue 11350: Fraction fields should know whether they are finite or not.

archive/issues_011178.json:
```json
{
    "assignees": [],
    "body": "If I am not mistaken, a fraction field of an integral domain R is finite if and only if R is finite. Hence, we should not have a `NotImplementedError` but the following:\n\n```\n            sage: Frac(QQ['a','b','c']).is_finite()\n            False\n```\n\nApply:\n\n[attachment: trac_11350-combined.patch](https://github.com/sagemath/sage/files/ticket11350/trac_11350-combined.patch.gz)\n\nAssignee: **@aghitza**\n\nKeywords: **fraction field, is_finite**\n\nAuthor: **Simon King**\n\nReviewer: **Robert Bradshaw, Jeroen Demeyer, John Palmieri**\n\nMerged: **sage-4.7.2.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11350_\n\n",
    "closed_at": "2011-07-28T10:24:54Z",
    "created_at": "2011-05-19T07:39:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fraction fields should know whether they are finite or not.",
    "type": "issue",
    "updated_at": "2011-07-28T10:24:54Z",
    "url": "https://github.com/sagemath/sage/issues/11350",
    "user": "https://github.com/simon-king-jena"
}
```
If I am not mistaken, a fraction field of an integral domain R is finite if and only if R is finite. Hence, we should not have a `NotImplementedError` but the following:

```
            sage: Frac(QQ['a','b','c']).is_finite()
            False
```

Apply:

[attachment: trac_11350-combined.patch](https://github.com/sagemath/sage/files/ticket11350/trac_11350-combined.patch.gz)

Assignee: **@aghitza**

Keywords: **fraction field, is_finite**

Author: **Simon King**

Reviewer: **Robert Bradshaw, Jeroen Demeyer, John Palmieri**

Merged: **sage-4.7.2.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/11350_





---

archive/issue_events_137704.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-19T07:39:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137704"
}
```



---

archive/issue_events_137705.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-19T07:39:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137705"
}
```



---

archive/issue_events_137706.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-19T07:39:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137706"
}
```



---

archive/issue_events_137707.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-19T07:39:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137707"
}
```



---

archive/issue_comments_116589.json:
```json
{
    "body": "Attachment: **[trac11350_fractionfield_is_finite.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac11350_fractionfield_is_finite.patch.gz)**\n\nImplement is_finite for fraction fields",
    "created_at": "2011-05-19T07:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116589",
    "user": "https://github.com/simon-king-jena"
}
```

Attachment: **[trac11350_fractionfield_is_finite.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac11350_fractionfield_is_finite.patch.gz)**

Implement is_finite for fraction fields



---

archive/issue_events_137708.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-19T07:41:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137708"
}
```



---

archive/issue_events_137709.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2011-05-20T15:45:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137709"
}
```



---

archive/issue_events_137710.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2011-05-20T15:45:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137710"
}
```



---

archive/issue_comments_116590.json:
```json
{
    "body": "Reviewer: **Robert Bradshaw**",
    "created_at": "2011-05-27T07:48:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116590",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Robert Bradshaw**



---

archive/issue_comments_116591.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\n\n```\nsage -t  -force_lib devel/sage/sage/structure/parent.pyx\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha2/devel/sage-main/sage/structure/parent.pyx\", line 1099:\n    sage: F.is_finite()\nExpected:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError\nGot:\n    False\n**********************************************************************\n```",
    "created_at": "2011-05-31T08:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116591",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">Comment 4</div>


```
sage -t  -force_lib devel/sage/sage/structure/parent.pyx
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha2/devel/sage-main/sage/structure/parent.pyx", line 1099:
    sage: F.is_finite()
Expected:
    Traceback (most recent call last):
    ...
    NotImplementedError
Got:
    False
**********************************************************************
```



---

archive/issue_events_137711.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-31T08:26:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137711"
}
```



---

archive/issue_events_137712.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-31T08:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137712"
}
```



---

archive/issue_comments_116592.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\n*ping*",
    "created_at": "2011-06-18T08:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116592",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">Comment 5</div>

*ping*



---

archive/issue_comments_116593.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nReplying to [@jdemeyer](#comment%3A5):\n> *ping*\n\nThanks for pinging. I am now trying to find a good replacement for that test.\n\nThe problem is: We need an object that has a \"list\" method (after all, the comments for the test state that `F.list()` would run forever), and we need one that does not know whether it is finite or not.\n\nSo, we can not use fraction fields, since they know whether they are finite. And we can't use, e.g., quotient rings of multivariate polynomial rings, since they do not support iteration.\n\nDo you have any idea what one could use instead?",
    "created_at": "2011-06-20T07:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116593",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:6" align="right">Comment 6</div>

Replying to [@jdemeyer](#comment%3A5):
> *ping*

Thanks for pinging. I am now trying to find a good replacement for that test.

The problem is: We need an object that has a "list" method (after all, the comments for the test state that `F.list()` would run forever), and we need one that does not know whether it is finite or not.

So, we can not use fraction fields, since they know whether they are finite. And we can't use, e.g., quotient rings of multivariate polynomial rings, since they do not support iteration.

Do you have any idea what one could use instead?



---

archive/issue_comments_116594.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI just noticed that there is a typo in `_list_from_iterator_cached`: It says\n\n```\n        try:\n            if not self.is_finite():\n                raise ValueError('since it is infinite, cannot list %s' % self )\n        except AttributeError, NotImplementedError:\n            pass\n```\nbut should of course say\n\n```\n        try:\n            if not self.is_finite():\n                raise ValueError('since it is infinite, cannot list %s' % self )\n        except (AttributeError, NotImplementedError):\n            pass\n```\n\nBut even if I change this, I have a hard time coming up with an example that illustrates `X.list()` running forever.",
    "created_at": "2011-06-20T07:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116594",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">Comment 7</div>

I just noticed that there is a typo in `_list_from_iterator_cached`: It says

```
        try:
            if not self.is_finite():
                raise ValueError('since it is infinite, cannot list %s' % self )
        except AttributeError, NotImplementedError:
            pass
```
but should of course say

```
        try:
            if not self.is_finite():
                raise ValueError('since it is infinite, cannot list %s' % self )
        except (AttributeError, NotImplementedError):
            pass
```

But even if I change this, I have a hard time coming up with an example that illustrates `X.list()` running forever.



---

archive/issue_comments_116595.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@simon-king-jena](#comment%3A6):\n> Replying to [@jdemeyer](#comment%3A5):\n> > *ping*\n\n> \n> Thanks for pinging. I am now trying to find a good replacement for that test.\n> \n> The problem is: We need an object that has a \"list\" method (after all, the comments for the test state that `F.list()` would run forever), and we need one that does not know whether it is finite or not.\n\nI actually don't quite understand the purpose of the current example in `structure/parent.pyx` because (without the patch) one gets:\n\n```\nsage: R.<t> = QQ[]\nsage: F = FractionField(R)\nsage: list(F)\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n\n/usr/local/src/sage-4.7.1.alpha3/<ipython console> in <module>()\n\n/usr/local/src/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/rings/ring.so in sage.rings.ring.Ring.__iter__ (sage/rings/ring.c:1820)()\n\nNotImplementedError: object does not support iteration\nsage: F.list()\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n\n/usr/local/src/sage-4.7.1.alpha3/<ipython console> in <module>()\n\n/usr/local/src/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent._list_from_iterator_cached (sage/structure/parent.c:7943)()\n\n/usr/local/src/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/rings/ring.so in sage.rings.ring.Ring.is_finite (sage/rings/ring.c:6011)()\n\nNotImplementedError:\n```\n\nSo it seems that even the current test doesn't do what is claimed.",
    "created_at": "2011-06-20T07:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116595",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@simon-king-jena](#comment%3A6):
> Replying to [@jdemeyer](#comment%3A5):
> > *ping*

> 
> Thanks for pinging. I am now trying to find a good replacement for that test.
> 
> The problem is: We need an object that has a "list" method (after all, the comments for the test state that `F.list()` would run forever), and we need one that does not know whether it is finite or not.

I actually don't quite understand the purpose of the current example in `structure/parent.pyx` because (without the patch) one gets:

```
sage: R.<t> = QQ[]
sage: F = FractionField(R)
sage: list(F)
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)

/usr/local/src/sage-4.7.1.alpha3/<ipython console> in <module>()

/usr/local/src/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/rings/ring.so in sage.rings.ring.Ring.__iter__ (sage/rings/ring.c:1820)()

NotImplementedError: object does not support iteration
sage: F.list()
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)

/usr/local/src/sage-4.7.1.alpha3/<ipython console> in <module>()

/usr/local/src/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent._list_from_iterator_cached (sage/structure/parent.c:7943)()

/usr/local/src/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/rings/ring.so in sage.rings.ring.Ring.is_finite (sage/rings/ring.c:6011)()

NotImplementedError:
```

So it seems that even the current test doesn't do what is claimed.



---

archive/issue_comments_116596.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nSorry Simon, that was exactly your point above :-)",
    "created_at": "2011-06-20T07:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116596",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">Comment 9</div>

Sorry Simon, that was exactly your point above :-)



---

archive/issue_events_137713.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-06-20T07:57:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137713"
}
```



---

archive/issue_events_137714.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-06-20T07:57:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137714"
}
```



---

archive/issue_comments_116597.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nI have added a second patch.\n\nThe present test actually tests for the *presence* of a bug (namely an object not knowing whether it is finite, although it should know better). In addition, as Jeroen confirms, the test does not do what the comments promise.\n\nTherefore, I removed the test.\n\nIn addition, I fixed the bug mentioned above (the missing brackets aroung `except AttributeError, NotImplementedError:`). I can not give an example of an *iterable* object that does not know whether it is finite. But still, I am able to show that I fixed the bug, because the resulting error message shows that iteration was attempted.\n\nMoreover, I added a note at a more prominent part of the docstring. It says that, even though `X.list()` is often better than `list(X)`, it will often be the case that `for x in X` is better than `for x in X.list()`.\n\nBack to \"needs review\".",
    "created_at": "2011-06-20T07:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116597",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">Comment 10</div>

I have added a second patch.

The present test actually tests for the *presence* of a bug (namely an object not knowing whether it is finite, although it should know better). In addition, as Jeroen confirms, the test does not do what the comments promise.

Therefore, I removed the test.

In addition, I fixed the bug mentioned above (the missing brackets aroung `except AttributeError, NotImplementedError:`). I can not give an example of an *iterable* object that does not know whether it is finite. But still, I am able to show that I fixed the bug, because the resulting error message shows that iteration was attempted.

Moreover, I added a note at a more prominent part of the docstring. It says that, even though `X.list()` is often better than `list(X)`, it will often be the case that `for x in X` is better than `for x in X.list()`.

Back to "needs review".



---

archive/issue_comments_116598.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nOutch. So, we now have my second patch an Jeroens patch. What shall we do?",
    "created_at": "2011-06-20T07:59:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116598",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">Comment 11</div>

Outch. So, we now have my second patch an Jeroens patch. What shall we do?



---

archive/issue_comments_116599.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nAttachment: **[11350_infinite_list.patch.gz](https://github.com/sagemath/sage/files/ticket11350/11350_infinite_list.patch.gz)**\n\nJeroen, do we really want \"#define ENABLE_DEBUG_INTERRUPT 1 \", as in your patch?",
    "created_at": "2011-06-20T08:00:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116599",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:12" align="right">Comment 12</div>

Attachment: **[11350_infinite_list.patch.gz](https://github.com/sagemath/sage/files/ticket11350/11350_infinite_list.patch.gz)**

Jeroen, do we really want "#define ENABLE_DEBUG_INTERRUPT 1 ", as in your patch?



---

archive/issue_comments_116600.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@simon-king-jena](#comment%3A11):\n> Outch. So, we now have my second patch an Jeroens patch. What shall we do?\n\nRead eachothers patches and extract the best out of both of them.\n\nReplying to [@simon-king-jena](#comment%3A12):\n> Jeroen, do we really want \"#define ENABLE_DEBUG_INTERRUPT 1 \", as in your patch?\n\nNo, that was a mistake.  Fixed now.",
    "created_at": "2011-06-20T08:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116600",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@simon-king-jena](#comment%3A11):
> Outch. So, we now have my second patch an Jeroens patch. What shall we do?

Read eachothers patches and extract the best out of both of them.

Replying to [@simon-king-jena](#comment%3A12):
> Jeroen, do we really want "#define ENABLE_DEBUG_INTERRUPT 1 ", as in your patch?

No, that was a mistake.  Fixed now.



---

archive/issue_comments_116601.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nSimon, since you know this stuff better than me, could you make one patch out of our both patches?",
    "created_at": "2011-06-20T08:04:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116601",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">Comment 14</div>

Simon, since you know this stuff better than me, could you make one patch out of our both patches?



---

archive/issue_comments_116602.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,9 @@\n             sage: Frac(QQ['a','b','c']).is_finite()\n             False\n ```\n+\n+Apply:\n+\n+[attachment: trac11350_fractionfield_is_finite.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_fractionfield_is_finite.patch.gz)\n+\n+[attachment: trac11350_docfix.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_docfix.patch.gz)\n``````\n",
    "created_at": "2011-06-20T08:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116602",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,9 @@
             sage: Frac(QQ['a','b','c']).is_finite()
             False
 ```
+
+Apply:
+
+[attachment: trac11350_fractionfield_is_finite.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_fractionfield_is_finite.patch.gz)
+
+[attachment: trac11350_docfix.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_docfix.patch.gz)
``````




---

archive/issue_comments_116603.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nI merged Jeroens example into my patch. So:\n\nApply trac11350_fractionfield_is_finite.patch trac11350_docfix.patch",
    "created_at": "2011-06-20T08:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116603",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:15" align="right">Comment 15</div>

I merged Jeroens example into my patch. So:

Apply trac11350_fractionfield_is_finite.patch trac11350_docfix.patch



---

archive/issue_comments_116604.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nPS: I believe that a full doctest run is required for a new review.\n\nAfter all, the second patch does change the code, so that some `NotImplementedError` will be caught where previously it was propagated (although that was a bug). So, it could be that some other tests will fail.",
    "created_at": "2011-06-20T08:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116604",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">Comment 16</div>

PS: I believe that a full doctest run is required for a new review.

After all, the second patch does change the code, so that some `NotImplementedError` will be caught where previously it was propagated (although that was a bug). So, it could be that some other tests will fail.



---

archive/issue_comments_116605.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI think lines 1100--1101 would better be\n\n```\nor not. ::\n```\ninstead of\n\n```\nor not. \n:: \n```\n\n(perhaps the latter is correct but it looks unusual to me)",
    "created_at": "2011-06-20T09:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116605",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

I think lines 1100--1101 would better be

```
or not. ::
```
instead of

```
or not. 
:: 
```

(perhaps the latter is correct but it looks unusual to me)



---

archive/issue_comments_116606.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nAlso, line 1084: I would say \"fixed in #11350\" instead of \"implemented in #11350\".",
    "created_at": "2011-06-20T09:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116606",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">Comment 18</div>

Also, line 1084: I would say "fixed in #11350" instead of "implemented in #11350".



---

archive/issue_comments_116607.json:
```json
{
    "body": "Remove a test that was testing for the presence of a bug. Fix another bug and test against its absence",
    "created_at": "2011-06-20T09:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116607",
    "user": "https://github.com/simon-king-jena"
}
```

Remove a test that was testing for the presence of a bug. Fix another bug and test against its absence



---

archive/issue_comments_116608.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nAttachment: **[trac11350_docfix.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac11350_docfix.patch.gz)**\n\nI updated the patch, changing \"implemented in #11350\" into \"fixed in #11350\".\n\nHowever\n\n```\nor not.\n::\n\n    sage: ...\n```\nis correct. The double colon indicates that a code block follows, but it does not appear as a character.\n\nAfter applying the patch, just do\n\n```\nsage: R.<t,p> = QQ[]\nsage: R.list?\n```\nand you'll see that Sage's preprocessing of doc strings does the right thing.",
    "created_at": "2011-06-20T10:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116608",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:19" align="right">Comment 19</div>

Attachment: **[trac11350_docfix.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac11350_docfix.patch.gz)**

I updated the patch, changing "implemented in #11350" into "fixed in #11350".

However

```
or not.
::

    sage: ...
```
is correct. The double colon indicates that a code block follows, but it does not appear as a character.

After applying the patch, just do

```
sage: R.<t,p> = QQ[]
sage: R.list?
```
and you'll see that Sage's preprocessing of doc strings does the right thing.



---

archive/issue_comments_116609.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nActually I was not aware that `or not. ::` is correct as well. I just found:\n\n```\nsage: class A:\n....:     \"\"\"\n....:     test it. ::\n....:         \n....:         sage: bla\n....:         blubb\n....:         \n....:     test the other.\n....:     ::\n....:         \n....:         sage: bla\n....:         blubb\n....:     \"\"\"\n....:     \nsage: A?\nType:\t\tclassobj\nString Form:\t__main__.A\nNamespace:\tInteractive\nFile:\t\t/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/IPython/FakeModule.py\nDocstring:\n       test it.\n    \n          sage: bla\n          blubb\n    \n       test the other.\n    \n          sage: bla\n          blubb\n```\nSo, both versions are preprocessed correctly.",
    "created_at": "2011-06-20T10:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116609",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:20" align="right">Comment 20</div>

Actually I was not aware that `or not. ::` is correct as well. I just found:

```
sage: class A:
....:     """
....:     test it. ::
....:         
....:         sage: bla
....:         blubb
....:         
....:     test the other.
....:     ::
....:         
....:         sage: bla
....:         blubb
....:     """
....:     
sage: A?
Type:		classobj
String Form:	__main__.A
Namespace:	Interactive
File:		/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/IPython/FakeModule.py
Docstring:
       test it.
    
          sage: bla
          blubb
    
       test the other.
    
          sage: bla
          blubb
```
So, both versions are preprocessed correctly.



---

archive/issue_comments_116610.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nAnd FWIW: The long doctests pass.",
    "created_at": "2011-06-20T10:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116610",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:21" align="right">Comment 21</div>

And FWIW: The long doctests pass.



---

archive/issue_comments_116611.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,4 @@\n \n Apply:\n \n-[attachment: trac11350_fractionfield_is_finite.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_fractionfield_is_finite.patch.gz)\n-\n-[attachment: trac11350_docfix.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_docfix.patch.gz)\n+[attachment: trac_11350-combined.patch](https://github.com/sagemath/sage/files/ticket11350/trac_11350-combined.patch.gz)\n``````\n",
    "created_at": "2011-07-17T02:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116611",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,4 @@
 
 Apply:
 
-[attachment: trac11350_fractionfield_is_finite.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_fractionfield_is_finite.patch.gz)
-
-[attachment: trac11350_docfix.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_docfix.patch.gz)
+[attachment: trac_11350-combined.patch](https://github.com/sagemath/sage/files/ticket11350/trac_11350-combined.patch.gz)
``````




---

archive/issue_comments_116612.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nI'm basically happy with the patches here, except for some wording and formatting in the docstrings.  I'm attaching a combined version of the two patches, along with \"delta\" patches for each so you can see what I changed.  If you're happy with my changes, please give the ticket a positive review.\n\n(Basically: in [attachment: trac11350_fractionfield_is_finite.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_fractionfield_is_finite.patch.gz), I changed the \"NOTE\" to an actual \".. note::\" markup, and I reworded the note a bit.  In the other attachment, I reworded things a bit also.  Since the docstring there is not actually in the reference manual, since the method starts with an underscore, I didn't bother putting in the \".. note::\" markup.  If you feel like doing that, go ahead.)",
    "created_at": "2011-07-17T02:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116612",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">Comment 22</div>

I'm basically happy with the patches here, except for some wording and formatting in the docstrings.  I'm attaching a combined version of the two patches, along with "delta" patches for each so you can see what I changed.  If you're happy with my changes, please give the ticket a positive review.

(Basically: in [attachment: trac11350_fractionfield_is_finite.patch](https://github.com/sagemath/sage/files/ticket11350/trac11350_fractionfield_is_finite.patch.gz), I changed the "NOTE" to an actual ".. note::" markup, and I reworded the note a bit.  In the other attachment, I reworded things a bit also.  Since the docstring there is not actually in the reference manual, since the method starts with an underscore, I didn't bother putting in the ".. note::" markup.  If you feel like doing that, go ahead.)



---

archive/issue_comments_116613.json:
```json
{
    "body": "Changed reviewer from **Robert Bradshaw** to **Robert Bradshaw, Jeroen Demeyer, John Palmieri**",
    "created_at": "2011-07-17T02:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116613",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **Robert Bradshaw** to **Robert Bradshaw, Jeroen Demeyer, John Palmieri**



---

archive/issue_comments_116614.json:
```json
{
    "body": "Attachment: **[trac_11350-fractionfield-delta.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac_11350-fractionfield-delta.patch.gz)**\n\nfor review only; do not apply",
    "created_at": "2011-07-17T02:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116614",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_11350-fractionfield-delta.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac_11350-fractionfield-delta.patch.gz)**

for review only; do not apply



---

archive/issue_comments_116615.json:
```json
{
    "body": "Attachment: **[trac_11350-doctest-delta.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac_11350-doctest-delta.patch.gz)**\n\nfor review only; do not apply",
    "created_at": "2011-07-17T02:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116615",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_11350-doctest-delta.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac_11350-doctest-delta.patch.gz)**

for review only; do not apply



---

archive/issue_comments_116616.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nAttachment: **[trac_11350-combined.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac_11350-combined.patch.gz)**\n\nI'm fine with the changes.",
    "created_at": "2011-07-18T14:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116616",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:23" align="right">Comment 23</div>

Attachment: **[trac_11350-combined.patch.gz](https://github.com/sagemath/sage/files/ticket11350/trac_11350-combined.patch.gz)**

I'm fine with the changes.



---

archive/issue_comments_116617.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nFine to me as well - unless there is a difference between `.. NOTE::` (as in the combined patch) and `.. note::` (which was intended to be used according to John's post above).\n\nSo, I take it as a positive review, then, unless someone has a veto because of upper versus lower case note...",
    "created_at": "2011-07-18T14:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116617",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:24" align="right">Comment 24</div>

Fine to me as well - unless there is a difference between `.. NOTE::` (as in the combined patch) and `.. note::` (which was intended to be used according to John's post above).

So, I take it as a positive review, then, unless someone has a veto because of upper versus lower case note...



---

archive/issue_events_137715.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-07-18T14:32:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137715"
}
```



---

archive/issue_events_137716.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-07-18T14:32:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137716"
}
```



---

archive/issue_comments_116618.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBoth upper and lower case work: they're interchangeable.  Someone has even expressed the opinion that we should use use the upper-case ones in the Sage documentation, although I personally don't feel very strongly about it.  (See the [developer's guide](http://sagemath.org/doc/developer/conventions.html#docstring-markup-with-rest-and-sphinx) and search for \"notes block\".)",
    "created_at": "2011-07-18T16:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116618",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:25" align="right">Comment 25</div>

Both upper and lower case work: they're interchangeable.  Someone has even expressed the opinion that we should use use the upper-case ones in the Sage documentation, although I personally don't feel very strongly about it.  (See the [developer's guide](http://sagemath.org/doc/developer/conventions.html#docstring-markup-with-rest-and-sphinx) and search for "notes block".)



---

archive/issue_events_137717.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T10:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137717"
}
```



---

archive/issue_events_137718.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T10:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137718"
}
```



---

archive/issue_events_137719.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-28T10:24:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137719"
}
```



---

archive/issue_events_137720.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-28T10:24:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11350#event-137720"
}
```



---

archive/issue_comments_116619.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha1**",
    "created_at": "2011-07-28T10:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11350",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11350#issuecomment-116619",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.2.alpha1**
