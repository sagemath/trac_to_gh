# Issue 11402: update M4RI to newest upstream release

archive/issues_011402.json:
```json
{
    "body": "CC:  @strogdon @nexttime alexanderdreyer\n\nKeywords: sd32\n\nM4RI 20110601 changed the API, so we need to apply a patch as well, \n\ncf. https://bitbucket.org/malb/m4ri/wiki/M4RI-20110601\ncf. https://bitbucket.org/malb/m4ri/wiki/M4RI-20110715\n\n* **Install** http://sage.math.washington.edu/home/malb/spkgs/libm4ri-20110715.spkg\n* **Apply** [attachment:m4ri_20110601.patch]\n* **Apply** [attachment:trac_11574_m4ri_sse2.patch]\n\nIssue created by migration from https://trac.sagemath.org/ticket/11574\n\n",
    "closed_at": "2011-09-12T18:36:03Z",
    "created_at": "2011-07-04T16:37:58Z",
    "labels": [
        "component: packages: standard",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "update M4RI to newest upstream release",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11402",
    "user": "https://github.com/malb"
}
```
CC:  @strogdon @nexttime alexanderdreyer

Keywords: sd32

M4RI 20110601 changed the API, so we need to apply a patch as well, 

cf. https://bitbucket.org/malb/m4ri/wiki/M4RI-20110601
cf. https://bitbucket.org/malb/m4ri/wiki/M4RI-20110715

* **Install** http://sage.math.washington.edu/home/malb/spkgs/libm4ri-20110715.spkg
* **Apply** [attachment:m4ri_20110601.patch]
* **Apply** [attachment:trac_11574_m4ri_sse2.patch]

Issue created by migration from https://trac.sagemath.org/ticket/11574





---

archive/issue_comments_126398.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-07-04T16:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126398",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_126399.json:
```json
{
    "body": "I'm a little confused.  The spkgs here and at #9562 are both libm4ri, and seem to be numbered backwards (the \"earlier\" one in the dependency is from 2011).",
    "created_at": "2011-07-05T13:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126399",
    "user": "https://github.com/kcrisman"
}
```

I'm a little confused.  The spkgs here and at #9562 are both libm4ri, and seem to be numbered backwards (the "earlier" one in the dependency is from 2011).



---

archive/issue_comments_126400.json:
```json
{
    "body": "Okay, I think I figured it out. Sorry for the noise.",
    "created_at": "2011-07-05T14:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126400",
    "user": "https://github.com/kcrisman"
}
```

Okay, I think I figured it out. Sorry for the noise.



---

archive/issue_comments_126401.json:
```json
{
    "body": "I don't know what I did wrong, but I still get the problem with the ` Symbol not found: _m4ri_swap_bits` while trying to start, even after this patch.  I may have done something wrong, but at any rate I can't spend more time on this now, sorry.",
    "created_at": "2011-07-05T17:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126401",
    "user": "https://github.com/kcrisman"
}
```

I don't know what I did wrong, but I still get the problem with the ` Symbol not found: _m4ri_swap_bits` while trying to start, even after this patch.  I may have done something wrong, but at any rate I can't spend more time on this now, sorry.



---

archive/issue_comments_126402.json:
```json
{
    "body": "For the record, I tried spkg + patch on t2 and doctests pass.",
    "created_at": "2011-07-07T09:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126402",
    "user": "https://github.com/malb"
}
```

For the record, I tried spkg + patch on t2 and doctests pass.



---

archive/issue_comments_126403.json:
```json
{
    "body": "applies & passes doctests with 4.7.1.rc2.",
    "created_at": "2011-08-15T21:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126403",
    "user": "https://github.com/malb"
}
```

applies & passes doctests with 4.7.1.rc2.



---

archive/issue_comments_126404.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-08-16T12:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126404",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_126405.json:
```json
{
    "body": "Why is the documentation for matrices over GF(2) not part of the reference manual? I think you should use the upgrade to expose the documentation to the audience.",
    "created_at": "2011-08-16T12:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126405",
    "user": "https://github.com/simon-king-jena"
}
```

Why is the documentation for matrices over GF(2) not part of the reference manual? I think you should use the upgrade to expose the documentation to the audience.



---

archive/issue_comments_126406.json:
```json
{
    "body": "I am not sure this documentation is much use in the reference manual since most of the interesting functions won't show up. Also, these matrices are expected to behave just as other matrices. On the other hand, there are a few - not many - special functions which are only available for GF(2). I'll take a look.",
    "created_at": "2011-08-16T12:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126406",
    "user": "https://github.com/malb"
}
```

I am not sure this documentation is much use in the reference manual since most of the interesting functions won't show up. Also, these matrices are expected to behave just as other matrices. On the other hand, there are a few - not many - special functions which are only available for GF(2). I'll take a look.



---

archive/issue_comments_126407.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-08-17T13:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126407",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_126408.json:
```json
{
    "body": "It seems that you agreed in a different ticket (#9562) that this class doesn't need to be in the reference manual? Hence, returning to **needs review**. Feel free to change it back, though.",
    "created_at": "2011-08-17T13:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126408",
    "user": "https://github.com/malb"
}
```

It seems that you agreed in a different ticket (#9562) that this class doesn't need to be in the reference manual? Hence, returning to **needs review**. Feel free to change it back, though.



---

archive/issue_comments_126409.json:
```json
{
    "body": "I think I can live with not including it into the references. However, currently I am getting segment faults when doctesting on mark (one of the skynet machines). I try to make sure that I properly install everything from scratch again, before reporting details.",
    "created_at": "2011-08-17T18:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126409",
    "user": "https://github.com/simon-king-jena"
}
```

I think I can live with not including it into the references. However, currently I am getting segment faults when doctesting on mark (one of the skynet machines). I try to make sure that I properly install everything from scratch again, before reporting details.



---

archive/issue_comments_126410.json:
```json
{
    "body": "I did a forced new installation of the polybori spkg, then of the M4RI spkg, and I also installed the patches. I get on mark:\n\n```\nsage: P.<a,b,c,d,e> = PolynomialRing(GF(2), 5, order='lex')\nsage: I1 = ideal([a*b + c*d + 1, a*c*e + d*e, a*b*e + c*e, b*c + c*d*e + 1])\nsage: B.<a,b,c,d,e> = BooleanPolynomialRing(5, order='lex')\nsage: I2 = ideal([B(f) for f in I1.gens()])\nsage: I2.groebner_basis()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/home/simonking/SAGE/sage-4.7.1.rc1mark/devel/sage-main/<ipython console> in <module>()\n\n/home/simonking/SAGE/sage-4.7.1.rc1mark/local/lib/python2.6/site-packages/sage/rings/polynomial/pbori.so in sage.rings.polynomial.pbori.BooleanPolynomialIdeal.groebner_basis (sage/rings/polynomial/pbori.cpp:26221)()\n\nRuntimeError: Segmentation fault\n```\n\nOf course, it could be that the problem comes from the polybori spkg. That would be unfortunate, since it is already merged.",
    "created_at": "2011-08-17T19:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126410",
    "user": "https://github.com/simon-king-jena"
}
```

I did a forced new installation of the polybori spkg, then of the M4RI spkg, and I also installed the patches. I get on mark:

```
sage: P.<a,b,c,d,e> = PolynomialRing(GF(2), 5, order='lex')
sage: I1 = ideal([a*b + c*d + 1, a*c*e + d*e, a*b*e + c*e, b*c + c*d*e + 1])
sage: B.<a,b,c,d,e> = BooleanPolynomialRing(5, order='lex')
sage: I2 = ideal([B(f) for f in I1.gens()])
sage: I2.groebner_basis()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/home/simonking/SAGE/sage-4.7.1.rc1mark/devel/sage-main/<ipython console> in <module>()

/home/simonking/SAGE/sage-4.7.1.rc1mark/local/lib/python2.6/site-packages/sage/rings/polynomial/pbori.so in sage.rings.polynomial.pbori.BooleanPolynomialIdeal.groebner_basis (sage/rings/polynomial/pbori.cpp:26221)()

RuntimeError: Segmentation fault
```

Of course, it could be that the problem comes from the polybori spkg. That would be unfortunate, since it is already merged.



---

archive/issue_comments_126411.json:
```json
{
    "body": "Now, I tried to force re-installation of the original polybori spkg. However, that failed as well. I hope that it will not be needed to rebuild all of sage, which takes ages on mark.",
    "created_at": "2011-08-17T20:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126411",
    "user": "https://github.com/simon-king-jena"
}
```

Now, I tried to force re-installation of the original polybori spkg. However, that failed as well. I hope that it will not be needed to rebuild all of sage, which takes ages on mark.



---

archive/issue_comments_126412.json:
```json
{
    "body": "I think the issue is that one needs to install stuff in the right order:\n* install new M4RI\n* install new PolyBoRi\n* apply the M4RI patch\n* touch `sage/libs/polybori/decl.pxd`\n* `sage -b`",
    "created_at": "2011-08-17T21:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126412",
    "user": "https://github.com/malb"
}
```

I think the issue is that one needs to install stuff in the right order:
* install new M4RI
* install new PolyBoRi
* apply the M4RI patch
* touch `sage/libs/polybori/decl.pxd`
* `sage -b`



---

archive/issue_comments_126413.json:
```json
{
    "body": "Meanwhile I managed to revert to the original state, and can confirm that, with vanilla sage-4.7.1.rc2 on 32-bit solaris, the segfault above does not occur.\n\nI will now try to do things in the order you suggested: In fact, originally I had installed polybori, then m4ri, then the m4ri patch, and then sage -b (without touching decl.pxd).\n\nBut how can the new polybori spkg be merged if apparently it depends on the new m4ri?",
    "created_at": "2011-08-18T07:14:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126413",
    "user": "https://github.com/simon-king-jena"
}
```

Meanwhile I managed to revert to the original state, and can confirm that, with vanilla sage-4.7.1.rc2 on 32-bit solaris, the segfault above does not occur.

I will now try to do things in the order you suggested: In fact, originally I had installed polybori, then m4ri, then the m4ri patch, and then sage -b (without touching decl.pxd).

But how can the new polybori spkg be merged if apparently it depends on the new m4ri?



---

archive/issue_comments_126414.json:
```json
{
    "body": "The new installation order did the trick, the segfault has gone. I am now repeating the failing doctests.",
    "created_at": "2011-08-18T08:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126414",
    "user": "https://github.com/simon-king-jena"
}
```

The new installation order did the trick, the segfault has gone. I am now repeating the failing doctests.



---

archive/issue_comments_126415.json:
```json
{
    "body": "Or actually I am repeating sage -testall.",
    "created_at": "2011-08-18T08:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126415",
    "user": "https://github.com/simon-king-jena"
}
```

Or actually I am repeating sage -testall.



---

archive/issue_comments_126416.json:
```json
{
    "body": "Replying to [comment:17 SimonKing]:\n> But how can the new polybori spkg be merged if apparently it depends on the new m4ri?\n\n\nHi, the PolyBoRi does not depend on the new M4RI. This version of M4RI breaks binary compatibility with previous M4RI, i.e. we changed how matrices look internally. Hence, for many pieces of software linking against M4RI one needs to rebuild them to make sure they are talking to the right M4RI library in the right way. That's why M4RI and the PolyBoRi is necessary: to tell PolyBoRi to use this new version. I think we need to updated PolyBoRi as well because some macro names changed and PolyBoRi 0.7.1.p4 contains the necessary code to deal with it.",
    "created_at": "2011-08-18T09:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126416",
    "user": "https://github.com/malb"
}
```

Replying to [comment:17 SimonKing]:
> But how can the new polybori spkg be merged if apparently it depends on the new m4ri?


Hi, the PolyBoRi does not depend on the new M4RI. This version of M4RI breaks binary compatibility with previous M4RI, i.e. we changed how matrices look internally. Hence, for many pieces of software linking against M4RI one needs to rebuild them to make sure they are talking to the right M4RI library in the right way. That's why M4RI and the PolyBoRi is necessary: to tell PolyBoRi to use this new version. I think we need to updated PolyBoRi as well because some macro names changed and PolyBoRi 0.7.1.p4 contains the necessary code to deal with it.



---

archive/issue_comments_126417.json:
```json
{
    "body": "The tests took 84373.7 seconds on mark, and there were a couple of timeouts. However, there was no failure. The segfault that I reported above vanished by installing everything in the right order. On my computer, all tests pass.\n\nMoreover, it is a prerequisite for working with M4RIE (#9562), which I think is a very important contribution - currently, matrices over GF(2<sup>e</sup>) are painfully slow in Sage.\n\nI think it is ok that the matrices over GF(2) do not have their own section in the reference manual, since there seems that all non-underscore methods are already present for general matrices.\n\nHence, it is a positive review.",
    "created_at": "2011-08-19T09:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126417",
    "user": "https://github.com/simon-king-jena"
}
```

The tests took 84373.7 seconds on mark, and there were a couple of timeouts. However, there was no failure. The segfault that I reported above vanished by installing everything in the right order. On my computer, all tests pass.

Moreover, it is a prerequisite for working with M4RIE (#9562), which I think is a very important contribution - currently, matrices over GF(2<sup>e</sup>) are painfully slow in Sage.

I think it is ok that the matrices over GF(2) do not have their own section in the reference manual, since there seems that all non-underscore methods are already present for general matrices.

Hence, it is a positive review.



---

archive/issue_comments_126418.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-19T09:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126418",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_126419.json:
```json
{
    "body": "Woot!",
    "created_at": "2011-08-19T10:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126419",
    "user": "https://github.com/malb"
}
```

Woot!



---

archive/issue_comments_126420.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2011-08-20T03:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126420",
    "user": "https://github.com/williamstein"
}
```

Changing priority from major to critical.



---

archive/issue_comments_126421.json:
```json
{
    "body": "I'm upping the priority, since this fixes a serious mathematical bug reported on sage-support.",
    "created_at": "2011-08-20T03:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126421",
    "user": "https://github.com/williamstein"
}
```

I'm upping the priority, since this fixes a serious mathematical bug reported on sage-support.



---

archive/issue_comments_126422.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-08-22T09:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126422",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_126423.json:
```json
{
    "body": "The directory `m4ri` should be added to `.hgignore`",
    "created_at": "2011-08-22T09:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126423",
    "user": "https://github.com/jdemeyer"
}
```

The directory `m4ri` should be added to `.hgignore`



---

archive/issue_comments_126424.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-08-22T18:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126424",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_126425.json:
```json
{
    "body": "the updated SPKG fixes this issue.",
    "created_at": "2011-08-22T18:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126425",
    "user": "https://github.com/malb"
}
```

the updated SPKG fixes this issue.



---

archive/issue_events_030349.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-23T06:30:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11402#event-30349"
}
```



---

archive/issue_comments_126426.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-08-23T06:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126426",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_126427.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2011-08-24T21:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126427",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_030350.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-24T21:54:43Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11402#event-30350"
}
```



---

archive/issue_comments_126428.json:
```json
{
    "body": "On some 32-bit Linux systems (for example, the buildbot machine `cicero`), this causes polybori to fail to install:\n\n```\ng++ -o groebner/src/randomset.o -c -O3 -Wno-long-long -Wreturn-type -g -fPIC -ftemplate-depth-100 -O3 -Wno-long-long -Wreturn-type -g -fPIC -DNDEBUG -DHAVE_GD -DHAVE_TR1_UNORDERED_MAP -DPACKED -DHAVE_M4RI -DHAVE_GD -DHAVE_IEEE_754 -DBSD -I/home/jdemeyer/sage-4.7.2.alpha1/local/include -I/home/jdemeyer/sage-4.7.2.alpha1/local/include/python2.6 -Ipolybori/include -ICudd/obj -ICudd/util -ICudd/cudd -ICudd/mtr -ICudd/st -ICudd/epd groebner/src/randomset.cc\nIn file included from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:42,\n                 from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31,\n                 from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,\n                 from groebner/src/nf.h:15,\n                 from groebner/src/randomset.cc:11:\n/usr/lib/gcc/i686-pc-linux-gnu/4.4.3/include/emmintrin.h:32:3: error: #error \"SSE2 instruction set not enabled\"\nIn file included from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31,\n                 from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,\n                 from groebner/src/nf.h:15,\n                 from groebner/src/randomset.cc:11:\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function 'void mzd_row_add_offset(mzd_t*, rci_t, rci_t, rci_t)':\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741: error: '__m128i' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741: error: '__src' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741: error: expected primary-expression before ')' token\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741: error: expected ';' before 'src'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742: error: '__dst' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742: error: expected primary-expression before ')' token\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742: error: expected ';' before 'dst'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:743: error: expected primary-expression before 'const'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:743: error: expected ';' before 'const'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:746: error: expected ';' before 'xmm1'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:747: error: 'xmm1' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:749: error: 'eof' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function 'void mzd_combine_even_in_place(mzd_t*, rci_t, wi_t, const mzd_t*, rci_t, wi_t)':\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190: error: '__m128i' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190: error: 'a128' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190: error: expected primary-expression before ')' token\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190: error: expected ';' before 'a'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191: error: 'b128' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191: error: expected primary-expression before ')' token\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191: error: expected ';' before 'b'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1192: error: expected initializer before '*' token\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1195: error: '_mm_xor_si128' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1198: error: 'eof' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function 'void mzd_combine_even(mzd_t*, rci_t, wi_t, const mzd_t*, rci_t, wi_t, const mzd_t*, rci_t, wi_t)':\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274: error: '__m128i' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274: error: 'a128' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274: error: expected primary-expression before ')' token\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274: error: expected ';' before 'a'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275: error: 'b128' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275: error: expected primary-expression before ')' token\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275: error: expected ';' before 'b'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276: error: 'c128' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276: error: expected primary-expression before ')' token\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276: error: expected ';' before 'c'\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1277: error: expected initializer before '*' token\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1280: error: '_mm_xor_si128' was not declared in this scope\n/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1284: error: 'eof' was not declared in this scope\nscons: *** [groebner/src/randomset.o] Error 1\nscons: building terminated because of errors.\n```",
    "created_at": "2011-08-24T21:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126428",
    "user": "https://github.com/jdemeyer"
}
```

On some 32-bit Linux systems (for example, the buildbot machine `cicero`), this causes polybori to fail to install:

```
g++ -o groebner/src/randomset.o -c -O3 -Wno-long-long -Wreturn-type -g -fPIC -ftemplate-depth-100 -O3 -Wno-long-long -Wreturn-type -g -fPIC -DNDEBUG -DHAVE_GD -DHAVE_TR1_UNORDERED_MAP -DPACKED -DHAVE_M4RI -DHAVE_GD -DHAVE_IEEE_754 -DBSD -I/home/jdemeyer/sage-4.7.2.alpha1/local/include -I/home/jdemeyer/sage-4.7.2.alpha1/local/include/python2.6 -Ipolybori/include -ICudd/obj -ICudd/util -ICudd/cudd -ICudd/mtr -ICudd/st -ICudd/epd groebner/src/randomset.cc
In file included from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:42,
                 from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31,
                 from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,
                 from groebner/src/nf.h:15,
                 from groebner/src/randomset.cc:11:
/usr/lib/gcc/i686-pc-linux-gnu/4.4.3/include/emmintrin.h:32:3: error: #error "SSE2 instruction set not enabled"
In file included from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31,
                 from /home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,
                 from groebner/src/nf.h:15,
                 from groebner/src/randomset.cc:11:
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function 'void mzd_row_add_offset(mzd_t*, rci_t, rci_t, rci_t)':
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741: error: '__m128i' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741: error: '__src' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741: error: expected primary-expression before ')' token
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741: error: expected ';' before 'src'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742: error: '__dst' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742: error: expected primary-expression before ')' token
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742: error: expected ';' before 'dst'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:743: error: expected primary-expression before 'const'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:743: error: expected ';' before 'const'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:746: error: expected ';' before 'xmm1'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:747: error: 'xmm1' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:749: error: 'eof' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function 'void mzd_combine_even_in_place(mzd_t*, rci_t, wi_t, const mzd_t*, rci_t, wi_t)':
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190: error: '__m128i' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190: error: 'a128' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190: error: expected primary-expression before ')' token
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190: error: expected ';' before 'a'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191: error: 'b128' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191: error: expected primary-expression before ')' token
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191: error: expected ';' before 'b'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1192: error: expected initializer before '*' token
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1195: error: '_mm_xor_si128' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1198: error: 'eof' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function 'void mzd_combine_even(mzd_t*, rci_t, wi_t, const mzd_t*, rci_t, wi_t, const mzd_t*, rci_t, wi_t)':
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274: error: '__m128i' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274: error: 'a128' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274: error: expected primary-expression before ')' token
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274: error: expected ';' before 'a'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275: error: 'b128' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275: error: expected primary-expression before ')' token
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275: error: expected ';' before 'b'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276: error: 'c128' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276: error: expected primary-expression before ')' token
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276: error: expected ';' before 'c'
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1277: error: expected initializer before '*' token
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1280: error: '_mm_xor_si128' was not declared in this scope
/home/jdemeyer/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1284: error: 'eof' was not declared in this scope
scons: *** [groebner/src/randomset.o] Error 1
scons: building terminated because of errors.
```



---

archive/issue_comments_126429.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2011-08-24T21:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126429",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_126430.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-08-24T21:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126430",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_126431.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-08-24T21:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126431",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_126432.json:
```json
{
    "body": "Can you allow me to read your build on cicero (my username is malb). I don't have a copy of Sage on cicero and it would save me some time.",
    "created_at": "2011-08-24T22:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126432",
    "user": "https://github.com/malb"
}
```

Can you allow me to read your build on cicero (my username is malb). I don't have a copy of Sage on cicero and it would save me some time.



---

archive/issue_comments_126433.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd32\".",
    "created_at": "2011-08-24T23:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126433",
    "user": "https://github.com/williamstein"
}
```

Changing keywords from "" to "sd32".



---

archive/issue_comments_126434.json:
```json
{
    "body": "Replying to [comment:30 malb]:\n> Can you allow me to read your build on cicero (my username is malb). I don't have a copy of Sage on cicero and it would save me some time.\n\n\nIt's in `/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.2.alpha2` (should be accessible through NFS on any Skynet machine).",
    "created_at": "2011-08-25T08:24:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126434",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:30 malb]:
> Can you allow me to read your build on cicero (my username is malb). I don't have a copy of Sage on cicero and it would save me some time.


It's in `/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.2.alpha2` (should be accessible through NFS on any Skynet machine).



---

archive/issue_comments_126435.json:
```json
{
    "body": "Replying to [comment:27 jdemeyer]:\n> On some 32-bit Linux systems (for example, the buildbot machine `cicero`), this causes polybori to fail to install:\n\n[...]\nHere on my system the old `m4ri/config.h` stays when the new libm4ri spkg is installed. Maybe something around polybori picks the outdated file?\n\nRegards,\n  Alexander",
    "created_at": "2011-08-25T13:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126435",
    "user": "https://github.com/alexanderdreyer"
}
```

Replying to [comment:27 jdemeyer]:
> On some 32-bit Linux systems (for example, the buildbot machine `cicero`), this causes polybori to fail to install:

[...]
Here on my system the old `m4ri/config.h` stays when the new libm4ri spkg is installed. Maybe something around polybori picks the outdated file?

Regards,
  Alexander



---

archive/issue_comments_126436.json:
```json
{
    "body": "Replying to [comment:33 AlexanderDreyer]:\n> Here on my system the old `m4ri/config.h` stays when the new libm4ri spkg is installed. Maybe something around polybori picks the outdated file?\n\nAs Jeroen pointed out this is not related. Unfortunately I cannot reproduce this behaviour. Is there some machine on which this occurs, which I may be granted access to?",
    "created_at": "2011-08-26T06:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126436",
    "user": "https://github.com/alexanderdreyer"
}
```

Replying to [comment:33 AlexanderDreyer]:
> Here on my system the old `m4ri/config.h` stays when the new libm4ri spkg is installed. Maybe something around polybori picks the outdated file?

As Jeroen pointed out this is not related. Unfortunately I cannot reproduce this behaviour. Is there some machine on which this occurs, which I may be granted access to?



---

archive/issue_comments_126437.json:
```json
{
    "body": "Replying to [comment:34 AlexanderDreyer]:\n> As Jeroen pointed out this is not related. Unfortunately I cannot reproduce this behaviour. Is there some machine on which this occurs, which I may be granted access to?\n\n\nThe only machine which I know of is 'cicero' on skynet. We could try to get you an account there but it would take a while I guess. Right now, I cannot even log into the machine.",
    "created_at": "2011-08-26T13:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126437",
    "user": "https://github.com/malb"
}
```

Replying to [comment:34 AlexanderDreyer]:
> As Jeroen pointed out this is not related. Unfortunately I cannot reproduce this behaviour. Is there some machine on which this occurs, which I may be granted access to?


The only machine which I know of is 'cicero' on skynet. We could try to get you an account there but it would take a while I guess. Right now, I cannot even log into the machine.



---

archive/issue_comments_126438.json:
```json
{
    "body": "Replying to [comment:35 malb]:\n> The only machine which I know of is 'cicero' on skynet. We could try to get you an account there but it would take a while I guess. Right now, I cannot even log into the machine.\n\nThis would be nice. I'm about to prepare a qemu image for Gentoo x86. But that will last for some time since I have to compile everything from scratch (It's Gentoo.)",
    "created_at": "2011-08-26T14:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126438",
    "user": "https://github.com/alexanderdreyer"
}
```

Replying to [comment:35 malb]:
> The only machine which I know of is 'cicero' on skynet. We could try to get you an account there but it would take a while I guess. Right now, I cannot even log into the machine.

This would be nice. I'm about to prepare a qemu image for Gentoo x86. But that will last for some time since I have to compile everything from scratch (It's Gentoo.)



---

archive/issue_comments_126439.json:
```json
{
    "body": "I think thing go south from there\n\n```\n/usr/lib/gcc/i686-pc-linux-gnu/4.4.3/include/emmintrin.h:32:3: error: #error \"SSE2 instruction set not enabled\"\n```\nI had a x86 box without sse2 but it is now collecting dust without an OS installed. I will take a look on the closest thing I can get. Actually Steve Trogdon could have a box where this could be tested, I am copying him.",
    "created_at": "2011-08-26T22:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126439",
    "user": "https://github.com/kiwifb"
}
```

I think thing go south from there

```
/usr/lib/gcc/i686-pc-linux-gnu/4.4.3/include/emmintrin.h:32:3: error: #error "SSE2 instruction set not enabled"
```
I had a x86 box without sse2 but it is now collecting dust without an OS installed. I will take a look on the closest thing I can get. Actually Steve Trogdon could have a box where this could be tested, I am copying him.



---

archive/issue_comments_126440.json:
```json
{
    "body": "Replying to [comment:37 fbissey]:\n> I think thing go south from there\n> \n> ```\n> /usr/lib/gcc/i686-pc-linux-gnu/4.4.3/include/emmintrin.h:32:3: error: #error \"SSE2 instruction set not enabled\"\n> ```\n> I had a x86 box without sse2 but it is now collecting dust without an OS installed. I will take a look on the closest thing I can get. Actually Steve Trogdon could have a box where this could be tested, I am copying him.\n\n\nI get the same failure as comment:33\n\n```\n/storage/strogdon/gentoo/usr/lib/gcc/i686-pc-linux-gnu/4.5.2/include/emmintrin.h:32:3: error: #error \"SSE2 instruction set not enabled\"\nIn file included from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31:0,\n                 from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,\n                 from groebner/src/nf.h:15,\n                 from groebner/src/randomset.cc:11:\n\n...\n\nscons: *** [groebner/src/randomset.o] Error 1\nscons: building terminated because of errors.\nError building PolyBoRi.\n```",
    "created_at": "2011-08-27T02:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126440",
    "user": "https://github.com/strogdon"
}
```

Replying to [comment:37 fbissey]:
> I think thing go south from there
> 
> ```
> /usr/lib/gcc/i686-pc-linux-gnu/4.4.3/include/emmintrin.h:32:3: error: #error "SSE2 instruction set not enabled"
> ```
> I had a x86 box without sse2 but it is now collecting dust without an OS installed. I will take a look on the closest thing I can get. Actually Steve Trogdon could have a box where this could be tested, I am copying him.


I get the same failure as comment:33

```
/storage/strogdon/gentoo/usr/lib/gcc/i686-pc-linux-gnu/4.5.2/include/emmintrin.h:32:3: error: #error "SSE2 instruction set not enabled"
In file included from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31:0,
                 from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,
                 from groebner/src/nf.h:15,
                 from groebner/src/randomset.cc:11:

...

scons: *** [groebner/src/randomset.o] Error 1
scons: building terminated because of errors.
Error building PolyBoRi.
```



---

archive/issue_comments_126441.json:
```json
{
    "body": "M4RI *should* test for SSE2 and only include that header if it is present. Since it worked so far, I assume it still does that. However, we recently switched from `HAVE_SSE2` to `__M4RI_HAVE_SSE2` and this might be a change that PolyBoRi didn't pick up? However, it shouldn't be PolyBoRi's responsibility to check for SSE2 and hence something goes wrong when including `m4ri.h`.",
    "created_at": "2011-08-27T11:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126441",
    "user": "https://github.com/malb"
}
```

M4RI *should* test for SSE2 and only include that header if it is present. Since it worked so far, I assume it still does that. However, we recently switched from `HAVE_SSE2` to `__M4RI_HAVE_SSE2` and this might be a change that PolyBoRi didn't pick up? However, it shouldn't be PolyBoRi's responsibility to check for SSE2 and hence something goes wrong when including `m4ri.h`.



---

archive/issue_comments_126442.json:
```json
{
    "body": "For some reason `m4ri_config.h` on cicero has\n\n```\n#define __M4RI_HAVE_SSE2                1\n```\nwhich is totally wrong! I'll investigate.",
    "created_at": "2011-08-27T11:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126442",
    "user": "https://github.com/malb"
}
```

For some reason `m4ri_config.h` on cicero has

```
#define __M4RI_HAVE_SSE2                1
```
which is totally wrong! I'll investigate.



---

archive/issue_comments_126443.json:
```json
{
    "body": "More data on cicero:\n\n`cat /proc/cpuinfo` reports SSE2\n\n```\nflags           : fpu vme de pse tsc msr pae mce cx8 apic mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe up pebs bts\n```\n\nbut `/usr/lib/gcc/i686-pc-linux-gnu/4.4.3/include/emmintrin.h:32:3` complains. I assume this is because neither PolyBoRi nor Sage pass `-msse2` when linking against M4RI but `-msse2` defines `__SSE2__` which is required by `emmintrin.h`. But I don't understand yet why the previous version works.",
    "created_at": "2011-08-27T12:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126443",
    "user": "https://github.com/malb"
}
```

More data on cicero:

`cat /proc/cpuinfo` reports SSE2

```
flags           : fpu vme de pse tsc msr pae mce cx8 apic mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe up pebs bts
```

but `/usr/lib/gcc/i686-pc-linux-gnu/4.4.3/include/emmintrin.h:32:3` complains. I assume this is because neither PolyBoRi nor Sage pass `-msse2` when linking against M4RI but `-msse2` defines `__SSE2__` which is required by `emmintrin.h`. But I don't understand yet why the previous version works.



---

archive/issue_comments_126444.json:
```json
{
    "body": "I can confirm that passing `-msse2` fixes the issue. I guess I'll have to find a way to save the flags (to disc?) such that third parties (PolyBoRi, Sage) can re-use them? Any suggestions on how to do that?",
    "created_at": "2011-08-27T12:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126444",
    "user": "https://github.com/malb"
}
```

I can confirm that passing `-msse2` fixes the issue. I guess I'll have to find a way to save the flags (to disc?) such that third parties (PolyBoRi, Sage) can re-use them? Any suggestions on how to do that?



---

archive/issue_comments_126445.json:
```json
{
    "body": "Replying to [comment:42 malb]:\n> I can confirm that passing `-msse2` fixes the issue. I guess I'll have to find a way to save the flags (to disc?) such that third parties (PolyBoRi, Sage) can re-use them? Any suggestions on how to do that?\n\n\nFor scons-bases builds (PolyBoRi as well as Sage) I should be able to provide a suitable code snipplet which checks whether  __M4RI_HAVE_SSE2 is defined in m4ri/m4ri_config.h.",
    "created_at": "2011-08-27T20:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126445",
    "user": "https://github.com/alexanderdreyer"
}
```

Replying to [comment:42 malb]:
> I can confirm that passing `-msse2` fixes the issue. I guess I'll have to find a way to save the flags (to disc?) such that third parties (PolyBoRi, Sage) can re-use them? Any suggestions on how to do that?


For scons-bases builds (PolyBoRi as well as Sage) I should be able to provide a suitable code snipplet which checks whether  __M4RI_HAVE_SSE2 is defined in m4ri/m4ri_config.h.



---

archive/issue_comments_126446.json:
```json
{
    "body": "We have added some configuration for this here:\nhttps://bitbucket.org/brickenstein/polybori/changeset/e5ecbbe5a904\nI'll backport this to 0.7.1 and bundle a new spkg asap.",
    "created_at": "2011-08-27T23:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126446",
    "user": "https://github.com/alexanderdreyer"
}
```

We have added some configuration for this here:
https://bitbucket.org/brickenstein/polybori/changeset/e5ecbbe5a904
I'll backport this to 0.7.1 and bundle a new spkg asap.



---

archive/issue_comments_126447.json:
```json
{
    "body": "Remove assignee tbd.",
    "created_at": "2011-08-27T23:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126447",
    "user": "https://github.com/alexanderdreyer"
}
```

Remove assignee tbd.



---

archive/issue_comments_126448.json:
```json
{
    "body": "PS: I'm also checking things like sse3 which m4ri might or might not use in the future.",
    "created_at": "2011-08-27T23:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126448",
    "user": "https://github.com/alexanderdreyer"
}
```

PS: I'm also checking things like sse3 which m4ri might or might not use in the future.



---

archive/issue_comments_126449.json:
```json
{
    "body": "Hi Alexander, \n\nso your plan is to parse for `__M4RI_HAVE_SSE2=1` and then pass `-msse2` manually? The only caveat I could see with that approach is that it limits us to use !GCC. For Sage this isn't really a problem. M4RI supports more compilers. How's that for PolyBoRi?\n\nIf we want to support more compilers I was thinking about dumping the CFLAGS to disk in M4RI which third party tools then can re-use. I was thinking of using the pkg-config.rc file which one can then either use via pkg-config or parse oneself.\n\nPS: Sage's main build scripts are not !Scons based, but I can certainly take care of those.",
    "created_at": "2011-08-28T11:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126449",
    "user": "https://github.com/malb"
}
```

Hi Alexander, 

so your plan is to parse for `__M4RI_HAVE_SSE2=1` and then pass `-msse2` manually? The only caveat I could see with that approach is that it limits us to use !GCC. For Sage this isn't really a problem. M4RI supports more compilers. How's that for PolyBoRi?

If we want to support more compilers I was thinking about dumping the CFLAGS to disk in M4RI which third party tools then can re-use. I was thinking of using the pkg-config.rc file which one can then either use via pkg-config or parse oneself.

PS: Sage's main build scripts are not !Scons based, but I can certainly take care of those.



---

archive/issue_comments_126450.json:
```json
{
    "body": "Replying to [comment:46 malb]:\n> The only caveat I could see with that approach is that it limits us to use !GCC. For Sage this isn't really a problem. M4RI supports more compilers. How's that for PolyBoRi?\n\nWe support only gcc yet. In the case that we would add additional ones we'll add a mapping of non-default compiler options anyway.\n(e.g. -msse2 -> -xarch-sse2 for sun studio). But if you could export the original parameters, this would of course be better.\n\n> If we want to support more compilers I was thinking about dumping the CFLAGS to disk in M4RI which third party tools then can re-use. I was thinking of using the pkg-config.rc file which one can then either use via pkg-config or parse oneself.\n\nI would prefer if you could add a macro defining the options as a string literal to m4ri_config.h. But if you need to setup the rc file anyway, you do not have to duplicate work.",
    "created_at": "2011-08-28T19:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126450",
    "user": "https://github.com/alexanderdreyer"
}
```

Replying to [comment:46 malb]:
> The only caveat I could see with that approach is that it limits us to use !GCC. For Sage this isn't really a problem. M4RI supports more compilers. How's that for PolyBoRi?

We support only gcc yet. In the case that we would add additional ones we'll add a mapping of non-default compiler options anyway.
(e.g. -msse2 -> -xarch-sse2 for sun studio). But if you could export the original parameters, this would of course be better.

> If we want to support more compilers I was thinking about dumping the CFLAGS to disk in M4RI which third party tools then can re-use. I was thinking of using the pkg-config.rc file which one can then either use via pkg-config or parse oneself.

I would prefer if you could add a macro defining the options as a string literal to m4ri_config.h. But if you need to setup the rc file anyway, you do not have to duplicate work.



---

archive/issue_comments_126451.json:
```json
{
    "body": "Replying to [comment:42 malb]:\n> I can confirm that passing `-msse2` fixes the issue. I guess I'll have to find a way to save the flags (to disc?) such that third parties (PolyBoRi, Sage) can re-use them? Any suggestions on how to do that?\n\n\nTake a look at GMP's / MPIR's `gmp.h` and the various libs (like e.g. MPFR) that use it:\n\n```sh\n$ egrep -B1 \"__GMP_(CC|CFLAGS)\" /usr/include/gmp.h\n/* Define CC and CFLAGS which were used to build this version of GMP */\n#define __GMP_CC \"gcc -std=gnu99\"\n#define __GMP_CFLAGS \"-march=native -g -O3\"\n```\n\nI for example use (slightly OT):\n\n```sh\n# We eventually use / add these settings (or parts of them) to \"our\" CFLAGS,\n# e.g. \"-march=...\" or \"-mcpu=...\" and \"-mtune=...\" to let gcc generate better,\n# processor-specific code, since ECM doesn't use them if we set our own:\ngmp_cc_pat='/^[ \t]*#[ \t]*define[ \t]\\+__GMP_CC[ \t]\\+/s/.*\"\\([^\"]*\\)\"/\\1/p'\ngmp_cflags_pat='/^[ \t]*#[ \t]*define[ \t]\\+__GMP_CFLAGS[ \t]\\+/s/.*\"\\([^\"]*\\)\"/\\1/p'\n\ngmp_cc=`sed -n -e \"$gmp_cc_pat\" \"$SAGE_LOCAL\"/include/gmp.h`\ngmp_cflags=`sed -n -e \"$gmp_cflags_pat\" \"$SAGE_LOCAL\"/include/gmp.h`\n\nsystem_gmp_h=\"\"\nfor incdir in /usr/include /usr/local/include; do\n    if [ -f $incdir/gmp.h ]; then\n        system_gmp_h=$incdir/gmp.h\n    fi\ndone\nif [ -n \"$system_gmp_h\" ]; then\n    system_gmp_cc=`sed -n -e \"$gmp_cc_pat\" $system_gmp_h`\n    system_gmp_cflags=`sed -n -e \"$gmp_cflags_pat\" $system_gmp_h`\nfi\n\n...\n\n    else\n        # 'native' not supported, see if GMP / MPIR provides us some CPU type:\n        for opt in $gmp_cflags; do\n            case $opt in\n                -march=*|-mcpu=*|-mtune*)\n                    echo \"Found CPU parameter in gmp.h: $opt\"\n                    cpu_params=\"$cpu_params $opt\"\n                    ;;\n                 # perhaps add other options, too (e.g. for different compilers)\n                 *) other_gmp_cflags=\"$other_gmp_cflags $opt\"\n            esac\n        done\n    fi\n    # Only add them if CFLAGS do not already contain similar:\n    if [ -n \"$cpu_params\" ] &&\n        ! (echo \"$CFLAGS\" | egrep -- '-march=|-mcpu=|-mtune=' >/dev/null);\n    then\n        echo \"Using additional host-specific CFLAGS: $cpu_params\"\n        CFLAGS=\"$cpu_params $CFLAGS\"\n    fi\n    if [ -n \"$other_gmp_cflags\" ]; then\n        echo \"Not using other CFLAGS provided by gmp.h: $other_gmp_cflags\"\n    fi\n...\n```\n\nPutting at least the *necessary* flags into `libm4ri.pc` is of course another, non-exclusive option, and even on systems that lack `pkg-config`, you could use the `.pc` file by adding a few lines of shell, Python or whatever code.\n\n\nYou can also test whether adding `-msse2` (if using SSE2 is desired) is necessary at all, or supported (for simplicity, here `gcc`-specific):\n\n```sh\n# Test whether '-msse2' is supported at all:\nif $CC -msse2 -c -x c /dev/null -o /dev/null &>/dev/null; then\n    # Ok, supported. Do we need it?\n    # [Should perhaps check whether __SSE2__ is really non-zero.]\n    if ($CC -E -dM -x c /dev/null | grep -w __SSE2__) &>/dev/null; then\n        # Fine, we don't need to pass any options to enable SSE2.\n        required_cflag=\"\"\n    else\n        required_cflag=\"-msse2\"\n    fi\n    # Check whether the flag conflicts with others, perhaps specified by the user:\n    if $CC $CFLAGS $required_cflag -c -x c /dev/null -o /dev/null &>/dev/null; then\n        # Ok, compatible and sufficient.\n    else\n        # Conflicting flags, issue error message or try something else...\n    fi\nelse\n    # Not supported, perhaps disable use of SSE2.\nfi\n```\n(The same tests can easily be performed from Python as well, e.g. in [Sage's] `setup.py` or `module_list.py`. You could also steal macros from autotools.)",
    "created_at": "2011-08-28T19:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126451",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:42 malb]:
> I can confirm that passing `-msse2` fixes the issue. I guess I'll have to find a way to save the flags (to disc?) such that third parties (PolyBoRi, Sage) can re-use them? Any suggestions on how to do that?


Take a look at GMP's / MPIR's `gmp.h` and the various libs (like e.g. MPFR) that use it:

```sh
$ egrep -B1 "__GMP_(CC|CFLAGS)" /usr/include/gmp.h
/* Define CC and CFLAGS which were used to build this version of GMP */
#define __GMP_CC "gcc -std=gnu99"
#define __GMP_CFLAGS "-march=native -g -O3"
```

I for example use (slightly OT):

```sh
# We eventually use / add these settings (or parts of them) to "our" CFLAGS,
# e.g. "-march=..." or "-mcpu=..." and "-mtune=..." to let gcc generate better,
# processor-specific code, since ECM doesn't use them if we set our own:
gmp_cc_pat='/^[ 	]*#[ 	]*define[ 	]\+__GMP_CC[ 	]\+/s/.*"\([^"]*\)"/\1/p'
gmp_cflags_pat='/^[ 	]*#[ 	]*define[ 	]\+__GMP_CFLAGS[ 	]\+/s/.*"\([^"]*\)"/\1/p'

gmp_cc=`sed -n -e "$gmp_cc_pat" "$SAGE_LOCAL"/include/gmp.h`
gmp_cflags=`sed -n -e "$gmp_cflags_pat" "$SAGE_LOCAL"/include/gmp.h`

system_gmp_h=""
for incdir in /usr/include /usr/local/include; do
    if [ -f $incdir/gmp.h ]; then
        system_gmp_h=$incdir/gmp.h
    fi
done
if [ -n "$system_gmp_h" ]; then
    system_gmp_cc=`sed -n -e "$gmp_cc_pat" $system_gmp_h`
    system_gmp_cflags=`sed -n -e "$gmp_cflags_pat" $system_gmp_h`
fi

...

    else
        # 'native' not supported, see if GMP / MPIR provides us some CPU type:
        for opt in $gmp_cflags; do
            case $opt in
                -march=*|-mcpu=*|-mtune*)
                    echo "Found CPU parameter in gmp.h: $opt"
                    cpu_params="$cpu_params $opt"
                    ;;
                 # perhaps add other options, too (e.g. for different compilers)
                 *) other_gmp_cflags="$other_gmp_cflags $opt"
            esac
        done
    fi
    # Only add them if CFLAGS do not already contain similar:
    if [ -n "$cpu_params" ] &&
        ! (echo "$CFLAGS" | egrep -- '-march=|-mcpu=|-mtune=' >/dev/null);
    then
        echo "Using additional host-specific CFLAGS: $cpu_params"
        CFLAGS="$cpu_params $CFLAGS"
    fi
    if [ -n "$other_gmp_cflags" ]; then
        echo "Not using other CFLAGS provided by gmp.h: $other_gmp_cflags"
    fi
...
```

Putting at least the *necessary* flags into `libm4ri.pc` is of course another, non-exclusive option, and even on systems that lack `pkg-config`, you could use the `.pc` file by adding a few lines of shell, Python or whatever code.


You can also test whether adding `-msse2` (if using SSE2 is desired) is necessary at all, or supported (for simplicity, here `gcc`-specific):

```sh
# Test whether '-msse2' is supported at all:
if $CC -msse2 -c -x c /dev/null -o /dev/null &>/dev/null; then
    # Ok, supported. Do we need it?
    # [Should perhaps check whether __SSE2__ is really non-zero.]
    if ($CC -E -dM -x c /dev/null | grep -w __SSE2__) &>/dev/null; then
        # Fine, we don't need to pass any options to enable SSE2.
        required_cflag=""
    else
        required_cflag="-msse2"
    fi
    # Check whether the flag conflicts with others, perhaps specified by the user:
    if $CC $CFLAGS $required_cflag -c -x c /dev/null -o /dev/null &>/dev/null; then
        # Ok, compatible and sufficient.
    else
        # Conflicting flags, issue error message or try something else...
    fi
else
    # Not supported, perhaps disable use of SSE2.
fi
```
(The same tests can easily be performed from Python as well, e.g. in [Sage's] `setup.py` or `module_list.py`. You could also steal macros from autotools.)



---

archive/issue_comments_126452.json:
```json
{
    "body": "The attached patch manually adds `-msse -msse2` in module_list.py if `__M4RI_HAVE_SSE2`. I fully agree that M4RI should export its flags both as an .rc file and as a define like GMP and I will implement this as well.",
    "created_at": "2011-08-28T19:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126452",
    "user": "https://github.com/malb"
}
```

The attached patch manually adds `-msse -msse2` in module_list.py if `__M4RI_HAVE_SSE2`. I fully agree that M4RI should export its flags both as an .rc file and as a define like GMP and I will implement this as well.



---

archive/issue_comments_126453.json:
```json
{
    "body": "Leif, note that M4RI checks for `-msse2` like this\n\n    https://bitbucket.org/malb/m4ri/src/58007c8c739a/m4/ax_ext.m4",
    "created_at": "2011-08-28T19:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126453",
    "user": "https://github.com/malb"
}
```

Leif, note that M4RI checks for `-msse2` like this

    https://bitbucket.org/malb/m4ri/src/58007c8c739a/m4/ax_ext.m4



---

archive/issue_comments_126454.json:
```json
{
    "body": "Replying to [comment:48 AlexanderDreyer]:\n> Replying to [comment:46 malb]:\n> > The only caveat I could see with that approach is that it limits us to use !GCC. For Sage this isn't really a problem. M4RI supports more compilers. How's that for PolyBoRi?\n\n> We support only gcc yet. In the case that we would add additional ones we'll add a mapping of non-default compiler options anyway.\n\nYep. Adding such is almost trivial, at least for a fixed set of compilers (and platforms).\n\n\n\n\n> (e.g. -msse2 -> -xarch-sse2 for sun studio). But if you could export the original parameters, this would of course be better.\n\n\nI'd do both, and resort to the SCons method in case no (suitable) parameters are available.\n\n\n\n\n> > If we want to support more compilers I was thinking about dumping the CFLAGS to disk in M4RI which third party tools then can re-use. I was thinking of using the pkg-config.rc file which one can then either use via pkg-config or parse oneself.\n\n> I would prefer if you could add a macro defining the options as a string literal to m4ri_config.h. But if you need to setup the rc file anyway, you do not have to duplicate work.\n\nI'd do both, but preferably use the header method. Using the `.pc` file is limited and to some extent dangerous, since `pkg-config` files lack (by default) a compiler command entry such that the flags may be invalid or insufficient for the actual compiler used. \n\n(Note that some people even put flags into `CC` rather than `CFLAGS`, and different installed GCC versions might default to different architectures as well.)\n\nYou could either define other variables there, to get parsed / interpreted \"manually\", or simply put exactly the same lines you put into your header file into the `.pc` file, since incidentally any `#define` in a `.pc` file happens to be just a comment. :-)\n\n(You'll have to use e.g. `grep` to extract them though, rather than `pkg-config`.)",
    "created_at": "2011-08-28T20:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126454",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:48 AlexanderDreyer]:
> Replying to [comment:46 malb]:
> > The only caveat I could see with that approach is that it limits us to use !GCC. For Sage this isn't really a problem. M4RI supports more compilers. How's that for PolyBoRi?

> We support only gcc yet. In the case that we would add additional ones we'll add a mapping of non-default compiler options anyway.

Yep. Adding such is almost trivial, at least for a fixed set of compilers (and platforms).




> (e.g. -msse2 -> -xarch-sse2 for sun studio). But if you could export the original parameters, this would of course be better.


I'd do both, and resort to the SCons method in case no (suitable) parameters are available.




> > If we want to support more compilers I was thinking about dumping the CFLAGS to disk in M4RI which third party tools then can re-use. I was thinking of using the pkg-config.rc file which one can then either use via pkg-config or parse oneself.

> I would prefer if you could add a macro defining the options as a string literal to m4ri_config.h. But if you need to setup the rc file anyway, you do not have to duplicate work.

I'd do both, but preferably use the header method. Using the `.pc` file is limited and to some extent dangerous, since `pkg-config` files lack (by default) a compiler command entry such that the flags may be invalid or insufficient for the actual compiler used. 

(Note that some people even put flags into `CC` rather than `CFLAGS`, and different installed GCC versions might default to different architectures as well.)

You could either define other variables there, to get parsed / interpreted "manually", or simply put exactly the same lines you put into your header file into the `.pc` file, since incidentally any `#define` in a `.pc` file happens to be just a comment. :-)

(You'll have to use e.g. `grep` to extract them though, rather than `pkg-config`.)



---

archive/issue_comments_126455.json:
```json
{
    "body": "Replying to [comment:50 malb]:\n> The attached patch manually adds `-msse -msse2` in module_list.py if `__M4RI_HAVE_SSE2`. I fully agree that M4RI should export its flags both as an .rc file and as a define like GMP and I will implement this as well.\n\n\nShouldn't the modules also depend on `SAGE_LOCAL + \"/include/m4ri/m4ri_config.h\"`? (You should use `SAGE_INC` there, too, btw. ;-) )\n\nThis should be done in a more general or automatic way, i.e., `m4ri_extra_compile_args` (and probably `-std=c99`) should be added in `setup.py` for every module that links against `libm4ri`.\n\n(I'm adding similar for dependencies, e.g. at #8664, and other stuff, in order to make `module_list.py` more modular and less error-prone.)\n\nP.S.: SSE2 is a superset of SSE, just as `-msse2` implies `-msse`.\n\nThe patch doesn't yet check whether adding these flags is sufficient. Haven't looked at your M4RI code, but if you add something like\n\n```C\n#if defined(__M4RI_HAVE_SSE2) && __M4RI_HAVE_SSE2\n#   if !defined(__SSE2__) || !__SSE2__\n#       error Your current compiler and / or CFLAGS setting doesn't allow SSE2 code. Please change that or these to the setting(s) you used when compiling M4RI.\n#   endif\n#endif\n```\n(I wanted to post that to sage-devel a few hours ago, in response to:\n\n```\n> > If 'configure' determined the machine supports SSE2, __M4RI_HAVE_SSE2 \n> > is set to 1, but even if that's the case, you should still also test \n> > __SSE2__ when compiling code later (including code *using* the \n> > library). \n\n> Why? I want that whoever links against M4RI lives in the same world as M4RI. \n```\nfor the reasons given above.)",
    "created_at": "2011-08-28T20:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126455",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:50 malb]:
> The attached patch manually adds `-msse -msse2` in module_list.py if `__M4RI_HAVE_SSE2`. I fully agree that M4RI should export its flags both as an .rc file and as a define like GMP and I will implement this as well.


Shouldn't the modules also depend on `SAGE_LOCAL + "/include/m4ri/m4ri_config.h"`? (You should use `SAGE_INC` there, too, btw. ;-) )

This should be done in a more general or automatic way, i.e., `m4ri_extra_compile_args` (and probably `-std=c99`) should be added in `setup.py` for every module that links against `libm4ri`.

(I'm adding similar for dependencies, e.g. at #8664, and other stuff, in order to make `module_list.py` more modular and less error-prone.)

P.S.: SSE2 is a superset of SSE, just as `-msse2` implies `-msse`.

The patch doesn't yet check whether adding these flags is sufficient. Haven't looked at your M4RI code, but if you add something like

```C
#if defined(__M4RI_HAVE_SSE2) && __M4RI_HAVE_SSE2
#   if !defined(__SSE2__) || !__SSE2__
#       error Your current compiler and / or CFLAGS setting doesn't allow SSE2 code. Please change that or these to the setting(s) you used when compiling M4RI.
#   endif
#endif
```
(I wanted to post that to sage-devel a few hours ago, in response to:

```
> > If 'configure' determined the machine supports SSE2, __M4RI_HAVE_SSE2 
> > is set to 1, but even if that's the case, you should still also test 
> > __SSE2__ when compiling code later (including code *using* the 
> > library). 

> Why? I want that whoever links against M4RI lives in the same world as M4RI. 
```
for the reasons given above.)



---

archive/issue_comments_126456.json:
```json
{
    "body": "Replying to [comment:53 leif]:\n> This should be done in a more general or automatic way, i.e., `m4ri_extra_compile_args` (and probably `-std=c99`) should be added in `setup.py` for every module that links against `libm4ri`.\n\n\nP.S.: I don't mean you have to do / change that *here*, as e.g. Francois is also messing around in that area of `setup.py` ;-) , such that patches were likely to conflict, so I could also change that later on another ticket, perhaps unrelated to M4RI, but dealing with `setup.py`.",
    "created_at": "2011-08-28T21:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126456",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:53 leif]:
> This should be done in a more general or automatic way, i.e., `m4ri_extra_compile_args` (and probably `-std=c99`) should be added in `setup.py` for every module that links against `libm4ri`.


P.S.: I don't mean you have to do / change that *here*, as e.g. Francois is also messing around in that area of `setup.py` ;-) , such that patches were likely to conflict, so I could also change that later on another ticket, perhaps unrelated to M4RI, but dealing with `setup.py`.



---

archive/issue_comments_126457.json:
```json
{
    "body": "A new PolyBoRi 0.7.1 spkg (with activated -msse2 option, when necessary) can be found here:\nhttp://sage.math.washington.edu/home/dreyer/spkg/polybori-0.7.1.p5.spkg",
    "created_at": "2011-08-29T00:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126457",
    "user": "https://github.com/alexanderdreyer"
}
```

A new PolyBoRi 0.7.1 spkg (with activated -msse2 option, when necessary) can be found here:
http://sage.math.washington.edu/home/dreyer/spkg/polybori-0.7.1.p5.spkg



---

archive/issue_comments_126458.json:
```json
{
    "body": "Replying to [comment:54 leif]:\n> Replying to [comment:53 leif]:\n> > This should be done in a more general or automatic way, i.e., `m4ri_extra_compile_args` (and probably `-std=c99`) should be added in `setup.py` for every module that links against `libm4ri`.\n\n> \n> P.S.: I don't mean you have to do / change that *here*, as e.g. Francois is also messing around in that area of `setup.py` ;-) , such that patches were likely to conflict, so I could also change that later on another ticket, perhaps unrelated to M4RI, but dealing with `setup.py`.\n> \n\n\nAll my changes have been merged in 4.7.2.alpha1 I don't see them getting out again. So I would say it is safe to base your patch on that.",
    "created_at": "2011-08-29T01:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126458",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:54 leif]:
> Replying to [comment:53 leif]:
> > This should be done in a more general or automatic way, i.e., `m4ri_extra_compile_args` (and probably `-std=c99`) should be added in `setup.py` for every module that links against `libm4ri`.

> 
> P.S.: I don't mean you have to do / change that *here*, as e.g. Francois is also messing around in that area of `setup.py` ;-) , such that patches were likely to conflict, so I could also change that later on another ticket, perhaps unrelated to M4RI, but dealing with `setup.py`.
> 


All my changes have been merged in 4.7.2.alpha1 I don't see them getting out again. So I would say it is safe to base your patch on that.



---

archive/issue_comments_126459.json:
```json
{
    "body": "Replying to [comment:56 fbissey]:\n> Replying to [comment:54 leif]:\n> > P.S.: I don't mean you have to do / change that *here*, as e.g. Francois is also messing around in that area of `setup.py` ;-) , such that patches were likely to conflict, so I could also change that later on another ticket, perhaps unrelated to M4RI, but dealing with `setup.py`.\n> > \n\n> \n> All my changes have been merged in 4.7.2.alpha1 I don't see them getting out again. So I would say it is safe to base your patch on that.\n\n\nBut **I've** to again rebase my patch from #8664 on yours... :D\n\nP.S.: Some good and bad news for #9958 coming soon...",
    "created_at": "2011-08-29T02:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126459",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:56 fbissey]:
> Replying to [comment:54 leif]:
> > P.S.: I don't mean you have to do / change that *here*, as e.g. Francois is also messing around in that area of `setup.py` ;-) , such that patches were likely to conflict, so I could also change that later on another ticket, perhaps unrelated to M4RI, but dealing with `setup.py`.
> > 

> 
> All my changes have been merged in 4.7.2.alpha1 I don't see them getting out again. So I would say it is safe to base your patch on that.


But **I've** to again rebase my patch from #8664 on yours... :D

P.S.: Some good and bad news for #9958 coming soon...



---

archive/issue_comments_126460.json:
```json
{
    "body": "Indeed, I mothballed SAGE_DEBIAN ! I didn't notice you had a patch touching that area in #8664, it took too long to merge that one really. It has to go in.\n\nI am bracing myself for #9958, you know we already ship sage-on-gentoo with python-2.7 and it works well (#11339 excluded) on x86/amd64 linux and OS X in a prefix. But we are getting off-track.",
    "created_at": "2011-08-29T02:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126460",
    "user": "https://github.com/kiwifb"
}
```

Indeed, I mothballed SAGE_DEBIAN ! I didn't notice you had a patch touching that area in #8664, it took too long to merge that one really. It has to go in.

I am bracing myself for #9958, you know we already ship sage-on-gentoo with python-2.7 and it works well (#11339 excluded) on x86/amd64 linux and OS X in a prefix. But we are getting off-track.



---

archive/issue_comments_126461.json:
```json
{
    "body": "The PolyBoRi spkg has now its own ticket: #11756 It it solved the problem (it does for me on a Gentoo VM), please review.",
    "created_at": "2011-08-29T09:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126461",
    "user": "https://github.com/alexanderdreyer"
}
```

The PolyBoRi spkg has now its own ticket: #11756 It it solved the problem (it does for me on a Gentoo VM), please review.



---

archive/issue_comments_126462.json:
```json
{
    "body": "Hi,\n\nso how's this for a strategy:\n\n* we do the fixes (or something similar) that Alexander and I proposed for PolyBoRi and !Sage respectively now\n* I provide (in a new ticket) an updated M4RI which exports its !CLFAGS both in the headers and in the .rc file and also checks for __SSE2__ to fail gracefully.\n* We then update !Sage & PolyBoRi again to use these !CFLAGS?",
    "created_at": "2011-08-29T11:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126462",
    "user": "https://github.com/malb"
}
```

Hi,

so how's this for a strategy:

* we do the fixes (or something similar) that Alexander and I proposed for PolyBoRi and !Sage respectively now
* I provide (in a new ticket) an updated M4RI which exports its !CLFAGS both in the headers and in the .rc file and also checks for __SSE2__ to fail gracefully.
* We then update !Sage & PolyBoRi again to use these !CFLAGS?



---

archive/issue_comments_126463.json:
```json
{
    "body": "polybori-0.7.1.p5.spkg does build. I applied the two indicated patches but building of sage itself fails:\n\n```\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -fPIC -I/storage/sage-python2.6/sage-4.7.2.alpha1/local/include -I/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/csage -I/storage/sage-python2.6/sage-4.7\n.2.alpha1/devel/sage/sage/ext -I/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/python2.6 -c sage/matrix/matrix_integer_dense.c -o build/temp.linux-i686-2.6/sage/matrix/matrix_integer_dense.o -std=c99 -w\nIn file included from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:42:0,\n                 from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31,\n                 from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,\n                 from sage/matrix/matrix_integer_dense.c:240:\n/storage/strogdon/gentoo/usr/lib/gcc/i686-pc-linux-gnu/4.5.2/include/emmintrin.h:32:3: error: #error \"SSE2 instruction set not enabled\"\nIn file included from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31:0,\n                 from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,\n                 from sage/matrix/matrix_integer_dense.c:240:\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function mzd_row_add_offset:\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741:5: error: __m128i undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741:5: note: each undeclared identifier is reported only once for each function it appears in\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741:14: error: __src undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741:31: error: expected expression before ) token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742:14: error: __dst undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742:31: error: expected expression before ) token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:743:14: error: expected expression before const\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:746:15: error: expected ; before xmm1\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:747:18: error: xmm1 undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:749:21: error: eof undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function mzd_combine_even_in_place:\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190:7: error: __m128i undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190:16: error: a128 undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190:32: error: expected expression before ) token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191:16: error: b128 undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191:32: error: expected expression before ) token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1192:21: error: expected =, ,, ;, asm or __attribute__ before * token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1192:22: error: eof undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1192:37: error: expected expression before ) token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function mzd_combine_even:\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274:7: error: __m128i undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274:16: error: a128 undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274:32: error: expected expression before ) token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275:16: error: b128 undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275:32: error: expected expression before ) token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276:16: error: c128 undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276:32: error: expected expression before ) token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1277:21: error: expected =, ,, ;, asm or __attribute__ before * token\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1277:22: error: eof undeclared (first use in this function)\n/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1277:37: error: expected expression before ) token\n```",
    "created_at": "2011-08-29T14:04:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126463",
    "user": "https://github.com/strogdon"
}
```

polybori-0.7.1.p5.spkg does build. I applied the two indicated patches but building of sage itself fails:

```
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -fPIC -I/storage/sage-python2.6/sage-4.7.2.alpha1/local/include -I/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/csage -I/storage/sage-python2.6/sage-4.7
.2.alpha1/devel/sage/sage/ext -I/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/python2.6 -c sage/matrix/matrix_integer_dense.c -o build/temp.linux-i686-2.6/sage/matrix/matrix_integer_dense.o -std=c99 -w
In file included from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:42:0,
                 from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31,
                 from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,
                 from sage/matrix/matrix_integer_dense.c:240:
/storage/strogdon/gentoo/usr/lib/gcc/i686-pc-linux-gnu/4.5.2/include/emmintrin.h:32:3: error: #error "SSE2 instruction set not enabled"
In file included from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/permutation.h:31:0,
                 from /storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/m4ri.h:50,
                 from sage/matrix/matrix_integer_dense.c:240:
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function mzd_row_add_offset:
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741:5: error: __m128i undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741:5: note: each undeclared identifier is reported only once for each function it appears in
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741:14: error: __src undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:741:31: error: expected expression before ) token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742:14: error: __dst undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:742:31: error: expected expression before ) token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:743:14: error: expected expression before const
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:746:15: error: expected ; before xmm1
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:747:18: error: xmm1 undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:749:21: error: eof undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function mzd_combine_even_in_place:
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190:7: error: __m128i undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190:16: error: a128 undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1190:32: error: expected expression before ) token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191:16: error: b128 undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1191:32: error: expected expression before ) token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1192:21: error: expected =, ,, ;, asm or __attribute__ before * token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1192:22: error: eof undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1192:37: error: expected expression before ) token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h: In function mzd_combine_even:
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274:7: error: __m128i undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274:16: error: a128 undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1274:32: error: expected expression before ) token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275:16: error: b128 undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1275:32: error: expected expression before ) token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276:16: error: c128 undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1276:32: error: expected expression before ) token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1277:21: error: expected =, ,, ;, asm or __attribute__ before * token
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1277:22: error: eof undeclared (first use in this function)
/storage/sage-python2.6/sage-4.7.2.alpha1/local/include/m4ri/packedmatrix.h:1277:37: error: expected expression before ) token
```



---

archive/issue_comments_126464.json:
```json
{
    "body": "Okay, I know what the issue is and will update the patch accordingly!",
    "created_at": "2011-08-29T14:16:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126464",
    "user": "https://github.com/malb"
}
```

Okay, I know what the issue is and will update the patch accordingly!



---

archive/issue_comments_126465.json:
```json
{
    "body": "Replying to [comment:60 malb]:\n> so how's this for a strategy:\n> \n\n\n>  * we do the fixes (or something similar) that Alexander and I proposed for PolyBoRi and !Sage respectively now \n\n\n>  * I provide (in a new ticket) an updated M4RI which exports its !CLFAGS both in the headers and in the .rc file and also checks for __SSE2__ to fail gracefully. \n\n\n>  * We then update !Sage & PolyBoRi again to use these !CFLAGS?\n\n\n!That ?sounds !reasonable!!\n\nAnd also avoids circular ticket dependencies for the follow-up(s)...",
    "created_at": "2011-08-29T14:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126465",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:60 malb]:
> so how's this for a strategy:
> 


>  * we do the fixes (or something similar) that Alexander and I proposed for PolyBoRi and !Sage respectively now 


>  * I provide (in a new ticket) an updated M4RI which exports its !CLFAGS both in the headers and in the .rc file and also checks for __SSE2__ to fail gracefully. 


>  * We then update !Sage & PolyBoRi again to use these !CFLAGS?


!That ?sounds !reasonable!!

And also avoids circular ticket dependencies for the follow-up(s)...



---

archive/issue_comments_126466.json:
```json
{
    "body": "... though you could easily add the graceful dead ''here' as well.",
    "created_at": "2011-08-29T14:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126466",
    "user": "https://github.com/nexttime"
}
```

... though you could easily add the graceful dead ''here' as well.



---

archive/issue_comments_126467.json:
```json
{
    "body": "I wanted to add it to M4RI and so far the update to this ticket does not require a new M4RI SPKG. I'm in the process of patching M4RI and will open a new ticket for it shortly. Once that's done we can easily make that a dependency for this ticket?",
    "created_at": "2011-08-29T15:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126467",
    "user": "https://github.com/malb"
}
```

I wanted to add it to M4RI and so far the update to this ticket does not require a new M4RI SPKG. I'm in the process of patching M4RI and will open a new ticket for it shortly. Once that's done we can easily make that a dependency for this ticket?



---

archive/issue_comments_126468.json:
```json
{
    "body": "Attachment [trac_11574_m4ri_sse2.patch](tarball://root/attachments/some-uuid/ticket11574/trac_11574_m4ri_sse2.patch) by @malb created at 2011-08-29 15:32:22\n\nThe updated patch *should* allow the Sage build to go through. Testing on cicero now. I also added some `depends` fields as suggested by Leif.",
    "created_at": "2011-08-29T15:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126468",
    "user": "https://github.com/malb"
}
```

Attachment [trac_11574_m4ri_sse2.patch](tarball://root/attachments/some-uuid/ticket11574/trac_11574_m4ri_sse2.patch) by @malb created at 2011-08-29 15:32:22

The updated patch *should* allow the Sage build to go through. Testing on cicero now. I also added some `depends` fields as suggested by Leif.



---

archive/issue_comments_126469.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-08-29T15:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126469",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_126470.json:
```json
{
    "body": "The new M4RI SPKG is at #11757",
    "created_at": "2011-08-29T16:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126470",
    "user": "https://github.com/malb"
}
```

The new M4RI SPKG is at #11757



---

archive/issue_comments_126471.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-08-29T18:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126471",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_126472.json:
```json
{
    "body": "Replying to [comment:67 malb]:\n> The new M4RI SPKG is at #11757\n\n\nDoes that mean that #11757 makes this ticket a duplicate?",
    "created_at": "2011-08-29T18:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126472",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:67 malb]:
> The new M4RI SPKG is at #11757


Does that mean that #11757 makes this ticket a duplicate?



---

archive/issue_comments_126473.json:
```json
{
    "body": "Replying to [comment:66 malb]:\n> The updated patch *should* allow the Sage build to go through. Testing on cicero now. I also added some `depends` fields as suggested by Leif.\n\n\nYes, the updated patch does allow Sage to build and there are no failing tests.",
    "created_at": "2011-08-30T04:27:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126473",
    "user": "https://github.com/strogdon"
}
```

Replying to [comment:66 malb]:
> The updated patch *should* allow the Sage build to go through. Testing on cicero now. I also added some `depends` fields as suggested by Leif.


Yes, the updated patch does allow Sage to build and there are no failing tests.



---

archive/issue_comments_126474.json:
```json
{
    "body": "Replying to [comment:68 SimonKing]:\n> Replying to [comment:67 malb]:\n> > The new M4RI SPKG is at #11757\n\n> \n> Does that mean that #11757 makes this ticket a duplicate?\n\n\nI guess one could look at it this way. I'd suggest: We deal with this ticket here first and if people then still have energy and are not sick of M4RI yet we can also include #11757.",
    "created_at": "2011-08-30T10:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126474",
    "user": "https://github.com/malb"
}
```

Replying to [comment:68 SimonKing]:
> Replying to [comment:67 malb]:
> > The new M4RI SPKG is at #11757

> 
> Does that mean that #11757 makes this ticket a duplicate?


I guess one could look at it this way. I'd suggest: We deal with this ticket here first and if people then still have energy and are not sick of M4RI yet we can also include #11757.



---

archive/issue_comments_126475.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-08-30T19:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126475",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_126476.json:
```json
{
    "body": "So, anybody up for reviewing this? Or are people waiting for  [attachment:trac_11574_m4ri_sse2.patch] being ported to #11757?",
    "created_at": "2011-08-31T10:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126476",
    "user": "https://github.com/malb"
}
```

So, anybody up for reviewing this? Or are people waiting for  [attachment:trac_11574_m4ri_sse2.patch] being ported to #11757?



---

archive/issue_comments_126477.json:
```json
{
    "body": "Replying to [comment:72 malb]:\n> So, anybody up for reviewing this? Or are people waiting for  [attachment:trac_11574_m4ri_sse2.patch] being ported to #11757?\n\nI should probably defer review to Simon since I got in through the backdoor. However,\nsince Sage builds here and there are no doctest failures I would give it a positive review. I do have one question. Shouldn't this ticket depend upon ticket #11756, even though that one has a positive review?",
    "created_at": "2011-09-01T01:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126477",
    "user": "https://github.com/strogdon"
}
```

Replying to [comment:72 malb]:
> So, anybody up for reviewing this? Or are people waiting for  [attachment:trac_11574_m4ri_sse2.patch] being ported to #11757?

I should probably defer review to Simon since I got in through the backdoor. However,
since Sage builds here and there are no doctest failures I would give it a positive review. I do have one question. Shouldn't this ticket depend upon ticket #11756, even though that one has a positive review?



---

archive/issue_comments_126478.json:
```json
{
    "body": "Replying to [comment:73 strogdon]:\n> Shouldn't this ticket depend upon ticket #11756, even though that one has a positive review?\n\n\nYep, IMHO even if #11756 had already been merged into some devel release.",
    "created_at": "2011-09-01T02:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126478",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:73 strogdon]:
> Shouldn't this ticket depend upon ticket #11756, even though that one has a positive review?


Yep, IMHO even if #11756 had already been merged into some devel release.



---

archive/issue_comments_126479.json:
```json
{
    "body": "Replying to [comment:73 strogdon]:\n> Replying to [comment:72 malb]:\n> > So, anybody up for reviewing this? Or are people waiting for  [attachment:trac_11574_m4ri_sse2.patch] being ported to #11757?\n\n> I should probably defer review to Simon since I got in through the backdoor.\n\nSorry, I will probably not be able to review it in the next couple of days. So, iI'd appreciate if someone was quicker than I.",
    "created_at": "2011-09-01T11:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126479",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:73 strogdon]:
> Replying to [comment:72 malb]:
> > So, anybody up for reviewing this? Or are people waiting for  [attachment:trac_11574_m4ri_sse2.patch] being ported to #11757?

> I should probably defer review to Simon since I got in through the backdoor.

Sorry, I will probably not be able to review it in the next couple of days. So, iI'd appreciate if someone was quicker than I.



---

archive/issue_comments_126480.json:
```json
{
    "body": "anyone?",
    "created_at": "2011-09-06T15:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126480",
    "user": "https://github.com/malb"
}
```

anyone?



---

archive/issue_comments_126481.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-09-07T09:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126481",
    "user": "https://github.com/alexanderdreyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_126482.json:
```json
{
    "body": "The spkg builds and and installs fine. Together with the patches `sage -testall ` was run successfully on a SuSE Linux Enterprise 11 x86_64, Gentoo i486, and Mac OS X 10.5 ppc. \n\nSo, I can cordially give a positive review!",
    "created_at": "2011-09-07T09:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126482",
    "user": "https://github.com/alexanderdreyer"
}
```

The spkg builds and and installs fine. Together with the patches `sage -testall ` was run successfully on a SuSE Linux Enterprise 11 x86_64, Gentoo i486, and Mac OS X 10.5 ppc. 

So, I can cordially give a positive review!



---

archive/issue_comments_126483.json:
```json
{
    "body": "[attachment:m4ri_20110601.patch] has no ticket number in its commit message.",
    "created_at": "2011-09-12T06:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126483",
    "user": "https://github.com/nexttime"
}
```

[attachment:m4ri_20110601.patch] has no ticket number in its commit message.



---

archive/issue_comments_126484.json:
```json
{
    "body": "rebased to 4.7.1.alpha4",
    "created_at": "2011-09-12T14:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126484",
    "user": "https://github.com/malb"
}
```

rebased to 4.7.1.alpha4



---

archive/issue_comments_126485.json:
```json
{
    "body": "Attachment [m4ri_20110601.patch](tarball://root/attachments/some-uuid/ticket11574/m4ri_20110601.patch) by @malb created at 2011-09-12 14:13:07\n\nfixed.",
    "created_at": "2011-09-12T14:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126485",
    "user": "https://github.com/malb"
}
```

Attachment [m4ri_20110601.patch](tarball://root/attachments/some-uuid/ticket11574/m4ri_20110601.patch) by @malb created at 2011-09-12 14:13:07

fixed.



---

archive/issue_comments_126486.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-09-12T18:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11402#issuecomment-126486",
    "user": "https://github.com/nexttime"
}
```

Resolution: fixed



---

archive/issue_events_030351.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-12T18:36:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11402",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11402#event-30351"
}
```
