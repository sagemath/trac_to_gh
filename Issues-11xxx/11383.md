# Issue 11383: Color('red') == Color('red') returns False

archive/issues_011211.json:
```json
{
    "body": "I would like this to be True:\n\n```\nsage: Color('red') == Color('red')\nFalse\n```\n\nand these as well:\n\n```\nsage: Color((1,0,0)) == Color('red')  \nFalse                                 \nsage: Color((1,0,0)) == Color((1,0,0))\nFalse                                 \n```\n\nApply [attachment:trac_11383.patch]\n\nAssignee: @seblabbe\n\nCC:  @kcrisman\n\nKeywords: beginner, sd31\n\nReviewer: Itai Bar-Natan, Karl-Dieter Crisman, Andr\u00e9 Apitzsch, Jan P\u00f6schko\n\nAuthor: Ryan Grout, Itai Bar-Natan, Jan P\u00f6schko\n\nMerged: sage-5.1.beta2\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/11383\n\n",
    "closed_at": "2012-06-02T12:10:00Z",
    "created_at": "2011-05-26T15:31:55Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "Color('red') == Color('red') returns False",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11383",
    "user": "https://github.com/seblabbe"
}
```
I would like this to be True:

```
sage: Color('red') == Color('red')
False
```

and these as well:

```
sage: Color((1,0,0)) == Color('red')  
False                                 
sage: Color((1,0,0)) == Color((1,0,0))
False                                 
```

Apply [attachment:trac_11383.patch]

Assignee: @seblabbe

CC:  @kcrisman

Keywords: beginner, sd31

Reviewer: Itai Bar-Natan, Karl-Dieter Crisman, André Apitzsch, Jan Pöschko

Author: Ryan Grout, Itai Bar-Natan, Jan Pöschko

Merged: sage-5.1.beta2

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/11383





---

archive/issue_comments_156222.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n-\n I would like this to be True:\n \n ```\n``````\n",
    "created_at": "2011-05-26T15:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156222",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
-
 I would like this to be True:
 
 ```
``````




---

archive/issue_comments_156223.json:
```json
{
    "body": "Changing assignee from jason, was to @seblabbe.",
    "created_at": "2011-05-26T15:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156223",
    "user": "https://github.com/seblabbe"
}
```

Changing assignee from jason, was to @seblabbe.



---

archive/issue_comments_156224.json:
```json
{
    "body": "<a id='comment:3'></a>\nhow picky do we want a comparison to be?  Should it be more of a perceptive comparison (similar colors evaluate to True) or more of a numerically exact comparison (the colors must be _exactly_ the same to evaluate to True)?",
    "created_at": "2011-06-15T03:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156224",
    "user": "https://trac.sagemath.org/admin/accounts/users/ryan"
}
```

<a id='comment:3'></a>
how picky do we want a comparison to be?  Should it be more of a perceptive comparison (similar colors evaluate to True) or more of a numerically exact comparison (the colors must be _exactly_ the same to evaluate to True)?



---

archive/issue_comments_156225.json:
```json
{
    "body": "Changing keywords from \"beginner\" to \"beginner, sd31\".",
    "created_at": "2011-06-15T03:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156225",
    "user": "https://trac.sagemath.org/admin/accounts/users/ryan"
}
```

Changing keywords from "beginner" to "beginner, sd31".



---

archive/issue_comments_156226.json:
```json
{
    "body": "Author: Ryan Grout",
    "created_at": "2011-06-15T03:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156226",
    "user": "https://trac.sagemath.org/admin/accounts/users/ryan"
}
```

Author: Ryan Grout



---

archive/issue_comments_156227.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-06-15T03:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156227",
    "user": "https://trac.sagemath.org/admin/accounts/users/ryan"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_156228.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [ryan](#comment%3A3):\n> how picky do we want a comparison to be?  Should it be more of a perceptive comparison (similar colors evaluate to True) or more of a numerically exact comparison (the colors must be _exactly_ the same to evaluate to True)?\n\n\nGood question. I was thinking the second (more picky).\n\nWill look at the patch tomorrow.\n\nS\u00e9bastien",
    "created_at": "2011-06-15T10:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156228",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:5'></a>
Replying to [ryan](#comment%3A3):
> how picky do we want a comparison to be?  Should it be more of a perceptive comparison (similar colors evaluate to True) or more of a numerically exact comparison (the colors must be _exactly_ the same to evaluate to True)?


Good question. I was thinking the second (more picky).

Will look at the patch tomorrow.

Sébastien



---

archive/issue_comments_156229.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-06-15T13:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156229",
    "user": "https://github.com/kini"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_156230.json:
```json
{
    "body": "<a id='comment:6'></a>\n><rgrout> when comparing colors, do we compare the floating point tuple or should we scale by 255 and round and then compare?\n\n\n><rgrout> so I guess I'm asking how picky do we want a comparison to be?  Should it be more of a perceptive comparison or more of a numerically exact comparison?\n\n\n><kini> perceptual similarity is not transitive\n\n\n><kini> though rounding to the closest 1/256 is not exactly a perceptual comparison\n\n\nI agree with slabbe. The patch gives me doctest errors. Please fix them! (Specifically 'green' is not (0,1,0).)",
    "created_at": "2011-06-15T13:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156230",
    "user": "https://github.com/kini"
}
```

<a id='comment:6'></a>
><rgrout> when comparing colors, do we compare the floating point tuple or should we scale by 255 and round and then compare?


><rgrout> so I guess I'm asking how picky do we want a comparison to be?  Should it be more of a perceptive comparison or more of a numerically exact comparison?


><kini> perceptual similarity is not transitive


><kini> though rounding to the closest 1/256 is not exactly a perceptual comparison


I agree with slabbe. The patch gives me doctest errors. Please fix them! (Specifically 'green' is not (0,1,0).)



---

archive/issue_comments_156231.json:
```json
{
    "body": "Attachment [trac_11383_color_cmp.patch](tarball://root/attachments/some-uuid/ticket11383/trac_11383_color_cmp.patch) by ryan created at 2011-06-15 15:46:58\n\ncolor testing v3",
    "created_at": "2011-06-15T15:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156231",
    "user": "https://trac.sagemath.org/admin/accounts/users/ryan"
}
```

Attachment [trac_11383_color_cmp.patch](tarball://root/attachments/some-uuid/ticket11383/trac_11383_color_cmp.patch) by ryan created at 2011-06-15 15:46:58

color testing v3



---

archive/issue_comments_156232.json:
```json
{
    "body": "<a id='comment:7'></a>\nAnother reason to be picky is the already present hashing behavior. Very close colors get different hashing value, so we want those color not to be equal. Otherwise we must change the hash method which is not a good idea I think.\n\n```\nsage: hash(Color((1,0,0)))          \n188337232                           \nsage: hash(Color((1.0,0,0)))        \n188338128                           \nsage: hash(Color((1.0,0.0,0)))      \n188337616                           \nsage: hash(Color((1.0,0.0,0.0)))    \n188337616                           \nsage: hash(Color('red'))            \n188337360                           \nsage: hash(Color((0.99999,0.0,0.0)))\n188614128                                                           \n```\n\nFrom the [Python Language Reference](http://docs.python.org/reference/datamodel.html#object.__hash__) : *\"The only required property is that objects which compare equal have the same hash value\"*.",
    "created_at": "2011-06-15T15:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156232",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:7'></a>
Another reason to be picky is the already present hashing behavior. Very close colors get different hashing value, so we want those color not to be equal. Otherwise we must change the hash method which is not a good idea I think.

```
sage: hash(Color((1,0,0)))          
188337232                           
sage: hash(Color((1.0,0,0)))        
188338128                           
sage: hash(Color((1.0,0.0,0)))      
188337616                           
sage: hash(Color((1.0,0.0,0.0)))    
188337616                           
sage: hash(Color('red'))            
188337360                           
sage: hash(Color((0.99999,0.0,0.0)))
188614128                                                           
```

From the [Python Language Reference](http://docs.python.org/reference/datamodel.html#object.__hash__) : *"The only required property is that objects which compare equal have the same hash value"*.



---

archive/issue_comments_156233.json:
```json
{
    "body": "<a id='comment:8'></a>\nColor hashing is already broken in terms of any possible sane equality comparison:\n\n```python\nsage: c = Color('red')\nsage: hash(c)\n87590352\nsage: hash(Color('red'))\n87590672\nsage: hash(Color('red'))\n87590224\nsage: \n```\n\nSomething else to note: Sage is not SAGE, it is Sage! Please help to eradicate SAGE from the codebase rather than introducing new instances of it! :P",
    "created_at": "2011-06-15T17:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156233",
    "user": "https://github.com/kini"
}
```

<a id='comment:8'></a>
Color hashing is already broken in terms of any possible sane equality comparison:

```python
sage: c = Color('red')
sage: hash(c)
87590352
sage: hash(Color('red'))
87590672
sage: hash(Color('red'))
87590224
sage: 
```

Something else to note: Sage is not SAGE, it is Sage! Please help to eradicate SAGE from the codebase rather than introducing new instances of it! :P



---

archive/issue_comments_156234.json:
```json
{
    "body": "<a id='comment:9'></a>\n>Color hashing is already broken in terms of any possible sane equality comparison: \n\n\nOh! Interesting!",
    "created_at": "2011-06-15T17:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156234",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'></a>
>Color hashing is already broken in terms of any possible sane equality comparison: 


Oh! Interesting!



---

archive/issue_comments_156235.json:
```json
{
    "body": "<a id='comment:10'></a>\nPing - anyone doing anything with this?",
    "created_at": "2011-10-08T04:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156235",
    "user": "https://github.com/kini"
}
```

<a id='comment:10'></a>
Ping - anyone doing anything with this?



---

archive/issue_comments_156236.json:
```json
{
    "body": "<a id='comment:11'></a>\nWhy not change the hash method? It could be something like\n\n```python\n    def __hash__(self):\n        return hash(self.__rgb)\n```\n(This would need doctests, obviously.)\n\nAlternatively, what about a patch like this:\n\n```diff\ndiff --git a/sage/plot/colors.py b/sage/plot/colors.py\n--- a/sage/plot/colors.py\n+++ b/sage/plot/colors.py\n@@ -364,8 +364,15 @@ def rgbcolor(c, space='rgb'):\n # For backward compatibility.\n to_mpl_color = rgbcolor\n \n+from sage.structure.unique_representation import UniqueRepresentation\n \n-class Color(object):\n+class Color(UniqueRepresentation):\n+    @staticmethod\n+    def __classcall__(self, r='#0000ff', g=None, b=None, space='rgb'):\n+        if isinstance(r, list):\n+            r = tuple(r)\n+        return super(Color, self).__classcall__(self, r, g, b, space)\n+\n     def __init__(self, r='#0000ff', g=None, b=None, space='rgb'):\n         \"\"\"\n         An Red-Green-Blue (RGB) color model color object.  For most\n```\n(The `__classcall__` method might need a bit more cleaning up, and it needs documentation and doctests.)",
    "created_at": "2011-10-08T05:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156236",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
Why not change the hash method? It could be something like

```python
    def __hash__(self):
        return hash(self.__rgb)
```
(This would need doctests, obviously.)

Alternatively, what about a patch like this:

```diff
diff --git a/sage/plot/colors.py b/sage/plot/colors.py
--- a/sage/plot/colors.py
+++ b/sage/plot/colors.py
@@ -364,8 +364,15 @@ def rgbcolor(c, space='rgb'):
 # For backward compatibility.
 to_mpl_color = rgbcolor
 
+from sage.structure.unique_representation import UniqueRepresentation
 
-class Color(object):
+class Color(UniqueRepresentation):
+    @staticmethod
+    def __classcall__(self, r='#0000ff', g=None, b=None, space='rgb'):
+        if isinstance(r, list):
+            r = tuple(r)
+        return super(Color, self).__classcall__(self, r, g, b, space)
+
     def __init__(self, r='#0000ff', g=None, b=None, space='rgb'):
         """
         An Red-Green-Blue (RGB) color model color object.  For most
```
(The `__classcall__` method might need a bit more cleaning up, and it needs documentation and doctests.)



---

archive/issue_comments_156237.json:
```json
{
    "body": "<a id='comment:12'></a>\nI think that redefining __hash__ would work.  Is there an example where the already published patch fails.  I don't understand how comparing the hashes is better than directly comparing `xx._Color__rgb==tt._Color__rgb`\n\n```\nsage: a,b\n(0.8216543768062763, 0.3482611655758555)\nsage: print a,b\n0.821654376806 0.348261165576\nsage: b = a-.000000000000000000001\nsage: b\n0.821654376806276\nsage: a\n0.8216543768062763\nsage: a==b\nTrue\nsage: xx = Color((a,b,0))\nsage: tt = Color((b,a,0))\nsage: xx==tt\nTrue\nsage: hash(xx)==hash(tt)\nFalse\nsage: hash(xx._Color__rgb)==hash(tt._Color__rgb)\nTrue\n```",
    "created_at": "2012-01-10T22:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156237",
    "user": "https://trac.sagemath.org/admin/accounts/users/ryan"
}
```

<a id='comment:12'></a>
I think that redefining __hash__ would work.  Is there an example where the already published patch fails.  I don't understand how comparing the hashes is better than directly comparing `xx._Color__rgb==tt._Color__rgb`

```
sage: a,b
(0.8216543768062763, 0.3482611655758555)
sage: print a,b
0.821654376806 0.348261165576
sage: b = a-.000000000000000000001
sage: b
0.821654376806276
sage: a
0.8216543768062763
sage: a==b
True
sage: xx = Color((a,b,0))
sage: tt = Color((b,a,0))
sage: xx==tt
True
sage: hash(xx)==hash(tt)
False
sage: hash(xx._Color__rgb)==hash(tt._Color__rgb)
True
```



---

archive/issue_comments_156238.json:
```json
{
    "body": "<a id='comment:13'></a>\nAs suggested, I added a new `__hash__` method (including doctests) that uses `__rgb` just like `__eq__` and did some minor code improvements in the original patch. Note that this is a rather \"picky\" approach, e.g. \n\n```\nsage: Color((0.99999,0.0,0.0)) == Color((1,0,0))\nFalse\n```\n\nAll tests pass (in Sage 5.0.beta11 under Mac OS X 10.5.8/Intel), so I think this works fine. \n\nBy the way (`@`kini), the issue with green is that\n\n```\nsage: Color('green').rgb()\n(0.0, 0.5019607843137255, 0.0)\n```\n\nso this is bound not be equal to `Color((0,1,0))`. `Color('lime')` is RGB green.",
    "created_at": "2012-04-04T05:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156238",
    "user": "https://trac.sagemath.org/admin/accounts/users/poeschko"
}
```

<a id='comment:13'></a>
As suggested, I added a new `__hash__` method (including doctests) that uses `__rgb` just like `__eq__` and did some minor code improvements in the original patch. Note that this is a rather "picky" approach, e.g. 

```
sage: Color((0.99999,0.0,0.0)) == Color((1,0,0))
False
```

All tests pass (in Sage 5.0.beta11 under Mac OS X 10.5.8/Intel), so I think this works fine. 

By the way (`@`kini), the issue with green is that

```
sage: Color('green').rgb()
(0.0, 0.5019607843137255, 0.0)
```

so this is bound not be equal to `Color((0,1,0))`. `Color('lime')` is RGB green.



---

archive/issue_comments_156239.json:
```json
{
    "body": "Attachment [trac_11383_color_cmp_hash.patch](tarball://root/attachments/some-uuid/ticket11383/trac_11383_color_cmp_hash.patch) by poeschko created at 2012-04-04 05:10:49\n\ncolor comparison and hashing",
    "created_at": "2012-04-04T05:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156239",
    "user": "https://trac.sagemath.org/admin/accounts/users/poeschko"
}
```

Attachment [trac_11383_color_cmp_hash.patch](tarball://root/attachments/some-uuid/ticket11383/trac_11383_color_cmp_hash.patch) by poeschko created at 2012-04-04 05:10:49

color comparison and hashing



---

archive/issue_comments_156240.json:
```json
{
    "body": "<a id='comment:14'></a>\nI noticed that these patches don't define a `__ne__` operator, and so the `!=` operator doesn't work.\n\n```\nsage: Color('blue') != Color('blue')\nTrue\n```\nI'm working on a patch to fix this.",
    "created_at": "2012-04-18T23:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156240",
    "user": "https://github.com/itaibn"
}
```

<a id='comment:14'></a>
I noticed that these patches don't define a `__ne__` operator, and so the `!=` operator doesn't work.

```
sage: Color('blue') != Color('blue')
True
```
I'm working on a patch to fix this.



---

archive/issue_comments_156241.json:
```json
{
    "body": "<a id='comment:15'></a>\nNow I notice that the `__eq__` function returns an error when comparing a `Color` with something that isn't a `Color`. I don't think that is the intended behaviour.",
    "created_at": "2012-04-19T03:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156241",
    "user": "https://github.com/itaibn"
}
```

<a id='comment:15'></a>
Now I notice that the `__eq__` function returns an error when comparing a `Color` with something that isn't a `Color`. I don't think that is the intended behaviour.



---

archive/issue_comments_156242.json:
```json
{
    "body": "trac 11383 eq ne hash",
    "created_at": "2012-04-21T01:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156242",
    "user": "https://github.com/itaibn"
}
```

trac 11383 eq ne hash



---

archive/issue_comments_156243.json:
```json
{
    "body": "Attachment [improved-colors-patch.patch](tarball://root/attachments/some-uuid/ticket11383/improved-colors-patch.patch) by @a-andre created at 2012-05-04 17:58:10",
    "created_at": "2012-05-04T17:58:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156243",
    "user": "https://github.com/a-andre"
}
```

Attachment [improved-colors-patch.patch](tarball://root/attachments/some-uuid/ticket11383/improved-colors-patch.patch) by @a-andre created at 2012-05-04 17:58:10



---

archive/issue_comments_156244.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-04T18:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156244",
    "user": "https://github.com/a-andre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_156245.json:
```json
{
    "body": "<a id='comment:16'></a>\nAttachment [trac_11383.patch](tarball://root/attachments/some-uuid/ticket11383/trac_11383.patch) by @a-andre created at 2012-05-04 18:02:23\n\nPatch is needed for #12904.",
    "created_at": "2012-05-04T18:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156245",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:16'></a>
Attachment [trac_11383.patch](tarball://root/attachments/some-uuid/ticket11383/trac_11383.patch) by @a-andre created at 2012-05-04 18:02:23

Patch is needed for #12904.



---

archive/issue_comments_156246.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,5 @@\n sage: Color((1,0,0)) == Color((1,0,0))\n False                                 \n ```\n+\n+Apply [attachment:trac_11383.patch]\n``````\n",
    "created_at": "2012-05-04T18:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156246",
    "user": "https://github.com/a-andre"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,5 @@
 sage: Color((1,0,0)) == Color((1,0,0))
 False                                 
 ```
+
+Apply [attachment:trac_11383.patch]
``````




---

archive/issue_comments_156247.json:
```json
{
    "body": "<a id='comment:17'></a>\nI'm a little confused about a few things.\n* How many authors do we have, how many reviewers?  I'm not going to try to diff out each of the patches here; can each contributor put their name where it belongs (maybe both spots sometimes)?  For instance, it seems like aapitzsch acted more in a reviewer role on itaibn's patch.\n* `sage: Color(0.2,0.3,0.2) == False ` seems like an odd doctest, but maybe it's just to check 'garbage' input?  `sage: Color(0.2,0.3,0.2) == 0.2` or `sage: Color(0.2,0.3,0.2) == x^2+1` test the same thing, but make it more obvious that the test isn't a typo and is covering a branch of the code, like the `23` comparison in `ne`.\n* This is just my preference, but in view of[comment:7](#comment%3A7) it would be nice to have \n\n```\nsage: Color((1,0,0)) == Color((1.0,0,0))\nTrue\n```\n   although of course the hash issue is taken care of and tested.\n\nAnyway, none of this is really important enough to hold it up unless one of the many contributors to the ticket has an idea about them!\n\nAny other things that could be come up here?  This is needed for the eminently more practical #12904 so it would be nice to get positive review.",
    "created_at": "2012-05-06T01:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156247",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'></a>
I'm a little confused about a few things.
* How many authors do we have, how many reviewers?  I'm not going to try to diff out each of the patches here; can each contributor put their name where it belongs (maybe both spots sometimes)?  For instance, it seems like aapitzsch acted more in a reviewer role on itaibn's patch.
* `sage: Color(0.2,0.3,0.2) == False ` seems like an odd doctest, but maybe it's just to check 'garbage' input?  `sage: Color(0.2,0.3,0.2) == 0.2` or `sage: Color(0.2,0.3,0.2) == x^2+1` test the same thing, but make it more obvious that the test isn't a typo and is covering a branch of the code, like the `23` comparison in `ne`.
* This is just my preference, but in view of[comment:7](#comment%3A7) it would be nice to have 

```
sage: Color((1,0,0)) == Color((1.0,0,0))
True
```
   although of course the hash issue is taken care of and tested.

Anyway, none of this is really important enough to hold it up unless one of the many contributors to the ticket has an idea about them!

Any other things that could be come up here?  This is needed for the eminently more practical #12904 so it would be nice to get positive review.



---

archive/issue_comments_156248.json:
```json
{
    "body": "<a id='comment:18'></a>\nThe only other thing I can think of is what behavior we want for \n\n```\nsage: Color('red') > Color('yellow')\n```\nI figure they should all be False? or an error?  But actually we now get\n\n```\nsage: Color('red') > Color('red')\nTrue\nsage: Color('red') > Color('yellow')\nTrue\n```\nHmm... I feel like this is needs work, though this is the previous behavior.  But if we're going to fix this, it should really be fixed.  What do you all think?\n\nIronically, whoever first added the very nice docstring formatting may be disappointed - although this is in the reference manual, double underscore methods don't show up!  But **I** appreciate it.",
    "created_at": "2012-05-06T01:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156248",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'></a>
The only other thing I can think of is what behavior we want for 

```
sage: Color('red') > Color('yellow')
```
I figure they should all be False? or an error?  But actually we now get

```
sage: Color('red') > Color('red')
True
sage: Color('red') > Color('yellow')
True
```
Hmm... I feel like this is needs work, though this is the previous behavior.  But if we're going to fix this, it should really be fixed.  What do you all think?

Ironically, whoever first added the very nice docstring formatting may be disappointed - although this is in the reference manual, double underscore methods don't show up!  But **I** appreciate it.



---

archive/issue_comments_156249.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [kcrisman](#comment%3A17):\n>  * How many authors do we have, how many reviewers?  I'm not going to try to diff out each of the patches here; can each contributor put their name where it belongs (maybe both spots sometimes)?  For instance, it seems like aapitzsch acted more in a reviewer role on itaibn's patch.\n\n\nMy role was to add the `__ne__` function, improve the `__eq__` function so that it doesn't return an error when comparing a `Color` and a non-`Color`, and doctest such comparisons (including the `Color(0.2,0.3,0.2) == False` test). By looking at the different patches it appears as though ryan wrote the `__eq__` function (though the 'v3' in the description suggests there's more to it), poeschko wrote the `__hash__` function, and aapitzsch improved the line wrapping in my patch and improved some unrelated parts of the file.",
    "created_at": "2012-05-06T02:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156249",
    "user": "https://github.com/itaibn"
}
```

<a id='comment:19'></a>
Replying to [kcrisman](#comment%3A17):
>  * How many authors do we have, how many reviewers?  I'm not going to try to diff out each of the patches here; can each contributor put their name where it belongs (maybe both spots sometimes)?  For instance, it seems like aapitzsch acted more in a reviewer role on itaibn's patch.


My role was to add the `__ne__` function, improve the `__eq__` function so that it doesn't return an error when comparing a `Color` and a non-`Color`, and doctest such comparisons (including the `Color(0.2,0.3,0.2) == False` test). By looking at the different patches it appears as though ryan wrote the `__eq__` function (though the 'v3' in the description suggests there's more to it), poeschko wrote the `__hash__` function, and aapitzsch improved the line wrapping in my patch and improved some unrelated parts of the file.



---

archive/issue_comments_156250.json:
```json
{
    "body": "<a id='comment:20'></a>\nOkay.  Any opinions on the `Color('red') > Color('red')` issue?  I feel like this is pretty much the same issue as the original ticket, though perhaps not as likely to be useful in \"production\" code.",
    "created_at": "2012-05-07T12:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156250",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>
Okay.  Any opinions on the `Color('red') > Color('red')` issue?  I feel like this is pretty much the same issue as the original ticket, though perhaps not as likely to be useful in "production" code.



---

archive/issue_comments_156251.json:
```json
{
    "body": "Reviewer: Itai Bar-Natan, Karl-Dieter Crisman, Andr\u00e9 Apitzch, Jan P\u00f6schko",
    "created_at": "2012-05-07T12:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156251",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: Itai Bar-Natan, Karl-Dieter Crisman, André Apitzch, Jan Pöschko



---

archive/issue_comments_156252.json:
```json
{
    "body": "Changing author from \"Ryan Grout\" to \"Ryan Grout, Itai Bar-Natan, Jan P\u00f6schko\"",
    "created_at": "2012-05-07T12:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156252",
    "user": "https://github.com/kcrisman"
}
```

Changing author from "Ryan Grout" to "Ryan Grout, Itai Bar-Natan, Jan Pöschko"



---

archive/issue_comments_156253.json:
```json
{
    "body": "<a id='comment:21'></a>\n> Okay.  Any opinions on the `Color('red') > Color('red')` issue?  I feel like this is pretty much the same issue as the original ticket, though perhaps not as likely to be useful in \"production\" code.\n  \nI've made a followup to this at #12999.  Assuming everything still applies, I think it's better to have this in than quibble.`",
    "created_at": "2012-05-24T23:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156253",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>
> Okay.  Any opinions on the `Color('red') > Color('red')` issue?  I feel like this is pretty much the same issue as the original ticket, though perhaps not as likely to be useful in "production" code.
  
I've made a followup to this at #12999.  Assuming everything still applies, I think it's better to have this in than quibble.`



---

archive/issue_comments_156254.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-24T23:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156254",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_156255.json:
```json
{
    "body": "<a id='comment:22'></a>\nTests on this pass.  If kini really wants to run full doctests he is welcome to.",
    "created_at": "2012-05-24T23:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156255",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:22'></a>
Tests on this pass.  If kini really wants to run full doctests he is welcome to.



---

archive/issue_comments_156256.json:
```json
{
    "body": "<a id='comment:23'></a>\npatchbot: apply trac_11383.patch\n\n(The above should cause a couple patchbots to test this correctly, and fully, on 5.0 and 5.1.beta0.)",
    "created_at": "2012-05-24T23:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156256",
    "user": "https://github.com/kini"
}
```

<a id='comment:23'></a>
patchbot: apply trac_11383.patch

(The above should cause a couple patchbots to test this correctly, and fully, on 5.0 and 5.1.beta0.)



---

archive/issue_comments_156257.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-06-02T12:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156257",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_035104.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T12:10:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11383#event-35104"
}
```



---

archive/issue_comments_156258.json:
```json
{
    "body": "Merged: sage-5.1.beta2",
    "created_at": "2012-06-02T12:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156258",
    "user": "https://github.com/jdemeyer"
}
```

Merged: sage-5.1.beta2



---

archive/issue_comments_156259.json:
```json
{
    "body": "Changing reviewer from \"Itai Bar-Natan, Karl-Dieter Crisman, Andr\u00e9 Apitzch, Jan P\u00f6schko\" to \"Itai Bar-Natan, Karl-Dieter Crisman, Andr\u00e9 Apitzsch, Jan P\u00f6schko\"",
    "created_at": "2012-06-29T08:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11383#issuecomment-156259",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "Itai Bar-Natan, Karl-Dieter Crisman, André Apitzch, Jan Pöschko" to "Itai Bar-Natan, Karl-Dieter Crisman, André Apitzsch, Jan Pöschko"
