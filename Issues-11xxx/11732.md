# Issue 11732: faster import of sage.interacts.all

archive/issues_011560.json:
```json
{
    "body": "*sage.interact.all* imports functions which have controls from *sagenb.notebook.interact* as default parameters. These take some time to initialize. The attached patch improves this situation:\n\n```\n$ dumbbench -- ./sage --startuptime\nRan 23 iterations (3 outliers).\nRounded run time per iteration: 1.001e+00 +/- 2.2e-02 (2.2%)\n```\n\nvs.\n\n```\n$ dumbbench -- ./sage --startuptime\nRan 24 iterations (4 outliers).\nRounded run time per iteration: 9.56e-01 +/- 1.7e-02 (1.8%)\n```\n\n---\n\nApply only [attachment:trac_11732_sagenb_interact.proper.patch] to the **SageNB** repository.\n\n\nAssignee: itolkov, jason\n\nKeywords: sd32\n\nResolution: fixed\n\nAuthor: Julian Rueth\n\nReviewer: William Stein\n\nMerged: sage-4.7.2.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/11732\n\n",
    "closed_at": "2011-09-12T19:30:36Z",
    "created_at": "2011-08-24T06:01:24Z",
    "labels": [
        "component: interact",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "faster import of sage.interacts.all",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11732",
    "user": "https://github.com/saraedum"
}
```
*sage.interact.all* imports functions which have controls from *sagenb.notebook.interact* as default parameters. These take some time to initialize. The attached patch improves this situation:

```
$ dumbbench -- ./sage --startuptime
Ran 23 iterations (3 outliers).
Rounded run time per iteration: 1.001e+00 +/- 2.2e-02 (2.2%)
```

vs.

```
$ dumbbench -- ./sage --startuptime
Ran 24 iterations (4 outliers).
Rounded run time per iteration: 9.56e-01 +/- 1.7e-02 (1.8%)
```

---

Apply only [attachment:trac_11732_sagenb_interact.proper.patch] to the **SageNB** repository.


Assignee: itolkov, jason

Keywords: sd32

Resolution: fixed

Author: Julian Rueth

Reviewer: William Stein

Merged: sage-4.7.2.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/11732





---

archive/issue_comments_158957.json:
```json
{
    "body": "Attachment [trac_11732_sagenb_interact.patch](tarball://root/attachments/some-uuid/ticket11732/trac_11732_sagenb_interact.patch) by @saraedum created at 2011-08-24 06:03:41",
    "created_at": "2011-08-24T06:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158957",
    "user": "https://github.com/saraedum"
}
```

Attachment [trac_11732_sagenb_interact.patch](tarball://root/attachments/some-uuid/ticket11732/trac_11732_sagenb_interact.patch) by @saraedum created at 2011-08-24 06:03:41



---

archive/issue_comments_158958.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-08-24T06:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158958",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_158959.json:
```json
{
    "body": "Changing author from \"Julian R\u00fcth\" to \"Julian Rueth\"",
    "created_at": "2011-08-24T18:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158959",
    "user": "https://github.com/saraedum"
}
```

Changing author from "Julian Rüth" to "Julian Rueth"



---

archive/issue_comments_158960.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-24T23:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158960",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_158961.json:
```json
{
    "body": "<a id='comment:3'></a>I'm not sure this matters much for startuptime (it's hard to tell).  But the code itself seems good and clean, and works.  So positive review.",
    "created_at": "2011-08-24T23:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158961",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:3'></a>I'm not sure this matters much for startuptime (it's hard to tell).  But the code itself seems good and clean, and works.  So positive review.



---

archive/issue_comments_158962.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd32\".",
    "created_at": "2011-08-24T23:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158962",
    "user": "https://github.com/williamstein"
}
```

Changing keywords from "" to "sd32".



---

archive/issue_comments_158963.json:
```json
{
    "body": "Changing reviewer from \"\" to \"William Stein\"",
    "created_at": "2011-09-08T11:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158963",
    "user": "https://github.com/nexttime"
}
```

Changing reviewer from "" to "William Stein"



---

archive/issue_comments_158964.json:
```json
{
    "body": "<a id='comment:5'></a>Again, attachment comments make life easier, and putting the patches to apply into the description simplifies things.",
    "created_at": "2011-09-08T11:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158964",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>Again, attachment comments make life easier, and putting the patches to apply into the description simplifies things.



---

archive/issue_comments_158965.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,11 @@\n Rounded run time per iteration: 9.56e-01 +/- 1.7e-02 (1.8%)\n ```\n \n+---\n+\n+Apply [attachment:http://trac.sagemath.org/sage_trac/attachment/ticket/11732/trac_11732_sagenb_interact.patch] to the **SageNB** repository.\n+\n+\n Author: Julian R\u00fcth\n \n Issue created by migration from https://trac.sagemath.org/ticket/11732\n``````\n",
    "created_at": "2011-09-08T11:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158965",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,11 @@
 Rounded run time per iteration: 9.56e-01 +/- 1.7e-02 (1.8%)
 ```
 
+---
+
+Apply [attachment:http://trac.sagemath.org/sage_trac/attachment/ticket/11732/trac_11732_sagenb_interact.patch] to the **SageNB** repository.
+
+
 Author: Julian Rüth
 
 Issue created by migration from https://trac.sagemath.org/ticket/11732
``````




---

archive/issue_comments_158966.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,22 @@\n+*sage.interact.all* imports functions which have controls from *sagenb.notebook.interact* as default parameters. These take some time to initialize. The attached patch improves this situation:\n+\n+```\n+$ dumbbench -- ./sage --startuptime\n+Ran 23 iterations (3 outliers).\n+Rounded run time per iteration: 1.001e+00 +/- 2.2e-02 (2.2%)\n+```\n+\n+vs.\n+\n+```\n+$ dumbbench -- ./sage --startuptime\n+Ran 24 iterations (4 outliers).\n+Rounded run time per iteration: 9.56e-01 +/- 1.7e-02 (1.8%)\n+```\n+\n+---\n+\n+Apply [attachment:trac_11732_sagenb_interact.patch] to the **SageNB** repository.\n \n \n Author: Julian R\u00fcth\n``````\n",
    "created_at": "2011-09-08T11:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158966",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,22 @@
+*sage.interact.all* imports functions which have controls from *sagenb.notebook.interact* as default parameters. These take some time to initialize. The attached patch improves this situation:
+
+```
+$ dumbbench -- ./sage --startuptime
+Ran 23 iterations (3 outliers).
+Rounded run time per iteration: 1.001e+00 +/- 2.2e-02 (2.2%)
+```
+
+vs.
+
+```
+$ dumbbench -- ./sage --startuptime
+Ran 24 iterations (4 outliers).
+Rounded run time per iteration: 9.56e-01 +/- 1.7e-02 (1.8%)
+```
+
+---
+
+Apply [attachment:trac_11732_sagenb_interact.patch] to the **SageNB** repository.
 
 
 Author: Julian Rüth
``````




---

archive/issue_comments_158967.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.7.2.alpha3\"",
    "created_at": "2011-09-12T19:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158967",
    "user": "https://github.com/nexttime"
}
```

Changing merged from "" to "sage-4.7.2.alpha3"



---

archive/issue_comments_158968.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-09-12T19:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158968",
    "user": "https://github.com/nexttime"
}
```

Resolution: fixed



---

archive/issue_events_030863.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-12T19:30:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11732#event-30863"
}
```



---

archive/issue_comments_158969.json:
```json
{
    "body": "\"Proper\" Mercurial changeset replacement patch.",
    "created_at": "2011-09-28T16:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158969",
    "user": "https://github.com/nexttime"
}
```

"Proper" Mercurial changeset replacement patch.



---

archive/issue_comments_158970.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,22 @@\n+*sage.interact.all* imports functions which have controls from *sagenb.notebook.interact* as default parameters. These take some time to initialize. The attached patch improves this situation:\n+\n+```\n+$ dumbbench -- ./sage --startuptime\n+Ran 23 iterations (3 outliers).\n+Rounded run time per iteration: 1.001e+00 +/- 2.2e-02 (2.2%)\n+```\n+\n+vs.\n+\n+```\n+$ dumbbench -- ./sage --startuptime\n+Ran 24 iterations (4 outliers).\n+Rounded run time per iteration: 9.56e-01 +/- 1.7e-02 (1.8%)\n+```\n+\n+---\n+\n+Apply only [attachment:trac_11732_sagenb_interact.proper.patch] to the **SageNB** repository.\n \n \n Author: Julian R\u00fcth\n``````\n",
    "created_at": "2011-09-28T16:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158970",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,22 @@
+*sage.interact.all* imports functions which have controls from *sagenb.notebook.interact* as default parameters. These take some time to initialize. The attached patch improves this situation:
+
+```
+$ dumbbench -- ./sage --startuptime
+Ran 23 iterations (3 outliers).
+Rounded run time per iteration: 1.001e+00 +/- 2.2e-02 (2.2%)
+```
+
+vs.
+
+```
+$ dumbbench -- ./sage --startuptime
+Ran 24 iterations (4 outliers).
+Rounded run time per iteration: 9.56e-01 +/- 1.7e-02 (1.8%)
+```
+
+---
+
+Apply only [attachment:trac_11732_sagenb_interact.proper.patch] to the **SageNB** repository.
 
 
 Author: Julian Rüth
``````




---

archive/issue_comments_158971.json:
```json
{
    "body": "<a id='comment:8'></a>Attachment [trac_11732_sagenb_interact.proper.patch](tarball://root/attachments/some-uuid/ticket11732/trac_11732_sagenb_interact.proper.patch) by @nexttime created at 2011-09-28 16:58:58\n\nI've attached a `*.proper.patch`, which is identical except that I removed the \"garbage\" before \"`# HG changeset patch`\", i.e., I deleted the first line \"`exporting patch:`\", since Jeroen's current merger rejects such patches.\n\nFor now, please make sure all your patches start with \"`# HG changeset patch`\", i.e., have it on the first line without any preceding messages or whatever.\n\nI've relaxed that in *my version* of the merger, but Jeroen and maybe others are likely to use his more restrictive one.",
    "created_at": "2011-09-28T16:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158971",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>Attachment [trac_11732_sagenb_interact.proper.patch](tarball://root/attachments/some-uuid/ticket11732/trac_11732_sagenb_interact.proper.patch) by @nexttime created at 2011-09-28 16:58:58

I've attached a `*.proper.patch`, which is identical except that I removed the "garbage" before "`# HG changeset patch`", i.e., I deleted the first line "`exporting patch:`", since Jeroen's current merger rejects such patches.

For now, please make sure all your patches start with "`# HG changeset patch`", i.e., have it on the first line without any preceding messages or whatever.

I've relaxed that in *my version* of the merger, but Jeroen and maybe others are likely to use his more restrictive one.



---

archive/issue_comments_158972.json:
```json
{
    "body": "<a id='comment:9'></a>This patch does not apply to the flask notebook trivially, and I'm probably not very qualified to do a rebasing myself. Anyone feel like looking into it? Latest version is at [https://github.com/sagemath/sagenb/](https://github.com/sagemath/sagenb/), a version a few days old is at [http://code.google.com/r/jasongrout-flask-sagenb/](http://code.google.com/r/jasongrout-flask-sagenb/).",
    "created_at": "2011-12-25T23:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158972",
    "user": "https://github.com/kini"
}
```

<a id='comment:9'></a>This patch does not apply to the flask notebook trivially, and I'm probably not very qualified to do a rebasing myself. Anyone feel like looking into it? Latest version is at [https://github.com/sagemath/sagenb/](https://github.com/sagemath/sagenb/), a version a few days old is at [http://code.google.com/r/jasongrout-flask-sagenb/](http://code.google.com/r/jasongrout-flask-sagenb/).



---

archive/issue_comments_158973.json:
```json
{
    "body": "<a id='comment:10'></a>This was merged in the flask notebook at https://github.com/sagemath/sagenb/commit/235358d5a643948525ce80e1f0fd8406e31ced72",
    "created_at": "2012-01-16T20:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11732#issuecomment-158973",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'></a>This was merged in the flask notebook at https://github.com/sagemath/sagenb/commit/235358d5a643948525ce80e1f0fd8406e31ced72
