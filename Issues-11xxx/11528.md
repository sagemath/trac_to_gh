# Issue 11528: Allow deleting row or column from matrix

archive/issues_011356.json:
```json
{
    "body": "This was requested in the 2011 Sage MAA PREP workshop.  Names deleted.\n\n```\n: Is there any way to delete specified rows or columns from an existing matrix?\n: Hmm, I think that is possible, using a method.\n: I'll look.\n:  - we can swap rows, scale rows, add mults of rows, create a matrix from specified rows... but not that.\n: Would you find this useful?  Is it in Matlab?\n: For list there is  a method called pop\n: Right, but not for matrices.\n: if matrix is a list of list...\n: But it's not quite that.\n: I'l make a ticket.\n: this would be useful\n: there is an m.insert_row\n: Hah!  But we can't do it backwards   \n```\nSo let's make this happen.\n\n**Apply**:\n1.  [attachment:trac_11528_delete_rows_and_columns.path.patch]\n2.  [attachment:trac_11528_matrix_delete_rows_and_columns.patch]\n3.  [attachment:trac_11528_matrix_delete_rows_columns.patch]\n4.  [attachment:trac_11528-reviewer.patch]\n\nAssignee: jason, was\n\nCC:  @jasongrout @rbeezer\n\nKeywords: delete remove\n\nReviewer: Rob Beezer\n\nAuthor: Wai Yan Pong\n\nMerged: sage-5.2.beta0\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/11528\n\n",
    "closed_at": "2012-07-02T15:22:19Z",
    "created_at": "2011-06-21T19:24:57Z",
    "labels": [
        "component: linear algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.2",
    "title": "Allow deleting row or column from matrix",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11528",
    "user": "https://github.com/kcrisman"
}
```
This was requested in the 2011 Sage MAA PREP workshop.  Names deleted.

```
: Is there any way to delete specified rows or columns from an existing matrix?
: Hmm, I think that is possible, using a method.
: I'll look.
:  - we can swap rows, scale rows, add mults of rows, create a matrix from specified rows... but not that.
: Would you find this useful?  Is it in Matlab?
: For list there is  a method called pop
: Right, but not for matrices.
: if matrix is a list of list...
: But it's not quite that.
: I'l make a ticket.
: this would be useful
: there is an m.insert_row
: Hah!  But we can't do it backwards   
```
So let's make this happen.

**Apply**:
1.  [attachment:trac_11528_delete_rows_and_columns.path.patch]
2.  [attachment:trac_11528_matrix_delete_rows_and_columns.patch]
3.  [attachment:trac_11528_matrix_delete_rows_columns.patch]
4.  [attachment:trac_11528-reviewer.patch]

Assignee: jason, was

CC:  @jasongrout @rbeezer

Keywords: delete remove

Reviewer: Rob Beezer

Author: Wai Yan Pong

Merged: sage-5.2.beta0

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/11528





---

archive/issue_comments_153424.json:
```json
{
    "body": "<a id='comment:1'></a>You could implement this with a simple call to `matrix_from_columns` and friends.",
    "created_at": "2011-06-21T19:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153424",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:1'></a>You could implement this with a simple call to `matrix_from_columns` and friends.



---

archive/issue_comments_153425.json:
```json
{
    "body": "<a id='comment:2'></a>I was looking at the same issue last night. And Rob's suggestion does the job. Should we go ahead and closed the ticket?",
    "created_at": "2012-03-01T18:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153425",
    "user": "https://github.com/wypong"
}
```

<a id='comment:2'></a>I was looking at the same issue last night. And Rob's suggestion does the job. Should we go ahead and closed the ticket?



---

archive/issue_comments_153426.json:
```json
{
    "body": "Changing reviewer from \"\" to \"pong\"",
    "created_at": "2012-03-01T18:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153426",
    "user": "https://github.com/wypong"
}
```

Changing reviewer from "" to "pong"



---

archive/issue_comments_153427.json:
```json
{
    "body": "<a id='comment:3'></a>I think Rob is saying that this could be *implemented*, not that we shouldn't add a new command.  So there is something to do.  You want to create it?",
    "created_at": "2012-03-01T18:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153427",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>I think Rob is saying that this could be *implemented*, not that we shouldn't add a new command.  So there is something to do.  You want to create it?



---

archive/issue_comments_153428.json:
```json
{
    "body": "<a id='comment:4'></a>Hum... sure. For example, something like\n\ndef delete_col(A,col_to_del):\n      cols = list(set(range(A.ncols()))-set(col_to_del));\n      return A.matrix_from_columns(cols)\n\nwill work. I just need to need to recall how to turn that into a method for matrix. Any pointer for that?\nAlso, do we want indexing the columns starting from 1 or 0? (the implementation above assume the index starts from 0).",
    "created_at": "2012-03-01T19:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153428",
    "user": "https://github.com/wypong"
}
```

<a id='comment:4'></a>Hum... sure. For example, something like

def delete_col(A,col_to_del):
      cols = list(set(range(A.ncols()))-set(col_to_del));
      return A.matrix_from_columns(cols)

will work. I just need to need to recall how to turn that into a method for matrix. Any pointer for that?
Also, do we want indexing the columns starting from 1 or 0? (the implementation above assume the index starts from 0).



---

archive/issue_comments_153429.json:
```json
{
    "body": "<a id='comment:5'></a>Yeah, sure.  Look in \n\n```\n$SAGE_ROOT/devel/sage/sage/matrix/matrix1.pyx\n```\nand put it near\n\n```\n\n    def matrix_from_columns(self, columns):\n```\n\nOr open matrix2.pyx and put it somewhere appropriate.  These are Cython files, but hopefully that wouldn't matter here, and perhaps Rob could help review this and make sure it doesn't do anything strange :)\n\nThe point is that this is a *method* of the generic matrix class, NOT a new function, which would be really slow and annoying.  \n\nFinally, given the documentation for it, \n\n```\n\n    def matrix_from_columns(self, columns):\n        \"\"\"\n        Return the matrix constructed from self using columns with indices\n        in the columns list.\n\n        EXAMPLES::\n\n            sage: M = MatrixSpace(Integers(8),3,3)\n            sage: A = M(range(9)); A\n            [0 1 2]\n            [3 4 5]\n            [6 7 0]\n            sage: A.matrix_from_columns([2,1])\n            [2 1]\n            [5 4]\n            [0 7]\n        \"\"\"\n```\nI would say that you should start from zero as usual in Sage.",
    "created_at": "2012-03-01T19:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153429",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>Yeah, sure.  Look in 

```
$SAGE_ROOT/devel/sage/sage/matrix/matrix1.pyx
```
and put it near

```

    def matrix_from_columns(self, columns):
```

Or open matrix2.pyx and put it somewhere appropriate.  These are Cython files, but hopefully that wouldn't matter here, and perhaps Rob could help review this and make sure it doesn't do anything strange :)

The point is that this is a *method* of the generic matrix class, NOT a new function, which would be really slow and annoying.  

Finally, given the documentation for it, 

```

    def matrix_from_columns(self, columns):
        """
        Return the matrix constructed from self using columns with indices
        in the columns list.

        EXAMPLES::

            sage: M = MatrixSpace(Integers(8),3,3)
            sage: A = M(range(9)); A
            [0 1 2]
            [3 4 5]
            [6 7 0]
            sage: A.matrix_from_columns([2,1])
            [2 1]
            [5 4]
            [0 7]
        """
```
I would say that you should start from zero as usual in Sage.



---

archive/issue_comments_153430.json:
```json
{
    "body": "<a id='comment:6'></a>Attachment [trac_11528_delete_rows_and_columns.path.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528_delete_rows_and_columns.path.patch) by @wypong created at 2012-03-05 21:06:35\n\nThe patch contains the \"delete_columns\" and \"delete_rows\" methods for matrix.\nI probably had a typo, so the patch has a weird name \"...path.patch\"\n\nI remove myself from Reviewers. Not sure should I put myself as Authors (so I leave it empty).",
    "created_at": "2012-03-05T21:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153430",
    "user": "https://github.com/wypong"
}
```

<a id='comment:6'></a>Attachment [trac_11528_delete_rows_and_columns.path.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528_delete_rows_and_columns.path.patch) by @wypong created at 2012-03-05 21:06:35

The patch contains the "delete_columns" and "delete_rows" methods for matrix.
I probably had a typo, so the patch has a weird name "...path.patch"

I remove myself from Reviewers. Not sure should I put myself as Authors (so I leave it empty).



---

archive/issue_comments_153431.json:
```json
{
    "body": "Changing reviewer from \"pong\" to \"\"",
    "created_at": "2012-03-05T21:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153431",
    "user": "https://github.com/wypong"
}
```

Changing reviewer from "pong" to ""



---

archive/issue_comments_153432.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-06T04:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153432",
    "user": "https://github.com/wypong"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_153433.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-07T04:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153433",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_153434.json:
```json
{
    "body": "<a id='comment:8'></a>Pong,\n\nThis looks like a great contribution.  Lots of small suggestions or changes to match Sage style or practice.  In no particular order.\n\nRob\n\n1.  You might just rename to main arguments `cols` and `rows` for simplicity.  The deletion part should be apparent from the function name.\n2.  I think the convention in Sage is to default to doing checks, and let a user explicitly ask to turn them off to gain speed, or when they know the routine is being fed good input.  So I would switch `index_check` to `True`.  You might look around, I think just `check` is used quite frequently.  List the default in the docstring right after the name of the variable.\n3.  Your check does not check to see if the list or tuple actual contains integers.  So\n\n```\nsage: A.delete_columns(['blue'], index_check=True)\n<snip>\nIndexError: column indices in ['blue'] are out of range.\n```\n  gives an error message that is not totally accurate.\n1.  I wonder if this would be faster if sets are not used, especially when you are trying to use Cython improvements with cdef variables.  What happens if you were to form cols with an actual loop, or maybe a list comprehension like\n\n```\ncols = [x for x in range(self.ncols()) if not x in cols_to_delete]\n```\n  You can easily see generated C code in the notebook with %cython as the first line of a cell, then click on the generated links.\n1.  You should use the new Python 3.0 syntax for errors (`raise IndexError(\"explanation\")` if I remember right), and `.format()` for formatted strings.\n2.  In documentation always use ```` on both ends of all uses of variable names (and not regular quote marks).  Indent the bit with your name in the AUTHOR block and it will end up looking better.  Put a space before your double-colon verbatim indicators.  Right now one survives in the text.  Otherwise, documentation looks good.\n3.   Add an \"Apply\" section to the summary, with a link to the patch.  See any recently merged ticket for style and markup.  Release manager will require it.",
    "created_at": "2012-03-07T04:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153434",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:8'></a>Pong,

This looks like a great contribution.  Lots of small suggestions or changes to match Sage style or practice.  In no particular order.

Rob

1.  You might just rename to main arguments `cols` and `rows` for simplicity.  The deletion part should be apparent from the function name.
2.  I think the convention in Sage is to default to doing checks, and let a user explicitly ask to turn them off to gain speed, or when they know the routine is being fed good input.  So I would switch `index_check` to `True`.  You might look around, I think just `check` is used quite frequently.  List the default in the docstring right after the name of the variable.
3.  Your check does not check to see if the list or tuple actual contains integers.  So

```
sage: A.delete_columns(['blue'], index_check=True)
<snip>
IndexError: column indices in ['blue'] are out of range.
```
  gives an error message that is not totally accurate.
1.  I wonder if this would be faster if sets are not used, especially when you are trying to use Cython improvements with cdef variables.  What happens if you were to form cols with an actual loop, or maybe a list comprehension like

```
cols = [x for x in range(self.ncols()) if not x in cols_to_delete]
```
  You can easily see generated C code in the notebook with %cython as the first line of a cell, then click on the generated links.
1.  You should use the new Python 3.0 syntax for errors (`raise IndexError("explanation")` if I remember right), and `.format()` for formatted strings.
2.  In documentation always use ```` on both ends of all uses of variable names (and not regular quote marks).  Indent the bit with your name in the AUTHOR block and it will end up looking better.  Put a space before your double-colon verbatim indicators.  Right now one survives in the text.  Otherwise, documentation looks good.
3.   Add an "Apply" section to the summary, with a link to the patch.  See any recently merged ticket for style and markup.  Release manager will require it.



---

archive/issue_comments_153435.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Rob Beezer\"",
    "created_at": "2012-03-07T04:54:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153435",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "" to "Rob Beezer"



---

archive/issue_comments_153436.json:
```json
{
    "body": "<a id='comment:9'></a>A few other things:\n* There is now an intended `see also` formatting -see [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12078/trac_12078-see_also-fh.patch), for instance.\n* The things to be seen should be hyperlinked.  So instead of \n\n```\nThe functions \"delete_columns()\", \"matrix_from_rows()\"\n```\n   one would try to do \n\n```\nThe functions :func:`delete_columns` and :func:`matrix_from_rows`\n```\n\nAnd in case Rob's review seems daunting, be encouraged that these are all both important and not a big deal for you to fix - they are good practice, and not horrible errors of doom haunting your patch for eternity.",
    "created_at": "2012-03-07T04:54:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153436",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'></a>A few other things:
* There is now an intended `see also` formatting -see [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12078/trac_12078-see_also-fh.patch), for instance.
* The things to be seen should be hyperlinked.  So instead of 

```
The functions "delete_columns()", "matrix_from_rows()"
```
   one would try to do 

```
The functions :func:`delete_columns` and :func:`matrix_from_rows`
```

And in case Rob's review seems daunting, be encouraged that these are all both important and not a big deal for you to fix - they are good practice, and not horrible errors of doom haunting your patch for eternity.



---

archive/issue_comments_153437.json:
```json
{
    "body": "Changing author from \"\" to \"Wai Yan Pong\"",
    "created_at": "2012-03-07T04:54:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153437",
    "user": "https://github.com/kcrisman"
}
```

Changing author from "" to "Wai Yan Pong"



---

archive/issue_comments_153438.json:
```json
{
    "body": "<a id='comment:10'></a>Assuming those functions are also in the same file, of course.",
    "created_at": "2012-03-07T04:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153438",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>Assuming those functions are also in the same file, of course.



---

archive/issue_comments_153439.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 kcrisman]:\n> Assuming those functions are also in the same file, of course.\n\n\nGood catch, KDC.  I think instead of `:func:` maybe they should be `:meth:`?",
    "created_at": "2012-03-07T05:57:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153439",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:11'></a>Replying to [comment:10 kcrisman]:
> Assuming those functions are also in the same file, of course.


Good catch, KDC.  I think instead of `:func:` maybe they should be `:meth:`?



---

archive/issue_comments_153440.json:
```json
{
    "body": "<a id='comment:12'></a>> > Assuming those functions are also in the same file, of course.\n\n> \n> Good catch, KDC.  I think instead of `:func:` maybe they should be `:meth:`?\n\n\nYes, you are right.",
    "created_at": "2012-03-07T14:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153440",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'></a>> > Assuming those functions are also in the same file, of course.

> 
> Good catch, KDC.  I think instead of `:func:` maybe they should be `:meth:`?


Yes, you are right.



---

archive/issue_comments_153441.json:
```json
{
    "body": "updated version",
    "created_at": "2012-03-29T03:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153441",
    "user": "https://github.com/wypong"
}
```

updated version



---

archive/issue_comments_153442.json:
```json
{
    "body": "Attachment [trac_11528_matrix_delete_rows_and_columns.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528_matrix_delete_rows_and_columns.patch) by @wypong created at 2012-03-29 03:59:46\n\nThanks Rob and KDC for all the suggestions. I finally have a break this week and can catch up on this.\n\nI take almost all the suggestions, except I keep the use of \"set\" in testing whether the indices are out of range or not. \nAfter all, it is really the underlying set that matters. Also, I used warning instead of raise an error if there are indices out of range. \nIn fact, I think it's more natural to do nothing if the method is called to delete, say, the 5th column of the a matrix with 4 columns.\nAlso I'm not sure where to put the \"Apply\" section. So I just put it below.\n\n\nApply [attachment:trac_11528_matrix_delete_rows_and_columns.patch] to `devel/sage` of sage-5.0beta10",
    "created_at": "2012-03-29T03:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153442",
    "user": "https://github.com/wypong"
}
```

Attachment [trac_11528_matrix_delete_rows_and_columns.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528_matrix_delete_rows_and_columns.patch) by @wypong created at 2012-03-29 03:59:46

Thanks Rob and KDC for all the suggestions. I finally have a break this week and can catch up on this.

I take almost all the suggestions, except I keep the use of "set" in testing whether the indices are out of range or not. 
After all, it is really the underlying set that matters. Also, I used warning instead of raise an error if there are indices out of range. 
In fact, I think it's more natural to do nothing if the method is called to delete, say, the 5th column of the a matrix with 4 columns.
Also I'm not sure where to put the "Apply" section. So I just put it below.


Apply [attachment:trac_11528_matrix_delete_rows_and_columns.patch] to `devel/sage` of sage-5.0beta10



---

archive/issue_comments_153443.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-29T04:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153443",
    "user": "https://github.com/wypong"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153444.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-05-05T03:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153444",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_153445.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2012-05-05T03:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153445",
    "user": "https://github.com/rbeezer"
}
```

Changing priority from major to minor.



---

archive/issue_comments_153446.json:
```json
{
    "body": "<a id='comment:15'></a>Dear Pong,\n\nMaking good progress.  A few small things to work on.  Third patch could be a charm.  ;-)  You are getting an education, anyway.  My time is a whole lot freer now, so it should not take me 5 weeks to swoop in and finish this one off.  Keep at it - almost there.\n\nRob\n\n\n1.  Code uses just `check=` (good) but documentation still has `index_check=`, both in the INPUT block and in an example.\n2.  An example in `delete_rows` is not formatting right, likely missing a double-color before it begins.  You should preview your documentation for gross errors before submitting it for review.\n  {{{\n  sage -docbuild reference html\n  }}}\n  will build the HTML version that you can check in a web browser.\n1.  The `:meth:` construction should not have a space before the method name.  The effect should be a working link to referenced method, which you can test in the HTML documentation.\n2.  I'd format `True` just like `dcols`, it is literal code.\n3.  Warnings are rarely used in Sage when an error is more appropriate.\n  {{{\n  if not (diff_cols == []):\n     warnings.warn(\"{d} contains invalid indices.\".format(d=diff_cols))\n  }}}\n  If the check is on, it should throw an error (for a calling routine to handle), or if check is off, then it should silently delete the extant rows/columns.  Go back to rasing an error like it was originally.\n1.  **Apply** section goes in the description, like on other tickets.  Part of its purpose is to see which patches to apply.  Right now it is not clear that the second patch is incremental and not a replacement.  This helps the release manger do a difficult job.  I'm going to straighten it out once.\n2.  We can leave sets like it is, though if anyone every Cythonizes this, it'll probably need reworking.",
    "created_at": "2012-05-05T03:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153446",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:15'></a>Dear Pong,

Making good progress.  A few small things to work on.  Third patch could be a charm.  ;-)  You are getting an education, anyway.  My time is a whole lot freer now, so it should not take me 5 weeks to swoop in and finish this one off.  Keep at it - almost there.

Rob


1.  Code uses just `check=` (good) but documentation still has `index_check=`, both in the INPUT block and in an example.
2.  An example in `delete_rows` is not formatting right, likely missing a double-color before it begins.  You should preview your documentation for gross errors before submitting it for review.
  {{{
  sage -docbuild reference html
  }}}
  will build the HTML version that you can check in a web browser.
1.  The `:meth:` construction should not have a space before the method name.  The effect should be a working link to referenced method, which you can test in the HTML documentation.
2.  I'd format `True` just like `dcols`, it is literal code.
3.  Warnings are rarely used in Sage when an error is more appropriate.
  {{{
  if not (diff_cols == []):
     warnings.warn("{d} contains invalid indices.".format(d=diff_cols))
  }}}
  If the check is on, it should throw an error (for a calling routine to handle), or if check is off, then it should silently delete the extant rows/columns.  Go back to rasing an error like it was originally.
1.  **Apply** section goes in the description, like on other tickets.  Part of its purpose is to see which patches to apply.  Right now it is not clear that the second patch is incremental and not a replacement.  This helps the release manger do a difficult job.  I'm going to straighten it out once.
2.  We can leave sets like it is, though if anyone every Cythonizes this, it'll probably need reworking.



---

archive/issue_comments_153447.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,6 +17,10 @@\n ```\n So let's make this happen.\n \n+**Apply**:\n+1.  [attachment:trac_11528_delete_rows_and_columns.path.patch]\n+2.  [attachment:trac_11528_matrix_delete_rows_and_columns.patch]\n+\n Comment: 1\n \n Priority: major\n``````\n",
    "created_at": "2012-05-05T03:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153447",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,6 +17,10 @@
 ```
 So let's make this happen.
 
+**Apply**:
+1.  [attachment:trac_11528_delete_rows_and_columns.path.patch]
+2.  [attachment:trac_11528_matrix_delete_rows_and_columns.patch]
+
 Comment: 1
 
 Priority: major
``````




---

archive/issue_comments_153448.json:
```json
{
    "body": "<a id='comment:16'></a>Hi Rob,\n\n     I'm now looking at this again. Maybe I overlooked, but I don't see why you said I used just \"check=\" in the code but used \"index_check=\" in the documentation. As far as I see (from the patch), I use \"index_check=\" consistently throughout. Are you suggesting I'd just use \"check=\" instead of \"index_check=\"? I want to get this clear up before further modification. Let's keep this ball rolling again.\n\nPong",
    "created_at": "2012-06-06T17:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153448",
    "user": "https://github.com/wypong"
}
```

<a id='comment:16'></a>Hi Rob,

     I'm now looking at this again. Maybe I overlooked, but I don't see why you said I used just "check=" in the code but used "index_check=" in the documentation. As far as I see (from the patch), I use "index_check=" consistently throughout. Are you suggesting I'd just use "check=" instead of "index_check="? I want to get this clear up before further modification. Let's keep this ball rolling again.

Pong



---

archive/issue_comments_153449.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 pong]:\n\nHi Pong,\n\nIn the interest of keeping the ball rolling, a quick answer.\n\nI think using just `check` consistently everywhere is best - that may have been what I meant to convey.  This would match existing usage and would allow experienced users to just \"guess\" at the right keyword (and likely be right).\n\nWe'll get this done before Sage Edu Days concludes!\n\nRob",
    "created_at": "2012-06-06T18:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153449",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:17'></a>Replying to [comment:16 pong]:

Hi Pong,

In the interest of keeping the ball rolling, a quick answer.

I think using just `check` consistently everywhere is best - that may have been what I meant to convey.  This would match existing usage and would allow experienced users to just "guess" at the right keyword (and likely be right).

We'll get this done before Sage Edu Days concludes!

Rob



---

archive/issue_comments_153450.json:
```json
{
    "body": "Attachment [trac_11528_matrix_delete_rows_columns.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528_matrix_delete_rows_columns.patch) by @wypong created at 2012-06-06 21:01:36\n\nReplying to [ticket:11528 kcrisman]:\n> This was requested in the 2011 Sage MAA PREP workshop.  Names deleted.\n> \n> ```\n> : Is there any way to delete specified rows or columns from an existing matrix?\n> : Hmm, I think that is possible, using a method.\n> : I'll look.\n> :  - we can swap rows, scale rows, add mults of rows, create a matrix from specified rows... but not that.\n> : Would you find this useful?  Is it in Matlab?\n> : For list there is  a method called pop\n> : Right, but not for matrices.\n> : if matrix is a list of list...\n> : But it's not quite that.\n> : I'l make a ticket.\n> : this would be useful\n> : there is an m.insert_row\n> : Hah!  But we can't do it backwards   \n> ```\n> So let's make this happen.\n> \n> **Apply**:\n> 1.  [attachment:trac_11528_delete_rows_and_columns.path.patch]\n> 2.  [attachment:trac_11528_matrix_delete_rows_and_columns.patch]\n> 3.  [attachment:trac_11528_matrix_delete_rows_columns.patch]",
    "created_at": "2012-06-06T21:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153450",
    "user": "https://github.com/wypong"
}
```

Attachment [trac_11528_matrix_delete_rows_columns.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528_matrix_delete_rows_columns.patch) by @wypong created at 2012-06-06 21:01:36

Replying to [ticket:11528 kcrisman]:
> This was requested in the 2011 Sage MAA PREP workshop.  Names deleted.
> 
> ```
> : Is there any way to delete specified rows or columns from an existing matrix?
> : Hmm, I think that is possible, using a method.
> : I'll look.
> :  - we can swap rows, scale rows, add mults of rows, create a matrix from specified rows... but not that.
> : Would you find this useful?  Is it in Matlab?
> : For list there is  a method called pop
> : Right, but not for matrices.
> : if matrix is a list of list...
> : But it's not quite that.
> : I'l make a ticket.
> : this would be useful
> : there is an m.insert_row
> : Hah!  But we can't do it backwards   
> ```
> So let's make this happen.
> 
> **Apply**:
> 1.  [attachment:trac_11528_delete_rows_and_columns.path.patch]
> 2.  [attachment:trac_11528_matrix_delete_rows_and_columns.patch]
> 3.  [attachment:trac_11528_matrix_delete_rows_columns.patch]



---

archive/issue_comments_153451.json:
```json
{
    "body": "<a id='comment:19'></a>Which patch is to be applied?  Just the last one - [attachment:trac_11528_matrix_delete_rows_columns.patch] - or all three?  Just be sure to modify the ticket description (click \"Modify Ticket\" to see a surprise, all the stuff that *used* to be obviously visible, sigh).",
    "created_at": "2012-06-06T21:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153451",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>Which patch is to be applied?  Just the last one - [attachment:trac_11528_matrix_delete_rows_columns.patch] - or all three?  Just be sure to modify the ticket description (click "Modify Ticket" to see a surprise, all the stuff that *used* to be obviously visible, sigh).



---

archive/issue_comments_153452.json:
```json
{
    "body": "<a id='comment:20'></a>`@`KDC, I was just going to apologize but trac complains that the ticket maybe invalide since it was modified (apparently by you :P) during the time I typed.\n\nAnyway, only the last patch is to apply. I realized that I should have submitted it as an update but I've already made all the changes, so in order to save me from screwing things up even more, I decided to submit a new patch. I apologize. Well, I hope I finally get everything right in the last patch. Thank both you and Rob for the help.",
    "created_at": "2012-06-06T21:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153452",
    "user": "https://github.com/wypong"
}
```

<a id='comment:20'></a>`@`KDC, I was just going to apologize but trac complains that the ticket maybe invalide since it was modified (apparently by you :P) during the time I typed.

Anyway, only the last patch is to apply. I realized that I should have submitted it as an update but I've already made all the changes, so in order to save me from screwing things up even more, I decided to submit a new patch. I apologize. Well, I hope I finally get everything right in the last patch. Thank both you and Rob for the help.



---

archive/issue_comments_153453.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-06T21:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153453",
    "user": "https://github.com/wypong"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153454.json:
```json
{
    "body": "<a id='comment:21'></a>> Anyway, only the last patch is to apply. I realized that I should have submitted it as an update but I've already made all the changes, so in order to save me from screwing things up even more, I decided to submit a new patch. I apologize. Well, I hope I finally get everything right in the last patch. Thank both you and Rob for the help. \n\nNo apology necessary, I just didn't know which one and wanted to make sure it was clear to any reviewer - someone may beat Rob to the punch!  I have a feeling this will be a nice contribution.",
    "created_at": "2012-06-07T00:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153454",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>> Anyway, only the last patch is to apply. I realized that I should have submitted it as an update but I've already made all the changes, so in order to save me from screwing things up even more, I decided to submit a new patch. I apologize. Well, I hope I finally get everything right in the last patch. Thank both you and Rob for the help. 

No apology necessary, I just didn't know which one and wanted to make sure it was clear to any reviewer - someone may beat Rob to the punch!  I have a feeling this will be a nice contribution.



---

archive/issue_comments_153455.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,27 @@\n+This was requested in the 2011 Sage MAA PREP workshop.  Names deleted.\n \n+```\n+: Is there any way to delete specified rows or columns from an existing matrix?\n+: Hmm, I think that is possible, using a method.\n+: I'll look.\n+:  - we can swap rows, scale rows, add mults of rows, create a matrix from specified rows... but not that.\n+: Would you find this useful?  Is it in Matlab?\n+: For list there is  a method called pop\n+: Right, but not for matrices.\n+: if matrix is a list of list...\n+: But it's not quite that.\n+: I'l make a ticket.\n+: this would be useful\n+: there is an m.insert_row\n+: Hah!  But we can't do it backwards   \n+```\n+So let's make this happen.\n+\n+**Apply**:\n+1.  [attachment:trac_11528_delete_rows_and_columns.path.patch]\n+2.  [attachment:trac_11528_matrix_delete_rows_and_columns.patch]\n+3.  [attachment:trac_11528_matrix_delete_rows_columns.patch]\n+4.  [attachment:trac_11528-reviewer.patch]\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-06-09T00:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153455",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,27 @@
+This was requested in the 2011 Sage MAA PREP workshop.  Names deleted.
 
+```
+: Is there any way to delete specified rows or columns from an existing matrix?
+: Hmm, I think that is possible, using a method.
+: I'll look.
+:  - we can swap rows, scale rows, add mults of rows, create a matrix from specified rows... but not that.
+: Would you find this useful?  Is it in Matlab?
+: For list there is  a method called pop
+: Right, but not for matrices.
+: if matrix is a list of list...
+: But it's not quite that.
+: I'l make a ticket.
+: this would be useful
+: there is an m.insert_row
+: Hah!  But we can't do it backwards   
+```
+So let's make this happen.
+
+**Apply**:
+1.  [attachment:trac_11528_delete_rows_and_columns.path.patch]
+2.  [attachment:trac_11528_matrix_delete_rows_and_columns.patch]
+3.  [attachment:trac_11528_matrix_delete_rows_columns.patch]
+4.  [attachment:trac_11528-reviewer.patch]
 
 Comment: 1
 
``````




---

archive/issue_comments_153456.json:
```json
{
    "body": "<a id='comment:22'></a>Attachment [trac_11528-reviewer.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528-reviewer.patch) by @rbeezer created at 2012-06-09 00:28:00\n\nNeeds two things for sure.\n\n1.  `.::` will make a period and a single colon.  One or the other, but we don't want both.  The space you removed needs to be there.\n2.  First error message should be tested.\n\nI have made a reviewer patch addressing these and took the liberty of improving an error message and making the `SEEALSO` into a complete sentence.\n\nI still need to run tests again on a newer version of Sage - on 4.8 at the office right now.\n\nPong - you can review my \"reviewer patch\" and indicate if you agree or not.  **Somebody** will have to review it.  If tests are successful I will\n\n(a) go to positive review\n\n(b) fold all the patches into one for the convenience of the release manger.\n\nRight now this needs all 4 patches present.",
    "created_at": "2012-06-09T00:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153456",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:22'></a>Attachment [trac_11528-reviewer.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528-reviewer.patch) by @rbeezer created at 2012-06-09 00:28:00

Needs two things for sure.

1.  `.::` will make a period and a single colon.  One or the other, but we don't want both.  The space you removed needs to be there.
2.  First error message should be tested.

I have made a reviewer patch addressing these and took the liberty of improving an error message and making the `SEEALSO` into a complete sentence.

I still need to run tests again on a newer version of Sage - on 4.8 at the office right now.

Pong - you can review my "reviewer patch" and indicate if you agree or not.  **Somebody** will have to review it.  If tests are successful I will

(a) go to positive review

(b) fold all the patches into one for the convenience of the release manger.

Right now this needs all 4 patches present.



---

archive/issue_comments_153457.json:
```json
{
    "body": "<a id='comment:23'></a>This all is working fine on 5.1.beta0.  One thought as I actually used this.  Would it make more sense to return  `dcols` rather than `diffcols` in the error message?  In other words return the original, erroneous, input.  Or word the error message to say that the list **is** the complete list of invalid indices rather than saying it **contains** some invalid indices?",
    "created_at": "2012-06-11T05:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153457",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:23'></a>This all is working fine on 5.1.beta0.  One thought as I actually used this.  Would it make more sense to return  `dcols` rather than `diffcols` in the error message?  In other words return the original, erroneous, input.  Or word the error message to say that the list **is** the complete list of invalid indices rather than saying it **contains** some invalid indices?



---

archive/issue_comments_153458.json:
```json
{
    "body": "<a id='comment:24'></a>Hi Rob,\n\n   I have just tested your reviewer patch. It works fine and I like it.\n   There is a tiny tiny point that I want to mention. In the error messages, there should be a full-stop after not {l}. \n\nPong",
    "created_at": "2012-06-12T23:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153458",
    "user": "https://github.com/wypong"
}
```

<a id='comment:24'></a>Hi Rob,

   I have just tested your reviewer patch. It works fine and I like it.
   There is a tiny tiny point that I want to mention. In the error messages, there should be a full-stop after not {l}. 

Pong



---

archive/issue_comments_153459.json:
```json
{
    "body": "Attachment [trac_11528-delete-rows-columns.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528-delete-rows-columns.patch) by @rbeezer created at 2012-06-12 23:58:41\n\nStandalone, consolidated",
    "created_at": "2012-06-12T23:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153459",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_11528-delete-rows-columns.patch](tarball://root/attachments/some-uuid/ticket11528/trac_11528-delete-rows-columns.patch) by @rbeezer created at 2012-06-12 23:58:41

Standalone, consolidated



---

archive/issue_comments_153460.json:
```json
{
    "body": "<a id='comment:25'></a>Rob, I checked it. Looks and works great (the consolidated patch).\nPlease update the status of the ticket.",
    "created_at": "2012-06-13T18:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153460",
    "user": "https://github.com/wypong"
}
```

<a id='comment:25'></a>Rob, I checked it. Looks and works great (the consolidated patch).
Please update the status of the ticket.



---

archive/issue_comments_153461.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-13T20:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153461",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_153462.json:
```json
{
    "body": "<a id='comment:26'></a>(this post from yesterday got lost)\n\nConsolidated patch includes adjustments to the error messages.  \n\nPositive review.  (Congratulations on your first contribution.)\n\nRob",
    "created_at": "2012-06-13T20:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153462",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:26'></a>(this post from yesterday got lost)

Consolidated patch includes adjustments to the error messages.  

Positive review.  (Congratulations on your first contribution.)

Rob



---

archive/issue_events_030113.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-18T13:36:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11528#event-30113"
}
```



---

archive/issue_comments_153463.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-07-02T15:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153463",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_153464.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.2.beta0\"",
    "created_at": "2012-07-02T15:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11528#issuecomment-153464",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.2.beta0"



---

archive/issue_events_030114.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-02T15:22:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11528",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11528#event-30114"
}
```
