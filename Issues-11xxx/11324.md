# Issue 11324: Bug in gale_ryser_theorem

archive/issues_011152.json:
```json
{
    "assignees": [
        "https://github.com/wdjoyner"
    ],
    "body": "See the discussion at :\n\nhttps://groups.google.com/d/topic/sage-devel/IyrgvrLch4M/discussion\n\nApply :\n\n* trac_11324.3.patch\n* trac_11324-reviewer.patch\n\nNathann\n\nCC:  @wdjoyner\n\nComponent: **combinatorics**\n\nAuthor: **David Joyner**\n\nReviewer: **Nathann Cohen**\n\nMerged: **sage-4.7.2.alpha4**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11324_\n\n",
    "closed_at": "2011-10-05T07:47:02Z",
    "created_at": "2011-05-11T10:36:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bug in gale_ryser_theorem",
    "type": "issue",
    "updated_at": "2011-10-05T07:47:02Z",
    "url": "https://github.com/sagemath/sage/issues/11324",
    "user": "https://github.com/nathanncohen"
}
```
See the discussion at :

https://groups.google.com/d/topic/sage-devel/IyrgvrLch4M/discussion

Apply :

* trac_11324.3.patch
* trac_11324-reviewer.patch

Nathann

CC:  @wdjoyner

Component: **combinatorics**

Author: **David Joyner**

Reviewer: **Nathann Cohen**

Merged: **sage-4.7.2.alpha4**

_Issue created by migration from https://trac.sagemath.org/ticket/11324_





---

archive/issue_events_150331.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-05-11T10:36:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150331"
}
```



---

archive/issue_events_150332.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-05-11T10:36:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150332"
}
```



---

archive/issue_events_150333.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-05-11T10:36:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150333"
}
```



---

archive/issue_events_150334.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-05-11T10:36:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150334"
}
```



---

archive/issue_events_150335.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2011-05-11T10:36:50Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150335"
}
```



---

archive/issue_comments_113836.json:
```json
{
    "body": "Attachment: **[trac_11324.patch.gz](https://github.com/sagemath/sage/files/ticket11324/trac_11324.patch.gz)**",
    "created_at": "2011-05-11T10:37:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113836",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[trac_11324.patch.gz](https://github.com/sagemath/sage/files/ticket11324/trac_11324.patch.gz)**



---

archive/issue_comments_113837.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWhat bug? The above thread seems to simply state that the DegreeSequenceBipartite method was implemented wrong.",
    "created_at": "2011-05-11T10:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113837",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:1" align="right">comment:1</div>

What bug? The above thread seems to simply state that the DegreeSequenceBipartite method was implemented wrong.



---

archive/issue_events_150336.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-11T10:55:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150336"
}
```



---

archive/issue_events_150337.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2011-05-11T13:15:13Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "subject": "https://github.com/wdjoyner",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150337"
}
```



---

archive/issue_events_150338.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-11T13:15:13Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "subject": "https://github.com/wdjoyner",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150338"
}
```



---

archive/issue_comments_113838.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nNathann explained the bug and I think I found the fix. I'm testing and hope to post a patch soon.",
    "created_at": "2011-05-11T13:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113838",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:2" align="right">comment:2</div>

Nathann explained the bug and I think I found the fix. I'm testing and hope to post a patch soon.



---

archive/issue_comments_113839.json:
```json
{
    "body": "standalone patch, applies to 4.7.rc1",
    "created_at": "2011-05-13T01:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113839",
    "user": "https://github.com/wdjoyner"
}
```

standalone patch, applies to 4.7.rc1



---

archive/issue_events_150339.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-13T08:57:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150339"
}
```



---

archive/issue_events_150340.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-13T08:57:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150340"
}
```



---

archive/issue_comments_113840.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAttachment: **[trac_11324.2.patch.gz](https://github.com/sagemath/sage/files/ticket11324/trac_11324.2.patch.gz)**",
    "created_at": "2011-05-13T08:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113840",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:3" align="right">comment:3</div>

Attachment: **[trac_11324.2.patch.gz](https://github.com/sagemath/sage/files/ticket11324/trac_11324.2.patch.gz)**



---

archive/issue_comments_113841.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI added a patch which rewrites `_slider01` and seems to fix the bug. It has commented out print statements, which need to be removed. I left them in though, since they are easy to remove. My patch passes docstring tests. I also aded the tests that check that the original bug report found.\n\nI also looked at and tested the docstring patch of Nathann.It looks good to me and passes tests.",
    "created_at": "2011-05-13T09:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113841",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:4" align="right">comment:4</div>

I added a patch which rewrites `_slider01` and seems to fix the bug. It has commented out print statements, which need to be removed. I left them in though, since they are easy to remove. My patch passes docstring tests. I also aded the tests that check that the original bug report found.

I also looked at and tested the docstring patch of Nathann.It looks good to me and passes tests.



---

archive/issue_events_150341.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-13T09:52:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150341"
}
```



---

archive/issue_events_150342.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-13T09:52:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150342"
}
```



---

archive/issue_events_150343.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-14T00:00:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150343"
}
```



---

archive/issue_events_150344.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-14T00:00:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150344"
}
```



---

archive/issue_comments_113842.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHellooooo !!!\n\nI've been trying to apply your patch with all the possible orderings, but I can't get it to pass `^^;`\n\nAmong other things there is a \"fixedcol\" variable in your .3 patch that I don'tsee appearing in the original file, nor in my patch nor in your .2 `^^;`\n\nNathann",
    "created_at": "2011-05-14T07:36:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113842",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

Hellooooo !!!

I've been trying to apply your patch with all the possible orderings, but I can't get it to pass `^^;`

Among other things there is a "fixedcol" variable in your .3 patch that I don'tsee appearing in the original file, nor in my patch nor in your .2 `^^;`

Nathann



---

archive/issue_comments_113843.json:
```json
{
    "body": "Attachment: **[trac_11324.3.patch.gz](https://github.com/sagemath/sage/files/ticket11324/trac_11324.3.patch.gz)**\n\napply only this patch",
    "created_at": "2011-05-15T13:44:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113843",
    "user": "https://github.com/wdjoyner"
}
```

Attachment: **[trac_11324.3.patch.gz](https://github.com/sagemath/sage/files/ticket11324/trac_11324.3.patch.gz)**

apply only this patch



---

archive/issue_comments_113844.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHello !\n\nDavid and I talked about it over emails, but even though the patch fixes the bug there is now a large difference in speed between the two algorithms.\n\nUsing the test function defined in the docstring, it gives :\n\n```\nsage: %timeit test_algorithm(\"ryser\", 10, 20)\n5 loops, best of 3: 2.25 s per loop\nsage: %timeit test_algorithm(\"gale\", 10, 20)\n5 loops, best of 3: 29.2 ms per loop\n```\n\nIt is probable that this implementation could be greatly improved, at least by rewriting it in Cython, but as it could take some time and as this already comes from a nasty bug that has been noticed in the Graph library, perhaps the best is to have a quick fix for now.\n\nWith this patch, the default algorithm is moved to \"gale\", and I also edited a part of the docstring which did not make sense anymore, now that GLPK is by default included in Sage.\n\nIf you can review my patch, or if you found a wonderful way to get its former speed's back in between... `:-)`\n\nNathann",
    "created_at": "2011-05-20T16:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113844",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

Hello !

David and I talked about it over emails, but even though the patch fixes the bug there is now a large difference in speed between the two algorithms.

Using the test function defined in the docstring, it gives :

```
sage: %timeit test_algorithm("ryser", 10, 20)
5 loops, best of 3: 2.25 s per loop
sage: %timeit test_algorithm("gale", 10, 20)
5 loops, best of 3: 29.2 ms per loop
```

It is probable that this implementation could be greatly improved, at least by rewriting it in Cython, but as it could take some time and as this already comes from a nasty bug that has been noticed in the Graph library, perhaps the best is to have a quick fix for now.

With this patch, the default algorithm is moved to "gale", and I also edited a part of the docstring which did not make sense anymore, now that GLPK is by default included in Sage.

If you can review my patch, or if you found a wonderful way to get its former speed's back in between... `:-)`

Nathann



---

archive/issue_comments_113845.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,9 @@\n \n Here is a patch implementing a new doctest checking for correction, but so far the ryser method still needs to be fixed !\n \n+Apply :\n+\n+* trac_11324.3.patch\n+* trac_11324-reviewer.patch\n+\n Nathann\n``````\n",
    "created_at": "2011-05-20T16:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113845",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,9 @@
 
 Here is a patch implementing a new doctest checking for correction, but so far the ryser method still needs to be fixed !
 
+Apply :
+
+* trac_11324.3.patch
+* trac_11324-reviewer.patch
+
 Nathann
``````




---

archive/issue_events_150345.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-21T12:21:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150345"
}
```



---

archive/issue_events_150346.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-05-21T12:21:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150346"
}
```



---

archive/issue_comments_113846.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nathanncohen](#comment:8):\n> Hello !\n> \n> David and I talked about it over emails, but even though the patch fixes the bug there is now a large difference in speed between the two algorithms.\n> \n> Using the test function defined in the docstring, it gives :\n> \n> ```\n> sage: %timeit test_algorithm(\"ryser\", 10, 20)\n> 5 loops, best of 3: 2.25 s per loop\n> sage: %timeit test_algorithm(\"gale\", 10, 20)\n> 5 loops, best of 3: 29.2 ms per loop\n> ```\n> \n> It is probable that this implementation could be greatly improved, at least by rewriting it in Cython, but as it could take some time and as this already comes from a nasty bug that has been noticed in the Graph library, perhaps the best is to have a quick fix for now.\n> \n> With this patch, the default algorithm is moved to \"gale\", and I also edited a part of the docstring which did not make sense anymore, now that GLPK is by default included in Sage.\n> \n> If you can review my patch, or if you found a wonderful way to get its former speed's back in between... `:-)`\n\n\n\nIn principle, your patch is good. It reads fine. However, when you change the default,\nthe output can change, at least in cases when there is some symmetry in one or both of the partitions. In this case, I am getting some new docstring failures. Can you please check those and fix them too?\n\n\n> \n> Nathann",
    "created_at": "2011-05-21T12:21:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113846",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nathanncohen](#comment:8):
> Hello !
> 
> David and I talked about it over emails, but even though the patch fixes the bug there is now a large difference in speed between the two algorithms.
> 
> Using the test function defined in the docstring, it gives :
> 
> ```
> sage: %timeit test_algorithm("ryser", 10, 20)
> 5 loops, best of 3: 2.25 s per loop
> sage: %timeit test_algorithm("gale", 10, 20)
> 5 loops, best of 3: 29.2 ms per loop
> ```
> 
> It is probable that this implementation could be greatly improved, at least by rewriting it in Cython, but as it could take some time and as this already comes from a nasty bug that has been noticed in the Graph library, perhaps the best is to have a quick fix for now.
> 
> With this patch, the default algorithm is moved to "gale", and I also edited a part of the docstring which did not make sense anymore, now that GLPK is by default included in Sage.
> 
> If you can review my patch, or if you found a wonderful way to get its former speed's back in between... `:-)`



In principle, your patch is good. It reads fine. However, when you change the default,
the output can change, at least in cases when there is some symmetry in one or both of the partitions. In this case, I am getting some new docstring failures. Can you please check those and fix them too?


> 
> Nathann



---

archive/issue_events_150347.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-05-21T23:42:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150347"
}
```



---

archive/issue_events_150348.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-05-21T23:42:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150348"
}
```



---

archive/issue_comments_113847.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOopssssss.... Fixed !\n\nI instead set the algorithm in these doctests to \"ryser\", as it is much less sensible to numerical noise than Gale's, which uses GLPK (or CPLEX when installed).\n\nNathann",
    "created_at": "2011-05-21T23:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113847",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Oopssssss.... Fixed !

I instead set the algorithm in these doctests to "ryser", as it is much less sensible to numerical noise than Gale's, which uses GLPK (or CPLEX when installed).

Nathann



---

archive/issue_comments_113848.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@nathanncohen](#comment:10):\n> Oopssssss.... Fixed !\n> \n> I instead set the algorithm in these doctests to \"ryser\", as it is much less sensible to numerical noise than Gale's, which uses GLPK (or CPLEX when installed).\n> \n> Nathann\n\nThat works now. I give the reviewer patch a positive review.\n\nNathann, I'll leave the final decision to you. Thanks for the help!",
    "created_at": "2011-05-24T09:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113848",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@nathanncohen](#comment:10):
> Oopssssss.... Fixed !
> 
> I instead set the algorithm in these doctests to "ryser", as it is much less sensible to numerical noise than Gale's, which uses GLPK (or CPLEX when installed).
> 
> Nathann

That works now. I give the reviewer patch a positive review.

Nathann, I'll leave the final decision to you. Thanks for the help!



---

archive/issue_events_150349.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-05-24T09:32:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150349"
}
```



---

archive/issue_events_150350.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-05-24T09:32:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150350"
}
```



---

archive/issue_comments_113849.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOh ! Then all's good to go `:-)`\n\nAnd by the way, you did all the hard stuff on this ticket, so thanks to you !! `^^;`\n\nNathann",
    "created_at": "2011-05-24T09:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113849",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

Oh ! Then all's good to go `:-)`

And by the way, you did all the hard stuff on this ticket, so thanks to you !! `^^;`

Nathann



---

archive/issue_comments_113850.json:
```json
{
    "body": "Author: **David Joyner**",
    "created_at": "2011-06-01T09:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113850",
    "user": "https://github.com/jdemeyer"
}
```

Author: **David Joyner**



---

archive/issue_comments_113851.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2011-06-01T09:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113851",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_comments_113852.json:
```json
{
    "body": "Merged: **sage-4.7.1.alpha3**",
    "created_at": "2011-06-08T07:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113852",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.1.alpha3**



---

archive/issue_events_150351.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-08T07:13:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150351"
}
```



---

archive/issue_events_150352.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-08T07:13:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150352"
}
```



---

archive/issue_comments_113853.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe description says \"Here is a patch implementing a new doctest checking for correction, but so far the ryser method still needs to be fixed !\".  Is this up-to-date?  If yes, why adding a doctest for a broken method?\n\nIn any case, this needs work.  On a Mac OS X 10.4 PPC system, I can easily reproduce the following:\n\n```\nsage -t -long -force_lib \"devel/sage/sage/combinat/integer_vector.py\"\n**********************************************************************\nFile \"/Users/jdemeyer/sage-4.7.1.alpha3/devel/sage/sage/combinat/integer_vector.py\", line 340:\n    sage: for algorithm in [\"gale\", \"ryser\"]:                            # long time\n         for i in range(Integer(50)):                                         # long time\n            if not test_algorithm(algorithm, Integer(3), Integer(10)):                 # long time\n                print \"Something wrong with algorithm \", algorithm   # long time\n                break                                                # long time\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/jdemeyer/sage-4.7.1.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/jdemeyer/sage-4.7.1.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/jdemeyer/sage-4.7.1.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_3[28]>\", line 3, in <module>\n        if not test_algorithm(algorithm, Integer(3), Integer(10)):                 # long time\n      File \"<doctest __main__.example_3[27]>\", line 7, in test_algorithm\n        ss1 = sorted(map(lambda x : sum(x) , m.rows()), reverse = True)\n    AttributeError: 'bool' object has no attribute 'rows'\n**********************************************************************\n```\n\nThe error does not show up every time, but let's say 1 time of out 5 tests.",
    "created_at": "2011-06-10T08:17:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113853",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

The description says "Here is a patch implementing a new doctest checking for correction, but so far the ryser method still needs to be fixed !".  Is this up-to-date?  If yes, why adding a doctest for a broken method?

In any case, this needs work.  On a Mac OS X 10.4 PPC system, I can easily reproduce the following:

```
sage -t -long -force_lib "devel/sage/sage/combinat/integer_vector.py"
**********************************************************************
File "/Users/jdemeyer/sage-4.7.1.alpha3/devel/sage/sage/combinat/integer_vector.py", line 340:
    sage: for algorithm in ["gale", "ryser"]:                            # long time
         for i in range(Integer(50)):                                         # long time
            if not test_algorithm(algorithm, Integer(3), Integer(10)):                 # long time
                print "Something wrong with algorithm ", algorithm   # long time
                break                                                # long time
Exception raised:
    Traceback (most recent call last):
      File "/Users/jdemeyer/sage-4.7.1.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/jdemeyer/sage-4.7.1.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/jdemeyer/sage-4.7.1.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_3[28]>", line 3, in <module>
        if not test_algorithm(algorithm, Integer(3), Integer(10)):                 # long time
      File "<doctest __main__.example_3[27]>", line 7, in test_algorithm
        ss1 = sorted(map(lambda x : sum(x) , m.rows()), reverse = True)
    AttributeError: 'bool' object has no attribute 'rows'
**********************************************************************
```

The error does not show up every time, but let's say 1 time of out 5 tests.



---

archive/issue_comments_113854.json:
```json
{
    "body": "Changed merged from **sage-4.7.1.alpha3** to none",
    "created_at": "2011-06-10T08:17:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113854",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-4.7.1.alpha3** to none



---

archive/issue_events_150353.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-10T08:17:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150353"
}
```



---

archive/issue_events_150354.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-10T08:17:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150354"
}
```



---

archive/issue_events_150355.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-10T08:17:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150355"
}
```



---

archive/issue_events_150356.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-06-10T15:07:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150356"
}
```



---

archive/issue_events_150357.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-06-10T15:07:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150357"
}
```



---

archive/issue_comments_113855.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,6 @@\n See the discussion at :\n \n https://groups.google.com/d/topic/sage-devel/IyrgvrLch4M/discussion\n-\n-Here is a patch implementing a new doctest checking for correction, but so far the ryser method still needs to be fixed !\n \n Apply :\n \n``````\n",
    "created_at": "2011-06-10T15:07:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113855",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,6 @@
 See the discussion at :
 
 https://groups.google.com/d/topic/sage-devel/IyrgvrLch4M/discussion
-
-Here is a patch implementing a new doctest checking for correction, but so far the ryser method still needs to be fixed !
 
 Apply :
 
``````




---

archive/issue_comments_113856.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nGloops... `:-/`\n\nThis was an old bug, without any link to what we were adressing now. The problem appeared when the function was given as an entry containing only vectors ``[0]*n``. I fixed that in my updated patch, and ran the test..... **MANY** times `:-)`\n\nDavid ? Are you still around ? `:-)`\n\nNathann",
    "created_at": "2011-06-10T15:07:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113856",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Gloops... `:-/`

This was an old bug, without any link to what we were adressing now. The problem appeared when the function was given as an entry containing only vectors ``[0]*n``. I fixed that in my updated patch, and ran the test..... **MANY** times `:-)`

David ? Are you still around ? `:-)`

Nathann



---

archive/issue_comments_113857.json:
```json
{
    "body": "Attachment: **[trac_11324-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket11324/trac_11324-reviewer.patch.gz)**",
    "created_at": "2011-06-10T15:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113857",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[trac_11324-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket11324/trac_11324-reviewer.patch.gz)**



---

archive/issue_comments_113858.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nPing ?",
    "created_at": "2011-08-14T13:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113858",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

Ping ?



---

archive/issue_comments_113859.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nathanncohen](#comment:18):\n> Gloops... `:-/`\n> \n\n...\n\n> \n> David ? Are you still around ? `:-)`\n> \n\n\nSorry for the delay.\n\nThe reviewer's patch applies (on top of the previous patch) fine on 4.7.1.rc1.\nIt passes all tests. I read through the patch itself which is mostly docstring fixes but also implements the trivial case of the 0 matrix (which a corresponding added doctest).\n\nThanks Nathann!\n\n> Nathann",
    "created_at": "2011-10-02T15:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113859",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nathanncohen](#comment:18):
> Gloops... `:-/`
> 

...

> 
> David ? Are you still around ? `:-)`
> 


Sorry for the delay.

The reviewer's patch applies (on top of the previous patch) fine on 4.7.1.rc1.
It passes all tests. I read through the patch itself which is mostly docstring fixes but also implements the trivial case of the 0 matrix (which a corresponding added doctest).

Thanks Nathann!

> Nathann



---

archive/issue_events_150358.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-10-02T15:09:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150358"
}
```



---

archive/issue_events_150359.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-10-02T15:09:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150359"
}
```



---

archive/issue_comments_113860.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThaaaaaaaanks `:-)`",
    "created_at": "2011-10-02T15:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113860",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Thaaaaaaaanks `:-)`



---

archive/issue_events_150360.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-05T07:47:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150360"
}
```



---

archive/issue_events_150361.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-05T07:47:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11324#event-150361"
}
```



---

archive/issue_comments_113861.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha4**",
    "created_at": "2011-10-05T07:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11324#issuecomment-113861",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.2.alpha4**
