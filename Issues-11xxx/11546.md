# Issue 11546: Implementation of energy function for crystals

archive/issues_011374.json:
```json
{
    "body": "This patch implements the energy function and affine grading for affine crystals and adds an\nentry in the corresponding thematic tutorial. It also adds functions to obtain the level and test perfectness\nfor Kirillov-Reshetikhin crystals.\n\nIn addition, it removes the condition that for the Lusztig involution the element is supposed\nto live in a crystal with a single highest weight element, and modifies the methods\nto_highest_weight and to_lowest_weight in crystal.py to make them more robust.\n\nThe update to the thematic tutorial can be built using\n\n```\nsage -docbuild thematic_tutorials html\n```\n\nis available here:\n\n http://www.math.ucdavis.edu/~anne/sage/lie/affine_crystals.html \n\nApply: [attachment:trac_11546-crystals_energy-as.patch]\n\nAssignee: sage-combinat\n\nCC:  sage-combinat\n\nKeywords: energy, crystals\n\nResolution: fixed\n\nDependencies: #11183\n\nAuthor: Anne Schilling\n\nReviewer: Tom Denton\n\nMerged: sage-4.7.2.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/11546\n\n",
    "closed_at": "2011-08-03T14:37:51Z",
    "created_at": "2011-06-25T19:52:40Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Implementation of energy function for crystals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11546",
    "user": "https://github.com/anneschilling"
}
```
This patch implements the energy function and affine grading for affine crystals and adds an
entry in the corresponding thematic tutorial. It also adds functions to obtain the level and test perfectness
for Kirillov-Reshetikhin crystals.

In addition, it removes the condition that for the Lusztig involution the element is supposed
to live in a crystal with a single highest weight element, and modifies the methods
to_highest_weight and to_lowest_weight in crystal.py to make them more robust.

The update to the thematic tutorial can be built using

```
sage -docbuild thematic_tutorials html
```

is available here:

 http://www.math.ucdavis.edu/~anne/sage/lie/affine_crystals.html 

Apply: [attachment:trac_11546-crystals_energy-as.patch]

Assignee: sage-combinat

CC:  sage-combinat

Keywords: energy, crystals

Resolution: fixed

Dependencies: #11183

Author: Anne Schilling

Reviewer: Tom Denton

Merged: sage-4.7.2.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/11546





---

archive/issue_comments_151539.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-06-26T19:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151539",
    "user": "https://github.com/anneschilling"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_151540.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,11 @@\n This patch implements the energy function for affine crystals and adds an entry in the corresponding thematic tutorial.\n+\n+The update to the thematic tutorial can be built using\n+\n+```\n+sage -docbuild thematic_tutorials html\n+```\n+\n+is available here:\n+\n+ http://www.math.ucdavis.edu/~anne/sage/lie/affine_crystals.html \n``````\n",
    "created_at": "2011-06-26T19:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151540",
    "user": "https://github.com/anneschilling"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,11 @@
 This patch implements the energy function for affine crystals and adds an entry in the corresponding thematic tutorial.
+
+The update to the thematic tutorial can be built using
+
+```
+sage -docbuild thematic_tutorials html
+```
+
+is available here:
+
+ http://www.math.ucdavis.edu/~anne/sage/lie/affine_crystals.html 
``````




---

archive/issue_comments_151541.json:
```json
{
    "body": "<a id='comment:2'></a>\nReady for review!",
    "created_at": "2011-06-26T22:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151541",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:2'></a>
Ready for review!



---

archive/issue_comments_151542.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n-This patch implements the energy function for affine crystals and adds an entry in the corresponding thematic tutorial.\n+This patch implements the energy function and affine grading for affine crystals and adds an entry in the corresponding thematic tutorial.\n+\n+In addition, it removes the condition that for the Lusztig involution the element is supposed to live in a crystal with a single highest weight element, and modifies the methods\n+to_highest_weight and to_lowest_weight in crystal.py to make them more robust.\n \n The update to the thematic tutorial can be built using\n \n``````\n",
    "created_at": "2011-06-30T23:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151542",
    "user": "https://github.com/anneschilling"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,7 @@
-This patch implements the energy function for affine crystals and adds an entry in the corresponding thematic tutorial.
+This patch implements the energy function and affine grading for affine crystals and adds an entry in the corresponding thematic tutorial.
+
+In addition, it removes the condition that for the Lusztig involution the element is supposed to live in a crystal with a single highest weight element, and modifies the methods
+to_highest_weight and to_lowest_weight in crystal.py to make them more robust.
 
 The update to the thematic tutorial can be built using
 
``````




---

archive/issue_comments_151543.json:
```json
{
    "body": "<a id='comment:4'></a>\n1) Funny problem with the classical crystal command, unrelated to patch? \nK.classical_decomposition seems to work fine, though.\n\n\n```\n    sage: K = KirillovReshetikhinCrystal(['A',2,1],2,1) \n    sage: Kc=K.classical_crystal()\n    sage: Kc\n    ERROR: An unexpected error occurred while tokenizing input\n    The following traceback may be corrupted or invalid\n    The error message is: ('EOF in multi-line statement', (396, 0))\n\n    ---------------------------------------------------------------------------\n    AttributeError                            Traceback (most recent call last)\n    ....\n    AttributeError: 'int' object has no attribute 'value'\n\n```\n\n\n2) small request...  Could there be a 'level' function on KR crystals?  It looks like this would be as easy as wrapping the assertion in the energy function in a separate function, and would give a natural response to the user when the 'All crystals in the tensor product need to be perfect of the same level' assertion error comes up.\n\n\n3) The 'list' option removed from the 'to_highest_weight' functions looks like it was a bit of extraneous code, so this is good!  \nI'm a little concerned though, because the old way returned:\n\n```\n        return self.to_highest_weight(list = list + [i], index_set = index_set)\n```\n \nWhile the new returns:\n\n```\n        hw = self.to_highest_weight(index_set = index_set) \n        return [hw[0], [i] + hw[1]]\n```\n \nIt looks like the new 'i' is being added to opposite ends of the list in these two cases; is this consistent one way or the other across the code-base?\n\nThis reminds me of a functionality extension I had thought would be nice at one point, namely being able to feed a list to the 'e' and 'f' functions instead of just a single letter.  It would both extend the functionality a bit and establish a convention for which way this 'list' should be applied!",
    "created_at": "2011-07-03T17:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151543",
    "user": "https://github.com/sdenton4"
}
```

<a id='comment:4'></a>
1) Funny problem with the classical crystal command, unrelated to patch? 
K.classical_decomposition seems to work fine, though.


```
    sage: K = KirillovReshetikhinCrystal(['A',2,1],2,1) 
    sage: Kc=K.classical_crystal()
    sage: Kc
    ERROR: An unexpected error occurred while tokenizing input
    The following traceback may be corrupted or invalid
    The error message is: ('EOF in multi-line statement', (396, 0))

    ---------------------------------------------------------------------------
    AttributeError                            Traceback (most recent call last)
    ....
    AttributeError: 'int' object has no attribute 'value'

```


2) small request...  Could there be a 'level' function on KR crystals?  It looks like this would be as easy as wrapping the assertion in the energy function in a separate function, and would give a natural response to the user when the 'All crystals in the tensor product need to be perfect of the same level' assertion error comes up.


3) The 'list' option removed from the 'to_highest_weight' functions looks like it was a bit of extraneous code, so this is good!  
I'm a little concerned though, because the old way returned:

```
        return self.to_highest_weight(list = list + [i], index_set = index_set)
```
 
While the new returns:

```
        hw = self.to_highest_weight(index_set = index_set) 
        return [hw[0], [i] + hw[1]]
```
 
It looks like the new 'i' is being added to opposite ends of the list in these two cases; is this consistent one way or the other across the code-base?

This reminds me of a functionality extension I had thought would be nice at one point, namely being able to feed a list to the 'e' and 'f' functions instead of just a single letter.  It would both extend the functionality a bit and establish a convention for which way this 'list' should be applied!



---

archive/issue_comments_151544.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-07-03T17:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151544",
    "user": "https://github.com/sdenton4"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_151545.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-07-04T04:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151545",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_151546.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi Tom,\n\nThank you for looking at the patch!\n\nReplying to [sdenton](#comment%3A4):\n> 1) Funny problem with the classical crystal command, unrelated to patch? \n> K.classical_decomposition seems to work fine, though.\n> \n> \n> \n> ```\n>     sage: K = KirillovReshetikhinCrystal(['A',2,1],2,1) \n>     sage: Kc=K.classical_crystal()\n>     sage: Kc\n>     ERROR: An unexpected error occurred while tokenizing input\n>     The following traceback may be corrupted or invalid\n>     The error message is: ('EOF in multi-line statement', (396, 0))\n> \n>     ---------------------------------------------------------------------------\n>     AttributeError                            Traceback (most recent call last)\n>     ....\n>     AttributeError: 'int' object has no attribute 'value'\n> \n> ```\n\n\nclassical_crystal is an attribute, not a method, so the correct way of using it is\n\n```\n    sage: K = KirillovReshetikhinCrystal(['A',2,1],2,1)\n    sage: Kc = K.classical_crystal\n    sage: Kc\n    The crystal of tableaux of type ['A', 2] and shape(s) [[1, 1]]\n```\n\n> 2) small request...  Could there be a 'level' function on KR crystals?  It looks like this would be as easy as wrapping the assertion in the energy function in a separate function, and would give a natural response to the user when the 'All crystals in the tensor product need to be perfect of the same level' assertion error comes up.\n\n\nThe notion of level really only exists for perfect crystals. However, the method affine_grading also works in the non-perfect setting. Note that in the assert there is no ceiling for the quotient!\n\n> 3) The 'list' option removed from the 'to_highest_weight' functions looks like it was a bit of extraneous code, so this is good!  \n> I'm a little concerned though, because the old way returned:\n> \n> \n> ```\n>         return self.to_highest_weight(list = list + [i], index_set = index_set)\n> ```\n>  \n> While the new returns:\n> \n> \n> ```\n>         hw = self.to_highest_weight(index_set = index_set) \n>         return [hw[0], [i] + hw[1]]\n> ```\n\n\nDoing it this way gives the same output as before! I did not change any of the tests and they still pass.\n\n> It looks like the new 'i' is being added to opposite ends of the list in these two cases; is this consistent one way or the other across the code-base?\n> \n> This reminds me of a functionality extension I had thought would be nice at one point, namely being able to feed a list to the 'e' and 'f' functions instead of just a single letter.  It would both extend the functionality a bit and establish a convention for which way this 'list' should be applied!\n\n\nThis already exists and is used as follows:\n\n```\n    sage: K = KirillovReshetikhinCrystal(['A',2,1],1,1)\n    sage: t = K(rows=[[1]])\n    sage: t.f_string([1,2])\n    [[3]]\n```",
    "created_at": "2011-07-04T04:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151546",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:5'></a>
Hi Tom,

Thank you for looking at the patch!

Replying to [sdenton](#comment%3A4):
> 1) Funny problem with the classical crystal command, unrelated to patch? 
> K.classical_decomposition seems to work fine, though.
> 
> 
> 
> ```
>     sage: K = KirillovReshetikhinCrystal(['A',2,1],2,1) 
>     sage: Kc=K.classical_crystal()
>     sage: Kc
>     ERROR: An unexpected error occurred while tokenizing input
>     The following traceback may be corrupted or invalid
>     The error message is: ('EOF in multi-line statement', (396, 0))
> 
>     ---------------------------------------------------------------------------
>     AttributeError                            Traceback (most recent call last)
>     ....
>     AttributeError: 'int' object has no attribute 'value'
> 
> ```


classical_crystal is an attribute, not a method, so the correct way of using it is

```
    sage: K = KirillovReshetikhinCrystal(['A',2,1],2,1)
    sage: Kc = K.classical_crystal
    sage: Kc
    The crystal of tableaux of type ['A', 2] and shape(s) [[1, 1]]
```

> 2) small request...  Could there be a 'level' function on KR crystals?  It looks like this would be as easy as wrapping the assertion in the energy function in a separate function, and would give a natural response to the user when the 'All crystals in the tensor product need to be perfect of the same level' assertion error comes up.


The notion of level really only exists for perfect crystals. However, the method affine_grading also works in the non-perfect setting. Note that in the assert there is no ceiling for the quotient!

> 3) The 'list' option removed from the 'to_highest_weight' functions looks like it was a bit of extraneous code, so this is good!  
> I'm a little concerned though, because the old way returned:
> 
> 
> ```
>         return self.to_highest_weight(list = list + [i], index_set = index_set)
> ```
>  
> While the new returns:
> 
> 
> ```
>         hw = self.to_highest_weight(index_set = index_set) 
>         return [hw[0], [i] + hw[1]]
> ```


Doing it this way gives the same output as before! I did not change any of the tests and they still pass.

> It looks like the new 'i' is being added to opposite ends of the list in these two cases; is this consistent one way or the other across the code-base?
> 
> This reminds me of a functionality extension I had thought would be nice at one point, namely being able to feed a list to the 'e' and 'f' functions instead of just a single letter.  It would both extend the functionality a bit and establish a convention for which way this 'list' should be applied!


This already exists and is used as follows:

```
    sage: K = KirillovReshetikhinCrystal(['A',2,1],1,1)
    sage: t = K(rows=[[1]])
    sage: t.f_string([1,2])
    [[3]]
```



---

archive/issue_comments_151547.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n-This patch implements the energy function and affine grading for affine crystals and adds an entry in the corresponding thematic tutorial.\n+This patch implements the energy function and affine grading for affine crystals and adds an\n+entry in the corresponding thematic tutorial. It also adds functions to obtain the level and test perfectness\n+for Kirillov-Reshetikhin crystals.\n \n-In addition, it removes the condition that for the Lusztig involution the element is supposed to live in a crystal with a single highest weight element, and modifies the methods\n+In addition, it removes the condition that for the Lusztig involution the element is supposed\n+to live in a crystal with a single highest weight element, and modifies the methods\n to_highest_weight and to_lowest_weight in crystal.py to make them more robust.\n \n The update to the thematic tutorial can be built using\n@@ -12,3 +15,7 @@\n is available here:\n \n  http://www.math.ucdavis.edu/~anne/sage/lie/affine_crystals.html \n+\n+Dependencies: #11183\n+\n+Apply: trac_11546-crystals_energy-as.patch\n``````\n",
    "created_at": "2011-07-05T20:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151547",
    "user": "https://github.com/anneschilling"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
-This patch implements the energy function and affine grading for affine crystals and adds an entry in the corresponding thematic tutorial.
+This patch implements the energy function and affine grading for affine crystals and adds an
+entry in the corresponding thematic tutorial. It also adds functions to obtain the level and test perfectness
+for Kirillov-Reshetikhin crystals.
 
-In addition, it removes the condition that for the Lusztig involution the element is supposed to live in a crystal with a single highest weight element, and modifies the methods
+In addition, it removes the condition that for the Lusztig involution the element is supposed
+to live in a crystal with a single highest weight element, and modifies the methods
 to_highest_weight and to_lowest_weight in crystal.py to make them more robust.
 
 The update to the thematic tutorial can be built using
@@ -12,3 +15,7 @@
 is available here:
 
  http://www.math.ucdavis.edu/~anne/sage/lie/affine_crystals.html 
+
+Dependencies: #11183
+
+Apply: trac_11546-crystals_energy-as.patch
``````




---

archive/issue_comments_151548.json:
```json
{
    "body": "<a id='comment:7'></a>\nHi Tom,\n\nMethods level and is_perfect have been added to the Kirillov-Reshetikhin crystal code.\nIs everything ok now?\n\nThanks,\n\nAnne",
    "created_at": "2011-07-05T20:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151548",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:7'></a>
Hi Tom,

Methods level and is_perfect have been added to the Kirillov-Reshetikhin crystal code.
Is everything ok now?

Thanks,

Anne



---

archive/issue_comments_151549.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Tom Denton\"",
    "created_at": "2011-07-05T20:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151549",
    "user": "https://github.com/anneschilling"
}
```

Changing reviewer from "" to "Tom Denton"



---

archive/issue_comments_151550.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-07-06T22:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151550",
    "user": "https://github.com/sdenton4"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_151551.json:
```json
{
    "body": "<a id='comment:8'></a>\ngreat!\nThanks for taking the time to address my questions.\n\nBest,\n-tom",
    "created_at": "2011-07-06T22:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151551",
    "user": "https://github.com/sdenton4"
}
```

<a id='comment:8'></a>
great!
Thanks for taking the time to address my questions.

Best,
-tom



---

archive/issue_comments_151552.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [sdenton](#comment%3A8):\n> great!\n> Thanks for taking the time to address my questions.\n> \n> Best,\n> -tom\n\n\nHi Tom,\n\nThanks for the careful review!\n\nAnne",
    "created_at": "2011-07-06T22:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151552",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:9'></a>
Replying to [sdenton](#comment%3A8):
> great!
> Thanks for taking the time to address my questions.
> 
> Best,
> -tom


Hi Tom,

Thanks for the careful review!

Anne



---

archive/issue_comments_151553.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#11183\"",
    "created_at": "2011-07-28T10:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151553",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#11183"



---

archive/issue_comments_151554.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,6 +16,4 @@\n \n  http://www.math.ucdavis.edu/~anne/sage/lie/affine_crystals.html \n \n-Dependencies: #11183\n-\n-Apply: trac_11546-crystals_energy-as.patch\n+Apply: [attachment:trac_11546-crystals_energy-as.patch]\n``````\n",
    "created_at": "2011-07-28T10:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151554",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,6 +16,4 @@
 
  http://www.math.ucdavis.edu/~anne/sage/lie/affine_crystals.html 
 
-Dependencies: #11183
-
-Apply: trac_11546-crystals_energy-as.patch
+Apply: [attachment:trac_11546-crystals_energy-as.patch]
``````




---

archive/issue_comments_151555.json:
```json
{
    "body": "Changing work_issues from \"\" to \"documentation\"",
    "created_at": "2011-07-28T16:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151555",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "" to "documentation"



---

archive/issue_comments_151556.json:
```json
{
    "body": "<a id='comment:11'></a>\nThere are multiple problems with the documentation:\n\n```\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/categories/examples/crystals.rst:69: WARNING: more than one target found for cross-reference u'cartan_type': sage.combinat.crystals.tensor_product.CrystalOfTableaux.cartan_type, sage.combinat.root_system.dynkin_diagram.DynkinDiagram_class.cartan_type, sage.combinat.root_system.weyl_characters.WeightRing.cartan_type, sage.combinat.root_system.weyl_characters.WeylCharacterRing.cartan_type, sage.combinat.root_system.weyl_group.WeylGroup_gens.cartan_type, sage.combinat.root_system.root_system.RootSystem.cartan_type, sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebraT.cartan_type, sage.categories.crystals.Crystals.ParentMethods.cartan_type, sage.combinat.root_system.weyl_group.ClassicalWeylSubgroup.cartan_type, sage.combinat.root_system.weyl_characters.WeylCharacterRing.Element.cartan_type, sage.combinat.root_system.weyl_characters.WeightRing.Element.cartan_type, sage.categories.crystals.Crystals.ElementMethods.cartan_type\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/categories/examples/crystals.rst:73: WARNING: more than one target found for cross-reference u'Element.weight': sage.combinat.crystals.direct_sum.DirectSumOfCrystals.Element.weight, sage.combinat.crystals.fast_crystals.FastCrystal.Element.weight\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst:: WARNING: citation not found: FOS2010\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst:: WARNING: citation not found: FOS2010\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst:: WARNING: citation not found: SchillingTingley2011\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst:: WARNING: citation not found: SchillingTingley2011\n```",
    "created_at": "2011-07-28T16:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151556",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
There are multiple problems with the documentation:

```
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/categories/examples/crystals.rst:69: WARNING: more than one target found for cross-reference u'cartan_type': sage.combinat.crystals.tensor_product.CrystalOfTableaux.cartan_type, sage.combinat.root_system.dynkin_diagram.DynkinDiagram_class.cartan_type, sage.combinat.root_system.weyl_characters.WeightRing.cartan_type, sage.combinat.root_system.weyl_characters.WeylCharacterRing.cartan_type, sage.combinat.root_system.weyl_group.WeylGroup_gens.cartan_type, sage.combinat.root_system.root_system.RootSystem.cartan_type, sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebraT.cartan_type, sage.categories.crystals.Crystals.ParentMethods.cartan_type, sage.combinat.root_system.weyl_group.ClassicalWeylSubgroup.cartan_type, sage.combinat.root_system.weyl_characters.WeylCharacterRing.Element.cartan_type, sage.combinat.root_system.weyl_characters.WeightRing.Element.cartan_type, sage.categories.crystals.Crystals.ElementMethods.cartan_type
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/categories/examples/crystals.rst:73: WARNING: more than one target found for cross-reference u'Element.weight': sage.combinat.crystals.direct_sum.DirectSumOfCrystals.Element.weight, sage.combinat.crystals.fast_crystals.FastCrystal.Element.weight
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst:: WARNING: citation not found: FOS2010
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst:: WARNING: citation not found: FOS2010
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst:: WARNING: citation not found: SchillingTingley2011
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst:: WARNING: citation not found: SchillingTingley2011
```



---

archive/issue_comments_151557.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-07-28T16:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151557",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_151558.json:
```json
{
    "body": "<a id='comment:12'></a>\nHi!\n\nThe problems regarding the references should be fixed in the revised patch.\n\nBest regards,\n\nAnne",
    "created_at": "2011-07-29T12:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151558",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:12'></a>
Hi!

The problems regarding the references should be fixed in the revised patch.

Best regards,

Anne



---

archive/issue_comments_151559.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-07-29T12:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151559",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_151560.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-08-01T16:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151560",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_151561.json:
```json
{
    "body": "<a id='comment:14'></a>\nUnfortunately, for me the problem is still not fixed:\n\n```\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/local/lib/python2.6/site-packages/sage/combinat/crystals/kirillov_reshetikhin.py:docstring of sage.combinat.crystals.kirillov_reshetikhin.KirillovReshetikhinGenericCrystal.level:9: (WARNING/2) Duplicate explicit target name: \"fos2010\".\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst:9: WARNING: duplicate citation FOS2010, other instance in /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/local/lib/python2.6/site-packages/sage/combinat/crystals/tensor_product.py:docstring of sage.combinat.crystals.tensor_product.TensorProductOfCrystalsElement.energy_function:15: (WARNING/2) Duplicate explicit target name: \"schillingtingley2011\".\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst:15: WARNING: duplicate citation SchillingTingley2011, other instance in /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst\n```",
    "created_at": "2011-08-01T16:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151561",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Unfortunately, for me the problem is still not fixed:

```
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/local/lib/python2.6/site-packages/sage/combinat/crystals/kirillov_reshetikhin.py:docstring of sage.combinat.crystals.kirillov_reshetikhin.KirillovReshetikhinGenericCrystal.level:9: (WARNING/2) Duplicate explicit target name: "fos2010".
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst:9: WARNING: duplicate citation FOS2010, other instance in /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/local/lib/python2.6/site-packages/sage/combinat/crystals/tensor_product.py:docstring of sage.combinat.crystals.tensor_product.TensorProductOfCrystalsElement.energy_function:15: (WARNING/2) Duplicate explicit target name: "schillingtingley2011".
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst:15: WARNING: duplicate citation SchillingTingley2011, other instance in /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst
```



---

archive/issue_comments_151562.json:
```json
{
    "body": "Attachment [trac_11546-crystals_energy-as.patch](tarball://root/attachments/some-uuid/ticket11546/trac_11546-crystals_energy-as.patch) by @anneschilling created at 2011-08-03 05:17:48",
    "created_at": "2011-08-03T05:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151562",
    "user": "https://github.com/anneschilling"
}
```

Attachment [trac_11546-crystals_energy-as.patch](tarball://root/attachments/some-uuid/ticket11546/trac_11546-crystals_energy-as.patch) by @anneschilling created at 2011-08-03 05:17:48



---

archive/issue_comments_151563.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-08-03T05:20:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151563",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_151564.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jdemeyer](#comment%3A14):\n> Unfortunately, for me the problem is still not fixed:\n> \n> ```\n> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/local/lib/python2.6/site-packages/sage/combinat/crystals/kirillov_reshetikhin.py:docstring of sage.combinat.crystals.kirillov_reshetikhin.KirillovReshetikhinGenericCrystal.level:9: (WARNING/2) Duplicate explicit target name: \"fos2010\".\n> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst:9: WARNING: duplicate citation FOS2010, other instance in /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst\n> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/local/lib/python2.6/site-packages/sage/combinat/crystals/tensor_product.py:docstring of sage.combinat.crystals.tensor_product.TensorProductOfCrystalsElement.energy_function:15: (WARNING/2) Duplicate explicit target name: \"schillingtingley2011\".\n> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst:15: WARNING: duplicate citation SchillingTingley2011, other instance in /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst\n> ```\n\n\nUnfortunately, I cannot reproduce the problem, but I hope it is fixed with the\nrevised patch (where I took out multiple entries of the same reference in the same\nfile).\n\nBest wishes,\n\nAnne",
    "created_at": "2011-08-03T05:20:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151564",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:15'></a>
Replying to [jdemeyer](#comment%3A14):
> Unfortunately, for me the problem is still not fixed:
> 
> ```
> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/local/lib/python2.6/site-packages/sage/combinat/crystals/kirillov_reshetikhin.py:docstring of sage.combinat.crystals.kirillov_reshetikhin.KirillovReshetikhinGenericCrystal.level:9: (WARNING/2) Duplicate explicit target name: "fos2010".
> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst:9: WARNING: duplicate citation FOS2010, other instance in /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/kirillov_reshetikhin.rst
> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/local/lib/python2.6/site-packages/sage/combinat/crystals/tensor_product.py:docstring of sage.combinat.crystals.tensor_product.TensorProductOfCrystalsElement.energy_function:15: (WARNING/2) Duplicate explicit target name: "schillingtingley2011".
> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst:15: WARNING: duplicate citation SchillingTingley2011, other instance in /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha1/devel/sage/doc/en/reference/sage/combinat/crystals/tensor_product.rst
> ```


Unfortunately, I cannot reproduce the problem, but I hope it is fixed with the
revised patch (where I took out multiple entries of the same reference in the same
file).

Best wishes,

Anne



---

archive/issue_comments_151565.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-08-03T14:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151565",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_151566.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.7.2.alpha1\"",
    "created_at": "2011-08-03T14:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151566",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.7.2.alpha1"



---

archive/issue_comments_151567.json:
```json
{
    "body": "Changing work_issues from \"documentation\" to \"\"",
    "created_at": "2011-08-03T14:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151567",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "documentation" to ""



---

archive/issue_events_043477.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-03T14:37:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11546#event-43477"
}
```



---

archive/issue_comments_151568.json:
```json
{
    "body": "<a id='comment:16'></a>\nIt works now, thanks!",
    "created_at": "2011-08-03T14:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11546",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11546#issuecomment-151568",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
It works now, thanks!
