# Issue 11287: Interface to runsnake and import_statements

archive/issues_011115.json:
```json
{
    "assignees": [],
    "body": "This patch adds two developper tools in sage.misc.dev_tools:\n\n- An interface to the graphical profiler ```runsnake```.\n  See e.g. the attached image which shows a graphical profile \n  of listing all the elements of SymmetricGroup(3), and highlights\n  the current GAP interface issue with select on certain linux \n  kernels. See also #11291.\n\n- A function import_statements:\n\n```\n        sage: import_statements(WeylGroup, lazy_attribute)\n        from sage.combinat.root_system.weyl_group import WeylGroup\n        from sage.misc.lazy_attribute import lazy_attribute\n\n        sage: import_statements(WeylGroup, lazy_attribute, lazy=True)\n        from sage.misc.lazy_import import lazy_import\n        lazy_import('sage.combinat.root_system.weyl_group', 'WeylGroup')\n        lazy_import('sage.misc.lazy_attribute', 'lazy_attribute')\n```\n\nTo achieve this, it also extracts a function get_main_globals out of inject_variables.\n\nApply: [attachment: trac_11287-runsnake-nt.patch](https://github.com/sagemath/sage/files/ticket11287/trac_11287-runsnake-nt.patch.gz)\n\nDepends on #11251\n\nCC:  @sagetrac-sage-combinat @saliola @anneschilling @novoselt\n\nKeywords: **runsnake, prun, profiling, days30**\n\nComponent: **performance**\n\nAuthor: **Nicolas M. Thi\u00e9ry**\n\nReviewer: **Franco Saliola, Simon King, Christian Stump**\n\nMerged: **sage-4.7.2.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11287_\n\n",
    "closed_at": "2011-07-27T13:40:58Z",
    "created_at": "2011-05-04T03:28:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/performance",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Interface to runsnake and import_statements",
    "type": "issue",
    "updated_at": "2011-07-27T13:42:06Z",
    "url": "https://github.com/sagemath/sage/issues/11287",
    "user": "https://github.com/nthiery"
}
```
This patch adds two developper tools in sage.misc.dev_tools:

- An interface to the graphical profiler ```runsnake```.
  See e.g. the attached image which shows a graphical profile 
  of listing all the elements of SymmetricGroup(3), and highlights
  the current GAP interface issue with select on certain linux 
  kernels. See also #11291.

- A function import_statements:

```
        sage: import_statements(WeylGroup, lazy_attribute)
        from sage.combinat.root_system.weyl_group import WeylGroup
        from sage.misc.lazy_attribute import lazy_attribute

        sage: import_statements(WeylGroup, lazy_attribute, lazy=True)
        from sage.misc.lazy_import import lazy_import
        lazy_import('sage.combinat.root_system.weyl_group', 'WeylGroup')
        lazy_import('sage.misc.lazy_attribute', 'lazy_attribute')
```

To achieve this, it also extracts a function get_main_globals out of inject_variables.

Apply: [attachment: trac_11287-runsnake-nt.patch](https://github.com/sagemath/sage/files/ticket11287/trac_11287-runsnake-nt.patch.gz)

Depends on #11251

CC:  @sagetrac-sage-combinat @saliola @anneschilling @novoselt

Keywords: **runsnake, prun, profiling, days30**

Component: **performance**

Author: **Nicolas M. Thi√©ry**

Reviewer: **Franco Saliola, Simon King, Christian Stump**

Merged: **sage-4.7.2.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/11287_





---

archive/issue_events_150318.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-04T03:28:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150318"
}
```



---

archive/issue_events_150319.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-04T03:28:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/performance",
    "label_color": "696969",
    "label_name": "performance",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150319"
}
```



---

archive/issue_events_150320.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-04T03:28:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150320"
}
```



---

archive/issue_events_150321.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-04T03:28:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150321"
}
```



---

archive/issue_comments_113165.json:
```json
{
    "body": "Attachment: **[runsnake-screenshot.png](https://github.com/sagemath/sage/files/ticket11287/runsnake-screenshot.png)**\n\nScreen shot of runsnake in action",
    "created_at": "2011-05-04T03:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113165",
    "user": "https://github.com/nthiery"
}
```

Attachment: **[runsnake-screenshot.png](https://github.com/sagemath/sage/files/ticket11287/runsnake-screenshot.png)**

Screen shot of runsnake in action



---

archive/issue_comments_113166.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,3 +20,5 @@\n ```\n \n To achieve this, it also extracts a function get_main_globals out of inject_variables.\n+\n+Apply: [attachment: trac_11287-runsnake-nt.patch](https://github.com/sagemath/sage/files/ticket11287/trac_11287-runsnake-nt.patch.gz)\n``````\n",
    "created_at": "2011-05-04T03:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113166",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,3 +20,5 @@
 ```
 
 To achieve this, it also extracts a function get_main_globals out of inject_variables.
+
+Apply: [attachment: trac_11287-runsnake-nt.patch](https://github.com/sagemath/sage/files/ticket11287/trac_11287-runsnake-nt.patch.gz)
``````




---

archive/issue_events_150322.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-04T03:32:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150322"
}
```



---

archive/issue_comments_113167.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n   See e.g. the attached image which shows a graphical profile \n   of listing all the elements of SymmetricGroup(3), and highlights\n   the current GAP interface issue with select on certain linux \n-  kernels.\n+  kernels. See also #11291.\n \n - A function import_statements:\n \n``````\n",
    "created_at": "2011-05-04T13:57:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113167",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
   See e.g. the attached image which shows a graphical profile 
   of listing all the elements of SymmetricGroup(3), and highlights
   the current GAP interface issue with select on certain linux 
-  kernels.
+  kernels. See also #11291.
 
 - A function import_statements:
 
``````




---

archive/issue_comments_113168.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This patch adds to developper tools in sage.misc.dev_tools:\n+This patch adds two developper tools in sage.misc.dev_tools:\n \n - An interface to the graphical profiler ```runsnake```.\n   See e.g. the attached image which shows a graphical profile \n``````\n",
    "created_at": "2011-05-04T14:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113168",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This patch adds to developper tools in sage.misc.dev_tools:
+This patch adds two developper tools in sage.misc.dev_tools:
 
 - An interface to the graphical profiler ```runsnake```.
   See e.g. the attached image which shows a graphical profile 
``````




---

archive/issue_comments_113169.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAs I use very very heavily runsnake this last mouth, I try your patch as soon as I received the corresponding mail.\n\nApplying the patch (toward the combinat queue), runsnake works well on my machine in sage. (I had to remove my old runsnake function in .sage/init.sage and re-install RunSankeRun vis easy-install).\n\nUbuntu 04-11 32bits on a MacBook4,1. Not a review, just a test and some info...\n\n+1 to get the feature in Sage!",
    "created_at": "2011-05-04T14:58:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113169",
    "user": "https://github.com/sagetrac-nborie"
}
```

<div id="comment:4" align="right">comment:4</div>

As I use very very heavily runsnake this last mouth, I try your patch as soon as I received the corresponding mail.

Applying the patch (toward the combinat queue), runsnake works well on my machine in sage. (I had to remove my old runsnake function in .sage/init.sage and re-install RunSankeRun vis easy-install).

Ubuntu 04-11 32bits on a MacBook4,1. Not a review, just a test and some info...

+1 to get the feature in Sage!



---

archive/issue_comments_113170.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n**Runsnake**\n\nCan you give at least a slight hint how to use runsnake? I used easy_install inside a Sage shell, but apparently something (wxPython?) is missing. I thought easy_install is supposed to take care of dependencies.\n\nAlso, I think you should give examples how to use the profiler from within Sage. From runsnake's documentation, I guess one does something like\n\n```\nsage: import cProfile\nsage: cProfile.run'L=[singular(i)==gap(i)==i+1 for i in range(2000)]'\ncProfile.run     cProfile.runctx  \nsage: cProfile.runctx('L=[singular(i)==gap(i)==i+1 for i in range(2000)]', globals(),locals(), filename=\"OpenGLContext.profile\" )\n```\nbut what afterwards?\n\nDoes one need to leave Sage, start a Sage shell, and then open `OpenGLContext.profile` by `runsnake OpenGLContext.profile`? (That step did not work for me, it seems I need to get wx) \n\nCan one use it without leaving Sage?\n\n**import_statements**\n\nThat tool seems useful. I doubt, however, that it is robust enough. I see that you ask for the `__module__` attribute. It is not always present, at least for methods or for extension classes that forgot to initialise the category:\n\n```\nsage: from sage.structure.element import Element\nsage: Element.parent.__module__\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n\n/mnt/local/king/SAGE/sage-4.7.alpha5/<ipython console> in <module>()\n\nAttributeError: 'method_descriptor' object has no attribute '__module__'\nsage: P.<x,y> = QQ[]\nsage: P.__module__\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n\n/mnt/local/king/SAGE/broken/devel/sage-main/<ipython console> in <module>()\n\n/mnt/local/king/SAGE/broken/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (sage/structure/parent.c:5618)()\n\n/mnt/local/king/SAGE/broken/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.raise_attribute_error (sage/structure/parent.c:2636)()\n\nAttributeError: 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomialRing_libsingular' object has no attribute '__module__'\n```\n\nWorse, the `__module__` attribute can be misleading. Unfortunately, it is particularly misleading if you initialise the category of a parent:\n\n```\nsage: P._is_category_initialized()\nFalse\nsage: P._init_category_(Algebras(QQ))\nsage: P.__module__\n'sage.categories.algebras'\nsage: import_statements(P)\nfrom sage.categories.category import CommutativeAlgebras.parent_class\n```\nThat import statement yields a syntax error.\n\nAlso, I recall that sometimes the `__module__` attribute is `None` (but I can't remember a typical example).\n\nI would recommend to use the tools from sage.misc.sageinspect, but only after applying #9976, which considerably extends the capabilities of finding source files (here: sage/rings/polynomial/multi_polynomial_libsingular.pyx), from which one can deduce the import statement.\n\nI am not sure if this is enough to make it \"needs work\", though.\n\nCheers,\nSimon",
    "created_at": "2011-05-04T15:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113170",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">comment:5</div>

**Runsnake**

Can you give at least a slight hint how to use runsnake? I used easy_install inside a Sage shell, but apparently something (wxPython?) is missing. I thought easy_install is supposed to take care of dependencies.

Also, I think you should give examples how to use the profiler from within Sage. From runsnake's documentation, I guess one does something like

```
sage: import cProfile
sage: cProfile.run'L=[singular(i)==gap(i)==i+1 for i in range(2000)]'
cProfile.run     cProfile.runctx  
sage: cProfile.runctx('L=[singular(i)==gap(i)==i+1 for i in range(2000)]', globals(),locals(), filename="OpenGLContext.profile" )
```
but what afterwards?

Does one need to leave Sage, start a Sage shell, and then open `OpenGLContext.profile` by `runsnake OpenGLContext.profile`? (That step did not work for me, it seems I need to get wx) 

Can one use it without leaving Sage?

**import_statements**

That tool seems useful. I doubt, however, that it is robust enough. I see that you ask for the `__module__` attribute. It is not always present, at least for methods or for extension classes that forgot to initialise the category:

```
sage: from sage.structure.element import Element
sage: Element.parent.__module__
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/mnt/local/king/SAGE/sage-4.7.alpha5/<ipython console> in <module>()

AttributeError: 'method_descriptor' object has no attribute '__module__'
sage: P.<x,y> = QQ[]
sage: P.__module__
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/mnt/local/king/SAGE/broken/devel/sage-main/<ipython console> in <module>()

/mnt/local/king/SAGE/broken/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (sage/structure/parent.c:5618)()

/mnt/local/king/SAGE/broken/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.raise_attribute_error (sage/structure/parent.c:2636)()

AttributeError: 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomialRing_libsingular' object has no attribute '__module__'
```

Worse, the `__module__` attribute can be misleading. Unfortunately, it is particularly misleading if you initialise the category of a parent:

```
sage: P._is_category_initialized()
False
sage: P._init_category_(Algebras(QQ))
sage: P.__module__
'sage.categories.algebras'
sage: import_statements(P)
from sage.categories.category import CommutativeAlgebras.parent_class
```
That import statement yields a syntax error.

Also, I recall that sometimes the `__module__` attribute is `None` (but I can't remember a typical example).

I would recommend to use the tools from sage.misc.sageinspect, but only after applying #9976, which considerably extends the capabilities of finding source files (here: sage/rings/polynomial/multi_polynomial_libsingular.pyx), from which one can deduce the import statement.

I am not sure if this is enough to make it "needs work", though.

Cheers,
Simon



---

archive/issue_comments_113171.json:
```json
{
    "body": "Changed reviewer from **Franco Saliola** to **Franco Saliola, Simon King**",
    "created_at": "2011-05-04T15:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113171",
    "user": "https://github.com/simon-king-jena"
}
```

Changed reviewer from **Franco Saliola** to **Franco Saliola, Simon King**



---

archive/issue_comments_113172.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHello! I just posted a reviewer's patch that addresses some documentation\nissues. The docstrings for the Profiler module needed to be fixed so that they\nrendered correctly in the reference manual.\n\nNote that this patch depends on #11251, since you are using the new todo\ndirective that is implemented in that ticket.\n\nI am willing to give this a positive review, provided my changes are\nacceptable.\n\nLet me try to address Simon's comments:\n\nReplying to [@simon-king-jena](#comment:5):\n> **Runsnake**\n> \n> Can you give at least a slight hint how to use runsnake? \n\nThere is an example on how to use it provided in the\ndocumentation:\n\n```\nEXAMPLES::\n\n    sage: runsnake(\"list(SymmetricGroup(3))\")     # optional - requires runsnake\n```\nThe expected behaviour is that a window pops up (see the screenshot).\n\n> Does one need to leave Sage, start a Sage shell, and then open `OpenGLContext.profile` by `runsnake OpenGLContext.profile`? (That step did not work for me, it seems I need to get wx) \n> \n> Can one use it without leaving Sage?\n\nYes. One needs only run the function in the example above. This function\ninitializes the profiler and (doing essentially what you wrote above),\nand then launches runsnake.\n\n> **import_statements**\n> \n> That tool seems useful.\n\nAgreed. It looks very nice.\n\n> Worse, the `__module__` attribute can be misleading. Unfortunately, it is particularly misleading if you initialise the category of a parent:\n\nThis issue is documented in a \"todo\" block, but this todo block does not\nappear in the command-line view of the documentation. So that's probably why\nyou didn't see it (it does appear if you ask for source\n`import_statements??`). This is not a problem with this ticket though, but\nwith the todo directive; see #11251.\n\n> I would recommend to use the tools from sage.misc.sageinspect, but only after applying #9976, which considerably extends the capabilities of finding source files (here: sage/rings/polynomial/multi_polynomial_libsingular.pyx), from which one can deduce the import statement.\n\nPerhaps this might be a good idea and can address the issue that the\n`__module__` attribute is not always present. I'll leave it to Nicolas to\ncomment on this.",
    "created_at": "2011-05-04T16:15:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113172",
    "user": "https://github.com/saliola"
}
```

<div id="comment:6" align="right">comment:6</div>

Hello! I just posted a reviewer's patch that addresses some documentation
issues. The docstrings for the Profiler module needed to be fixed so that they
rendered correctly in the reference manual.

Note that this patch depends on #11251, since you are using the new todo
directive that is implemented in that ticket.

I am willing to give this a positive review, provided my changes are
acceptable.

Let me try to address Simon's comments:

Replying to [@simon-king-jena](#comment:5):
> **Runsnake**
> 
> Can you give at least a slight hint how to use runsnake? 

There is an example on how to use it provided in the
documentation:

```
EXAMPLES::

    sage: runsnake("list(SymmetricGroup(3))")     # optional - requires runsnake
```
The expected behaviour is that a window pops up (see the screenshot).

> Does one need to leave Sage, start a Sage shell, and then open `OpenGLContext.profile` by `runsnake OpenGLContext.profile`? (That step did not work for me, it seems I need to get wx) 
> 
> Can one use it without leaving Sage?

Yes. One needs only run the function in the example above. This function
initializes the profiler and (doing essentially what you wrote above),
and then launches runsnake.

> **import_statements**
> 
> That tool seems useful.

Agreed. It looks very nice.

> Worse, the `__module__` attribute can be misleading. Unfortunately, it is particularly misleading if you initialise the category of a parent:

This issue is documented in a "todo" block, but this todo block does not
appear in the command-line view of the documentation. So that's probably why
you didn't see it (it does appear if you ask for source
`import_statements??`). This is not a problem with this ticket though, but
with the todo directive; see #11251.

> I would recommend to use the tools from sage.misc.sageinspect, but only after applying #9976, which considerably extends the capabilities of finding source files (here: sage/rings/polynomial/multi_polynomial_libsingular.pyx), from which one can deduce the import statement.

Perhaps this might be a good idea and can address the issue that the
`__module__` attribute is not always present. I'll leave it to Nicolas to
comment on this.



---

archive/issue_comments_113173.json:
```json
{
    "body": "Changed keywords from **runsnake, prun, profiling** to **runsnake, prun, profiling, days30**",
    "created_at": "2011-05-05T01:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113173",
    "user": "https://github.com/saliola"
}
```

Changed keywords from **runsnake, prun, profiling** to **runsnake, prun, profiling, days30**



---

archive/issue_comments_113174.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@saliola](#comment:6):\n> Hello! I just posted a reviewer's patch that addresses some documentation\n> issues. The docstrings for the Profiler module needed to be fixed so that they\n> rendered correctly in the reference manual.\n> ...\n> I am willing to give this a positive review, provided my changes are\n> acceptable.\n\nPositive review on your review patch, assuming the buildbot goes green.\n\n> > I would recommend to use the tools from sage.misc.sageinspect, but only after applying #9976, which considerably extends the capabilities of finding source files (here: sage/rings/polynomial/multi_polynomial_libsingular.pyx), from which one can deduce the import statement.\n\n>\n> Perhaps this might be a good idea and can address the issue that the\n> `__module__` attribute is not always present. I'll leave it to\n> Nicolas to comment on this.\n\nIf you know how to improve this on top of your head, please go ahead!\nOtherwise, I'll vote for just pushing this as is, and fix it later. It\nis annoying if this method is not robust, but not dangerous, and we\nwant to let it be used to get feedback.\n\nCheers,\n\t\t\tNicolas",
    "created_at": "2011-05-05T02:08:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113174",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@saliola](#comment:6):
> Hello! I just posted a reviewer's patch that addresses some documentation
> issues. The docstrings for the Profiler module needed to be fixed so that they
> rendered correctly in the reference manual.
> ...
> I am willing to give this a positive review, provided my changes are
> acceptable.

Positive review on your review patch, assuming the buildbot goes green.

> > I would recommend to use the tools from sage.misc.sageinspect, but only after applying #9976, which considerably extends the capabilities of finding source files (here: sage/rings/polynomial/multi_polynomial_libsingular.pyx), from which one can deduce the import statement.

>
> Perhaps this might be a good idea and can address the issue that the
> `__module__` attribute is not always present. I'll leave it to
> Nicolas to comment on this.

If you know how to improve this on top of your head, please go ahead!
Otherwise, I'll vote for just pushing this as is, and fix it later. It
is annoying if this method is not robust, but not dangerous, and we
want to let it be used to get feedback.

Cheers,
			Nicolas



---

archive/issue_comments_113175.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI thought that the improvements to sageinspect from #9976 would make things robust enough, so that sage_getfile could be used to extract the information on where to import stuff from.\n\nBut with or without #9976, we have\n\n```\nsage: P.<x,y> = QQ[]\nsage: P??\nError getting source: could not find class definition\n...\nDocstring [source file open failed]:\n    File: sage/rings/polynomial/multi_polynomial_libsingular.pyx (starting\n    at line 229)\n    \n       Construct a multivariate polynomial ring subject to the following\n       conditions:\n    \n       INPUT:\n    \n       * ``base_ring`` - base ring (must be either GF(q), ZZ, ZZ/nZZ,\n            QQ or absolute number field)\n    \n       * ``n`` - number of variables (must be at least 1)\n    \n       * ``names`` - names of ring variables, may be string of list/tuple\n    \n       * ``order`` - term order (default: ``degrevlex``)\n```\n\nThe \"Error getting source: could not find class definition\" is annoying. Note that the doc string above gives the correct location and line number! So, sage.misc._extract_embedded_position should be able to do the job, but it isn't.\n\nI think improving the introspection further should be on a different ticket, on top of #9976.\n\nCheers,\nSimon",
    "created_at": "2011-05-05T07:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113175",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:9" align="right">comment:9</div>

I thought that the improvements to sageinspect from #9976 would make things robust enough, so that sage_getfile could be used to extract the information on where to import stuff from.

But with or without #9976, we have

```
sage: P.<x,y> = QQ[]
sage: P??
Error getting source: could not find class definition
...
Docstring [source file open failed]:
    File: sage/rings/polynomial/multi_polynomial_libsingular.pyx (starting
    at line 229)
    
       Construct a multivariate polynomial ring subject to the following
       conditions:
    
       INPUT:
    
       * ``base_ring`` - base ring (must be either GF(q), ZZ, ZZ/nZZ,
            QQ or absolute number field)
    
       * ``n`` - number of variables (must be at least 1)
    
       * ``names`` - names of ring variables, may be string of list/tuple
    
       * ``order`` - term order (default: ``degrevlex``)
```

The "Error getting source: could not find class definition" is annoying. Note that the doc string above gives the correct location and line number! So, sage.misc._extract_embedded_position should be able to do the job, but it isn't.

I think improving the introspection further should be on a different ticket, on top of #9976.

Cheers,
Simon



---

archive/issue_comments_113176.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI just opened #11298 (ready for review).\n\nWith it, we obtain:\n\n```\nsage: from sage.misc.sageinspect import sage_getsourcelines, sage_getfile\nsage: P.<x,y> = QQ[]\nsage: P._init_category_(Algebras(QQ))\nsage: P.__module__\n'sage.categories.algebras'\nsage: sage_getfile(P)\n'/mnt/local/king/SAGE/sage-4.7.alpha5/devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx'\nsage: lines, lineno = sage_getsourcelines(P)\nsage: lines[0]\n'cdef class MPolynomialRing_libsingular(MPolynomialRing_generic):\\n'\n```\n\nIt should be easy to extract the module name from the file name (here: `sage.rings.polynomial.multi_polynomial_libsingular`, not `sage.categories.algebras`). Moreover, it should be easy to extract the correct class name from the first line of the source code (`ClassName`, not `ClassName_with_category` or `SomeCategory.parent_class`, which would not work in an import statement).\n\nCheers,\nSimon",
    "created_at": "2011-05-05T09:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113176",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">comment:10</div>

I just opened #11298 (ready for review).

With it, we obtain:

```
sage: from sage.misc.sageinspect import sage_getsourcelines, sage_getfile
sage: P.<x,y> = QQ[]
sage: P._init_category_(Algebras(QQ))
sage: P.__module__
'sage.categories.algebras'
sage: sage_getfile(P)
'/mnt/local/king/SAGE/sage-4.7.alpha5/devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx'
sage: lines, lineno = sage_getsourcelines(P)
sage: lines[0]
'cdef class MPolynomialRing_libsingular(MPolynomialRing_generic):\n'
```

It should be easy to extract the module name from the file name (here: `sage.rings.polynomial.multi_polynomial_libsingular`, not `sage.categories.algebras`). Moreover, it should be easy to extract the correct class name from the first line of the source code (`ClassName`, not `ClassName_with_category` or `SomeCategory.parent_class`, which would not work in an import statement).

Cheers,
Simon



---

archive/issue_comments_113177.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n## Ubuntu/Debian `RunSnakeRun` install\n\nAlong with a few missteps, this is what I needed to do to have `RunSnakeRun` on an Ubuntu Lucid system.  Presumably this will work for other Debian-based distributions.\n\nwxPython\n\nFollow instructions at:\n\nhttp://wiki.wxpython.org/InstallingOnUbuntuOrDebian\n\nPython easy_install setup program, pstats profiling module, `RunSnakeRun` itself\n\n```\nsudo apt-get install python-setuptools python-profiler\neasy_install RunSnakeRun\n```",
    "created_at": "2011-05-05T14:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113177",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:11" align="right">comment:11</div>

## Ubuntu/Debian `RunSnakeRun` install

Along with a few missteps, this is what I needed to do to have `RunSnakeRun` on an Ubuntu Lucid system.  Presumably this will work for other Debian-based distributions.

wxPython

Follow instructions at:

http://wiki.wxpython.org/InstallingOnUbuntuOrDebian

Python easy_install setup program, pstats profiling module, `RunSnakeRun` itself

```
sudo apt-get install python-setuptools python-profiler
easy_install RunSnakeRun
```



---

archive/issue_comments_113178.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@rbeezer](#comment:11):\n\n## Ubuntu/Debian `RunSnakeRun` install, part 2\n\nThere are better instructions in the doc string.  wxPython is an Ubuntu package (python-wxgtk2.8).",
    "created_at": "2011-05-05T20:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113178",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@rbeezer](#comment:11):

## Ubuntu/Debian `RunSnakeRun` install, part 2

There are better instructions in the doc string.  wxPython is an Ubuntu package (python-wxgtk2.8).



---

archive/issue_comments_113179.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@rbeezer](#comment:12):\n> \n> There are better instructions in the doc string.  wxPython is an Ubuntu package (python-wxgtk2.8).\n\nOK, but my personal problem is that I am not root for the computer in my office. So, installing an Ubuntu package seems non-trivial to me.\n\nI tried installing wxpython from sources and also tried the experimental wxpython spkg. In both cases, the problem was that gtk+ has not been found, although it is globally installed. The sysadmin tries to help me, but I don't know if it will work eventually.",
    "created_at": "2011-05-05T21:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113179",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@rbeezer](#comment:12):
> 
> There are better instructions in the doc string.  wxPython is an Ubuntu package (python-wxgtk2.8).

OK, but my personal problem is that I am not root for the computer in my office. So, installing an Ubuntu package seems non-trivial to me.

I tried installing wxpython from sources and also tried the experimental wxpython spkg. In both cases, the problem was that gtk+ has not been found, although it is globally installed. The sysadmin tries to help me, but I don't know if it will work eventually.



---

archive/issue_comments_113180.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nCould it be that the Sage shell messes up? Namely, I downloaded `wxPython` sources. When I do `./configure` in a Python shell, it complains about not finding gtk. If I do it on a usual shell, it works. I am now trying make und make install outside the python shell. I hope that it suffices to have wxpython in the path, i.e., it is not assumed that it was installed in the Sage scope?\n\nBest regards,\nSimon",
    "created_at": "2011-05-06T06:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113180",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:14" align="right">comment:14</div>

Could it be that the Sage shell messes up? Namely, I downloaded `wxPython` sources. When I do `./configure` in a Python shell, it complains about not finding gtk. If I do it on a usual shell, it works. I am now trying make und make install outside the python shell. I hope that it suffices to have wxpython in the path, i.e., it is not assumed that it was installed in the Sage scope?

Best regards,
Simon



---

archive/issue_comments_113181.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@simon-king-jena](#comment:14):\n> Could it be that the Sage shell messes up? Namely, I downloaded `wxPython` sources. When I do `./configure` in a Python shell, \n\nI meant to write \"Sage shell\".",
    "created_at": "2011-05-06T06:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113181",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@simon-king-jena](#comment:14):
> Could it be that the Sage shell messes up? Namely, I downloaded `wxPython` sources. When I do `./configure` in a Python shell, 

I meant to write "Sage shell".



---

archive/issue_comments_113182.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nUnfortunately, after doing easy_install RunSnakeRun, things still do not work for me:\n\n```\n\nsage: runsnake(\"list(SymmetricGroup(3))\")\nsage: Traceback (most recent call last):\n  File \"/mnt/local/king/SAGE/sage-4.7.alpha5/local/bin/runsnake\", line 5, in <module>\n    from pkg_resources import load_entry_point\n  File \"/usr/lib/python2.6/dist-packages/pkg_resources.py\", line 2671, in <module>\n    working_set.require(__requires__)\n  File \"/usr/lib/python2.6/dist-packages/pkg_resources.py\", line 654, in require\n    needed = self.resolve(parse_requirements(requirements))\n  File \"/usr/lib/python2.6/dist-packages/pkg_resources.py\", line 552, in resolve\n    raise DistributionNotFound(req)\npkg_resources.DistributionNotFound: RunSnakeRun==2.0.1b6\n```\n\nI did not do `sudo apt-get install python-setuptools python-profiler`, as I am not root. Is that the missing bit?",
    "created_at": "2011-05-06T06:39:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113182",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">comment:16</div>

Unfortunately, after doing easy_install RunSnakeRun, things still do not work for me:

```

sage: runsnake("list(SymmetricGroup(3))")
sage: Traceback (most recent call last):
  File "/mnt/local/king/SAGE/sage-4.7.alpha5/local/bin/runsnake", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/usr/lib/python2.6/dist-packages/pkg_resources.py", line 2671, in <module>
    working_set.require(__requires__)
  File "/usr/lib/python2.6/dist-packages/pkg_resources.py", line 654, in require
    needed = self.resolve(parse_requirements(requirements))
  File "/usr/lib/python2.6/dist-packages/pkg_resources.py", line 552, in resolve
    raise DistributionNotFound(req)
pkg_resources.DistributionNotFound: RunSnakeRun==2.0.1b6
```

I did not do `sudo apt-get install python-setuptools python-profiler`, as I am not root. Is that the missing bit?



---

archive/issue_comments_113183.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nPS: If I leave sage, but remain in a sage shell, and try `runsnake OpenGLContext.profile` then the error says `ImportError: No module named wx`. So, apparently the problem is that I really need to install wxpython inside a Sage shell, but I can't since the Sage shell can not find stuff that is known to the rest of the world. End of the story. I have a lecture to prepare.",
    "created_at": "2011-05-06T06:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113183",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:17" align="right">comment:17</div>

PS: If I leave sage, but remain in a sage shell, and try `runsnake OpenGLContext.profile` then the error says `ImportError: No module named wx`. So, apparently the problem is that I really need to install wxpython inside a Sage shell, but I can't since the Sage shell can not find stuff that is known to the rest of the world. End of the story. I have a lecture to prepare.



---

archive/issue_comments_113184.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHi, I pushed a review concerning two minor things I ran into:\n\non the sage command line, spaces do not cause trouble, but the profiler doesn't like them:\n\n```\nsage: runsnake(' 3')\n...\nIndentationError: unexpected indent (<string>, line 1)\n```\n\nNow, spaces are deleted (or does anyone see problems occurring from that?).\n\nThe second is that sage accepts \"^\", while python doesn't, so these are replaced by \"**\".\n\n```\nsage: runsnake('QQ(3)^2')\n...\nRuntimeError: Use ** for exponentiation, not '^', which means xor\nin Python, and has the wrong precedence.\n```\n\nYou can fold the changes if you like, or remove them otherwise...\n\nBtw: the patch doesn't apply on a plain 4.6.2.\n\nBest, Christian",
    "created_at": "2011-05-08T14:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113184",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:18" align="right">comment:18</div>

Hi, I pushed a review concerning two minor things I ran into:

on the sage command line, spaces do not cause trouble, but the profiler doesn't like them:

```
sage: runsnake(' 3')
...
IndentationError: unexpected indent (<string>, line 1)
```

Now, spaces are deleted (or does anyone see problems occurring from that?).

The second is that sage accepts "^", while python doesn't, so these are replaced by "**".

```
sage: runsnake('QQ(3)^2')
...
RuntimeError: Use ** for exponentiation, not '^', which means xor
in Python, and has the wrong precedence.
```

You can fold the changes if you like, or remove them otherwise...

Btw: the patch doesn't apply on a plain 4.6.2.

Best, Christian



---

archive/issue_comments_113185.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@stumpc5](#comment:18):\n> The second is that sage accepts \"^\", while python doesn't, so these are replaced by \"**\".\n\nWhat about calling the Sage preparser, instead?",
    "created_at": "2011-05-08T15:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113185",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@stumpc5](#comment:18):
> The second is that sage accepts "^", while python doesn't, so these are replaced by "**".

What about calling the Sage preparser, instead?



---

archive/issue_comments_113186.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThanks Christian for your improvements.\n\nReplying to [@simon-king-jena](#comment:19):\n> Replying to [@stumpc5](#comment:18):\n> > The second is that sage accepts \"^\", while python doesn't, so these are replaced by \"**\".\n\n> \n> What about calling the Sage preparser, instead?\n\n+1.\n\nChristian: I won't be able to work on this before a couple day. Could you give it a shot?\n\nAlso, I would tend to only strip spaces before and after the command; otherwise, one might inadvertently screw up spaces in an embedded string.\n\nCheers,",
    "created_at": "2011-05-09T22:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113186",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:20" align="right">comment:20</div>

Thanks Christian for your improvements.

Replying to [@simon-king-jena](#comment:19):
> Replying to [@stumpc5](#comment:18):
> > The second is that sage accepts "^", while python doesn't, so these are replaced by "**".

> 
> What about calling the Sage preparser, instead?

+1.

Christian: I won't be able to work on this before a couple day. Could you give it a shot?

Also, I would tend to only strip spaces before and after the command; otherwise, one might inadvertently screw up spaces in an embedded string.

Cheers,



---

archive/issue_comments_113187.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nMacOS users (Anne!): The runsnake run author was kind enough to add a workaround in runsnake to make it work out of the box on MacOS. He would like to get it tested. Could you try out the attached devel version of runsnake, and see if:\n\n```\n    tar zxvf runsnakerun-2.0.1-devel.tgz\n    cd runsnakerun-2.0.1-devel\n    sudo python setup.py install\n    runsnake\n```\n\ndoes the job for you?\n\nAnne: you may want to first remove the current runsnake scripts from your machine; if I recall correctly, they are in /usr/local/bin/runsnake and runsnake32bit.",
    "created_at": "2011-05-09T22:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113187",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:21" align="right">comment:21</div>

MacOS users (Anne!): The runsnake run author was kind enough to add a workaround in runsnake to make it work out of the box on MacOS. He would like to get it tested. Could you try out the attached devel version of runsnake, and see if:

```
    tar zxvf runsnakerun-2.0.1-devel.tgz
    cd runsnakerun-2.0.1-devel
    sudo python setup.py install
    runsnake
```

does the job for you?

Anne: you may want to first remove the current runsnake scripts from your machine; if I recall correctly, they are in /usr/local/bin/runsnake and runsnake32bit.



---

archive/issue_events_150323.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-09T22:15:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150323"
}
```



---

archive/issue_events_150324.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-09T22:15:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150324"
}
```



---

archive/issue_comments_113188.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@simon-king-jena](#comment:17):\n> PS: If I leave sage, but remain in a sage shell, and try `runsnake OpenGLContext.profile` then the error says `ImportError: No module named wx`. So, apparently the problem is that I really need to install wxpython inside a Sage shell, but I can't since the Sage shell can not find stuff that is known to the rest of the world. End of the story. I have a lecture to prepare.\n\nThe problem is that the Sage shell sets PYTHONPATH and PYTHONLIB. You may try to work around this by using\n\n```\n     python -E runsnake ...\n```\n\nwhich tells Python to ignore those variables. The runsnake command inside Sage does just that, for precisely that reason.",
    "created_at": "2011-05-09T22:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113188",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@simon-king-jena](#comment:17):
> PS: If I leave sage, but remain in a sage shell, and try `runsnake OpenGLContext.profile` then the error says `ImportError: No module named wx`. So, apparently the problem is that I really need to install wxpython inside a Sage shell, but I can't since the Sage shell can not find stuff that is known to the rest of the world. End of the story. I have a lecture to prepare.

The problem is that the Sage shell sets PYTHONPATH and PYTHONLIB. You may try to work around this by using

```
     python -E runsnake ...
```

which tells Python to ignore those variables. The runsnake command inside Sage does just that, for precisely that reason.



---

archive/issue_comments_113189.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nthiery](#comment:21):\n> MacOS users (Anne!): The runsnake run author was kind enough to add a workaround in runsnake to make it work out of the box on MacOS. He would like to get it tested. Could you try out the attached devel version of runsnake, and see if:\n> \n> ```\n>     tar zxvf runsnakerun-2.0.1-devel.tgz\n>     cd runsnakerun-2.0.1-devel\n>     sudo python setup.py install\n>     runsnake\n> ```\n> \n> does the job for you?\n> \n> Anne: you may want to first remove the current runsnake scripts from your machine; if I recall correctly, they are in /usr/local/bin/runsnake and runsnake32bit.\n\n\nWhere is runsnakerun-2.0.1-devel.tgz attached?\n\nCheers,\n\nAnne",
    "created_at": "2011-05-10T18:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113189",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nthiery](#comment:21):
> MacOS users (Anne!): The runsnake run author was kind enough to add a workaround in runsnake to make it work out of the box on MacOS. He would like to get it tested. Could you try out the attached devel version of runsnake, and see if:
> 
> ```
>     tar zxvf runsnakerun-2.0.1-devel.tgz
>     cd runsnakerun-2.0.1-devel
>     sudo python setup.py install
>     runsnake
> ```
> 
> does the job for you?
> 
> Anne: you may want to first remove the current runsnake scripts from your machine; if I recall correctly, they are in /usr/local/bin/runsnake and runsnake32bit.


Where is runsnakerun-2.0.1-devel.tgz attached?

Cheers,

Anne



---

archive/issue_comments_113190.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> Where is runsnakerun-2.0.1-devel.tgz attached?\n\nAh shoot, I had not noticed that my attachement was too big and had\nbeen refused by trac. Ok, there it is:\n\nhttp://sage.math.washington.edu/home/nthiery/runsnakerun-2.0.1-devel.tgz\n\nCheers,\n                     Nicolas",
    "created_at": "2011-05-10T21:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113190",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:24" align="right">comment:24</div>

> Where is runsnakerun-2.0.1-devel.tgz attached?

Ah shoot, I had not noticed that my attachement was too big and had
been refused by trac. Ok, there it is:

http://sage.math.washington.edu/home/nthiery/runsnakerun-2.0.1-devel.tgz

Cheers,
                     Nicolas



---

archive/issue_comments_113191.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@nthiery](#comment:21):\n\n> MacOS users (Anne!): The runsnake run author was kind enough to add a workaround in runsnake to make it work out of the box on MacOS. He would like to get it tested. Could you try out the attached devel version of runsnake, and see if:\n\nI gave it a try, and have some comments.\n\n1. The patch does not apply cleanly on top of sage-4.7.rc1; in the file `doc/en/reference/misc.rst` there is a conflict because of `classgraph`. So your patch needs a very trivial rebase.\n\n2. I checked and it seems that wxPython is already installed on two different Mac OS X systems I tested. Is this a standard python library on Mac OSX? So there might be no need to install it.\n\n3. Just running runsnake does not work:\n\n```\nTraceback (most recent call last):\n  File \"/usr/local/bin/runsnake\", line 8, in <module>\n    load_entry_point('RunSnakeRun==2.0.1', 'gui_scripts', 'runsnake')()\n  File \"/Library/Python/2.6/site-packages/RunSnakeRun-2.0.1-py2.6.egg/runsnakerun/macshim.py\", line 7, in macshim\n    env={\"VERSIONER_PYTHON_PREFER_32_BIT\":\"yes\"}\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/subprocess.py\", line 444, in call\n    return Popen(*popenargs, **kwargs).wait()\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/subprocess.py\", line 595, in __init__\n    errread, errwrite)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/subprocess.py\", line 1106, in _execute_child\n    raise child_exception\nOSError: [Errno 2] No such file or directory\n```\nSo I started poking around in `macshim.py`. It seems the problem is with the env dictionary\n\n```\n    env={\"VERSIONER_PYTHON_PREFER_32_BIT\":\"yes\"}\n```\nThe documentation for the subprocess module says that env must provide any variables required for the program to execute. This includes the path; so one either needs to provide the path to runsnake32 as an environment variable, or just give the complete path to runsnake32. Here is a modified version of `macshim.py` that works for me:\n\n```\ndef macshim():\n    \"\"\"Shim to run 32-bit on 64-bit mac as a sub-process\"\"\"\n    import subprocess, sys\n    subprocess.call([\n        sys.argv[0]+'32'\n    ]+sys.argv[1:],\n        env={\"VERSIONER_PYTHON_PREFER_32_BIT\":\"yes\"}\n    )\n```",
    "created_at": "2011-05-11T00:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113191",
    "user": "https://github.com/saliola"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@nthiery](#comment:21):

> MacOS users (Anne!): The runsnake run author was kind enough to add a workaround in runsnake to make it work out of the box on MacOS. He would like to get it tested. Could you try out the attached devel version of runsnake, and see if:

I gave it a try, and have some comments.

1. The patch does not apply cleanly on top of sage-4.7.rc1; in the file `doc/en/reference/misc.rst` there is a conflict because of `classgraph`. So your patch needs a very trivial rebase.

2. I checked and it seems that wxPython is already installed on two different Mac OS X systems I tested. Is this a standard python library on Mac OSX? So there might be no need to install it.

3. Just running runsnake does not work:

```
Traceback (most recent call last):
  File "/usr/local/bin/runsnake", line 8, in <module>
    load_entry_point('RunSnakeRun==2.0.1', 'gui_scripts', 'runsnake')()
  File "/Library/Python/2.6/site-packages/RunSnakeRun-2.0.1-py2.6.egg/runsnakerun/macshim.py", line 7, in macshim
    env={"VERSIONER_PYTHON_PREFER_32_BIT":"yes"}
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/subprocess.py", line 444, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/subprocess.py", line 595, in __init__
    errread, errwrite)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/subprocess.py", line 1106, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
```
So I started poking around in `macshim.py`. It seems the problem is with the env dictionary

```
    env={"VERSIONER_PYTHON_PREFER_32_BIT":"yes"}
```
The documentation for the subprocess module says that env must provide any variables required for the program to execute. This includes the path; so one either needs to provide the path to runsnake32 as an environment variable, or just give the complete path to runsnake32. Here is a modified version of `macshim.py` that works for me:

```
def macshim():
    """Shim to run 32-bit on 64-bit mac as a sub-process"""
    import subprocess, sys
    subprocess.call([
        sys.argv[0]+'32'
    ]+sys.argv[1:],
        env={"VERSIONER_PYTHON_PREFER_32_BIT":"yes"}
    )
```



---

archive/issue_comments_113192.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@saliola](#comment:25):\n> Replying to [@nthiery](#comment:21):\n> I gave it a try, and have some comments.\n> \n> 1. The patch does not apply cleanly on top of sage-4.7.rc1; in the file `doc/en/reference/misc.rst` there is a conflict because of `classgraph`. So your patch needs a very trivial rebase.\n\nIt depends on #11108 which is already merged in 4.7.1. I added this in the dependency list.\n\n> \n> 2. I checked and it seems that wxPython is already installed on two different Mac OS X systems I tested. Is this a standard python library on Mac OSX? So there might be no need to install it.\n\nGood to know.\n\n> 3. Just running runsnake does not work:\n\nThanks. I'll transmit this info to the runsnake developer!",
    "created_at": "2011-05-11T08:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113192",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@saliola](#comment:25):
> Replying to [@nthiery](#comment:21):
> I gave it a try, and have some comments.
> 
> 1. The patch does not apply cleanly on top of sage-4.7.rc1; in the file `doc/en/reference/misc.rst` there is a conflict because of `classgraph`. So your patch needs a very trivial rebase.

It depends on #11108 which is already merged in 4.7.1. I added this in the dependency list.

> 
> 2. I checked and it seems that wxPython is already installed on two different Mac OS X systems I tested. Is this a standard python library on Mac OSX? So there might be no need to install it.

Good to know.

> 3. Just running runsnake does not work:

Thanks. I'll transmit this info to the runsnake developer!



---

archive/issue_comments_113193.json:
```json
{
    "body": "Dependencies: **#11108**",
    "created_at": "2011-05-11T08:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113193",
    "user": "https://github.com/nthiery"
}
```

Dependencies: **#11108**



---

archive/issue_comments_113194.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHi Franco,\n\n> > 3. Just running runsnake does not work:\n\n> \n> Thanks. I'll transmit this info to the runsnake developer!\n\nMike just updated runsnake using your suggestion. I updated accordingly:\n\nhttp://sage.math.washington.edu/home/nthiery/runsnakerun-2.0.1-devel.tgz\n\nFranco: please check!\n\nAnne: you may want to give it another try. I don't understand why the runsnake command did not get installed in your previous attempt though.",
    "created_at": "2011-05-12T07:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113194",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:28" align="right">comment:28</div>

Hi Franco,

> > 3. Just running runsnake does not work:

> 
> Thanks. I'll transmit this info to the runsnake developer!

Mike just updated runsnake using your suggestion. I updated accordingly:

http://sage.math.washington.edu/home/nthiery/runsnakerun-2.0.1-devel.tgz

Franco: please check!

Anne: you may want to give it another try. I don't understand why the runsnake command did not get installed in your previous attempt though.



---

archive/issue_comments_113195.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI get the same problem as yesterday:\n\n```\nd238:runsnakerun-2.0.1-devel anne$ sudo python setup.py install\n/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'entry_points'\n  warnings.warn(msg)\n/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'install_requires'\n  warnings.warn(msg)\n/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'zip_safe'\n  warnings.warn(msg)\nrunning install\nrunning build\nrunning build_py\ncreating build/lib\ncreating build/lib/runsnakerun\ncopying runsnakerun/__init__.py -> build/lib/runsnakerun\ncopying runsnakerun/_meliaejson.py -> build/lib/runsnakerun\ncopying runsnakerun/dumbprofile.py -> build/lib/runsnakerun\ncopying runsnakerun/hotshotreader.py -> build/lib/runsnakerun\ncopying runsnakerun/listviews.py -> build/lib/runsnakerun\ncopying runsnakerun/macshim.py -> build/lib/runsnakerun\ncopying runsnakerun/meliaeadapter.py -> build/lib/runsnakerun\ncopying runsnakerun/meliaeloader.py -> build/lib/runsnakerun\ncopying runsnakerun/pstatsadapter.py -> build/lib/runsnakerun\ncopying runsnakerun/pstatsloader.py -> build/lib/runsnakerun\ncopying runsnakerun/runsnake.py -> build/lib/runsnakerun\nrunning install_lib\ncopying build/lib/runsnakerun/macshim.py -> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun\ncopying build/lib/runsnakerun/runsnake.py -> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun\nbyte-compiling /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun/macshim.py to macshim.pyc\nbyte-compiling /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun/runsnake.py to runsnake.pyc\nrunning install_egg_info\nRemoving /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/RunSnakeRun-2.0.1-py2.7.egg-info\nWriting /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/RunSnakeRun-2.0.1-py2.7.egg-info\nd238:runsnakerun-2.0.1-devel anne$ runsnake\n-bash: runsnake: command not found\n```\n\nCheers,\n\nAnne",
    "created_at": "2011-05-12T14:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113195",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:29" align="right">comment:29</div>

I get the same problem as yesterday:

```
d238:runsnakerun-2.0.1-devel anne$ sudo python setup.py install
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'entry_points'
  warnings.warn(msg)
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'install_requires'
  warnings.warn(msg)
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'zip_safe'
  warnings.warn(msg)
running install
running build
running build_py
creating build/lib
creating build/lib/runsnakerun
copying runsnakerun/__init__.py -> build/lib/runsnakerun
copying runsnakerun/_meliaejson.py -> build/lib/runsnakerun
copying runsnakerun/dumbprofile.py -> build/lib/runsnakerun
copying runsnakerun/hotshotreader.py -> build/lib/runsnakerun
copying runsnakerun/listviews.py -> build/lib/runsnakerun
copying runsnakerun/macshim.py -> build/lib/runsnakerun
copying runsnakerun/meliaeadapter.py -> build/lib/runsnakerun
copying runsnakerun/meliaeloader.py -> build/lib/runsnakerun
copying runsnakerun/pstatsadapter.py -> build/lib/runsnakerun
copying runsnakerun/pstatsloader.py -> build/lib/runsnakerun
copying runsnakerun/runsnake.py -> build/lib/runsnakerun
running install_lib
copying build/lib/runsnakerun/macshim.py -> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun
copying build/lib/runsnakerun/runsnake.py -> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun
byte-compiling /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun/macshim.py to macshim.pyc
byte-compiling /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun/runsnake.py to runsnake.pyc
running install_egg_info
Removing /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/RunSnakeRun-2.0.1-py2.7.egg-info
Writing /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/RunSnakeRun-2.0.1-py2.7.egg-info
d238:runsnakerun-2.0.1-devel anne$ runsnake
-bash: runsnake: command not found
```

Cheers,

Anne



---

archive/issue_comments_113196.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI just updated my small review patch using now the sage preparser. Here is an example:\n\n```\nsage: runsnake('for x in range(4): print x^2')\n0\n1\n4\n9\n```",
    "created_at": "2011-05-12T14:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113196",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:30" align="right">comment:30</div>

I just updated my small review patch using now the sage preparser. Here is an example:

```
sage: runsnake('for x in range(4): print x^2')
0
1
4
9
```



---

archive/issue_comments_113197.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@anneschilling](#comment:29):\n> I get the same problem as yesterday:\n> \n> ```\n> d238:runsnakerun-2.0.1-devel anne$ sudo python setup.py install\n> ...\n> copying build/lib/runsnakerun/macshim.py -> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun\n> copying build/lib/runsnakerun/runsnake.py -> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun\n> ...\n> d238:runsnakerun-2.0.1-devel anne$ runsnake\n> -bash: runsnake: command not found\n> ```\n\nAh, it seems like the script gets installed in: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun\n\nCould you try to run it?\n\nMy best guess is that for some reason python2.7 is not considered as the default Python install on your machine, and thus python scripts are not installed in the general /usr/local/bin.\n\nCheers,\n\t\t\t\tNicolas",
    "created_at": "2011-05-12T15:14:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113197",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@anneschilling](#comment:29):
> I get the same problem as yesterday:
> 
> ```
> d238:runsnakerun-2.0.1-devel anne$ sudo python setup.py install
> ...
> copying build/lib/runsnakerun/macshim.py -> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun
> copying build/lib/runsnakerun/runsnake.py -> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun
> ...
> d238:runsnakerun-2.0.1-devel anne$ runsnake
> -bash: runsnake: command not found
> ```

Ah, it seems like the script gets installed in: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/runsnakerun

Could you try to run it?

My best guess is that for some reason python2.7 is not considered as the default Python install on your machine, and thus python scripts are not installed in the general /usr/local/bin.

Cheers,
				Nicolas



---

archive/issue_comments_113198.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThanks Franco and Christian for your reviewer patches. I folded them in, improved just a tiny bit the documentation (including Christian's example requiring preparsing), and uploaded it there. It should be good to go.",
    "created_at": "2011-05-12T16:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113198",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:32" align="right">comment:32</div>

Thanks Franco and Christian for your reviewer patches. I folded them in, improved just a tiny bit the documentation (including Christian's example requiring preparsing), and uploaded it there. It should be good to go.



---

archive/issue_comments_113199.json:
```json
{
    "body": "Changed reviewer from **Franco Saliola, Simon King** to **Franco Saliola, Simon King, Christian Stump**",
    "created_at": "2011-05-12T16:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113199",
    "user": "https://github.com/nthiery"
}
```

Changed reviewer from **Franco Saliola, Simon King** to **Franco Saliola, Simon King, Christian Stump**



---

archive/issue_events_150325.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-12T16:10:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150325"
}
```



---

archive/issue_events_150326.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-12T16:10:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150326"
}
```



---

archive/issue_comments_113200.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n- The latest snapshot of the runsnake works as advertised on my MacOSX system.\n\n- Someone introduced a tab into `dev_tools.py`, so the doctests failed. I'm uploading a patch removing the tab. Then all doctests pass. **Nicolas:** look it over and set this to positive review.\n\n- **Simon**: Python supports installing modules into a user's home directory. Have you tried that? Here are some instructions: http://docs.python.org/install/index.html#alternate-installation-the-home-scheme",
    "created_at": "2011-05-12T22:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113200",
    "user": "https://github.com/saliola"
}
```

<div id="comment:33" align="right">comment:33</div>

- The latest snapshot of the runsnake works as advertised on my MacOSX system.

- Someone introduced a tab into `dev_tools.py`, so the doctests failed. I'm uploading a patch removing the tab. Then all doctests pass. **Nicolas:** look it over and set this to positive review.

- **Simon**: Python supports installing modules into a user's home directory. Have you tried that? Here are some instructions: http://docs.python.org/install/index.html#alternate-installation-the-home-scheme



---

archive/issue_comments_113201.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nNote that my patch also removes a line of documentation: the `globals` variable is no longer used by the `runsnake` command.",
    "created_at": "2011-05-12T22:46:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113201",
    "user": "https://github.com/saliola"
}
```

<div id="comment:34" align="right">comment:34</div>

Note that my patch also removes a line of documentation: the `globals` variable is no longer used by the `runsnake` command.



---

archive/issue_comments_113202.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@saliola](#comment:34):\n> Note that my patch also removes a line of documentation: the `globals` variable is no longer used by the `runsnake` command.\n\nThanks for the fix. I folded your patch, and am about to set a positive review.\n\nThanks everybody!",
    "created_at": "2011-05-13T13:03:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113202",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@saliola](#comment:34):
> Note that my patch also removes a line of documentation: the `globals` variable is no longer used by the `runsnake` command.

Thanks for the fix. I folded your patch, and am about to set a positive review.

Thanks everybody!



---

archive/issue_events_150327.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-13T13:03:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150327"
}
```



---

archive/issue_events_150328.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-05-13T13:03:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150328"
}
```



---

archive/issue_comments_113203.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nPlease change the commit message of the patch.",
    "created_at": "2011-06-01T07:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113203",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Please change the commit message of the patch.



---

archive/issue_events_150329.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-01T07:51:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150329"
}
```



---

archive/issue_events_150330.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-01T07:51:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150330"
}
```



---

archive/issue_comments_113204.json:
```json
{
    "body": "Attachment: **[trac_11287-runsnake-nt.patch.gz](https://github.com/sagemath/sage/files/ticket11287/trac_11287-runsnake-nt.patch.gz)**",
    "created_at": "2011-06-01T10:24:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113204",
    "user": "https://github.com/nthiery"
}
```

Attachment: **[trac_11287-runsnake-nt.patch.gz](https://github.com/sagemath/sage/files/ticket11287/trac_11287-runsnake-nt.patch.gz)**



---

archive/issue_comments_113205.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@jdemeyer](#comment:36):\n> Please change the commit message of the patch.\n\nOops, done. \n\nI also removed the dependency on #11108 (which is already merged) since this confuses the buildbot.",
    "created_at": "2011-06-01T10:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113205",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@jdemeyer](#comment:36):
> Please change the commit message of the patch.

Oops, done. 

I also removed the dependency on #11108 (which is already merged) since this confuses the buildbot.



---

archive/issue_events_150331.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-06-01T10:25:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150331"
}
```



---

archive/issue_events_150332.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-06-01T10:25:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150332"
}
```



---

archive/issue_comments_113206.json:
```json
{
    "body": "Changed dependencies from **#11108** to none",
    "created_at": "2011-06-01T10:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113206",
    "user": "https://github.com/nthiery"
}
```

Changed dependencies from **#11108** to none



---

archive/issue_events_150333.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-01T11:51:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150333"
}
```



---

archive/issue_events_150334.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-01T11:51:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150334"
}
```



---

archive/issue_comments_113207.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThere is a problem with the documentation:\n\n```\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/misc/dev_tools.py:docstring of sage.misc.dev_tools.import_statements:14: (ERROR/3) Unknown directive type \"todo\".\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/misc/profiler.py:docstring of sage.misc.profiler.Profiler:27: (ERROR/3) Unknown directive type \"todo\".\n```",
    "created_at": "2011-06-01T11:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113207",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

There is a problem with the documentation:

```
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/misc/dev_tools.py:docstring of sage.misc.dev_tools.import_statements:14: (ERROR/3) Unknown directive type "todo".
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/misc/profiler.py:docstring of sage.misc.profiler.Profiler:27: (ERROR/3) Unknown directive type "todo".
```



---

archive/issue_comments_113208.json:
```json
{
    "body": "Dependencies: **#11251**",
    "created_at": "2011-06-01T14:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113208",
    "user": "https://github.com/nthiery"
}
```

Dependencies: **#11251**



---

archive/issue_comments_113209.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@jdemeyer](#comment:38):\n> There is a problem with the documentation:\n> \n> ```\n> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/misc/dev_tools.py:docstring of sage.misc.dev_tools.import_statements:14: (ERROR/3) Unknown directive type \"todo\".\n> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/misc/profiler.py:docstring of sage.misc.profiler.Profiler:27: (ERROR/3) Unknown directive type \"todo\".\n> ```\n\nAh shoot. This directive is implemented by #11251 which needs review. Ok, I added this in the dependency list, and am going to ping #11251.\n\nThanks for the report ...",
    "created_at": "2011-06-01T14:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113209",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@jdemeyer](#comment:38):
> There is a problem with the documentation:
> 
> ```
> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/misc/dev_tools.py:docstring of sage.misc.dev_tools.import_statements:14: (ERROR/3) Unknown directive type "todo".
> dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.1.alpha3/local/lib/python2.6/site-packages/sage/misc/profiler.py:docstring of sage.misc.profiler.Profiler:27: (ERROR/3) Unknown directive type "todo".
> ```

Ah shoot. This directive is implemented by #11251 which needs review. Ok, I added this in the dependency list, and am going to ping #11251.

Thanks for the report ...



---

archive/issue_events_150335.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-06-01T14:52:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150335"
}
```



---

archive/issue_events_150336.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-06-01T14:52:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150336"
}
```



---

archive/issue_events_150337.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-14T20:23:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150337"
}
```



---

archive/issue_events_150338.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-14T20:23:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150338"
}
```



---

archive/issue_comments_113210.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha0**",
    "created_at": "2011-07-27T13:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11287#issuecomment-113210",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.2.alpha0**



---

archive/issue_events_150339.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-27T13:40:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150339"
}
```



---

archive/issue_events_150340.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-27T13:40:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150340"
}
```



---

archive/issue_events_150341.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-27T13:42:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150341"
}
```



---

archive/issue_events_150342.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-27T13:42:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11287",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11287#event-150342"
}
```
