# Issue 11699: matrix() command should accept some Matlab-style inputs

archive/issues_011527.json:
```json
{
    "assignees": [],
    "body": "In https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/LUMAfoXsz-UJ Jason Grout mentioned that it would be convenient if Sage accepted the following Matlab syntax for creating matrices:\n\n```\nsage: matrix(\"1 2 3; 4 5 6; 7 8 9\")\n[1 2 3]\n[4 5 6]\n[7 8 9]\n```\n\nThis should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.\n\nDepends on #24742\n\nCC:  @kini @kcrisman @mforets\n\nBranch/Commit: **[u/ddrake/string-matrix-11699](https://github.com/sagemath/sagetrac-mirror/tree/u/ddrake/string-matrix-11699) @ [5d006ef](https://github.com/sagemath/sagetrac-mirror/commit/5d006efd0c03be75475f75f23bb4071ed35ec44c)**\n\nAuthor: **Dan Drake**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11699_\n\n",
    "created_at": "2011-08-18T00:43:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "matrix() command should accept some Matlab-style inputs",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/11699",
    "user": "https://github.com/dandrake"
}
```
In https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/LUMAfoXsz-UJ Jason Grout mentioned that it would be convenient if Sage accepted the following Matlab syntax for creating matrices:

```
sage: matrix("1 2 3; 4 5 6; 7 8 9")
[1 2 3]
[4 5 6]
[7 8 9]
```

This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.

Depends on #24742

CC:  @kini @kcrisman @mforets

Branch/Commit: **[u/ddrake/string-matrix-11699](https://github.com/sagemath/sagetrac-mirror/tree/u/ddrake/string-matrix-11699) @ [5d006ef](https://github.com/sagemath/sagetrac-mirror/commit/5d006efd0c03be75475f75f23bb4071ed35ec44c)**

Author: **Dan Drake**

_Issue created by migration from https://trac.sagemath.org/ticket/11699_





---

archive/issue_events_138640.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-08-18T00:43:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "component: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138640"
}
```



---

archive/issue_events_138641.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-08-18T00:43:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138641"
}
```



---

archive/issue_events_138642.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-08-18T00:43:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138642"
}
```



---

archive/issue_comments_123270.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nsee also http://www.mathworks.com/help/techdoc/math/f1-84864.html#f1-84906",
    "created_at": "2011-08-18T02:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123270",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'>Comment 1:</a>
see also http://www.mathworks.com/help/techdoc/math/f1-84864.html#f1-84906



---

archive/issue_comments_123271.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nIn particular, elements can be separated by either commas or spaces (or both), and rows are separated by semicolons.  So we should be able to easily separate by splitting the string:\n\n```\nrows = a.split(';')\nfor r in rows:\n    elts = r.replace(',', ' ').split()\n    # do something to interpret the elts, like map(sage_eval, elts)\n```",
    "created_at": "2011-08-18T02:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123271",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'>Comment 2:</a>
In particular, elements can be separated by either commas or spaces (or both), and rows are separated by semicolons.  So we should be able to easily separate by splitting the string:

```
rows = a.split(';')
for r in rows:
    elts = r.replace(',', ' ').split()
    # do something to interpret the elts, like map(sage_eval, elts)
```



---

archive/issue_comments_123272.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nOr probably even faster, do the ','->' ' translation once at the beginning to avoid lots of small strings being created:\n\n```\n# if a was the string passed in as the list of elements\na=a.replace(',', ' ')\nrows = a.split(';')\nelements=[map(sage_eval, r.split()) for r in rows]\n# now continue matrix processing with \"elements\" as the list of elements\n```\n\nThis would just be inserted in the first time the elements of a matrix were accessed and would convert the string to a list of elements like it expects.",
    "created_at": "2011-08-18T02:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123272",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'>Comment 3:</a>
Or probably even faster, do the ','->' ' translation once at the beginning to avoid lots of small strings being created:

```
# if a was the string passed in as the list of elements
a=a.replace(',', ' ')
rows = a.split(';')
elements=[map(sage_eval, r.split()) for r in rows]
# now continue matrix processing with "elements" as the list of elements
```

This would just be inserted in the first time the elements of a matrix were accessed and would convert the string to a list of elements like it expects.



---

archive/issue_comments_123273.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nIn fact, we should support multiple lines here too, like Matlab, so you could do:\n\n```\nmatrix(\"\"\"\n1 2 3\n4 5 6\n7 8 9\n\"\"\")\n```\n\nTo do that, do\n\n```\n# if a was the string passed in as the list of elements\na=a.replace(',', ' ').replace(';','\\n')\nrows = a.split('\\n')\n# throw away empty rows\nrows = [r for r in rows if not r.trim()]\nelements=[map(sage_eval, r.split()) for r in rows]\n# now continue matrix processing with \"elements\" as the list of elements\n```\n\nAt this point, it might be better to use regular expressions.  It's certainly worth a timing test.  Note the following matlab examples:\n\n```\n>> a=[1 2 3\n4 5 6]\n\na =\n\n     1     2     3\n     4     5     6\n\n>> a=[\n1 2 3\n4 5 6\n]\n\na =\n\n     1     2     3\n     4     5     6\n\n>> a=[  \n1 2 3;\n4 4 4\n]\n\na =\n\n     1     2     3\n     4     4     4\n\n>> a = [\n1 2 3; ;\n4 5 6]\n\na =\n\n     1     2     3\n     4     5     6\n\n>> a = [;;1 2;;3 4] \n\na =\n\n     1     2\n     3     4\n\n>> a=[\n\n;\n1 2 3]\n\na =\n\n     1     2     3\n\n\n\n```",
    "created_at": "2011-08-18T02:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123273",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:4'>Comment 4:</a>
In fact, we should support multiple lines here too, like Matlab, so you could do:

```
matrix("""
1 2 3
4 5 6
7 8 9
""")
```

To do that, do

```
# if a was the string passed in as the list of elements
a=a.replace(',', ' ').replace(';','\n')
rows = a.split('\n')
# throw away empty rows
rows = [r for r in rows if not r.trim()]
elements=[map(sage_eval, r.split()) for r in rows]
# now continue matrix processing with "elements" as the list of elements
```

At this point, it might be better to use regular expressions.  It's certainly worth a timing test.  Note the following matlab examples:

```
>> a=[1 2 3
4 5 6]

a =

     1     2     3
     4     5     6

>> a=[
1 2 3
4 5 6
]

a =

     1     2     3
     4     5     6

>> a=[  
1 2 3;
4 4 4
]

a =

     1     2     3
     4     4     4

>> a = [
1 2 3; ;
4 5 6]

a =

     1     2     3
     4     5     6

>> a = [;;1 2;;3 4] 

a =

     1     2
     3     4

>> a=[

;
1 2 3]

a =

     1     2     3



```



---

archive/issue_comments_123274.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nOops, that should `r.strip()` rather than `r.trim()` above.",
    "created_at": "2011-08-18T02:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123274",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'>Comment 5:</a>
Oops, that should `r.strip()` rather than `r.trim()` above.



---

archive/issue_comments_123275.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nSlightly faster than the double replace, if `s` is defined at module creation time:\n\n```\nimport string\ns=string.maketrans(';,','\\n ')\n```\n\nThen the double replace above becomes: `a.translate(s)`",
    "created_at": "2011-08-18T03:04:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123275",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'>Comment 6:</a>
Slightly faster than the double replace, if `s` is defined at module creation time:

```
import string
s=string.maketrans(';,','\n ')
```

Then the double replace above becomes: `a.translate(s)`



---

archive/issue_comments_123276.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nOkay, here's a new iteration, especially since I flipped logic above with the r.strip()\n\n```\n# if a was the string passed in as the list of elements\na=a.replace(',', ' ').replace(';','\\n') # or a.translate(s) if we can initialize s\nrows = a.split('\\n')\n# throw away empty rows\nrows = [r for r in rows if r.strip()]\nelements=[map(sage_eval, r.split()) for r in rows]\n# now continue matrix processing with \"elements\" as the list of elements\n\n```",
    "created_at": "2011-08-18T03:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123276",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'>Comment 7:</a>
Okay, here's a new iteration, especially since I flipped logic above with the r.strip()

```
# if a was the string passed in as the list of elements
a=a.replace(',', ' ').replace(';','\n') # or a.translate(s) if we can initialize s
rows = a.split('\n')
# throw away empty rows
rows = [r for r in rows if r.strip()]
elements=[map(sage_eval, r.split()) for r in rows]
# now continue matrix processing with "elements" as the list of elements

```



---

archive/issue_events_138643.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-08-18T07:29:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138643"
}
```



---

archive/issue_comments_123277.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nOkay, try this. I think it still needs some optimization with the string handling stuff, and it could probably use some more doctests, but it's basically ready for review.",
    "created_at": "2011-08-18T07:29:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123277",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:8'>Comment 8:</a>
Okay, try this. I think it still needs some optimization with the string handling stuff, and it could probably use some more doctests, but it's basically ready for review.



---

archive/issue_comments_123278.json:
```json
{
    "body": "Author: **Dan Drake**",
    "created_at": "2011-08-18T07:29:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123278",
    "user": "https://github.com/dandrake"
}
```

Author: **Dan Drake**



---

archive/issue_comments_123279.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,3 +9,5 @@\n ```\n \n This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.\n+\n+Apply [attachment: trac_11699_matlab_input_to_matrix.patch.gz](https://github.com/sagemath/sage/files/ticket11699/trac_11699_matlab_input_to_matrix.patch.gz)\n``````\n",
    "created_at": "2011-08-18T07:29:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123279",
    "user": "https://github.com/dandrake"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,3 +9,5 @@
 ```
 
 This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.
+
+Apply [attachment: trac_11699_matlab_input_to_matrix.patch.gz](https://github.com/sagemath/sage/files/ticket11699/trac_11699_matlab_input_to_matrix.patch.gz)
``````




---

archive/issue_comments_123280.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nHrm, Robert Bradshaw just tossed some cold water on my simple string-handling: https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/_4DL5li7NcQJ\n\nThe quick version: what about `1 + sin(x)` (for splitting in spaces) and `[1, 2; pi, f(3, 4)]` for splitting on commas? Hrm.",
    "created_at": "2011-08-18T08:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123280",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:9'>Comment 9:</a>
Hrm, Robert Bradshaw just tossed some cold water on my simple string-handling: https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/_4DL5li7NcQJ

The quick version: what about `1 + sin(x)` (for splitting in spaces) and `[1, 2; pi, f(3, 4)]` for splitting on commas? Hrm.



---

archive/issue_comments_123281.json:
```json
{
    "body": "Removed assignee **@jasongrout, @williamstein**",
    "created_at": "2011-08-18T08:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123281",
    "user": "https://github.com/dandrake"
}
```

Removed assignee **@jasongrout, @williamstein**



---

archive/issue_comments_123282.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nquick comment: you should probably use `isinstance(args[0], basestring)`, as that is forward-compatible with unicode strings and python3.",
    "created_at": "2011-08-18T17:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123282",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'>Comment 10:</a>
quick comment: you should probably use `isinstance(args[0], basestring)`, as that is forward-compatible with unicode strings and python3.



---

archive/issue_comments_123283.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nAnother problem: `sage_eval` evaluates its arguments in a different context than the one in which `matrix()` gets called. So even though you may have done `x = var('x')`, it doesn't know about `x`.\n\nIf we do put this in, I think the docstring should be explicit that using strings is limited, and only really works for number literals and similar things. Then later someone can write a full parser and figure out the evaluation context stuff.",
    "created_at": "2011-08-23T06:57:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123283",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:11'>Comment 11:</a>
Another problem: `sage_eval` evaluates its arguments in a different context than the one in which `matrix()` gets called. So even though you may have done `x = var('x')`, it doesn't know about `x`.

If we do put this in, I think the docstring should be explicit that using strings is limited, and only really works for number literals and similar things. Then later someone can write a full parser and figure out the evaluation context stuff.



---

archive/issue_events_138644.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-08-23T06:57:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138644"
}
```



---

archive/issue_events_138645.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-08-23T06:57:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138645"
}
```



---

archive/issue_events_138646.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-08-24T07:44:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138646"
}
```



---

archive/issue_events_138647.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-08-24T07:44:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138647"
}
```



---

archive/issue_comments_123284.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nMaybe on another ticket, but can I ask for one more enhancement on this? Can we make the following work:\n\n```\n\nmatrix(\"\"\"\n[1 2]\n[3 4]\n\"\"\")\n\n```\n\n(i.e., any \"]\" or \"[\" next to row delimiters are stripped).  That would mean that I could cut and paste output from Sage back into Sage to make a matrix.",
    "created_at": "2011-08-24T13:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123284",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'>Comment 13:</a>
Maybe on another ticket, but can I ask for one more enhancement on this? Can we make the following work:

```

matrix("""
[1 2]
[3 4]
""")

```

(i.e., any "]" or "[" next to row delimiters are stripped).  That would mean that I could cut and paste output from Sage back into Sage to make a matrix.



---

archive/issue_comments_123285.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@jasongrout](#comment%3A13):\n> Maybe on another ticket, but can I ask for one more enhancement on this? Can we make the following work:\n> \n> ```\n> \n> matrix(\"\"\"\n> [1 2]\n> [3 4]\n> \"\"\")\n> \n> ```\n> \n> (i.e., any \"]\" or \"[\" next to row delimiters are stripped).  That would mean that I could cut and paste output from Sage back into Sage to make a matrix.\n\nSure, no problem. Although you'll still have the split-on-whitespace and context limitations. But plain numerical matrices are common enough so that I think it's worth it.",
    "created_at": "2011-08-25T03:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123285",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@jasongrout](#comment%3A13):
> Maybe on another ticket, but can I ask for one more enhancement on this? Can we make the following work:
> 
> ```
> 
> matrix("""
> [1 2]
> [3 4]
> """)
> 
> ```
> 
> (i.e., any "]" or "[" next to row delimiters are stripped).  That would mean that I could cut and paste output from Sage back into Sage to make a matrix.

Sure, no problem. Although you'll still have the split-on-whitespace and context limitations. But plain numerical matrices are common enough so that I think it's worth it.



---

archive/issue_comments_123286.json:
```json
{
    "body": "apply to main repo",
    "created_at": "2011-08-25T03:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123286",
    "user": "https://github.com/dandrake"
}
```

apply to main repo



---

archive/issue_comments_123287.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nAttachment: **[trac_11699_matlab_input_to_matrix.patch.gz](https://github.com/sagemath/sage/files/ticket11699/trac_11699_matlab_input_to_matrix.patch.gz)**\n\nSee #12354 for another take on this as preparser syntax.",
    "created_at": "2012-01-25T22:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123287",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:15'>Comment 15:</a>
Attachment: **[trac_11699_matlab_input_to_matrix.patch.gz](https://github.com/sagemath/sage/files/ticket11699/trac_11699_matlab_input_to_matrix.patch.gz)**

See #12354 for another take on this as preparser syntax.



---

archive/issue_comments_123288.json:
```json
{
    "body": "Work Issues: **failing doctest**",
    "created_at": "2012-04-06T10:38:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123288",
    "user": "https://github.com/loefflerd"
}
```

Work Issues: **failing doctest**



---

archive/issue_events_138648.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-04-06T10:38:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138648"
}
```



---

archive/issue_events_138649.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-04-06T10:38:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138649"
}
```



---

archive/issue_comments_123289.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nThis patch causes a doctest to fail in sageinspect.py (see patchbot logs) -- looks like somebody helpfully wrote a doctest which relies on the docstring of \"matrix()\" being exactly 34 lines long. (There is also another failure on the most recent run, but I suspect that is just a random glitch.)",
    "created_at": "2012-04-06T10:38:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123289",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:17'>Comment 17:</a>
This patch causes a doctest to fail in sageinspect.py (see patchbot logs) -- looks like somebody helpfully wrote a doctest which relies on the docstring of "matrix()" being exactly 34 lines long. (There is also another failure on the most recent run, but I suspect that is just a random glitch.)



---

archive/issue_comments_123290.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nargh, I was trying to use this today, thinking it was already in...",
    "created_at": "2013-03-06T18:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123290",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:18'>Comment 18:</a>
argh, I was trying to use this today, thinking it was already in...



---

archive/issue_events_138650.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138650"
}
```



---

archive/issue_events_138651.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138651"
}
```



---

archive/issue_events_138652.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138652"
}
```



---

archive/issue_events_138653.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138653"
}
```



---

archive/issue_events_138654.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138654"
}
```



---

archive/issue_events_138655.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138655"
}
```



---

archive/issue_events_138656.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138656"
}
```



---

archive/issue_events_138657.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138657"
}
```



---

archive/issue_comments_123291.json:
```json
{
    "body": "Commit: **[ddc2e81](https://github.com/sagemath/sagetrac-mirror/commit/ddc2e812af55b6cc5abf3440423210b4bef0977d)**",
    "created_at": "2015-08-27T06:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123291",
    "user": "https://github.com/dandrake"
}
```

Commit: **[ddc2e81](https://github.com/sagemath/sagetrac-mirror/commit/ddc2e812af55b6cc5abf3440423210b4bef0977d)**



---

archive/issue_comments_123292.json:
```json
{
    "body": "Branch: **[u/ddrake/string-matrix-11699](https://github.com/sagemath/sagetrac-mirror/tree/u/ddrake/string-matrix-11699)**",
    "created_at": "2015-08-27T06:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123292",
    "user": "https://github.com/dandrake"
}
```

Branch: **[u/ddrake/string-matrix-11699](https://github.com/sagemath/sagetrac-mirror/tree/u/ddrake/string-matrix-11699)**



---

archive/issue_comments_123293.json:
```json
{
    "body": "Changed work issues from **failing doctest** to **failing doc build**",
    "created_at": "2015-08-27T06:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123293",
    "user": "https://github.com/dandrake"
}
```

Changed work issues from **failing doctest** to **failing doc build**



---

archive/issue_comments_123294.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI've ported this over to 6.9.beta3. It builds, works, and passes doctests, but the documentation doesn't build -- I have doctests with ``\\n`` in them, and these are not interpreted by Sphinx correctly, and then it complains about indentation being messed up. Advice for how to fix that welcome.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddc2e812af55b6cc5abf3440423210b4bef0977d\">ddc2e81</a></td><td><code>add Matlab-style strings for matrix() constructor</code></td></tr></table>\n",
    "created_at": "2015-08-27T06:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123294",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:24'>Comment 24:</a>
I've ported this over to 6.9.beta3. It builds, works, and passes doctests, but the documentation doesn't build -- I have doctests with ``\n`` in them, and these are not interpreted by Sphinx correctly, and then it complains about indentation being messed up. Advice for how to fix that welcome.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddc2e812af55b6cc5abf3440423210b4bef0977d">ddc2e81</a></td><td><code>add Matlab-style strings for matrix() constructor</code></td></tr></table>




---

archive/issue_comments_123295.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nReplying to [@dandrake](#comment%3A24):\n> Advice for how to fix that welcome.\n\nUse\n\n```\nr\"\"\"\ndocstring\n\"\"\"\n```\ninstead of\n\n```\n\"\"\"\ndocstring\n\"\"\"\n```",
    "created_at": "2015-08-27T13:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123295",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'>Comment 25:</a>
Replying to [@dandrake](#comment%3A24):
> Advice for how to fix that welcome.

Use

```
r"""
docstring
"""
```
instead of

```
"""
docstring
"""
```



---

archive/issue_comments_123296.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d006efd0c03be75475f75f23bb4071ed35ec44c\">5d006ef</a></td><td><code>raw string for docstrings so Sphinx handles \\n -- thanks Jeroen Demeyer</code></td></tr></table>\n",
    "created_at": "2015-08-27T15:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123296",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>Comment 26:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d006efd0c03be75475f75f23bb4071ed35ec44c">5d006ef</a></td><td><code>raw string for docstrings so Sphinx handles \n -- thanks Jeroen Demeyer</code></td></tr></table>




---

archive/issue_comments_123297.json:
```json
{
    "body": "Changed commit from **[ddc2e81](https://github.com/sagemath/sagetrac-mirror/commit/ddc2e812af55b6cc5abf3440423210b4bef0977d)** to **[5d006ef](https://github.com/sagemath/sagetrac-mirror/commit/5d006efd0c03be75475f75f23bb4071ed35ec44c)**",
    "created_at": "2015-08-27T15:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123297",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ddc2e81](https://github.com/sagemath/sagetrac-mirror/commit/ddc2e812af55b6cc5abf3440423210b4bef0977d)** to **[5d006ef](https://github.com/sagemath/sagetrac-mirror/commit/5d006efd0c03be75475f75f23bb4071ed35ec44c)**



---

archive/issue_comments_123298.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [@jdemeyer](#comment%3A25):\n> Use\n> \n> ```\n> r\"\"\"\n> docstring\n> \"\"\"\n> ```\n> instead of\n> \n> ```\n> \"\"\"\n> docstring\n> \"\"\"\n> ```\n\nThat's it! Thank you.",
    "created_at": "2015-08-27T15:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123298",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [@jdemeyer](#comment%3A25):
> Use
> 
> ```
> r"""
> docstring
> """
> ```
> instead of
> 
> ```
> """
> docstring
> """
> ```

That's it! Thank you.



---

archive/issue_events_138658.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2015-08-27T15:42:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138658"
}
```



---

archive/issue_events_138659.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2015-08-27T15:42:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138659"
}
```



---

archive/issue_comments_123299.json:
```json
{
    "body": "Changed work issues from **failing doc build** to none",
    "created_at": "2015-08-27T15:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123299",
    "user": "https://github.com/dandrake"
}
```

Changed work issues from **failing doc build** to none



---

archive/issue_comments_123300.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nFailing doctest\n\n```\nsage -t --long src/sage/misc/sageinspect.py\n**********************************************************************\nFile \"src/sage/misc/sageinspect.py\", line 1959, in sage.misc.sageinspect.sage_getsourcelines\nFailed example:\n    sage_getsourcelines(matrix)[1]\nExpected:\n    732\nGot:\n    867\n**********************************************************************\n1 item had failures:\n   1 of  28 in sage.misc.sageinspect.sage_getsourcelines\n    [284 tests, 1 failure, 28.10 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/misc/sageinspect.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2015-10-21T20:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123300",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'>Comment 29:</a>
Failing doctest

```
sage -t --long src/sage/misc/sageinspect.py
**********************************************************************
File "src/sage/misc/sageinspect.py", line 1959, in sage.misc.sageinspect.sage_getsourcelines
Failed example:
    sage_getsourcelines(matrix)[1]
Expected:
    732
Got:
    867
**********************************************************************
1 item had failures:
   1 of  28 in sage.misc.sageinspect.sage_getsourcelines
    [284 tests, 1 failure, 28.10 s]
----------------------------------------------------------------------
sage -t --long src/sage/misc/sageinspect.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_events_138660.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-10-21T20:03:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138660"
}
```



---

archive/issue_events_138661.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-10-21T20:03:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138661"
}
```



---

archive/issue_comments_123301.json:
```json
{
    "body": "Dependencies: **#24742**",
    "created_at": "2018-03-01T16:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123301",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#24742**



---

archive/issue_comments_123302.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nI don't plan to work on this, but if anybody does: it should be on top of #24742.",
    "created_at": "2018-03-01T16:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123302",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'>Comment 32:</a>
I don't plan to work on this, but if anybody does: it should be on top of #24742.



---

archive/issue_comments_123303.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,10 @@\n In https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/LUMAfoXsz-UJ Jason Grout mentioned that it would be convenient if Sage accepted the following Matlab syntax for creating matrices:\n \n ```\n-sage: a=matrix(\"1 2 3; 4 5 6; 7 8 9\")\n-sage: a\n-matrix([[1, 2, 3],\n-         [4, 5, 6],\n-         [7, 8, 9]])\n+sage: matrix(\"1 2 3; 4 5 6; 7 8 9\")\n+[1 2 3]\n+[4 5 6]\n+[7 8 9]\n ```\n \n This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.\n-\n-Apply [attachment: trac_11699_matlab_input_to_matrix.patch.gz](https://github.com/sagemath/sage/files/ticket11699/trac_11699_matlab_input_to_matrix.patch.gz)\n``````\n",
    "created_at": "2018-03-01T16:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11699#issuecomment-123303",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,10 @@
 In https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/LUMAfoXsz-UJ Jason Grout mentioned that it would be convenient if Sage accepted the following Matlab syntax for creating matrices:
 
 ```
-sage: a=matrix("1 2 3; 4 5 6; 7 8 9")
-sage: a
-matrix([[1, 2, 3],
-         [4, 5, 6],
-         [7, 8, 9]])
+sage: matrix("1 2 3; 4 5 6; 7 8 9")
+[1 2 3]
+[4 5 6]
+[7 8 9]
 ```
 
 This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.
-
-Apply [attachment: trac_11699_matlab_input_to_matrix.patch.gz](https://github.com/sagemath/sage/files/ticket11699/trac_11699_matlab_input_to_matrix.patch.gz)
``````




---

archive/issue_events_138662.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11699",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11699#event-138662"
}
```
