# Issue 11699: matrix() command should accept some Matlab-style inputs

archive/issues_011527.json:
```json
{
    "body": "In https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/LUMAfoXsz-UJ Jason Grout mentioned that it would be convenient if Sage accepted the following Matlab syntax for creating matrices:\n\n```\nsage: matrix(\"1 2 3; 4 5 6; 7 8 9\")\n[1 2 3]\n[4 5 6]\n[7 8 9]\n```\n\nThis should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.\n\nCC:  @kini @kcrisman @mforets\n\nAuthor: Dan Drake\n\nBranch: u/ddrake/string-matrix-11699\n\nStatus: needs_work\n\nDependencies: #24742\n\nCommit: 5d006efd0c03be75475f75f23bb4071ed35ec44c\n\nIssue created by migration from https://trac.sagemath.org/ticket/11699\n\n",
    "created_at": "2011-08-18T00:43:05Z",
    "labels": [
        "component: linear algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "matrix() command should accept some Matlab-style inputs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11699",
    "user": "https://github.com/dandrake"
}
```
In https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/LUMAfoXsz-UJ Jason Grout mentioned that it would be convenient if Sage accepted the following Matlab syntax for creating matrices:

```
sage: matrix("1 2 3; 4 5 6; 7 8 9")
[1 2 3]
[4 5 6]
[7 8 9]
```

This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.

CC:  @kini @kcrisman @mforets

Author: Dan Drake

Branch: u/ddrake/string-matrix-11699

Status: needs_work

Dependencies: #24742

Commit: 5d006efd0c03be75475f75f23bb4071ed35ec44c

Issue created by migration from https://trac.sagemath.org/ticket/11699





---

archive/issue_comments_155638.json:
```json
{
    "body": "<a id='comment:1'></a>\nsee also http://www.mathworks.com/help/techdoc/math/f1-84864.html#f1-84906",
    "created_at": "2011-08-18T02:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155638",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'></a>
see also http://www.mathworks.com/help/techdoc/math/f1-84864.html#f1-84906



---

archive/issue_comments_155639.json:
```json
{
    "body": "<a id='comment:2'></a>\nIn particular, elements can be separated by either commas or spaces (or both), and rows are separated by semicolons.  So we should be able to easily separate by splitting the string:\n\n```\nrows = a.split(';')\nfor r in rows:\n    elts = r.replace(',', ' ').split()\n    # do something to interpret the elts, like map(sage_eval, elts)\n```",
    "created_at": "2011-08-18T02:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155639",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'></a>
In particular, elements can be separated by either commas or spaces (or both), and rows are separated by semicolons.  So we should be able to easily separate by splitting the string:

```
rows = a.split(';')
for r in rows:
    elts = r.replace(',', ' ').split()
    # do something to interpret the elts, like map(sage_eval, elts)
```



---

archive/issue_comments_155640.json:
```json
{
    "body": "<a id='comment:3'></a>\nOr probably even faster, do the ','->' ' translation once at the beginning to avoid lots of small strings being created:\n\n```\n# if a was the string passed in as the list of elements\na=a.replace(',', ' ')\nrows = a.split(';')\nelements=[map(sage_eval, r.split()) for r in rows]\n# now continue matrix processing with \"elements\" as the list of elements\n```\n\nThis would just be inserted in the first time the elements of a matrix were accessed and would convert the string to a list of elements like it expects.",
    "created_at": "2011-08-18T02:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155640",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'></a>
Or probably even faster, do the ','->' ' translation once at the beginning to avoid lots of small strings being created:

```
# if a was the string passed in as the list of elements
a=a.replace(',', ' ')
rows = a.split(';')
elements=[map(sage_eval, r.split()) for r in rows]
# now continue matrix processing with "elements" as the list of elements
```

This would just be inserted in the first time the elements of a matrix were accessed and would convert the string to a list of elements like it expects.



---

archive/issue_comments_155641.json:
```json
{
    "body": "<a id='comment:4'></a>\nIn fact, we should support multiple lines here too, like Matlab, so you could do:\n\n```\nmatrix(\"\"\"\n1 2 3\n4 5 6\n7 8 9\n\"\"\")\n```\n\nTo do that, do\n\n```\n# if a was the string passed in as the list of elements\na=a.replace(',', ' ').replace(';','\\n')\nrows = a.split('\\n')\n# throw away empty rows\nrows = [r for r in rows if not r.trim()]\nelements=[map(sage_eval, r.split()) for r in rows]\n# now continue matrix processing with \"elements\" as the list of elements\n```\n\nAt this point, it might be better to use regular expressions.  It's certainly worth a timing test.  Note the following matlab examples:\n\n```\n>> a=[1 2 3\n4 5 6]\n\na =\n\n     1     2     3\n     4     5     6\n\n>> a=[\n1 2 3\n4 5 6\n]\n\na =\n\n     1     2     3\n     4     5     6\n\n>> a=[  \n1 2 3;\n4 4 4\n]\n\na =\n\n     1     2     3\n     4     4     4\n\n>> a = [\n1 2 3; ;\n4 5 6]\n\na =\n\n     1     2     3\n     4     5     6\n\n>> a = [;;1 2;;3 4] \n\na =\n\n     1     2\n     3     4\n\n>> a=[\n\n;\n1 2 3]\n\na =\n\n     1     2     3\n\n\n\n```",
    "created_at": "2011-08-18T02:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155641",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:4'></a>
In fact, we should support multiple lines here too, like Matlab, so you could do:

```
matrix("""
1 2 3
4 5 6
7 8 9
""")
```

To do that, do

```
# if a was the string passed in as the list of elements
a=a.replace(',', ' ').replace(';','\n')
rows = a.split('\n')
# throw away empty rows
rows = [r for r in rows if not r.trim()]
elements=[map(sage_eval, r.split()) for r in rows]
# now continue matrix processing with "elements" as the list of elements
```

At this point, it might be better to use regular expressions.  It's certainly worth a timing test.  Note the following matlab examples:

```
>> a=[1 2 3
4 5 6]

a =

     1     2     3
     4     5     6

>> a=[
1 2 3
4 5 6
]

a =

     1     2     3
     4     5     6

>> a=[  
1 2 3;
4 4 4
]

a =

     1     2     3
     4     4     4

>> a = [
1 2 3; ;
4 5 6]

a =

     1     2     3
     4     5     6

>> a = [;;1 2;;3 4] 

a =

     1     2
     3     4

>> a=[

;
1 2 3]

a =

     1     2     3



```



---

archive/issue_comments_155642.json:
```json
{
    "body": "<a id='comment:5'></a>\nOops, that should `r.strip()` rather than `r.trim()` above.",
    "created_at": "2011-08-18T02:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155642",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>
Oops, that should `r.strip()` rather than `r.trim()` above.



---

archive/issue_comments_155643.json:
```json
{
    "body": "<a id='comment:6'></a>\nSlightly faster than the double replace, if `s` is defined at module creation time:\n\n```\nimport string\ns=string.maketrans(';,','\\n ')\n```\n\nThen the double replace above becomes: `a.translate(s)`",
    "created_at": "2011-08-18T03:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155643",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'></a>
Slightly faster than the double replace, if `s` is defined at module creation time:

```
import string
s=string.maketrans(';,','\n ')
```

Then the double replace above becomes: `a.translate(s)`



---

archive/issue_comments_155644.json:
```json
{
    "body": "<a id='comment:7'></a>\nOkay, here's a new iteration, especially since I flipped logic above with the r.strip()\n\n```\n# if a was the string passed in as the list of elements\na=a.replace(',', ' ').replace(';','\\n') # or a.translate(s) if we can initialize s\nrows = a.split('\\n')\n# throw away empty rows\nrows = [r for r in rows if r.strip()]\nelements=[map(sage_eval, r.split()) for r in rows]\n# now continue matrix processing with \"elements\" as the list of elements\n\n```",
    "created_at": "2011-08-18T03:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155644",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
Okay, here's a new iteration, especially since I flipped logic above with the r.strip()

```
# if a was the string passed in as the list of elements
a=a.replace(',', ' ').replace(';','\n') # or a.translate(s) if we can initialize s
rows = a.split('\n')
# throw away empty rows
rows = [r for r in rows if r.strip()]
elements=[map(sage_eval, r.split()) for r in rows]
# now continue matrix processing with "elements" as the list of elements

```



---

archive/issue_comments_155645.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,3 +9,5 @@\n ```\n \n This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.\n+\n+Apply attachment:trac_11699_matlab_input_to_matrix.patch\n``````\n",
    "created_at": "2011-08-18T07:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155645",
    "user": "https://github.com/dandrake"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,3 +9,5 @@
 ```
 
 This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.
+
+Apply attachment:trac_11699_matlab_input_to_matrix.patch
``````




---

archive/issue_comments_155646.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-08-18T07:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155646",
    "user": "https://github.com/dandrake"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_155647.json:
```json
{
    "body": "Changing author from \"\" to \"Dan Drake\"",
    "created_at": "2011-08-18T07:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155647",
    "user": "https://github.com/dandrake"
}
```

Changing author from "" to "Dan Drake"



---

archive/issue_comments_155648.json:
```json
{
    "body": "<a id='comment:8'></a>\nOkay, try this. I think it still needs some optimization with the string handling stuff, and it could probably use some more doctests, but it's basically ready for review.",
    "created_at": "2011-08-18T07:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155648",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:8'></a>
Okay, try this. I think it still needs some optimization with the string handling stuff, and it could probably use some more doctests, but it's basically ready for review.



---

archive/issue_comments_155649.json:
```json
{
    "body": "Remove assignee jason, was.",
    "created_at": "2011-08-18T08:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155649",
    "user": "https://github.com/dandrake"
}
```

Remove assignee jason, was.



---

archive/issue_comments_155650.json:
```json
{
    "body": "<a id='comment:9'></a>\nHrm, Robert Bradshaw just tossed some cold water on my simple string-handling: https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/_4DL5li7NcQJ\n\nThe quick version: what about `1 + sin(x)` (for splitting in spaces) and `[1, 2; pi, f(3, 4)]` for splitting on commas? Hrm.",
    "created_at": "2011-08-18T08:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155650",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:9'></a>
Hrm, Robert Bradshaw just tossed some cold water on my simple string-handling: https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/_4DL5li7NcQJ

The quick version: what about `1 + sin(x)` (for splitting in spaces) and `[1, 2; pi, f(3, 4)]` for splitting on commas? Hrm.



---

archive/issue_comments_155651.json:
```json
{
    "body": "<a id='comment:10'></a>\nquick comment: you should probably use `isinstance(args[0], basestring)`, as that is forward-compatible with unicode strings and python3.",
    "created_at": "2011-08-18T17:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155651",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'></a>
quick comment: you should probably use `isinstance(args[0], basestring)`, as that is forward-compatible with unicode strings and python3.



---

archive/issue_comments_155652.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-08-23T06:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155652",
    "user": "https://github.com/dandrake"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155653.json:
```json
{
    "body": "<a id='comment:11'></a>\nAnother problem: `sage_eval` evaluates its arguments in a different context than the one in which `matrix()` gets called. So even though you may have done `x = var('x')`, it doesn't know about `x`.\n\nIf we do put this in, I think the docstring should be explicit that using strings is limited, and only really works for number literals and similar things. Then later someone can write a full parser and figure out the evaluation context stuff.",
    "created_at": "2011-08-23T06:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155653",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:11'></a>
Another problem: `sage_eval` evaluates its arguments in a different context than the one in which `matrix()` gets called. So even though you may have done `x = var('x')`, it doesn't know about `x`.

If we do put this in, I think the docstring should be explicit that using strings is limited, and only really works for number literals and similar things. Then later someone can write a full parser and figure out the evaluation context stuff.



---

archive/issue_comments_155654.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-08-24T07:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155654",
    "user": "https://github.com/dandrake"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155655.json:
```json
{
    "body": "<a id='comment:13'></a>\nMaybe on another ticket, but can I ask for one more enhancement on this? Can we make the following work:\n\n```\n\nmatrix(\"\"\"\n[1 2]\n[3 4]\n\"\"\")\n\n```\n\n(i.e., any \"]\" or \"[\" next to row delimiters are stripped).  That would mean that I could cut and paste output from Sage back into Sage to make a matrix.",
    "created_at": "2011-08-24T13:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155655",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'></a>
Maybe on another ticket, but can I ask for one more enhancement on this? Can we make the following work:

```

matrix("""
[1 2]
[3 4]
""")

```

(i.e., any "]" or "[" next to row delimiters are stripped).  That would mean that I could cut and paste output from Sage back into Sage to make a matrix.



---

archive/issue_comments_155656.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [jason](#comment%3A13):\n> Maybe on another ticket, but can I ask for one more enhancement on this? Can we make the following work:\n> \n> \n> ```\n> \n> matrix(\"\"\"\n> [1 2]\n> [3 4]\n> \"\"\")\n> \n> ```\n> \n> (i.e., any \"]\" or \"[\" next to row delimiters are stripped).  That would mean that I could cut and paste output from Sage back into Sage to make a matrix.\n\n\nSure, no problem. Although you'll still have the split-on-whitespace and context limitations. But plain numerical matrices are common enough so that I think it's worth it.",
    "created_at": "2011-08-25T03:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155656",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:14'></a>
Replying to [jason](#comment%3A13):
> Maybe on another ticket, but can I ask for one more enhancement on this? Can we make the following work:
> 
> 
> ```
> 
> matrix("""
> [1 2]
> [3 4]
> """)
> 
> ```
> 
> (i.e., any "]" or "[" next to row delimiters are stripped).  That would mean that I could cut and paste output from Sage back into Sage to make a matrix.


Sure, no problem. Although you'll still have the split-on-whitespace and context limitations. But plain numerical matrices are common enough so that I think it's worth it.



---

archive/issue_comments_155657.json:
```json
{
    "body": "Attachment [trac_11699_matlab_input_to_matrix.patch](tarball://root/attachments/some-uuid/ticket11699/trac_11699_matlab_input_to_matrix.patch) by @dandrake created at 2011-08-25 03:57:26\n\napply to main repo",
    "created_at": "2011-08-25T03:57:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155657",
    "user": "https://github.com/dandrake"
}
```

Attachment [trac_11699_matlab_input_to_matrix.patch](tarball://root/attachments/some-uuid/ticket11699/trac_11699_matlab_input_to_matrix.patch) by @dandrake created at 2011-08-25 03:57:26

apply to main repo



---

archive/issue_comments_155658.json:
```json
{
    "body": "<a id='comment:15'></a>\nSee #12354 for another take on this as preparser syntax.",
    "created_at": "2012-01-25T22:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155658",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:15'></a>
See #12354 for another take on this as preparser syntax.



---

archive/issue_comments_155659.json:
```json
{
    "body": "<a id='comment:17'></a>\nThis patch causes a doctest to fail in sageinspect.py (see patchbot logs) -- looks like somebody helpfully wrote a doctest which relies on the docstring of \"matrix()\" being exactly 34 lines long. (There is also another failure on the most recent run, but I suspect that is just a random glitch.)",
    "created_at": "2012-04-06T10:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155659",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:17'></a>
This patch causes a doctest to fail in sageinspect.py (see patchbot logs) -- looks like somebody helpfully wrote a doctest which relies on the docstring of "matrix()" being exactly 34 lines long. (There is also another failure on the most recent run, but I suspect that is just a random glitch.)



---

archive/issue_comments_155660.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-04-06T10:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155660",
    "user": "https://github.com/loefflerd"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155661.json:
```json
{
    "body": "Changing work_issues from \"\" to \"failing doctest\"",
    "created_at": "2012-04-06T10:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155661",
    "user": "https://github.com/loefflerd"
}
```

Changing work_issues from "" to "failing doctest"



---

archive/issue_comments_155662.json:
```json
{
    "body": "<a id='comment:18'></a>\nargh, I was trying to use this today, thinking it was already in...",
    "created_at": "2013-03-06T18:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155662",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:18'></a>
argh, I was trying to use this today, thinking it was already in...



---

archive/issue_events_044048.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11699#event-44048"
}
```



---

archive/issue_events_044049.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11699#event-44049"
}
```



---

archive/issue_events_044050.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11699#event-44050"
}
```



---

archive/issue_events_044051.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11699#event-44051"
}
```



---

archive/issue_events_044052.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11699#event-44052"
}
```



---

archive/issue_events_044053.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11699#event-44053"
}
```



---

archive/issue_events_044054.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11699#event-44054"
}
```



---

archive/issue_comments_155663.json:
```json
{
    "body": "Changing commit from \"\" to \"ddc2e812af55b6cc5abf3440423210b4bef0977d\"",
    "created_at": "2015-08-27T06:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155663",
    "user": "https://github.com/dandrake"
}
```

Changing commit from "" to "ddc2e812af55b6cc5abf3440423210b4bef0977d"



---

archive/issue_comments_155664.json:
```json
{
    "body": "Changing work_issues from \"failing doctest\" to \"failing doc build\"",
    "created_at": "2015-08-27T06:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155664",
    "user": "https://github.com/dandrake"
}
```

Changing work_issues from "failing doctest" to "failing doc build"



---

archive/issue_comments_155665.json:
```json
{
    "body": "<a id='comment:24'></a>\nI've ported this over to 6.9.beta3. It builds, works, and passes doctests, but the documentation doesn't build -- I have doctests with ``\\n`` in them, and these are not interpreted by Sphinx correctly, and then it complains about indentation being messed up. Advice for how to fix that welcome.\n\n---\nNew commits:\n|                                                                                                                                          |                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[ddc2e81](https://github.com/sagemath/sagetrac-mirror/commit/ddc2e812af55b6cc5abf3440423210b4bef0977d)|`add Matlab-style strings for matrix() constructor`|",
    "created_at": "2015-08-27T06:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155665",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:24'></a>
I've ported this over to 6.9.beta3. It builds, works, and passes doctests, but the documentation doesn't build -- I have doctests with ``\n`` in them, and these are not interpreted by Sphinx correctly, and then it complains about indentation being messed up. Advice for how to fix that welcome.

---
New commits:
|                                                                                                                                          |                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[ddc2e81](https://github.com/sagemath/sagetrac-mirror/commit/ddc2e812af55b6cc5abf3440423210b4bef0977d)|`add Matlab-style strings for matrix() constructor`|



---

archive/issue_comments_155666.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ddrake/string-matrix-11699\"",
    "created_at": "2015-08-27T06:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155666",
    "user": "https://github.com/dandrake"
}
```

Changing branch from "" to "u/ddrake/string-matrix-11699"



---

archive/issue_comments_155667.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [ddrake](#comment%3A24):\n> Advice for how to fix that welcome.\n\n\nUse\n\n```\nr\"\"\"\ndocstring\n\"\"\"\n```\ninstead of\n\n```\n\"\"\"\ndocstring\n\"\"\"\n```",
    "created_at": "2015-08-27T13:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155667",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>
Replying to [ddrake](#comment%3A24):
> Advice for how to fix that welcome.


Use

```
r"""
docstring
"""
```
instead of

```
"""
docstring
"""
```



---

archive/issue_comments_155668.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|\n|[5d006ef](https://github.com/sagemath/sagetrac-mirror/commit/5d006efd0c03be75475f75f23bb4071ed35ec44c)|`raw string for docstrings so Sphinx handles \\n -- thanks Jeroen Demeyer`|",
    "created_at": "2015-08-27T15:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155668",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
|[5d006ef](https://github.com/sagemath/sagetrac-mirror/commit/5d006efd0c03be75475f75f23bb4071ed35ec44c)|`raw string for docstrings so Sphinx handles \n -- thanks Jeroen Demeyer`|



---

archive/issue_comments_155669.json:
```json
{
    "body": "Changing commit from \"ddc2e812af55b6cc5abf3440423210b4bef0977d\" to \"5d006efd0c03be75475f75f23bb4071ed35ec44c\"",
    "created_at": "2015-08-27T15:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ddc2e812af55b6cc5abf3440423210b4bef0977d" to "5d006efd0c03be75475f75f23bb4071ed35ec44c"



---

archive/issue_comments_155670.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [jdemeyer](#comment%3A25):\n> Use\n> \n> ```\n> r\"\"\"\n> docstring\n> \"\"\"\n> ```\n> instead of\n> \n> ```\n> \"\"\"\n> docstring\n> \"\"\"\n> ```\n\n\nThat's it! Thank you.",
    "created_at": "2015-08-27T15:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155670",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:27'></a>
Replying to [jdemeyer](#comment%3A25):
> Use
> 
> ```
> r"""
> docstring
> """
> ```
> instead of
> 
> ```
> """
> docstring
> """
> ```


That's it! Thank you.



---

archive/issue_comments_155671.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-27T15:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155671",
    "user": "https://github.com/dandrake"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155672.json:
```json
{
    "body": "Changing work_issues from \"failing doc build\" to \"\"",
    "created_at": "2015-08-27T15:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155672",
    "user": "https://github.com/dandrake"
}
```

Changing work_issues from "failing doc build" to ""



---

archive/issue_comments_155673.json:
```json
{
    "body": "<a id='comment:29'></a>\nFailing doctest\n\n```\nsage -t --long src/sage/misc/sageinspect.py\n**********************************************************************\nFile \"src/sage/misc/sageinspect.py\", line 1959, in sage.misc.sageinspect.sage_getsourcelines\nFailed example:\n    sage_getsourcelines(matrix)[1]\nExpected:\n    732\nGot:\n    867\n**********************************************************************\n1 item had failures:\n   1 of  28 in sage.misc.sageinspect.sage_getsourcelines\n    [284 tests, 1 failure, 28.10 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/misc/sageinspect.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2015-10-21T20:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155673",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>
Failing doctest

```
sage -t --long src/sage/misc/sageinspect.py
**********************************************************************
File "src/sage/misc/sageinspect.py", line 1959, in sage.misc.sageinspect.sage_getsourcelines
Failed example:
    sage_getsourcelines(matrix)[1]
Expected:
    732
Got:
    867
**********************************************************************
1 item had failures:
   1 of  28 in sage.misc.sageinspect.sage_getsourcelines
    [284 tests, 1 failure, 28.10 s]
----------------------------------------------------------------------
sage -t --long src/sage/misc/sageinspect.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_155674.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-21T20:03:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155674",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155675.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#24742\"",
    "created_at": "2018-03-01T16:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155675",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#24742"



---

archive/issue_comments_155676.json:
```json
{
    "body": "<a id='comment:32'></a>\nI don't plan to work on this, but if anybody does: it should be on top of #24742.",
    "created_at": "2018-03-01T16:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155676",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
I don't plan to work on this, but if anybody does: it should be on top of #24742.



---

archive/issue_comments_155677.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,10 @@\n In https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/LUMAfoXsz-UJ Jason Grout mentioned that it would be convenient if Sage accepted the following Matlab syntax for creating matrices:\n \n ```\n-sage: a=matrix(\"1 2 3; 4 5 6; 7 8 9\")\n-sage: a\n-matrix([[1, 2, 3],\n-         [4, 5, 6],\n-         [7, 8, 9]])\n+sage: matrix(\"1 2 3; 4 5 6; 7 8 9\")\n+[1 2 3]\n+[4 5 6]\n+[7 8 9]\n ```\n \n This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.\n-\n-Apply attachment:trac_11699_matlab_input_to_matrix.patch\n``````\n",
    "created_at": "2018-03-01T16:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11699#issuecomment-155677",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,10 @@
 In https://groups.google.com/d/msg/sage-devel/p-nrpKUBMm8/LUMAfoXsz-UJ Jason Grout mentioned that it would be convenient if Sage accepted the following Matlab syntax for creating matrices:
 
 ```
-sage: a=matrix("1 2 3; 4 5 6; 7 8 9")
-sage: a
-matrix([[1, 2, 3],
-         [4, 5, 6],
-         [7, 8, 9]])
+sage: matrix("1 2 3; 4 5 6; 7 8 9")
+[1 2 3]
+[4 5 6]
+[7 8 9]
 ```
 
 This should be an easy change to the `matrix()` command, and would be very convenient for users, even those with no Matlab background.
-
-Apply attachment:trac_11699_matlab_input_to_matrix.patch
``````

