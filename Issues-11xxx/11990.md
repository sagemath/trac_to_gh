# Issue 11990: infinite sums that are infinite produce errors

archive/issues_011818.json:
```json
{
    "assignees": [],
    "body": "Look at the following code:\n\n```\nsage: m = var('m')\nsage: sum(m, m, 0, oo)\nTraceback (most recent call last):\n...\nValueError: Computation failed since Maxima requested additional\nconstraints; using the 'assume' command before summation *may* help\n(example of legal syntax is 'assume(m>0)', see `assume?` for more \ndetails)\nIs  m  positive or zero?\n```\nBut inside the sum, it should be clear what `m` is. Using one of or both of the commands\n\n```\nsage: assume(m>=0) \nsage: assume(m, 'integer')\n```\ndoes not change the result. Execution of \n\n```\nsage: maxima.sum(m, m, 0, oo)\n```\nresults in the same (except that a `TypeError` is thrown).\n\nA different behaviour brings the following example\n\n```\nsage: m = var('m')\nsage: sum(2^m, m, 0, oo)\nTraceback (most recent call last):\n...\nValueError: Sum is divergent.\n```\nWhereas\n\n```\nsage: maxima.sum(2^m, m, 0, oo)\ninf\n```\n\n\nDepends on #13364\n\nAssignee: **@burcin**\n\nCC:  @kcrisman\n\nKeywords: **infinite sums, infinite, maxima**\n\nBranch/Commit: **[b95820a](https://github.com/sagemath/sagetrac-mirror/commit/b95820a6e73023196e480cb6329122f6aa86dd51)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Peter Bruin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11990_\n\n",
    "closed_at": "2014-05-21T15:33:41Z",
    "created_at": "2011-11-04T15:21:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "infinite sums that are infinite produce errors",
    "type": "issue",
    "updated_at": "2014-05-21T15:33:41Z",
    "url": "https://github.com/sagemath/sage/issues/11990",
    "user": "https://github.com/dkrenn"
}
```
Look at the following code:

```
sage: m = var('m')
sage: sum(m, m, 0, oo)
Traceback (most recent call last):
...
ValueError: Computation failed since Maxima requested additional
constraints; using the 'assume' command before summation *may* help
(example of legal syntax is 'assume(m>0)', see `assume?` for more 
details)
Is  m  positive or zero?
```
But inside the sum, it should be clear what `m` is. Using one of or both of the commands

```
sage: assume(m>=0) 
sage: assume(m, 'integer')
```
does not change the result. Execution of 

```
sage: maxima.sum(m, m, 0, oo)
```
results in the same (except that a `TypeError` is thrown).

A different behaviour brings the following example

```
sage: m = var('m')
sage: sum(2^m, m, 0, oo)
Traceback (most recent call last):
...
ValueError: Sum is divergent.
```
Whereas

```
sage: maxima.sum(2^m, m, 0, oo)
inf
```


Depends on #13364

Assignee: **@burcin**

CC:  @kcrisman

Keywords: **infinite sums, infinite, maxima**

Branch/Commit: **[b95820a](https://github.com/sagemath/sagetrac-mirror/commit/b95820a6e73023196e480cb6329122f6aa86dd51)**

Reviewer: **Travis Scrimshaw**

Author: **Peter Bruin**

_Issue created by migration from https://trac.sagemath.org/ticket/11990_





---

archive/issue_events_143221.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2011-11-04T15:21:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143221"
}
```



---

archive/issue_events_143222.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2011-11-04T15:21:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "component: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143222"
}
```



---

archive/issue_events_143223.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2011-11-04T15:21:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143223"
}
```



---

archive/issue_events_143224.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2011-11-04T15:21:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143224"
}
```



---

archive/issue_comments_129520.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,18 +24,3 @@\n ```\n results in the same (except that a `TypeError` is thrown).\n \n-A different behaviour brings the following example\n-\n-```\n-sage: m = var('m')\n-sage: sum(2^m, m, 0, oo)\n-Traceback (most recent call last):\n-...\n-ValueError: Sum is divergent.\n-```\n-Whereas\n-\n-```\n-sage: maxima.sum(2^m, m, 0, oo)\n-inf\n-```\n``````\n",
    "created_at": "2011-11-04T16:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129520",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,18 +24,3 @@
 ```
 results in the same (except that a `TypeError` is thrown).
 
-A different behaviour brings the following example
-
-```
-sage: m = var('m')
-sage: sum(2^m, m, 0, oo)
-Traceback (most recent call last):
-...
-ValueError: Sum is divergent.
-```
-Whereas
-
-```
-sage: maxima.sum(2^m, m, 0, oo)
-inf
-```
``````




---

archive/issue_comments_129521.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nShort story is that there are many things like this in Maxima.  See #3732, for example.  This is a good ticket, but to be fair, it is nearly impossible to guarantee that these interactions will never happen - the Maxima devs would rightly point out that figuring out when all forms will be equivalent is not decidable in polynomial time or something like that.\n\nI'm moving the other one to #11987, as it's almost certainly the same problem.",
    "created_at": "2011-11-04T16:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129521",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'>Comment 1:</a>
Short story is that there are many things like this in Maxima.  See #3732, for example.  This is a good ticket, but to be fair, it is nearly impossible to guarantee that these interactions will never happen - the Maxima devs would rightly point out that figuring out when all forms will be equivalent is not decidable in polynomial time or something like that.

I'm moving the other one to #11987, as it's almost certainly the same problem.



---

archive/issue_comments_129522.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,3 +24,19 @@\n ```\n results in the same (except that a `TypeError` is thrown).\n \n+A different behaviour brings the following example\n+\n+```\n+sage: m = var('m')\n+sage: sum(2^m, m, 0, oo)\n+Traceback (most recent call last):\n+...\n+ValueError: Sum is divergent.\n+```\n+Whereas\n+\n+```\n+sage: maxima.sum(2^m, m, 0, oo)\n+inf\n+```\n+\n``````\n",
    "created_at": "2011-11-06T02:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129522",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,3 +24,19 @@
 ```
 results in the same (except that a `TypeError` is thrown).
 
+A different behaviour brings the following example
+
+```
+sage: m = var('m')
+sage: sum(2^m, m, 0, oo)
+Traceback (most recent call last):
+...
+ValueError: Sum is divergent.
+```
+Whereas
+
+```
+sage: maxima.sum(2^m, m, 0, oo)
+inf
+```
+
``````




---

archive/issue_comments_129523.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nUpon further reflection, what are we seeking for in the second example (which has absolutely nothing to do with #11987, since it really does diverge, my apologies!)?    I think that Sage just agrees to raise errors for divergent integrals and sums, not infinity, so the behavior is correct from that point of view.\n\nOtherwise this is another example of #3732, unfortunately.",
    "created_at": "2011-11-06T02:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129523",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'>Comment 2:</a>
Upon further reflection, what are we seeking for in the second example (which has absolutely nothing to do with #11987, since it really does diverge, my apologies!)?    I think that Sage just agrees to raise errors for divergent integrals and sums, not infinity, so the behavior is correct from that point of view.

Otherwise this is another example of #3732, unfortunately.



---

archive/issue_comments_129524.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI don't see what the expected behavior here is. Do you want `sum()` to return `infinity` instead of raising a `ValueError` with the message `Sum is divergent.`?\n\nNote that if you state that the variable is positive, the first example also raises an error:\n\n```\nsage: n = var('n')\nsage: assume(n>0)\nsage: sum(n, n, 0, infinity)\n...\nValueError: Sum is divergent.\n```",
    "created_at": "2012-11-15T12:14:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129524",
    "user": "https://github.com/burcin"
}
```

<a id='comment:3'>Comment 3:</a>
I don't see what the expected behavior here is. Do you want `sum()` to return `infinity` instead of raising a `ValueError` with the message `Sum is divergent.`?

Note that if you state that the variable is positive, the first example also raises an error:

```
sage: n = var('n')
sage: assume(n>0)
sage: sum(n, n, 0, infinity)
...
ValueError: Sum is divergent.
```



---

archive/issue_comments_129525.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBurcin, if you agree with me on this (that raising an error is appropriate), then perhaps this should be closed as wontfix?  Or should we change all sums *and* integrals which really do \"diverge monotonically to infinity\" (as opposed to some other kind of divergence) to return `oo`?",
    "created_at": "2012-11-15T14:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129525",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'>Comment 4:</a>
Burcin, if you agree with me on this (that raising an error is appropriate), then perhaps this should be closed as wontfix?  Or should we change all sums *and* integrals which really do "diverge monotonically to infinity" (as opposed to some other kind of divergence) to return `oo`?



---

archive/issue_comments_129526.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nIf we know that a sum diverge monotonically to infinity, then the output should say that, i.e. should be `oo`. \n\nThe reason I open the ticket is, that all sums above have the same behavior, but the output is always different, which should not be.\n\nAnd, I don't see (from a user point of view) any reason, that in \n\n```\nsum(m, m, 0, oo)\n``` \nSage asks \"Is  m  positive or zero?\" and in \n\n```\nsum(2^m, m, 0, oo)\n``` \nnot.",
    "created_at": "2012-11-15T14:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129526",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'>Comment 5:</a>
If we know that a sum diverge monotonically to infinity, then the output should say that, i.e. should be `oo`. 

The reason I open the ticket is, that all sums above have the same behavior, but the output is always different, which should not be.

And, I don't see (from a user point of view) any reason, that in 

```
sum(m, m, 0, oo)
``` 
Sage asks "Is  m  positive or zero?" and in 

```
sum(2^m, m, 0, oo)
``` 
not.



---

archive/issue_comments_129527.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\n> If we know that a sum diverge monotonically to infinity, then the output should say that, i.e. should be `oo`. \n\nWell, that is the question.\n> The reason I open the ticket is, that all sums above have the same behavior, but the output is always different, which should not be.\n\nWell, `maxima.sum` is not really applicable, because that is a Maxima element.  That's sort of like complaining that mpmath returns `mpf` numbers - you aren't asking for a Sage element.  So it still sort of reverts to the big question.\n> And, I don't see (from a user point of view) any reason, that in \n> \n> ```\n> sum(m, m, 0, oo)\n> ``` \n> Sage asks \"Is  m  positive or zero?\" and in \n\nI'll note that now Sage (via Maxima) asks \"Is  m  positive, negative, or zero?\"\n> \n> ```\n> sum(2^m, m, 0, oo)\n> ``` \n> not.\n\nRight, as I said in [comment:1](#comment%3A1), there are lots of things like this in Maxima (extra interactions).  We can report it upstream, but it may be that the algorithm they use just has to ask this. \n\nIt sounds like you're motivated on this one, and certainly it would be great to get the right error and not the question.\n\n```\n\n(%i6) load(simplify_sum);\n(%o6) /Users/.../sage-5.2/local/share/maxima/5.26.0/share/c\\\nontrib/solve_rec/simplify_sum.mac\n(%i7) simplify_sum(sum(m,m,0,inf));\nIs  m  positive, negative, or zero?\n(%i3) assume(m>0);\n(%o3)                               [m > 0]\n(%i4) simplify_sum(sum(m,m,0,inf));\n\nsum: sum is divergent.\n#0: simplify_sum(expr='sum(m,m,0,inf))\n -- an error. To debug this try: debugmode(true);\n```\nYou could ask about this on the Maxima list or report it on their tracker!  Incidentally,\n\n```\n\nsage: var('m')\nm\nsage: assume(m>0)\nsage: sum(m,m,0,oo)\n\nValueError: Sum is divergent.\n```\nso something must have changed in the meantime.",
    "created_at": "2012-11-15T16:15:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129527",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'>Comment 6:</a>
> If we know that a sum diverge monotonically to infinity, then the output should say that, i.e. should be `oo`. 

Well, that is the question.
> The reason I open the ticket is, that all sums above have the same behavior, but the output is always different, which should not be.

Well, `maxima.sum` is not really applicable, because that is a Maxima element.  That's sort of like complaining that mpmath returns `mpf` numbers - you aren't asking for a Sage element.  So it still sort of reverts to the big question.
> And, I don't see (from a user point of view) any reason, that in 
> 
> ```
> sum(m, m, 0, oo)
> ``` 
> Sage asks "Is  m  positive or zero?" and in 

I'll note that now Sage (via Maxima) asks "Is  m  positive, negative, or zero?"
> 
> ```
> sum(2^m, m, 0, oo)
> ``` 
> not.

Right, as I said in [comment:1](#comment%3A1), there are lots of things like this in Maxima (extra interactions).  We can report it upstream, but it may be that the algorithm they use just has to ask this. 

It sounds like you're motivated on this one, and certainly it would be great to get the right error and not the question.

```

(%i6) load(simplify_sum);
(%o6) /Users/.../sage-5.2/local/share/maxima/5.26.0/share/c\
ontrib/solve_rec/simplify_sum.mac
(%i7) simplify_sum(sum(m,m,0,inf));
Is  m  positive, negative, or zero?
(%i3) assume(m>0);
(%o3)                               [m > 0]
(%i4) simplify_sum(sum(m,m,0,inf));

sum: sum is divergent.
#0: simplify_sum(expr='sum(m,m,0,inf))
 -- an error. To debug this try: debugmode(true);
```
You could ask about this on the Maxima list or report it on their tracker!  Incidentally,

```

sage: var('m')
m
sage: assume(m>0)
sage: sum(m,m,0,oo)

ValueError: Sum is divergent.
```
so something must have changed in the meantime.



---

archive/issue_events_143225.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2012-11-16T09:57:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143225"
}
```



---

archive/issue_comments_129528.json:
```json
{
    "body": "Reviewer: **Burcin Erocal**",
    "created_at": "2012-11-16T09:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129528",
    "user": "https://github.com/burcin"
}
```

Reviewer: **Burcin Erocal**



---

archive/issue_comments_129529.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@kcrisman](#comment%3A6):\n\n> > The reason I open the ticket is, that all sums above have the same behavior, but the output is always different, which should not be.\n\n> Well, `maxima.sum` is not really applicable, because that is a Maxima element.  That's sort of like complaining that mpmath returns `mpf` numbers - you aren't asking for a Sage element.  So it still sort of reverts to the big question.\n\nExactly. The behavior of the `sum()` function in Sage is consistent. `maxima.sum()` is just a wrapper to call Maxima. That is also consistent with Maxima behavior.\n\nThe expression `sum(m, m, 0, oo)` is divergent if `m != 0` and `0` if `m=0`. So the best we can do without the assumption Maxima is asking for is to leave it unevaluated.\n\nOn the question of shall we raise an error or return `oo`: Leaving aside the problem that it is usually not that easy to decide which type of infinity to return, I would like to get an error as soon as a divergent sum is encountered. If this expression was part of a larger one, and we decide that its divergent after a substitution, there isn't much point in carrying on evaluating the expression.\n\nIn Sage there is one exception to this rule, we return different types of infinity from special functions if you hit a pole. For example `gamma(-1) -> Infinity`. This is compatible with MMA, although it contradicts Maple or GiNaC. This allows us to do `(1/gamma(n)).subs(n=-1) -> 0` instead of raising an error. Compared to what goes on when evaluating `sum()`, `gamma()` is a fundamental operation. This convenience to avoid special casing potential poles of `gamma()` is well worth the bug hunting after a complex expression ends up evaluating to `oo`.\n\n\nSince we already have a ticket about handling interactive prompts from Maxima, I suggest we close this ticket.",
    "created_at": "2012-11-16T09:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129529",
    "user": "https://github.com/burcin"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@kcrisman](#comment%3A6):

> > The reason I open the ticket is, that all sums above have the same behavior, but the output is always different, which should not be.

> Well, `maxima.sum` is not really applicable, because that is a Maxima element.  That's sort of like complaining that mpmath returns `mpf` numbers - you aren't asking for a Sage element.  So it still sort of reverts to the big question.

Exactly. The behavior of the `sum()` function in Sage is consistent. `maxima.sum()` is just a wrapper to call Maxima. That is also consistent with Maxima behavior.

The expression `sum(m, m, 0, oo)` is divergent if `m != 0` and `0` if `m=0`. So the best we can do without the assumption Maxima is asking for is to leave it unevaluated.

On the question of shall we raise an error or return `oo`: Leaving aside the problem that it is usually not that easy to decide which type of infinity to return, I would like to get an error as soon as a divergent sum is encountered. If this expression was part of a larger one, and we decide that its divergent after a substitution, there isn't much point in carrying on evaluating the expression.

In Sage there is one exception to this rule, we return different types of infinity from special functions if you hit a pole. For example `gamma(-1) -> Infinity`. This is compatible with MMA, although it contradicts Maple or GiNaC. This allows us to do `(1/gamma(n)).subs(n=-1) -> 0` instead of raising an error. Compared to what goes on when evaluating `sum()`, `gamma()` is a fundamental operation. This convenience to avoid special casing potential poles of `gamma()` is well worth the bug hunting after a complex expression ends up evaluating to `oo`.


Since we already have a ticket about handling interactive prompts from Maxima, I suggest we close this ticket.



---

archive/issue_comments_129530.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\n> Exactly. The behavior of the `sum()` function in Sage is consistent. `maxima.sum()` is just a wrapper to call Maxima. That is also consistent with Maxima behavior.\n\nYes.\n> The expression `sum(m, m, 0, oo)` is divergent if `m != 0` and `0` if `m=0`. So the best we can do without the assumption Maxima is asking for is to leave it unevaluated.\n\nWell, I don't know about this.  In some sense, this should be a \"dummy variable\" in which case the sum is clearly 0+1+2+... but for consistency perhaps this is okay in our case.  Otherwise I do agree with dkrenn that `sum(2^m, m, 0, oo)` should also be asking a question.  But this would be an upstream issue, more or less.\n> On the question of shall we raise an error or return `oo`: Leaving aside the problem that it is usually not that easy to decide which type of infinity to return, I would like to get an error as soon as a divergent sum is encountered. If this expression was part of a larger one, and we decide that its divergent after a substitution, there isn't much point in carrying on evaluating the expression.\n> Since we already have a ticket about handling interactive prompts from Maxima, I suggest we close this ticket.\n\nI guess I would be interested in whether Maxima considers the discrepancy between `sum(2^m, m, 0, oo)` and `sum(m, m, 0, oo)` behavior is a bug.  After all, `m` should really be a dummy variable!  I've actually sent an email and so request to not close this ticket, since this is a (slightly) different issue than the overall issue of Maxima giving interactive prompts.  After all, Maxima's `integrate(m,m,0,inf)` doesn't ask such a question, but says it's divergent.",
    "created_at": "2012-11-16T13:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129530",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'>Comment 8:</a>
> Exactly. The behavior of the `sum()` function in Sage is consistent. `maxima.sum()` is just a wrapper to call Maxima. That is also consistent with Maxima behavior.

Yes.
> The expression `sum(m, m, 0, oo)` is divergent if `m != 0` and `0` if `m=0`. So the best we can do without the assumption Maxima is asking for is to leave it unevaluated.

Well, I don't know about this.  In some sense, this should be a "dummy variable" in which case the sum is clearly 0+1+2+... but for consistency perhaps this is okay in our case.  Otherwise I do agree with dkrenn that `sum(2^m, m, 0, oo)` should also be asking a question.  But this would be an upstream issue, more or less.
> On the question of shall we raise an error or return `oo`: Leaving aside the problem that it is usually not that easy to decide which type of infinity to return, I would like to get an error as soon as a divergent sum is encountered. If this expression was part of a larger one, and we decide that its divergent after a substitution, there isn't much point in carrying on evaluating the expression.
> Since we already have a ticket about handling interactive prompts from Maxima, I suggest we close this ticket.

I guess I would be interested in whether Maxima considers the discrepancy between `sum(2^m, m, 0, oo)` and `sum(m, m, 0, oo)` behavior is a bug.  After all, `m` should really be a dummy variable!  I've actually sent an email and so request to not close this ticket, since this is a (slightly) different issue than the overall issue of Maxima giving interactive prompts.  After all, Maxima's `integrate(m,m,0,inf)` doesn't ask such a question, but says it's divergent.



---

archive/issue_comments_129531.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2012-11-16T13:26:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129531",
    "user": "https://github.com/kcrisman"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_events_143226.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-16T13:26:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143226"
}
```



---

archive/issue_events_143227.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-16T13:26:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143227"
}
```



---

archive/issue_comments_129532.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nI've pushed 07a0c810eade (to Maxima Git repo) which changes the behavior of ev(sum(m, m, 0, inf), simpsum=true) so that it immediately reports \"sum is divergent\" without asking about the sign of m. I believe this clears up the superfluous asksign which Sage bumped into.\n\nThis change will appear in the next version (5.29) of Maxima, which is scheduled for early December 2012.",
    "created_at": "2012-11-27T18:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129532",
    "user": "https://github.com/sagetrac-robert-dodier"
}
```

<a id='comment:10'>Comment 10:</a>
I've pushed 07a0c810eade (to Maxima Git repo) which changes the behavior of ev(sum(m, m, 0, inf), simpsum=true) so that it immediately reports "sum is divergent" without asking about the sign of m. I believe this clears up the superfluous asksign which Sage bumped into.

This change will appear in the next version (5.29) of Maxima, which is scheduled for early December 2012.



---

archive/issue_comments_129533.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2012-11-28T02:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129533",
    "user": "https://github.com/kcrisman"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_129534.json:
```json
{
    "body": "Changed reviewer from **Burcin Erocal** to none",
    "created_at": "2012-11-28T02:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129534",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Burcin Erocal** to none



---

archive/issue_events_143228.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-28T02:20:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143228"
}
```



---

archive/issue_events_143229.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-28T02:20:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143229"
}
```



---

archive/issue_comments_129535.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nGreat!  Can you put a link to that here, Robert?  I'm having trouble getting a link to that change set when I browse the Sourceforge git thing - probably just not familiar with the interface, my apologies.",
    "created_at": "2012-11-28T02:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129535",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'>Comment 11:</a>
Great!  Can you put a link to that here, Robert?  I'm having trouble getting a link to that change set when I browse the Sourceforge git thing - probably just not familiar with the interface, my apologies.



---

archive/issue_comments_129536.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nhttp://sourceforge.net/p/maxima/code/ci/07a0c810eade1d26565e477ab17aa2a6121f875e/ seems to be a suitable link.",
    "created_at": "2012-11-28T08:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129536",
    "user": "https://github.com/sagetrac-robert-dodier"
}
```

<a id='comment:12'>Comment 12:</a>
http://sourceforge.net/p/maxima/code/ci/07a0c810eade1d26565e477ab17aa2a6121f875e/ seems to be a suitable link.



---

archive/issue_events_143230.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-13T02:35:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143230"
}
```



---

archive/issue_events_143231.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-13T02:35:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143231"
}
```



---

archive/issue_comments_129537.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nThis should get fixed whenever we upgrade to upstream, which is now 5.29.1.  I'm putting 'needs work' for that and of course making a patch to check that this works now.",
    "created_at": "2012-12-13T02:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129537",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'>Comment 13:</a>
This should get fixed whenever we upgrade to upstream, which is now 5.29.1.  I'm putting 'needs work' for that and of course making a patch to check that this works now.



---

archive/issue_comments_129538.json:
```json
{
    "body": "Dependencies: **#13364**",
    "created_at": "2012-12-13T02:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129538",
    "user": "https://github.com/kcrisman"
}
```

Dependencies: **#13364**



---

archive/issue_events_143232.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143232"
}
```



---

archive/issue_events_143233.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143233"
}
```



---

archive/issue_events_143234.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143234"
}
```



---

archive/issue_events_143235.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143235"
}
```



---

archive/issue_events_143236.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143236"
}
```



---

archive/issue_events_143237.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143237"
}
```



---

archive/issue_comments_129539.json:
```json
{
    "body": "Changed upstream from **Fixed upstream, but not in a stable release.** to none",
    "created_at": "2014-05-20T22:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129539",
    "user": "https://github.com/pjbruin"
}
```

Changed upstream from **Fixed upstream, but not in a stable release.** to none



---

archive/issue_comments_129540.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nSince this has now been fixed, all we need to do is to add a doctest.",
    "created_at": "2014-05-20T22:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129540",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:17'>Comment 17:</a>
Since this has now been fixed, all we need to do is to add a doctest.



---

archive/issue_comments_129541.json:
```json
{
    "body": "Branch: **[u/pbruin/11990-divergent_sum_error](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/11990-divergent_sum_error)**",
    "created_at": "2014-05-20T23:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129541",
    "user": "https://github.com/pjbruin"
}
```

Branch: **[u/pbruin/11990-divergent_sum_error](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/11990-divergent_sum_error)**



---

archive/issue_events_143238.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-20T23:30:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143238"
}
```



---

archive/issue_events_143239.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-20T23:30:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143239"
}
```



---

archive/issue_events_143240.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-20T23:30:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143240"
}
```



---

archive/issue_events_143241.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-20T23:30:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143241"
}
```



---

archive/issue_comments_129542.json:
```json
{
    "body": "Author: **Peter Bruin**",
    "created_at": "2014-05-20T23:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129542",
    "user": "https://github.com/pjbruin"
}
```

Author: **Peter Bruin**



---

archive/issue_events_143242.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-20T23:30:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143242"
}
```



---

archive/issue_comments_129543.json:
```json
{
    "body": "Commit: **[73e1805](https://github.com/sagemath/sagetrac-mirror/commit/73e180573040b85cbcc86ff18bd4fba1fe2fc836)**",
    "created_at": "2014-05-20T23:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129543",
    "user": "https://github.com/pjbruin"
}
```

Commit: **[73e1805](https://github.com/sagemath/sagetrac-mirror/commit/73e180573040b85cbcc86ff18bd4fba1fe2fc836)**



---

archive/issue_comments_129544.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b95820a6e73023196e480cb6329122f6aa86dd51\">b95820a</a></td><td><code>Trac 11990: doctest for divergent sum error</code></td></tr></table>\n",
    "created_at": "2014-05-20T23:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129544",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>Comment 19:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b95820a6e73023196e480cb6329122f6aa86dd51">b95820a</a></td><td><code>Trac 11990: doctest for divergent sum error</code></td></tr></table>




---

archive/issue_comments_129545.json:
```json
{
    "body": "Changed commit from **[73e1805](https://github.com/sagemath/sagetrac-mirror/commit/73e180573040b85cbcc86ff18bd4fba1fe2fc836)** to **[b95820a](https://github.com/sagemath/sagetrac-mirror/commit/b95820a6e73023196e480cb6329122f6aa86dd51)**",
    "created_at": "2014-05-20T23:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129545",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[73e1805](https://github.com/sagemath/sagetrac-mirror/commit/73e180573040b85cbcc86ff18bd4fba1fe2fc836)** to **[b95820a](https://github.com/sagemath/sagetrac-mirror/commit/b95820a6e73023196e480cb6329122f6aa86dd51)**



---

archive/issue_comments_129546.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2014-05-21T05:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129546",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_143243.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-21T05:10:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143243"
}
```



---

archive/issue_events_143244.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-21T05:10:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143244"
}
```



---

archive/issue_comments_129547.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nLGTM",
    "created_at": "2014-05-21T05:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129547",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'>Comment 20:</a>
LGTM



---

archive/issue_comments_129548.json:
```json
{
    "body": "Changed branch from **[u/pbruin/11990-divergent_sum_error](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/11990-divergent_sum_error)** to **[b95820a](https://github.com/sagemath/sagetrac-mirror/commit/b95820a6e73023196e480cb6329122f6aa86dd51)**",
    "created_at": "2014-05-21T15:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11990#issuecomment-129548",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/pbruin/11990-divergent_sum_error](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/11990-divergent_sum_error)** to **[b95820a](https://github.com/sagemath/sagetrac-mirror/commit/b95820a6e73023196e480cb6329122f6aa86dd51)**



---

archive/issue_events_143245.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-21T15:33:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143245"
}
```



---

archive/issue_events_143246.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "16e45c2c0a8d0ce8ff031cef42051ff88c8e4449",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-05-21T15:33:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11990",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11990#event-143246"
}
```
