# Issue 11705: Port Sage to SUSE Linux Power 7 (ppc64).

archive/issues_011533.json:
```json
{
    "body": "Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n\nThis is the only test failure with sage-5.12.beta1:\n\n```\nsage -t devel/sage/sage/functions/special.py\n**********************************************************************\nFile \"devel/sage/sage/functions/special.py\", line 853, in sage.functions.special.elliptic_j.inverse_jacobi\nFailed example:\n    P = plot(inverse_jacobi('sn', x, 0.5), 0, 1, plot_points=20)\nExpected nothing\nGot:\n    <BLANKLINE>\n    ;;;\n    ;;; Stack overflow.\n    ;;; Jumping to the outermost toplevel prompt\n    ;;;\n    <BLANKLINE>\n**********************************************************************\nFile \"devel/sage/sage/functions/special.py\", line 1014, in sage.functions.special.elliptic_j.EllipticKC\nFailed example:\n    elliptic_f(RR(pi/2), 0.5)\nExpected:\n    1.85407467730137\nGot:\n    <BLANKLINE>\n    ;;;\n    ;;; Stack overflow.\n    ;;; Jumping to the outermost toplevel prompt\n    ;;;\n    <BLANKLINE>\n    sage172\n**********************************************************************\nFile \"devel/sage/sage/functions/special.py\", line 1023, in sage.functions.special.elliptic_j.EllipticKC.__init__\nFailed example:\n    elliptic_f(RR(pi/2), 0.5)\nExpected:\n    1.85407467730137\nGot:\n    <BLANKLINE>\n    ;;;\n    ;;; Stack overflow.\n    ;;; Jumping to the outermost toplevel prompt\n    ;;;\n    <BLANKLINE>\n    sage174\n**********************************************************************\n3 items had failures:\n   1 of   3 in sage.functions.special.elliptic_j.EllipticKC\n   1 of   3 in sage.functions.special.elliptic_j.EllipticKC.__init__\n   1 of   6 in sage.functions.special.elliptic_j.inverse_jacobi\n    [96 tests, 3 failures, 5.19 s]\n```\n\n**Assignee:** drkirkby\n\n**CC:**  @nexttime @benjaminfjones @zimmermann6 mariah jpflori\n\n**Keywords:** sd32 sd35.5\n\n**Reviewer:** Jean-Pierre Flori, Fran\u00e7ois Bissey\n\n**Author:** Paul Zimmermann, Jeroen Demeyer\n\n**Dependencies:** #12829, #12832, #14098, #14151\n\nIssue created by migration from https://trac.sagemath.org/ticket/11705\n\n",
    "closed_at": "2014-11-25T19:03:33Z",
    "created_at": "2011-08-18T19:39:34Z",
    "labels": [
        "component: porting",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "title": "Port Sage to SUSE Linux Power 7 (ppc64).",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/11705",
    "user": "https://github.com/williamstein"
}
```
Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 

This is the only test failure with sage-5.12.beta1:

```
sage -t devel/sage/sage/functions/special.py
**********************************************************************
File "devel/sage/sage/functions/special.py", line 853, in sage.functions.special.elliptic_j.inverse_jacobi
Failed example:
    P = plot(inverse_jacobi('sn', x, 0.5), 0, 1, plot_points=20)
Expected nothing
Got:
    <BLANKLINE>
    ;;;
    ;;; Stack overflow.
    ;;; Jumping to the outermost toplevel prompt
    ;;;
    <BLANKLINE>
**********************************************************************
File "devel/sage/sage/functions/special.py", line 1014, in sage.functions.special.elliptic_j.EllipticKC
Failed example:
    elliptic_f(RR(pi/2), 0.5)
Expected:
    1.85407467730137
Got:
    <BLANKLINE>
    ;;;
    ;;; Stack overflow.
    ;;; Jumping to the outermost toplevel prompt
    ;;;
    <BLANKLINE>
    sage172
**********************************************************************
File "devel/sage/sage/functions/special.py", line 1023, in sage.functions.special.elliptic_j.EllipticKC.__init__
Failed example:
    elliptic_f(RR(pi/2), 0.5)
Expected:
    1.85407467730137
Got:
    <BLANKLINE>
    ;;;
    ;;; Stack overflow.
    ;;; Jumping to the outermost toplevel prompt
    ;;;
    <BLANKLINE>
    sage174
**********************************************************************
3 items had failures:
   1 of   3 in sage.functions.special.elliptic_j.EllipticKC
   1 of   3 in sage.functions.special.elliptic_j.EllipticKC.__init__
   1 of   6 in sage.functions.special.elliptic_j.inverse_jacobi
    [96 tests, 3 failures, 5.19 s]
```

**Assignee:** drkirkby

**CC:**  @nexttime @benjaminfjones @zimmermann6 mariah jpflori

**Keywords:** sd32 sd35.5

**Reviewer:** Jean-Pierre Flori, Fran√ßois Bissey

**Author:** Paul Zimmermann, Jeroen Demeyer

**Dependencies:** #12829, #12832, #14098, #14151

Issue created by migration from https://trac.sagemath.org/ticket/11705





---

archive/issue_comments_123325.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n+\n+This is a metaticket, with links to other tickets for specific issues.\n+\n+* Building Tachyon: #11706\n``````\n",
    "created_at": "2011-08-18T19:45:23Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123325",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
+
+This is a metaticket, with links to other tickets for specific issues.
+
+* Building Tachyon: #11706
``````




---

archive/issue_comments_123326.json:
```json
{
    "body": "<a id='comment:2'></a>\nI am actually in the process of commissioning such hardware and suse will be on some nodes (Aix 6.1 on the other nodes).",
    "created_at": "2011-08-18T20:33:30Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123326",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'></a>
I am actually in the process of commissioning such hardware and suse will be on some nodes (Aix 6.1 on the other nodes).



---

archive/issue_comments_123327.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,5 @@\n \n This is a metaticket, with links to other tickets for specific issues.\n \n-* Building Tachyon: #11706\n+* Building Tachyon: #11706  (with patch; needs review)\n+* Maxima build gets nowhere: #11708\n``````\n",
    "created_at": "2011-08-18T21:23:22Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123327",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,5 @@
 
 This is a metaticket, with links to other tickets for specific issues.
 
-* Building Tachyon: #11706
+* Building Tachyon: #11706  (with patch; needs review)
+* Maxima build gets nowhere: #11708
``````




---

archive/issue_comments_123328.json:
```json
{
    "body": "<a id='comment:4'></a>\nfbissey -- do you want an account on skynet, so you can help us with porting to SUSE on a nice new \"IBM Power 750 Express server\" that we have?",
    "created_at": "2011-08-18T21:24:00Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123328",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:4'></a>
fbissey -- do you want an account on skynet, so you can help us with porting to SUSE on a nice new "IBM Power 750 Express server" that we have?



---

archive/issue_comments_123329.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis is the computer we have access to:  http://www-03.ibm.com/systems/power/hardware/750/index.html",
    "created_at": "2011-08-18T21:25:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123329",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:5'></a>
This is the computer we have access to:  http://www-03.ibm.com/systems/power/hardware/750/index.html



---

archive/issue_comments_123330.json:
```json
{
    "body": "<a id='comment:7'></a>\nWe are getting 13 power755 locally but they'll go live at the end of September - I am currently installing a power720 that is meant to be a deployment server. Got a BlueGene/L and BlueGene/P as well but that would be another exercise :)\n\nThe big pity as far as I am concerned is that there is no Gentoo-prefix for linux-ppc otherwise I could have been up and running faster.\n\nWe currently have some power5 575 some of which are running suse 9 and that's awful, the latest gcc I have been able to compile is 4.2.4.",
    "created_at": "2011-08-18T22:21:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123330",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
We are getting 13 power755 locally but they'll go live at the end of September - I am currently installing a power720 that is meant to be a deployment server. Got a BlueGene/L and BlueGene/P as well but that would be another exercise :)

The big pity as far as I am concerned is that there is no Gentoo-prefix for linux-ppc otherwise I could have been up and running faster.

We currently have some power5 575 some of which are running suse 9 and that's awful, the latest gcc I have been able to compile is 4.2.4.



---

archive/issue_comments_123331.json:
```json
{
    "body": "<a id='comment:8'></a>\nI notice in the build logs that you have gcc-4.6.1 on that box. Is it a manual install of gcc?",
    "created_at": "2011-08-19T01:53:00Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123331",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
I notice in the build logs that you have gcc-4.6.1 on that box. Is it a manual install of gcc?



---

archive/issue_comments_123332.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [fbissey](#comment%3A8):\n> I notice in the build logs that you have gcc-4.6.1 on that box. Is it a manual install of gcc?\n\n\nYes.  Here is some info about the machine.  If you want an account on it, send me an email and I can arrange it.\n\n```\nwstein@silius:~/silius/sage-4.7.1> cat /etc/issue\n\nWelcome to SUSE Linux Enterprise Server 11 SP1  (ppc64) - Kernel \\r (\\l).\n\n\nwstein@silius:~/silius/sage-4.7.1> uname -a\nLinux silius 2.6.32.43-0.4-ppc64 #1 SMP 2011-07-14 14:47:44 +0200 ppc64 ppc64 ppc64 GNU/Linux\nwstein@silius:~/silius/sage-4.7.1> gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.1/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.1/lto-wrapper\nTarget: powerpc64-unknown-linux-gnu\nConfigured with: /usr/local/gcc-4.6.1/src/gcc-4.6.1/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21/ppc64-Linux-power7-suse-gcc-4.3.4-suse/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21/ppc64-Linux-power7-suse-gcc-4.3.4-suse/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.0.1/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.3.4-suse --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.0.1-gcc-4.3.4-suse --prefix=/usr/local/gcc-4.6.1/ppc64-Linux-power7-suse\nThread model: posix\ngcc version 4.6.1 (GCC) \n```",
    "created_at": "2011-08-19T04:18:16Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123332",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:9'></a>
Replying to [fbissey](#comment%3A8):
> I notice in the build logs that you have gcc-4.6.1 on that box. Is it a manual install of gcc?


Yes.  Here is some info about the machine.  If you want an account on it, send me an email and I can arrange it.

```
wstein@silius:~/silius/sage-4.7.1> cat /etc/issue

Welcome to SUSE Linux Enterprise Server 11 SP1  (ppc64) - Kernel \r (\l).


wstein@silius:~/silius/sage-4.7.1> uname -a
Linux silius 2.6.32.43-0.4-ppc64 #1 SMP 2011-07-14 14:47:44 +0200 ppc64 ppc64 ppc64 GNU/Linux
wstein@silius:~/silius/sage-4.7.1> gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.1/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.1/lto-wrapper
Target: powerpc64-unknown-linux-gnu
Configured with: /usr/local/gcc-4.6.1/src/gcc-4.6.1/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21/ppc64-Linux-power7-suse-gcc-4.3.4-suse/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21/ppc64-Linux-power7-suse-gcc-4.3.4-suse/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.0.1/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.3.4-suse --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.0.1-gcc-4.3.4-suse --prefix=/usr/local/gcc-4.6.1/ppc64-Linux-power7-suse
Thread model: posix
gcc version 4.6.1 (GCC) 
```



---

archive/issue_comments_123333.json:
```json
{
    "body": "<a id='comment:10'></a>\nSee http://www.math.utexas.edu/pipermail/maxima/2011/025874.html",
    "created_at": "2011-08-22T17:30:16Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123333",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:10'></a>
See http://www.math.utexas.edu/pipermail/maxima/2011/025874.html



---

archive/issue_comments_123334.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd32\".",
    "created_at": "2011-08-24T23:35:33Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123334",
    "user": "https://github.com/williamstein"
}
```

**Changing keywords** from "" to "sd32".



---

archive/issue_comments_123335.json:
```json
{
    "body": "<a id='comment:13'></a>\nI was trying to find a way to run the install of maxima through gdb and I got this\n\n```\nfbissey@silius:~/sage-4.7.2.alpha2> ./sage -gdb\n----------------------------------------------------------------------\n| Sage Version 4.7.2.alpha2, Release Date: 2011-08-24                |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\n/home/fbissey/sage-4.7.2.alpha2/local/bin/sage-ipython\nGNU gdb (GDB) SUSE (7.3-0.6.1)\nCopyright (C) 2011 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"ppc64-suse-linux\".\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>...\nReading symbols from /home/fbissey/sage-4.7.2.alpha2/local/bin/python...done.\nMissing separate debuginfo for /lib64/ld64.so.1\nTry: zypper install -C \"debuginfo(build-id)=9ad9cc2ebe9a93396712a1da1902ce1791d7a01a\"\nMissing separate debuginfo for /lib64/power7/libpthread.so.0\nTry: zypper install -C \"debuginfo(build-id)=b5b6fe2d9c6386464baf451c855d26e32ac8e25f\"\n[Thread debugging using libthread_db enabled]\nMissing separate debuginfo for /lib64/libdl.so.2\nTry: zypper install -C \"debuginfo(build-id)=0c5e22422f5abdea4081987ec9b7d276a7674246\"\nMissing separate debuginfo for /lib64/libutil.so.1\nTry: zypper install -C \"debuginfo(build-id)=d05c063f9c3e2eaf208254f15783e80352551d5d\"\nMissing separate debuginfo for /lib64/power7/libm.so.6\nTry: zypper install -C \"debuginfo(build-id)=0b0eca877c00501c95ef08f9f692405bfbfed207\"\nMissing separate debuginfo for /lib64/power7/libc.so.6\nTry: zypper install -C \"debuginfo(build-id)=68ff029e9f430bd7351521dab154f400b384ff30\"\nPython 2.6.4 (r264:75706, Sep 12 2011, 02:12:11) \n[GCC 4.6.1] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nSetting permissions of DOT_SAGE directory so only you can read and write it.\nDetaching after fork from child process 59250.\nDetaching after fork from child process 59251.\nMissing separate debuginfo for /lib64/libcrypt.so.1\nTry: zypper install -C \"debuginfo(build-id)=5f55a2213c780d5f9d3ce2cd6a9ef1d4e63b8739\"\nDetaching after fork from child process 59253.\nsage: install_package(maxima-5.25.1)\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n\n/home/fbissey/sage-4.7.2.alpha2/<ipython console> in <module>()\n\n/home/fbissey/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.Element.__getattr__ (sage/structure/element.c:2794)()\n\n/home/fbissey/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.getattr_from_other_class (sage/structure/parent.c:2940)()\n\n/home/fbissey/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.raise_attribute_error (sage/structure/parent.c:2709)()\n\nAttributeError: 'sage.rings.real_mpfr.RealLiteral' object has no attribute 'gen'\n```\nI have created a spkg with the latest maxima in case that would make a difference but unsurprisingly it doesn't.",
    "created_at": "2011-09-13T02:53:36Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123335",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
I was trying to find a way to run the install of maxima through gdb and I got this

```
fbissey@silius:~/sage-4.7.2.alpha2> ./sage -gdb
----------------------------------------------------------------------
| Sage Version 4.7.2.alpha2, Release Date: 2011-08-24                |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
/home/fbissey/sage-4.7.2.alpha2/local/bin/sage-ipython
GNU gdb (GDB) SUSE (7.3-0.6.1)
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "ppc64-suse-linux".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/fbissey/sage-4.7.2.alpha2/local/bin/python...done.
Missing separate debuginfo for /lib64/ld64.so.1
Try: zypper install -C "debuginfo(build-id)=9ad9cc2ebe9a93396712a1da1902ce1791d7a01a"
Missing separate debuginfo for /lib64/power7/libpthread.so.0
Try: zypper install -C "debuginfo(build-id)=b5b6fe2d9c6386464baf451c855d26e32ac8e25f"
[Thread debugging using libthread_db enabled]
Missing separate debuginfo for /lib64/libdl.so.2
Try: zypper install -C "debuginfo(build-id)=0c5e22422f5abdea4081987ec9b7d276a7674246"
Missing separate debuginfo for /lib64/libutil.so.1
Try: zypper install -C "debuginfo(build-id)=d05c063f9c3e2eaf208254f15783e80352551d5d"
Missing separate debuginfo for /lib64/power7/libm.so.6
Try: zypper install -C "debuginfo(build-id)=0b0eca877c00501c95ef08f9f692405bfbfed207"
Missing separate debuginfo for /lib64/power7/libc.so.6
Try: zypper install -C "debuginfo(build-id)=68ff029e9f430bd7351521dab154f400b384ff30"
Python 2.6.4 (r264:75706, Sep 12 2011, 02:12:11) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
Setting permissions of DOT_SAGE directory so only you can read and write it.
Detaching after fork from child process 59250.
Detaching after fork from child process 59251.
Missing separate debuginfo for /lib64/libcrypt.so.1
Try: zypper install -C "debuginfo(build-id)=5f55a2213c780d5f9d3ce2cd6a9ef1d4e63b8739"
Detaching after fork from child process 59253.
sage: install_package(maxima-5.25.1)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/home/fbissey/sage-4.7.2.alpha2/<ipython console> in <module>()

/home/fbissey/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.Element.__getattr__ (sage/structure/element.c:2794)()

/home/fbissey/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.getattr_from_other_class (sage/structure/parent.c:2940)()

/home/fbissey/sage-4.7.2.alpha2/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.raise_attribute_error (sage/structure/parent.c:2709)()

AttributeError: 'sage.rings.real_mpfr.RealLiteral' object has no attribute 'gen'
```
I have created a spkg with the latest maxima in case that would make a difference but unsurprisingly it doesn't.



---

archive/issue_comments_123336.json:
```json
{
    "body": "<a id='comment:14'></a>\nBenjamin posted a test log in #11708, let's analyse it:\n\n```\nsage -t  -long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/doc/en/numerical_sage/cvxopt.rst\", line 129:\n    sage: print sol['x']      # ... below since can get -00 or +00 depending on architecture\nExpected:\n    [ 1.00e...00]\n    [ 1.00e+00]\nGot:\n    [ 9.85e-01]\n    [ 9.91e-01]\n    <BLANKLINE>\n**********************************************************************\n```\nRather large numerical noise and some formatting noise which is more curious.\n\nThere are multiples instances of these errors in that test:\n\n```\nsage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst\n  ***   Warning: new stack size = 1098912 (1.048 Mbytes).\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/doc/en/bordeaux_2008/elliptic_curves.rst\", line 299:\n    sage: E.integral_points(both_signs=True)   # about a minute\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_10[3]>\", line 1, in <module>\n        E.integral_points(both_signs=True)   # about a minute###line 299:\n    sage: E.integral_points(both_signs=True)   # about a minute\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 5452, in integral_points\n        w1, w2 = self.period_lattice().basis()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 2861, in period_lattice\n        self._period_lattice = PeriodLattice_ell(self)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/period_lattice.py\", line 231, in __init__\n        self._ei = self.f2.roots(AA,multiplicities=False)\n      File \"polynomial_element.pyx\", line 4850, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31255)\n      File \"real_roots.pyx\", line 4115, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36162)\n      File \"real_mpfi.pyx\", line 277, in sage.rings.real_mpfi.RealIntervalField (sage/rings/real_mpfi.c:2982)\n      File \"real_mpfi.pyx\", line 441, in sage.rings.real_mpfi.RealIntervalField_class.__init__ (sage/rings/real_mpfi.c:3124)\n    OverflowError: value too large to convert to int\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/doc/en/bordeaux_2008/elliptic_curves.rst\", line 177:\n    sage: L = E.padic_lseries(5)\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[3]>\", line 1, in <module>\n        L = E.padic_lseries(Integer(5))###line 177:\n    sage: L = E.padic_lseries(5)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/padics.py\", line 159, in padic_lseries\n        normalize = normalize, use_eclib=use_eclib)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/padic_lseries.py\", line 199, in __init__\n        self._modular_symbol = E.modular_symbol(sign=+1, use_eclib = use_eclib, normalize=normalize)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1243, in modular_symbol\n        M = ell_modular_symbols.ModularSymbolSage(self, sign, normalize=normalize)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py\", line 629, in __init__\n        self._find_scaling_L_ratio()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py\", line 310, in _find_scaling_L_ratio\n        l1 = self.__lalg__(D)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py\", line 362, in __lalg__\n        lv = ED.lseries().L_ratio() # this is L(ED,1) divided by the Neron period omD of ED\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py\", line 686, in L_ratio\n        omega = self.__E.period_lattice().basis()[0]\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 2861, in period_lattice\n        self._period_lattice = PeriodLattice_ell(self)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/period_lattice.py\", line 231, in __init__\n        self._ei = self.f2.roots(AA,multiplicities=False)\n      File \"polynomial_element.pyx\", line 4850, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31255)\n      File \"real_roots.pyx\", line 4141, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36556)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/qqbar.py\", line 761, in polynomial_root\n        return AlgebraicReal(ANRoot(poly, interval, multiplicity))\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/qqbar.py\", line 4417, in __init__\n        self._interval = self.refine_interval(interval, 64)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/qqbar.py\", line 4528, in refine_interval\n        return self._real_refine_interval(interval, prec)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/qqbar.py\", line 4621, in _real_refine_interval\n        raise ValueError, \"Refining interval that does not bound unique root!\"\n    ValueError: Refining interval that does not bound unique root!\n**********************************************************************\n```\nTwo potentially separate issues in mpfi and qqbar.py\n\n```\nsage -t  -long -force_lib devel/sage/sage/structure/sage_object.pyx\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/structure/sage_object.pyx\", line 1103:\n    sage: sage.structure.sage_object.unpickle_all()  # (4s on sage.math, 2011)\nExpected:\n    Successfully unpickled ... objects.\n    Failed to unpickle 0 objects.\nGot:\n     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_class__sage_coding_linear_code_LinearCode__.sobj')\n     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_class__sage_crypto_mq_sr_SR_gf2__.sobj')\n     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_class__sage_homology_chain_complex_ChainComplex__.sobj')\n     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_type__sage_coding_binary_code_BinaryCode__.sobj')\n     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_type__sage_matrix_matrix_mod2_dense_Matrix_mod2_dense__.sobj')\n    Failed:\n    _class__sage_coding_linear_code_LinearCode__.sobj\n    _class__sage_crypto_mq_sr_SR_gf2__.sobj\n    _class__sage_homology_chain_complex_ChainComplex__.sobj\n    _type__sage_coding_binary_code_BinaryCode__.sobj\n    _type__sage_matrix_matrix_mod2_dense_Matrix_mod2_dense__.sobj\n    Successfully unpickled 582 objects.\n    Failed to unpickle 5 objects.\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_25\n***Test Failed*** 1 failures.\n```\npicklejar failure should be checked against the same error on arm. Possibly a deeper python problem.\n\n```\nsage -t  -long -force_lib devel/sage/sage/structure/parent.pyx\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/structure/parent.pyx\", line 1783:\n    sage: K.coerce_embedding()\nExpected:\n    Generic morphism:\n      From: Number Field in a with defining polynomial x^3 + x^2 + 1\n      To:   Real Lazy Field\n      Defn: a -> -1.465571231876768?\nGot:\n    Generic morphism:\n      From: Number Field in a with defining polynomial x^3 + x^2 + 1\n      To:   Real Lazy Field\n      Defn: a -> 0\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_39\n***Test Failed*** 1 failures.\n```\nThat's more than large numerical noise, that has to be wrong.\n\n```\nsage -t  -long -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix_double_dense.pyx\", line 1766:\n    sage: Q\nExpected:\n    [ -0.359210604054   0.569326179705   0.368048420509   0.641385845805]\n    [  0.179605302027  -0.144590775798   0.925041158846  -0.301884576418]\n    [  0.179605302027  -0.704880032016  0.0774617736597   0.681825307224]\n    [  0.898026510134   0.397624633445 -0.0532812182975   0.180566192161]\nGot:\n    [ -0.359210604054   0.569326179705   0.146859067236   0.724753652911]\n    [  0.179605302027  -0.144590775798   0.973039543327 0.00543048428303]\n    [  0.179605302027  -0.704880032016  -0.141642164231   0.671433967908]\n    [  0.898026510134   0.397624633445  -0.107535848925   0.154528570726]\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix_double_dense.pyx\", line 1771:\n    sage: R\nExpected:\n    [    -5.56776436283       2.6940795304      -2.6940795304]\n    [                 0     -3.56958477752      3.56958477752]\n    [                 0                  0 -9.93013661299e-16]\n    [                 0                  0                  0]\nGot:\n    [   -5.56776436283      2.6940795304     -2.6940795304]\n    [                0    -3.56958477752     3.56958477752]\n    [                0                 0 9.81879219451e-16]\n    [                0                 0                 0]\n**********************************************************************\n1 items had failures:\n   2 of  40 in __main__.example_31\n***Test Failed*** 2 failures.\n```\nSome numerical noise but something else is badly wrong in the first one.\n\n```\nsage -t  -long -force_lib devel/sage/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx\", line 7722:\n    sage: M.round(10)\nExpected:\n    [-2.4494897428           0.0           0.0]\n    [-3.6742346142  0.7071067812           0.0]\n    [-4.8989794856  1.4142135624           0.0]\nGot:\n    [-2.4494897428           0.0           0.0]\n    [-3.6742346142  0.7071067812           0.0]\n    [-4.8989794856  1.4142135624          -0.0]\n**********************************************************************\n1 items had failures:\n```\nThat one is not that worrying, I just wish we could easily deal with 0.0 sign flipping.\n\n```\nsage -t  -long -force_lib devel/sage/sage/numerical/optimize.py\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py\", line 469:\n    sage: sol['x']\nExpected:\n    (0.999..., 1.000...)\nGot nothing\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py\", line 479:\n    sage: sol['x']\nExpected:\n    (45.000000..., 6.2499999...3, 1.00000000...)\nGot nothing\nGLPK Simplex Optimizer, v4.44\n6 rows, 3 columns, 8 non-zeros\nPreprocessing...\n2 rows, 2 columns, 4 non-zeros\nScaling...\n A: min|aij| =  2.400e+01  max|aij| =  5.000e+01  ratio =  2.083e+00\nGM: min|aij| =  8.128e-01  max|aij| =  1.230e+00  ratio =  1.514e+00\nEQ: min|aij| =  6.606e-01  max|aij| =  1.000e+00  ratio =  1.514e+00\nConstructing initial basis...\nSize of triangular part = 2\n*     0: obj =  -5.100000000e+01  infeas =  0.000e+00 (0)\n*     1: obj =  -5.225000000e+01  infeas =  0.000e+00 (0)\nOPTIMAL SOLUTION FOUND\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py\", line 564:\n    sage: find_fit(data, model)\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_7[5]>\", line 1, in <module>\n        find_fit(data, model)###line 564:\n    sage: find_fit(data, model)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/numerical/optimize.py\", line 655, in find_fit\n        estimated_params, d = leastsq(error_function, initial_guess, args = (x_data, y_data))\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/optimize/minpack.py\", line 324, in leastsq\n        raise errors[info][1](errors[info][0])\n    TypeError: Improper input parameters.\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py\", line 570:\n    sage: fit = find_fit(data, f, parameters = [a, b, c], variables = [x], solution_dict = True)\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_7[7]>\", line 1, in <module>\n        fit = find_fit(data, f, parameters = [a, b, c], variables = [x], solution_dict = True)###line 570:\n    sage: fit = find_fit(data, f, parameters = [a, b, c], variables = [x], solution_dict = True)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/numerical/optimize.py\", line 655, in find_fit\n        estimated_params, d = leastsq(error_function, initial_guess, args = (x_data, y_data))\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/optimize/minpack.py\", line 324, in leastsq\n        raise errors[info][1](errors[info][0])\n    TypeError: Improper input parameters.\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py\", line 571:\n    sage: fit[a], fit[b], fit[c]\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_7[8]>\", line 1, in <module>\n        fit[a], fit[b], fit[c]###line 571:\n    sage: fit[a], fit[b], fit[c]\n    NameError: name 'fit' is not defined\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py\", line 577:\n    sage: find_fit(dataprime, a * x * log(b * x), parameters = [a, b], variables = [x])\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_7[10]>\", line 1, in <module>\n        find_fit(dataprime, a * x * log(b * x), parameters = [a, b], variables = [x])###line 577:\n    sage: find_fit(dataprime, a * x * log(b * x), parameters = [a, b], variables = [x])\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/numerical/optimize.py\", line 655, in find_fit\n        estimated_params, d = leastsq(error_function, initial_guess, args = (x_data, y_data))\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/optimize/minpack.py\", line 324, in leastsq\n        raise errors[info][1](errors[info][0])\n    TypeError: Improper input parameters.\n**********************************************************************\n2 items had failures:\n```\nThat looks bad we obviously have stuff wrong in scipy.\n\n```\nsage -t  -long -force_lib devel/sage/sage/ext/fast_callable.pyx\nget_str.c:149: MPFR assertion failed: size_s1 >= m\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/ext/fast_callable.pyx\", line 1445:\n    sage: square(RIF(-1, 1)).str(style='brackets')\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_50[7]>\", line 1, in <module>\n        square(RIF(-Integer(1), Integer(1))).str(style='brackets')###line 1445:\n    sage: square(RIF(-1, 1)).str(style='brackets')\n      File \"real_mpfi.pyx\", line 1425, in sage.rings.real_mpfi.RealIntervalFieldElement.str (sage/rings/real_mpfi.c:8979)\n      File \"real_mpfr.pyx\", line 1618, in sage.rings.real_mpfr.RealNumber.str (sage/rings/real_mpfr.c:11037)\n    RuntimeError: Aborted\n**********************************************************************\n1 items had failures:\n```\nSomething miscompiled in mpfr?\n\n```\nsage -t  -long -force_lib devel/sage/sage/categories/pushout.py\nException RuntimeError: 'maximum recursion depth exceeded while calling a Python object' in <type 'exceptions.RuntimeError'> ignored\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/categories/pushout.py\", line 2421:\n    sage: F2(QQ).coerce_embedding()\nExpected:\n    Generic morphism:\n      From: Number Field in a with defining polynomial x^3 - x^2 + 1\n      To:   Real Lazy Field\n      Defn: a -> -0.7548776662466928?\nGot:\n    Generic morphism:\n      From: Number Field in a with defining polynomial x^3 - x^2 + 1\n      To:   Real Lazy Field\n      Defn: a -> 0\n**********************************************************************\n```\nAnd we have a repeat of errors from qqbar.py in that test too.\n\n```\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/period_lattice.py\n```\nmore qqbar.py failuresalong with mpfr/mpfi like in elliptic_curves.rst and some wrong results:\n\n```\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/schemes/elliptic_curves/period_lattice.py\", line 854:\n    sage: L.basis_matrix()\nExpected:\n    [ 2.49021256085505 0.000000000000000]\n    [0.000000000000000  1.97173770155165]\nGot:\n    [ 1.26920930427955 0.000000000000000]\n    [0.634604652139777  1.45881661693850]\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/schemes/elliptic_curves/period_lattice.py\", line 857:\n    sage: L.basis_matrix(normalised=True)\nExpected:\n    [ 2.49021256085505 0.000000000000000]\n    [0.000000000000000 -1.97173770155165]\nGot:\n    [0.634604652139777 -1.45881661693850]\n    [-1.26920930427955 0.000000000000000]\n**********************************************************************\n```\n\n\n```\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/descent_two_isogeny.pyx\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/schemes/elliptic_curves/descent_two_isogeny.pyx\", line 1147:\n    sage: E.sha().an()\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_18[28]>\", line 1, in <module>\n        E.sha().an()###line 1147:\n    sage: E.sha().an()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py\", line 392, in an\n        L1_over_omega = E.lseries().L_ratio()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py\", line 686, in L_ratio\n        omega = self.__E.period_lattice().basis()[0]\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 2861, in period_lattice\n        self._period_lattice = PeriodLattice_ell(self)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/period_lattice.py\", line 231, in __init__\n        self._ei = self.f2.roots(AA,multiplicities=False)\n      File \"polynomial_element.pyx\", line 4850, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31255)\n      File \"real_roots.pyx\", line 4115, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36162)\n      File \"real_mpfi.pyx\", line 277, in sage.rings.real_mpfi.RealIntervalField (sage/rings/real_mpfi.c:2982)\n      File \"real_mpfi.pyx\", line 441, in sage.rings.real_mpfi.RealIntervalField_class.__init__ (sage/rings/real_mpfi.c:3124)\n    OverflowError: value too large to convert to int\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/schemes/elliptic_curves/descent_two_isogeny.pyx\", line 1147:\n    sage: E.sha().an()\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_18[28]>\", line 1, in <module>\n        E.sha().an()###line 1147:\n    sage: E.sha().an()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py\", line 392, in an\n        L1_over_omega = E.lseries().L_ratio()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py\", line 686, in L_ratio\n        omega = self.__E.period_lattice().basis()[0]\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 2861, in period_lattice\n        self._period_lattice = PeriodLattice_ell(self)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/period_lattice.py\", line 231, in __init__\n        self._ei = self.f2.roots(AA,multiplicities=False)\n      File \"polynomial_element.pyx\", line 4850, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31255)\n      File \"real_roots.pyx\", line 4115, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36162)\n      File \"real_mpfi.pyx\", line 277, in sage.rings.real_mpfi.RealIntervalField (sage/rings/real_mpfi.c:2982)\n      File \"real_mpfi.pyx\", line 441, in sage.rings.real_mpfi.RealIntervalField_class.__init__ (sage/rings/real_mpfi.c:3124)\n    OverflowError: value too large to convert to int\n**********************************************************************\n```\nagain and again in that one\n\n```\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/padics.py\n```\nThere are other errors in that last one but I think they are consequences of previous failures.\n\nSame error in\n\n```\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_modular_symbols.py\n```\nagain some other errors that are probably consequences of this particular failure. We get some qqbar.py errors too in that one.\n\n```\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/lseries_ell.py\n  ***   Warning: new stack size = 1001728 (0.955 Mbytes).\n  ***   Warning: new stack size = 1002624 (0.956 Mbytes).\n  ***   Warning: new stack size = 1010736 (0.964 Mbytes).\n  ***   Warning: new stack size = 1114144 (1.063 Mbytes).\n**********************************************************************\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_point.py\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/modular_parametrization.py\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/BSD.py\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/padic_lseries.py\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/sha_tate.py\nsage -t  -long -force_lib devel/sage/sage/rings/real_lazy.pyx\nsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\nsage -t  -long -force_lib devel/sage/sage/rings/qqbar.py <- what a surprise (got MPFR assertion errors too)\nsage -t  -long -force_lib devel/sage/sage/rings/number_field/totallyreal_rel.py\nsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_morphisms.pyx\nsage -t  -long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py\nsage -t  -long -force_lib devel/sage/sage/rings/polynomial/real_roots.pyx\nget_str.c:149: MPFR assertion failed: size_s1 >= m\nget_str.c:149: MPFR assertion failed: size_s1 >= m\n```\nsome more of the same with qqbar.py and mpfi/mpfr.\n\n```\nsage -t  -long -force_lib devel/sage/sage/rings/real_interval_absolute.pyx\nget_str.c:149: MPFR assertion failed: size_s1 >= m\nget_str.c:149: MPFR assertion failed: size_s1 >= m\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/rings/real_interval_absolute.pyx\", line 237:\n    sage: R(1)\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_12[4]>\", line 1, in <module>\n        R(Integer(1))###line 237:\n    sage: R(1)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/misc/displayhook.py\", line 174, in displayhook\n        print_obj(sys.stdout, obj)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/misc/displayhook.py\", line 142, in print_obj\n        print >>out_stream, `obj`\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1463)\n      File \"real_interval_absolute.pyx\", line 434, in sage.rings.real_interval_absolute.RealIntervalAbsoluteElement._repr_ (sage/rings/real_interval_absolute.c:4989)\n        return repr(self._real_mpfi_(RealIntervalField(prec)))\n      File \"real_mpfi.pyx\", line 1109, in sage.rings.real_mpfi.RealIntervalFieldElement.__repr__ (sage/rings/real_mpfi.c:7925)\n        return self.str(10)\n      File \"real_mpfi.pyx\", line 1434, in sage.rings.real_mpfi.RealIntervalFieldElement.str (sage/rings/real_mpfi.c:9075)\n        return self._str_question_style(base, error_digits, e, prefer_sci)\n      File \"real_mpfi.pyx\", line 1650, in sage.rings.real_mpfi.RealIntervalFieldElement._str_question_style (sage/rings/real_mpfi.c:9520)\n        sig_on()\n    RuntimeError: Aborted\nget_str.c:149: MPFR assertion failed: size_s1 >= m\n```\nmpfr troubles with one backtrace\n\n```\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/rings/real_interval_absolute.pyx\", line 915:\n    sage: R(10)^-10\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_39[7]>\", line 1, in <module>\n        R(Integer(10))**-Integer(10)###line 915:\n    sage: R(10)^-10\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/misc/displayhook.py\", line 174, in displayhook\n        print_obj(sys.stdout, obj)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/misc/displayhook.py\", line 142, in print_obj\n        print >>out_stream, `obj`\n      File \"sage_object.pyx\", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1463)\n      File \"real_interval_absolute.pyx\", line 434, in sage.rings.real_interval_absolute.RealIntervalAbsoluteElement._repr_ (sage/rings/real_interval_absolute.c:4989)\n        return repr(self._real_mpfi_(RealIntervalField(prec)))\n      File \"real_mpfi.pyx\", line 1109, in sage.rings.real_mpfi.RealIntervalFieldElement.__repr__ (sage/rings/real_mpfi.c:7925)\n        return self.str(10)\n      File \"real_mpfi.pyx\", line 1434, in sage.rings.real_mpfi.RealIntervalFieldElement.str (sage/rings/real_mpfi.c:9075)\n        return self._str_question_style(base, error_digits, e, prefer_sci)\n      File \"real_mpfi.pyx\", line 1650, in sage.rings.real_mpfi.RealIntervalFieldElement._str_question_style (sage/rings/real_mpfi.c:9520)\n        sig_on()\n    RuntimeError: Aborted\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libcsage.so(print_backtrace-0x1cf7c)[0x40000a4e49c]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libcsage.so(sigdie-0x1cf24)[0x40000a4e50c]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libcsage.so(sage_signal_handler-0x1d600)[0x40000a4dd88]\n[0x40000040418]\n[0xfffcd8e00f0]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyString_FromString-0x1346dc)[0x40000132594]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyErr_SetString-0xbeac8)[0x400001aced0]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libcsage.so(sage_signal_handler-0x1d6c0)[0x40000a4dcc8]\n[0x40000040418]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libgmp.so.3(__gmpz_get_str-0x62970)[0x400013b3cf0]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libgmp.so.3(__gmpq_get_str-0x55e8c)[0x400013c111c]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/rational.so(+0x2156c)[0x40003b8156c]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyCFunction_Call-0x1459b8)[0x4000011fc80]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyObject_Call-0x18cd08)[0x400000d3590]\n/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/rational.so(+0x133cc)[0x40003b733cc]\n```\nAlso\n\n```\nsage -t  -long -force_lib devel/sage/sage/rings/complex_interval.pyx\nget_str.c:149: MPFR assertion failed: size_s1 >= m\nget_str.c:149: MPFR assertion failed: size_s1 >= m\nsage -t  -long -force_lib devel/sage/sage/rings/real_mpfi.pyx\nget_str.c:149: MPFR assertion failed: size_s1 >= m\nget_str.c:149: MPFR assertion failed: size_s1 >= m (and a bunch of other errors)\nsage -t  -long -force_lib devel/sage/sage/misc/functional.py\n#0: simplify_sum(expr='sum(q^k,k,0,inf))\n#1: simplify_sum(expr=a*'sum(q^k,k,0,inf))\nget_str.c:149: MPFR assertion failed: size_s1 >= m\nsage -t  -long -force_lib devel/sage/sage/rings/polynomial/real_roots.pyx\nget_str.c:149: MPFR assertion failed: size_s1 >= m\nget_str.c:149: MPFR assertion failed: size_s1 >= m\n```\n\n\n```\nsage -t  -long -force_lib devel/sage/sage/lfunctions/sympow.py\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/lfunctions/sympow.py\", line 213:\n    sage: sympow.modular_degree(EllipticCurve('11a'))\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_6[2]>\", line 1, in <module>\n        sympow.modular_degree(EllipticCurve('11a'))###line 213:\n    sage: sympow.modular_degree(EllipticCurve('11a'))\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/lfunctions/sympow.py\", line 229, in modular_degree\n        raise RuntimeError, \"failed to compute modular degree\"\n    RuntimeError: failed to compute modular degree\n```\nsympow...\n\n```\nsage -t  -long -force_lib devel/sage/sage/interfaces/qepcad.py\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/interfaces/qepcad.py\", line 2045:\n    sage: x = _eval_qepcad_algebraic('the unique root of 8 x^2 - 8 x - 29 between -47/32 and -1503/1024'); x\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_52[3]>\", line 1, in <module>\n        x = _eval_qepcad_algebraic('the unique root of 8 x^2 - 8 x - 29 between -47/32 and -1503/1024'); x###line 2045:\n    sage: x = _eval_qepcad_algebraic('the unique root of 8 x^2 - 8 x - 29 between -47/32 and -1503/1024'); x\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/interfaces/qepcad.py\", line 2069, in _eval_qepcad_algebraic\n        raise ValueError, \"%s or %s not an exact floating-point number\"%(lbound, ubound)\n    ValueError: -47/32 or -1503/1024 not an exact floating-point number\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/interfaces/qepcad.py\", line 2047:\n    sage: 8*x^2 - 8*x - 29 == 0\nExpected:\n    True\nGot:\n    8*x^2 - 8*x - 29 == 0\n**********************************************************************\n```\n\n```\nsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/rings/number_field/number_field_rel.py\", line 1876:\n    sage: L.places()\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_54[3]>\", line 1, in <module>\n        L.places()###line 1876:\n    sage: L.places()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/number_field/number_field_rel.py\", line 1899, in places\n        pl = L.places(all_complex, prec)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/number_field/number_field.py\", line 6226, in places\n        real_intervals = [ x[0] for x in self.defining_polynomial().roots(R) ]\n      File \"polynomial_element.pyx\", line 4853, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31307)\n      File \"real_roots.pyx\", line 4115, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36162)\n      File \"real_mpfi.pyx\", line 277, in sage.rings.real_mpfi.RealIntervalField (sage/rings/real_mpfi.c:2982)\n      File \"real_mpfi.pyx\", line 441, in sage.rings.real_mpfi.RealIntervalField_class.__init__ (sage/rings/real_mpfi.c:3124)\n    OverflowError: value too large to convert to int\n**********************************************************************\n1 items had failures:\n```\n\n\n```\nsage -t  -long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/plot/plot3d/list_plot3d.py\", line 102:\n    sage: list_plot3d(m, texture='yellow', interpolation_type='spline',frame_aspect_ratio=[1,1,1/3])\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[9]>\", line 1, in <module>\n        list_plot3d(m, texture='yellow', interpolation_type='spline',frame_aspect_ratio=[Integer(1),Integer(1),Integer(1)/Integer(3)])###line 102:\n    sage: list_plot3d(m, texture='yellow', interpolation_type='spline',frame_aspect_ratio=[1,1,1/3])\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/plot/plot3d/list_plot3d.py\", line 172, in list_plot3d\n        return list_plot3d_tuples(l,interpolation_type,texture,**kwds)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/plot/plot3d/list_plot3d.py\", line 316, in list_plot3d_tuples\n        s=interpolate.bisplrep(x,y,z,[int(1)]*len(x),xmin,xmax,ymin,ymax,kx=kx,ky=ky,s=s)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/interpolate/fitpack.py\", line 873, in bisplrep\n        tx,ty,nxest,nyest,wrk,lwrk1,lwrk2)\n    ValueError: negative dimensions are not allowed\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/plot/plot3d/list_plot3d.py\", line 109:\n    sage: list_plot3d(m, texture='yellow', interpolation_type='spline', degree=5, frame_aspect_ratio=[1,1,1/3])\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[10]>\", line 1, in <module>\n        list_plot3d(m, texture='yellow', interpolation_type='spline', degree=Integer(5), frame_aspect_ratio=[Integer(1),Integer(1),Integer(1)/Integer(3)])###line 109:\n    sage: list_plot3d(m, texture='yellow', interpolation_type='spline', degree=5, frame_aspect_ratio=[1,1,1/3])\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/plot/plot3d/list_plot3d.py\", line 172, in list_plot3d\n        return list_plot3d_tuples(l,interpolation_type,texture,**kwds)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/plot/plot3d/list_plot3d.py\", line 316, in list_plot3d_tuples\n        s=interpolate.bisplrep(x,y,z,[int(1)]*len(x),xmin,xmax,ymin,ymax,kx=kx,ky=ky,s=s)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/interpolate/fitpack.py\", line 873, in bisplrep\n        tx,ty,nxest,nyest,wrk,lwrk1,lwrk2)\n    ValueError: negative dimensions are not allowed\n**********************************************************************\n1 items had failures:\n   2 of  26 in __main__.example_1\n```\n\n```\nsage -t  -long -force_lib devel/sage/sage/modular/abvar/abvar.py\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/modular/abvar/abvar.py\", line 3305:\n    sage: E.modular_degree()\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_84[8]>\", line 1, in <module>\n        E.modular_degree()###line 3305:\n    sage: E.modular_degree()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 3201, in modular_degree\n        m = sympow.modular_degree(self)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/lfunctions/sympow.py\", line 229, in modular_degree\n        raise RuntimeError, \"failed to compute modular degree\"\n    RuntimeError: failed to compute modular degree\n**********************************************************************\n1 items had failures:\nsage -t  -long -force_lib devel/sage/sage/modular/hecke/submodule.py\n**********************************************************************\nFile \"/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/modular/hecke/submodule.py\", line 511:\n    sage: EllipticCurve('128a').congruence_number()\nException raised:\n    Traceback (most recent call last):\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_17[19]>\", line 1, in <module>\n        EllipticCurve('128a').congruence_number()###line 511:\n    sage: EllipticCurve('128a').congruence_number()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 3294, in congruence_number\n        m = self.modular_degree()\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 3201, in modular_degree\n        m = sympow.modular_degree(self)\n      File \"/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/lfunctions/sympow.py\", line 229, in modular_degree\n        raise RuntimeError, \"failed to compute modular degree\"\n    RuntimeError: failed to compute modular degree\n**********************************************************************\n1 items had failures:\n   1 of  21 in __main__.example_17\n```\ncome from sympow\n\nSo big trouble coming from mpfr or possibly mpir underneath. Once we isolate that most of these will disapear.",
    "created_at": "2011-09-16T21:04:39Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123336",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:14'></a>
Benjamin posted a test log in #11708, let's analyse it:

```
sage -t  -long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/doc/en/numerical_sage/cvxopt.rst", line 129:
    sage: print sol['x']      # ... below since can get -00 or +00 depending on architecture
Expected:
    [ 1.00e...00]
    [ 1.00e+00]
Got:
    [ 9.85e-01]
    [ 9.91e-01]
    <BLANKLINE>
**********************************************************************
```
Rather large numerical noise and some formatting noise which is more curious.

There are multiples instances of these errors in that test:

```
sage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst
  ***   Warning: new stack size = 1098912 (1.048 Mbytes).
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/doc/en/bordeaux_2008/elliptic_curves.rst", line 299:
    sage: E.integral_points(both_signs=True)   # about a minute
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_10[3]>", line 1, in <module>
        E.integral_points(both_signs=True)   # about a minute###line 299:
    sage: E.integral_points(both_signs=True)   # about a minute
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 5452, in integral_points
        w1, w2 = self.period_lattice().basis()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 2861, in period_lattice
        self._period_lattice = PeriodLattice_ell(self)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/period_lattice.py", line 231, in __init__
        self._ei = self.f2.roots(AA,multiplicities=False)
      File "polynomial_element.pyx", line 4850, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31255)
      File "real_roots.pyx", line 4115, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36162)
      File "real_mpfi.pyx", line 277, in sage.rings.real_mpfi.RealIntervalField (sage/rings/real_mpfi.c:2982)
      File "real_mpfi.pyx", line 441, in sage.rings.real_mpfi.RealIntervalField_class.__init__ (sage/rings/real_mpfi.c:3124)
    OverflowError: value too large to convert to int
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/doc/en/bordeaux_2008/elliptic_curves.rst", line 177:
    sage: L = E.padic_lseries(5)
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[3]>", line 1, in <module>
        L = E.padic_lseries(Integer(5))###line 177:
    sage: L = E.padic_lseries(5)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/padics.py", line 159, in padic_lseries
        normalize = normalize, use_eclib=use_eclib)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/padic_lseries.py", line 199, in __init__
        self._modular_symbol = E.modular_symbol(sign=+1, use_eclib = use_eclib, normalize=normalize)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1243, in modular_symbol
        M = ell_modular_symbols.ModularSymbolSage(self, sign, normalize=normalize)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py", line 629, in __init__
        self._find_scaling_L_ratio()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py", line 310, in _find_scaling_L_ratio
        l1 = self.__lalg__(D)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py", line 362, in __lalg__
        lv = ED.lseries().L_ratio() # this is L(ED,1) divided by the Neron period omD of ED
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py", line 686, in L_ratio
        omega = self.__E.period_lattice().basis()[0]
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 2861, in period_lattice
        self._period_lattice = PeriodLattice_ell(self)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/period_lattice.py", line 231, in __init__
        self._ei = self.f2.roots(AA,multiplicities=False)
      File "polynomial_element.pyx", line 4850, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31255)
      File "real_roots.pyx", line 4141, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36556)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/qqbar.py", line 761, in polynomial_root
        return AlgebraicReal(ANRoot(poly, interval, multiplicity))
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/qqbar.py", line 4417, in __init__
        self._interval = self.refine_interval(interval, 64)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/qqbar.py", line 4528, in refine_interval
        return self._real_refine_interval(interval, prec)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/qqbar.py", line 4621, in _real_refine_interval
        raise ValueError, "Refining interval that does not bound unique root!"
    ValueError: Refining interval that does not bound unique root!
**********************************************************************
```
Two potentially separate issues in mpfi and qqbar.py

```
sage -t  -long -force_lib devel/sage/sage/structure/sage_object.pyx
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/structure/sage_object.pyx", line 1103:
    sage: sage.structure.sage_object.unpickle_all()  # (4s on sage.math, 2011)
Expected:
    Successfully unpickled ... objects.
    Failed to unpickle 0 objects.
Got:
     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_class__sage_coding_linear_code_LinearCode__.sobj')
     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_class__sage_crypto_mq_sr_SR_gf2__.sobj')
     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_class__sage_homology_chain_complex_ChainComplex__.sobj')
     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_type__sage_coding_binary_code_BinaryCode__.sobj')
     * unpickle failure: load('/home/bjones/.sage/temp/silius/20398/dir_2/pickle_jar/_type__sage_matrix_matrix_mod2_dense_Matrix_mod2_dense__.sobj')
    Failed:
    _class__sage_coding_linear_code_LinearCode__.sobj
    _class__sage_crypto_mq_sr_SR_gf2__.sobj
    _class__sage_homology_chain_complex_ChainComplex__.sobj
    _type__sage_coding_binary_code_BinaryCode__.sobj
    _type__sage_matrix_matrix_mod2_dense_Matrix_mod2_dense__.sobj
    Successfully unpickled 582 objects.
    Failed to unpickle 5 objects.
**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_25
***Test Failed*** 1 failures.
```
picklejar failure should be checked against the same error on arm. Possibly a deeper python problem.

```
sage -t  -long -force_lib devel/sage/sage/structure/parent.pyx
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/structure/parent.pyx", line 1783:
    sage: K.coerce_embedding()
Expected:
    Generic morphism:
      From: Number Field in a with defining polynomial x^3 + x^2 + 1
      To:   Real Lazy Field
      Defn: a -> -1.465571231876768?
Got:
    Generic morphism:
      From: Number Field in a with defining polynomial x^3 + x^2 + 1
      To:   Real Lazy Field
      Defn: a -> 0
**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_39
***Test Failed*** 1 failures.
```
That's more than large numerical noise, that has to be wrong.

```
sage -t  -long -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix_double_dense.pyx", line 1766:
    sage: Q
Expected:
    [ -0.359210604054   0.569326179705   0.368048420509   0.641385845805]
    [  0.179605302027  -0.144590775798   0.925041158846  -0.301884576418]
    [  0.179605302027  -0.704880032016  0.0774617736597   0.681825307224]
    [  0.898026510134   0.397624633445 -0.0532812182975   0.180566192161]
Got:
    [ -0.359210604054   0.569326179705   0.146859067236   0.724753652911]
    [  0.179605302027  -0.144590775798   0.973039543327 0.00543048428303]
    [  0.179605302027  -0.704880032016  -0.141642164231   0.671433967908]
    [  0.898026510134   0.397624633445  -0.107535848925   0.154528570726]
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix_double_dense.pyx", line 1771:
    sage: R
Expected:
    [    -5.56776436283       2.6940795304      -2.6940795304]
    [                 0     -3.56958477752      3.56958477752]
    [                 0                  0 -9.93013661299e-16]
    [                 0                  0                  0]
Got:
    [   -5.56776436283      2.6940795304     -2.6940795304]
    [                0    -3.56958477752     3.56958477752]
    [                0                 0 9.81879219451e-16]
    [                0                 0                 0]
**********************************************************************
1 items had failures:
   2 of  40 in __main__.example_31
***Test Failed*** 2 failures.
```
Some numerical noise but something else is badly wrong in the first one.

```
sage -t  -long -force_lib devel/sage/sage/matrix/matrix2.pyx
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx", line 7722:
    sage: M.round(10)
Expected:
    [-2.4494897428           0.0           0.0]
    [-3.6742346142  0.7071067812           0.0]
    [-4.8989794856  1.4142135624           0.0]
Got:
    [-2.4494897428           0.0           0.0]
    [-3.6742346142  0.7071067812           0.0]
    [-4.8989794856  1.4142135624          -0.0]
**********************************************************************
1 items had failures:
```
That one is not that worrying, I just wish we could easily deal with 0.0 sign flipping.

```
sage -t  -long -force_lib devel/sage/sage/numerical/optimize.py
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py", line 469:
    sage: sol['x']
Expected:
    (0.999..., 1.000...)
Got nothing
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py", line 479:
    sage: sol['x']
Expected:
    (45.000000..., 6.2499999...3, 1.00000000...)
Got nothing
GLPK Simplex Optimizer, v4.44
6 rows, 3 columns, 8 non-zeros
Preprocessing...
2 rows, 2 columns, 4 non-zeros
Scaling...
 A: min|aij| =  2.400e+01  max|aij| =  5.000e+01  ratio =  2.083e+00
GM: min|aij| =  8.128e-01  max|aij| =  1.230e+00  ratio =  1.514e+00
EQ: min|aij| =  6.606e-01  max|aij| =  1.000e+00  ratio =  1.514e+00
Constructing initial basis...
Size of triangular part = 2
*     0: obj =  -5.100000000e+01  infeas =  0.000e+00 (0)
*     1: obj =  -5.225000000e+01  infeas =  0.000e+00 (0)
OPTIMAL SOLUTION FOUND
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py", line 564:
    sage: find_fit(data, model)
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_7[5]>", line 1, in <module>
        find_fit(data, model)###line 564:
    sage: find_fit(data, model)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/numerical/optimize.py", line 655, in find_fit
        estimated_params, d = leastsq(error_function, initial_guess, args = (x_data, y_data))
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/optimize/minpack.py", line 324, in leastsq
        raise errors[info][1](errors[info][0])
    TypeError: Improper input parameters.
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py", line 570:
    sage: fit = find_fit(data, f, parameters = [a, b, c], variables = [x], solution_dict = True)
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_7[7]>", line 1, in <module>
        fit = find_fit(data, f, parameters = [a, b, c], variables = [x], solution_dict = True)###line 570:
    sage: fit = find_fit(data, f, parameters = [a, b, c], variables = [x], solution_dict = True)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/numerical/optimize.py", line 655, in find_fit
        estimated_params, d = leastsq(error_function, initial_guess, args = (x_data, y_data))
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/optimize/minpack.py", line 324, in leastsq
        raise errors[info][1](errors[info][0])
    TypeError: Improper input parameters.
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py", line 571:
    sage: fit[a], fit[b], fit[c]
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_7[8]>", line 1, in <module>
        fit[a], fit[b], fit[c]###line 571:
    sage: fit[a], fit[b], fit[c]
    NameError: name 'fit' is not defined
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/numerical/optimize.py", line 577:
    sage: find_fit(dataprime, a * x * log(b * x), parameters = [a, b], variables = [x])
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_7[10]>", line 1, in <module>
        find_fit(dataprime, a * x * log(b * x), parameters = [a, b], variables = [x])###line 577:
    sage: find_fit(dataprime, a * x * log(b * x), parameters = [a, b], variables = [x])
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/numerical/optimize.py", line 655, in find_fit
        estimated_params, d = leastsq(error_function, initial_guess, args = (x_data, y_data))
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/optimize/minpack.py", line 324, in leastsq
        raise errors[info][1](errors[info][0])
    TypeError: Improper input parameters.
**********************************************************************
2 items had failures:
```
That looks bad we obviously have stuff wrong in scipy.

```
sage -t  -long -force_lib devel/sage/sage/ext/fast_callable.pyx
get_str.c:149: MPFR assertion failed: size_s1 >= m
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/ext/fast_callable.pyx", line 1445:
    sage: square(RIF(-1, 1)).str(style='brackets')
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_50[7]>", line 1, in <module>
        square(RIF(-Integer(1), Integer(1))).str(style='brackets')###line 1445:
    sage: square(RIF(-1, 1)).str(style='brackets')
      File "real_mpfi.pyx", line 1425, in sage.rings.real_mpfi.RealIntervalFieldElement.str (sage/rings/real_mpfi.c:8979)
      File "real_mpfr.pyx", line 1618, in sage.rings.real_mpfr.RealNumber.str (sage/rings/real_mpfr.c:11037)
    RuntimeError: Aborted
**********************************************************************
1 items had failures:
```
Something miscompiled in mpfr?

```
sage -t  -long -force_lib devel/sage/sage/categories/pushout.py
Exception RuntimeError: 'maximum recursion depth exceeded while calling a Python object' in <type 'exceptions.RuntimeError'> ignored
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/categories/pushout.py", line 2421:
    sage: F2(QQ).coerce_embedding()
Expected:
    Generic morphism:
      From: Number Field in a with defining polynomial x^3 - x^2 + 1
      To:   Real Lazy Field
      Defn: a -> -0.7548776662466928?
Got:
    Generic morphism:
      From: Number Field in a with defining polynomial x^3 - x^2 + 1
      To:   Real Lazy Field
      Defn: a -> 0
**********************************************************************
```
And we have a repeat of errors from qqbar.py in that test too.

```
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/period_lattice.py
```
more qqbar.py failuresalong with mpfr/mpfi like in elliptic_curves.rst and some wrong results:

```
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/schemes/elliptic_curves/period_lattice.py", line 854:
    sage: L.basis_matrix()
Expected:
    [ 2.49021256085505 0.000000000000000]
    [0.000000000000000  1.97173770155165]
Got:
    [ 1.26920930427955 0.000000000000000]
    [0.634604652139777  1.45881661693850]
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/schemes/elliptic_curves/period_lattice.py", line 857:
    sage: L.basis_matrix(normalised=True)
Expected:
    [ 2.49021256085505 0.000000000000000]
    [0.000000000000000 -1.97173770155165]
Got:
    [0.634604652139777 -1.45881661693850]
    [-1.26920930427955 0.000000000000000]
**********************************************************************
```


```
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/descent_two_isogeny.pyx
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/schemes/elliptic_curves/descent_two_isogeny.pyx", line 1147:
    sage: E.sha().an()
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_18[28]>", line 1, in <module>
        E.sha().an()###line 1147:
    sage: E.sha().an()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py", line 392, in an
        L1_over_omega = E.lseries().L_ratio()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py", line 686, in L_ratio
        omega = self.__E.period_lattice().basis()[0]
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 2861, in period_lattice
        self._period_lattice = PeriodLattice_ell(self)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/period_lattice.py", line 231, in __init__
        self._ei = self.f2.roots(AA,multiplicities=False)
      File "polynomial_element.pyx", line 4850, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31255)
      File "real_roots.pyx", line 4115, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36162)
      File "real_mpfi.pyx", line 277, in sage.rings.real_mpfi.RealIntervalField (sage/rings/real_mpfi.c:2982)
      File "real_mpfi.pyx", line 441, in sage.rings.real_mpfi.RealIntervalField_class.__init__ (sage/rings/real_mpfi.c:3124)
    OverflowError: value too large to convert to int
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/schemes/elliptic_curves/descent_two_isogeny.pyx", line 1147:
    sage: E.sha().an()
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_18[28]>", line 1, in <module>
        E.sha().an()###line 1147:
    sage: E.sha().an()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py", line 392, in an
        L1_over_omega = E.lseries().L_ratio()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py", line 686, in L_ratio
        omega = self.__E.period_lattice().basis()[0]
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 2861, in period_lattice
        self._period_lattice = PeriodLattice_ell(self)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/period_lattice.py", line 231, in __init__
        self._ei = self.f2.roots(AA,multiplicities=False)
      File "polynomial_element.pyx", line 4850, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31255)
      File "real_roots.pyx", line 4115, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36162)
      File "real_mpfi.pyx", line 277, in sage.rings.real_mpfi.RealIntervalField (sage/rings/real_mpfi.c:2982)
      File "real_mpfi.pyx", line 441, in sage.rings.real_mpfi.RealIntervalField_class.__init__ (sage/rings/real_mpfi.c:3124)
    OverflowError: value too large to convert to int
**********************************************************************
```
again and again in that one

```
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/padics.py
```
There are other errors in that last one but I think they are consequences of previous failures.

Same error in

```
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_modular_symbols.py
```
again some other errors that are probably consequences of this particular failure. We get some qqbar.py errors too in that one.

```
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/lseries_ell.py
  ***   Warning: new stack size = 1001728 (0.955 Mbytes).
  ***   Warning: new stack size = 1002624 (0.956 Mbytes).
  ***   Warning: new stack size = 1010736 (0.964 Mbytes).
  ***   Warning: new stack size = 1114144 (1.063 Mbytes).
**********************************************************************
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_point.py
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/modular_parametrization.py
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/BSD.py
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/padic_lseries.py
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/sha_tate.py
sage -t  -long -force_lib devel/sage/sage/rings/real_lazy.pyx
sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py
sage -t  -long -force_lib devel/sage/sage/rings/qqbar.py <- what a surprise (got MPFR assertion errors too)
sage -t  -long -force_lib devel/sage/sage/rings/number_field/totallyreal_rel.py
sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_morphisms.pyx
sage -t  -long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py
sage -t  -long -force_lib devel/sage/sage/rings/polynomial/real_roots.pyx
get_str.c:149: MPFR assertion failed: size_s1 >= m
get_str.c:149: MPFR assertion failed: size_s1 >= m
```
some more of the same with qqbar.py and mpfi/mpfr.

```
sage -t  -long -force_lib devel/sage/sage/rings/real_interval_absolute.pyx
get_str.c:149: MPFR assertion failed: size_s1 >= m
get_str.c:149: MPFR assertion failed: size_s1 >= m
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/rings/real_interval_absolute.pyx", line 237:
    sage: R(1)
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_12[4]>", line 1, in <module>
        R(Integer(1))###line 237:
    sage: R(1)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/misc/displayhook.py", line 174, in displayhook
        print_obj(sys.stdout, obj)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/misc/displayhook.py", line 142, in print_obj
        print >>out_stream, `obj`
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1463)
      File "real_interval_absolute.pyx", line 434, in sage.rings.real_interval_absolute.RealIntervalAbsoluteElement._repr_ (sage/rings/real_interval_absolute.c:4989)
        return repr(self._real_mpfi_(RealIntervalField(prec)))
      File "real_mpfi.pyx", line 1109, in sage.rings.real_mpfi.RealIntervalFieldElement.__repr__ (sage/rings/real_mpfi.c:7925)
        return self.str(10)
      File "real_mpfi.pyx", line 1434, in sage.rings.real_mpfi.RealIntervalFieldElement.str (sage/rings/real_mpfi.c:9075)
        return self._str_question_style(base, error_digits, e, prefer_sci)
      File "real_mpfi.pyx", line 1650, in sage.rings.real_mpfi.RealIntervalFieldElement._str_question_style (sage/rings/real_mpfi.c:9520)
        sig_on()
    RuntimeError: Aborted
get_str.c:149: MPFR assertion failed: size_s1 >= m
```
mpfr troubles with one backtrace

```
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/rings/real_interval_absolute.pyx", line 915:
    sage: R(10)^-10
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_39[7]>", line 1, in <module>
        R(Integer(10))**-Integer(10)###line 915:
    sage: R(10)^-10
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/misc/displayhook.py", line 174, in displayhook
        print_obj(sys.stdout, obj)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/misc/displayhook.py", line 142, in print_obj
        print >>out_stream, `obj`
      File "sage_object.pyx", line 154, in sage.structure.sage_object.SageObject.__repr__ (sage/structure/sage_object.c:1463)
      File "real_interval_absolute.pyx", line 434, in sage.rings.real_interval_absolute.RealIntervalAbsoluteElement._repr_ (sage/rings/real_interval_absolute.c:4989)
        return repr(self._real_mpfi_(RealIntervalField(prec)))
      File "real_mpfi.pyx", line 1109, in sage.rings.real_mpfi.RealIntervalFieldElement.__repr__ (sage/rings/real_mpfi.c:7925)
        return self.str(10)
      File "real_mpfi.pyx", line 1434, in sage.rings.real_mpfi.RealIntervalFieldElement.str (sage/rings/real_mpfi.c:9075)
        return self._str_question_style(base, error_digits, e, prefer_sci)
      File "real_mpfi.pyx", line 1650, in sage.rings.real_mpfi.RealIntervalFieldElement._str_question_style (sage/rings/real_mpfi.c:9520)
        sig_on()
    RuntimeError: Aborted
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libcsage.so(print_backtrace-0x1cf7c)[0x40000a4e49c]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libcsage.so(sigdie-0x1cf24)[0x40000a4e50c]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libcsage.so(sage_signal_handler-0x1d600)[0x40000a4dd88]
[0x40000040418]
[0xfffcd8e00f0]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyString_FromString-0x1346dc)[0x40000132594]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyErr_SetString-0xbeac8)[0x400001aced0]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libcsage.so(sage_signal_handler-0x1d6c0)[0x40000a4dcc8]
[0x40000040418]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libgmp.so.3(__gmpz_get_str-0x62970)[0x400013b3cf0]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libgmp.so.3(__gmpq_get_str-0x55e8c)[0x400013c111c]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/rational.so(+0x2156c)[0x40003b8156c]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyCFunction_Call-0x1459b8)[0x4000011fc80]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/libpython2.6.so.1.0(PyObject_Call-0x18cd08)[0x400000d3590]
/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/rational.so(+0x133cc)[0x40003b733cc]
```
Also

```
sage -t  -long -force_lib devel/sage/sage/rings/complex_interval.pyx
get_str.c:149: MPFR assertion failed: size_s1 >= m
get_str.c:149: MPFR assertion failed: size_s1 >= m
sage -t  -long -force_lib devel/sage/sage/rings/real_mpfi.pyx
get_str.c:149: MPFR assertion failed: size_s1 >= m
get_str.c:149: MPFR assertion failed: size_s1 >= m (and a bunch of other errors)
sage -t  -long -force_lib devel/sage/sage/misc/functional.py
#0: simplify_sum(expr='sum(q^k,k,0,inf))
#1: simplify_sum(expr=a*'sum(q^k,k,0,inf))
get_str.c:149: MPFR assertion failed: size_s1 >= m
sage -t  -long -force_lib devel/sage/sage/rings/polynomial/real_roots.pyx
get_str.c:149: MPFR assertion failed: size_s1 >= m
get_str.c:149: MPFR assertion failed: size_s1 >= m
```


```
sage -t  -long -force_lib devel/sage/sage/lfunctions/sympow.py
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/lfunctions/sympow.py", line 213:
    sage: sympow.modular_degree(EllipticCurve('11a'))
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_6[2]>", line 1, in <module>
        sympow.modular_degree(EllipticCurve('11a'))###line 213:
    sage: sympow.modular_degree(EllipticCurve('11a'))
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/lfunctions/sympow.py", line 229, in modular_degree
        raise RuntimeError, "failed to compute modular degree"
    RuntimeError: failed to compute modular degree
```
sympow...

```
sage -t  -long -force_lib devel/sage/sage/interfaces/qepcad.py
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/interfaces/qepcad.py", line 2045:
    sage: x = _eval_qepcad_algebraic('the unique root of 8 x^2 - 8 x - 29 between -47/32 and -1503/1024'); x
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_52[3]>", line 1, in <module>
        x = _eval_qepcad_algebraic('the unique root of 8 x^2 - 8 x - 29 between -47/32 and -1503/1024'); x###line 2045:
    sage: x = _eval_qepcad_algebraic('the unique root of 8 x^2 - 8 x - 29 between -47/32 and -1503/1024'); x
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/interfaces/qepcad.py", line 2069, in _eval_qepcad_algebraic
        raise ValueError, "%s or %s not an exact floating-point number"%(lbound, ubound)
    ValueError: -47/32 or -1503/1024 not an exact floating-point number
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/interfaces/qepcad.py", line 2047:
    sage: 8*x^2 - 8*x - 29 == 0
Expected:
    True
Got:
    8*x^2 - 8*x - 29 == 0
**********************************************************************
```

```
sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/rings/number_field/number_field_rel.py", line 1876:
    sage: L.places()
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_54[3]>", line 1, in <module>
        L.places()###line 1876:
    sage: L.places()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/number_field/number_field_rel.py", line 1899, in places
        pl = L.places(all_complex, prec)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/rings/number_field/number_field.py", line 6226, in places
        real_intervals = [ x[0] for x in self.defining_polynomial().roots(R) ]
      File "polynomial_element.pyx", line 4853, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31307)
      File "real_roots.pyx", line 4115, in sage.rings.polynomial.real_roots.real_roots (sage/rings/polynomial/real_roots.c:36162)
      File "real_mpfi.pyx", line 277, in sage.rings.real_mpfi.RealIntervalField (sage/rings/real_mpfi.c:2982)
      File "real_mpfi.pyx", line 441, in sage.rings.real_mpfi.RealIntervalField_class.__init__ (sage/rings/real_mpfi.c:3124)
    OverflowError: value too large to convert to int
**********************************************************************
1 items had failures:
```


```
sage -t  -long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/plot/plot3d/list_plot3d.py", line 102:
    sage: list_plot3d(m, texture='yellow', interpolation_type='spline',frame_aspect_ratio=[1,1,1/3])
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[9]>", line 1, in <module>
        list_plot3d(m, texture='yellow', interpolation_type='spline',frame_aspect_ratio=[Integer(1),Integer(1),Integer(1)/Integer(3)])###line 102:
    sage: list_plot3d(m, texture='yellow', interpolation_type='spline',frame_aspect_ratio=[1,1,1/3])
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/plot/plot3d/list_plot3d.py", line 172, in list_plot3d
        return list_plot3d_tuples(l,interpolation_type,texture,**kwds)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/plot/plot3d/list_plot3d.py", line 316, in list_plot3d_tuples
        s=interpolate.bisplrep(x,y,z,[int(1)]*len(x),xmin,xmax,ymin,ymax,kx=kx,ky=ky,s=s)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/interpolate/fitpack.py", line 873, in bisplrep
        tx,ty,nxest,nyest,wrk,lwrk1,lwrk2)
    ValueError: negative dimensions are not allowed
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/plot/plot3d/list_plot3d.py", line 109:
    sage: list_plot3d(m, texture='yellow', interpolation_type='spline', degree=5, frame_aspect_ratio=[1,1,1/3])
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[10]>", line 1, in <module>
        list_plot3d(m, texture='yellow', interpolation_type='spline', degree=Integer(5), frame_aspect_ratio=[Integer(1),Integer(1),Integer(1)/Integer(3)])###line 109:
    sage: list_plot3d(m, texture='yellow', interpolation_type='spline', degree=5, frame_aspect_ratio=[1,1,1/3])
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/plot/plot3d/list_plot3d.py", line 172, in list_plot3d
        return list_plot3d_tuples(l,interpolation_type,texture,**kwds)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/plot/plot3d/list_plot3d.py", line 316, in list_plot3d_tuples
        s=interpolate.bisplrep(x,y,z,[int(1)]*len(x),xmin,xmax,ymin,ymax,kx=kx,ky=ky,s=s)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/scipy/interpolate/fitpack.py", line 873, in bisplrep
        tx,ty,nxest,nyest,wrk,lwrk1,lwrk2)
    ValueError: negative dimensions are not allowed
**********************************************************************
1 items had failures:
   2 of  26 in __main__.example_1
```

```
sage -t  -long -force_lib devel/sage/sage/modular/abvar/abvar.py
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/modular/abvar/abvar.py", line 3305:
    sage: E.modular_degree()
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_84[8]>", line 1, in <module>
        E.modular_degree()###line 3305:
    sage: E.modular_degree()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3201, in modular_degree
        m = sympow.modular_degree(self)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/lfunctions/sympow.py", line 229, in modular_degree
        raise RuntimeError, "failed to compute modular degree"
    RuntimeError: failed to compute modular degree
**********************************************************************
1 items had failures:
sage -t  -long -force_lib devel/sage/sage/modular/hecke/submodule.py
**********************************************************************
File "/tmp/bjones/sage-4.7.2.alpha2/devel/sage-main/sage/modular/hecke/submodule.py", line 511:
    sage: EllipticCurve('128a').congruence_number()
Exception raised:
    Traceback (most recent call last):
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_17[19]>", line 1, in <module>
        EllipticCurve('128a').congruence_number()###line 511:
    sage: EllipticCurve('128a').congruence_number()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3294, in congruence_number
        m = self.modular_degree()
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3201, in modular_degree
        m = sympow.modular_degree(self)
      File "/tmp/bjones/sage-4.7.2.alpha2/local/lib/python/site-packages/sage/lfunctions/sympow.py", line 229, in modular_degree
        raise RuntimeError, "failed to compute modular degree"
    RuntimeError: failed to compute modular degree
**********************************************************************
1 items had failures:
   1 of  21 in __main__.example_17
```
come from sympow

So big trouble coming from mpfr or possibly mpir underneath. Once we isolate that most of these will disapear.



---

archive/issue_comments_123337.json:
```json
{
    "body": "<a id='comment:15'></a>\nWith the new mpir spkg from #11964, Sage builds for me on silius, using gcc 4.6.2.  I get a lot of test failures, though: I think that many of these are as reported before.  See [the log](http://sage.math.washington.edu/home/palmieri/misc/silius-ptestlong.log) for full details.",
    "created_at": "2011-11-02T20:30:51Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123337",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'></a>
With the new mpir spkg from #11964, Sage builds for me on silius, using gcc 4.6.2.  I get a lot of test failures, though: I think that many of these are as reported before.  See [the log](http://sage.math.washington.edu/home/palmieri/misc/silius-ptestlong.log) for full details.



---

archive/issue_comments_123338.json:
```json
{
    "body": "<a id='comment:16'></a>\nI was hoping the mpir upgrade would deal with some of these.\nI'd like to try a vanilla compiler from SLES (gfortran is on a separate SDK DVD I discovered).",
    "created_at": "2011-11-02T21:20:33Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123338",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'></a>
I was hoping the mpir upgrade would deal with some of these.
I'd like to try a vanilla compiler from SLES (gfortran is on a separate SDK DVD I discovered).



---

archive/issue_comments_123339.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [jhpalmieri](#comment%3A15):\n> With the new mpir spkg from #11964, Sage builds for me on silius, using gcc 4.6.2.  I get a lot of test failures, though: I think that many of these are as reported before.  See [the log](http://sage.math.washington.edu/home/palmieri/misc/silius-ptestlong.log) for full details.\n> \n\n```\n The following tests failed:\n \n \tsage -t  -long -force_lib devel/sagenb-main/sagenb/interfaces/status.py # File not found\n \tsage -t  -long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed\n \tsage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst # 10 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/libs/libecm.pyx # Killed/crashed\n \tsage -t  -long -force_lib devel/sage/sage/categories/pushout.py # 8 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/qqbar.py # 119 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/real_interval_absolute.pyx # 53 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/complex_interval.pyx # 22 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/real_lazy.pyx # 3 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/number_field/totallyreal_rel.py # 8 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_morphisms.pyx # 2 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py # 1 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py # 1 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/misc/randstate.pyx # Time out\n \tsage -t  -long -force_lib devel/sage/sage/rings/polynomial/real_roots.pyx # 23 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/structure/parent.pyx # 1 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/real_mpfi.pyx # Time out\n \tsage -t  -long -force_lib devel/sage/sage/structure/sage_object.pyx # 1 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/lfunctions/sympow.py # 13 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # Time out\n \tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field.py # Time out\n \tsage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_element.pyx # Time out\n \tsage -t  -long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 2 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/interfaces/qepcad.py # 2 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/padics.py # 10 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/padic_lseries.py # 44 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 3 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_point.py # 9 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/tests/startup.py # Time out\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_modular_symbols.py # 16 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/modular_parametrization.py # 4 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/BSD.py # 6 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/descent_two_isogeny.pyx # 2 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # 72 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/period_lattice.py # 70 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 48 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 40 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/ext/fast_callable.pyx # 1 doctests failed\n \tsage -t  -long -force_lib devel/sage/sage/interfaces/psage.py # Time out\n \tsage -t  -long -force_lib devel/sage/sage/interfaces/expect.py # Time out\n \tsage -t  -long -force_lib devel/sage/sage/interfaces/sage0.py # Time out\n ----------------------------------------------------------------------\n```\n\nFWIW, I previously managed to reduce the doctest errors to 7 files IIRC; from sage-release (Sage 4.7.2.alpha3 thread):\n\n```\nleif wrote:\n> > I've also tested on Linux PPC64 (POWER7), but there a lot goes wrong\n> > (mainly due to a partially broken ECL and Maxima I think), including\n> > some noise I didn't see on any of the other platforms, e.g. ones that\n> > don't match \"1.00...\" because they are slightly *less* than one.\n\nP.S.: The following tests even timeout when run individually (with the\ndefault timeout of half an hour on a quite fast box) in my current build:\n\nsage -t  -long -force_lib sage/rings/real_mpfi.pyx # Time out\nsage -t  -long -force_lib sage/rings/polynomial/polynomial_element.pyx #\nTime out\nsage -t  -long -force_lib\nsage/rings/number_field/number_field_element.pyx # Time out\nsage -t  -long -force_lib sage/sage/rings/number_field/number_field.py #\nTime out\n\nInterestingly also sandpile takes a long time, although this is SUSE\nLinux Enterprise Server 11 SP1 (ppc64), Kernel version\n2.6.32.43-0.4-ppc64 and not Ubuntu.\n\nThe other failing doctests are in:\n\n  sage/misc/functional.py # 1 doctests failed\n  (failing MPFR assertion)\n  sage/interfaces/qepcad.py # 2 doctests failed\n  (two funny errors)\n  sage/plot/plot3d/list_plot3d.py # 2 doctests failed\n  (two times \"ValueError: negative dimensions are not allowed\" in\nlist_plot3d())\n\nNote that there are further doctest errors in the files which timeout,\ni.e., before tests start to hang.\n\n\n-leif\n```\n\nI unfortunately cannot tell (at least at the moment) how I exactly built that version since I had trouble with various things like GCC 4.4.6 not recognizing `-mvsx` (which ATLAS uses without first trying whether the command line option is supported) and the PolyBoRi spkg which didn't propagate `LIBRARY_PATH` etc.",
    "created_at": "2011-11-02T21:58:05Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123339",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>
Replying to [jhpalmieri](#comment%3A15):
> With the new mpir spkg from #11964, Sage builds for me on silius, using gcc 4.6.2.  I get a lot of test failures, though: I think that many of these are as reported before.  See [the log](http://sage.math.washington.edu/home/palmieri/misc/silius-ptestlong.log) for full details.
> 

```
 The following tests failed:
 
 	sage -t  -long -force_lib devel/sagenb-main/sagenb/interfaces/status.py # File not found
 	sage -t  -long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed
 	sage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst # 10 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/libs/libecm.pyx # Killed/crashed
 	sage -t  -long -force_lib devel/sage/sage/categories/pushout.py # 8 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/qqbar.py # 119 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/real_interval_absolute.pyx # 53 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/complex_interval.pyx # 22 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/real_lazy.pyx # 3 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/number_field/totallyreal_rel.py # 8 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_morphisms.pyx # 2 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py # 1 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py # 1 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/misc/randstate.pyx # Time out
 	sage -t  -long -force_lib devel/sage/sage/rings/polynomial/real_roots.pyx # 23 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/structure/parent.pyx # 1 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/real_mpfi.pyx # Time out
 	sage -t  -long -force_lib devel/sage/sage/structure/sage_object.pyx # 1 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/lfunctions/sympow.py # 13 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # Time out
 	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field.py # Time out
 	sage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_element.pyx # Time out
 	sage -t  -long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 2 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/interfaces/qepcad.py # 2 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/padics.py # 10 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/padic_lseries.py # 44 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 3 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_point.py # 9 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/tests/startup.py # Time out
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_modular_symbols.py # 16 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/modular_parametrization.py # 4 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/BSD.py # 6 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/descent_two_isogeny.pyx # 2 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # 72 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/period_lattice.py # 70 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 48 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 40 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/ext/fast_callable.pyx # 1 doctests failed
 	sage -t  -long -force_lib devel/sage/sage/interfaces/psage.py # Time out
 	sage -t  -long -force_lib devel/sage/sage/interfaces/expect.py # Time out
 	sage -t  -long -force_lib devel/sage/sage/interfaces/sage0.py # Time out
 ----------------------------------------------------------------------
```

FWIW, I previously managed to reduce the doctest errors to 7 files IIRC; from sage-release (Sage 4.7.2.alpha3 thread):

```
leif wrote:
> > I've also tested on Linux PPC64 (POWER7), but there a lot goes wrong
> > (mainly due to a partially broken ECL and Maxima I think), including
> > some noise I didn't see on any of the other platforms, e.g. ones that
> > don't match "1.00..." because they are slightly *less* than one.

P.S.: The following tests even timeout when run individually (with the
default timeout of half an hour on a quite fast box) in my current build:

sage -t  -long -force_lib sage/rings/real_mpfi.pyx # Time out
sage -t  -long -force_lib sage/rings/polynomial/polynomial_element.pyx #
Time out
sage -t  -long -force_lib
sage/rings/number_field/number_field_element.pyx # Time out
sage -t  -long -force_lib sage/sage/rings/number_field/number_field.py #
Time out

Interestingly also sandpile takes a long time, although this is SUSE
Linux Enterprise Server 11 SP1 (ppc64), Kernel version
2.6.32.43-0.4-ppc64 and not Ubuntu.

The other failing doctests are in:

  sage/misc/functional.py # 1 doctests failed
  (failing MPFR assertion)
  sage/interfaces/qepcad.py # 2 doctests failed
  (two funny errors)
  sage/plot/plot3d/list_plot3d.py # 2 doctests failed
  (two times "ValueError: negative dimensions are not allowed" in
list_plot3d())

Note that there are further doctest errors in the files which timeout,
i.e., before tests start to hang.


-leif
```

I unfortunately cannot tell (at least at the moment) how I exactly built that version since I had trouble with various things like GCC 4.4.6 not recognizing `-mvsx` (which ATLAS uses without first trying whether the command line option is supported) and the PolyBoRi spkg which didn't propagate `LIBRARY_PATH` etc.



---

archive/issue_comments_123340.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,5 @@\n \n * Building Tachyon: #11706  (with patch; needs review)\n * Maxima build gets nowhere: #11708\n+* The MPIR 2.1.3.p7 spkg from #11964 fixes a regression in the p5/p6 spkgs. (The p4 from #8664 works as well.)\n+\n``````\n",
    "created_at": "2011-11-02T22:00:53Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123340",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,5 @@
 
 * Building Tachyon: #11706  (with patch; needs review)
 * Maxima build gets nowhere: #11708
+* The MPIR 2.1.3.p7 spkg from #11964 fixes a regression in the p5/p6 spkgs. (The p4 from #8664 works as well.)
+
``````




---

archive/issue_comments_123341.json:
```json
{
    "body": "<a id='comment:19'></a>\nI have built 5.0.prealpha on one of the power7 box I have access too (not silius). I get the following after running the tests (not in parallel)\n\n```\nThe following tests failed:\n\n\n        sage -t -long  -force_lib \"devel/sage/sage/numerical/optimize.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/misc/functional.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/libs/libecm.pyx\" # Killed/crashed\n        sage -t -long  -force_lib \"devel/sage/sage/categories/pushout.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/rings/real_mpfi.pyx\" # Time out\n        sage -t -long  -force_lib \"devel/sage/sage/rings/number_field/totallyreal_rel.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/rings/number_field/number_field_element.pyx\" # Time out\n        sage -t -long  -force_lib \"devel/sage/sage/rings/number_field/number_field_morphisms.pyx\"\n        sage -t -long  -force_lib \"devel/sage/sage/rings/number_field/number_field.py\" # Killed/crashed\n        sage -t -long  -force_lib \"devel/sage/sage/rings/number_field/number_field_rel.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/rings/qqbar.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/rings/real_interval_absolute.pyx\"\n        sage -t -long  -force_lib \"devel/sage/sage/rings/complex_interval.pyx\"\n        sage -t -long  -force_lib \"devel/sage/sage/rings/real_lazy.pyx\"\n        sage -t -long  -force_lib \"devel/sage/sage/rings/polynomial/polynomial_element.pyx\" # Time out\n        sage -t -long  -force_lib \"devel/sage/sage/rings/polynomial/real_roots.pyx\"\n        sage -t -long  -force_lib \"devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/structure/parent.pyx\"\n        sage -t -long  -force_lib \"devel/sage/sage/structure/sage_object.pyx\"\n        sage -t -long  -force_lib \"devel/sage/sage/plot/plot3d/list_plot3d.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/interfaces/qepcad.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/graphs/graph_decompositions/vertex_separation.pyx\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/padics.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/padic_lseries.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/ell_point.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/lseries_ell.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/ell_modular_symbols.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/modular_parametrization.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/BSD.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/sha_tate.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/heegner.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/descent_two_isogeny.pyx\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/elliptic_curves/period_lattice.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/schemes/plane_conics/con_number_field.py\"\n        sage -t -long  -force_lib \"devel/sage/sage/ext/fast_callable.pyx\"\nTotal time for all tests: 21029.5 seconds\n```\nI cannot really post many details right now but the errors are similar to before. Problems with mpfr and scipy are the main culprits.\nSome details on the box used:\n\n```\nfrb15@p2n14-c /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0 :uname -a\nLinux p2n14-c 2.6.32.12-0.7-ppc64 #1 SMP 2010-05-20 11:14:20 +0200 ppc64 ppc64 ppc64 GNU/Linux\n```\nand the end of /proc/cpuinfo:\n\n```\nprocessor       : 61\ncpu             : POWER7 (architected), altivec supported\nclock           : 3300.000000MHz\nrevision        : 2.1 (pvr 003f 0201)\n\ntimebase        : 512000000\nplatform        : pSeries\nmodel           : IBM,8233-E8B\nmachine         : CHRP IBM,8233-E8B\n```",
    "created_at": "2012-01-06T18:01:12Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123341",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'></a>
I have built 5.0.prealpha on one of the power7 box I have access too (not silius). I get the following after running the tests (not in parallel)

```
The following tests failed:


        sage -t -long  -force_lib "devel/sage/sage/numerical/optimize.py"
        sage -t -long  -force_lib "devel/sage/sage/misc/functional.py"
        sage -t -long  -force_lib "devel/sage/sage/libs/libecm.pyx" # Killed/crashed
        sage -t -long  -force_lib "devel/sage/sage/categories/pushout.py"
        sage -t -long  -force_lib "devel/sage/sage/rings/real_mpfi.pyx" # Time out
        sage -t -long  -force_lib "devel/sage/sage/rings/number_field/totallyreal_rel.py"
        sage -t -long  -force_lib "devel/sage/sage/rings/number_field/number_field_element.pyx" # Time out
        sage -t -long  -force_lib "devel/sage/sage/rings/number_field/number_field_morphisms.pyx"
        sage -t -long  -force_lib "devel/sage/sage/rings/number_field/number_field.py" # Killed/crashed
        sage -t -long  -force_lib "devel/sage/sage/rings/number_field/number_field_rel.py"
        sage -t -long  -force_lib "devel/sage/sage/rings/qqbar.py"
        sage -t -long  -force_lib "devel/sage/sage/rings/real_interval_absolute.pyx"
        sage -t -long  -force_lib "devel/sage/sage/rings/complex_interval.pyx"
        sage -t -long  -force_lib "devel/sage/sage/rings/real_lazy.pyx"
        sage -t -long  -force_lib "devel/sage/sage/rings/polynomial/polynomial_element.pyx" # Time out
        sage -t -long  -force_lib "devel/sage/sage/rings/polynomial/real_roots.pyx"
        sage -t -long  -force_lib "devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py"
        sage -t -long  -force_lib "devel/sage/sage/structure/parent.pyx"
        sage -t -long  -force_lib "devel/sage/sage/structure/sage_object.pyx"
        sage -t -long  -force_lib "devel/sage/sage/plot/plot3d/list_plot3d.py"
        sage -t -long  -force_lib "devel/sage/sage/interfaces/qepcad.py"
        sage -t -long  -force_lib "devel/sage/sage/graphs/graph_decompositions/vertex_separation.pyx"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/padics.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/padic_lseries.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/ell_point.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/lseries_ell.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/ell_modular_symbols.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/modular_parametrization.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/BSD.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/sha_tate.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/heegner.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/descent_two_isogeny.pyx"
        sage -t -long  -force_lib "devel/sage/sage/schemes/elliptic_curves/period_lattice.py"
        sage -t -long  -force_lib "devel/sage/sage/schemes/plane_conics/con_number_field.py"
        sage -t -long  -force_lib "devel/sage/sage/ext/fast_callable.pyx"
Total time for all tests: 21029.5 seconds
```
I cannot really post many details right now but the errors are similar to before. Problems with mpfr and scipy are the main culprits.
Some details on the box used:

```
frb15@p2n14-c /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0 :uname -a
Linux p2n14-c 2.6.32.12-0.7-ppc64 #1 SMP 2010-05-20 11:14:20 +0200 ppc64 ppc64 ppc64 GNU/Linux
```
and the end of /proc/cpuinfo:

```
processor       : 61
cpu             : POWER7 (architected), altivec supported
clock           : 3300.000000MHz
revision        : 2.1 (pvr 003f 0201)

timebase        : 512000000
platform        : pSeries
model           : IBM,8233-E8B
machine         : CHRP IBM,8233-E8B
```



---

archive/issue_comments_123342.json:
```json
{
    "body": "<a id='comment:20'></a>\nI can supply gdb output for the test that got killed, \"devel/sage/sage/rings/number_field/number_field.py\":\n\n```\ninit2.c:52: MPFR assertion failed: p >= 2 && p <= ((mpfr_prec_t)((mpfr_prec_t)(~(mpfr_prec_t)0)>>1))\n\nProgram received signal SIGABRT, Aborted.\n0x00000400004c80e0 in .raise () from /lib64/power7/libc.so.6\n(gdb) bt\n#0  0x00000400004c80e0 in .raise () from /lib64/power7/libc.so.6\n#1  0x00000400004c9da0 in .abort () from /lib64/power7/libc.so.6\n#2  0x0000040004202580 in .mpfr_assert_fail () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.1\n#3  0x00000400041f9278 in .mpfr_init2 () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.1\n#4  0x00000400041e92c0 in .set_z () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.1\n#5  0x00000400041e9424 in .mpfr_set_q () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.1\n#6  0x00000400044ba900 in mpfi_interv_q (a=0x1703db98, b=0x17034250, c=0x170342b0) at mpfi.c:3648\n#7  0x000004000445b3a0 in __pyx_pf_4sage_5rings_9real_mpfi_24RealIntervalFieldElement___init__ (__pyx_v_self=0x1703db78, \n    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:7366\n#8  0x000004000017736c in type_call (type=<value optimized out>, args=0x17025500, kwds=0x0) at Objects/typeobject.c:735\n#9  0x00000400000ecb3c in PyObject_Call (func=0x4000449c208, arg=0x17025500, kw=0x0) at Objects/abstract.c:2529\n#10 0x000004000445e514 in __pyx_pf_4sage_5rings_9real_mpfi_23RealIntervalField_class_9__call__ (__pyx_v_self=0x10ee1c50, \n    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:4421\n```\nI may try to upgrade mpfi/mpfr to see if it improve things.",
    "created_at": "2012-01-06T18:08:42Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123342",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>
I can supply gdb output for the test that got killed, "devel/sage/sage/rings/number_field/number_field.py":

```
init2.c:52: MPFR assertion failed: p >= 2 && p <= ((mpfr_prec_t)((mpfr_prec_t)(~(mpfr_prec_t)0)>>1))

Program received signal SIGABRT, Aborted.
0x00000400004c80e0 in .raise () from /lib64/power7/libc.so.6
(gdb) bt
#0  0x00000400004c80e0 in .raise () from /lib64/power7/libc.so.6
#1  0x00000400004c9da0 in .abort () from /lib64/power7/libc.so.6
#2  0x0000040004202580 in .mpfr_assert_fail () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.1
#3  0x00000400041f9278 in .mpfr_init2 () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.1
#4  0x00000400041e92c0 in .set_z () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.1
#5  0x00000400041e9424 in .mpfr_set_q () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.1
#6  0x00000400044ba900 in mpfi_interv_q (a=0x1703db98, b=0x17034250, c=0x170342b0) at mpfi.c:3648
#7  0x000004000445b3a0 in __pyx_pf_4sage_5rings_9real_mpfi_24RealIntervalFieldElement___init__ (__pyx_v_self=0x1703db78, 
    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:7366
#8  0x000004000017736c in type_call (type=<value optimized out>, args=0x17025500, kwds=0x0) at Objects/typeobject.c:735
#9  0x00000400000ecb3c in PyObject_Call (func=0x4000449c208, arg=0x17025500, kw=0x0) at Objects/abstract.c:2529
#10 0x000004000445e514 in __pyx_pf_4sage_5rings_9real_mpfi_23RealIntervalField_class_9__call__ (__pyx_v_self=0x10ee1c50, 
    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:4421
```
I may try to upgrade mpfi/mpfr to see if it improve things.



---

archive/issue_comments_123343.json:
```json
{
    "body": "<a id='comment:21'></a>\nI have updated mpfi and mpfr using #12171 and #11666 and now I am getting a backtrace going back to mpir:\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\n0x000004000155c604 in .__gmpn_lshift () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libgmp.so.8\n(gdb) bt\n#0  0x000004000155c604 in .__gmpn_lshift () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libgmp.so.8\n#1  0x00000400041efbd0 in .set_z () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4\n#2  0x00000400041efd3c in .mpfr_set_q () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4\n#3  0x00000400044d0580 in mpfi_interv_q (a=0x17033b98, b=0x170342b0, c=0x17034310) at interv_q.c:34\n#4  0x000004000446b3a0 in __pyx_pf_4sage_5rings_9real_mpfi_24RealIntervalFieldElement___init__ (__pyx_v_self=0x17033b78, \n    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:7366\n#5  0x000004000017736c in type_call (type=<value optimized out>, args=0x17025500, kwds=0x0) at Objects/typeobject.c:735\n#6  0x00000400000ecb3c in PyObject_Call (func=0x400044ac208, arg=0x17025500, kw=0x0) at Objects/abstract.c:2529\n#7  0x000004000446e514 in __pyx_pf_4sage_5rings_9real_mpfi_23RealIntervalField_class_9__call__ (__pyx_v_self=0x10ee1c50, \n    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:4421\n```",
    "created_at": "2012-01-06T19:08:29Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123343",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:21'></a>
I have updated mpfi and mpfr using #12171 and #11666 and now I am getting a backtrace going back to mpir:

```
Program received signal SIGSEGV, Segmentation fault.
0x000004000155c604 in .__gmpn_lshift () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libgmp.so.8
(gdb) bt
#0  0x000004000155c604 in .__gmpn_lshift () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libgmp.so.8
#1  0x00000400041efbd0 in .set_z () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4
#2  0x00000400041efd3c in .mpfr_set_q () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4
#3  0x00000400044d0580 in mpfi_interv_q (a=0x17033b98, b=0x170342b0, c=0x17034310) at interv_q.c:34
#4  0x000004000446b3a0 in __pyx_pf_4sage_5rings_9real_mpfi_24RealIntervalFieldElement___init__ (__pyx_v_self=0x17033b78, 
    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:7366
#5  0x000004000017736c in type_call (type=<value optimized out>, args=0x17025500, kwds=0x0) at Objects/typeobject.c:735
#6  0x00000400000ecb3c in PyObject_Call (func=0x400044ac208, arg=0x17025500, kw=0x0) at Objects/abstract.c:2529
#7  0x000004000446e514 in __pyx_pf_4sage_5rings_9real_mpfi_23RealIntervalField_class_9__call__ (__pyx_v_self=0x10ee1c50, 
    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:4421
```



---

archive/issue_comments_123344.json:
```json
{
    "body": "<a id='comment:22'></a>\nJust one more detail on the crash running the test with -verbose to get the failing bit:\n\n```\nTrying:\n    L = NumberField(x**Integer(3) - Integer(4)*x + Integer(1), embedding = RealNumber('1.86'), names=('b',)); (b,) = L._first_ngens(1)###line 5176:_sage_    >>> L.<b> = NumberField(x^3 - 4*x + 1, embedding = 1.86)\nExpecting nothing\nok\nTrying:\n    L(a)###line 5177:_sage_    >>> L(a)\nExpecting:\n    Traceback (most recent call last):\n    ...\n    ValueError: Cannot convert a to Number Field in b with defining polynomial x^3 - 4*x + 1 (using the specified embeddings)\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(print_backtrace-0x1cf74)[0x40000a5e1ec]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(sigdie-0x1cf1c)[0x40000a5e25c]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(sage_signal_handler-0x1d370)[0x40000a5dd60]\n[0x40000040418]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4(+0x2fbb0)[0x400040ffbb0]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4(mpfr_set_q-0x4f1b4)[0x400040ffd3c]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfi.so.0(mpfi_interv_q-0x1b260)[0x400043e0580]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/rings/real_mpfi.so(+0x2b3a0)[0x4000437b3a0]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libpython2.7.so.1.0(+0x11736c)[0x4000017736c]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libpython2.7.so.1.0(PyObject_Call-0x1bff54)[0x400000ecb3c]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/rings/real_mpfi.so(+0x2e514)[0x4000437e514]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libpython2.7.so.1.0(PyObject_Call-0x1bff54)[0x400000ecb3c]\nThe doctested process was killed by signal 11\n         [5.9 s]\n```\nSo we are expecting to catch some failure here in the first place and it doesn't go according to plan.\n\nAlso I forgot to mention I used the compiler fron SLES rather than compiling a newer version:\n\n```\ngcc -v\nUsing built-in specs.\nTarget: powerpc64-suse-linux\nConfigured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3 --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --program-suffix=-4.3 --enable-linux-futex --without-system-libunwind --with-cpu=power4 --enable-secureplt --with-long-double-128 --build=powerpc64-suse-linux\nThread model: posix\ngcc version 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux) \ngfortran -v\nUsing built-in specs.\nTarget: powerpc64-suse-linux\nConfigured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3 --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --program-suffix=-4.3 --enable-linux-futex --without-system-libunwind --with-cpu=power4 --enable-secureplt --with-long-double-128 --build=powerpc64-suse-linux\nThread model: posix\ngcc version 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux)\n```",
    "created_at": "2012-01-06T21:07:48Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123344",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:22'></a>
Just one more detail on the crash running the test with -verbose to get the failing bit:

```
Trying:
    L = NumberField(x**Integer(3) - Integer(4)*x + Integer(1), embedding = RealNumber('1.86'), names=('b',)); (b,) = L._first_ngens(1)###line 5176:_sage_    >>> L.<b> = NumberField(x^3 - 4*x + 1, embedding = 1.86)
Expecting nothing
ok
Trying:
    L(a)###line 5177:_sage_    >>> L(a)
Expecting:
    Traceback (most recent call last):
    ...
    ValueError: Cannot convert a to Number Field in b with defining polynomial x^3 - 4*x + 1 (using the specified embeddings)
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(print_backtrace-0x1cf74)[0x40000a5e1ec]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(sigdie-0x1cf1c)[0x40000a5e25c]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(sage_signal_handler-0x1d370)[0x40000a5dd60]
[0x40000040418]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4(+0x2fbb0)[0x400040ffbb0]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4(mpfr_set_q-0x4f1b4)[0x400040ffd3c]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfi.so.0(mpfi_interv_q-0x1b260)[0x400043e0580]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/rings/real_mpfi.so(+0x2b3a0)[0x4000437b3a0]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libpython2.7.so.1.0(+0x11736c)[0x4000017736c]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libpython2.7.so.1.0(PyObject_Call-0x1bff54)[0x400000ecb3c]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/rings/real_mpfi.so(+0x2e514)[0x4000437e514]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libpython2.7.so.1.0(PyObject_Call-0x1bff54)[0x400000ecb3c]
The doctested process was killed by signal 11
         [5.9 s]
```
So we are expecting to catch some failure here in the first place and it doesn't go according to plan.

Also I forgot to mention I used the compiler fron SLES rather than compiling a newer version:

```
gcc -v
Using built-in specs.
Target: powerpc64-suse-linux
Configured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3 --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --program-suffix=-4.3 --enable-linux-futex --without-system-libunwind --with-cpu=power4 --enable-secureplt --with-long-double-128 --build=powerpc64-suse-linux
Thread model: posix
gcc version 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux) 
gfortran -v
Using built-in specs.
Target: powerpc64-suse-linux
Configured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3 --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --program-suffix=-4.3 --enable-linux-futex --without-system-libunwind --with-cpu=power4 --enable-secureplt --with-long-double-128 --build=powerpc64-suse-linux
Thread model: posix
gcc version 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux)
```



---

archive/issue_comments_123345.json:
```json
{
    "body": "<a id='comment:23'></a>\nI am doing a complete test run with the new mpfi/mpfr combo but so far the results don't look any different. I looked a little bit more into the test that timed out (devel/sage/sage/rings/real_mpfi.pyx) with verbose and it stops dead there:\n\n```\nTrying:\n    RIF(Integer(5)).gamma()###line 4133:_sage_    >>> RIF(5).gamma()\nExpecting:\n    24\nok\nTrying:\n    a = RIF(Integer(3),Integer(4)).gamma(); a###line 4135:_sage_    >>> a = RIF(3,4).gamma(); a\nExpecting:\n    1.?e1\n```\nI'll look at the other killed test (libecm.pyx) a bit later.",
    "created_at": "2012-01-06T23:29:34Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123345",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'></a>
I am doing a complete test run with the new mpfi/mpfr combo but so far the results don't look any different. I looked a little bit more into the test that timed out (devel/sage/sage/rings/real_mpfi.pyx) with verbose and it stops dead there:

```
Trying:
    RIF(Integer(5)).gamma()###line 4133:_sage_    >>> RIF(5).gamma()
Expecting:
    24
ok
Trying:
    a = RIF(Integer(3),Integer(4)).gamma(); a###line 4135:_sage_    >>> a = RIF(3,4).gamma(); a
Expecting:
    1.?e1
```
I'll look at the other killed test (libecm.pyx) a bit later.



---

archive/issue_comments_123346.json:
```json
{
    "body": "<a id='comment:24'></a>\nlibecm.pyx doesn't seem to work at all\n\n```\nfrb15@p2n14-c /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0 :./sage -t -long  -force_lib \"devel/sage/sage/libs/libecm.pyx\" -verbose\nsage -t -long -force_lib -verbose \"devel/sage/sage/libs/libecm.pyx\"\nTrying:\n    set_random_seed(0L)\nExpecting nothing\nok\nTrying:\n    change_warning_output(sys.stdout)\nExpecting nothing\nok\nTrying:\n    import sage.libs.libecm###line 14:_sage_    >>> import sage.libs.libecm\nExpecting nothing\nok\nTrying:\n    from sage.libs.libecm import ecmfactor###line 15:_sage_    >>> from sage.libs.libecm import ecmfactor\nExpecting nothing\nok\nTrying:\n    result = ecmfactor(Integer(999), RealNumber('0.00'))###line 16:_sage_    >>> result = ecmfactor(999, 0.00)\nExpecting nothing\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(print_backtrace-0x1cf74)[0x40000a5e1ec]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(sigdie-0x1cf1c)[0x40000a5e25c]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(sage_signal_handler-0x1d370)[0x40000a5dd60]\n[0x40000040418]\n[0xfffc9771790]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/libs/libecm.so(+0x27c84)[0x4000a207c84]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/libs/libecm.so(ecm-0x657dc)[0x4000a1f60e4]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/libs/libecm.so(ecm_factor-0x6746c)[0x4000a1f43ac]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/libs/libecm.so(+0x133d4)[0x4000a1f33d4]\n/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libpython2.7.so.1.0(PyCFunction_Call-0x15fed4)[0x40000152c1c]\n```\nand from gdb\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\n0x7d0429d27d242810 in ?? ()\n(gdb) bt\n#0  0x7d0429d27d242810 in ?? ()\n#1  0x000004000a5d3f70 in mulredc (z=0x13afdb50, x=<value optimized out>, y=<value optimized out>, m=0x13b05df0, nn=1, \n    invm=4727093576446091305) at mpmod.c:386\n#2  0x000004000a5d7c84 in ecm_mulredc_basecase (R=0xfffffffb080, S1=0xfffffffb1a8, S2=0xfffffffb178, modulus=0xfffffffb130) at mpmod.c:611\n#3  0x000004000a5c60e4 in ecm (f=0xfffffffb578, x=0xfffffffb3d8, sigma=0xfffffffb3e8, n=0xfffffffb568, go=0xfffffffb400, \n    B1done=0xfffffffb410, B1=0, B2min_parm=0xfffffffb418, B2_parm=0xfffffffb428, B2scale=1, k=0, S=0, verbose=0, repr=<value optimized out>, \n    nobase2step2=0, use_ntt=1, sigma_is_A=0, os=0x4000061d698, es=0x4000061d778, chkfilename=0x0, TreeFilename=0x0, maxmem=0, stage1time=0, \n    rng=0xfffffffb480, stop_asap=0) at ecm.c:940\n#4  0x000004000a5c43ac in ecm_factor (f=0xfffffffb578, n=0xfffffffb568, B1=0, p=0xfffffffb3d0) at factor.c:93\n#5  0x000004000a5c33d4 in __pyx_pf_4sage_4libs_6libecm_ecmfactor (__pyx_self=<value optimized out>, __pyx_args=<value optimized out>, \n    __pyx_kwds=<value optimized out>) at sage/libs/libecm.c:1894\n#6  0x0000040000152c1c in PyCFunction_Call (func=0x13aae368, arg=0x13ac1878, kw=<value optimized out>) at Objects/methodobject.c:85\n```",
    "created_at": "2012-01-07T18:39:53Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123346",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'></a>
libecm.pyx doesn't seem to work at all

```
frb15@p2n14-c /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0 :./sage -t -long  -force_lib "devel/sage/sage/libs/libecm.pyx" -verbose
sage -t -long -force_lib -verbose "devel/sage/sage/libs/libecm.pyx"
Trying:
    set_random_seed(0L)
Expecting nothing
ok
Trying:
    change_warning_output(sys.stdout)
Expecting nothing
ok
Trying:
    import sage.libs.libecm###line 14:_sage_    >>> import sage.libs.libecm
Expecting nothing
ok
Trying:
    from sage.libs.libecm import ecmfactor###line 15:_sage_    >>> from sage.libs.libecm import ecmfactor
Expecting nothing
ok
Trying:
    result = ecmfactor(Integer(999), RealNumber('0.00'))###line 16:_sage_    >>> result = ecmfactor(999, 0.00)
Expecting nothing
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(print_backtrace-0x1cf74)[0x40000a5e1ec]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(sigdie-0x1cf1c)[0x40000a5e25c]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libcsage.so(sage_signal_handler-0x1d370)[0x40000a5dd60]
[0x40000040418]
[0xfffc9771790]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/libs/libecm.so(+0x27c84)[0x4000a207c84]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/libs/libecm.so(ecm-0x657dc)[0x4000a1f60e4]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/libs/libecm.so(ecm_factor-0x6746c)[0x4000a1f43ac]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/python/site-packages/sage/libs/libecm.so(+0x133d4)[0x4000a1f33d4]
/hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libpython2.7.so.1.0(PyCFunction_Call-0x15fed4)[0x40000152c1c]
```
and from gdb

```
Program received signal SIGSEGV, Segmentation fault.
0x7d0429d27d242810 in ?? ()
(gdb) bt
#0  0x7d0429d27d242810 in ?? ()
#1  0x000004000a5d3f70 in mulredc (z=0x13afdb50, x=<value optimized out>, y=<value optimized out>, m=0x13b05df0, nn=1, 
    invm=4727093576446091305) at mpmod.c:386
#2  0x000004000a5d7c84 in ecm_mulredc_basecase (R=0xfffffffb080, S1=0xfffffffb1a8, S2=0xfffffffb178, modulus=0xfffffffb130) at mpmod.c:611
#3  0x000004000a5c60e4 in ecm (f=0xfffffffb578, x=0xfffffffb3d8, sigma=0xfffffffb3e8, n=0xfffffffb568, go=0xfffffffb400, 
    B1done=0xfffffffb410, B1=0, B2min_parm=0xfffffffb418, B2_parm=0xfffffffb428, B2scale=1, k=0, S=0, verbose=0, repr=<value optimized out>, 
    nobase2step2=0, use_ntt=1, sigma_is_A=0, os=0x4000061d698, es=0x4000061d778, chkfilename=0x0, TreeFilename=0x0, maxmem=0, stage1time=0, 
    rng=0xfffffffb480, stop_asap=0) at ecm.c:940
#4  0x000004000a5c43ac in ecm_factor (f=0xfffffffb578, n=0xfffffffb568, B1=0, p=0xfffffffb3d0) at factor.c:93
#5  0x000004000a5c33d4 in __pyx_pf_4sage_4libs_6libecm_ecmfactor (__pyx_self=<value optimized out>, __pyx_args=<value optimized out>, 
    __pyx_kwds=<value optimized out>) at sage/libs/libecm.c:1894
#6  0x0000040000152c1c in PyCFunction_Call (func=0x13aae368, arg=0x13ac1878, kw=<value optimized out>) at Objects/methodobject.c:85
```



---

archive/issue_comments_123347.json:
```json
{
    "body": "<a id='comment:25'></a>\necm passed its test suite so it is quite strange.",
    "created_at": "2012-01-07T18:45:19Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123347",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:25'></a>
ecm passed its test suite so it is quite strange.



---

archive/issue_comments_123348.json:
```json
{
    "body": "<a id='comment:26'></a>\nStrangely enough I now get the following backtrace for real_mpfi.pyx, I have installed texlive in the mean time which may have made a difference.\n\n```\nget_str.c:153: MPFR assertion failed: size_s1 >= m\n\nProgram received signal SIGABRT, Aborted.\n0x00000400004c80e0 in .raise () from /lib64/power7/libc.so.6\n(gdb) bt\n#0  0x00000400004c80e0 in .raise () from /lib64/power7/libc.so.6\n#1  0x00000400004c9da0 in .abort () from /lib64/power7/libc.so.6\n#2  0x00000400042ec060 in .mpfr_assert_fail () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4\n#3  0x00000400042c12fc in .mpfr_get_str_aux () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4\n#4  0x00000400042c1d48 in .mpfr_get_str () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4\n#5  0x0000040004547ff4 in __pyx_f_4sage_5rings_9real_mpfi_24RealIntervalFieldElement__str_question_style (__pyx_v_self=0x13f47408, \n    __pyx_v_base=0, __pyx_v_error_digits=0, __pyx_v_e=0x40000646cb0, __pyx_v_prefer_sci=0, __pyx_skip_dispatch=<value optimized out>)\n    at sage/rings/real_mpfi.c:9727\n#6  0x00000400045524f8 in __pyx_pf_4sage_5rings_9real_mpfi_24RealIntervalFieldElement_12str (__pyx_v_self=0x13f47408, \n    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:9275\n```\nI will move to 5.0.prealpha1 soon.",
    "created_at": "2012-01-11T01:50:24Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123348",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:26'></a>
Strangely enough I now get the following backtrace for real_mpfi.pyx, I have installed texlive in the mean time which may have made a difference.

```
get_str.c:153: MPFR assertion failed: size_s1 >= m

Program received signal SIGABRT, Aborted.
0x00000400004c80e0 in .raise () from /lib64/power7/libc.so.6
(gdb) bt
#0  0x00000400004c80e0 in .raise () from /lib64/power7/libc.so.6
#1  0x00000400004c9da0 in .abort () from /lib64/power7/libc.so.6
#2  0x00000400042ec060 in .mpfr_assert_fail () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4
#3  0x00000400042c12fc in .mpfr_get_str_aux () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4
#4  0x00000400042c1d48 in .mpfr_get_str () from /hpc/scratch/frb15/sandbox/sage-5.0.prealpha0/local/lib/libmpfr.so.4
#5  0x0000040004547ff4 in __pyx_f_4sage_5rings_9real_mpfi_24RealIntervalFieldElement__str_question_style (__pyx_v_self=0x13f47408, 
    __pyx_v_base=0, __pyx_v_error_digits=0, __pyx_v_e=0x40000646cb0, __pyx_v_prefer_sci=0, __pyx_skip_dispatch=<value optimized out>)
    at sage/rings/real_mpfi.c:9727
#6  0x00000400045524f8 in __pyx_pf_4sage_5rings_9real_mpfi_24RealIntervalFieldElement_12str (__pyx_v_self=0x13f47408, 
    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:9275
```
I will move to 5.0.prealpha1 soon.



---

archive/issue_comments_123349.json:
```json
{
    "body": "<a id='comment:27'></a>\ndid someone try to compile MPFR 3.1.0 outside from Sage, and run its test suite (make check)?\nSame for MPFI 1.5.0?\n\nPaul Zimmermann",
    "created_at": "2012-01-11T08:14:48Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123349",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:27'></a>
did someone try to compile MPFR 3.1.0 outside from Sage, and run its test suite (make check)?
Same for MPFI 1.5.0?

Paul Zimmermann



---

archive/issue_comments_123350.json:
```json
{
    "body": "**Changing keywords** from \"sd32\" to \"sd32 sd35.5\".",
    "created_at": "2012-01-11T08:14:48Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123350",
    "user": "https://github.com/zimmermann6"
}
```

**Changing keywords** from "sd32" to "sd32 sd35.5".



---

archive/issue_comments_123351.json:
```json
{
    "body": "<a id='comment:28'></a>\nnote: I just tried MPFR 3.1.0 on top of MPIR 2.1.3 on gcc110.fsffrance.org and \"make check\"\nworked.\n\nPaul",
    "created_at": "2012-01-11T08:29:22Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123351",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:28'></a>
note: I just tried MPFR 3.1.0 on top of MPIR 2.1.3 on gcc110.fsffrance.org and "make check"
worked.

Paul



---

archive/issue_comments_123352.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [zimmerma](#comment%3A27):\n> did someone try to compile MPFR 3.1.0 outside from Sage, and run its test suite (make check)?\n\n\nI did build both release candidates on Silius (Skynet); all [run] tests passed (although I don't recall with which GCC version; I guess I used my own build of 4.4.6).\n\nI now see at least rc2 passed all tests with 4.3.4 and 4.6.1, too. \n\n\n\n\n> Same for MPFI 1.5.0?\n\n\nNope.",
    "created_at": "2012-01-12T22:42:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123352",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:29'></a>
Replying to [zimmerma](#comment%3A27):
> did someone try to compile MPFR 3.1.0 outside from Sage, and run its test suite (make check)?


I did build both release candidates on Silius (Skynet); all [run] tests passed (although I don't recall with which GCC version; I guess I used my own build of 4.4.6).

I now see at least rc2 passed all tests with 4.3.4 and 4.6.1, too. 




> Same for MPFI 1.5.0?


Nope.



---

archive/issue_comments_123353.json:
```json
{
    "body": "<a id='comment:30'></a>\nLeif,\n\n> I did build both release candidates on Silius (Skynet); all [run] tests passed\n\n\nplease could you check again with the 3.1.0 release? Alternatively if I have access to this machine (Silius?) I can try to investigate. William, is it possible?\n\nPaul",
    "created_at": "2012-01-13T07:38:10Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123353",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:30'></a>
Leif,

> I did build both release candidates on Silius (Skynet); all [run] tests passed


please could you check again with the 3.1.0 release? Alternatively if I have access to this machine (Silius?) I can try to investigate. William, is it possible?

Paul



---

archive/issue_comments_123354.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,3 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n \n-This is a metaticket, with links to other tickets for specific issues.\n-\n-* Building Tachyon: #11706  (with patch; needs review)\n-* Maxima build gets nowhere: #11708\n-* The MPIR 2.1.3.p7 spkg from #11964 fixes a regression in the p5/p6 spkgs. (The p4 from #8664 works as well.)\n-\n+sage-4.8.alpha6 **builds** on this machine, but there are *many* test failures, see the comments in this ticket.\n``````\n",
    "created_at": "2012-01-13T14:44:39Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123354",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,3 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
 
-This is a metaticket, with links to other tickets for specific issues.
-
-* Building Tachyon: #11706  (with patch; needs review)
-* Maxima build gets nowhere: #11708
-* The MPIR 2.1.3.p7 spkg from #11964 fixes a regression in the p5/p6 spkgs. (The p4 from #8664 works as well.)
-
+sage-4.8.alpha6 **builds** on this machine, but there are *many* test failures, see the comments in this ticket.
``````




---

archive/issue_comments_123355.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [zimmerma](#comment%3A30):\n> > I did build both release candidates on Silius (Skynet); all [run] tests passed\n\n> \n> please could you check again with the 3.1.0 release?\n\n\nIIRC there was no difference to the rc2 (except for version strings and the like), but I can probably retry a build tomorrow.\n\n\n\n\n> Alternatively if I have access to this machine (Silius?) I can try to investigate.\n\n\nIf you have a skynet account, you can log into silius from eno; otherwise you can ask Mariah Lenox for an account.",
    "created_at": "2012-01-13T20:28:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123355",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:32'></a>
Replying to [zimmerma](#comment%3A30):
> > I did build both release candidates on Silius (Skynet); all [run] tests passed

> 
> please could you check again with the 3.1.0 release?


IIRC there was no difference to the rc2 (except for version strings and the like), but I can probably retry a build tomorrow.




> Alternatively if I have access to this machine (Silius?) I can try to investigate.


If you have a skynet account, you can log into silius from eno; otherwise you can ask Mariah Lenox for an account.



---

archive/issue_comments_123356.json:
```json
{
    "body": "<a id='comment:33'></a>\nLeif,\n\nI only have an account on sage.math, thus I don't think I have one on eno.\nMariah, if you are out there, please can you create an account for me on skynet?\nMy email is Paul dot Zimmermann at inria dot fr.\n\nPaul",
    "created_at": "2012-01-13T20:55:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123356",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:33'></a>
Leif,

I only have an account on sage.math, thus I don't think I have one on eno.
Mariah, if you are out there, please can you create an account for me on skynet?
My email is Paul dot Zimmermann at inria dot fr.

Paul



---

archive/issue_comments_123357.json:
```json
{
    "body": "<a id='comment:34'></a>\nJust for the record:\n\n```\nleif@silius:~> gcc -v\nUsing built-in specs.\nTarget: powerpc64-suse-linux\nConfigured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3 --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --program-suffix=-4.3 --enable-linux-futex --without-system-libunwind --with-cpu=power4 --enable-secureplt --with-long-double-128 --build=powerpc64-suse-linux\nThread model: posix\ngcc version 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux) \nleif@silius:~> (. /usr/local/skynet_bash_profile ; gcc -v)\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.2/lto-wrapper\nTarget: powerpc64-unknown-linux-gnu\nConfigured with: /usr/local/gcc-4.6.2/src/gcc-4.6.2/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.1.0/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.6.0 --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.1.0-gcc-4.6.1 --prefix=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse\nThread model: posix\ngcc version 4.6.2 (GCC) \n```\n\nI.e., Mariah did build GCC 4.6.2 with MPFR 3.1.0 as well.\n\n(And I'm pretty sure it defaults to `power7`; as you can see the \"native\" [SuSE] GCC 4.3.4 defaults to `power4`.)",
    "created_at": "2012-01-13T21:18:47Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123357",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:34'></a>
Just for the record:

```
leif@silius:~> gcc -v
Using built-in specs.
Target: powerpc64-suse-linux
Configured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3 --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --program-suffix=-4.3 --enable-linux-futex --without-system-libunwind --with-cpu=power4 --enable-secureplt --with-long-double-128 --build=powerpc64-suse-linux
Thread model: posix
gcc version 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux) 
leif@silius:~> (. /usr/local/skynet_bash_profile ; gcc -v)
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.2/lto-wrapper
Target: powerpc64-unknown-linux-gnu
Configured with: /usr/local/gcc-4.6.2/src/gcc-4.6.2/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.1.0/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.6.0 --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.1.0-gcc-4.6.1 --prefix=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse
Thread model: posix
gcc version 4.6.2 (GCC) 
```

I.e., Mariah did build GCC 4.6.2 with MPFR 3.1.0 as well.

(And I'm pretty sure it defaults to `power7`; as you can see the "native" [SuSE] GCC 4.3.4 defaults to `power4`.)



---

archive/issue_comments_123358.json:
```json
{
    "body": "<a id='comment:35'></a>\nOh, btw., all my *stand-alone* builds of MPFR (3.1.0[.rc{1,2}]) were with **GMP 5.0.2**, not MPIR.\n\n```\n====================\nAll 160 tests passed\n(1 test was not run)\n====================\n...\nleif@silius:~/src/mpfr-3.1.0-build.silius-gmp-5.0.2-gcc-4.3.4> gcc -v ; egrep \"__GMP_(CC|CFLAGS)\" /home/leif/local/silius-gmp-5.0.2/include/gmp.h \nUsing built-in specs.\nTarget: powerpc64-suse-linux\nConfigured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3 --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --program-suffix=-4.3 --enable-linux-futex --without-system-libunwind --with-cpu=power4 --enable-secureplt --with-long-double-128 --build=powerpc64-suse-linux\nThread model: posix\ngcc version 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux) \n#define __GMP_CC \"gcc -std=gnu99\"\n#define __GMP_CFLAGS \"-O3 -g -fno-strict-aliasing -mcpu=power7 -mtune=power7\"\nleif@silius:~/src/mpfr-3.1.0-build.silius-gmp-5.0.2-gcc-4.3.4> \n```\n(Just built again.  I didn't set `CC` or `CFLAGS` etc., so MPFR took GMP's settings -- those above.)",
    "created_at": "2012-01-13T23:08:22Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123358",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:35'></a>
Oh, btw., all my *stand-alone* builds of MPFR (3.1.0[.rc{1,2}]) were with **GMP 5.0.2**, not MPIR.

```
====================
All 160 tests passed
(1 test was not run)
====================
...
leif@silius:~/src/mpfr-3.1.0-build.silius-gmp-5.0.2-gcc-4.3.4> gcc -v ; egrep "__GMP_(CC|CFLAGS)" /home/leif/local/silius-gmp-5.0.2/include/gmp.h 
Using built-in specs.
Target: powerpc64-suse-linux
Configured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3 --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --program-suffix=-4.3 --enable-linux-futex --without-system-libunwind --with-cpu=power4 --enable-secureplt --with-long-double-128 --build=powerpc64-suse-linux
Thread model: posix
gcc version 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux) 
#define __GMP_CC "gcc -std=gnu99"
#define __GMP_CFLAGS "-O3 -g -fno-strict-aliasing -mcpu=power7 -mtune=power7"
leif@silius:~/src/mpfr-3.1.0-build.silius-gmp-5.0.2-gcc-4.3.4> 
```
(Just built again.  I didn't set `CC` or `CFLAGS` etc., so MPFR took GMP's settings -- those above.)



---

archive/issue_comments_123359.json:
```json
{
    "body": "<a id='comment:36'></a>\nSame with GCC 4.6.2:\n\n```\n====================\nAll 160 tests passed\n(1 test was not run)\n====================\n...\nleif@silius:~/src/mpfr-3.1.0-build.silius-gmp-5.0.2-gcc-4.6.2> gcc -v ; egrep \"__GMP_(CC|CFLAGS)\" /home/leif/local/silius-gmp-5.0.2/include/gmp.h \nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.2/lto-wrapper\nTarget: powerpc64-unknown-linux-gnu\nConfigured with: /usr/local/gcc-4.6.2/src/gcc-4.6.2/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.1.0/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.6.0 --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.1.0-gcc-4.6.1 --prefix=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse\nThread model: posix\ngcc version 4.6.2 (GCC) \n#define __GMP_CC \"gcc -std=gnu99\"\n#define __GMP_CFLAGS \"-O3 -g -fno-strict-aliasing -mcpu=power7 -mtune=power7\"\n```",
    "created_at": "2012-01-13T23:21:25Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123359",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:36'></a>
Same with GCC 4.6.2:

```
====================
All 160 tests passed
(1 test was not run)
====================
...
leif@silius:~/src/mpfr-3.1.0-build.silius-gmp-5.0.2-gcc-4.6.2> gcc -v ; egrep "__GMP_(CC|CFLAGS)" /home/leif/local/silius-gmp-5.0.2/include/gmp.h 
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.2/lto-wrapper
Target: powerpc64-unknown-linux-gnu
Configured with: /usr/local/gcc-4.6.2/src/gcc-4.6.2/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.1.0/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.6.0 --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.1.0-gcc-4.6.1 --prefix=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse
Thread model: posix
gcc version 4.6.2 (GCC) 
#define __GMP_CC "gcc -std=gnu99"
#define __GMP_CFLAGS "-O3 -g -fno-strict-aliasing -mcpu=power7 -mtune=power7"
```



---

archive/issue_comments_123360.json:
```json
{
    "body": "<a id='comment:37'></a>\nSame with MPIR (although 2.5.0, and slightly different `CFLAGS`):\n\n```\n====================\nAll 160 tests passed\n(1 test was not run)\n====================\n...\nleif@silius:~/src/mpfr-3.1.0-build.silius-mpir-2.5.0-gcc-4.6.2> gcc -v ; egrep \"__(GMP|MPIR)_(CC|CFLAGS)\" /home/leif/local/silius-mpir-2.5.0/include/gmp.h \nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.2/lto-wrapper\nTarget: powerpc64-unknown-linux-gnu\nConfigured with: /usr/local/gcc-4.6.2/src/gcc-4.6.2/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.1.0/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.6.0 --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.1.0-gcc-4.6.1 --prefix=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse\nThread model: posix\ngcc version 4.6.2 (GCC) \n#define __GMP_CC __MPIR_CC\n#define __GMP_CFLAGS __MPIR_CFLAGS\n#define __MPIR_CC \"gcc -std=gnu99\"\n#define __MPIR_CFLAGS \"-m64  -O3\"\n```",
    "created_at": "2012-01-14T00:04:20Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123360",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:37'></a>
Same with MPIR (although 2.5.0, and slightly different `CFLAGS`):

```
====================
All 160 tests passed
(1 test was not run)
====================
...
leif@silius:~/src/mpfr-3.1.0-build.silius-mpir-2.5.0-gcc-4.6.2> gcc -v ; egrep "__(GMP|MPIR)_(CC|CFLAGS)" /home/leif/local/silius-mpir-2.5.0/include/gmp.h 
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.2/lto-wrapper
Target: powerpc64-unknown-linux-gnu
Configured with: /usr/local/gcc-4.6.2/src/gcc-4.6.2/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.1.0/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.6.0 --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.1.0-gcc-4.6.1 --prefix=/usr/local/gcc-4.6.2/ppc64-Linux-power7-suse
Thread model: posix
gcc version 4.6.2 (GCC) 
#define __GMP_CC __MPIR_CC
#define __GMP_CFLAGS __MPIR_CFLAGS
#define __MPIR_CC "gcc -std=gnu99"
#define __MPIR_CFLAGS "-m64  -O3"
```



---

archive/issue_comments_123361.json:
```json
{
    "body": "<a id='comment:38'></a>\n> Same with MPIR (although 2.5.0, and slightly different CFLAGS): \n\n\nbut `gcc -v` says **--with-gmp=/usr/local/mpir-2.4.0** instead.\nPlease could you try with MPIR 2.1.3, which is as far as I know the version currently used by\nSage?\n\nPaul",
    "created_at": "2012-01-14T06:44:08Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123361",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:38'></a>
> Same with MPIR (although 2.5.0, and slightly different CFLAGS): 


but `gcc -v` says **--with-gmp=/usr/local/mpir-2.4.0** instead.
Please could you try with MPIR 2.1.3, which is as far as I know the version currently used by
Sage?

Paul



---

archive/issue_comments_123362.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [zimmerma](#comment%3A38):\n> > Same with MPIR (although 2.5.0, and slightly different CFLAGS): \n\n> \n> but `gcc -v` says **--with-gmp=/usr/local/mpir-2.4.0** instead.\n> Please could you try with MPIR 2.1.3, which is as far as I know the version currently used by\n> Sage?\n\n\nWell, that's the version *GCC* was built with, which doesn't matter here.\n\nBut I could rebuild and test MPFR 3.1.0 with (e.g.) MPIR 2.1.4 later.",
    "created_at": "2012-01-14T21:12:17Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123362",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:39'></a>
Replying to [zimmerma](#comment%3A38):
> > Same with MPIR (although 2.5.0, and slightly different CFLAGS): 

> 
> but `gcc -v` says **--with-gmp=/usr/local/mpir-2.4.0** instead.
> Please could you try with MPIR 2.1.3, which is as far as I know the version currently used by
> Sage?


Well, that's the version *GCC* was built with, which doesn't matter here.

But I could rebuild and test MPFR 3.1.0 with (e.g.) MPIR 2.1.4 later.



---

archive/issue_comments_123363.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [leif](#comment%3A39):\n> Replying to [zimmerma](#comment%3A38):\n> > > Same with MPIR (although 2.5.0, and slightly different CFLAGS): \n\n> > \n> > but `gcc -v` says **--with-gmp=/usr/local/mpir-2.4.0** instead.\n> > Please could you try with MPIR 2.1.3, which is as far as I know the version currently used by\n> > Sage?\n\n> \n> Well, that's the version *GCC* was built with, which doesn't matter here.\n> \n> But I could rebuild and test MPFR 3.1.0 with (e.g.) MPIR 2.1.4 later.\n\n\nOk, I now also built MPIR 2.1.4 (changes w.r.t. 2.1.3 don't matter) and MPFR 3.1.0 with that version on silius; once without specifying any `CFLAGS` (such that MPIR used `-m64 -O3`, without any `-march=`/`-mcpu=`/`-mtune=`), once with `CFLAGS=\"-mcpu=power7 -mtune=power7 -m64 -g -O3` (but in both cases only with *GCC 4.6.2*).\n\nAll test suites passed, as expected.",
    "created_at": "2012-01-14T23:37:25Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123363",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:40'></a>
Replying to [leif](#comment%3A39):
> Replying to [zimmerma](#comment%3A38):
> > > Same with MPIR (although 2.5.0, and slightly different CFLAGS): 

> > 
> > but `gcc -v` says **--with-gmp=/usr/local/mpir-2.4.0** instead.
> > Please could you try with MPIR 2.1.3, which is as far as I know the version currently used by
> > Sage?

> 
> Well, that's the version *GCC* was built with, which doesn't matter here.
> 
> But I could rebuild and test MPFR 3.1.0 with (e.g.) MPIR 2.1.4 later.


Ok, I now also built MPIR 2.1.4 (changes w.r.t. 2.1.3 don't matter) and MPFR 3.1.0 with that version on silius; once without specifying any `CFLAGS` (such that MPIR used `-m64 -O3`, without any `-march=`/`-mcpu=`/`-mtune=`), once with `CFLAGS="-mcpu=power7 -mtune=power7 -m64 -g -O3` (but in both cases only with *GCC 4.6.2*).

All test suites passed, as expected.



---

archive/issue_comments_123364.json:
```json
{
    "body": "<a id='comment:41'></a>\nNot sure how I ended with a crash in real_mpfi.pyx, there is a time out. But I don't see a crash anymore after a rebuild from scratch including mpfi-1.5.0. The time out may be caused by some other components.",
    "created_at": "2012-01-19T02:09:16Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123364",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:41'></a>
Not sure how I ended with a crash in real_mpfi.pyx, there is a time out. But I don't see a crash anymore after a rebuild from scratch including mpfi-1.5.0. The time out may be caused by some other components.



---

archive/issue_comments_123365.json:
```json
{
    "body": "<a id='comment:42'></a>\nI have now an account on silius, thus I will be able to try. Francois, which version\nof Sage did you try?\n\nPaul",
    "created_at": "2012-01-19T08:04:08Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123365",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:42'></a>
I have now an account on silius, thus I will be able to try. Francois, which version
of Sage did you try?

Paul



---

archive/issue_comments_123366.json:
```json
{
    "body": "<a id='comment:43'></a>\nI am now trying to compile  http://boxen.math.washington.edu/home/release/sage-4.8/sage-4.8.tar\n\nPaul",
    "created_at": "2012-01-20T07:58:55Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123366",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:43'></a>
I am now trying to compile  http://boxen.math.washington.edu/home/release/sage-4.8/sage-4.8.tar

Paul



---

archive/issue_comments_123367.json:
```json
{
    "body": "<a id='comment:44'></a>\ncompilation of sage-4.8 succeeded. Running `sage -tp 48 *` failed with:\n\n```\n\n        sage -t  devel/sage-main/sage/categories/pushout.py # 8 doctests failed\n        sage -t  devel/sage-main/sage/ext/fast_callable.pyx # 1 doctests failed\n        sage -t  devel/sage-main/sage/graphs/graph_decompositions/vertex_separation.pyx # 3 doctests failed\n        sage -t  devel/sage-main/sage/interfaces/qepcad.py # 2 doctests failed\n        sage -t  devel/sage-main/sage/libs/libecm.pyx # Killed/crashed\n        sage -t  devel/sage-main/sage/lfunctions/sympow.py # 10 doctests failed\n        sage -t  devel/sage-main/sage/misc/functional.py # 1 doctests failed\n        sage -t  devel/sage-main/sage/numerical/optimize.py # 6 doctests failed\n        sage -t  devel/sage-main/sage/modular/hecke/submodule.py # 1 doctests failed\n        sage -t  devel/sage-main/sage/plot/plot3d/list_plot3d.py # 2 doctests failed\n        sage -t  devel/sage-main/sage/modular/abvar/abvar.py # 1 doctests failed\n        sage -t  devel/sage-main/sage/rings/real_interval_absolute.pyx # 53 doctests failed\n        sage -t  devel/sage-main/sage/rings/real_lazy.pyx # 3 doctests failed\n        sage -t  devel/sage-main/sage/rings/complex_interval.pyx # 22 doctests failed\n        sage -t  devel/sage-main/sage/rings/qqbar.py # 119 doctests failed\n        sage -t  devel/sage-main/sage/rings/number_field/totallyreal_rel.py # 8 doctests failed\n        sage -t  devel/sage-main/sage/rings/number_field/number_field_morphisms.pyx # 2 doctests failed\n        sage -t  devel/sage-main/sage/rings/number_field/number_field.py # Killed/crashed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/modular_parametrization.py # 4 doctests failed\n\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/lseries_ell.py # 3 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/descent_two_isogeny.pyx # 2 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/padics.py # 10 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/period_lattice.py # 70 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/BSD.py # 4 doctests failed\n        sage -t  devel/sage-main/sage/structure/parent.pyx # 1 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/ell_modular_symbols.py # 13 doctests failed\n        sage -t  devel/sage-main/sage/structure/sage_object.pyx # 1 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/padic_lseries.py # 43 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/ell_point.py # 9 doctests failed\n        sage -t  devel/sage-main/sage/rings/polynomial/multi_polynomial_ideal.py # 1 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/sha_tate.py # 34 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/heegner.py # 66 doctests failed\n        sage -t  devel/sage-main/sage/schemes/elliptic_curves/ell_rational_field.py # 44 doctests failed\n        sage -t  devel/sage-main/sage/rings/real_mpfi.pyx # Time out\n        sage -t  devel/sage-main/sage/rings/number_field/number_field_element.pyx # Time out\n\n        sage -t  devel/sage-main/sage/rings/number_field/number_field_rel.py # Time out\n        sage -t  devel/sage-main/sage/rings/polynomial/polynomial_element.pyx # Time out\n        sage -t  devel/sage-main/sage/rings/polynomial/real_roots.pyx # Time out\n        sage -t  devel/sage-main/sage/sandpiles/sandpile.py # Time out\n        sage -t  devel/sage-main/sage/schemes/plane_conics/con_number_field.py # Time out\n```\nI will investigate further.\n\nPaul",
    "created_at": "2012-01-20T13:52:11Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123367",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:44'></a>
compilation of sage-4.8 succeeded. Running `sage -tp 48 *` failed with:

```

        sage -t  devel/sage-main/sage/categories/pushout.py # 8 doctests failed
        sage -t  devel/sage-main/sage/ext/fast_callable.pyx # 1 doctests failed
        sage -t  devel/sage-main/sage/graphs/graph_decompositions/vertex_separation.pyx # 3 doctests failed
        sage -t  devel/sage-main/sage/interfaces/qepcad.py # 2 doctests failed
        sage -t  devel/sage-main/sage/libs/libecm.pyx # Killed/crashed
        sage -t  devel/sage-main/sage/lfunctions/sympow.py # 10 doctests failed
        sage -t  devel/sage-main/sage/misc/functional.py # 1 doctests failed
        sage -t  devel/sage-main/sage/numerical/optimize.py # 6 doctests failed
        sage -t  devel/sage-main/sage/modular/hecke/submodule.py # 1 doctests failed
        sage -t  devel/sage-main/sage/plot/plot3d/list_plot3d.py # 2 doctests failed
        sage -t  devel/sage-main/sage/modular/abvar/abvar.py # 1 doctests failed
        sage -t  devel/sage-main/sage/rings/real_interval_absolute.pyx # 53 doctests failed
        sage -t  devel/sage-main/sage/rings/real_lazy.pyx # 3 doctests failed
        sage -t  devel/sage-main/sage/rings/complex_interval.pyx # 22 doctests failed
        sage -t  devel/sage-main/sage/rings/qqbar.py # 119 doctests failed
        sage -t  devel/sage-main/sage/rings/number_field/totallyreal_rel.py # 8 doctests failed
        sage -t  devel/sage-main/sage/rings/number_field/number_field_morphisms.pyx # 2 doctests failed
        sage -t  devel/sage-main/sage/rings/number_field/number_field.py # Killed/crashed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/modular_parametrization.py # 4 doctests failed

        sage -t  devel/sage-main/sage/schemes/elliptic_curves/lseries_ell.py # 3 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/descent_two_isogeny.pyx # 2 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/padics.py # 10 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/period_lattice.py # 70 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/BSD.py # 4 doctests failed
        sage -t  devel/sage-main/sage/structure/parent.pyx # 1 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/ell_modular_symbols.py # 13 doctests failed
        sage -t  devel/sage-main/sage/structure/sage_object.pyx # 1 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/padic_lseries.py # 43 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/ell_point.py # 9 doctests failed
        sage -t  devel/sage-main/sage/rings/polynomial/multi_polynomial_ideal.py # 1 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/sha_tate.py # 34 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/heegner.py # 66 doctests failed
        sage -t  devel/sage-main/sage/schemes/elliptic_curves/ell_rational_field.py # 44 doctests failed
        sage -t  devel/sage-main/sage/rings/real_mpfi.pyx # Time out
        sage -t  devel/sage-main/sage/rings/number_field/number_field_element.pyx # Time out

        sage -t  devel/sage-main/sage/rings/number_field/number_field_rel.py # Time out
        sage -t  devel/sage-main/sage/rings/polynomial/polynomial_element.pyx # Time out
        sage -t  devel/sage-main/sage/rings/polynomial/real_roots.pyx # Time out
        sage -t  devel/sage-main/sage/sandpiles/sandpile.py # Time out
        sage -t  devel/sage-main/sage/schemes/plane_conics/con_number_field.py # Time out
```
I will investigate further.

Paul



---

archive/issue_comments_123368.json:
```json
{
    "body": "<a id='comment:45'></a>\nI can isolate one issue with MPFI:\n\n```\nsage: RIF(1,1).lower()\n5.96124715852883e27\nsage: RIF(1,1).upper()\n4.05648192073034e31\nsage: RIF(0,1).lower()\n...\nRuntimeError: Aborted\n```\nPaul",
    "created_at": "2012-01-20T15:07:42Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123368",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:45'></a>
I can isolate one issue with MPFI:

```
sage: RIF(1,1).lower()
5.96124715852883e27
sage: RIF(1,1).upper()
4.05648192073034e31
sage: RIF(0,1).lower()
...
RuntimeError: Aborted
```
Paul



---

archive/issue_comments_123369.json:
```json
{
    "body": "<a id='comment:46'></a>\nif I modify the function `mpfi_interv_z` of MPFI as follows:\n\n```\n\nint mpfi_interv_z(mpfi_ptr a,mpz_srcptr b,mpz_srcptr c)\n{\n  int inexact_left, inexact_right, inexact=0;\n\n  mpz_dump (b);\n  mpz_dump (c);\n  if ( mpz_cmp(b,c) <= 0 ) {\n    inexact_left = mpfr_set_z(&(a->left), b, MPFI_RNDD);\n    mpfr_dump (&(a->left));\n    inexact_right = mpfr_set_z(&(a->right), c, MPFI_RNDU);\n    mpfr_dump (&(a->right));\n  }\n...\n```\nthen I get:\n\n```\nsage: RIF(1,2)\n000000000000000001\n000000000000000002\n0.00000000000000000000000000000000000000000000000000000E65\n0.00000000000000000000000000000000000000000000000000001E65\nget_str.c:149: MPFR assertion failed: size_s1 >= m\n...\n```\nthus clearly something is corrupted with GMP and MPFR, since we should get:\n\n```\n1\n2\n0.10000000000000000000000000000000000000000000000000000E1\n0.10000000000000000000000000000000000000000000000000000E2\n```\n\nNote: I cannot reproduce the problem outside from Sage, thus it is probably due to the way GMP (i.e., MPIR) and/or MPFR are compiled within Sage.\n\nPaul",
    "created_at": "2012-01-20T16:26:16Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123369",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:46'></a>
if I modify the function `mpfi_interv_z` of MPFI as follows:

```

int mpfi_interv_z(mpfi_ptr a,mpz_srcptr b,mpz_srcptr c)
{
  int inexact_left, inexact_right, inexact=0;

  mpz_dump (b);
  mpz_dump (c);
  if ( mpz_cmp(b,c) <= 0 ) {
    inexact_left = mpfr_set_z(&(a->left), b, MPFI_RNDD);
    mpfr_dump (&(a->left));
    inexact_right = mpfr_set_z(&(a->right), c, MPFI_RNDU);
    mpfr_dump (&(a->right));
  }
...
```
then I get:

```
sage: RIF(1,2)
000000000000000001
000000000000000002
0.00000000000000000000000000000000000000000000000000000E65
0.00000000000000000000000000000000000000000000000000001E65
get_str.c:149: MPFR assertion failed: size_s1 >= m
...
```
thus clearly something is corrupted with GMP and MPFR, since we should get:

```
1
2
0.10000000000000000000000000000000000000000000000000000E1
0.10000000000000000000000000000000000000000000000000000E2
```

Note: I cannot reproduce the problem outside from Sage, thus it is probably due to the way GMP (i.e., MPIR) and/or MPFR are compiled within Sage.

Paul



---

archive/issue_comments_123370.json:
```json
{
    "body": "<a id='comment:47'></a>\nsage-5.0-beta5 + #11666 + #12171\n\n```\nsage: RIF(1,1).lower()\nget_str.c:153: MPFR assertion failed: size_s1 >= m\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta5/<ipython console> in <module>()\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/IPython/Prompts.pyc in __call__(self, arg)\n    550 \n    551             # and now call a possibly user-defined print mechanism\n--> 552             manipulated_val = self.display(arg)\n    553             \n    554             # user display hooks can change the variable to be stored in\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/IPython/Prompts.pyc in _display(self, arg)\n    576             return IPython.generics.result_display(arg)\n    577         except TryNext:            \n--> 578             return self.shell.hooks.result_display(arg)\n    579 \n    580     # Assign the default display method:\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/IPython/hooks.pyc in __call__(self, *args, **kw)\n    139             #print \"prio\",prio,\"cmd\",cmd #dbg\n    140             try:\n--> 141                 ret = cmd(*args, **kw)\n    142                 return ret\n    143             except ipapi.TryNext, exc:\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/sage/misc/displayhook.pyc in result_display(ip_self, obj)\n    148     # IPython's default result_display() uses the IPython.genutils.Term.cout stream.\n    149     # See also local/lib/python2.6/site-packages/IPython/hooks.py.\n--> 150     print_obj(IPython.genutils.Term.cout, obj)\n    151 \n    152 def displayhook(obj):\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/sage/misc/displayhook.pyc in print_obj(out_stream, obj)\n    140             if _check_tall_list_and_print(out_stream, obj):\n    141                 return\n--> 142     print >>out_stream, `obj`\n    143 \n    144 def result_display(ip_self, obj):\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber.__repr__ (sage/rings/real_mpfr.c:9438)()\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber.str (sage/rings/real_mpfr.c:11257)()\n\nRuntimeError: Aborted\n```\nSame thing with upper. But your remark about it working outside of sage makes me want to hack sage \"provided atlas\" style and see what happens.",
    "created_at": "2012-02-23T23:28:24Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123370",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:47'></a>
sage-5.0-beta5 + #11666 + #12171

```
sage: RIF(1,1).lower()
get_str.c:153: MPFR assertion failed: size_s1 >= m
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/hpc/scratch/frb15/sandbox/sage-5.0.beta5/<ipython console> in <module>()

/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/IPython/Prompts.pyc in __call__(self, arg)
    550 
    551             # and now call a possibly user-defined print mechanism
--> 552             manipulated_val = self.display(arg)
    553             
    554             # user display hooks can change the variable to be stored in

/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/IPython/Prompts.pyc in _display(self, arg)
    576             return IPython.generics.result_display(arg)
    577         except TryNext:            
--> 578             return self.shell.hooks.result_display(arg)
    579 
    580     # Assign the default display method:

/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/IPython/hooks.pyc in __call__(self, *args, **kw)
    139             #print "prio",prio,"cmd",cmd #dbg
    140             try:
--> 141                 ret = cmd(*args, **kw)
    142                 return ret
    143             except ipapi.TryNext, exc:

/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/sage/misc/displayhook.pyc in result_display(ip_self, obj)
    148     # IPython's default result_display() uses the IPython.genutils.Term.cout stream.
    149     # See also local/lib/python2.6/site-packages/IPython/hooks.py.
--> 150     print_obj(IPython.genutils.Term.cout, obj)
    151 
    152 def displayhook(obj):

/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/sage/misc/displayhook.pyc in print_obj(out_stream, obj)
    140             if _check_tall_list_and_print(out_stream, obj):
    141                 return
--> 142     print >>out_stream, `obj`
    143 
    144 def result_display(ip_self, obj):

/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber.__repr__ (sage/rings/real_mpfr.c:9438)()

/hpc/scratch/frb15/sandbox/sage-5.0.beta5/local/lib/python2.7/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber.str (sage/rings/real_mpfr.c:11257)()

RuntimeError: Aborted
```
Same thing with upper. But your remark about it working outside of sage makes me want to hack sage "provided atlas" style and see what happens.



---

archive/issue_comments_123371.json:
```json
{
    "body": "<a id='comment:48'></a>\nOk I did a build of 5.0.beta8-gcc along with the new mpir from #11616. I asked the gcc spkg to be built. I may do another build without it later. I didn't run all the test I just looked at one key test at the moment:sage -t -long  -force_lib \"devel/sage/sage/rings/number_field/number_field.py\" because it is killed. I am still getting a backtrace similar to comment 21.\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\n.__gmpn_lshift () at tmp-lshift.s:105\n105     tmp-lshift.s: No such file or directory.\n        in tmp-lshift.s\nCurrent language:  auto\nThe current source language is \"auto; currently asm\".\n(gdb) bt\n#0  .__gmpn_lshift () at tmp-lshift.s:105\n#1  0x000004000874c908 in set_z (f=0xfffffff74d0, z=0x16eef0d0, zs=<value optimized out>) at set_q.c:53\n#2  0x000004000874ca4c in mpfr_set_q (f=0x1724ca00, q=0x16eef0d0, rnd=<value optimized out>) at set_q.c:101\n#3  0x0000040008a00198 in mpfi_interv_q (a=0x1724ca00, b=0x16eef0d0, c=0x16eef130) at interv_q.c:34\n#4  0x00000400089b7a14 in __pyx_pf_4sage_5rings_9real_mpfi_24RealIntervalFieldElement___init__ (__pyx_v_self=0x1724c9e0, \n    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:7366\n#5  0x000004000016aed0 in type_call (type=0x400089e8360, args=0x17232730, kwds=0x0) at Objects/typeobject.c:737\n#6  0x00000400000f33f0 in PyObject_Call (func=0x400089e8360, arg=<value optimized out>, kw=<value optimized out>)\n    at Objects/abstract.c:2529\n#7  0x00000400089b2044 in __pyx_pf_4sage_5rings_9real_mpfi_23RealIntervalField_class_9__call__ (__pyx_v_self=0x10fb44e0, \n    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:4421\n```\nand I am still getting the following:\n\n```\nsage: RIF(1,1).lower()\nget_str.c:153: MPFR assertion failed: size_s1 >= m\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/<ipython console> in <module>()\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/IPython/Prompts.pyc in __call__(self, arg)\n    550 \n    551             # and now call a possibly user-defined print mechanism\n--> 552             manipulated_val = self.display(arg)\n    553             \n    554             # user display hooks can change the variable to be stored in\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/IPython/Prompts.pyc in _display(self, arg)\n    576             return IPython.generics.result_display(arg)\n    577         except TryNext:            \n--> 578             return self.shell.hooks.result_display(arg)\n    579 \n    580     # Assign the default display method:\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/IPython/hooks.pyc in __call__(self, *args, **kw)\n    139             #print \"prio\",prio,\"cmd\",cmd #dbg\n    140             try:\n--> 141                 ret = cmd(*args, **kw)\n    142                 return ret\n    143             except ipapi.TryNext, exc:\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/sage/misc/displayhook.pyc in result_display(ip_self, obj)\n    148     # IPython's default result_display() uses the IPython.genutils.Term.cout stream.\n    149     # See also local/lib/python2.6/site-packages/IPython/hooks.py.\n--> 150     print_obj(IPython.genutils.Term.cout, obj)\n    151 \n    152 def displayhook(obj):\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/sage/misc/displayhook.pyc in print_obj(out_stream, obj)\n    140             if _check_tall_list_and_print(out_stream, obj):\n    141                 return\n--> 142     print >>out_stream, `obj`\n    143 \n    144 def result_display(ip_self, obj):\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber.__repr__ (sage/rings/real_mpfr.c:9438)()\n\n/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber.str (sage/rings/real_mpfr.c:11257)()\n\nRuntimeError: Aborted\n```",
    "created_at": "2012-03-21T22:25:29Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123371",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:48'></a>
Ok I did a build of 5.0.beta8-gcc along with the new mpir from #11616. I asked the gcc spkg to be built. I may do another build without it later. I didn't run all the test I just looked at one key test at the moment:sage -t -long  -force_lib "devel/sage/sage/rings/number_field/number_field.py" because it is killed. I am still getting a backtrace similar to comment 21.

```
Program received signal SIGSEGV, Segmentation fault.
.__gmpn_lshift () at tmp-lshift.s:105
105     tmp-lshift.s: No such file or directory.
        in tmp-lshift.s
Current language:  auto
The current source language is "auto; currently asm".
(gdb) bt
#0  .__gmpn_lshift () at tmp-lshift.s:105
#1  0x000004000874c908 in set_z (f=0xfffffff74d0, z=0x16eef0d0, zs=<value optimized out>) at set_q.c:53
#2  0x000004000874ca4c in mpfr_set_q (f=0x1724ca00, q=0x16eef0d0, rnd=<value optimized out>) at set_q.c:101
#3  0x0000040008a00198 in mpfi_interv_q (a=0x1724ca00, b=0x16eef0d0, c=0x16eef130) at interv_q.c:34
#4  0x00000400089b7a14 in __pyx_pf_4sage_5rings_9real_mpfi_24RealIntervalFieldElement___init__ (__pyx_v_self=0x1724c9e0, 
    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:7366
#5  0x000004000016aed0 in type_call (type=0x400089e8360, args=0x17232730, kwds=0x0) at Objects/typeobject.c:737
#6  0x00000400000f33f0 in PyObject_Call (func=0x400089e8360, arg=<value optimized out>, kw=<value optimized out>)
    at Objects/abstract.c:2529
#7  0x00000400089b2044 in __pyx_pf_4sage_5rings_9real_mpfi_23RealIntervalField_class_9__call__ (__pyx_v_self=0x10fb44e0, 
    __pyx_args=<value optimized out>, __pyx_kwds=<value optimized out>) at sage/rings/real_mpfi.c:4421
```
and I am still getting the following:

```
sage: RIF(1,1).lower()
get_str.c:153: MPFR assertion failed: size_s1 >= m
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/<ipython console> in <module>()

/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/IPython/Prompts.pyc in __call__(self, arg)
    550 
    551             # and now call a possibly user-defined print mechanism
--> 552             manipulated_val = self.display(arg)
    553             
    554             # user display hooks can change the variable to be stored in

/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/IPython/Prompts.pyc in _display(self, arg)
    576             return IPython.generics.result_display(arg)
    577         except TryNext:            
--> 578             return self.shell.hooks.result_display(arg)
    579 
    580     # Assign the default display method:

/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/IPython/hooks.pyc in __call__(self, *args, **kw)
    139             #print "prio",prio,"cmd",cmd #dbg
    140             try:
--> 141                 ret = cmd(*args, **kw)
    142                 return ret
    143             except ipapi.TryNext, exc:

/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/sage/misc/displayhook.pyc in result_display(ip_self, obj)
    148     # IPython's default result_display() uses the IPython.genutils.Term.cout stream.
    149     # See also local/lib/python2.6/site-packages/IPython/hooks.py.
--> 150     print_obj(IPython.genutils.Term.cout, obj)
    151 
    152 def displayhook(obj):

/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/sage/misc/displayhook.pyc in print_obj(out_stream, obj)
    140             if _check_tall_list_and_print(out_stream, obj):
    141                 return
--> 142     print >>out_stream, `obj`
    143 
    144 def result_display(ip_self, obj):

/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber.__repr__ (sage/rings/real_mpfr.c:9438)()

/hpc/scratch/frb15/sandbox/sage-5.0.beta8-gcc/local/lib/python2.7/site-packages/sage/rings/real_mpfr.so in sage.rings.real_mpfr.RealNumber.str (sage/rings/real_mpfr.c:11257)()

RuntimeError: Aborted
```



---

archive/issue_comments_123372.json:
```json
{
    "body": "<a id='comment:49'></a>\nFrancois, just to be sure, did you check MPFR is built with `--disable-thread-safe`?\nCan you try to build GMP/MPIR and MPFR with `--enable-assert`?\nIf you tell me where your build is I can try again to isolate the problem.\n\nPaul",
    "created_at": "2012-03-22T06:58:19Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123372",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:49'></a>
Francois, just to be sure, did you check MPFR is built with `--disable-thread-safe`?
Can you try to build GMP/MPIR and MPFR with `--enable-assert`?
If you tell me where your build is I can try again to isolate the problem.

Paul



---

archive/issue_comments_123373.json:
```json
{
    "body": "<a id='comment:50'></a>\nFWIW, I've also built Sage 5.0.beta8 on silius (skynet), where GCC 4.6.3 meanwhile is the default compiler (although one still has to source `/local/bin/skynet_bash_profile`, since otherwise a few packages, two IIRC, fail to build because of wrong libraries / not sufficiently set `LD_LIBRARY_PATH`).\n\nI've built once with MPIR 2.1.3 and once with MPIR 2.4.0[.p1], which doesn't seem to make a difference regarding the results of `ptestlong`.\n\n---\n\nAccording to Bill, MPIR doesn't make (much) use of assertions; they mainly rely on their test suites (same for FLINT).",
    "created_at": "2012-03-22T07:15:38Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123373",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:50'></a>
FWIW, I've also built Sage 5.0.beta8 on silius (skynet), where GCC 4.6.3 meanwhile is the default compiler (although one still has to source `/local/bin/skynet_bash_profile`, since otherwise a few packages, two IIRC, fail to build because of wrong libraries / not sufficiently set `LD_LIBRARY_PATH`).

I've built once with MPIR 2.1.3 and once with MPIR 2.4.0[.p1], which doesn't seem to make a difference regarding the results of `ptestlong`.

---

According to Bill, MPIR doesn't make (much) use of assertions; they mainly rely on their test suites (same for FLINT).



---

archive/issue_comments_123374.json:
```json
{
    "body": "<a id='comment:51'></a>\nP.S.: I've of course built MPIR 2.4.0 (successfully) with `SAGE_CHECK=yes`; the GCC on silius is itself built with MPIR 2.5.0 and MPFR 3.1.0.\n\nI use `-mcpu=power7 -mtune=power7 -O3 -g [-fno-strict-aliasing]`; with earlier Sage versions, I did build ECL with `-mcpu=power4 ...`, which (besides other variations) led to less errors (doctest errors in only 8 files IIRC), but I currently can't give a comparison or more details.",
    "created_at": "2012-03-22T07:35:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123374",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:51'></a>
P.S.: I've of course built MPIR 2.4.0 (successfully) with `SAGE_CHECK=yes`; the GCC on silius is itself built with MPIR 2.5.0 and MPFR 3.1.0.

I use `-mcpu=power7 -mtune=power7 -O3 -g [-fno-strict-aliasing]`; with earlier Sage versions, I did build ECL with `-mcpu=power4 ...`, which (besides other variations) led to less errors (doctest errors in only 8 files IIRC), but I currently can't give a comparison or more details.



---

archive/issue_comments_123375.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [zimmerma](#comment%3A49):\n> Francois, just to be sure, did you check MPFR is built with `--disable-thread-safe`?\n\n\nThe MPFR 3.1.0.p0 spkg included in Sage 5.0.beta8 uses `--disable-thread-safe`.",
    "created_at": "2012-03-22T07:51:57Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123375",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:52'></a>
Replying to [zimmerma](#comment%3A49):
> Francois, just to be sure, did you check MPFR is built with `--disable-thread-safe`?


The MPFR 3.1.0.p0 spkg included in Sage 5.0.beta8 uses `--disable-thread-safe`.



---

archive/issue_comments_123376.json:
```json
{
    "body": "<a id='comment:53'></a>\nI have build sage again with SAGE_DEBUG set to yes but I don't get more information this is annoying.",
    "created_at": "2012-03-22T22:10:04Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123376",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:53'></a>
I have build sage again with SAGE_DEBUG set to yes but I don't get more information this is annoying.



---

archive/issue_comments_123377.json:
```json
{
    "body": "<a id='comment:54'></a>\nAll mpir/mpfr/mpfi tests pass (expect tget_set_d64 in mpfr which is skipped). One strange thing in mpfr\n\n```\n[tversion] MPIR: header 2.4.0, library 2.4.0\n[tversion] MPFR tuning parameters from src/powerpc32/mparam.h\n```\nthis is a powerpc64 machine (and I am sure mpir is configured 64bits), does it matter?",
    "created_at": "2012-03-22T22:29:40Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123377",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:54'></a>
All mpir/mpfr/mpfi tests pass (expect tget_set_d64 in mpfr which is skipped). One strange thing in mpfr

```
[tversion] MPIR: header 2.4.0, library 2.4.0
[tversion] MPFR tuning parameters from src/powerpc32/mparam.h
```
this is a powerpc64 machine (and I am sure mpir is configured 64bits), does it matter?



---

archive/issue_comments_123378.json:
```json
{
    "body": "<a id='comment:55'></a>\nIt doesn't seem to matter but I am not sure the configuration works as it should in mpfr, if both __ARCH_PPC and __PPC64__ are present __PPC64__ is just ignored.",
    "created_at": "2012-03-23T01:25:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123378",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:55'></a>
It doesn't seem to matter but I am not sure the configuration works as it should in mpfr, if both __ARCH_PPC and __PPC64__ are present __PPC64__ is just ignored.



---

archive/issue_comments_123379.json:
```json
{
    "body": "<a id='comment:56'></a>\nFrancois,\n\nI don't think it matters, since the `mparam.h` file only contains tuning parameters,\nhowever I will fix that in the development version. Thank you for pointing out this.\n\nPaul",
    "created_at": "2012-03-23T07:37:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123379",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:56'></a>
Francois,

I don't think it matters, since the `mparam.h` file only contains tuning parameters,
however I will fix that in the development version. Thank you for pointing out this.

Paul



---

archive/issue_comments_123380.json:
```json
{
    "body": "<a id='comment:57'></a>\nin fact this issue was already fixed in the development version of MPFR. Here is a patch:\n\n```\n\nzimmerma@silius:~/mpfr-3.1.0> diff -u src/mparam_h.in.orig src/mparam_h.in\n--- src/mparam_h.in.orig        2012-03-23 07:46:30.412866000 +0000\n+++ src/mparam_h.in     2012-03-23 07:46:41.821355000 +0000\n@@ -61,14 +61,14 @@\n #define MPFR_TUNE_CASE \"src/arm/mparam.h\"\n #include \"arm/mparam.h\"\n \n-#elif defined (_ARCH_PPC) /* Threshold for 32-bit PowerPC */\n-#define MPFR_TUNE_CASE \"src/powerpc32/mparam.h\"\n-#include \"powerpc32/mparam.h\"\n-\n #elif defined (__PPC64__) /* Threshold for 64-bit PowerPC */\n #define MPFR_TUNE_CASE \"src/powerpc64/mparam.h\"\n #include \"powerpc64/mparam.h\"\n \n+#elif defined (_ARCH_PPC) /* Threshold for 32-bit PowerPC */\n+#define MPFR_TUNE_CASE \"src/powerpc32/mparam.h\"\n+#include \"powerpc32/mparam.h\"\n+\n #elif defined (__sparc_v9__) /* Threshold for 64-bits Sparc */\n #define MPFR_TUNE_CASE \"src/sparc64/mparam.h\"\n #include \"sparc64/mparam.h\"\n```\nPaul",
    "created_at": "2012-03-23T07:50:15Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123380",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:57'></a>
in fact this issue was already fixed in the development version of MPFR. Here is a patch:

```

zimmerma@silius:~/mpfr-3.1.0> diff -u src/mparam_h.in.orig src/mparam_h.in
--- src/mparam_h.in.orig        2012-03-23 07:46:30.412866000 +0000
+++ src/mparam_h.in     2012-03-23 07:46:41.821355000 +0000
@@ -61,14 +61,14 @@
 #define MPFR_TUNE_CASE "src/arm/mparam.h"
 #include "arm/mparam.h"
 
-#elif defined (_ARCH_PPC) /* Threshold for 32-bit PowerPC */
-#define MPFR_TUNE_CASE "src/powerpc32/mparam.h"
-#include "powerpc32/mparam.h"
-
 #elif defined (__PPC64__) /* Threshold for 64-bit PowerPC */
 #define MPFR_TUNE_CASE "src/powerpc64/mparam.h"
 #include "powerpc64/mparam.h"
 
+#elif defined (_ARCH_PPC) /* Threshold for 32-bit PowerPC */
+#define MPFR_TUNE_CASE "src/powerpc32/mparam.h"
+#include "powerpc32/mparam.h"
+
 #elif defined (__sparc_v9__) /* Threshold for 64-bits Sparc */
 #define MPFR_TUNE_CASE "src/sparc64/mparam.h"
 #include "sparc64/mparam.h"
```
Paul



---

archive/issue_comments_123381.json:
```json
{
    "body": "<a id='comment:58'></a>\nwould it be possible to send me the `config.log` file from MPFR when configured within Sage?\n\nPaul",
    "created_at": "2012-03-23T07:51:50Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123381",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:58'></a>
would it be possible to send me the `config.log` file from MPFR when configured within Sage?

Paul



---

archive/issue_comments_123382.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [zimmerma](#comment%3A58):\n> would it be possible to send me the `config.log` file from MPFR when configured within Sage?\n\n\nI've uploaded two `config.log`s of MPFR from silius:\n\n* [MPFR 3.1.0.p0 configured with MPIR 2.1.3](http://boxen.math.washington.edu/home/leif/Sage/tmp/silius/MPFR-3.1.0.p0-config.log-Sage-5.0beta9-MPIR-2.1.3.p9.txt) (p9, Sage 5.0.beta9)\n\n* [MPFR 3.1.0.p0 configured with MPIR 2.4.0](http://boxen.math.washington.edu/home/leif/Sage/tmp/silius/MPFR-3.1.0.p0-config.log-Sage-5.0beta9-MPIR-2.4.0.p1.txt) (p1 from #11616, otherwise Sage 5.0.beta9)\n\nThey don't differ except for the name of a temporary file.\n\n(GCC 4.6.3, which meanwhile is the default compiler on that machine; `CFLAGS`/`CXXFLAGS`: `-mcpu=power7 -mtune=power7 -O3 -g -fno-strict-aliasing`)\n\n\n-leif",
    "created_at": "2012-03-23T10:53:45Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123382",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:59'></a>
Replying to [zimmerma](#comment%3A58):
> would it be possible to send me the `config.log` file from MPFR when configured within Sage?


I've uploaded two `config.log`s of MPFR from silius:

* [MPFR 3.1.0.p0 configured with MPIR 2.1.3](http://boxen.math.washington.edu/home/leif/Sage/tmp/silius/MPFR-3.1.0.p0-config.log-Sage-5.0beta9-MPIR-2.1.3.p9.txt) (p9, Sage 5.0.beta9)

* [MPFR 3.1.0.p0 configured with MPIR 2.4.0](http://boxen.math.washington.edu/home/leif/Sage/tmp/silius/MPFR-3.1.0.p0-config.log-Sage-5.0beta9-MPIR-2.4.0.p1.txt) (p1 from #11616, otherwise Sage 5.0.beta9)

They don't differ except for the name of a temporary file.

(GCC 4.6.3, which meanwhile is the default compiler on that machine; `CFLAGS`/`CXXFLAGS`: `-mcpu=power7 -mtune=power7 -O3 -g -fno-strict-aliasing`)


-leif



---

archive/issue_comments_123383.json:
```json
{
    "body": "<a id='comment:60'></a>\nLeif,\n\nthank you. I did compare your config.log of MPFR 3.1.0.p0 configured with MPIR 2.4.0 with the\none for a vanilla MPFR-3.1.0 configured with GMP 5.0.4:\n\n(1) it seems your config.log does not extract CC and CFLAGS from gmp.h\n\n(2) mine uses gcc -std=gnu99 instead of gcc alone\n\n(3) your config.log uses -mcpu=power7 -mtune=power7 instead of -m64\n\n(4) the linker used is ld in your case and `/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld` for a vanilla MPFR\n\nI'd like to reproduce exactly your build with a vanilla MPFR but I cannot access some of\nyour files:\n\n```\n\nzimmerma@silius:~/mpfr-3.1.0> ls /home/leif/Sage/release/build/silius/sage-5.0.beta9-gcc-4.6.3/local/include\nls: cannot access /home/leif/Sage/release/build/silius/sage-5.0.beta9-gcc-4.6.3/local/include: Permission denied\n```\nPaul",
    "created_at": "2012-03-23T14:19:50Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123383",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:60'></a>
Leif,

thank you. I did compare your config.log of MPFR 3.1.0.p0 configured with MPIR 2.4.0 with the
one for a vanilla MPFR-3.1.0 configured with GMP 5.0.4:

(1) it seems your config.log does not extract CC and CFLAGS from gmp.h

(2) mine uses gcc -std=gnu99 instead of gcc alone

(3) your config.log uses -mcpu=power7 -mtune=power7 instead of -m64

(4) the linker used is ld in your case and `/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld` for a vanilla MPFR

I'd like to reproduce exactly your build with a vanilla MPFR but I cannot access some of
your files:

```

zimmerma@silius:~/mpfr-3.1.0> ls /home/leif/Sage/release/build/silius/sage-5.0.beta9-gcc-4.6.3/local/include
ls: cannot access /home/leif/Sage/release/build/silius/sage-5.0.beta9-gcc-4.6.3/local/include: Permission denied
```
Paul



---

archive/issue_comments_123384.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [zimmerma](#comment%3A60):\n> I did compare your config.log of MPFR 3.1.0.p0 configured with MPIR 2.4.0 with the\n> one for a vanilla MPFR-3.1.0 configured with GMP 5.0.4:\n> \n> (1) it seems your config.log does not extract CC and CFLAGS from gmp.h\n\n\nIt does, but MPIR takes (also) the flags I specified and hence writes these to `gmp.h`:\n\n```sh\nleif@silius:~/.../sage-5.0.beta9-gcc-4.6.3> egrep \"__(GMP|MPIR)_(CC|CFLAGS)\" local/include/gmp.h \n#define __GMP_CC __MPIR_CC\n#define __GMP_CFLAGS __MPIR_CFLAGS\n#define __MPIR_CC \"gcc -std=gnu99\"\n#define __MPIR_CFLAGS \" -g -O3 -mcpu=power7 -mtune=power7 -O3 -g -fno-strict-aliasing \"\n```\n(This is the `gmp.h` created by MPIR 2.**4.0**.p1.  I know the one from MPIR 2.1.3 does look different: First of all, `__GMP_CC` and `__GMP_CFLAGS` are defined to strings as well, instead of referring to their respective MPIR macros, and -- which is a known bug -- `__GMP_CC` doesn't contain `-std=gnu99`, although `__MPIR_CC` does.)\n\n\n> (2) mine uses gcc -std=gnu99 instead of gcc alone\n\n\nThis shouldn't matter; I could retry building MPIR and MPFR with `CC=\"gcc -std=gnu99\"` though.\n\n\n> (3) your config.log uses -mcpu=power7 -mtune=power7 instead of -m64\n\n\nSee above.\n\n\n> (4) the linker used is ld in your case and `/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld` for a vanilla MPFR\n\n\n\n```sh\nleif@silius:~> command -v ld\n/usr/bin/ld\nleif@silius:~> (. /usr/local/skynet_bash_profile ; command -v ld)\n/usr/bin/ld\n\nleif@silius:~> command ld --version\nGNU ld (GNU Binutils; SUSE Linux Enterprise 11) 2.20.0.20100122-0.7.9\nCopyright 2009 Free Software Foundation, Inc.\nThis program is free software; you may redistribute it under the terms of\nthe GNU General Public License version 3 or (at your option) a later version.\nThis program has absolutely no warranty.\nleif@silius:~> (. /usr/local/skynet_bash_profile ; command ld --version)\nGNU ld (GNU Binutils; SUSE Linux Enterprise 11) 2.20.0.20100122-0.7.9\nCopyright 2009 Free Software Foundation, Inc.\nThis program is free software; you may redistribute it under the terms of\nthe GNU General Public License version 3 or (at your option) a later version.\nThis program has absolutely no warranty.\n\nleif@silius:~> echo $PATH\n/usr/local/bin/ppc64-Linux-power7-suse:/home/leif/.local/bin:/home/leif/bin/silius:/home/leif/bin:/opt/csm/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/opt/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin\n```\n\n\n> I'd like to reproduce exactly your build with a vanilla MPFR but I cannot access some of your files.\n\n\nI've copied the headers and libs into `/tmp/leif/sage-5.0beta9/MPIR-{2.1.3,2.4.0}/local/{include,lib}/`, so you should be able to configure MPFR with `--with-gmp=/tmp/leif/sage-5.0beta9/MPIR-2.1.3/local/` etc.\n\n[Sorry for the delay, had some network trouble.]",
    "created_at": "2012-03-23T15:48:01Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123384",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:61'></a>
Replying to [zimmerma](#comment%3A60):
> I did compare your config.log of MPFR 3.1.0.p0 configured with MPIR 2.4.0 with the
> one for a vanilla MPFR-3.1.0 configured with GMP 5.0.4:
> 
> (1) it seems your config.log does not extract CC and CFLAGS from gmp.h


It does, but MPIR takes (also) the flags I specified and hence writes these to `gmp.h`:

```sh
leif@silius:~/.../sage-5.0.beta9-gcc-4.6.3> egrep "__(GMP|MPIR)_(CC|CFLAGS)" local/include/gmp.h 
#define __GMP_CC __MPIR_CC
#define __GMP_CFLAGS __MPIR_CFLAGS
#define __MPIR_CC "gcc -std=gnu99"
#define __MPIR_CFLAGS " -g -O3 -mcpu=power7 -mtune=power7 -O3 -g -fno-strict-aliasing "
```
(This is the `gmp.h` created by MPIR 2.**4.0**.p1.  I know the one from MPIR 2.1.3 does look different: First of all, `__GMP_CC` and `__GMP_CFLAGS` are defined to strings as well, instead of referring to their respective MPIR macros, and -- which is a known bug -- `__GMP_CC` doesn't contain `-std=gnu99`, although `__MPIR_CC` does.)


> (2) mine uses gcc -std=gnu99 instead of gcc alone


This shouldn't matter; I could retry building MPIR and MPFR with `CC="gcc -std=gnu99"` though.


> (3) your config.log uses -mcpu=power7 -mtune=power7 instead of -m64


See above.


> (4) the linker used is ld in your case and `/usr/local/binutils-2.21.1/ppc64-Linux-power7-suse-gcc-4.6.1/bin/ld` for a vanilla MPFR



```sh
leif@silius:~> command -v ld
/usr/bin/ld
leif@silius:~> (. /usr/local/skynet_bash_profile ; command -v ld)
/usr/bin/ld

leif@silius:~> command ld --version
GNU ld (GNU Binutils; SUSE Linux Enterprise 11) 2.20.0.20100122-0.7.9
Copyright 2009 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License version 3 or (at your option) a later version.
This program has absolutely no warranty.
leif@silius:~> (. /usr/local/skynet_bash_profile ; command ld --version)
GNU ld (GNU Binutils; SUSE Linux Enterprise 11) 2.20.0.20100122-0.7.9
Copyright 2009 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License version 3 or (at your option) a later version.
This program has absolutely no warranty.

leif@silius:~> echo $PATH
/usr/local/bin/ppc64-Linux-power7-suse:/home/leif/.local/bin:/home/leif/bin/silius:/home/leif/bin:/opt/csm/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/opt/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin
```


> I'd like to reproduce exactly your build with a vanilla MPFR but I cannot access some of your files.


I've copied the headers and libs into `/tmp/leif/sage-5.0beta9/MPIR-{2.1.3,2.4.0}/local/{include,lib}/`, so you should be able to configure MPFR with `--with-gmp=/tmp/leif/sage-5.0beta9/MPIR-2.1.3/local/` etc.

[Sorry for the delay, had some network trouble.]



---

archive/issue_comments_123385.json:
```json
{
    "body": "<a id='comment:62'></a>\nwith MPFR configured with `--enable-assert` within sage-5.0.beta9, I can simplify the\nproblem to:\n\n```\nsage: RIF(1,1)\nget_exp.c:29: MPFR assertion failed: ((x)->_mpfr_d)[(((((x))->_mpfr_prec)-1)/(64 - 0)+1)-1] & ((~(mp_limb_t)0) ^ ((~(mp_limb_t)0) >> 1))\n```\nThis means that we compute the exponent of a number which is either NaN, infinite or zero.\nI will continue to investigate.\n\nPaul",
    "created_at": "2012-03-23T17:29:06Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123385",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:62'></a>
with MPFR configured with `--enable-assert` within sage-5.0.beta9, I can simplify the
problem to:

```
sage: RIF(1,1)
get_exp.c:29: MPFR assertion failed: ((x)->_mpfr_d)[(((((x))->_mpfr_prec)-1)/(64 - 0)+1)-1] & ((~(mp_limb_t)0) ^ ((~(mp_limb_t)0) >> 1))
```
This means that we compute the exponent of a number which is either NaN, infinite or zero.
I will continue to investigate.

Paul



---

archive/issue_comments_123386.json:
```json
{
    "body": "<a id='comment:63'></a>\nI have spent several hours on this and my conclusion is that the culprit is Sage (i.e. Cython).\nIn `real_mpfi.pyx` one can read:\n\n```\n            elif PY_TYPE_CHECK(a, Rational) and PY_TYPE_CHECK(b, Rational):\n                rat = a\n                rat1 = b\n                # todo: The <object> coerce is evidently to get around a weird bug in SageX (?)\n                mpfi_interv_q(self.value, <object>rat.value, <object>rat1.value)\n```\nand the same coerce is done in the integer case.\n\nI am 99% sure that we hit that weird bug. Indeed with `RIF(1,1)` the integers (mpz_t) which are\npassed to `mpfi_interv_z` are malformed, with `SIZ=2` instead of `SIZ=1`.\n\nHowever I have no idea how to solve that weird bug, or how to find another workaround.\nCan we know who did write this comment?\n\nIt might be that the issue is related to the fact that the Power7 is big endian.\nWas Sage tested on other 64-bit big endian platforms?\n\nPaul",
    "created_at": "2012-03-23T22:15:07Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123386",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:63'></a>
I have spent several hours on this and my conclusion is that the culprit is Sage (i.e. Cython).
In `real_mpfi.pyx` one can read:

```
            elif PY_TYPE_CHECK(a, Rational) and PY_TYPE_CHECK(b, Rational):
                rat = a
                rat1 = b
                # todo: The <object> coerce is evidently to get around a weird bug in SageX (?)
                mpfi_interv_q(self.value, <object>rat.value, <object>rat1.value)
```
and the same coerce is done in the integer case.

I am 99% sure that we hit that weird bug. Indeed with `RIF(1,1)` the integers (mpz_t) which are
passed to `mpfi_interv_z` are malformed, with `SIZ=2` instead of `SIZ=1`.

However I have no idea how to solve that weird bug, or how to find another workaround.
Can we know who did write this comment?

It might be that the issue is related to the fact that the Power7 is big endian.
Was Sage tested on other 64-bit big endian platforms?

Paul



---

archive/issue_comments_123387.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [zimmerma](#comment%3A63):\n> I am 99% sure that we hit that weird bug.\n> However I have no idea how to solve that weird bug, or how to find another workaround.\n\n\n? The coercion is supposed to work around just that \"weird bug\", as I understand this.\n\nBut this comment is likely to be obsolete (\"SageX\") anyway; did you try removing the `<object>`?\n\n\n\n\n> Can we know who did write this comment?\n\n\n`hg annotate ...` (an alias for `blame` ;-) ) gives the changeset number, then `hg log [-v] ...` to see *who* made that change.\n\n\n\n\n> It might be that the issue is related to the fact that the Power7 is big endian.\n> Was Sage tested on other 64-bit big endian platforms?\n\n\nWell, [SunOS/Solaris] SPARC (V9), but the *64-bit* port (including x86_64) is still incomplete AFAIK.  (There's some wiki page on it, and a couple of meta-tickets; or ask Dave Kirkby, who did most if not all of it on his own.)",
    "created_at": "2012-03-23T23:06:15Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123387",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:64'></a>
Replying to [zimmerma](#comment%3A63):
> I am 99% sure that we hit that weird bug.
> However I have no idea how to solve that weird bug, or how to find another workaround.


? The coercion is supposed to work around just that "weird bug", as I understand this.

But this comment is likely to be obsolete ("SageX") anyway; did you try removing the `<object>`?




> Can we know who did write this comment?


`hg annotate ...` (an alias for `blame` ;-) ) gives the changeset number, then `hg log [-v] ...` to see *who* made that change.




> It might be that the issue is related to the fact that the Power7 is big endian.
> Was Sage tested on other 64-bit big endian platforms?


Well, [SunOS/Solaris] SPARC (V9), but the *64-bit* port (including x86_64) is still incomplete AFAIK.  (There's some wiki page on it, and a couple of meta-tickets; or ask Dave Kirkby, who did most if not all of it on his own.)



---

archive/issue_comments_123388.json:
```json
{
    "body": "<a id='comment:65'></a>\nLeif,\n\nyes I tried removing the coercion. It gives:\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n...\n                mpfi_interv_q(self.value, <object>rat.value, <object>rat1.value)\n            elif PY_TYPE_CHECK(a, Integer) and PY_TYPE_CHECK(b, Integer):\n                integ = a\n                integ1 = b\n                mpfi_interv_z(self.value, integ.value, integ1.value)\n                                              ^\n------------------------------------------------------------\n\nsage/rings/real_mpfi.pyx:1045:47: Cannot convert 'mpz_t' to Python object\n```\nThis is strange because `mpfi_interv_z` expects a `mpz_t` as 2nd and 3rd arguments, and\n`integ.value` is a `mpz_t`, thus I don't see any reason to convert to a Python object.\n\nPaul",
    "created_at": "2012-03-24T07:08:46Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123388",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:65'></a>
Leif,

yes I tried removing the coercion. It gives:

```
Error compiling Cython file:
------------------------------------------------------------
...
                mpfi_interv_q(self.value, <object>rat.value, <object>rat1.value)
            elif PY_TYPE_CHECK(a, Integer) and PY_TYPE_CHECK(b, Integer):
                integ = a
                integ1 = b
                mpfi_interv_z(self.value, integ.value, integ1.value)
                                              ^
------------------------------------------------------------

sage/rings/real_mpfi.pyx:1045:47: Cannot convert 'mpz_t' to Python object
```
This is strange because `mpfi_interv_z` expects a `mpz_t` as 2nd and 3rd arguments, and
`integ.value` is a `mpz_t`, thus I don't see any reason to convert to a Python object.

Paul



---

archive/issue_comments_123389.json:
```json
{
    "body": "<a id='comment:66'></a>\non sage.math with Sage 4.8 `hg annotate` gives:\n\n```\n 2617:                 # todo: The <object> coerce is evidently to get around a weird bug in SageX (?)  \n 2617:                 mpfi_interv_q(self.value, <object>rat.value, <object>rat1\n.value)\n```\nthen:\n\n```\nzimmerma@sage:~/sage-4.8/devel/sage/sage/rings$ hg  log -r 2617\nchangeset:   2617:616e5624646c\nuser:        William Stein <wstein@gmail.com>\ndate:        Wed Jan 24 11:42:46 2007 -0800\nsummary:     Switch to Carl Witty's new MPFI wrapper; also some fixes for the reference manual.\n```\nI'll thus ask William to help.\n\nPaul",
    "created_at": "2012-03-24T07:17:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123389",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:66'></a>
on sage.math with Sage 4.8 `hg annotate` gives:

```
 2617:                 # todo: The <object> coerce is evidently to get around a weird bug in SageX (?)  
 2617:                 mpfi_interv_q(self.value, <object>rat.value, <object>rat1
.value)
```
then:

```
zimmerma@sage:~/sage-4.8/devel/sage/sage/rings$ hg  log -r 2617
changeset:   2617:616e5624646c
user:        William Stein <wstein@gmail.com>
date:        Wed Jan 24 11:42:46 2007 -0800
summary:     Switch to Carl Witty's new MPFI wrapper; also some fixes for the reference manual.
```
I'll thus ask William to help.

Paul



---

archive/issue_comments_123390.json:
```json
{
    "body": "<a id='comment:67'></a>\nI've sent a private mail to William. The bug seems clearly in Cython. In `real_mpfi.c` I see:\n\n```\n      __pyx_t_3 = ((PyObject *)__pyx_v_integ->value);\n      __Pyx_INCREF(__pyx_t_3);\n      __pyx_t_8 = ((PyObject *)__pyx_v_integ1->value);\n      __Pyx_INCREF(__pyx_t_8);\n      mpfi_interv_z(((struct __pyx_obj_4sage_5rings_9real_mpfi_RealIntervalFiel\\\ndElement *)__pyx_v_self)->value, __pyx_t_3, __pyx_t_8);\n```\nthus `__pyx_t_3` is of the wrong type: it should be of type Integer and not of type Python object\n(compare to the call to `mpfi_set_z` in the same file).\n\nPaul",
    "created_at": "2012-03-24T07:33:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123390",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:67'></a>
I've sent a private mail to William. The bug seems clearly in Cython. In `real_mpfi.c` I see:

```
      __pyx_t_3 = ((PyObject *)__pyx_v_integ->value);
      __Pyx_INCREF(__pyx_t_3);
      __pyx_t_8 = ((PyObject *)__pyx_v_integ1->value);
      __Pyx_INCREF(__pyx_t_8);
      mpfi_interv_z(((struct __pyx_obj_4sage_5rings_9real_mpfi_RealIntervalFiel\
dElement *)__pyx_v_self)->value, __pyx_t_3, __pyx_t_8);
```
thus `__pyx_t_3` is of the wrong type: it should be of type Integer and not of type Python object
(compare to the call to `mpfi_set_z` in the same file).

Paul



---

archive/issue_comments_123391.json:
```json
{
    "body": "<a id='comment:68'></a>\nI believe I understand what happens. The fact that `__pyx_t_3` has the wrong type is not a problem,\nsince it is a pointer, like what `mpz_t` expects as 2nd (and 3rd) argument of `mpfi_interv_z`.\n\nHowever my guess is that the `__Pyx_INCREF(__pyx_t_3)` call is intended to increase a reference counter stored somewhere in the `PyObject` struct. Since `__pyx_v_integ->value` is not a Python object but a `mpz_t`, this call makes a side effect on the `mpz_t` structure, which has the\neffect to increase its \"size\" from 1 to 2, which explains why the `mpz_t` object seen by\n`mpfi_interv_z` is corrupted.\n\nWhat is annoying is that this corruption **also happens** on other configurations (in particular\nlittle endian). For some reason it gets unnoticed, maybe because the corrupted field is not the size\n(maybe the allocated size). However one might be able to reproduce the problem also by changing the\norder of the fields in the `mpz_t` structure in `gmp.h`. Putting `_mp_size` first seems to\nbreak Sage on 64-bit Intel processors.\n\nPaul",
    "created_at": "2012-03-24T08:30:42Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123391",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:68'></a>
I believe I understand what happens. The fact that `__pyx_t_3` has the wrong type is not a problem,
since it is a pointer, like what `mpz_t` expects as 2nd (and 3rd) argument of `mpfi_interv_z`.

However my guess is that the `__Pyx_INCREF(__pyx_t_3)` call is intended to increase a reference counter stored somewhere in the `PyObject` struct. Since `__pyx_v_integ->value` is not a Python object but a `mpz_t`, this call makes a side effect on the `mpz_t` structure, which has the
effect to increase its "size" from 1 to 2, which explains why the `mpz_t` object seen by
`mpfi_interv_z` is corrupted.

What is annoying is that this corruption **also happens** on other configurations (in particular
little endian). For some reason it gets unnoticed, maybe because the corrupted field is not the size
(maybe the allocated size). However one might be able to reproduce the problem also by changing the
order of the fields in the `mpz_t` structure in `gmp.h`. Putting `_mp_size` first seems to
break Sage on 64-bit Intel processors.

Paul



---

archive/issue_comments_123392.json:
```json
{
    "body": "<a id='comment:69'></a>\nI still got no answer from William. Does anybody know if it is possible to recompile Sage\nafter modifying manually the `real_mpfi.c` file, without it being automatically generated?\nMy idea is to remove the `__Pyx_INCREF` instructions to confirm my guess.\n\nPaul",
    "created_at": "2012-03-28T11:11:26Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123392",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:69'></a>
I still got no answer from William. Does anybody know if it is possible to recompile Sage
after modifying manually the `real_mpfi.c` file, without it being automatically generated?
My idea is to remove the `__Pyx_INCREF` instructions to confirm my guess.

Paul



---

archive/issue_comments_123393.json:
```json
{
    "body": "<a id='comment:70'></a>\nReplying to [zimmerma](#comment%3A69):\n> I still got no answer from William. Does anybody know if it is possible to recompile Sage\n> after modifying manually the `real_mpfi.c` file, without it being automatically generated?\n\n\n`./sage -b` should just do that, since Cython won't (re)generate files that are newer than their sources.\n\nOf course first make a copy of it, but I've patched C and C++ files generated by Cython a couple of times without problems.",
    "created_at": "2012-03-28T11:22:14Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123393",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:70'></a>
Replying to [zimmerma](#comment%3A69):
> I still got no answer from William. Does anybody know if it is possible to recompile Sage
> after modifying manually the `real_mpfi.c` file, without it being automatically generated?


`./sage -b` should just do that, since Cython won't (re)generate files that are newer than their sources.

Of course first make a copy of it, but I've patched C and C++ files generated by Cython a couple of times without problems.



---

archive/issue_comments_123394.json:
```json
{
    "body": "<a id='comment:71'></a>\nthank you Leif. This confirms my guess: if I comment the two `__Pyx_INCREF` before\nthe call to `mpfi_interv_z`, and the two `__Pyx_DECREF` after, then `RIF(1,1)`\nruns ok.\n\nThe problem is thus isolated, we now need somebody fluent in Cython to solve it or find\nanother (platform independent) workaround.\n\nWhere do we report Cython bugs?\n\nPaul",
    "created_at": "2012-03-28T11:59:11Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123394",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:71'></a>
thank you Leif. This confirms my guess: if I comment the two `__Pyx_INCREF` before
the call to `mpfi_interv_z`, and the two `__Pyx_DECREF` after, then `RIF(1,1)`
runs ok.

The problem is thus isolated, we now need somebody fluent in Cython to solve it or find
another (platform independent) workaround.

Where do we report Cython bugs?

Paul



---

archive/issue_comments_123395.json:
```json
{
    "body": "<a id='comment:72'></a>\nFirst attempt at patch.  It builds, but I have not tested it.",
    "created_at": "2012-03-28T12:15:29Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123395",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:72'></a>
First attempt at patch.  It builds, but I have not tested it.



---

archive/issue_comments_123396.json:
```json
{
    "body": "<a id='comment:73'></a>\nit seems indeed to solve the MPFI problem. I will try this patch on top of sage-5.0.beta10.\nGood catch Jeroen! Btw, why did you remove the cdef for free()?\n\nPaul",
    "created_at": "2012-03-28T12:30:21Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123396",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:73'></a>
it seems indeed to solve the MPFI problem. I will try this patch on top of sage-5.0.beta10.
Good catch Jeroen! Btw, why did you remove the cdef for free()?

Paul



---

archive/issue_comments_123397.json:
```json
{
    "body": "<a id='comment:74'></a>\nReplying to [zimmerma](#comment%3A73):\n> Btw, why did you remove the cdef for free()?\n1. Because it is not needed.\n2. Because in Sage, you should use `sage_free()` (which blocks interrupts and could potentially do other stuff too).",
    "created_at": "2012-03-28T12:41:02Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123397",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:74'></a>
Replying to [zimmerma](#comment%3A73):
> Btw, why did you remove the cdef for free()?
1. Because it is not needed.
2. Because in Sage, you should use `sage_free()` (which blocks interrupts and could potentially do other stuff too).



---

archive/issue_comments_123398.json:
```json
{
    "body": "<a id='comment:75'></a>\nwith the patch on top of sage-5.0.beta10, we are making good progress, but the following doctests still fail:\n\n```\nsage -t devel/sage-11705/sage/functions/special.py # 2 doctests failed\nsage -t devel/sage-11705/sage/graphs/graph_decompositions/vertex_separation.pyx # 3 doctests failed\nsage -t devel/sage-11705/sage/libs/libecm.pyx # Killed/crashed\nsage -t devel/sage-11705/sage/numerical/optimize.py # 6 doctests failed\nsage -t devel/sage-11705/sage/plot/plot3d/list_plot3d.py # 4 doctests failed\nsage -t devel/sage-11705/sage/sandpiles/sandpile.py # Time out\n```\nI will investigate the libecm problem.\n\nPaul",
    "created_at": "2012-03-29T06:40:41Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123398",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:75'></a>
with the patch on top of sage-5.0.beta10, we are making good progress, but the following doctests still fail:

```
sage -t devel/sage-11705/sage/functions/special.py # 2 doctests failed
sage -t devel/sage-11705/sage/graphs/graph_decompositions/vertex_separation.pyx # 3 doctests failed
sage -t devel/sage-11705/sage/libs/libecm.pyx # Killed/crashed
sage -t devel/sage-11705/sage/numerical/optimize.py # 6 doctests failed
sage -t devel/sage-11705/sage/plot/plot3d/list_plot3d.py # 4 doctests failed
sage -t devel/sage-11705/sage/sandpiles/sandpile.py # Time out
```
I will investigate the libecm problem.

Paul



---

archive/issue_comments_123399.json:
```json
{
    "body": "<a id='comment:76'></a>\nthe `sandpile.py` doctest passes with `-long`, thus only 5 doctests fail.\n\nPaul",
    "created_at": "2012-03-29T06:58:34Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123399",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:76'></a>
the `sandpile.py` doctest passes with `-long`, thus only 5 doctests fail.

Paul



---

archive/issue_comments_123400.json:
```json
{
    "body": "<a id='comment:77'></a>\nthe libecm problem disappears when configuring GMP-ECM with `--disable-asm-redc`. The error is when\nthe assembly function `mulredc1` is called. Nothing seems wrong in the arguments, and I cannot reproduce the problem when configuring GMP-ECM alone. Also after adding `make check` in spkg-install\neverything is ok (btw why is `make check` not done?).\n\nMaybe the problem is similar to the one Jeroen solved with MPFI?\n\nPaul",
    "created_at": "2012-03-29T09:11:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123400",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:77'></a>
the libecm problem disappears when configuring GMP-ECM with `--disable-asm-redc`. The error is when
the assembly function `mulredc1` is called. Nothing seems wrong in the arguments, and I cannot reproduce the problem when configuring GMP-ECM alone. Also after adding `make check` in spkg-install
everything is ok (btw why is `make check` not done?).

Maybe the problem is similar to the one Jeroen solved with MPFI?

Paul



---

archive/issue_comments_123401.json:
```json
{
    "body": "<a id='comment:78'></a>\nBuilding cvxopt with `SAGE_CHECK=yes` fails on silius with GCC-4.6.3:\n\n```\nTesting l1.py ...\n     pcost       dcost       gap    pres   dres   k/t\n 0:  8.3671e+02  2.4168e+02  6e+02  8e-17  6e-15  1e+00\nTraceback (most recent call last):\n  File \"l1.py\", line 126, in <module>\n    x, y = l1(P,q)\n  File \"l1.py\", line 120, in l1\n    primalstart={'x': x0, 's': s0}, dualstart={'z': z0})\n  File \"/home/jdemeyer/silius/sage-5.0.beta12-gcc/local/lib/python2.7/site-packages/cvxopt/coneprog.py\", line 1084, in conelp\n    raise ValueError(\"Rank(A) < p or Rank([G; A]) < n\")\nValueError: Rank(A) < p or Rank([G; A]) < n\nError: test /home/jdemeyer/silius/sage-5.0.beta12-gcc/spkg/build/cvxopt-1.1.3.p1/src/examples/doc/chap8/l1.py failed\n```",
    "created_at": "2012-03-29T09:14:35Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123401",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:78'></a>
Building cvxopt with `SAGE_CHECK=yes` fails on silius with GCC-4.6.3:

```
Testing l1.py ...
     pcost       dcost       gap    pres   dres   k/t
 0:  8.3671e+02  2.4168e+02  6e+02  8e-17  6e-15  1e+00
Traceback (most recent call last):
  File "l1.py", line 126, in <module>
    x, y = l1(P,q)
  File "l1.py", line 120, in l1
    primalstart={'x': x0, 's': s0}, dualstart={'z': z0})
  File "/home/jdemeyer/silius/sage-5.0.beta12-gcc/local/lib/python2.7/site-packages/cvxopt/coneprog.py", line 1084, in conelp
    raise ValueError("Rank(A) < p or Rank([G; A]) < n")
ValueError: Rank(A) < p or Rank([G; A]) < n
Error: test /home/jdemeyer/silius/sage-5.0.beta12-gcc/spkg/build/cvxopt-1.1.3.p1/src/examples/doc/chap8/l1.py failed
```



---

archive/issue_comments_123402.json:
```json
{
    "body": "<a id='comment:79'></a>\nHere is the backtrace for the ECM Segmentation Fault:\n\n```\n#0  0x7d0429d27d242810 in ?? ()\n#1  0x00000fffae273c18 in mulredc (z=0x10678760, x=<optimized out>, y=<optimized out>, m=0x1410d4b0, nn=1, invm=4727093576446091305)\n    at mpmod.c:386\n#2  0x00000fffae277300 in ecm_mulredc_basecase (R=0xfffffffc3b0, S1=0xfffffffc4d8, S2=0xfffffffc4a8, modulus=0xfffffffc460)\n    at mpmod.c:611\n#3  0x00000fffae26576c in ecm (f=0xfffffffc878, x=0xfffffffc6e8, sigma=0xfffffffc6f8, n=0xfffffffc888, go=0xfffffffc710,\n    B1done=0xfffffffc720, B1=0, B2min_parm=0xfffffffc728, B2_parm=0xfffffffc738, B2scale=1, k=0, S=0, verbose=0, repr=0, nobase2step2=0,\n    use_ntt=1, sigma_is_A=0, os=0xfffb7b7d698, es=0xfffb7b7d778, chkfilename=0x0, TreeFilename=0x0, maxmem=0, stage1time=0,\n    rng=0xfffffffc790, stop_asap=0) at ecm.c:940\n#4  0x00000fffae264e34 in ecm_factor (f=0xfffffffc878, n=0xfffffffc888, B1=0, p=0xfffffffc6e0) at factor.c:93\n#5  0x00000fffae262640 in __pyx_pf_4sage_4libs_6libecm_ecmfactor (__pyx_self=<optimized out>, __pyx_args=<optimized out>,\n    __pyx_kwds=<optimized out>) at sage/libs/libecm.c:1958\n#6  0x00000fffb7e13ed4 in PyCFunction_Call (func=0x140c36c8, arg=<optimized out>, kw=<optimized out>) at Objects/methodobject.c:85\n#7  0x00000fffb7e8fc18 in call_function (oparg=<optimized out>, pp_stack=0xfffffffca48) at Python/ceval.c:4013\n#8  PyEval_EvalFrameEx (f=<optimized out>, throwflag=<optimized out>) at Python/ceval.c:2666\n#9  0x00000fffb7e91908 in PyEval_EvalCodeEx (co=0x140c2830, globals=<optimized out>, locals=<optimized out>, args=<optimized out>,\n    argcount=<optimized out>, kws=<optimized out>, kwcount=<optimized out>, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253\n#10 0x00000fffb7e9199c in PyEval_EvalCode (co=<optimized out>, globals=<optimized out>, locals=<optimized out>) at Python/ceval.c:667\n```",
    "created_at": "2012-03-29T09:26:36Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123402",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:79'></a>
Here is the backtrace for the ECM Segmentation Fault:

```
#0  0x7d0429d27d242810 in ?? ()
#1  0x00000fffae273c18 in mulredc (z=0x10678760, x=<optimized out>, y=<optimized out>, m=0x1410d4b0, nn=1, invm=4727093576446091305)
    at mpmod.c:386
#2  0x00000fffae277300 in ecm_mulredc_basecase (R=0xfffffffc3b0, S1=0xfffffffc4d8, S2=0xfffffffc4a8, modulus=0xfffffffc460)
    at mpmod.c:611
#3  0x00000fffae26576c in ecm (f=0xfffffffc878, x=0xfffffffc6e8, sigma=0xfffffffc6f8, n=0xfffffffc888, go=0xfffffffc710,
    B1done=0xfffffffc720, B1=0, B2min_parm=0xfffffffc728, B2_parm=0xfffffffc738, B2scale=1, k=0, S=0, verbose=0, repr=0, nobase2step2=0,
    use_ntt=1, sigma_is_A=0, os=0xfffb7b7d698, es=0xfffb7b7d778, chkfilename=0x0, TreeFilename=0x0, maxmem=0, stage1time=0,
    rng=0xfffffffc790, stop_asap=0) at ecm.c:940
#4  0x00000fffae264e34 in ecm_factor (f=0xfffffffc878, n=0xfffffffc888, B1=0, p=0xfffffffc6e0) at factor.c:93
#5  0x00000fffae262640 in __pyx_pf_4sage_4libs_6libecm_ecmfactor (__pyx_self=<optimized out>, __pyx_args=<optimized out>,
    __pyx_kwds=<optimized out>) at sage/libs/libecm.c:1958
#6  0x00000fffb7e13ed4 in PyCFunction_Call (func=0x140c36c8, arg=<optimized out>, kw=<optimized out>) at Objects/methodobject.c:85
#7  0x00000fffb7e8fc18 in call_function (oparg=<optimized out>, pp_stack=0xfffffffca48) at Python/ceval.c:4013
#8  PyEval_EvalFrameEx (f=<optimized out>, throwflag=<optimized out>) at Python/ceval.c:2666
#9  0x00000fffb7e91908 in PyEval_EvalCodeEx (co=0x140c2830, globals=<optimized out>, locals=<optimized out>, args=<optimized out>,
    argcount=<optimized out>, kws=<optimized out>, kwcount=<optimized out>, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253
#10 0x00000fffb7e9199c in PyEval_EvalCode (co=<optimized out>, globals=<optimized out>, locals=<optimized out>) at Python/ceval.c:667
```



---

archive/issue_comments_123403.json:
```json
{
    "body": "<a id='comment:80'></a>\nJeroen, I get the same backtrace, then the mulredc() function should call the assembly code\n`mulredc1.asm` in the powerpc64 subdirectory. I don't know if this assembly function is\ncalled or not. Could it be a problem in the way parameters are passed to that assembly function?\n\nPaul",
    "created_at": "2012-03-29T10:28:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123403",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:80'></a>
Jeroen, I get the same backtrace, then the mulredc() function should call the assembly code
`mulredc1.asm` in the powerpc64 subdirectory. I don't know if this assembly function is
called or not. Could it be a problem in the way parameters are passed to that assembly function?

Paul



---

archive/issue_comments_123404.json:
```json
{
    "body": "<a id='comment:81'></a>\nRecompiling ecm with -O0 doesn't help.",
    "created_at": "2012-03-29T12:28:49Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123404",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:81'></a>
Recompiling ecm with -O0 doesn't help.



---

archive/issue_comments_123405.json:
```json
{
    "body": "<a id='comment:82'></a>\nReplying to [jdemeyer](#comment%3A81):\n> Recompiling ecm with -O0 doesn't help.\n\n\nyes. I'll try with GMP-ECM 6.4.2 to see if the problem persists.\n\nPaul",
    "created_at": "2012-03-29T16:27:18Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123405",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:82'></a>
Replying to [jdemeyer](#comment%3A81):
> Recompiling ecm with -O0 doesn't help.


yes. I'll try with GMP-ECM 6.4.2 to see if the problem persists.

Paul



---

archive/issue_comments_123406.json:
```json
{
    "body": "<a id='comment:83'></a>\nI get the same SIGSEGV signal with GMP-ECM 6.4.2.\n\nPaul",
    "created_at": "2012-03-29T17:41:55Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123406",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:83'></a>
I get the same SIGSEGV signal with GMP-ECM 6.4.2.

Paul



---

archive/issue_comments_123407.json:
```json
{
    "body": "<a id='comment:84'></a>\nI tried linking the GMP-ECM binary with the libecm.a and libgmp.a files produced by Sage, and then the same\nexample works fine... No more idea for now.\n\nPaul",
    "created_at": "2012-03-29T17:53:02Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123407",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:84'></a>
I tried linking the GMP-ECM binary with the libecm.a and libgmp.a files produced by Sage, and then the same
example works fine... No more idea for now.

Paul



---

archive/issue_comments_123408.json:
```json
{
    "body": "<a id='comment:85'></a>\ninteresting, the segv only occurs for some inputs. For example the following works:\n\n```\nsage: ecmfactor(2^20-1,0.0)\n(True, 33)\n```\nPaul",
    "created_at": "2012-03-29T18:12:18Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123408",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:85'></a>
interesting, the segv only occurs for some inputs. For example the following works:

```
sage: ecmfactor(2^20-1,0.0)
(True, 33)
```
Paul



---

archive/issue_comments_123409.json:
```json
{
    "body": "<a id='comment:86'></a>\nI tried configuring GMP-ECM with `-enable-assert`, nothing wrong happens.\nI have no further idea to investigate. Any suggestion out there?\n\nOf course a possible workaround would be to configure with `--disable-asm-redc` on\npowerpc64, but it would be nice to find the reason of this problem. Is there any other\npowerpc on which we could test?\n\nWhat is strange is that the bug occurs **inside** libecm.a when called from within Sage,\nand does not occur when called from the binary GMP-ECM (with the same libecm.a). Maybe a memory corruption related to the ecm_params structure which is not really defined in libecm.pyx? Is it possible to link libecm dynamically to Sage?\n\nPaul",
    "created_at": "2012-03-30T07:59:29Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123409",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:86'></a>
I tried configuring GMP-ECM with `-enable-assert`, nothing wrong happens.
I have no further idea to investigate. Any suggestion out there?

Of course a possible workaround would be to configure with `--disable-asm-redc` on
powerpc64, but it would be nice to find the reason of this problem. Is there any other
powerpc on which we could test?

What is strange is that the bug occurs **inside** libecm.a when called from within Sage,
and does not occur when called from the binary GMP-ECM (with the same libecm.a). Maybe a memory corruption related to the ecm_params structure which is not really defined in libecm.pyx? Is it possible to link libecm dynamically to Sage?

Paul



---

archive/issue_comments_123410.json:
```json
{
    "body": "<a id='comment:87'></a>\nOk so I applied the patch to beta10 and run the long test (in serial) and we have made a lot of progress:\n\n```\n        sage -t -long \"devel/sage/doc/en/numerical_sage/cvxopt.rst\"\n        sage -t -long \"devel/sage/sage/functions/special.py\"\n        sage -t -long \"devel/sage/sage/graphs/graph_decompositions/vertex_separation.pyx\"\n        sage -t -long \"devel/sage/sage/libs/libecm.pyx\" # Killed/crashed\n        sage -t -long \"devel/sage/sage/numerical/optimize.py\"\n        sage -t -long \"devel/sage/sage/plot/plot3d/list_plot3d.py\"\n```\nI am applying #12777 next to see if that helps with libecm.",
    "created_at": "2012-04-01T21:45:31Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123410",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:87'></a>
Ok so I applied the patch to beta10 and run the long test (in serial) and we have made a lot of progress:

```
        sage -t -long "devel/sage/doc/en/numerical_sage/cvxopt.rst"
        sage -t -long "devel/sage/sage/functions/special.py"
        sage -t -long "devel/sage/sage/graphs/graph_decompositions/vertex_separation.pyx"
        sage -t -long "devel/sage/sage/libs/libecm.pyx" # Killed/crashed
        sage -t -long "devel/sage/sage/numerical/optimize.py"
        sage -t -long "devel/sage/sage/plot/plot3d/list_plot3d.py"
```
I am applying #12777 next to see if that helps with libecm.



---

archive/issue_comments_123411.json:
```json
{
    "body": "<a id='comment:88'></a>\n#12777 wasn't meant to solve this issue...",
    "created_at": "2012-04-01T22:16:10Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123411",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:88'></a>
#12777 wasn't meant to solve this issue...



---

archive/issue_comments_123412.json:
```json
{
    "body": "<a id='comment:89'></a>\nAnd it indeed doesn't. I was just curious if it would help get a better report on the problem. It doesn't.",
    "created_at": "2012-04-01T22:19:02Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123412",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:89'></a>
And it indeed doesn't. I was just curious if it would help get a better report on the problem. It doesn't.



---

archive/issue_comments_123413.json:
```json
{
    "body": "**Author:** Paul Zimmermann, Jeroen Demeyer",
    "created_at": "2012-04-03T15:14:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123413",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Paul Zimmermann, Jeroen Demeyer



---

archive/issue_comments_123414.json:
```json
{
    "body": "<a id='comment:91'></a>\nI moved the mpfi patch to #12829.  We should merge this patch, even though it doesn't solve all ppc64 problems.  Paul, are you able to review it?\n\nI had a quick look at the other ppc64 issues, but I couldn't immediately find out what the problem was.",
    "created_at": "2012-04-11T08:24:48Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123414",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:91'></a>
I moved the mpfi patch to #12829.  We should merge this patch, even though it doesn't solve all ppc64 problems.  Paul, are you able to review it?

I had a quick look at the other ppc64 issues, but I couldn't immediately find out what the problem was.



---

archive/issue_comments_123415.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n \n-sage-4.8.alpha6 **builds** on this machine, but there are *many* test failures, see the comments in this ticket.\n+sage-5.0.beta13 **builds** on this machine, but there are *many* test failures, see the comments in this ticket.\n+\n+Most of these failures are due to:\n+* #12829: Remove <object> cast in real_mpfi.pyx\n``````\n",
    "created_at": "2012-04-11T08:26:08Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123415",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
 
-sage-4.8.alpha6 **builds** on this machine, but there are *many* test failures, see the comments in this ticket.
+sage-5.0.beta13 **builds** on this machine, but there are *many* test failures, see the comments in this ticket.
+
+Most of these failures are due to:
+* #12829: Remove <object> cast in real_mpfi.pyx
``````




---

archive/issue_comments_123416.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,16 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n \n-sage-5.0.beta13 **builds** on this machine, but there are *many* test failures, see the comments in this ticket.\n+sage-5.0.beta13 **builds** on this machine, but there are *many* test failures.\n \n Most of these failures are due to:\n-* #12829: Remove <object> cast in real_mpfi.pyx\n+* #12829: Remove `<object>` cast in real_mpfi.pyx\n+\n+After applying that ticket, the remaining failures are:\n+\n+```\n+        sage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed\n+        sage -t  --long -force_lib devel/sage/sage/libs/libecm.pyx # Killed/crashed\n+        sage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed\n+        sage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed\n+        sage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed\n+```\n``````\n",
    "created_at": "2012-04-11T17:42:51Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123416",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,16 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
 
-sage-5.0.beta13 **builds** on this machine, but there are *many* test failures, see the comments in this ticket.
+sage-5.0.beta13 **builds** on this machine, but there are *many* test failures.
 
 Most of these failures are due to:
-* #12829: Remove <object> cast in real_mpfi.pyx
+* #12829: Remove `<object>` cast in real_mpfi.pyx
+
+After applying that ticket, the remaining failures are:
+
+```
+        sage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed
+        sage -t  --long -force_lib devel/sage/sage/libs/libecm.pyx # Killed/crashed
+        sage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed
+        sage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed
+        sage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed
+```
``````




---

archive/issue_comments_123417.json:
```json
{
    "body": "<a id='comment:94'></a>\nI think we should split the libecm.pyx issue as well. I think at least two other failures are linked to a single problem in scipy (optimize.py and list_plot3d.py) but I haven't been able to track that down yet, upgrading scipy to 0.10.1 doesn't solve the problem.",
    "created_at": "2012-04-11T21:59:32Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123417",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:94'></a>
I think we should split the libecm.pyx issue as well. I think at least two other failures are linked to a single problem in scipy (optimize.py and list_plot3d.py) but I haven't been able to track that down yet, upgrading scipy to 0.10.1 doesn't solve the problem.



---

archive/issue_comments_123418.json:
```json
{
    "body": "**Dependencies:** 12832",
    "created_at": "2012-04-11T23:30:30Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123418",
    "user": "https://github.com/kiwifb"
}
```

**Dependencies:** 12832



---

archive/issue_comments_123419.json:
```json
{
    "body": "<a id='comment:95'></a>\nscipy issues are now #12832",
    "created_at": "2012-04-11T23:30:30Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123419",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:95'></a>
scipy issues are now #12832



---

archive/issue_comments_123420.json:
```json
{
    "body": "<a id='comment:96'></a>\nspecial.py look like a serious maxima/ecl problem.\n\n```\nsage -t -long \"devel/sage/sage/functions/special.py\"        \n\n;;;\n;;; Stack overflow.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n\n;;;\n;;; Stack overflow.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.0.beta10/devel/sage/sage/functions/special.py\", line 1602:\n    sage: elliptic_f(RR(pi/2), 0.5)\nExpected:\n    1.8540746773\nGot:\n    sage165\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.0.beta10/devel/sage/sage/functions/special.py\", line 1611:\n    sage: elliptic_f(RR(pi/2), 0.5)\nExpected:\n    1.8540746773\nGot:\n    sage167\n**********************************************************************\n```",
    "created_at": "2012-04-11T23:43:23Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123420",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:96'></a>
special.py look like a serious maxima/ecl problem.

```
sage -t -long "devel/sage/sage/functions/special.py"        

;;;
;;; Stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;


;;;
;;; Stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;

**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.0.beta10/devel/sage/sage/functions/special.py", line 1602:
    sage: elliptic_f(RR(pi/2), 0.5)
Expected:
    1.8540746773
Got:
    sage165
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.0.beta10/devel/sage/sage/functions/special.py", line 1611:
    sage: elliptic_f(RR(pi/2), 0.5)
Expected:
    1.8540746773
Got:
    sage167
**********************************************************************
```



---

archive/issue_comments_123421.json:
```json
{
    "body": "<a id='comment:97'></a>\nsorry I was in vacation. Thank you Francois for reviewing #12829. Shouldn't it be in the\ndependencies of that ticket?\n\nPaul",
    "created_at": "2012-04-16T09:49:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123421",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:97'></a>
sorry I was in vacation. Thank you Francois for reviewing #12829. Shouldn't it be in the
dependencies of that ticket?

Paul



---

archive/issue_comments_123422.json:
```json
{
    "body": "**Changing dependencies** from \"12832\" to \"#12829, #12832\".",
    "created_at": "2012-04-16T10:01:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123422",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "12832" to "#12829, #12832".



---

archive/issue_comments_123423.json:
```json
{
    "body": "<a id='comment:99'></a>\nReplying to [zimmerma](#comment%3A86):\n> I tried configuring GMP-ECM with `-enable-assert`, nothing wrong happens.\n> I have no further idea to investigate. Any suggestion out there?\n> \n> Of course a possible workaround would be to configure with `--disable-asm-redc` on\n> powerpc64, but it would be nice to find the reason of this problem. Is there any other\n> powerpc on which we could test?\n> \n> What is strange is that the bug occurs **inside** libecm.a when called from within Sage,\n> and does not occur when called from the binary GMP-ECM (with the same libecm.a). Maybe a memory corruption related to the ecm_params structure which is not really defined in libecm.pyx?\n\n\nThe pyx just contains a type definition, and passes a null pointer to `ecm_factor()` instead of some structure.  Segfaults also happen outside of Sage; see below.\n\n\n\n\n> Is it possible to link libecm dynamically to Sage?\n\n\nOf course, you just have to build a shared library (`ECM_EXTRA_OPTS=\"--enable-shared\"`); see below.\n\n\n\n\n\nThis is IMHO an upstream (or probably compiler/assembler etc.) bug.\n\nNote that GMP-ECM's test suite segfaults in its first test when configured with `--enable-shared` (and asm-redc enabled, which is the default).  Same for a trivial stand-alone program just resembling Sage's doctest.\n\nThe segfaults vanish in both cases if I in addition pass `--disable-asm-redc`.  So Sage just exposes the problem, it doesn't cause it.\n\n[FWIW, Sage's `ecmfactor()` apparently works for even numbers, as well as interestingly 1025, while all other odd numbers between 950 and 1050 cause a segfault.]",
    "created_at": "2012-04-23T01:54:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123423",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:99'></a>
Replying to [zimmerma](#comment%3A86):
> I tried configuring GMP-ECM with `-enable-assert`, nothing wrong happens.
> I have no further idea to investigate. Any suggestion out there?
> 
> Of course a possible workaround would be to configure with `--disable-asm-redc` on
> powerpc64, but it would be nice to find the reason of this problem. Is there any other
> powerpc on which we could test?
> 
> What is strange is that the bug occurs **inside** libecm.a when called from within Sage,
> and does not occur when called from the binary GMP-ECM (with the same libecm.a). Maybe a memory corruption related to the ecm_params structure which is not really defined in libecm.pyx?


The pyx just contains a type definition, and passes a null pointer to `ecm_factor()` instead of some structure.  Segfaults also happen outside of Sage; see below.




> Is it possible to link libecm dynamically to Sage?


Of course, you just have to build a shared library (`ECM_EXTRA_OPTS="--enable-shared"`); see below.





This is IMHO an upstream (or probably compiler/assembler etc.) bug.

Note that GMP-ECM's test suite segfaults in its first test when configured with `--enable-shared` (and asm-redc enabled, which is the default).  Same for a trivial stand-alone program just resembling Sage's doctest.

The segfaults vanish in both cases if I in addition pass `--disable-asm-redc`.  So Sage just exposes the problem, it doesn't cause it.

[FWIW, Sage's `ecmfactor()` apparently works for even numbers, as well as interestingly 1025, while all other odd numbers between 950 and 1050 cause a segfault.]



---

archive/issue_comments_123424.json:
```json
{
    "body": "<a id='comment:0'></a>\nP.S.: Shooting into the dark, I'd say that the ppc64 redc assembler code simply isn't position-independent.",
    "created_at": "2012-04-23T02:03:48Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123424",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:0'></a>
P.S.: Shooting into the dark, I'd say that the ppc64 redc assembler code simply isn't position-independent.



---

archive/issue_comments_123425.json:
```json
{
    "body": "<a id='comment:1'></a>\nI've contacted Phil McLaughlin who is the author of the PowerPC64 code. It might be that he will need access to silius to investigate and possible fix the problem.\n\nPaul",
    "created_at": "2012-04-23T09:04:19Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123425",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:1'></a>
I've contacted Phil McLaughlin who is the author of the PowerPC64 code. It might be that he will need access to silius to investigate and possible fix the problem.

Paul



---

archive/issue_comments_123426.json:
```json
{
    "body": "<a id='comment:102'></a>\nReplying to [zimmerma](#comment%3A101):\n> I've contacted Phil McLaughlin who is the author of the PowerPC64 code. It might be that he will need access to silius to investigate and possible fix the problem.\n\n\n\nI'll also take a closer look at the asm code; it's probably just incompatible to the ppc64 ABI when linked dynamically.  Even `mulredc1()`, which only uses registers (besides storing the result into the `mp_limb_t` whose address is passed), segfaults.  (Or probably the calling function segfaults immediately after return).",
    "created_at": "2012-04-23T17:33:19Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123426",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:102'></a>
Replying to [zimmerma](#comment%3A101):
> I've contacted Phil McLaughlin who is the author of the PowerPC64 code. It might be that he will need access to silius to investigate and possible fix the problem.



I'll also take a closer look at the asm code; it's probably just incompatible to the ppc64 ABI when linked dynamically.  Even `mulredc1()`, which only uses registers (besides storing the result into the `mp_limb_t` whose address is passed), segfaults.  (Or probably the calling function segfaults immediately after return).



---

archive/issue_comments_123427.json:
```json
{
    "body": "<a id='comment:103'></a>\nReplying to [leif](#comment%3A102):\n> I'll also take a closer look at the asm code; it's probably just incompatible to the ppc64 ABI when linked dynamically.  \n\n\nThe assembly code cannot work with dynamic linking, as all of its functions lack function descriptors.\n\nI'll try to fix that tomorrow, although presumably not [yet] by an upstream-ready patch, as the `.asm` (`m4`) files are itself generated by `m4`, but normally not at build time.  Unfortunately also the real assembler (`.s`) files, which are generated from the `.asm` files, aren't kept, so it's impossible to (temporarily) patch these.",
    "created_at": "2012-04-24T04:42:25Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123427",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:103'></a>
Replying to [leif](#comment%3A102):
> I'll also take a closer look at the asm code; it's probably just incompatible to the ppc64 ABI when linked dynamically.  


The assembly code cannot work with dynamic linking, as all of its functions lack function descriptors.

I'll try to fix that tomorrow, although presumably not [yet] by an upstream-ready patch, as the `.asm` (`m4`) files are itself generated by `m4`, but normally not at build time.  Unfortunately also the real assembler (`.s`) files, which are generated from the `.asm` files, aren't kept, so it's impossible to (temporarily) patch these.



---

archive/issue_comments_123428.json:
```json
{
    "body": "<a id='comment:4'></a>\nLeif, if you make a patch for mulredc1.asm, maybe I could figure out what is needed in the m4\ngenerating file.\n\nPaul",
    "created_at": "2012-04-24T07:16:35Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123428",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:4'></a>
Leif, if you make a patch for mulredc1.asm, maybe I could figure out what is needed in the m4
generating file.

Paul



---

archive/issue_comments_123429.json:
```json
{
    "body": "Patch to GMP-ECM's PowerPC64 assembly[-generating] files to support dynamic linking (on ELF systems only).  For reference only.",
    "created_at": "2012-04-25T03:35:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123429",
    "user": "https://github.com/nexttime"
}
```

Patch to GMP-ECM's PowerPC64 assembly[-generating] files to support dynamic linking (on ELF systems only).  For reference only.



---

archive/attachments_015487.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "GMP-ECM_PPC64_ELF_function_descriptors.patch",
    "asset_url": "tarball://root/attachments/ticket11705/GMP-ECM_PPC64_ELF_function_descriptors.patch",
    "created_at": "2012-04-25T04:57:49Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket11705/GMP-ECM_PPC64_ELF_function_descriptors.patch",
    "user": "https://github.com/nexttime"
}
```



---

archive/issue_comments_123430.json:
```json
{
    "body": "<a id='comment:105'></a>\nAttachment [GMP-ECM_PPC64_ELF_function_descriptors.patch](https://github.com/sagemath/sage/files/ticket11705/GMP-ECM_PPC64_ELF_function_descriptors.patch) by @nexttime created at 2012-04-25 04:57:49\n\nReplying to [zimmerma](#comment%3A104):\n> Leif, if you make a patch for mulredc1.asm, maybe I could figure out what is needed in the m4\n> generating file.\n\n\nI've attached [a patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11705/GMP-ECM_PPC64_ELF_function_descriptors.patch) to the three `.asm` / `.m4` files all PPC64 assembly files are generated from.  (FWIW, also applies clean to GMP-ECM 6.4.2.)\n\nWhile the original files seem partially over-autoconf'd to me (e.g. `TEXT`, defined in `config.m4` after `configure`), I've currently \"hardcoded\" the ELF function descriptors, i.e., haven't used new macros for them at all.  Even if GMP-ECM currently only supports systems *using ELF* on PPC64 (I think; Darwin PPC is 32-bit, and `asm-redc` is disabled on it, although it IMHO wouldn't have to be), one could at least write some `m4` macros for [PowerPC] ELF![64] for convenience and put them into (e.g.) `powerpc64/elf.m4`, then probably only \"enable\" them if `configure` determines it's an ELF system.  (I didn't want to mess with the `autoconf` files anyway.)\n\nOne could also add some debugging info to the functions, i.e. traceback tables.\n\nI haven't changed the broken indentation of `redc.asm`, to keep the patch small and readable.\n\n\n\n\nA preliminary GMP-ECM 6.3.p8 spkg (applying my patches) is [here](http://boxen.math.washington.edu/home/leif/Sage/spkgs/ecm-6.3.p8.spkg).  Note that it is based on the p7 from #12830, which still needs review.\n\n### Patches\n* ...\n* mulredc.m4.patch, mulredc_1_2.m4.patch:\n  Add function descriptors to PPC64 assembler code to support dynamic linking.\n  (Even with a static `libecm.a`, Sage segfaulted with `--enable-asm-redc` on\n  Linux PPC64, because the [static] GMP-ECM library gets linked into a shared\n  library, namely the Python extension module \"libecm\".)\n  We patch the two `m4` files the twenty `.asm` files (in `src/powerpc64/`)\n  are generated from; the latter are again macroprocessor files from which the\n  (only temporary) real assembly files ( `.s`) are created during build.\n* redc.asm.patch:\n  Also add a function descriptor here, although apparently this code isn't\n  used by Sage, nor GMP-ECM's test suite, at least not currently (as of\n  GMP-ECM 6.3 / ecm-6.3.p8).  (The function it provides is `ecm_redc3()`.)\n\n\n### ecm-6.3.p8 (Leif Leonhardy, April 24th 2012)\n* #12830: Add patches to `src/powerpc64/{mulredc,mulredc_1_2}.m4` to support\n  dynamic linking, otherwise the Python extension module \"libecm\" segfaults\n  with `--enable-asm-redc` on [Linux] PPC64, regardless of whether we build a\n  shared and/or static GMP-ECM library.\n  For consistency, also patch `src/powerpc64/redc.asm` in the same way, al-\n  though it doesn't seem that this code was currently used.\n  (See also the Linux PPC64 meta-ticket #11705.)\n\n\nI've only tested it on Silius, with `--enable-shared` and `--disable-shared` (`--enable-asm-redc` is the default), with Sage 5.0.beta9 (plus some replacement spkgs and #12829) and GCC 4.6.3, FWIW.\n\nPerhaps Fran\u00e7ois could test the attached patch with vanilla GMP-ECM on AIX.",
    "created_at": "2012-04-25T04:57:49Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123430",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:105'></a>
Attachment [GMP-ECM_PPC64_ELF_function_descriptors.patch](https://github.com/sagemath/sage/files/ticket11705/GMP-ECM_PPC64_ELF_function_descriptors.patch) by @nexttime created at 2012-04-25 04:57:49

Replying to [zimmerma](#comment%3A104):
> Leif, if you make a patch for mulredc1.asm, maybe I could figure out what is needed in the m4
> generating file.


I've attached [a patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11705/GMP-ECM_PPC64_ELF_function_descriptors.patch) to the three `.asm` / `.m4` files all PPC64 assembly files are generated from.  (FWIW, also applies clean to GMP-ECM 6.4.2.)

While the original files seem partially over-autoconf'd to me (e.g. `TEXT`, defined in `config.m4` after `configure`), I've currently "hardcoded" the ELF function descriptors, i.e., haven't used new macros for them at all.  Even if GMP-ECM currently only supports systems *using ELF* on PPC64 (I think; Darwin PPC is 32-bit, and `asm-redc` is disabled on it, although it IMHO wouldn't have to be), one could at least write some `m4` macros for [PowerPC] ELF![64] for convenience and put them into (e.g.) `powerpc64/elf.m4`, then probably only "enable" them if `configure` determines it's an ELF system.  (I didn't want to mess with the `autoconf` files anyway.)

One could also add some debugging info to the functions, i.e. traceback tables.

I haven't changed the broken indentation of `redc.asm`, to keep the patch small and readable.




A preliminary GMP-ECM 6.3.p8 spkg (applying my patches) is [here](http://boxen.math.washington.edu/home/leif/Sage/spkgs/ecm-6.3.p8.spkg).  Note that it is based on the p7 from #12830, which still needs review.

### Patches
* ...
* mulredc.m4.patch, mulredc_1_2.m4.patch:
  Add function descriptors to PPC64 assembler code to support dynamic linking.
  (Even with a static `libecm.a`, Sage segfaulted with `--enable-asm-redc` on
  Linux PPC64, because the [static] GMP-ECM library gets linked into a shared
  library, namely the Python extension module "libecm".)
  We patch the two `m4` files the twenty `.asm` files (in `src/powerpc64/`)
  are generated from; the latter are again macroprocessor files from which the
  (only temporary) real assembly files ( `.s`) are created during build.
* redc.asm.patch:
  Also add a function descriptor here, although apparently this code isn't
  used by Sage, nor GMP-ECM's test suite, at least not currently (as of
  GMP-ECM 6.3 / ecm-6.3.p8).  (The function it provides is `ecm_redc3()`.)


### ecm-6.3.p8 (Leif Leonhardy, April 24th 2012)
* #12830: Add patches to `src/powerpc64/{mulredc,mulredc_1_2}.m4` to support
  dynamic linking, otherwise the Python extension module "libecm" segfaults
  with `--enable-asm-redc` on [Linux] PPC64, regardless of whether we build a
  shared and/or static GMP-ECM library.
  For consistency, also patch `src/powerpc64/redc.asm` in the same way, al-
  though it doesn't seem that this code was currently used.
  (See also the Linux PPC64 meta-ticket #11705.)


I've only tested it on Silius, with `--enable-shared` and `--disable-shared` (`--enable-asm-redc` is the default), with Sage 5.0.beta9 (plus some replacement spkgs and #12829) and GCC 4.6.3, FWIW.

Perhaps Fran√ßois could test the attached patch with vanilla GMP-ECM on AIX.



---

archive/issue_comments_123431.json:
```json
{
    "body": "<a id='comment:6'></a>\nLeif, thank you very much for your patch. I have incorporated it to the development version,\nwhere it applies cleanly. I have checked that both --enable-shared and --disable-shared work on silius.\n\nPaul",
    "created_at": "2012-04-25T08:09:23Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123431",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:6'></a>
Leif, thank you very much for your patch. I have incorporated it to the development version,
where it applies cleanly. I have checked that both --enable-shared and --disable-shared work on silius.

Paul



---

archive/issue_comments_123432.json:
```json
{
    "body": "<a id='comment:107'></a>\nReplying to [leif](#comment%3A105):\n> While the original files seem partially over-autoconf'd to me (e.g. `TEXT`, defined in `config.m4` after `configure`), I've currently \"hardcoded\" the ELF function descriptors, i.e., haven't used new macros for them at all.  Even if GMP-ECM currently only supports systems *using ELF* on PPC64 (I think; Darwin PPC is 32-bit, and `asm-redc` is disabled on it, although it IMHO wouldn't have to be), one could at least write some `m4` macros for [PowerPC] ELF![64] for convenience and put them into (e.g.) `powerpc64/elf.m4`, then probably only \"enable\" them if `configure` determines it's an ELF system.  (I didn't want to mess with the `autoconf` files anyway.)\n\n\nPatching `configure`[`.in`] to also include `powerpc64/elf.m4` if appropriate is trivial, so I'll probably add that, too.  (And write [slightly corrected] `PROLOG()` / `EPILOG()` macros.)\n\n> One could also add some debugging info to the functions, i.e. traceback tables.\n\n\n[Planned.]\n\n\n\n\n> Perhaps Fran\u00e7ois could test the attached patch with vanilla GMP-ECM on AIX.\n\n\nReading `configure.in` (of GMP-ECM 6.4.2), I see that `asm-redc` for PPC64 is currently only supported *on Linux* anyway, so testing it on AIX doesn't make sense.  (On AIX, it isn't enabled by default, and explicitly enabling it will just raise a `configure` error, so that's fine [for now].)",
    "created_at": "2012-04-26T13:43:53Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123432",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:107'></a>
Replying to [leif](#comment%3A105):
> While the original files seem partially over-autoconf'd to me (e.g. `TEXT`, defined in `config.m4` after `configure`), I've currently "hardcoded" the ELF function descriptors, i.e., haven't used new macros for them at all.  Even if GMP-ECM currently only supports systems *using ELF* on PPC64 (I think; Darwin PPC is 32-bit, and `asm-redc` is disabled on it, although it IMHO wouldn't have to be), one could at least write some `m4` macros for [PowerPC] ELF![64] for convenience and put them into (e.g.) `powerpc64/elf.m4`, then probably only "enable" them if `configure` determines it's an ELF system.  (I didn't want to mess with the `autoconf` files anyway.)


Patching `configure`[`.in`] to also include `powerpc64/elf.m4` if appropriate is trivial, so I'll probably add that, too.  (And write [slightly corrected] `PROLOG()` / `EPILOG()` macros.)

> One could also add some debugging info to the functions, i.e. traceback tables.


[Planned.]




> Perhaps Fran√ßois could test the attached patch with vanilla GMP-ECM on AIX.


Reading `configure.in` (of GMP-ECM 6.4.2), I see that `asm-redc` for PPC64 is currently only supported *on Linux* anyway, so testing it on AIX doesn't make sense.  (On AIX, it isn't enabled by default, and explicitly enabling it will just raise a `configure` error, so that's fine [for now].)



---

archive/issue_comments_123433.json:
```json
{
    "body": "<a id='comment:8'></a>\nI'll be completely cut off the internet until the end of the month so I won't be able to test anything until then. I won't even be able to read emails for a while.",
    "created_at": "2012-05-02T01:51:30Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123433",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
I'll be completely cut off the internet until the end of the month so I won't be able to test anything until then. I won't even be able to read emails for a while.



---

archive/issue_comments_123434.json:
```json
{
    "body": "<a id='comment:9'></a>\ndid someone test sage-5.0.rc1 on silius, to see which doctests still fail?\n\nPaul",
    "created_at": "2012-05-11T15:42:46Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123434",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:9'></a>
did someone test sage-5.0.rc1 on silius, to see which doctests still fail?

Paul



---

archive/issue_comments_123435.json:
```json
{
    "body": "<a id='comment:0'></a>\nWhat's in the ticket description is still current.",
    "created_at": "2012-05-12T21:37:49Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123435",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:0'></a>
What's in the ticket description is still current.



---

archive/issue_comments_123436.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,16 +1,11 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n \n-sage-5.0.beta13 **builds** on this machine, but there are *many* test failures.\n-\n-Most of these failures are due to:\n-* #12829: Remove `<object>` cast in real_mpfi.pyx\n-\n-After applying that ticket, the remaining failures are:\n+sage-5.0 **builds** on this machine, but there are a few test failures:\n \n ```\n-        sage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed\n-        sage -t  --long -force_lib devel/sage/sage/libs/libecm.pyx # Killed/crashed\n-        sage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed\n-        sage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed\n-        sage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed\n+\tsage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed\n+\tsage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed\n+\tsage -t  --long -force_lib devel/sage/sage/libs/libecm.pyx # 10 doctests failed\n+\tsage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed\n+\tsage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed\n ```\n``````\n",
    "created_at": "2012-05-23T21:43:06Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123436",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,16 +1,11 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
 
-sage-5.0.beta13 **builds** on this machine, but there are *many* test failures.
-
-Most of these failures are due to:
-* #12829: Remove `<object>` cast in real_mpfi.pyx
-
-After applying that ticket, the remaining failures are:
+sage-5.0 **builds** on this machine, but there are a few test failures:
 
 ```
-        sage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed
-        sage -t  --long -force_lib devel/sage/sage/libs/libecm.pyx # Killed/crashed
-        sage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed
-        sage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed
-        sage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed
+	sage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed
+	sage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed
+	sage -t  --long -force_lib devel/sage/sage/libs/libecm.pyx # 10 doctests failed
+	sage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed
+	sage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed
 ```
``````




---

archive/issue_comments_123437.json:
```json
{
    "body": "<a id='comment:2'></a>\nI did a test build and run of 5.1beta5 yesterday, with gcc-4.6.3 shipped with sage. There doctests failures in 4 files at this stage:\n\n```\nThe following tests failed:\n\n        sage -t -long  -force_lib devel/sage/sage/functions/special.py # 2 doctests failed\n        sage -t -long  -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed\n        sage -t -long  -force_lib devel/sage/sage/libs/libecm.pyx # 7 doctests failed\n        sage -t -long  -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed\n```\nWhich I guess is fairly good and down from before the 5.0 release. I guess I should test an updated GMP-ECM next.",
    "created_at": "2012-06-25T03:36:58Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123437",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'></a>
I did a test build and run of 5.1beta5 yesterday, with gcc-4.6.3 shipped with sage. There doctests failures in 4 files at this stage:

```
The following tests failed:

        sage -t -long  -force_lib devel/sage/sage/functions/special.py # 2 doctests failed
        sage -t -long  -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed
        sage -t -long  -force_lib devel/sage/sage/libs/libecm.pyx # 7 doctests failed
        sage -t -long  -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed
```
Which I guess is fairly good and down from before the 5.0 release. I guess I should test an updated GMP-ECM next.



---

archive/issue_comments_123438.json:
```json
{
    "body": "<a id='comment:113'></a>\nReplying to [fbissey](#comment%3A112):\n> Which I [...] down from before the 5.0 release.\n\nAre you sure, because I still get the 5 failures mentioned in the ticket description on Skynet silius.",
    "created_at": "2012-06-25T06:32:17Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123438",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:113'></a>
Replying to [fbissey](#comment%3A112):
> Which I [...] down from before the 5.0 release.

Are you sure, because I still get the 5 failures mentioned in the ticket description on Skynet silius.



---

archive/issue_comments_123439.json:
```json
{
    "body": "<a id='comment:114'></a>\nReplying to [jdemeyer](#comment%3A113):\n> Replying to [fbissey](#comment%3A112):\n> > Which I [...] down from before the 5.0 release.\n\n> Are you sure, because I still get the 5 failures mentioned in the ticket description on Skynet silius.\n\nThat's very curious. I didn't have it in my doctest run. I must have done it wrong. The cvxopt does indeed still fail.",
    "created_at": "2012-06-25T09:03:14Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123439",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:114'></a>
Replying to [jdemeyer](#comment%3A113):
> Replying to [fbissey](#comment%3A112):
> > Which I [...] down from before the 5.0 release.

> Are you sure, because I still get the 5 failures mentioned in the ticket description on Skynet silius.

That's very curious. I didn't have it in my doctest run. I must have done it wrong. The cvxopt does indeed still fail.



---

archive/issue_comments_123440.json:
```json
{
    "body": "<a id='comment:5'></a>\nSage's cvxopt spkg sucks. It's way overlinked everywhere. It probably won't help much with the tests but I will do experiments to bring it 1.1.5 and clean that mess.",
    "created_at": "2012-06-25T09:33:51Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123440",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
Sage's cvxopt spkg sucks. It's way overlinked everywhere. It probably won't help much with the tests but I will do experiments to bring it 1.1.5 and clean that mess.



---

archive/issue_comments_123441.json:
```json
{
    "body": "<a id='comment:6'></a>\nLooking at special.py tests\n\n```\nsage: elliptic_kc(0.5)\n1.8540746773\nsage: elliptic_f(RR(pi/2), 0.5)\nelliptic_f(1.57079632679490, 0.500000000000000)\nsage: elliptic_f(1.57079632679490, 0.500000000000000)\n1.8540746773\n```\nSo in effect elliptic_f is not evaluated straight away on power7.",
    "created_at": "2012-06-26T10:26:26Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123441",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'></a>
Looking at special.py tests

```
sage: elliptic_kc(0.5)
1.8540746773
sage: elliptic_f(RR(pi/2), 0.5)
elliptic_f(1.57079632679490, 0.500000000000000)
sage: elliptic_f(1.57079632679490, 0.500000000000000)
1.8540746773
```
So in effect elliptic_f is not evaluated straight away on power7.



---

archive/issue_comments_123442.json:
```json
{
    "body": "<a id='comment:7'></a>\nJust a note, it may not be power7 specific. I am building a debug version of sage with SAGE_DEBUG=yes and polybori-0.8.1.p0 compilation broke. So far that's the only thing that failed to build with SAGE_DEBUG.",
    "created_at": "2012-06-29T03:47:22Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123442",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
Just a note, it may not be power7 specific. I am building a debug version of sage with SAGE_DEBUG=yes and polybori-0.8.1.p0 compilation broke. So far that's the only thing that failed to build with SAGE_DEBUG.



---

archive/issue_comments_123443.json:
```json
{
    "body": "<a id='comment:8'></a>\nWell, that was a long time to do anything. I have just build 5.7.beta3 + numpy-1.7. Apart from the expected stuff from numpy we have the same doctest files failing. But the number has gone down for two of them:\n\n```\nsage -t -long devel/sage-main/sage/libs/libecm.pyx # 7 doctests failed [was 10]\nsage -t -long devel/sage-main/sage/numerical/optimize.py # 2 doctests failed [was 6]\n```\nNow that we have a killer debugging system in place things may get interesting.",
    "created_at": "2013-02-11T08:43:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123443",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
Well, that was a long time to do anything. I have just build 5.7.beta3 + numpy-1.7. Apart from the expected stuff from numpy we have the same doctest files failing. But the number has gone down for two of them:

```
sage -t -long devel/sage-main/sage/libs/libecm.pyx # 7 doctests failed [was 10]
sage -t -long devel/sage-main/sage/numerical/optimize.py # 2 doctests failed [was 6]
```
Now that we have a killer debugging system in place things may get interesting.



---

archive/issue_comments_123444.json:
```json
{
    "body": "<a id='comment:9'></a>\nI unfortunately no longer have access to a ppc64 system. Is anybody willing to donate access to such a machine for the Sage buildbot?",
    "created_at": "2013-02-11T09:01:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123444",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
I unfortunately no longer have access to a ppc64 system. Is anybody willing to donate access to such a machine for the Sage buildbot?



---

archive/issue_comments_123445.json:
```json
{
    "body": "<a id='comment:0'></a>\nI cannot donate unfortunately - not without losing my job. What happened to silius?",
    "created_at": "2013-02-11T09:06:00Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123445",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:0'></a>
I cannot donate unfortunately - not without losing my job. What happened to silius?



---

archive/issue_comments_123446.json:
```json
{
    "body": "<a id='comment:121'></a>\nReplying to [fbissey](#comment%3A120):\n> What happened to silius?\n\nIt has been down for a while, that's all I know.",
    "created_at": "2013-02-11T09:09:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123446",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:121'></a>
Replying to [fbissey](#comment%3A120):
> What happened to silius?

It has been down for a while, that's all I know.



---

archive/issue_comments_123447.json:
```json
{
    "body": "<a id='comment:2'></a>\nFrancois, for libecm, did you apply the patch to allow dynamic linking with assembly files?\n\nI could try to help with libecm.pyx if you provide a detailed output of the libecm failures.\n\nPaul",
    "created_at": "2013-02-11T09:18:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123447",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:2'></a>
Francois, for libecm, did you apply the patch to allow dynamic linking with assembly files?

I could try to help with libecm.pyx if you provide a detailed output of the libecm failures.

Paul



---

archive/issue_comments_123448.json:
```json
{
    "body": "<a id='comment:123'></a>\nReplying to [jdemeyer](#comment%3A121):\n> Replying to [fbissey](#comment%3A120):\n> > What happened to silius?\n\n> It has been down for a while, that's all I know.\n\nI could possibly donate expertise to bring it back up depending on whether it can be dealt with remotely or not. But I would need more details on the way it is administered, I doubt there is an HMC or an xcat server for just one node.",
    "created_at": "2013-02-11T09:23:25Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123448",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:123'></a>
Replying to [jdemeyer](#comment%3A121):
> Replying to [fbissey](#comment%3A120):
> > What happened to silius?

> It has been down for a while, that's all I know.

I could possibly donate expertise to bring it back up depending on whether it can be dealt with remotely or not. But I would need more details on the way it is administered, I doubt there is an HMC or an xcat server for just one node.



---

archive/issue_comments_123449.json:
```json
{
    "body": "<a id='comment:124'></a>\nReplying to [zimmerma](#comment%3A122):\n> Francois, for libecm, did you apply the patch to allow dynamic linking with assembly files?\n> \n> I could try to help with libecm.pyx if you provide a detailed output of the libecm failures.\n> \n\n\nHi Paul,\n\nHaven't tried yet and I certainly can provide detailed output and backtraces. I have just started a 5.7beta4 with SAGE_DEBUG. On beta3 we have this kind of failures currently:\n\n```\nsage -t -long \"devel/sage-main/sage/libs/libecm.pyx\"        \n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx\", line 18:\n    sage: result = ecmfactor(999, 0.00)\nException raised:\n    Traceback (most recent call last):\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[3]>\", line 1, in <module>\n        result = ecmfactor(Integer(999), RealNumber('0.00'))###line 18:\n    sage: result = ecmfactor(999, 0.00)\n      File \"libecm.pyx\", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)\n    RuntimeError: Segmentation fault\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx\", line 19:\n    sage: result in [(True, 27), (True, 37), (True, 999)]\nException raised:\n    Traceback (most recent call last):\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[4]>\", line 1, in <module>\n        result in [(True, Integer(27)), (True, Integer(37)), (True, Integer(999))]###line 19:\n    sage: result in [(True, 27), (True, 37), (True, 999)]\n    NameError: name 'result' is not defined\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx\", line 21:\n    sage: result = ecmfactor(999, 0.00, verbose=True)\nException raised:\n    Traceback (most recent call last):\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[5]>\", line 1, in <module>\n        result = ecmfactor(Integer(999), RealNumber('0.00'), verbose=True)###line 21:\n    sage: result = ecmfactor(999, 0.00, verbose=True)\n      File \"libecm.pyx\", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)\n    RuntimeError: Segmentation fault\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx\", line 24:\n    sage: result in [(True, 27), (True, 37), (True, 999)]\nException raised:\n    Traceback (most recent call last):\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[6]>\", line 1, in <module>\n        result in [(True, Integer(27)), (True, Integer(37)), (True, Integer(999))]###line 24:\n    sage: result in [(True, 27), (True, 37), (True, 999)]\n    NameError: name 'result' is not defined\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx\", line 108:\n    sage: ecmfactor(N, 100, verbose=True)\nException raised:\n    Traceback (most recent call last):\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[15]>\", line 1, in <module>\n        ecmfactor(N, Integer(100), verbose=True)###line 108:\n    sage: ecmfactor(N, 100, verbose=True)\n      File \"libecm.pyx\", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)\n    RuntimeError: Segmentation fault\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx\", line 112:\n    sage: ecmfactor(N/11, 100, verbose=True)\nException raised:\n    Traceback (most recent call last):\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[16]>\", line 1, in <module>\n        ecmfactor(N/Integer(11), Integer(100), verbose=True)###line 112:\n    sage: ecmfactor(N/11, 100, verbose=True)\n      File \"libecm.pyx\", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)\n    RuntimeError: Segmentation fault\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx\", line 132:\n    sage: ecmfactor(1, 100)\nException raised:\n    Traceback (most recent call last):\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[19]>\", line 1, in <module>\n        ecmfactor(Integer(1), Integer(100))###line 132:\n    sage: ecmfactor(1, 100)\n      File \"libecm.pyx\", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)\n    RuntimeError: Segmentation fault\n**********************************************************************\n```",
    "created_at": "2013-02-11T09:29:41Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123449",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:124'></a>
Replying to [zimmerma](#comment%3A122):
> Francois, for libecm, did you apply the patch to allow dynamic linking with assembly files?
> 
> I could try to help with libecm.pyx if you provide a detailed output of the libecm failures.
> 


Hi Paul,

Haven't tried yet and I certainly can provide detailed output and backtraces. I have just started a 5.7beta4 with SAGE_DEBUG. On beta3 we have this kind of failures currently:

```
sage -t -long "devel/sage-main/sage/libs/libecm.pyx"        
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx", line 18:
    sage: result = ecmfactor(999, 0.00)
Exception raised:
    Traceback (most recent call last):
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[3]>", line 1, in <module>
        result = ecmfactor(Integer(999), RealNumber('0.00'))###line 18:
    sage: result = ecmfactor(999, 0.00)
      File "libecm.pyx", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)
    RuntimeError: Segmentation fault
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx", line 19:
    sage: result in [(True, 27), (True, 37), (True, 999)]
Exception raised:
    Traceback (most recent call last):
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[4]>", line 1, in <module>
        result in [(True, Integer(27)), (True, Integer(37)), (True, Integer(999))]###line 19:
    sage: result in [(True, 27), (True, 37), (True, 999)]
    NameError: name 'result' is not defined
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx", line 21:
    sage: result = ecmfactor(999, 0.00, verbose=True)
Exception raised:
    Traceback (most recent call last):
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[5]>", line 1, in <module>
        result = ecmfactor(Integer(999), RealNumber('0.00'), verbose=True)###line 21:
    sage: result = ecmfactor(999, 0.00, verbose=True)
      File "libecm.pyx", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)
    RuntimeError: Segmentation fault
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx", line 24:
    sage: result in [(True, 27), (True, 37), (True, 999)]
Exception raised:
    Traceback (most recent call last):
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[6]>", line 1, in <module>
        result in [(True, Integer(27)), (True, Integer(37)), (True, Integer(999))]###line 24:
    sage: result in [(True, 27), (True, 37), (True, 999)]
    NameError: name 'result' is not defined
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx", line 108:
    sage: ecmfactor(N, 100, verbose=True)
Exception raised:
    Traceback (most recent call last):
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[15]>", line 1, in <module>
        ecmfactor(N, Integer(100), verbose=True)###line 108:
    sage: ecmfactor(N, 100, verbose=True)
      File "libecm.pyx", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)
    RuntimeError: Segmentation fault
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx", line 112:
    sage: ecmfactor(N/11, 100, verbose=True)
Exception raised:
    Traceback (most recent call last):
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[16]>", line 1, in <module>
        ecmfactor(N/Integer(11), Integer(100), verbose=True)###line 112:
    sage: ecmfactor(N/11, 100, verbose=True)
      File "libecm.pyx", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)
    RuntimeError: Segmentation fault
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/devel/sage-main/sage/libs/libecm.pyx", line 132:
    sage: ecmfactor(1, 100)
Exception raised:
    Traceback (most recent call last):
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/hpc/scratch/frb15/sandbox/sage-5.7.beta3-NDEBUG/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[19]>", line 1, in <module>
        ecmfactor(Integer(1), Integer(100))###line 132:
    sage: ecmfactor(1, 100)
      File "libecm.pyx", line 152, in sage.libs.libecm.ecmfactor (sage/libs/libecm.c:2015)
    RuntimeError: Segmentation fault
**********************************************************************
```



---

archive/issue_comments_123450.json:
```json
{
    "body": "<a id='comment:5'></a>\nI'm asking William about `silius`.",
    "created_at": "2013-02-11T09:32:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123450",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
I'm asking William about `silius`.



---

archive/issue_comments_123451.json:
```json
{
    "body": "<a id='comment:6'></a>\nwith the attached patch, the libecm issues should disappear.\n\nPaul",
    "created_at": "2013-02-11T10:26:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123451",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:6'></a>
with the attached patch, the libecm issues should disappear.

Paul



---

archive/issue_comments_123452.json:
```json
{
    "body": "<a id='comment:7'></a>\nI have an unexpected development at #14098 SAGE_DEBUG=yes seems to imply that tests are run on most spkg and zn_poly died an horrible death.",
    "created_at": "2013-02-11T20:23:42Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123452",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
I have an unexpected development at #14098 SAGE_DEBUG=yes seems to imply that tests are run on most spkg and zn_poly died an horrible death.



---

archive/issue_comments_123453.json:
```json
{
    "body": "<a id='comment:8'></a>\nAH reading spkg-install it doesn't imply testing of all spkg this one has a quick test suite that always run. And it didn't fail in beta3 without debug and now fails in beta4 with debug.",
    "created_at": "2013-02-11T20:30:56Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123453",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
AH reading spkg-install it doesn't imply testing of all spkg this one has a quick test suite that always run. And it didn't fail in beta3 without debug and now fails in beta4 with debug.



---

archive/issue_comments_123454.json:
```json
{
    "body": "<a id='comment:129'></a>\nReplying to [zimmerma](#comment%3A126):\n> with the attached patch, the libecm issues should disappear.\n> \n\n\n\n```\nfrb15@p2n14-c /hpc/scratch/frb15/sandbox/sage-5.7.beta4 :./sage -t -long \"devel/sage-main/sage/libs/libecm.pyx\"      \nsage -t -long \"devel/sage-main/sage/libs/libecm.pyx\"        \n         [10.8 s]\n \n----------------------------------------------------------------------\nAll tests passed!\n```\nNow that's a good patch!",
    "created_at": "2013-02-12T08:36:12Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123454",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:129'></a>
Replying to [zimmerma](#comment%3A126):
> with the attached patch, the libecm issues should disappear.
> 



```
frb15@p2n14-c /hpc/scratch/frb15/sandbox/sage-5.7.beta4 :./sage -t -long "devel/sage-main/sage/libs/libecm.pyx"      
sage -t -long "devel/sage-main/sage/libs/libecm.pyx"        
         [10.8 s]
 
----------------------------------------------------------------------
All tests passed!
```
Now that's a good patch!



---

archive/issue_comments_123455.json:
```json
{
    "body": "<a id='comment:0'></a>\nFrancois, please could you update the ticket description with the current status?\n\nPaul",
    "created_at": "2013-02-12T08:51:55Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123455",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:0'></a>
Francois, please could you update the ticket description with the current status?

Paul



---

archive/issue_comments_123456.json:
```json
{
    "body": "<a id='comment:1'></a>\nOK done. I am trying to figure out cvxopt problems again. I will split up the ecm issue since we have a fix. Is the fix included in newer ecm? sage is a bit behind it could be an opportunity to upgrade. I know that 6.4.2 compiles fine under linux and works with sage without changes - doesn't compile in my gentoo prefix on my imac core2 duo but I suspect the problem is the compiler.",
    "created_at": "2013-02-12T09:02:35Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123456",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>
OK done. I am trying to figure out cvxopt problems again. I will split up the ecm issue since we have a fix. Is the fix included in newer ecm? sage is a bit behind it could be an opportunity to upgrade. I know that 6.4.2 compiles fine under linux and works with sage without changes - doesn't compile in my gentoo prefix on my imac core2 duo but I suspect the problem is the compiler.



---

archive/issue_comments_123457.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,11 +1,11 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n \n-sage-5.0 **builds** on this machine, but there are a few test failures:\n+sage-5.7beta4 **builds** on this machine, but there are a few test failures:\n \n ```\n \tsage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed\n \tsage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed\n-\tsage -t  --long -force_lib devel/sage/sage/libs/libecm.pyx # 10 doctests failed\n-\tsage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed\n+\tsage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 2 doctests failed\n \tsage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed\n ```\n+The patch attached solve failures in sage/libs/libecm.pyx when applied to the ecm spkg.\n``````\n",
    "created_at": "2013-02-12T09:02:35Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123457",
    "user": "https://github.com/kiwifb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,11 +1,11 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
 
-sage-5.0 **builds** on this machine, but there are a few test failures:
+sage-5.7beta4 **builds** on this machine, but there are a few test failures:
 
 ```
 	sage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed
 	sage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed
-	sage -t  --long -force_lib devel/sage/sage/libs/libecm.pyx # 10 doctests failed
-	sage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 6 doctests failed
+	sage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 2 doctests failed
 	sage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed
 ```
+The patch attached solve failures in sage/libs/libecm.pyx when applied to the ecm spkg.
``````




---

archive/issue_comments_123458.json:
```json
{
    "body": "**Changing dependencies** from \"#12829, #12832\" to \"#12829, #12832, #14098\".",
    "created_at": "2013-02-12T09:18:30Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123458",
    "user": "https://github.com/kiwifb"
}
```

**Changing dependencies** from "#12829, #12832" to "#12829, #12832, #14098".



---

archive/issue_comments_123459.json:
```json
{
    "body": "<a id='comment:3'></a>\nFrancois, the ecm patch is not yet included in the last release 6.4.3. I'll see if we can make\na new release of GMP-ECM.\n\nPaul",
    "created_at": "2013-02-12T09:23:08Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123459",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:3'></a>
Francois, the ecm patch is not yet included in the last release 6.4.3. I'll see if we can make
a new release of GMP-ECM.

Paul



---

archive/issue_comments_123460.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,5 @@\n \tsage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed\n \tsage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed\n \tsage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 2 doctests failed\n-\tsage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed\n ```\n The patch attached solve failures in sage/libs/libecm.pyx when applied to the ecm spkg.\n``````\n",
    "created_at": "2013-02-12T09:31:33Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123460",
    "user": "https://github.com/kiwifb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,5 @@
 	sage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed
 	sage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed
 	sage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 2 doctests failed
-	sage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py # 4 doctests failed
 ```
 The patch attached solve failures in sage/libs/libecm.pyx when applied to the ecm spkg.
``````




---

archive/issue_comments_123461.json:
```json
{
    "body": "<a id='comment:4'></a>\nOK that's cool. In the mean time I'll do a new run o doctesting - I haven't done a full one on that build yet I had limited myself to key tests. And I have just found:\n\n```\nfrb15@p2n14-c /hpc/scratch/frb15/sandbox/sage-5.7.beta4 :./sage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py\nsage -t --long -force_lib \"devel/sage/sage/plot/plot3d/list_plot3d.py\"\n         [16.4 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 16.6 seconds\n```\nSo somehow this one got fixed. I had misread the test results from beta3+numpy-1.7. So updating description again.",
    "created_at": "2013-02-12T09:31:33Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123461",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>
OK that's cool. In the mean time I'll do a new run o doctesting - I haven't done a full one on that build yet I had limited myself to key tests. And I have just found:

```
frb15@p2n14-c /hpc/scratch/frb15/sandbox/sage-5.7.beta4 :./sage -t  --long -force_lib devel/sage/sage/plot/plot3d/list_plot3d.py
sage -t --long -force_lib "devel/sage/sage/plot/plot3d/list_plot3d.py"
         [16.4 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 16.6 seconds
```
So somehow this one got fixed. I had misread the test results from beta3+numpy-1.7. So updating description again.



---

archive/issue_comments_123462.json:
```json
{
    "body": "<a id='comment:5'></a>\nFrancois, if you give a detailed output of the failures maybe we can give some hint.\n\nPaul",
    "created_at": "2013-02-12T09:37:04Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123462",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:5'></a>
Francois, if you give a detailed output of the failures maybe we can give some hint.

Paul



---

archive/issue_comments_123463.json:
```json
{
    "body": "<a id='comment:6'></a>\nThat's repeating from earlier comments but this is now a long thread:\n\n```\n./sage -t  --long -force_lib devel/sage/sage/functions/special.py\nsage -t --long -force_lib \"devel/sage/sage/functions/special.py\"\n\n;;;\n;;; Stack overflow.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage/sage/functions/special.py\", line 1614:\n    sage: elliptic_f(RR(pi/2), 0.5)\nExpected:\n    1.8540746773\nGot:\n    sage165\n;;;\n;;; Stack overflow.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage/sage/functions/special.py\", line 1623:\n    sage: elliptic_f(RR(pi/2), 0.5)\nExpected:\n    1.8540746773\nGot:\n    sage167\n**********************************************************************\n2 items had failures:\n   1 of   5 in __main__.example_44\n   1 of   5 in __main__.example_45\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /hpc/home/frb15/.sage//tmp/special_36988.py\n         [31.9 s]\n \n----------------------------------------------------------------------\n```\nA maxima/ecl problem, I'll try to get more details so we can forward this to the ecl people (or maxima but I suspect the fault is in ecl).\n\n```\nsage -t --long -force_lib \"devel/sage/doc/en/numerical_sage/cvxopt.rst\"\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage/doc/en/numerical_sage/cvxopt.rst\", line 129:\n    sage: print sol['x']      # ... below since can get -00 or +00 depending on architecture\nExpected:\n    [ 1.00e...00]\n    [ 1.00e+00]\nGot:\n    [ 9.87e-01]\n    [ 9.92e-01]\n    <BLANKLINE>\n**********************************************************************\n```\ncould be considered noise, but it is of a worrying kind especially when combined with the next one:\n\n```\nsage -t -long \"devel/sage-main/sage/numerical/optimize.py\"  \n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage-main/sage/numerical/optimize.py\", line 515:\n    sage: sol['x']\nExpected:\n    (0.999..., 1.000...)\nGot nothing\n**********************************************************************\nFile \"/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage-main/sage/numerical/optimize.py\", line 525:\n    sage: sol['x']\nExpected:\n    (45.000000..., 6.2499999...3, 1.00000000...)\nGot nothing\nGLPK Simplex Optimizer, v4.44\n6 rows, 3 columns, 8 non-zeros\nPreprocessing...\n2 rows, 2 columns, 4 non-zeros\nScaling...\n A: min|aij| =  2.400e+01  max|aij| =  5.000e+01  ratio =  2.083e+00\nGM: min|aij| =  8.128e-01  max|aij| =  1.230e+00  ratio =  1.514e+00\nEQ: min|aij| =  6.606e-01  max|aij| =  1.000e+00  ratio =  1.514e+00\nConstructing initial basis...\nSize of triangular part = 2\n*     0: obj =  -5.100000000e+01  infeas =  0.000e+00 (0)\n*     1: obj =  -5.225000000e+01  infeas =  0.000e+00 (0)\nOPTIMAL SOLUTION FOUND\n**********************************************************************\n```\nI have digged deeper at what is happening under the hood in the first case comparing with 5.6 on my imac.\nThe imac run\n\n```\nsage: c=vector(RDF,[-4,-5])\nsage: G=matrix(RDF,[[2,1],[1,2],[-1,0],[0,-1]])\nsage: h=vector(RDF,[3,3,0,0])\nsage: sol=linear_program(c,G,h)\nsage: sol['x']\n(0.999999939767, 1.00000001047)\nsage: from cvxopt.base import matrix as m\nsage: from cvxopt import solvers\nsage: solvers.options['show_progress']=True\nsage: c_=m(c.base_extend(RDF).numpy())\nsage: G_=m(G.base_extend(RDF).numpy())\nsage: h_=m(h.base_extend(RDF).numpy())                                \nsage: solvers.lp(c_,G_,h_,solver=None)                                \n     pcost       dcost       gap    pres   dres   k/t\n 0: -8.1000e+00 -1.8300e+01  4e+00  0e+00  8e-01  1e+00\n 1: -8.8055e+00 -9.4357e+00  2e-01  1e-16  4e-02  3e-02\n 2: -8.9981e+00 -9.0049e+00  2e-03  1e-16  5e-04  4e-04\n 3: -9.0000e+00 -9.0000e+00  2e-05  1e-16  5e-06  4e-06\n 4: -9.0000e+00 -9.0000e+00  2e-07  1e-16  5e-08  4e-08\nOptimal solution found.\n{'status': 'optimal', 'dual slack': 2.7986120477842287e-08, 'iterations': 4, 'residual as primal infeasibility certificate': None, 'relative gap': 2.7257517543273638e-08, 'dual objective': -9.00000049248484, 'residual as dual infeasibility certificate': None, 'gap': 2.453176527488781e-07, 's': <4x1 matrix, tc='d'>, 'primal infeasibility': 1.0136264998440638e-16, 'dual infeasibility': 4.812169483742963e-08, 'primal objective': -8.99999981140672, 'primal slack': 3.929722790979621e-08, 'y': <0x1 matrix, tc='d'>, 'x': <2x1 matrix, tc='d'>, 'z': <4x1 matrix, tc='d'>}\n```\nThe power7 one\n\n```\nsage: c=vector(RDF,[-4,-5])\nsage: G=matrix(RDF,[[2,1],[1,2],[-1,0],[0,-1]])\nsage: h=vector(RDF,[3,3,0,0])\nsage: sol=linear_program(c,G,h)\nsage: sol['x']\nsage: from cvxopt.base import matrix as m\nsage: from cvxopt import solvers\nsage: solvers.options['show_progress']=True\nsage: c_=m(c.base_extend(RDF).numpy())\nsage: G_=m(G.base_extend(RDF).numpy())\nsage: h_=m(h.base_extend(RDF).numpy())\nsage: solvers.lp(c_,G_,h_,solver=None)\n     pcost       dcost       gap    pres   dres   k/t\n 0: -8.1000e+00 -1.8300e+01  4e+00  0e+00  8e-01  1e+00\n 1: -8.2446e+00 -9.9047e+00  3e-01  8e-02  1e-01  6e-02\n 2: -7.6587e+00 -8.5347e+00  9e-02  1e+00  5e-02  2e-02\n 3: -7.0226e+00 -7.7110e+00  6e-02  1e+01  1e-01  1e-02\n 4: -6.4985e+00 -7.0882e+00  5e-02  2e+01  2e-01  9e-03\n 5: -5.5876e+00 -6.0350e+00  4e-02  2e+02  3e-01  5e-03\n 6: -4.8663e+00 -5.2180e+00  3e-02  3e+02  4e-01  3e-03\n 7: -4.1532e+00 -4.4125e+00  2e-02  2e+03  5e-01  2e-03\n 8: -3.6054e+00 -3.8041e+00  2e-02  4e+03  6e-01  1e-03\n 9: -3.1924e+00 -3.3415e+00  1e-02  2e+04  6e-01  8e-04\n10: -2.8113e+00 -2.9258e+00  1e-02  4e+04  7e-01  5e-04\n11: -2.5706e+00 -2.6588e+00  8e-03  2e+05  7e-01  4e-04\n12: -2.2854e+00 -2.3535e+00  6e-03  4e+05  7e-01  3e-04\n13: -2.1174e+00 -2.1709e+00  5e-03  2e+06  8e-01  3e-04\n14: -1.9020e+00 -1.9438e+00  4e-03  4e+06  8e-01  2e-04\n15: -1.7759e+00 -1.8093e+00  3e-03  2e+07  8e-01  2e-04\n16: -1.6170e+00 -1.6435e+00  2e-03  4e+07  8e-01  1e-04\n17: -1.5242e+00 -1.5457e+00  2e-03  2e+08  8e-01  1e-04\n18: -1.4088e+00 -1.4261e+00  2e-03  4e+08  8e-01  1e-04\n19: -1.3438e+00 -1.3581e+00  1e-03  2e+09  8e-01  1e-04\n20: -1.2614e+00 -1.2731e+00  1e-03  5e+09  9e-01  8e-05\n21: -1.2205e+00 -1.2303e+00  1e-03  2e+10  9e-01  8e-05\n22: -1.1641e+00 -1.1723e+00  8e-04  5e+10  9e-01  7e-05\n23: -1.1457e+00 -1.1526e+00  7e-04  3e+11  9e-01  6e-05\n24: -1.1120e+00 -1.1178e+00  6e-04  6e+11  9e-01  5e-05\n25: -1.1175e+00 -1.1225e+00  5e-04  3e+12  9e-01  5e-05\n26: -1.1071e+00 -1.1114e+00  4e-04  7e+12  9e-01  5e-05\n27: -1.1440e+00 -1.1477e+00  4e-04  3e+13  9e-01  5e-05\n28: -1.1644e+00 -1.1676e+00  4e-04  8e+13  9e-01  4e-05\n29: -1.2555e+00 -1.2584e+00  3e-04  3e+14  9e-01  4e-05\n30: -1.3345e+00 -1.3370e+00  3e-04  1e+15  9e-01  4e-05\n31: -1.5684e+00 -1.5705e+00  3e-04  4e+15  8e-01  5e-05\n32: -1.8504e+00 -1.8522e+00  3e-04  1e+16  8e-01  5e-05\n33: -3.2927e+00 -3.2940e+00  4e-04  5e+16  6e-01  6e-05\n34: -7.2895e+00 -7.2897e+00  4e-04  1e+17  2e-01  6e-05\n35: -8.2349e+00 -8.2350e+00  2e-04  2e+17  8e-02  3e-05\n36: -8.1449e+00 -8.1450e+00  3e-04  3e+18  9e-02  2e-05\n37: -8.1562e+00 -8.1563e+00  2e-04  5e+18  9e-02  3e-05\n38: -8.5850e+00 -8.5850e+00  2e-04  4e+19  5e-02  1e-05\n39: -8.7398e+00 -8.7398e+00  1e-04  7e+19  3e-02  7e-06\n40: -8.5796e+00 -8.5796e+00  1e-04  2e+21  5e-02  9e-06\n41: -8.5844e+00 -8.5844e+00  9e-05  2e+21  5e-02  1e-05\n42: -8.7635e+00 -8.7635e+00  5e-05  1e+22  3e-02  4e-06\n43: -8.6210e+00 -8.6210e+00  6e-05  3e+23  4e-02  5e-06\n44: -8.6127e+00 -8.6127e+00  4e-05  5e+23  4e-02  6e-06\n45: -8.7308e+00 -8.7308e+00  4e-05  4e+24  3e-02  3e-06\n46: -8.8323e+00 -8.8323e+00  2e-05  7e+24  2e-02  2e-06\n47: -8.7174e+00 -8.7174e+00  3e-05  2e+26  3e-02  2e-06\n48: -8.6973e+00 -8.6973e+00  3e-05  2e+26  3e-02  3e-06\n49: -8.8058e+00 -8.8058e+00  2e-05  2e+27  2e-02  1e-06\n50: -8.8546e+00 -8.8546e+00  1e-05  4e+27  2e-02  9e-07\n51: -8.7514e+00 -8.7514e+00  2e-05  1e+29  3e-02  1e-06\n52: -8.7405e+00 -8.7405e+00  1e-05  1e+29  3e-02  1e-06\n53: -8.8161e+00 -8.8161e+00  1e-05  1e+30  2e-02  7e-07\n54: -8.8781e+00 -8.8781e+00  7e-06  2e+30  1e-02  5e-07\n55: -8.7917e+00 -8.7917e+00  1e-05  5e+31  2e-02  6e-07\n56: -8.7732e+00 -8.7732e+00  7e-06  7e+31  3e-02  8e-07\n57: -8.8288e+00 -8.8288e+00  7e-06  7e+32  2e-02  5e-07\n58: -8.9006e+00 -8.9006e+00  4e-06  1e+33  1e-02  3e-07\n59: -8.8275e+00 -8.8275e+00  6e-06  2e+34  2e-02  3e-07\n60: -8.8035e+00 -8.8035e+00  4e-06  3e+34  2e-02  4e-07\n61: -8.8360e+00 -8.8360e+00  5e-06  3e+35  2e-02  3e-07\n62: -8.9251e+00 -8.9251e+00  1e-06  4e+35  8e-03  1e-07\n63: -8.8661e+00 -8.8661e+00  3e-06  8e+36  1e-02  2e-07\n64: -8.8364e+00 -8.8364e+00  3e-06  1e+37  2e-02  2e-07\n65: -8.8262e+00 -8.8262e+00  4e-06  2e+38  2e-02  2e-07\n66: -8.9471e+00 -8.9471e+00  6e-07  2e+38  6e-03  8e-08\n67: -8.9304e+00 -8.9304e+00  7e-07  3e+38  8e-03  8e-08\n68: -8.8850e+00 -8.8850e+00  1e-06  5e+39  1e-02  9e-08\n69: -8.8583e+00 -8.8583e+00  1e-06  1e+40  2e-02  1e-07\n70: -8.8071e+00 -8.8071e+00  3e-06  2e+41  2e-02  1e-07\n71: -8.9335e+00 -8.9335e+00  6e-07  2e+41  7e-03  1e-07\n72: -8.9106e+00 -8.9106e+00  6e-07  3e+41  1e-02  1e-07\n73: -8.8518e+00 -8.8518e+00  1e-06  5e+42  2e-02  9e-08\n74: -8.8289e+00 -8.8289e+00  9e-07  8e+42  2e-02  1e-07\n75: -8.8343e+00 -8.8343e+00  1e-06  1e+44  2e-02  8e-08\n76: -8.9463e+00 -8.9463e+00  2e-07  1e+44  6e-03  3e-08\n77: -8.9336e+00 -8.9336e+00  2e-07  3e+44  7e-03  3e-08\n78: -8.9035e+00 -8.9035e+00  4e-07  4e+45  1e-02  3e-08\n79: -8.8828e+00 -8.8828e+00  4e-07  8e+45  1e-02  4e-08\n80: -8.8369e+00 -8.8369e+00  8e-07  2e+47  2e-02  4e-08\n81: -8.8225e+00 -8.8225e+00  7e-07  2e+47  2e-02  7e-08\n82: -8.8762e+00 -8.8762e+00  8e-07  3e+48  1e-02  5e-08\n83: -8.9445e+00 -8.9445e+00  2e-07  3e+48  6e-03  2e-08\n84: -8.9062e+00 -8.9062e+00  4e-07  5e+49  1e-02  2e-08\n85: -8.8852e+00 -8.8852e+00  4e-07  9e+49  1e-02  3e-08\n86: -8.8567e+00 -8.8567e+00  9e-07  2e+51  2e-02  4e-08\n87: -8.9491e+00 -8.9491e+00  2e-07  1e+51  6e-03  2e-08\n88: -8.9309e+00 -8.9309e+00  2e-07  2e+51  8e-03  2e-08\n89: -8.8818e+00 -8.8818e+00  5e-07  4e+52  1e-02  3e-08\n90: -8.8660e+00 -8.8660e+00  4e-07  7e+52  1e-02  4e-08\n91: -8.8989e+00 -8.8989e+00  4e-07  7e+53  1e-02  3e-08\n92: -8.9524e+00 -8.9524e+00  1e-07  9e+53  5e-03  1e-08\n93: -8.9187e+00 -8.9187e+00  2e-07  1e+55  9e-03  1e-08\n94: -8.9004e+00 -8.9004e+00  2e-07  3e+55  1e-02  2e-08\n95: -8.8722e+00 -8.8722e+00  5e-07  5e+56  1e-02  2e-08\n96: -8.9530e+00 -8.9530e+00  1e-07  4e+56  5e-03  1e-08\n97: -8.9359e+00 -8.9359e+00  1e-07  6e+56  7e-03  2e-08\n98: -8.8923e+00 -8.8923e+00  3e-07  1e+58  1e-02  2e-08\n99: -8.8786e+00 -8.8786e+00  2e-07  2e+58  1e-02  2e-08\n100: -8.9075e+00 -8.9075e+00  3e-07  2e+59  1e-02  2e-08\nTerminated (maximum number of iterations reached).\n{'dual infeasibility': 0.010220406013259782,\n 'dual objective': -8.907506570132597,\n 'dual slack': 9.311702859901095e-68,\n 'gap': 2.543051531583804e-07,\n 'iterations': 100,\n 'primal infeasibility': 1.9410386424538202e+59,\n 'primal objective': -8.907506586345107,\n 'primal slack': 8.257930718191955e-09,\n 'relative gap': 2.85495329914458e-08,\n 'residual as dual infeasibility certificate': 2.1791043583727054e+58,\n 'residual as primal infeasibility certificate': None,\n 's': <4x1 matrix, tc='d'>,\n 'status': 'unknown',\n 'x': <2x1 matrix, tc='d'>,\n 'y': <0x1 matrix, tc='d'>,\n 'z': <4x1 matrix, tc='d'>}\n```\nWe have a method that completely fail to converge. I had done some exploration in #12832 when I thought it was a problem in scipy and I will probably continue to track that one over there after a good editing of the issue description.",
    "created_at": "2013-02-12T09:51:27Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123463",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'></a>
That's repeating from earlier comments but this is now a long thread:

```
./sage -t  --long -force_lib devel/sage/sage/functions/special.py
sage -t --long -force_lib "devel/sage/sage/functions/special.py"

;;;
;;; Stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;


**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage/sage/functions/special.py", line 1614:
    sage: elliptic_f(RR(pi/2), 0.5)
Expected:
    1.8540746773
Got:
    sage165
;;;
;;; Stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;

**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage/sage/functions/special.py", line 1623:
    sage: elliptic_f(RR(pi/2), 0.5)
Expected:
    1.8540746773
Got:
    sage167
**********************************************************************
2 items had failures:
   1 of   5 in __main__.example_44
   1 of   5 in __main__.example_45
***Test Failed*** 2 failures.
For whitespace errors, see the file /hpc/home/frb15/.sage//tmp/special_36988.py
         [31.9 s]
 
----------------------------------------------------------------------
```
A maxima/ecl problem, I'll try to get more details so we can forward this to the ecl people (or maxima but I suspect the fault is in ecl).

```
sage -t --long -force_lib "devel/sage/doc/en/numerical_sage/cvxopt.rst"
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage/doc/en/numerical_sage/cvxopt.rst", line 129:
    sage: print sol['x']      # ... below since can get -00 or +00 depending on architecture
Expected:
    [ 1.00e...00]
    [ 1.00e+00]
Got:
    [ 9.87e-01]
    [ 9.92e-01]
    <BLANKLINE>
**********************************************************************
```
could be considered noise, but it is of a worrying kind especially when combined with the next one:

```
sage -t -long "devel/sage-main/sage/numerical/optimize.py"  
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage-main/sage/numerical/optimize.py", line 515:
    sage: sol['x']
Expected:
    (0.999..., 1.000...)
Got nothing
**********************************************************************
File "/hpc/scratch/frb15/sandbox/sage-5.7.beta4/devel/sage-main/sage/numerical/optimize.py", line 525:
    sage: sol['x']
Expected:
    (45.000000..., 6.2499999...3, 1.00000000...)
Got nothing
GLPK Simplex Optimizer, v4.44
6 rows, 3 columns, 8 non-zeros
Preprocessing...
2 rows, 2 columns, 4 non-zeros
Scaling...
 A: min|aij| =  2.400e+01  max|aij| =  5.000e+01  ratio =  2.083e+00
GM: min|aij| =  8.128e-01  max|aij| =  1.230e+00  ratio =  1.514e+00
EQ: min|aij| =  6.606e-01  max|aij| =  1.000e+00  ratio =  1.514e+00
Constructing initial basis...
Size of triangular part = 2
*     0: obj =  -5.100000000e+01  infeas =  0.000e+00 (0)
*     1: obj =  -5.225000000e+01  infeas =  0.000e+00 (0)
OPTIMAL SOLUTION FOUND
**********************************************************************
```
I have digged deeper at what is happening under the hood in the first case comparing with 5.6 on my imac.
The imac run

```
sage: c=vector(RDF,[-4,-5])
sage: G=matrix(RDF,[[2,1],[1,2],[-1,0],[0,-1]])
sage: h=vector(RDF,[3,3,0,0])
sage: sol=linear_program(c,G,h)
sage: sol['x']
(0.999999939767, 1.00000001047)
sage: from cvxopt.base import matrix as m
sage: from cvxopt import solvers
sage: solvers.options['show_progress']=True
sage: c_=m(c.base_extend(RDF).numpy())
sage: G_=m(G.base_extend(RDF).numpy())
sage: h_=m(h.base_extend(RDF).numpy())                                
sage: solvers.lp(c_,G_,h_,solver=None)                                
     pcost       dcost       gap    pres   dres   k/t
 0: -8.1000e+00 -1.8300e+01  4e+00  0e+00  8e-01  1e+00
 1: -8.8055e+00 -9.4357e+00  2e-01  1e-16  4e-02  3e-02
 2: -8.9981e+00 -9.0049e+00  2e-03  1e-16  5e-04  4e-04
 3: -9.0000e+00 -9.0000e+00  2e-05  1e-16  5e-06  4e-06
 4: -9.0000e+00 -9.0000e+00  2e-07  1e-16  5e-08  4e-08
Optimal solution found.
{'status': 'optimal', 'dual slack': 2.7986120477842287e-08, 'iterations': 4, 'residual as primal infeasibility certificate': None, 'relative gap': 2.7257517543273638e-08, 'dual objective': -9.00000049248484, 'residual as dual infeasibility certificate': None, 'gap': 2.453176527488781e-07, 's': <4x1 matrix, tc='d'>, 'primal infeasibility': 1.0136264998440638e-16, 'dual infeasibility': 4.812169483742963e-08, 'primal objective': -8.99999981140672, 'primal slack': 3.929722790979621e-08, 'y': <0x1 matrix, tc='d'>, 'x': <2x1 matrix, tc='d'>, 'z': <4x1 matrix, tc='d'>}
```
The power7 one

```
sage: c=vector(RDF,[-4,-5])
sage: G=matrix(RDF,[[2,1],[1,2],[-1,0],[0,-1]])
sage: h=vector(RDF,[3,3,0,0])
sage: sol=linear_program(c,G,h)
sage: sol['x']
sage: from cvxopt.base import matrix as m
sage: from cvxopt import solvers
sage: solvers.options['show_progress']=True
sage: c_=m(c.base_extend(RDF).numpy())
sage: G_=m(G.base_extend(RDF).numpy())
sage: h_=m(h.base_extend(RDF).numpy())
sage: solvers.lp(c_,G_,h_,solver=None)
     pcost       dcost       gap    pres   dres   k/t
 0: -8.1000e+00 -1.8300e+01  4e+00  0e+00  8e-01  1e+00
 1: -8.2446e+00 -9.9047e+00  3e-01  8e-02  1e-01  6e-02
 2: -7.6587e+00 -8.5347e+00  9e-02  1e+00  5e-02  2e-02
 3: -7.0226e+00 -7.7110e+00  6e-02  1e+01  1e-01  1e-02
 4: -6.4985e+00 -7.0882e+00  5e-02  2e+01  2e-01  9e-03
 5: -5.5876e+00 -6.0350e+00  4e-02  2e+02  3e-01  5e-03
 6: -4.8663e+00 -5.2180e+00  3e-02  3e+02  4e-01  3e-03
 7: -4.1532e+00 -4.4125e+00  2e-02  2e+03  5e-01  2e-03
 8: -3.6054e+00 -3.8041e+00  2e-02  4e+03  6e-01  1e-03
 9: -3.1924e+00 -3.3415e+00  1e-02  2e+04  6e-01  8e-04
10: -2.8113e+00 -2.9258e+00  1e-02  4e+04  7e-01  5e-04
11: -2.5706e+00 -2.6588e+00  8e-03  2e+05  7e-01  4e-04
12: -2.2854e+00 -2.3535e+00  6e-03  4e+05  7e-01  3e-04
13: -2.1174e+00 -2.1709e+00  5e-03  2e+06  8e-01  3e-04
14: -1.9020e+00 -1.9438e+00  4e-03  4e+06  8e-01  2e-04
15: -1.7759e+00 -1.8093e+00  3e-03  2e+07  8e-01  2e-04
16: -1.6170e+00 -1.6435e+00  2e-03  4e+07  8e-01  1e-04
17: -1.5242e+00 -1.5457e+00  2e-03  2e+08  8e-01  1e-04
18: -1.4088e+00 -1.4261e+00  2e-03  4e+08  8e-01  1e-04
19: -1.3438e+00 -1.3581e+00  1e-03  2e+09  8e-01  1e-04
20: -1.2614e+00 -1.2731e+00  1e-03  5e+09  9e-01  8e-05
21: -1.2205e+00 -1.2303e+00  1e-03  2e+10  9e-01  8e-05
22: -1.1641e+00 -1.1723e+00  8e-04  5e+10  9e-01  7e-05
23: -1.1457e+00 -1.1526e+00  7e-04  3e+11  9e-01  6e-05
24: -1.1120e+00 -1.1178e+00  6e-04  6e+11  9e-01  5e-05
25: -1.1175e+00 -1.1225e+00  5e-04  3e+12  9e-01  5e-05
26: -1.1071e+00 -1.1114e+00  4e-04  7e+12  9e-01  5e-05
27: -1.1440e+00 -1.1477e+00  4e-04  3e+13  9e-01  5e-05
28: -1.1644e+00 -1.1676e+00  4e-04  8e+13  9e-01  4e-05
29: -1.2555e+00 -1.2584e+00  3e-04  3e+14  9e-01  4e-05
30: -1.3345e+00 -1.3370e+00  3e-04  1e+15  9e-01  4e-05
31: -1.5684e+00 -1.5705e+00  3e-04  4e+15  8e-01  5e-05
32: -1.8504e+00 -1.8522e+00  3e-04  1e+16  8e-01  5e-05
33: -3.2927e+00 -3.2940e+00  4e-04  5e+16  6e-01  6e-05
34: -7.2895e+00 -7.2897e+00  4e-04  1e+17  2e-01  6e-05
35: -8.2349e+00 -8.2350e+00  2e-04  2e+17  8e-02  3e-05
36: -8.1449e+00 -8.1450e+00  3e-04  3e+18  9e-02  2e-05
37: -8.1562e+00 -8.1563e+00  2e-04  5e+18  9e-02  3e-05
38: -8.5850e+00 -8.5850e+00  2e-04  4e+19  5e-02  1e-05
39: -8.7398e+00 -8.7398e+00  1e-04  7e+19  3e-02  7e-06
40: -8.5796e+00 -8.5796e+00  1e-04  2e+21  5e-02  9e-06
41: -8.5844e+00 -8.5844e+00  9e-05  2e+21  5e-02  1e-05
42: -8.7635e+00 -8.7635e+00  5e-05  1e+22  3e-02  4e-06
43: -8.6210e+00 -8.6210e+00  6e-05  3e+23  4e-02  5e-06
44: -8.6127e+00 -8.6127e+00  4e-05  5e+23  4e-02  6e-06
45: -8.7308e+00 -8.7308e+00  4e-05  4e+24  3e-02  3e-06
46: -8.8323e+00 -8.8323e+00  2e-05  7e+24  2e-02  2e-06
47: -8.7174e+00 -8.7174e+00  3e-05  2e+26  3e-02  2e-06
48: -8.6973e+00 -8.6973e+00  3e-05  2e+26  3e-02  3e-06
49: -8.8058e+00 -8.8058e+00  2e-05  2e+27  2e-02  1e-06
50: -8.8546e+00 -8.8546e+00  1e-05  4e+27  2e-02  9e-07
51: -8.7514e+00 -8.7514e+00  2e-05  1e+29  3e-02  1e-06
52: -8.7405e+00 -8.7405e+00  1e-05  1e+29  3e-02  1e-06
53: -8.8161e+00 -8.8161e+00  1e-05  1e+30  2e-02  7e-07
54: -8.8781e+00 -8.8781e+00  7e-06  2e+30  1e-02  5e-07
55: -8.7917e+00 -8.7917e+00  1e-05  5e+31  2e-02  6e-07
56: -8.7732e+00 -8.7732e+00  7e-06  7e+31  3e-02  8e-07
57: -8.8288e+00 -8.8288e+00  7e-06  7e+32  2e-02  5e-07
58: -8.9006e+00 -8.9006e+00  4e-06  1e+33  1e-02  3e-07
59: -8.8275e+00 -8.8275e+00  6e-06  2e+34  2e-02  3e-07
60: -8.8035e+00 -8.8035e+00  4e-06  3e+34  2e-02  4e-07
61: -8.8360e+00 -8.8360e+00  5e-06  3e+35  2e-02  3e-07
62: -8.9251e+00 -8.9251e+00  1e-06  4e+35  8e-03  1e-07
63: -8.8661e+00 -8.8661e+00  3e-06  8e+36  1e-02  2e-07
64: -8.8364e+00 -8.8364e+00  3e-06  1e+37  2e-02  2e-07
65: -8.8262e+00 -8.8262e+00  4e-06  2e+38  2e-02  2e-07
66: -8.9471e+00 -8.9471e+00  6e-07  2e+38  6e-03  8e-08
67: -8.9304e+00 -8.9304e+00  7e-07  3e+38  8e-03  8e-08
68: -8.8850e+00 -8.8850e+00  1e-06  5e+39  1e-02  9e-08
69: -8.8583e+00 -8.8583e+00  1e-06  1e+40  2e-02  1e-07
70: -8.8071e+00 -8.8071e+00  3e-06  2e+41  2e-02  1e-07
71: -8.9335e+00 -8.9335e+00  6e-07  2e+41  7e-03  1e-07
72: -8.9106e+00 -8.9106e+00  6e-07  3e+41  1e-02  1e-07
73: -8.8518e+00 -8.8518e+00  1e-06  5e+42  2e-02  9e-08
74: -8.8289e+00 -8.8289e+00  9e-07  8e+42  2e-02  1e-07
75: -8.8343e+00 -8.8343e+00  1e-06  1e+44  2e-02  8e-08
76: -8.9463e+00 -8.9463e+00  2e-07  1e+44  6e-03  3e-08
77: -8.9336e+00 -8.9336e+00  2e-07  3e+44  7e-03  3e-08
78: -8.9035e+00 -8.9035e+00  4e-07  4e+45  1e-02  3e-08
79: -8.8828e+00 -8.8828e+00  4e-07  8e+45  1e-02  4e-08
80: -8.8369e+00 -8.8369e+00  8e-07  2e+47  2e-02  4e-08
81: -8.8225e+00 -8.8225e+00  7e-07  2e+47  2e-02  7e-08
82: -8.8762e+00 -8.8762e+00  8e-07  3e+48  1e-02  5e-08
83: -8.9445e+00 -8.9445e+00  2e-07  3e+48  6e-03  2e-08
84: -8.9062e+00 -8.9062e+00  4e-07  5e+49  1e-02  2e-08
85: -8.8852e+00 -8.8852e+00  4e-07  9e+49  1e-02  3e-08
86: -8.8567e+00 -8.8567e+00  9e-07  2e+51  2e-02  4e-08
87: -8.9491e+00 -8.9491e+00  2e-07  1e+51  6e-03  2e-08
88: -8.9309e+00 -8.9309e+00  2e-07  2e+51  8e-03  2e-08
89: -8.8818e+00 -8.8818e+00  5e-07  4e+52  1e-02  3e-08
90: -8.8660e+00 -8.8660e+00  4e-07  7e+52  1e-02  4e-08
91: -8.8989e+00 -8.8989e+00  4e-07  7e+53  1e-02  3e-08
92: -8.9524e+00 -8.9524e+00  1e-07  9e+53  5e-03  1e-08
93: -8.9187e+00 -8.9187e+00  2e-07  1e+55  9e-03  1e-08
94: -8.9004e+00 -8.9004e+00  2e-07  3e+55  1e-02  2e-08
95: -8.8722e+00 -8.8722e+00  5e-07  5e+56  1e-02  2e-08
96: -8.9530e+00 -8.9530e+00  1e-07  4e+56  5e-03  1e-08
97: -8.9359e+00 -8.9359e+00  1e-07  6e+56  7e-03  2e-08
98: -8.8923e+00 -8.8923e+00  3e-07  1e+58  1e-02  2e-08
99: -8.8786e+00 -8.8786e+00  2e-07  2e+58  1e-02  2e-08
100: -8.9075e+00 -8.9075e+00  3e-07  2e+59  1e-02  2e-08
Terminated (maximum number of iterations reached).
{'dual infeasibility': 0.010220406013259782,
 'dual objective': -8.907506570132597,
 'dual slack': 9.311702859901095e-68,
 'gap': 2.543051531583804e-07,
 'iterations': 100,
 'primal infeasibility': 1.9410386424538202e+59,
 'primal objective': -8.907506586345107,
 'primal slack': 8.257930718191955e-09,
 'relative gap': 2.85495329914458e-08,
 'residual as dual infeasibility certificate': 2.1791043583727054e+58,
 'residual as primal infeasibility certificate': None,
 's': <4x1 matrix, tc='d'>,
 'status': 'unknown',
 'x': <2x1 matrix, tc='d'>,
 'y': <0x1 matrix, tc='d'>,
 'z': <4x1 matrix, tc='d'>}
```
We have a method that completely fail to converge. I had done some exploration in #12832 when I thought it was a problem in scipy and I will probably continue to track that one over there after a good editing of the issue description.



---

archive/issue_comments_123464.json:
```json
{
    "body": "<a id='comment:7'></a>\nFrancois, please could you try the new release candidate of GMP-ECM at\nhttp://www.loria.fr/~kruppaal/ecm-6.4.4-rc2.tar.gz? It includes the patch of this ticket.\n\nPaul",
    "created_at": "2013-02-20T14:56:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123464",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:7'></a>
Francois, please could you try the new release candidate of GMP-ECM at
http://www.loria.fr/~kruppaal/ecm-6.4.4-rc2.tar.gz? It includes the patch of this ticket.

Paul



---

archive/issue_comments_123465.json:
```json
{
    "body": "<a id='comment:9'></a>\nI've tried to build Sage on another Power 7 running debian.\nThis is a vanilla Sage 5.7 + ATLAS from #10508, I did not try to include any patch from here yet.\nNo problem to build it.\nThe log of \"make ptestlong\" is at\nhttp://boxen.math.washington.edu/home/jpflori/ptestlong-gcc110-power7-debian.log\nIve not had a deep look but the failures look similar to what has been reported here.",
    "created_at": "2013-02-28T15:14:36Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123465",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
I've tried to build Sage on another Power 7 running debian.
This is a vanilla Sage 5.7 + ATLAS from #10508, I did not try to include any patch from here yet.
No problem to build it.
The log of "make ptestlong" is at
http://boxen.math.washington.edu/home/jpflori/ptestlong-gcc110-power7-debian.log
Ive not had a deep look but the failures look similar to what has been reported here.



---

archive/issue_comments_123466.json:
```json
{
    "body": "<a id='comment:0'></a>\nYou have more failures. In the tutorial translations curiously your gap install totally crashed. And the rings/arith.py failure is totally weird. I'll try to move to 5.8.beta to see if I can reproduce some of these. You don't have the failure in functions/special.py. I suspect gcc is involved. What gcc do you use?",
    "created_at": "2013-02-28T20:47:52Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123466",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:0'></a>
You have more failures. In the tutorial translations curiously your gap install totally crashed. And the rings/arith.py failure is totally weird. I'll try to move to 5.8.beta to see if I can reproduce some of these. You don't have the failure in functions/special.py. I suspect gcc is involved. What gcc do you use?



---

archive/issue_comments_123467.json:
```json
{
    "body": "<a id='comment:141'></a>\nReplying to [fbissey](#comment%3A140):\n> I'll try to move to 5.8.beta to see if I can reproduce some of these.\n\nPlease note I used 5.7 (plus new ATLAS).\n> You don't have the failure in functions/special.py. I suspect gcc is involved. What gcc do you use?\n\nIts\n\n```\ngcc version 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC)\n```\nAnd as you can see its not Debian but Fedora...",
    "created_at": "2013-02-28T20:55:52Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123467",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:141'></a>
Replying to [fbissey](#comment%3A140):
> I'll try to move to 5.8.beta to see if I can reproduce some of these.

Please note I used 5.7 (plus new ATLAS).
> You don't have the failure in functions/special.py. I suspect gcc is involved. What gcc do you use?

Its

```
gcc version 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC)
```
And as you can see its not Debian but Fedora...



---

archive/issue_comments_123468.json:
```json
{
    "body": "<a id='comment:2'></a>\nOK, I think getting a new gcc on board may help. Of course you are using a gcc provided by red hat for ppc so there may be specific fixes in there. We know that some version of gcc were leading to breakage in ecl earlier on.\n\nThe next thing is that in some circumstances your GAP is breaking. If it was just plain broken there would be more test failures.",
    "created_at": "2013-02-28T21:00:27Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123468",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'></a>
OK, I think getting a new gcc on board may help. Of course you are using a gcc provided by red hat for ppc so there may be specific fixes in there. We know that some version of gcc were leading to breakage in ecl earlier on.

The next thing is that in some circumstances your GAP is breaking. If it was just plain broken there would be more test failures.



---

archive/issue_comments_123469.json:
```json
{
    "body": "<a id='comment:143'></a>\nReplying to [fbissey](#comment%3A142):\n> OK, I think getting a new gcc on board may help. Of course you are using a gcc provided by red hat for ppc so there may be specific fixes in there. We know that some version of gcc were leading to breakage in ecl earlier on.\n\nYou mean more recent that 4.7.2?\nThat will be quite bleeding edge won't it?\n> \n> The next thing is that in some circumstances your GAP is breaking. If it was just plain broken there would be more test failures.\n\nIndeed, I can launch the built gap and compute 1+1",
    "created_at": "2013-02-28T21:04:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123469",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:143'></a>
Replying to [fbissey](#comment%3A142):
> OK, I think getting a new gcc on board may help. Of course you are using a gcc provided by red hat for ppc so there may be specific fixes in there. We know that some version of gcc were leading to breakage in ecl earlier on.

You mean more recent that 4.7.2?
That will be quite bleeding edge won't it?
> 
> The next thing is that in some circumstances your GAP is breaking. If it was just plain broken there would be more test failures.

Indeed, I can launch the built gap and compute 1+1



---

archive/issue_comments_123470.json:
```json
{
    "body": "<a id='comment:4'></a>\nI retested arith.py individually and it just worked...",
    "created_at": "2013-02-28T22:04:38Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123470",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>
I retested arith.py individually and it just worked...



---

archive/issue_comments_123471.json:
```json
{
    "body": "<a id='comment:5'></a>\nSame for all rst files except cvxopt.rst which still fails (prec problem which was already reported here on the Suse install).\n\noptimize.py and libecm.py are still failing as expected.\n\nspecial.py still does not fail.",
    "created_at": "2013-02-28T22:09:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123471",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>
Same for all rst files except cvxopt.rst which still fails (prec problem which was already reported here on the Suse install).

optimize.py and libecm.py are still failing as expected.

special.py still does not fail.



---

archive/issue_comments_123472.json:
```json
{
    "body": "<a id='comment:6'></a>\nI was going to ask you to re-test. Not reproducible, it may be a small problem with parrallel testing, possibly concurrent GAP sessions. Not sure for arith.py.\n\nAs for compiler I meant that I used 4.7.1 for my own build. You are using a recent so you could also have small bug fix in kernel or glibc that helps (on a not mainstream platform).",
    "created_at": "2013-02-28T22:14:03Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123472",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'></a>
I was going to ask you to re-test. Not reproducible, it may be a small problem with parrallel testing, possibly concurrent GAP sessions. Not sure for arith.py.

As for compiler I meant that I used 4.7.1 for my own build. You are using a recent so you could also have small bug fix in kernel or glibc that helps (on a not mainstream platform).



---

archive/issue_comments_123473.json:
```json
{
    "body": "<a id='comment:7'></a>\nI tried 5.8.beta2 with gcc 4.7.2 and it is worse (no patch applied):\n\n```\nThe following tests failed:\n\n        sage -t -long  -force_lib devel/sage-main/sage/groups/matrix_gps/matrix_group.py # Time out\n        sage -t -long  -force_lib devel/sage-main/sage/combinat/sf/k_dual.py # Time out\n        sage -t -long  -force_lib devel/sage-main/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed\n        sage -t -long  -force_lib devel/sage-main/sage/libs/libecm.pyx # 7 doctests failed\n        sage -t -long  -force_lib devel/sage-main/sage/functions/special.py # 2 doctests failed\n        sage -t -long  -force_lib devel/sage-main/sage/numerical/optimize.py # 2 doctests failed\n```\nSo I still get the special.py failure which means something esle fixed it for you (I suspect glibc/kernel). I also have two time out. I am doing a gcc 4.7.1 to see if they are compiler dependent.",
    "created_at": "2013-03-02T09:49:29Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123473",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
I tried 5.8.beta2 with gcc 4.7.2 and it is worse (no patch applied):

```
The following tests failed:

        sage -t -long  -force_lib devel/sage-main/sage/groups/matrix_gps/matrix_group.py # Time out
        sage -t -long  -force_lib devel/sage-main/sage/combinat/sf/k_dual.py # Time out
        sage -t -long  -force_lib devel/sage-main/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed
        sage -t -long  -force_lib devel/sage-main/sage/libs/libecm.pyx # 7 doctests failed
        sage -t -long  -force_lib devel/sage-main/sage/functions/special.py # 2 doctests failed
        sage -t -long  -force_lib devel/sage-main/sage/numerical/optimize.py # 2 doctests failed
```
So I still get the special.py failure which means something esle fixed it for you (I suspect glibc/kernel). I also have two time out. I am doing a gcc 4.7.1 to see if they are compiler dependent.



---

archive/issue_comments_123474.json:
```json
{
    "body": "<a id='comment:8'></a>\nI redid the build with gcc-4.7.1 and I am back with the same failures as before. It could also be that red hat has put some ppc64 specific fix in their gcc. Which exact version of fedora do you have?",
    "created_at": "2013-03-04T00:12:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123474",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
I redid the build with gcc-4.7.1 and I am back with the same failures as before. It could also be that red hat has put some ppc64 specific fix in their gcc. Which exact version of fedora do you have?



---

archive/issue_comments_123475.json:
```json
{
    "body": "<a id='comment:149'></a>\nReplying to [fbissey](#comment%3A148):\n> I redid the build with gcc-4.7.1 and I am back with the same failures as before. It could also be that red hat has put some ppc64 specific fix in their gcc. Which exact version of fedora do you have?\n\nThat's gcc110 from http://gcc.gnu.org/wiki/CompileFarm\nIt's stated its \n\n```\nname   port disk   CPU           Notes\ngcc110      2TB    4x16x3.55 GHz IBM POWER7 / 64 GB RAM / IBM Power 730 Express server / Fedora 18 ppc64\n```\n\nFrom there I gathered\n\n```\n[jpflori@gcc1-power7 sage-5.7]$ uname -a\nLinux gcc1-power7.osuosl.org 3.7.2-204.fc18.ppc64 #1 SMP Fri Jan 18 10:44:51 MST 2013 ppc64 ppc64 ppc64 GNU/Linux\n[jpflori@gcc1-power7 sage-5.7]$ cat /etc/redhat-release \nFedora release 18 (Spherical Cow)\n[jpflori@gcc1-power7 sage-5.7]$ gcc -v\nUtilisation des specs internes.\nCOLLECT_GCC=/usr/bin/gcc\nCOLLECT_LTO_WRAPPER=/usr/libexec/gcc/ppc64-redhat-linux/4.7.2/lto-wrapper\nTarget: ppc64-redhat-linux\nConfigur\u00e9 avec: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --disable-build-with-cxx --disable-build-poststage1-with-cxx --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --enable-java-awt=gtk --disable-dssi --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --enable-secureplt --with-long-double-128 --build=ppc64-redhat-linux\nMod\u00e8le de thread: posix\ngcc version 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC)\n[jpflori@gcc1-power7 sage-5.7]$ yum list gcc\nModules compl\u00e9mentaires charg\u00e9s\u00a0: auto-update-debuginfo, langpacks, presto,\n                                : refresh-packagekit\nPaquets install\u00e9s\ngcc.ppc64                         4.7.2-8.fc18                         installed\n```",
    "created_at": "2013-03-05T10:19:45Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123475",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:149'></a>
Replying to [fbissey](#comment%3A148):
> I redid the build with gcc-4.7.1 and I am back with the same failures as before. It could also be that red hat has put some ppc64 specific fix in their gcc. Which exact version of fedora do you have?

That's gcc110 from http://gcc.gnu.org/wiki/CompileFarm
It's stated its 

```
name   port disk   CPU           Notes
gcc110      2TB    4x16x3.55 GHz IBM POWER7 / 64 GB RAM / IBM Power 730 Express server / Fedora 18 ppc64
```

From there I gathered

```
[jpflori@gcc1-power7 sage-5.7]$ uname -a
Linux gcc1-power7.osuosl.org 3.7.2-204.fc18.ppc64 #1 SMP Fri Jan 18 10:44:51 MST 2013 ppc64 ppc64 ppc64 GNU/Linux
[jpflori@gcc1-power7 sage-5.7]$ cat /etc/redhat-release 
Fedora release 18 (Spherical Cow)
[jpflori@gcc1-power7 sage-5.7]$ gcc -v
Utilisation des specs internes.
COLLECT_GCC=/usr/bin/gcc
COLLECT_LTO_WRAPPER=/usr/libexec/gcc/ppc64-redhat-linux/4.7.2/lto-wrapper
Target: ppc64-redhat-linux
Configur√© avec: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --disable-build-with-cxx --disable-build-poststage1-with-cxx --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --enable-java-awt=gtk --disable-dssi --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --enable-secureplt --with-long-double-128 --build=ppc64-redhat-linux
Mod√®le de thread: posix
gcc version 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC)
[jpflori@gcc1-power7 sage-5.7]$ yum list gcc
Modules compl√©mentaires charg√©s¬†: auto-update-debuginfo, langpacks, presto,
                                : refresh-packagekit
Paquets install√©s
gcc.ppc64                         4.7.2-8.fc18                         installed
```



---

archive/issue_comments_123476.json:
```json
{
    "body": "<a id='comment:150'></a>\nReplying to [zimmerma](#comment%3A133):\n> Francois, the ecm patch is not yet included in the last release 6.4.3. I'll see if we can make\n> a new release of GMP-ECM.\n\n\nUpgrading the GMP-ECM spkg to 6.4.4 (which includes the patch attached here) is #14151.",
    "created_at": "2013-03-08T22:55:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123476",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:150'></a>
Replying to [zimmerma](#comment%3A133):
> Francois, the ecm patch is not yet included in the last release 6.4.3. I'll see if we can make
> a new release of GMP-ECM.


Upgrading the GMP-ECM spkg to 6.4.4 (which includes the patch attached here) is #14151.



---

archive/issue_comments_123477.json:
```json
{
    "body": "<a id='comment:151'></a>\nReplying to [jpflori](#comment%3A149):\n> Replying to [fbissey](#comment%3A148):\n> > I redid the build with gcc-4.7.1 and I am back with the same failures as before. It could also be that red hat has put some ppc64 specific fix in their gcc. Which exact version of fedora do you have?\n\n> That's gcc110 from http://gcc.gnu.org/wiki/CompileFarm\n> It's stated its \n> \n> ```\n> name   port disk   CPU           Notes\n> gcc110      2TB    4x16x3.55 GHz IBM POWER7 / 64 GB RAM / IBM Power 730 Express server / Fedora 18 ppc64\n> ```\n> \n> From there I gathered\n> \n> ```\n> [jpflori@gcc1-power7 sage-5.7]$ uname -a\n> Linux gcc1-power7.osuosl.org 3.7.2-204.fc18.ppc64 #1 SMP Fri Jan 18 10:44:51 MST 2013 ppc64 ppc64 ppc64 GNU/Linux\n> [jpflori@gcc1-power7 sage-5.7]$ cat /etc/redhat-release \n> Fedora release 18 (Spherical Cow)\n> [jpflori@gcc1-power7 sage-5.7]$ gcc -v\n> Utilisation des specs internes.\n> COLLECT_GCC=/usr/bin/gcc\n> COLLECT_LTO_WRAPPER=/usr/libexec/gcc/ppc64-redhat-linux/4.7.2/lto-wrapper\n> Target: ppc64-redhat-linux\n> Configur\u00e9 avec: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --disable-build-with-cxx --disable-build-poststage1-with-cxx --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --enable-java-awt=gtk --disable-dssi --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --enable-secureplt --with-long-double-128 --build=ppc64-redhat-linux\n> Mod\u00e8le de thread: posix\n> gcc version 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC)\n> [jpflori@gcc1-power7 sage-5.7]$ yum list gcc\n> Modules compl\u00e9mentaires charg\u00e9s\u00a0: auto-update-debuginfo, langpacks, presto,\n>                                 : refresh-packagekit\n> Paquets install\u00e9s\n> gcc.ppc64                         4.7.2-8.fc18                         installed\n> ```\n\n\nI really have to dig the patches from redhat. I have just done a build with gcc-4.8.0 vanilla and there is no changes.",
    "created_at": "2013-04-04T10:02:14Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123477",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:151'></a>
Replying to [jpflori](#comment%3A149):
> Replying to [fbissey](#comment%3A148):
> > I redid the build with gcc-4.7.1 and I am back with the same failures as before. It could also be that red hat has put some ppc64 specific fix in their gcc. Which exact version of fedora do you have?

> That's gcc110 from http://gcc.gnu.org/wiki/CompileFarm
> It's stated its 
> 
> ```
> name   port disk   CPU           Notes
> gcc110      2TB    4x16x3.55 GHz IBM POWER7 / 64 GB RAM / IBM Power 730 Express server / Fedora 18 ppc64
> ```
> 
> From there I gathered
> 
> ```
> [jpflori@gcc1-power7 sage-5.7]$ uname -a
> Linux gcc1-power7.osuosl.org 3.7.2-204.fc18.ppc64 #1 SMP Fri Jan 18 10:44:51 MST 2013 ppc64 ppc64 ppc64 GNU/Linux
> [jpflori@gcc1-power7 sage-5.7]$ cat /etc/redhat-release 
> Fedora release 18 (Spherical Cow)
> [jpflori@gcc1-power7 sage-5.7]$ gcc -v
> Utilisation des specs internes.
> COLLECT_GCC=/usr/bin/gcc
> COLLECT_LTO_WRAPPER=/usr/libexec/gcc/ppc64-redhat-linux/4.7.2/lto-wrapper
> Target: ppc64-redhat-linux
> Configur√© avec: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --disable-build-with-cxx --disable-build-poststage1-with-cxx --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --enable-java-awt=gtk --disable-dssi --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --enable-secureplt --with-long-double-128 --build=ppc64-redhat-linux
> Mod√®le de thread: posix
> gcc version 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC)
> [jpflori@gcc1-power7 sage-5.7]$ yum list gcc
> Modules compl√©mentaires charg√©s¬†: auto-update-debuginfo, langpacks, presto,
>                                 : refresh-packagekit
> Paquets install√©s
> gcc.ppc64                         4.7.2-8.fc18                         installed
> ```


I really have to dig the patches from redhat. I have just done a build with gcc-4.8.0 vanilla and there is no changes.



---

archive/issue_comments_123478.json:
```json
{
    "body": "**Changing dependencies** from \"#12829, #12832, #14098\" to \"#12829, #12832, #14098, #14151\".",
    "created_at": "2013-04-11T14:03:47Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123478",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#12829, #12832, #14098" to "#12829, #12832, #14098, #14151".



---

archive/issue_comments_123479.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,9 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n \n-sage-5.7beta4 **builds** on this machine, but there are a few test failures:\n+There are a few test failures with sage-5.9.beta5 + #14151:\n \n ```\n-\tsage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed\n-\tsage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed\n-\tsage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 2 doctests failed\n+sage -t --long devel/sage/sage/functions/special.py  # 2 doctests failed\n+sage -t --long devel/sage/sage/numerical/optimize.py  # 2 doctests failed\n+sage -t --long devel/sage/doc/en/numerical_sage/cvxopt.rst  # 1 doctest failed\n ```\n-The patch attached solve failures in sage/libs/libecm.pyx when applied to the ecm spkg.\n``````\n",
    "created_at": "2013-04-12T06:56:31Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123479",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,9 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
 
-sage-5.7beta4 **builds** on this machine, but there are a few test failures:
+There are a few test failures with sage-5.9.beta5 + #14151:
 
 ```
-	sage -t  --long -force_lib devel/sage/doc/en/numerical_sage/cvxopt.rst # 1 doctests failed
-	sage -t  --long -force_lib devel/sage/sage/functions/special.py # 2 doctests failed
-	sage -t  --long -force_lib devel/sage/sage/numerical/optimize.py # 2 doctests failed
+sage -t --long devel/sage/sage/functions/special.py  # 2 doctests failed
+sage -t --long devel/sage/sage/numerical/optimize.py  # 2 doctests failed
+sage -t --long devel/sage/doc/en/numerical_sage/cvxopt.rst  # 1 doctest failed
 ```
-The patch attached solve failures in sage/libs/libecm.pyx when applied to the ecm spkg.
``````




---

archive/issue_comments_123480.json:
```json
{
    "body": "<a id='comment:4'></a>\nI am planing to test the new e cm spkg ASAP but I am a bit buried into reporting at work. Upstream cvxopt provided me with a cvxopt 1.1.6beta to try to solve the issue. It is on my todo list as well. Finally from Jean-Pierre's test it look like the ecl/maxima problem is one last gcc issue on ppc. I heve to try patch from fedora to gcc to confirm this.",
    "created_at": "2013-04-12T07:17:35Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123480",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>
I am planing to test the new e cm spkg ASAP but I am a bit buried into reporting at work. Upstream cvxopt provided me with a cvxopt 1.1.6beta to try to solve the issue. It is on my todo list as well. Finally from Jean-Pierre's test it look like the ecl/maxima problem is one last gcc issue on ppc. I heve to try patch from fedora to gcc to confirm this.



---

archive/issue_comments_123481.json:
```json
{
    "body": "<a id='comment:5'></a>\nAny news regarding cvxopt?",
    "created_at": "2013-04-17T16:20:06Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123481",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Any news regarding cvxopt?



---

archive/issue_comments_123482.json:
```json
{
    "body": "<a id='comment:6'></a>\nyes, the beta sent to m e by upstream seems to solve all the problems.",
    "created_at": "2013-04-17T20:12:36Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123482",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'></a>
yes, the beta sent to m e by upstream seems to solve all the problems.



---

archive/issue_comments_123483.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe cvxopt spkg at #12832 needs review.",
    "created_at": "2013-05-15T06:56:16Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123483",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
The cvxopt spkg at #12832 needs review.



---

archive/issue_comments_123484.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,7 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n \n-There are a few test failures with sage-5.9.beta5 + #14151:\n+This is the only test failure with sage-5.10.beta0 + #12832:\n \n ```\n sage -t --long devel/sage/sage/functions/special.py  # 2 doctests failed\n-sage -t --long devel/sage/sage/numerical/optimize.py  # 2 doctests failed\n-sage -t --long devel/sage/doc/en/numerical_sage/cvxopt.rst  # 1 doctest failed\n ```\n``````\n",
    "created_at": "2013-05-15T06:56:16Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123484",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,7 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
 
-There are a few test failures with sage-5.9.beta5 + #14151:
+This is the only test failure with sage-5.10.beta0 + #12832:
 
 ```
 sage -t --long devel/sage/sage/functions/special.py  # 2 doctests failed
-sage -t --long devel/sage/sage/numerical/optimize.py  # 2 doctests failed
-sage -t --long devel/sage/doc/en/numerical_sage/cvxopt.rst  # 1 doctest failed
 ```
``````




---

archive/issue_comments_123485.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,5 +3,34 @@\n This is the only test failure with sage-5.10.beta0 + #12832:\n \n ```\n-sage -t --long devel/sage/sage/functions/special.py  # 2 doctests failed\n+sage -t --long devel/sage/sage/functions/special.py\n+**********************************************************************\n+File \"devel/sage/sage/functions/special.py\", line 1614, in sage.functions.special.elliptic_j.EllipticKC\n+Failed example:\n+    elliptic_f(RR(pi/2), 0.5)\n+Expected:\n+    1.8540746773\n+Got:\n+    <BLANKLINE>\n+    ;;;\n+    ;;; Stack overflow.\n+    ;;; Jumping to the outermost toplevel prompt\n+    ;;;\n+    <BLANKLINE>\n+    sage180\n+**********************************************************************\n+File \"devel/sage/sage/functions/special.py\", line 1623, in sage.functions.special.elliptic_j.EllipticKC.__init__\n+Failed example:\n+    elliptic_f(RR(pi/2), 0.5)\n+Expected:\n+    1.8540746773\n+Got:\n+    <BLANKLINE>\n+    ;;;\n+    ;;; Stack overflow.\n+    ;;; Jumping to the outermost toplevel prompt\n+    ;;;\n+    <BLANKLINE>\n+    sage182\n+**********************************************************************\n ```\n``````\n",
    "created_at": "2013-05-15T06:59:38Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123485",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,5 +3,34 @@
 This is the only test failure with sage-5.10.beta0 + #12832:
 
 ```
-sage -t --long devel/sage/sage/functions/special.py  # 2 doctests failed
+sage -t --long devel/sage/sage/functions/special.py
+**********************************************************************
+File "devel/sage/sage/functions/special.py", line 1614, in sage.functions.special.elliptic_j.EllipticKC
+Failed example:
+    elliptic_f(RR(pi/2), 0.5)
+Expected:
+    1.8540746773
+Got:
+    <BLANKLINE>
+    ;;;
+    ;;; Stack overflow.
+    ;;; Jumping to the outermost toplevel prompt
+    ;;;
+    <BLANKLINE>
+    sage180
+**********************************************************************
+File "devel/sage/sage/functions/special.py", line 1623, in sage.functions.special.elliptic_j.EllipticKC.__init__
+Failed example:
+    elliptic_f(RR(pi/2), 0.5)
+Expected:
+    1.8540746773
+Got:
+    <BLANKLINE>
+    ;;;
+    ;;; Stack overflow.
+    ;;; Jumping to the outermost toplevel prompt
+    ;;;
+    <BLANKLINE>
+    sage182
+**********************************************************************
 ```
``````




---

archive/issue_comments_123486.json:
```json
{
    "body": "<a id='comment:9'></a>\nJeroen, which machine do you use to work on this ticket? Do I have access to it?\n\nPaul",
    "created_at": "2013-05-15T07:05:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123486",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:9'></a>
Jeroen, which machine do you use to work on this ticket? Do I have access to it?

Paul



---

archive/issue_comments_123487.json:
```json
{
    "body": "<a id='comment:0'></a>\nI'm using the skynet machine `silius`, which is back online.",
    "created_at": "2013-05-15T08:11:01Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123487",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:0'></a>
I'm using the skynet machine `silius`, which is back online.



---

archive/issue_comments_123488.json:
```json
{
    "body": "<a id='comment:1'></a>\nIs silius still running SLES11? If so which SP? It seems that Jean-Pierre had more luck with that last bug using fedora 18. So I am suspecting something in the toolchain - but it could be ld, glibc or even kernel stuff rather than just gcc.",
    "created_at": "2013-05-15T09:36:20Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123488",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>
Is silius still running SLES11? If so which SP? It seems that Jean-Pierre had more luck with that last bug using fedora 18. So I am suspecting something in the toolchain - but it could be ld, glibc or even kernel stuff rather than just gcc.



---

archive/issue_comments_123489.json:
```json
{
    "body": "<a id='comment:2'></a>\nAccording to `/etc/issue`, it is `SUSE Linux Enterprise Server 11 SP1`.",
    "created_at": "2013-05-15T09:44:32Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123489",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
According to `/etc/issue`, it is `SUSE Linux Enterprise Server 11 SP1`.



---

archive/issue_comments_123490.json:
```json
{
    "body": "<a id='comment:163'></a>\nReplying to [fbissey](#comment%3A154):\n> Finally from Jean-Pierre's test it look like the ecl/maxima problem is one last gcc issue on ppc. I heve to try patch from fedora to gcc to confirm this.\n\nI suppose you are refering to the `special.py` failure? Why do you think it is a GCC issue?",
    "created_at": "2013-05-24T10:18:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123490",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:163'></a>
Replying to [fbissey](#comment%3A154):
> Finally from Jean-Pierre's test it look like the ecl/maxima problem is one last gcc issue on ppc. I heve to try patch from fedora to gcc to confirm this.

I suppose you are refering to the `special.py` failure? Why do you think it is a GCC issue?



---

archive/issue_comments_123491.json:
```json
{
    "body": "<a id='comment:164'></a>\nReplying to [fbissey](#comment%3A161):\n> Is silius still running SLES11? If so which SP? It seems that Jean-Pierre had more luck with that last bug using fedora 18. So I am suspecting something in the toolchain - but it could be ld, glibc or even kernel stuff rather than just gcc.\n\nIf there is another machine on which `special.py` works, then we can really investigate. jpflori: can you retest with the latest Sage beta? If everything works there, is there any chance I could get access to that machine?",
    "created_at": "2013-05-24T10:25:46Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123491",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:164'></a>
Replying to [fbissey](#comment%3A161):
> Is silius still running SLES11? If so which SP? It seems that Jean-Pierre had more luck with that last bug using fedora 18. So I am suspecting something in the toolchain - but it could be ld, glibc or even kernel stuff rather than just gcc.

If there is another machine on which `special.py` works, then we can really investigate. jpflori: can you retest with the latest Sage beta? If everything works there, is there any chance I could get access to that machine?



---

archive/issue_comments_123492.json:
```json
{
    "body": "<a id='comment:5'></a>\nYes, this is the last failure we observe. It is related to maxima/ecl. I have no proof of it being caused by GCC. Just a hunch based on the fact that the first hurdle we had in the port was that maxima wouldn't build because the version of GCC used miscompiled ecl. Furthermore Jean-Pierre Flori reports that he doesn't observe the failure on fedora 18 whose toolchain is based on gcc-4.8.0.\n\nMy gut feeling is that an element of the toolchain is responsible.",
    "created_at": "2013-05-24T10:29:12Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123492",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
Yes, this is the last failure we observe. It is related to maxima/ecl. I have no proof of it being caused by GCC. Just a hunch based on the fact that the first hurdle we had in the port was that maxima wouldn't build because the version of GCC used miscompiled ecl. Furthermore Jean-Pierre Flori reports that he doesn't observe the failure on fedora 18 whose toolchain is based on gcc-4.8.0.

My gut feeling is that an element of the toolchain is responsible.



---

archive/issue_comments_123493.json:
```json
{
    "body": "<a id='comment:166'></a>\nReplying to [jdemeyer](#comment%3A164):\n> Replying to [fbissey](#comment%3A161):\n> > Is silius still running SLES11? If so which SP? It seems that Jean-Pierre had more luck with that last bug using fedora 18. So I am suspecting something in the toolchain - but it could be ld, glibc or even kernel stuff rather than just gcc.\n\n> If there is another machine on which `special.py` works, then we can really investigate. jpflori: can you retest with the latest Sage beta? If everything works there, is there any chance I could get access to that machine?\nI've just launched a build of 5.10.beta5 (not official, but at least there is the latest ATLAS there).\nAnd yes I guess you can access it, it's gcc110 on GCC Compile Farm.",
    "created_at": "2013-05-24T10:33:08Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123493",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:166'></a>
Replying to [jdemeyer](#comment%3A164):
> Replying to [fbissey](#comment%3A161):
> > Is silius still running SLES11? If so which SP? It seems that Jean-Pierre had more luck with that last bug using fedora 18. So I am suspecting something in the toolchain - but it could be ld, glibc or even kernel stuff rather than just gcc.

> If there is another machine on which `special.py` works, then we can really investigate. jpflori: can you retest with the latest Sage beta? If everything works there, is there any chance I could get access to that machine?
I've just launched a build of 5.10.beta5 (not official, but at least there is the latest ATLAS there).
And yes I guess you can access it, it's gcc110 on GCC Compile Farm.



---

archive/issue_comments_123494.json:
```json
{
    "body": "<a id='comment:167'></a>\nReplying to [jpflori](#comment%3A166):\n> it's gcc110 on GCC Compile Farm.\n\nAnd how should I access it?",
    "created_at": "2013-05-24T11:34:48Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123494",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:167'></a>
Replying to [jpflori](#comment%3A166):
> it's gcc110 on GCC Compile Farm.

And how should I access it?



---

archive/issue_comments_123495.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [fbissey](#comment%3A165):\n> Yes, this is the last failure we observe. It is related to maxima/ecl. I have no proof of it being caused by GCC. Just a hunch based on the fact that the first hurdle we had in the port was that maxima wouldn't build because the version of GCC used miscompiled ecl. Furthermore Jean-Pierre Flori reports that he doesn't observe the failure on fedora 18 whose toolchain is based on gcc-4.8.0.\n> \n> My gut feeling is that an element of the toolchain is responsible.\n\n\nDid you try to build ECL with `-mcpu=power4` (as opposed to `power7`, say)?  (Maxima will pick up ECL's flags, too.)\n\nAlthough both Maxima and ECL have meanwhile been upgraded at least once, I previously did have more luck with that.  (I'm not entirely sure, but IIRC GCC 4.4.6 did successfully build ECL and Maxima even without that, and with much fewer doctest failures, and especially ;-) not in `special.py`.  Same with later GCC versions *and* `-mcpu=power4`.)\n\nNote that distros' GCCs generally use more generic target CPU types than a GCC you build natively.",
    "created_at": "2013-05-24T11:36:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123495",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
Replying to [fbissey](#comment%3A165):
> Yes, this is the last failure we observe. It is related to maxima/ecl. I have no proof of it being caused by GCC. Just a hunch based on the fact that the first hurdle we had in the port was that maxima wouldn't build because the version of GCC used miscompiled ecl. Furthermore Jean-Pierre Flori reports that he doesn't observe the failure on fedora 18 whose toolchain is based on gcc-4.8.0.
> 
> My gut feeling is that an element of the toolchain is responsible.


Did you try to build ECL with `-mcpu=power4` (as opposed to `power7`, say)?  (Maxima will pick up ECL's flags, too.)

Although both Maxima and ECL have meanwhile been upgraded at least once, I previously did have more luck with that.  (I'm not entirely sure, but IIRC GCC 4.4.6 did successfully build ECL and Maxima even without that, and with much fewer doctest failures, and especially ;-) not in `special.py`.  Same with later GCC versions *and* `-mcpu=power4`.)

Note that distros' GCCs generally use more generic target CPU types than a GCC you build natively.



---

archive/issue_comments_123496.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n \n-This is the only test failure with sage-5.10.beta0 + #12832:\n+This is the only test failure with sage-5.10.beta4:\n \n ```\n sage -t --long devel/sage/sage/functions/special.py\n``````\n",
    "created_at": "2013-05-24T11:48:41Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123496",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
 
-This is the only test failure with sage-5.10.beta0 + #12832:
+This is the only test failure with sage-5.10.beta4:
 
 ```
 sage -t --long devel/sage/sage/functions/special.py
``````




---

archive/issue_comments_123497.json:
```json
{
    "body": "<a id='comment:170'></a>\nReplying to [jdemeyer](#comment%3A167):\n> Replying to [jpflori](#comment%3A166):\n> > it's gcc110 on GCC Compile Farm.\n\n> And how should I access it?\nAsk for an account foolowing the instructions there:\nhttp://gcc.gnu.org/wiki/CompileFarm\nsaying you're working on (the GPL licensed) Sage.\nThe guy in charge is quite reactive.",
    "created_at": "2013-05-24T13:25:21Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123497",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:170'></a>
Replying to [jdemeyer](#comment%3A167):
> Replying to [jpflori](#comment%3A166):
> > it's gcc110 on GCC Compile Farm.

> And how should I access it?
Ask for an account foolowing the instructions there:
http://gcc.gnu.org/wiki/CompileFarm
saying you're working on (the GPL licensed) Sage.
The guy in charge is quite reactive.



---

archive/issue_comments_123498.json:
```json
{
    "body": "<a id='comment:1'></a>\nAnd with 5.10.beta5 \"make ptestlong\" finishes without any error on gcc110!",
    "created_at": "2013-05-24T13:26:02Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123498",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>
And with 5.10.beta5 "make ptestlong" finishes without any error on gcc110!



---

archive/issue_comments_123499.json:
```json
{
    "body": "<a id='comment:172'></a>\nReplying to [jpflori](#comment%3A171):\n> And with 5.10.beta5 \"make ptestlong\" finishes without any error on gcc110!\n\n\nHaha, beta5...\n\n\n\n\nWhat does\n\n```sh\n$ gcc -v -x c /dev/null -S -o /dev/null\n```\ngive?",
    "created_at": "2013-05-24T13:41:06Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123499",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:172'></a>
Replying to [jpflori](#comment%3A171):
> And with 5.10.beta5 "make ptestlong" finishes without any error on gcc110!


Haha, beta5...




What does

```sh
$ gcc -v -x c /dev/null -S -o /dev/null
```
give?



---

archive/issue_comments_123500.json:
```json
{
    "body": "<a id='comment:3'></a>\n\n```\n[jpflori@gcc1-power7 ~]$ sh -c \"gcc -v -x c /dev/null -S -o /dev/null\"\nUtilisation des specs internes.\nCOLLECT_GCC=/usr/bin/gcc\nTarget: ppc64-redhat-linux\nConfigur\u00e9 avec: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --disable-build-with-cxx --disable-build-poststage1-with-cxx --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --enable-java-awt=gtk --disable-dssi --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --enable-secureplt --with-long-double-128 --build=ppc64-redhat-linux\nMod\u00e8le de thread: posix\ngcc version 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC) \nCOLLECT_GCC_OPTIONS='-v' '-S' '-o' '/dev/null'\n /usr/libexec/gcc/ppc64-redhat-linux/4.7.2/cc1 -quiet -v -D__unix__ -D__gnu_linux__ -D__linux__ -Dunix -D__unix -Dlinux -D__linux -Asystem=linux -Asystem=unix -Asystem=posix /dev/null -msecure-plt -quiet -dumpbase null -auxbase-strip /dev/null -version -o /dev/null\nGNU C (GCC) version 4.7.2 20121109 (Red Hat 4.7.2-8) (ppc64-redhat-linux)\n\tcompiled by GNU C version 4.7.2 20121109 (Red Hat 4.7.2-8), GMP version 5.0.5, MPFR version 3.1.1, MPC version 0.9\nheuristiques GGC: --param ggc-min-expand=100 --param ggc-min-heapsize=131072\nle r\u00e9pertoire \u00ab /usr/lib/gcc/ppc64-redhat-linux/4.7.2/include-fixed \u00bb est ignor\u00e9 car inexistant\nle r\u00e9pertoire \u00ab /usr/lib/gcc/ppc64-redhat-linux/4.7.2/../../../../ppc64-redhat-linux/include \u00bb est ignor\u00e9 car inexistant\nla recherche pour #include \"...\" d\u00e9bute ici :\nla recherche pour #include <...> d\u00e9bute ici:\n /usr/lib/gcc/ppc64-redhat-linux/4.7.2/include\n /usr/local/include\n /usr/include\nFin de la liste de recherche.\nGNU C (GCC) version 4.7.2 20121109 (Red Hat 4.7.2-8) (ppc64-redhat-linux)\n\tcompiled by GNU C version 4.7.2 20121109 (Red Hat 4.7.2-8), GMP version 5.0.5, MPFR version 3.1.1, MPC version 0.9\nheuristiques GGC: --param ggc-min-expand=100 --param ggc-min-heapsize=131072\nCompiler executable checksum: cad711fd18d29c74d62d6fd41cd26eeb\nCOMPILER_PATH=/usr/libexec/gcc/ppc64-redhat-linux/4.7.2/:/usr/libexec/gcc/ppc64-redhat-linux/4.7.2/:/usr/libexec/gcc/ppc64-redhat-linux/:/usr/lib/gcc/ppc64-redhat-linux/4.7.2/:/usr/lib/gcc/ppc64-redhat-linux/\nLIBRARY_PATH=/usr/lib/gcc/ppc64-redhat-linux/4.7.2/:/usr/lib/gcc/ppc64-redhat-linux/4.7.2/../../../../lib64/:/lib/../lib64/:/usr/lib/../lib64/:/usr/lib/gcc/ppc64-redhat-linux/4.7.2/../../../:/lib/:/usr/lib/\nCOLLECT_GCC_OPTIONS='-v' '-S' '-o' '/dev/null'\n```",
    "created_at": "2013-05-24T13:44:50Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123500",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:3'></a>

```
[jpflori@gcc1-power7 ~]$ sh -c "gcc -v -x c /dev/null -S -o /dev/null"
Utilisation des specs internes.
COLLECT_GCC=/usr/bin/gcc
Target: ppc64-redhat-linux
Configur√© avec: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --disable-build-with-cxx --disable-build-poststage1-with-cxx --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --enable-java-awt=gtk --disable-dssi --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --enable-secureplt --with-long-double-128 --build=ppc64-redhat-linux
Mod√®le de thread: posix
gcc version 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC) 
COLLECT_GCC_OPTIONS='-v' '-S' '-o' '/dev/null'
 /usr/libexec/gcc/ppc64-redhat-linux/4.7.2/cc1 -quiet -v -D__unix__ -D__gnu_linux__ -D__linux__ -Dunix -D__unix -Dlinux -D__linux -Asystem=linux -Asystem=unix -Asystem=posix /dev/null -msecure-plt -quiet -dumpbase null -auxbase-strip /dev/null -version -o /dev/null
GNU C (GCC) version 4.7.2 20121109 (Red Hat 4.7.2-8) (ppc64-redhat-linux)
	compiled by GNU C version 4.7.2 20121109 (Red Hat 4.7.2-8), GMP version 5.0.5, MPFR version 3.1.1, MPC version 0.9
heuristiques GGC: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
le r√©pertoire ¬´ /usr/lib/gcc/ppc64-redhat-linux/4.7.2/include-fixed ¬ª est ignor√© car inexistant
le r√©pertoire ¬´ /usr/lib/gcc/ppc64-redhat-linux/4.7.2/../../../../ppc64-redhat-linux/include ¬ª est ignor√© car inexistant
la recherche pour #include "..." d√©bute ici :
la recherche pour #include <...> d√©bute ici:
 /usr/lib/gcc/ppc64-redhat-linux/4.7.2/include
 /usr/local/include
 /usr/include
Fin de la liste de recherche.
GNU C (GCC) version 4.7.2 20121109 (Red Hat 4.7.2-8) (ppc64-redhat-linux)
	compiled by GNU C version 4.7.2 20121109 (Red Hat 4.7.2-8), GMP version 5.0.5, MPFR version 3.1.1, MPC version 0.9
heuristiques GGC: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: cad711fd18d29c74d62d6fd41cd26eeb
COMPILER_PATH=/usr/libexec/gcc/ppc64-redhat-linux/4.7.2/:/usr/libexec/gcc/ppc64-redhat-linux/4.7.2/:/usr/libexec/gcc/ppc64-redhat-linux/:/usr/lib/gcc/ppc64-redhat-linux/4.7.2/:/usr/lib/gcc/ppc64-redhat-linux/
LIBRARY_PATH=/usr/lib/gcc/ppc64-redhat-linux/4.7.2/:/usr/lib/gcc/ppc64-redhat-linux/4.7.2/../../../../lib64/:/lib/../lib64/:/usr/lib/../lib64/:/usr/lib/gcc/ppc64-redhat-linux/4.7.2/../../../:/lib/:/usr/lib/
COLLECT_GCC_OPTIONS='-v' '-S' '-o' '/dev/null'
```



---

archive/issue_events_093470.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93470"
}
```



---

archive/issue_events_093471.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93471"
}
```



---

archive/issue_comments_123501.json:
```json
{
    "body": "<a id='comment:5'></a>\n5.12.beta1 on SLES11SP1 with gcc 4.8.1 and binutils 2.22. Still problems in functions/special.py - there is one more failure there. I also got two timeout but I haven't checked yet increasing the time limit.",
    "created_at": "2013-08-18T23:11:56Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123501",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
5.12.beta1 on SLES11SP1 with gcc 4.8.1 and binutils 2.22. Still problems in functions/special.py - there is one more failure there. I also got two timeout but I haven't checked yet increasing the time limit.



---

archive/issue_comments_123502.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,15 +1,14 @@\n Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. \n \n-This is the only test failure with sage-5.10.beta4:\n+This is the only test failure with sage-5.12.beta1:\n \n ```\n-sage -t --long devel/sage/sage/functions/special.py\n+sage -t devel/sage/sage/functions/special.py\n **********************************************************************\n-File \"devel/sage/sage/functions/special.py\", line 1614, in sage.functions.special.elliptic_j.EllipticKC\n+File \"devel/sage/sage/functions/special.py\", line 853, in sage.functions.special.elliptic_j.inverse_jacobi\n Failed example:\n-    elliptic_f(RR(pi/2), 0.5)\n-Expected:\n-    1.8540746773\n+    P = plot(inverse_jacobi('sn', x, 0.5), 0, 1, plot_points=20)\n+Expected nothing\n Got:\n     <BLANKLINE>\n     ;;;\n@@ -17,13 +16,12 @@\n     ;;; Jumping to the outermost toplevel prompt\n     ;;;\n     <BLANKLINE>\n-    sage180\n **********************************************************************\n-File \"devel/sage/sage/functions/special.py\", line 1623, in sage.functions.special.elliptic_j.EllipticKC.__init__\n+File \"devel/sage/sage/functions/special.py\", line 1014, in sage.functions.special.elliptic_j.EllipticKC\n Failed example:\n     elliptic_f(RR(pi/2), 0.5)\n Expected:\n-    1.8540746773\n+    1.85407467730137\n Got:\n     <BLANKLINE>\n     ;;;\n@@ -31,6 +29,25 @@\n     ;;; Jumping to the outermost toplevel prompt\n     ;;;\n     <BLANKLINE>\n-    sage182\n+    sage172\n **********************************************************************\n+File \"devel/sage/sage/functions/special.py\", line 1023, in sage.functions.special.elliptic_j.EllipticKC.__init__\n+Failed example:\n+    elliptic_f(RR(pi/2), 0.5)\n+Expected:\n+    1.85407467730137\n+Got:\n+    <BLANKLINE>\n+    ;;;\n+    ;;; Stack overflow.\n+    ;;; Jumping to the outermost toplevel prompt\n+    ;;;\n+    <BLANKLINE>\n+    sage174\n+**********************************************************************\n+3 items had failures:\n+   1 of   3 in sage.functions.special.elliptic_j.EllipticKC\n+   1 of   3 in sage.functions.special.elliptic_j.EllipticKC.__init__\n+   1 of   6 in sage.functions.special.elliptic_j.inverse_jacobi\n+    [96 tests, 3 failures, 5.19 s]\n ```\n``````\n",
    "created_at": "2013-08-18T23:11:56Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123502",
    "user": "https://github.com/kiwifb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,15 +1,14 @@
 Port Sage so that it builds and passes its full test suite on the new IBM Power 7 architecture running SUSE Linux. 
 
-This is the only test failure with sage-5.10.beta4:
+This is the only test failure with sage-5.12.beta1:
 
 ```
-sage -t --long devel/sage/sage/functions/special.py
+sage -t devel/sage/sage/functions/special.py
 **********************************************************************
-File "devel/sage/sage/functions/special.py", line 1614, in sage.functions.special.elliptic_j.EllipticKC
+File "devel/sage/sage/functions/special.py", line 853, in sage.functions.special.elliptic_j.inverse_jacobi
 Failed example:
-    elliptic_f(RR(pi/2), 0.5)
-Expected:
-    1.8540746773
+    P = plot(inverse_jacobi('sn', x, 0.5), 0, 1, plot_points=20)
+Expected nothing
 Got:
     <BLANKLINE>
     ;;;
@@ -17,13 +16,12 @@
     ;;; Jumping to the outermost toplevel prompt
     ;;;
     <BLANKLINE>
-    sage180
 **********************************************************************
-File "devel/sage/sage/functions/special.py", line 1623, in sage.functions.special.elliptic_j.EllipticKC.__init__
+File "devel/sage/sage/functions/special.py", line 1014, in sage.functions.special.elliptic_j.EllipticKC
 Failed example:
     elliptic_f(RR(pi/2), 0.5)
 Expected:
-    1.8540746773
+    1.85407467730137
 Got:
     <BLANKLINE>
     ;;;
@@ -31,6 +29,25 @@
     ;;; Jumping to the outermost toplevel prompt
     ;;;
     <BLANKLINE>
-    sage182
+    sage172
 **********************************************************************
+File "devel/sage/sage/functions/special.py", line 1023, in sage.functions.special.elliptic_j.EllipticKC.__init__
+Failed example:
+    elliptic_f(RR(pi/2), 0.5)
+Expected:
+    1.85407467730137
+Got:
+    <BLANKLINE>
+    ;;;
+    ;;; Stack overflow.
+    ;;; Jumping to the outermost toplevel prompt
+    ;;;
+    <BLANKLINE>
+    sage174
+**********************************************************************
+3 items had failures:
+   1 of   3 in sage.functions.special.elliptic_j.EllipticKC
+   1 of   3 in sage.functions.special.elliptic_j.EllipticKC.__init__
+   1 of   6 in sage.functions.special.elliptic_j.inverse_jacobi
+    [96 tests, 3 failures, 5.19 s]
 ```
``````




---

archive/issue_comments_123503.json:
```json
{
    "body": "<a id='comment:6'></a>\nOn gcc110, no problems at all with current git develop (6.1.beta2) :)",
    "created_at": "2013-12-25T16:00:27Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123503",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>
On gcc110, no problems at all with current git develop (6.1.beta2) :)



---

archive/issue_comments_123504.json:
```json
{
    "body": "<a id='comment:7'></a>\nI spoke too fast, it seems it was with 6.0.\nI have problems with the ncurses ada bindings with 6.1 betas.",
    "created_at": "2013-12-25T16:18:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123504",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
I spoke too fast, it seems it was with 6.0.
I have problems with the ncurses ada bindings with 6.1 betas.



---

archive/issue_comments_123505.json:
```json
{
    "body": "<a id='comment:8'></a>\nI'm getting noisy, in fact it was the converse, the problem was with 6.0, not 6.1 betas.",
    "created_at": "2013-12-25T16:20:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123505",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>
I'm getting noisy, in fact it was the converse, the problem was with 6.0, not 6.1 betas.



---

archive/issue_comments_123506.json:
```json
{
    "body": "<a id='comment:9'></a>\nI still got the failures in special.py on sles11sp1. I have another amusing one that I can produce at will:\n\n```\nsage -t --long src/sage/tests/cmdline.py\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 467, in sage.tests.cmdline.test_executable\nFailed example:\n    ret, err\nExpected:\n    (0, '')\nGot:\n    (1, 'Traceback (most recent call last):\\n  File \"/hpc/scratch/frb15/sandbox/sage-6.1.beta3/src/bin/sage-dev\", line 334, in <module>\\n    parser = parser_from_object(DEV)\\n  File \"/hpc/scratch/frb15/sandbox/sage-6.1.beta3/src/bin/sage-dev\", line 258, in parser_from_object\\n    parser = argparse.ArgumentParser(*args, **kwds)\\n  File \"/hpc/scratch/frb15/sandbox/sage-6.1.beta3/local/lib/python/argparse.py\", line 1600, in __init__\\n    help=_(\\'show this help message and exit\\'))\\n  File \"/hpc/scratch/frb15/sandbox/sage-6.1.beta3/local/lib/python/argparse.py\", line 1291, in add_argument\\n    self._get_formatter()._format_args(action, None)\\n  File \"/hpc/scratch/frb15/sandbox/sage-6.1.beta3/local/lib/python/argparse.py\", line 2314, in _get_formatter\\n    return self.formatter_class(prog=self.prog)\\n  File \"/hpc/scratch/frb15/sandbox/sage-6.1.beta3/src/bin/sage-dev\", line 37, in __init__\\n    width=DEV._sagedev._UI._get_dimensions()[1]-2, *args, **kwds)\\n  File \"/hpc/scratch/frb15/sandbox/sage-6.1.beta3/local/lib/python2.7/site-packages/sage/dev/cmd_line_interface.py\", line 264, in _get_dimensions\\n    fd = os.open(os.ctermid(), os.O_RDONLY)\\nOSError: [Errno 6] No such device or address: \\'/dev/tty\\'\\n')\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 474, in sage.tests.cmdline.test_executable\nFailed example:\n    ('usage: sage-dev' in out) or ('Developer interface disabled' in out)\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   2 of 210 in sage.tests.cmdline.test_executable\n    [209 tests, 2 failures, 136.44 s]\n```\nFor a little bit of background, I used a compute node to build/run the test suite. Which means that the testing was submitted as a batch job using loadleveler (a batch queue manager from IBM). loadleveler starts jobs without a tty which cause these errors. testing from the command line proper the failures just disappear.",
    "created_at": "2014-01-04T20:30:41Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123506",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>
I still got the failures in special.py on sles11sp1. I have another amusing one that I can produce at will:

```
sage -t --long src/sage/tests/cmdline.py
**********************************************************************
File "src/sage/tests/cmdline.py", line 467, in sage.tests.cmdline.test_executable
Failed example:
    ret, err
Expected:
    (0, '')
Got:
    (1, 'Traceback (most recent call last):\n  File "/hpc/scratch/frb15/sandbox/sage-6.1.beta3/src/bin/sage-dev", line 334, in <module>\n    parser = parser_from_object(DEV)\n  File "/hpc/scratch/frb15/sandbox/sage-6.1.beta3/src/bin/sage-dev", line 258, in parser_from_object\n    parser = argparse.ArgumentParser(*args, **kwds)\n  File "/hpc/scratch/frb15/sandbox/sage-6.1.beta3/local/lib/python/argparse.py", line 1600, in __init__\n    help=_(\'show this help message and exit\'))\n  File "/hpc/scratch/frb15/sandbox/sage-6.1.beta3/local/lib/python/argparse.py", line 1291, in add_argument\n    self._get_formatter()._format_args(action, None)\n  File "/hpc/scratch/frb15/sandbox/sage-6.1.beta3/local/lib/python/argparse.py", line 2314, in _get_formatter\n    return self.formatter_class(prog=self.prog)\n  File "/hpc/scratch/frb15/sandbox/sage-6.1.beta3/src/bin/sage-dev", line 37, in __init__\n    width=DEV._sagedev._UI._get_dimensions()[1]-2, *args, **kwds)\n  File "/hpc/scratch/frb15/sandbox/sage-6.1.beta3/local/lib/python2.7/site-packages/sage/dev/cmd_line_interface.py", line 264, in _get_dimensions\n    fd = os.open(os.ctermid(), os.O_RDONLY)\nOSError: [Errno 6] No such device or address: \'/dev/tty\'\n')
**********************************************************************
File "src/sage/tests/cmdline.py", line 474, in sage.tests.cmdline.test_executable
Failed example:
    ('usage: sage-dev' in out) or ('Developer interface disabled' in out)
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   2 of 210 in sage.tests.cmdline.test_executable
    [209 tests, 2 failures, 136.44 s]
```
For a little bit of background, I used a compute node to build/run the test suite. Which means that the testing was submitted as a batch job using loadleveler (a batch queue manager from IBM). loadleveler starts jobs without a tty which cause these errors. testing from the command line proper the failures just disappear.



---

archive/issue_comments_123507.json:
```json
{
    "body": "<a id='comment:0'></a>\nDid someone try to build pillow (included in latest betas)?\nIt seems to fail on gcc110 with ld yielding \"escamotage incompatible\" which is very nice french but not that easy to decipher without context.\nAnyway it seems there is some 32/64 bit issue here, and the corresponding english error message would be \"skipping incompatible library\" which is more talkative.",
    "created_at": "2014-01-21T09:57:07Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123507",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:0'></a>
Did someone try to build pillow (included in latest betas)?
It seems to fail on gcc110 with ld yielding "escamotage incompatible" which is very nice french but not that easy to decipher without context.
Anyway it seems there is some 32/64 bit issue here, and the corresponding english error message would be "skipping incompatible library" which is more talkative.



---

archive/issue_comments_123508.json:
```json
{
    "body": "<a id='comment:1'></a>\nUsually because you try to link a 64 bit object with a 32bit library. Yes it probably find the wrong version of one of the libraries (ziplib, png, jpeg) the setup script is not very smart but I thought we had ourselves covered. Would you by any chance have some of the aforementioned libraries installed in 32bit but not 64?",
    "created_at": "2014-01-21T10:04:41Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123508",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>
Usually because you try to link a 64 bit object with a 32bit library. Yes it probably find the wrong version of one of the libraries (ziplib, png, jpeg) the setup script is not very smart but I thought we had ourselves covered. Would you by any chance have some of the aforementioned libraries installed in 32bit but not 64?



---

archive/issue_comments_123509.json:
```json
{
    "body": "<a id='comment:2'></a>\nI'll have a look.\nSorry for the rough report, I basically just wanted to know if that also happened to someone else, so I did not investigate it yet.",
    "created_at": "2014-01-21T10:08:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123509",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:2'></a>
I'll have a look.
Sorry for the rough report, I basically just wanted to know if that also happened to someone else, so I did not investigate it yet.



---

archive/issue_comments_123510.json:
```json
{
    "body": "<a id='comment:3'></a>\nI have 6.1 beta3 built here with pillow and without a hitch. I honestly don't think it is a power7 issue per see. setup.py is not very smart at detecting stuff so you have to consider all corners. I have been in the latest gentoo bug concerning building pillow as well as the pillow ticket here. This stuff is fragile.",
    "created_at": "2014-01-21T10:12:34Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123510",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>
I have 6.1 beta3 built here with pillow and without a hitch. I honestly don't think it is a power7 issue per see. setup.py is not very smart at detecting stuff so you have to consider all corners. I have been in the latest gentoo bug concerning building pillow as well as the pillow ticket here. This stuff is fragile.



---

archive/issue_comments_123511.json:
```json
{
    "body": "<a id='comment:4'></a>\nOk, the problem is simply with liblcms install on gcc110.\nFor some reason there is no liblcms.so in /usr/lib64 (although different versions of 64-bit liblcms.so.* are available there), but one in /usr/lib pointing to a 32 bit version.",
    "created_at": "2014-01-21T15:00:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123511",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>
Ok, the problem is simply with liblcms install on gcc110.
For some reason there is no liblcms.so in /usr/lib64 (although different versions of 64-bit liblcms.so.* are available there), but one in /usr/lib pointing to a 32 bit version.



---

archive/issue_comments_123512.json:
```json
{
    "body": "<a id='comment:5'></a>\nThat probably mean that there is a 64bit dev rpm not installed. But that's what I suspected.",
    "created_at": "2014-01-21T18:08:54Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123512",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
That probably mean that there is a 64bit dev rpm not installed. But that's what I suspected.



---

archive/issue_events_093472.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93472"
}
```



---

archive/issue_events_093473.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93473"
}
```



---

archive/issue_events_093474.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-05-02T07:31:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93474"
}
```



---

archive/issue_comments_123513.json:
```json
{
    "body": "<a id='comment:7'></a>\nSo I finally pointed the finger to glibc/kernel headers. To build sage on SLES11SP1 and probably some other \"enterprise distro\" that are far behind in their toolchain stack on power7 I recommend IBM advance toolchain 7.0.3 and later.\n[http://ibm.co/AdvanceToolchain](http://ibm.co/AdvanceToolchain)\nIt include its own glibc and that's the killer feature to get through the final issue I think. It is possible that gcc also includes a few IBM patches.",
    "created_at": "2014-05-02T07:31:20Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123513",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
So I finally pointed the finger to glibc/kernel headers. To build sage on SLES11SP1 and probably some other "enterprise distro" that are far behind in their toolchain stack on power7 I recommend IBM advance toolchain 7.0.3 and later.
[http://ibm.co/AdvanceToolchain](http://ibm.co/AdvanceToolchain)
It include its own glibc and that's the killer feature to get through the final issue I think. It is possible that gcc also includes a few IBM patches.



---

archive/issue_comments_123514.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt passes all long tests on a Red Hat Power 7 (gcc110) as well.",
    "created_at": "2014-05-02T12:35:33Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123514",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>
It passes all long tests on a Red Hat Power 7 (gcc110) as well.



---

archive/issue_events_093475.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93475"
}
```



---

archive/issue_events_093476.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93476"
}
```



---

archive/issue_events_093477.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93477"
}
```



---

archive/issue_events_093478.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93478"
}
```



---

archive/issue_comments_123515.json:
```json
{
    "body": "<a id='comment:1'></a>\nI still have no issue at all on a RedHad POWER7.\nWhat about Suse?\nShould this be closed?",
    "created_at": "2014-11-25T17:38:00Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123515",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>
I still have no issue at all on a RedHad POWER7.
What about Suse?
Should this be closed?



---

archive/issue_events_093479.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-11-25T19:03:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93479"
}
```



---

archive/issue_events_093480.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-11-25T19:03:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11705#event-93480"
}
```



---

archive/issue_comments_123516.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori, Fran\u00e7ois Bissey",
    "created_at": "2014-11-25T19:03:33Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123516",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** Jean-Pierre Flori, Fran√ßois Bissey



---

archive/issue_comments_123517.json:
```json
{
    "body": "<a id='comment:2'></a>\nYes.",
    "created_at": "2014-11-25T19:03:33Z",
    "issue": "https://github.com/sagemath/sage/issues/11705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11705#issuecomment-123517",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'></a>
Yes.
