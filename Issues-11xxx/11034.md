# Issue 11034: bug in the way vectors are created for submodules of free modules

archive/issues_010935.json:
```json
{
    "body": "Let R be a ring with fraction field K.\n\n```\nWhen you create a R-submodule of K^n (with K!=QQ) the vectors \nare created in the ring R not the fraction field.  This breaks things \nwhen the submodule is not in R^n.\n```\n\nFixed by #11751.\n\nAssignee: jason, was\n\nCC:  minz\n\nReviewer: William Stein, Moritz Minzlaff\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/11034\n\n",
    "closed_at": "2012-06-02T12:42:41Z",
    "created_at": "2011-03-25T23:10:44Z",
    "labels": [
        "component: linear algebra",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "bug in the way vectors are created for submodules of free modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11034",
    "user": "https://github.com/williamstein"
}
```
Let R be a ring with fraction field K.

```
When you create a R-submodule of K^n (with K!=QQ) the vectors 
are created in the ring R not the fraction field.  This breaks things 
when the submodule is not in R^n.
```

Fixed by #11751.

Assignee: jason, was

CC:  minz

Reviewer: William Stein, Moritz Minzlaff

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/11034





---

archive/issue_comments_123532.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n Let R be a ring with fraction field K.\n \n+```\n When you create a R-submodule of K^n (with K!=QQ) the vectors are created in the ring R not the fraction field.  This breaks things when the submodule is not in R^n.\n+```\n \n Comment: 1\n \n```\n",
    "created_at": "2011-03-25T23:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123532",
    "user": "https://github.com/williamstein"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,8 @@
 Let R be a ring with fraction field K.
 
+```
 When you create a R-submodule of K^n (with K!=QQ) the vectors are created in the ring R not the fraction field.  This breaks things when the submodule is not in R^n.
+```
 
 Comment: 1
 
```




---

archive/issue_comments_123533.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+Let R be a ring with fraction field K.\n \n+```\n+When you create a R-submodule of K^n (with K!=QQ) the vectors \n+are created in the ring R not the fraction field.  This breaks things \n+when the submodule is not in R^n.\n+```\n \n Comment: 1\n \n```\n",
    "created_at": "2011-03-25T23:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123533",
    "user": "https://github.com/williamstein"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,10 @@
+Let R be a ring with fraction field K.
 
+```
+When you create a R-submodule of K^n (with K!=QQ) the vectors 
+are created in the ring R not the fraction field.  This breaks things 
+when the submodule is not in R^n.
+```
 
 Comment: 1
 
```




---

archive/issue_comments_123534.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2011-03-30T15:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123534",
    "user": "https://trac.sagemath.org/admin/accounts/users/minz"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_123535.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-03-30T15:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123535",
    "user": "https://trac.sagemath.org/admin/accounts/users/minz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_123536.json:
```json
{
    "body": "<a id='comment:3'></a>The new version adds a doctest (and is slightly modified to make the doctest work).\n\nThe only doctest failure I received was related to the startup time as checked by startup.py. Curiously enough, replicating the same test on my local machine returned True. (Replicating as in: not running the doctest itself as it always returns True when not on sage.math.)",
    "created_at": "2011-03-30T15:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123536",
    "user": "https://trac.sagemath.org/admin/accounts/users/minz"
}
```

<a id='comment:3'></a>The new version adds a doctest (and is slightly modified to make the doctest work).

The only doctest failure I received was related to the startup time as checked by startup.py. Curiously enough, replicating the same test on my local machine returned True. (Replicating as in: not running the doctest itself as it always returns True when not on sage.math.)



---

archive/issue_comments_123537.json:
```json
{
    "body": "<a id='comment:4'></a>Apply trac_11034.v2.patch",
    "created_at": "2011-03-31T14:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123537",
    "user": "https://trac.sagemath.org/admin/accounts/users/minz"
}
```

<a id='comment:4'></a>Apply trac_11034.v2.patch



---

archive/issue_comments_123538.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+Let R be a ring with fraction field K.\n \n+```\n+When you create a R-submodule of K^n (with K!=QQ) the vectors \n+are created in the ring R not the fraction field.  This breaks things \n+when the submodule is not in R^n.\n+```\n+\n+Apply trac_11034.v2.patch\n \n Comment: 1\n \n```\n",
    "created_at": "2011-04-01T08:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123538",
    "user": "https://trac.sagemath.org/admin/accounts/users/minz"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+Let R be a ring with fraction field K.
 
+```
+When you create a R-submodule of K^n (with K!=QQ) the vectors 
+are created in the ring R not the fraction field.  This breaks things 
+when the submodule is not in R^n.
+```
+
+Apply trac_11034.v2.patch
 
 Comment: 1
 
```




---

archive/issue_comments_123539.json:
```json
{
    "body": "<a id='comment:6'></a>This patch fails to apply to 4.7.2.alpha2\n\n```\nmd:sage maarten$ mhg qim -P http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11034/trac_11034.v2.patch\nadding trac_11034.v2.patch to series file\napplying trac_11034.v2.patch\npatching file sage/modules/free_module.py\nHunk #1 FAILED at 4902\n1 out of 1 hunks FAILED -- saving rejects to file sage/modules/free_module.py.rej\npatching file sage/modules/free_module_element.pyx\nHunk #3 succeeded at 3356 with fuzz 1 (offset 701 lines).\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh trac_11034.v2.patch\n```\n\nBut there was some stupid duplicate of work so there is another ticket wich fixes the same problem at http://trac.sagemath.org/sage_trac/ticket/11751\nso if that one gets positive review and merged we can close this one.",
    "created_at": "2011-09-10T21:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123539",
    "user": "https://github.com/koffie"
}
```

<a id='comment:6'></a>This patch fails to apply to 4.7.2.alpha2

```
md:sage maarten$ mhg qim -P http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11034/trac_11034.v2.patch
adding trac_11034.v2.patch to series file
applying trac_11034.v2.patch
patching file sage/modules/free_module.py
Hunk #1 FAILED at 4902
1 out of 1 hunks FAILED -- saving rejects to file sage/modules/free_module.py.rej
patching file sage/modules/free_module_element.pyx
Hunk #3 succeeded at 3356 with fuzz 1 (offset 701 lines).
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac_11034.v2.patch
```

But there was some stupid duplicate of work so there is another ticket wich fixes the same problem at http://trac.sagemath.org/sage_trac/ticket/11751
so if that one gets positive review and merged we can close this one.



---

archive/issue_comments_123540.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-09-10T21:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123540",
    "user": "https://github.com/koffie"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_123541.json:
```json
{
    "body": "<a id='comment:7'></a>Since #11751 received a positive review and was merged in 4.7.2, maybe this ticket can be closed? (I also checked the test in the docstring of this patch and it passes in Sage 5.0.)",
    "created_at": "2012-05-28T12:20:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123541",
    "user": "https://trac.sagemath.org/admin/accounts/users/minz"
}
```

<a id='comment:7'></a>Since #11751 received a positive review and was merged in 4.7.2, maybe this ticket can be closed? (I also checked the test in the docstring of this patch and it passes in Sage 5.0.)



---

archive/issue_comments_123542.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-05-28T18:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123542",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_123543.json:
```json
{
    "body": "<a id='comment:8'></a>I can confirm that your examples work fine in sage-5.0.  So this can be closed.   The proper way to do that is \"positive review\".",
    "created_at": "2012-05-28T18:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123543",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:8'></a>I can confirm that your examples work fine in sage-5.0.  So this can be closed.   The proper way to do that is "positive review".



---

archive/issue_events_028651.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2012-05-28T18:24:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11034#event-28651"
}
```



---

archive/issue_comments_123544.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+Let R be a ring with fraction field K.\n \n+```\n+When you create a R-submodule of K^n (with K!=QQ) the vectors \n+are created in the ring R not the fraction field.  This breaks things \n+when the submodule is not in R^n.\n+```\n+\n+DO NOT Apply anything\n \n Comment: 1\n \n```\n",
    "created_at": "2012-05-28T18:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123544",
    "user": "https://github.com/williamstein"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+Let R be a ring with fraction field K.
 
+```
+When you create a R-submodule of K^n (with K!=QQ) the vectors 
+are created in the ring R not the fraction field.  This breaks things 
+when the submodule is not in R^n.
+```
+
+DO NOT Apply anything
 
 Comment: 1
 
```




---

archive/issue_comments_123545.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+Let R be a ring with fraction field K.\n \n+```\n+When you create a R-submodule of K^n (with K!=QQ) the vectors \n+are created in the ring R not the fraction field.  This breaks things \n+when the submodule is not in R^n.\n+```\n+\n+Fixed by #11751.\n \n Comment: 1\n \n```\n",
    "created_at": "2012-06-02T12:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123545",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+Let R be a ring with fraction field K.
 
+```
+When you create a R-submodule of K^n (with K!=QQ) the vectors 
+are created in the ring R not the fraction field.  This breaks things 
+when the submodule is not in R^n.
+```
+
+Fixed by #11751.
 
 Comment: 1
 
```




---

archive/issue_events_028652.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T12:42:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11034#event-28652"
}
```



---

archive/issue_comments_123546.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2012-06-02T12:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11034#issuecomment-123546",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate
