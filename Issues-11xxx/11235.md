# Issue 11235: Make the ipython edit magic command edit the right file and show both files when doing ??

archive/issues_011063.json:
```json
{
    "body": "All is really said in the title.\n\napply:\n\n* [attachment:IPython-edit.patch.patch]\n* [attachment:11235-reviewer.patch]\n* [attachment:11235_doc.patch]\n\nand don't forget the spkg at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg)\n\n**Assignee:** @jasongrout\n\n**Keywords:** sd35 ipython source file location\n\n**Author:** Maarten Derickx\n\n**Reviewer:** Marco Streng\n\n**Merged:** sage-5.0.beta2\n\nIssue created by migration from https://trac.sagemath.org/ticket/11235\n\n",
    "closed_at": "2012-02-02T12:53:09Z",
    "created_at": "2011-04-21T21:59:37Z",
    "labels": [
        "component: misc",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Make the ipython edit magic command edit the right file and show both files when doing ??",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11235",
    "user": "https://github.com/koffie"
}
```
All is really said in the title.

apply:

* [attachment:IPython-edit.patch.patch]
* [attachment:11235-reviewer.patch]
* [attachment:11235_doc.patch]

and don't forget the spkg at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg)

**Assignee:** @jasongrout

**Keywords:** sd35 ipython source file location

**Author:** Maarten Derickx

**Reviewer:** Marco Streng

**Merged:** sage-5.0.beta2

Issue created by migration from https://trac.sagemath.org/ticket/11235





---

archive/issue_comments_142152.json:
```json
{
    "body": "<a id='comment:1'></a>\nHere is the spkg which patches IPython http://www.math.leidenuniv.nl/~mderickx/ipython-0.9.1.p1.spkg. Since there is no ipython hook you really need the patch here to show both files.",
    "created_at": "2011-04-21T22:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142152",
    "user": "https://github.com/koffie"
}
```

<a id='comment:1'></a>
Here is the spkg which patches IPython http://www.math.leidenuniv.nl/~mderickx/ipython-0.9.1.p1.spkg. Since there is no ipython hook you really need the patch here to show both files.



---

archive/attachments_014701.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "IPython-edit.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11235/IPython-edit.patch",
    "created_at": "2011-04-21T22:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/koffie"
}
```



---

archive/issue_comments_142153.json:
```json
{
    "body": "",
    "created_at": "2011-04-21T22:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142153",
    "user": "https://github.com/koffie"
}
```





---

archive/issue_comments_142154.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-04-21T22:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142154",
    "user": "https://github.com/koffie"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_142155.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n All is really said in the title.\n+\n+apply: IPython-edit.patch\n+\n+and don't forget the spkg\n``````\n",
    "created_at": "2011-04-21T22:28:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142155",
    "user": "https://github.com/koffie"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 All is really said in the title.
+
+apply: IPython-edit.patch
+
+and don't forget the spkg
``````




---

archive/issue_comments_142156.json:
```json
{
    "body": "<a id='comment:4'></a>\nHave you looked at sage/misc/edit_module.py?  Would it be better to plug into that functionality when you type \"%edit\"?",
    "created_at": "2011-04-22T02:10:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142156",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
Have you looked at sage/misc/edit_module.py?  Would it be better to plug into that functionality when you type "%edit"?



---

archive/issue_comments_142157.json:
```json
{
    "body": "<a id='comment:5'></a>\nYeah I looked at it, but I think that following the arguments of least surprise it would be good to just keep the IPython behavior as much as possible . People might already know the exact behaviour of %edit because they have used IPython. And since typing % in front of something is really an IPython thing, so I think we should keep their implementation and not our custom one (at least when doing %edit, you can always use the edit() function if you want the sage behaviour.",
    "created_at": "2011-04-22T09:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142157",
    "user": "https://github.com/koffie"
}
```

<a id='comment:5'></a>
Yeah I looked at it, but I think that following the arguments of least surprise it would be good to just keep the IPython behavior as much as possible . People might already know the exact behaviour of %edit because they have used IPython. And since typing % in front of something is really an IPython thing, so I think we should keep their implementation and not our custom one (at least when doing %edit, you can always use the edit() function if you want the sage behaviour.



---

archive/issue_comments_142158.json:
```json
{
    "body": "<a id='comment:6'></a>\nNote that before the patch %edit also worked, but it opened the wrong file, all that the patch does is change the file it opens.",
    "created_at": "2011-04-22T09:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142158",
    "user": "https://github.com/koffie"
}
```

<a id='comment:6'></a>
Note that before the patch %edit also worked, but it opened the wrong file, all that the patch does is change the file it opens.



---

archive/issue_comments_142159.json:
```json
{
    "body": "**Author:** Maarten Derickx",
    "created_at": "2011-04-22T09:34:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142159",
    "user": "https://github.com/koffie"
}
```

**Author:** Maarten Derickx



---

archive/issue_comments_142160.json:
```json
{
    "body": "<a id='comment:8'></a>\nnew ipython",
    "created_at": "2011-12-17T15:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142160",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:8'></a>
new ipython



---

archive/issue_comments_142161.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2011-12-17T15:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142161",
    "user": "https://github.com/mstreng"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_142162.json:
```json
{
    "body": "<a id='comment:9'></a>\nI added a new spkg http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg",
    "created_at": "2011-12-18T14:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142162",
    "user": "https://github.com/koffie"
}
```

<a id='comment:9'></a>
I added a new spkg http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg



---

archive/issue_comments_142163.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-12-18T14:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142163",
    "user": "https://github.com/koffie"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_142164.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n apply: IPython-edit.patch\n \n-and don't forget the spkg\n+and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg\n``````\n",
    "created_at": "2011-12-18T14:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142164",
    "user": "https://github.com/koffie"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 apply: IPython-edit.patch
 
-and don't forget the spkg
+and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg
``````




---

archive/issue_comments_142165.json:
```json
{
    "body": "<a id='comment:10'></a>\n\n```\n09:56:43:~$ tar -xf ipython-0.10.2.p1.spkg \nipython-0.10.2.p1/src/docs/examples/kernel/davinci2.txt: Truncated tar archive\ntar: Error exit delayed from previous errors.\n```\n???",
    "created_at": "2011-12-19T09:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142165",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:10'></a>

```
09:56:43:~$ tar -xf ipython-0.10.2.p1.spkg 
ipython-0.10.2.p1/src/docs/examples/kernel/davinci2.txt: Truncated tar archive
tar: Error exit delayed from previous errors.
```
???



---

archive/issue_comments_142166.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [mstreng](#comment%3A10):\n> \n> ```\n> 09:56:43:~$ tar -xf ipython-0.10.2.p1.spkg \n> ipython-0.10.2.p1/src/docs/examples/kernel/davinci2.txt: Truncated tar archive\n> tar: Error exit delayed from previous errors.\n> ```\n> ???\n\n\nNever mind that, I downloaded a partial file apparently. Got the right one now.",
    "created_at": "2011-12-19T10:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142166",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:11'></a>
Replying to [mstreng](#comment%3A10):
> 
> ```
> 09:56:43:~$ tar -xf ipython-0.10.2.p1.spkg 
> ipython-0.10.2.p1/src/docs/examples/kernel/davinci2.txt: Truncated tar archive
> tar: Error exit delayed from previous errors.
> ```
> ???


Never mind that, I downloaded a partial file apparently. Got the right one now.



---

archive/issue_comments_142167.json:
```json
{
    "body": "<a id='comment:12'></a>\nWhich Sage version did you test this on? I installed the spkg, then the patch, and the patch gave me:\n\n```\n10:10:22:~/sage-4.8.alpha4/devel/sage$ hg qpush\napplying IPython-edit.patch\npatching file sage/misc/edit_module.py\nHunk #1 FAILED at 39\n1 out of 3 hunks FAILED -- saving rejects to file sage/misc/edit_module.py.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh IPython-edit.patch\n10:10:54:~/sage-4.8.alpha4/devel/sage$ cat sage/misc/edit_module.py.rej\n--- edit_module.py\n+++ edit_module.py\n@@ -40,6 +40,8 @@\n import inspect\n import os\n import sys\n+import re\n+import IPython\n \n from string import Template\n```",
    "created_at": "2011-12-19T10:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142167",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:12'></a>
Which Sage version did you test this on? I installed the spkg, then the patch, and the patch gave me:

```
10:10:22:~/sage-4.8.alpha4/devel/sage$ hg qpush
applying IPython-edit.patch
patching file sage/misc/edit_module.py
Hunk #1 FAILED at 39
1 out of 3 hunks FAILED -- saving rejects to file sage/misc/edit_module.py.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh IPython-edit.patch
10:10:54:~/sage-4.8.alpha4/devel/sage$ cat sage/misc/edit_module.py.rej
--- edit_module.py
+++ edit_module.py
@@ -40,6 +40,8 @@
 import inspect
 import os
 import sys
+import re
+import IPython
 
 from string import Template
```



---

archive/issue_comments_142168.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd35 ipython source file location\".",
    "created_at": "2011-12-19T10:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142168",
    "user": "https://github.com/mstreng"
}
```

**Changing keywords** from "" to "sd35 ipython source file location".



---

archive/issue_comments_142169.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2011-12-19T10:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142169",
    "user": "https://github.com/mstreng"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_142170.json:
```json
{
    "body": "**Work_Issues:** rebase on top of 4.8.alpha4",
    "created_at": "2011-12-19T10:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142170",
    "user": "https://github.com/mstreng"
}
```

**Work_Issues:** rebase on top of 4.8.alpha4



---

archive/issue_comments_142171.json:
```json
{
    "body": "**Reviewer:** Marco Streng",
    "created_at": "2011-12-19T10:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142171",
    "user": "https://github.com/mstreng"
}
```

**Reviewer:** Marco Streng



---

archive/issue_comments_142172.json:
```json
{
    "body": "<a id='comment:13'></a>\nAnd it is not because I installed the spkg first: on a Sage 4.8.alpha4 without the spkg, I get the same problem.",
    "created_at": "2011-12-19T10:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142172",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:13'></a>
And it is not because I installed the spkg first: on a Sage 4.8.alpha4 without the spkg, I get the same problem.



---

archive/attachments_014702.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "IPython-edit.patch.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11235/IPython-edit.patch.patch",
    "created_at": "2011-12-22T16:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/koffie"
}
```



---

archive/issue_comments_142173.json:
```json
{
    "body": "",
    "created_at": "2011-12-22T16:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142173",
    "user": "https://github.com/koffie"
}
```





---

archive/issue_comments_142174.json:
```json
{
    "body": "<a id='comment:14'></a>\nOk I updated the patch.",
    "created_at": "2011-12-22T16:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142174",
    "user": "https://github.com/koffie"
}
```

<a id='comment:14'></a>
Ok I updated the patch.



---

archive/issue_comments_142175.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n All is really said in the title.\n \n-apply: IPython-edit.patch\n+apply: [attachment:IPython-edit.patch.patch]\n \n and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg\n``````\n",
    "created_at": "2011-12-22T16:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142175",
    "user": "https://github.com/koffie"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 All is really said in the title.
 
-apply: IPython-edit.patch
+apply: [attachment:IPython-edit.patch.patch]
 
 and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg
``````




---

archive/issue_comments_142176.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-12-22T16:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142176",
    "user": "https://github.com/koffie"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_142177.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-01-05T10:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142177",
    "user": "https://github.com/mstreng"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_142178.json:
```json
{
    "body": "<a id='comment:15'></a>\nSorry I missed the trac update. I'm reviewing right now. Like it very much.\n\nMild reasons for needs_work:\n\n* incorrect spelling of diffrent\n* I guess you can't doctest `edit_devel`, but it would be good to get rid of the following warning:\n\n  ```\n  sage -coverage devel/sage/sage/misc/edit_module.py\n  ----------------------------------------------------------------------\n  devel/sage/sage/misc/edit_module.py\n  SCORE devel/sage/sage/misc/edit_module.py: 100% (6 of 6) \n  \n  Possibly wrong (function name doesn't occur in doctests):\n  \t * edit_devel(self, filename, linenum):\n  \n  ----------------------------------------------------------------------\n  ```\n\nSuggestions for the patch (these things aren't regressions, they were like this always, so if you don't want to spend time on it, that's fine with me):\n\n* After %ed, the file is reloaded, which is not the correct thing to do. It should be imported, otherwise doing %ed doesn't make sense. Example:\n\n    ```\n    sage: EllipticCurve([1,2,3,4,6])\n    Elliptic Curve defined by y^2 + x*y + 3*y = x^3 + 2*x^2 + 4*x + 6 over Rational Field\n    sage: %ed EllipticCurve\n    Editing... done. Executing edited code...\n    sage: EllipticCurve([1,2,3,4,6])\n    ImportError: No module named ell_generic\n   ```\n* when the `.sub` is successful and `filename` ends with `\".sage\"`, it would be easy to afterwards overwrite the site-packages file with the source file. Then the user only has to `sage: from sage.all import *` (which you can tell the user to do, or maybe program Sage to do)",
    "created_at": "2012-01-05T10:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142178",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:15'></a>
Sorry I missed the trac update. I'm reviewing right now. Like it very much.

Mild reasons for needs_work:

* incorrect spelling of diffrent
* I guess you can't doctest `edit_devel`, but it would be good to get rid of the following warning:

  ```
  sage -coverage devel/sage/sage/misc/edit_module.py
  ----------------------------------------------------------------------
  devel/sage/sage/misc/edit_module.py
  SCORE devel/sage/sage/misc/edit_module.py: 100% (6 of 6) 
  
  Possibly wrong (function name doesn't occur in doctests):
  	 * edit_devel(self, filename, linenum):
  
  ----------------------------------------------------------------------
  ```

Suggestions for the patch (these things aren't regressions, they were like this always, so if you don't want to spend time on it, that's fine with me):

* After %ed, the file is reloaded, which is not the correct thing to do. It should be imported, otherwise doing %ed doesn't make sense. Example:

    ```
    sage: EllipticCurve([1,2,3,4,6])
    Elliptic Curve defined by y^2 + x*y + 3*y = x^3 + 2*x^2 + 4*x + 6 over Rational Field
    sage: %ed EllipticCurve
    Editing... done. Executing edited code...
    sage: EllipticCurve([1,2,3,4,6])
    ImportError: No module named ell_generic
   ```
* when the `.sub` is successful and `filename` ends with `".sage"`, it would be easy to afterwards overwrite the site-packages file with the source file. Then the user only has to `sage: from sage.all import *` (which you can tell the user to do, or maybe program Sage to do)



---

archive/issue_comments_142179.json:
```json
{
    "body": "<a id='comment:16'></a>\nThere are no changes to the notebook, right?",
    "created_at": "2012-01-05T10:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142179",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:16'></a>
There are no changes to the notebook, right?



---

archive/issue_comments_142180.json:
```json
{
    "body": "**Changing work_issues** from \"rebase on top of 4.8.alpha4\" to \"typo and doctest coverage warning\".",
    "created_at": "2012-01-05T11:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142180",
    "user": "https://github.com/mstreng"
}
```

**Changing work_issues** from "rebase on top of 4.8.alpha4" to "typo and doctest coverage warning".



---

archive/issue_comments_142181.json:
```json
{
    "body": "<a id='comment:17'></a>\n(all tests pass on 4.8.alpha4)",
    "created_at": "2012-01-05T11:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142181",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:17'></a>
(all tests pass on 4.8.alpha4)



---

archive/issue_comments_142182.json:
```json
{
    "body": "<a id='comment:18'></a>\nI thought I'd fix the typo and put up a reviewer patch, but found out that there is something duplicate about your patch.\n\nThe functionality that your patch provides in `sage.misc.edit_module.edit_devel` is already in `sage.misc.edit_module.edit`. See [http://www.sagemath.org/doc/reference/sage/misc/edit_module.html](http://www.sagemath.org/doc/reference/sage/misc/edit_module.html). See also #7961.\n\nOn an unpatched sage-4.8.alpha4, I get the correct file with `sage: edit(EllipticCurve)`, but the incorrect file with `sage: %ed EllipticCurve`",
    "created_at": "2012-01-12T16:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142182",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:18'></a>
I thought I'd fix the typo and put up a reviewer patch, but found out that there is something duplicate about your patch.

The functionality that your patch provides in `sage.misc.edit_module.edit_devel` is already in `sage.misc.edit_module.edit`. See [http://www.sagemath.org/doc/reference/sage/misc/edit_module.html](http://www.sagemath.org/doc/reference/sage/misc/edit_module.html). See also #7961.

On an unpatched sage-4.8.alpha4, I get the correct file with `sage: edit(EllipticCurve)`, but the incorrect file with `sage: %ed EllipticCurve`



---

archive/issue_comments_142183.json:
```json
{
    "body": "**Changing work_issues** from \"typo and doctest coverage warning\" to \"\".",
    "created_at": "2012-01-12T16:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142183",
    "user": "https://github.com/mstreng"
}
```

**Changing work_issues** from "typo and doctest coverage warning" to "".



---

archive/issue_comments_142184.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mstreng](#comment%3A18):\n> I thought I'd fix the typo and put up a reviewer patch, but found out that there is something duplicate about your patch.\n\n\nBut I guess you know all that. This is about `%ed`, not `edit`",
    "created_at": "2012-01-12T16:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142184",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:19'></a>
Replying to [mstreng](#comment%3A18):
> I thought I'd fix the typo and put up a reviewer patch, but found out that there is something duplicate about your patch.


But I guess you know all that. This is about `%ed`, not `edit`



---

archive/attachments_014703.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "11235-reviewer.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11235/11235-reviewer.patch",
    "created_at": "2012-01-12T17:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mstreng"
}
```



---

archive/issue_comments_142185.json:
```json
{
    "body": "reST formatting, spelling, clarity",
    "created_at": "2012-01-12T17:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142185",
    "user": "https://github.com/mstreng"
}
```

reST formatting, spelling, clarity



---

archive/issue_comments_142186.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,8 @@\n All is really said in the title.\n \n-apply: [attachment:IPython-edit.patch.patch]\n+apply:\n+\n+* [attachment:IPython-edit.patch.patch]\n+* [attachment:11235-reviewer.patch]\n \n and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg\n``````\n",
    "created_at": "2012-01-12T17:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142186",
    "user": "https://github.com/mstreng"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,8 @@
 All is really said in the title.
 
-apply: [attachment:IPython-edit.patch.patch]
+apply:
+
+* [attachment:IPython-edit.patch.patch]
+* [attachment:11235-reviewer.patch]
 
 and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg
``````




---

archive/issue_comments_142187.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-01-12T20:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142187",
    "user": "https://github.com/mstreng"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_142188.json:
```json
{
    "body": "<a id='comment:21'></a>\nPositive review for everything but the reviewer patch. Please review the reviewer patch!",
    "created_at": "2012-01-12T20:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142188",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:21'></a>
Positive review for everything but the reviewer patch. Please review the reviewer patch!



---

archive/issue_comments_142189.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [mstreng](#comment%3A19):\n> Replying to [mstreng](#comment%3A18):\n> > I thought I'd fix the typo and put up a reviewer patch, but found out that there is something duplicate about your patch.\n\n> \n> But I guess you know all that. This is about `%ed`, not `edit`\n\n\nYes this is exactly the reason. \nI would like to review your review patch, and at least I agree with the documentation changes. But I'm terrible at spelling so it can have positive review as soon as someone  just can guarente to me that the English is correct",
    "created_at": "2012-01-20T17:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142189",
    "user": "https://github.com/koffie"
}
```

<a id='comment:22'></a>
Replying to [mstreng](#comment%3A19):
> Replying to [mstreng](#comment%3A18):
> > I thought I'd fix the typo and put up a reviewer patch, but found out that there is something duplicate about your patch.

> 
> But I guess you know all that. This is about `%ed`, not `edit`


Yes this is exactly the reason. 
I would like to review your review patch, and at least I agree with the documentation changes. But I'm terrible at spelling so it can have positive review as soon as someone  just can guarente to me that the English is correct



---

archive/issue_comments_142190.json:
```json
{
    "body": "<a id='comment:23'></a>\nThe English in the reviewer patch looks fine to me (although I would have said \"the Sage library\" instead of \"the sage library\").  So feel free to switch this to a positive review.",
    "created_at": "2012-01-20T18:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142190",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'></a>
The English in the reviewer patch looks fine to me (although I would have said "the Sage library" instead of "the sage library").  So feel free to switch this to a positive review.



---

archive/issue_comments_142191.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-01-21T14:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142191",
    "user": "https://github.com/koffie"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_142192.json:
```json
{
    "body": "<a id='comment:25'></a>\nThere is a small problem with the documentation:\n\n```\n/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/local/lib/python2.7/site-packages/sage/misc/edit_module.py:docstring of sage.misc.edit_module.edit_devel:14: WARNING: Inline interpreted text or phrase reference start-string without end-string.\n```",
    "created_at": "2012-01-24T14:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142192",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>
There is a small problem with the documentation:

```
/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/local/lib/python2.7/site-packages/sage/misc/edit_module.py:docstring of sage.misc.edit_module.edit_devel:14: WARNING: Inline interpreted text or phrase reference start-string without end-string.
```



---

archive/issue_comments_142193.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [jdemeyer](#comment%3A25):\n\nWhat causes this? Is it the <code>\\`\\`%edit\\`\\`</code> in the docstring?",
    "created_at": "2012-01-24T21:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142193",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:26'></a>
Replying to [jdemeyer](#comment%3A25):

What causes this? Is it the <code>\`\`%edit\`\`</code> in the docstring?



---

archive/issue_comments_142194.json:
```json
{
    "body": "<a id='comment:27'></a>\nNo, it's the dollar sign.  Try this:\n\n```diff\ndiff --git a/sage/misc/edit_module.py b/sage/misc/edit_module.py\n--- a/sage/misc/edit_module.py\n+++ b/sage/misc/edit_module.py\n@@ -299,7 +299,7 @@ def edit_devel(self, filename, linenum):\n         sage: %ed gcd           # indirect doctest, not tested\n \n     The above should open your favorite editor (as stored in the environment\n-    variable $EDITOR) with the file in which gcd is defined, and when your\n+    variable \\$EDITOR) with the file in which gcd is defined, and when your\n     editor supports it, also at the line in wich gcd is defined.\n     \"\"\"\n     sageroot = sage.misc.sageinspect.SAGE_ROOT+'/'\n```",
    "created_at": "2012-01-24T21:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142194",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:27'></a>
No, it's the dollar sign.  Try this:

```diff
diff --git a/sage/misc/edit_module.py b/sage/misc/edit_module.py
--- a/sage/misc/edit_module.py
+++ b/sage/misc/edit_module.py
@@ -299,7 +299,7 @@ def edit_devel(self, filename, linenum):
         sage: %ed gcd           # indirect doctest, not tested
 
     The above should open your favorite editor (as stored in the environment
-    variable $EDITOR) with the file in which gcd is defined, and when your
+    variable \$EDITOR) with the file in which gcd is defined, and when your
     editor supports it, also at the line in wich gcd is defined.
     """
     sageroot = sage.misc.sageinspect.SAGE_ROOT+'/'
```



---

archive/attachments_014704.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "11235_doc.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11235/11235_doc.patch",
    "created_at": "2012-01-29T12:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_142195.json:
```json
{
    "body": "",
    "created_at": "2012-01-29T12:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142195",
    "user": "https://github.com/jdemeyer"
}
```





---

archive/issue_comments_142196.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2012-01-29T13:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142196",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_142197.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,5 +4,6 @@\n \n * [attachment:IPython-edit.patch.patch]\n * [attachment:11235-reviewer.patch]\n+* [attachment:11235_doc.patch]\n \n and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg\n``````\n",
    "created_at": "2012-01-29T13:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142197",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,5 +4,6 @@
 
 * [attachment:IPython-edit.patch.patch]
 * [attachment:11235-reviewer.patch]
+* [attachment:11235_doc.patch]
 
 and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg
``````




---

archive/issue_comments_142198.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-01-29T13:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142198",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_142199.json:
```json
{
    "body": "<a id='comment:30'></a>\n[attachment:11235_doc.patch] needs review.",
    "created_at": "2012-01-29T23:35:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142199",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
[attachment:11235_doc.patch] needs review.



---

archive/issue_comments_142200.json:
```json
{
    "body": "<a id='comment:31'></a>\nThanks Jeroen",
    "created_at": "2012-01-30T10:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142200",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:31'></a>
Thanks Jeroen



---

archive/issue_comments_142201.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-01-30T10:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142201",
    "user": "https://github.com/mstreng"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_034164.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-02T12:53:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11235#event-34164"
}
```



---

archive/issue_comments_142202.json:
```json
{
    "body": "**Merged:** sage-5.0.beta2",
    "created_at": "2012-02-02T12:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142202",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta2



---

archive/issue_comments_142203.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n * [attachment:11235-reviewer.patch]\n * [attachment:11235_doc.patch]\n \n-and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg\n+and don't forget the spkg at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg)\n``````\n",
    "created_at": "2012-03-04T20:43:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142203",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 * [attachment:11235-reviewer.patch]
 * [attachment:11235_doc.patch]
 
-and don't forget the spkg at http://www.math.leidenuniv.nl/~mderickx/ipython-0.10.2.p1.spkg
+and don't forget the spkg at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg)
``````




---

archive/issue_comments_142204.json:
```json
{
    "body": "<a id='comment:33'></a>\nspkg contains garbage:\n\n```\njdemeyer@sage:~/spkg/ipython-0.10.2.p1$ hg status\n? .spkg-install.swp\n```\n\nFixed at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg)",
    "created_at": "2012-03-04T20:43:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142204",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
spkg contains garbage:

```
jdemeyer@sage:~/spkg/ipython-0.10.2.p1$ hg status
? .spkg-install.swp
```

Fixed at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.10.2.p1.spkg)



---

archive/issue_comments_142205.json:
```json
{
    "body": "<a id='comment:34'></a>\nThe spkg wasn't `qfinish`ed, fixed this also.",
    "created_at": "2012-03-06T08:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11235#issuecomment-142205",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
The spkg wasn't `qfinish`ed, fixed this also.
