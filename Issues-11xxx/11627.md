# Issue 11627: Turn Fan(discard_warning) into an error

archive/issues_011455.json:
```json
{
    "body": "There is no easy way to re-enable the warning after it has been shown once. A typical use case is that you have a mistake in your fan data and you want to fix it. The fact that the warning for duplicate cones is only shown once in the Sage session is very annoying.\n\nApply [attachment:trac_11627_alternative.patch]\n\nAssignee: mhampton\n\nCC:  @novoselt\n\nResolution: fixed\n\nAuthor: Andrey Novoseltsev\n\nReviewer: Volker Braun\n\nMerged: sage-4.7.2.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/11627\n\n",
    "closed_at": "2011-09-17T05:01:43Z",
    "created_at": "2011-07-26T11:40:41Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Turn Fan(discard_warning) into an error",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11627",
    "user": "https://github.com/vbraun"
}
```
There is no easy way to re-enable the warning after it has been shown once. A typical use case is that you have a mistake in your fan data and you want to fix it. The fact that the warning for duplicate cones is only shown once in the Sage session is very annoying.

Apply [attachment:trac_11627_alternative.patch]

Assignee: mhampton

CC:  @novoselt

Resolution: fixed

Author: Andrey Novoseltsev

Reviewer: Volker Braun

Merged: sage-4.7.2.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/11627





---

archive/issue_comments_127655.json:
```json
{
    "body": "Changing component from algebraic geometry to geometry.",
    "created_at": "2011-07-27T17:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127655",
    "user": "https://github.com/novoselt"
}
```

Changing component from algebraic geometry to geometry.



---

archive/issue_comments_127656.json:
```json
{
    "body": "<a id='comment:1'></a>OK, I'll change it ;-)",
    "created_at": "2011-07-27T17:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127656",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:1'></a>OK, I'll change it ;-)



---

archive/issue_comments_127657.json:
```json
{
    "body": "Changing assignee from @aghitza to mhampton.",
    "created_at": "2011-07-27T17:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127657",
    "user": "https://github.com/novoselt"
}
```

Changing assignee from @aghitza to mhampton.



---

archive/issue_comments_127658.json:
```json
{
    "body": "<a id='comment:2'></a>I do have a patch, I just haven't had the time to finish it.",
    "created_at": "2011-07-27T19:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127658",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>I do have a patch, I just haven't had the time to finish it.



---

archive/issue_comments_127659.json:
```json
{
    "body": "<a id='comment:3'></a>Namewise, how about replacing `disacard_warning`, which will not make sense anymore, with `discard_faces=False` that can be set to `True` to allow it?",
    "created_at": "2011-07-27T20:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127659",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:3'></a>Namewise, how about replacing `disacard_warning`, which will not make sense anymore, with `discard_faces=False` that can be set to `True` to allow it?



---

archive/issue_comments_127660.json:
```json
{
    "body": "Attachment [trac_11627_make_fan_raise_errors.patch](tarball://root/attachments/some-uuid/ticket11627/trac_11627_make_fan_raise_errors.patch) by @vbraun created at 2011-07-27 20:11:39\n\nInitial patch",
    "created_at": "2011-07-27T20:11:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127660",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_11627_make_fan_raise_errors.patch](tarball://root/attachments/some-uuid/ticket11627/trac_11627_make_fan_raise_errors.patch) by @vbraun created at 2011-07-27 20:11:39

Initial patch



---

archive/issue_comments_127661.json:
```json
{
    "body": "<a id='comment:4'></a>Here is my take on it. I renamed it to `check_duplicate_cones=<bool>` to make clear that it is related to the `check` optional argument.",
    "created_at": "2011-07-27T20:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127661",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>Here is my take on it. I renamed it to `check_duplicate_cones=<bool>` to make clear that it is related to the `check` optional argument.



---

archive/issue_comments_127662.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-08-01T08:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127662",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_127663.json:
```json
{
    "body": "<a id='comment:5'></a>Any thoughts on the patch?",
    "created_at": "2011-08-01T08:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127663",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>Any thoughts on the patch?



---

archive/issue_comments_127664.json:
```json
{
    "body": "<a id='comment:6'></a>Hi Volker, sorry for the delay - travel/jetlag/work ;-)\n\nDiscarding faces and repeated cones is quite natural when they come from some construction and I have already wished a few times that it would be possible to drop them without using `check=True` option which does much more work. In fact, that's the reason why there is a function `discard_faces`. So I propose this patch which adds a `discard_faces=False` keyword which works independently of `check`. I have also fixed the code and documentation pieces that were relying on the old behaviour, I don't get now any errors for tests in geometry or schemes directories.",
    "created_at": "2011-08-03T19:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127664",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:6'></a>Hi Volker, sorry for the delay - travel/jetlag/work ;-)

Discarding faces and repeated cones is quite natural when they come from some construction and I have already wished a few times that it would be possible to drop them without using `check=True` option which does much more work. In fact, that's the reason why there is a function `discard_faces`. So I propose this patch which adds a `discard_faces=False` keyword which works independently of `check`. I have also fixed the code and documentation pieces that were relying on the old behaviour, I don't get now any errors for tests in geometry or schemes directories.



---

archive/issue_comments_127665.json:
```json
{
    "body": "Attachment [trac_11627_alternative.patch](tarball://root/attachments/some-uuid/ticket11627/trac_11627_alternative.patch) by @novoselt created at 2011-08-03 19:35:31",
    "created_at": "2011-08-03T19:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127665",
    "user": "https://github.com/novoselt"
}
```

Attachment [trac_11627_alternative.patch](tarball://root/attachments/some-uuid/ticket11627/trac_11627_alternative.patch) by @novoselt created at 2011-08-03 19:35:31



---

archive/issue_comments_127666.json:
```json
{
    "body": "<a id='comment:7'></a>Looks good!",
    "created_at": "2011-08-11T18:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127666",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>Looks good!



---

archive/issue_comments_127667.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-11T18:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127667",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_030504.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-17T05:01:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11627#event-30504"
}
```



---

archive/issue_comments_127668.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-09-17T05:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11627#issuecomment-127668",
    "user": "https://github.com/nexttime"
}
```

Resolution: fixed
