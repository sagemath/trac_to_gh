# Issue 11385: Machine-readable timeit() output

archive/issues_011385.json:
```json
{
    "body": "Assignee: tbd\n\nThis patch implements an optional `seconds=True` keyword argument to return the number of seconds as a floating-point number instead of printing something on the screen:\n\n```\nsage: t = timeit(\"print 'Hi'\", seconds=True)\nsage: t\n6.7710876464843747e-07\n```\nThis makes it much easier to make plots for timing information.\n\nApply [attachment:trac_11557_timeit_in_seconds.patch], [attachment:trac_11557-referee.patch]\n\nIssue created by migration from https://trac.sagemath.org/ticket/11557\n\n",
    "closed_at": "2011-07-28T10:24:21Z",
    "created_at": "2011-06-30T14:37:01Z",
    "labels": [
        "component: performance"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Machine-readable timeit() output",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11385",
    "user": "https://github.com/vbraun"
}
```
Assignee: tbd

This patch implements an optional `seconds=True` keyword argument to return the number of seconds as a floating-point number instead of printing something on the screen:

```
sage: t = timeit("print 'Hi'", seconds=True)
sage: t
6.7710876464843747e-07
```
This makes it much easier to make plots for timing information.

Apply [attachment:trac_11557_timeit_in_seconds.patch], [attachment:trac_11557-referee.patch]

Issue created by migration from https://trac.sagemath.org/ticket/11557





---

archive/issue_comments_126162.json:
```json
{
    "body": "Initial patch",
    "created_at": "2011-06-30T14:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126162",
    "user": "https://github.com/vbraun"
}
```

Initial patch



---

archive/issue_comments_126163.json:
```json
{
    "body": "Attachment [trac_11557_timeit_in_seconds.patch](tarball://root/attachments/some-uuid/ticket11557/trac_11557_timeit_in_seconds.patch) by @vbraun created at 2011-06-30 14:40:00\n\nAlso, documentation of `sage.misc.sage_timeit` is cleaned up and added to reference manual.",
    "created_at": "2011-06-30T14:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126163",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_11557_timeit_in_seconds.patch](tarball://root/attachments/some-uuid/ticket11557/trac_11557_timeit_in_seconds.patch) by @vbraun created at 2011-06-30 14:40:00

Also, documentation of `sage.misc.sage_timeit` is cleaned up and added to reference manual.



---

archive/issue_comments_126164.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-06-30T14:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126164",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_126165.json:
```json
{
    "body": "Looks good overall.\n\nA few comments:\n\n- line 42 in sage_timeit.py: \"blah\"?\n\n- line 99: \"evaluate\" should be capitalized.\n\n- should sage_timeit_class.pyx be in the reference manual?\n\n- in sage_timeit_class.pyx, do you understand the parenthetical remark in \"The preparser is on by default (if it is on)\"?  Do you have ideas about how to clarify it?\n\nI'm attaching a referee patch to address the first three of these.",
    "created_at": "2011-06-30T16:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126165",
    "user": "https://github.com/jhpalmieri"
}
```

Looks good overall.

A few comments:

- line 42 in sage_timeit.py: "blah"?

- line 99: "evaluate" should be capitalized.

- should sage_timeit_class.pyx be in the reference manual?

- in sage_timeit_class.pyx, do you understand the parenthetical remark in "The preparser is on by default (if it is on)"?  Do you have ideas about how to clarify it?

I'm attaching a referee patch to address the first three of these.



---

archive/issue_comments_126166.json:
```json
{
    "body": "apply on top of other patch",
    "created_at": "2011-06-30T16:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126166",
    "user": "https://github.com/jhpalmieri"
}
```

apply on top of other patch



---

archive/issue_comments_126167.json:
```json
{
    "body": "Attachment [trac_11557-referee.patch](tarball://root/attachments/some-uuid/ticket11557/trac_11557-referee.patch) by @vbraun created at 2011-07-01 10:27:18\n\nI thought about adding `sage_timeit_class.pyx` to the manual but decided against it. Its just some Cython nuts and bolts for the Python `timeit` command. But then I don't have a strong opinion on it.\n\nAs for the \"(if it is on)\", I think it refers to the possibility to turn the preparser off in the Sage session via `preparser(False)`.",
    "created_at": "2011-07-01T10:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126167",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_11557-referee.patch](tarball://root/attachments/some-uuid/ticket11557/trac_11557-referee.patch) by @vbraun created at 2011-07-01 10:27:18

I thought about adding `sage_timeit_class.pyx` to the manual but decided against it. Its just some Cython nuts and bolts for the Python `timeit` command. But then I don't have a strong opinion on it.

As for the "(if it is on)", I think it refers to the possibility to turn the preparser off in the Sage session via `preparser(False)`.



---

archive/issue_comments_126168.json:
```json
{
    "body": "The advantage of adding `sage_timeit_class.pyx` to the manual is that its focus is to document the timeit command.  You can extract some of the same information from the page for `sage_timeit.py`, but I think it's a good idea to include both pages.\n\nI'm happy with the combination of the two patches.  How about you?",
    "created_at": "2011-07-01T18:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126168",
    "user": "https://github.com/jhpalmieri"
}
```

The advantage of adding `sage_timeit_class.pyx` to the manual is that its focus is to document the timeit command.  You can extract some of the same information from the page for `sage_timeit.py`, but I think it's a good idea to include both pages.

I'm happy with the combination of the two patches.  How about you?



---

archive/issue_comments_126169.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-07-01T18:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126169",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_126170.json:
```json
{
    "body": "I'm happy with them, too. I take it you mean \"positive review\" by that :-)",
    "created_at": "2011-07-01T18:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126170",
    "user": "https://github.com/vbraun"
}
```

I'm happy with them, too. I take it you mean "positive review" by that :-)



---

archive/issue_comments_126171.json:
```json
{
    "body": "Hey, this is a nice ticket.  \n\nI don't want to hold it up, but I am wondering whether you think it would be worth having a new ticket to include an example of what you mean by \"This makes it much easier to make plots for timing information.\"?    If this is now in the reference manual, then having a common use case - perhaps even toward the top of the module, or in `timeit?`, could be useful.\n\nAnyway, just a thought if you have an easy `# random` example, not here, of course.",
    "created_at": "2011-07-02T02:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126171",
    "user": "https://github.com/kcrisman"
}
```

Hey, this is a nice ticket.  

I don't want to hold it up, but I am wondering whether you think it would be worth having a new ticket to include an example of what you mean by "This makes it much easier to make plots for timing information."?    If this is now in the reference manual, then having a common use case - perhaps even toward the top of the module, or in `timeit?`, could be useful.

Anyway, just a thought if you have an easy `# random` example, not here, of course.



---

archive/issue_comments_126172.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-07-28T10:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11385#issuecomment-126172",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_030253.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-28T10:24:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11385",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11385#event-30253"
}
```
