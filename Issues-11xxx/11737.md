# Issue 11737: "integrate" fails to integrate a convergent integral (sin(x^2)/x^2).

archive/issues_011565.json:
```json
{
    "body": "Assignee: @burcin\n\n```\nsage: N(integrate(sin(x^2)/(x^2), x, 1, infinity))\n[...]\nValueError: Integral is divergent.\n```\nThis worked fine until v4.5.3, fails from v4.6.1 onward.\nThe expected output (with Maxima 5.29.1) is:\n\n```\n0.285736646322858\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/11737\n\n",
    "closed_at": "2013-01-17T07:34:16Z",
    "created_at": "2011-08-24T14:29:27Z",
    "labels": [
        "component: calculus",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "\"integrate\" fails to integrate a convergent integral (sin(x^2)/x^2).",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11737",
    "user": "https://trac.sagemath.org/admin/accounts/users/lfousse"
}
```
Assignee: @burcin

```
sage: N(integrate(sin(x^2)/(x^2), x, 1, infinity))
[...]
ValueError: Integral is divergent.
```
This worked fine until v4.5.3, fails from v4.6.1 onward.
The expected output (with Maxima 5.29.1) is:

```
0.285736646322858
```

Issue created by migration from https://trac.sagemath.org/ticket/11737





---

archive/issue_comments_129914.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2011-08-24T14:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129914",
    "user": "https://trac.sagemath.org/admin/accounts/users/lfousse"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_129915.json:
```json
{
    "body": "This is in Maxima.  In the latest:\n\n```\n\n(%i1) integrate(sin(x^2)/(x^2),x,1,inf);\n\ndefint: integral is divergent.\n```\nIt used to just return the integral.\n\n```\n\n(%i1) integrate(sin(x^2)/(x^2),x,1,inf);\n                                 inf\n                                /         2\n                                [    sin(x )\n(%o1)                           I    ------- dx\n                                ]       2\n                                /      x\n                                 1\n```\n\nI think this integral should converge, right?  By the p-test (well, with absolute values) for p=2?  And `numerical_integral` agrees with your thing.  This is probably a bug in Maxima, I'll put it there.",
    "created_at": "2011-08-24T17:29:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129915",
    "user": "https://github.com/kcrisman"
}
```

This is in Maxima.  In the latest:

```

(%i1) integrate(sin(x^2)/(x^2),x,1,inf);

defint: integral is divergent.
```
It used to just return the integral.

```

(%i1) integrate(sin(x^2)/(x^2),x,1,inf);
                                 inf
                                /         2
                                [    sin(x )
(%o1)                           I    ------- dx
                                ]       2
                                /      x
                                 1
```

I think this integral should converge, right?  By the p-test (well, with absolute values) for p=2?  And `numerical_integral` agrees with your thing.  This is probably a bug in Maxima, I'll put it there.



---

archive/issue_comments_129916.json:
```json
{
    "body": "This is tracked at [this Maxima bug artifact](https://sourceforge.net/tracker/?func=detail&aid=3397562&group_id=4933&atid=104933).",
    "created_at": "2011-08-24T17:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129916",
    "user": "https://github.com/kcrisman"
}
```

This is tracked at [this Maxima bug artifact](https://sourceforge.net/tracker/?func=detail&aid=3397562&group_id=4933&atid=104933).



---

archive/issue_comments_129917.json:
```json
{
    "body": "The absolute value of the function is dominated by `1/x^2`, which is integrable on this particular interval.",
    "created_at": "2011-08-24T17:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129917",
    "user": "https://trac.sagemath.org/admin/accounts/users/lfousse"
}
```

The absolute value of the function is dominated by `1/x^2`, which is integrable on this particular interval.



---

archive/issue_comments_129918.json:
```json
{
    "body": "You say potato, I say potahto :)",
    "created_at": "2011-08-24T17:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129918",
    "user": "https://github.com/kcrisman"
}
```

You say potato, I say potahto :)



---

archive/issue_comments_129919.json:
```json
{
    "body": "Karl-Dieter, please can you check the bug is fixed upstream? Laurent (Fousse) says it was caused by commit `59775311e53ef8a8fb5a3ad067a6c1cc153075d2` of maxima.\n\nPaul",
    "created_at": "2011-12-02T14:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129919",
    "user": "https://github.com/zimmermann6"
}
```

Karl-Dieter, please can you check the bug is fixed upstream? Laurent (Fousse) says it was caused by commit `59775311e53ef8a8fb5a3ad067a6c1cc153075d2` of maxima.

Paul



---

archive/issue_comments_129920.json:
```json
{
    "body": "As far as I can tell, it's not fixed upstream - I have 5.25.1.  The bug report had a resolution but it was something where they apparently typed in the wrong integral.  \n\nI am ignorant of how to use git and I can't do a text search for that commit line, unfortunately, so I'll take Laurent's word for it.   I've put that info on the bug tracker as well.",
    "created_at": "2011-12-02T15:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129920",
    "user": "https://github.com/kcrisman"
}
```

As far as I can tell, it's not fixed upstream - I have 5.25.1.  The bug report had a resolution but it was something where they apparently typed in the wrong integral.  

I am ignorant of how to use git and I can't do a text search for that commit line, unfortunately, so I'll take Laurent's word for it.   I've put that info on the bug tracker as well.



---

archive/issue_comments_129921.json:
```json
{
    "body": "Laurent tested with both 5.24.0 and the last git maxima version (commit 01679c735de525a39fa1d893f9e1d9f86bd65f91) and he got:\n\n```\n    % ./maxima-local\n    Maxima 5.25post/branch-5_25-base-231-g01679c7\n    http://maxima.sourceforge.net\n    using Lisp CLISP 2.49 (2010-07-07)\n    Distributed under the GNU Public License. See the file COPYING.\n    Dedicated to the memory of William Schelter.\n    The function bug_report() provides bug reporting information.\n    (%i1) integrate(sin(x^2)/(x^2),x,1,inf);\n    defint: integral is divergent.\n     -- an error. To debug this try: debugmode(true);\n```\nPlease can you add this to the maxima bug tracker?\n\nPaul",
    "created_at": "2011-12-03T07:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129921",
    "user": "https://github.com/zimmermann6"
}
```

Laurent tested with both 5.24.0 and the last git maxima version (commit 01679c735de525a39fa1d893f9e1d9f86bd65f91) and he got:

```
    % ./maxima-local
    Maxima 5.25post/branch-5_25-base-231-g01679c7
    http://maxima.sourceforge.net
    using Lisp CLISP 2.49 (2010-07-07)
    Distributed under the GNU Public License. See the file COPYING.
    Dedicated to the memory of William Schelter.
    The function bug_report() provides bug reporting information.
    (%i1) integrate(sin(x^2)/(x^2),x,1,inf);
    defint: integral is divergent.
     -- an error. To debug this try: debugmode(true);
```
Please can you add this to the maxima bug tracker?

Paul



---

archive/issue_comments_129922.json:
```json
{
    "body": "> Please can you add this to the maxima bug tracker?\n\nI think that you may have missed the fact that I already did so in comment:4 three months ago.   The person from Maxima who first looked at it must have tried something else incorrect, and I updated it yesterday with your information about the commit in question.",
    "created_at": "2011-12-03T15:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129922",
    "user": "https://github.com/kcrisman"
}
```

> Please can you add this to the maxima bug tracker?

I think that you may have missed the fact that I already did so in comment:4 three months ago.   The person from Maxima who first looked at it must have tried something else incorrect, and I updated it yesterday with your information about the commit in question.



---

archive/issue_comments_129923.json:
```json
{
    "body": "This is now fixed upstream.\n\n```\n(%i1) display2d:false;\n(%o1) false\n(%i2) float(integrate(sin(x^2)/(x^2),x,1,inf));\n(%o2) -.1767766952966368*(.2733129188747918*%i-.5348723621187719)*%i\n +.1767766952966368*(-.2733129188747918*%i-.5348723621187719)*%i\n -.1767766952966368*(.2733129188747918*%i-.5348723621187719)\n -.1767766952966368*(-.2733129188747918*%i-.5348723621187719)\n(%i3) integrate(sin(x^2)/(x^2),x,1,inf);\n(%o3) %i*gamma_incomplete(-1/2,%i)/2^(5/2)\n -gamma_incomplete(-1/2,%i)/2^(5/2)-%i*gamma_incomplete(-1/2,-%i)/2^(5/2)\n -gamma_incomplete(-1/2,-%i)/2^(5/2)\n```",
    "created_at": "2012-05-15T02:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129923",
    "user": "https://github.com/kcrisman"
}
```

This is now fixed upstream.

```
(%i1) display2d:false;
(%o1) false
(%i2) float(integrate(sin(x^2)/(x^2),x,1,inf));
(%o2) -.1767766952966368*(.2733129188747918*%i-.5348723621187719)*%i
 +.1767766952966368*(-.2733129188747918*%i-.5348723621187719)*%i
 -.1767766952966368*(.2733129188747918*%i-.5348723621187719)
 -.1767766952966368*(-.2733129188747918*%i-.5348723621187719)
(%i3) integrate(sin(x^2)/(x^2),x,1,inf);
(%o3) %i*gamma_incomplete(-1/2,%i)/2^(5/2)
 -gamma_incomplete(-1/2,%i)/2^(5/2)-%i*gamma_incomplete(-1/2,-%i)/2^(5/2)
 -gamma_incomplete(-1/2,-%i)/2^(5/2)
```



---

archive/issue_comments_129924.json:
```json
{
    "body": "Karl-Dieter, do you know in which release of Maxima this will be fixed?\nOr is there a simple patch we can integrate in Sage?\n\nPaul",
    "created_at": "2012-05-15T08:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129924",
    "user": "https://github.com/zimmermann6"
}
```

Karl-Dieter, do you know in which release of Maxima this will be fixed?
Or is there a simple patch we can integrate in Sage?

Paul



---

archive/issue_comments_129925.json:
```json
{
    "body": "It's in the latest stable release, 5.27.0.  Probably it will be easiest to just upgrade.",
    "created_at": "2012-05-15T12:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129925",
    "user": "https://github.com/kcrisman"
}
```

It's in the latest stable release, 5.27.0.  Probably it will be easiest to just upgrade.



---

archive/issue_comments_129926.json:
```json
{
    "body": "Both new Maxima and [Wolfram Alpha](http://www.wolframalpha.com/input/?i=integrate%5Bsin%28x%5E2%29%2F%28x%5E2%29%2C+x%2C+1%2C+infinity%5D) give the value about 0.2857367, and not 0.28625044 (what you see in the ticket description). Changing the latter to reflect the reality.",
    "created_at": "2012-12-29T10:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129926",
    "user": "https://github.com/dimpase"
}
```

Both new Maxima and [Wolfram Alpha](http://www.wolframalpha.com/input/?i=integrate%5Bsin%28x%5E2%29%2F%28x%5E2%29%2C+x%2C+1%2C+infinity%5D) give the value about 0.2857367, and not 0.28625044 (what you see in the ticket description). Changing the latter to reflect the reality.



---

archive/issue_comments_129927.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-01-03T20:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129927",
    "user": "https://github.com/kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_129928.json:
```json
{
    "body": "This is fixed (and doctested) at #13364.",
    "created_at": "2013-01-03T20:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129928",
    "user": "https://github.com/kcrisman"
}
```

This is fixed (and doctested) at #13364.



---

archive/issue_comments_129929.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-03T20:32:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129929",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_030878.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-03T20:32:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11737#event-30878"
}
```



---

archive/issue_comments_129930.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-17T07:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129930",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_030879.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-17T07:34:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11737#event-30879"
}
```



---

archive/issue_comments_129931.json:
```json
{
    "body": "Replying to [comment:14 dimpase]:\n> Both new Maxima and [Wolfram Alpha](http://www.wolframalpha.com/input/?i=integrate%5Bsin%28x%5E2%29%2F%28x%5E2%29%2C+x%2C+1%2C+infinity%5D) give the value about 0.2857367, and not 0.28625044 (what you see in the ticket description). Changing the latter to reflect the reality.\n\nThe value was still off in the last digit given in the test. Fixed in #16697",
    "created_at": "2014-08-09T15:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11737#issuecomment-129931",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:14 dimpase]:
> Both new Maxima and [Wolfram Alpha](http://www.wolframalpha.com/input/?i=integrate%5Bsin%28x%5E2%29%2F%28x%5E2%29%2C+x%2C+1%2C+infinity%5D) give the value about 0.2857367, and not 0.28625044 (what you see in the ticket description). Changing the latter to reflect the reality.

The value was still off in the last digit given in the test. Fixed in #16697
