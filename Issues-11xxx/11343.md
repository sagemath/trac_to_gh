# Issue 11343: Disallow @ symbol in username because of TinyMCE problems

archive/issues_011171.json:
```json
{
    "body": "Please see below for what TinyMCE cells look like if you have an ``@`` in your username.  This is since at least 4.6, see [this thread](http://groups.google.com/group/sage-notebook/browse_thread/thread/f0ceaa24700f4059).\n\nI'm making this critical, because it removes major piece of functionality.  At the **very least**, we'll need to change the login page to remove the `@` availability!!!\n\nRe-enabling this is #11470.\n\n---\n\nFrom #8995, a dup of this: \n\n\nSee the thread by Dennis Watson here:\n\nhttp://groups.google.com/group/sage-support/browse_frm/thread/2acd499a566efce1\n\nIn particular, some tinymce javascript files were trying to download from a URL that included the username, like:\n\nhttp://sagenb.org/home/usernamewith`@`/javascript/tiny_mce/langs/en.js\n\n---\n\n**Apply** [attachment:trac_11343-fix_at_symbol.patch] to the SAGENB repository.\n\nAssignee: jason, mpatel, was\n\nCC:  @jasongrout boothby @williamstein @qed777 @dandrake @ppurka\n\nKeywords: notebook, tinymce, at, sd31\n\nResolution: fixed\n\nAuthor: Karl-Dieter Crisman\n\nReviewer: Jeroen Demeyer\n\nUpstream: Reported upstream. Little or no feedback.\n\nMerged: sage-4.7.2.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/11343\n\n",
    "closed_at": "2011-10-16T15:38:08Z",
    "created_at": "2011-05-17T15:35:54Z",
    "labels": [
        "component: notebook",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Disallow @ symbol in username because of TinyMCE problems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11343",
    "user": "https://github.com/kcrisman"
}
```
Please see below for what TinyMCE cells look like if you have an ``@`` in your username.  This is since at least 4.6, see [this thread](http://groups.google.com/group/sage-notebook/browse_thread/thread/f0ceaa24700f4059).

I'm making this critical, because it removes major piece of functionality.  At the **very least**, we'll need to change the login page to remove the `@` availability!!!

Re-enabling this is #11470.

---

From #8995, a dup of this: 


See the thread by Dennis Watson here:

http://groups.google.com/group/sage-support/browse_frm/thread/2acd499a566efce1

In particular, some tinymce javascript files were trying to download from a URL that included the username, like:

http://sagenb.org/home/usernamewith`@`/javascript/tiny_mce/langs/en.js

---

**Apply** [attachment:trac_11343-fix_at_symbol.patch] to the SAGENB repository.

Assignee: jason, mpatel, was

CC:  @jasongrout boothby @williamstein @qed777 @dandrake @ppurka

Keywords: notebook, tinymce, at, sd31

Resolution: fixed

Author: Karl-Dieter Crisman

Reviewer: Jeroen Demeyer

Upstream: Reported upstream. Little or no feedback.

Merged: sage-4.7.2.rc0

Issue created by migration from https://trac.sagemath.org/ticket/11343





---

archive/issue_comments_155367.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [sageproblem.JPG](tarball://root/attachments/some-uuid/ticket11343/sageproblem.JPG) by @kcrisman created at 2011-05-18 02:26:40\n\nThis is also apparently known elsewhere - see more of the same thread.  Changing the upstream designation; hopefully a little more digging will find a workaround.",
    "created_at": "2011-05-18T02:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155367",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
Attachment [sageproblem.JPG](tarball://root/attachments/some-uuid/ticket11343/sageproblem.JPG) by @kcrisman created at 2011-05-18 02:26:40

This is also apparently known elsewhere - see more of the same thread.  Changing the upstream designation; hopefully a little more digging will find a workaround.



---

archive/issue_comments_155368.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Not yet reported upstream; Will do shortly.\"",
    "created_at": "2011-05-18T02:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155368",
    "user": "https://github.com/kcrisman"
}
```

Changing upstream from "N/A" to "Not yet reported upstream; Will do shortly."



---

archive/issue_comments_155369.json:
```json
{
    "body": "<a id='comment:2'></a>\nOkay, here is where one would have to at least change this - `sagenb/data/sage/html/accounts/registration.html`.  The other place is in `twist.py`.",
    "created_at": "2011-06-13T18:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155369",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
Okay, here is where one would have to at least change this - `sagenb/data/sage/html/accounts/registration.html`.  The other place is in `twist.py`.



---

archive/issue_comments_155370.json:
```json
{
    "body": "Changing keywords from \"notebook, tinymce, at\" to \"notebook, tinymce, at, sd31\".",
    "created_at": "2011-06-14T00:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155370",
    "user": "https://github.com/kcrisman"
}
```

Changing keywords from "notebook, tinymce, at" to "notebook, tinymce, at, sd31".



---

archive/issue_comments_155371.json:
```json
{
    "body": "<a id='comment:3'></a>\nOkay, I've got this temporarily disabled.    Re-enabling this is #11470.\n\nPlease test whether this breaks existing usernames with `@`!!!",
    "created_at": "2011-06-14T00:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155371",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
Okay, I've got this temporarily disabled.    Re-enabling this is #11470.

Please test whether this breaks existing usernames with `@`!!!



---

archive/issue_comments_155372.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-06-14T00:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155372",
    "user": "https://github.com/kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_155373.json:
```json
{
    "body": "Attachment [trac_11343-fix_at_symbol.patch](tarball://root/attachments/some-uuid/ticket11343/trac_11343-fix_at_symbol.patch) by @kcrisman created at 2011-06-14 00:01:46",
    "created_at": "2011-06-14T00:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155373",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_11343-fix_at_symbol.patch](tarball://root/attachments/some-uuid/ticket11343/trac_11343-fix_at_symbol.patch) by @kcrisman created at 2011-06-14 00:01:46



---

archive/issue_comments_155374.json:
```json
{
    "body": "Changing upstream from \"Not yet reported upstream; Will do shortly.\" to \"Reported upstream. Little or no feedback.\"",
    "created_at": "2011-06-16T23:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155374",
    "user": "https://github.com/kcrisman"
}
```

Changing upstream from "Not yet reported upstream; Will do shortly." to "Reported upstream. Little or no feedback."



---

archive/issue_comments_155375.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis is reported upstream at [this link](http://code.google.com/p/sagenb/issues/detail?id=26).",
    "created_at": "2011-06-16T23:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155375",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'></a>
This is reported upstream at [this link](http://code.google.com/p/sagenb/issues/detail?id=26).



---

archive/issue_comments_155376.json:
```json
{
    "body": "<a id='comment:5'></a>\nConfirmed for flask as well, at least at demo2.sagenb.org or sagenb.org (I tried both)\n\n```\nhttp://demo2.sagenb.org/home/b%40b/0/\n```\nis the name but it still causes problems.   You can try this with password 'abc123'.  Note that the user name at the top (next to Toggle) is still `b`@`b`.",
    "created_at": "2011-06-23T03:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155376",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
Confirmed for flask as well, at least at demo2.sagenb.org or sagenb.org (I tried both)

```
http://demo2.sagenb.org/home/b%40b/0/
```
is the name but it still causes problems.   You can try this with password 'abc123'.  Note that the user name at the top (next to Toggle) is still `b`@`b`.



---

archive/issue_comments_155377.json:
```json
{
    "body": "<a id='comment:6'></a>\nWhat's the status of this?  If the Flask notebook isn't going to be done soon, this should really have been in 4.7.1 :( especially as people upgrade their servers.",
    "created_at": "2011-08-18T01:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155377",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
What's the status of this?  If the Flask notebook isn't going to be done soon, this should really have been in 4.7.1 :( especially as people upgrade their servers.



---

archive/issue_comments_155378.json:
```json
{
    "body": "<a id='comment:7'></a>\nAt the very least, we should take \"`@`\" out of the explicitly-listed good characters for notebook names on the registration page!",
    "created_at": "2011-08-18T02:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155378",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
At the very least, we should take "`@`" out of the explicitly-listed good characters for notebook names on the registration page!



---

archive/issue_comments_155379.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jason](#comment%3A7):\n> At the very least, we should take \"`@`\" out of the explicitly-listed good characters for notebook names on the registration page!\n\nWhich is what my patch does!!!",
    "created_at": "2011-08-18T12:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155379",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>
Replying to [jason](#comment%3A7):
> At the very least, we should take "`@`" out of the explicitly-listed good characters for notebook names on the registration page!

Which is what my patch does!!!



---

archive/issue_comments_155380.json:
```json
{
    "body": "<a id='comment:9'></a>\nAh, I see I just volunteered to review this :)",
    "created_at": "2011-08-18T17:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155380",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'></a>
Ah, I see I just volunteered to review this :)



---

archive/issue_comments_155381.json:
```json
{
    "body": "<a id='comment:10'></a>\na) cannot repeat this with rkirov's flask version of nb and twisted-11 installed.\n\nb) this is a duplicate of #8995\n\nIMHO this should not be fixed. Let's do the upgrades instead!",
    "created_at": "2011-09-29T04:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155381",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
a) cannot repeat this with rkirov's flask version of nb and twisted-11 installed.

b) this is a duplicate of #8995

IMHO this should not be fixed. Let's do the upgrades instead!



---

archive/issue_comments_155382.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-09-29T04:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155382",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_155383.json:
```json
{
    "body": "<a id='comment:11'></a>\nFair enough, but WHEN will the upgrades happen? We really should not be releasing \"real\" releases of Sage that admins are using for nb servers without fixing at least the documentation.   I don't know what the current status is.  I don't think that the documentation fix was merged in sagenb, despite a number of pesters.  \n\nIs there a specific server I can test this on, Dima?   If there is a sense that flask will be merged soon AND this fixes it, great.    If not...  \n\nAlso, did you try it with several browsers?  I don't think it's browser-dependent but it's worth checking.\n\nI'm going to mark #8995 as the dup, just because this has more discussion and a patch, though I don't know if it still applies to sagenb.",
    "created_at": "2011-09-29T13:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155383",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
Fair enough, but WHEN will the upgrades happen? We really should not be releasing "real" releases of Sage that admins are using for nb servers without fixing at least the documentation.   I don't know what the current status is.  I don't think that the documentation fix was merged in sagenb, despite a number of pesters.  

Is there a specific server I can test this on, Dima?   If there is a sense that flask will be merged soon AND this fixes it, great.    If not...  

Also, did you try it with several browsers?  I don't think it's browser-dependent but it's worth checking.

I'm going to mark #8995 as the dup, just because this has more discussion and a patch, though I don't know if it still applies to sagenb.



---

archive/issue_comments_155384.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,15 @@\n Please see below for what TinyMCE cells look like if you have an ``@`` in your username.  This is since at least 4.6, see [this thread](http://groups.google.com/group/sage-notebook/browse_thread/thread/f0ceaa24700f4059).\n \n I'm making this critical, because it removes major piece of functionality.  At the **very least**, we'll need to change the login page to remove the `@` availability!!!\n+\n+From #8995, a dup of this: \n+\n+\n+See the thread by Dennis Watson here:\n+\n+http://groups.google.com/group/sage-support/browse_frm/thread/2acd499a566efce1\n+\n+In particular, some tinymce javascript files were trying to download from a URL that included the username, like:\n+\n+http://sagenb.org/home/usernamewith`@`/javascript/tiny_mce/langs/en.js\n+\n``````\n",
    "created_at": "2011-09-29T13:05:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155384",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,15 @@
 Please see below for what TinyMCE cells look like if you have an ``@`` in your username.  This is since at least 4.6, see [this thread](http://groups.google.com/group/sage-notebook/browse_thread/thread/f0ceaa24700f4059).
 
 I'm making this critical, because it removes major piece of functionality.  At the **very least**, we'll need to change the login page to remove the `@` availability!!!
+
+From #8995, a dup of this: 
+
+
+See the thread by Dennis Watson here:
+
+http://groups.google.com/group/sage-support/browse_frm/thread/2acd499a566efce1
+
+In particular, some tinymce javascript files were trying to download from a URL that included the username, like:
+
+http://sagenb.org/home/usernamewith`@`/javascript/tiny_mce/langs/en.js
+
``````




---

archive/issue_comments_155385.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [kcrisman](#comment%3A11):\n> Fair enough, but WHEN will the upgrades happen? We really should not be releasing \"real\" releases of Sage that admins are using for nb servers without fixing at least the documentation.   I don't know what the current status is.  I don't think that the documentation fix was merged in sagenb, despite a number of pesters.  \n> \n> Is there a specific server I can test this on, Dima?   If there is a sense that flask will be merged soon AND this fixes it, great.    If not...  \n\n\nI'm looking into it now. You can try meanwhile using test.sagenb.org, which runs twisted 11.\nI'll open a ticket for upgrading twisted to version 11 real soon...\nThe initial spkg and a patch to have it running on Rado's flack notebook is already on \nhttp://boxen.math.washington.edu/home/dima/packages/\nand\nhttp://boxen.math.washington.edu/home/dima/patches/\n\n> \n> Also, did you try it with several browsers?  I don't think it's browser-dependent but it's worth checking.\n\n\nno, I didn't. \n\n> \n> I'm going to mark #8995 as the dup, just because this has more discussion and a patch, though I don't know if it still applies to sagenb.",
    "created_at": "2011-09-29T13:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155385",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>
Replying to [kcrisman](#comment%3A11):
> Fair enough, but WHEN will the upgrades happen? We really should not be releasing "real" releases of Sage that admins are using for nb servers without fixing at least the documentation.   I don't know what the current status is.  I don't think that the documentation fix was merged in sagenb, despite a number of pesters.  
> 
> Is there a specific server I can test this on, Dima?   If there is a sense that flask will be merged soon AND this fixes it, great.    If not...  


I'm looking into it now. You can try meanwhile using test.sagenb.org, which runs twisted 11.
I'll open a ticket for upgrading twisted to version 11 real soon...
The initial spkg and a patch to have it running on Rado's flack notebook is already on 
http://boxen.math.washington.edu/home/dima/packages/
and
http://boxen.math.washington.edu/home/dima/patches/

> 
> Also, did you try it with several browsers?  I don't think it's browser-dependent but it's worth checking.


no, I didn't. 

> 
> I'm going to mark #8995 as the dup, just because this has more discussion and a patch, though I don't know if it still applies to sagenb.



---

archive/issue_comments_155386.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-09-29T13:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155386",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_155387.json:
```json
{
    "body": "<a id='comment:14'></a>\nSame problem.   See attached screenshot.  You can check this out with username `abc`@`abc` with password `123123`.",
    "created_at": "2011-09-29T13:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155387",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>
Same problem.   See attached screenshot.  You can check this out with username `abc`@`abc` with password `123123`.



---

archive/issue_comments_155388.json:
```json
{
    "body": "<a id='comment:15'></a>\nAttachment [test.sagenb-failure.png](tarball://root/attachments/some-uuid/ticket11343/test.sagenb-failure.png) by @kcrisman created at 2011-09-29 13:30:31\n\nI'm making this a blocker for 4.7.2.  This is totally unacceptable that we do not at least change the login screen to avoid ``@`` until this is fixed.  Sorry, Leif :)",
    "created_at": "2011-09-29T13:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155388",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'></a>
Attachment [test.sagenb-failure.png](tarball://root/attachments/some-uuid/ticket11343/test.sagenb-failure.png) by @kcrisman created at 2011-09-29 13:30:31

I'm making this a blocker for 4.7.2.  This is totally unacceptable that we do not at least change the login screen to avoid ``@`` until this is fixed.  Sorry, Leif :)



---

archive/issue_comments_155389.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [kcrisman](#comment%3A14):\n> Same problem.   See attached screenshot.  You can check this out with username `abc`@`abc` with password `123123`.\n\n\nI tried with stock  Firefox, and Chrome on MacOSX 10.6.8...\nI cannot reproduce it; please state the browser, OS, (and medication ;-))  you are on.\n\nI can reproduce it with the stock Safari on the said platform (this also is not working with the updated version of tiny-mce, locally). \n\nOh well, we all but banned IE from using the nb, we should ban other closed-source browsers. I seldom use Safari nowadays. Safari sucks. So is IE. Don't use them for serious business.",
    "created_at": "2011-09-29T14:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155389",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>
Replying to [kcrisman](#comment%3A14):
> Same problem.   See attached screenshot.  You can check this out with username `abc`@`abc` with password `123123`.


I tried with stock  Firefox, and Chrome on MacOSX 10.6.8...
I cannot reproduce it; please state the browser, OS, (and medication ;-))  you are on.

I can reproduce it with the stock Safari on the said platform (this also is not working with the updated version of tiny-mce, locally). 

Oh well, we all but banned IE from using the nb, we should ban other closed-source browsers. I seldom use Safari nowadays. Safari sucks. So is IE. Don't use them for serious business.



---

archive/issue_comments_155390.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-09-29T14:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155390",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_155391.json:
```json
{
    "body": "<a id='comment:17'></a>\n> > Same problem.   See attached screenshot.  You can check this out with username `abc`@`abc` with password `123123`.\n\n> \n> I tried with stock  Firefox, and Chrome on MacOSX 10.6.8...\n> I cannot reproduce it; please state the browser, OS, (and medication ;-))  you are on.\n> \n> I can reproduce it with the stock Safari on the said platform (this also is not working with the updated version of tiny-mce, locally). \n\n\nOkay, fair enough.  Hmm, I thought I had seen it on FF.  Checking...\n\n> Oh well, we all but banned IE from using the nb, we should ban other closed-source browsers. I seldom use Safari nowadays. Safari sucks. So is IE. Don't use them for serious business.\n\n\nWell, it does load significantly faster (for me), and is standards-compliant enough for me.  What about Opera?    \n\nAlso, I think it is unreasonable to ban these both longterm.   This ticket isn't for old hands, it's so that new users don't think Sage sucks.  Even with IE (where I agree with you), most of the world is using it, still, and we don't want people to not use Sage because they don't want to download a new browser or whatever.  \n\nAnyway, we need to do *something* with this issue.    If we aren't merging flask, or whatever fixed this in FF, in 4.7.2, then this should still be fixed for now.  See #11470 for the followup once we do.",
    "created_at": "2011-09-29T15:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155391",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'></a>
> > Same problem.   See attached screenshot.  You can check this out with username `abc`@`abc` with password `123123`.

> 
> I tried with stock  Firefox, and Chrome on MacOSX 10.6.8...
> I cannot reproduce it; please state the browser, OS, (and medication ;-))  you are on.
> 
> I can reproduce it with the stock Safari on the said platform (this also is not working with the updated version of tiny-mce, locally). 


Okay, fair enough.  Hmm, I thought I had seen it on FF.  Checking...

> Oh well, we all but banned IE from using the nb, we should ban other closed-source browsers. I seldom use Safari nowadays. Safari sucks. So is IE. Don't use them for serious business.


Well, it does load significantly faster (for me), and is standards-compliant enough for me.  What about Opera?    

Also, I think it is unreasonable to ban these both longterm.   This ticket isn't for old hands, it's so that new users don't think Sage sucks.  Even with IE (where I agree with you), most of the world is using it, still, and we don't want people to not use Sage because they don't want to download a new browser or whatever.  

Anyway, we need to do *something* with this issue.    If we aren't merging flask, or whatever fixed this in FF, in 4.7.2, then this should still be fixed for now.  See #11470 for the followup once we do.



---

archive/issue_comments_155392.json:
```json
{
    "body": "<a id='comment:18'></a>\nBasu, care to try this on Opera?",
    "created_at": "2011-09-29T16:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155392",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>
Basu, care to try this on Opera?



---

archive/issue_comments_155393.json:
```json
{
    "body": "Works fine in opera-11.51 even without the patch. (sage-4.7.0)",
    "created_at": "2011-09-29T16:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155393",
    "user": "https://github.com/ppurka"
}
```

Works fine in opera-11.51 even without the patch. (sage-4.7.0)



---

archive/issue_comments_155394.json:
```json
{
    "body": "<a id='comment:19'></a>\nAttachment [works_fine_without_patch_opera-11.51.png](tarball://root/attachments/some-uuid/ticket11343/works_fine_without_patch_opera-11.51.png) by @ppurka created at 2011-09-29 16:46:39\n\nReplying to [dimpase](#comment%3A18):\n> Basu, care to try this on Opera?\n\n\nIt works fine in opera even without the patch. But `@` should not have been allowed in usernames anyway because of this message that I got while creating the username:\n\n*The username must start with a letter and be between 4 and 32 characters long. It can only consist of letters, numbers, underscores, and one dot (.).*",
    "created_at": "2011-09-29T16:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155394",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:19'></a>
Attachment [works_fine_without_patch_opera-11.51.png](tarball://root/attachments/some-uuid/ticket11343/works_fine_without_patch_opera-11.51.png) by @ppurka created at 2011-09-29 16:46:39

Replying to [dimpase](#comment%3A18):
> Basu, care to try this on Opera?


It works fine in opera even without the patch. But `@` should not have been allowed in usernames anyway because of this message that I got while creating the username:

*The username must start with a letter and be between 4 and 32 characters long. It can only consist of letters, numbers, underscores, and one dot (.).*



---

archive/issue_comments_155395.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [ppurka](#comment%3A19):\n> Replying to [dimpase](#comment%3A18):\n> > Basu, care to try this on Opera?\n\n> \n> It works fine in opera even without the patch. But `@` should not have been allowed in usernames anyway because of this message that I got while creating the username:\n> \n> *The username must start with a letter and be between 4 and 32 characters long. It can only consist of letters, numbers, underscores, and one dot (.).*\n\n\nSorry, I am not thinking straight today. I forgot that I am running rkirov-flask on the local installation (installed in $HOME). I tried the system installation also (installed in /) which is sage-4.7.1 and it is using the old notebook and the tiny-mce part works fine. (I tested it from the admin account since I am unable to login as any user, even admin, from the sign-in page. This is a separate issue and is unrelated to this bug.)",
    "created_at": "2011-09-29T17:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155395",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:20'></a>
Replying to [ppurka](#comment%3A19):
> Replying to [dimpase](#comment%3A18):
> > Basu, care to try this on Opera?

> 
> It works fine in opera even without the patch. But `@` should not have been allowed in usernames anyway because of this message that I got while creating the username:
> 
> *The username must start with a letter and be between 4 and 32 characters long. It can only consist of letters, numbers, underscores, and one dot (.).*


Sorry, I am not thinking straight today. I forgot that I am running rkirov-flask on the local installation (installed in $HOME). I tried the system installation also (installed in /) which is sage-4.7.1 and it is using the old notebook and the tiny-mce part works fine. (I tested it from the admin account since I am unable to login as any user, even admin, from the sign-in page. This is a separate issue and is unrelated to this bug.)



---

archive/issue_comments_155396.json:
```json
{
    "body": "Attachment [opera-11.51_sage-4.7.1_does_not_work.png](tarball://root/attachments/some-uuid/ticket11343/opera-11.51_sage-4.7.1_does_not_work.png) by @ppurka created at 2011-09-29 17:54:27\n\nNeglect the previous *opera*.png. This is on a fresh .sagenb directory (sage-4.7.1)",
    "created_at": "2011-09-29T17:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155396",
    "user": "https://github.com/ppurka"
}
```

Attachment [opera-11.51_sage-4.7.1_does_not_work.png](tarball://root/attachments/some-uuid/ticket11343/opera-11.51_sage-4.7.1_does_not_work.png) by @ppurka created at 2011-09-29 17:54:27

Neglect the previous *opera*.png. This is on a fresh .sagenb directory (sage-4.7.1)



---

archive/issue_comments_155397.json:
```json
{
    "body": "<a id='comment:21'></a>\nI created a fresh /tmp/a.sagenb directory and ran sage -n on that directory. The bug is there in opera-11.51 with sage-4.7.1, amd64 Gentoo Linux. Sorry for all the noise I created earlier.\n\nI believe my ~/.sage directory was being written to by both sage-4.7 (with rkirov-flask notebook) and sage-4.7.1 (with old notebook) and so I wasn't seeing this bug earlier.",
    "created_at": "2011-09-29T17:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155397",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:21'></a>
I created a fresh /tmp/a.sagenb directory and ran sage -n on that directory. The bug is there in opera-11.51 with sage-4.7.1, amd64 Gentoo Linux. Sorry for all the noise I created earlier.

I believe my ~/.sage directory was being written to by both sage-4.7 (with rkirov-flask notebook) and sage-4.7.1 (with old notebook) and so I wasn't seeing this bug earlier.



---

archive/issue_comments_155398.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [ppurka](#comment%3A21):\n> I created a fresh /tmp/a.sagenb directory and ran sage -n on that directory. The bug is there in opera-11.51 with sage-4.7.1, amd64 Gentoo Linux. Sorry for all the noise I created earlier.\n> \n> I believe my ~/.sage directory was being written to by both sage-4.7 (with rkirov-flask notebook) and sage-4.7.1 (with old notebook) and so I wasn't seeing this bug earlier.\n\n\nI cannot reproduce this on Opera 11.51, Build 1087, on Mac OS X 10.6.8 on flack notebook with the new tiny_mce 3.4.5.\nCould you please try getting the tiny_mce upgrade from here:\nhttp://boxen.math.washington.edu/home/dima/packages/tiny_mce-3.4.5.tar.bz\nreplace your `SAGE_ROOT/devel/....../sagenb/data/tiny_mce/` with the contents of this\narchive, and try again?",
    "created_at": "2011-09-30T10:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155398",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
Replying to [ppurka](#comment%3A21):
> I created a fresh /tmp/a.sagenb directory and ran sage -n on that directory. The bug is there in opera-11.51 with sage-4.7.1, amd64 Gentoo Linux. Sorry for all the noise I created earlier.
> 
> I believe my ~/.sage directory was being written to by both sage-4.7 (with rkirov-flask notebook) and sage-4.7.1 (with old notebook) and so I wasn't seeing this bug earlier.


I cannot reproduce this on Opera 11.51, Build 1087, on Mac OS X 10.6.8 on flack notebook with the new tiny_mce 3.4.5.
Could you please try getting the tiny_mce upgrade from here:
http://boxen.math.washington.edu/home/dima/packages/tiny_mce-3.4.5.tar.bz
replace your `SAGE_ROOT/devel/....../sagenb/data/tiny_mce/` with the contents of this
archive, and try again?



---

archive/issue_comments_155399.json:
```json
{
    "body": "<a id='comment:23'></a>\nIn gist, here is the current status of when it works: it works with flask notebook, irrespective of tiny-mce version.\n\n\n* sage-4.7.0 + flask nb + tiny-mce (old) + opera-11.51: Works\n* sage-4.7.0 + flask nb + tiny-mce-3.4.5 + opera-11.51: Works\n* sage-4.7.1 + old nb + tiny-mce (old) + opera-11.51: Does not work\n* sage-4.7.1 + old nb + tiny-mce-3.4.5 + opera-11.51: Does not work\n* sage-4.7.1 + old nb + tiny-mce-3.4.5 + firefox-6: Does not work",
    "created_at": "2011-10-01T08:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155399",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:23'></a>
In gist, here is the current status of when it works: it works with flask notebook, irrespective of tiny-mce version.


* sage-4.7.0 + flask nb + tiny-mce (old) + opera-11.51: Works
* sage-4.7.0 + flask nb + tiny-mce-3.4.5 + opera-11.51: Works
* sage-4.7.1 + old nb + tiny-mce (old) + opera-11.51: Does not work
* sage-4.7.1 + old nb + tiny-mce-3.4.5 + opera-11.51: Does not work
* sage-4.7.1 + old nb + tiny-mce-3.4.5 + firefox-6: Does not work



---

archive/issue_comments_155400.json:
```json
{
    "body": "<a id='comment:24'></a>\nThis ticket is listed as blocker, what is the current status?  It seems like disallowing users to register usernames with `@` could be a quick and eays solution.  But they should still be able to *log in* with any existing username.",
    "created_at": "2011-10-12T19:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155400",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
This ticket is listed as blocker, what is the current status?  It seems like disallowing users to register usernames with `@` could be a quick and eays solution.  But they should still be able to *log in* with any existing username.



---

archive/issue_comments_155401.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [jdemeyer](#comment%3A24):\n> This ticket is listed as blocker, what is the current status?  It seems like disallowing users to register usernames with `@` could be a quick and eays solution.  But they should still be able to *log in* with any existing username.\n\n\nit's should not be a blocker, as a workaround is to use another browser. I therefore take the liberty to make it just major instead...",
    "created_at": "2011-10-12T20:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155401",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>
Replying to [jdemeyer](#comment%3A24):
> This ticket is listed as blocker, what is the current status?  It seems like disallowing users to register usernames with `@` could be a quick and eays solution.  But they should still be able to *log in* with any existing username.


it's should not be a blocker, as a workaround is to use another browser. I therefore take the liberty to make it just major instead...



---

archive/issue_comments_155402.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-10-12T20:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155402",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_155403.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,10 @@\n Please see below for what TinyMCE cells look like if you have an ``@`` in your username.  This is since at least 4.6, see [this thread](http://groups.google.com/group/sage-notebook/browse_thread/thread/f0ceaa24700f4059).\n \n I'm making this critical, because it removes major piece of functionality.  At the **very least**, we'll need to change the login page to remove the `@` availability!!!\n+\n+Re-enabling this is #11470.\n+\n+---\n \n From #8995, a dup of this: \n \n``````\n",
    "created_at": "2011-10-12T20:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155403",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,10 @@
 Please see below for what TinyMCE cells look like if you have an ``@`` in your username.  This is since at least 4.6, see [this thread](http://groups.google.com/group/sage-notebook/browse_thread/thread/f0ceaa24700f4059).
 
 I'm making this critical, because it removes major piece of functionality.  At the **very least**, we'll need to change the login page to remove the `@` availability!!!
+
+Re-enabling this is #11470.
+
+---
 
 From #8995, a dup of this: 
 
``````




---

archive/issue_comments_155404.json:
```json
{
    "body": "Changing author from \"\" to \"Karl-Dieter Crisman\"",
    "created_at": "2011-10-12T20:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155404",
    "user": "https://github.com/kcrisman"
}
```

Changing author from "" to "Karl-Dieter Crisman"



---

archive/issue_events_034961.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11343#event-34961"
}
```



---

archive/issue_comments_155405.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [jdemeyer](#comment%3A24):\n> This ticket is listed as blocker, what is the current status?  It seems like disallowing users to register usernames with `@` could be a quick and eays solution.  But they should still be able to *log in* with any existing username.\n\n\nWhich is precisely what [attachment:trac_11343-fix_at_symbol.patch] does.  I just checked and it still applies cleanly...  I just feel this is better than waiting eternally for the flask or TinyMCE update.\n\nI really disagree that it's major and not blocker.   Sage doesn't work properly, and saying \"use another browser\" is going to keep on being said until we have zero browsers that support it.  If ppurka finds it doesn't work with FF or Opera with the new TinyMCE, and it doesn't work on Safari, and we already suggest (though nowhere official!!!) that IE is gone... should we be sending people to lynx?\n\nSo critical.  But if someone just reviews this patch, it fixes the problem, and that is better.  Plus it lights a fire under the flask/sagenb people to finish things off so we don't mess with things any more.",
    "created_at": "2011-10-12T20:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155405",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'></a>
Replying to [jdemeyer](#comment%3A24):
> This ticket is listed as blocker, what is the current status?  It seems like disallowing users to register usernames with `@` could be a quick and eays solution.  But they should still be able to *log in* with any existing username.


Which is precisely what [attachment:trac_11343-fix_at_symbol.patch] does.  I just checked and it still applies cleanly...  I just feel this is better than waiting eternally for the flask or TinyMCE update.

I really disagree that it's major and not blocker.   Sage doesn't work properly, and saying "use another browser" is going to keep on being said until we have zero browsers that support it.  If ppurka finds it doesn't work with FF or Opera with the new TinyMCE, and it doesn't work on Safari, and we already suggest (though nowhere official!!!) that IE is gone... should we be sending people to lynx?

So critical.  But if someone just reviews this patch, it fixes the problem, and that is better.  Plus it lights a fire under the flask/sagenb people to finish things off so we don't mess with things any more.



---

archive/issue_comments_155406.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,3 +17,6 @@\n \n http://sagenb.org/home/usernamewith`@`/javascript/tiny_mce/langs/en.js\n \n+---\n+\n+**Apply** [attachment:trac_11343-fix_at_symbol.patch] to the SAGENB repository.\n``````\n",
    "created_at": "2011-10-14T16:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155406",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,3 +17,6 @@
 
 http://sagenb.org/home/usernamewith`@`/javascript/tiny_mce/langs/en.js
 
+---
+
+**Apply** [attachment:trac_11343-fix_at_symbol.patch] to the SAGENB repository.
``````




---

archive/issue_comments_155407.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-10-14T18:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155407",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_155408.json:
```json
{
    "body": "<a id='comment:28'></a>\nPatch does the job.  New registrations with `@` are not possible, existing ones can still log in.",
    "created_at": "2011-10-14T18:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155408",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
Patch does the job.  New registrations with `@` are not possible, existing ones can still log in.



---

archive/issue_comments_155409.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2011-10-14T18:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155409",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_events_034962.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11343#event-34962"
}
```



---

archive/issue_events_034963.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "rename": {
        "from": "TinyMCE won't work with @ in the username of notebook",
        "to": "Disallow @ symbol in username because of TinyMCE problems"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11343#event-34963"
}
```



---

archive/issue_comments_155410.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.7.2.rc0\"",
    "created_at": "2011-10-16T15:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155410",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.7.2.rc0"



---

archive/issue_comments_155411.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-10-16T15:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11343#issuecomment-155411",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_034964.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-16T15:38:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11343",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11343#event-34964"
}
```
