# Issue 11618: solve with solution_dict=True doesn't always return a list

archive/issues_011446.json:
```json
{
    "body": "As pointed out in a post on sage-support:\n\n```\nvar('x')\ng(x)=0\nprint solve(g(x)==0,x)\nprint solve(g(x)==0,x,solution_dict=True) \n```\ngives\n\n```\n[x == r1]\n{x: r1}\n```\nIt should be `[{x: r1}]` to be consistent.\n\nAssignee: @burcin\n\nCC:  @kcrisman\n\nKeywords: solve, solution_dict\n\nResolution: fixed\n\nDependencies: #8553\n\nAuthor: Leif Leonhardy\n\nReviewer: Karl-Dieter Crisman\n\nMerged: sage-4.7.2.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/11618\n\n",
    "closed_at": "2011-08-18T22:04:57Z",
    "created_at": "2011-07-22T01:03:04Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "solve with solution_dict=True doesn't always return a list",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11618",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```
As pointed out in a post on sage-support:

```
var('x')
g(x)=0
print solve(g(x)==0,x)
print solve(g(x)==0,x,solution_dict=True) 
```
gives

```
[x == r1]
{x: r1}
```
It should be `[{x: r1}]` to be consistent.

Assignee: @burcin

CC:  @kcrisman

Keywords: solve, solution_dict

Resolution: fixed

Dependencies: #8553

Author: Leif Leonhardy

Reviewer: Karl-Dieter Crisman

Merged: sage-4.7.2.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/11618





---

archive/issue_comments_156133.json:
```json
{
    "body": "<a id='comment:1'></a>\nYep:\n\n```\n       * ``solution_dict`` - bool (default: False); if True or non-zero,\n         return a list of dictionaries containing the solutions. If there\n         are no solutions, return an empty list (rather than a list\n         containing an empty dictionary). Likewise, if there's only a\n         single solution, return a list containing one dictionary with\n         that solution.\n```\n\nA doctest for a similar case got deleted by a reviewer, which still works though:\n\n```\nsage: solve([x+y==6, x-y==4], x, y, solution_dict=-1)\n[{y: 1, x: 5}]\n```\nAnd also the following works as expected:\n\n```\nsage: solve([x==0],x,solution_dict=True)\n[{x: 0}]\n```\n(Sage 4.7.1.{alpha2,rc0})",
    "created_at": "2011-07-22T02:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156133",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'></a>
Yep:

```
       * ``solution_dict`` - bool (default: False); if True or non-zero,
         return a list of dictionaries containing the solutions. If there
         are no solutions, return an empty list (rather than a list
         containing an empty dictionary). Likewise, if there's only a
         single solution, return a list containing one dictionary with
         that solution.
```

A doctest for a similar case got deleted by a reviewer, which still works though:

```
sage: solve([x+y==6, x-y==4], x, y, solution_dict=-1)
[{y: 1, x: 5}]
```
And also the following works as expected:

```
sage: solve([x==0],x,solution_dict=True)
[{x: 0}]
```
(Sage 4.7.1.{alpha2,rc0})



---

archive/issue_comments_156134.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-07-22T06:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156134",
    "user": "https://github.com/nexttime"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_156135.json:
```json
{
    "body": "Changing author from \"\" to \"Leif Leonhardy\"",
    "created_at": "2011-07-22T06:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156135",
    "user": "https://github.com/nexttime"
}
```

Changing author from "" to "Leif Leonhardy"



---

archive/issue_comments_156136.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe attached patch fixes the inconsistency and adds a doctest for the case given.\n\nI've removed superfluous parentheses (and white space) and also converted some tabs to spaces. (I thought the merge script would reject patches introducing new tabs after all got converted a while ago.)",
    "created_at": "2011-07-22T06:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156136",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:2'></a>
The attached patch fixes the inconsistency and adds a doctest for the case given.

I've removed superfluous parentheses (and white space) and also converted some tabs to spaces. (I thought the merge script would reject patches introducing new tabs after all got converted a while ago.)



---

archive/issue_comments_156137.json:
```json
{
    "body": "<a id='comment:3'></a>\nHmmm,\n\n```python\nans = [ {x: self.parent().var('r1')} ]\n```\nwould perhaps have been a bit more readable...",
    "created_at": "2011-07-22T06:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156137",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:3'></a>
Hmmm,

```python
ans = [ {x: self.parent().var('r1')} ]
```
would perhaps have been a bit more readable...



---

archive/issue_comments_156138.json:
```json
{
    "body": "Sage library patch. (Updated version.) Based on Sage 4.7.1.rc0.",
    "created_at": "2011-07-22T19:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156138",
    "user": "https://github.com/nexttime"
}
```

Sage library patch. (Updated version.) Based on Sage 4.7.1.rc0.



---

archive/issue_comments_156139.json:
```json
{
    "body": "<a id='comment:4'></a>\nAttachment [trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch](tarball://root/attachments/some-uuid/ticket11618/trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch) by @nexttime created at 2011-07-22 19:29:11\n\nReplying to [leif](#comment%3A3):\n> [...] would perhaps have been a bit more readable.\n\n\nI've updated the patch to directly construct the solution dictionary.\n\n(Leif doesn't work without coffee.)\n\n---\n\nHey patchbot, apply: [attachment:trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch]!",
    "created_at": "2011-07-22T19:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156139",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>
Attachment [trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch](tarball://root/attachments/some-uuid/ticket11618/trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch) by @nexttime created at 2011-07-22 19:29:11

Replying to [leif](#comment%3A3):
> [...] would perhaps have been a bit more readable.


I've updated the patch to directly construct the solution dictionary.

(Leif doesn't work without coffee.)

---

Hey patchbot, apply: [attachment:trac_11618-fix_solution_dict_for_infinitely_many_solutions.sagelib.patch]!



---

archive/issue_comments_156140.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe dependency I've added is (more or less) just for the patchbot. (#8553 was merged into Sage 4.7.1.alpha2.)",
    "created_at": "2011-07-22T20:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156140",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>
The dependency I've added is (more or less) just for the patchbot. (#8553 was merged into Sage 4.7.1.alpha2.)



---

archive/issue_comments_156141.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#8553\"",
    "created_at": "2011-07-22T20:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156141",
    "user": "https://github.com/nexttime"
}
```

Changing dependencies from "" to "#8553"



---

archive/issue_comments_156142.json:
```json
{
    "body": "<a id='comment:6'></a>\nThanks for posting this patch - I'll try to take a look at this (relatively) soon, as it looks straightforward.",
    "created_at": "2011-07-29T19:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156142",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
Thanks for posting this patch - I'll try to take a look at this (relatively) soon, as it looks straightforward.



---

archive/issue_comments_156143.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Karl-Dieter Crisman\"",
    "created_at": "2011-08-01T18:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156143",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "" to "Karl-Dieter Crisman"



---

archive/issue_comments_156144.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,4 @@\n [x == r1]\n {x: r1}\n ```\n-It should be [{x: r1}] to be consistent.\n+It should be `[{x: r1}]` to be consistent.\n``````\n",
    "created_at": "2011-08-01T18:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156144",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,4 @@
 [x == r1]
 {x: r1}
 ```
-It should be [{x: r1}] to be consistent.
+It should be `[{x: r1}]` to be consistent.
``````




---

archive/issue_comments_156145.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-01T18:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156145",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_156146.json:
```json
{
    "body": "<a id='comment:7'></a>\nPatch looks good.  Performs as advertised.   Thanks!",
    "created_at": "2011-08-01T18:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156146",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>
Patch looks good.  Performs as advertised.   Thanks!



---

archive/issue_comments_156147.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.7.2.alpha2\"",
    "created_at": "2011-08-18T22:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156147",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.7.2.alpha2"



---

archive/issue_events_030476.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-18T22:04:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11618#event-30476"
}
```



---

archive/issue_comments_156148.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-08-18T22:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11618#issuecomment-156148",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
