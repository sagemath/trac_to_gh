# Issue 11856: Raise an overflow error if the exponent of a multivariate polynomial flows over

archive/issues_011684.json:
```json
{
    "body": "Assignee: @malb\n\nCC:  @malb @burcin alexanderdreyer jakobkroeker\n\nKeywords: exponent overflow\n\nThe following happens at least since sage-4.6.2 and was detected in #4539 by a new doctest:\n\n```\nsage: P.<x,y> = QQ[]\nsage: y^2^30\ny^1073741824\nsage: P.<x,y,z> = QQ[]\nsage: y^2^30\n0\n```\n\nAccording to Hans, the maximal exponent of a variable in a monomial does depend on the number of variables in the ring. There is no function that returns that maximal exponent, but it is stored in the `bitmask` attribute of a ring. The Singular interpreter actually only tests whether the *total* degree is below what is provided by bitmask; in theory, *any* exponent (not only the totall degree) can go up to that bound.\n\nHere is the corresponding code in Singular's `iparith.cc`:\n\n```\nstatic BOOLEAN jjTIMES_P(leftv res, leftv u, leftv v)\n{\n  poly a;\n  poly b;\n  int dummy;\n  if (v->next==NULL)\n  {\n    a=(poly)u->CopyD(POLY_CMD); // works also for VECTOR_CMD\n    if (u->next==NULL)\n    {\n      b=(poly)v->CopyD(POLY_CMD); // works also for VECTOR_CMD\n      if ((a!=NULL) && (b!=NULL)\n      && (pTotaldegree(a)+pTotaldegree(b)>si_max((long)rVar(currRing),(long)currRing->bitmask)))\n      {\n        Werror(\"OVERFLOW in mult(d=%ld, d=%ld, max=%ld)\",\n          pTotaldegree(a),pTotaldegree(b),currRing->bitmask);\n        pDelete(&a);\n        pDelete(&b);\n        return TRUE;\n...\n```\n\nApply\n\n* [attachment:trac11856_exponent_overflow.patch]\n* [attachment:trac11856_fix_docs_32bit.patch]\n\nIssue created by migration from https://trac.sagemath.org/ticket/11856\n\n",
    "closed_at": "2011-10-07T19:11:31Z",
    "created_at": "2011-09-27T14:37:52Z",
    "labels": [
        "component: commutative algebra",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Raise an overflow error if the exponent of a multivariate polynomial flows over",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11856",
    "user": "https://github.com/simon-king-jena"
}
```
Assignee: @malb

CC:  @malb @burcin alexanderdreyer jakobkroeker

Keywords: exponent overflow

The following happens at least since sage-4.6.2 and was detected in #4539 by a new doctest:

```
sage: P.<x,y> = QQ[]
sage: y^2^30
y^1073741824
sage: P.<x,y,z> = QQ[]
sage: y^2^30
0
```

According to Hans, the maximal exponent of a variable in a monomial does depend on the number of variables in the ring. There is no function that returns that maximal exponent, but it is stored in the `bitmask` attribute of a ring. The Singular interpreter actually only tests whether the *total* degree is below what is provided by bitmask; in theory, *any* exponent (not only the totall degree) can go up to that bound.

Here is the corresponding code in Singular's `iparith.cc`:

```
static BOOLEAN jjTIMES_P(leftv res, leftv u, leftv v)
{
  poly a;
  poly b;
  int dummy;
  if (v->next==NULL)
  {
    a=(poly)u->CopyD(POLY_CMD); // works also for VECTOR_CMD
    if (u->next==NULL)
    {
      b=(poly)v->CopyD(POLY_CMD); // works also for VECTOR_CMD
      if ((a!=NULL) && (b!=NULL)
      && (pTotaldegree(a)+pTotaldegree(b)>si_max((long)rVar(currRing),(long)currRing->bitmask)))
      {
        Werror("OVERFLOW in mult(d=%ld, d=%ld, max=%ld)",
          pTotaldegree(a),pTotaldegree(b),currRing->bitmask);
        pDelete(&a);
        pDelete(&b);
        return TRUE;
...
```

Apply

* [attachment:trac11856_exponent_overflow.patch]
* [attachment:trac11856_fix_docs_32bit.patch]

Issue created by migration from https://trac.sagemath.org/ticket/11856





---

archive/issue_comments_131908.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-09-27T15:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131908",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_131909.json:
```json
{
    "body": "The attached patch seems to solve the problem. It wraps the attribute `bitmask` of Singular's rings. Moreover, it detects exponent overflow in the same way as Singular does (see ticket description). `rVar` is in fact a macro that simply returns the `ring->N` attribute.\n\nWith the patch, I get (as a new doctest):\n\n```\nsage: P.<x,y> = QQ[]\nsage: y^2^30\ny^1073741824\nsage: P.<x,y,z> = QQ[]\nsage: y^2^30\nTraceback (most recent call last):\n...\nOverflowError: Exponent overflow (1073741824).\n```\n\nI did not run the doc tests yet, but I think a reviewer can already have a look on it.\n\nI wonder, though, whether the speed will be fine: I use the `max` function with the arguments being an unsigned long and a long. I can only hope that it is fast enough in Cython.",
    "created_at": "2011-09-27T15:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131909",
    "user": "https://github.com/simon-king-jena"
}
```

The attached patch seems to solve the problem. It wraps the attribute `bitmask` of Singular's rings. Moreover, it detects exponent overflow in the same way as Singular does (see ticket description). `rVar` is in fact a macro that simply returns the `ring->N` attribute.

With the patch, I get (as a new doctest):

```
sage: P.<x,y> = QQ[]
sage: y^2^30
y^1073741824
sage: P.<x,y,z> = QQ[]
sage: y^2^30
Traceback (most recent call last):
...
OverflowError: Exponent overflow (1073741824).
```

I did not run the doc tests yet, but I think a reviewer can already have a look on it.

I wonder, though, whether the speed will be fine: I use the `max` function with the arguments being an unsigned long and a long. I can only hope that it is fast enough in Cython.



---

archive/issue_comments_131910.json:
```json
{
    "body": "It seems `max_exponent_size` should be removed since it's not needed any more?",
    "created_at": "2011-09-27T16:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131910",
    "user": "https://github.com/malb"
}
```

It seems `max_exponent_size` should be removed since it's not needed any more?



---

archive/issue_comments_131911.json:
```json
{
    "body": "I did some tests with Cython functions either testing whether (for cdefined a,b,c) we have `a>max(b,c)` or `a>b and a>c`. The execution time was about the same. So, the patch should be fine as it is (modulo doctests, of course).\n\nI don't know whether max_exponent_size is used somewhere else.",
    "created_at": "2011-09-27T16:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131911",
    "user": "https://github.com/simon-king-jena"
}
```

I did some tests with Cython functions either testing whether (for cdefined a,b,c) we have `a>max(b,c)` or `a>b and a>c`. The execution time was about the same. So, the patch should be fine as it is (modulo doctests, of course).

I don't know whether max_exponent_size is used somewhere else.



---

archive/issue_comments_131912.json:
```json
{
    "body": "Very tricky. Singular correctly computes `x<sup>2</sup>30*x<sup>2</sup>30`, but it does not print it correctly, because when printing the exponent then it is converted in a different format:\n\n```\nsage: P.<x,y> = QQ[]\nsage: (x^2^30*x^2^30)\nx^-2147483648\nsage: (x^2^30*x^2^30).degree()\n2147483648\n```\nSo, *internally* the degree is correct.\n\nEven more tricky: In the case of `x<sup>2</sup>31`, Singular believes that the result is zero. The `degree()` method first tests whether it is (believed to be) zero, and acts accordingly:\n\n```\nsage: (x^2^31).degree()\n-1\nsage: (x^2^31)\n0\n```\n\nThat happens when I remove the max_exponent_size. I suppose I shouldd revert that removal...",
    "created_at": "2011-09-27T17:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131912",
    "user": "https://github.com/simon-king-jena"
}
```

Very tricky. Singular correctly computes `x<sup>2</sup>30*x<sup>2</sup>30`, but it does not print it correctly, because when printing the exponent then it is converted in a different format:

```
sage: P.<x,y> = QQ[]
sage: (x^2^30*x^2^30)
x^-2147483648
sage: (x^2^30*x^2^30).degree()
2147483648
```
So, *internally* the degree is correct.

Even more tricky: In the case of `x<sup>2</sup>31`, Singular believes that the result is zero. The `degree()` method first tests whether it is (believed to be) zero, and acts accordingly:

```
sage: (x^2^31).degree()
-1
sage: (x^2^31)
0
```

That happens when I remove the max_exponent_size. I suppose I shouldd revert that removal...



---

archive/issue_comments_131913.json:
```json
{
    "body": "The latest patch version checks *both* whether the exponent exceeds max_exponent_size (which avoids some bugs that occur in Singular) *and* whether it is illegal in Singular (which avoids the bugs in Sage that led to the creation of this ticket).\n\nWe now have\n\n```\n        sage: x^2^30*x^2^30\n        Traceback (most recent call last):\n        ...\n        OverflowError: Exponent overflow (2147483648).\n```\n\nI wonder whether the test, that became more expensive, led to an inacceptable speed regression. That should be investigated.\n\nThe tests in sage/rings/polynomial pass for me. I don't know about the rest. Needs review!",
    "created_at": "2011-09-27T17:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131913",
    "user": "https://github.com/simon-king-jena"
}
```

The latest patch version checks *both* whether the exponent exceeds max_exponent_size (which avoids some bugs that occur in Singular) *and* whether it is illegal in Singular (which avoids the bugs in Sage that led to the creation of this ticket).

We now have

```
        sage: x^2^30*x^2^30
        Traceback (most recent call last):
        ...
        OverflowError: Exponent overflow (2147483648).
```

I wonder whether the test, that became more expensive, led to an inacceptable speed regression. That should be investigated.

The tests in sage/rings/polynomial pass for me. I don't know about the rest. Needs review!



---

archive/issue_comments_131914.json:
```json
{
    "body": "Code looks okay. So modulo the possible speed regression and doctests passing this should get a positive review.",
    "created_at": "2011-09-27T20:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131914",
    "user": "https://github.com/malb"
}
```

Code looks okay. So modulo the possible speed regression and doctests passing this should get a positive review.



---

archive/issue_comments_131915.json:
```json
{
    "body": "Here are some timings.\n\nWith the patch:\n\n```\nsage: P.<x,y,z> = QQ[]\nsage: p = x+y\nsage: %timeit q=p^20\n625 loops, best of 3: 6.93 \u00b5s per loop\nsage: p = x+y+z\nsage: %timeit q=p^25\n625 loops, best of 3: 418 \u00b5s per loop\nsage: %timeit q=x^2^10\n625 loops, best of 3: 2.1 \u00b5s per loop\n```\n\nWithout the patch:\n\n```\nsage: P.<x,y,z> = QQ[]\nsage: p = x+y\nsage: %timeit q=p^20\n625 loops, best of 3: 7.08 \u00b5s per loop\nsage: p = x+y+z\nsage: %timeit q=p^25\n625 loops, best of 3: 419 \u00b5s per loop\nsage: %timeit q=x^2^10\n625 loops, best of 3: 2.14 \u00b5s per loop\n```\n\nThese are only few data points, but they seem to show that the overhead is sufficiently small.",
    "created_at": "2011-09-27T21:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131915",
    "user": "https://github.com/simon-king-jena"
}
```

Here are some timings.

With the patch:

```
sage: P.<x,y,z> = QQ[]
sage: p = x+y
sage: %timeit q=p^20
625 loops, best of 3: 6.93 µs per loop
sage: p = x+y+z
sage: %timeit q=p^25
625 loops, best of 3: 418 µs per loop
sage: %timeit q=x^2^10
625 loops, best of 3: 2.1 µs per loop
```

Without the patch:

```
sage: P.<x,y,z> = QQ[]
sage: p = x+y
sage: %timeit q=p^20
625 loops, best of 3: 7.08 µs per loop
sage: p = x+y+z
sage: %timeit q=p^25
625 loops, best of 3: 419 µs per loop
sage: %timeit q=x^2^10
625 loops, best of 3: 2.14 µs per loop
```

These are only few data points, but they seem to show that the overhead is sufficiently small.



---

archive/issue_comments_131916.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-09-28T06:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131916",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_131917.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2011-10-01T12:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131917",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_131918.json:
```json
{
    "body": "Alexander found (while reviewing #4539) that the patch from here results in two doctest errors on 32-bit machines (reasonable, since an overflow error will occur earlier on 32 bit than on 64 bit).\n\nHe provided a fix at #4539, but actually I think it should be included here. What do people think?",
    "created_at": "2011-10-01T12:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131918",
    "user": "https://github.com/simon-king-jena"
}
```

Alexander found (while reviewing #4539) that the patch from here results in two doctest errors on 32-bit machines (reasonable, since an overflow error will occur earlier on 32 bit than on 64 bit).

He provided a fix at #4539, but actually I think it should be included here. What do people think?



---

archive/issue_comments_131919.json:
```json
{
    "body": "Replying to [comment:10 SimonKing]:\n> He provided a fix at #4539, but actually I think it should be included here. What do people think?\n\nIndeed, I also had to apply http://trac.sagemath.org/sage_trac/attachment/ticket/4539/trac4539_fix_docs_32bit.patch here for 32-bit systems. So, I think, it is necessary.\n\nBTW: it seems that this ticket depends on #11115.",
    "created_at": "2011-10-01T22:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131919",
    "user": "https://github.com/alexanderdreyer"
}
```

Replying to [comment:10 SimonKing]:
> He provided a fix at #4539, but actually I think it should be included here. What do people think?

Indeed, I also had to apply http://trac.sagemath.org/sage_trac/attachment/ticket/4539/trac4539_fix_docs_32bit.patch here for 32-bit systems. So, I think, it is necessary.

BTW: it seems that this ticket depends on #11115.



---

archive/issue_comments_131920.json:
```json
{
    "body": "Replying to [comment:12 AlexanderDreyer]:\n> Replying to [comment:10 SimonKing]:\n> BTW: it seems that this ticket depends on #11115.\n\n\nWhat ticket are you referring to by \"this\"? If \"this\" is #4539: #4539 depends on #11068, which depends on #11115. But if \"this\" is #11856 then I don't see a dependency. What do you mean? Is there fuzz when applying my or your patch? Does it not work without #11115?",
    "created_at": "2011-10-02T06:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131920",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:12 AlexanderDreyer]:
> Replying to [comment:10 SimonKing]:
> BTW: it seems that this ticket depends on #11115.


What ticket are you referring to by "this"? If "this" is #4539: #4539 depends on #11068, which depends on #11115. But if "this" is #11856 then I don't see a dependency. What do you mean? Is there fuzz when applying my or your patch? Does it not work without #11115?



---

archive/issue_comments_131921.json:
```json
{
    "body": "I just tested: [attachment:trac11856_exponent_overflow.patch] followed by [trac4539_fix_docs_32bit.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/4539/trac4539_fix_docs_32bit.patch) cleanly applies to sage-4.7.2.alpha3-prerelease.\n\nThus, if Alexander finds that [trac4539_fix_docs_32bit.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/4539/trac4539_fix_docs_32bit.patch) fixes the problem on 32-bit (I can not test it, myself), then I suggest that Alexander's patch should be moved from #4539 to here and turned into a reviewer patch; and if Alexander says that it is fixed, then we should return to a positive review.",
    "created_at": "2011-10-02T08:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131921",
    "user": "https://github.com/simon-king-jena"
}
```

I just tested: [attachment:trac11856_exponent_overflow.patch] followed by [trac4539_fix_docs_32bit.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/4539/trac4539_fix_docs_32bit.patch) cleanly applies to sage-4.7.2.alpha3-prerelease.

Thus, if Alexander finds that [trac4539_fix_docs_32bit.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/4539/trac4539_fix_docs_32bit.patch) fixes the problem on 32-bit (I can not test it, myself), then I suggest that Alexander's patch should be moved from #4539 to here and turned into a reviewer patch; and if Alexander says that it is fixed, then we should return to a positive review.



---

archive/issue_comments_131922.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-10-02T08:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131922",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_131923.json:
```json
{
    "body": "Indeed, I thought that #11856 would depend on #11115. But it turned out, that my Sage becomes corrupted when popping the patches of. #11115. So starting with a brand new clone of devel/sage-main does the trick. \n\nSo I can confirm, http://trac.sagemath.org/sage_trac/attachment/ticket/4539/trac4539_fix_docs_32bit.patch fixes the problem on 23 Bit platforms.",
    "created_at": "2011-10-02T21:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131923",
    "user": "https://github.com/alexanderdreyer"
}
```

Indeed, I thought that #11856 would depend on #11115. But it turned out, that my Sage becomes corrupted when popping the patches of. #11115. So starting with a brand new clone of devel/sage-main does the trick. 

So I can confirm, http://trac.sagemath.org/sage_trac/attachment/ticket/4539/trac4539_fix_docs_32bit.patch fixes the problem on 23 Bit platforms.



---

archive/issue_comments_131924.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-10-02T21:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131924",
    "user": "https://github.com/alexanderdreyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_131925.json:
```json
{
    "body": "..32 Bit ... ;-)",
    "created_at": "2011-10-02T21:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131925",
    "user": "https://github.com/alexanderdreyer"
}
```

..32 Bit ... ;-)



---

archive/issue_comments_131926.json:
```json
{
    "body": "Attachment [trac11856_fix_docs_32bit.patch](tarball://root/attachments/some-uuid/ticket11856/trac11856_fix_docs_32bit.patch) by @simon-king-jena created at 2011-10-02 22:06:16\n\nAlexander 's reviewer patch",
    "created_at": "2011-10-02T22:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131926",
    "user": "https://github.com/simon-king-jena"
}
```

Attachment [trac11856_fix_docs_32bit.patch](tarball://root/attachments/some-uuid/ticket11856/trac11856_fix_docs_32bit.patch) by @simon-king-jena created at 2011-10-02 22:06:16

Alexander 's reviewer patch



---

archive/issue_comments_131927.json:
```json
{
    "body": "Let's try to sort things out:\n\nThe patch that Alexander posted at #4539 should better be a reviewer patch here. Thus, I copied his patch, added a commit message, and posted it here under a new name reflecting the ticket number. The positive review can be kept (I hope we  agree on that), and:\n\nApply trac11856_exponent_overflow.patch trac11856_fix_docs_32bit.patch",
    "created_at": "2011-10-02T22:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131927",
    "user": "https://github.com/simon-king-jena"
}
```

Let's try to sort things out:

The patch that Alexander posted at #4539 should better be a reviewer patch here. Thus, I copied his patch, added a commit message, and posted it here under a new name reflecting the ticket number. The positive review can be kept (I hope we  agree on that), and:

Apply trac11856_exponent_overflow.patch trac11856_fix_docs_32bit.patch



---

archive/issue_comments_131928.json:
```json
{
    "body": "This seems to conflict with #11339.",
    "created_at": "2011-10-04T08:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131928",
    "user": "https://github.com/jdemeyer"
}
```

This seems to conflict with #11339.



---

archive/issue_comments_131929.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-10-04T08:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131929",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_131930.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-10-04T09:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131930",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_131931.json:
```json
{
    "body": "The first patch has been rebased on top of #11339. The patch from #11339 did some cosmetic changes, such as replacing `p_Delete(&p,r)` by `p_Delete(&p, r)`. Therefore, one of the hunks from the first patch here did not apply.\n\nSince it is a very simple editorial change, without changing the code, I am directly reinstating the positive review.\n\nApply trac11856_exponent_overflow.patch trac11856_fix_docs_32bit.patch",
    "created_at": "2011-10-04T09:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131931",
    "user": "https://github.com/simon-king-jena"
}
```

The first patch has been rebased on top of #11339. The patch from #11339 did some cosmetic changes, such as replacing `p_Delete(&p,r)` by `p_Delete(&p, r)`. Therefore, one of the hunks from the first patch here did not apply.

Since it is a very simple editorial change, without changing the code, I am directly reinstating the positive review.

Apply trac11856_exponent_overflow.patch trac11856_fix_docs_32bit.patch



---

archive/issue_comments_131932.json:
```json
{
    "body": "I had rebased my patch against #11339, but it turns out that #11339 needs work -- it creates some doctest errors with sage-4.7.2.alpha3-prerelease. So, I guess it would be better to return to the original patch version, which unfortunately is now lost.",
    "created_at": "2011-10-04T11:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131932",
    "user": "https://github.com/simon-king-jena"
}
```

I had rebased my patch against #11339, but it turns out that #11339 needs work -- it creates some doctest errors with sage-4.7.2.alpha3-prerelease. So, I guess it would be better to return to the original patch version, which unfortunately is now lost.



---

archive/issue_comments_131933.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-10-04T11:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131933",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_131934.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-10-04T12:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131934",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_131935.json:
```json
{
    "body": "Since this ticket fixes a critical bug, I think it would be good to merge it in sage-4.7.2, rather than waiting for 4.7.3. Since #11339 seems to need work, I returned to the original first patch and hope that it is ok to renew Martin's and Alexander's positive review.\n\nApply trac11856_exponent_overflow.patch trac11856_fix_docs_32bit.patch",
    "created_at": "2011-10-04T12:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131935",
    "user": "https://github.com/simon-king-jena"
}
```

Since this ticket fixes a critical bug, I think it would be good to merge it in sage-4.7.2, rather than waiting for 4.7.3. Since #11339 seems to need work, I returned to the original first patch and hope that it is ok to renew Martin's and Alexander's positive review.

Apply trac11856_exponent_overflow.patch trac11856_fix_docs_32bit.patch



---

archive/issue_comments_131936.json:
```json
{
    "body": "Mimmick Singular's exponent overflow check but still avoids some bugs that Singular provides",
    "created_at": "2011-10-04T13:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131936",
    "user": "https://github.com/simon-king-jena"
}
```

Mimmick Singular's exponent overflow check but still avoids some bugs that Singular provides



---

archive/issue_comments_131937.json:
```json
{
    "body": "Attachment [trac11856_exponent_overflow.patch](tarball://root/attachments/some-uuid/ticket11856/trac11856_exponent_overflow.patch) by @simon-king-jena created at 2011-10-04 13:15:21\n\nIt seems that I should not have rebased my ticket wrt #11339, but wrt #10903 (which in turn has #11339 as a dependency).\n\nNamely, #11339 only works *together* with #10903.\n\nSolution: Both #11339 and #10903 have a positive review. Hence, it is fine to make #10903 (and thus #11339 by transitivity) a dependency.\n\nRunning doctests now, again.\n\nApply trac11856_exponent_overflow.patch trac11856_fix_docs_32bit.patch",
    "created_at": "2011-10-04T13:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131937",
    "user": "https://github.com/simon-king-jena"
}
```

Attachment [trac11856_exponent_overflow.patch](tarball://root/attachments/some-uuid/ticket11856/trac11856_exponent_overflow.patch) by @simon-king-jena created at 2011-10-04 13:15:21

It seems that I should not have rebased my ticket wrt #11339, but wrt #10903 (which in turn has #11339 as a dependency).

Namely, #11339 only works *together* with #10903.

Solution: Both #11339 and #10903 have a positive review. Hence, it is fine to make #10903 (and thus #11339 by transitivity) a dependency.

Running doctests now, again.

Apply trac11856_exponent_overflow.patch trac11856_fix_docs_32bit.patch



---

archive/issue_comments_131938.json:
```json
{
    "body": "FWIW: The doctests are fine. So, it is justified to keep the positive review of Martin and Alexander.",
    "created_at": "2011-10-04T14:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131938",
    "user": "https://github.com/simon-king-jena"
}
```

FWIW: The doctests are fine. So, it is justified to keep the positive review of Martin and Alexander.



---

archive/issue_events_031292.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-07T19:11:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11856#event-31292"
}
```



---

archive/issue_comments_131939.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-10-07T19:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11856#issuecomment-131939",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
