# Issue 11211: elliptic curve p-adic L-series claims to default to eclib but doesn't

archive/issues_011039.json:
```json
{
    "body": "The code for making an elliptic curve p-adic L-series in schemes/elliptic_curves/padic_lseries.py starts like this:\n\n```\n    def __init__(self, E, p, use_eclib=False, normalize='L_ratio'):\n        r\"\"\"\n        INPUT:\n\n        -  ``E`` - an elliptic curve\n        -  ``p`` - a prime of good reduction\n        -  ``use_eclib`` - bool (default:True); whether or not to use\n           John Cremona's ``eclib`` for the computation of modular\n           symbols\n```\n\nNote that claim that use_eclib defaults to True and the fact that it doesn't. \n\nSince eclib is supposed to be correct, and is much faster, it should be the default as claimed in the docstring.  The fix should be a patch that changes the one `__init__` line.\n\nDepends on #10280\n\n**Assignee:** @JohnCremona\n\n**CC:**  @categorie\n\n**Branch:** [u/jdemeyer/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/11211)\n\n**Commit:** [66b58a737fb33262558f4b93d887f156653ff18f](https://github.com/sagemath/sagetrac-mirror/commit/66b58a737fb33262558f4b93d887f156653ff18f)\n\n**Reviewer:** John Cremona, Jeroen Demeyer, Chris Wuthrich\n\n**Author:** William Stein, John Cremona\n\nIssue created by migration from https://trac.sagemath.org/ticket/11211\n\n",
    "closed_at": "2014-01-10T07:29:51Z",
    "created_at": "2011-04-17T04:35:29Z",
    "labels": [
        "component: elliptic curves",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.1",
    "title": "elliptic curve p-adic L-series claims to default to eclib but doesn't",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/11211",
    "user": "https://github.com/williamstein"
}
```
The code for making an elliptic curve p-adic L-series in schemes/elliptic_curves/padic_lseries.py starts like this:

```
    def __init__(self, E, p, use_eclib=False, normalize='L_ratio'):
        r"""
        INPUT:

        -  ``E`` - an elliptic curve
        -  ``p`` - a prime of good reduction
        -  ``use_eclib`` - bool (default:True); whether or not to use
           John Cremona's ``eclib`` for the computation of modular
           symbols
```

Note that claim that use_eclib defaults to True and the fact that it doesn't. 

Since eclib is supposed to be correct, and is much faster, it should be the default as claimed in the docstring.  The fix should be a patch that changes the one `__init__` line.

Depends on #10280

**Assignee:** @JohnCremona

**CC:**  @categorie

**Branch:** [u/jdemeyer/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/11211)

**Commit:** [66b58a737fb33262558f4b93d887f156653ff18f](https://github.com/sagemath/sagetrac-mirror/commit/66b58a737fb33262558f4b93d887f156653ff18f)

**Reviewer:** John Cremona, Jeroen Demeyer, Chris Wuthrich

**Author:** William Stein, John Cremona

Issue created by migration from https://trac.sagemath.org/ticket/11211





---

archive/issue_comments_113942.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+This depends on trac #10280 (for a trivial reason). \n+\n The code for making an elliptic curve p-adic L-series in schemes/elliptic_curves/padic_lseries.py starts like this:\n \n ```\n``````\n",
    "created_at": "2011-04-17T04:40:27Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113942",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+This depends on trac #10280 (for a trivial reason). 
+
 The code for making an elliptic curve p-adic L-series in schemes/elliptic_curves/padic_lseries.py starts like this:
 
 ```
``````




---

archive/issue_comments_113943.json:
```json
{
    "body": "<a id='comment:1'></a>\nNote: there is also a call to create the L-series in padics.py that has use_eclib=False by default and is documented correctly.  The attached patch changes both cases to default to True.",
    "created_at": "2011-04-17T04:40:27Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113943",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>
Note: there is also a call to create the L-series in padics.py that has use_eclib=False by default and is documented correctly.  The attached patch changes both cases to default to True.



---

archive/attachments_015203.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_11211.patch",
    "asset_url": "tarball://root/attachments/ticket11211/trac_11211.patch",
    "created_at": "2011-04-17T04:41:47Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket11211/trac_11211.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_113944.json:
```json
{
    "body": "**Attachment:** [trac_11211.patch](https://github.com/sagemath/sage/files/ticket11211/trac_11211.patch)",
    "created_at": "2011-04-17T04:41:47Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113944",
    "user": "https://github.com/williamstein"
}
```

**Attachment:** [trac_11211.patch](https://github.com/sagemath/sage/files/ticket11211/trac_11211.patch)



---

archive/issue_comments_113945.json:
```json
{
    "body": "<a id='comment:2'></a>\nI have CC'd Chris Wuthrich who I think is responsible for this code and should be able to judge.  It may be that there is some problem with part of eclib's modular symbols so they don't give exactly what is needed for this application.",
    "created_at": "2011-04-17T04:42:08Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113945",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:2'></a>
I have CC'd Chris Wuthrich who I think is responsible for this code and should be able to judge.  It may be that there is some problem with part of eclib's modular symbols so they don't give exactly what is needed for this application.



---

archive/issue_events_087592.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-04-17T04:42:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87592"
}
```



---

archive/issue_comments_113946.json:
```json
{
    "body": "**Reviewer:** John Cremona",
    "created_at": "2011-04-17T17:49:14Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113946",
    "user": "https://github.com/JohnCremona"
}
```

**Reviewer:** John Cremona



---

archive/issue_comments_113947.json:
```json
{
    "body": "<a id='comment:5'></a>\nI get zillions of errors in padic_lseries.py with this patch.  (31 in fact).\n\nThey all seem to be either\n\n```\nFile \"/home/jec/sage-4.7.alpha4/devel/sage-main/sage/schemes/elliptic_curves/padics.py\", iled example:\n    sig_on_count()\nExpected:\n    0\nGot:\n    1\n```\nor\n\n```\n        def __reduce__(self):\n      File \"rational.pyx\", line 484, in sage.rings.rational.Rational.__set_value (sage/rings/rational.c:7320)\n        elif isinstance(x, tuple) and len(x) == 2:\n      File \"/home/jec/sage-current/local/lib/python/site-packages/sage/modular/cusps.py\", line 512, in _rational_\n        raise TypeError, \"cusp %s is not a rational number\"%self\n    TypeError: cusp Infinity is not a rational number\n```\n\nAlso in padics.py I get similar sig_on_count errors, and also \n\n```\n\nFile \"/home/jec/sage-4.7.alpha4/devel/sage-main/sage/schemes/elliptic_curves/padics.py\", line 138:\n    sage: P(0)\nExpected:\n    3 + 3^2 + 2*3^4 + 2*3^5 + O(3^6)\nGot:\n    2 + 3 + 3^2 + 2*3^3 + 2*3^5 + 3^6 + O(3^7)\n```\nwhich looks not so trivial.\n\nI'll leave this as \"needs review\" and hope that Chris will also take a look.",
    "created_at": "2011-04-17T17:49:14Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113947",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>
I get zillions of errors in padic_lseries.py with this patch.  (31 in fact).

They all seem to be either

```
File "/home/jec/sage-4.7.alpha4/devel/sage-main/sage/schemes/elliptic_curves/padics.py", iled example:
    sig_on_count()
Expected:
    0
Got:
    1
```
or

```
        def __reduce__(self):
      File "rational.pyx", line 484, in sage.rings.rational.Rational.__set_value (sage/rings/rational.c:7320)
        elif isinstance(x, tuple) and len(x) == 2:
      File "/home/jec/sage-current/local/lib/python/site-packages/sage/modular/cusps.py", line 512, in _rational_
        raise TypeError, "cusp %s is not a rational number"%self
    TypeError: cusp Infinity is not a rational number
```

Also in padics.py I get similar sig_on_count errors, and also 

```

File "/home/jec/sage-4.7.alpha4/devel/sage-main/sage/schemes/elliptic_curves/padics.py", line 138:
    sage: P(0)
Expected:
    3 + 3^2 + 2*3^4 + 2*3^5 + O(3^6)
Got:
    2 + 3 + 3^2 + 2*3^3 + 2*3^5 + 3^6 + O(3^7)
```
which looks not so trivial.

I'll leave this as "needs review" and hope that Chris will also take a look.



---

archive/issue_comments_113948.json:
```json
{
    "body": "**Author:** William Stein",
    "created_at": "2011-04-17T17:49:14Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113948",
    "user": "https://github.com/JohnCremona"
}
```

**Author:** William Stein



---

archive/issue_comments_113949.json:
```json
{
    "body": "**Dependencies:** #10280",
    "created_at": "2011-04-22T10:08:57Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113949",
    "user": "https://github.com/koffie"
}
```

**Dependencies:** #10280



---

archive/issue_comments_113950.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n-This depends on trac #10280 (for a trivial reason). \n \n The code for making an elliptic curve p-adic L-series in schemes/elliptic_curves/padic_lseries.py starts like this:\n \n``````\n",
    "created_at": "2011-04-22T10:08:57Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113950",
    "user": "https://github.com/koffie"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
-This depends on trac #10280 (for a trivial reason). 
 
 The code for making an elliptic curve p-adic L-series in schemes/elliptic_curves/padic_lseries.py starts like this:
 
``````




---

archive/issue_comments_113951.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [@koffie](#comment%3A6):\nOK, I'm testing again against 4.7.alpha5 which has #10280 merged.",
    "created_at": "2011-04-22T10:44:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113951",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:7'></a>
Replying to [@koffie](#comment%3A6):
OK, I'm testing again against 4.7.alpha5 which has #10280 merged.



---

archive/issue_comments_113952.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n-\n The code for making an elliptic curve p-adic L-series in schemes/elliptic_curves/padic_lseries.py starts like this:\n \n ```\n``````\n",
    "created_at": "2011-04-22T10:44:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113952",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
-
 The code for making an elliptic curve p-adic L-series in schemes/elliptic_curves/padic_lseries.py starts like this:
 
 ```
``````




---

archive/issue_events_087593.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-04-22T11:11:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87593"
}
```



---

archive/issue_events_087594.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-04-22T11:11:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87594"
}
```



---

archive/issue_comments_113953.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [@JohnCremona](#comment%3A7):\n> Replying to [@koffie](#comment%3A6):\n> OK, I'm testing again against 4.7.alpha5 which has #10280 merged.\n\nI still get lots of failures (they look just the same) in the same two files.  I don't know what is going on.",
    "created_at": "2011-04-22T11:11:58Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113953",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:8'></a>
Replying to [@JohnCremona](#comment%3A7):
> Replying to [@koffie](#comment%3A6):
> OK, I'm testing again against 4.7.alpha5 which has #10280 merged.

I still get lots of failures (they look just the same) in the same two files.  I don't know what is going on.



---

archive/issue_comments_113954.json:
```json
{
    "body": "<a id='comment:9'></a>\nHej John,\n\nSorry to make you think that the dependency would fix the issue. I just searched for trac to get a ticket which had the text \"depends on\" so I could test the new dependencies box I just created (look at the diff, it already said it depended on 10280).",
    "created_at": "2011-04-22T11:24:21Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113954",
    "user": "https://github.com/koffie"
}
```

<a id='comment:9'></a>
Hej John,

Sorry to make you think that the dependency would fix the issue. I just searched for trac to get a ticket which had the text "depends on" so I could test the new dependencies box I just created (look at the diff, it already said it depended on 10280).



---

archive/issue_comments_113955.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [@koffie](#comment%3A9):\n> Hej John,\n> \n> Sorry to make you think that the dependency would fix the issue. I just searched for trac to get a ticket which had the text \"depends on\" so I could test the new dependencies box I just created (look at the diff, it already said it depended on 10280).\n\nNo problem, I was just being optimistic.  I'm sure I can work out what is going on, since the problems arise only when eclib is used!",
    "created_at": "2011-04-22T11:25:39Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113955",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'></a>
Replying to [@koffie](#comment%3A9):
> Hej John,
> 
> Sorry to make you think that the dependency would fix the issue. I just searched for trac to get a ticket which had the text "depends on" so I could test the new dependencies box I just created (look at the diff, it already said it depended on 10280).

No problem, I was just being optimistic.  I'm sure I can work out what is going on, since the problems arise only when eclib is used!



---

archive/issue_comments_113956.json:
```json
{
    "body": "Replaces previous;  applies to 4.7.alpha5",
    "created_at": "2011-04-22T14:17:08Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113956",
    "user": "https://github.com/JohnCremona"
}
```

Replaces previous;  applies to 4.7.alpha5



---

archive/attachments_015204.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_11211-modsym.patch",
    "asset_url": "tarball://root/attachments/ticket11211/trac_11211-modsym.patch",
    "created_at": "2011-04-22T14:19:42Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket11211/trac_11211-modsym.patch",
    "user": "https://github.com/JohnCremona"
}
```



---

archive/issue_comments_113957.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Attachment:** [trac_11211-modsym.patch](https://github.com/sagemath/sage/files/ticket11211/trac_11211-modsym.patch)\n\nThe new patch (replaces previous) now works: there was some integer overflow.\n\nNow I cannot be the one to give this a positive review, though it deserves it!  William? Chris?",
    "created_at": "2011-04-22T14:19:42Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113957",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:11'></a>
**Attachment:** [trac_11211-modsym.patch](https://github.com/sagemath/sage/files/ticket11211/trac_11211-modsym.patch)

The new patch (replaces previous) now works: there was some integer overflow.

Now I cannot be the one to give this a positive review, though it deserves it!  William? Chris?



---

archive/issue_comments_113958.json:
```json
{
    "body": "**Changing author** from \"William Stein\" to \"William Stein, John Cremona\".",
    "created_at": "2011-04-22T14:19:42Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113958",
    "user": "https://github.com/JohnCremona"
}
```

**Changing author** from "William Stein" to "William Stein, John Cremona".



---

archive/issue_comments_113959.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,3 +16,4 @@\n \n Since eclib is supposed to be correct, and is much faster, it should be the default as claimed in the docstring.  The fix should be a patch that changes the one `__init__` line. \n \n+Apply only trac_11211-modsym.patch\n``````\n",
    "created_at": "2011-04-22T14:19:42Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113959",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,3 +16,4 @@
 
 Since eclib is supposed to be correct, and is much faster, it should be the default as claimed in the docstring.  The fix should be a patch that changes the one `__init__` line. 
 
+Apply only trac_11211-modsym.patch
``````




---

archive/issue_events_087595.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-04-22T14:19:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87595"
}
```



---

archive/issue_events_087596.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-04-22T14:19:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87596"
}
```



---

archive/issue_events_087597.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-04-24T03:51:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87597"
}
```



---

archive/issue_events_087598.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-04-24T03:51:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87598"
}
```



---

archive/issue_events_087599.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-25T10:52:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87599"
}
```



---

archive/issue_events_087600.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-25T10:52:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "milestone": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87600"
}
```



---

archive/issue_comments_113960.json:
```json
{
    "body": "<a id='comment:14'></a>\nThe buildbot discovered some doctest failures on 32-bit systems which I believe to come from this ticket (but I'm not completely sure):\n\n```\nsage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/sha_tate.py\n**********************************************************************\nFile \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/devel/sage-main/sage/schemes/elliptic_curves/sha_tate.py\", line 483:\n    sage: EllipticCurve('858k2').sha().an_padic(7)   # rank 0, non trivial sha, long time (10s on sage.math, 2011)\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_7[5]>\", line 1, in <module>\n        EllipticCurve('858k2').sha().an_padic(Integer(7))   # rank 0, non trivial sha, long time (10s on sage.math, 2011)###line 483:\n    sage: EllipticCurve('858k2').sha().an_padic(7)   # rank 0, non trivial sha, long time (10s on sage.math, 2011)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py\", line 565, in an_padic\n        lp = Et.padic_lseries(p)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padics.py\", line 159, in padic_lseries\n        normalize = normalize, use_eclib=use_eclib)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padic_lseries.py\", line 199, in __init__\n        self._modular_symbol = E.modular_symbol(sign=+1, use_eclib = use_eclib, normalize=normalize)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1221, in modular_symbol\n        M = ell_modular_symbols.ModularSymbolECLIB(self, sign, normalize=normalize)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py\", line 499, in __init__\n        self._modsym = ECModularSymbol(E)\n      File \"newforms.pyx\", line 70, in sage.libs.cremona.newforms.ECModularSymbol.__init__ (sage/libs/cremona/newforms.cpp:1825)\n    OverflowError: long int too large to convert to int\n**********************************************************************\nFile \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/devel/sage-main/sage/schemes/elliptic_curves/sha_tate.py\", line 740:\n    sage: e.sha().p_primary_bound(3)  # long time (10s on sage.math, 2011)\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_8[13]>\", line 1, in <module>\n        e.sha().p_primary_bound(Integer(3))  # long time (10s on sage.math, 2011)###line 740:\n    sage: e.sha().p_primary_bound(3)  # long time (10s on sage.math, 2011)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py\", line 766, in p_primary_bound\n        shan = self.an_padic(p,prec = 0,use_twists=True)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py\", line 565, in an_padic\n        lp = Et.padic_lseries(p)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padics.py\", line 159, in padic_lseries\n        normalize = normalize, use_eclib=use_eclib)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padic_lseries.py\", line 199, in __init__\n        self._modular_symbol = E.modular_symbol(sign=+1, use_eclib = use_eclib, normalize=normalize)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1221, in modular_symbol\n        M = ell_modular_symbols.ModularSymbolECLIB(self, sign, normalize=normalize)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py\", line 499, in __init__\n        self._modsym = ECModularSymbol(E)\n      File \"newforms.pyx\", line 70, in sage.libs.cremona.newforms.ECModularSymbol.__init__ (sage/libs/cremona/newforms.cpp:1825)\n    OverflowError: long int too large to convert to int\n**********************************************************************\nFile \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/devel/sage-main/sage/schemes/elliptic_curves/sha_tate.py\", line 748:\n    sage: e.sha().an_padic(7)  # long time (depends on \"e.sha().p_primary_bound(3)\" above)\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_8[15]>\", line 1, in <module>\n        e.sha().an_padic(Integer(7))  # long time (depends on \"e.sha().p_primary_bound(3)\" above)###line 748:\n    sage: e.sha().an_padic(7)  # long time (depends on \"e.sha().p_primary_bound(3)\" above)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py\", line 565, in an_padic\n        lp = Et.padic_lseries(p)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padics.py\", line 159, in padic_lseries\n        normalize = normalize, use_eclib=use_eclib)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padic_lseries.py\", line 199, in __init__\n        self._modular_symbol = E.modular_symbol(sign=+1, use_eclib = use_eclib, normalize=normalize)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1221, in modular_symbol\n        M = ell_modular_symbols.ModularSymbolECLIB(self, sign, normalize=normalize)\n      File \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py\", line 499, in __init__\n        self._modsym = ECModularSymbol(E)\n      File \"newforms.pyx\", line 70, in sage.libs.cremona.newforms.ECModularSymbol.__init__ (sage/libs/cremona/newforms.cpp:1825)\n    OverflowError: long int too large to convert to int\n**********************************************************************\n```",
    "created_at": "2011-05-03T08:51:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113960",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
The buildbot discovered some doctest failures on 32-bit systems which I believe to come from this ticket (but I'm not completely sure):

```
sage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/sha_tate.py
**********************************************************************
File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/devel/sage-main/sage/schemes/elliptic_curves/sha_tate.py", line 483:
    sage: EllipticCurve('858k2').sha().an_padic(7)   # rank 0, non trivial sha, long time (10s on sage.math, 2011)
Exception raised:
    Traceback (most recent call last):
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_7[5]>", line 1, in <module>
        EllipticCurve('858k2').sha().an_padic(Integer(7))   # rank 0, non trivial sha, long time (10s on sage.math, 2011)###line 483:
    sage: EllipticCurve('858k2').sha().an_padic(7)   # rank 0, non trivial sha, long time (10s on sage.math, 2011)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py", line 565, in an_padic
        lp = Et.padic_lseries(p)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padics.py", line 159, in padic_lseries
        normalize = normalize, use_eclib=use_eclib)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padic_lseries.py", line 199, in __init__
        self._modular_symbol = E.modular_symbol(sign=+1, use_eclib = use_eclib, normalize=normalize)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1221, in modular_symbol
        M = ell_modular_symbols.ModularSymbolECLIB(self, sign, normalize=normalize)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py", line 499, in __init__
        self._modsym = ECModularSymbol(E)
      File "newforms.pyx", line 70, in sage.libs.cremona.newforms.ECModularSymbol.__init__ (sage/libs/cremona/newforms.cpp:1825)
    OverflowError: long int too large to convert to int
**********************************************************************
File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/devel/sage-main/sage/schemes/elliptic_curves/sha_tate.py", line 740:
    sage: e.sha().p_primary_bound(3)  # long time (10s on sage.math, 2011)
Exception raised:
    Traceback (most recent call last):
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_8[13]>", line 1, in <module>
        e.sha().p_primary_bound(Integer(3))  # long time (10s on sage.math, 2011)###line 740:
    sage: e.sha().p_primary_bound(3)  # long time (10s on sage.math, 2011)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py", line 766, in p_primary_bound
        shan = self.an_padic(p,prec = 0,use_twists=True)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py", line 565, in an_padic
        lp = Et.padic_lseries(p)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padics.py", line 159, in padic_lseries
        normalize = normalize, use_eclib=use_eclib)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padic_lseries.py", line 199, in __init__
        self._modular_symbol = E.modular_symbol(sign=+1, use_eclib = use_eclib, normalize=normalize)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1221, in modular_symbol
        M = ell_modular_symbols.ModularSymbolECLIB(self, sign, normalize=normalize)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py", line 499, in __init__
        self._modsym = ECModularSymbol(E)
      File "newforms.pyx", line 70, in sage.libs.cremona.newforms.ECModularSymbol.__init__ (sage/libs/cremona/newforms.cpp:1825)
    OverflowError: long int too large to convert to int
**********************************************************************
File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/devel/sage-main/sage/schemes/elliptic_curves/sha_tate.py", line 748:
    sage: e.sha().an_padic(7)  # long time (depends on "e.sha().p_primary_bound(3)" above)
Exception raised:
    Traceback (most recent call last):
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_8[15]>", line 1, in <module>
        e.sha().an_padic(Integer(7))  # long time (depends on "e.sha().p_primary_bound(3)" above)###line 748:
    sage: e.sha().an_padic(7)  # long time (depends on "e.sha().p_primary_bound(3)" above)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/sha_tate.py", line 565, in an_padic
        lp = Et.padic_lseries(p)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padics.py", line 159, in padic_lseries
        normalize = normalize, use_eclib=use_eclib)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/padic_lseries.py", line 199, in __init__
        self._modular_symbol = E.modular_symbol(sign=+1, use_eclib = use_eclib, normalize=normalize)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1221, in modular_symbol
        M = ell_modular_symbols.ModularSymbolECLIB(self, sign, normalize=normalize)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.1.alpha0/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_modular_symbols.py", line 499, in __init__
        self._modsym = ECModularSymbol(E)
      File "newforms.pyx", line 70, in sage.libs.cremona.newforms.ECModularSymbol.__init__ (sage/libs/cremona/newforms.cpp:1825)
    OverflowError: long int too large to convert to int
**********************************************************************
```



---

archive/issue_events_087601.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-03T08:51:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87601"
}
```



---

archive/issue_events_087602.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-03T08:51:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87602"
}
```



---

archive/issue_comments_113961.json:
```json
{
    "body": "**Work Issues:** fix on 32-bit",
    "created_at": "2011-05-03T08:51:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113961",
    "user": "https://github.com/jdemeyer"
}
```

**Work Issues:** fix on 32-bit



---

archive/issue_comments_113962.json:
```json
{
    "body": "<a id='comment:15'></a>\nI confirm the failure on 32-bit computers with Sage 4.7.1, where the patch applies smoothly.\n\nHowever there are already some tests that are known to fail on 32-bit, for example\nin `lib/cremona/newforms.pyx`:\n\n```\n            sage: from sage.libs.cremona.newforms import ECModularSymbol\n            sage: E = EllipticCurve('858k2')\n            sage: ECModularSymbol(E)\n            Traceback (most recent call last):                     # 32-bit\n            ...                                                    # 32-bit\n            OverflowError: long int too large to convert to int    # 32-bit\n```\nShould we mark the tests which are failing on 32-bit in the same way?\n\nPaul",
    "created_at": "2011-09-16T08:10:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113962",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:15'></a>
I confirm the failure on 32-bit computers with Sage 4.7.1, where the patch applies smoothly.

However there are already some tests that are known to fail on 32-bit, for example
in `lib/cremona/newforms.pyx`:

```
            sage: from sage.libs.cremona.newforms import ECModularSymbol
            sage: E = EllipticCurve('858k2')
            sage: ECModularSymbol(E)
            Traceback (most recent call last):                     # 32-bit
            ...                                                    # 32-bit
            OverflowError: long int too large to convert to int    # 32-bit
```
Should we mark the tests which are failing on 32-bit in the same way?

Paul



---

archive/issue_events_087603.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-09-16T08:10:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87603"
}
```



---

archive/issue_events_087604.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-09-16T08:10:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87604"
}
```



---

archive/issue_events_087605.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87605"
}
```



---

archive/issue_events_087606.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87606"
}
```



---

archive/issue_comments_113963.json:
```json
{
    "body": "**Branch:** [u/wuthrich/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/wuthrich/ticket/11211)",
    "created_at": "2013-12-27T01:07:26Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113963",
    "user": "https://github.com/categorie"
}
```

**Branch:** [u/wuthrich/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/wuthrich/ticket/11211)



---

archive/issue_comments_113964.json:
```json
{
    "body": "<a id='comment:18'></a>\nI have tried to rebase this ticket, too. It seems to pass all test on my 64-bit. But I have no access to 32-bit and so I would need somone to review this who has. I copied as suggested the # 32-bit into sha_tate at the three occasions listed above. But I have no idea if that is all that is needed for 32 bit. \n\nSorry, if I did something wrong here.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a9f937\">8a9f937</a></td><td><code>Trac 11211: eclib should be used by default for modular symbols</code></td></tr></table>\n",
    "created_at": "2013-12-27T01:14:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113964",
    "user": "https://github.com/categorie"
}
```

<a id='comment:18'></a>
I have tried to rebase this ticket, too. It seems to pass all test on my 64-bit. But I have no access to 32-bit and so I would need somone to review this who has. I copied as suggested the # 32-bit into sha_tate at the three occasions listed above. But I have no idea if that is all that is needed for 32 bit. 

Sorry, if I did something wrong here.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a9f937">8a9f937</a></td><td><code>Trac 11211: eclib should be used by default for modular symbols</code></td></tr></table>




---

archive/issue_comments_113965.json:
```json
{
    "body": "**Commit:** [8a9f937ba243ac7586633a273866b76fe49d38fa](https://github.com/sagemath/sagetrac-mirror/commit/8a9f937ba243ac7586633a273866b76fe49d38fa)",
    "created_at": "2013-12-27T01:14:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113965",
    "user": "https://github.com/categorie"
}
```

**Commit:** [8a9f937ba243ac7586633a273866b76fe49d38fa](https://github.com/sagemath/sagetrac-mirror/commit/8a9f937ba243ac7586633a273866b76fe49d38fa)



---

archive/issue_events_087607.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2013-12-27T01:14:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87607"
}
```



---

archive/issue_events_087608.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2013-12-27T01:14:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87608"
}
```



---

archive/issue_comments_113966.json:
```json
{
    "body": "<a id='comment:19'></a>\nI should be able to test this on my 2008 laptop which is 32-bit and on which I built 6.0 yesterday.  If it does, then Chris or Jeroen can give it a positive review?",
    "created_at": "2013-12-31T11:07:34Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113966",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:19'></a>
I should be able to test this on my 2008 laptop which is 32-bit and on which I built 6.0 yesterday.  If it does, then Chris or Jeroen can give it a positive review?



---

archive/issue_comments_113967.json:
```json
{
    "body": "<a id='comment:20'></a>\nOK, so I had to change 3 error messages from\n\n```\nOverflowError: long int too large to convert to int\n```\nto\n\n```\nOverflowError: Python int too large to convert to C long\n```\nand then tests pass on 32-bit.",
    "created_at": "2013-12-31T15:39:53Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113967",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:20'></a>
OK, so I had to change 3 error messages from

```
OverflowError: long int too large to convert to int
```
to

```
OverflowError: Python int too large to convert to C long
```
and then tests pass on 32-bit.



---

archive/issue_comments_113968.json:
```json
{
    "body": "**Changing commit** from \"[8a9f937ba243ac7586633a273866b76fe49d38fa](https://github.com/sagemath/sagetrac-mirror/commit/8a9f937ba243ac7586633a273866b76fe49d38fa)\" to \"[530027c370dfc82cb2c6a989984c07f1949d5e9b](https://github.com/sagemath/sagetrac-mirror/commit/530027c370dfc82cb2c6a989984c07f1949d5e9b)\".",
    "created_at": "2013-12-31T15:40:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113968",
    "user": "https://github.com/JohnCremona"
}
```

**Changing commit** from "[8a9f937ba243ac7586633a273866b76fe49d38fa](https://github.com/sagemath/sagetrac-mirror/commit/8a9f937ba243ac7586633a273866b76fe49d38fa)" to "[530027c370dfc82cb2c6a989984c07f1949d5e9b](https://github.com/sagemath/sagetrac-mirror/commit/530027c370dfc82cb2c6a989984c07f1949d5e9b)".



---

archive/issue_comments_113969.json:
```json
{
    "body": "<a id='comment:21'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/530027c\">530027c</a></td><td><code>trac 11211: correct doctest error message for 32-bit</code></td></tr></table>\n",
    "created_at": "2013-12-31T15:40:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113969",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:21'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/530027c">530027c</a></td><td><code>trac 11211: correct doctest error message for 32-bit</code></td></tr></table>




---

archive/issue_comments_113970.json:
```json
{
    "body": "**Changing branch** from \"[u/wuthrich/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/wuthrich/ticket/11211)\" to \"[u/cremona/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/11211)\".",
    "created_at": "2013-12-31T15:40:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113970",
    "user": "https://github.com/JohnCremona"
}
```

**Changing branch** from "[u/wuthrich/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/wuthrich/ticket/11211)" to "[u/cremona/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/11211)".



---

archive/issue_comments_113971.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,6 +14,4 @@\n \n Note that claim that use_eclib defaults to True and the fact that it doesn't. \n \n-Since eclib is supposed to be correct, and is much faster, it should be the default as claimed in the docstring.  The fix should be a patch that changes the one `__init__` line. \n-\n-Apply only trac_11211-modsym.patch\n+Since eclib is supposed to be correct, and is much faster, it should be the default as claimed in the docstring.  The fix should be a patch that changes the one `__init__` line.\n``````\n",
    "created_at": "2014-01-01T17:47:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113971",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,6 +14,4 @@
 
 Note that claim that use_eclib defaults to True and the fact that it doesn't. 
 
-Since eclib is supposed to be correct, and is much faster, it should be the default as claimed in the docstring.  The fix should be a patch that changes the one `__init__` line. 
-
-Apply only trac_11211-modsym.patch
+Since eclib is supposed to be correct, and is much faster, it should be the default as claimed in the docstring.  The fix should be a patch that changes the one `__init__` line.
``````




---

archive/issue_comments_113972.json:
```json
{
    "body": "**Changing work issues** from \"fix on 32-bit\" to \"\".",
    "created_at": "2014-01-01T17:47:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113972",
    "user": "https://github.com/jdemeyer"
}
```

**Changing work issues** from "fix on 32-bit" to "".



---

archive/issue_comments_113973.json:
```json
{
    "body": "<a id='comment:22'></a>\nWhat the purpose of the comment\n\n```\n# 32-bit (see :trac: `11211`)\n```\nthe fact that those tests don't work on 32-bit has nothing to do with this ticket, right?\nI would expect that ticket number to refer to a ticket saying \"make sure these tests pass even on 32-bit systems\".",
    "created_at": "2014-01-01T17:47:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113973",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
What the purpose of the comment

```
# 32-bit (see :trac: `11211`)
```
the fact that those tests don't work on 32-bit has nothing to do with this ticket, right?
I would expect that ticket number to refer to a ticket saying "make sure these tests pass even on 32-bit systems".



---

archive/issue_comments_113974.json:
```json
{
    "body": "<a id='comment:23'></a>\nOne other small but important comment (possibly for a different ticket, but I felt I should mention it): do not put Python code inside `sig_on()`, espcially not if that Python code can raise exceptions. In particular, the following 3 lines (possibly more) should be outside the `sig_on()` block:\n\n```\nr = Cusp(r) \nd = r.denominator() \nn = r.numerator() \n```\n\nThe consequences of this can be severe:\n\n```\nsage: from sage.libs.cremona.newforms import ECModularSymbol\nsage: E = EllipticCurve('11a')\nsage: M = ECModularSymbol(E)\nsage: M(\"garbage\")\n...\nTypeError: unable to convert garbage to a rational\nsage: pari(\"1/0\")\n...\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n```\n\nI also recommend that the line `M(\"garbage\")` should become a doctest.",
    "created_at": "2014-01-01T17:55:40Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113974",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
One other small but important comment (possibly for a different ticket, but I felt I should mention it): do not put Python code inside `sig_on()`, espcially not if that Python code can raise exceptions. In particular, the following 3 lines (possibly more) should be outside the `sig_on()` block:

```
r = Cusp(r) 
d = r.denominator() 
n = r.numerator() 
```

The consequences of this can be severe:

```
sage: from sage.libs.cremona.newforms import ECModularSymbol
sage: E = EllipticCurve('11a')
sage: M = ECModularSymbol(E)
sage: M("garbage")
...
TypeError: unable to convert garbage to a rational
sage: pari("1/0")
...
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
```

I also recommend that the line `M("garbage")` should become a doctest.



---

archive/issue_comments_113975.json:
```json
{
    "body": "**Changing reviewer** from \"John Cremona\" to \"John Cremona, Jeroen Demeyer\".",
    "created_at": "2014-01-01T19:30:40Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113975",
    "user": "https://github.com/JohnCremona"
}
```

**Changing reviewer** from "John Cremona" to "John Cremona, Jeroen Demeyer".



---

archive/issue_events_087609.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-01-01T19:30:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87609"
}
```



---

archive/issue_events_087610.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-01-01T19:30:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87610"
}
```



---

archive/issue_comments_113976.json:
```json
{
    "body": "<a id='comment:24'></a>\nI will move the sigon() and upload a new commit tomorrow, with some new doctests.",
    "created_at": "2014-01-01T19:30:40Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113976",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:24'></a>
I will move the sigon() and upload a new commit tomorrow, with some new doctests.



---

archive/issue_comments_113977.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/077059e\">077059e</a></td><td><code>trac 11211: move sigon() and add extra tests</code></td></tr></table>\n",
    "created_at": "2014-01-02T11:48:24Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113977",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/077059e">077059e</a></td><td><code>trac 11211: move sigon() and add extra tests</code></td></tr></table>




---

archive/issue_comments_113978.json:
```json
{
    "body": "**Changing commit** from \"[530027c370dfc82cb2c6a989984c07f1949d5e9b](https://github.com/sagemath/sagetrac-mirror/commit/530027c370dfc82cb2c6a989984c07f1949d5e9b)\" to \"[077059e75ac3bbafd2df159a5e76c6e26042f34f](https://github.com/sagemath/sagetrac-mirror/commit/077059e75ac3bbafd2df159a5e76c6e26042f34f)\".",
    "created_at": "2014-01-02T11:48:24Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[530027c370dfc82cb2c6a989984c07f1949d5e9b](https://github.com/sagemath/sagetrac-mirror/commit/530027c370dfc82cb2c6a989984c07f1949d5e9b)" to "[077059e75ac3bbafd2df159a5e76c6e26042f34f](https://github.com/sagemath/sagetrac-mirror/commit/077059e75ac3bbafd2df159a5e76c6e26042f34f)".



---

archive/issue_events_087611.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-01-02T11:49:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87611"
}
```



---

archive/issue_events_087612.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-01-02T11:49:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87612"
}
```



---

archive/issue_comments_113979.json:
```json
{
    "body": "**Changing reviewer** from \"John Cremona, Jeroen Demeyer\" to \"John Cremona, Jeroen Demeyer, Chris Wuthrich\".",
    "created_at": "2014-01-03T20:54:20Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113979",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "John Cremona, Jeroen Demeyer" to "John Cremona, Jeroen Demeyer, Chris Wuthrich".



---

archive/issue_comments_113980.json:
```json
{
    "body": "<a id='comment:27'></a>\nIf you accept this commit, positive_review to the `sig_on()` stuff (but I hope somebody else can review the rest of the ticket).",
    "created_at": "2014-01-03T20:54:20Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113980",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>
If you accept this commit, positive_review to the `sig_on()` stuff (but I hope somebody else can review the rest of the ticket).



---

archive/issue_comments_113981.json:
```json
{
    "body": "**Changing branch** from \"[u/cremona/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/11211)\" to \"[u/jdemeyer/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/11211)\".",
    "created_at": "2014-01-03T21:00:12Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113981",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/cremona/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/11211)" to "[u/jdemeyer/ticket/11211](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/11211)".



---

archive/issue_comments_113982.json:
```json
{
    "body": "**Changing commit** from \"[077059e75ac3bbafd2df159a5e76c6e26042f34f](https://github.com/sagemath/sagetrac-mirror/commit/077059e75ac3bbafd2df159a5e76c6e26042f34f)\" to \"[66b58a737fb33262558f4b93d887f156653ff18f](https://github.com/sagemath/sagetrac-mirror/commit/66b58a737fb33262558f4b93d887f156653ff18f)\".",
    "created_at": "2014-01-03T21:00:26Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113982",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[077059e75ac3bbafd2df159a5e76c6e26042f34f](https://github.com/sagemath/sagetrac-mirror/commit/077059e75ac3bbafd2df159a5e76c6e26042f34f)" to "[66b58a737fb33262558f4b93d887f156653ff18f](https://github.com/sagemath/sagetrac-mirror/commit/66b58a737fb33262558f4b93d887f156653ff18f)".



---

archive/issue_comments_113983.json:
```json
{
    "body": "<a id='comment:29'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66b58a7\">66b58a7</a></td><td><code>Move Rational construction outside sig_on()/sig_off()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14549ce\">14549ce</a></td><td><code>Merge branch 'develop' into ticket/11211</code></td></tr></table>\n",
    "created_at": "2014-01-03T21:00:26Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113983",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66b58a7">66b58a7</a></td><td><code>Move Rational construction outside sig_on()/sig_off()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14549ce">14549ce</a></td><td><code>Merge branch 'develop' into ticket/11211</code></td></tr></table>




---

archive/issue_comments_113984.json:
```json
{
    "body": "<a id='comment:30'></a>\nChris, can you give this a positive review now?  You are the only reviewer not also an author, I think.",
    "created_at": "2014-01-07T19:46:39Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113984",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:30'></a>
Chris, can you give this a positive review now?  You are the only reviewer not also an author, I think.



---

archive/issue_events_087613.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2014-01-08T21:43:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87613"
}
```



---

archive/issue_events_087614.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2014-01-08T21:43:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87614"
}
```



---

archive/issue_comments_113985.json:
```json
{
    "body": "<a id='comment:31'></a>\nThe tests pass for me (except a couple which I know is related to relocating the directory and not to this ticket).\nI can only test 64-bit, but I understand that 32-bit now passes all tests too.\n\nThanks for the work.",
    "created_at": "2014-01-08T21:43:03Z",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11211#issuecomment-113985",
    "user": "https://github.com/categorie"
}
```

<a id='comment:31'></a>
The tests pass for me (except a couple which I know is related to relocating the directory and not to this ticket).
I can only test 64-bit, but I understand that 32-bit now passes all tests too.

Thanks for the work.



---

archive/issue_events_087615.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-10T07:29:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87615"
}
```



---

archive/issue_events_087616.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "109756c11a5f2c05ff41dcc3836d131209b7eea7",
    "created_at": "2014-01-10T07:29:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11211",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11211#event-87616"
}
```
