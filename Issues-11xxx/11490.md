# Issue 11490: Add a thematic tutorial on coercion and categories

archive/issues_011318.json:
```json
{
    "body": "From time to time people state that a good introduction to the category framework and Sage's coercion system is missing (at [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/bbcb3574c5317cfa), for example).\n\nI suggest to include a thematic tutorial.\n\nNote that it may relate with #8821, which is about adding a section on coercion (but not categories) in the guided tour.\n\n**Assignee:** mvngu\n\n**CC:**  @novoselt @vbraun\n\n**Keywords:** categories coercion thematic tutorial\n\n**Reviewer:** Vincent Delecroix, Travis Scrimshaw, Dmitrii Pasechnik\n\n**Author:** Simon King\n\n**Merged:** sage-5.8.beta1\n\n**Dependencies:** #14084\n\nIssue created by migration from https://trac.sagemath.org/ticket/11490\n\n",
    "closed_at": "2013-02-22T19:10:08Z",
    "created_at": "2011-06-15T07:33:36Z",
    "labels": [
        "component: documentation",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.8",
    "title": "Add a thematic tutorial on coercion and categories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11490",
    "user": "https://github.com/simon-king-jena"
}
```
From time to time people state that a good introduction to the category framework and Sage's coercion system is missing (at [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/bbcb3574c5317cfa), for example).

I suggest to include a thematic tutorial.

Note that it may relate with #8821, which is about adding a section on coercion (but not categories) in the guided tour.

**Assignee:** mvngu

**CC:**  @novoselt @vbraun

**Keywords:** categories coercion thematic tutorial

**Reviewer:** Vincent Delecroix, Travis Scrimshaw, Dmitrii Pasechnik

**Author:** Simon King

**Merged:** sage-5.8.beta1

**Dependencies:** #14084

Issue created by migration from https://trac.sagemath.org/ticket/11490





---

archive/issue_comments_118711.json:
```json
{
    "body": "<a id='comment:1'></a>\nI suggest to base a thematic tutorial on [this worksheet](http://flask.sagenb.org/home/pub/82/). \n\nIt covers base classes for parents and elements, category framework for parents and elements, uniqueness of parents, coercion maps, construction functors, and test suites.\n\nThe didactical approach is to explain the theory and illustrate each theoretical bit by showing how it can be implemented. Step by step, one obtains an alternative implementation of fraction fields.\n\nThere are also several texts in the combinat branch, and I suggest to add these as well. The style of these texts is very different from the style of my worksheet, and I hope that the user will benefit from diversity.",
    "created_at": "2011-06-15T07:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118711",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:1'></a>
I suggest to base a thematic tutorial on [this worksheet](http://flask.sagenb.org/home/pub/82/). 

It covers base classes for parents and elements, category framework for parents and elements, uniqueness of parents, coercion maps, construction functors, and test suites.

The didactical approach is to explain the theory and illustrate each theoretical bit by showing how it can be implemented. Step by step, one obtains an alternative implementation of fraction fields.

There are also several texts in the combinat branch, and I suggest to add these as well. The style of these texts is very different from the style of my worksheet, and I hope that the user will benefit from diversity.



---

archive/issue_comments_118712.json:
```json
{
    "body": "**Author:** Simon King",
    "created_at": "2011-06-15T07:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118712",
    "user": "https://github.com/simon-king-jena"
}
```

**Author:** Simon King



---

archive/issue_comments_118713.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n From time to time people state that a good introduction to the category framework and Sage's coercion system is missing (at [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/bbcb3574c5317cfa), for example).\n \n-I suggest to include a thematic tutorial\n+I suggest to include a thematic tutorial.\n+\n+Note that it may relate with #8821, which is about adding a section on coercion (but not categories) in the guided tour.\n``````\n",
    "created_at": "2011-06-15T07:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118713",
    "user": "https://github.com/simon-king-jena"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 From time to time people state that a good introduction to the category framework and Sage's coercion system is missing (at [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/bbcb3574c5317cfa), for example).
 
-I suggest to include a thematic tutorial
+I suggest to include a thematic tutorial.
+
+Note that it may relate with #8821, which is about adding a section on coercion (but not categories) in the guided tour.
``````




---

archive/issue_events_090725.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-06-15T07:49:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90725"
}
```



---

archive/issue_comments_118714.json:
```json
{
    "body": "<a id='comment:2'></a>\nI attached my worksheet.",
    "created_at": "2011-06-15T07:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118714",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:2'></a>
I attached my worksheet.



---

archive/issue_comments_118715.json:
```json
{
    "body": "Worksheet on how to use category framework and coercion when implementing parents and elements",
    "created_at": "2011-06-26T19:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118715",
    "user": "https://github.com/simon-king-jena"
}
```

Worksheet on how to use category framework and coercion when implementing parents and elements



---

archive/attachments_015147.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "CoercionAndCategories.sws",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11490/CoercionAndCategories.sws",
    "created_at": "2011-06-26T19:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.sws",
    "user": "https://github.com/simon-king-jena"
}
```



---

archive/issue_comments_118716.json:
```json
{
    "body": "<a id='comment:3'></a>\nI did some changes in my worksheet (updating both the [published worksheet](http://flask.sagenb.org/home/pub/82/) and the attached sws file). For some stupid reason, in the original version, I had fraction fields only for unique factorisation domains, not for integral domains.",
    "created_at": "2011-06-26T19:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118716",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>
I did some changes in my worksheet (updating both the [published worksheet](http://flask.sagenb.org/home/pub/82/) and the attached sws file). For some stupid reason, in the original version, I had fraction fields only for unique factorisation domains, not for integral domains.



---

archive/issue_comments_118717.json:
```json
{
    "body": "<a id='comment:4'></a>\nI've only just glanced at your worksheet, but how do its contents compare to the [section on coercion in the reference manual](http://sagemath.org/doc/reference/coercion.html)?",
    "created_at": "2011-07-22T21:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118717",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
I've only just glanced at your worksheet, but how do its contents compare to the [section on coercion in the reference manual](http://sagemath.org/doc/reference/coercion.html)?



---

archive/issue_comments_118718.json:
```json
{
    "body": "<a id='comment:5'></a>\nHow is this needs review?  There isn't a patch to apply.  It certainly seems like good progress, but still is needs_work.",
    "created_at": "2011-12-13T17:46:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118718",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>
How is this needs review?  There isn't a patch to apply.  It certainly seems like good progress, but still is needs_work.



---

archive/issue_events_090726.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-13T17:46:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90726"
}
```



---

archive/issue_events_090727.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-13T17:46:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90727"
}
```



---

archive/issue_events_090728.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-12-13T19:03:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90728"
}
```



---

archive/issue_events_090729.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-12-13T19:03:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90729"
}
```



---

archive/issue_comments_118719.json:
```json
{
    "body": "<a id='comment:6'></a>\nAnd what else should it be than a worksheet?",
    "created_at": "2011-12-13T19:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118719",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>
And what else should it be than a worksheet?



---

archive/issue_comments_118720.json:
```json
{
    "body": "<a id='comment:7'></a>\nA thematic tutorial in the documentation is a rst file.  See $SAGE_ROOT/devel/sage/doc/en/thematic_tutorials/ for examples.  A worksheet is probably pretty straightforward to convert to a rst file.\n\nSo I would think the patch would be an rst file in that directory and a one-line addition to the index.rst file in that directory.",
    "created_at": "2011-12-13T19:07:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118720",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
A thematic tutorial in the documentation is a rst file.  See $SAGE_ROOT/devel/sage/doc/en/thematic_tutorials/ for examples.  A worksheet is probably pretty straightforward to convert to a rst file.

So I would think the patch would be an rst file in that directory and a one-line addition to the index.rst file in that directory.



---

archive/issue_comments_118721.json:
```json
{
    "body": "<a id='comment:8'></a>\nUsing #10637 and some manual work, I have translated the worksheet into a thematic tutorial in .rst format.\n\nOne of the example needs #14084 to work, hence, this is a dependency.\n\nThe tutorial links to the reference manual, which is only possible with #6495; however, I don't think this should be considered a dependency, because in the worst case the links are not available.\n\nNeeds review! After applying the patch, do `sage --docbuild thematic_tutorials html`.\n\nApply trac11490-coercion_tutorial.patch",
    "created_at": "2013-02-10T14:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118721",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>
Using #10637 and some manual work, I have translated the worksheet into a thematic tutorial in .rst format.

One of the example needs #14084 to work, hence, this is a dependency.

The tutorial links to the reference manual, which is only possible with #6495; however, I don't think this should be considered a dependency, because in the worst case the links are not available.

Needs review! After applying the patch, do `sage --docbuild thematic_tutorials html`.

Apply trac11490-coercion_tutorial.patch



---

archive/issue_comments_118722.json:
```json
{
    "body": "**Dependencies:** #14084",
    "created_at": "2013-02-10T14:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118722",
    "user": "https://github.com/simon-king-jena"
}
```

**Dependencies:** #14084



---

archive/issue_events_090730.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-02-10T14:38:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90730"
}
```



---

archive/issue_events_090731.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-02-10T14:38:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90731"
}
```



---

archive/issue_comments_118723.json:
```json
{
    "body": "**Changing keywords** from \"categories coercion\" to \"categories coercion thematic tutorial\".",
    "created_at": "2013-02-10T14:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118723",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing keywords** from "categories coercion" to "categories coercion thematic tutorial".



---

archive/issue_comments_118724.json:
```json
{
    "body": "<a id='comment:9'></a>\nHello,\n\nI was wondering for such a patch to come! I read it because I am interested but by far not an expert. Here are some comments for trac11490-coercion_tutorial.patch, line numbers refer to the patch.\n\n* you may write \"and\" or \"respectively\" instead of \"resp.\" (line 34)\n* at lines 195-198 there is a kind of magic to test the pickling. You shoud add few words to explain what's happening.\n* I do not like the `class MyFrac(MyFrac)` at lines 462, 812, 882 (but do not have better option)\n* I would like to know why test at line 494 fails while I was able to add some elements at line 294\n* line 678: write \"P1 == P2\" instead of \"P1==P2\" (ie add whitespaces on both sides of \"==\")\n* I do not like your example at line 687 because of\n\n  ```\n  sage: P1 = QQ['v,w']; P2 = ZZ['w,v']\n  sage: v1 = P1('v'); w1 = P1('w')\n  sage: v2 = P2('v'); w2 = P2('w')\n  sage: (v1 + w2).parent() is P1\n  True\n  sage: (v2 + w1).parent() is P1\n  True\n  ```\n  In other words, P1 is prefered to P2 ! Why is the reason ? I expected that are natural coercions in both directions then the parent of elements `a+b` is determined by the parent of `a`. Actually, there is an explanation in the lines after...\n\n\nBest,\nVincent",
    "created_at": "2013-02-10T17:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118724",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
Hello,

I was wondering for such a patch to come! I read it because I am interested but by far not an expert. Here are some comments for trac11490-coercion_tutorial.patch, line numbers refer to the patch.

* you may write "and" or "respectively" instead of "resp." (line 34)
* at lines 195-198 there is a kind of magic to test the pickling. You shoud add few words to explain what's happening.
* I do not like the `class MyFrac(MyFrac)` at lines 462, 812, 882 (but do not have better option)
* I would like to know why test at line 494 fails while I was able to add some elements at line 294
* line 678: write "P1 == P2" instead of "P1==P2" (ie add whitespaces on both sides of "==")
* I do not like your example at line 687 because of

  ```
  sage: P1 = QQ['v,w']; P2 = ZZ['w,v']
  sage: v1 = P1('v'); w1 = P1('w')
  sage: v2 = P2('v'); w2 = P2('w')
  sage: (v1 + w2).parent() is P1
  True
  sage: (v2 + w1).parent() is P1
  True
  ```
  In other words, P1 is prefered to P2 ! Why is the reason ? I expected that are natural coercions in both directions then the parent of elements `a+b` is determined by the parent of `a`. Actually, there is an explanation in the lines after...


Best,
Vincent



---

archive/issue_comments_118725.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [vdelecroix](#comment%3A9):\n> * you may write \"and\" or \"respectively\" instead of \"resp.\" (line 34)\n\n\nOK.\n\n> * at lines 195-198 there is a kind of magic to test the pickling. You shoud add few words to explain what's happening.\n\n\nWell, in the lines in front of it, I write\n\n```\n    However, for\n    making the example work in the Sage's doctesting framework, we need to\n    declare our class as an attribute of the ``__main__`` module.\n```\nI thought this is an explanation? Technically, the doctest framework finds that the classes are defined in the module `__main__`, but apparently (for a reason that is not clear to me) it can not find it in `__main__`---although this perfectly works in an interactive session.\n\nSimilar case is around line 1433 and 1572.\n\n> * I do not like the `class MyFrac(MyFrac)` at lines 462, 812, 882 (but do not have better option)\n\n\nThe didactic idea is that it is more easy to understand what is happening, when only small changes are made. Hence, I certainly would not like to repeatedly give a full definition of `MyFrac`, each time changing or adding a small detail, because the reader would then be more likely to lose track.\n\n> * I would like to know why test at line 494 fails while I was able to add some elements at line 294\n\n\nAt this point, we *can* add elements (visible in line 294), but `P.zero_element()` does not work yet, because this tries to return `P(0)`, but conversion is not available at this point.\n\nShall I add the explanation at line 494, or better at line 539, when I made the summation work?\n\n> * line 678: write \"P1 == P2\" instead of \"P1==P2\" (ie add whitespaces on both sides of \"==\")\n\n\nOK.\n\n> * I do not like your example at line 687 because of\n> \n>   ```\n>   sage: P1 = QQ['v,w']; P2 = ZZ['w,v']\n>   sage: v1 = P1('v'); w1 = P1('w')\n>   sage: v2 = P2('v'); w2 = P2('w')\n>   sage: (v1 + w2).parent() is P1\n>   True\n>   sage: (v2 + w1).parent() is P1\n>   True\n>   ```\n>   In other words, P1 is prefered to P2 ! Why is the reason ?\n\n\nThere is a coercion from P2 to P1, but not from P1 to P2 (note the different base rings).\n\n> I expected that are natural coercions in both directions then the parent of elements `a+b` is determined by the parent of `a`.\n\n\nThat's correct, but there is no bi-directional coercion here.\n\nOK, I'll post an update a bit later.",
    "created_at": "2013-02-10T17:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118725",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:10'></a>
Replying to [vdelecroix](#comment%3A9):
> * you may write "and" or "respectively" instead of "resp." (line 34)


OK.

> * at lines 195-198 there is a kind of magic to test the pickling. You shoud add few words to explain what's happening.


Well, in the lines in front of it, I write

```
    However, for
    making the example work in the Sage's doctesting framework, we need to
    declare our class as an attribute of the ``__main__`` module.
```
I thought this is an explanation? Technically, the doctest framework finds that the classes are defined in the module `__main__`, but apparently (for a reason that is not clear to me) it can not find it in `__main__`---although this perfectly works in an interactive session.

Similar case is around line 1433 and 1572.

> * I do not like the `class MyFrac(MyFrac)` at lines 462, 812, 882 (but do not have better option)


The didactic idea is that it is more easy to understand what is happening, when only small changes are made. Hence, I certainly would not like to repeatedly give a full definition of `MyFrac`, each time changing or adding a small detail, because the reader would then be more likely to lose track.

> * I would like to know why test at line 494 fails while I was able to add some elements at line 294


At this point, we *can* add elements (visible in line 294), but `P.zero_element()` does not work yet, because this tries to return `P(0)`, but conversion is not available at this point.

Shall I add the explanation at line 494, or better at line 539, when I made the summation work?

> * line 678: write "P1 == P2" instead of "P1==P2" (ie add whitespaces on both sides of "==")


OK.

> * I do not like your example at line 687 because of
> 
>   ```
>   sage: P1 = QQ['v,w']; P2 = ZZ['w,v']
>   sage: v1 = P1('v'); w1 = P1('w')
>   sage: v2 = P2('v'); w2 = P2('w')
>   sage: (v1 + w2).parent() is P1
>   True
>   sage: (v2 + w1).parent() is P1
>   True
>   ```
>   In other words, P1 is prefered to P2 ! Why is the reason ?


There is a coercion from P2 to P1, but not from P1 to P2 (note the different base rings).

> I expected that are natural coercions in both directions then the parent of elements `a+b` is determined by the parent of `a`.


That's correct, but there is no bi-directional coercion here.

OK, I'll post an update a bit later.



---

archive/issue_comments_118726.json:
```json
{
    "body": "<a id='comment:11'></a>\nI also have the following comments:\n\n- There's a typo on line 100: `This base class provides a lot mor methods than a general parent::` (mor -> more).\n\n- On line 133: `Declaring the base or base is easy` -- should that be \"the base of base ring\"?\n\n- On block starting at line 141, I would set the `_repr_` and like functions in code formatting (double back ticks)\n\n- In the `__cmp__` block, it might be worth noting that if `__cmp__` is not implemented, bad things can happen when calling `cmp` (ex. #14065)\n\n- The double colon on line 312, I believe it will not show up in the documentation since I believe the newline will be treated as a whitespace.\n\n- The block starting at line 319, the last sentence is `It not even gives a wrong answer, but results in an error::`. I believe there should be a \"does\".\n\n- The `but they are *required* or *optional* methods` sentence on lines 435-436 sounds strange to me. I would recommend \"so they are either *optional* or *required* methods.\"\n\n- The `.. note::` on line 580 should have a blank line following it\n\n- On line 655, I think it should end with a bang `So, *don't be afraid of using categories!*` (sorry couldn't resist the pun)\n\n- I believe the title `Not any conversion is a coercion` on line 696 should be \"Not every conversion is a coercion\"\n\n- For the 5 axioms starting on line 725, shouldn't everything align (the blocks are one space less than the first line) for proper formatting?\n\n- On line 793 there is a typo: `We have seen above that some onversions into our` (onversions -> conversions)\n\n- Note block on line 935 needs a newline\n\n- The `.. warning::` block on line 1536 needs a newline\n\nFor the record, I was reading it from the patch file and didn't look at the compiled doc, so some of these might be invalid.\n\nOne last thing, this is more from my personal taste, but I think the note/warning blocks should be capitalized as `.. NOTE::` and `.. WARNING::` to be consistent with the dev guide.\n\nI'm sorry this turned into a bit of a laundry list of things. Thank you for this nice tutorial!\n\nBest,\n\nTravis",
    "created_at": "2013-02-10T17:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118726",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
I also have the following comments:

- There's a typo on line 100: `This base class provides a lot mor methods than a general parent::` (mor -> more).

- On line 133: `Declaring the base or base is easy` -- should that be "the base of base ring"?

- On block starting at line 141, I would set the `_repr_` and like functions in code formatting (double back ticks)

- In the `__cmp__` block, it might be worth noting that if `__cmp__` is not implemented, bad things can happen when calling `cmp` (ex. #14065)

- The double colon on line 312, I believe it will not show up in the documentation since I believe the newline will be treated as a whitespace.

- The block starting at line 319, the last sentence is `It not even gives a wrong answer, but results in an error::`. I believe there should be a "does".

- The `but they are *required* or *optional* methods` sentence on lines 435-436 sounds strange to me. I would recommend "so they are either *optional* or *required* methods."

- The `.. note::` on line 580 should have a blank line following it

- On line 655, I think it should end with a bang `So, *don't be afraid of using categories!*` (sorry couldn't resist the pun)

- I believe the title `Not any conversion is a coercion` on line 696 should be "Not every conversion is a coercion"

- For the 5 axioms starting on line 725, shouldn't everything align (the blocks are one space less than the first line) for proper formatting?

- On line 793 there is a typo: `We have seen above that some onversions into our` (onversions -> conversions)

- Note block on line 935 needs a newline

- The `.. warning::` block on line 1536 needs a newline

For the record, I was reading it from the patch file and didn't look at the compiled doc, so some of these might be invalid.

One last thing, this is more from my personal taste, but I think the note/warning blocks should be capitalized as `.. NOTE::` and `.. WARNING::` to be consistent with the dev guide.

I'm sorry this turned into a bit of a laundry list of things. Thank you for this nice tutorial!

Best,

Travis



---

archive/issue_comments_118727.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [tscrim](#comment%3A11):\n> - In the `__cmp__` block, it might be worth noting that if `__cmp__` is not implemented, bad things can happen when calling `cmp` (ex. #14065)\n\n\nDidn't know that!\n \n> - The block starting at line 319, the last sentence is `It not even gives a wrong answer, but results in an error::`. I believe there should be a \"does\".\n\n\nYou mean \"It does not even give a wrong answer, but results in an error\"?\n\n> - The `.. note::` on line 580 should have a blank line following it\n\n\nReally? But the html output looks fine in that location.\n \n> - For the 5 axioms starting on line 725, shouldn't everything align (the blocks are one space less than the first line) for proper formatting?\n\n\nLooks fine in html.\n\n> - Note block on line 935 needs a newline\n> - The `.. warning::` block on line 1536 needs a newline\n\n\nLooks fine in html\n\nThat said, if it is sphinx convention to have a blank line, then I'll insert one.\n\n> One last thing, this is more from my personal taste, but I think the note/warning blocks should be capitalized as `.. NOTE::` and `.. WARNING::` to be consistent with the dev guide.\n\n\nOn some ticket (don't remember which one), I recall that both look the same in the output, but I don't recall whether we want it capitalised or not. So, if you say the dev guide recommends capitalisation, then I'll change it.\n\n> I'm sorry this turned into a bit of a laundry list of things.\n\n\nThank you!",
    "created_at": "2013-02-10T18:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118727",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:12'></a>
Replying to [tscrim](#comment%3A11):
> - In the `__cmp__` block, it might be worth noting that if `__cmp__` is not implemented, bad things can happen when calling `cmp` (ex. #14065)


Didn't know that!
 
> - The block starting at line 319, the last sentence is `It not even gives a wrong answer, but results in an error::`. I believe there should be a "does".


You mean "It does not even give a wrong answer, but results in an error"?

> - The `.. note::` on line 580 should have a blank line following it


Really? But the html output looks fine in that location.
 
> - For the 5 axioms starting on line 725, shouldn't everything align (the blocks are one space less than the first line) for proper formatting?


Looks fine in html.

> - Note block on line 935 needs a newline
> - The `.. warning::` block on line 1536 needs a newline


Looks fine in html

That said, if it is sphinx convention to have a blank line, then I'll insert one.

> One last thing, this is more from my personal taste, but I think the note/warning blocks should be capitalized as `.. NOTE::` and `.. WARNING::` to be consistent with the dev guide.


On some ticket (don't remember which one), I recall that both look the same in the output, but I don't recall whether we want it capitalised or not. So, if you say the dev guide recommends capitalisation, then I'll change it.

> I'm sorry this turned into a bit of a laundry list of things.


Thank you!



---

archive/issue_comments_118728.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [SimonKing](#comment%3A12):\n> > - The block starting at line 319, the last sentence is `It not even gives a wrong answer, but results in an error::`. I believe there should be a \"does\".\n \n> \n> You mean \"It does not even give a wrong answer, but results in an error\"?\n\n\nYes...\n\n> That said, if it is sphinx convention to have a blank line, then I'll insert one.\n\n\nI'm just following [the conventions page](http://www.sagemath.org/doc/developer/conventions.html:) and that the `TESTS::` and `EXAMPLES::` blocks didn't format properly (although it might be because they are special).\n\n> \n> > One last thing, this is more from my personal taste, but I think the note/warning blocks should be capitalized as `.. NOTE::` and `.. WARNING::` to be consistent with the dev guide.\n\n> \n> On some ticket (don't remember which one), I recall that both look the same in the output, but I don't recall whether we want it capitalised or not. So, if you say the dev guide recommends capitalisation, then I'll change it.\n\n\nYou are correct in that the html output is the same. Thank you, sorry to be a bit of a nag on this.\n\nBest,\n\nTravis",
    "created_at": "2013-02-10T18:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118728",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Replying to [SimonKing](#comment%3A12):
> > - The block starting at line 319, the last sentence is `It not even gives a wrong answer, but results in an error::`. I believe there should be a "does".
 
> 
> You mean "It does not even give a wrong answer, but results in an error"?


Yes...

> That said, if it is sphinx convention to have a blank line, then I'll insert one.


I'm just following [the conventions page](http://www.sagemath.org/doc/developer/conventions.html:) and that the `TESTS::` and `EXAMPLES::` blocks didn't format properly (although it might be because they are special).

> 
> > One last thing, this is more from my personal taste, but I think the note/warning blocks should be capitalized as `.. NOTE::` and `.. WARNING::` to be consistent with the dev guide.

> 
> On some ticket (don't remember which one), I recall that both look the same in the output, but I don't recall whether we want it capitalised or not. So, if you say the dev guide recommends capitalisation, then I'll change it.


You are correct in that the html output is the same. Thank you, sorry to be a bit of a nag on this.

Best,

Travis



---

archive/issue_comments_118729.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [tscrim](#comment%3A11):\n> - On block starting at line 141, I would set the `_repr_` and like functions in code formatting (double back ticks)\n\n\nThat doesn't work, because double back ticks show up verbosely if they are in strong typesetting. Alternatively, I could remove the strong typesetting, if you prefer.",
    "created_at": "2013-02-10T18:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118729",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:14'></a>
Replying to [tscrim](#comment%3A11):
> - On block starting at line 141, I would set the `_repr_` and like functions in code formatting (double back ticks)


That doesn't work, because double back ticks show up verbosely if they are in strong typesetting. Alternatively, I could remove the strong typesetting, if you prefer.



---

archive/issue_comments_118730.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [SimonKing](#comment%3A14):\n> Replying to [tscrim](#comment%3A11):\n> > - On block starting at line 141, I would set the `_repr_` and like functions in code formatting (double back ticks)\n \n> \n> That doesn't work, because double back ticks show up verbosely if they are in strong typesetting. Alternatively, I could remove the strong typesetting, if you prefer.\n>  \n\nAh, didn't know that. In that case it is fine as it is.",
    "created_at": "2013-02-10T18:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118730",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
Replying to [SimonKing](#comment%3A14):
> Replying to [tscrim](#comment%3A11):
> > - On block starting at line 141, I would set the `_repr_` and like functions in code formatting (double back ticks)
 
> 
> That doesn't work, because double back ticks show up verbosely if they are in strong typesetting. Alternatively, I could remove the strong typesetting, if you prefer.
>  

Ah, didn't know that. In that case it is fine as it is.



---

archive/issue_comments_118731.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [tscrim](#comment%3A11):\n> - In the `__cmp__` block, it might be worth noting that if `__cmp__` is not implemented, bad things can happen when calling `cmp` (ex. #14065)\n\n\nYou don't give negative examples in #14065. Do you mean things like the following?\n\n```\nsage: class Foo(Element):\n....:     def __init__(self, x, parent=None):\n....:         self.x = x\n....:     def _repr_(self):\n....:         return \"<%s>\"%self.x\n....:     \nsage: a = Foo(1,parent=ZZ)\nsage: b = Foo(2,parent=ZZ)\nsage: cmp(a,b)\nTraceback (most recent call last):\n...\nNotImplementedError: BUG: sort algorithm for elements of 'None' not implemented\n```",
    "created_at": "2013-02-10T18:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118731",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:16'></a>
Replying to [tscrim](#comment%3A11):
> - In the `__cmp__` block, it might be worth noting that if `__cmp__` is not implemented, bad things can happen when calling `cmp` (ex. #14065)


You don't give negative examples in #14065. Do you mean things like the following?

```
sage: class Foo(Element):
....:     def __init__(self, x, parent=None):
....:         self.x = x
....:     def _repr_(self):
....:         return "<%s>"%self.x
....:     
sage: a = Foo(1,parent=ZZ)
sage: b = Foo(2,parent=ZZ)
sage: cmp(a,b)
Traceback (most recent call last):
...
NotImplementedError: BUG: sort algorithm for elements of 'None' not implemented
```



---

archive/issue_comments_118732.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [SimonKing](#comment%3A16):\n> Replying to [tscrim](#comment%3A11):\n> > - In the `__cmp__` block, it might be worth noting that if `__cmp__` is not implemented, bad things can happen when calling `cmp` (ex. #14065)\n \n> \n> You don't give negative examples in #14065. Do you mean things like the following?\n> \n> ```\n> sage: class Foo(Element):\n> ....:     def __init__(self, x, parent=None):\n> ....:         self.x = x\n> ....:     def _repr_(self):\n> ....:         return \"<%s>\"%self.x\n> ....:     \n> sage: a = Foo(1,parent=ZZ)\n> sage: b = Foo(2,parent=ZZ)\n> sage: cmp(a,b)\n> Traceback (most recent call last):\n> ...\n> NotImplementedError: BUG: sort algorithm for elements of 'None' not implemented\n> ```\n\n\nYes, in addition if you implement `__lt__` and like operators, it still breaks (for a easy version, inherit from `CombinatorialObject`, but then remove the `Element` inheritance and everything works).",
    "created_at": "2013-02-10T19:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118732",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
Replying to [SimonKing](#comment%3A16):
> Replying to [tscrim](#comment%3A11):
> > - In the `__cmp__` block, it might be worth noting that if `__cmp__` is not implemented, bad things can happen when calling `cmp` (ex. #14065)
 
> 
> You don't give negative examples in #14065. Do you mean things like the following?
> 
> ```
> sage: class Foo(Element):
> ....:     def __init__(self, x, parent=None):
> ....:         self.x = x
> ....:     def _repr_(self):
> ....:         return "<%s>"%self.x
> ....:     
> sage: a = Foo(1,parent=ZZ)
> sage: b = Foo(2,parent=ZZ)
> sage: cmp(a,b)
> Traceback (most recent call last):
> ...
> NotImplementedError: BUG: sort algorithm for elements of 'None' not implemented
> ```


Yes, in addition if you implement `__lt__` and like operators, it still breaks (for a easy version, inherit from `CombinatorialObject`, but then remove the `Element` inheritance and everything works).



---

archive/issue_comments_118733.json:
```json
{
    "body": "<a id='comment:18'></a>\nThe patch is updated. I hope I have addressed all your remarks!",
    "created_at": "2013-02-10T19:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118733",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:18'></a>
The patch is updated. I hope I have addressed all your remarks!



---

archive/issue_comments_118734.json:
```json
{
    "body": "<a id='comment:19'></a>\nIf Vincent is happy with the changes with respect to his comments, I'll go back through and do the final review. Thanks.",
    "created_at": "2013-02-10T19:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118734",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>
If Vincent is happy with the changes with respect to his comments, I'll go back through and do the final review. Thanks.



---

archive/issue_comments_118735.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [tscrim](#comment%3A19):\n> If Vincent is happy with the changes with respect to his comments, I'll go back through and do the final review. Thanks.\n\n\nDefinitely happy ;-)",
    "created_at": "2013-02-10T20:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118735",
    "user": "https://github.com/videlec"
}
```

<a id='comment:20'></a>
Replying to [tscrim](#comment%3A19):
> If Vincent is happy with the changes with respect to his comments, I'll go back through and do the final review. Thanks.


Definitely happy ;-)



---

archive/issue_comments_118736.json:
```json
{
    "body": "<a id='comment:21'></a>\nOne last little thing, the arrow point (for lack of a better name) on line 1107 is indented because of the space. Is this intended? It also is out of sync with the formatting of the arrow point on on line 436.\n\nThanks,\n\nTravis",
    "created_at": "2013-02-10T22:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118736",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
One last little thing, the arrow point (for lack of a better name) on line 1107 is indented because of the space. Is this intended? It also is out of sync with the formatting of the arrow point on on line 436.

Thanks,

Travis



---

archive/issue_comments_118737.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [tscrim](#comment%3A21):\n> One last little thing, the arrow point (for lack of a better name) on line 1107 is indented because of the space. Is this intended? It also is out of sync with the formatting of the arrow point on on line 436.\n\n\nI updated the patch, suggesting to replace the \"arrow points\" by a `.. NOTE::`.",
    "created_at": "2013-02-11T12:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118737",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:23'></a>
Replying to [tscrim](#comment%3A21):
> One last little thing, the arrow point (for lack of a better name) on line 1107 is indented because of the space. Is this intended? It also is out of sync with the formatting of the arrow point on on line 436.


I updated the patch, suggesting to replace the "arrow points" by a `.. NOTE::`.



---

archive/issue_events_090732.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-02-11T12:49:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90732"
}
```



---

archive/issue_events_090733.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-02-11T12:49:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90733"
}
```



---

archive/issue_comments_118738.json:
```json
{
    "body": "<a id='comment:24'></a>\nLooks good to me now too. Thank you for this nice tutorial.",
    "created_at": "2013-02-11T12:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118738",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
Looks good to me now too. Thank you for this nice tutorial.



---

archive/issue_comments_118739.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix, Travis Scrimshaw",
    "created_at": "2013-02-11T12:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118739",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Vincent Delecroix, Travis Scrimshaw



---

archive/issue_comments_118740.json:
```json
{
    "body": "<a id='comment:25'></a>\n\n```\nWe want to implement a field\n```\ngot me lost. Would you mind to be more specific? Are you talking about a particular field? Are you talking about the class of all fields? Something else?",
    "created_at": "2013-02-11T13:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118740",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>

```
We want to implement a field
```
got me lost. Would you mind to be more specific? Are you talking about a particular field? Are you talking about the class of all fields? Something else?



---

archive/issue_comments_118741.json:
```json
{
    "body": "<a id='comment:26'></a>\nIMHO it would be good if this was reviewed by someone without much clue about this stuff (like myself :)). It's a tutorial, after all, not a reference manual...",
    "created_at": "2013-02-11T13:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118741",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>
IMHO it would be good if this was reviewed by someone without much clue about this stuff (like myself :)). It's a tutorial, after all, not a reference manual...



---

archive/issue_comments_118742.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [dimpase](#comment%3A25):\n> \n> ```\n> We want to implement a field\n> ```\n> got me lost. Would you mind to be more specific? Are you talking about a particular field? Are you talking about the class of all fields? Something else?\n\n\nA few lines above, I write `We illustrate the concepts of Sage\u2019s category framework and coercion model by providing a toy implementation of fraction fields.` Of course, I could repeat that statement.",
    "created_at": "2013-02-11T13:20:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118742",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:27'></a>
Replying to [dimpase](#comment%3A25):
> 
> ```
> We want to implement a field
> ```
> got me lost. Would you mind to be more specific? Are you talking about a particular field? Are you talking about the class of all fields? Something else?


A few lines above, I write `We illustrate the concepts of Sageâ€™s category framework and coercion model by providing a toy implementation of fraction fields.` Of course, I could repeat that statement.



---

archive/issue_comments_118743.json:
```json
{
    "body": "<a id='comment:28'></a>\nI suggest to elaborate as follows:\n\n```\nThe parent\n----------\n\nThis tutorial explains Sage's category and coercion framework by means of a\ndetailled example, namely a toy implementation of fraction fields and fraction\nfield elements. Since we wish to implement a special kind of fields, it makes\nsense to build on top of the base class :class:`sage.rings.ring.Field`\nprovided by Sage.\n```",
    "created_at": "2013-02-11T13:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118743",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:28'></a>
I suggest to elaborate as follows:

```
The parent
----------

This tutorial explains Sage's category and coercion framework by means of a
detailled example, namely a toy implementation of fraction fields and fraction
field elements. Since we wish to implement a special kind of fields, it makes
sense to build on top of the base class :class:`sage.rings.ring.Field`
provided by Sage.
```



---

archive/issue_events_090734.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-02-11T13:29:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90734"
}
```



---

archive/issue_events_090735.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-02-11T13:29:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90735"
}
```



---

archive/issue_comments_118744.json:
```json
{
    "body": "<a id='comment:30'></a>\nSince Dima wants to have a second look, I am removing the positive review for now.",
    "created_at": "2013-02-11T13:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118744",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:30'></a>
Since Dima wants to have a second look, I am removing the positive review for now.



---

archive/issue_events_090736.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-02-11T13:30:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90736"
}
```



---

archive/issue_events_090737.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-02-11T13:30:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90737"
}
```



---

archive/issue_comments_118745.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [SimonKing](#comment%3A28):\n> I suggest to elaborate as follows:\n> \n> ```\n> The parent\n> ----------\n> \n> This tutorial explains Sage's category and coercion framework by means of a\n> detailled example, namely a toy implementation of fraction fields and fraction\n> field elements. Since we wish to implement a special kind of fields, it makes\n> sense to build on top of the base class :class:`sage.rings.ring.Field`\n> provided by Sage.\n> ```\n\n\nIMHO the 1st sentence, \n\n```\nThis tutorial explains Sage's category and coercion framework by means of a\ndetailed example, namely a toy implementation of fraction fields and fraction\nfield elements.\n```\nbelongs to the part above Outline. (and it's **detailed** with one 'l'). \n\nAnd then in \"The parent\" part you can say\n\n```\nSince we wish to implement a special kind of fields, namely, the fraction fields, it makes\nsense to build on top of the base class :class:`sage.rings.ring.Field` provided by Sage.\n```\n(notice **namely, the fraction fields** that I added.)",
    "created_at": "2013-02-11T13:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118745",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>
Replying to [SimonKing](#comment%3A28):
> I suggest to elaborate as follows:
> 
> ```
> The parent
> ----------
> 
> This tutorial explains Sage's category and coercion framework by means of a
> detailled example, namely a toy implementation of fraction fields and fraction
> field elements. Since we wish to implement a special kind of fields, it makes
> sense to build on top of the base class :class:`sage.rings.ring.Field`
> provided by Sage.
> ```


IMHO the 1st sentence, 

```
This tutorial explains Sage's category and coercion framework by means of a
detailed example, namely a toy implementation of fraction fields and fraction
field elements.
```
belongs to the part above Outline. (and it's **detailed** with one 'l'). 

And then in "The parent" part you can say

```
Since we wish to implement a special kind of fields, namely, the fraction fields, it makes
sense to build on top of the base class :class:`sage.rings.ring.Field` provided by Sage.
```
(notice **namely, the fraction fields** that I added.)



---

archive/issue_comments_118746.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [dimpase](#comment%3A31):\n> IMHO the 1st sentence, \n> \n> ```\n> This tutorial explains Sage's category and coercion framework by means of a\n> detailed example, namely a toy implementation of fraction fields and fraction\n> field elements.\n> ```\n> belongs to the part above Outline.\n\n\nYes, but there already *is* a similar sentence above Outline! Do you suggest to replace it?\n\n> And then in \"The parent\" part you can say\n> \n> ```\n> Since we wish to implement a special kind of fields, namely, the fraction fields, it makes\n> sense to build on top of the base class :class:`sage.rings.ring.Field` provided by Sage.\n> ```\n> (notice **namely, the fraction fields** that I added.)\n\n\nOK.",
    "created_at": "2013-02-11T13:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118746",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:32'></a>
Replying to [dimpase](#comment%3A31):
> IMHO the 1st sentence, 
> 
> ```
> This tutorial explains Sage's category and coercion framework by means of a
> detailed example, namely a toy implementation of fraction fields and fraction
> field elements.
> ```
> belongs to the part above Outline.


Yes, but there already *is* a similar sentence above Outline! Do you suggest to replace it?

> And then in "The parent" part you can say
> 
> ```
> Since we wish to implement a special kind of fields, namely, the fraction fields, it makes
> sense to build on top of the base class :class:`sage.rings.ring.Field` provided by Sage.
> ```
> (notice **namely, the fraction fields** that I added.)


OK.



---

archive/issue_comments_118747.json:
```json
{
    "body": "<a id='comment:33'></a>\nPS: I just think that actually we only have *four* axioms for coercion, not five. What I give as first axiom (\"coercion is defined on all elements, while a conversion could be a partial map\") is technically a consequence of the second axiom (\"coercions are morphisms\").\n\nSo, shall I combine the two statements?",
    "created_at": "2013-02-11T13:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118747",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:33'></a>
PS: I just think that actually we only have *four* axioms for coercion, not five. What I give as first axiom ("coercion is defined on all elements, while a conversion could be a partial map") is technically a consequence of the second axiom ("coercions are morphisms").

So, shall I combine the two statements?



---

archive/issue_comments_118748.json:
```json
{
    "body": "<a id='comment:34'></a>\nI have updated the patch according to what we have just discussed. If you like the old version better: I kept a backup...",
    "created_at": "2013-02-11T14:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118748",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:34'></a>
I have updated the patch according to what we have just discussed. If you like the old version better: I kept a backup...



---

archive/issue_comments_118749.json:
```json
{
    "body": "<a id='comment:35'></a>\nSorry, I just made another change: Around line 1018, I ask: \"How can we establish a coercion from `P`  to  `\\mathrm{Frac}(\\ZZ[x])`?\"\n\nBut actually, in the end we do *not* establish such a coercion. Instead, we make Sage create a third parent into which both P and `Frac(ZZ['x']` coerce. I commented accordingly in the new patch version.",
    "created_at": "2013-02-11T14:32:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118749",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:35'></a>
Sorry, I just made another change: Around line 1018, I ask: "How can we establish a coercion from `P`  to  `\mathrm{Frac}(\ZZ[x])`?"

But actually, in the end we do *not* establish such a coercion. Instead, we make Sage create a third parent into which both P and `Frac(ZZ['x']` coerce. I commented accordingly in the new patch version.



---

archive/issue_comments_118750.json:
```json
{
    "body": "<a id='comment:36'></a>\nArrgh, I can't even count! I counted the axioms like 1., 3., 4., 5...\n\nFixed in the new version.",
    "created_at": "2013-02-11T15:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118750",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:36'></a>
Arrgh, I can't even count! I counted the axioms like 1., 3., 4., 5...

Fixed in the new version.



---

archive/issue_comments_118751.json:
```json
{
    "body": "<a id='comment:37'></a>\nWould it be possible to include the complete code for `MyFrac`, as an appendix, with line numbers? Otherwise not all things are illustrated by code, e.g. 'You are encouraged to make your parent \u201cunique\u201d' paragraph lets the reader wonder how exactly this can be accomplished.  If there was such an appendix, you could say there 'see lines such-and-such of the appendix'. You could also replace some code snippets with such references then.",
    "created_at": "2013-02-13T01:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118751",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
Would it be possible to include the complete code for `MyFrac`, as an appendix, with line numbers? Otherwise not all things are illustrated by code, e.g. 'You are encouraged to make your parent â€œuniqueâ€' paragraph lets the reader wonder how exactly this can be accomplished.  If there was such an appendix, you could say there 'see lines such-and-such of the appendix'. You could also replace some code snippets with such references then.



---

archive/issue_comments_118752.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [dimpase](#comment%3A37):\n> Would it be possible to include the complete code for `MyFrac`, as an appendix, with line numbers? Otherwise not all things are illustrated by code, e.g. 'You are encouraged to make your parent \u201cunique\u201d' paragraph lets the reader wonder how exactly this can be accomplished.  If there was such an appendix, you could say there 'see lines such-and-such of the appendix'. You could also replace some code snippets with such references then.\n\n\nOops,  the code after the line 'Last, we add a method that returns the characteristic of the field.'\ninherits from `UniqueRepresentation`. But it was easy to overlook, as my previous comment shows :)\nAlso, it's hard to see  how  `MyFrac` and  `MyElement` fit together without a complete listing...",
    "created_at": "2013-02-13T02:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118752",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>
Replying to [dimpase](#comment%3A37):
> Would it be possible to include the complete code for `MyFrac`, as an appendix, with line numbers? Otherwise not all things are illustrated by code, e.g. 'You are encouraged to make your parent â€œuniqueâ€' paragraph lets the reader wonder how exactly this can be accomplished.  If there was such an appendix, you could say there 'see lines such-and-such of the appendix'. You could also replace some code snippets with such references then.


Oops,  the code after the line 'Last, we add a method that returns the characteristic of the field.'
inherits from `UniqueRepresentation`. But it was easy to overlook, as my previous comment shows :)
Also, it's hard to see  how  `MyFrac` and  `MyElement` fit together without a complete listing...



---

archive/issue_comments_118753.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [dimpase](#comment%3A38):\n> Replying to [dimpase](#comment%3A37):\n> > Would it be possible to include the complete code for `MyFrac`, as an appendix, with line numbers? Otherwise not all things are illustrated by code, e.g. 'You are encouraged to make your parent \u201cunique\u201d' paragraph lets the reader wonder how exactly this can be accomplished.  If there was such an appendix, you could say there 'see lines such-and-such of the appendix'. You could also replace some code snippets with such references then.\n\n> \n> Oops,  the code after the line 'Last, we add a method that returns the characteristic of the field.'\n> inherits from `UniqueRepresentation`. But it was easy to overlook, as my previous comment shows :)\n\n\nBut I *explicitly* state in the text\n\n```\nYou are encouraged to make your parent \u201cunique\u201d. That\u2019s to say, parents should only evaluate equal if they are identical. Sage provides frameworks to create unique parents. We use here the most easy one: Inheriting from the class sage.structure.unique_representation.UniqueRepresentation is enough. Making parents unique can be quite important for an efficient implementation, because the repeated creation of \u201cthe same\u201d parent would take a lot of time.\n```\n\nDo you really think this is not enough?\n\n> Also, it's hard to see  how  `MyFrac` and  `MyElement` fit together without a complete listing...\n\n\nOK. The didactic approach is to develop the example step by step. But I think having the complete code in the appendix would be nice. Is there an automated way to typeset the code with linenumbers?",
    "created_at": "2013-02-13T10:00:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118753",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:39'></a>
Replying to [dimpase](#comment%3A38):
> Replying to [dimpase](#comment%3A37):
> > Would it be possible to include the complete code for `MyFrac`, as an appendix, with line numbers? Otherwise not all things are illustrated by code, e.g. 'You are encouraged to make your parent â€œuniqueâ€' paragraph lets the reader wonder how exactly this can be accomplished.  If there was such an appendix, you could say there 'see lines such-and-such of the appendix'. You could also replace some code snippets with such references then.

> 
> Oops,  the code after the line 'Last, we add a method that returns the characteristic of the field.'
> inherits from `UniqueRepresentation`. But it was easy to overlook, as my previous comment shows :)


But I *explicitly* state in the text

```
You are encouraged to make your parent â€œuniqueâ€. Thatâ€™s to say, parents should only evaluate equal if they are identical. Sage provides frameworks to create unique parents. We use here the most easy one: Inheriting from the class sage.structure.unique_representation.UniqueRepresentation is enough. Making parents unique can be quite important for an efficient implementation, because the repeated creation of â€œthe sameâ€ parent would take a lot of time.
```

Do you really think this is not enough?

> Also, it's hard to see  how  `MyFrac` and  `MyElement` fit together without a complete listing...


OK. The didactic approach is to develop the example step by step. But I think having the complete code in the appendix would be nice. Is there an automated way to typeset the code with linenumbers?



---

archive/issue_comments_118754.json:
```json
{
    "body": "<a id='comment:40'></a>\nPS: And a few lines after motivating the use of `UniqueRepresentation` in the text, there is a fat note saying\n\n```\nNote\n\nUniqueRepresentation automatically provides our class with pickling, preserving the unique parent condition. If we had defined the class in some external module or in an interactive session, pickling would work immediately.\n\nHowever, for making the example work in Sage\u2019s doctesting framework, we need to assign our class as an attribute of the __main__ module, so that the class can be looked up during unpickling.\n```\nI really don't see how this can be overlooked.",
    "created_at": "2013-02-13T10:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118754",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:40'></a>
PS: And a few lines after motivating the use of `UniqueRepresentation` in the text, there is a fat note saying

```
Note

UniqueRepresentation automatically provides our class with pickling, preserving the unique parent condition. If we had defined the class in some external module or in an interactive session, pickling would work immediately.

However, for making the example work in Sageâ€™s doctesting framework, we need to assign our class as an attribute of the __main__ module, so that the class can be looked up during unpickling.
```
I really don't see how this can be overlooked.



---

archive/issue_comments_118755.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [SimonKing](#comment%3A39):\n> Replying to [dimpase](#comment%3A38):\n> > Replying to [dimpase](#comment%3A37):\n> > > Would it be possible to include the complete code for `MyFrac`, as an appendix, with line numbers? Otherwise not all things are illustrated by code, e.g. 'You are encouraged to make your parent \u201cunique\u201d' paragraph lets the reader wonder how exactly this can be accomplished.  If there was such an appendix, you could say there 'see lines such-and-such of the appendix'. You could also replace some code snippets with such references then.\n\n> > \n> > Oops,  the code after the line 'Last, we add a method that returns the characteristic of the field.'\n> > inherits from `UniqueRepresentation`. But it was easy to overlook, as my previous comment shows :)\n\n> \n> But I *explicitly* state in the text\n> \n> ```\n> You are encouraged to make your parent \u201cunique\u201d. That\u2019s to say, parents should only evaluate equal if they are identical. Sage provides frameworks to create unique parents. We use here the most easy one: Inheriting from the class sage.structure.unique_representation.UniqueRepresentation is enough. Making parents unique can be quite important for an efficient implementation, because the repeated creation of \u201cthe same\u201d parent would take a lot of time.\n> ```\n> \n> Do you really think this is not enough?\n> \n\n\nThe confusion comes from the fact that you explain the code **before** showing the code (or at least saying that it is coming). There is also an inconsistency in the exposition, as you have the line \n\n```\nsage: from sage.rings.ring import Field\n```\nbut no similar line for `UniqueRepresentation`. I guess I might have waited for `sage.structure.unique_representation` to show up in the code, but it didn't.\nCall me dyslexic :-). \n  \n\n> > Also, it's hard to see  how  `MyFrac` and  `MyElement` fit together without a complete listing...\n\n> \n> OK. The didactic approach is to develop the example step by step. But I think having the complete code in the appendix would be nice. Is there an automated way to typeset the code with linenumbers?\n\n\nAfter some trial and error upon reading [Sphinx manual](http://sphinx-doc.org/markup/code.htm), \nI found that the following will work with sphinx in Sage:\n\n```\n.. highlight:: python\n   :linenothreshold: 2\n\n::\n\n   x = 2\n   y = [1,2]\n   x = y\n\n.. highlight:: python\n   :linenothreshold: 22222\n\n```\nthe 1st `highlight::` turns on line numberings for fragments with 2 or more lines, and the 2nd `highlight::` effectively turns it off.",
    "created_at": "2013-02-13T13:14:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118755",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'></a>
Replying to [SimonKing](#comment%3A39):
> Replying to [dimpase](#comment%3A38):
> > Replying to [dimpase](#comment%3A37):
> > > Would it be possible to include the complete code for `MyFrac`, as an appendix, with line numbers? Otherwise not all things are illustrated by code, e.g. 'You are encouraged to make your parent â€œuniqueâ€' paragraph lets the reader wonder how exactly this can be accomplished.  If there was such an appendix, you could say there 'see lines such-and-such of the appendix'. You could also replace some code snippets with such references then.

> > 
> > Oops,  the code after the line 'Last, we add a method that returns the characteristic of the field.'
> > inherits from `UniqueRepresentation`. But it was easy to overlook, as my previous comment shows :)

> 
> But I *explicitly* state in the text
> 
> ```
> You are encouraged to make your parent â€œuniqueâ€. Thatâ€™s to say, parents should only evaluate equal if they are identical. Sage provides frameworks to create unique parents. We use here the most easy one: Inheriting from the class sage.structure.unique_representation.UniqueRepresentation is enough. Making parents unique can be quite important for an efficient implementation, because the repeated creation of â€œthe sameâ€ parent would take a lot of time.
> ```
> 
> Do you really think this is not enough?
> 


The confusion comes from the fact that you explain the code **before** showing the code (or at least saying that it is coming). There is also an inconsistency in the exposition, as you have the line 

```
sage: from sage.rings.ring import Field
```
but no similar line for `UniqueRepresentation`. I guess I might have waited for `sage.structure.unique_representation` to show up in the code, but it didn't.
Call me dyslexic :-). 
  

> > Also, it's hard to see  how  `MyFrac` and  `MyElement` fit together without a complete listing...

> 
> OK. The didactic approach is to develop the example step by step. But I think having the complete code in the appendix would be nice. Is there an automated way to typeset the code with linenumbers?


After some trial and error upon reading [Sphinx manual](http://sphinx-doc.org/markup/code.htm), 
I found that the following will work with sphinx in Sage:

```
.. highlight:: python
   :linenothreshold: 2

::

   x = 2
   y = [1,2]
   x = y

.. highlight:: python
   :linenothreshold: 22222

```
the 1st `highlight::` turns on line numberings for fragments with 2 or more lines, and the 2nd `highlight::` effectively turns it off.



---

archive/issue_comments_118756.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [dimpase](#comment%3A41):\n> > Do you really think this is not enough?\n> > \n\n> \n> The confusion comes from the fact that you explain the code **before** showing the code (or at least saying that it is coming).\n\n\nOK, then it is similar to pure maths: First show the theorem and then the proof. Actually, I tend to present a chain of thoughts that eventually constitutes the proof of a theorem that is only formulated *after* the proof. I'll try to change that.\n\n> There is also an inconsistency in the exposition, as you have the line \n> \n> ```\n> sage: from sage.rings.ring import Field\n> ```\n> but no similar line for `UniqueRepresentation`.\n\n\nI explicitly imported Field, because this is what one needs to do when writing a module. So, I agree I should do the same with `UniqueRepresentation`.\n\n> After some trial and error upon reading [Sphinx manual](http://sphinx-doc.org/markup/code.htm), \n> I found that the following will work with sphinx in Sage:\n> \n> ```\n> .. highlight:: python\n>    :linenothreshold: 2\n> \n> ::\n> \n>    x = 2\n>    y = [1,2]\n>    x = y\n> \n> .. highlight:: python\n>    :linenothreshold: 22222\n> \n> ```\n> the 1st `highlight::` turns on line numberings for fragments with 2 or more lines, and the 2nd `highlight::` effectively turns it off.\n\n\nCool, thank you!",
    "created_at": "2013-02-13T13:58:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118756",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:42'></a>
Replying to [dimpase](#comment%3A41):
> > Do you really think this is not enough?
> > 

> 
> The confusion comes from the fact that you explain the code **before** showing the code (or at least saying that it is coming).


OK, then it is similar to pure maths: First show the theorem and then the proof. Actually, I tend to present a chain of thoughts that eventually constitutes the proof of a theorem that is only formulated *after* the proof. I'll try to change that.

> There is also an inconsistency in the exposition, as you have the line 
> 
> ```
> sage: from sage.rings.ring import Field
> ```
> but no similar line for `UniqueRepresentation`.


I explicitly imported Field, because this is what one needs to do when writing a module. So, I agree I should do the same with `UniqueRepresentation`.

> After some trial and error upon reading [Sphinx manual](http://sphinx-doc.org/markup/code.htm), 
> I found that the following will work with sphinx in Sage:
> 
> ```
> .. highlight:: python
>    :linenothreshold: 2
> 
> ::
> 
>    x = 2
>    y = [1,2]
>    x = y
> 
> .. highlight:: python
>    :linenothreshold: 22222
> 
> ```
> the 1st `highlight::` turns on line numberings for fragments with 2 or more lines, and the 2nd `highlight::` effectively turns it off.


Cool, thank you!



---

archive/issue_comments_118757.json:
```json
{
    "body": "<a id='comment:43'></a>\nThe tutorial is updated. It now contains the code twice: In small pieces in the text, and in one chunk, in the appendix.\n\n`sage -t` passes on the .rst file. When I put the code from the appendix into a .py file and load it into a Sage session, I can do:\n\n```\nsage: %runfile /home/simon/SAGE/work/categories/tutorial.py\nsage: Q = MyFrac(ZZ['x'], category=QuotientFieldsWithTest())\nsage: TestSuite(Q).run()\n```",
    "created_at": "2013-02-13T20:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118757",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:43'></a>
The tutorial is updated. It now contains the code twice: In small pieces in the text, and in one chunk, in the appendix.

`sage -t` passes on the .rst file. When I put the code from the appendix into a .py file and load it into a Sage session, I can do:

```
sage: %runfile /home/simon/SAGE/work/categories/tutorial.py
sage: Q = MyFrac(ZZ['x'], category=QuotientFieldsWithTest())
sage: TestSuite(Q).run()
```



---

archive/issue_comments_118758.json:
```json
{
    "body": "<a id='comment:44'></a>\nBy the way, it is a bit ironical:\n\n```\nsage: Q.gen()\nTraceback (most recent call last):\n...\nRuntimeError: NewFrac(Univariate Polynomial Ring in x over Integer Ring) still using old coercion framework\n```\n\nI think that this error is totally misleading. Clearly, the new coercion model is used, is it not?\n\nThe test against the old coercion model simply asks whether `P._element_constructor` is not None: \n\n```\ncdef inline check_old_coerce(parent.Parent p):\n    if p._element_constructor is not None:\n        raise RuntimeError, \"%s still using old coercion framework\" % p\n```\n\nSince `P._element_constructor` now seems to coincide with `P._element_constructor_`, this test is simply wrong. Similarly:\n\n```\nsage: def check_old_coerce(p):\n....:     if p._element_constructor is not None:\n....:         raise RuntimeError, \"%s still using old coercion framework\" % p\n....:     \nsage: check_old_coerce(QQ[['x']])\nTraceback (most recent call last):\n...\nRuntimeError: Power Series Ring in x over Rational Field still using old coercion framework\nsage: check_old_coerce(SymmetricFunctionAlgebra(QQ))\nTraceback (most recent call last)\n...\nRuntimeError: Symmetric Functions over Rational Field in the Schur basis still using old coercion framework\n```\n\nI think it is time to remove this test. But not on this ticket, of course.",
    "created_at": "2013-02-13T20:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118758",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:44'></a>
By the way, it is a bit ironical:

```
sage: Q.gen()
Traceback (most recent call last):
...
RuntimeError: NewFrac(Univariate Polynomial Ring in x over Integer Ring) still using old coercion framework
```

I think that this error is totally misleading. Clearly, the new coercion model is used, is it not?

The test against the old coercion model simply asks whether `P._element_constructor` is not None: 

```
cdef inline check_old_coerce(parent.Parent p):
    if p._element_constructor is not None:
        raise RuntimeError, "%s still using old coercion framework" % p
```

Since `P._element_constructor` now seems to coincide with `P._element_constructor_`, this test is simply wrong. Similarly:

```
sage: def check_old_coerce(p):
....:     if p._element_constructor is not None:
....:         raise RuntimeError, "%s still using old coercion framework" % p
....:     
sage: check_old_coerce(QQ[['x']])
Traceback (most recent call last):
...
RuntimeError: Power Series Ring in x over Rational Field still using old coercion framework
sage: check_old_coerce(SymmetricFunctionAlgebra(QQ))
Traceback (most recent call last)
...
RuntimeError: Symmetric Functions over Rational Field in the Schur basis still using old coercion framework
```

I think it is time to remove this test. But not on this ticket, of course.



---

archive/issue_comments_118759.json:
```json
{
    "body": "<a id='comment:45'></a>\nI just fixed some typos.",
    "created_at": "2013-02-13T22:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118759",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:45'></a>
I just fixed some typos.



---

archive/issue_comments_118760.json:
```json
{
    "body": "<a id='comment:46'></a>\nPlease remove unneeded \"===========================\" which turn Appendix into a separate document:\n(that's certainly not what we want, right?)\n\n```\n--- a/doc/en/thematic_tutorials/coercion_and_categories.rst\n+++ b/doc/en/thematic_tutorials/coercion_and_categories.rst\n@@ -1681,7 +1681,7 @@\n \n .. end of output\n \n-===========================\n+\n Appendix: The complete code\n ===========================\n \n```",
    "created_at": "2013-02-14T05:09:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118760",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'></a>
Please remove unneeded "===========================" which turn Appendix into a separate document:
(that's certainly not what we want, right?)

```
--- a/doc/en/thematic_tutorials/coercion_and_categories.rst
+++ b/doc/en/thematic_tutorials/coercion_and_categories.rst
@@ -1681,7 +1681,7 @@
 
 .. end of output
 
-===========================
+
 Appendix: The complete code
 ===========================
 
```



---

archive/issue_comments_118761.json:
```json
{
    "body": "<a id='comment:47'></a>\nCould you also add the following little patch:\n\n```\n--- a/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst\n+++ b/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst\n@@ -1,7 +1,7 @@\n .. _tutorial-objects-and-classes:\n \n ================================================\n-Tutorial: Objects and Classes in Python and Sage\n+Objects and Classes in Python and Sage\n ================================================\n \n .. MODULEAUTHOR:: Florent Hivert <florent.hivert@univ-rouen.fr>\n```\n this fixes the awkwardly standing out  \"Tutorial:\" in `tutorial-objects-and-classes.rst` and in `doc/output/html/en/thematic_tutorials/index.html`",
    "created_at": "2013-02-14T05:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118761",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'></a>
Could you also add the following little patch:

```
--- a/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst
+++ b/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst
@@ -1,7 +1,7 @@
 .. _tutorial-objects-and-classes:
 
 ================================================
-Tutorial: Objects and Classes in Python and Sage
+Objects and Classes in Python and Sage
 ================================================
 
 .. MODULEAUTHOR:: Florent Hivert <florent.hivert@univ-rouen.fr>
```
 this fixes the awkwardly standing out  "Tutorial:" in `tutorial-objects-and-classes.rst` and in `doc/output/html/en/thematic_tutorials/index.html`



---

archive/attachments_015148.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac11490-coercion_tutorial.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11490/trac11490-coercion_tutorial.patch",
    "created_at": "2013-02-14T06:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/simon-king-jena"
}
```



---

archive/issue_comments_118762.json:
```json
{
    "body": "Add a thematic tutorial on categories and coercion",
    "created_at": "2013-02-14T06:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118762",
    "user": "https://github.com/simon-king-jena"
}
```

Add a thematic tutorial on categories and coercion



---

archive/issue_comments_118763.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [dimpase](#comment%3A47):\n> Could you also add the following little patch:\n> ...\n>  this fixes the awkwardly standing out  \"Tutorial:\" in `tutorial-objects-and-classes.rst` and in `doc/output/html/en/thematic_tutorials/index.html`\n\n\nI hope Florent doesn't mind...\n\nAnyway, I have updated both tutorials, turning the appendix into a section. I also used the occasion to provide my tutorial with a sub-title (since I just learnt how to do those things in sphinx:)",
    "created_at": "2013-02-14T06:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118763",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:48'></a>
Replying to [dimpase](#comment%3A47):
> Could you also add the following little patch:
> ...
>  this fixes the awkwardly standing out  "Tutorial:" in `tutorial-objects-and-classes.rst` and in `doc/output/html/en/thematic_tutorials/index.html`


I hope Florent doesn't mind...

Anyway, I have updated both tutorials, turning the appendix into a section. I also used the occasion to provide my tutorial with a sub-title (since I just learnt how to do those things in sphinx:)



---

archive/issue_comments_118764.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [SimonKing](#comment%3A44):\n> By the way, it is a bit ironical:\n> \n> ```\n> sage: Q.gen()\n> Traceback (most recent call last):\n> ...\n> RuntimeError: NewFrac(Univariate Polynomial Ring in x over Integer Ring) still using old coercion framework\n> ```\n> \n> I think that this error is totally misleading. Clearly, the new coercion model is used, is it not?\n> \n\nDoes this mean that one has to change some code here to take care of Volker's remark on [sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/64533) ?",
    "created_at": "2013-02-14T13:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118764",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>
Replying to [SimonKing](#comment%3A44):
> By the way, it is a bit ironical:
> 
> ```
> sage: Q.gen()
> Traceback (most recent call last):
> ...
> RuntimeError: NewFrac(Univariate Polynomial Ring in x over Integer Ring) still using old coercion framework
> ```
> 
> I think that this error is totally misleading. Clearly, the new coercion model is used, is it not?
> 

Does this mean that one has to change some code here to take care of Volker's remark on [sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/64533) ?



---

archive/issue_comments_118765.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [dimpase](#comment%3A49):\n> > I think that this error is totally misleading. Clearly, the new coercion model is used, is it not?\n> > \n\n> Does this mean that one has to change some code here to take care of Volker's remark on [sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/64533) ?\n\nI just see that I forgot to answer.\n\nNo, I believe using sage.rings.ring.Ring and friends as base classes is correct. If one wants to use generators (which I don't, in this tutorial), then one must implement it. Namely, the gen() method inherited from `ParentWithGens` belongs to the old coercion model.\n\nSo, no need to change the code here! Still needs review.",
    "created_at": "2013-02-19T18:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118765",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:50'></a>
Replying to [dimpase](#comment%3A49):
> > I think that this error is totally misleading. Clearly, the new coercion model is used, is it not?
> > 

> Does this mean that one has to change some code here to take care of Volker's remark on [sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/64533) ?

I just see that I forgot to answer.

No, I believe using sage.rings.ring.Ring and friends as base classes is correct. If one wants to use generators (which I don't, in this tutorial), then one must implement it. Namely, the gen() method inherited from `ParentWithGens` belongs to the old coercion model.

So, no need to change the code here! Still needs review.



---

archive/issue_events_090738.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2013-02-20T05:23:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90738"
}
```



---

archive/issue_events_090739.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2013-02-20T05:23:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90739"
}
```



---

archive/issue_comments_118766.json:
```json
{
    "body": "<a id='comment:51'></a>\nOK, looks good enough.",
    "created_at": "2013-02-20T05:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118766",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:51'></a>
OK, looks good enough.



---

archive/issue_events_090740.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-20T07:32:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "milestone": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90740"
}
```



---

archive/issue_events_090741.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-20T07:32:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90741"
}
```



---

archive/issue_comments_118767.json:
```json
{
    "body": "**Merged:** sage-5.8.beta1",
    "created_at": "2013-02-22T19:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118767",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.8.beta1



---

archive/issue_events_090742.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-22T19:10:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90742"
}
```



---

archive/issue_events_090743.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-22T19:10:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11490#event-90743"
}
```



---

archive/issue_comments_118768.json:
```json
{
    "body": "**Changing reviewer** from \"Vincent Delecroix, Travis Scrimshaw\" to \"Vincent Delecroix, Travis Scrimshaw, Dmitrii Pasechnik\".",
    "created_at": "2013-02-22T20:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11490#issuecomment-118768",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "Vincent Delecroix, Travis Scrimshaw" to "Vincent Delecroix, Travis Scrimshaw, Dmitrii Pasechnik".
