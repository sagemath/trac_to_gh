# Issue 11028: More Modular ComplexPlot

archive/issues_010932.json:
```json
{
    "assignees": [],
    "body": "I modified ComplexPlot to be more flexible and modular. The `__init__` method now takes rgb_data instead of z_values as input. This permits users to decide how they want to represent their complex data. Adjustments have been made to both RiemannMap.plot_colored and complex_plot.\n\nI also removed the now-redundant ColorPlot from riemann.pyx.\n\n---\nApply [and [attachment:trac_11028-reviewer.patch](https://github.com/sagemath/sage/files/ticket11028/a140df3560a09bc14246708c14725fa6.patch](https://github.com/sagemath/sage/files/ticket11028/04ceb450acdd3d4f176268056e4c87fb.patch)).\n\n**Assignee:** @jasongrout, @williamstein\n\n**CC:**  @kcrisman @robertwb\n\n**Keywords:** complex plot riemann map\n\n**Reviewer:** Karl-Dieter Crisman\n\n**Author:** Ethan Van Andel\n\n**Merged:** sage-5.1.beta2\n\nIssue created by migration from https://trac.sagemath.org/ticket/11028\n\n",
    "closed_at": "2012-06-02T12:09:52Z",
    "created_at": "2011-03-25T16:25:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graphics",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "More Modular ComplexPlot",
    "type": "issue",
    "updated_at": "2012-06-02T12:09:52Z",
    "url": "https://github.com/sagemath/sage/issues/11028",
    "user": "https://github.com/sagetrac-evanandel"
}
```
I modified ComplexPlot to be more flexible and modular. The `__init__` method now takes rgb_data instead of z_values as input. This permits users to decide how they want to represent their complex data. Adjustments have been made to both RiemannMap.plot_colored and complex_plot.

I also removed the now-redundant ColorPlot from riemann.pyx.

---
Apply [and [attachment:trac_11028-reviewer.patch](https://github.com/sagemath/sage/files/ticket11028/a140df3560a09bc14246708c14725fa6.patch](https://github.com/sagemath/sage/files/ticket11028/04ceb450acdd3d4f176268056e4c87fb.patch)).

**Assignee:** @jasongrout, @williamstein

**CC:**  @kcrisman @robertwb

**Keywords:** complex plot riemann map

**Reviewer:** Karl-Dieter Crisman

**Author:** Ethan Van Andel

**Merged:** sage-5.1.beta2

Issue created by migration from https://trac.sagemath.org/ticket/11028





---

archive/issue_events_123295.json:
```json
{
    "actor": "https://github.com/sagetrac-evanandel",
    "created_at": "2011-03-25T16:25:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "milestone_number": null,
    "milestone_title": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123295"
}
```



---

archive/issue_events_123296.json:
```json
{
    "actor": "https://github.com/sagetrac-evanandel",
    "created_at": "2011-03-25T16:25:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graphics",
    "label_color": "08517b",
    "label_name": "component: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123296"
}
```



---

archive/issue_events_123297.json:
```json
{
    "actor": "https://github.com/sagetrac-evanandel",
    "created_at": "2011-03-25T16:25:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123297"
}
```



---

archive/issue_events_123298.json:
```json
{
    "actor": "https://github.com/sagetrac-evanandel",
    "created_at": "2011-03-25T16:25:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123298"
}
```



---

archive/issue_events_123299.json:
```json
{
    "actor": "https://github.com/sagetrac-evanandel",
    "created_at": "2011-03-25T16:26:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123299"
}
```



---

archive/issue_comments_110928.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nIt seems like this has a slight redundancy with the (positively reviewed) #10821.  In fact, it looks like whatever this is based on has some, but not all, of the changes there, and the other changes are in this patch.   ?? Anyway, the specific order and so forth of dependencies should be completely clarified.\n\nThe patch is also apparently a double patch.  Read it and you'll see what I mean.  Which situation with regard to the not being able to test cdef'd functions is current?  (Sometimes we create a def'd `test_my_cdef_function` for these cases.)\n\nWill we need to introduce a deprecation period for the change to initializing with `complex_to_rgb(z_values)`, since the keyword has changed?\n\nAlso, what is the situation with the `complex_to_rgb` functions?  By that I mean to ask how many of them there are, and why there is a separate one in riemann.pyx.",
    "created_at": "2011-04-25T15:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110928",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'>**Comment 2:**</a>
It seems like this has a slight redundancy with the (positively reviewed) #10821.  In fact, it looks like whatever this is based on has some, but not all, of the changes there, and the other changes are in this patch.   ?? Anyway, the specific order and so forth of dependencies should be completely clarified.

The patch is also apparently a double patch.  Read it and you'll see what I mean.  Which situation with regard to the not being able to test cdef'd functions is current?  (Sometimes we create a def'd `test_my_cdef_function` for these cases.)

Will we need to introduce a deprecation period for the change to initializing with `complex_to_rgb(z_values)`, since the keyword has changed?

Also, what is the situation with the `complex_to_rgb` functions?  By that I mean to ask how many of them there are, and why there is a separate one in riemann.pyx.



---

archive/issue_events_123300.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-04-25T15:35:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123300"
}
```



---

archive/issue_events_123301.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-04-25T15:35:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123301"
}
```



---

archive/issue_comments_110929.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nWith respect to #10945, please also make sure that the (better) docs you had for ColorPlot are transferred to ComplexPlot; we definitely wouldn't want to lose them!\n\nTo be more precise about `complex_to_rgb`, there should probably only be one of them, it should probably be in the complex plot place as importing it once (or cimporting?) shouldn't cause any noticeable slowdown (though you may want to check that), and there is no reason *not* to use the efficiencies you have introduced in that final version :)",
    "created_at": "2011-04-25T15:45:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110929",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'>**Comment 3:**</a>
With respect to #10945, please also make sure that the (better) docs you had for ColorPlot are transferred to ComplexPlot; we definitely wouldn't want to lose them!

To be more precise about `complex_to_rgb`, there should probably only be one of them, it should probably be in the complex plot place as importing it once (or cimporting?) shouldn't cause any noticeable slowdown (though you may want to check that), and there is no reason *not* to use the efficiencies you have introduced in that final version :)



---

archive/issue_comments_110930.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nYou're absolutely right about the patch issues. I'm not sure how it got doubled... The top half, with the actual test cases is more current, those methods should be testing properly. Also, the redundant changes seem to be a slightly older version of my error handling, I'm not sure why they're in this one. I'm going to try and fix up the patch manually.\n\nWith regards to complex_to_rgb, there are two versions because Riemann assigns colors slightly differently than complex_plot. Thus the methods really are intentionally somewhat different. Also, I don't think we need a deprecation period for the complex_to_rgb or ComplexPlot calls. That seems to a fairly specific internal method for complex_plot. I have a hard time imagining someone else using that stuff without going through complex_plot() which has been changed appropriately.\n\nThat said, I don't know what the official policy is on such matters. Robert Bradshaw could probably give a better answer as to whether the changes will break anything.\n\nFinally, I'm not sure what you mean by the better docs for ColorPlot. What specifically are you referring to?",
    "created_at": "2011-04-25T16:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110930",
    "user": "https://github.com/sagetrac-evanandel"
}
```

<a id='comment:4'>**Comment 4:**</a>
You're absolutely right about the patch issues. I'm not sure how it got doubled... The top half, with the actual test cases is more current, those methods should be testing properly. Also, the redundant changes seem to be a slightly older version of my error handling, I'm not sure why they're in this one. I'm going to try and fix up the patch manually.

With regards to complex_to_rgb, there are two versions because Riemann assigns colors slightly differently than complex_plot. Thus the methods really are intentionally somewhat different. Also, I don't think we need a deprecation period for the complex_to_rgb or ComplexPlot calls. That seems to a fairly specific internal method for complex_plot. I have a hard time imagining someone else using that stuff without going through complex_plot() which has been changed appropriately.

That said, I don't know what the official policy is on such matters. Robert Bradshaw could probably give a better answer as to whether the changes will break anything.

Finally, I'm not sure what you mean by the better docs for ColorPlot. What specifically are you referring to?



---

archive/issue_comments_110931.json:
```json
{
    "body": "**Reviewer:** Karl-Dieter Crisman",
    "created_at": "2011-04-25T17:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110931",
    "user": "https://github.com/kcrisman"
}
```

**Reviewer:** Karl-Dieter Crisman



---

archive/issue_comments_110932.json:
```json
{
    "body": "**Changing author** from \"evanandel\" to \"Ethan Van Andel\".",
    "created_at": "2011-04-25T17:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110932",
    "user": "https://github.com/kcrisman"
}
```

**Changing author** from "evanandel" to "Ethan Van Andel".



---

archive/issue_comments_110933.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n> That said, I don't know what the official policy is on such matters. Robert Bradshaw could probably give a better answer as to whether the changes will break anything.\n\nIt really is on a case-by-case basis with 'internal' things that users aren't supposed to see.  Might be worth asking Robert and Jason, I agree.\n> Finally, I'm not sure what you mean by the better docs for ColorPlot. What specifically are you referring to?\n\nHmm, I just seem to remember that you had added some detail for ColorPlot that wasn't in the ComplexPlot documentation.  If they are identical, then I must have been wrong.  If not, might as well add it, since it helps!  Or helped me.",
    "created_at": "2011-04-25T17:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110933",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'>**Comment 5:**</a>
> That said, I don't know what the official policy is on such matters. Robert Bradshaw could probably give a better answer as to whether the changes will break anything.

It really is on a case-by-case basis with 'internal' things that users aren't supposed to see.  Might be worth asking Robert and Jason, I agree.
> Finally, I'm not sure what you mean by the better docs for ColorPlot. What specifically are you referring to?

Hmm, I just seem to remember that you had added some detail for ColorPlot that wasn't in the ComplexPlot documentation.  If they are identical, then I must have been wrong.  If not, might as well add it, since it helps!  Or helped me.



---

archive/issue_comments_110934.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nOK, I uploaded a new patch that takes care of the double patch and redundancy and also adds a tiny bit to the ComplexPlot documentation (that will probably never be seen) let me know if there are any other stupid mistakes I made.\n\nOnce we get the go ahead from Robert Bradshaw this can be changed to needs_review. I'll email him if he doesn't see this in a couple of days.",
    "created_at": "2011-04-26T17:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110934",
    "user": "https://github.com/sagetrac-evanandel"
}
```

<a id='comment:6'>**Comment 6:**</a>
OK, I uploaded a new patch that takes care of the double patch and redundancy and also adds a tiny bit to the ComplexPlot documentation (that will probably never be seen) let me know if there are any other stupid mistakes I made.

Once we get the go ahead from Robert Bradshaw this can be changed to needs_review. I'll email him if he doesn't see this in a couple of days.



---

archive/issue_events_123302.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-06-08T22:21:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123302"
}
```



---

archive/issue_events_123303.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-06-08T22:21:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123303"
}
```



---

archive/issue_comments_110935.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nPutting as 'needs review' since this probably isn't a big deal, you are right.  Still, in general internal functions should start with an underscore or something.  And who knows?  \n\nThis *could* be used in the future...  see for instance [this stackoverflow question](http://stackoverflow.com/questions/2566811/encode-complex-number-as-rgb-pixel-and-back), where they say \"I've never come across any ready-made solution to your problem.\"  Here it is!",
    "created_at": "2011-06-08T22:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110935",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'>**Comment 7:**</a>
Putting as 'needs review' since this probably isn't a big deal, you are right.  Still, in general internal functions should start with an underscore or something.  And who knows?  

This *could* be used in the future...  see for instance [this stackoverflow question](http://stackoverflow.com/questions/2566811/encode-complex-number-as-rgb-pixel-and-back), where they say "I've never come across any ready-made solution to your problem."  Here it is!



---

archive/issue_comments_110936.json:
```json
{
    "body": "**Description changed:**\n``````diff\n\n``````\n",
    "created_at": "2011-06-09T01:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110936",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff

``````




---

archive/issue_comments_110937.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nApply only [attachment:trac-11028-modular-complex-plot.2.2.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.2.patch).",
    "created_at": "2011-06-09T02:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110937",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'>**Comment 9:**</a>
Apply only [attachment:trac-11028-modular-complex-plot.2.2.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.2.patch).



---

archive/issue_comments_110938.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,3 +2,5 @@\n \n I also removed the now-redundant ColorPlot from riemann.pyx.\n \n+---\n+Apply only [attachment:trac-11028-modular-complex-plot.2.2.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.2.patch).\n``````\n",
    "created_at": "2011-06-09T02:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110938",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,3 +2,5 @@
 
 I also removed the now-redundant ColorPlot from riemann.pyx.
 
+---
+Apply only [attachment:trac-11028-modular-complex-plot.2.2.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.2.patch).
``````




---

archive/issue_events_123304.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-06-09T02:54:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123304"
}
```



---

archive/issue_events_123305.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-06-09T02:54:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123305"
}
```



---

archive/issue_comments_110939.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nA few thoughts:\n* In the first example you move up your definition of `f` and `fprime`.  But then you define them again.  The definitions of `f` and `fprime` in the second example can probably be omitted, right?\n* Good catch on the `hf`s that should have been `fprime`s.\n* I think that the change to ComplexPlot is a good one, except it is now no longer a complex plot!  Now it really is a 'color plot', by initialization!  So it allows users how to decide how to represent their data, as you say - but complex or otherwise.  Maybe you should make the ColorPlot the main method, and then let a ComplexPlot be the initialization of this with zvalues instead of the color array.\n* I understand the two different `mag_to_lightness` functions.  I still don't understand the difference between the two `complex_to_rgb` functions.  What is it?\n\nSo 'needs info', at least.  These are all meta-issues in some way.  The details seem fine!  (Haven't actually applied or run tests, as I'm currently doing so with a different big job - but I have few doubts on that score.)\n\n\n---\nBy the way, give my best to Mike Bolt.  He told me he worked with a student in [this paper in Involve](http://pjm.math.berkeley.edu/involve/2010/3-4/p05.xhtml), and I knew you were at Calvin, but somehow I didn't put it all together!",
    "created_at": "2011-06-09T02:54:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110939",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'>**Comment 10:**</a>
A few thoughts:
* In the first example you move up your definition of `f` and `fprime`.  But then you define them again.  The definitions of `f` and `fprime` in the second example can probably be omitted, right?
* Good catch on the `hf`s that should have been `fprime`s.
* I think that the change to ComplexPlot is a good one, except it is now no longer a complex plot!  Now it really is a 'color plot', by initialization!  So it allows users how to decide how to represent their data, as you say - but complex or otherwise.  Maybe you should make the ColorPlot the main method, and then let a ComplexPlot be the initialization of this with zvalues instead of the color array.
* I understand the two different `mag_to_lightness` functions.  I still don't understand the difference between the two `complex_to_rgb` functions.  What is it?

So 'needs info', at least.  These are all meta-issues in some way.  The details seem fine!  (Haven't actually applied or run tests, as I'm currently doing so with a different big job - but I have few doubts on that score.)


---
By the way, give my best to Mike Bolt.  He told me he worked with a student in [this paper in Involve](http://pjm.math.berkeley.edu/involve/2010/3-4/p05.xhtml), and I knew you were at Calvin, but somehow I didn't put it all together!



---

archive/issue_comments_110940.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\n* Those redefinitions could be omitted, but I generally think that it makes it more readable for each example section to define its functions unless it's very time or space consuming. If that violates a sage convention though, it can certainly be changed.\n  * It may make more sense to put ColorPlot as the main method. If that is the case, however, then it seems like color plot should be given its own module (it certainly doesn't belong in complex_plot) and then perhaps complex_plot() should move elsewhere since it's not apparent that it needs a whole module for just a couple functions. If that is the case though, that seems like a refactoring decision that is above my (hypothetical) pay grade. If it turns out to be complicated, it might be better just to let this patch go through and deal with that question separately.\n  * I think the only difference between the two complex_to_rgb functions is that each one uses a different mag_to_lightness function. I couldn't figure out a better way to avoid code re-use since it's reasonable to expect other methods that access ColorPlot to define complex_to_rgb methods that differ in more than just mag_to_lightness, or for the existing methods to be modified later without wishing to affect the other.\n\nThose are my thoughts on the issues raised. Does that clear things up?",
    "created_at": "2011-07-20T15:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110940",
    "user": "https://github.com/sagetrac-evanandel"
}
```

<a id='comment:11'>**Comment 11:**</a>
* Those redefinitions could be omitted, but I generally think that it makes it more readable for each example section to define its functions unless it's very time or space consuming. If that violates a sage convention though, it can certainly be changed.
  * It may make more sense to put ColorPlot as the main method. If that is the case, however, then it seems like color plot should be given its own module (it certainly doesn't belong in complex_plot) and then perhaps complex_plot() should move elsewhere since it's not apparent that it needs a whole module for just a couple functions. If that is the case though, that seems like a refactoring decision that is above my (hypothetical) pay grade. If it turns out to be complicated, it might be better just to let this patch go through and deal with that question separately.
  * I think the only difference between the two complex_to_rgb functions is that each one uses a different mag_to_lightness function. I couldn't figure out a better way to avoid code re-use since it's reasonable to expect other methods that access ColorPlot to define complex_to_rgb methods that differ in more than just mag_to_lightness, or for the existing methods to be modified later without wishing to affect the other.

Those are my thoughts on the issues raised. Does that clear things up?



---

archive/issue_events_123306.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-08-18T14:40:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123306"
}
```



---

archive/issue_events_123307.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-08-18T14:40:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123307"
}
```



---

archive/issue_comments_110941.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nReplying to [evanandel](#comment%3A11):\n> * Those redefinitions could be omitted, but I generally think that it makes it more readable for each example section to define its functions unless it's very time or space consuming. If that violates a sage convention though, it can certainly be changed.\n\nOk.\n> * It may make more sense to put ColorPlot as the main method. If that is the case, however, then it seems like color plot should be given its own module (it certainly doesn't belong in complex_plot) and then perhaps complex_plot() should move elsewhere since it's not apparent that it needs a whole module for just a couple functions. If that is the case though, that seems like a refactoring decision that is above my (hypothetical) pay grade. If it turns out to be complicated, it might be better just to let this patch go through and deal with that question separately.\n\nWell, that's true.\n> * I think the only difference between the two complex_to_rgb functions is that each one uses a different mag_to_lightness function. I couldn't figure out a better way to avoid code re-use since it's reasonable to expect other methods that access ColorPlot to define complex_to_rgb methods that differ in more than just mag_to_lightness, or for the existing methods to be modified later without wishing to affect the other.\n\nOk, I guess my usual plan is to push refactoring to later, too :)\n> Those are my thoughts on the issues raised. Does that clear things up?\n\nYes.\n\nSo I'll try to review this, and then finish #11273.",
    "created_at": "2011-08-18T14:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110941",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'>**Comment 12:**</a>
Replying to [evanandel](#comment%3A11):
> * Those redefinitions could be omitted, but I generally think that it makes it more readable for each example section to define its functions unless it's very time or space consuming. If that violates a sage convention though, it can certainly be changed.

Ok.
> * It may make more sense to put ColorPlot as the main method. If that is the case, however, then it seems like color plot should be given its own module (it certainly doesn't belong in complex_plot) and then perhaps complex_plot() should move elsewhere since it's not apparent that it needs a whole module for just a couple functions. If that is the case though, that seems like a refactoring decision that is above my (hypothetical) pay grade. If it turns out to be complicated, it might be better just to let this patch go through and deal with that question separately.

Well, that's true.
> * I think the only difference between the two complex_to_rgb functions is that each one uses a different mag_to_lightness function. I couldn't figure out a better way to avoid code re-use since it's reasonable to expect other methods that access ColorPlot to define complex_to_rgb methods that differ in more than just mag_to_lightness, or for the existing methods to be modified later without wishing to affect the other.

Ok, I guess my usual plan is to push refactoring to later, too :)
> Those are my thoughts on the issues raised. Does that clear things up?

Yes.

So I'll try to review this, and then finish #11273.



---

archive/issue_comments_110942.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nAt SD35.5, we found out that tests don't pass for some reason dealing with `complex_to_rgb` **and** the very first example formats weirdly now.  Maybe that's my fault from when I rebased this?",
    "created_at": "2012-01-09T17:09:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110942",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'>**Comment 13:**</a>
At SD35.5, we found out that tests don't pass for some reason dealing with `complex_to_rgb` **and** the very first example formats weirdly now.  Maybe that's my fault from when I rebased this?



---

archive/issue_comments_110943.json:
```json
{
    "body": "**Attachment:** [trac-11028-modular-complex-plot.2.3.patch.gz](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.3.patch.gz)\n\nFixed the test failures",
    "created_at": "2012-01-13T00:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110943",
    "user": "https://github.com/sagetrac-evanandel"
}
```

**Attachment:** [trac-11028-modular-complex-plot.2.3.patch.gz](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.3.patch.gz)

Fixed the test failures



---

archive/issue_comments_110944.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n I also removed the now-redundant ColorPlot from riemann.pyx.\n \n ---\n-Apply only [attachment:trac-11028-modular-complex-plot.2.2.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.2.patch).\n+Apply only [attachment:trac-11028-modular-complex-plot.2.3.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.3.patch).\n``````\n",
    "created_at": "2012-01-13T00:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110944",
    "user": "https://github.com/sagetrac-evanandel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 I also removed the now-redundant ColorPlot from riemann.pyx.
 
 ---
-Apply only [attachment:trac-11028-modular-complex-plot.2.2.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.2.patch).
+Apply only [attachment:trac-11028-modular-complex-plot.2.3.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.3.patch).
``````




---

archive/issue_comments_110945.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nIt turns out those test failures were because riemann's complex_to_rgb is cdefed and therefore not importable for outside modules. I fixed that changing it to a cpdef. \n\nI'm not sure if I just didn't catch those failures before, or if something changed to make it a problem. Regardless, it should work now.",
    "created_at": "2012-01-13T00:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110945",
    "user": "https://github.com/sagetrac-evanandel"
}
```

<a id='comment:14'>**Comment 14:**</a>
It turns out those test failures were because riemann's complex_to_rgb is cdefed and therefore not importable for outside modules. I fixed that changing it to a cpdef. 

I'm not sure if I just didn't catch those failures before, or if something changed to make it a problem. Regardless, it should work now.



---

archive/issue_comments_110946.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nI've changed a few documentation things that weren't quite right, and added a doctest and explanation since you now only use Numpy arrays in this particular `complex_to_rgb` - which is fine, but then we need to tell people.\n\nApply trac-11028-modular-complex-plot.2.3.patch and trac_11028-reviewer.patch",
    "created_at": "2012-05-25T16:53:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110946",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'>**Comment 15:**</a>
I've changed a few documentation things that weren't quite right, and added a doctest and explanation since you now only use Numpy arrays in this particular `complex_to_rgb` - which is fine, but then we need to tell people.

Apply trac-11028-modular-complex-plot.2.3.patch and trac_11028-reviewer.patch



---

archive/issue_comments_110947.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n I also removed the now-redundant ColorPlot from riemann.pyx.\n \n ---\n-Apply only [attachment:trac-11028-modular-complex-plot.2.3.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.3.patch).\n+Apply [and [attachment:trac_11028-reviewer.patch](https://github.com/sagemath/sage/files/ticket11028/a140df3560a09bc14246708c14725fa6.patch](https://github.com/sagemath/sage/files/ticket11028/04ceb450acdd3d4f176268056e4c87fb.patch)).\n``````\n",
    "created_at": "2012-05-25T16:53:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110947",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 I also removed the now-redundant ColorPlot from riemann.pyx.
 
 ---
-Apply only [attachment:trac-11028-modular-complex-plot.2.3.patch](https://github.com/sagemath/sage/files/ticket11028/trac-11028-modular-complex-plot.2.3.patch).
+Apply [and [attachment:trac_11028-reviewer.patch](https://github.com/sagemath/sage/files/ticket11028/a140df3560a09bc14246708c14725fa6.patch](https://github.com/sagemath/sage/files/ticket11028/04ceb450acdd3d4f176268056e4c87fb.patch)).
``````




---

archive/issue_comments_110948.json:
```json
{
    "body": "**Attachment:** [trac_11028-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket11028/trac_11028-reviewer.patch.gz)",
    "created_at": "2012-05-25T16:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110948",
    "user": "https://github.com/kcrisman"
}
```

**Attachment:** [trac_11028-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket11028/trac_11028-reviewer.patch.gz)



---

archive/issue_comments_110949.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nSorry for the very long wait, Ethan - nice stuff came out of this.  Positive review, with the reviewer patch.\n\nNow I can finally do #11273, assuming I can make my way around the code.  I was just noting that the multiply-connected spiderweb didn't look right - and there it is!",
    "created_at": "2012-05-25T16:57:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110949",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'>**Comment 16:**</a>
Sorry for the very long wait, Ethan - nice stuff came out of this.  Positive review, with the reviewer patch.

Now I can finally do #11273, assuming I can make my way around the code.  I was just noting that the multiply-connected spiderweb didn't look right - and there it is!



---

archive/issue_events_123308.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-05-25T16:57:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123308"
}
```



---

archive/issue_events_123309.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-05-25T16:57:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123309"
}
```



---

archive/issue_comments_110950.json:
```json
{
    "body": "**Merged:** sage-5.1.beta2",
    "created_at": "2012-06-02T12:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11028#issuecomment-110950",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.1.beta2



---

archive/issue_events_123310.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T12:09:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123310"
}
```



---

archive/issue_events_123311.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T12:09:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11028",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11028#event-123311"
}
```
