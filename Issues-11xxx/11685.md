# Issue 11685: Pari finite field extension: element created by list not recognised as zero

archive/issues_011513.json:
```json
{
    "assignees": [
        "https://github.com/aghitza"
    ],
    "body": "In sage-4.7.1:\n\n```\nsage: K.<a> = GF(3^11)\nsage: K([])\n0\nsage: K([]) == 0\nFalse\n```\n\n---\n\nApply\n1. [attachment: 11685_against_4.7.2.alpha1.patch](https://github.com/sagemath/sage/files/ticket11685/11685_against_4.7.2.alpha1.patch.gz)\n2. [attachment: 11685_referee.patch](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)\nto the Sage library.\n\n\nKeywords: **finite fields, pari**\n\nComponent: **algebra**\n\nAuthor: **Johan Bosman, Jeroen Demeyer**\n\nReviewer: **Simon King, Johan Bosman, Peter Bruin**\n\nMerged: **sage-4.7.2.alpha3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11685_\n\n",
    "closed_at": "2011-09-17T05:04:55Z",
    "created_at": "2011-08-12T23:02:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Pari finite field extension: element created by list not recognised as zero",
    "type": "issue",
    "updated_at": "2011-09-17T05:04:55Z",
    "url": "https://github.com/sagemath/sage/issues/11685",
    "user": "https://github.com/sagetrac-johanbosman"
}
```
In sage-4.7.1:

```
sage: K.<a> = GF(3^11)
sage: K([])
0
sage: K([]) == 0
False
```

---

Apply
1. [attachment: 11685_against_4.7.2.alpha1.patch](https://github.com/sagemath/sage/files/ticket11685/11685_against_4.7.2.alpha1.patch.gz)
2. [attachment: 11685_referee.patch](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)
to the Sage library.


Keywords: **finite fields, pari**

Component: **algebra**

Author: **Johan Bosman, Jeroen Demeyer**

Reviewer: **Simon King, Johan Bosman, Peter Bruin**

Merged: **sage-4.7.2.alpha3**

_Issue created by migration from https://trac.sagemath.org/ticket/11685_





---

archive/issue_events_155193.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-12T23:02:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155193"
}
```



---

archive/issue_events_155194.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-12T23:02:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155194"
}
```



---

archive/issue_events_155195.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-12T23:02:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155195"
}
```



---

archive/issue_events_155196.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-12T23:02:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155196"
}
```



---

archive/issue_events_155197.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2011-08-12T23:02:00Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "subject": "https://github.com/sagetrac-johanbosman",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155197"
}
```



---

archive/issue_events_155198.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-12T23:03:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "title_is": "Pari finite field extension: element created by list not recognised as zero",
    "title_was": "Pari finite field extension created by list not recognised as zero",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155198"
}
```



---

archive/issue_comments_120741.json:
```json
{
    "body": "Changed keywords from **finite fields** to **finite fields, pari**",
    "created_at": "2011-08-13T10:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120741",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

Changed keywords from **finite fields** to **finite fields, pari**



---

archive/issue_comments_120742.json:
```json
{
    "body": "Attachment: **[trac_11685_pari_zero_list.patch.gz](https://github.com/sagemath/sage/files/ticket11685/trac_11685_pari_zero_list.patch.gz)**",
    "created_at": "2011-08-13T12:28:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120742",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

Attachment: **[trac_11685_pari_zero_list.patch.gz](https://github.com/sagemath/sage/files/ticket11685/trac_11685_pari_zero_list.patch.gz)**



---

archive/issue_events_155199.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-13T12:29:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155199"
}
```



---

archive/issue_comments_120743.json:
```json
{
    "body": "Author: **Johan Bosman**",
    "created_at": "2011-08-13T12:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120743",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

Author: **Johan Bosman**



---

archive/issue_events_155200.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-14T13:51:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155200"
}
```



---

archive/issue_events_155201.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-14T13:51:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155201"
}
```



---

archive/issue_comments_120744.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nLooking at the value of the attribute `__value`, I can confirm that there has been a bug, and I can confirm that your patch fixes it. The fix is tested, and the long doctests of both devel/sage-main/doc and devel/sage-main/sage pass.\n\nHence, I give it a positive review.",
    "created_at": "2011-08-14T13:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120744",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

Looking at the value of the attribute `__value`, I can confirm that there has been a bug, and I can confirm that your patch fixes it. The fix is tested, and the long doctests of both devel/sage-main/doc and devel/sage-main/sage pass.

Hence, I give it a positive review.



---

archive/issue_comments_120745.json:
```json
{
    "body": "Reviewer: **Simon King**",
    "created_at": "2011-08-14T13:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120745",
    "user": "https://github.com/simon-king-jena"
}
```

Reviewer: **Simon King**



---

archive/issue_events_155202.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T12:30:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155202"
}
```



---

archive/issue_events_155203.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T12:30:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155203"
}
```



---

archive/issue_comments_120746.json:
```json
{
    "body": "Changed author from **Johan Bosman** to **Johan Bosman, Jeroen Demeyer**",
    "created_at": "2011-08-16T12:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120746",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Johan Bosman** to **Johan Bosman, Jeroen Demeyer**



---

archive/issue_comments_120747.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI add an alternative patch which IMHO fixes the problem in a better way, adds more tests and simplifies some other code regarding zero elements.",
    "created_at": "2011-08-16T12:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120747",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

I add an alternative patch which IMHO fixes the problem in a better way, adds more tests and simplifies some other code regarding zero elements.



---

archive/issue_events_155204.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T12:30:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155204"
}
```



---

archive/issue_events_155205.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T12:30:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155205"
}
```



---

archive/issue_events_155206.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-16T13:09:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155206"
}
```



---

archive/issue_events_155207.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-16T13:09:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155207"
}
```



---

archive/issue_comments_120748.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThere are doctests that fail: \n\n```\nsage -t  1.rc1/devel/sage-main/sage/rings/polynomial/polynomial_zz_pex.pyx # 9 doctests failed\n```",
    "created_at": "2011-08-16T13:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120748",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:7" align="right">comment:7</div>

There are doctests that fail: 

```
sage -t  1.rc1/devel/sage-main/sage/rings/polynomial/polynomial_zz_pex.pyx # 9 doctests failed
```



---

archive/issue_comments_120749.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@sagetrac-johanbosman](#comment%3A7):\n> There are doctests that fail: \n> \n> ```\n> sage -t  1.rc1/devel/sage-main/sage/rings/polynomial/polynomial_zz_pex.pyx # 9 doctests failed\n> ```\n\nIn combination with the fixes in #11684, that is.",
    "created_at": "2011-08-16T13:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120749",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@sagetrac-johanbosman](#comment%3A7):
> There are doctests that fail: 
> 
> ```
> sage -t  1.rc1/devel/sage-main/sage/rings/polynomial/polynomial_zz_pex.pyx # 9 doctests failed
> ```

In combination with the fixes in #11684, that is.



---

archive/issue_comments_120750.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,4 @@\n sage: K([0]) == 0\n False\n ```\n+\n``````\n",
    "created_at": "2011-08-16T13:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120750",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,4 @@
 sage: K([0]) == 0
 False
 ```
+
``````




---

archive/issue_comments_120751.json:
```json
{
    "body": "Changed reviewer from **Simon King** to **Simon King, Johan Bosman**",
    "created_at": "2011-08-16T13:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120751",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

Changed reviewer from **Simon King** to **Simon King, Johan Bosman**



---

archive/issue_comments_120752.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@sagetrac-johanbosman](#comment%3A8):\n> \n> In combination with the fixes in #11684, that is.\n\nIf it is only in combination with #11684, then please test whether the problem persists if only the patch from here is applied.",
    "created_at": "2011-08-16T14:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120752",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@sagetrac-johanbosman](#comment%3A8):
> 
> In combination with the fixes in #11684, that is.

If it is only in combination with #11684, then please test whether the problem persists if only the patch from here is applied.



---

archive/issue_comments_120753.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@sagetrac-johanbosman](#comment%3A8):\n> Replying to [@sagetrac-johanbosman](#comment%3A7):\n> > There are doctests that fail: \n> > \n> > ```\n> > sage -t  1.rc1/devel/sage-main/sage/rings/polynomial/polynomial_zz_pex.pyx # 9 doctests failed\n> > ```\n\n> In combination with the fixes in #11684, that is.\n\nAgreed.  The problem here is the empty list `[]`.  I did not realize this was a legal argument to the constructor.",
    "created_at": "2011-08-16T14:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120753",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@sagetrac-johanbosman](#comment%3A8):
> Replying to [@sagetrac-johanbosman](#comment%3A7):
> > There are doctests that fail: 
> > 
> > ```
> > sage -t  1.rc1/devel/sage-main/sage/rings/polynomial/polynomial_zz_pex.pyx # 9 doctests failed
> > ```

> In combination with the fixes in #11684, that is.

Agreed.  The problem here is the empty list `[]`.  I did not realize this was a legal argument to the constructor.



---

archive/issue_events_155208.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T15:03:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155208"
}
```



---

archive/issue_events_155209.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T15:03:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155209"
}
```



---

archive/issue_comments_120754.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-In sage-4.7.1.rc1:\n+In sage-4.7.1:\n \n ```\n sage: K.<a> = GF(3^11)\n-sage: K([0])\n+sage: K([])\n 0\n-sage: K([0]) == 0\n+sage: K([]) == 0\n False\n ```\n \n``````\n",
    "created_at": "2011-08-16T15:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120754",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-In sage-4.7.1.rc1:
+In sage-4.7.1:
 
 ```
 sage: K.<a> = GF(3^11)
-sage: K([0])
+sage: K([])
 0
-sage: K([0]) == 0
+sage: K([]) == 0
 False
 ```
 
``````




---

archive/issue_comments_120755.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nWith [attachment: trac_11685_pari_zero_list.patch](https://github.com/sagemath/sage/files/ticket11685/trac_11685_pari_zero_list.patch.gz), we have (correctly)\n\n```\nsage: K.<a>=GF(next_prime(2**60)**3)\nsage: b = K([0])\nsage: K([b._FiniteField_ext_pariElement__value])._FiniteField_ext_pariElement__value\nMod(Mod(0, 1152921504606847009), Mod(1, 1152921504606847009)*a^3 + Mod(1132330333307175281, 1152921504606847009)*a^2 + Mod(564283687250211459, 1152921504606847009)*a + Mod(455334297379199858, 1152921504606847009))\n```\n\nWith [attachment: 11685.patch](https://github.com/sagemath/sage/files/ticket11685/11685.patch.gz), that example fails as follows:\n\n```\nsage: K.<a>=GF(next_prime(2**60)**3)                                            \nsage: b = K([0])\nsage: K([b._FiniteField_ext_pariElement__value])._FiniteField_ext_pariElement__value  \nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (1140, 0))\n\n---------------------------------------------------------------------------\nPariError                                 Traceback (most recent call last)\n...\nPariError: incorrect type (11)\n```\n\nI think it *should* be possible to use the value of a pari element for the creation of a pari element. Hence, either we use the first patch, or the second patch needs work.\n\nPerhaps, one could merge the two patches and use Johan's algorithm together with Jeroen's examples?",
    "created_at": "2011-08-16T15:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120755",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:14" align="right">comment:14</div>

With [attachment: trac_11685_pari_zero_list.patch](https://github.com/sagemath/sage/files/ticket11685/trac_11685_pari_zero_list.patch.gz), we have (correctly)

```
sage: K.<a>=GF(next_prime(2**60)**3)
sage: b = K([0])
sage: K([b._FiniteField_ext_pariElement__value])._FiniteField_ext_pariElement__value
Mod(Mod(0, 1152921504606847009), Mod(1, 1152921504606847009)*a^3 + Mod(1132330333307175281, 1152921504606847009)*a^2 + Mod(564283687250211459, 1152921504606847009)*a + Mod(455334297379199858, 1152921504606847009))
```

With [attachment: 11685.patch](https://github.com/sagemath/sage/files/ticket11685/11685.patch.gz), that example fails as follows:

```
sage: K.<a>=GF(next_prime(2**60)**3)                                            
sage: b = K([0])
sage: K([b._FiniteField_ext_pariElement__value])._FiniteField_ext_pariElement__value  
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (1140, 0))

---------------------------------------------------------------------------
PariError                                 Traceback (most recent call last)
...
PariError: incorrect type (11)
```

I think it *should* be possible to use the value of a pari element for the creation of a pari element. Hence, either we use the first patch, or the second patch needs work.

Perhaps, one could merge the two patches and use Johan's algorithm together with Jeroen's examples?



---

archive/issue_events_155210.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-16T15:31:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155210"
}
```



---

archive/issue_events_155211.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-16T15:31:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155211"
}
```



---

archive/issue_events_155212.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T15:51:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155212"
}
```



---

archive/issue_events_155213.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T15:51:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155213"
}
```



---

archive/issue_comments_120756.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nNew code, new tests to implement Simon King's suggestion.",
    "created_at": "2011-08-16T15:51:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120756",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

New code, new tests to implement Simon King's suggestion.



---

archive/issue_events_155214.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-16T16:13:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155214"
}
```



---

archive/issue_events_155215.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-16T16:13:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155215"
}
```



---

archive/issue_comments_120757.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe error has changed, but there's still an error:\n\n```\nsage: K.<a>=GF(next_prime(2**60)**3)                                            \nsage: b = K([0])\nsage: K([b._FiniteField_ext_pariElement__value])._FiniteField_ext_pariElement__value\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (1140, 0))\n\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: unable to coerce\n```\n\n*If* we want to make that kind of conversion work (perhaps Johan can express his point of view?) then something needs to be done.",
    "created_at": "2011-08-16T16:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120757",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:17" align="right">comment:17</div>

The error has changed, but there's still an error:

```
sage: K.<a>=GF(next_prime(2**60)**3)                                            
sage: b = K([0])
sage: K([b._FiniteField_ext_pariElement__value])._FiniteField_ext_pariElement__value
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (1140, 0))

---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: unable to coerce
```

*If* we want to make that kind of conversion work (perhaps Johan can express his point of view?) then something needs to be done.



---

archive/issue_comments_120758.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAlso, we should keep speed in mind.  I've done some timings:\n\nWith my patch:\n\n```\nsage: K.<a> = GF(3^11)\nsage: timeit('K([])')\n625 loops, best of 3: 38.7 \u00b5s per loop\n```\n\nWith Jeroen's current patch:\n\n```\nsage: K.<a> = GF(3^11)\nsage: timeit('K([])')\n625 loops, best of 3: 153 \u00b5s per loop\n```",
    "created_at": "2011-08-16T16:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120758",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:18" align="right">comment:18</div>

Also, we should keep speed in mind.  I've done some timings:

With my patch:

```
sage: K.<a> = GF(3^11)
sage: timeit('K([])')
625 loops, best of 3: 38.7 µs per loop
```

With Jeroen's current patch:

```
sage: K.<a> = GF(3^11)
sage: timeit('K([])')
625 loops, best of 3: 153 µs per loop
```



---

archive/issue_comments_120759.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@simon-king-jena](#comment%3A17):\n> The error has changed, but there's still an error:\n> \n> ```\n> sage: K.<a>=GF(next_prime(2**60)**3)                                            \n> sage: b = K([0])\n> sage: K([b._FiniteField_ext_pariElement__value])._FiniteField_ext_pariElement__value\n> ERROR: An unexpected error occurred while tokenizing input\n> The following traceback may be corrupted or invalid\n> The error message is: ('EOF in multi-line statement', (1140, 0))\n> \n> ---------------------------------------------------------------------------\n> TypeError                                 Traceback (most recent call last)\n> ...\n> TypeError: unable to coerce\n> ```\n> \n> *If* we want to make that kind of conversion work (perhaps Johan can express his point of view?) then something needs to be done.\n\nYes, I certainly think it is a good idea to have such a conversion work.",
    "created_at": "2011-08-16T16:34:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120759",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@simon-king-jena](#comment%3A17):
> The error has changed, but there's still an error:
> 
> ```
> sage: K.<a>=GF(next_prime(2**60)**3)                                            
> sage: b = K([0])
> sage: K([b._FiniteField_ext_pariElement__value])._FiniteField_ext_pariElement__value
> ERROR: An unexpected error occurred while tokenizing input
> The following traceback may be corrupted or invalid
> The error message is: ('EOF in multi-line statement', (1140, 0))
> 
> ---------------------------------------------------------------------------
> TypeError                                 Traceback (most recent call last)
> ...
> TypeError: unable to coerce
> ```
> 
> *If* we want to make that kind of conversion work (perhaps Johan can express his point of view?) then something needs to be done.

Yes, I certainly think it is a good idea to have such a conversion work.



---

archive/issue_events_155216.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-16T16:35:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155216"
}
```



---

archive/issue_events_155217.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-16T16:35:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155217"
}
```



---

archive/issue_comments_120760.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIf both the stability and the timings speak for the first patch, then I'd say y'all should merge your two patches into one. I do believe that the doc tests from the second patch are more thorough, and it would also be nice to include the corner cases that came up in the discussion.",
    "created_at": "2011-08-16T16:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120760",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:20" align="right">comment:20</div>

If both the stability and the timings speak for the first patch, then I'd say y'all should merge your two patches into one. I do believe that the doc tests from the second patch are more thorough, and it would also be nice to include the corner cases that came up in the discussion.



---

archive/issue_events_155218.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-16T16:35:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155218"
}
```



---

archive/issue_events_155219.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-16T16:35:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155219"
}
```



---

archive/issue_comments_120761.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@simon-king-jena](#comment%3A20):\n> If both the stability and the timings speak for the first patch, then I'd say y'all should merge your two patches into one.\n\nI think that the fact that your example works for the first patch is an unintentional side-effect and not really an intended feature.  I believe my code is much more clear and simple.\n\nI believe that I am fixing much more than what the ticket requires, but I will fix my patch anyway.",
    "created_at": "2011-08-16T16:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120761",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@simon-king-jena](#comment%3A20):
> If both the stability and the timings speak for the first patch, then I'd say y'all should merge your two patches into one.

I think that the fact that your example works for the first patch is an unintentional side-effect and not really an intended feature.  I believe my code is much more clear and simple.

I believe that I am fixing much more than what the ticket requires, but I will fix my patch anyway.



---

archive/issue_comments_120762.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jdemeyer](#comment%3A22):\n> I think that the fact that your example works for the first patch is an unintentional side-effect and not really an intended feature. \n\nIntended or not doesn't matter. It is a feature, I think.\n\n> I believe that I am fixing much more than what the ticket requires, ...\n\nIndeed it does, namely:\n\n```\nsage: k.<x> = GF(3^11)\nsage: k([ k(0),k(1) ]) \nx \nsage: k([0,1/2]) \n2 \nsage: R.<y> = PolynomialRing(k) \nsage: k([ R(0),R(1) ]) \nx\n```\n\nIt a strength of your patch that the examples above work (they wouldn't, with the other patch).\n\nDo you see a way to make *both* work?\n\nI wouldn't say that your patch is simpler, because you first convert into a list of prime field elements and then convert into pari; a double conversion, so it seems to me, tends to be fragile.\n\nI mean, the only problem with `k([k([0])._FiniteField_ext_pariElement__value])` in your patch is the fact that the pari value (which, after all, is zero) can not be converted into the zero of a finite field. There could be a work around, such as\n\n```\nvalue = [GFp(c) for c in value if c else GFp.zero_element()] \n```\n\nConcerning speed, one should test whether `k([])` is the only case in which your patch is slower. Since you have a special case for `k([])` anyway, it would be perfectly fine to have a short-cut, such as\n\n```\nif not value:  # or value==[], if that's faster\n    self.__value = (pari(0) * parent._pari_one()).Mod(parent._pari_modulus()) \n```",
    "created_at": "2011-08-16T17:52:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120762",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jdemeyer](#comment%3A22):
> I think that the fact that your example works for the first patch is an unintentional side-effect and not really an intended feature. 

Intended or not doesn't matter. It is a feature, I think.

> I believe that I am fixing much more than what the ticket requires, ...

Indeed it does, namely:

```
sage: k.<x> = GF(3^11)
sage: k([ k(0),k(1) ]) 
x 
sage: k([0,1/2]) 
2 
sage: R.<y> = PolynomialRing(k) 
sage: k([ R(0),R(1) ]) 
x
```

It a strength of your patch that the examples above work (they wouldn't, with the other patch).

Do you see a way to make *both* work?

I wouldn't say that your patch is simpler, because you first convert into a list of prime field elements and then convert into pari; a double conversion, so it seems to me, tends to be fragile.

I mean, the only problem with `k([k([0])._FiniteField_ext_pariElement__value])` in your patch is the fact that the pari value (which, after all, is zero) can not be converted into the zero of a finite field. There could be a work around, such as

```
value = [GFp(c) for c in value if c else GFp.zero_element()] 
```

Concerning speed, one should test whether `k([])` is the only case in which your patch is slower. Since you have a special case for `k([])` anyway, it would be perfectly fine to have a short-cut, such as

```
if not value:  # or value==[], if that's faster
    self.__value = (pari(0) * parent._pari_one()).Mod(parent._pari_modulus()) 
```



---

archive/issue_events_155220.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T18:15:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155220"
}
```



---

archive/issue_events_155221.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T18:15:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155221"
}
```



---

archive/issue_comments_120763.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@simon-king-jena](#comment%3A23):\n> I mean, the only problem with `k([k([0])._FiniteField_ext_pariElement__value])` in your patch is the fact that the pari value (which, after all, is zero) can not be converted into the zero of a finite field.\n\nThis is not true, because this problem is not specific to zero.  The problem really is that conversion of PARI finite field elements to `ZZ` fails.  I rewrote the PARI -> ZZ conversion to fix this (the old code used strings(!) for the conversion)",
    "created_at": "2011-08-16T18:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120763",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@simon-king-jena](#comment%3A23):
> I mean, the only problem with `k([k([0])._FiniteField_ext_pariElement__value])` in your patch is the fact that the pari value (which, after all, is zero) can not be converted into the zero of a finite field.

This is not true, because this problem is not specific to zero.  The problem really is that conversion of PARI finite field elements to `ZZ` fails.  I rewrote the PARI -> ZZ conversion to fix this (the old code used strings(!) for the conversion)



---

archive/issue_comments_120764.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@simon-king-jena](#comment%3A23):\n> I wouldn't say that your patch is simpler, because you first convert into a list of prime field elements and then convert into pari; a double conversion, so it seems to me, tends to be fragile.\n\nI would rather argue the opposite: I break the conversion down to two simpler independent steps.\n\nIt is probably true that my code is slower, but it all depends on what you want.  Pick two:\n- Fast code\n- Simple code\n- Code with many features",
    "created_at": "2011-08-16T18:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120764",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@simon-king-jena](#comment%3A23):
> I wouldn't say that your patch is simpler, because you first convert into a list of prime field elements and then convert into pari; a double conversion, so it seems to me, tends to be fragile.

I would rather argue the opposite: I break the conversion down to two simpler independent steps.

It is probably true that my code is slower, but it all depends on what you want.  Pick two:
- Fast code
- Simple code
- Code with many features



---

archive/issue_comments_120765.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nNote that most of the timing overhead in my latest patch is due to the creation of the `FiniteField` object.  Maybe we could add a `prime_field()` cached method and use that?",
    "created_at": "2011-08-16T18:38:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120765",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Note that most of the timing overhead in my latest patch is due to the creation of the `FiniteField` object.  Maybe we could add a `prime_field()` cached method and use that?



---

archive/issue_comments_120766.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nLet me add that I discovered this bug while working on #11684, which is a speed issue.  Normally I don't care so much about speed, but in this case things are really *far* too slow already; we should definitely not make them any slower, especially since this is not necessary.  Seemingly innocent computations in Sage are often dominated by enormous chains of type conversions rather than the actual computations they intend to be.\n\nIn conclusion: it may be a good idea to either use such a cached method or avoid creating FiniteFields at all. ;).",
    "created_at": "2011-08-16T19:00:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120766",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:27" align="right">comment:27</div>

Let me add that I discovered this bug while working on #11684, which is a speed issue.  Normally I don't care so much about speed, but in this case things are really *far* too slow already; we should definitely not make them any slower, especially since this is not necessary.  Seemingly innocent computations in Sage are often dominated by enormous chains of type conversions rather than the actual computations they intend to be.

In conclusion: it may be a good idea to either use such a cached method or avoid creating FiniteFields at all. ;).



---

archive/issue_events_155222.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-16T19:00:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155222"
}
```



---

archive/issue_events_155223.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-16T19:00:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155223"
}
```



---

archive/issue_comments_120767.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@jdemeyer](#comment%3A26):\n> Note that most of the timing overhead in my latest patch is due to the creation of the `FiniteField` object.  Maybe we could add a `prime_field()` cached method and use that?\n\nThere is a `prime_subfield()` method, and you are perfectly right that it ought to be a cached method. Hopefully someone finally manages to review #11115: It would make cached methods *very* fast.\n\n\"Breaking down into two simpler steps\" makes sense. But one should keep in mind that it will now be *two* steps that could break. And if you measure simplicity in lines of code: Both patches have six lines of code in the section we are now talking about (if I did not miscount).\n\nPerhaps we should clarify what we want to do with a list.\n\nLet K be a finite field that is not a prime field. To the very least, we want: If L is a list of elements of the prime subfield k of K then K(L) should first interprete L as the list of coefficients of a polynomial, and interprete the polynomial as an element of K.\n\nIdeally, we also want to allow in L objects that can be converted into k, even though their parent is not k in the first place. We seem to disagree on how that conversion is best done.\n\n 1) The first patch seems to argue that, ultimately, we want to put stuff into pari, and so we should start to put it into pari as soon as possible, and do all further conversions there: We can put a list of field elements into pari, and we can easily convert things like pari(K(0)) into an element of pari(k).\n\n 2) The second patch seems to argue that we are Sage programmers, and thus the conversion should follow Sage standards, not pari standards. Thus, k is a finite prime field in Sage, and we only accept things that can be converted into that prime field. Apparently, an element of pari(K) that happens to belong to pari(k) fails to convert into k, sadly.\n\nI think that both approaches are equally simple, and both approaches make sense.\n\nSo, I suggest to decide based on (a) speed and (b) generality. (b) could be problematic, since at the moment we have examples that only work with the first patch and examples that only work with the second patch.\n\nAccording to Johan, things are already quite slow, so, speed should really matter most.\n\nBy the way, I'd prefer fast code with many features, if I can pick only two out of three...",
    "created_at": "2011-08-16T19:22:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120767",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@jdemeyer](#comment%3A26):
> Note that most of the timing overhead in my latest patch is due to the creation of the `FiniteField` object.  Maybe we could add a `prime_field()` cached method and use that?

There is a `prime_subfield()` method, and you are perfectly right that it ought to be a cached method. Hopefully someone finally manages to review #11115: It would make cached methods *very* fast.

"Breaking down into two simpler steps" makes sense. But one should keep in mind that it will now be *two* steps that could break. And if you measure simplicity in lines of code: Both patches have six lines of code in the section we are now talking about (if I did not miscount).

Perhaps we should clarify what we want to do with a list.

Let K be a finite field that is not a prime field. To the very least, we want: If L is a list of elements of the prime subfield k of K then K(L) should first interprete L as the list of coefficients of a polynomial, and interprete the polynomial as an element of K.

Ideally, we also want to allow in L objects that can be converted into k, even though their parent is not k in the first place. We seem to disagree on how that conversion is best done.

 1) The first patch seems to argue that, ultimately, we want to put stuff into pari, and so we should start to put it into pari as soon as possible, and do all further conversions there: We can put a list of field elements into pari, and we can easily convert things like pari(K(0)) into an element of pari(k).

 2) The second patch seems to argue that we are Sage programmers, and thus the conversion should follow Sage standards, not pari standards. Thus, k is a finite prime field in Sage, and we only accept things that can be converted into that prime field. Apparently, an element of pari(K) that happens to belong to pari(k) fails to convert into k, sadly.

I think that both approaches are equally simple, and both approaches make sense.

So, I suggest to decide based on (a) speed and (b) generality. (b) could be problematic, since at the moment we have examples that only work with the first patch and examples that only work with the second patch.

According to Johan, things are already quite slow, so, speed should really matter most.

By the way, I'd prefer fast code with many features, if I can pick only two out of three...



---

archive/issue_events_155224.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-17T10:18:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155224"
}
```



---

archive/issue_events_155225.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-17T10:18:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155225"
}
```



---

archive/issue_comments_120768.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nNew patch uses PARI if possible with a generic fallback if PARI fails.  This should be quite fast and still work in general.",
    "created_at": "2011-08-17T10:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120768",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

New patch uses PARI if possible with a generic fallback if PARI fails.  This should be quite fast and still work in general.



---

archive/issue_comments_120769.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThe patch passes all long doctests, the speed is okay, and it works in combination with #11684.  Conclusion: positive review. :).",
    "created_at": "2011-08-17T12:08:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120769",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:30" align="right">comment:30</div>

The patch passes all long doctests, the speed is okay, and it works in combination with #11684.  Conclusion: positive review. :).



---

archive/issue_events_155226.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-17T12:08:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155226"
}
```



---

archive/issue_events_155227.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-17T12:08:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155227"
}
```



---

archive/issue_comments_120770.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI tend to a positive review as well.\n\nHowever, I have one question (thus \"needs info\"): Why did you remove the `if not check: ...` section? If one knows that the input is sane then it is very common to use `check=False` in order to save time.",
    "created_at": "2011-08-17T12:57:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120770",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:31" align="right">comment:31</div>

I tend to a positive review as well.

However, I have one question (thus "needs info"): Why did you remove the `if not check: ...` section? If one knows that the input is sane then it is very common to use `check=False` in order to save time.



---

archive/issue_events_155228.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-17T12:57:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155228"
}
```



---

archive/issue_events_155229.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-17T12:57:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155229"
}
```



---

archive/issue_comments_120771.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@simon-king-jena](#comment%3A31):\n> I tend to a positive review as well.\n> \n> However, I have one question (thus \"needs info\"): Why did you remove the `if not check: ...` section? If one knows that the input is sane then it is very common to use `check=False` in order to save time.\n\n1) That option and the code was completely undocumented and the purpose is not clear.\n\n2) The logic seems backward: executing more code when *not* checking?\n\n3) The ``check`` code changes the functionality of the function, which is usually not desired.  To me checking should be something read-only, checking for invalid input and throwing exceptions.  But not modifying the input.\n\n4) the ``check`` code is related to the handling of zero inputs which is anyway handled separately in the code below.",
    "created_at": "2011-08-17T13:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120771",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@simon-king-jena](#comment%3A31):
> I tend to a positive review as well.
> 
> However, I have one question (thus "needs info"): Why did you remove the `if not check: ...` section? If one knows that the input is sane then it is very common to use `check=False` in order to save time.

1) That option and the code was completely undocumented and the purpose is not clear.

2) The logic seems backward: executing more code when *not* checking?

3) The ``check`` code changes the functionality of the function, which is usually not desired.  To me checking should be something read-only, checking for invalid input and throwing exceptions.  But not modifying the input.

4) the ``check`` code is related to the handling of zero inputs which is anyway handled separately in the code below.



---

archive/issue_events_155230.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-17T13:05:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155230"
}
```



---

archive/issue_events_155231.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-17T13:05:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155231"
}
```



---

archive/issue_comments_120772.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nFirst of all, note that the option `check==False` is used, as you can see by studying the arithmetic operations on finite field elements. And it is clearly beneficial! For example:\n\nWithout patches, I get\n\n```\nsage: K.<a> = GF(5^9)\nsage: b = 4*a^7 + 2*a^5 + 4*a^4 + 4*a^3 + 3*a^2 + 3*a\nsage: %timeit b+3  # here, you will find that \"check=False\".\n625 loops, best of 3: 30.9 \u00b5s per loop\nsage: %timeit copy(b)\n625 loops, best of 3: 14.3 \u00b5s per loop\n```\nWith your patch, it takes 42 \u00b5s resp. 25.9 \u00b5s per loop.\n\n25-30% difference is relevant. Thus, I'd prefer to keep the \"check=False\" code.\n\nMoreover, I can still not understand your rationale for removing the code:\n\nReplying to [@jdemeyer](#comment%3A32):\n> 1) That option and the code was completely undocumented and the purpose is not clear.\n\nIf code is not documented then it should be documented, not removed.\n\nThe purpose is very clear: Provide better speed by avoiding any tests (or conversions, in this case). I think it is fairly common to have that option in Sage, of course for internal use only.\n\nThe price to pay for the speed is that one needs to provide very specific input: It must be pari.\n\n> 2) The logic seems backward: executing more code when *not* checking?\n\nYou can't be serious.\n\nIf one has `check=False` then one just has\n\n```\n        if not check:\n            if not value:  # see comment below about this workaround\n                self.__value = pari(0).Mod(parent._pari_modulus())*parent._pari_one()\n            else:\n                self.__value = value\n            return\n```\nand nothing more: Note the \"return\" in the last line.\n\n> 3) The ``check`` code changes the functionality of the function, which is usually not desired.\n\nIt is quite usual that the check option does change the behaviour of the function, in the sense that a very specific input is expected, and it is not tested whether the user really got it right.\n\nHere, check=False means that the input must be an element in the pari interface. Only since \"zero\" is a special case (see comments in the code), you have the test \"if not value\". As a side effect, the input `[]` or `None` or `False` would result in a zero element as well.\n\n>  To me checking should be something read-only, checking for invalid input and throwing exceptions.  But not modifying the input.\n\nSometimes you have two separate options `check` and `coerce`. Here, indeed, checking means that the input is also converted, when necessary. `convert_to_pari` might be a better name than `check`.\n\nBut since it is for internal use anyway, I see not much reason to change the name.\n\n> 4) the ``check`` code is related to the handling of zero inputs which is anyway handled separately in the code below.\n\nNo. The check code simply provides a short cut for pari input. Only since pari is inconsistent in the way how different types of zero are dealt with, a special case is needed.\n\nI suggest to use your patch without removing the `if check:` part. Can you please update it? And since the arguments of the `__init__` method are not documented at all, I suggest that I create a referee patch that fixes the documentation.",
    "created_at": "2011-08-17T14:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120772",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:33" align="right">comment:33</div>

First of all, note that the option `check==False` is used, as you can see by studying the arithmetic operations on finite field elements. And it is clearly beneficial! For example:

Without patches, I get

```
sage: K.<a> = GF(5^9)
sage: b = 4*a^7 + 2*a^5 + 4*a^4 + 4*a^3 + 3*a^2 + 3*a
sage: %timeit b+3  # here, you will find that "check=False".
625 loops, best of 3: 30.9 µs per loop
sage: %timeit copy(b)
625 loops, best of 3: 14.3 µs per loop
```
With your patch, it takes 42 µs resp. 25.9 µs per loop.

25-30% difference is relevant. Thus, I'd prefer to keep the "check=False" code.

Moreover, I can still not understand your rationale for removing the code:

Replying to [@jdemeyer](#comment%3A32):
> 1) That option and the code was completely undocumented and the purpose is not clear.

If code is not documented then it should be documented, not removed.

The purpose is very clear: Provide better speed by avoiding any tests (or conversions, in this case). I think it is fairly common to have that option in Sage, of course for internal use only.

The price to pay for the speed is that one needs to provide very specific input: It must be pari.

> 2) The logic seems backward: executing more code when *not* checking?

You can't be serious.

If one has `check=False` then one just has

```
        if not check:
            if not value:  # see comment below about this workaround
                self.__value = pari(0).Mod(parent._pari_modulus())*parent._pari_one()
            else:
                self.__value = value
            return
```
and nothing more: Note the "return" in the last line.

> 3) The ``check`` code changes the functionality of the function, which is usually not desired.

It is quite usual that the check option does change the behaviour of the function, in the sense that a very specific input is expected, and it is not tested whether the user really got it right.

Here, check=False means that the input must be an element in the pari interface. Only since "zero" is a special case (see comments in the code), you have the test "if not value". As a side effect, the input `[]` or `None` or `False` would result in a zero element as well.

>  To me checking should be something read-only, checking for invalid input and throwing exceptions.  But not modifying the input.

Sometimes you have two separate options `check` and `coerce`. Here, indeed, checking means that the input is also converted, when necessary. `convert_to_pari` might be a better name than `check`.

But since it is for internal use anyway, I see not much reason to change the name.

> 4) the ``check`` code is related to the handling of zero inputs which is anyway handled separately in the code below.

No. The check code simply provides a short cut for pari input. Only since pari is inconsistent in the way how different types of zero are dealt with, a special case is needed.

I suggest to use your patch without removing the `if check:` part. Can you please update it? And since the arguments of the `__init__` method are not documented at all, I suggest that I create a referee patch that fixes the documentation.



---

archive/issue_events_155232.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-17T14:20:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155232"
}
```



---

archive/issue_events_155233.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-17T14:20:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155233"
}
```



---

archive/issue_comments_120773.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nSimonKing: I agree with your comments, I somehow totally misread the ``check=False`` code.",
    "created_at": "2011-08-17T14:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120773",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

SimonKing: I agree with your comments, I somehow totally misread the ``check=False`` code.



---

archive/issue_comments_120774.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI see, so you change `check` into `value_from_pari`. So, I'll change my (not yet submitted) referee patch accordingly, and will run full doc tests. And then it'll hopefully be fine...",
    "created_at": "2011-08-17T15:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120774",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:35" align="right">comment:35</div>

I see, so you change `check` into `value_from_pari`. So, I'll change my (not yet submitted) referee patch accordingly, and will run full doc tests. And then it'll hopefully be fine...



---

archive/issue_events_155234.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-17T15:55:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155234"
}
```



---

archive/issue_events_155235.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-17T15:55:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155235"
}
```



---

archive/issue_comments_120775.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI see that you just do\n\n```\nif value_from_pari: \n    self.__value = value\n```\nwithout a special case for a vanishing value.\n\nI assume that the special case `if not value:` was there on purpose. Let's see what the tests say...",
    "created_at": "2011-08-17T16:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120775",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:36" align="right">comment:36</div>

I see that you just do

```
if value_from_pari: 
    self.__value = value
```
without a special case for a vanishing value.

I assume that the special case `if not value:` was there on purpose. Let's see what the tests say...



---

archive/issue_comments_120776.json:
```json
{
    "body": "Referee patch, adding documentation",
    "created_at": "2011-08-17T16:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120776",
    "user": "https://github.com/simon-king-jena"
}
```

Referee patch, adding documentation



---

archive/issue_comments_120777.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,7 @@\n False\n ```\n \n+Apply\n+\n+* [attachment: 11685.patch](https://github.com/sagemath/sage/files/ticket11685/11685.patch.gz)\n+* [attachment: 11685_referee.patch](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)\n``````\n",
    "created_at": "2011-08-17T16:53:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120777",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,7 @@
 False
 ```
 
+Apply
+
+* [attachment: 11685.patch](https://github.com/sagemath/sage/files/ticket11685/11685.patch.gz)
+* [attachment: 11685_referee.patch](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)
``````




---

archive/issue_comments_120778.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nAttachment: **[11685_referee.patch.gz](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)**\n\nThe tests pass, hence, it was not necessary to have a special case for zero if `value_from_pari==True`.\n\nI have attached a referee patch, that documents the arguments and adds a few examples. I hope my words are clear and concise enough, as the possible input can be very different.\n\nIf you think that my referee patch needs work, then feel free to complain.\n\nApply 11685.patch 11685_referee.patch",
    "created_at": "2011-08-17T16:53:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120778",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:37" align="right">comment:37</div>

Attachment: **[11685_referee.patch.gz](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)**

The tests pass, hence, it was not necessary to have a special case for zero if `value_from_pari==True`.

I have attached a referee patch, that documents the arguments and adds a few examples. I hope my words are clear and concise enough, as the possible input can be very different.

If you think that my referee patch needs work, then feel free to complain.

Apply 11685.patch 11685_referee.patch



---

archive/issue_events_155236.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-17T16:53:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155236"
}
```



---

archive/issue_events_155237.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-17T16:53:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155237"
}
```



---

archive/issue_comments_120779.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@simon-king-jena](#comment%3A36):\n> I assume that the special case `if not value:` was there on purpose. Let's see what the tests say...\n\nI guess the special case was needed precisely because of some earlier badly-initialized zero.  If we don't start with a bad zero, we cannot somehow end up with a bad zero (I hope).",
    "created_at": "2011-08-17T16:58:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120779",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@simon-king-jena](#comment%3A36):
> I assume that the special case `if not value:` was there on purpose. Let's see what the tests say...

I guess the special case was needed precisely because of some earlier badly-initialized zero.  If we don't start with a bad zero, we cannot somehow end up with a bad zero (I hope).



---

archive/issue_events_155238.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-22T16:04:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155238"
}
```



---

archive/issue_events_155239.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-22T16:04:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155239"
}
```



---

archive/issue_comments_120780.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI changed the patch by re-enabling the use of PARI's exponentiation.  There was a warning which does not apply any more.  The only change is in the `__pow__()` method, needs review.",
    "created_at": "2011-08-22T16:04:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120780",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

I changed the patch by re-enabling the use of PARI's exponentiation.  There was a warning which does not apply any more.  The only change is in the `__pow__()` method, needs review.



---

archive/issue_events_155240.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-22T16:04:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155240"
}
```



---

archive/issue_events_155241.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-22T16:04:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155241"
}
```



---

archive/issue_comments_120781.json:
```json
{
    "body": "Attachment: **[11685.patch.gz](https://github.com/sagemath/sage/files/ticket11685/11685.patch.gz)**\n\nNew alternative patch, rewrites PARI->Integer coercion, fast and many features",
    "created_at": "2011-08-22T16:08:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120781",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[11685.patch.gz](https://github.com/sagemath/sage/files/ticket11685/11685.patch.gz)**

New alternative patch, rewrites PARI->Integer coercion, fast and many features



---

archive/issue_comments_120782.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI do get some fuzz applying the patch to sage-4.6.2.alpha1:\n\n```\napplying 11685.patch\npatching file sage/rings/integer.pyx\nHunk #2 succeeded at 3081 with fuzz 2 (offset 2525 lines).\nHunk #4 succeeded at 610 with fuzz 2 (offset -24 lines).\nnow at: 11685.patch\n```\nHow bad is that?",
    "created_at": "2011-08-24T12:09:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120782",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:41" align="right">comment:41</div>

I do get some fuzz applying the patch to sage-4.6.2.alpha1:

```
applying 11685.patch
patching file sage/rings/integer.pyx
Hunk #2 succeeded at 3081 with fuzz 2 (offset 2525 lines).
Hunk #4 succeeded at 610 with fuzz 2 (offset -24 lines).
now at: 11685.patch
```
How bad is that?



---

archive/issue_events_155242.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-24T12:09:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155242"
}
```



---

archive/issue_events_155243.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-24T12:09:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155243"
}
```



---

archive/issue_comments_120783.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@sagetrac-johanbosman](#comment%3A41):\n> I do get some fuzz applying the patch to sage-4.6.2.alpha1:\n\nDo you mean \"sage-4.7.2.alpha1\" (not 4.6.2 but 4.7.2)?\n\n> Hunk #2 succeeded at 3081 with fuzz 2 (offset 2525 lines).\n> Hunk #4 succeeded at 610 with fuzz 2 (offset -24 lines).\n\nIf I remember correctly, fuzz 2 will not be accepted by the release manager, because it is not improbable that the patch was applied in the wrong location - in particular when the offset is a couple of thousand lines.",
    "created_at": "2011-08-24T12:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120783",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@sagetrac-johanbosman](#comment%3A41):
> I do get some fuzz applying the patch to sage-4.6.2.alpha1:

Do you mean "sage-4.7.2.alpha1" (not 4.6.2 but 4.7.2)?

> Hunk #2 succeeded at 3081 with fuzz 2 (offset 2525 lines).
> Hunk #4 succeeded at 610 with fuzz 2 (offset -24 lines).

If I remember correctly, fuzz 2 will not be accepted by the release manager, because it is not improbable that the patch was applied in the wrong location - in particular when the offset is a couple of thousand lines.



---

archive/issue_comments_120784.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n> Do you mean \"sage-4.7.2.alpha1\" (not 4.6.2 but 4.7.2)?\n\nYes, I meant that indeed. :).\n\n> \n> > Hunk #2 succeeded at 3081 with fuzz 2 (offset 2525 lines).\n> > Hunk #4 succeeded at 610 with fuzz 2 (offset -24 lines).\n\n> \n> If I remember correctly, fuzz 2 will not be accepted by the release manager, because it is not improbable that the patch was applied in the wrong location - in particular when the offset is a couple of thousand lines.\n\nOkay, so in that case it needs to be rebased.",
    "created_at": "2011-08-24T12:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120784",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:43" align="right">comment:43</div>

> Do you mean "sage-4.7.2.alpha1" (not 4.6.2 but 4.7.2)?

Yes, I meant that indeed. :).

> 
> > Hunk #2 succeeded at 3081 with fuzz 2 (offset 2525 lines).
> > Hunk #4 succeeded at 610 with fuzz 2 (offset -24 lines).

> 
> If I remember correctly, fuzz 2 will not be accepted by the release manager, because it is not improbable that the patch was applied in the wrong location - in particular when the offset is a couple of thousand lines.

Okay, so in that case it needs to be rebased.



---

archive/issue_events_155244.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-28T16:53:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155244"
}
```



---

archive/issue_events_155245.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-28T16:53:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155245"
}
```



---

archive/issue_comments_120785.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI've uploaded a rebased patch.  If someone can double-check it, then we can give this ticket a positive review again.",
    "created_at": "2011-08-28T16:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120785",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:44" align="right">comment:44</div>

I've uploaded a rebased patch.  If someone can double-check it, then we can give this ticket a positive review again.



---

archive/issue_comments_120786.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nnegative_review because the patch is applied in the wrong place (as was hinted in a comment above).",
    "created_at": "2011-08-28T21:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120786",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

negative_review because the patch is applied in the wrong place (as was hinted in a comment above).



---

archive/issue_events_155246.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-28T21:23:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155246"
}
```



---

archive/issue_events_155247.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-28T21:23:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155247"
}
```



---

archive/issue_comments_120787.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nWhat do you mean by \"applied in the wrong place\"?",
    "created_at": "2011-08-28T21:33:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120787",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:46" align="right">comment:46</div>

What do you mean by "applied in the wrong place"?



---

archive/issue_comments_120788.json:
```json
{
    "body": "11685.patch rebased against sage-4.7.2.alpha1",
    "created_at": "2011-08-31T12:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120788",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

11685.patch rebased against sage-4.7.2.alpha1



---

archive/issue_comments_120789.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nAttachment: **[11685_against_4.7.2.alpha1.patch.gz](https://github.com/sagemath/sage/files/ticket11685/11685_against_4.7.2.alpha1.patch.gz)**\n\nIt appears that I'm blind. :P.  Second try. ;).",
    "created_at": "2011-08-31T12:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120789",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:47" align="right">comment:47</div>

Attachment: **[11685_against_4.7.2.alpha1.patch.gz](https://github.com/sagemath/sage/files/ticket11685/11685_against_4.7.2.alpha1.patch.gz)**

It appears that I'm blind. :P.  Second try. ;).



---

archive/issue_events_155248.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-31T12:56:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155248"
}
```



---

archive/issue_events_155249.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-08-31T12:56:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155249"
}
```



---

archive/issue_comments_120790.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nWhat patches are to be applied? That's to say, shouldn't the ticket description be changed, so that 11685_against_4.7.2.alpha1.patch is applied instead of 11685.patch?",
    "created_at": "2011-09-08T15:00:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120790",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:48" align="right">comment:48</div>

What patches are to be applied? That's to say, shouldn't the ticket description be changed, so that 11685_against_4.7.2.alpha1.patch is applied instead of 11685.patch?



---

archive/issue_comments_120791.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@simon-king-jena](#comment%3A48):\n> What patches are to be applied? That's to say, shouldn't the ticket description be changed, so that 11685_against_4.7.2.alpha1.patch is applied instead of 11685.patch?\n\nThat depends on the release manager, I guess.  I do not really know which of those 2 patches should be in the description, i.e. either the patch that applies against the latest stable release or the patch that applies against the latest alpha release.  But in any case, 11685_against_4.7.2.alpha1.patch is most likely the one that is going to be applied.",
    "created_at": "2011-09-08T15:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120791",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@simon-king-jena](#comment%3A48):
> What patches are to be applied? That's to say, shouldn't the ticket description be changed, so that 11685_against_4.7.2.alpha1.patch is applied instead of 11685.patch?

That depends on the release manager, I guess.  I do not really know which of those 2 patches should be in the description, i.e. either the patch that applies against the latest stable release or the patch that applies against the latest alpha release.  But in any case, 11685_against_4.7.2.alpha1.patch is most likely the one that is going to be applied.



---

archive/issue_comments_120792.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,10 @@\n False\n ```\n \n+---\n+\n Apply\n+1. [attachment: 11685_against_4.7.2.alpha1.patch](https://github.com/sagemath/sage/files/ticket11685/11685_against_4.7.2.alpha1.patch.gz)\n+2. [attachment: 11685_referee.patch](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)\n+to the Sage library.\n \n-* [attachment: 11685.patch](https://github.com/sagemath/sage/files/ticket11685/11685.patch.gz)\n-* [attachment: 11685_referee.patch](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)\n``````\n",
    "created_at": "2011-09-12T11:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120792",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,10 @@
 False
 ```
 
+---
+
 Apply
+1. [attachment: 11685_against_4.7.2.alpha1.patch](https://github.com/sagemath/sage/files/ticket11685/11685_against_4.7.2.alpha1.patch.gz)
+2. [attachment: 11685_referee.patch](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)
+to the Sage library.
 
-* [attachment: 11685.patch](https://github.com/sagemath/sage/files/ticket11685/11685.patch.gz)
-* [attachment: 11685_referee.patch](https://github.com/sagemath/sage/files/ticket11685/11685_referee.patch.gz)
``````




---

archive/issue_comments_120793.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nLatest devel of course.",
    "created_at": "2011-09-12T11:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120793",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:50" align="right">comment:50</div>

Latest devel of course.



---

archive/issue_comments_120794.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nAnyone to review this? #11684 depends on it.",
    "created_at": "2011-09-12T11:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120794",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:51" align="right">comment:51</div>

Anyone to review this? #11684 depends on it.



---

archive/issue_comments_120795.json:
```json
{
    "body": "Changed reviewer from **Simon King, Johan Bosman** to **Simon King, Johan Bosman, Peter Bruin**",
    "created_at": "2011-09-13T09:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120795",
    "user": "https://github.com/pjbruin"
}
```

Changed reviewer from **Simon King, Johan Bosman** to **Simon King, Johan Bosman, Peter Bruin**



---

archive/issue_comments_120796.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI have read the patches, applied them, checked by hand whether it worked and tested the whole Sage installation.  Everything runs without problems in version 4.7.1.  I am now going to test it with 4.7.2.alpha1 before giving it a positive review.",
    "created_at": "2011-09-13T09:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120796",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:52" align="right">comment:52</div>

I have read the patches, applied them, checked by hand whether it worked and tested the whole Sage installation.  Everything runs without problems in version 4.7.1.  I am now going to test it with 4.7.2.alpha1 before giving it a positive review.



---

archive/issue_comments_120797.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@pjbruin](#comment%3A52):\n> I have read the patches, applied them, checked by hand whether it worked and tested the whole Sage installation.  Everything runs without problems in version 4.7.1.  I am now going to test it with 4.7.2.alpha1 before giving it a positive review.\n\nFYI: the patch against 4.7.2.alpha1 should also work against 4.7.2.alpha2, which is the most recent development version. ;)",
    "created_at": "2011-09-13T10:00:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120797",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@pjbruin](#comment%3A52):
> I have read the patches, applied them, checked by hand whether it worked and tested the whole Sage installation.  Everything runs without problems in version 4.7.1.  I am now going to test it with 4.7.2.alpha1 before giving it a positive review.

FYI: the patch against 4.7.2.alpha1 should also work against 4.7.2.alpha2, which is the most recent development version. ;)



---

archive/issue_comments_120798.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@sagetrac-johanbosman](#comment%3A53):\n> FYI: the patch against 4.7.2.alpha1 should also work against 4.7.2.alpha2, which is the most recent development version. ;)\n\nOK, I'm now testing it with 4.7.2.alpha2 instead.",
    "created_at": "2011-09-13T13:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120798",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@sagetrac-johanbosman](#comment%3A53):
> FYI: the patch against 4.7.2.alpha1 should also work against 4.7.2.alpha2, which is the most recent development version. ;)

OK, I'm now testing it with 4.7.2.alpha2 instead.



---

archive/issue_events_155250.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2011-09-14T09:32:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155250"
}
```



---

archive/issue_events_155251.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2011-09-14T09:32:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155251"
}
```



---

archive/issue_comments_120799.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nAll tests passed in 4.7.2.alpha2 as well, so I'm giving it a positive review.",
    "created_at": "2011-09-14T09:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120799",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:55" align="right">comment:55</div>

All tests passed in 4.7.2.alpha2 as well, so I'm giving it a positive review.



---

archive/issue_events_155252.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-17T05:04:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155252"
}
```



---

archive/issue_events_155253.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-17T05:04:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11685#event-155253"
}
```



---

archive/issue_comments_120800.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha3**",
    "created_at": "2011-09-17T05:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11685#issuecomment-120800",
    "user": "https://github.com/nexttime"
}
```

Merged: **sage-4.7.2.alpha3**
