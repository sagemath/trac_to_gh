# Issue 11784: Add more sanity checks to FiniteField constructor

archive/issues_011612.json:
```json
{
    "body": "Galois (i.e. finite) fields admits a modulus argument and by default it checks if the modulus is irreducible mod the characteristic of the field.\n\nHowever, it does not check that the polynomial is of the right degree.\n\nAn example:\n\n```\nsage: K=GF(3**2,name='a', modulus=QQ[x](x^3-x+1))\nsage: K\nFinite Field in a of size 3^2\nsage: K.list()\n[0, a + 1, 1, 2, 1, 2, 1, 2, 1]\nsage: K.modulus()\nx^2\n```\n\nAssignee: @lftabera\n\nKeywords: beginner GF\n\nResolution: fixed\n\nAuthor: Luis Felipe Tabera Alonso\n\nReviewer: Johan Bosman\n\nMerged: sage-4.8.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/11784\n\n",
    "closed_at": "2011-11-16T13:50:31Z",
    "created_at": "2011-09-08T15:20:37Z",
    "labels": [
        "component: basic arithmetic",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "Add more sanity checks to FiniteField constructor",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11784",
    "user": "https://github.com/lftabera"
}
```
Galois (i.e. finite) fields admits a modulus argument and by default it checks if the modulus is irreducible mod the characteristic of the field.

However, it does not check that the polynomial is of the right degree.

An example:

```
sage: K=GF(3**2,name='a', modulus=QQ[x](x^3-x+1))
sage: K
Finite Field in a of size 3^2
sage: K.list()
[0, a + 1, 1, 2, 1, 2, 1, 2, 1]
sage: K.modulus()
x^2
```

Assignee: @lftabera

Keywords: beginner GF

Resolution: fixed

Author: Luis Felipe Tabera Alonso

Reviewer: Johan Bosman

Merged: sage-4.8.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/11784





---

archive/issue_comments_138390.json:
```json
{
    "body": "<a id='comment:1'></a>I have decided that if check_irreducible = False, then the degree of the polynomial is not checked. It is assumed that check_irreducible is there for users that know what they are doing.",
    "created_at": "2011-09-20T13:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138390",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:1'></a>I have decided that if check_irreducible = False, then the degree of the polynomial is not checked. It is assumed that check_irreducible is there for users that know what they are doing.



---

archive/issue_comments_138391.json:
```json
{
    "body": "Changing assignee from @aghitza to @lftabera.",
    "created_at": "2011-09-20T13:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138391",
    "user": "https://github.com/lftabera"
}
```

Changing assignee from @aghitza to @lftabera.



---

archive/issue_comments_138392.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-09-20T13:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138392",
    "user": "https://github.com/lftabera"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_138393.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -10,11 +10,9 @@\n Finite Field in a of size 3^2\n sage: K.list()\n [0, a + 1, 1, 2, 1, 2, 1, 2, 1]\n+sage: K.modulus()\n+x^2\n \\`\\`\\`\n-\n-Assignee: @aghitza\n-\n-Keywords: begginer\n \n Comment: 1\n \n```\n",
    "created_at": "2011-11-10T16:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138393",
    "user": "https://github.com/lftabera"
}
```

Description changed:
```diff
--- 
+++ 
@@ -10,11 +10,9 @@
 Finite Field in a of size 3^2
 sage: K.list()
 [0, a + 1, 1, 2, 1, 2, 1, 2, 1]
+sage: K.modulus()
+x^2
 \`\`\`
-
-Assignee: @aghitza
-
-Keywords: begginer
 
 Comment: 1
 
```




---

archive/issue_comments_138394.json:
```json
{
    "body": "<a id='comment:3'></a>Rebase agains 4.7.2",
    "created_at": "2011-11-10T16:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138394",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:3'></a>Rebase agains 4.7.2



---

archive/issue_comments_138395.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-11-10T22:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138395",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_138396.json:
```json
{
    "body": "Changing keywords from \"begginer\" to \"beginner\".",
    "created_at": "2011-11-10T22:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138396",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing keywords from "begginer" to "beginner".



---

archive/issue_comments_138397.json:
```json
{
    "body": "<a id='comment:4'></a>It surprises me that Sage didn't check this, wow.\n\nAt a few points, your spacing in the docstring is not in compliance with the Python guideline (see http://www.python.org/dev/peps/pep-0008/).  In order to avoid messiness or sloppiness in the documentation, it would be good to correct this.\n\nFor instance:\n\n```\nirreducibility modulo p. Also, the modulus has to be of the right degree.\n```\nThe period should be followed by two spaces.\n\n```\nsage: L=GF(3**2,name='a', modulus=QQ[x](x-1), check_irreducible=False) \nsage: L.list() #random \n```\nIn the first line, there should be spaces between the = operator and a space after the first comma.  In the second line, put 2 spaces before # and 1 after #.\n\nIt would also be good to put spaces around a few more mathematical operators.  Though I don't think we should be as strict as in the Python guideline here; just do it in cases where it will increase readability (don't do it for ** for instance).",
    "created_at": "2011-11-10T22:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138397",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:4'></a>It surprises me that Sage didn't check this, wow.

At a few points, your spacing in the docstring is not in compliance with the Python guideline (see http://www.python.org/dev/peps/pep-0008/).  In order to avoid messiness or sloppiness in the documentation, it would be good to correct this.

For instance:

```
irreducibility modulo p. Also, the modulus has to be of the right degree.
```
The period should be followed by two spaces.

```
sage: L=GF(3**2,name='a', modulus=QQ[x](x-1), check_irreducible=False) 
sage: L.list() #random 
```
In the first line, there should be spaces between the = operator and a space after the first comma.  In the second line, put 2 spaces before # and 1 after #.

It would also be good to put spaces around a few more mathematical operators.  Though I don't think we should be as strict as in the Python guideline here; just do it in cases where it will increase readability (don't do it for ** for instance).



---

archive/issue_comments_138398.json:
```json
{
    "body": "Attachment [trac-11784-Galois_fields.patch](tarball://root/attachments/some-uuid/ticket11784/trac-11784-Galois_fields.patch) by @lftabera created at 2011-11-14 14:45:32",
    "created_at": "2011-11-14T14:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138398",
    "user": "https://github.com/lftabera"
}
```

Attachment [trac-11784-Galois_fields.patch](tarball://root/attachments/some-uuid/ticket11784/trac-11784-Galois_fields.patch) by @lftabera created at 2011-11-14 14:45:32



---

archive/issue_comments_138399.json:
```json
{
    "body": "<a id='comment:5'></a>Thanks for realizing this.\n\nI have updated the patch according to the python guidelines. The only one I have not followed is the limit of 79 characters that is surpassed in some exception messages and is not followed for similar code along the Sage library. But  I can also change this. \n\nI have changed the exception style to Exception(\"message\") style and added a dot in Exception messages.",
    "created_at": "2011-11-14T14:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138399",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:5'></a>Thanks for realizing this.

I have updated the patch according to the python guidelines. The only one I have not followed is the limit of 79 characters that is surpassed in some exception messages and is not followed for similar code along the Sage library. But  I can also change this. 

I have changed the exception style to Exception("message") style and added a dot in Exception messages.



---

archive/issue_comments_138400.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-11-14T14:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138400",
    "user": "https://github.com/lftabera"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_138401.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-11-15T00:05:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138401",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_138402.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 lftabera]:\n> Thanks for realizing this.\n> \n> I have updated the patch according to the python guidelines. The only one I have not followed is the limit of 79 characters that is surpassed in some exception messages and is not followed for similar code along the Sage library. But  I can also change this. \n\n\nIt would indeed be better, but I think it is okay like this. \n\n> I have changed the exception style to Exception(\"message\") style and added a dot in Exception messages.\n\n\nThis is probably much better than Exception, \"message\" indeed, which everyone uses. :).\n\nThe patch looks good now, works, and passes all tests.",
    "created_at": "2011-11-15T00:05:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138402",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:6'></a>Replying to [comment:5 lftabera]:
> Thanks for realizing this.
> 
> I have updated the patch according to the python guidelines. The only one I have not followed is the limit of 79 characters that is surpassed in some exception messages and is not followed for similar code along the Sage library. But  I can also change this. 


It would indeed be better, but I think it is okay like this. 

> I have changed the exception style to Exception("message") style and added a dot in Exception messages.


This is probably much better than Exception, "message" indeed, which everyone uses. :).

The patch looks good now, works, and passes all tests.



---

archive/issue_comments_138403.json:
```json
{
    "body": "Changing keywords from \"beginner\" to \"beginner GF\".",
    "created_at": "2011-11-15T00:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138403",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "beginner" to "beginner GF".



---

archive/issue_comments_138404.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,18 @@\n+Galois (i.e. finite) fields admits a modulus argument and by default it checks if the modulus is irreducible mod the characteristic of the field.\n \n+However, it does not check that the polynomial is of the right degree.\n+\n+An example:\n+\n+\\`\\`\\`\n+sage: K=GF(3**2,name='a', modulus=QQ[x](x^3-x+1))\n+sage: K\n+Finite Field in a of size 3^2\n+sage: K.list()\n+[0, a + 1, 1, 2, 1, 2, 1, 2, 1]\n+sage: K.modulus()\n+x^2\n+\\`\\`\\`\n \n Comment: 1\n \n```\n",
    "created_at": "2011-11-15T00:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138404",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,18 @@
+Galois (i.e. finite) fields admits a modulus argument and by default it checks if the modulus is irreducible mod the characteristic of the field.
 
+However, it does not check that the polynomial is of the right degree.
+
+An example:
+
+\`\`\`
+sage: K=GF(3**2,name='a', modulus=QQ[x](x^3-x+1))
+sage: K
+Finite Field in a of size 3^2
+sage: K.list()
+[0, a + 1, 1, 2, 1, 2, 1, 2, 1]
+sage: K.modulus()
+x^2
+\`\`\`
 
 Comment: 1
 
```




---

archive/issue_events_031000.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-16T13:50:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11784#event-31000"
}
```



---

archive/issue_comments_138405.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-11-16T13:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11784#issuecomment-138405",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
