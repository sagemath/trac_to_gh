# Issue 11884: Fix ECL so it builds on OS X Lion

archive/issues_011712.json:
```json
{
    "body": "As the summary says.\n\nThe home base for this ticket is the Lion ticket #11881.\n\nThere are no claims that this fixes Maxima building (see #11966 for that); the only claim is that this new package builds and ecl runs standalone.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecl-11.1.2.cvs20111120.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecl-11.1.2.cvs20111120.p0.spkg) (also contains the fixes for Cygwin, see #11119)\n\nThis package, and Maxima built with it, works on:\n1. OS X 10.4 PPC\n2. OS X 10.6\n3. OS X 10.7\n4. sage.math.washington.edu\n\nThe CVS version from 2011-11-08 fails on OS X 10.4 PPC, [reported upstream](http://sourceforge.net/tracker/?func=detail&aid=3437863&group_id=30035&atid=398053).\n\nAssignee: tbd\n\nCC:  @mwhansen @nexttime\n\nKeywords: ecl spkg upgrade update lion darwin 11\n\nResolution: fixed\n\nDependencies: #11966\n\nAuthor: Dmitrii Pasechnik, Mike Hansen, Karl-Dieter Crisman, William Stein, John Palmieri, Jeroen Demeyer\n\nReviewer: Karl-Dieter Crisman, Reg Burgess, Fran\u00e7ois Bissey, Leif Leonhardy, John Palmieri\n\nUpstream: Fixed upstream, but not in a stable release.\n\nMerged: sage-4.8.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/11884\n\n",
    "closed_at": "2011-11-26T11:27:43Z",
    "created_at": "2011-09-30T18:07:33Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Fix ECL so it builds on OS X Lion",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11884",
    "user": "https://github.com/jhpalmieri"
}
```
As the summary says.

The home base for this ticket is the Lion ticket #11881.

There are no claims that this fixes Maxima building (see #11966 for that); the only claim is that this new package builds and ecl runs standalone.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecl-11.1.2.cvs20111120.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecl-11.1.2.cvs20111120.p0.spkg) (also contains the fixes for Cygwin, see #11119)

This package, and Maxima built with it, works on:
1. OS X 10.4 PPC
2. OS X 10.6
3. OS X 10.7
4. sage.math.washington.edu

The CVS version from 2011-11-08 fails on OS X 10.4 PPC, [reported upstream](http://sourceforge.net/tracker/?func=detail&aid=3437863&group_id=30035&atid=398053).

Assignee: tbd

CC:  @mwhansen @nexttime

Keywords: ecl spkg upgrade update lion darwin 11

Resolution: fixed

Dependencies: #11966

Author: Dmitrii Pasechnik, Mike Hansen, Karl-Dieter Crisman, William Stein, John Palmieri, Jeroen Demeyer

Reviewer: Karl-Dieter Crisman, Reg Burgess, Fran√ßois Bissey, Leif Leonhardy, John Palmieri

Upstream: Fixed upstream, but not in a stable release.

Merged: sage-4.8.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/11884





---

archive/issue_comments_132456.json:
```json
{
    "body": "<a id='comment:1'></a>I got this to build by pulling from their latest repository:\n\n```\ngit clone git://ecls.git.sourceforge.net/gitroot/ecls/ecl\n```\nThen I dropped this as \"src\" into the old ecl spkg.  Should I make an official spkg this way?  It would feel safer to just extract the changes that we need, but I'm not sure I have time to look into that right now.\n\n(My build hasn't reached maxima yet, either, so I don't know if ecl will really work or not.)",
    "created_at": "2011-09-30T18:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132456",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:1'></a>I got this to build by pulling from their latest repository:

```
git clone git://ecls.git.sourceforge.net/gitroot/ecls/ecl
```
Then I dropped this as "src" into the old ecl spkg.  Should I make an official spkg this way?  It would feel safer to just extract the changes that we need, but I'm not sure I have time to look into that right now.

(My build hasn't reached maxima yet, either, so I don't know if ecl will really work or not.)



---

archive/issue_comments_132457.json:
```json
{
    "body": "<a id='comment:2'></a>No, maxima didn't build:\n\n```\nAn error occurred during initialization:\nIn C:BUILDER, when building file\n binary-ecl/maxima\ntried to link together files that contained split binary data.\nUnfortunately this is currently not possible. To avoid this\nrecompile the files setting C::*COMPILE-IN-CONSTANTS* to T.\nList of offending files:\n```\nand then a long list of files follows.  Suggestions?",
    "created_at": "2011-09-30T18:48:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132457",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>No, maxima didn't build:

```
An error occurred during initialization:
In C:BUILDER, when building file
 binary-ecl/maxima
tried to link together files that contained split binary data.
Unfortunately this is currently not possible. To avoid this
recompile the files setting C::*COMPILE-IN-CONSTANTS* to T.
List of offending files:
```
and then a long list of files follows.  Suggestions?



---

archive/issue_comments_132458.json:
```json
{
    "body": "<a id='comment:3'></a>On the other hand, the binary \"ecl\" starts and executes some basic lisp operations correctly.  So do we need to modify the maxima spkg?",
    "created_at": "2011-09-30T19:00:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132458",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>On the other hand, the binary "ecl" starts and executes some basic lisp operations correctly.  So do we need to modify the maxima spkg?



---

archive/issue_comments_132459.json:
```json
{
    "body": "Changing keywords from \"ecl lion\" to \"ecl spkg upgrade update lion darwin 11\".",
    "created_at": "2011-09-30T20:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132459",
    "user": "https://github.com/nexttime"
}
```

Changing keywords from "ecl lion" to "ecl spkg upgrade update lion darwin 11".



---

archive/issue_comments_132460.json:
```json
{
    "body": "<a id='comment:5'></a>> I got this to build by pulling from their latest repository:\n> git clone git://ecls.git.sourceforge.net/gitroot/ecls/ecl\n\n\nAh, so *that's* where it lives... I'm putting a link on #11119.",
    "created_at": "2011-10-14T03:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132460",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>> I got this to build by pulling from their latest repository:
> git clone git://ecls.git.sourceforge.net/gitroot/ecls/ecl


Ah, so *that's* where it lives... I'm putting a link on #11119.



---

archive/issue_comments_132461.json:
```json
{
    "body": "<a id='comment:6'></a>Also, here are three links to relevant threads on the ECL list.\n* [OS X Lion, again](http://sourceforge.net/mailarchive/forum.php?thread_name=CANejTzqDH%2BNhPXyNfp3Rso5YELXEZO%3DnwG%2BXn40SK5%2BAdU1cWw%40mail.gmail.com&forum_name=ecls-list)\n* [Compile under OS X 10.7](http://sourceforge.net/mailarchive/forum.php?thread_name=CAL9oG9_2pSeDvO7nP%3DmtUN9knYt%3De%2BJ4Py8XNSOoK8aC9GCqFw%40mail.gmail.com&forum_name=ecls-list)\n* [Building with OS X Lion](http://sourceforge.net/mailarchive/forum.php?thread_name=CANejTzqXDpO%3DcN9iDjksEJHcmD8kwx%3D4u060L%3DwDn_RkYfm09w%40mail.gmail.com&forum_name=ecls-list)",
    "created_at": "2011-10-14T12:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132461",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>Also, here are three links to relevant threads on the ECL list.
* [OS X Lion, again](http://sourceforge.net/mailarchive/forum.php?thread_name=CANejTzqDH%2BNhPXyNfp3Rso5YELXEZO%3DnwG%2BXn40SK5%2BAdU1cWw%40mail.gmail.com&forum_name=ecls-list)
* [Compile under OS X 10.7](http://sourceforge.net/mailarchive/forum.php?thread_name=CAL9oG9_2pSeDvO7nP%3DmtUN9knYt%3De%2BJ4Py8XNSOoK8aC9GCqFw%40mail.gmail.com&forum_name=ecls-list)
* [Building with OS X Lion](http://sourceforge.net/mailarchive/forum.php?thread_name=CANejTzqXDpO%3DcN9iDjksEJHcmD8kwx%3D4u060L%3DwDn_RkYfm09w%40mail.gmail.com&forum_name=ecls-list)



---

archive/issue_comments_132462.json:
```json
{
    "body": "<a id='comment:7'></a>None of which address getting Maxima to build, of course.  We could ask Juanjo (who does have a Trac account, I think, though I can't find it) or the ECL list.",
    "created_at": "2011-10-14T12:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132462",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>None of which address getting Maxima to build, of course.  We could ask Juanjo (who does have a Trac account, I think, though I can't find it) or the ECL list.



---

archive/issue_comments_132463.json:
```json
{
    "body": "<a id='comment:9'></a>I made an spkg (link in the ticket description) with this log message:\n\n```\n\n### ecl-11.1.2.git.20111030 (William Stein, 30th October 2011)\n  * Upgraded for trac 11884.   I got this by using\n\n       git clone git://ecls.git.sourceforge.net/gitroot/ecls/ecl\n       rm -rf src\n       mv ecl src\n       cd ecl; rm -rf .git*    # remove saved 20MB\n\n    I'm calling it 11.1.2.git so that the version number still sorts\n    correctly, and since one could view this as a snapshot of what\n    will be 11.1.2 eventually.\n```",
    "created_at": "2011-10-31T06:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132463",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:9'></a>I made an spkg (link in the ticket description) with this log message:

```

### ecl-11.1.2.git.20111030 (William Stein, 30th October 2011)
  * Upgraded for trac 11884.   I got this by using

       git clone git://ecls.git.sourceforge.net/gitroot/ecls/ecl
       rm -rf src
       mv ecl src
       cd ecl; rm -rf .git*    # remove saved 20MB

    I'm calling it 11.1.2.git so that the version number still sorts
    correctly, and since one could view this as a snapshot of what
    will be 11.1.2 eventually.
```



---

archive/issue_comments_132464.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-10-31T06:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132464",
    "user": "https://github.com/williamstein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_132465.json:
```json
{
    "body": "<a id='comment:10'></a>With http://sage.math.washington.edu/home/wstein/patches/ecl-11.1.2.git.20111030.spkg\n\n```\ndeep:sage-4.7.3.alpha1 wstein$ ./sage -lisp\nECL (Embeddable Common-Lisp) 11.1.1 (git:UNKNOWN)\nCopyright (C) 1984 Taiichi Yuasa and Masami Hagiya\nCopyright (C) 1993 Giuseppe Attardi\nCopyright (C) 2000 Juan J. Garcia-Ripoll\nECL is free software, and you are welcome to redistribute it\nunder certain conditions; see file 'Copyright' for details.\nType :h for Help.  \nTop level.\n> (+ 2 3)\n\n5\n```",
    "created_at": "2011-10-31T06:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132465",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:10'></a>With http://sage.math.washington.edu/home/wstein/patches/ecl-11.1.2.git.20111030.spkg

```
deep:sage-4.7.3.alpha1 wstein$ ./sage -lisp
ECL (Embeddable Common-Lisp) 11.1.1 (git:UNKNOWN)
Copyright (C) 1984 Taiichi Yuasa and Masami Hagiya
Copyright (C) 1993 Giuseppe Attardi
Copyright (C) 2000 Juan J. Garcia-Ripoll
ECL is free software, and you are welcome to redistribute it
under certain conditions; see file 'Copyright' for details.
Type :h for Help.  
Top level.
> (+ 2 3)

5
```



---

archive/issue_comments_132466.json:
```json
{
    "body": "<a id='comment:11'></a>In fact, as John says above, even with this version of ECL, the Maxima spkg definitely finishes with a failure (for me, after 11 minutes).  This is the message in the error.log (it's just more details of what John wrote above):\n\n```\n\nAn error occurred during initialization:\nIn C:BUILDER, when building file\n binary-ecl/maxima\ntried to link together files that contained split binary data.\nUnfortunately this is currently not possible. To avoid this\nrecompile the files setting C::*COMPILE-IN-CONSTANTS* to T.\nList of offending files:\n #P\"binary-ecl/maxima-package.o\"\n #P\"binary-ecl/ecl-port.o\"\n #P\"binary-ecl/autoconf-variables.o\"\n #P\"binary-ecl/nregex.o\"\n...\n #P\"binary-ecl/share-subdirs.o\"\n #P\"binary-ecl/init-cl.o\".\nmake[1]: *** [binary-ecl/maxima] Error 1\nmake: *** [all-recursive] Error 1\n```\n}}}",
    "created_at": "2011-10-31T06:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132466",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:11'></a>In fact, as John says above, even with this version of ECL, the Maxima spkg definitely finishes with a failure (for me, after 11 minutes).  This is the message in the error.log (it's just more details of what John wrote above):

```

An error occurred during initialization:
In C:BUILDER, when building file
 binary-ecl/maxima
tried to link together files that contained split binary data.
Unfortunately this is currently not possible. To avoid this
recompile the files setting C::*COMPILE-IN-CONSTANTS* to T.
List of offending files:
 #P"binary-ecl/maxima-package.o"
 #P"binary-ecl/ecl-port.o"
 #P"binary-ecl/autoconf-variables.o"
 #P"binary-ecl/nregex.o"
...
 #P"binary-ecl/share-subdirs.o"
 #P"binary-ecl/init-cl.o".
make[1]: *** [binary-ecl/maxima] Error 1
make: *** [all-recursive] Error 1
```
}}}



---

archive/issue_comments_132467.json:
```json
{
    "body": "<a id='comment:13'></a>William seems to have a fix for Maxima as well at #11966, just fyi to those reading.",
    "created_at": "2011-10-31T16:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132467",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>William seems to have a fix for Maxima as well at #11966, just fyi to those reading.



---

archive/issue_comments_132468.json:
```json
{
    "body": "<a id='comment:14'></a>Just a question as to whether there are any patches in previous versions that are still needed.  This does seem to be based on #11119, but I'm a little surprised that the patches from that still apply (and are still in spkg-install), if this is really based on the latest ECL, since they are basically from upstream.",
    "created_at": "2011-10-31T17:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132468",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>Just a question as to whether there are any patches in previous versions that are still needed.  This does seem to be based on #11119, but I'm a little surprised that the patches from that still apply (and are still in spkg-install), if this is really based on the latest ECL, since they are basically from upstream.



---

archive/issue_comments_132469.json:
```json
{
    "body": "<a id='comment:15'></a>\n```\n## Special Update/Build Instructions\n * Delete the contents of the src/msvc directory\n * Delete the contents of the src/contrib/encodings/\n```\n\nThere seems to be additional crap (or redundant things) in the upstream tree.\n\nYou should have noticed that even the compressed spkg is now almost twice as large.\n\n\n\n\nWhat Karl-Dieter said is most probably because **the exit codes of `patch` aren't checked**:\n\n```sh\n###############################################################\n# apply patch for the problem acknowledged upstream in\n# http://www.mail-archive.com/ecls-list@lists.sourceforge.net/msg00671.html\n# The patch itself comes from the following commit:\n# http://ecls.git.sourceforge.net/git/gitweb.cgip=ecls/ecl;a=commit;h=ce19c67a1b9f63cd32e7c0a621b6ca87aaa7214\n###############################################################\ncd src\npatch -p0 < ../patches/ecls-11.1.1-cmploc.lisp.patch\n\n# apply patches for Cygwin build\n# these patches is in ECL CVS, remove upon upgrade\n# Cygwin also has upstream fixes that are closely related, keep track\n# See Trac 11119\npatch -p0 < ../patches/libraries.d.patch\npatch -p0 < ../patches/unixint.d.patch\npatch -p0 < ../patches/math_fenv.h.patch\n\nif [ \"x$CFLAG64\" = x ] ; then\n    ...\n```\n\nWho reviewed these spkgs? 8/",
    "created_at": "2011-10-31T21:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132469",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'></a>
```
## Special Update/Build Instructions
 * Delete the contents of the src/msvc directory
 * Delete the contents of the src/contrib/encodings/
```

There seems to be additional crap (or redundant things) in the upstream tree.

You should have noticed that even the compressed spkg is now almost twice as large.




What Karl-Dieter said is most probably because **the exit codes of `patch` aren't checked**:

```sh
###############################################################
# apply patch for the problem acknowledged upstream in
# http://www.mail-archive.com/ecls-list@lists.sourceforge.net/msg00671.html
# The patch itself comes from the following commit:
# http://ecls.git.sourceforge.net/git/gitweb.cgip=ecls/ecl;a=commit;h=ce19c67a1b9f63cd32e7c0a621b6ca87aaa7214
###############################################################
cd src
patch -p0 < ../patches/ecls-11.1.1-cmploc.lisp.patch

# apply patches for Cygwin build
# these patches is in ECL CVS, remove upon upgrade
# Cygwin also has upstream fixes that are closely related, keep track
# See Trac 11119
patch -p0 < ../patches/libraries.d.patch
patch -p0 < ../patches/unixint.d.patch
patch -p0 < ../patches/math_fenv.h.patch

if [ "x$CFLAG64" = x ] ; then
    ...
```

Who reviewed these spkgs? 8/



---

archive/issue_comments_132470.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-10-31T21:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132470",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_132471.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 leif]:\n>\n\n{{{\n## Special Update/Build Instructions\n* Delete the contents of the src/msvc directory\n* Delete the contents of the src/contrib/encodings/\n}}}\n> \n> There seems to be additional crap (or redundant things) in the upstream tree.\n\n\n```sh\n$ diff -qr ecl-11.1.1.p3/src/ ecl-11.1.2.git.20111030/src/ | grep -i only\nOnly in ecl-11.1.1.p3/src/: .gitignore\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ATARIST.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: CP-856.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP437.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP737.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP775.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP850.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP852.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP855.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP857.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP860.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP861.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP862.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP863.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP864.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP865.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP866.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP869.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP874.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-2022-JP\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-2022-JP-1\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-1.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-10.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-11.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-13.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-14.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-15.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-16.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-2.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-3.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-4.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-5.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-6.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-7.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-8.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-9.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: JISX0201.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: JISX0208.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: JISX0212.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: KOI8-R.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: KOI8-U.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: SHIFT-JIS.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1250.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1251.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1252.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1253.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1254.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1255.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1256.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1257.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1258.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP932.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP936.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP949.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP950.BIN\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: generate.lisp\nOnly in ecl-11.1.2.git.20111030/src/contrib/encodings: tools.lisp\nOnly in ecl-11.1.2.git.20111030/src/contrib/unicode: ucd16.dat\nOnly in ecl-11.1.2.git.20111030/src/examples/asdf: example.asd\nOnly in ecl-11.1.2.git.20111030/src/msvc: Makefile\nOnly in ecl-11.1.2.git.20111030/src/msvc: c\nOnly in ecl-11.1.2.git.20111030/src/msvc: doc\nOnly in ecl-11.1.2.git.20111030/src/msvc: ecl\nOnly in ecl-11.1.2.git.20111030/src/msvc: gc\nOnly in ecl-11.1.2.git.20111030/src/msvc: gmp\nOnly in ecl-11.1.2.git.20111030/src/msvc: util\nOnly in ecl-11.1.2.git.20111030/src/src/c/ffi: cdata.d\nOnly in ecl-11.1.2.git.20111030/src/src/c/ffi: mmap.d\nOnly in ecl-11.1.2.git.20111030/src/src/c: unicode\nOnly in ecl-11.1.2.git.20111030/src/src/cmp: cmpos-features.lsp\nOnly in ecl-11.1.1.p3/src/src/gc: MacProjects\nOnly in ecl-11.1.2.git.20111030/src/src/gc: MacProjects.sit.hqx\nOnly in ecl-11.1.2.git.20111030/src/src: gc-unstable\nOnly in ecl-11.1.2.git.20111030/src/src: libffi\nOnly in ecl-11.1.2.git.20111030/src/src/lsp: cdr-5.lsp\nOnly in ecl-11.1.2.git.20111030/src/src/lsp: unicode.lsp\n```",
    "created_at": "2011-10-31T21:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132471",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:16'></a>Replying to [comment:15 leif]:
>

{{{
## Special Update/Build Instructions
* Delete the contents of the src/msvc directory
* Delete the contents of the src/contrib/encodings/
}}}
> 
> There seems to be additional crap (or redundant things) in the upstream tree.


```sh
$ diff -qr ecl-11.1.1.p3/src/ ecl-11.1.2.git.20111030/src/ | grep -i only
Only in ecl-11.1.1.p3/src/: .gitignore
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ATARIST.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: CP-856.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP437.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP737.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP775.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP850.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP852.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP855.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP857.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP860.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP861.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP862.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP863.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP864.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP865.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP866.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP869.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: DOS-CP874.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-2022-JP
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-2022-JP-1
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-1.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-10.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-11.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-13.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-14.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-15.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-16.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-2.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-3.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-4.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-5.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-6.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-7.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-8.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: ISO-8859-9.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: JISX0201.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: JISX0208.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: JISX0212.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: KOI8-R.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: KOI8-U.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: SHIFT-JIS.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1250.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1251.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1252.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1253.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1254.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1255.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1256.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1257.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP1258.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP932.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP936.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP949.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: WINDOWS-CP950.BIN
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: generate.lisp
Only in ecl-11.1.2.git.20111030/src/contrib/encodings: tools.lisp
Only in ecl-11.1.2.git.20111030/src/contrib/unicode: ucd16.dat
Only in ecl-11.1.2.git.20111030/src/examples/asdf: example.asd
Only in ecl-11.1.2.git.20111030/src/msvc: Makefile
Only in ecl-11.1.2.git.20111030/src/msvc: c
Only in ecl-11.1.2.git.20111030/src/msvc: doc
Only in ecl-11.1.2.git.20111030/src/msvc: ecl
Only in ecl-11.1.2.git.20111030/src/msvc: gc
Only in ecl-11.1.2.git.20111030/src/msvc: gmp
Only in ecl-11.1.2.git.20111030/src/msvc: util
Only in ecl-11.1.2.git.20111030/src/src/c/ffi: cdata.d
Only in ecl-11.1.2.git.20111030/src/src/c/ffi: mmap.d
Only in ecl-11.1.2.git.20111030/src/src/c: unicode
Only in ecl-11.1.2.git.20111030/src/src/cmp: cmpos-features.lsp
Only in ecl-11.1.1.p3/src/src/gc: MacProjects
Only in ecl-11.1.2.git.20111030/src/src/gc: MacProjects.sit.hqx
Only in ecl-11.1.2.git.20111030/src/src: gc-unstable
Only in ecl-11.1.2.git.20111030/src/src: libffi
Only in ecl-11.1.2.git.20111030/src/src/lsp: cdr-5.lsp
Only in ecl-11.1.2.git.20111030/src/src/lsp: unicode.lsp
```



---

archive/issue_comments_132472.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 leif]:\n> What Karl-Dieter said is most probably because **the exit codes of `patch` aren't checked** [...]\n\n\n```\n...\nDeleting directories from past builds of previous/current versions of ecl-11.1.2.git.20111030\nExtracting package /home/leif/Sage/spkgs/ecl-11.1.2.git.20111030.spkg ...\n-rw-r--r-- 1 leif leif 7129205 2011-10-31 22:13 /home/leif/Sage/spkgs/ecl-11.1.2.git.20111030.spkg\nFinished extraction\n...\n****************************************************\npatching file src/cmp/cmploc.lsp\nReversed (or previously applied) patch detected!  Assume -R? [n] \nApply anyway? [n] \nSkipping patch.\n3 out of 3 hunks ignored -- saving rejects to file src/cmp/cmploc.lsp.rej\npatching file src/c/ffi/libraries.d\nHunk #1 succeeded at 70 with fuzz 2 (offset 1 line).\npatching file src/c/unixint.d\nReversed (or previously applied) patch detected!  Assume -R? [n] \nApply anyway? [n] \nSkipping patch.\n1 out of 1 hunk ignored -- saving rejects to file src/c/unixint.d.rej\npatching file src/h/impl/math_fenv.h\nReversed (or previously applied) patch detected!  Assume -R? [n] \nApply anyway? [n] \nSkipping patch.\n1 out of 1 hunk ignored -- saving rejects to file src/h/impl/math_fenv.h.rej\nUsing CC=gcc-4.5.1\n...\n```",
    "created_at": "2011-10-31T21:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132472",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>Replying to [comment:15 leif]:
> What Karl-Dieter said is most probably because **the exit codes of `patch` aren't checked** [...]


```
...
Deleting directories from past builds of previous/current versions of ecl-11.1.2.git.20111030
Extracting package /home/leif/Sage/spkgs/ecl-11.1.2.git.20111030.spkg ...
-rw-r--r-- 1 leif leif 7129205 2011-10-31 22:13 /home/leif/Sage/spkgs/ecl-11.1.2.git.20111030.spkg
Finished extraction
...
****************************************************
patching file src/cmp/cmploc.lsp
Reversed (or previously applied) patch detected!  Assume -R? [n] 
Apply anyway? [n] 
Skipping patch.
3 out of 3 hunks ignored -- saving rejects to file src/cmp/cmploc.lsp.rej
patching file src/c/ffi/libraries.d
Hunk #1 succeeded at 70 with fuzz 2 (offset 1 line).
patching file src/c/unixint.d
Reversed (or previously applied) patch detected!  Assume -R? [n] 
Apply anyway? [n] 
Skipping patch.
1 out of 1 hunk ignored -- saving rejects to file src/c/unixint.d.rej
patching file src/h/impl/math_fenv.h
Reversed (or previously applied) patch detected!  Assume -R? [n] 
Apply anyway? [n] 
Skipping patch.
1 out of 1 hunk ignored -- saving rejects to file src/h/impl/math_fenv.h.rej
Using CC=gcc-4.5.1
...
```



---

archive/issue_comments_132473.json:
```json
{
    "body": "<a id='comment:18'></a>I can't tell if we need the (new) directory src/src/libffi.  I'll build spkgs with and without and see what happens.",
    "created_at": "2011-11-02T21:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132473",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'></a>I can't tell if we need the (new) directory src/src/libffi.  I'll build spkgs with and without and see what happens.



---

archive/issue_comments_132474.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:15 leif]:\n> Delete the contents of the src/contrib/encodings/\n\n\nThis new spkg actually doesn't build if you remove src/contrib/encodings.  I get an error message like\n\n```\n;;; Note:\n;;;   Invoking external command:\n;;;   gcc -o rt.fas -L/Applications/sage_builds/clean/sage-4.7.3.alpha1.osx10.7/spkg/build/ecl-11.1.2.git.20111030.p1/src/build/ /Applications/sage_builds/clean/sage-4.7.3.alpha1.osx10.7/spkg/build/ecl-11.1.2.git.20111030.p1/src/build/eclinitwt8UWf.o ext/rt.o -bundle -L/Applications/sage_builds/clean/sage-4.7.3.alpha1.osx10.7/local/lib -L/Applications/sage_builds/clean/sage-4.7.3.alpha1.osx10.7/local/lib libecl.dylib -lm -lgmp -lgc \nCondition of type: FILE-ERROR\nFilesystem error with pathname #P\"EXT:ENCODINGS;GENERATE.LISP.NEWEST\".\n```\nIt seems that we can delete some other stuff and still have it build on OS X Lion.  I'll make a new spkg soon.",
    "created_at": "2011-11-03T00:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132474",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'></a>Replying to [comment:15 leif]:
> Delete the contents of the src/contrib/encodings/


This new spkg actually doesn't build if you remove src/contrib/encodings.  I get an error message like

```
;;; Note:
;;;   Invoking external command:
;;;   gcc -o rt.fas -L/Applications/sage_builds/clean/sage-4.7.3.alpha1.osx10.7/spkg/build/ecl-11.1.2.git.20111030.p1/src/build/ /Applications/sage_builds/clean/sage-4.7.3.alpha1.osx10.7/spkg/build/ecl-11.1.2.git.20111030.p1/src/build/eclinitwt8UWf.o ext/rt.o -bundle -L/Applications/sage_builds/clean/sage-4.7.3.alpha1.osx10.7/local/lib -L/Applications/sage_builds/clean/sage-4.7.3.alpha1.osx10.7/local/lib libecl.dylib -lm -lgmp -lgc 
Condition of type: FILE-ERROR
Filesystem error with pathname #P"EXT:ENCODINGS;GENERATE.LISP.NEWEST".
```
It seems that we can delete some other stuff and still have it build on OS X Lion.  I'll make a new spkg soon.



---

archive/issue_comments_132475.json:
```json
{
    "body": "<a id='comment:20'></a>New spkg available.  Not tested very extensively, but it seems to build on Lion.",
    "created_at": "2011-11-03T00:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132475",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>New spkg available.  Not tested very extensively, but it seems to build on Lion.



---

archive/issue_comments_132476.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-11-03T00:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132476",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_132477.json:
```json
{
    "body": "<a id='comment:21'></a>On all the systems on which I've tried, e.g., sage.math or silius, the current maxima package fails to build with this. (The same was true with William's spkg.) I think we will need to upgrade maxima at the same time as ecl, so I'm making #11966 a dependency for this.\n\n(This makes for a circular path of dependencies; is this the right way to ensure that these get merged simultaneously?)",
    "created_at": "2011-11-03T01:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132477",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:21'></a>On all the systems on which I've tried, e.g., sage.math or silius, the current maxima package fails to build with this. (The same was true with William's spkg.) I think we will need to upgrade maxima at the same time as ecl, so I'm making #11966 a dependency for this.

(This makes for a circular path of dependencies; is this the right way to ensure that these get merged simultaneously?)



---

archive/issue_comments_132478.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-11-03T19:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132478",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_132479.json:
```json
{
    "body": "<a id='comment:22'></a>This needs work, and I don't know how to fix it.  On sage.math, I took a vanilla Sage 4.7.2 and dropped in either my spkg or William's, along with the maxima spkg from #11966, and I built from scratch. The build succeeded, but doctesting hangs on various files.  For example:\n\n```\n$ ./sage -t --verbose devel/sage/doc/en/tutorial/tour_rings.rst\n\n...\nTrying:\n    pi in RR###line 124:_sage_    >>> pi in RR\nExpecting:\n    True\n\nCondition of type: SIMPLE-TYPE-ERROR\nIn function MAKE-FOREIGN-DATA-FROM-ARRAY, the value of argument is\n        \"\\\"3.141592653589793 = %pi\\\"\"\nwhich is not of expected type BASE-STRING\nAvailable restarts:\n\n1. (USE-VALUE) Supply a new value of type BASE-STRING.\n\nTop level.\n> \n```\nAt this point, ecl stops to ask for user input, and since doctesting is noninteractive, it waits until the test times out.  For what it's worth, I tried a build which was 4.7.2 plus the maxima spkg from #11966, and all tests passed.  So the problem looks like it's ecl, not maxima, but I'm not positive about this.\n\nFrom the web page [http://ecls.sourceforge.net/ecl/Strings.html](http://ecls.sourceforge.net/ecl/Strings.html), it looks like a \"base-string\" is just an alias for \"string\", and I don't know why the quoted object isn't a string.  Is it the backslashes?\n\nI don't know much about Sage's interactions with ecl and maxima, so I don't have any ideas about how to fix this.  The file `devel/sage/sage/interfaces/lisp.py` passes tests.  `interfaces/maxima.py` passes, but `interfaces/maxima_lib.py` and `interfaces/maxima_abstract.py` hang with the same kind of error (when run verbosely).",
    "created_at": "2011-11-03T19:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132479",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:22'></a>This needs work, and I don't know how to fix it.  On sage.math, I took a vanilla Sage 4.7.2 and dropped in either my spkg or William's, along with the maxima spkg from #11966, and I built from scratch. The build succeeded, but doctesting hangs on various files.  For example:

```
$ ./sage -t --verbose devel/sage/doc/en/tutorial/tour_rings.rst

...
Trying:
    pi in RR###line 124:_sage_    >>> pi in RR
Expecting:
    True

Condition of type: SIMPLE-TYPE-ERROR
In function MAKE-FOREIGN-DATA-FROM-ARRAY, the value of argument is
        "\"3.141592653589793 = %pi\""
which is not of expected type BASE-STRING
Available restarts:

1. (USE-VALUE) Supply a new value of type BASE-STRING.

Top level.
> 
```
At this point, ecl stops to ask for user input, and since doctesting is noninteractive, it waits until the test times out.  For what it's worth, I tried a build which was 4.7.2 plus the maxima spkg from #11966, and all tests passed.  So the problem looks like it's ecl, not maxima, but I'm not positive about this.

From the web page [http://ecls.sourceforge.net/ecl/Strings.html](http://ecls.sourceforge.net/ecl/Strings.html), it looks like a "base-string" is just an alias for "string", and I don't know why the quoted object isn't a string.  Is it the backslashes?

I don't know much about Sage's interactions with ecl and maxima, so I don't have any ideas about how to fix this.  The file `devel/sage/sage/interfaces/lisp.py` passes tests.  `interfaces/maxima.py` passes, but `interfaces/maxima_lib.py` and `interfaces/maxima_abstract.py` hang with the same kind of error (when run verbosely).



---

archive/issue_comments_132480.json:
```json
{
    "body": "<a id='comment:23'></a>Now I have an idea: the default option for the configure option `--enable-unicode` changed from \"no\" to \"yes\", and that may be the issue, as alluded to [here](http://comments.gmane.org/gmane.lisp.ecl.general/8098).  I'm switching it back to see if that helps.  If the current build works and passes tests on sage.math, I'll post a new spkg and patch file.",
    "created_at": "2011-11-03T20:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132480",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'></a>Now I have an idea: the default option for the configure option `--enable-unicode` changed from "no" to "yes", and that may be the issue, as alluded to [here](http://comments.gmane.org/gmane.lisp.ecl.general/8098).  I'm switching it back to see if that helps.  If the current build works and passes tests on sage.math, I'll post a new spkg and patch file.



---

archive/issue_comments_132481.json:
```json
{
    "body": "<a id='comment:24'></a>Yes, that fixed it, at least on sage.math.  New spkg up.  Differences:\n\n```diff\ndiff --git a/SPKG.txt b/SPKG.txt\n--- a/SPKG.txt\n+++ b/SPKG.txt\n@@ -51,10 +51,13 @@ Website: http://ecls.sourceforge.net/\n == Changelog ==\n \n === ecl-11.1.2.git.20111030.p0 (John H. Palmieri, 2 Novemer 2011) ===\n-  * Trac #11884: general clean-up: remove unneeded patches,\n+  * Trac #11884.  General clean-up: remove unneeded patches,\n     remove some source files (as described above in \"Special\n-    Update/Build Instructions\").  Also check the error code when\n-    running 'patch' in spkg-install.\n+    Update/Build Instructions\").\n+  * Check the error code when running 'patch' in spkg-install.\n+  * Run configure with the option \"--enable-unicode=no\" -- this was\n+    the default in previous versions of ecl, and using the new default\n+    of \"yes\" causes problems with some strings.\n \n === ecl-11.1.2.git.20111030 (William Stein, 30th October 2011) ===\n   * Upgraded for trac 11884.   I got this by using\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -90,9 +90,9 @@ if [ \"x`uname -sm`\" = \"xSunOS i86pc\" ] &\n    # 1) Solaris, Solaris Express or OpenSolaris (SunOS) \n    # 2) Intel or AMD CPU \n    # 3) 64-bit build\n-   ./configure --prefix=\"$SAGE_LOCAL\" --with-dffi=no\n+   ./configure --prefix=\"$SAGE_LOCAL\" --with-unicode=no --with-dffi=no\n else\n-   ./configure --prefix=\"$SAGE_LOCAL\" \n+   ./configure --prefix=\"$SAGE_LOCAL\" --with-unicode=no\n fi\n \n if [ $? -ne 0 ]; then\n```\n\nBy the way, I deleted the directory src/src/libffi directory, and this gives a warning during configuration:\n\n```\nchecking for ffi_closure_alloc in -lffi... no\nchecking whether we can use the existing libffi library ... no\nconfigure: Configuring included libffi library:\n/scratch/palmieri/ECL/sage-4.7.2/spkg/build/ecl-11.1.2.git.20111030.p0/src/src/configure: line 7012: /scratch/palmieri/ECL/sage-4.7.2/spkg/build/ecl-11.1.2.git.20111030.p0/src/src/libffi/configure: No such file or directory\nconfigure: WARNING: Unable to configure or find libffi library; disabling dynamic FFI\n```\nI wonder if we should configure using `--with-dffi=no` on all platforms?  Or perhaps I shouldn't delete the directory.  In William's package:\n\n```\n$ du -s -h src\n44M\tsrc\n$ du -s -h src/src/libffi/\n7.2M\tsrc/src/libffi/\n```\nSo it takes a fair amount of room...",
    "created_at": "2011-11-03T21:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132481",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:24'></a>Yes, that fixed it, at least on sage.math.  New spkg up.  Differences:

```diff
diff --git a/SPKG.txt b/SPKG.txt
--- a/SPKG.txt
+++ b/SPKG.txt
@@ -51,10 +51,13 @@ Website: http://ecls.sourceforge.net/
 == Changelog ==
 
 === ecl-11.1.2.git.20111030.p0 (John H. Palmieri, 2 Novemer 2011) ===
-  * Trac #11884: general clean-up: remove unneeded patches,
+  * Trac #11884.  General clean-up: remove unneeded patches,
     remove some source files (as described above in "Special
-    Update/Build Instructions").  Also check the error code when
-    running 'patch' in spkg-install.
+    Update/Build Instructions").
+  * Check the error code when running 'patch' in spkg-install.
+  * Run configure with the option "--enable-unicode=no" -- this was
+    the default in previous versions of ecl, and using the new default
+    of "yes" causes problems with some strings.
 
 === ecl-11.1.2.git.20111030 (William Stein, 30th October 2011) ===
   * Upgraded for trac 11884.   I got this by using
diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -90,9 +90,9 @@ if [ "x`uname -sm`" = "xSunOS i86pc" ] &
    # 1) Solaris, Solaris Express or OpenSolaris (SunOS) 
    # 2) Intel or AMD CPU 
    # 3) 64-bit build
-   ./configure --prefix="$SAGE_LOCAL" --with-dffi=no
+   ./configure --prefix="$SAGE_LOCAL" --with-unicode=no --with-dffi=no
 else
-   ./configure --prefix="$SAGE_LOCAL" 
+   ./configure --prefix="$SAGE_LOCAL" --with-unicode=no
 fi
 
 if [ $? -ne 0 ]; then
```

By the way, I deleted the directory src/src/libffi directory, and this gives a warning during configuration:

```
checking for ffi_closure_alloc in -lffi... no
checking whether we can use the existing libffi library ... no
configure: Configuring included libffi library:
/scratch/palmieri/ECL/sage-4.7.2/spkg/build/ecl-11.1.2.git.20111030.p0/src/src/configure: line 7012: /scratch/palmieri/ECL/sage-4.7.2/spkg/build/ecl-11.1.2.git.20111030.p0/src/src/libffi/configure: No such file or directory
configure: WARNING: Unable to configure or find libffi library; disabling dynamic FFI
```
I wonder if we should configure using `--with-dffi=no` on all platforms?  Or perhaps I shouldn't delete the directory.  In William's package:

```
$ du -s -h src
44M	src
$ du -s -h src/src/libffi/
7.2M	src/src/libffi/
```
So it takes a fair amount of room...



---

archive/issue_comments_132482.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-11-03T21:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132482",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_132483.json:
```json
{
    "body": "<a id='comment:25'></a>Oops: typo in spkg-install: change `--with-unicode=...` to `--enable-unicode=...`.  Fixed in the new spkg.",
    "created_at": "2011-11-03T23:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132483",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:25'></a>Oops: typo in spkg-install: change `--with-unicode=...` to `--enable-unicode=...`.  Fixed in the new spkg.



---

archive/issue_comments_132484.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:24 jhpalmieri]:\n> By the way, I deleted the directory src/src/libffi directory, and this gives a warning during configuration [...] \n\n\n> \n\n\n> I wonder if we should configure using `--with-dffi=no` on all platforms?  Or perhaps I shouldn't delete the directory.\n\n\n`libffi` is installed on many systems, so we certainly shouldn't disable it.\n\n\n\n\n> \n\n{{{\n$ du -s -h src\n44M\tsrc\n$ du -s -h src/src/libffi/\n7.2M\tsrc/src/libffi/\n}}}\n> So it takes a fair amount of room...\n\n\nMuch more worth is (also) removing the `gmp` directory, which at the moment makes up half of the tarball; see #9493.  One should at least add a `TODO`, since people apparently tend to not look at other related tickets.\n\n\n\n\nIf you configure with `--enable-unicode=no` (you could also use `--disable-unicode` btw.), you can completely remove the following two directories (not just their contents):\n\n```\nsrc/contrib/encodings/\nsrc/contrib/unicode/\n```\n\n\n\n\nIf the patches are applied from `src/`, they should be applied (i.e., be appliable) with `-p1` for consistency.\n\nI also get\n\n```\npatching file src/c/ffi/libraries.d\nHunk #1 succeeded at 70 with fuzz 2 (offset 1 line).\n```\n\n\n\n\n`spkg-install` in whole needs some clean-up, for example all error messages should go to `stderr`.  If `MAKEFLAGS` are a problem on MacOS X, they should be unset on MacOS X, not by default (and the comment is btw. wrong or unrelated).  We do not create a symbolic link to the ECL library, but the ECL library directory, so the error message is wrong. ...\n\n---\n\nCeterum censeo we should upgrage trac.",
    "created_at": "2011-11-04T01:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132484",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:26'></a>Replying to [comment:24 jhpalmieri]:
> By the way, I deleted the directory src/src/libffi directory, and this gives a warning during configuration [...] 


> 


> I wonder if we should configure using `--with-dffi=no` on all platforms?  Or perhaps I shouldn't delete the directory.


`libffi` is installed on many systems, so we certainly shouldn't disable it.




> 

{{{
$ du -s -h src
44M	src
$ du -s -h src/src/libffi/
7.2M	src/src/libffi/
}}}
> So it takes a fair amount of room...


Much more worth is (also) removing the `gmp` directory, which at the moment makes up half of the tarball; see #9493.  One should at least add a `TODO`, since people apparently tend to not look at other related tickets.




If you configure with `--enable-unicode=no` (you could also use `--disable-unicode` btw.), you can completely remove the following two directories (not just their contents):

```
src/contrib/encodings/
src/contrib/unicode/
```




If the patches are applied from `src/`, they should be applied (i.e., be appliable) with `-p1` for consistency.

I also get

```
patching file src/c/ffi/libraries.d
Hunk #1 succeeded at 70 with fuzz 2 (offset 1 line).
```




`spkg-install` in whole needs some clean-up, for example all error messages should go to `stderr`.  If `MAKEFLAGS` are a problem on MacOS X, they should be unset on MacOS X, not by default (and the comment is btw. wrong or unrelated).  We do not create a symbolic link to the ECL library, but the ECL library directory, so the error message is wrong. ...

---

Ceterum censeo we should upgrage trac.



---

archive/issue_comments_132485.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 leif]:\n> Much more worth is (also) removing the `gmp` directory, which at the moment makes up half of the tarball; see #9493.  One should at least add a `TODO`, since people apparently tend to not look at other related tickets.\n\n\nIf you hesitate to patch `configure` to remove / modify the calls of some redundant scripts in `src/src/gmp/`, you can delete everything there except `install-sh` and `{config,configfsf}.*`.\n\nWe should also configure with `--with-gmp=\"$SAGE_LOCAL\"` (or `--with-gmp-prefix=\"$SAGE_LOCAL\"`, haven't tested that yet).\n\n\n\n \n> If you configure with `--enable-unicode=no` (you could also use `--disable-unicode` btw.), you can completely remove the following two directories (not just their contents):\n\n{{{\nsrc/contrib/encodings/\nsrc/contrib/unicode/\n}}}\n\nFWIW, #9493 had a comment on that one must not configure with `--enable-unicode` if these directories are deleted (in the *Special Update/Build Instructions* section).\n\n\n\n\nSince Sage also ships and builds the Boehm GC, we could most probably delete even more.",
    "created_at": "2011-11-04T01:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132485",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:27'></a>Replying to [comment:26 leif]:
> Much more worth is (also) removing the `gmp` directory, which at the moment makes up half of the tarball; see #9493.  One should at least add a `TODO`, since people apparently tend to not look at other related tickets.


If you hesitate to patch `configure` to remove / modify the calls of some redundant scripts in `src/src/gmp/`, you can delete everything there except `install-sh` and `{config,configfsf}.*`.

We should also configure with `--with-gmp="$SAGE_LOCAL"` (or `--with-gmp-prefix="$SAGE_LOCAL"`, haven't tested that yet).



 
> If you configure with `--enable-unicode=no` (you could also use `--disable-unicode` btw.), you can completely remove the following two directories (not just their contents):

{{{
src/contrib/encodings/
src/contrib/unicode/
}}}

FWIW, #9493 had a comment on that one must not configure with `--enable-unicode` if these directories are deleted (in the *Special Update/Build Instructions* section).




Since Sage also ships and builds the Boehm GC, we could most probably delete even more.



---

archive/issue_events_031408.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-11-04T20:30:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11884#event-31408"
}
```



---

archive/issue_comments_132486.json:
```json
{
    "body": "<a id='comment:28'></a>Okay, I'm posting a new spkg.  Differences between the previous one and this one are recorded in the \"delta\" patch.\n\n> libffi is installed on many systems, so we certainly shouldn't disable it.\n\n\nOkay, I'm not disabling it, so if it's present on the system, it will be used.  I'm still removing the directory.\n\n> Much more worth is (also) removing the gmp directory\n\n\nIt's now (mostly) gone as per your suggestion.  See SPKG.txt.\n\n> If the patches are applied from src/, they should be applied (i.e., be appliable) with -p1 for consistency.\n\n\nOkay.\n\n> `Hunk #1 succeeded at 70 with fuzz 2 (offset 1 line).`\n\n\nFixed\n\n> spkg-install in whole needs some clean-up\n\n\nI've done some clean-up.\n\n> We should also configure with --with-gmp=\"$SAGE_LOCAL\" (or --with-gmp-prefix=\"$SAGE_LOCAL\", haven't tested that yet).\n\n\nDone.\n\n> Since Sage also ships and builds the Boehm GC, we could most probably delete even more.\n\n\nI'm not touching this part, except to add a \"To do\" to the SPKG.txt file.\n\nIf this is merged, can we close #9493?\n\n---\n\nI took this spkg and the maxima spkg from #11966 and built Sage from scratch.  It built successfully on the following systems:\n\n- sage.math\n- hawk (David Kirkby's OpenSolaris machine)\n- skynet machines eno, silius, taurus\n\nDoctests passed on all of these except for silius, which has always had other issues.\n\nThis spkg by itself builds on an OS X Lion laptop, at which point `sage --lisp` seems to work, but other parts of the Sage build have problems.\n\nI'm still in the middle of builds on other machines.",
    "created_at": "2011-11-04T20:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132486",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:28'></a>Okay, I'm posting a new spkg.  Differences between the previous one and this one are recorded in the "delta" patch.

> libffi is installed on many systems, so we certainly shouldn't disable it.


Okay, I'm not disabling it, so if it's present on the system, it will be used.  I'm still removing the directory.

> Much more worth is (also) removing the gmp directory


It's now (mostly) gone as per your suggestion.  See SPKG.txt.

> If the patches are applied from src/, they should be applied (i.e., be appliable) with -p1 for consistency.


Okay.

> `Hunk #1 succeeded at 70 with fuzz 2 (offset 1 line).`


Fixed

> spkg-install in whole needs some clean-up


I've done some clean-up.

> We should also configure with --with-gmp="$SAGE_LOCAL" (or --with-gmp-prefix="$SAGE_LOCAL", haven't tested that yet).


Done.

> Since Sage also ships and builds the Boehm GC, we could most probably delete even more.


I'm not touching this part, except to add a "To do" to the SPKG.txt file.

If this is merged, can we close #9493?

---

I took this spkg and the maxima spkg from #11966 and built Sage from scratch.  It built successfully on the following systems:

- sage.math
- hawk (David Kirkby's OpenSolaris machine)
- skynet machines eno, silius, taurus

Doctests passed on all of these except for silius, which has always had other issues.

This spkg by itself builds on an OS X Lion laptop, at which point `sage --lisp` seems to work, but other parts of the Sage build have problems.

I'm still in the middle of builds on other machines.



---

archive/issue_comments_132487.json:
```json
{
    "body": "diff between previous version and this one",
    "created_at": "2011-11-04T20:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132487",
    "user": "https://github.com/jhpalmieri"
}
```

diff between previous version and this one



---

archive/issue_comments_132488.json:
```json
{
    "body": "<a id='comment:29'></a>Attachment [trac_11884-ecl.delta.patch](tarball://root/attachments/some-uuid/ticket11884/trac_11884-ecl.delta.patch) by @nexttime created at 2011-11-04 21:14:44\n\nOk, delta patch looks sane (modulo some uppercase/lowercase inconsistency in `SPKG.txt`).\n\nFor most directories (except `gmp`), *\"Remove the contents of ...\"* should read *\"Remove the directory ...\"* (with `rm -rf ...`).\n\n\n\n\n*Someone<sup>TM</sup>* should report the unconditional use of `install-sh` etc. from \"optional\" components' subdirectories upstream...\n\nAlso, there should be a way to force the use of a \"system\" Boehm GC (in our case, Sage's) on Darwin as well; haven't checked whether that changed in recent releases though.  (We could open a follow-up for that, and submit a patch upstream in case this is still necessary.)",
    "created_at": "2011-11-04T21:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132488",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:29'></a>Attachment [trac_11884-ecl.delta.patch](tarball://root/attachments/some-uuid/ticket11884/trac_11884-ecl.delta.patch) by @nexttime created at 2011-11-04 21:14:44

Ok, delta patch looks sane (modulo some uppercase/lowercase inconsistency in `SPKG.txt`).

For most directories (except `gmp`), *"Remove the contents of ..."* should read *"Remove the directory ..."* (with `rm -rf ...`).




*Someone<sup>TM</sup>* should report the unconditional use of `install-sh` etc. from "optional" components' subdirectories upstream...

Also, there should be a way to force the use of a "system" Boehm GC (in our case, Sage's) on Darwin as well; haven't checked whether that changed in recent releases though.  (We could open a follow-up for that, and submit a patch upstream in case this is still necessary.)



---

archive/issue_comments_132489.json:
```json
{
    "body": "<a id='comment:30'></a>Okay, here are the new diffs:\n\n```diff\ndiff --git a/SPKG.txt b/SPKG.txt\n--- a/SPKG.txt\n+++ b/SPKG.txt\n@@ -41,14 +41,14 @@ Website: http://ecls.sourceforge.net/\n  * Note: deleting the following directories saves space: without doing\n    this, the spkg can grow from under 2.5 megabytes to almost 7\n    megabytes.\n- * Delete the contents of the src/msvc directory\n- * Delete the contents of the src/src/gc_unstable/ directory\n- * Delete the contents of the src/src/libffi/ directory\n- * Delete most of the contents of the src/src/gmp directory:\n+ * Remove the directory src/msvc/\n+ * Remove the directory src/src/gc_unstable/\n+ * Remove the directory src/src/libffi/\n+ * Remove most of the contents of the src/src/gmp directory:\n    everything except install.sh, config.*, and configfsf.*\n  * Build with --enable-unicode=no, and hence it is safe to:\n-   - Delete the contents of the src/contrib/encodings directory\n-   - Delete the contents of the src/contrib/unicode directory\n+   - Remove the directory src/contrib/encodings/\n+   - Remove the directory src/contrib/unicode/\n    (Building with --enable-unicode=yes, the default in the latest ecl\n    source, leads to problems with some strings in the Sage-maxima-ecl\n    interface.)\n@@ -63,7 +63,7 @@ Website: http://ecls.sourceforge.net/\n \n == Changelog ==\n \n-=== ecl-11.1.2.git.20111030.p0 (John H. Palmieri, 2 Novemer 2011) ===\n+=== ecl-11.1.2.git.20111030.p0 (John H. Palmieri, 4 November 2011) ===\n   * Trac #11884.  General clean-up: remove unneeded patches,\n     remove some source files (as described above in \"Special\n     Update/Build Instructions\"), echo error messages to stderr, etc.\n```\n\nI would also like to register a complaint that while in the src directory, running `./configure --help` actually creates a directory (`build`) and then prints the message \"Configuration complete. To build ECL, issue make in this directory.\"  I wouldn't expect `./configure --help` to actually do anything beyond print a message.",
    "created_at": "2011-11-04T21:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132489",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:30'></a>Okay, here are the new diffs:

```diff
diff --git a/SPKG.txt b/SPKG.txt
--- a/SPKG.txt
+++ b/SPKG.txt
@@ -41,14 +41,14 @@ Website: http://ecls.sourceforge.net/
  * Note: deleting the following directories saves space: without doing
    this, the spkg can grow from under 2.5 megabytes to almost 7
    megabytes.
- * Delete the contents of the src/msvc directory
- * Delete the contents of the src/src/gc_unstable/ directory
- * Delete the contents of the src/src/libffi/ directory
- * Delete most of the contents of the src/src/gmp directory:
+ * Remove the directory src/msvc/
+ * Remove the directory src/src/gc_unstable/
+ * Remove the directory src/src/libffi/
+ * Remove most of the contents of the src/src/gmp directory:
    everything except install.sh, config.*, and configfsf.*
  * Build with --enable-unicode=no, and hence it is safe to:
-   - Delete the contents of the src/contrib/encodings directory
-   - Delete the contents of the src/contrib/unicode directory
+   - Remove the directory src/contrib/encodings/
+   - Remove the directory src/contrib/unicode/
    (Building with --enable-unicode=yes, the default in the latest ecl
    source, leads to problems with some strings in the Sage-maxima-ecl
    interface.)
@@ -63,7 +63,7 @@ Website: http://ecls.sourceforge.net/
 
 == Changelog ==
 
-=== ecl-11.1.2.git.20111030.p0 (John H. Palmieri, 2 Novemer 2011) ===
+=== ecl-11.1.2.git.20111030.p0 (John H. Palmieri, 4 November 2011) ===
   * Trac #11884.  General clean-up: remove unneeded patches,
     remove some source files (as described above in "Special
     Update/Build Instructions"), echo error messages to stderr, etc.
```

I would also like to register a complaint that while in the src directory, running `./configure --help` actually creates a directory (`build`) and then prints the message "Configuration complete. To build ECL, issue make in this directory."  I wouldn't expect `./configure --help` to actually do anything beyond print a message.



---

archive/issue_comments_132490.json:
```json
{
    "body": "patch for ecl spkg; for review only",
    "created_at": "2011-11-04T21:32:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132490",
    "user": "https://github.com/jhpalmieri"
}
```

patch for ecl spkg; for review only



---

archive/issue_comments_132491.json:
```json
{
    "body": "<a id='comment:31'></a>Attachment [trac_11884-ecl.patch](tarball://root/attachments/some-uuid/ticket11884/trac_11884-ecl.patch) by @jhpalmieri created at 2011-11-04 21:33:15\n\nOh, and now I just changed some instances of \"ecl\" to \"ECL\" in SPKG.txt.  The posted delta patch is out of date.  Add to them the diffs from my previous message and also these lower/uppercase changes.",
    "created_at": "2011-11-04T21:33:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132491",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:31'></a>Attachment [trac_11884-ecl.patch](tarball://root/attachments/some-uuid/ticket11884/trac_11884-ecl.patch) by @jhpalmieri created at 2011-11-04 21:33:15

Oh, and now I just changed some instances of "ecl" to "ECL" in SPKG.txt.  The posted delta patch is out of date.  Add to them the diffs from my previous message and also these lower/uppercase changes.



---

archive/issue_comments_132492.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2011-11-10T13:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132492",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_132493.json:
```json
{
    "body": "<a id='comment:33'></a>This fails on OS X 10.4 PPC, see attached log file.",
    "created_at": "2011-11-12T07:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132493",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>This fails on OS X 10.4 PPC, see attached log file.



---

archive/issue_comments_132494.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-11-12T07:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132494",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_132495.json:
```json
{
    "body": "Attachment [ecl-11.1.2.git.20111030.p0.log](tarball://root/attachments/some-uuid/ticket11884/ecl-11.1.2.git.20111030.p0.log) by @jdemeyer created at 2011-11-12 07:41:22\n\nBuild failure on OS X 10.4 PPC",
    "created_at": "2011-11-12T07:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132495",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [ecl-11.1.2.git.20111030.p0.log](tarball://root/attachments/some-uuid/ticket11884/ecl-11.1.2.git.20111030.p0.log) by @jdemeyer created at 2011-11-12 07:41:22

Build failure on OS X 10.4 PPC



---

archive/issue_comments_132496.json:
```json
{
    "body": "<a id='comment:34'></a>The last part of the log file is\n\n```\n;;; Note:\n;;;   Invoking external command:\n;;;   gcc -I. -I/Users/jdemeyer/sage-4.8.alpha2/spkg/build/ecl-11.1.2.git.20111030.p0/src/build/ -DECL_API -I/Users/jdemeyer/sage-4.8.alph\n;;; Finished compiling EXT:BYTECMP;BYTECMP.LSP.\n;;;\n;;; Note:\n;;;   Library initialization function is main_lib_LSP\n;;; Note:\n;;;   Invoking external command:\n;;;   gcc -I. -I/Users/jdemeyer/sage-4.8.alpha2/spkg/build/ecl-11.1.2.git.20111030.p0/src/build/ -DECL_API -I/Users/jdemeyer/sage-4.8.alph\n;;; Note:\n;;;   Invoking external command:\n;;;   ar cr liblsp.a eclinit8Mq5nn.o lsp/export.o lsp/defmacro.o lsp/helpfile.o lsp/evalmacros.o lsp/setf.o lsp/predlib.o lsp/seq.o lsp/ar\n;;; Note:\n;;;   Invoking external command:\n;;;   ranlib liblsp.a\nNIL\n/usr/bin/libtool: file: liblsp.a(eClDaTa20110719) is not an object file (not allowed in a library)\n/usr/bin/libtool: archive: liblsp.a truncated or malformed (archive header of next member extends past the end of the file)\n;;; Note:\n;;;   Invoking external command:\n;;;   gcc -o libecl.dylib -L/Users/jdemeyer/sage-4.8.alpha2/spkg/build/ecl-11.1.2.git.20111030.p0/src/build/ c/main.o c/all_symbols2.o lib\nCondition of type: SIMPLE-ERROR\nError code 1 when executing\n(RUN-PROGRAM \"gcc\" (\"-o\" \"libecl.dylib\" \"-L/Users/jdemeyer/sage-4.8.alpha2/spkg/build/ecl-11.1.2.git.20111030.p0/src/build/\" \"c/main.o\" \"c\n\nAvailable restarts:\n\n1. (CONTINUE) Continues anyway.\n\nTop level.\n>\n```\n\nAt this point I got an interactive prompt(!).  This prompt probably should be avoided anyway, by redirecting stdin from `/dev/null` during the build.",
    "created_at": "2011-11-12T07:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132496",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>The last part of the log file is

```
;;; Note:
;;;   Invoking external command:
;;;   gcc -I. -I/Users/jdemeyer/sage-4.8.alpha2/spkg/build/ecl-11.1.2.git.20111030.p0/src/build/ -DECL_API -I/Users/jdemeyer/sage-4.8.alph
;;; Finished compiling EXT:BYTECMP;BYTECMP.LSP.
;;;
;;; Note:
;;;   Library initialization function is main_lib_LSP
;;; Note:
;;;   Invoking external command:
;;;   gcc -I. -I/Users/jdemeyer/sage-4.8.alpha2/spkg/build/ecl-11.1.2.git.20111030.p0/src/build/ -DECL_API -I/Users/jdemeyer/sage-4.8.alph
;;; Note:
;;;   Invoking external command:
;;;   ar cr liblsp.a eclinit8Mq5nn.o lsp/export.o lsp/defmacro.o lsp/helpfile.o lsp/evalmacros.o lsp/setf.o lsp/predlib.o lsp/seq.o lsp/ar
;;; Note:
;;;   Invoking external command:
;;;   ranlib liblsp.a
NIL
/usr/bin/libtool: file: liblsp.a(eClDaTa20110719) is not an object file (not allowed in a library)
/usr/bin/libtool: archive: liblsp.a truncated or malformed (archive header of next member extends past the end of the file)
;;; Note:
;;;   Invoking external command:
;;;   gcc -o libecl.dylib -L/Users/jdemeyer/sage-4.8.alpha2/spkg/build/ecl-11.1.2.git.20111030.p0/src/build/ c/main.o c/all_symbols2.o lib
Condition of type: SIMPLE-ERROR
Error code 1 when executing
(RUN-PROGRAM "gcc" ("-o" "libecl.dylib" "-L/Users/jdemeyer/sage-4.8.alpha2/spkg/build/ecl-11.1.2.git.20111030.p0/src/build/" "c/main.o" "c

Available restarts:

1. (CONTINUE) Continues anyway.

Top level.
>
```

At this point I got an interactive prompt(!).  This prompt probably should be avoided anyway, by redirecting stdin from `/dev/null` during the build.



---

archive/issue_comments_132497.json:
```json
{
    "body": "<a id='comment:35'></a>> This prompt probably should be avoided anyway, by redirecting stdin from /dev/null during the build.\n\n\nDo you mean\n\n```diff\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -105,7 +105,7 @@ fi\n # Before running make we touch build/TAGS so its building process is never triggered\n touch build/TAGS\n \n-$MAKE\n+$MAKE < /dev/null\n if [ $? -ne 0 ]; then\n    echo >&2 \"Error - Failed to build ECL ... exiting\"\n    exit 1\n```\nI don't have access to an OS X 10.4 PPC machine (as far as I know), so it's going to be hard for me to test this.",
    "created_at": "2011-11-12T16:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132497",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:35'></a>> This prompt probably should be avoided anyway, by redirecting stdin from /dev/null during the build.


Do you mean

```diff
diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -105,7 +105,7 @@ fi
 # Before running make we touch build/TAGS so its building process is never triggered
 touch build/TAGS
 
-$MAKE
+$MAKE < /dev/null
 if [ $? -ne 0 ]; then
    echo >&2 "Error - Failed to build ECL ... exiting"
    exit 1
```
I don't have access to an OS X 10.4 PPC machine (as far as I know), so it's going to be hard for me to test this.



---

archive/issue_comments_132498.json:
```json
{
    "body": "<a id='comment:36'></a>I think we should consider ending support for 10.4 in Sage-5.0 (where we'll surely fully support 10.7).   OS X 10.4 is from 2005, and it hasn't had security updates in since mid-2009.",
    "created_at": "2011-11-12T17:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132498",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:36'></a>I think we should consider ending support for 10.4 in Sage-5.0 (where we'll surely fully support 10.7).   OS X 10.4 is from 2005, and it hasn't had security updates in since mid-2009.



---

archive/issue_comments_132499.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:36 was]:\n> I think we should consider ending support for 10.4 in Sage-5.0 (where we'll surely fully support 10.7).   OS X 10.4 is from 2005, and it hasn't had security updates in since mid-2009.\n\n\nCould be worth asking Harald how many downloads there have been of this.  There seems to be a steady trickle of folks using this.  At the same time, I understand the sentiment.  Though see this amusing quote from [TenFourFox](http://www.floodgap.com/software/tenfourfox/)'s website:\n\n```\n But we were horrified when Mozilla delivered the one-two punch of dropping \nboth support for Tiger and our beloved Power Macs from Firefox. A quad 2.5GHz G5 \nisn't worth using to surf the web? Really? And you guys still support Windows XP?\n```",
    "created_at": "2011-11-12T17:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132499",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:37'></a>Replying to [comment:36 was]:
> I think we should consider ending support for 10.4 in Sage-5.0 (where we'll surely fully support 10.7).   OS X 10.4 is from 2005, and it hasn't had security updates in since mid-2009.


Could be worth asking Harald how many downloads there have been of this.  There seems to be a steady trickle of folks using this.  At the same time, I understand the sentiment.  Though see this amusing quote from [TenFourFox](http://www.floodgap.com/software/tenfourfox/)'s website:

```
 But we were horrified when Mozilla delivered the one-two punch of dropping 
both support for Tiger and our beloved Power Macs from Firefox. A quad 2.5GHz G5 
isn't worth using to surf the web? Really? And you guys still support Windows XP?
```



---

archive/issue_comments_132500.json:
```json
{
    "body": "<a id='comment:38'></a>I would say: as long as it's easily doable to support OS X 10.4, let's do it.  If some day, Sage needs a compelling feature from recent OS X, I wouldn't mind dropping support for older OS X versions.",
    "created_at": "2011-11-14T08:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132500",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>I would say: as long as it's easily doable to support OS X 10.4, let's do it.  If some day, Sage needs a compelling feature from recent OS X, I wouldn't mind dropping support for older OS X versions.



---

archive/issue_comments_132501.json:
```json
{
    "body": "<a id='comment:39'></a>Just figured out what happens (not why nor how to fix it):\n\nThe upstream ECL building script creates a library `liblsp.a` using the system's `ar` and `ranlib` tools.  Then the script **manually** appends 24 bytes to the .a file.  Then `libtool` trips over these extra bytes.\n\nSo the problem is certainly upstream.",
    "created_at": "2011-11-14T10:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132501",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>Just figured out what happens (not why nor how to fix it):

The upstream ECL building script creates a library `liblsp.a` using the system's `ar` and `ranlib` tools.  Then the script **manually** appends 24 bytes to the .a file.  Then `libtool` trips over these extra bytes.

So the problem is certainly upstream.



---

archive/issue_comments_132502.json:
```json
{
    "body": "<a id='comment:40'></a>The upstream problem on OS X 10.4 seems to have been introduced recently so going back to some earlier version might solve it.  I will make a new spkg.",
    "created_at": "2011-11-14T14:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132502",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>The upstream problem on OS X 10.4 seems to have been introduced recently so going back to some earlier version might solve it.  I will make a new spkg.



---

archive/issue_comments_132503.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-11-14T15:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132503",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_132504.json:
```json
{
    "body": "<a id='comment:41'></a>New spkg which builds on OS X 10.4: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecl-11.1.2.cvs20111107.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecl-11.1.2.cvs20111107.p0.spkg)\n\nPlease test this on OS X 10.7, I have no such machine.",
    "created_at": "2011-11-14T15:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132504",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>New spkg which builds on OS X 10.4: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecl-11.1.2.cvs20111107.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecl-11.1.2.cvs20111107.p0.spkg)

Please test this on OS X 10.7, I have no such machine.



---

archive/issue_comments_132505.json:
```json
{
    "body": "<a id='comment:43'></a>5 hours, impressive...",
    "created_at": "2011-11-14T22:21:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132505",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>5 hours, impressive...



---

archive/issue_comments_132506.json:
```json
{
    "body": "<a id='comment:45'></a>The spkg ecl-11.1.2.cvs20111107.p0.spkg doesn't build for me on OS X 10.7.  Log file: [http://sage.math.washington.edu/home/palmieri/misc/ecl-11.1.2.cvs20111107.p0.log](http://sage.math.washington.edu/home/palmieri/misc/ecl-11.1.2.cvs20111107.p0.log).  \n\nThe spkg ecl-11.1.2.cvs20111115.p0.spkg does build, and `sage --lisp` starts up and does a simple calculation (about all that I'm capable of in lisp these days).  After that, `sage -f maxima-...` works (with the maxima spkg from #11966).",
    "created_at": "2011-11-15T16:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132506",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:45'></a>The spkg ecl-11.1.2.cvs20111107.p0.spkg doesn't build for me on OS X 10.7.  Log file: [http://sage.math.washington.edu/home/palmieri/misc/ecl-11.1.2.cvs20111107.p0.log](http://sage.math.washington.edu/home/palmieri/misc/ecl-11.1.2.cvs20111107.p0.log).  

The spkg ecl-11.1.2.cvs20111115.p0.spkg does build, and `sage --lisp` starts up and does a simple calculation (about all that I'm capable of in lisp these days).  After that, `sage -f maxima-...` works (with the maxima spkg from #11966).



---

archive/issue_comments_132507.json:
```json
{
    "body": "<a id='comment:48'></a>The spkg looks good to me except that you haven't committed your changes.",
    "created_at": "2011-11-15T18:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132507",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:48'></a>The spkg looks good to me except that you haven't committed your changes.



---

archive/issue_comments_132508.json:
```json
{
    "body": "<a id='comment:49'></a>I can confirm that `sage -ecl` gives `4` when I enter `(+ 2 2)` on OS X PPC with this spkg.  Amazing sleuthing...",
    "created_at": "2011-11-15T18:28:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132508",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:49'></a>I can confirm that `sage -ecl` gives `4` when I enter `(+ 2 2)` on OS X PPC with this spkg.  Amazing sleuthing...



---

archive/issue_comments_132509.json:
```json
{
    "body": "<a id='comment:50'></a>Did anyone try this and then the new Maxima spkg at #11966 on OS X 10.4 PPC?  There is an error with the Maxima that looks nearly identical to the message on this one, about the archive header extending...",
    "created_at": "2011-11-15T18:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132509",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:50'></a>Did anyone try this and then the new Maxima spkg at #11966 on OS X 10.4 PPC?  There is an error with the Maxima that looks nearly identical to the message on this one, about the archive header extending...



---

archive/issue_comments_132510.json:
```json
{
    "body": "Attachment [ecl-11.1.2.cvs20111115.diff](tarball://root/attachments/some-uuid/ticket11884/ecl-11.1.2.cvs20111115.diff) by @jdemeyer created at 2011-11-16 13:57:10\n\nDiff between ecl-11.1.2.git.20111030.p0.spkg  and ecl-11.1.2.cvs20111115.p0.spkg",
    "created_at": "2011-11-16T13:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132510",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [ecl-11.1.2.cvs20111115.diff](tarball://root/attachments/some-uuid/ticket11884/ecl-11.1.2.cvs20111115.diff) by @jdemeyer created at 2011-11-16 13:57:10

Diff between ecl-11.1.2.git.20111030.p0.spkg  and ecl-11.1.2.cvs20111115.p0.spkg



---

archive/issue_comments_132511.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:48 jhpalmieri]:\n> The spkg looks good to me except that you haven't committed your changes.\n\n\nI wanted to make sure it actually worked on OS X Lion.  I committed now, does the spkg get a positive review then?",
    "created_at": "2011-11-16T13:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132511",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'></a>Replying to [comment:48 jhpalmieri]:
> The spkg looks good to me except that you haven't committed your changes.


I wanted to make sure it actually worked on OS X Lion.  I committed now, does the spkg get a positive review then?



---

archive/issue_comments_132512.json:
```json
{
    "body": "<a id='comment:52'></a>What about kcrisman's comment about maxima not working on OS X 10.4 PPC?  Otherwise, I'm ready to give this a positive review.",
    "created_at": "2011-11-16T18:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132512",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:52'></a>What about kcrisman's comment about maxima not working on OS X 10.4 PPC?  Otherwise, I'm ready to give this a positive review.



---

archive/issue_comments_132513.json:
```json
{
    "body": "<a id='comment:53'></a>I've tried all four combinations.\n\nWorks:\n* Old ECL + Old Maxima\n\nDoesn't build, error as noted on #11996:\n* New ECL + New Maxima\n\nBuilds Maxima but doesn't create the library version properly:\n* New ECL + Old Maxima\n\nCurrently trying, but seems pointless:\n* Old ECL + New Maxima",
    "created_at": "2011-11-16T18:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132513",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:53'></a>I've tried all four combinations.

Works:
* Old ECL + Old Maxima

Doesn't build, error as noted on #11996:
* New ECL + New Maxima

Builds Maxima but doesn't create the library version properly:
* New ECL + Old Maxima

Currently trying, but seems pointless:
* Old ECL + New Maxima



---

archive/issue_comments_132514.json:
```json
{
    "body": "<a id='comment:54'></a>I can confirm kcrisman's findings.  With the ECL package from 2011-11-07 (which unfortunately does *not* work on OS X 10.7), Maxima builds properly.",
    "created_at": "2011-11-16T19:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132514",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>I can confirm kcrisman's findings.  With the ECL package from 2011-11-07 (which unfortunately does *not* work on OS X 10.7), Maxima builds properly.



---

archive/issue_comments_132515.json:
```json
{
    "body": "<a id='comment:55'></a>So what should we do?  How hard is it to identify the differences between the two packages (2011-11-07 and 2011-11-15)?  Then we could turn those differences into patches, and either build the earlier package on all platforms except Lion and apply the patches to build on Lion, or else apply the patches on all platforms except OS X 10.4 PPC.\n\n(If this sounds like a good idea, I can't help much: I know nothing about git, and I also don't have a lot of time to work on this right now.)",
    "created_at": "2011-11-16T19:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132515",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:55'></a>So what should we do?  How hard is it to identify the differences between the two packages (2011-11-07 and 2011-11-15)?  Then we could turn those differences into patches, and either build the earlier package on all platforms except Lion and apply the patches to build on Lion, or else apply the patches on all platforms except OS X 10.4 PPC.

(If this sounds like a good idea, I can't help much: I know nothing about git, and I also don't have a lot of time to work on this right now.)



---

archive/issue_comments_132516.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-11-16T19:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132516",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_132517.json:
```json
{
    "body": "<a id='comment:56'></a>Replying to [comment:55 jhpalmieri]:\n> So what should we do?  How hard is it to identify the differences between the two packages (2011-11-07 and 2011-11-15)?\n\n\nUnfortunately, *a lot* changed those days.  It seems these changed made ECL work on OS X 10.7.\n\nThe best thing to do is probably to report this upstream, I will look into it.",
    "created_at": "2011-11-16T19:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132517",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>Replying to [comment:55 jhpalmieri]:
> So what should we do?  How hard is it to identify the differences between the two packages (2011-11-07 and 2011-11-15)?


Unfortunately, *a lot* changed those days.  It seems these changed made ECL work on OS X 10.7.

The best thing to do is probably to report this upstream, I will look into it.



---

archive/issue_comments_132518.json:
```json
{
    "body": "<a id='comment:57'></a>Replying to [comment:55 jhpalmieri]:\n> So what should we do?  How hard is it to identify the differences between the two packages (2011-11-07 and 2011-11-15)?  Then we could turn those differences into patches.\n\n\nIt's hard to believe, but the diff between today and 2011-11-07 is 846KB(!).",
    "created_at": "2011-11-16T19:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132518",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>Replying to [comment:55 jhpalmieri]:
> So what should we do?  How hard is it to identify the differences between the two packages (2011-11-07 and 2011-11-15)?  Then we could turn those differences into patches.


It's hard to believe, but the diff between today and 2011-11-07 is 846KB(!).



---

archive/issue_comments_132519.json:
```json
{
    "body": "<a id='comment:61'></a>This builds on OS X 10.6, OS X 10.7, and on sage.math: on these systems, I built the spkg and then maxima on top of it, and both `sage --lisp` and `sage --maxima` appear to work.  On sage.math, I've also built from scratch successfully.  I'm building from scratch on OS X 10.7, but that will take a while to complete.\n\nI have no access to an OS X 10.4 machine, so I can't test there.",
    "created_at": "2011-11-24T23:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132519",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:61'></a>This builds on OS X 10.6, OS X 10.7, and on sage.math: on these systems, I built the spkg and then maxima on top of it, and both `sage --lisp` and `sage --maxima` appear to work.  On sage.math, I've also built from scratch successfully.  I'm building from scratch on OS X 10.7, but that will take a while to complete.

I have no access to an OS X 10.4 machine, so I can't test there.



---

archive/issue_comments_132520.json:
```json
{
    "body": "<a id='comment:62'></a>By the way, why did you delete this entry in the change log?\n\n```\nAdd file spkg-make to re-create the src/ tree using CVS.\n```\nI thought it was useful.",
    "created_at": "2011-11-24T23:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132520",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:62'></a>By the way, why did you delete this entry in the change log?

```
Add file spkg-make to re-create the src/ tree using CVS.
```
I thought it was useful.



---

archive/issue_comments_132521.json:
```json
{
    "body": "<a id='comment:63'></a>Replying to [comment:62 jhpalmieri]:\n> By the way, why did you delete this entry in the change log?\n> \n> ```\n> Add file spkg-make to re-create the src/ tree using CVS.\n> ```\n> I thought it was useful.\n\nThat was by mistake, corrected now.\n\nI am testing on OS X 10.4 PPC now.",
    "created_at": "2011-11-25T09:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132521",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:63'></a>Replying to [comment:62 jhpalmieri]:
> By the way, why did you delete this entry in the change log?
> 
> ```
> Add file spkg-make to re-create the src/ tree using CVS.
> ```
> I thought it was useful.

That was by mistake, corrected now.

I am testing on OS X 10.4 PPC now.



---

archive/issue_comments_132522.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-11-26T11:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132522",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_132523.json:
```json
{
    "body": "<a id='comment:64'></a>Seems to work on all OS X systems, and Maxima also, so positive_review.",
    "created_at": "2011-11-26T11:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132523",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:64'></a>Seems to work on all OS X systems, and Maxima also, so positive_review.



---

archive/issue_events_031409.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-26T11:27:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11884#event-31409"
}
```



---

archive/issue_comments_132524.json:
```json
{
    "body": "<a id='comment:65'></a>I can confirm that it also builds on Cygwin 1.7.9.",
    "created_at": "2011-12-01T04:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132524",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:65'></a>I can confirm that it also builds on Cygwin 1.7.9.



---

archive/issue_comments_132525.json:
```json
{
    "body": "<a id='comment:66'></a>> I can confirm that it also builds on Cygwin 1.7.9.\n\nTentatively setting #11260 to sage-invalid, then.",
    "created_at": "2011-12-03T02:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11884#issuecomment-132525",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:66'></a>> I can confirm that it also builds on Cygwin 1.7.9.

Tentatively setting #11260 to sage-invalid, then.
