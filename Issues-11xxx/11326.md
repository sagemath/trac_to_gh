# Issue 11326: make ATLAS respect CC environment variable

archive/issues_011154.json:
```json
{
    "body": "ATLAS does not respect the CC environment variable.\n\nFix with new build system (#10226): [http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg)\n\nSee Ticket #2999\n\n**Dependencies:** #10226\n\n**Reviewer:** Volker Braun\n\nIssue created by migration from https://trac.sagemath.org/ticket/11326\n\n",
    "closed_at": "2012-03-02T13:56:27Z",
    "created_at": "2011-05-11T15:40:45Z",
    "labels": [
        "component: packages: standard",
        "enhancement",
        "duplicate"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "make ATLAS respect CC environment variable",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11326",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```
ATLAS does not respect the CC environment variable.

Fix with new build system (#10226): [http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg)

See Ticket #2999

**Dependencies:** #10226

**Reviewer:** Volker Braun

Issue created by migration from https://trac.sagemath.org/ticket/11326





---

archive/issue_comments_143468.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n ATLAS does not respect the CC environment variable.\n \n+[http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg](http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg) fixes this problem.\n+\n See Ticket #2999\n``````\n",
    "created_at": "2011-05-11T15:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143468",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 ATLAS does not respect the CC environment variable.
 
+[http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg](http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg) fixes this problem.
+
 See Ticket #2999
``````




---

archive/issue_comments_143469.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-05-11T15:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143469",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

**Changing status** from new to needs_review.



---

archive/attachments_014847.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "atlas-3.8.3.p16-p17.diff",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11326/atlas-3.8.3.p16-p17.diff",
    "created_at": "2011-05-11T15:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.diff",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```



---

archive/issue_comments_143470.json:
```json
{
    "body": "Diff for the atlas spkg, for reviewing only.",
    "created_at": "2011-05-11T15:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143470",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Diff for the atlas spkg, for reviewing only.



---

archive/issue_comments_143471.json:
```json
{
    "body": "<a id='comment:2'></a>\nCan we implement that on top of #10226? I can make the necessary changes. \n\nAlso, it seems like we could avoid modifying the upstream configure script if we just pass `--cc=$CC` to the configure script. Is there a reason why you didn't follow this less invasive route?",
    "created_at": "2011-05-11T16:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143471",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
Can we implement that on top of #10226? I can make the necessary changes. 

Also, it seems like we could avoid modifying the upstream configure script if we just pass `--cc=$CC` to the configure script. Is there a reason why you didn't follow this less invasive route?



---

archive/issue_comments_143472.json:
```json
{
    "body": "**Changing status** from needs_review to needs_info.",
    "created_at": "2011-05-11T16:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143472",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_review to needs_info.



---

archive/issue_comments_143473.json:
```json
{
    "body": "<a id='comment:3'></a>\nI've made a new spkg\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg\n\nthat should respect `$CC`. It passes `--cc=$CC -C xc $CC -C gc $CC -C ic $CC -C dm $CC -C sm $SS -C dk $CC -C sk $CC` to the ATLAS configure script and afterwards fixes up `GOODGCC` in `Make.inc`. Note that ATLAS sets `GOODGCC = gcc $CC` if `$CC` does not start with `gcc`.\n\nI'm currently compiling it, but since `Make.inc` is generated correctly I'm fairly positive that this should work.",
    "created_at": "2011-05-11T17:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143473",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
I've made a new spkg

http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg

that should respect `$CC`. It passes `--cc=$CC -C xc $CC -C gc $CC -C ic $CC -C dm $CC -C sm $SS -C dk $CC -C sk $CC` to the ATLAS configure script and afterwards fixes up `GOODGCC` in `Make.inc`. Note that ATLAS sets `GOODGCC = gcc $CC` if `$CC` does not start with `gcc`.

I'm currently compiling it, but since `Make.inc` is generated correctly I'm fairly positive that this should work.



---

archive/issue_comments_143474.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis fails during linking because `GOODGCC` needs to include `-Fpic` on many platforms.",
    "created_at": "2011-05-11T17:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143474",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
This fails during linking because `GOODGCC` needs to include `-Fpic` on many platforms.



---

archive/issue_comments_143475.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2011-05-11T19:33:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143475",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_143476.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,9 @@\n ATLAS does not respect the CC environment variable.\n \n-[http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg](http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg) fixes this problem.\n+Fix using old build system: [http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg](http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg)\n+\n+Fix with new build system (#10226): [http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg)\n+\n+\n \n See Ticket #2999\n``````\n",
    "created_at": "2011-05-11T19:33:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143476",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,9 @@
 ATLAS does not respect the CC environment variable.
 
-[http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg](http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg) fixes this problem.
+Fix using old build system: [http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg](http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg)
+
+Fix with new build system (#10226): [http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg)
+
+
 
 See Ticket #2999
``````




---

archive/issue_comments_143477.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe new version works now. To test it I created a symlink /bin/false -> gcc and set `$CC` to the correct gcc, and it compiled fine. \n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg",
    "created_at": "2011-05-11T19:33:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143477",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>
The new version works now. To test it I created a symlink /bin/false -> gcc and set `$CC` to the correct gcc, and it compiled fine. 

http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg



---

archive/issue_comments_143478.json:
```json
{
    "body": "**Changing author** from \"Mariah Lenox\" to \"Volker Braun\".",
    "created_at": "2011-05-11T20:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143478",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

**Changing author** from "Mariah Lenox" to "Volker Braun".



---

archive/issue_comments_143479.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,7 @@\n ATLAS does not respect the CC environment variable.\n-\n-Fix using old build system: [http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg](http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg)\n \n Fix with new build system (#10226): [http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg)\n \n-\n+Apply after #10226 is positively reviewed.\n \n See Ticket #2999\n``````\n",
    "created_at": "2011-05-11T20:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143479",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,7 @@
 ATLAS does not respect the CC environment variable.
-
-Fix using old build system: [http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg](http://boxen.math.washington.edu/home/mariah/spkg/atlas-3.8.3.p17.spkg)
 
 Fix with new build system (#10226): [http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg)
 
-
+Apply after #10226 is positively reviewed.
 
 See Ticket #2999
``````




---

archive/issue_comments_143480.json:
```json
{
    "body": "**Reviewer:** Mariah Lenox",
    "created_at": "2011-05-11T20:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143480",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

**Reviewer:** Mariah Lenox



---

archive/issue_comments_143481.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-05-11T20:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143481",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_143482.json:
```json
{
    "body": "<a id='comment:6'></a>\natlas-3.8.3.p18.spkg successfully builds using $CC.  Positive review.",
    "created_at": "2011-05-11T20:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143482",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:6'></a>
atlas-3.8.3.p18.spkg successfully builds using $CC.  Positive review.



---

archive/issue_events_035096.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-12T12:59:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "milestone": "sage-feature",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11326#event-35096"
}
```



---

archive/issue_comments_143483.json:
```json
{
    "body": "<a id='comment:7'></a>\nPostponing this because of #10226.",
    "created_at": "2011-05-12T12:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143483",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Postponing this because of #10226.



---

archive/issue_comments_143484.json:
```json
{
    "body": "**Dependencies:** #10226",
    "created_at": "2011-06-01T12:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143484",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #10226



---

archive/issue_comments_143485.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,6 +2,4 @@\n \n Fix with new build system (#10226): [http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg)\n \n-Apply after #10226 is positively reviewed.\n-\n See Ticket #2999\n``````\n",
    "created_at": "2011-06-01T12:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143485",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,6 +2,4 @@
 
 Fix with new build system (#10226): [http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.8.3.p18.spkg)
 
-Apply after #10226 is positively reviewed.
-
 See Ticket #2999
``````




---

archive/issue_events_035097.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-10T08:39:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "milestone": "sage-feature",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11326#event-35097"
}
```



---

archive/issue_events_035098.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-27T13:42:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11326#event-35098"
}
```



---

archive/issue_comments_143486.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2011-07-27T13:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143486",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_143487.json:
```json
{
    "body": "**Work_Issues:** Rebase to #10226",
    "created_at": "2011-07-27T13:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143487",
    "user": "https://github.com/jdemeyer"
}
```

**Work_Issues:** Rebase to #10226



---

archive/issue_comments_143488.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis needs to be rebased to the ATLAS spkg from #10226.",
    "created_at": "2011-07-27T13:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143488",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
This needs to be rebased to the ATLAS spkg from #10226.



---

archive/issue_comments_143489.json:
```json
{
    "body": "<a id='comment:11'></a>\nThis has been merged into #10226 a long time ago, but apparently we forgot to close this ticket.",
    "created_at": "2012-02-26T19:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143489",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>
This has been merged into #10226 a long time ago, but apparently we forgot to close this ticket.



---

archive/issue_comments_143490.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2012-02-26T19:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143490",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_events_035099.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-02-26T19:43:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11326#event-35099"
}
```



---

archive/issue_events_035100.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-02-26T19:43:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11326#event-35100"
}
```



---

archive/issue_comments_143491.json:
```json
{
    "body": "**Changing reviewer** from \"Mariah Lenox\" to \"Volker Braun\".",
    "created_at": "2012-03-02T13:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143491",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Mariah Lenox" to "Volker Braun".



---

archive/issue_events_035101.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-02T13:56:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11326#event-35101"
}
```



---

archive/issue_comments_143492.json:
```json
{
    "body": "**Changing author** from \"Volker Braun\" to \"\".",
    "created_at": "2012-03-02T13:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143492",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Volker Braun" to "".



---

archive/issue_comments_143493.json:
```json
{
    "body": "**Changing work_issues** from \"Rebase to #10226\" to \"\".",
    "created_at": "2012-03-02T13:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11326#issuecomment-143493",
    "user": "https://github.com/jdemeyer"
}
```

**Changing work_issues** from "Rebase to #10226" to "".
