# Issue 11126: Fix category of Symbolic Ring

archive/issues_010987.json:
```json
{
    "assignees": [],
    "body": "The symbolic ring (`SR`) in Sage currently considers itself to be a field and therefore also an integral domain:\n\n```\nsage: SR.is_field()\nTrue\nsage: SR.is_integral_domain()\nTrue\n```\nHowever, it is confused about its category:\n\n```\nsage: SR.category()\nCategory of commutative rings\nsage: SR in PrincipalIdealDomains()\nFalse\nsage: SR in Fields()\nTrue\n```\nThe last command causes the category of `SR` to be refined, and running the same commands again gives a different output:\n\n```\nsage: SR.category()\nCategory of fields\nsage: SR in PrincipalIdealDomains()\nTrue\nsage: SR in Fields()\nTrue\n```\nThis ticket makes `SR.is_field()` and `SR.is_integral_domain()` return `False`.\n\nBecause of this, one now has to indicate explicitly in the code when one takes the risk of treating the symbolic ring as a field.  This is currently only done for a couple of linear algebra methods and for points on elliptic curves over the symbolic ring.\n\nA few constructions (which were mathematically meaningless anyway) are now disallowed:\n- quaternion algebras over the symbolic ring\n- converting a symbolic expression into a rational function over the symbolic ring\n- minimal polynomials of matrices over the symbolic ring\n\n\nDepends on #18040\n\nAssignee: **@burcin**\n\nCC:  @rwst\n\nKeywords: **symbolic ring category**\n\nBranch/Commit: **[u/pbruin/11126-SymbolicRing_not_domain](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/11126-SymbolicRing_not_domain) @ [82b9860](https://github.com/sagemath/sagetrac-mirror/commit/82b9860a3d47ee19f944a3b357b9d0e943226a54)**\n\nStopgaps: **todo**\n\nAuthor: **Peter Bruin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11126_\n\n",
    "created_at": "2011-04-04T17:00:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix category of Symbolic Ring",
    "type": "issue",
    "updated_at": "2022-12-29T01:31:15Z",
    "url": "https://github.com/sagemath/sage/issues/11126",
    "user": "https://github.com/sagetrac-duenez"
}
```
The symbolic ring (`SR`) in Sage currently considers itself to be a field and therefore also an integral domain:

```
sage: SR.is_field()
True
sage: SR.is_integral_domain()
True
```
However, it is confused about its category:

```
sage: SR.category()
Category of commutative rings
sage: SR in PrincipalIdealDomains()
False
sage: SR in Fields()
True
```
The last command causes the category of `SR` to be refined, and running the same commands again gives a different output:

```
sage: SR.category()
Category of fields
sage: SR in PrincipalIdealDomains()
True
sage: SR in Fields()
True
```
This ticket makes `SR.is_field()` and `SR.is_integral_domain()` return `False`.

Because of this, one now has to indicate explicitly in the code when one takes the risk of treating the symbolic ring as a field.  This is currently only done for a couple of linear algebra methods and for points on elliptic curves over the symbolic ring.

A few constructions (which were mathematically meaningless anyway) are now disallowed:
- quaternion algebras over the symbolic ring
- converting a symbolic expression into a rational function over the symbolic ring
- minimal polynomials of matrices over the symbolic ring


Depends on #18040

Assignee: **@burcin**

CC:  @rwst

Keywords: **symbolic ring category**

Branch/Commit: **[u/pbruin/11126-SymbolicRing_not_domain](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/11126-SymbolicRing_not_domain) @ [82b9860](https://github.com/sagemath/sagetrac-mirror/commit/82b9860a3d47ee19f944a3b357b9d0e943226a54)**

Stopgaps: **todo**

Author: **Peter Bruin**

_Issue created by migration from https://trac.sagemath.org/ticket/11126_





---

archive/issue_events_134654.json:
```json
{
    "actor": "https://github.com/sagetrac-duenez",
    "created_at": "2011-04-04T17:00:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134654"
}
```



---

archive/issue_events_134655.json:
```json
{
    "actor": "https://github.com/sagetrac-duenez",
    "created_at": "2011-04-04T17:00:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134655"
}
```



---

archive/issue_events_134656.json:
```json
{
    "actor": "https://github.com/sagetrac-duenez",
    "created_at": "2011-04-04T17:00:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134656"
}
```



---

archive/issue_events_134657.json:
```json
{
    "actor": "https://github.com/sagetrac-duenez",
    "created_at": "2011-04-04T17:00:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134657"
}
```



---

archive/issue_events_134658.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-10T22:11:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134658"
}
```



---

archive/issue_events_134659.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-10T22:11:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134659"
}
```



---

archive/issue_events_134660.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-10T22:11:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134660"
}
```



---

archive/issue_events_134661.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-10T22:11:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134661"
}
```



---

archive/issue_comments_112623.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nThis seemed to be fixed at some point. Worked for me in `5.5.rc0`.\n\n```\nsage: SR.is_integral_domain()\nTrue\n```",
    "created_at": "2012-12-10T22:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112623",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">Comment 1</div>

This seemed to be fixed at some point. Worked for me in `5.5.rc0`.

```
sage: SR.is_integral_domain()
True
```



---

archive/issue_comments_112624.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nAn error is actually the more appropriate thing to return, since the symbolic ring is neither a field nor an integral domain and code that is interested in knowing these things is likely making invalid use of the symbolic ring:\n\n```\nkronecker_delta(x,0)*(1-kronecker_delta(x,0))\n```",
    "created_at": "2012-12-10T23:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112624",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:2" align="right">Comment 2</div>

An error is actually the more appropriate thing to return, since the symbolic ring is neither a field nor an integral domain and code that is interested in knowing these things is likely making invalid use of the symbolic ring:

```
kronecker_delta(x,0)*(1-kronecker_delta(x,0))
```



---

archive/issue_comments_112625.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nThe problem with SR not being reported as a field (or integral domain) is that several Linear Algebra methods require this behavior. For example solving a linear system with symbolic variables, eigen-value computation, etc. Or at least that was the original reason why I raised this issue. It might no longer be true.\n\nCheers,\n\nEdgar",
    "created_at": "2012-12-11T14:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112625",
    "user": "https://github.com/sagetrac-duenez"
}
```

<div id="comment:3" align="right">Comment 3</div>

The problem with SR not being reported as a field (or integral domain) is that several Linear Algebra methods require this behavior. For example solving a linear system with symbolic variables, eigen-value computation, etc. Or at least that was the original reason why I raised this issue. It might no longer be true.

Cheers,

Edgar



---

archive/issue_comments_112626.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nReplying to [@sagetrac-duenez](#comment%3A3):\n> The problem with SR not being reported as a field (or integral domain) is that several Linear Algebra methods require this behavior. For example solving a linear system with symbolic variables, eigen-value computation, etc. Or at least that was the original reason why I raised this issue. It might no longer be true.\n\nI have little doubt it still is. I suspect that one should just be pragmatic with SR and just keep fingers crossed when trying computations with SR. If they succeed: great! The answer might even be correct. If not: formulate the problem in another way.",
    "created_at": "2012-12-11T17:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112626",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:4" align="right">Comment 4</div>

Replying to [@sagetrac-duenez](#comment%3A3):
> The problem with SR not being reported as a field (or integral domain) is that several Linear Algebra methods require this behavior. For example solving a linear system with symbolic variables, eigen-value computation, etc. Or at least that was the original reason why I raised this issue. It might no longer be true.

I have little doubt it still is. I suspect that one should just be pragmatic with SR and just keep fingers crossed when trying computations with SR. If they succeed: great! The answer might even be correct. If not: formulate the problem in another way.



---

archive/issue_comments_112627.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nI am a bit confused... It seems to me you are suggesting that I should simply accept that sage might refuse to perform symbolic calculations when solving systems of linear equations... or worse yet, perform them and be wrong. Also, I should just deal with it if it doesn't work like I want.\n\nIf this is not what you meant, I apologize, but if it is, I think you are having a very alienating attitude towards your user-base. Sure, one has to be thankful for what one receives for free. I appreciate sage so very much. But to tell me to \"suck it up\" is hardly the way. Is it really that unreasonable to ask for some intelligent discussion about the implementation, definition and use of the symbolic ring?\n\nIf you ask me, you either split symbolics into symbolic group, ring, field, etc., or decide to be as permissive as possible with the operations that you are allowing and shift the responsibility into the user. Ideally you would expose which assumptions were used, or which assumptions should be used when performing a symbolic calculation.\n\nRegards,",
    "created_at": "2012-12-17T10:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112627",
    "user": "https://github.com/sagetrac-duenez"
}
```

<div id="comment:5" align="right">Comment 5</div>

I am a bit confused... It seems to me you are suggesting that I should simply accept that sage might refuse to perform symbolic calculations when solving systems of linear equations... or worse yet, perform them and be wrong. Also, I should just deal with it if it doesn't work like I want.

If this is not what you meant, I apologize, but if it is, I think you are having a very alienating attitude towards your user-base. Sure, one has to be thankful for what one receives for free. I appreciate sage so very much. But to tell me to "suck it up" is hardly the way. Is it really that unreasonable to ask for some intelligent discussion about the implementation, definition and use of the symbolic ring?

If you ask me, you either split symbolics into symbolic group, ring, field, etc., or decide to be as permissive as possible with the operations that you are allowing and shift the responsibility into the user. Ideally you would expose which assumptions were used, or which assumptions should be used when performing a symbolic calculation.

Regards,



---

archive/issue_comments_112628.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nReplying to [@sagetrac-duenez](#comment%3A5):\n> I am a bit confused... It seems to me you are suggesting that I should simply accept that sage might refuse to perform symbolic calculations when solving systems of linear equations... or worse yet, perform them and be wrong. Also, I should just deal with it if it doesn't work like I want.\n\nWhat I suspect is happening is that linear algebra over SR tries to use generic linear algebra code which wants to know some properties of the ring it's working over in order to know how to proceed (i.e., is it a field? an integral domain?). The symbolic ring doesn't really fit such a rigorous approach and I suspect that most of its benefits stem from that: It's just an algebra of \"expression trees\". If SR were honest, and report it's not a field and not an integral domain, hardly anything would work. There's a benefit to lying and a lot of things WILL sort of work, because zero-divisors are relatively hard to construct. However, they do exist in SR, so I suspect that you can construct linear algebra examples for which a wrong answer is generated, because the code runs into a zero divisor (which was promised to not exist by claiming it's an integral domain).\n\nSR is just trying to be a bit too much to expect a rigorous algebraic approach to apply to it and still end up with something useful. Testing equality in it is known to be undecidable.\n\nI certainly wouldn't want to stand in the way of an intelligent discussion to improve the situation. Great mathematics happens in the face of great problems. I just thought a word of caution to moderate expectations was in order.\n\nA similar thing happens (for different reasons) with the \"numerical\" rings. RR and CC claim to be fields too, but due to the numerical nature of the representation of their elements, they are not. Operations aren't even commutative and any float operations that rely on true equality testing are inherently broken. Linear algebra there is really quite tenuous and we can't rely on the generic approaches at all.\nHow to deal with that is an entire field of mathematics.\n\n(now note that SR in fact contains float arithmetic as well to see that you can't really hope that generic approaches are always safe for SR).",
    "created_at": "2012-12-19T07:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112628",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:6" align="right">Comment 6</div>

Replying to [@sagetrac-duenez](#comment%3A5):
> I am a bit confused... It seems to me you are suggesting that I should simply accept that sage might refuse to perform symbolic calculations when solving systems of linear equations... or worse yet, perform them and be wrong. Also, I should just deal with it if it doesn't work like I want.

What I suspect is happening is that linear algebra over SR tries to use generic linear algebra code which wants to know some properties of the ring it's working over in order to know how to proceed (i.e., is it a field? an integral domain?). The symbolic ring doesn't really fit such a rigorous approach and I suspect that most of its benefits stem from that: It's just an algebra of "expression trees". If SR were honest, and report it's not a field and not an integral domain, hardly anything would work. There's a benefit to lying and a lot of things WILL sort of work, because zero-divisors are relatively hard to construct. However, they do exist in SR, so I suspect that you can construct linear algebra examples for which a wrong answer is generated, because the code runs into a zero divisor (which was promised to not exist by claiming it's an integral domain).

SR is just trying to be a bit too much to expect a rigorous algebraic approach to apply to it and still end up with something useful. Testing equality in it is known to be undecidable.

I certainly wouldn't want to stand in the way of an intelligent discussion to improve the situation. Great mathematics happens in the face of great problems. I just thought a word of caution to moderate expectations was in order.

A similar thing happens (for different reasons) with the "numerical" rings. RR and CC claim to be fields too, but due to the numerical nature of the representation of their elements, they are not. Operations aren't even commutative and any float operations that rely on true equality testing are inherently broken. Linear algebra there is really quite tenuous and we can't rely on the generic approaches at all.
How to deal with that is an entire field of mathematics.

(now note that SR in fact contains float arithmetic as well to see that you can't really hope that generic approaches are always safe for SR).



---

archive/issue_events_134662.json:
```json
{
    "actor": "https://github.com/KPanComputes",
    "created_at": "2013-03-08T14:38:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134662"
}
```



---

archive/issue_events_134663.json:
```json
{
    "actor": "https://github.com/KPanComputes",
    "created_at": "2013-03-08T14:38:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134663"
}
```



---

archive/issue_events_134664.json:
```json
{
    "actor": "https://github.com/KPanComputes",
    "created_at": "2013-03-08T14:38:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134664"
}
```



---

archive/issue_comments_112629.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nGiven the discussion here, I think we should discuss this further and decide. Certainly, it seems to me that this is not sage_invalid. I shall set this to needs_info while we discuss this issue.",
    "created_at": "2013-03-08T14:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112629",
    "user": "https://github.com/KPanComputes"
}
```

<div id="comment:7" align="right">Comment 7</div>

Given the discussion here, I think we should discuss this further and decide. Certainly, it seems to me that this is not sage_invalid. I shall set this to needs_info while we discuss this issue.



---

archive/issue_events_134665.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134665"
}
```



---

archive/issue_events_134666.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134666"
}
```



---

archive/issue_comments_112630.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nHi!\n\nWhy not adding a subset of symbolic Ring which forms a Field?\nI think a good choice would be the subset of all symbolic functions which are\nmeromorphic. \n\nThe Meromorph functions form a field, and contain most of the symbolic functions in use. Additionally this could be handy if we want to introduce differential algebras for symbolic integration and differentiation.",
    "created_at": "2013-12-19T13:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112630",
    "user": "https://github.com/sagetrac-maldun"
}
```

<div id="comment:9" align="right">Comment 9</div>

Hi!

Why not adding a subset of symbolic Ring which forms a Field?
I think a good choice would be the subset of all symbolic functions which are
meromorphic. 

The Meromorph functions form a field, and contain most of the symbolic functions in use. Additionally this could be handy if we want to introduce differential algebras for symbolic integration and differentiation.



---

archive/issue_events_134667.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134667"
}
```



---

archive/issue_events_134668.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134668"
}
```



---

archive/issue_events_134669.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134669"
}
```



---

archive/issue_events_134670.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134670"
}
```



---

archive/issue_events_134671.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134671"
}
```



---

archive/issue_events_134672.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134672"
}
```



---

archive/issue_comments_112631.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,41 +1,29 @@\n-The symbolic ring (SR) in sage is considered a field:\n+The symbolic ring (`SR`) in Sage currently considers itself to be a field and therefore also an integral domain:\n \n ```\n-  sage: SR.is_field()\n-  True\n+sage: SR.is_field()\n+True\n+sage: SR.is_integral_domain()\n+True\n ```\n-but it is not considered an integer domain:\n+However, it is confused about its category:\n \n ```\n-  sage: SR.is_integer_domain()\n-  NotImplementedError                       Traceback (most recent call last)\n+sage: SR.category()\n+Category of commutative rings\n+sage: SR in PrincipalIdealDomains()\n+False\n+sage: SR in Fields()\n+True\n+```\n+The last command causes the category of `SR` to be refined, and running the same commands again gives a different output:\n \n-/***/sage-4.6.2-linux-32bit-ubuntu_10.04_lts-i686-Linux-i686-Linux/<ipython console> in <module>()\n-\n-/***/sage-4.6.2-linux-32bit-ubuntu_10.04_lts-i686-Linux-i686-Linux/local/lib/python2.6/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.solve_right (sage/matrix/matrix2.c:3387)()\n-\n-/***/sage-4.6.2-linux-32bit-ubuntu_10.04_lts-i686-Linux-i686-Linux/local/lib/python2.6/site-packages/sage/rings/ring.so in sage.rings.ring.Ring.is_integral_domain (sage/rings/ring.c:6035)()\n-\n-NotImplementedError:\n ```\n-However, functions like matrix's **solve_right()** (correctly) test for the ring being integral domain before testing for the ring being a field. Thus, matrices with symbolic entries fail with an exception when trying to use **solve_right()** and related functions.\n-\n-This behavior was introduced by ticket #10481 where they (correctly) changed the behavior of **is_integral_domain() **of a ring to raise an exception instead of returning it.\n-\n-The problems is that **SR** does not override **is_integral_domain() **correctly. I propose the addition of the following function to sage/symbolic/rings.pyx\n-\n-```python\n-    def is_integral_domain(self, proof = True):\n-        \"\"\"\n-        Returns True, since the symbolic expression ring is reported as a\n-        field.\n-        \n-        EXAMPLES::\n-        \n-            sage: SR.is_integral_domain()\n-            True\n-        \"\"\"\n-        return True\n+sage: SR.category()\n+Category of fields\n+sage: SR in PrincipalIdealDomains()\n+True\n+sage: SR in Fields()\n+True\n ```\n-\n-What do you think?\n+We should either make `SR.is_field()` return `False` (which is the only mathematically correct option) or put `SR` in `Fields()` from the beginning.\n``````\n",
    "created_at": "2015-01-21T09:55:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112631",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,41 +1,29 @@
-The symbolic ring (SR) in sage is considered a field:
+The symbolic ring (`SR`) in Sage currently considers itself to be a field and therefore also an integral domain:
 
 ```
-  sage: SR.is_field()
-  True
+sage: SR.is_field()
+True
+sage: SR.is_integral_domain()
+True
 ```
-but it is not considered an integer domain:
+However, it is confused about its category:
 
 ```
-  sage: SR.is_integer_domain()
-  NotImplementedError                       Traceback (most recent call last)
+sage: SR.category()
+Category of commutative rings
+sage: SR in PrincipalIdealDomains()
+False
+sage: SR in Fields()
+True
+```
+The last command causes the category of `SR` to be refined, and running the same commands again gives a different output:
 
-/***/sage-4.6.2-linux-32bit-ubuntu_10.04_lts-i686-Linux-i686-Linux/<ipython console> in <module>()
-
-/***/sage-4.6.2-linux-32bit-ubuntu_10.04_lts-i686-Linux-i686-Linux/local/lib/python2.6/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.solve_right (sage/matrix/matrix2.c:3387)()
-
-/***/sage-4.6.2-linux-32bit-ubuntu_10.04_lts-i686-Linux-i686-Linux/local/lib/python2.6/site-packages/sage/rings/ring.so in sage.rings.ring.Ring.is_integral_domain (sage/rings/ring.c:6035)()
-
-NotImplementedError:
 ```
-However, functions like matrix's **solve_right()** (correctly) test for the ring being integral domain before testing for the ring being a field. Thus, matrices with symbolic entries fail with an exception when trying to use **solve_right()** and related functions.
-
-This behavior was introduced by ticket #10481 where they (correctly) changed the behavior of **is_integral_domain() **of a ring to raise an exception instead of returning it.
-
-The problems is that **SR** does not override **is_integral_domain() **correctly. I propose the addition of the following function to sage/symbolic/rings.pyx
-
-```python
-    def is_integral_domain(self, proof = True):
-        """
-        Returns True, since the symbolic expression ring is reported as a
-        field.
-        
-        EXAMPLES::
-        
-            sage: SR.is_integral_domain()
-            True
-        """
-        return True
+sage: SR.category()
+Category of fields
+sage: SR in PrincipalIdealDomains()
+True
+sage: SR in Fields()
+True
 ```
-
-What do you think?
+We should either make `SR.is_field()` return `False` (which is the only mathematically correct option) or put `SR` in `Fields()` from the beginning.
``````




---

archive/issue_events_134673.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-01-21T09:55:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "title_is": "Fix category of Symbolic Ring",
    "title_was": "Symbolic Ring is_integral_domain() throws exception",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134673"
}
```



---

archive/issue_comments_112632.json:
```json
{
    "body": "Changed keywords from **symbolics matrix** to **symbolic ring category**",
    "created_at": "2015-01-21T09:55:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112632",
    "user": "https://github.com/pjbruin"
}
```

Changed keywords from **symbolics matrix** to **symbolic ring category**



---

archive/issue_comments_112633.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -26,4 +26,12 @@\n sage: SR in Fields()\n True\n ```\n-We should either make `SR.is_field()` return `False` (which is the only mathematically correct option) or put `SR` in `Fields()` from the beginning.\n+This ticket makes `SR.is_field()` and `SR.is_integral_domain()` return `False`.\n+\n+Because of this, one now has to indicate explicitly in the code when one takes the risk of treating the symbolic ring as a field.  This is currently only done for a couple of linear algebra methods and for points on elliptic curves over the symbolic ring.\n+\n+A few constructions (which were mathematically meaningless anyway) are now disallowed:\n+- quaternion algebras over the symbolic ring\n+- converting a symbolic expression into a rational function over the symbolic ring\n+- minimal polynomials of matrices over the symbolic ring\n+\n``````\n",
    "created_at": "2015-03-20T14:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112633",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -26,4 +26,12 @@
 sage: SR in Fields()
 True
 ```
-We should either make `SR.is_field()` return `False` (which is the only mathematically correct option) or put `SR` in `Fields()` from the beginning.
+This ticket makes `SR.is_field()` and `SR.is_integral_domain()` return `False`.
+
+Because of this, one now has to indicate explicitly in the code when one takes the risk of treating the symbolic ring as a field.  This is currently only done for a couple of linear algebra methods and for points on elliptic curves over the symbolic ring.
+
+A few constructions (which were mathematically meaningless anyway) are now disallowed:
+- quaternion algebras over the symbolic ring
+- converting a symbolic expression into a rational function over the symbolic ring
+- minimal polynomials of matrices over the symbolic ring
+
``````




---

archive/issue_events_134674.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-20T14:07:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134674"
}
```



---

archive/issue_events_134675.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-20T14:07:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134675"
}
```



---

archive/issue_comments_112634.json:
```json
{
    "body": "Branch: **[u/pbruin/11126-SymbolicRing_not_domain](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/11126-SymbolicRing_not_domain)**",
    "created_at": "2015-03-20T14:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112634",
    "user": "https://github.com/pjbruin"
}
```

Branch: **[u/pbruin/11126-SymbolicRing_not_domain](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/11126-SymbolicRing_not_domain)**



---

archive/issue_comments_112635.json:
```json
{
    "body": "Changed author from **duenez** to **Peter Bruin**",
    "created_at": "2015-03-20T14:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112635",
    "user": "https://github.com/pjbruin"
}
```

Changed author from **duenez** to **Peter Bruin**



---

archive/issue_comments_112636.json:
```json
{
    "body": "Commit: **[82b9860](https://github.com/sagemath/sagetrac-mirror/commit/82b9860a3d47ee19f944a3b357b9d0e943226a54)**",
    "created_at": "2015-03-20T14:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112636",
    "user": "https://github.com/pjbruin"
}
```

Commit: **[82b9860](https://github.com/sagemath/sagetrac-mirror/commit/82b9860a3d47ee19f944a3b357b9d0e943226a54)**



---

archive/issue_comments_112637.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nHello,\n\nI really do not like the strategy. Starting to have special cases for the symbolic ring will be a nightmare to write and maintain. The symbolic ring is definitely an ugly (and very useful) piece of code but it should not be intrusive. Not speaking about the fact that a line like `from sage.symbolic.ring import SymbolicRing` takes time to be executed. The current situtation that makes SR thinks that it is a field looks much more natural to me: keep the bullshit in one place.\n\nAnd do you really think that we should support elliptic curves over the symbolic ring? I saw that there is an example in the doc, but we could just ignore it. From my perspective, `SR` should not even be a ring.\n\nCould you give more motivation of changing the current situation? I do not get it from the ticket description?\n\nVincent",
    "created_at": "2015-03-21T09:13:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112637",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">Comment 15</div>

Hello,

I really do not like the strategy. Starting to have special cases for the symbolic ring will be a nightmare to write and maintain. The symbolic ring is definitely an ugly (and very useful) piece of code but it should not be intrusive. Not speaking about the fact that a line like `from sage.symbolic.ring import SymbolicRing` takes time to be executed. The current situtation that makes SR thinks that it is a field looks much more natural to me: keep the bullshit in one place.

And do you really think that we should support elliptic curves over the symbolic ring? I saw that there is an example in the doc, but we could just ignore it. From my perspective, `SR` should not even be a ring.

Could you give more motivation of changing the current situation? I do not get it from the ticket description?

Vincent



---

archive/issue_events_134676.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T09:13:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134676"
}
```



---

archive/issue_events_134677.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T09:13:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134677"
}
```



---

archive/issue_events_134678.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-21T10:10:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134678"
}
```



---

archive/issue_events_134679.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-21T10:10:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134679"
}
```



---

archive/issue_comments_112638.json:
```json
{
    "body": "Dependencies: **#18040**",
    "created_at": "2015-03-23T12:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112638",
    "user": "https://github.com/pjbruin"
}
```

Dependencies: **#18040**



---

archive/issue_comments_112639.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI agree that my patch has to be improved.  However, I think that this can be done without globally pretending that the symbolic ring is a field.",
    "created_at": "2015-03-23T12:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112639",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:17" align="right">Comment 17</div>

I agree that my patch has to be improved.  However, I think that this can be done without globally pretending that the symbolic ring is a field.



---

archive/issue_events_134680.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T12:03:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134680"
}
```



---

archive/issue_events_134681.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T12:03:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134681"
}
```



---

archive/issue_comments_112640.json:
```json
{
    "body": "Stopgaps: **todo**",
    "created_at": "2015-08-25T15:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11126#issuecomment-112640",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Stopgaps: **todo**



---

archive/issue_events_134682.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:31:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11126",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11126#event-134682"
}
```
