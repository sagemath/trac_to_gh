# Issue 11496: Add jmol script in SAGE_ROOT/local/bin to hg and update

archive/issues_011324.json:
```json
{
    "body": "ONLY TO BE APPLIED IF YOU USE THE FLASK NOTEBOOK WITH THE NEW JMOL .SPKG (#11503). BOTH ARE REQUIRED.\n\nWith the change to the Flask notebook jmol is moving to the directory SAGE_LOCAL/share.  This requires  changes to the script that launches Jmol from the command line.  Attached is a [trac_11496_add_jmol_script.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/11496/trac_11496_add_jmol_script.patch) that adds the updated file to the hg repository for the local/bin directory.  Don't know why it wasn't tracked in the past.\n\nNOTE: If you get errors upon trying to apply this patch. \u00a0Simply replace the jmol script file with the contents of this patch. \u00a0There seem to be issues depending upon whether your installation is tracking this file or not. \u00a0It should be added to the Hg repository in the next release.\n\nRelated & Referring tickets:\n\n* #11080\n* #11503\n\nAssignee: tbd\n\nCC:  @mwhansen\n\nKeywords: command line jmol\n\nResolution: duplicate\n\nReviewer: John Palmieri\n\nIssue created by migration from https://trac.sagemath.org/ticket/11496\n\n",
    "closed_at": "2011-07-19T17:37:02Z",
    "created_at": "2011-06-16T02:39:31Z",
    "labels": [
        "component: distribution"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Add jmol script in SAGE_ROOT/local/bin to hg and update",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11496",
    "user": "https://github.com/gutow"
}
```
ONLY TO BE APPLIED IF YOU USE THE FLASK NOTEBOOK WITH THE NEW JMOL .SPKG (#11503). BOTH ARE REQUIRED.

With the change to the Flask notebook jmol is moving to the directory SAGE_LOCAL/share.  This requires  changes to the script that launches Jmol from the command line.  Attached is a [trac_11496_add_jmol_script.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/11496/trac_11496_add_jmol_script.patch) that adds the updated file to the hg repository for the local/bin directory.  Don't know why it wasn't tracked in the past.

NOTE: If you get errors upon trying to apply this patch.  Simply replace the jmol script file with the contents of this patch.  There seem to be issues depending upon whether your installation is tracking this file or not.  It should be added to the Hg repository in the next release.

Related & Referring tickets:

* #11080
* #11503

Assignee: tbd

CC:  @mwhansen

Keywords: command line jmol

Resolution: duplicate

Reviewer: John Palmieri

Issue created by migration from https://trac.sagemath.org/ticket/11496





---

archive/issue_comments_124836.json:
```json
{
    "body": "Attachment [trac_11496_add_jmol_script.patch](tarball://root/attachments/some-uuid/ticket11496/trac_11496_add_jmol_script.patch) by @gutow created at 2011-06-16 02:51:12\n\njmol script into hg repository to go with flask changes",
    "created_at": "2011-06-16T02:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124836",
    "user": "https://github.com/gutow"
}
```

Attachment [trac_11496_add_jmol_script.patch](tarball://root/attachments/some-uuid/ticket11496/trac_11496_add_jmol_script.patch) by @gutow created at 2011-06-16 02:51:12

jmol script into hg repository to go with flask changes



---

archive/issue_comments_124837.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-06-16T02:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124837",
    "user": "https://github.com/gutow"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_124838.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-06-23T14:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124838",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_124839.json:
```json
{
    "body": "<a id='comment:3'></a>When I tried to apply the patch to sage-4.7.1.alpha1 with `hg_scripts.apply()` it failed:\n\n```\nsage: hg_scripts.apply(\"/home/mariah/trac_11496_add_jmol_script.patch\")\ncd \"/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin\" && hg status\ncd \"/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin\" && hg status\ncd \"/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin\" && hg import   \"/home/mariah/trac_11496_add_jmol_script.patch\"\napplying /home/mariah/trac_11496_add_jmol_script.patch\nfile jmol already exists\n1 out of 1 hunks FAILED -- saving rejects to file jmol.rej\nabort: patch failed to apply\nsage:\n```\n\nAm I misunderstanding something?",
    "created_at": "2011-06-23T14:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124839",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:3'></a>When I tried to apply the patch to sage-4.7.1.alpha1 with `hg_scripts.apply()` it failed:

```
sage: hg_scripts.apply("/home/mariah/trac_11496_add_jmol_script.patch")
cd "/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin" && hg status
cd "/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin" && hg status
cd "/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin" && hg import   "/home/mariah/trac_11496_add_jmol_script.patch"
applying /home/mariah/trac_11496_add_jmol_script.patch
file jmol already exists
1 out of 1 hunks FAILED -- saving rejects to file jmol.rej
abort: patch failed to apply
sage:
```

Am I misunderstanding something?



---

archive/issue_comments_124840.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-06-23T17:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124840",
    "user": "https://github.com/gutow"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_124841.json:
```json
{
    "body": "<a id='comment:4'></a>It appears that this change may already be in 4.7.1.alpha2...check manually that the script is there and matches what is in the patch.\nReplying to [comment:3 mariah]:\n> When I tried to apply the patch to sage-4.7.1.alpha1 with `hg_scripts.apply()` it failed:\n> \n> \n> ```\n> sage: hg_scripts.apply(\"/home/mariah/trac_11496_add_jmol_script.patch\")\n> cd \"/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin\" && hg status\n> cd \"/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin\" && hg status\n> cd \"/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin\" && hg import   \"/home/mariah/trac_11496_add_jmol_script.patch\"\n> applying /home/mariah/trac_11496_add_jmol_script.patch\n> file jmol already exists\n> 1 out of 1 hunks FAILED -- saving rejects to file jmol.rej\n> abort: patch failed to apply\n> sage:\n> ```\n> \n> Am I misunderstanding something?",
    "created_at": "2011-06-23T17:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124841",
    "user": "https://github.com/gutow"
}
```

<a id='comment:4'></a>It appears that this change may already be in 4.7.1.alpha2...check manually that the script is there and matches what is in the patch.
Replying to [comment:3 mariah]:
> When I tried to apply the patch to sage-4.7.1.alpha1 with `hg_scripts.apply()` it failed:
> 
> 
> ```
> sage: hg_scripts.apply("/home/mariah/trac_11496_add_jmol_script.patch")
> cd "/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin" && hg status
> cd "/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin" && hg status
> cd "/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin" && hg import   "/home/mariah/trac_11496_add_jmol_script.patch"
> applying /home/mariah/trac_11496_add_jmol_script.patch
> file jmol already exists
> 1 out of 1 hunks FAILED -- saving rejects to file jmol.rej
> abort: patch failed to apply
> sage:
> ```
> 
> Am I misunderstanding something?



---

archive/issue_comments_124842.json:
```json
{
    "body": "<a id='comment:5'></a>They differ slightly (myjmol is the code in the patch):\n\n```\neno% pwd\n/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin\neno% diff jmol ~/myjmol\n3c3\n< JMOL_HOME=\"`\"$SAGE_LOCAL\"/bin/sage-pypkg-location sagenb`\"\"/sagenb/data/jmol\"\n---\n> JMOL_HOME=\"$SAGE_LOCAL/share/jmol\"\neno%\n```",
    "created_at": "2011-06-23T18:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124842",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:5'></a>They differ slightly (myjmol is the code in the patch):

```
eno% pwd
/home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin
eno% diff jmol ~/myjmol
3c3
< JMOL_HOME="`"$SAGE_LOCAL"/bin/sage-pypkg-location sagenb`""/sagenb/data/jmol"
---
> JMOL_HOME="$SAGE_LOCAL/share/jmol"
eno%
```



---

archive/issue_comments_124843.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-06-23T18:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124843",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_124844.json:
```json
{
    "body": "<a id='comment:6'></a>I'm not quite sure how to respond. \u00a0As of 4.7 (the last official release) that script was not included in the mercurial repository. \u00a0Am I expected to modify my patches to keep up with test releases? \u00a0\n\nThat said, If you are setting up to use the Flask notebook and the new release of Jmol, you need to have the version in my patch not the one that points to sagenb/data/jmol as that directory no longer exists.\n\nI suggest patching by hand.\n\nReplying to [comment:5 mariah]:\n\n> They differ slightly (myjmol is the code in the patch): {{{ eno% pwd /home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin eno% diff jmol ~/myjmol 3c3 < JMOL_HOME=\"`\"$SAGE_LOCAL\"/bin/sage-pypkg-location sagenb`\"\"/sagenb/data/jmol\" ---\n> > JMOL_HOME=\"$SAGE_LOCAL/share/jmol\"\n\n> eno% }}}",
    "created_at": "2011-06-23T21:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124844",
    "user": "https://github.com/gutow"
}
```

<a id='comment:6'></a>I'm not quite sure how to respond.  As of 4.7 (the last official release) that script was not included in the mercurial repository.  Am I expected to modify my patches to keep up with test releases?  

That said, If you are setting up to use the Flask notebook and the new release of Jmol, you need to have the version in my patch not the one that points to sagenb/data/jmol as that directory no longer exists.

I suggest patching by hand.

Replying to [comment:5 mariah]:

> They differ slightly (myjmol is the code in the patch): {{{ eno% pwd /home/mariah/sage/sage-4.7.1.alpha2-x86_64-Linux-core2-fc/local/bin eno% diff jmol ~/myjmol 3c3 < JMOL_HOME="`"$SAGE_LOCAL"/bin/sage-pypkg-location sagenb`""/sagenb/data/jmol" ---
> > JMOL_HOME="$SAGE_LOCAL/share/jmol"

> eno% }}}



---

archive/issue_comments_124845.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-06-25T18:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124845",
    "user": "https://github.com/gutow"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_124846.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-07-17T02:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124846",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_124847.json:
```json
{
    "body": "<a id='comment:9'></a>I think that this isn't implemented correctly.  First, the reason that the jmol script is not tracked in the scripts repo is that it is installed there by the sagenb spkg.  So I think that the jmol script should be installed either by the sagenb spkg, or, even better, by the new jmol spkg from #11503.  In fact, it looks like the script is already part of that spkg; you just have to write it to the correct place in the spkg-install file.\n\nI may be confused, though, so if you have a different opinion, please let me know.",
    "created_at": "2011-07-17T02:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124847",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>I think that this isn't implemented correctly.  First, the reason that the jmol script is not tracked in the scripts repo is that it is installed there by the sagenb spkg.  So I think that the jmol script should be installed either by the sagenb spkg, or, even better, by the new jmol spkg from #11503.  In fact, it looks like the script is already part of that spkg; you just have to write it to the correct place in the spkg-install file.

I may be confused, though, so if you have a different opinion, please let me know.



---

archive/issue_comments_124848.json:
```json
{
    "body": "<a id='comment:10'></a>I believe this is a good idea. \u00a0As soon as I've changed the .spkg (see\u00a0#11503) this ticket should be closed.\n\nReplying to [comment:9 jhpalmieri]:\n\n> I think that this isn't implemented correctly.  First, the reason that the jmol script is not tracked in the scripts repo is that it is installed there by the sagenb spkg.  So I think that the jmol script should be installed either by the sagenb spkg, or, even better, by the new jmol spkg from #11503.  In fact, it looks like the script is already part of that spkg; you just have to write it to the correct place in the spkg-install file. I may be confused, though, so if you have a different opinion, please let me know.",
    "created_at": "2011-07-17T14:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124848",
    "user": "https://github.com/gutow"
}
```

<a id='comment:10'></a>I believe this is a good idea.  As soon as I've changed the .spkg (see #11503) this ticket should be closed.

Replying to [comment:9 jhpalmieri]:

> I think that this isn't implemented correctly.  First, the reason that the jmol script is not tracked in the scripts repo is that it is installed there by the sagenb spkg.  So I think that the jmol script should be installed either by the sagenb spkg, or, even better, by the new jmol spkg from #11503.  In fact, it looks like the script is already part of that spkg; you just have to write it to the correct place in the spkg-install file. I may be confused, though, so if you have a different opinion, please let me know.



---

archive/issue_comments_124849.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-07-18T20:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124849",
    "user": "https://github.com/gutow"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_124850.json:
```json
{
    "body": "<a id='comment:11'></a>Should be closed because this is now subsumed by !#11503...",
    "created_at": "2011-07-18T20:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124850",
    "user": "https://github.com/gutow"
}
```

<a id='comment:11'></a>Should be closed because this is now subsumed by !#11503...



---

archive/issue_comments_124851.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-07-18T21:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124851",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_124852.json:
```json
{
    "body": "<a id='comment:12'></a>To the release manager: please close this as a duplicate of #11503.",
    "created_at": "2011-07-18T21:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124852",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>To the release manager: please close this as a duplicate of #11503.



---

archive/issue_events_029950.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T10:18:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11496#event-29950"
}
```



---

archive/issue_events_029951.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T17:37:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11496#event-29951"
}
```



---

archive/issue_comments_124853.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2011-07-19T17:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11496#issuecomment-124853",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate
