# Issue 11298: Extend the capabilities of Sage's introspection

archive/issues_011126.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nThe following used to fail:\n\n```\nsage: x??\nError getting source: could not find class definition\nsage: P.<x,y> = QQ[]\nsage: P??\nError getting source: could not find class definition\nsage: I??\nError getting source: could not find class definition\n```\n\nSimilarly, the edit command did not work in these case.\n\nWith my patch, all that works. Moreover, both sage.misc.edit_module and sage.misc.sageinspect are put into the reference manual.\n\nNote that this may be related with #11287: `sage.misc.sage_getfile` and `sage_getsourcelines` could be a reliable tool to get information on how and from where to import a given object. Therefore Cc to the participants of that ticket.\n\nMoreover, Cc to #9976. Reason:\n\nDepends on #9976\n\nApply \n\n- [attachment: trac11298_introspection_and_edit.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)\n- [attachment: trac11298_singular_standard_options.rebased.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebased.patch.gz)\n- [attachment: trac_11298-ref.patch](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)\n\nDepends on #9976\nDepends on #11287\n\nCC:  @johanrosenkilde @nthiery @saliola\n\nComponent: **misc**\n\nKeywords: **edit sageinspect**\n\nAuthor: **Simon King**\n\nReviewer: **John Palmieri**\n\nMerged: **sage-4.7.2.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11298_\n\n",
    "closed_at": "2011-08-02T19:44:45Z",
    "created_at": "2011-05-05T09:28:13Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Extend the capabilities of Sage's introspection",
    "type": "issue",
    "updated_at": "2011-08-02T19:44:45Z",
    "url": "https://github.com/sagemath/sage/issues/11298",
    "user": "https://github.com/simon-king-jena"
}
```
<div id="comment:0"></div>

The following used to fail:

```
sage: x??
Error getting source: could not find class definition
sage: P.<x,y> = QQ[]
sage: P??
Error getting source: could not find class definition
sage: I??
Error getting source: could not find class definition
```

Similarly, the edit command did not work in these case.

With my patch, all that works. Moreover, both sage.misc.edit_module and sage.misc.sageinspect are put into the reference manual.

Note that this may be related with #11287: `sage.misc.sage_getfile` and `sage_getsourcelines` could be a reliable tool to get information on how and from where to import a given object. Therefore Cc to the participants of that ticket.

Moreover, Cc to #9976. Reason:

Depends on #9976

Apply 

- [attachment: trac11298_introspection_and_edit.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)
- [attachment: trac11298_singular_standard_options.rebased.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebased.patch.gz)
- [attachment: trac_11298-ref.patch](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)

Depends on #9976
Depends on #11287

CC:  @johanrosenkilde @nthiery @saliola

Component: **misc**

Keywords: **edit sageinspect**

Author: **Simon King**

Reviewer: **John Palmieri**

Merged: **sage-4.7.2.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/11298_





---

archive/issue_events_148364.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-05T09:28:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148364"
}
```



---

archive/issue_events_148365.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-05T09:28:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148365"
}
```



---

archive/issue_events_148366.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-05T09:28:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148366"
}
```



---

archive/issue_events_148367.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-05-05T09:28:13Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "subject": "https://github.com/simon-king-jena",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148367"
}
```



---

archive/issue_comments_113286.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFor the patchbot:\n\nDepends on #9976",
    "created_at": "2011-05-05T09:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113286",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">comment:1</div>

For the patchbot:

Depends on #9976



---

archive/issue_events_148368.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-05T09:32:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148368"
}
```



---

archive/issue_comments_113287.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nCorrecting a misspelling.\n\nDepends on #9976",
    "created_at": "2011-05-05T10:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113287",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">comment:2</div>

Correcting a misspelling.

Depends on #9976



---

archive/issue_comments_113288.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNote that, with the patch, `functools.partial` objects can be reasonably edited as well:\n\n```\nedit(sage.combinat.partition_algebra.SetPartitionsAk,'vim')\n```\nopens vim at line 31 of sage/combinat/partition_algebra.py:\n\n```\ndef create_set_partition_function(letter, k):\n    \"\"\"\n    EXAMPLES::\n    \n        sage: from sage.combinat.partition_algebra import create_set_partition_function\n        sage: create_set_partition_function('A', 3)\n        Set partitions of {1, ..., 3, -1, ..., -3}\n    \"\"\"\n    from sage.functions.all import floor\n    if isinstance(k, (int, Integer)):\n        if k > 0:\n            return globals()['SetPartitions' + letter + 'k_k'](k)\n    elif is_RealNumber(k):\n        if k - math.floor(k) == 0.5:\n            return globals()['SetPartitions' + letter + 'khalf_k'](floor(k))\n\n    raise ValueError, \"k must be an integer or an integer + 1/2\"\n```\nand indeed that is the underlying definition of `SetPartitionsAk`; see line 53, which is\n\n```\nSetPartitionsAk = functools.partial(create_set_partition_function,\"A\")\n```",
    "created_at": "2011-05-05T12:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113288",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:3" align="right">comment:3</div>

Note that, with the patch, `functools.partial` objects can be reasonably edited as well:

```
edit(sage.combinat.partition_algebra.SetPartitionsAk,'vim')
```
opens vim at line 31 of sage/combinat/partition_algebra.py:

```
def create_set_partition_function(letter, k):
    """
    EXAMPLES::
    
        sage: from sage.combinat.partition_algebra import create_set_partition_function
        sage: create_set_partition_function('A', 3)
        Set partitions of {1, ..., 3, -1, ..., -3}
    """
    from sage.functions.all import floor
    if isinstance(k, (int, Integer)):
        if k > 0:
            return globals()['SetPartitions' + letter + 'k_k'](k)
    elif is_RealNumber(k):
        if k - math.floor(k) == 0.5:
            return globals()['SetPartitions' + letter + 'khalf_k'](floor(k))

    raise ValueError, "k must be an integer or an integer + 1/2"
```
and indeed that is the underlying definition of `SetPartitionsAk`; see line 53, which is

```
SetPartitionsAk = functools.partial(create_set_partition_function,"A")
```



---

archive/issue_comments_113289.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI found one more case where source code inspection failed: the (lib)singular_standard_options wrapper.\n\nWith the new patch, we have\n\n```\nsage: P.<x,y> = QQ[]\nsage: I = P*[x,y]\nsage: edit(I.interreduced_basis,'vim')\n    ...\n    @singular_standard_options\n    @libsingular_standard_options\n    def interreduced_basis(self):\n        r\"\"\"\n        If this ideal is spanned by `(f_1, ..., f_n)` this method\n        returns `(g_1, ..., g_s)` such that:\n        \n        - `(f_1,...,f_n) = (g_1,...,g_s)`\n        \n        - `LT(g_i) != LT(g_j)` for all `i != j`\n   ...\n```\nwhich would previously just show the code of the wrapper, not of the wrapped method.\n\nI wonder why the patchbot complains. In particular, why does the patchbot mention my patch from trac ticket #11115 - it shouldn't be a dependency, or should it? Let's see.\n\nFor now:\n\nDepends on #9976",
    "created_at": "2011-05-05T13:23:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113289",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

I found one more case where source code inspection failed: the (lib)singular_standard_options wrapper.

With the new patch, we have

```
sage: P.<x,y> = QQ[]
sage: I = P*[x,y]
sage: edit(I.interreduced_basis,'vim')
    ...
    @singular_standard_options
    @libsingular_standard_options
    def interreduced_basis(self):
        r"""
        If this ideal is spanned by `(f_1, ..., f_n)` this method
        returns `(g_1, ..., g_s)` such that:
        
        - `(f_1,...,f_n) = (g_1,...,g_s)`
        
        - `LT(g_i) != LT(g_j)` for all `i != j`
   ...
```
which would previously just show the code of the wrapper, not of the wrapped method.

I wonder why the patchbot complains. In particular, why does the patchbot mention my patch from trac ticket #11115 - it shouldn't be a dependency, or should it? Let's see.

For now:

Depends on #9976



---

archive/issue_comments_113290.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI just verified: In my patch queue, the patches from #11115 come *after* [attachment: trac11298_introspection_and_edit.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)\n\nIn other words, the behaviour of the patchbot seems very strange to me.",
    "created_at": "2011-05-05T13:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113290",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">comment:5</div>

I just verified: In my patch queue, the patches from #11115 come *after* [attachment: trac11298_introspection_and_edit.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)

In other words, the behaviour of the patchbot seems very strange to me.



---

archive/issue_comments_113291.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI still think that the patchbot goofed it, but I did as well: The old version of the second patch would really be on top of #11115 (but not the first). I was just updating it, so that we have:\n\nDepends on #9976\n\nand nothing else. Could be that I need to fix some tests, though...",
    "created_at": "2011-05-05T13:40:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113291",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:6" align="right">comment:6</div>

I still think that the patchbot goofed it, but I did as well: The old version of the second patch would really be on top of #11115 (but not the first). I was just updating it, so that we have:

Depends on #9976

and nothing else. Could be that I need to fix some tests, though...



---

archive/issue_comments_113292.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAdding \"r\" to one doc string (for making the documentation nicely formatted) and correcting one doc test.\n\nThe tests in sage.misc and in sage.rings.polynomial all pass. Next, I'll run long tests.\n\nDepends on #9976",
    "created_at": "2011-05-05T13:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113292",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">comment:7</div>

Adding "r" to one doc string (for making the documentation nicely formatted) and correcting one doc test.

The tests in sage.misc and in sage.rings.polynomial all pass. Next, I'll run long tests.

Depends on #9976



---

archive/issue_comments_113293.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI'll try to trigger the patchbot by changing to \"needs work\"...",
    "created_at": "2011-05-05T14:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113293",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">comment:8</div>

I'll try to trigger the patchbot by changing to "needs work"...



---

archive/issue_events_148369.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-05T14:22:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148369"
}
```



---

archive/issue_events_148370.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-05T14:22:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148370"
}
```



---

archive/issue_comments_113294.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n... and returning to needs review...\n\nDepends on #9976",
    "created_at": "2011-05-05T14:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113294",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:9" align="right">comment:9</div>

... and returning to needs review...

Depends on #9976



---

archive/issue_events_148371.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-05T14:23:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148371"
}
```



---

archive/issue_events_148372.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-05T14:23:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148372"
}
```



---

archive/issue_comments_113295.json:
```json
{
    "body": "Extend the capabilities of introspection and interactive source code edition",
    "created_at": "2011-05-05T14:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113295",
    "user": "https://github.com/simon-king-jena"
}
```

Extend the capabilities of introspection and interactive source code edition



---

archive/issue_comments_113296.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAttachment: **[trac11298_introspection_and_edit.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)**\n\nOK, that did not help. Hence, I submitted the patches again. I wish the red blob would finally vanish!\n\nDepends on #9976",
    "created_at": "2011-05-05T14:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113296",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">comment:11</div>

Attachment: **[trac11298_introspection_and_edit.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)**

OK, that did not help. Hence, I submitted the patches again. I wish the red blob would finally vanish!

Depends on #9976



---

archive/issue_comments_113297.json:
```json
{
    "body": "Dependencies: **#9976**",
    "created_at": "2011-05-05T14:28:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113297",
    "user": "https://github.com/simon-king-jena"
}
```

Dependencies: **#9976**



---

archive/issue_comments_113298.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOoops, I forgot that since recently there is a form field in which to state dependencies. Let's try it!",
    "created_at": "2011-05-05T14:28:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113298",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:12" align="right">comment:12</div>

Ooops, I forgot that since recently there is a form field in which to state dependencies. Let's try it!



---

archive/issue_comments_113299.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nFWIW, long tests pass for me, and I believe that the patchbot has a serious flaw if it can not even deal with a single dependency.",
    "created_at": "2011-05-05T18:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113299",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">comment:13</div>

FWIW, long tests pass for me, and I believe that the patchbot has a serious flaw if it can not even deal with a single dependency.



---

archive/issue_comments_113300.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNow I understand what the patchbot is doing (resp. not doing): It believes that #9976 does not need to be applied, since it is merged. But it does not understand that #9976 is merged in 4.7.1.alpha0, not in 4.7.rc1 (which is what it is starting with).",
    "created_at": "2011-05-07T19:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113300",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:14" align="right">comment:14</div>

Now I understand what the patchbot is doing (resp. not doing): It believes that #9976 does not need to be applied, since it is merged. But it does not understand that #9976 is merged in 4.7.1.alpha0, not in 4.7.rc1 (which is what it is starting with).



---

archive/issue_events_148373.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-25T14:00:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148373"
}
```



---

archive/issue_events_148374.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-25T14:00:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148374"
}
```



---

archive/issue_comments_113301.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI noticed that building the documentation crashes when the second patch is applied. It is as follows:\n\n```\nRunning Sphinx v1.0.4\nloading pickled environment... done\nbuilding [html]: targets for 39 source files that are out of date\nupdating environment: 0 added, 39 changed, 0 removed\nreading sources... [ 33%] sage/rings/polynomial/multi_polynomial_ideal_libsingular                           \nException occurred:\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/config.py\", line 207, in __getattr__\n    raise AttributeError('No such config value: %s' % name)\nAttributeError: No such config value: autodoc_default_flags\nThe full traceback has been saved in /tmp/sphinx-err-1tNBmd.log, if you want to report the issue to the developers.\nPlease also report this if it was a user error, so that a better error message can be provided next time.\nEither send bugs to the mailing list at <http://groups.google.com/group/sphinx-dev/>,\nor report them in the tracker at <http://bitbucket.org/birkenfeld/sphinx/issues/>. Thanks!\nBuild finished.  The built documents can be found in /mnt/local/king/SAGE/sage-4.7.rc2/devel/sage/doc/output/html/en/reference\n```\n\nand the traceback is\n\n```\n# Sphinx version: 1.0.4\n# Docutils version: 0.5 release\n# Jinja2 version: 2.5.5\nTraceback (most recent call last):\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/cmdline.py\", line 173, in main\n    app.build(force_all, filenames)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/application.py\", line 207, in build\n    self.builder.build_update()\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/builders/__init__.py\", line 198, in build_update\n    'out of date' % len(to_build))\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/builders/__init__.py\", line 218, in build\n    purple, length):\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/builders/__init__.py\", line 120, in status_iterator\n    for item in iterable:\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/environment.py\", line 518, in update_generator\n    self.read_doc(docname, app=app)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/environment.py\", line 658, in read_doc\n    pub.publish()\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/core.py\", line 204, in publish\n    self.settings)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/readers/__init__.py\", line 69, in read\n    self.parse()\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/readers/__init__.py\", line 75, in parse\n    self.parser.parse(self.input, document)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/__init__.py\", line 157, in parse\n    self.statemachine.run(inputlines, document, inliner=self.inliner)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 170, in run\n    input_source=document['source'])\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py\", line 232, in run\n    context, state, transitions)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py\", line 420, in check_line\n    return method(match, context, next_state)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 2658, in underline\n    self.section(title, source, style, lineno - 1, messages)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 308, in section\n    self.new_subsection(title, lineno, messages)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 376, in new_subsection\n    node=section_node, match_titles=1)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 266, in nested_parse\n    node=node, match_titles=match_titles)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 195, in run\n    results = StateMachineWS.run(self, input_lines, input_offset)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py\", line 232, in run\n    context, state, transitions)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py\", line 420, in check_line\n    return method(match, context, next_state)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 2241, in explicit_markup\n    self.explicit_list(blank_finish)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 2269, in explicit_list\n    match_titles=self.state_machine.match_titles)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 300, in nested_list_parse\n    node=node, match_titles=match_titles)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 195, in run\n    results = StateMachineWS.run(self, input_lines, input_offset)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py\", line 232, in run\n    context, state, transitions)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py\", line 420, in check_line\n    return method(match, context, next_state)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 2542, in explicit_markup\n    nodelist, blank_finish = self.explicit_construct(match)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 2251, in explicit_construct\n    return method(self, expmatch)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 1994, in directive\n    directive_class, match, type_name, option_presets)\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py\", line 2043, in run_directive\n    result = directive_instance.run()\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/ext/autodoc.py\", line 1154, in run\n    if flag in self.env.config.autodoc_default_flags and \\\n  File \"/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/config.py\", line 207, in __getattr__\n    raise AttributeError('No such config value: %s' % name)\nAttributeError: No such config value: autodoc_default_flags\n```\n\nI have no idea how this can be debugged.",
    "created_at": "2011-05-25T14:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113301",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:15" align="right">comment:15</div>

I noticed that building the documentation crashes when the second patch is applied. It is as follows:

```
Running Sphinx v1.0.4
loading pickled environment... done
building [html]: targets for 39 source files that are out of date
updating environment: 0 added, 39 changed, 0 removed
reading sources... [ 33%] sage/rings/polynomial/multi_polynomial_ideal_libsingular                           
Exception occurred:
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/config.py", line 207, in __getattr__
    raise AttributeError('No such config value: %s' % name)
AttributeError: No such config value: autodoc_default_flags
The full traceback has been saved in /tmp/sphinx-err-1tNBmd.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
Either send bugs to the mailing list at <http://groups.google.com/group/sphinx-dev/>,
or report them in the tracker at <http://bitbucket.org/birkenfeld/sphinx/issues/>. Thanks!
Build finished.  The built documents can be found in /mnt/local/king/SAGE/sage-4.7.rc2/devel/sage/doc/output/html/en/reference
```

and the traceback is

```
# Sphinx version: 1.0.4
# Docutils version: 0.5 release
# Jinja2 version: 2.5.5
Traceback (most recent call last):
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/cmdline.py", line 173, in main
    app.build(force_all, filenames)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/application.py", line 207, in build
    self.builder.build_update()
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/builders/__init__.py", line 198, in build_update
    'out of date' % len(to_build))
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/builders/__init__.py", line 218, in build
    purple, length):
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/builders/__init__.py", line 120, in status_iterator
    for item in iterable:
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/environment.py", line 518, in update_generator
    self.read_doc(docname, app=app)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/environment.py", line 658, in read_doc
    pub.publish()
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/core.py", line 204, in publish
    self.settings)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/readers/__init__.py", line 69, in read
    self.parse()
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/readers/__init__.py", line 75, in parse
    self.parser.parse(self.input, document)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/__init__.py", line 157, in parse
    self.statemachine.run(inputlines, document, inliner=self.inliner)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 170, in run
    input_source=document['source'])
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py", line 232, in run
    context, state, transitions)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py", line 420, in check_line
    return method(match, context, next_state)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 2658, in underline
    self.section(title, source, style, lineno - 1, messages)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 308, in section
    self.new_subsection(title, lineno, messages)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 376, in new_subsection
    node=section_node, match_titles=1)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 266, in nested_parse
    node=node, match_titles=match_titles)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 195, in run
    results = StateMachineWS.run(self, input_lines, input_offset)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py", line 232, in run
    context, state, transitions)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py", line 420, in check_line
    return method(match, context, next_state)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 2241, in explicit_markup
    self.explicit_list(blank_finish)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 2269, in explicit_list
    match_titles=self.state_machine.match_titles)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 300, in nested_list_parse
    node=node, match_titles=match_titles)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 195, in run
    results = StateMachineWS.run(self, input_lines, input_offset)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py", line 232, in run
    context, state, transitions)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/statemachine.py", line 420, in check_line
    return method(match, context, next_state)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 2542, in explicit_markup
    nodelist, blank_finish = self.explicit_construct(match)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 2251, in explicit_construct
    return method(self, expmatch)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 1994, in directive
    directive_class, match, type_name, option_presets)
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/docutils/parsers/rst/states.py", line 2043, in run_directive
    result = directive_instance.run()
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/ext/autodoc.py", line 1154, in run
    if flag in self.env.config.autodoc_default_flags and \
  File "/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/Sphinx-1.0.4-py2.6.egg/sphinx/config.py", line 207, in __getattr__
    raise AttributeError('No such config value: %s' % name)
AttributeError: No such config value: autodoc_default_flags
```

I have no idea how this can be debugged.



---

archive/issue_comments_113302.json:
```json
{
    "body": "Work Issues: **Fix crash at docbuild**",
    "created_at": "2011-05-25T14:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113302",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **Fix crash at docbuild**



---

archive/issue_comments_113303.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nPerhaps it would be worth while to follow a more conceptual approach.\n\nCurrently, `singular_standard_options` and `magma_standard_options` applied to a method `func` simply return a function `wrapper`, that does not know about `func` (except its doc string, but I think that's a bad idea as well since copying that string costs time). So, introspection does not work. I tried to provide `wrapper` with the tools needed to make it work, but apparently it was not so easy.\n\nBut there is the `sage_wraps` factory, and I think I should try to use it!",
    "created_at": "2011-05-26T06:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113303",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">comment:16</div>

Perhaps it would be worth while to follow a more conceptual approach.

Currently, `singular_standard_options` and `magma_standard_options` applied to a method `func` simply return a function `wrapper`, that does not know about `func` (except its doc string, but I think that's a bad idea as well since copying that string costs time). So, introspection does not work. I tried to provide `wrapper` with the tools needed to make it work, but apparently it was not so easy.

But there is the `sage_wraps` factory, and I think I should try to use it!



---

archive/issue_comments_113304.json:
```json
{
    "body": "Introspection for sage.misc.decorators.sage_wraps, applied for singular_standard_options. Put decorators into references.",
    "created_at": "2011-05-26T07:08:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113304",
    "user": "https://github.com/simon-king-jena"
}
```

Introspection for sage.misc.decorators.sage_wraps, applied for singular_standard_options. Put decorators into references.



---

archive/issue_events_148375.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-26T07:11:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148375"
}
```



---

archive/issue_events_148376.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-05-26T07:11:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148376"
}
```



---

archive/issue_comments_113305.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[trac11298_singular_standard_options.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.patch.gz)**\n\nThe second patch has now been updated.\n\nThe problem seems solved: I touched all files in sage/rings/polynomial, did `sage -b` and then built the documentation without problem.\n\nMoreover, I fixed some syntax error in the documentation, and I've put sage.misc.decorators into the reference manual.\n\nSo, it is needing review again!",
    "created_at": "2011-05-26T07:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113305",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[trac11298_singular_standard_options.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.patch.gz)**

The second patch has now been updated.

The problem seems solved: I touched all files in sage/rings/polynomial, did `sage -b` and then built the documentation without problem.

Moreover, I fixed some syntax error in the documentation, and I've put sage.misc.decorators into the reference manual.

So, it is needing review again!



---

archive/issue_comments_113306.json:
```json
{
    "body": "Changed work issues from **Fix crash at docbuild** to none",
    "created_at": "2011-05-26T07:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113306",
    "user": "https://github.com/simon-king-jena"
}
```

Changed work issues from **Fix crash at docbuild** to none



---

archive/issue_comments_113307.json:
```json
{
    "body": "Attachment: **[trac11298_singular_standard_options.rebase4.7.1.a1.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebase4.7.1.a1.patch.gz)**\n\nrebased Simon's patch to 4.7.1.alpha1",
    "created_at": "2011-06-07T21:10:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113307",
    "user": "https://github.com/burcin"
}
```

Attachment: **[trac11298_singular_standard_options.rebase4.7.1.a1.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebase4.7.1.a1.patch.gz)**

rebased Simon's patch to 4.7.1.alpha1



---

archive/issue_comments_113308.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,3 +19,5 @@\n Moreover, Cc to #9976. Reason:\n \n Depends on #9976\n+\n+Apply trac11298_introspection_and_edit.patch, trac11298_singular_standard_options.rebase4.7.1.a1.patch\n``````\n",
    "created_at": "2011-06-07T21:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113308",
    "user": "https://github.com/burcin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,3 +19,5 @@
 Moreover, Cc to #9976. Reason:
 
 Depends on #9976
+
+Apply trac11298_introspection_and_edit.patch, trac11298_singular_standard_options.rebase4.7.1.a1.patch
``````




---

archive/issue_comments_113309.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThank you, Burcin!\n\nFor the patchbot, that seems to ignore the ticket description:\n\nApply trac11298_introspection_and_edit.patch, trac11298_singular_standard_options.rebase4.7.1.a1.patch",
    "created_at": "2011-06-08T06:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113309",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:19" align="right">comment:19</div>

Thank you, Burcin!

For the patchbot, that seems to ignore the ticket description:

Apply trac11298_introspection_and_edit.patch, trac11298_singular_standard_options.rebase4.7.1.a1.patch



---

archive/issue_comments_113310.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThis looks pretty good to me.  I have one question: in `sage_getsourcelines`, lines 1408-1411, you have the code\n\n```python\n            except IOError:\n                if obj.__class__ != type:\n                    return sage_getsourcelines(obj.__class__)\n                raise\n```\nWhat is `type` here?  Can you give me an example which will reach this code?",
    "created_at": "2011-07-20T19:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113310",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:20" align="right">comment:20</div>

This looks pretty good to me.  I have one question: in `sage_getsourcelines`, lines 1408-1411, you have the code

```python
            except IOError:
                if obj.__class__ != type:
                    return sage_getsourcelines(obj.__class__)
                raise
```
What is `type` here?  Can you give me an example which will reach this code?



---

archive/issue_comments_113311.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n(Is it just the built-in Python `type` function?)",
    "created_at": "2011-07-20T19:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113311",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

(Is it just the built-in Python `type` function?)



---

archive/issue_comments_113312.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jhpalmieri](#comment%3A20):\n> This looks pretty good to me.  I have one question: in `sage_getsourcelines`, lines 1408-1411, you have the code\n> ...\n>\n>\n> What is `type` here?  Can you give me an example which will reach this code?\n\nBy `type`, I mean the type `type`, such as here:\n\n```\nsage: 1.__class__\n<type 'sage.rings.integer.Integer'>\nsage: 1.__class__.__class__\n<type 'type'>\n```\n\nThe idea of the code lines in question is as follows:\n\nLet `obj` be the object whose source lines we want to determine. It is not necessarily true that the correct source lines for `obj` coincide with the source lines of its class (notorious counter example: decorated methods). Therefore, we need to try harder.\n\n- First, it is attempted to get the position of the source code from what `inspect.getdoc` returns (lines 1400-1401)\n\n- Second (if \"first\" fails), the same is attempted with what `_sage_getdoc_unformatted` returns (lines 1403-1404). For a reason that I don't understand, one can not replace the first step by the second step: The comment that I inserted states that a mysterious import error would occur at startup.\n\n- Third (if \"second\" fails as well), it is tested whether the inspect module can provide the source lines of the object `obj` (line 1407).\n\n- Last resort (if \"third\" fails), we replace `obj` by `obj.__class__`. That is not desired for decorated methods, but these are supposed to provide the source lines in a different way, so that one of the first three methods should succeed. I think as  a last resort it is ok... (line 1410).\n\nThere is one obvious problem with the \"last resort\". If the source lines of `obj.__class__` can not be found (e.g., if `obj.__class__` is defined in an spkg, not in the Sage library) then as a last resort one would try to get  `obj.__class__.__class__`, but that is the type `type` (see example above), which is defined in the Python spkg and can thus not be found. Infinite recursion.\n\nIn order to avoid the infinite recursion, an error is raised if `obj.__class__` is the type `type`, which is, in particular, the case if `obj` is not a class instance but a class.\n\nI hope that answers your question...",
    "created_at": "2011-07-20T20:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113312",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jhpalmieri](#comment%3A20):
> This looks pretty good to me.  I have one question: in `sage_getsourcelines`, lines 1408-1411, you have the code
> ...
>
>
> What is `type` here?  Can you give me an example which will reach this code?

By `type`, I mean the type `type`, such as here:

```
sage: 1.__class__
<type 'sage.rings.integer.Integer'>
sage: 1.__class__.__class__
<type 'type'>
```

The idea of the code lines in question is as follows:

Let `obj` be the object whose source lines we want to determine. It is not necessarily true that the correct source lines for `obj` coincide with the source lines of its class (notorious counter example: decorated methods). Therefore, we need to try harder.

- First, it is attempted to get the position of the source code from what `inspect.getdoc` returns (lines 1400-1401)

- Second (if "first" fails), the same is attempted with what `_sage_getdoc_unformatted` returns (lines 1403-1404). For a reason that I don't understand, one can not replace the first step by the second step: The comment that I inserted states that a mysterious import error would occur at startup.

- Third (if "second" fails as well), it is tested whether the inspect module can provide the source lines of the object `obj` (line 1407).

- Last resort (if "third" fails), we replace `obj` by `obj.__class__`. That is not desired for decorated methods, but these are supposed to provide the source lines in a different way, so that one of the first three methods should succeed. I think as  a last resort it is ok... (line 1410).

There is one obvious problem with the "last resort". If the source lines of `obj.__class__` can not be found (e.g., if `obj.__class__` is defined in an spkg, not in the Sage library) then as a last resort one would try to get  `obj.__class__.__class__`, but that is the type `type` (see example above), which is defined in the Python spkg and can thus not be found. Infinite recursion.

In order to avoid the infinite recursion, an error is raised if `obj.__class__` is the type `type`, which is, in particular, the case if `obj` is not a class instance but a class.

I hope that answers your question...



---

archive/issue_comments_113313.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jhpalmieri](#comment%3A20):\n> What is `type` here?  Can you give me an example which will reach this code?\n\nA concrete example (using the meataxe wrapper from my cohomology spkg):\n\n```\nsage: from sage.misc.sageinspect import sage_getsourcelines\nsage: from pGroupCohomology.mtx import MTX\nsage: M = MTX(5,[[1,2],[3,4]])\nsage: sage_getsourcelines(M)\n---------------------------------------------------------------------------\nIOError                                   Traceback (most recent call last)\n\n/home/king/<ipython console> in <module>()\n\n/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/sage/misc/sageinspect.pyc in sage_getsourcelines(obj, is_binary)\n   1407         if pos is None:\n   1408             try:\n-> 1409                 return inspect.getsourcelines(obj)\n   1410             except IOError:\n   1411                 if obj.__class__ != type:\n\n/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python/inspect.pyc in getsourcelines(object)\n    676     original source file the first line of code was found.  An IOError is\n    677     raised if the source code cannot be retrieved.\"\"\"\n--> 678     lines, lnum = findsource(object)\n    679\n    680     if ismodule(object): return lines, 0\n\n/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/IPython/ultraTB.pyc in findsource(object)\n    175             return lines, candidates[0][1]\n    176         else:\n--> 177             raise IOError('could not find class definition')\n    178\n    179     if ismethod(object):\n\nIOError: could not find class definition\n```\n\nSince `M` can not provide its source lines, the source lines of `M.__class__` (i.e., of `MTX`) are sought.\n\nSince the source lines of `MTX` can not be found (with the first three methods), the inspect module raises a `IOError`. It is caught, but reraised, since `MTX.__class__` is the type `type` and hence an infinite recursion must be prevented.",
    "created_at": "2011-07-20T21:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113313",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jhpalmieri](#comment%3A20):
> What is `type` here?  Can you give me an example which will reach this code?

A concrete example (using the meataxe wrapper from my cohomology spkg):

```
sage: from sage.misc.sageinspect import sage_getsourcelines
sage: from pGroupCohomology.mtx import MTX
sage: M = MTX(5,[[1,2],[3,4]])
sage: sage_getsourcelines(M)
---------------------------------------------------------------------------
IOError                                   Traceback (most recent call last)

/home/king/<ipython console> in <module>()

/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/sage/misc/sageinspect.pyc in sage_getsourcelines(obj, is_binary)
   1407         if pos is None:
   1408             try:
-> 1409                 return inspect.getsourcelines(obj)
   1410             except IOError:
   1411                 if obj.__class__ != type:

/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python/inspect.pyc in getsourcelines(object)
    676     original source file the first line of code was found.  An IOError is
    677     raised if the source code cannot be retrieved."""
--> 678     lines, lnum = findsource(object)
    679
    680     if ismodule(object): return lines, 0

/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/IPython/ultraTB.pyc in findsource(object)
    175             return lines, candidates[0][1]
    176         else:
--> 177             raise IOError('could not find class definition')
    178
    179     if ismethod(object):

IOError: could not find class definition
```

Since `M` can not provide its source lines, the source lines of `M.__class__` (i.e., of `MTX`) are sought.

Since the source lines of `MTX` can not be found (with the first three methods), the inspect module raises a `IOError`. It is caught, but reraised, since `MTX.__class__` is the type `type` and hence an infinite recursion must be prevented.



---

archive/issue_comments_113314.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOkay, I'm happy with this.  I'm attaching a referee's patch with a few small changes.  If you're happy with my changes, please switch the ticket to \"positive review\".\n\nThis makes a very nice companion to #9976.",
    "created_at": "2011-07-20T21:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113314",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">comment:24</div>

Okay, I'm happy with this.  I'm attaching a referee's patch with a few small changes.  If you're happy with my changes, please switch the ticket to "positive review".

This makes a very nice companion to #9976.



---

archive/issue_comments_113315.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2011-07-20T21:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113315",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_113316.json:
```json
{
    "body": "Attachment: **[trac_11298-ref.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)**\n\nreferee patch; apply on top of others",
    "created_at": "2011-07-20T21:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113316",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_11298-ref.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)**

referee patch; apply on top of others



---

archive/issue_comments_113317.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n(The only aspect of the referee's patch worth mentioning is the removal of the import of `sage_getsource`.  This is already done at the top-level of that file, so it doesn't need to be done again.)",
    "created_at": "2011-07-20T21:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113317",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:25" align="right">comment:25</div>

(The only aspect of the referee's patch worth mentioning is the removal of the import of `sage_getsource`.  This is already done at the top-level of that file, so it doesn't need to be done again.)



---

archive/issue_comments_113318.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,4 +20,8 @@\n \n Depends on #9976\n \n-Apply trac11298_introspection_and_edit.patch, trac11298_singular_standard_options.rebase4.7.1.a1.patch\n+Apply \n+\n+- [attachment: trac11298_introspection_and_edit.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)\n+- [attachment: trac11298_singular_standard_options.rebase4.7.1.a1.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebase4.7.1.a1.patch.gz)\n+- [attachment: trac_11298-ref.patch](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)\n``````\n",
    "created_at": "2011-07-20T21:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113318",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,4 +20,8 @@
 
 Depends on #9976
 
-Apply trac11298_introspection_and_edit.patch, trac11298_singular_standard_options.rebase4.7.1.a1.patch
+Apply 
+
+- [attachment: trac11298_introspection_and_edit.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)
+- [attachment: trac11298_singular_standard_options.rebase4.7.1.a1.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebase4.7.1.a1.patch.gz)
+- [attachment: trac_11298-ref.patch](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)
``````




---

archive/issue_events_148377.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-07-20T22:44:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148377"
}
```



---

archive/issue_events_148378.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-07-20T22:44:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148378"
}
```



---

archive/issue_comments_113319.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jhpalmieri](#comment%3A24):\n> Okay, I'm happy with this.  I'm attaching a referee's patch with a few small changes.  If you're happy with my changes, please switch the ticket to \"positive review\".\n\nI am happy with the changes. Thus I change it into a positive review. Thank you very much!",
    "created_at": "2011-07-20T22:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113319",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jhpalmieri](#comment%3A24):
> Okay, I'm happy with this.  I'm attaching a referee's patch with a few small changes.  If you're happy with my changes, please switch the ticket to "positive review".

I am happy with the changes. Thus I change it into a positive review. Thank you very much!



---

archive/issue_events_148379.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-21T12:38:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148379"
}
```



---

archive/issue_events_148380.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-21T12:38:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148380"
}
```



---

archive/issue_comments_113320.json:
```json
{
    "body": "Work Issues: **rebase to #11287**",
    "created_at": "2011-07-28T20:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113320",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **rebase to #11287**



---

archive/issue_events_148381.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-28T20:20:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148381"
}
```



---

archive/issue_events_148382.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-28T20:20:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148382"
}
```



---

archive/issue_comments_113321.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThis needs to be rebased to #11287.",
    "created_at": "2011-07-28T20:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113321",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

This needs to be rebased to #11287.



---

archive/issue_comments_113322.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nAfter applying the patch at #11287, these still apply for me, although one does have fuzz.  Is the fuzz an issue or are patches actually being rejected?",
    "created_at": "2011-07-28T21:26:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113322",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">comment:29</div>

After applying the patch at #11287, these still apply for me, although one does have fuzz.  Is the fuzz an issue or are patches actually being rejected?



---

archive/issue_events_148383.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-07-31T07:06:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148383"
}
```



---

archive/issue_events_148384.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-07-31T07:06:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148384"
}
```



---

archive/issue_comments_113323.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n<Bump>\n\nJeroen, could you please elaborate why you think that it should be rebased?",
    "created_at": "2011-07-31T07:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113323",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:30" align="right">comment:30</div>

<Bump>

Jeroen, could you please elaborate why you think that it should be rebased?



---

archive/issue_comments_113324.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n(If all else fails, we can wait until 4.7.2.alpha0 and rebase it with respect to that.)",
    "created_at": "2011-08-01T01:24:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113324",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

(If all else fails, we can wait until 4.7.2.alpha0 and rebase it with respect to that.)



---

archive/issue_comments_113325.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@jhpalmieri](#comment%3A29):\n> After applying the patch at #11287, these still apply for me, although one does have fuzz.  Is the fuzz an issue or are patches actually being rejected?\n\nMy personal opinion on applying patches with fuzz is that I allow patches with fuzz 1 but not with fuzz 2.  I have seen at least two cases where a \"fuzz 2\" patch was actually wrongly merged (I don't remember which tickets).",
    "created_at": "2011-08-01T10:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113325",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@jhpalmieri](#comment%3A29):
> After applying the patch at #11287, these still apply for me, although one does have fuzz.  Is the fuzz an issue or are patches actually being rejected?

My personal opinion on applying patches with fuzz is that I allow patches with fuzz 1 but not with fuzz 2.  I have seen at least two cases where a "fuzz 2" patch was actually wrongly merged (I don't remember which tickets).



---

archive/issue_comments_113326.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@jdemeyer](#comment%3A32):\n> My personal opinion on applying patches with fuzz is that I allow patches with fuzz 1 but not with fuzz 2.  I have seen at least two cases where a \"fuzz 2\" patch was actually wrongly merged (I don't remember which tickets).\n\nOK. Then I'll take care of it.",
    "created_at": "2011-08-01T10:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113326",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@jdemeyer](#comment%3A32):
> My personal opinion on applying patches with fuzz is that I allow patches with fuzz 1 but not with fuzz 2.  I have seen at least two cases where a "fuzz 2" patch was actually wrongly merged (I don't remember which tickets).

OK. Then I'll take care of it.



---

archive/issue_comments_113327.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nBy the way: When I tried to import the patch from #11287 on top of sage-4.7.rc2, application to doc/en/reference/mist.rst failed. But if I understood correctly, the problem with the patch here is somewhere else, right? And moreover, I should probably get a more recent Sage version...",
    "created_at": "2011-08-01T11:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113327",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:34" align="right">comment:34</div>

By the way: When I tried to import the patch from #11287 on top of sage-4.7.rc2, application to doc/en/reference/mist.rst failed. But if I understood correctly, the problem with the patch here is somewhere else, right? And moreover, I should probably get a more recent Sage version...



---

archive/issue_comments_113328.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThat's odd!\n\nI applied the patches from #11251, then #11287. Then I had fuzz 2 for one of the patches from #9976 (but they are already merged in 4.7.1.alpha0), and then the patches from here applied *cleanly* and *without fuzz*.\n\nSo, it seems that I should get the latest rc or alpha version of sage, and try again.",
    "created_at": "2011-08-01T11:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113328",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:35" align="right">comment:35</div>

That's odd!

I applied the patches from #11251, then #11287. Then I had fuzz 2 for one of the patches from #9976 (but they are already merged in 4.7.1.alpha0), and then the patches from here applied *cleanly* and *without fuzz*.

So, it seems that I should get the latest rc or alpha version of sage, and try again.



---

archive/issue_comments_113329.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@simon-king-jena](#comment%3A35):\nYes, sage-4.7.rc2 is in fact quite old, so please try [sage-4.7.1.rc1](http://boxen.math.washington.edu/home/release/sage-4.7.1.rc1/) + #11287 (or wait until sage-4.7.2.alpha0 is released and rebase to that).",
    "created_at": "2011-08-01T11:31:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113329",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@simon-king-jena](#comment%3A35):
Yes, sage-4.7.rc2 is in fact quite old, so please try [sage-4.7.1.rc1](http://boxen.math.washington.edu/home/release/sage-4.7.1.rc1/) + #11287 (or wait until sage-4.7.2.alpha0 is released and rebase to that).



---

archive/issue_comments_113330.json:
```json
{
    "body": "Attachment: **[trac11298_singular_standard_options.rebased.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebased.patch.gz)**\n\nIntrospection for sage.misc.decorators.sage_wraps, applied for singular_standard_options. Put decorators into references. Rebased against #11287",
    "created_at": "2011-08-01T15:46:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113330",
    "user": "https://github.com/simon-king-jena"
}
```

Attachment: **[trac11298_singular_standard_options.rebased.patch.gz](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebased.patch.gz)**

Introspection for sage.misc.decorators.sage_wraps, applied for singular_standard_options. Put decorators into references. Rebased against #11287



---

archive/issue_events_148385.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-01T15:48:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148385"
}
```



---

archive/issue_events_148386.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-01T15:48:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148386"
}
```



---

archive/issue_comments_113331.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI've built sage-4.7.1.rc1 and rebased the patch.\n\nApply trac11298_introspection_and_edit.patch [attachment: trac11298_singular_standard_options.rebased.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebased.patch.gz) [attachment: trac_11298-ref.patch](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)",
    "created_at": "2011-08-01T15:48:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113331",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:37" align="right">comment:37</div>

I've built sage-4.7.1.rc1 and rebased the patch.

Apply trac11298_introspection_and_edit.patch [attachment: trac11298_singular_standard_options.rebased.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebased.patch.gz) [attachment: trac_11298-ref.patch](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)



---

archive/issue_comments_113332.json:
```json
{
    "body": "Changed dependencies from **#9976** to **#9976, #11287**",
    "created_at": "2011-08-01T15:48:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113332",
    "user": "https://github.com/simon-king-jena"
}
```

Changed dependencies from **#9976** to **#9976, #11287**



---

archive/issue_comments_113333.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,5 +23,5 @@\n Apply \n \n - [attachment: trac11298_introspection_and_edit.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)\n-- [attachment: trac11298_singular_standard_options.rebase4.7.1.a1.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebase4.7.1.a1.patch.gz)\n+- [attachment: trac11298_singular_standard_options.rebased.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebased.patch.gz)\n - [attachment: trac_11298-ref.patch](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)\n``````\n",
    "created_at": "2011-08-01T15:48:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113333",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,5 +23,5 @@
 Apply 
 
 - [attachment: trac11298_introspection_and_edit.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_introspection_and_edit.patch.gz)
-- [attachment: trac11298_singular_standard_options.rebase4.7.1.a1.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebase4.7.1.a1.patch.gz)
+- [attachment: trac11298_singular_standard_options.rebased.patch](https://github.com/sagemath/sage/files/ticket11298/trac11298_singular_standard_options.rebased.patch.gz)
 - [attachment: trac_11298-ref.patch](https://github.com/sagemath/sage/files/ticket11298/trac_11298-ref.patch.gz)
``````




---

archive/issue_events_148387.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-01T15:52:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148387"
}
```



---

archive/issue_events_148388.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-01T15:52:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148388"
}
```



---

archive/issue_comments_113334.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThe change of the patch concerns doc/en/misc.rst, and the reason for the change was the fact that the context of the inserted line has changed. In particular, the change in the patch has not changed code or doctests. Therefore I believe that it should be reverted to a positive review.\n\nApply trac11298_introspection_and_edit.patch trac11298_singular_standard_options.rebased.patch trac_11298-ref.patch",
    "created_at": "2011-08-01T15:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113334",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:38" align="right">comment:38</div>

The change of the patch concerns doc/en/misc.rst, and the reason for the change was the fact that the context of the inserted line has changed. In particular, the change in the patch has not changed code or doctests. Therefore I believe that it should be reverted to a positive review.

Apply trac11298_introspection_and_edit.patch trac11298_singular_standard_options.rebased.patch trac_11298-ref.patch



---

archive/issue_comments_113335.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\n> I believe that it should be reverted to a positive review.\n\nI agree.  If it's a simple rebase, no new review should be needed.  Thanks for taking care of this.",
    "created_at": "2011-08-01T21:12:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113335",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:39" align="right">comment:39</div>

> I believe that it should be reverted to a positive review.

I agree.  If it's a simple rebase, no new review should be needed.  Thanks for taking care of this.



---

archive/issue_comments_113336.json:
```json
{
    "body": "Changed work issues from **rebase to #11287** to none",
    "created_at": "2011-08-02T19:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113336",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **rebase to #11287** to none



---

archive/issue_comments_113337.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha1**",
    "created_at": "2011-08-02T19:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11298#issuecomment-113337",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.2.alpha1**



---

archive/issue_events_148389.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-02T19:44:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148389"
}
```



---

archive/issue_events_148390.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-02T19:44:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11298",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11298#event-148390"
}
```
