# Issue 11896: MPIR 2.x may fail to build on 32-bit operating systems

archive/issues_011724.json:
```json
{
    "assignees": [
        "https://github.com/nexttime"
    ],
    "body": "MPIR fails to build on **32-bit** operating systems running on **64-bit** processors if `CFLAGS` contain `-m32` and `ABI` is **not** set.\n\nThe simple solution is to set `ABI=32` in this case, which the new spkg now does (on Linux, where the issue occurred). It also sets `ABI=64` if the operating system supports it, and `ABI` isn't already set, and prints according messages.\n\n---\nUpstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)\n\n---\n**New spkg:** [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg)\n\nCC:  @nathanncohen @dandrake @strogdon @jdemeyer\n\nKeywords: **ABI 64-bit CPU processor Linux -m32 MPN_PATH assembler error bad register lshift**\n\nComponent: **packages: standard**\n\nAuthor: **Leif Leonhardy, Jeroen Demeyer**\n\nReviewer: **Steven Trogdon, Jeroen Demeyer, Leif Leonhardy**\n\nUpstream: **Reported upstream. Little or no feedback.**\n\nMerged: **sage-4.8.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11896_\n\n",
    "closed_at": "2011-10-14T09:40:56Z",
    "created_at": "2011-10-05T02:29:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "MPIR 2.x may fail to build on 32-bit operating systems",
    "type": "issue",
    "updated_at": "2011-11-03T16:18:41Z",
    "url": "https://github.com/sagemath/sage/issues/11896",
    "user": "Nathann Cohen, Dan Drake, Steven Trogdon"
}
```
MPIR fails to build on **32-bit** operating systems running on **64-bit** processors if `CFLAGS` contain `-m32` and `ABI` is **not** set.

The simple solution is to set `ABI=32` in this case, which the new spkg now does (on Linux, where the issue occurred). It also sets `ABI=64` if the operating system supports it, and `ABI` isn't already set, and prints according messages.

---
Upstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)

---
**New spkg:** [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg)

CC:  @nathanncohen @dandrake @strogdon @jdemeyer

Keywords: **ABI 64-bit CPU processor Linux -m32 MPN_PATH assembler error bad register lshift**

Component: **packages: standard**

Author: **Leif Leonhardy, Jeroen Demeyer**

Reviewer: **Steven Trogdon, Jeroen Demeyer, Leif Leonhardy**

Upstream: **Reported upstream. Little or no feedback.**

Merged: **sage-4.8.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/11896_





---

archive/issue_events_161041.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-05T02:29:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161041"
}
```



---

archive/issue_events_161042.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-05T02:29:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161042"
}
```



---

archive/issue_events_161043.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-05T02:29:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161043"
}
```



---

archive/issue_events_161044.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-05T02:29:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161044"
}
```



---

archive/issue_events_161045.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-05T02:29:01Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "subject": "https://github.com/nexttime",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161045"
}
```



---

archive/issue_comments_124961.json:
```json
{
    "body": "Changed reporter from **leif** to **Nathann Cohen, Dan Drake, Steve Trogdon**",
    "created_at": "2011-10-05T03:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124961",
    "user": "https://github.com/nexttime"
}
```

Changed reporter from **leif** to **Nathann Cohen, Dan Drake, Steve Trogdon**



---

archive/issue_comments_124962.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWould be nice if one of you could review this.\n\nFor testing, it should be sufficient to (try to) install the spkg with an arbitrary Sage version (of course installed on some 32-bit Linux running on a 64-bit processor):\n\n```sh\n$ unset ABI # We want to test that the spkg works *without* setting it.\n$ env SAGE_CHECK=yes ./sage -i http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg\n```\n\nAfter that, you should reinstall the original MPIR spkg from your Sage installation (with `./sage -f spkg/standard/mpir-<version>.spkg`) in case you used a Sage version prior to Sage 4.7.2.alpha3 (into which the MPIR 2.1.3.p4 spkg from #8664, the first 2.x version in Sage, was merged).\n\n(No need to uninstall it from Sage 4.7.2.alpha3 or if you happen to have already installed the MPIR 2.1.3.p4 spkg, the GMP-ECM 6.3.p2 spkg and the necessary patches from their tickets.)\n\nYou can of course in addition test the spkg on other (64-bit) platforms as well... :-)\n\nThanks!",
    "created_at": "2011-10-05T03:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124962",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:1" align="right">comment:1</div>

Would be nice if one of you could review this.

For testing, it should be sufficient to (try to) install the spkg with an arbitrary Sage version (of course installed on some 32-bit Linux running on a 64-bit processor):

```sh
$ unset ABI # We want to test that the spkg works *without* setting it.
$ env SAGE_CHECK=yes ./sage -i http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg
```

After that, you should reinstall the original MPIR spkg from your Sage installation (with `./sage -f spkg/standard/mpir-<version>.spkg`) in case you used a Sage version prior to Sage 4.7.2.alpha3 (into which the MPIR 2.1.3.p4 spkg from #8664, the first 2.x version in Sage, was merged).

(No need to uninstall it from Sage 4.7.2.alpha3 or if you happen to have already installed the MPIR 2.1.3.p4 spkg, the GMP-ECM 6.3.p2 spkg and the necessary patches from their tickets.)

You can of course in addition test the spkg on other (64-bit) platforms as well... :-)

Thanks!



---

archive/issue_comments_124963.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,9 @@\n \n The simple solution is to set `ABI=32` in this case, which the new spkg now does (on Linux, where the issue occurred). It also sets `ABI=64` if the operating system supports it, and `ABI` isn't already set, and prints according messages.\n \n+---\n+\n+**New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg)\n+\n+**md5sum:** `7881a45bb797665f4f264e17fdab2aa5`\n+\n``````\n",
    "created_at": "2011-10-05T03:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124963",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,9 @@
 
 The simple solution is to set `ABI=32` in this case, which the new spkg now does (on Linux, where the issue occurred). It also sets `ABI=64` if the operating system supports it, and `ABI` isn't already set, and prints according messages.
 
+---
+
+**New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg)
+
+**md5sum:** `7881a45bb797665f4f264e17fdab2aa5`
+
``````




---

archive/issue_events_161046.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-05T03:12:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161046"
}
```



---

archive/issue_comments_124964.json:
```json
{
    "body": "Attachment: **[mpir-2.1.3.p4-p5.diff.gz](https://github.com/sagemath/sage/files/ticket11896/mpir-2.1.3.p4-p5.diff.gz)**\n\nDiff between the p4 (from #8664) and the p5 spkg. For reference / review only.",
    "created_at": "2011-10-05T03:18:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124964",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[mpir-2.1.3.p4-p5.diff.gz](https://github.com/sagemath/sage/files/ticket11896/mpir-2.1.3.p4-p5.diff.gz)**

Diff between the p4 (from #8664) and the p5 spkg. For reference / review only.



---

archive/issue_comments_124965.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nP.S.:\n\nI'll rebase the spkgs with newer upstream versions (see #11616) on this one when I find the time. I'll perhaps also provide an MPIR 2.1.**4**.p0 spkg based on this one which just adds a minor upstream fix (for a rare race condition which leads to an error during the installation).",
    "created_at": "2011-10-05T03:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124965",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:2" align="right">comment:2</div>

P.S.:

I'll rebase the spkgs with newer upstream versions (see #11616) on this one when I find the time. I'll perhaps also provide an MPIR 2.1.**4**.p0 spkg based on this one which just adds a minor upstream fix (for a rare race condition which leads to an error during the installation).



---

archive/issue_comments_124966.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOh, one more thing:\n\nI cannot test whether the GMP-ECM and MPFR spkgs have the same problem (since they use GMP's / MPIR's `CFLAGS`), i.e., also fail on such systems if `ABI` isn't set.\n\nIf you find the time, you could also check this by unsetting `ABI` and reinstalling them (with `./sage -f ...`).",
    "created_at": "2011-10-05T03:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124966",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:3" align="right">comment:3</div>

Oh, one more thing:

I cannot test whether the GMP-ECM and MPFR spkgs have the same problem (since they use GMP's / MPIR's `CFLAGS`), i.e., also fail on such systems if `ABI` isn't set.

If you find the time, you could also check this by unsetting `ABI` and reinstalling them (with `./sage -f ...`).



---

archive/issue_comments_124967.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,10 @@\n MPIR fails to build on **32-bit** operating systems running on **64-bit** processors if `CFLAGS` contain `-m32` and `ABI` is **not** set.\n \n The simple solution is to set `ABI=32` in this case, which the new spkg now does (on Linux, where the issue occurred). It also sets `ABI=64` if the operating system supports it, and `ABI` isn't already set, and prints according messages.\n+\n+---\n+\n+Upstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)\n \n ---\n \n``````\n",
    "created_at": "2011-10-05T04:07:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124967",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,10 @@
 MPIR fails to build on **32-bit** operating systems running on **64-bit** processors if `CFLAGS` contain `-m32` and `ABI` is **not** set.
 
 The simple solution is to set `ABI=32` in this case, which the new spkg now does (on Linux, where the issue occurred). It also sets `ABI=64` if the operating system supports it, and `ABI` isn't already set, and prints according messages.
+
+---
+
+Upstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)
 
 ---
 
``````




---

archive/issue_events_161047.json:
```json
{
    "actor": "https://github.com/strogdon",
    "created_at": "2011-10-05T04:53:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161047"
}
```



---

archive/issue_events_161048.json:
```json
{
    "actor": "https://github.com/strogdon",
    "created_at": "2011-10-05T04:53:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161048"
}
```



---

archive/issue_comments_124968.json:
```json
{
    "body": "Reviewer: **Steven Trogdon**",
    "created_at": "2011-10-05T04:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124968",
    "user": "https://github.com/strogdon"
}
```

Reviewer: **Steven Trogdon**



---

archive/issue_comments_124969.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@nexttime](#comment:3):\n\n> Oh, one more thing: I cannot test whether the GMP-ECM and MPFR spkgs have the same problem (since they use GMP's / MPIR's `CFLAGS`), i.e., also fail on such systems if `ABI` isn't set. If you find the time, you could also check this by unsetting `ABI` and reinstalling them (with `./sage -f ...`).\n\nThe new mpir spkg installs here on my 32-bit OS with 64-bit processor with ABI unset.\n\n```\nThe MPIR test suite passed successfully.\nNow cleaning up tmp files.\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing mpir-2.1.3.p5.spkg\n```\nIt also installed on an amd64 to which I have access. The ECM and MPFR spkgs reinstalled correctly with ABI unset on both the 32-bit and amd64 machines. A positive review here.",
    "created_at": "2011-10-05T04:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124969",
    "user": "https://github.com/strogdon"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@nexttime](#comment:3):

> Oh, one more thing: I cannot test whether the GMP-ECM and MPFR spkgs have the same problem (since they use GMP's / MPIR's `CFLAGS`), i.e., also fail on such systems if `ABI` isn't set. If you find the time, you could also check this by unsetting `ABI` and reinstalling them (with `./sage -f ...`).

The new mpir spkg installs here on my 32-bit OS with 64-bit processor with ABI unset.

```
The MPIR test suite passed successfully.
Now cleaning up tmp files.
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing mpir-2.1.3.p5.spkg
```
It also installed on an amd64 to which I have access. The ECM and MPFR spkgs reinstalled correctly with ABI unset on both the 32-bit and amd64 machines. A positive review here.



---

archive/issue_comments_124970.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,12 +3,9 @@\n The simple solution is to set `ABI=32` in this case, which the new spkg now does (on Linux, where the issue occurred). It also sets `ABI=64` if the operating system supports it, and `ABI` isn't already set, and prints according messages.\n \n ---\n-\n Upstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)\n \n ---\n-\n **New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg)\n \n **md5sum:** `7881a45bb797665f4f264e17fdab2aa5`\n-\n``````\n",
    "created_at": "2011-10-05T04:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124970",
    "user": "https://github.com/strogdon"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,12 +3,9 @@
 The simple solution is to set `ABI=32` in this case, which the new spkg now does (on Linux, where the issue occurred). It also sets `ABI=64` if the operating system supports it, and `ABI` isn't already set, and prints according messages.
 
 ---
-
 Upstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)
 
 ---
-
 **New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg)
 
 **md5sum:** `7881a45bb797665f4f264e17fdab2aa5`
-
``````




---

archive/issue_comments_124971.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@strogdon](#comment:5):\n> The new mpir spkg installs here on my 32-bit OS with 64-bit processor with ABI unset.\n> It also installed on an amd64 to which I have access. The ECM and MPFR spkgs reinstalled correctly with ABI unset on both the 32-bit and amd64 machines. A positive review here.\n\nSpeed reviewing, thanks!",
    "created_at": "2011-10-05T05:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124971",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@strogdon](#comment:5):
> The new mpir spkg installs here on my 32-bit OS with 64-bit processor with ABI unset.
> It also installed on an amd64 to which I have access. The ECM and MPFR spkgs reinstalled correctly with ABI unset on both the 32-bit and amd64 machines. A positive review here.

Speed reviewing, thanks!



---

archive/issue_comments_124972.json:
```json
{
    "body": "Changed reporter from **Nathann Cohen, Dan Drake, Steve Trogdon** to **Nathann Cohen, Dan Drake, Steven Trogdon**",
    "created_at": "2011-10-05T05:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124972",
    "user": "https://github.com/nexttime"
}
```

Changed reporter from **Nathann Cohen, Dan Drake, Steve Trogdon** to **Nathann Cohen, Dan Drake, Steven Trogdon**



---

archive/issue_comments_124973.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n( it compiled perfectly here ! Thank you very much leif ! `:-D`)",
    "created_at": "2011-10-05T10:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124973",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

( it compiled perfectly here ! Thank you very much leif ! `:-D`)



---

archive/issue_comments_124974.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha4**",
    "created_at": "2011-10-05T12:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124974",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.2.alpha4**



---

archive/issue_events_161049.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-05T12:18:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161049"
}
```



---

archive/issue_events_161050.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-05T12:18:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161050"
}
```



---

archive/issue_comments_124975.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThis **fails** to build on Itanium:\n\n```\nmpir-2.1.3.p5\nMachine:\nLinux iras 2.6.16.46-0.12-default #1 SMP Thu May 17 14:00:09 UTC 2007 ia64 ia64 ia64 GNU/Linux\nDeleting directories from past builds of previous/current versions of mpir-2.1.3.p5\nExtracting package /home/buildbot/build/sage/iras-1/iras_full/build/sage-4.7.2.alpha4/spkg/standard/mpir-2.1.3.p5.spkg ...\n-rw-r--r-- 1 buildbot sage 3759395 2011-10-04 22:36 /home/buildbot/build/sage/iras-1/iras_full/build/sage-4.7.2.alpha4/spkg/standard/mpir-2.1.3.p5.spkg\nFinished extraction\n****************************************************\nHost system\nuname -a:\nLinux iras 2.6.16.46-0.12-default #1 SMP Thu May 17 14:00:09 UTC 2007 ia64 ia64 ia64 GNU/Linux\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.1/ia64-Linux-suse/libexec/gcc/ia64-unknown-linux-gnu/4.6.1/lto-wrapper\nTarget: ia64-unknown-linux-gnu\nConfigured with: /usr/local/gcc-4.6.1/src/gcc-4.6.1/configure --enable-languages=c,c++,fortran --with-gnu-as --with-as=/usr/local/binutils-2.21/ia64-Linux-suse-gcc-4.5.1/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21/ia64-Linux-suse-gcc-4.5.1/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ia64-Linux-suse-gcc-4.6.0 --with-mpfr=/usr/local/mpfr-3.0.1/ia64-Linux-suse-mpir-2.4.0-gcc-4.6.0 --with-mpc=/usr/local/mpc-0.9/ia64-Linux-suse-mpir-2.4.0-mpfr-3.0.1-gcc-4.6.0 --prefix=/usr/local/gcc-4.6.1/ia64-Linux-suse\nThread model: posix\ngcc version 4.6.1 (GCC) \n****************************************************\nWarning: Building MPIR with SAGE_DEBUG=yes disables optimization.\nBuilding a 32-bit version of MPIR\nChecking what CFLAGS MPIR would use if they were empty...\nSettings required to properly build MPIR, taking into account SAGE_DEBUG etc.:\n  CFLAGS:   -g -O0\n  LDFLAGS:  -Wl,-z,noexecstack\n  ABI:     32\nSettings from the \"global\" environment:\n  CC:      gcc\n  CFLAGS:  \n  (CPPFLAGS, CXX and CXXFLAGS are listed below; these don't get modified.)\nUsing the spkg's (i.e. Sage's) default (plus mandatory) settings.\nFinally using the following settings:\n  CC=gcc\n  CFLAGS=   -g -O0\n  CPPFLAGS=\n  CXX=g++\n  CXXFLAGS=\n  LDFLAGS= -Wl,-z,noexecstack\n  ABI=32\n(These settings may still get overridden by 'configure' or Makefiles.)\nConfiguring MPIR with the following options:\n    --prefix=\"/home/buildbot/build/sage/iras-1/iras_full/build/sage-4.7.2.alpha4/local\" --enable-shared --enable-static --enable-gmpcompat --enable-cxx=yes \nYou can set MPIR_EXTRA_OPTS to pass additional parameters.\nchecking build system type... ia64-unknown-linux-gnu\nchecking host system type... ia64-unknown-linux-gnu\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make -j4 sets $(MAKE)... yes\nchecking whether to enable maintainer-specific portions of Makefiles... no\nconfigure: error: ABI=32 is not among the following valid choices: 64\nError configuring MPIR. (See above for the options passed to it.)\n```",
    "created_at": "2011-10-10T07:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124975",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

This **fails** to build on Itanium:

```
mpir-2.1.3.p5
Machine:
Linux iras 2.6.16.46-0.12-default #1 SMP Thu May 17 14:00:09 UTC 2007 ia64 ia64 ia64 GNU/Linux
Deleting directories from past builds of previous/current versions of mpir-2.1.3.p5
Extracting package /home/buildbot/build/sage/iras-1/iras_full/build/sage-4.7.2.alpha4/spkg/standard/mpir-2.1.3.p5.spkg ...
-rw-r--r-- 1 buildbot sage 3759395 2011-10-04 22:36 /home/buildbot/build/sage/iras-1/iras_full/build/sage-4.7.2.alpha4/spkg/standard/mpir-2.1.3.p5.spkg
Finished extraction
****************************************************
Host system
uname -a:
Linux iras 2.6.16.46-0.12-default #1 SMP Thu May 17 14:00:09 UTC 2007 ia64 ia64 ia64 GNU/Linux
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.1/ia64-Linux-suse/libexec/gcc/ia64-unknown-linux-gnu/4.6.1/lto-wrapper
Target: ia64-unknown-linux-gnu
Configured with: /usr/local/gcc-4.6.1/src/gcc-4.6.1/configure --enable-languages=c,c++,fortran --with-gnu-as --with-as=/usr/local/binutils-2.21/ia64-Linux-suse-gcc-4.5.1/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21/ia64-Linux-suse-gcc-4.5.1/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ia64-Linux-suse-gcc-4.6.0 --with-mpfr=/usr/local/mpfr-3.0.1/ia64-Linux-suse-mpir-2.4.0-gcc-4.6.0 --with-mpc=/usr/local/mpc-0.9/ia64-Linux-suse-mpir-2.4.0-mpfr-3.0.1-gcc-4.6.0 --prefix=/usr/local/gcc-4.6.1/ia64-Linux-suse
Thread model: posix
gcc version 4.6.1 (GCC) 
****************************************************
Warning: Building MPIR with SAGE_DEBUG=yes disables optimization.
Building a 32-bit version of MPIR
Checking what CFLAGS MPIR would use if they were empty...
Settings required to properly build MPIR, taking into account SAGE_DEBUG etc.:
  CFLAGS:   -g -O0
  LDFLAGS:  -Wl,-z,noexecstack
  ABI:     32
Settings from the "global" environment:
  CC:      gcc
  CFLAGS:  
  (CPPFLAGS, CXX and CXXFLAGS are listed below; these don't get modified.)
Using the spkg's (i.e. Sage's) default (plus mandatory) settings.
Finally using the following settings:
  CC=gcc
  CFLAGS=   -g -O0
  CPPFLAGS=
  CXX=g++
  CXXFLAGS=
  LDFLAGS= -Wl,-z,noexecstack
  ABI=32
(These settings may still get overridden by 'configure' or Makefiles.)
Configuring MPIR with the following options:
    --prefix="/home/buildbot/build/sage/iras-1/iras_full/build/sage-4.7.2.alpha4/local" --enable-shared --enable-static --enable-gmpcompat --enable-cxx=yes 
You can set MPIR_EXTRA_OPTS to pass additional parameters.
checking build system type... ia64-unknown-linux-gnu
checking host system type... ia64-unknown-linux-gnu
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make -j4 sets $(MAKE)... yes
checking whether to enable maintainer-specific portions of Makefiles... no
configure: error: ABI=32 is not among the following valid choices: 64
Error configuring MPIR. (See above for the options passed to it.)
```



---

archive/issue_comments_124976.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe problem is that the `-m32`/`-m64` switches are not supported on every system.  So we should do the following:\n\n1. Try building and running with `-m64`.\n2. Try building and running with `-m32`.\n3. If *both* fail, fall back to the old behaviour (which was what?)",
    "created_at": "2011-10-10T08:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124976",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

The problem is that the `-m32`/`-m64` switches are not supported on every system.  So we should do the following:

1. Try building and running with `-m64`.
2. Try building and running with `-m32`.
3. If *both* fail, fall back to the old behaviour (which was what?)



---

archive/issue_comments_124977.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,4 @@\n Upstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)\n \n ---\n-**New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg)\n-\n-**md5sum:** `7881a45bb797665f4f264e17fdab2aa5`\n+**New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p6.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p6.spkg)\n``````\n",
    "created_at": "2011-10-10T08:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124977",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,4 @@
 Upstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)
 
 ---
-**New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p5.spkg)
-
-**md5sum:** `7881a45bb797665f4f264e17fdab2aa5`
+**New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p6.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p6.spkg)
``````




---

archive/issue_comments_124978.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThe attached patch should fix the problem.  New spkg for testing: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg)",
    "created_at": "2011-10-10T08:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124978",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

The attached patch should fix the problem.  New spkg for testing: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg)



---

archive/issue_comments_124979.json:
```json
{
    "body": "Changed merged from **sage-4.7.2.alpha4** to none",
    "created_at": "2011-10-10T08:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124979",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-4.7.2.alpha4** to none



---

archive/issue_comments_124980.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n Upstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)\n \n ---\n-**New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p6.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p6.spkg)\n+**New spkg:** [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg)\n``````\n",
    "created_at": "2011-10-10T08:58:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124980",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 Upstream report: [http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd](http://groups.google.com/group/mpir-devel/browse_thread/thread/46ccdc5dfc3485cd)
 
 ---
-**New spkg:** [http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p6.spkg](http://sage.math.washington.edu/home/leif/Sage/spkgs/mpir-2.1.3.p6.spkg)
+**New spkg:** [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.1.3.p6.spkg)
``````




---

archive/issue_comments_124981.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nA much simpler solution is to set `CFLAG64=\"\"` on `ia64` (Itanium), then the first attempt (building and running a 64-bit executable) will succeed.",
    "created_at": "2011-10-10T12:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124981",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:14" align="right">comment:14</div>

A much simpler solution is to set `CFLAG64=""` on `ia64` (Itanium), then the first attempt (building and running a 64-bit executable) will succeed.



---

archive/issue_comments_124982.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nBy the way, I'd say that's a GCC flaw; it should support `-m64` on Itanium as well since there it's just a redundant flag, as opposed to a conflicting or unsupported one.",
    "created_at": "2011-10-10T13:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124982",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

By the way, I'd say that's a GCC flaw; it should support `-m64` on Itanium as well since there it's just a redundant flag, as opposed to a conflicting or unsupported one.



---

archive/issue_comments_124983.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOh, it does have related options for HP-UX: :-)\n\n```\n       -milp32\n       -mlp64\n           Generate code for a 32-bit or 64-bit environment.  The 32-bit environment sets int,\n           long and pointer to 32 bits.  The 64-bit environment sets int to 32 bits and long and\n           pointer to 64 bits.  These are HP-UX specific flags.\n```",
    "created_at": "2011-10-10T13:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124983",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Oh, it does have related options for HP-UX: :-)

```
       -milp32
       -mlp64
           Generate code for a 32-bit or 64-bit environment.  The 32-bit environment sets int,
           long and pointer to 32 bits.  The 64-bit environment sets int to 32 bits and long and
           pointer to 64 bits.  These are HP-UX specific flags.
```



---

archive/issue_comments_124984.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@nexttime](#comment:14):\n> A much simpler solution is to set `CFLAG64=\"\"` on `ia64` (Itanium), then the first attempt (building and running a 64-bit executable) will succeed.\n\nMy patch doesn't do specific checking for Itanium, it will work on *any* compiler which does not support `-m32` and `-m64`.",
    "created_at": "2011-10-10T13:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124984",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@nexttime](#comment:14):
> A much simpler solution is to set `CFLAG64=""` on `ia64` (Itanium), then the first attempt (building and running a 64-bit executable) will succeed.

My patch doesn't do specific checking for Itanium, it will work on *any* compiler which does not support `-m32` and `-m64`.



---

archive/issue_comments_124985.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@jdemeyer](#comment:17):\n> Replying to [@nexttime](#comment:14):\n> > A much simpler solution is to set `CFLAG64=\"\"` on `ia64` (Itanium), then the first attempt (building and running a 64-bit executable) will succeed.\n\n> \n> My patch doesn't do specific checking for Itanium, it will work on *any* compiler which does not support `-m32` and `-m64`.\n\nI'd factor out `-m32` though, i.e., use `$CFLAG32` in the second attempt and add\n\n```sh\nif [[ -z $CFLAG32 ]]; then\n    CFLAG32=-m32\nfi\n```\nor\n\n```sh\n: ${CFLAG32=-m32} # doesn't invalidate an empty setting (\"\")\n```\nor the like (at the top level), such that porting people can adapt it to whatever they need.",
    "created_at": "2011-10-10T13:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124985",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@jdemeyer](#comment:17):
> Replying to [@nexttime](#comment:14):
> > A much simpler solution is to set `CFLAG64=""` on `ia64` (Itanium), then the first attempt (building and running a 64-bit executable) will succeed.

> 
> My patch doesn't do specific checking for Itanium, it will work on *any* compiler which does not support `-m32` and `-m64`.

I'd factor out `-m32` though, i.e., use `$CFLAG32` in the second attempt and add

```sh
if [[ -z $CFLAG32 ]]; then
    CFLAG32=-m32
fi
```
or

```sh
: ${CFLAG32=-m32} # doesn't invalidate an empty setting ("")
```
or the like (at the top level), such that porting people can adapt it to whatever they need.



---

archive/issue_comments_124986.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAlternatively, you could just set `ABI=64` (without any checks) on Itanium, which is reasonable as it doesn't (or at least we don't) support anything else on that.",
    "created_at": "2011-10-10T13:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124986",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">comment:19</div>

Alternatively, you could just set `ABI=64` (without any checks) on Itanium, which is reasonable as it doesn't (or at least we don't) support anything else on that.



---

archive/issue_comments_124987.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n(I originally intended to restrict the test / setting the ABI to x86 / x86_64 and ppc / ppc64 anyway... ;-) )",
    "created_at": "2011-10-10T13:47:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124987",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">comment:20</div>

(I originally intended to restrict the test / setting the ABI to x86 / x86_64 and ppc / ppc64 anyway... ;-) )



---

archive/issue_events_161051.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-11T07:36:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161051"
}
```



---

archive/issue_events_161052.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-11T07:36:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161052"
}
```



---

archive/issue_events_161053.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-11T07:36:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161053"
}
```



---

archive/issue_events_161054.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-11T07:36:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161054"
}
```



---

archive/issue_comments_124988.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nNew spkg which uses `$CFLAG32`, same location. Needs review.",
    "created_at": "2011-10-11T15:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124988",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

New spkg which uses `$CFLAG32`, same location. Needs review.



---

archive/issue_events_161055.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-11T15:41:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161055"
}
```



---

archive/issue_comments_124989.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jdemeyer](#comment:22):\n> New spkg which uses `$CFLAG32`, same location. Needs review.\n\n**Positive review**, although the comment\n\n```\n            # (Usually succeeds, unless e.g. a 32-bit CPU is explicitly selected by CFLAGS.)\n```\nreferred to *building*, not *running* a 64-bit executable, and the Changelog entry mentions `-m32` and `-m64` rather than `CFLAG32` and `CFLAG64`.\n\n\nTested with `SAGE_CHECK=yes` on Linux x86, x86_64 and ia64, with and without `{C,CPP,CXX}FLAGS` and `ABI` set.",
    "created_at": "2011-10-11T16:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124989",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jdemeyer](#comment:22):
> New spkg which uses `$CFLAG32`, same location. Needs review.

**Positive review**, although the comment

```
            # (Usually succeeds, unless e.g. a 32-bit CPU is explicitly selected by CFLAGS.)
```
referred to *building*, not *running* a 64-bit executable, and the Changelog entry mentions `-m32` and `-m64` rather than `CFLAG32` and `CFLAG64`.


Tested with `SAGE_CHECK=yes` on Linux x86, x86_64 and ia64, with and without `{C,CPP,CXX}FLAGS` and `ABI` set.



---

archive/issue_events_161056.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-11T16:30:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161056"
}
```



---

archive/issue_events_161057.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-11T16:30:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161057"
}
```



---

archive/issue_comments_124990.json:
```json
{
    "body": "Changed author from **Leif Leonhardy** to **Leif Leonhardy, Jeroen Demeyer**",
    "created_at": "2011-10-11T16:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124990",
    "user": "https://github.com/nexttime"
}
```

Changed author from **Leif Leonhardy** to **Leif Leonhardy, Jeroen Demeyer**



---

archive/issue_comments_124991.json:
```json
{
    "body": "Changed reviewer from **Steven Trogdon** to **Steven Trogdon, Jeroen Demeyer, Leif Leonhardy**",
    "created_at": "2011-10-11T16:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124991",
    "user": "https://github.com/nexttime"
}
```

Changed reviewer from **Steven Trogdon** to **Steven Trogdon, Jeroen Demeyer, Leif Leonhardy**



---

archive/issue_comments_124992.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAttachment: **[mpir-2.1.3.p5-p6.diff.gz](https://github.com/sagemath/sage/files/ticket11896/mpir-2.1.3.p5-p6.diff.gz)**\n\nReplying to [@nexttime](#comment:23):\n> Replying to [@jdemeyer](#comment:22):\n> > New spkg which uses `$CFLAG32`, same location. Needs review.\n\n> \n> **Positive review**, although the comment\n> \n> ```\n>             # (Usually succeeds, unless e.g. a 32-bit CPU is explicitly selected by CFLAGS.)\n> ```\n> referred to *building*, not *running* a 64-bit executable\n\nI think it is actually **more** correct to refer to *building and running* rather than just *building*.\n\n> the Changelog entry mentions `-m32` and `-m64` rather than `CFLAG32` and `CFLAG64`.\n\nFixed this.",
    "created_at": "2011-10-11T19:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124992",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Attachment: **[mpir-2.1.3.p5-p6.diff.gz](https://github.com/sagemath/sage/files/ticket11896/mpir-2.1.3.p5-p6.diff.gz)**

Replying to [@nexttime](#comment:23):
> Replying to [@jdemeyer](#comment:22):
> > New spkg which uses `$CFLAG32`, same location. Needs review.

> 
> **Positive review**, although the comment
> 
> ```
>             # (Usually succeeds, unless e.g. a 32-bit CPU is explicitly selected by CFLAGS.)
> ```
> referred to *building*, not *running* a 64-bit executable

I think it is actually **more** correct to refer to *building and running* rather than just *building*.

> the Changelog entry mentions `-m32` and `-m64` rather than `CFLAG32` and `CFLAG64`.

Fixed this.



---

archive/issue_events_161058.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-14T09:40:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161058"
}
```



---

archive/issue_events_161059.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-14T09:40:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161059"
}
```



---

archive/issue_comments_124993.json:
```json
{
    "body": "Merged: **sage-4.7.3.alpha0**",
    "created_at": "2011-10-14T09:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124993",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.3.alpha0**



---

archive/issue_comments_124994.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nFor what it's worth, this fails to build on the skynet machine silius. I get the same error message with p5 and p6:\n\n```\nBuilding a 64-bit version of MPIR\nChecking what CFLAGS MPIR would use if they were empty...\nSettings required to properly build MPIR, taking into account SAGE_DEBUG etc.:\n  CFLAGS:\n  LDFLAGS:  -Wl,-z,noexecstack\n  ABI:     64\nSettings from the \"global\" environment:\n  CC:      gcc\n  CFLAGS:\n  (CPPFLAGS, CXX and CXXFLAGS are listed below; these don't get modified.)\nUsing the spkg's (i.e. Sage's) default (plus mandatory) settings.\nFinally using the following settings:\n  CC=gcc\n  CFLAGS=  -g -O3\n  CPPFLAGS=\n  CXX=g++\n  CXXFLAGS=\n  LDFLAGS= -Wl,-z,noexecstack\n  ABI=64\n(These settings may still get overridden by 'configure' or Makefiles.)\nConfiguring MPIR with the following options:\n    --prefix=\"/home/palmieri/silius/sage-4.7.2.alpha4/local\" --enable-shared --enable-static --ena\\\nble-gmpcompat --enable-cxx=yes\nYou can set MPIR_EXTRA_OPTS to pass additional parameters.\nchecking build system type... power7-unknown-linux-gnu\nchecking host system type... power7-unknown-linux-gnu\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make -j12 sets $(MAKE)... yes\nchecking whether to enable maintainer-specific portions of Makefiles... no\nconfigure: error: ABI=64 is not among the following valid choices: mode64 mode32 32\nError configuring MPIR. (See above for the options passed to it.)\n```",
    "created_at": "2011-10-29T18:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124994",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:26" align="right">comment:26</div>

For what it's worth, this fails to build on the skynet machine silius. I get the same error message with p5 and p6:

```
Building a 64-bit version of MPIR
Checking what CFLAGS MPIR would use if they were empty...
Settings required to properly build MPIR, taking into account SAGE_DEBUG etc.:
  CFLAGS:
  LDFLAGS:  -Wl,-z,noexecstack
  ABI:     64
Settings from the "global" environment:
  CC:      gcc
  CFLAGS:
  (CPPFLAGS, CXX and CXXFLAGS are listed below; these don't get modified.)
Using the spkg's (i.e. Sage's) default (plus mandatory) settings.
Finally using the following settings:
  CC=gcc
  CFLAGS=  -g -O3
  CPPFLAGS=
  CXX=g++
  CXXFLAGS=
  LDFLAGS= -Wl,-z,noexecstack
  ABI=64
(These settings may still get overridden by 'configure' or Makefiles.)
Configuring MPIR with the following options:
    --prefix="/home/palmieri/silius/sage-4.7.2.alpha4/local" --enable-shared --enable-static --ena\
ble-gmpcompat --enable-cxx=yes
You can set MPIR_EXTRA_OPTS to pass additional parameters.
checking build system type... power7-unknown-linux-gnu
checking host system type... power7-unknown-linux-gnu
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make -j12 sets $(MAKE)... yes
checking whether to enable maintainer-specific portions of Makefiles... no
configure: error: ABI=64 is not among the following valid choices: mode64 mode32 32
Error configuring MPIR. (See above for the options passed to it.)
```



---

archive/issue_comments_124995.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jhpalmieri](#comment:26):\n> For what it's worth, this fails to build on the skynet machine silius. I get the same error message with p5 and p6.\n\nOoops, I was pretty sure I also tested it there.  The p4 builds just fine.\n\nI'll prepare a follow-up spkg...",
    "created_at": "2011-10-29T20:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124995",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jhpalmieri](#comment:26):
> For what it's worth, this fails to build on the skynet machine silius. I get the same error message with p5 and p6.

Ooops, I was pretty sure I also tested it there.  The p4 builds just fine.

I'll prepare a follow-up spkg...



---

archive/issue_comments_124996.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@nexttime](#comment:27):\n> Replying to [@jhpalmieri](#comment:26):\n> > For what it's worth, this fails to build on the skynet machine silius. I get the same error message with p5 and p6.\n\n> \n> Ooops, I was pretty sure I also tested it there.  The p4 builds just fine.\n> \n> I'll prepare a follow-up spkg...\n\nNew spkg (p7) up on #11964, needs review.",
    "created_at": "2011-10-31T00:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124996",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@nexttime](#comment:27):
> Replying to [@jhpalmieri](#comment:26):
> > For what it's worth, this fails to build on the skynet machine silius. I get the same error message with p5 and p6.

> 
> Ooops, I was pretty sure I also tested it there.  The p4 builds just fine.
> 
> I'll prepare a follow-up spkg...

New spkg (p7) up on #11964, needs review.



---

archive/issue_comments_124997.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124997",
    "user": "https://github.com/jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_events_161060.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T16:14:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161060"
}
```



---

archive/issue_comments_124998.json:
```json
{
    "body": "Changed merged from **sage-4.7.3.alpha0** to **sage-4.8.alpha0**",
    "created_at": "2011-11-03T16:18:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11896#issuecomment-124998",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-4.7.3.alpha0** to **sage-4.8.alpha0**



---

archive/issue_events_161061.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T16:18:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11896",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11896#event-161061"
}
```
