# Issue 11754: Computation of rank-decompositions in Sage

archive/issues_011582.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nHello everybody !\n\nThis patch is an interface between Sage and the software RW, written by Philipp Klaus Krause [1]. It is written in C, and freshly licensed under the GPL2. It is a highly enumerative code that uses a lot of memory, but is still so far the best practical way to obtain optimal decompositions.\n\nThis patch creates the module sage.graphs.graph_decompositions and the rankwidth-related files. As it requires some documentation, some words are added on what a rank-decomposition is and where the code is coming from. Doing that, I also added sage.graphs.modular_decompositions to the documentation.\n\n(As I created a module graph_decompositions, it would make sense to move te modular_decomposition there. It thought it best to do it in a distinct patch, this one being large enough already)\n\nOh. By the way, most of the patch actually contains the copy of the files written by Philipp Klaus Krause.\n\nNathann\n\nhttp://pholia.tdi.informatik.uni-frankfurt.de/~philipp/software/rw.shtml\n\nAPPLY:\n* [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz) (merged in sage-5.0.beta6)\n* [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz) (merged in sage-5.0.beta6)\n* [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz) (merged in sage-5.0.beta6)\n* [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz) (merged in sage-5.0.beta6)\n* [attachment: 11754_manifest.patch](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz) (**merged in sage-5.0.beta7**)\n\n\nCC:  @sagetrac-lsampaio @sagetrac-mvngu\n\nComponent: **graph theory**\n\nAuthor: **Nathann Cohen**\n\nReviewer: **David Coudert, Jeroen Demeyer**\n\nMerged: **sage-5.0.beta6**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11754_\n\n",
    "closed_at": "2012-03-05T13:17:25Z",
    "created_at": "2011-08-29T07:40:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Computation of rank-decompositions in Sage",
    "type": "issue",
    "updated_at": "2012-03-17T17:00:21Z",
    "url": "https://github.com/sagemath/sage/issues/11754",
    "user": "https://github.com/nathanncohen"
}
```
<div id="comment:0"></div>

Hello everybody !

This patch is an interface between Sage and the software RW, written by Philipp Klaus Krause [1]. It is written in C, and freshly licensed under the GPL2. It is a highly enumerative code that uses a lot of memory, but is still so far the best practical way to obtain optimal decompositions.

This patch creates the module sage.graphs.graph_decompositions and the rankwidth-related files. As it requires some documentation, some words are added on what a rank-decomposition is and where the code is coming from. Doing that, I also added sage.graphs.modular_decompositions to the documentation.

(As I created a module graph_decompositions, it would make sense to move te modular_decomposition there. It thought it best to do it in a distinct patch, this one being large enough already)

Oh. By the way, most of the patch actually contains the copy of the files written by Philipp Klaus Krause.

Nathann

http://pholia.tdi.informatik.uni-frankfurt.de/~philipp/software/rw.shtml

APPLY:
* [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz) (merged in sage-5.0.beta6)
* [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz) (merged in sage-5.0.beta6)
* [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz) (merged in sage-5.0.beta6)
* [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz) (merged in sage-5.0.beta6)
* [attachment: 11754_manifest.patch](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz) (**merged in sage-5.0.beta7**)


CC:  @sagetrac-lsampaio @sagetrac-mvngu

Component: **graph theory**

Author: **Nathann Cohen**

Reviewer: **David Coudert, Jeroen Demeyer**

Merged: **sage-5.0.beta6**

_Issue created by migration from https://trac.sagemath.org/ticket/11754_





---

archive/issue_events_156340.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-08-29T07:40:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156340"
}
```



---

archive/issue_events_156341.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-08-29T07:40:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156341"
}
```



---

archive/issue_events_156342.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-08-29T07:40:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156342"
}
```



---

archive/issue_events_156343.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-08-29T07:40:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156343"
}
```



---

archive/issue_events_156344.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-08-29T07:40:29Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156344"
}
```



---

archive/issue_events_156345.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-08-29T07:40:29Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156345"
}
```



---

archive/issue_events_156346.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-08-29T07:40:29Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156346"
}
```



---

archive/issue_events_156347.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-08-29T07:41:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156347"
}
```



---

archive/issue_events_156348.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-01-01T21:52:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156348"
}
```



---

archive/issue_events_156349.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-01-01T21:52:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156349"
}
```



---

archive/issue_comments_122243.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2012-01-01T21:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122243",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_122244.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nNathann,\n\nI tried to install the patch with sage-4.8.alpha5 and it's not possible anymore. \nCould you update the patch ?\n\nBest,\nD.\n\n```\ncompote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> hg qimport ~/Soft/sage-patchs/trac_11754.patchadding trac_11754.patch to series file\ncompote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> hg qpush\napplying trac_11754.patch\npatching file doc/en/reference/graphs.rst\nHunk #1 FAILED at 46\n1 out of 1 hunks FAILED -- saving rejects to file doc/en/reference/graphs.rst.rej\nfile sage/graphs/graph_decompositions/__init__.py already exists\n1 out of 1 hunks FAILED -- saving rejects to file sage/graphs/graph_decompositions/__init__.py.rej\npatching file setup.py\nHunk #1 FAILED at 929\n1 out of 1 hunks FAILED -- saving rejects to file setup.py.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh trac_11754.patch\ncompote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> \n```",
    "created_at": "2012-01-01T21:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122244",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:2" align="right">comment:2</div>

Nathann,

I tried to install the patch with sage-4.8.alpha5 and it's not possible anymore. 
Could you update the patch ?

Best,
D.

```
compote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> hg qimport ~/Soft/sage-patchs/trac_11754.patchadding trac_11754.patch to series file
compote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> hg qpush
applying trac_11754.patch
patching file doc/en/reference/graphs.rst
Hunk #1 FAILED at 46
1 out of 1 hunks FAILED -- saving rejects to file doc/en/reference/graphs.rst.rej
file sage/graphs/graph_decompositions/__init__.py already exists
1 out of 1 hunks FAILED -- saving rejects to file sage/graphs/graph_decompositions/__init__.py.rej
patching file setup.py
Hunk #1 FAILED at 929
1 out of 1 hunks FAILED -- saving rejects to file setup.py.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac_11754.patch
compote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> 
```



---

archive/issue_comments_122245.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI thought it would be much worse ! Just obvious conflicts with the vertex_separation stuff... Patch updated ! `:-)`\n\nNathann",
    "created_at": "2012-01-01T22:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122245",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

I thought it would be much worse ! Just obvious conflicts with the vertex_separation stuff... Patch updated ! `:-)`

Nathann



---

archive/issue_events_156350.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-01T22:47:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156350"
}
```



---

archive/issue_events_156351.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-01T22:47:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156351"
}
```



---

archive/issue_comments_122246.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI can now install the patch correctly.\nIt works on my computer for graphs with 20 nodes and seems OK for 25 nodes (I stopped computation since its quite long), but not for graphs with 30 nodes (see error message bellow). I assume I don't have enough memory on my computer, but the error message is not explicit enough.\nIs it possible to test if enough memory is available to run the algorithm as you did for vertex separation and pathwidth ?\nThanks,\nDavid.\n\n```\nsage: G = graphs.RandomGNM(30,200)\nsage: x,H = G.rank_decomposition()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:815)()\n\nRuntimeError: Segmentation fault\n```",
    "created_at": "2012-01-02T00:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122246",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:4" align="right">comment:4</div>

I can now install the patch correctly.
It works on my computer for graphs with 20 nodes and seems OK for 25 nodes (I stopped computation since its quite long), but not for graphs with 30 nodes (see error message bellow). I assume I don't have enough memory on my computer, but the error message is not explicit enough.
Is it possible to test if enough memory is available to run the algorithm as you did for vertex separation and pathwidth ?
Thanks,
David.

```
sage: G = graphs.RandomGNM(30,200)
sage: x,H = G.rank_decomposition()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:815)()

RuntimeError: Segmentation fault
```



---

archive/issue_comments_122247.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHMmmmmmm.... In the part of the code I wrote the memory allocations are checked, and it would be bad if it came from the original source code. We try not to put our hands in this kind of code, in order to avoid any troubles when the original source codes get updated (we would have to do all our modifications again on the updated version). What we usually do in these cases is report the bug upstream and wait for them to fix it.\n\nThe thing is that I was not able to reproduce your bug on my computer. It begins to eat a lot of memory but no segfault, so I do not really know how to debug it `^^;`\n\nAre you testing this code on your mac ? I hope it is not one of those integer initializations again `:-P`\n\nNathann",
    "created_at": "2012-01-02T10:21:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122247",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

HMmmmmmm.... In the part of the code I wrote the memory allocations are checked, and it would be bad if it came from the original source code. We try not to put our hands in this kind of code, in order to avoid any troubles when the original source codes get updated (we would have to do all our modifications again on the updated version). What we usually do in these cases is report the bug upstream and wait for them to fix it.

The thing is that I was not able to reproduce your bug on my computer. It begins to eat a lot of memory but no segfault, so I do not really know how to debug it `^^;`

Are you testing this code on your mac ? I hope it is not one of those integer initializations again `:-P`

Nathann



---

archive/issue_comments_122248.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe test has been done on a standard PC (32 bits) with 4G of RAM and running linux. Nothing special. The error is almost instantaneous. \n\nSome simple tests.\n\n```\nsage: G = graphs.PetersenGraph()\nsage: G.rank_decomposition()\n(3, Graph on 19 vertices)\nsage: G = graphs.RandomGNM(20,200)\nsage: G.rank_decomposition()\n(1, Graph on 39 vertices)\n```\n\nTesting with 32 nodes => the patch is working for 31 vertices only !\n\n```\nsage: G = graphs.RandomGNM(32,200)\nsage: G.connected_components_number()\n1\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nException                                 Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:677)()\n\nException: The rank decomposition cannot be computed on graphs of more than 32 vertices.\n```\n\nThe patch contains some test regarding memory requirement\n\n```\nsage: G = graphs.RandomGNM(29,200)\nsage: G.connected_components_number()\n1\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nException                                 Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:730)()\n\nException: There has been a mistake while converting the Sage graph to a C structure. The memory is probably insufficient (2^(n+1) is a *LOT*).\n\n```\n\nBut the test is not always working, perhaps because I'm on a 32 bits computer...\n\n```\n\nsage: G = graphs.RandomGNM(30,200)\nsage: G.connected_components_number()\n1\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:815)()\n\nRuntimeError: Segmentation fault\n\n```\n\n\nI also have a segfault when running on an empty graph. A simple test is certainly missing.\n\n```\nsage: G= Graph()\nsage: G.rank_decomposition()\n/path-to-sage/sage-4.8.alpha5/local/lib/libcsage.so(print_backtrace+0x3b)[0x4f7967]\n/path-to-sage/sage-4.8.alpha5/local/lib/libcsage.so(sigdie+0x17)[0x4f79a7]\n...\n...\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n------------------------------------------------------------------------\nlocal/bin/sage-sage: line 305:  4884 Segmentation fault      (core dumped) sage-ipython \"$@\" -i\n```\n\n\nHope it helps fixing the problems.\n\nBest,\n\nDavid.",
    "created_at": "2012-01-02T10:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122248",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

The test has been done on a standard PC (32 bits) with 4G of RAM and running linux. Nothing special. The error is almost instantaneous. 

Some simple tests.

```
sage: G = graphs.PetersenGraph()
sage: G.rank_decomposition()
(3, Graph on 19 vertices)
sage: G = graphs.RandomGNM(20,200)
sage: G.rank_decomposition()
(1, Graph on 39 vertices)
```

Testing with 32 nodes => the patch is working for 31 vertices only !

```
sage: G = graphs.RandomGNM(32,200)
sage: G.connected_components_number()
1
sage: G.rank_decomposition()
---------------------------------------------------------------------------
Exception                                 Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:677)()

Exception: The rank decomposition cannot be computed on graphs of more than 32 vertices.
```

The patch contains some test regarding memory requirement

```
sage: G = graphs.RandomGNM(29,200)
sage: G.connected_components_number()
1
sage: G.rank_decomposition()
---------------------------------------------------------------------------
Exception                                 Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:730)()

Exception: There has been a mistake while converting the Sage graph to a C structure. The memory is probably insufficient (2^(n+1) is a *LOT*).

```

But the test is not always working, perhaps because I'm on a 32 bits computer...

```

sage: G = graphs.RandomGNM(30,200)
sage: G.connected_components_number()
1
sage: G.rank_decomposition()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:815)()

RuntimeError: Segmentation fault

```


I also have a segfault when running on an empty graph. A simple test is certainly missing.

```
sage: G= Graph()
sage: G.rank_decomposition()
/path-to-sage/sage-4.8.alpha5/local/lib/libcsage.so(print_backtrace+0x3b)[0x4f7967]
/path-to-sage/sage-4.8.alpha5/local/lib/libcsage.so(sigdie+0x17)[0x4f79a7]
...
...
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
local/bin/sage-sage: line 305:  4884 Segmentation fault      (core dumped) sage-ipython "$@" -i
```


Hope it helps fixing the problems.

Best,

David.



---

archive/issue_comments_122249.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHellooooooo David !!\n\nI just updated the patch so that the case n == 0 is checked. This being said, there is nothing I can do with the segfault you meet as I have not been able to reproduce it. I read my code several times and try to pay attention to those memory errors, all the malloc are checked, etc... I am beginning to think the error may be in the original C code and perhaps it is not too hard to spot by adding \"printf(\"Hello\\n\");\" at some different places until we know where the error is coming from. \nAfter this, I can forward the problem to the author and ask for a patch (and I don't expect this to take too much time either).\n\nThe thing is that I really can not debug this without being able to reproduce the bug. I tried maaaaaaany times t create a random graph and give it a try but it never happened. Did you tell me that the error occurred right when the function was called ? And do you know if it happens \"often\" ? How many random graphs do you try before it segfaults ?\n\nNathann",
    "created_at": "2012-01-08T10:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122249",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

Hellooooooo David !!

I just updated the patch so that the case n == 0 is checked. This being said, there is nothing I can do with the segfault you meet as I have not been able to reproduce it. I read my code several times and try to pay attention to those memory errors, all the malloc are checked, etc... I am beginning to think the error may be in the original C code and perhaps it is not too hard to spot by adding "printf("Hello\n");" at some different places until we know where the error is coming from. 
After this, I can forward the problem to the author and ask for a patch (and I don't expect this to take too much time either).

The thing is that I really can not debug this without being able to reproduce the bug. I tried maaaaaaany times t create a random graph and give it a try but it never happened. Did you tell me that the error occurred right when the function was called ? And do you know if it happens "often" ? How many random graphs do you try before it segfaults ?

Nathann



---

archive/issue_comments_122250.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI just tried the new version of the patch.\n\nIt is now OK for empty graphs\n\n```\nsage: G = Graph()\nsage: G.rank_decomposition()\n(0, Graph on 0 vertices)\n```\n\nI don't know what is the expected result for non-connected graphs. I have the following result:\n\n```\nsage: G = graphs.RandomGNM(10,1)\nsage: G.connected_components_number()\n9\nsage: G.rank_decomposition()\n(1, Graph on 19 vertices)\n```\n\nNow, concerning large graphs:\n\n* The exception message for N==32 could be slightly improve. The current message is \"\nException: The rank decomposition cannot be computed on graphs of more than 32 vertices.\", but is it >32 or >=32 ?\n\n* N == 31 AND N == 29: I got the correct message: \"Exception: There has been a mistake while converting the Sage graph to a C structure. The memory is probably insufficient (2^(n+1) is a *LOT*).\"\n\n* N == 30: I have a segfault immediatly, that is for the first 30 vertices graph I'm trying:\n\n```\nsage: G = graphs.RandomGNM(30,500)\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-blop/sage/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:863)()\n\nRuntimeError: Segmentation fault\n\n``` \n\nI tried with other 30 vertices graphs: G = graphs.GridGraph([5,6]), G = graphs.RandomTree(30), G = graphs.CompleteGraph(30), ... and I have exactly the same segfault.\n\nThe problem comes from the \"if sage_graph_to_matrix(G)\" in which you use the \"    int init_rw_dec(uint_fast8_t n) \" function that uses the \"int init_rw(uint_fast8_t n)\" function. \nMost probably, the computation exceeds the type capacity and we get a wrong result. \nSo, to be on the safe side, I suggest to add a test in the sage_graph_to_matrix function to test if memory allocation is possible.\nOr, as you have suggested, you can ask for a patch from the original author.\n\nBest,\nD.",
    "created_at": "2012-01-08T13:00:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122250",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

I just tried the new version of the patch.

It is now OK for empty graphs

```
sage: G = Graph()
sage: G.rank_decomposition()
(0, Graph on 0 vertices)
```

I don't know what is the expected result for non-connected graphs. I have the following result:

```
sage: G = graphs.RandomGNM(10,1)
sage: G.connected_components_number()
9
sage: G.rank_decomposition()
(1, Graph on 19 vertices)
```

Now, concerning large graphs:

* The exception message for N==32 could be slightly improve. The current message is "
Exception: The rank decomposition cannot be computed on graphs of more than 32 vertices.", but is it >32 or >=32 ?

* N == 31 AND N == 29: I got the correct message: "Exception: There has been a mistake while converting the Sage graph to a C structure. The memory is probably insufficient (2^(n+1) is a *LOT*)."

* N == 30: I have a segfault immediatly, that is for the first 30 vertices graph I'm trying:

```
sage: G = graphs.RandomGNM(30,500)
sage: G.rank_decomposition()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-blop/sage/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:863)()

RuntimeError: Segmentation fault

``` 

I tried with other 30 vertices graphs: G = graphs.GridGraph([5,6]), G = graphs.RandomTree(30), G = graphs.CompleteGraph(30), ... and I have exactly the same segfault.

The problem comes from the "if sage_graph_to_matrix(G)" in which you use the "    int init_rw_dec(uint_fast8_t n) " function that uses the "int init_rw(uint_fast8_t n)" function. 
Most probably, the computation exceeds the type capacity and we get a wrong result. 
So, to be on the safe side, I suggest to add a test in the sage_graph_to_matrix function to test if memory allocation is possible.
Or, as you have suggested, you can ask for a patch from the original author.

Best,
D.



---

archive/issue_comments_122251.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHelloooooo !!!\n\nPatch updated to make the 32 limit clearer `:-)`\n\nAbout the segfault : the point is that there is nothing I could \"check\" to return an exception to avoid the segault unless I know where it comes from. The function you mention contains a total of 5 lines which can produce no segfault, and exclusively consist in memory allocations and checking the memory has been allocated \n\n```\nint init_rw(uint_fast8_t n)\n{\n \tnum_vertices = n;\n\tadjacency_matrix = malloc(sizeof(subset_t) * n);\n\tslots = malloc(sizeof(uint_fast8_t) * (1ul << n));\n\tcslots = 0;\n\treturn((adjacency_matrix && slots) ? 0 : -1);\n}\n```\nIf anything goes wrong, the function return -1 instead of 0. And this function (which is defined in the original C code) is called as you said, by a \"if\" that is precisely there to ensure the memory allocation went smoothly. If it did not, it also returns and error and the function above (rank_decomposition) raises the exception. I mean, there is no memory allocation that I could check and that is not checked already `O_o`\n\nNathann",
    "created_at": "2012-01-08T19:17:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122251",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

Helloooooo !!!

Patch updated to make the 32 limit clearer `:-)`

About the segfault : the point is that there is nothing I could "check" to return an exception to avoid the segault unless I know where it comes from. The function you mention contains a total of 5 lines which can produce no segfault, and exclusively consist in memory allocations and checking the memory has been allocated 

```
int init_rw(uint_fast8_t n)
{
 	num_vertices = n;
	adjacency_matrix = malloc(sizeof(subset_t) * n);
	slots = malloc(sizeof(uint_fast8_t) * (1ul << n));
	cslots = 0;
	return((adjacency_matrix && slots) ? 0 : -1);
}
```
If anything goes wrong, the function return -1 instead of 0. And this function (which is defined in the original C code) is called as you said, by a "if" that is precisely there to ensure the memory allocation went smoothly. If it did not, it also returns and error and the function above (rank_decomposition) raises the exception. I mean, there is no memory allocation that I could check and that is not checked already `O_o`

Nathann



---

archive/issue_comments_122252.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI added some printf to track the segfault. It occurs in the calculate_level function for ss=1 and i=17. More precisely, the segfault is with the instruction *cslots[1 << i] = 0x0;*. \n\n```\nvoid calculate_level(uint_fast8_t ss)\n{\n        uint_fast8_t i;\n\n        subset_size = ss;\n\n        if(subset_size == 0)\n                slots[0] = 0;\n        else if(subset_size == 1)\n                for(i = 0; i < num_vertices; i++)\n                { \n                  printf(\"ss=%d, i=%d\\n\",ss,i);\n                        slots[1 << i] = cut_rank(1 << i);\n                  printf(\"after cut_rank\\n\");\n                        cslots[1 << i] = 0x0;\n                  printf(\"after cslots\\n\");\n                }\n        else\n        {\n                subset_t i;\n                const subset_t end = binomial_coefficient(num_vertices, subset_size);\n                for(i = 0; i < end; i++)\n                        fill_slot(i);\n        }\n}\n```\nThis is definitely a memory allocation problem.\n\nD.",
    "created_at": "2012-01-08T22:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122252",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:10" align="right">comment:10</div>

I added some printf to track the segfault. It occurs in the calculate_level function for ss=1 and i=17. More precisely, the segfault is with the instruction *cslots[1 << i] = 0x0;*. 

```
void calculate_level(uint_fast8_t ss)
{
        uint_fast8_t i;

        subset_size = ss;

        if(subset_size == 0)
                slots[0] = 0;
        else if(subset_size == 1)
                for(i = 0; i < num_vertices; i++)
                { 
                  printf("ss=%d, i=%d\n",ss,i);
                        slots[1 << i] = cut_rank(1 << i);
                  printf("after cut_rank\n");
                        cslots[1 << i] = 0x0;
                  printf("after cslots\n");
                }
        else
        {
                subset_t i;
                const subset_t end = binomial_coefficient(num_vertices, subset_size);
                for(i = 0; i < end; i++)
                        fill_slot(i);
        }
}
```
This is definitely a memory allocation problem.

D.



---

archive/issue_comments_122253.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAhah !! i=17 ! Now that's something ! I prefer when it is something around a power of two, it makes more sense `:-)`\n\nWell, for instance I wondered what the result of \n\n```\n1 << (uint_fast8) 17\n```\n\nis in C. Is 1 automatically set to type uint_fast8 ? In this case the result is zero. Is it automatically set to integer ? In this case the result is 2^17. Anyway this should not make much of a difference, as accessing cslots[0] is not big deal -- it is the safest of them all to access !\nOddly the allocation part seems totally safe \n\n```\ncslots = malloc(sizeof(subset_t) * (1ul << n));\n```\n\nNathann",
    "created_at": "2012-01-09T10:35:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122253",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

Ahah !! i=17 ! Now that's something ! I prefer when it is something around a power of two, it makes more sense `:-)`

Well, for instance I wondered what the result of 

```
1 << (uint_fast8) 17
```

is in C. Is 1 automatically set to type uint_fast8 ? In this case the result is zero. Is it automatically set to integer ? In this case the result is 2^17. Anyway this should not make much of a difference, as accessing cslots[0] is not big deal -- it is the safest of them all to access !
Oddly the allocation part seems totally safe 

```
cslots = malloc(sizeof(subset_t) * (1ul << n));
```

Nathann



---

archive/issue_comments_122254.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI tried with a fresh install of 5.0.beta1 and I still have the problem with 30 :(\n\nD.",
    "created_at": "2012-01-24T22:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122254",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:12" align="right">comment:12</div>

I tried with a fresh install of 5.0.beta1 and I still have the problem with 30 :(

D.



---

archive/issue_comments_122255.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOk... I gave it another try and really have no idea where this could come from. As the only thing I can guess is that the problem actually come from the original source code, what would you think of merging this patch anyway, with a warning in the documentation (also to ask people experiencing the same bug, if any, to give us information on their hardware), and continue to discuss it with the author ?\n\nThe way we are going now, this patch will just be forgotten even though it can actually solve the problem except on your architecture for some mysterious reason `O_o`\n\nNathann",
    "created_at": "2012-01-25T09:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122255",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Ok... I gave it another try and really have no idea where this could come from. As the only thing I can guess is that the problem actually come from the original source code, what would you think of merging this patch anyway, with a warning in the documentation (also to ask people experiencing the same bug, if any, to give us information on their hardware), and continue to discuss it with the author ?

The way we are going now, this patch will just be forgotten even though it can actually solve the problem except on your architecture for some mysterious reason `O_o`

Nathann



---

archive/issue_comments_122256.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI agree with this proposal, so I give a positive review.\n\nHonestly, I think most of us will never try use the algorithm for N=30 due to very huge computation time ;-)\n\nD.",
    "created_at": "2012-01-25T13:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122256",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:14" align="right">comment:14</div>

I agree with this proposal, so I give a positive review.

Honestly, I think most of us will never try use the algorithm for N=30 due to very huge computation time ;-)

D.



---

archive/issue_events_156352.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-01-25T13:37:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156352"
}
```



---

archive/issue_events_156353.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-01-25T13:37:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156353"
}
```



---

archive/issue_comments_122257.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nArgggg !!! A bit too fast !! The warning was not in the patch when I said that ! Could you check this other patch too ? It contains the message I mentionned and also fixes a warning when building the documentation.\n\nSorryyyyyyyyyyyyyyyyyy !!\n\nNathann",
    "created_at": "2012-01-25T13:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122257",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Argggg !!! A bit too fast !! The warning was not in the patch when I said that ! Could you check this other patch too ? It contains the message I mentionned and also fixes a warning when building the documentation.

Sorryyyyyyyyyyyyyyyyyy !!

Nathann



---

archive/issue_comments_122258.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAttachment: **[trac_11754_warning.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)**\n\nI tried the warning patch as well, and the documentation is properly generated with a clear message (pink warning box).\n\nI give a positive review.\n\nD.",
    "created_at": "2012-01-25T14:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122258",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">comment:16</div>

Attachment: **[trac_11754_warning.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)**

I tried the warning patch as well, and the documentation is properly generated with a clear message (pink warning box).

I give a positive review.

D.



---

archive/issue_comments_122259.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThaaaaaaaaaanks ! `:-)`\n\nI'm trying to write some proof in geometry, and I'm having a lot of fun. Hopefully it is not a final one, but just for my new bosses... It's as clear as a cops-and-robbers proof `:-P`\n\nNathann",
    "created_at": "2012-01-25T14:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122259",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

Thaaaaaaaaaanks ! `:-)`

I'm trying to write some proof in geometry, and I'm having a lot of fun. Hopefully it is not a final one, but just for my new bosses... It's as clear as a cops-and-robbers proof `:-P`

Nathann



---

archive/issue_comments_122260.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,3 +11,8 @@\n Nathann\n \n http://pholia.tdi.informatik.uni-frankfurt.de/~philipp/software/rw.shtml\n+\n+APPLY:\n+* [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)\n+* [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)\n+\n``````\n",
    "created_at": "2012-01-25T14:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122260",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,3 +11,8 @@
 Nathann
 
 http://pholia.tdi.informatik.uni-frankfurt.de/~philipp/software/rw.shtml
+
+APPLY:
+* [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)
+* [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)
+
``````




---

archive/issue_comments_122261.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOops. Forgot to add the list of patches that should be applied to the ticket.",
    "created_at": "2012-01-25T14:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122261",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Oops. Forgot to add the list of patches that should be applied to the ticket.



---

archive/issue_events_156354.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-29T14:03:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156354"
}
```



---

archive/issue_events_156355.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-29T14:03:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156355"
}
```



---

archive/issue_comments_122262.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThe commit message of [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz) should be changed.",
    "created_at": "2012-01-29T14:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122262",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

The commit message of [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz) should be changed.



---

archive/issue_comments_122263.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOoops `^^;`\n\nNathann",
    "created_at": "2012-01-29T14:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122263",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">comment:20</div>

Ooops `^^;`

Nathann



---

archive/issue_events_156356.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-29T14:33:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156356"
}
```



---

archive/issue_events_156357.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-29T14:33:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156357"
}
```



---

archive/issue_events_156358.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-29T16:40:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156358"
}
```



---

archive/issue_events_156359.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-29T16:40:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156359"
}
```



---

archive/issue_comments_122264.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI get Cython compilation failures:\n\n```\nIn file included from sage/graphs/graph_decompositions/rankwidth/rw.c:22,\n                 from sage/graphs/graph_decompositions/rankwidth.c:236:\nsage/graphs/graph_decompositions/rankwidth/rw.h:28: error: redefinition of typedef 'subset_t'\nsage/graphs/graph_decompositions/rankwidth/rw.h:28: error: previous declaration of 'subset_t' was here\n```",
    "created_at": "2012-01-29T16:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122264",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

I get Cython compilation failures:

```
In file included from sage/graphs/graph_decompositions/rankwidth/rw.c:22,
                 from sage/graphs/graph_decompositions/rankwidth.c:236:
sage/graphs/graph_decompositions/rankwidth/rw.h:28: error: redefinition of typedef 'subset_t'
sage/graphs/graph_decompositions/rankwidth/rw.h:28: error: previous declaration of 'subset_t' was here
```



---

archive/issue_comments_122265.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nWeird `O_o`. I've got no problem on my computer. Are you using beta1, or has something important changed since ?\n\nNathann",
    "created_at": "2012-01-29T16:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122265",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:22" align="right">comment:22</div>

Weird `O_o`. I've got no problem on my computer. Are you using beta1, or has something important changed since ?

Nathann



---

archive/issue_comments_122266.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI tried on several computers, and I have the same compilation error on one of them (namely musclotte). \n\n* Intel(R) Xeon(R) CPU W5580 @ 3.20GHz\n* 64bits\n* gcc (GCC) 4.4.3 20100127 (Red Hat 4.4.3-4)\n* Sage Version 4.8, Release Date: 2012-01-20\n\nLet me know if I can help solving the problem.\n\nD.",
    "created_at": "2012-01-29T19:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122266",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:23" align="right">comment:23</div>

I tried on several computers, and I have the same compilation error on one of them (namely musclotte). 

* Intel(R) Xeon(R) CPU W5580 @ 3.20GHz
* 64bits
* gcc (GCC) 4.4.3 20100127 (Red Hat 4.4.3-4)
* Sage Version 4.8, Release Date: 2012-01-20

Let me know if I can help solving the problem.

D.



---

archive/issue_comments_122267.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nProbably it depends on the gcc version.  My report was with the default gcc on sage.math, which is gcc-4.2.4.",
    "created_at": "2012-01-29T23:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122267",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Probably it depends on the gcc version.  My report was with the default gcc on sage.math, which is gcc-4.2.4.



---

archive/issue_comments_122268.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHmmmm... Considering the bug, this is probably the problem. Mine is 4.6.2.\n\nNathann",
    "created_at": "2012-01-29T23:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122268",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:25" align="right">comment:25</div>

Hmmmm... Considering the bug, this is probably the problem. Mine is 4.6.2.

Nathann



---

archive/issue_comments_122269.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThe other computer on which I don't have compilation error is with gcc (GCC) 4.6.1 20110908 (Red Hat 4.6.1-9).\n\nUnfortunately, we cannot rely on gcc version to solve the problem.\n\nNathann, may be you can add a test around the definition of type subset_t to avoid redefinition, something like (not sure of the syntax but I know it can be done)\n\n```\n\n#ifndef _GUARD_SUBSET_T_DEFINITION_\n\t\ntypedef uint_least32_t subset_t;\n\n#define _GUARD_SUBSET_T_DEFINITION_ \n\n#endif\n\n```\nD.",
    "created_at": "2012-01-30T00:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122269",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:26" align="right">comment:26</div>

The other computer on which I don't have compilation error is with gcc (GCC) 4.6.1 20110908 (Red Hat 4.6.1-9).

Unfortunately, we cannot rely on gcc version to solve the problem.

Nathann, may be you can add a test around the definition of type subset_t to avoid redefinition, something like (not sure of the syntax but I know it can be done)

```

#ifndef _GUARD_SUBSET_T_DEFINITION_
	
typedef uint_least32_t subset_t;

#define _GUARD_SUBSET_T_DEFINITION_ 

#endif

```
D.



---

archive/issue_comments_122270.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nHellooooooo !!!\n\nCould you please try this new patch ? And could you give the 30-vertices segfault another try too ? `:-)`\n\nNathann",
    "created_at": "2012-01-30T12:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122270",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

Hellooooooo !!!

Could you please try this new patch ? And could you give the 30-vertices segfault another try too ? `:-)`

Nathann



---

archive/issue_events_156360.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-30T12:31:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156360"
}
```



---

archive/issue_events_156361.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-30T12:31:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156361"
}
```



---

archive/issue_comments_122271.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nConsidering `rw.c` is part of Sage, there is no need for the file `COPYING`.",
    "created_at": "2012-01-30T13:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122271",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Considering `rw.c` is part of Sage, there is no need for the file `COPYING`.



---

archive/issue_comments_122272.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nUpdated !\n\nNathann",
    "created_at": "2012-01-30T14:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122272",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

Updated !

Nathann



---

archive/issue_comments_122273.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nNot good with 30-vertices on my 32bits / sage.5.beta1 / gcc 4.6.1 computer\n\n```\nsage: G = graphs.RandomTree(30)\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/path-to-sage/sage-5.0.beta1/devel/sage-myclone/sage/graphs/<ipython console> in <module>()\n\n/path-to-sage/sage-5.0.beta1/local/lib/python2.7/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-5.0.beta1/local/lib/python2.7/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:863)()\n\nRuntimeError: Segmentation fault\n```\n\nand still compilation errors on the other computer\n:(",
    "created_at": "2012-01-30T14:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122273",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:30" align="right">comment:30</div>

Not good with 30-vertices on my 32bits / sage.5.beta1 / gcc 4.6.1 computer

```
sage: G = graphs.RandomTree(30)
sage: G.rank_decomposition()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/path-to-sage/sage-5.0.beta1/devel/sage-myclone/sage/graphs/<ipython console> in <module>()

/path-to-sage/sage-5.0.beta1/local/lib/python2.7/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-5.0.beta1/local/lib/python2.7/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:863)()

RuntimeError: Segmentation fault
```

and still compilation errors on the other computer
:(



---

archive/issue_comments_122274.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nHmmm... Is there any way to use musclotte from outside of the INRIA network. It is pretty hard to debug a code that runs on your computer `:-p`\n\nNathann",
    "created_at": "2012-01-30T15:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122274",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:31" align="right">comment:31</div>

Hmmm... Is there any way to use musclotte from outside of the INRIA network. It is pretty hard to debug a code that runs on your computer `:-p`

Nathann



---

archive/issue_comments_122275.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nWhat about this new patch ? After this, I really have no idea of what to try :-p\n\nNathann",
    "created_at": "2012-01-30T15:44:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122275",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32" align="right">comment:32</div>

What about this new patch ? After this, I really have no idea of what to try :-p

Nathann



---

archive/issue_comments_122276.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nno change :(\nI will check the code asap.\nD.",
    "created_at": "2012-01-30T15:55:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122276",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:33" align="right">comment:33</div>

no change :(
I will check the code asap.
D.



---

archive/issue_comments_122277.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nGood news, I have identified the cause of my segfault !\n\nIn function `init_rw_dec`, with N=30, I have `sizeof(subset_t) * (1ul << n) == 0` !!!\nConsequently, the malloc function returns a pointer.\nThis is a stupid numerical problem.\nWe have `sizeof(subset_t)==4` and `(1ul<<30)==1073741824`. But at least on my computer, it happens that `4294967296==0 mod(2^32)`... \n\nSo you should add a test like this just after the malloc:\n\n```\nif((sizeof(subset_t) * (1ul << n)==0) && (n>0) && cslots) return(-1);\n```\n\nA similar test in function `init_rw` could be safer.\n\n\nNo news concerning the compilation error.\n\nBest,\nD.",
    "created_at": "2012-01-31T19:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122277",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:34" align="right">comment:34</div>

Good news, I have identified the cause of my segfault !

In function `init_rw_dec`, with N=30, I have `sizeof(subset_t) * (1ul << n) == 0` !!!
Consequently, the malloc function returns a pointer.
This is a stupid numerical problem.
We have `sizeof(subset_t)==4` and `(1ul<<30)==1073741824`. But at least on my computer, it happens that `4294967296==0 mod(2^32)`... 

So you should add a test like this just after the malloc:

```
if((sizeof(subset_t) * (1ul << n)==0) && (n>0) && cslots) return(-1);
```

A similar test in function `init_rw` could be safer.


No news concerning the compilation error.

Best,
D.



---

archive/issue_events_156362.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-01-31T19:32:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156362"
}
```



---

archive/issue_events_156363.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-01-31T19:32:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156363"
}
```



---

archive/issue_comments_122278.json:
```json
{
    "body": "complement patch to fix compilation errors and segfaults",
    "created_at": "2012-02-01T12:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122278",
    "user": "https://github.com/dcoudert"
}
```

complement patch to fix compilation errors and segfaults



---

archive/issue_comments_122279.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nAttachment: **[trac_11754_fix_compilation_error_and_a_segfault.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754_fix_compilation_error_and_a_segfault.patch.gz)**\n\nThis complementary patch solves: \n\n* compilation errors discussed in this ticket on some versions of gcc\n* segfault with N=30 discussed in this ticket.\n\nApplying all attached files, I'm satisfied with this patch. What about you ?",
    "created_at": "2012-02-01T12:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122279",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:35" align="right">comment:35</div>

Attachment: **[trac_11754_fix_compilation_error_and_a_segfault.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754_fix_compilation_error_and_a_segfault.patch.gz)**

This complementary patch solves: 

* compilation errors discussed in this ticket on some versions of gcc
* segfault with N=30 discussed in this ticket.

Applying all attached files, I'm satisfied with this patch. What about you ?



---

archive/issue_events_156364.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-02-01T12:28:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156364"
}
```



---

archive/issue_events_156365.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-02-01T12:28:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156365"
}
```



---

archive/issue_comments_122280.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nHellooooooooooooo !!\n\nWell... `^^;`\n\nThe problem with this is that we usually avoid touching the source code we add to Sage, so that there is no problem when we have to update it... I've been personally yelled at once or twice for doing just that `^^;`\n\nI can forward the first fix to the author, for it is a bug of his own software, as for the second bug....\n\nWell, perhaps \"just this\" could be ok for Sage (Jeroen, are you still reading what's happening here ) ? `:-p`\n\nNathann",
    "created_at": "2012-02-01T16:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122280",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:36" align="right">comment:36</div>

Hellooooooooooooo !!

Well... `^^;`

The problem with this is that we usually avoid touching the source code we add to Sage, so that there is no problem when we have to update it... I've been personally yelled at once or twice for doing just that `^^;`

I can forward the first fix to the author, for it is a bug of his own software, as for the second bug....

Well, perhaps "just this" could be ok for Sage (Jeroen, are you still reading what's happening here ) ? `:-p`

Nathann



---

archive/issue_comments_122281.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nOK, so please ask the author to perform the proposed modification in the rw.c file.\n\nFurthermore, tell the author of rw.h to add at the beginning of the file the #ifndef `_SOME_FLAG_` followed by #define `_SOME_FLAG_` 1, then the content of the actual rw.h file, and to end the file with the #endif command. This is standard way of writing .h files.\n\nBest,\n\nD.",
    "created_at": "2012-02-01T19:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122281",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:37" align="right">comment:37</div>

OK, so please ask the author to perform the proposed modification in the rw.c file.

Furthermore, tell the author of rw.h to add at the beginning of the file the #ifndef `_SOME_FLAG_` followed by #define `_SOME_FLAG_` 1, then the content of the actual rw.h file, and to end the file with the #endif command. This is standard way of writing .h files.

Best,

D.



---

archive/issue_comments_122282.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,4 +15,4 @@\n APPLY:\n * [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)\n * [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)\n-\n+* [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)\n``````\n",
    "created_at": "2012-02-23T15:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122282",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,4 +15,4 @@
 APPLY:
 * [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)
 * [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)
-
+* [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)
``````




---

archive/issue_comments_122283.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nOk, in the end it's not really fair that Philipp should change his code to make ours work. I just added this \"ifndef\" preprocessor instruction in the rw.h file, and I guess it will not be the end of the world to remember if we have to update the code at some point (which I'd probably do myself anyway `:-p`).\n\nPlease tell me if it works on your computer, and let's roll `:-)`\n\nNathann",
    "created_at": "2012-02-23T15:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122283",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:38" align="right">comment:38</div>

Ok, in the end it's not really fair that Philipp should change his code to make ours work. I just added this "ifndef" preprocessor instruction in the rw.h file, and I guess it will not be the end of the world to remember if we have to update the code at some point (which I'd probably do myself anyway `:-p`).

Please tell me if it works on your computer, and let's roll `:-)`

Nathann



---

archive/issue_comments_122284.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\n(I also updated the original source code, just in case)\n\nNathann",
    "created_at": "2012-02-23T15:46:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122284",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:39" align="right">comment:39</div>

(I also updated the original source code, just in case)

Nathann



---

archive/issue_comments_122285.json:
```json
{
    "body": "Attachment: **[trac_11754.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)**\n\nAttachment: **[trac_11754-ifndef.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)**",
    "created_at": "2012-02-23T15:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122285",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[trac_11754.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)**

Attachment: **[trac_11754-ifndef.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)**



---

archive/issue_comments_122286.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,3 +16,5 @@\n * [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)\n * [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)\n * [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)\n+* [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)\n+\n``````\n",
    "created_at": "2012-02-24T10:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122286",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,3 +16,5 @@
 * [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)
 * [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)
 * [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)
+* [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)
+
``````




---

archive/issue_comments_122287.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nNathann,\n\nI have added a review patch because 1) the test in rw.h was not correct. We have to define a tag. 2) the test in rw.c was also incorrect due to missing braces. \n\nNow compilation is correct on both my 32 bits and 64 bits computers. The execution is correct, in particular it returns the correct error message when memory is insufficient. Tests are OK, and documentation was already OK.\n\nFor me the patch is now good to go.\n\nD.",
    "created_at": "2012-02-24T10:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122287",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:40" align="right">comment:40</div>

Nathann,

I have added a review patch because 1) the test in rw.h was not correct. We have to define a tag. 2) the test in rw.c was also incorrect due to missing braces. 

Now compilation is correct on both my 32 bits and 64 bits computers. The execution is correct, in particular it returns the correct error message when memory is insufficient. Tests are OK, and documentation was already OK.

For me the patch is now good to go.

D.



---

archive/issue_comments_122288.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nHellooooo !!!\n\n> I have added a review patch because 1) the test in rw.h was not correct. We have to define a tag. 2) the test in rw.c was also incorrect due to missing braces. \n\nHmm... That should be fixed in *his* code. I will email him about it `O_o`\n\n> Now compilation is correct on both my 32 bits and 64 bits computers. The execution is correct, in particular it returns the correct error message when memory is insufficient. Tests are OK, and documentation was already OK.\n\nOne last mail exchange with him, and I'll be glad to see this patch merged ! `:-p`\n\nNathann",
    "created_at": "2012-02-24T11:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122288",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:41" align="right">comment:41</div>

Hellooooo !!!

> I have added a review patch because 1) the test in rw.h was not correct. We have to define a tag. 2) the test in rw.c was also incorrect due to missing braces. 

Hmm... That should be fixed in *his* code. I will email him about it `O_o`

> Now compilation is correct on both my 32 bits and 64 bits computers. The execution is correct, in particular it returns the correct error message when memory is insufficient. Tests are OK, and documentation was already OK.

One last mail exchange with him, and I'll be glad to see this patch merged ! `:-p`

Nathann



---

archive/issue_comments_122289.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI did some more tests with sage-5.0.beta5\n\n1. on a 32 bits computer with 4Go of RAM, gcc (GCC) 4.6.1 20110908 (Red Hat 4.6.1-9) \n\n   * I tried first to apply only trac_11754.patch + trac_11754_warning.patch + trac_11754-ifndef.patch\n\n   * Install OK, tests, OK, functionality OK, but **problem when n = 30**: the execution starts as if mallocs were OK, but I don't have enough memory for 29 so it cannot work for 30\n   * Now, changing the ugly (unsafe?) test in init_rw from !``if(n > MAX_VERTICES || n && !(sizeof(uint_fast8_t) * (1ul << n)))!`` to !``if( ( (n > MAX_VERTICES) ||\u00a0 (n>0) ) && !(sizeof(uint_fast8_t) * (1ul << n)) )!`` solves the problem and I get the correct error message !\n2. on a 64 bits computer with 64Go of RAM, gcc (GCC) 4.4.3 20100127 (Red Hat 4.4.3-4) \n\n   * I have an installation error when using only  trac_11754.patch + trac_11754_warning.patch + trac_11754-ifndef.patch\n   * When patching the ifndef test in rw.h, I solve installation problem, and then every thing seems to work. However, I have no way to control execution with N>=29 due to computation time. So I don't know what's happening when N=30 (I have large enough memory, but computation should be huge).\n\nAltogether, I need the revision patch (as I already identified weeks ago) to have the patch properly installing and operating.\n\nD.",
    "created_at": "2012-02-24T13:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122289",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:42" align="right">comment:42</div>

I did some more tests with sage-5.0.beta5

1. on a 32 bits computer with 4Go of RAM, gcc (GCC) 4.6.1 20110908 (Red Hat 4.6.1-9) 

   * I tried first to apply only trac_11754.patch + trac_11754_warning.patch + trac_11754-ifndef.patch

   * Install OK, tests, OK, functionality OK, but **problem when n = 30**: the execution starts as if mallocs were OK, but I don't have enough memory for 29 so it cannot work for 30
   * Now, changing the ugly (unsafe?) test in init_rw from !``if(n > MAX_VERTICES || n && !(sizeof(uint_fast8_t) * (1ul << n)))!`` to !``if( ( (n > MAX_VERTICES) ||  (n>0) ) && !(sizeof(uint_fast8_t) * (1ul << n)) )!`` solves the problem and I get the correct error message !
2. on a 64 bits computer with 64Go of RAM, gcc (GCC) 4.4.3 20100127 (Red Hat 4.4.3-4) 

   * I have an installation error when using only  trac_11754.patch + trac_11754_warning.patch + trac_11754-ifndef.patch
   * When patching the ifndef test in rw.h, I solve installation problem, and then every thing seems to work. However, I have no way to control execution with N>=29 due to computation time. So I don't know what's happening when N=30 (I have large enough memory, but computation should be huge).

Altogether, I need the revision patch (as I already identified weeks ago) to have the patch properly installing and operating.

D.



---

archive/issue_comments_122290.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nWysiwyg problem...\n\nSo change the test from\n\n```\nif(n > MAX_VERTICES || n && !(sizeof(uint_fast8_t) * (1ul << n)))\n```\n\nTo\n\n```\nif( ( (n > MAX_VERTICES) || (n>0) ) && !(sizeof(uint_fast8_t) * (1ul << n)) )\n```\n\nHonestly, which one is the fastest to read ?",
    "created_at": "2012-02-24T13:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122290",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:43" align="right">comment:43</div>

Wysiwyg problem...

So change the test from

```
if(n > MAX_VERTICES || n && !(sizeof(uint_fast8_t) * (1ul << n)))
```

To

```
if( ( (n > MAX_VERTICES) || (n>0) ) && !(sizeof(uint_fast8_t) * (1ul << n)) )
```

Honestly, which one is the fastest to read ?



---

archive/issue_comments_122291.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nOk, the author told me he intended the priority to be different (a parenthesis around \"n && !(sizeof(uint_fast8_t) * (1ul << n))\", but it makes no difference anyway as we settle the case n=0 differently already.\n\nOn my machine everything runs fine with all 4 patches applied. If everything is fine on your computer too I think this patch can go. As for a possible updates in 50 years, we will still have this track ticket lying around `:-)`\n\nNathann",
    "created_at": "2012-02-24T20:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122291",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

Ok, the author told me he intended the priority to be different (a parenthesis around "n && !(sizeof(uint_fast8_t) * (1ul << n))", but it makes no difference anyway as we settle the case n=0 differently already.

On my machine everything runs fine with all 4 patches applied. If everything is fine on your computer too I think this patch can go. As for a possible updates in 50 years, we will still have this track ticket lying around `:-)`

Nathann



---

archive/issue_comments_122292.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nAttachment: **[trac_11754-ifndef-rev.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)**\n\nThe author is right ;-)\n\nThe previous version was also working for me because the test was true for N> 31, n <0, and N=30, but it was an accident. With the correct version, we have the same result but it is more expected.\n\nI have updated the patch accordingly and its working fine on all my computers: compilation, tests, documentation, functionality, error messages.\n\nFor me it's good to go so I give positive review.\n\nD.\n\nPS: I hope the ARM guys will not experience similar problems than for vertex separation...",
    "created_at": "2012-02-24T22:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122292",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:45" align="right">comment:45</div>

Attachment: **[trac_11754-ifndef-rev.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)**

The author is right ;-)

The previous version was also working for me because the test was true for N> 31, n <0, and N=30, but it was an accident. With the correct version, we have the same result but it is more expected.

I have updated the patch accordingly and its working fine on all my computers: compilation, tests, documentation, functionality, error messages.

For me it's good to go so I give positive review.

D.

PS: I hope the ARM guys will not experience similar problems than for vertex separation...



---

archive/issue_events_156366.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-02-24T22:10:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156366"
}
```



---

archive/issue_events_156367.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-02-24T22:10:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156367"
}
```



---

archive/issue_comments_122293.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nWell, at least not \"the same ones\", as the author uses the correct types. And I'll do that too from now on `:-)`\n\nThank you for the review, by the way ! This is another of the patches that have been waiting for... ages ! `:-D`\n\nNathann",
    "created_at": "2012-02-24T22:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122293",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:46" align="right">comment:46</div>

Well, at least not "the same ones", as the author uses the correct types. And I'll do that too from now on `:-)`

Thank you for the review, by the way ! This is another of the patches that have been waiting for... ages ! `:-D`

Nathann



---

archive/issue_events_156368.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T11:21:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156368"
}
```



---

archive/issue_events_156369.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T11:21:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156369"
}
```



---

archive/issue_comments_122294.json:
```json
{
    "body": "Merged: **sage-5.0.beta6**",
    "created_at": "2012-02-27T11:21:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122294",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta6**



---

archive/issue_events_156370.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-01T17:20:33Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156370"
}
```



---

archive/issue_comments_122295.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nRe-opening this as there some problems with the `MANIFEST.in`.  The following need to be added:\n\n```\n! sage/graphs/graph_decompositions/rankwidth/README\n! sage/graphs/graph_decompositions/rankwidth/__init__.py\n```",
    "created_at": "2012-03-01T17:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122295",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">comment:48</div>

Re-opening this as there some problems with the `MANIFEST.in`.  The following need to be added:

```
! sage/graphs/graph_decompositions/rankwidth/README
! sage/graphs/graph_decompositions/rankwidth/__init__.py
```



---

archive/issue_comments_122296.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nHelloooo !!!\n\nIs this patch what you need ? `^^;`\n\nNathann",
    "created_at": "2012-03-03T08:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122296",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:49" align="right">comment:49</div>

Helloooo !!!

Is this patch what you need ? `^^;`

Nathann



---

archive/issue_events_156371.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-03-03T08:30:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156371"
}
```



---

archive/issue_comments_122297.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nAttachment: **[trac_11754-RM.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754-RM.patch.gz)**",
    "created_at": "2012-03-03T08:32:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122297",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:50" align="right">comment:50</div>

Attachment: **[trac_11754-RM.patch.gz](https://github.com/sagemath/sage/files/ticket11754/trac_11754-RM.patch.gz)**



---

archive/issue_comments_122298.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,4 +17,5 @@\n * [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)\n * [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)\n * [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)\n+* [attachment: trac_11754-RM.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-RM.patch.gz)\n \n``````\n",
    "created_at": "2012-03-03T08:32:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122298",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,4 +17,5 @@
 * [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)
 * [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)
 * [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)
+* [attachment: trac_11754-RM.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-RM.patch.gz)
 
``````




---

archive/issue_comments_122299.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,5 +17,5 @@\n * [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)\n * [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)\n * [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)\n-* [attachment: trac_11754-RM.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-RM.patch.gz)\n+* [attachment: 11754_manifest.patch](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz)\n \n``````\n",
    "created_at": "2012-03-04T20:50:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122299",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,5 +17,5 @@
 * [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)
 * [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)
 * [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)
-* [attachment: trac_11754-RM.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-RM.patch.gz)
+* [attachment: 11754_manifest.patch](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz)
 
``````




---

archive/issue_comments_122300.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nAttachment: **[11754_manifest.patch.gz](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz)**",
    "created_at": "2012-03-04T20:50:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122300",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

Attachment: **[11754_manifest.patch.gz](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz)**



---

archive/issue_comments_122301.json:
```json
{
    "body": "Changed reviewer from **David Coudert** to **David Coudert, Jeroen Demeyer**",
    "created_at": "2012-03-04T20:50:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122301",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **David Coudert** to **David Coudert, Jeroen Demeyer**



---

archive/issue_events_156372.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-04T20:50:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156372"
}
```



---

archive/issue_events_156373.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-04T20:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156373"
}
```



---

archive/issue_events_156374.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-05T13:17:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156374"
}
```



---

archive/issue_events_156375.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-05T13:17:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11754#event-156375"
}
```



---

archive/issue_comments_122302.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,9 +13,9 @@\n http://pholia.tdi.informatik.uni-frankfurt.de/~philipp/software/rw.shtml\n \n APPLY:\n-* [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)\n-* [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)\n-* [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)\n-* [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)\n-* [attachment: 11754_manifest.patch](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz)\n+* [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz) (merged in sage-5.0.beta6)\n+* [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz) (merged in sage-5.0.beta6)\n+* [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz) (merged in sage-5.0.beta6)\n+* [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz) (merged in sage-5.0.beta6)\n+* [attachment: 11754_manifest.patch](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz) (**merged in sage-5.0.beta7**)\n \n``````\n",
    "created_at": "2012-03-05T13:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122302",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,9 +13,9 @@
 http://pholia.tdi.informatik.uni-frankfurt.de/~philipp/software/rw.shtml
 
 APPLY:
-* [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz)
-* [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz)
-* [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz)
-* [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz)
-* [attachment: 11754_manifest.patch](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz)
+* [attachment: trac_11754.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754.patch.gz) (merged in sage-5.0.beta6)
+* [attachment: trac_11754_warning.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754_warning.patch.gz) (merged in sage-5.0.beta6)
+* [attachment: trac_11754-ifndef.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef.patch.gz) (merged in sage-5.0.beta6)
+* [attachment: trac_11754-ifndef-rev.patch](https://github.com/sagemath/sage/files/ticket11754/trac_11754-ifndef-rev.patch.gz) (merged in sage-5.0.beta6)
+* [attachment: 11754_manifest.patch](https://github.com/sagemath/sage/files/ticket11754/11754_manifest.patch.gz) (**merged in sage-5.0.beta7**)
 
``````




---

archive/issue_comments_122303.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI think there is an issue with this code as there is a extension module sage.graphs.graph_decompositions.rankwidth as well as a package (with __init__.py) sage/graphs/decompositions/rankwidth/ . I think that should really be fixed as it's ambiguous which should be used.",
    "created_at": "2012-03-16T17:49:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122303",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:53" align="right">comment:53</div>

I think there is an issue with this code as there is a extension module sage.graphs.graph_decompositions.rankwidth as well as a package (with __init__.py) sage/graphs/decompositions/rankwidth/ . I think that should really be fixed as it's ambiguous which should be used.



---

archive/issue_comments_122304.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nTo be fixed in a follow-up ticket of course.",
    "created_at": "2012-03-17T12:49:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122304",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:54" align="right">comment:54</div>

To be fixed in a follow-up ticket of course.



---

archive/issue_comments_122305.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nThis is now at #12684.",
    "created_at": "2012-03-17T17:00:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11754#issuecomment-122305",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:55" align="right">comment:55</div>

This is now at #12684.
