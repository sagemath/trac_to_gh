# Issue 11937: Doctest fails in gap_reps.py when Kash is installed

archive/issues_011765.json:
```json
{
    "body": "The doctest in gap_reps.py\n\n```\nEllipticCurve([Integer(1),-Integer(1),Integer(1),-Integer(2680),-Integer(50053)]).galois_representation().image_type(Integer(7))\u00a0\u00a0\u00a0 # long time\n```\nfails by doctest -long when Kash is installed:\n\n```\nExpected:\n    'The image is a group of order 18.'\nGot:\n    'The image is a non-abelian group of order 18.'\n```\nThat error is hidden by the doctest command mentioned in #11936, which produces a timeout.\n\nApply [attachment:trac_11937_gal_reps_doctest_fail_wrong_output.4.patch] to the Sage library.\n\nAssignee: mvngu\n\nKeywords: doctest, gap_reps, kash\n\nResolution: fixed\n\nAuthor: Daniel Krenn\n\nReviewer: Johan Bosman\n\nMerged: sage-4.8.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/11937\n\n",
    "closed_at": "2011-11-10T13:30:14Z",
    "created_at": "2011-10-18T08:11:09Z",
    "labels": [
        "component: doctest coverage",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "Doctest fails in gap_reps.py when Kash is installed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11937",
    "user": "https://github.com/dkrenn"
}
```
The doctest in gap_reps.py

```
EllipticCurve([Integer(1),-Integer(1),Integer(1),-Integer(2680),-Integer(50053)]).galois_representation().image_type(Integer(7))    # long time
```
fails by doctest -long when Kash is installed:

```
Expected:
    'The image is a group of order 18.'
Got:
    'The image is a non-abelian group of order 18.'
```
That error is hidden by the doctest command mentioned in #11936, which produces a timeout.

Apply [attachment:trac_11937_gal_reps_doctest_fail_wrong_output.4.patch] to the Sage library.

Assignee: mvngu

Keywords: doctest, gap_reps, kash

Resolution: fixed

Author: Daniel Krenn

Reviewer: Johan Bosman

Merged: sage-4.8.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/11937





---

archive/issue_comments_141750.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -11,11 +11,9 @@\n Got:\n     'The image is a non-abelian group of order 18.'\n \\`\\`\\`\n-That error is covered by the doctest command of [#11936](http://trac.sagemath.org/sage_trac/ticket/11936), which produces a timeout.\n+That error is hided by the doctest command mentioned in [#11936](http://trac.sagemath.org/sage_trac/ticket/11936), which produces a timeout.\n \n One could think about an extra error message saying that there was an error **and** a timeout\n-\n-Keywords: doctest, gap_reps\n \n Comment: 1\n \n```\n",
    "created_at": "2011-10-18T11:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141750",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
```diff
--- 
+++ 
@@ -11,11 +11,9 @@
 Got:
     'The image is a non-abelian group of order 18.'
 \`\`\`
-That error is covered by the doctest command of [#11936](http://trac.sagemath.org/sage_trac/ticket/11936), which produces a timeout.
+That error is hided by the doctest command mentioned in [#11936](http://trac.sagemath.org/sage_trac/ticket/11936), which produces a timeout.
 
 One could think about an extra error message saying that there was an error **and** a timeout
-
-Keywords: doctest, gap_reps
 
 Comment: 1
 
```




---

archive/issue_comments_141751.json:
```json
{
    "body": "Attachment [trac_11937_gal_reps_doctest_fail_wrong_output.patch](tarball://root/attachments/some-uuid/ticket11937/trac_11937_gal_reps_doctest_fail_wrong_output.patch) by @dkrenn created at 2011-10-18 12:28:27",
    "created_at": "2011-10-18T12:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141751",
    "user": "https://github.com/dkrenn"
}
```

Attachment [trac_11937_gal_reps_doctest_fail_wrong_output.patch](tarball://root/attachments/some-uuid/ticket11937/trac_11937_gal_reps_doctest_fail_wrong_output.patch) by @dkrenn created at 2011-10-18 12:28:27



---

archive/issue_comments_141752.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-10-18T12:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141752",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_141753.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141753",
    "user": "https://github.com/jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_comments_141754.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,19 @@\n+The doctest in gap_reps.py\n \n+\\`\\`\\`\n+EllipticCurve([Integer(1),-Integer(1),Integer(1),-Integer(2680),-Integer(50053)]).galois_representation().image_type(Integer(7))\u00a0\u00a0\u00a0 # long time\n+\\`\\`\\`\n+fails by doctest -long because\n+\n+\\`\\`\\`\n+Expected:\n+    'The image is a group of order 18.'\n+Got:\n+    'The image is a non-abelian group of order 18.'\n+\\`\\`\\`\n+That error is hided by the doctest command mentioned in #11936, which produces a timeout.\n+\n+One could think about an extra error message saying that there was an error **and** a timeout\n \n Comment: 1\n \n```\n",
    "created_at": "2011-11-04T17:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141754",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,19 @@
+The doctest in gap_reps.py
 
+\`\`\`
+EllipticCurve([Integer(1),-Integer(1),Integer(1),-Integer(2680),-Integer(50053)]).galois_representation().image_type(Integer(7))    # long time
+\`\`\`
+fails by doctest -long because
+
+\`\`\`
+Expected:
+    'The image is a group of order 18.'
+Got:
+    'The image is a non-abelian group of order 18.'
+\`\`\`
+That error is hided by the doctest command mentioned in #11936, which produces a timeout.
+
+One could think about an extra error message saying that there was an error **and** a timeout
 
 Comment: 1
 
```




---

archive/issue_events_031577.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2011-11-04T17:28:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "milestone": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11937#event-31577"
}
```



---

archive/issue_comments_141755.json:
```json
{
    "body": "<a id='comment:5'></a>I do get 'The image is a group of order 18.' as output to that command.  Is it possible that this problem is caused by the fact that you have installed Kash (or other packages)?",
    "created_at": "2011-11-06T18:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141755",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:5'></a>I do get 'The image is a group of order 18.' as output to that command.  Is it possible that this problem is caused by the fact that you have installed Kash (or other packages)?



---

archive/issue_comments_141756.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-11-06T18:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141756",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_141757.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 johanbosman]:\n> I do get 'The image is a group of order 18.' as output to that command.  Is it possible that this problem is caused by the fact that you have installed Kash (or other packages)?\n\nYes, this is indeed the case. :).  See http://trac.sagemath.org/sage_trac/ticket/11936#comment:6",
    "created_at": "2011-11-06T21:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141757",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:6'></a>Replying to [comment:5 johanbosman]:
> I do get 'The image is a group of order 18.' as output to that command.  Is it possible that this problem is caused by the fact that you have installed Kash (or other packages)?

Yes, this is indeed the case. :).  See http://trac.sagemath.org/sage_trac/ticket/11936#comment:6



---

archive/issue_comments_141758.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-11-08T15:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141758",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_141759.json:
```json
{
    "body": "<a id='comment:8'></a>In doctests you can make use of ... to handle non-determinstic pieces of the output.  So you could change it into something like\n\n```\n'The image is a... group of order 18.'\n```\nand for consistency, use this for the 36 case as well. :).",
    "created_at": "2011-11-08T15:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141759",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:8'></a>In doctests you can make use of ... to handle non-determinstic pieces of the output.  So you could change it into something like

```
'The image is a... group of order 18.'
```
and for consistency, use this for the 36 case as well. :).



---

archive/issue_comments_141760.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-11-08T15:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141760",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_141761.json:
```json
{
    "body": "Attachment [trac_11937_gal_reps_doctest_fail_wrong_output.2.patch](tarball://root/attachments/some-uuid/ticket11937/trac_11937_gal_reps_doctest_fail_wrong_output.2.patch) by @dkrenn created at 2011-11-08 17:03:57\n\nreplaces previous patch",
    "created_at": "2011-11-08T17:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141761",
    "user": "https://github.com/dkrenn"
}
```

Attachment [trac_11937_gal_reps_doctest_fail_wrong_output.2.patch](tarball://root/attachments/some-uuid/ticket11937/trac_11937_gal_reps_doctest_fail_wrong_output.2.patch) by @dkrenn created at 2011-11-08 17:03:57

replaces previous patch



---

archive/issue_comments_141762.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-11-08T17:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141762",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_141763.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-11-08T17:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141763",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_141764.json:
```json
{
    "body": "<a id='comment:10'></a>Could you add a remark to that doctest that this fixes #11937?  The dots may otherwise look a bit weird to someone who hasn't worked on this ticket. ;).",
    "created_at": "2011-11-08T17:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141764",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:10'></a>Could you add a remark to that doctest that this fixes #11937?  The dots may otherwise look a bit weird to someone who hasn't worked on this ticket. ;).



---

archive/issue_comments_141765.json:
```json
{
    "body": "replaces previous patch",
    "created_at": "2011-11-08T17:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141765",
    "user": "https://github.com/dkrenn"
}
```

replaces previous patch



---

archive/issue_comments_141766.json:
```json
{
    "body": "<a id='comment:11'></a>Attachment [trac_11937_gal_reps_doctest_fail_wrong_output.3.patch](tarball://root/attachments/some-uuid/ticket11937/trac_11937_gal_reps_doctest_fail_wrong_output.3.patch) by @dkrenn created at 2011-11-08 17:28:26",
    "created_at": "2011-11-08T17:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141766",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:11'></a>Attachment [trac_11937_gal_reps_doctest_fail_wrong_output.3.patch](tarball://root/attachments/some-uuid/ticket11937/trac_11937_gal_reps_doctest_fail_wrong_output.3.patch) by @dkrenn created at 2011-11-08 17:28:26



---

archive/issue_comments_141767.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-11-08T17:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141767",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_141768.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-11-08T18:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141768",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_141769.json:
```json
{
    "body": "<a id='comment:12'></a>One last piece of nitpicking from my side: it is \"may give\" instead of \"may gives\".",
    "created_at": "2011-11-08T18:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141769",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:12'></a>One last piece of nitpicking from my side: it is "may give" instead of "may gives".



---

archive/issue_comments_141770.json:
```json
{
    "body": "Attachment [trac_11937_gal_reps_doctest_fail_wrong_output.4.patch](tarball://root/attachments/some-uuid/ticket11937/trac_11937_gal_reps_doctest_fail_wrong_output.4.patch) by @dkrenn created at 2011-11-08 18:10:38\n\nreplaces previous patch",
    "created_at": "2011-11-08T18:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141770",
    "user": "https://github.com/dkrenn"
}
```

Attachment [trac_11937_gal_reps_doctest_fail_wrong_output.4.patch](tarball://root/attachments/some-uuid/ticket11937/trac_11937_gal_reps_doctest_fail_wrong_output.4.patch) by @dkrenn created at 2011-11-08 18:10:38

replaces previous patch



---

archive/issue_comments_141771.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-11-08T18:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141771",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_141772.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-11-08T19:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141772",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_141773.json:
```json
{
    "body": "<a id='comment:14'></a>I've tested it with and without Kash installed (in the former case with a fix of #11936).  Everything works perfectly.",
    "created_at": "2011-11-08T19:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141773",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:14'></a>I've tested it with and without Kash installed (in the former case with a fix of #11936).  Everything works perfectly.



---

archive/issue_comments_141774.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,19 @@\n+The doctest in gap_reps.py\n \n+\\`\\`\\`\n+EllipticCurve([Integer(1),-Integer(1),Integer(1),-Integer(2680),-Integer(50053)]).galois_representation().image_type(Integer(7))\u00a0\u00a0\u00a0 # long time\n+\\`\\`\\`\n+fails by doctest -long when Kash is installed:\n+\n+\\`\\`\\`\n+Expected:\n+    'The image is a group of order 18.'\n+Got:\n+    'The image is a non-abelian group of order 18.'\n+\\`\\`\\`\n+That error is hidden by the doctest command mentioned in #11936, which produces a timeout.\n+\n+Apply [attachment:trac_11937_gal_reps_doctest_fail_wrong_output.4.patch] to the Sage library.\n \n Comment: 1\n \n```\n",
    "created_at": "2011-11-08T19:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141774",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,19 @@
+The doctest in gap_reps.py
 
+\`\`\`
+EllipticCurve([Integer(1),-Integer(1),Integer(1),-Integer(2680),-Integer(50053)]).galois_representation().image_type(Integer(7))    # long time
+\`\`\`
+fails by doctest -long when Kash is installed:
+
+\`\`\`
+Expected:
+    'The image is a group of order 18.'
+Got:
+    'The image is a non-abelian group of order 18.'
+\`\`\`
+That error is hidden by the doctest command mentioned in #11936, which produces a timeout.
+
+Apply [attachment:trac_11937_gal_reps_doctest_fail_wrong_output.4.patch] to the Sage library.
 
 Comment: 1
 
```




---

archive/issue_comments_141775.json:
```json
{
    "body": "Changing keywords from \"doctest, gap_reps\" to \"doctest, gap_reps, kash\".",
    "created_at": "2011-11-08T19:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141775",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing keywords from "doctest, gap_reps" to "doctest, gap_reps, kash".



---

archive/issue_events_031578.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-10T13:30:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11937#event-31578"
}
```



---

archive/issue_comments_141776.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-11-10T13:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11937#issuecomment-141776",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
