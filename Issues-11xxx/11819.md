# Issue 11819: don't use the deprecated 'new' module

archive/issues_011647.json:
```json
{
    "assignees": [],
    "body": "The Python module 'new' is deprecated and has been removed in Python 3.0, so since it's not hard to avoid it, we shouldn't use it.  The attached patch removes all imports of 'new', tested with\n\n```\nsage: search_src('import', 'new', whole_word=True)\n```\nThe file new.py (in `SAGE_ROOT/local/lib/python/`) contains code like\n\n```\nfrom types import InstanceType as instance\n```\nso we just have to replace\n\n```\nimport new\nnew.instance(...)\n```\nwith\n\n```\nimport types\ntypes.InstanceType(...)\n```\n\n---\n\nApply\n\n1. [attachment: trac_11819_review.patch](https://github.com/sagemath/sage/files/ticket11819/trac_11819_review.patch.gz)\n\nto the sage repository\n\nAssignee: **@williamstein**\n\nKeywords: **sd35**\n\nAuthor: **John Palmieri**\n\nReviewer: **Julian Rueth**\n\nMerged: **sage-5.0.beta1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11819_\n\n",
    "closed_at": "2012-01-18T08:15:59Z",
    "created_at": "2011-09-20T18:35:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20pickling",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "don't use the deprecated 'new' module",
    "type": "issue",
    "updated_at": "2012-01-18T08:15:59Z",
    "url": "https://github.com/sagemath/sage/issues/11819",
    "user": "https://github.com/jhpalmieri"
}
```
The Python module 'new' is deprecated and has been removed in Python 3.0, so since it's not hard to avoid it, we shouldn't use it.  The attached patch removes all imports of 'new', tested with

```
sage: search_src('import', 'new', whole_word=True)
```
The file new.py (in `SAGE_ROOT/local/lib/python/`) contains code like

```
from types import InstanceType as instance
```
so we just have to replace

```
import new
new.instance(...)
```
with

```
import types
types.InstanceType(...)
```

---

Apply

1. [attachment: trac_11819_review.patch](https://github.com/sagemath/sage/files/ticket11819/trac_11819_review.patch.gz)

to the sage repository

Assignee: **@williamstein**

Keywords: **sd35**

Author: **John Palmieri**

Reviewer: **Julian Rueth**

Merged: **sage-5.0.beta1**

_Issue created by migration from https://trac.sagemath.org/ticket/11819_





---

archive/issue_events_145323.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-09-20T18:35:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145323"
}
```



---

archive/issue_events_145324.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-09-20T18:35:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20pickling",
    "label_color": "000080",
    "label_name": "component: pickling",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145324"
}
```



---

archive/issue_events_145325.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-09-20T18:35:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145325"
}
```



---

archive/issue_events_145326.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-09-20T18:35:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145326"
}
```



---

archive/issue_events_145327.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-09-20T18:36:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145327"
}
```



---

archive/issue_comments_125778.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nAttachment: **[trac_11819-no-new.patch.gz](https://github.com/sagemath/sage/files/ticket11819/trac_11819-no-new.patch.gz)**",
    "created_at": "2011-09-20T18:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125778",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">Comment 1</div>

Attachment: **[trac_11819-no-new.patch.gz](https://github.com/sagemath/sage/files/ticket11819/trac_11819-no-new.patch.gz)**



---

archive/issue_comments_125779.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nIt appears I added some uses of 'new' in #11716. So your patch doesn't apply anymore. I'm trying to do something about it now.",
    "created_at": "2011-12-19T15:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125779",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:2" align="right">Comment 2</div>

It appears I added some uses of 'new' in #11716. So your patch doesn't apply anymore. I'm trying to do something about it now.



---

archive/issue_events_145328.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-12-19T15:09:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145328"
}
```



---

archive/issue_events_145329.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-12-19T15:09:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145329"
}
```



---

archive/issue_comments_125780.json:
```json
{
    "body": "Reviewer: **Julian Rueth**",
    "created_at": "2011-12-19T17:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125780",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian Rueth**



---

archive/issue_comments_125781.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nI made some additional changes. Feel free to set it to positive review if you're ok with these.",
    "created_at": "2011-12-19T17:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125781",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:3" align="right">Comment 3</div>

I made some additional changes. Feel free to set it to positive review if you're ok with these.



---

archive/issue_events_145330.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-12-19T17:10:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145330"
}
```



---

archive/issue_events_145331.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-12-19T17:10:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145331"
}
```



---

archive/issue_comments_125782.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBtw. I'll add doctests to the new functions in #12192.",
    "created_at": "2011-12-19T17:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125782",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:5" align="right">Comment 5</div>

Btw. I'll add doctests to the new functions in #12192.



---

archive/issue_comments_125783.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nApply trac_11819_review.patch",
    "created_at": "2011-12-19T17:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125783",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:6" align="right">Comment 6</div>

Apply trac_11819_review.patch



---

archive/issue_comments_125784.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,3 +21,10 @@\n types.InstanceType(...)\n ```\n \n+---\n+\n+Apply\n+\n+1. [attachment: trac_11819_review.patch](https://github.com/sagemath/sage/files/ticket11819/trac_11819_review.patch.gz)\n+\n+to the sage repository\n``````\n",
    "created_at": "2011-12-19T17:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125784",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,3 +21,10 @@
 types.InstanceType(...)
 ```
 
+---
+
+Apply
+
+1. [attachment: trac_11819_review.patch](https://github.com/sagemath/sage/files/ticket11819/trac_11819_review.patch.gz)
+
+to the sage repository
``````




---

archive/issue_comments_125785.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nThe doctest \n\n```\n    sage: sage0(\"'new' in sys.modules\")\n    False\n```\nfails for me.  It might be imported by IPython; if I do `sage --ipython`:\n\n```\nIn [1]: import sys\n\nIn [2]: 'new' in sys.modules\nOut[2]: True\n```\nOr more tersely:\n\n```\n$ sage --ipython -c \"import sys; print 'new' in sys.modules\"\nTrue\n```",
    "created_at": "2011-12-19T21:35:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125785",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">Comment 7</div>

The doctest 

```
    sage: sage0("'new' in sys.modules")
    False
```
fails for me.  It might be imported by IPython; if I do `sage --ipython`:

```
In [1]: import sys

In [2]: 'new' in sys.modules
Out[2]: True
```
Or more tersely:

```
$ sage --ipython -c "import sys; print 'new' in sys.modules"
True
```



---

archive/issue_comments_125786.json:
```json
{
    "body": "Attachment: **[trac_11819_review.patch.gz](https://github.com/sagemath/sage/files/ticket11819/trac_11819_review.patch.gz)**\n\ncombined and rebased patch",
    "created_at": "2011-12-20T13:30:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125786",
    "user": "https://github.com/saraedum"
}
```

Attachment: **[trac_11819_review.patch.gz](https://github.com/sagemath/sage/files/ticket11819/trac_11819_review.patch.gz)**

combined and rebased patch



---

archive/issue_comments_125787.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nYou are right. I must have run the wrong patch somehow. Sorry for that.\n\nI adapted my patch. I it works now.",
    "created_at": "2011-12-20T15:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125787",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:8" align="right">Comment 8</div>

You are right. I must have run the wrong patch somehow. Sorry for that.

I adapted my patch. I it works now.



---

archive/issue_events_145332.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-12-21T00:28:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145332"
}
```



---

archive/issue_events_145333.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-12-21T00:28:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145333"
}
```



---

archive/issue_comments_125788.json:
```json
{
    "body": "Changed keywords from none to **sd35**",
    "created_at": "2011-12-21T15:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125788",
    "user": "https://github.com/saraedum"
}
```

Changed keywords from none to **sd35**



---

archive/issue_events_145334.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-22T16:41:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145334"
}
```



---

archive/issue_events_145335.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-22T16:41:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145335"
}
```



---

archive/issue_comments_125789.json:
```json
{
    "body": "Merged: **sage-5.0.beta1**",
    "created_at": "2012-01-18T08:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11819#issuecomment-125789",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta1**



---

archive/issue_events_145336.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T08:15:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145336"
}
```



---

archive/issue_events_145337.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T08:15:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11819",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11819#event-145337"
}
```
