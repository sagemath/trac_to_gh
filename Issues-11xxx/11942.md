# Issue 11942: segfault on Graph().connected_component_containing_vertex('')

archive/issues_011770.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nAs title.\n\n```\nfs@zhenghe /tmp $ sage -c \"Graph().connected_component_containing_vertex('')\"\n/opt/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f14e1a96df2]\n/opt/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f14e1a96e24]\n/opt/sage/local/lib/libcsage.so(sage_signal_handler+0x20c)[0x7f14e1a96a72]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0xf020)[0x7f14e31fa020]\n/opt/sage/local/lib/python2.6/site-packages/sage/graphs/base/c_graph.so(+0x11aa1)[0x7f14be4d8aa1]\n/opt/sage/local/lib/libpython2.6.so.1.0(+0x75876)[0x7f14e347c876]\n/opt/sage/local/lib/libpython2.6.so.1.0(+0x75b92)[0x7f14e347cb92]\n/opt/sage/local/lib/libpython2.6.so.1.0(+0xa0f08)[0x7f14e34a7f08]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7f14e3451cd3]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x395d)[0x7f14e34e835d]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x602d)[0x7f14e34eaa2d]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f14e34eb549]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f14e34eb642]\n/opt/sage/local/lib/libpython2.6.so.1.0(+0xdb07e)[0x7f14e34e207e]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x4f8d)[0x7f14e34e998d]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f14e34eb549]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f14e34eb642]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyRun_FileExFlags+0xb0)[0x7f14e350d9b0]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyRun_SimpleFileExFlags+0xdf)[0x7f14e350e3ef]\n/opt/sage/local/lib/libpython2.6.so.1.0(Py_Main+0xb23)[0x7f14e351b693]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd)[0x7f14e27fcead]\npython[0x4006a1]\n\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n------------------------------------------------------------------------\n/opt/sage/local/bin/sage-sage: line 772: 19065 Segmentation fault      sage-eval \"$@\"\nfs@zhenghe /tmp $ \n```\n\nApply:\n1. [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)\n2. [attachment: trac_11942-exceptions.2.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.2.patch.gz)\n\nComponent: **graph theory**\n\nKeywords: **segfault cython**\n\nAuthor: **Nathann Cohen, Keshav Kini, Jeroen Demeyer**\n\nReviewer: **Keshav Kini, David Coudert, Nathann Cohen**\n\nMerged: **sage-5.0.beta0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11942_\n\n",
    "closed_at": "2012-01-15T21:56:17Z",
    "created_at": "2011-10-21T05:55:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20cython"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "segfault on Graph().connected_component_containing_vertex('')",
    "type": "issue",
    "updated_at": "2012-01-15T21:56:17Z",
    "url": "https://github.com/sagemath/sage/issues/11942",
    "user": "https://github.com/kini"
}
```
<div id="comment:0"></div>

As title.

```
fs@zhenghe /tmp $ sage -c "Graph().connected_component_containing_vertex('')"
/opt/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f14e1a96df2]
/opt/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f14e1a96e24]
/opt/sage/local/lib/libcsage.so(sage_signal_handler+0x20c)[0x7f14e1a96a72]
/lib/x86_64-linux-gnu/libpthread.so.0(+0xf020)[0x7f14e31fa020]
/opt/sage/local/lib/python2.6/site-packages/sage/graphs/base/c_graph.so(+0x11aa1)[0x7f14be4d8aa1]
/opt/sage/local/lib/libpython2.6.so.1.0(+0x75876)[0x7f14e347c876]
/opt/sage/local/lib/libpython2.6.so.1.0(+0x75b92)[0x7f14e347cb92]
/opt/sage/local/lib/libpython2.6.so.1.0(+0xa0f08)[0x7f14e34a7f08]
/opt/sage/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7f14e3451cd3]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x395d)[0x7f14e34e835d]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x602d)[0x7f14e34eaa2d]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f14e34eb549]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f14e34eb642]
/opt/sage/local/lib/libpython2.6.so.1.0(+0xdb07e)[0x7f14e34e207e]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x4f8d)[0x7f14e34e998d]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f14e34eb549]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f14e34eb642]
/opt/sage/local/lib/libpython2.6.so.1.0(PyRun_FileExFlags+0xb0)[0x7f14e350d9b0]
/opt/sage/local/lib/libpython2.6.so.1.0(PyRun_SimpleFileExFlags+0xdf)[0x7f14e350e3ef]
/opt/sage/local/lib/libpython2.6.so.1.0(Py_Main+0xb23)[0x7f14e351b693]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd)[0x7f14e27fcead]
python[0x4006a1]

------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
/opt/sage/local/bin/sage-sage: line 772: 19065 Segmentation fault      sage-eval "$@"
fs@zhenghe /tmp $ 
```

Apply:
1. [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)
2. [attachment: trac_11942-exceptions.2.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.2.patch.gz)

Component: **graph theory**

Keywords: **segfault cython**

Author: **Nathann Cohen, Keshav Kini, Jeroen Demeyer**

Reviewer: **Keshav Kini, David Coudert, Nathann Cohen**

Merged: **sage-5.0.beta0**

_Issue created by migration from https://trac.sagemath.org/ticket/11942_





---

archive/issue_events_159706.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2011-10-21T05:55:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159706"
}
```



---

archive/issue_events_159707.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2011-10-21T05:55:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159707"
}
```



---

archive/issue_events_159708.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2011-10-21T05:55:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159708"
}
```



---

archive/issue_events_159709.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2011-10-21T05:55:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159709"
}
```



---

archive/issue_events_159710.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-10-21T05:55:24Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "subject": "https://github.com/kini",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159710"
}
```



---

archive/issue_events_159711.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-10-21T05:55:24Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "subject": "https://github.com/kini",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159711"
}
```



---

archive/issue_events_159712.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-10-21T05:55:24Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "subject": "https://github.com/kini",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159712"
}
```



---

archive/issue_events_159713.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-10-21T15:29:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159713"
}
```



---

archive/issue_comments_126350.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -35,3 +35,6 @@\n /opt/sage/local/bin/sage-sage: line 772: 19065 Segmentation fault      sage-eval \"$@\"\n fs@zhenghe /tmp $ \n ```\n+\n+Apply:\n+* [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)\n``````\n",
    "created_at": "2011-10-21T15:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126350",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -35,3 +35,6 @@
 /opt/sage/local/bin/sage-sage: line 772: 19065 Segmentation fault      sage-eval "$@"
 fs@zhenghe /tmp $ 
 ```
+
+Apply:
+* [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)
``````




---

archive/issue_comments_126351.json:
```json
{
    "body": "Author: **Nathann Cohen**",
    "created_at": "2011-10-21T15:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126351",
    "user": "https://github.com/nathanncohen"
}
```

Author: **Nathann Cohen**



---

archive/issue_comments_126352.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nRight ! `:-p`\n\nThis comes from an unchecked operation at the beginning of BFS/DFS. Fixed in the following patch `:-)`\n\nNathann",
    "created_at": "2011-10-21T15:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126352",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

Right ! `:-p`

This comes from an unchecked operation at the beginning of BFS/DFS. Fixed in the following patch `:-)`

Nathann



---

archive/issue_comments_126353.json:
```json
{
    "body": "Reviewer: **Keshav Kini**",
    "created_at": "2011-10-22T07:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126353",
    "user": "https://github.com/kini"
}
```

Reviewer: **Keshav Kini**



---

archive/issue_comments_126354.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWow, that was fast! :D I have a couple of questions, though. `Graph().connected_component_containing_vertex(0)` already produces an exception, which includes the number 0 in the message. This is still true with your patch. Currently investigating why...\n\nAlso, your exception is a `ValueError` - shouldn't it be a `KeyError`? Shouldn't the current error for vertex `0` be a `KeyError` too instead of a (!?) `RuntimeError`? The [Python docs](http://docs.python.org/library/exceptions.html#exceptions.Exception) say:\n\n> This exception is mostly a relic from a previous version of the interpreter; it is not used very much any more.",
    "created_at": "2011-10-22T07:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126354",
    "user": "https://github.com/kini"
}
```

<div id="comment:2" align="right">comment:2</div>

Wow, that was fast! :D I have a couple of questions, though. `Graph().connected_component_containing_vertex(0)` already produces an exception, which includes the number 0 in the message. This is still true with your patch. Currently investigating why...

Also, your exception is a `ValueError` - shouldn't it be a `KeyError`? Shouldn't the current error for vertex `0` be a `KeyError` too instead of a (!?) `RuntimeError`? The [Python docs](http://docs.python.org/library/exceptions.html#exceptions.Exception) say:

> This exception is mostly a relic from a previous version of the interpreter; it is not used very much any more.



---

archive/issue_comments_126355.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHellooooooo ! \n\n> > This exception is mostly a relic from a previous version of the interpreter; it is not used very much any more.\n\nOh ? That's a pity, I really use it a lot `:-)`\n\nI immediately update the patch to return a KeyError `:-)`\n\nNathann",
    "created_at": "2011-10-27T17:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126355",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

Hellooooooo ! 

> > This exception is mostly a relic from a previous version of the interpreter; it is not used very much any more.

Oh ? That's a pity, I really use it a lot `:-)`

I immediately update the patch to return a KeyError `:-)`

Nathann



---

archive/issue_comments_126356.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOh, `ValueError` is still used a lot but it is `RuntimeError` which is not used much anymore.",
    "created_at": "2011-10-27T17:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126356",
    "user": "https://github.com/kini"
}
```

<div id="comment:4" align="right">comment:4</div>

Oh, `ValueError` is still used a lot but it is `RuntimeError` which is not used much anymore.



---

archive/issue_comments_126357.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> Oh, `ValueError` is still used a lot but it is `RuntimeError` which is not used much anymore.\n\nArgggggg !!!\n\nPatch reverted to the former one `:-D`\n\nNathann",
    "created_at": "2011-10-27T18:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126357",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

> Oh, `ValueError` is still used a lot but it is `RuntimeError` which is not used much anymore.

Argggggg !!!

Patch reverted to the former one `:-D`

Nathann



---

archive/issue_comments_126358.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAttachment: **[trac_11942.patch.gz](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)**\n\n... but... even though `ValueError` is used a lot, the correct one to use here is `KeyError`... `D:`\n\nAnyway don't worry about it, I'll do that in another patch later :) Sorry, didn't get much time to look at this earlier this week.",
    "created_at": "2011-10-27T18:08:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126358",
    "user": "https://github.com/kini"
}
```

<div id="comment:6" align="right">comment:6</div>

Attachment: **[trac_11942.patch.gz](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)**

... but... even though `ValueError` is used a lot, the correct one to use here is `KeyError`... `D:`

Anyway don't worry about it, I'll do that in another patch later :) Sorry, didn't get much time to look at this earlier this week.



---

archive/issue_comments_126359.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@kini](#comment%3A6):\n> ... but... even though `ValueError` is used a lot, the correct one to use here is `KeyError`... `D:`\n\nArggggggggggg !!!\n\n> Anyway don't worry about it, I'll do that in another patch later :) Sorry, didn't get much time to look at this earlier this week.\n\nGood !! THaaaaanks ! `:-)`\n\nNathann",
    "created_at": "2011-10-27T18:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126359",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@kini](#comment%3A6):
> ... but... even though `ValueError` is used a lot, the correct one to use here is `KeyError`... `D:`

Arggggggggggg !!!

> Anyway don't worry about it, I'll do that in another patch later :) Sorry, didn't get much time to look at this earlier this week.

Good !! THaaaaanks ! `:-)`

Nathann



---

archive/issue_events_159714.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T16:14:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159714"
}
```



---

archive/issue_comments_126360.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126360",
    "user": "https://github.com/jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_events_159715.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-12-10T20:06:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159715"
}
```



---

archive/issue_events_159716.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-12-10T20:06:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159716"
}
```



---

archive/issue_events_159717.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-12-10T20:06:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159717"
}
```



---

archive/issue_comments_126361.json:
```json
{
    "body": "Changed reviewer from **Keshav Kini** to **Keshav Kini, David Coudert**",
    "created_at": "2011-12-10T20:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126361",
    "user": "https://github.com/dcoudert"
}
```

Changed reviewer from **Keshav Kini** to **Keshav Kini, David Coudert**



---

archive/issue_comments_126362.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI don't understand why you have both stopped the discussion without concluding on the status of this patch.\n\nI have no problem when installing the patch and building the documentation.\nThe function tests correctly that the parameter is or is not a vertex of the graph.\n\nFor me the patch is correct, so I give a positive review. \n\nBest,\nDavid.",
    "created_at": "2011-12-10T20:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126362",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:9" align="right">comment:9</div>

I don't understand why you have both stopped the discussion without concluding on the status of this patch.

I have no problem when installing the patch and building the documentation.
The function tests correctly that the parameter is or is not a vertex of the graph.

For me the patch is correct, so I give a positive review. 

Best,
David.



---

archive/issue_comments_126363.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nPlease read the comments. The ValueError needs to be changed to KeyError, and also I wanted to understand the following before giving it a positive review, as possibly the fix could be improved (multiple code paths for a single purpose is bad design):\n\n>`Graph().connected_component_containing_vertex(0)` already produces an exception, which includes the number 0 in the message. This is still true with your patch.\n\nSorry for neglecting this ticket for so long.",
    "created_at": "2011-12-10T20:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126363",
    "user": "https://github.com/kini"
}
```

<div id="comment:10" align="right">comment:10</div>

Please read the comments. The ValueError needs to be changed to KeyError, and also I wanted to understand the following before giving it a positive review, as possibly the fix could be improved (multiple code paths for a single purpose is bad design):

>`Graph().connected_component_containing_vertex(0)` already produces an exception, which includes the number 0 in the message. This is still true with your patch.

Sorry for neglecting this ticket for so long.



---

archive/issue_events_159718.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2011-12-10T20:21:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159718"
}
```



---

archive/issue_events_159719.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2011-12-10T20:21:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159719"
}
```



---

archive/issue_comments_126364.json:
```json
{
    "body": "Changed keywords from none to **segfault cython**",
    "created_at": "2012-01-04T01:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126364",
    "user": "https://github.com/kini"
}
```

Changed keywords from none to **segfault cython**



---

archive/issue_events_159720.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-04T01:50:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20cython",
    "label_color": "0000b0",
    "label_name": "c: cython",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159720"
}
```



---

archive/issue_comments_126365.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWell, I'm still not sure about the multiple code paths. But here is a patch to use better exceptions throughout the file in question, though that's sort of tangential to the original purpose of the ticket. This ticket has been sitting around too long for me to delay it any further just because of my ignorance of the Cython graphs code, especially since it fixes a segfault, so I will give a positive review to Nathann's part. Maybe someone can review my exceptions patch? It passes `make ptestlong` on my machine fwiw.",
    "created_at": "2012-01-04T01:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126365",
    "user": "https://github.com/kini"
}
```

<div id="comment:11" align="right">comment:11</div>

Well, I'm still not sure about the multiple code paths. But here is a patch to use better exceptions throughout the file in question, though that's sort of tangential to the original purpose of the ticket. This ticket has been sitting around too long for me to delay it any further just because of my ignorance of the Cython graphs code, especially since it fixes a segfault, so I will give a positive review to Nathann's part. Maybe someone can review my exceptions patch? It passes `make ptestlong` on my machine fwiw.



---

archive/issue_comments_126366.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,4 +37,5 @@\n ```\n \n Apply:\n-* [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)\n+1. [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)\n+2. [attachment: trac_11942-exceptions.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.patch.gz)\n``````\n",
    "created_at": "2012-01-04T01:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126366",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,4 +37,5 @@
 ```
 
 Apply:
-* [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)
+1. [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)
+2. [attachment: trac_11942-exceptions.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.patch.gz)
``````




---

archive/issue_comments_126367.json:
```json
{
    "body": "Changed author from **Nathann Cohen** to **Nathann Cohen, Keshav Kini**",
    "created_at": "2012-01-04T01:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126367",
    "user": "https://github.com/kini"
}
```

Changed author from **Nathann Cohen** to **Nathann Cohen, Keshav Kini**



---

archive/issue_events_159721.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-04T01:50:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159721"
}
```



---

archive/issue_events_159722.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-04T01:50:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159722"
}
```



---

archive/issue_comments_126368.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWell, what about setting the message to what it was before, and just change the exception's name if yo feels it should be ? The former message was way clearer, especially when the exception is thrown by a submethod of the method run by the user.\n\nNathann",
    "created_at": "2012-01-04T23:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126368",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

Well, what about setting the message to what it was before, and just change the exception's name if yo feels it should be ? The former message was way clearer, especially when the exception is thrown by a submethod of the method run by the user.

Nathann



---

archive/issue_events_159723.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-04T23:11:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159723"
}
```



---

archive/issue_events_159724.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-04T23:11:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159724"
}
```



---

archive/issue_comments_126369.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n`ValueError`'s constructor accepts a string representing a message, but `KeyError`'s constructor accepts an object representing the key which was not found in some collection. So this is the \"correct\" way to raise the exception here. The traceback call stack should theoretically give you all the info that was in the error message before. I noticed this because `raise ValueError('foo')` gives you a message \"ValueError: foo\" whereas `raise KeyError('foo')` gives you a message \"KeyError: 'foo'\" (note the quotation marks). I asked about it on the Python IRC channel and the above is the answer I got.",
    "created_at": "2012-01-05T04:53:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126369",
    "user": "https://github.com/kini"
}
```

<div id="comment:13" align="right">comment:13</div>

`ValueError`'s constructor accepts a string representing a message, but `KeyError`'s constructor accepts an object representing the key which was not found in some collection. So this is the "correct" way to raise the exception here. The traceback call stack should theoretically give you all the info that was in the error message before. I noticed this because `raise ValueError('foo')` gives you a message "ValueError: foo" whereas `raise KeyError('foo')` gives you a message "KeyError: 'foo'" (note the quotation marks). I asked about it on the Python IRC channel and the above is the answer I got.



---

archive/issue_comments_126370.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nWell, for me this modification just makes the error message harder to understand, and I do not see the point of losing that if the only gain is to respect some standard we did not know even existed two weeks ago.",
    "created_at": "2012-01-05T09:52:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126370",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

Well, for me this modification just makes the error message harder to understand, and I do not see the point of losing that if the only gain is to respect some standard we did not know even existed two weeks ago.



---

archive/issue_comments_126371.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHmm. OK, I'll just put back the messages and still use KeyError. The quotation marks are a bit weird, but not such a big deal, I guess - we are not actually trying to catch these exceptions and do anything with them anyway.",
    "created_at": "2012-01-05T10:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126371",
    "user": "https://github.com/kini"
}
```

<div id="comment:15" align="right">comment:15</div>

Hmm. OK, I'll just put back the messages and still use KeyError. The quotation marks are a bit weird, but not such a big deal, I guess - we are not actually trying to catch these exceptions and do anything with them anyway.



---

archive/issue_comments_126372.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHello,\nIt would be nice if the KeyError method could take an extra argument to describe the error. For instance KeyError(key, 'You should add some tests to your algorithm!'). \nUnfortunately, I'm not able to find the documentation of the KeyError function.\n\nHowever, according to the documentation of Python, the raise method can handle multiple arguments: \n`raise_stmt ::=  \"raise\" [expression [\",\" expression [\",\" expression]]]`\nSee: http://docs.python.org/reference/simple_stmts.html#raise\nIt may help satisfying both of you ;-)\n\nBest,\nDavid.",
    "created_at": "2012-01-05T10:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126372",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">comment:16</div>

Hello,
It would be nice if the KeyError method could take an extra argument to describe the error. For instance KeyError(key, 'You should add some tests to your algorithm!'). 
Unfortunately, I'm not able to find the documentation of the KeyError function.

However, according to the documentation of Python, the raise method can handle multiple arguments: 
`raise_stmt ::=  "raise" [expression ["," expression ["," expression]]]`
See: http://docs.python.org/reference/simple_stmts.html#raise
It may help satisfying both of you ;-)

Best,
David.



---

archive/issue_comments_126373.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThank you, David! I agree with you, that would be great. Unfortunately it is not supported by Python. The documentation you linked about the `raise` statement is unfortunately not so helpful - there must be between 1 and 3 arguments, and they have special meanings. Actually, the multiple-argument syntax for `raise` is there in order to provide backwards compatibility with old versions of Python in which Exceptions were not objects with constructors. Now we would do something like \n\n`raise HALError(\"I can't let you do that, Dave\")`\n\nbut before you would write\n\n`raise HALError, \"I can't let you do that, Dave\"`\n\nbecause the `HALError(foo)` syntax didn't exist. So the multiple arguments basically allows you to still use the old syntax. Unfortunately this doesn't mean that we can just raise multiple exceptions...",
    "created_at": "2012-01-05T10:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126373",
    "user": "https://github.com/kini"
}
```

<div id="comment:17" align="right">comment:17</div>

Thank you, David! I agree with you, that would be great. Unfortunately it is not supported by Python. The documentation you linked about the `raise` statement is unfortunately not so helpful - there must be between 1 and 3 arguments, and they have special meanings. Actually, the multiple-argument syntax for `raise` is there in order to provide backwards compatibility with old versions of Python in which Exceptions were not objects with constructors. Now we would do something like 

`raise HALError("I can't let you do that, Dave")`

but before you would write

`raise HALError, "I can't let you do that, Dave"`

because the `HALError(foo)` syntax didn't exist. So the multiple arguments basically allows you to still use the old syntax. Unfortunately this doesn't mean that we can just raise multiple exceptions...



---

archive/issue_comments_126374.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-01-05T10:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126374",
    "user": "https://github.com/kini"
}
```

apply to $SAGE_ROOT/devel/sage



---

archive/issue_events_159725.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-05T10:36:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159725"
}
```



---

archive/issue_events_159726.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-05T10:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159726"
}
```



---

archive/issue_comments_126375.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAttachment: **[trac_11942-exceptions.patch.gz](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.patch.gz)**\n\nNew patch up. Sorry about all this noise, I should really have just made a different ticket for this exception stuff.",
    "created_at": "2012-01-05T10:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126375",
    "user": "https://github.com/kini"
}
```

<div id="comment:18" align="right">comment:18</div>

Attachment: **[trac_11942-exceptions.patch.gz](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.patch.gz)**

New patch up. Sorry about all this noise, I should really have just made a different ticket for this exception stuff.



---

archive/issue_comments_126376.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nHellooooo !!!\n\nWell, thank you for this new version `:-)`\n\nIt passes all tests, so this ticket can go !\n\nNathann",
    "created_at": "2012-01-05T13:36:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126376",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

Hellooooo !!!

Well, thank you for this new version `:-)`

It passes all tests, so this ticket can go !

Nathann



---

archive/issue_events_159727.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-05T13:36:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159727"
}
```



---

archive/issue_events_159728.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-05T13:36:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159728"
}
```



---

archive/issue_comments_126377.json:
```json
{
    "body": "Changed reviewer from **Keshav Kini, David Coudert** to **Keshav Kini, David Coudert, Nathann Cohen**",
    "created_at": "2012-01-05T13:36:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126377",
    "user": "https://github.com/nathanncohen"
}
```

Changed reviewer from **Keshav Kini, David Coudert** to **Keshav Kini, David Coudert, Nathann Cohen**



---

archive/issue_comments_126378.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nHurrah! Thanks for the review (and the original patch)!\n\nBTW, I botched that 2001 quote above... it should be \"I'm sorry, Dave, I'm afraid I can't do that\", of course `:P`",
    "created_at": "2012-01-05T14:04:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126378",
    "user": "https://github.com/kini"
}
```

<div id="comment:20" align="right">comment:20</div>

Hurrah! Thanks for the review (and the original patch)!

BTW, I botched that 2001 quote above... it should be "I'm sorry, Dave, I'm afraid I can't do that", of course `:P`



---

archive/issue_comments_126379.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n> BTW, I botched that 2001 quote above... it should be \"I'm sorry, Dave, I'm afraid I can't do that\", of course `:P`\n\nNo harm done, we both watched the french version of it `:-D`",
    "created_at": "2012-01-05T14:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126379",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

> BTW, I botched that 2001 quote above... it should be "I'm sorry, Dave, I'm afraid I can't do that", of course `:P`

No harm done, we both watched the french version of it `:-D`



---

archive/issue_events_159729.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T14:13:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159729"
}
```



---

archive/issue_events_159730.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T14:13:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159730"
}
```



---

archive/issue_comments_126380.json:
```json
{
    "body": "Use LookupError instead of ValueError or KeyError",
    "created_at": "2012-01-05T14:36:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126380",
    "user": "https://github.com/jdemeyer"
}
```

Use LookupError instead of ValueError or KeyError



---

archive/issue_events_159731.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T14:38:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159731"
}
```



---

archive/issue_events_159732.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T14:38:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159732"
}
```



---

archive/issue_comments_126381.json:
```json
{
    "body": "Changed author from **Nathann Cohen, Keshav Kini** to **Nathann Cohen, Keshav Kini, Jeroen Demeyer**",
    "created_at": "2012-01-05T14:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126381",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Nathann Cohen, Keshav Kini** to **Nathann Cohen, Keshav Kini, Jeroen Demeyer**



---

archive/issue_comments_126382.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAttachment: **[trac_11942-exceptions.2.patch.gz](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.2.patch.gz)**\n\nSince `KeyError` is specifically about dicts, I think the more general `LookupError` is better.  Needs review.",
    "created_at": "2012-01-05T14:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126382",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Attachment: **[trac_11942-exceptions.2.patch.gz](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.2.patch.gz)**

Since `KeyError` is specifically about dicts, I think the more general `LookupError` is better.  Needs review.



---

archive/issue_comments_126383.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -38,4 +38,4 @@\n \n Apply:\n 1. [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)\n-2. [attachment: trac_11942-exceptions.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.patch.gz)\n+2. [attachment: trac_11942-exceptions.2.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.2.patch.gz)\n``````\n",
    "created_at": "2012-01-05T14:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126383",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -38,4 +38,4 @@
 
 Apply:
 1. [attachment: trac_11942.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942.patch.gz)
-2. [attachment: trac_11942-exceptions.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.patch.gz)
+2. [attachment: trac_11942-exceptions.2.patch](https://github.com/sagemath/sage/files/ticket11942/trac_11942-exceptions.2.patch.gz)
``````




---

archive/issue_events_159733.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T14:38:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159733"
}
```



---

archive/issue_events_159734.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T14:38:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159734"
}
```



---

archive/issue_comments_126384.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nOh, I was under the impression that those base classes shouldn't be instantiated, but that seems to be unfounded after reading the docs. Looks good to me! Lines 855-856 of `$SAGE_ROOT/devel/sage/sage/graphs/base/graph_backends.py` contains another exception which seems like it should be a `LookupError` but I'm not sure I understand why the current exception is imported from !NetworkX. Maybe there is a good reason for it?",
    "created_at": "2012-01-05T14:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126384",
    "user": "https://github.com/kini"
}
```

<div id="comment:25" align="right">comment:25</div>

Oh, I was under the impression that those base classes shouldn't be instantiated, but that seems to be unfounded after reading the docs. Looks good to me! Lines 855-856 of `$SAGE_ROOT/devel/sage/sage/graphs/base/graph_backends.py` contains another exception which seems like it should be a `LookupError` but I'm not sure I understand why the current exception is imported from !NetworkX. Maybe there is a good reason for it?



---

archive/issue_events_159735.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-05T14:58:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159735"
}
```



---

archive/issue_events_159736.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-05T14:58:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159736"
}
```



---

archive/issue_events_159737.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-05T14:58:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159737"
}
```



---

archive/issue_events_159738.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-05T14:58:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159738"
}
```



---

archive/issue_comments_126385.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nWhoops, didn't mean to change the milestone.",
    "created_at": "2012-01-05T14:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126385",
    "user": "https://github.com/kini"
}
```

<div id="comment:26" align="right">comment:26</div>

Whoops, didn't mean to change the milestone.



---

archive/issue_comments_126386.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nWell, these lines are contained in the NetworkX backend, so it may mean that they define their own Exceptions in the NetworkX project. I do not think this class is still used in Sage anyway.\n\nNathann",
    "created_at": "2012-01-05T15:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126386",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

Well, these lines are contained in the NetworkX backend, so it may mean that they define their own Exceptions in the NetworkX project. I do not think this class is still used in Sage anyway.

Nathann



---

archive/issue_events_159739.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-05T15:06:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159739"
}
```



---

archive/issue_events_159740.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-01-05T15:06:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159740"
}
```



---

archive/issue_comments_126387.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nBut didn't Sage developers write that NetworkX backend wrapper? Well, never mind, if it's not used in Sage anymore.",
    "created_at": "2012-01-05T15:06:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126387",
    "user": "https://github.com/kini"
}
```

<div id="comment:28" align="right">comment:28</div>

But didn't Sage developers write that NetworkX backend wrapper? Well, never mind, if it's not used in Sage anymore.



---

archive/issue_comments_126388.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nWell yes, and that's most probably this class. But if you run some code made for NetworkX on a Sage graph with our own exception it may break the NetworkX code. I guess this was the point of importing exceptions. Thank you for the patch Jeroen !\n\nNathann",
    "created_at": "2012-01-05T15:11:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126388",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

Well yes, and that's most probably this class. But if you run some code made for NetworkX on a Sage graph with our own exception it may break the NetworkX code. I guess this was the point of importing exceptions. Thank you for the patch Jeroen !

Nathann



---

archive/issue_comments_126389.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@nathanncohen](#comment%3A29):\n> if you run some code made for NetworkX on a Sage graph\n\nAha, now I get it. And yes, thanks Jeroen :)",
    "created_at": "2012-01-05T15:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126389",
    "user": "https://github.com/kini"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@nathanncohen](#comment%3A29):
> if you run some code made for NetworkX on a Sage graph

Aha, now I get it. And yes, thanks Jeroen :)



---

archive/issue_comments_126390.json:
```json
{
    "body": "Merged: **sage-5.0.beta0**",
    "created_at": "2012-01-15T21:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11942#issuecomment-126390",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta0**



---

archive/issue_events_159741.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-15T21:56:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159741"
}
```



---

archive/issue_events_159742.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-15T21:56:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11942",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11942#event-159742"
}
```
