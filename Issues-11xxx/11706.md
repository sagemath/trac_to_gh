# Issue 11706: tachyon-0.98.9.p3 fails to build on ppc64 SUSE Linux power 7 (silius on skynet)

archive/issues_011534.json:
```json
{
    "assignees": [],
    "body": "Here's what happens with sage-4.7.1:\n\n```\n...\nchecking for stdlib.h... (cached) yes\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.1/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.1/lto-wrapper\nTarget: powerpc64-unknown-linux-gnu\nConfigured with: /usr/local/gcc-4.6.1/src/gcc-4.6.1/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21/ppc64-Linux-power7-suse-gcc-4.3.4-suse/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21/ppc64-Linux-power7-suse-gcc-4.3.4-suse/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.0.1/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.3.4-suse --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.0.1-gcc-4.3.4-suse --prefix=/usr/local/gcc-4.6.1/ppc64-Linux-power7-suse\nThread model: posix\ngcc version 4.6.1 (GCC)\n****************************************************\nchecking sys/time.h usability... no\nchecking atomic_ops.h presence... Sorry, your platform isn't supported by Tachyon and/or Sage. Exiting...\n```\n\n---\n\n**New spkg: http://spkg-upload.googlecode.com/files/tachyon-0.98.9.p5.spkg** (based on the p4 from #11504)\n\n**md5sum:** `72fa42f730cc7d65c53ab80970a5d35a  tachyon-0.98.9.p5.spkg`\n\n\n### tachyon-0.98.9.p5 (William Stein and Leif Leonhardy, August 19th 2011)\n* #11706: Make package build on 64-bit PPC Linux, too (by using the `linux-ppc`\n  `make` target, which works for ppc64 as well).\n* Check exit codes of `cp`, especially in the last case where the built\n  Tachyon executable gets installed. Also use `cp -p` (and `-f`) there, to\n  avoid permission issues in multi-user environments.\n* Quote all instances of `$UNAME`.\n* Copy / install `tachyon.exe` (instead of `tachyon`) on Cygwin.\n* Make `spkg-install` executable.\n* Fix all file permissions (see Special Update/Build Instructions).\n* Fix mark-up of headings of changelog entries.\n* Minor cosmetic clean-up.\n\n\nDepends on #11504\n\nAssignee: **@williamstein**\n\nCC:  @mwhansen\n\nAuthor: **William Stein, Leif Leonhardy**\n\nReviewer: **Leif Leonhardy, Karl-Dieter Crisman, Mike Hansen**\n\nMerged: **sage-4.7.2.alpha3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11706_\n\n",
    "closed_at": "2011-09-12T18:21:04Z",
    "created_at": "2011-08-18T19:41:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20porting",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "tachyon-0.98.9.p3 fails to build on ppc64 SUSE Linux power 7 (silius on skynet)",
    "type": "issue",
    "updated_at": "2011-09-12T18:21:04Z",
    "url": "https://github.com/sagemath/sage/issues/11706",
    "user": "https://github.com/williamstein"
}
```
Here's what happens with sage-4.7.1:

```
...
checking for stdlib.h... (cached) yes
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.6.1/ppc64-Linux-power7-suse/libexec/gcc/powerpc64-unknown-linux-gnu/4.6.1/lto-wrapper
Target: powerpc64-unknown-linux-gnu
Configured with: /usr/local/gcc-4.6.1/src/gcc-4.6.1/configure --enable-languages=c,c++,fortran --with-gnu-as --with-gnu-as=/usr/local/binutils-2.21/ppc64-Linux-power7-suse-gcc-4.3.4-suse/bin/as --with-gnu-ld --with-ld=/usr/local/binutils-2.21/ppc64-Linux-power7-suse-gcc-4.3.4-suse/bin/ld --with-gmp=/usr/local/mpir-2.4.0/ppc64-Linux-power7-suse-gcc-4.3.4-suse --with-mpfr=/usr/local/mpfr-3.0.1/ppc64-Linux-power7-suse-mpir-2.4.0-gcc-4.3.4-suse --with-mpc=/usr/local/mpc-0.9/ppc64-Linux-power7-suse-mpir-2.4.0-mpfr-3.0.1-gcc-4.3.4-suse --prefix=/usr/local/gcc-4.6.1/ppc64-Linux-power7-suse
Thread model: posix
gcc version 4.6.1 (GCC)
****************************************************
checking sys/time.h usability... no
checking atomic_ops.h presence... Sorry, your platform isn't supported by Tachyon and/or Sage. Exiting...
```

---

**New spkg: http://spkg-upload.googlecode.com/files/tachyon-0.98.9.p5.spkg** (based on the p4 from #11504)

**md5sum:** `72fa42f730cc7d65c53ab80970a5d35a  tachyon-0.98.9.p5.spkg`


### tachyon-0.98.9.p5 (William Stein and Leif Leonhardy, August 19th 2011)
* #11706: Make package build on 64-bit PPC Linux, too (by using the `linux-ppc`
  `make` target, which works for ppc64 as well).
* Check exit codes of `cp`, especially in the last case where the built
  Tachyon executable gets installed. Also use `cp -p` (and `-f`) there, to
  avoid permission issues in multi-user environments.
* Quote all instances of `$UNAME`.
* Copy / install `tachyon.exe` (instead of `tachyon`) on Cygwin.
* Make `spkg-install` executable.
* Fix all file permissions (see Special Update/Build Instructions).
* Fix mark-up of headings of changelog entries.
* Minor cosmetic clean-up.


Depends on #11504

Assignee: **@williamstein**

CC:  @mwhansen

Author: **William Stein, Leif Leonhardy**

Reviewer: **Leif Leonhardy, Karl-Dieter Crisman, Mike Hansen**

Merged: **sage-4.7.2.alpha3**

_Issue created by migration from https://trac.sagemath.org/ticket/11706_





---

archive/issue_events_143552.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-08-18T19:41:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143552"
}
```



---

archive/issue_events_143553.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-08-18T19:41:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting",
    "label_color": "000080",
    "label_name": "component: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143553"
}
```



---

archive/issue_events_143554.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-08-18T19:41:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143554"
}
```



---

archive/issue_events_143555.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-08-18T19:41:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143555"
}
```



---

archive/issue_comments_123569.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew spkg here.  It's just a trivial change of `ppc)` to `ppc|ppc64)`.\n\nhttp://sage.math.washington.edu/home/wstein/days/32/silius/tachyon-0.98.9.p4.spkg",
    "created_at": "2011-08-18T20:41:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123569",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'>Comment 1:</a>
New spkg here.  It's just a trivial change of `ppc)` to `ppc|ppc64)`.

http://sage.math.washington.edu/home/wstein/days/32/silius/tachyon-0.98.9.p4.spkg



---

archive/issue_events_143556.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-08-18T20:41:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143556"
}
```



---

archive/issue_comments_123570.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nhttp://sage.math.washington.edu/home/wstein/days/32/silius/",
    "created_at": "2011-08-18T20:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123570",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'>Comment 2:</a>
http://sage.math.washington.edu/home/wstein/days/32/silius/



---

archive/issue_comments_123571.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI cannot test whether the spkg actually builds on that platform, otherwise positive review for the spkg (i.e., it's \"clean\" and the change doesn't affect any other platform).\n\nAlthough I'd change the following comment in `spkg-install`:\n\n```sh\n        *) # e.g. ppc64\n```\n\n(And the subsequent `if [ \"$UNAME\" = ... ]; then ...` aren't very nice. I'd use `case \"$UNAME\" in ...` or at least `elif ...` instead, as mentioned on earlier tickets.)",
    "created_at": "2011-08-18T21:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123571",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:3'>Comment 3:</a>
I cannot test whether the spkg actually builds on that platform, otherwise positive review for the spkg (i.e., it's "clean" and the change doesn't affect any other platform).

Although I'd change the following comment in `spkg-install`:

```sh
        *) # e.g. ppc64
```

(And the subsequent `if [ "$UNAME" = ... ]; then ...` aren't very nice. I'd use `case "$UNAME" in ...` or at least `elif ...` instead, as mentioned on earlier tickets.)



---

archive/issue_comments_123572.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nP.S., for the record:\n\nThis:\n\n```sh\n   ...\n   cp compile/*/tachyon \"$SAGE_LOCAL/bin\"\n   exit 0\n```\nshould also be\n\n```sh\n   ...\n   cp compile/*/tachyon \"$SAGE_LOCAL/bin\"\n   exit $?\n```\nAn appropriate error message in case `cp` failed would be better. The exit codes of other `cp` commands aren't checked either.\n\n(This has been in before of course.)",
    "created_at": "2011-08-18T22:38:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123572",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'>Comment 4:</a>
P.S., for the record:

This:

```sh
   ...
   cp compile/*/tachyon "$SAGE_LOCAL/bin"
   exit 0
```
should also be

```sh
   ...
   cp compile/*/tachyon "$SAGE_LOCAL/bin"
   exit $?
```
An appropriate error message in case `cp` failed would be better. The exit codes of other `cp` commands aren't checked either.

(This has been in before of course.)



---

archive/issue_comments_123573.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nPlease note that #11504 has had a p4 ready for review for weeks (and might I note for a rather more important platform than PPC Linux).  All that one needs is a review that the spkg is actually correctly formed and works on a non-Cygwin box; it has already been reviewed to install Tachyon correctly on Cygwin.  \n\nSo I'm putting #11504 as a dependency.  If you want to use BDFL privileges, I won't complain too much, but it would probably be easier just to unpack #11504's spkg and review it quick :)\n\nI agree with Leif that this needs work for fixing the comment about ppc64, which apparently does now work :)   I don't know about the \"please complain on sage-devel\" comment, either; that could be more precise.  \n\nI do think that the \"not very nice\" things Leif mentioned can be left to another ticket, though.",
    "created_at": "2011-08-19T01:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123573",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'>Comment 5:</a>
Please note that #11504 has had a p4 ready for review for weeks (and might I note for a rather more important platform than PPC Linux).  All that one needs is a review that the spkg is actually correctly formed and works on a non-Cygwin box; it has already been reviewed to install Tachyon correctly on Cygwin.  

So I'm putting #11504 as a dependency.  If you want to use BDFL privileges, I won't complain too much, but it would probably be easier just to unpack #11504's spkg and review it quick :)

I agree with Leif that this needs work for fixing the comment about ppc64, which apparently does now work :)   I don't know about the "please complain on sage-devel" comment, either; that could be more precise.  

I do think that the "not very nice" things Leif mentioned can be left to another ticket, though.



---

archive/issue_comments_123574.json:
```json
{
    "body": "Author: **William Stein**",
    "created_at": "2011-08-19T01:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123574",
    "user": "https://github.com/kcrisman"
}
```

Author: **William Stein**



---

archive/issue_events_143557.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-08-19T01:19:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143557"
}
```



---

archive/issue_events_143558.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-08-19T01:19:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143558"
}
```



---

archive/issue_comments_123575.json:
```json
{
    "body": "Dependencies: **#11504**",
    "created_at": "2011-08-19T01:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123575",
    "user": "https://github.com/kcrisman"
}
```

Dependencies: **#11504**



---

archive/issue_comments_123576.json:
```json
{
    "body": "Reviewer: **Leif Leonhardy, Karl-Dieter Crisman**",
    "created_at": "2011-08-19T01:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123576",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Leif Leonhardy, Karl-Dieter Crisman**



---

archive/issue_comments_123577.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\n1. I agree with kcrisman that those other changes Leif mentions should be on another ticket.  \n\n2. \"(and might I note for a rather more important platform than PPC Linux).\"   Not to minimize the importance of a Windows port, but there is nobody providing any financial support for porting Sage to Cygwin.  There is very substantial financial support coming from the folks that want a PPC Linux port -- it is thus \"rather more important\".",
    "created_at": "2011-08-19T01:38:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123577",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:6'>Comment 6:</a>
1. I agree with kcrisman that those other changes Leif mentions should be on another ticket.  

2. "(and might I note for a rather more important platform than PPC Linux)."   Not to minimize the importance of a Windows port, but there is nobody providing any financial support for porting Sage to Cygwin.  There is very substantial financial support coming from the folks that want a PPC Linux port -- it is thus "rather more important".



---

archive/issue_comments_123578.json:
```json
{
    "body": "Changed assignee from **drkirkby** to **@williamstein**",
    "created_at": "2011-08-19T01:38:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123578",
    "user": "https://github.com/williamstein"
}
```

Changed assignee from **drkirkby** to **@williamstein**



---

archive/issue_comments_123579.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@kcrisman](#comment%3A5):\n> I do think that the \"not very nice\" things Leif mentioned can be left to another ticket, though.\n\nAgreed, with the exception of the `exit 0` regardless of whether the installation (the final `cp`) succeeded or not.\n\nI guess the spkg needs work for Darwin, too, (on a follow-up) anyway, because of\n\n```sh\nif [ $UNAME = \"Darwin\" ]; then\n    #make macosx-thr\n    # The threaded version of the 0.98 beta doesn't work on OS X.\n    if [ \"$SAGE64\" = \"yes\" ]; then\n        echo \"Building 64 bit MaxOSX\"\n        $MAKE macosx-64\n    else\n        $MAKE macosx\n    fi\n    finished\nfi\n```\n(The mentioned beta version is of years ago. I also did not know *MaxOSX*.)\n\nHaven't looked at #11504 yet; will try to review it [as is] if I find the time... ;)",
    "created_at": "2011-08-19T01:40:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123579",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@kcrisman](#comment%3A5):
> I do think that the "not very nice" things Leif mentioned can be left to another ticket, though.

Agreed, with the exception of the `exit 0` regardless of whether the installation (the final `cp`) succeeded or not.

I guess the spkg needs work for Darwin, too, (on a follow-up) anyway, because of

```sh
if [ $UNAME = "Darwin" ]; then
    #make macosx-thr
    # The threaded version of the 0.98 beta doesn't work on OS X.
    if [ "$SAGE64" = "yes" ]; then
        echo "Building 64 bit MaxOSX"
        $MAKE macosx-64
    else
        $MAKE macosx
    fi
    finished
fi
```
(The mentioned beta version is of years ago. I also did not know *MaxOSX*.)

Haven't looked at #11504 yet; will try to review it [as is] if I find the time... ;)



---

archive/issue_comments_123580.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\n> 2. \"(and might I note for a rather more important platform than PPC Linux).\"   Not to minimize the importance of a Windows port, but there is nobody providing any financial support for porting Sage to Cygwin.  There is very substantial financial support coming from the folks that want a PPC Linux port -- it is thus \"rather more important\".  \n\nWell, then, I guess it depends on what you mean by \"important\".   \n\nI would continue that thought, but I'll just get testy.  So instead I will politely ask for *either* a (positive?) review of #11504 *or* incorporating the changes there here *or* a claim-by-fiat that this ticket (#11076) simply has priority (once the relevant things Leif mentioned are taken care of).   Just so that I at least know where #11504 stands.\n\nIf it helps make the decision, I already fixed the \"MaxOSX\" issue :) though not the \"0.98 beta\" issue :(",
    "created_at": "2011-08-19T01:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123580",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'>Comment 8:</a>
> 2. "(and might I note for a rather more important platform than PPC Linux)."   Not to minimize the importance of a Windows port, but there is nobody providing any financial support for porting Sage to Cygwin.  There is very substantial financial support coming from the folks that want a PPC Linux port -- it is thus "rather more important".  

Well, then, I guess it depends on what you mean by "important".   

I would continue that thought, but I'll just get testy.  So instead I will politely ask for *either* a (positive?) review of #11504 *or* incorporating the changes there here *or* a claim-by-fiat that this ticket (#11076) simply has priority (once the relevant things Leif mentioned are taken care of).   Just so that I at least know where #11504 stands.

If it helps make the decision, I already fixed the "MaxOSX" issue :) though not the "0.98 beta" issue :(



---

archive/issue_comments_123581.json:
```json
{
    "body": "Changed dependencies from **#11504** to none",
    "created_at": "2011-08-19T01:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123581",
    "user": "https://github.com/kcrisman"
}
```

Changed dependencies from **#11504** to none



---

archive/issue_comments_123582.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nFor the record:\n\nI'm currently preparing a p5 spkg based on Karl-Dieter's p4 from #11504 (and William's changes here of course), coming soon...",
    "created_at": "2011-08-19T04:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123582",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:9'>Comment 9:</a>
For the record:

I'm currently preparing a p5 spkg based on Karl-Dieter's p4 from #11504 (and William's changes here of course), coming soon...



---

archive/issue_comments_123583.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@nexttime](#comment%3A9):\n> For the record:\n> \n> I'm currently preparing a p5 spkg based on Karl-Dieter's p4 from #11504 (and William's changes here of course), coming soon...\n\nThanks leif!  I'm +1 to Karl's suggestion, of course.",
    "created_at": "2011-08-19T04:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123583",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@nexttime](#comment%3A9):
> For the record:
> 
> I'm currently preparing a p5 spkg based on Karl-Dieter's p4 from #11504 (and William's changes here of course), coming soon...

Thanks leif!  I'm +1 to Karl's suggestion, of course.



---

archive/issue_comments_123584.json:
```json
{
    "body": "Attachment: **[tachyon-0.98.9.p4-p5.diff.gz](https://github.com/sagemath/sage/files/ticket11706/tachyon-0.98.9.p4-p5.diff.gz)**\n\nDiff between Karl-Dieter's p4 from #11504 and the p5 spkg. For reference / review only.",
    "created_at": "2011-08-19T06:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123584",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[tachyon-0.98.9.p4-p5.diff.gz](https://github.com/sagemath/sage/files/ticket11706/tachyon-0.98.9.p4-p5.diff.gz)**

Diff between Karl-Dieter's p4 from #11504 and the p5 spkg. For reference / review only.



---

archive/issue_comments_123585.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,3 +12,24 @@\n checking sys/time.h usability... no\n checking atomic_ops.h presence... Sorry, your platform isn't supported by Tachyon and/or Sage. Exiting...\n ```\n+\n+---\n+\n+**New spkg: http://spkg-upload.googlecode.com/files/tachyon-0.98.9.p5.spkg** (based on the p4 from #11504)\n+\n+**md5sum:** `72fa42f730cc7d65c53ab80970a5d35a  tachyon-0.98.9.p5.spkg`\n+\n+\n+### tachyon-0.98.9.p5 (William Stein and Leif Leonhardy, August 19th 2011)\n+* #11706: Make package build on 64-bit PPC Linux, too (by using the `linux-ppc`\n+  `make` target, which works for ppc64 as well).\n+* Check exit codes of `cp`, especially in the last case where the built\n+  Tachyon executable gets installed. Also use `cp -p` (and `-f`) there, to\n+  avoid permission issues in multi-user environments.\n+* Quote all instances of `$UNAME`.\n+* Copy / install `tachyon.exe` (instead of `tachyon`) on Cygwin.\n+* Make `spkg-install` executable.\n+* Fix all file permissions (see Special Update/Build Instructions).\n+* Fix mark-up of headings of changelog entries.\n+* Minor cosmetic clean-up.\n+\n``````\n",
    "created_at": "2011-08-19T07:04:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123585",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,3 +12,24 @@
 checking sys/time.h usability... no
 checking atomic_ops.h presence... Sorry, your platform isn't supported by Tachyon and/or Sage. Exiting...
 ```
+
+---
+
+**New spkg: http://spkg-upload.googlecode.com/files/tachyon-0.98.9.p5.spkg** (based on the p4 from #11504)
+
+**md5sum:** `72fa42f730cc7d65c53ab80970a5d35a  tachyon-0.98.9.p5.spkg`
+
+
+### tachyon-0.98.9.p5 (William Stein and Leif Leonhardy, August 19th 2011)
+* #11706: Make package build on 64-bit PPC Linux, too (by using the `linux-ppc`
+  `make` target, which works for ppc64 as well).
+* Check exit codes of `cp`, especially in the last case where the built
+  Tachyon executable gets installed. Also use `cp -p` (and `-f`) there, to
+  avoid permission issues in multi-user environments.
+* Quote all instances of `$UNAME`.
+* Copy / install `tachyon.exe` (instead of `tachyon`) on Cygwin.
+* Make `spkg-install` executable.
+* Fix all file permissions (see Special Update/Build Instructions).
+* Fix mark-up of headings of changelog entries.
+* Minor cosmetic clean-up.
+
``````




---

archive/issue_comments_123586.json:
```json
{
    "body": "Changed author from **William Stein** to **William Stein, Leif Leonhardy**",
    "created_at": "2011-08-19T07:04:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123586",
    "user": "https://github.com/nexttime"
}
```

Changed author from **William Stein** to **William Stein, Leif Leonhardy**



---

archive/issue_comments_123587.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nNew p5 spkg based on Karl-Dieter's p4 from #11504 is up (see ticket's descriptions).\n\nTook a bit longer because I had to check and fix another Cygwin issue.\n\n\nI've only fixed the [IMHO] most important issues (and also cleaned up a little), but added TODOs for and comments on the remaining things, to be done on follow-up tickets.",
    "created_at": "2011-08-19T07:04:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123587",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'>Comment 11:</a>
New p5 spkg based on Karl-Dieter's p4 from #11504 is up (see ticket's descriptions).

Took a bit longer because I had to check and fix another Cygwin issue.


I've only fixed the [IMHO] most important issues (and also cleaned up a little), but added TODOs for and comments on the remaining things, to be done on follow-up tickets.



---

archive/issue_events_143559.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-08-19T07:04:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143559"
}
```



---

archive/issue_events_143560.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-08-19T07:04:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143560"
}
```



---

archive/issue_comments_123588.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nPro forma, since the p5 is now based on the p4 from #11504.",
    "created_at": "2011-08-19T07:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123588",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:12'>Comment 12:</a>
Pro forma, since the p5 is now based on the p4 from #11504.



---

archive/issue_comments_123589.json:
```json
{
    "body": "Dependencies: **#11504**",
    "created_at": "2011-08-19T07:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123589",
    "user": "https://github.com/nexttime"
}
```

Dependencies: **#11504**



---

archive/issue_comments_123590.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nI can at least give a positive review of the diff.  Thanks for putting that work in, Leif.  I've commented on #11504 about my mystification about how many weird things were going on in the p4; I try to be pretty minimalist in my spkg changes so I don't screw something up. \n\nI'll try to force-install this spkg on Cygwin and see what happens; I *should* be able to produce a Tachyon plot.",
    "created_at": "2011-08-19T12:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123590",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'>Comment 13:</a>
I can at least give a positive review of the diff.  Thanks for putting that work in, Leif.  I've commented on #11504 about my mystification about how many weird things were going on in the p4; I try to be pretty minimalist in my spkg changes so I don't screw something up. 

I'll try to force-install this spkg on Cygwin and see what happens; I *should* be able to produce a Tachyon plot.



---

archive/issue_comments_123591.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nOh, and would this still need someone to test that the addition of choices for the Linux PPC actually works, or is it like some of the reviews for HP-UX/AIX where it suffices to show that the change only affects those platforms, and we trust the author that it behaves as advertised?  Given the ringing endorsement of PPC Linux by the author, I'm inclined to trust him :)\n\n<rant>\nSometime I'm going to still try to install Linux on an old eMac, and then we'll have another machine... Maybe once my home computer falls too far behind.  It already can't use the latest Flash, latest this, latest that - SO annoying, because there is nothing wrong with it, just companies that think it's not worth it to support older equipment.  You can bet there are still people who make parts for seven-year-old cars!\n</rant>",
    "created_at": "2011-08-19T12:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123591",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'>Comment 14:</a>
Oh, and would this still need someone to test that the addition of choices for the Linux PPC actually works, or is it like some of the reviews for HP-UX/AIX where it suffices to show that the change only affects those platforms, and we trust the author that it behaves as advertised?  Given the ringing endorsement of PPC Linux by the author, I'm inclined to trust him :)

<rant>
Sometime I'm going to still try to install Linux on an old eMac, and then we'll have another machine... Maybe once my home computer falls too far behind.  It already can't use the latest Flash, latest this, latest that - SO annoying, because there is nothing wrong with it, just companies that think it's not worth it to support older equipment.  You can bet there are still people who make parts for seven-year-old cars!
</rant>



---

archive/issue_comments_123592.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nOk, here is an update. [This picture](http://sage.math.washington.edu/home/kcrisman/tachyonpic.png) was generated by an alpha of 4.7.1 that had my p4 installed.  Looking in `local/bin/` finds tachyon.exe already there.\n\nMy guess is that Cygwin \"knows\" that it's supposed to be .exe as an ending and behaved accordingly?  \n\nI'll try this spkg out now.  Don't forget to also do doctests for the plot3d tachyon file, not just the interface.  `graphs/generic_graph.py` also has some stuff, and I'd go ahead and test the whole plot3d directory, though of course not all the images will be seen.",
    "created_at": "2011-08-19T13:00:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123592",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'>Comment 15:</a>
Ok, here is an update. [This picture](http://sage.math.washington.edu/home/kcrisman/tachyonpic.png) was generated by an alpha of 4.7.1 that had my p4 installed.  Looking in `local/bin/` finds tachyon.exe already there.

My guess is that Cygwin "knows" that it's supposed to be .exe as an ending and behaved accordingly?  

I'll try this spkg out now.  Don't forget to also do doctests for the plot3d tachyon file, not just the interface.  `graphs/generic_graph.py` also has some stuff, and I'd go ahead and test the whole plot3d directory, though of course not all the images will be seen.



---

archive/issue_comments_123593.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBuilds and installs without problems, so in some sense the goal of #11504 is already fulfilled.    `ls -l local/bin` confirms that the new binary is the new Tachyon.  \n\nBut now we are more ambitious!  We want it to actually *work*.  And [it does](http://sage.math.washington.edu/home/kcrisman/tachyonpic2.png)!  The Tachyon interface test also works appropriately.\n\nSo positive review for anything I am qualified to comment on or care about.",
    "created_at": "2011-08-19T13:11:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123593",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'>Comment 16:</a>
Builds and installs without problems, so in some sense the goal of #11504 is already fulfilled.    `ls -l local/bin` confirms that the new binary is the new Tachyon.  

But now we are more ambitious!  We want it to actually *work*.  And [it does](http://sage.math.washington.edu/home/kcrisman/tachyonpic2.png)!  The Tachyon interface test also works appropriately.

So positive review for anything I am qualified to comment on or care about.



---

archive/issue_comments_123594.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nCan anyone from the Sage Days who is working on this port quick review this?  I'm not even sure anything else needs to be reviewed, except *checking* that it actually works, which might be hard for 99.9% of us who don't have this exact platform :)",
    "created_at": "2011-08-22T12:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123594",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'>Comment 17:</a>
Can anyone from the Sage Days who is working on this port quick review this?  I'm not even sure anything else needs to be reviewed, except *checking* that it actually works, which might be hard for 99.9% of us who don't have this exact platform :)



---

archive/issue_comments_123595.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nThis builds and seems to work fine on skynet/silius .",
    "created_at": "2011-08-22T16:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123595",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:18'>Comment 18:</a>
This builds and seems to work fine on skynet/silius .



---

archive/issue_comments_123596.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nSo, positive review, I guess?  (Leif, anything else we should check?",
    "created_at": "2011-08-22T16:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123596",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'>Comment 19:</a>
So, positive review, I guess?  (Leif, anything else we should check?



---

archive/issue_events_143561.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-08-22T16:55:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143561"
}
```



---

archive/issue_events_143562.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-08-22T16:55:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143562"
}
```



---

archive/issue_comments_123597.json:
```json
{
    "body": "Changed reviewer from **Leif Leonhardy, Karl-Dieter Crisman** to **Leif Leonhardy, Karl-Dieter Crisman, Mike Hansen**",
    "created_at": "2011-08-22T16:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123597",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Leif Leonhardy, Karl-Dieter Crisman** to **Leif Leonhardy, Karl-Dieter Crisman, Mike Hansen**



---

archive/issue_comments_123598.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@kcrisman](#comment%3A19):\n> So, positive review, I guess?  (Leif, anything else we should check?\n\nI'm happy with a positive review... ;)\n\n(And I guess you, too, since now you shouldn't have to delete the DS_Store files from your superseded p4.)\n\n---\n\nFor follow-up Tachyon tickets:\n\nShould check which parts of the upstream docs are really needed; I noticed at least one (fairly small) compressed tarball with HTML files below `src/`.",
    "created_at": "2011-08-27T03:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123598",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@kcrisman](#comment%3A19):
> So, positive review, I guess?  (Leif, anything else we should check?

I'm happy with a positive review... ;)

(And I guess you, too, since now you shouldn't have to delete the DS_Store files from your superseded p4.)

---

For follow-up Tachyon tickets:

Should check which parts of the upstream docs are really needed; I noticed at least one (fairly small) compressed tarball with HTML files below `src/`.



---

archive/issue_comments_123599.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha3**",
    "created_at": "2011-09-12T18:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11706#issuecomment-123599",
    "user": "https://github.com/nexttime"
}
```

Merged: **sage-4.7.2.alpha3**



---

archive/issue_events_143563.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-12T18:21:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143563"
}
```



---

archive/issue_events_143564.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-12T18:21:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11706",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11706#event-143564"
}
```
