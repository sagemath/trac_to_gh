# Issue 11604: PARI qfminim bug on 32-bit systems (Sage 4.7 and 4.6.2)

archive/issues_011432.json:
```json
{
    "body": "In Sage 4.7, when calling the function\n\npari('qfminim(%s,2,0)'%(A._pari_()))\n\nwith certain matrix, I get the following:\n\n```\nsage: A=Matrix(ZZ,4,4,[32982266684193100, 1368614777139719, 224591013270052693 , 276460184982223238,1368614777139719,   56791380087354, 9319512049770279, 11471848267545007,224591013270052693 , 9319512049770279 ,1529340971891522140, 1882541434053596358,276460184982223238 ,  11471848267545007, 1882541434053596358, 2317313350044091414])\nsage: pari('qfminim(%s,2,0)'%(A._pari_()))\n  ***   at top-level: qfminim([32982266684\n  ***                 ^--------------------\n  *** qfminim: bug in ZM_lll, please report\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/home/float/<ipython console> in <module>()\n\n/home/float/sage/local/lib/python2.6/site-packages/sage/libs/pari/gen.so in sage.libs.pari.gen.PariInstance.__call__ (sage/libs/pari/gen.c:43438)()\n\nRuntimeError: evaluating PARI string\n\n```\n\nThis is [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154), fixed by #11130, this ticket simply adds a doctest.\n\n**Apply** [attachment:11604_doctest.patch](https://github.com/sagemath/sage/files/ticket11604/11604_doctest.patch)\n\nDepends on #11321\n\nDepends on #11130\n\n**Assignee:** @williamstein\n\n**CC:**  @jdemeyer\n\n**Keywords:** pari, qfminim, ZM_lll, large matrix, ArchLinux, PARI/GP\n\n**Author:** Jeroen Demeyer\n\n**Reviewer:** Leif Leonhardy\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Merged:** sage-4.8.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/11604\n\n",
    "closed_at": "2011-11-07T10:11:55Z",
    "created_at": "2011-07-16T09:49:26Z",
    "labels": [
        "component: number theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "title": "PARI qfminim bug on 32-bit systems (Sage 4.7 and 4.6.2)",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/11604",
    "user": "https://github.com/mmasdeu"
}
```
In Sage 4.7, when calling the function

pari('qfminim(%s,2,0)'%(A._pari_()))

with certain matrix, I get the following:

```
sage: A=Matrix(ZZ,4,4,[32982266684193100, 1368614777139719, 224591013270052693 , 276460184982223238,1368614777139719,   56791380087354, 9319512049770279, 11471848267545007,224591013270052693 , 9319512049770279 ,1529340971891522140, 1882541434053596358,276460184982223238 ,  11471848267545007, 1882541434053596358, 2317313350044091414])
sage: pari('qfminim(%s,2,0)'%(A._pari_()))
  ***   at top-level: qfminim([32982266684
  ***                 ^--------------------
  *** qfminim: bug in ZM_lll, please report
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/home/float/<ipython console> in <module>()

/home/float/sage/local/lib/python2.6/site-packages/sage/libs/pari/gen.so in sage.libs.pari.gen.PariInstance.__call__ (sage/libs/pari/gen.c:43438)()

RuntimeError: evaluating PARI string

```

This is [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154), fixed by #11130, this ticket simply adds a doctest.

**Apply** [attachment:11604_doctest.patch](https://github.com/sagemath/sage/files/ticket11604/11604_doctest.patch)

Depends on #11321

Depends on #11130

**Assignee:** @williamstein

**CC:**  @jdemeyer

**Keywords:** pari, qfminim, ZM_lll, large matrix, ArchLinux, PARI/GP

**Author:** Jeroen Demeyer

**Reviewer:** Leif Leonhardy

**Upstream:** Fixed upstream, in a later stable release.

**Merged:** sage-4.8.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/11604





---

archive/issue_events_092310.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T11:06:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92310"
}
```



---

archive/issue_comments_121372.json:
```json
{
    "body": "<a id='comment:1'></a>\nWhich version of Sage are you using?\n\nWorks for me in both PARI (version 2.4.3 development svn-12623 as shipped with Sage, i.e. `./sage -gp`) and from within Sage, version 4.7 (cf. [this SAGENB worksheet](http://sagenb.org/home/pub/2918)) as well as version 4.7.1.alpha2. (Haven't yet tried with 4.7.1.rc0 though.)",
    "created_at": "2011-07-16T11:06:27Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121372",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'></a>
Which version of Sage are you using?

Works for me in both PARI (version 2.4.3 development svn-12623 as shipped with Sage, i.e. `./sage -gp`) and from within Sage, version 4.7 (cf. [this SAGENB worksheet](http://sagenb.org/home/pub/2918)) as well as version 4.7.1.alpha2. (Haven't yet tried with 4.7.1.rc0 though.)



---

archive/issue_events_092311.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2011-07-16T11:17:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92311"
}
```



---

archive/issue_events_092312.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2011-07-16T11:17:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92312"
}
```



---

archive/issue_comments_121373.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-When calling the function\n+In Sage 4.7, when calling the function\n \n pari('qfminim(%s,2,0)'%(A._pari_()))\n \n``````\n",
    "created_at": "2011-07-16T11:17:35Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121373",
    "user": "https://github.com/mmasdeu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-When calling the function
+In Sage 4.7, when calling the function
 
 pari('qfminim(%s,2,0)'%(A._pari_()))
 
``````




---

archive/issue_comments_121374.json:
```json
{
    "body": "<a id='comment:3'></a>\nI am using Sage Version 4.7, Release Date: 2011-05-23.\n\nI tried the worksheet you attached and it doesn't work for me. I also tried the sage -gp (I didn't know about it before) and it also fails, so I change my opinion on it being a problem with interfaces...\n\nWhen asked about pari version (in sage -gp) I get 2.4.3... I am running Linux kernel 2.6.39, and compiled Sage from source on a 32bit machine, if that is of any use.\n\nIs there any other info that might be relevant?\n\nThank you,\n\nmarc.\n\nReplying to [leif](#comment%3A1):\n> Which version of Sage are you using?\n> \n> Works for me in both PARI (version 2.4.3 development svn-12623 as shipped with Sage, i.e. `./sage -gp`) and from within Sage, version 4.7 (cf. [this SAGENB worksheet](http://sagenb.org/home/pub/2918)) as well as version 4.7.1.alpha2. (Haven't yet tried with 4.7.1.rc0 though.)\n",
    "created_at": "2011-07-16T11:27:29Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121374",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:3'></a>
I am using Sage Version 4.7, Release Date: 2011-05-23.

I tried the worksheet you attached and it doesn't work for me. I also tried the sage -gp (I didn't know about it before) and it also fails, so I change my opinion on it being a problem with interfaces...

When asked about pari version (in sage -gp) I get 2.4.3... I am running Linux kernel 2.6.39, and compiled Sage from source on a 32bit machine, if that is of any use.

Is there any other info that might be relevant?

Thank you,

marc.

Replying to [leif](#comment%3A1):
> Which version of Sage are you using?
> 
> Works for me in both PARI (version 2.4.3 development svn-12623 as shipped with Sage, i.e. `./sage -gp`) and from within Sage, version 4.7 (cf. [this SAGENB worksheet](http://sagenb.org/home/pub/2918)) as well as version 4.7.1.alpha2. (Haven't yet tried with 4.7.1.rc0 though.)




---

archive/issue_events_092313.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T12:22:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "rename": {
        "from": "PARI qfminim bug only when called from Sage",
        "to": "PARI qfminim bug on 32-bit Linux (Sage 4.7)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92313"
}
```



---

archive/issue_events_092314.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T12:22:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92314"
}
```



---

archive/issue_events_092315.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T12:22:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92315"
}
```



---

archive/issue_comments_121375.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [mmasdeu](#comment%3A3):\n> I am using Sage Version 4.7, Release Date: 2011-05-23.\n> \n> I am running Linux kernel 2.6.39, and compiled Sage from source on a 32bit machine, if that is of any use.\n> \n> Is there any other info that might be relevant?\n\n\nMaybe the Linux distribution you are using, the processor type (`cat /proc/cpuinfo`) / architecture (`uname -a`) and last but not least the version of GCC (`gcc -v`).\n\nIf you haven't yet run Sage's test suite, you could at least run a subset of it:\n\n```sh\n/home/float/sage$ ./sage -t -long devel/sage/sage/libs/pari/\n...\n/home/float/sage$ ./sage -t -long devel/sage/sage/interfaces/gp.py\n...\n```\n(Both together should *at most* take a few minutes on a slow machine; the second one doesn't make much sense if the error also occurs in plain PARI/GP as you said.)\n\nProbably more important, as this seems to be an upstream bug, you can run *PARI's* test suite, which unfortunately requires rebuilding PARI, and hence will take much more time (up to 30 minutes I think, depending on your machine):\n\n```sh\n/home/float/sage$ env SAGE_CHECK=yes ./sage -f -s pari-2.4.3.alpha.p5 2>&1 | tee pari-test.log\n```\n(This reinstalls the package unless PARI's test suite fails, and logs the output to `pari-test.log`. If you end up with a broken Sage installation because the test suite didn't pass, you can reinstall it by almost the same command, simply omitting the `env SAGE_CHECK=yes` and optionally `-s`, i.e. `./sage -f pari-2.4.3.alpha.p5`.)",
    "created_at": "2011-07-16T12:22:51Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121375",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>
Replying to [mmasdeu](#comment%3A3):
> I am using Sage Version 4.7, Release Date: 2011-05-23.
> 
> I am running Linux kernel 2.6.39, and compiled Sage from source on a 32bit machine, if that is of any use.
> 
> Is there any other info that might be relevant?


Maybe the Linux distribution you are using, the processor type (`cat /proc/cpuinfo`) / architecture (`uname -a`) and last but not least the version of GCC (`gcc -v`).

If you haven't yet run Sage's test suite, you could at least run a subset of it:

```sh
/home/float/sage$ ./sage -t -long devel/sage/sage/libs/pari/
...
/home/float/sage$ ./sage -t -long devel/sage/sage/interfaces/gp.py
...
```
(Both together should *at most* take a few minutes on a slow machine; the second one doesn't make much sense if the error also occurs in plain PARI/GP as you said.)

Probably more important, as this seems to be an upstream bug, you can run *PARI's* test suite, which unfortunately requires rebuilding PARI, and hence will take much more time (up to 30 minutes I think, depending on your machine):

```sh
/home/float/sage$ env SAGE_CHECK=yes ./sage -f -s pari-2.4.3.alpha.p5 2>&1 | tee pari-test.log
```
(This reinstalls the package unless PARI's test suite fails, and logs the output to `pari-test.log`. If you end up with a broken Sage installation because the test suite didn't pass, you can reinstall it by almost the same command, simply omitting the `env SAGE_CHECK=yes` and optionally `-s`, i.e. `./sage -f pari-2.4.3.alpha.p5`.)



---

archive/issue_comments_121376.json:
```json
{
    "body": "<a id='comment:5'></a>\nP.S.: In case PARI's test suite fails, you can attach (upload) the log file `pari-test.log` to this ticket.",
    "created_at": "2011-07-16T13:03:47Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121376",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>
P.S.: In case PARI's test suite fails, you can attach (upload) the log file `pari-test.log` to this ticket.



---

archive/issue_comments_121377.json:
```json
{
    "body": "<a id='comment:6'></a>\nI have run all tests you suggested and everything seems ok. I have also tried to run the code in another machine that has Sage installed (that is an Intel Xeon with 8 cores, so quite different to my '06 laptop). That one is running Sage 4.6.2 (2011-02-25). And got the same error.\n\nHere is the data about my laptop (in which it is easiest for me to experiment):\n\nDistribution: Arch Linux updated a few hours ago (but I have seen the bug weeks ago).\n\nCpuinfo:\n\n```\nprocessor\t: 0\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 13\nmodel name\t: Intel(R) Pentium(R) M processor 1.50GHz\nstepping\t: 8\ncpu MHz\t\t: 1496.431\ncache size\t: 2048 KB\nfdiv_bug\t: no\nhlt_bug\t\t: no\nf00f_bug\t: no\ncoma_bug\t: no\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 2\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov clflush dts acpi mmx fxsr sse sse2 ss tm pbe up bts est tm2\nbogomips\t: 2994.56\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 32 bits physical, 32 bits virtual\npower management:\n```\n\nArchitecture (uname -a): Linux tablarch 2.6.39-ARCH #1 SMP PREEMPT Sat Jul 9 15:31:04 CEST 2011 i686 Intel(R) Pentium(R) M processor 1.50GHz GenuineIntel GNU/Linux\n\nGCC:\n\n```\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-pc-linux-gnu/4.6.1/lto-wrapper\nTarget: i686-pc-linux-gnu\nConfigured with: /build/src/gcc-4.6.1/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --enable-languages=c,c++,ada,fortran,go,lto,objc,obj-c++ --enable-shared --enable-threads=posix --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-clocale=gnu --enable-gnu-unique-object --enable-linker-build-id --with-ppl --enable-cloog-backend=isl --enable-lto --enable-gold --enable-ld=default --enable-plugin --with-plugin-ld=ld.gold --disable-multilib --disable-libstdcxx-pch --enable-checking=release\nThread model: posix\ngcc version 4.6.1 (GCC)\n```\n\nThanks again,\n\nmarc.\n\n\nReplying to [leif](#comment%3A4):\n> Replying to [mmasdeu](#comment%3A3):\n> > I am using Sage Version 4.7, Release Date: 2011-05-23.\n> > \n> > I am running Linux kernel 2.6.39, and compiled Sage from source on a 32bit machine, if that is of any use.\n> > \n> > Is there any other info that might be relevant?\n\n> \n> Maybe the Linux distribution you are using, the processor type (`cat /proc/cpuinfo`) / architecture (`uname -a`) and last but not least the version of GCC (`gcc -v`).\n> \n> If you haven't yet run Sage's test suite, you could at least run a subset of it:\n> \n> ```sh\n> /home/float/sage$ ./sage -t -long devel/sage/sage/libs/pari/\n> ...\n> /home/float/sage$ ./sage -t -long devel/sage/sage/interfaces/gp.py\n> ...\n> ```\n> (Both together should *at most* take a few minutes on a slow machine; the second one doesn't make much sense if the error also occurs in plain PARI/GP as you said.)\n> \n> Probably more important, as this seems to be an upstream bug, you can run *PARI's* test suite, which unfortunately requires rebuilding PARI, and hence will take much more time (up to 30 minutes I think, depending on your machine):\n> \n> ```sh\n> /home/float/sage$ env SAGE_CHECK=yes ./sage -f -s pari-2.4.3.alpha.p5 2>&1 | tee pari-test.log\n> ```\n> (This reinstalls the package unless PARI's test suite fails, and logs the output to `pari-test.log`. If you end up with a broken Sage installation because the test suite didn't pass, you can reinstall it by almost the same command, simply omitting the `env SAGE_CHECK=yes` and optionally `-s`, i.e. `./sage -f pari-2.4.3.alpha.p5`.)\n",
    "created_at": "2011-07-16T13:54:29Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121377",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:6'></a>
I have run all tests you suggested and everything seems ok. I have also tried to run the code in another machine that has Sage installed (that is an Intel Xeon with 8 cores, so quite different to my '06 laptop). That one is running Sage 4.6.2 (2011-02-25). And got the same error.

Here is the data about my laptop (in which it is easiest for me to experiment):

Distribution: Arch Linux updated a few hours ago (but I have seen the bug weeks ago).

Cpuinfo:

```
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 13
model name	: Intel(R) Pentium(R) M processor 1.50GHz
stepping	: 8
cpu MHz		: 1496.431
cache size	: 2048 KB
fdiv_bug	: no
hlt_bug		: no
f00f_bug	: no
coma_bug	: no
fpu		: yes
fpu_exception	: yes
cpuid level	: 2
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov clflush dts acpi mmx fxsr sse sse2 ss tm pbe up bts est tm2
bogomips	: 2994.56
clflush size	: 64
cache_alignment	: 64
address sizes	: 32 bits physical, 32 bits virtual
power management:
```

Architecture (uname -a): Linux tablarch 2.6.39-ARCH #1 SMP PREEMPT Sat Jul 9 15:31:04 CEST 2011 i686 Intel(R) Pentium(R) M processor 1.50GHz GenuineIntel GNU/Linux

GCC:

```
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-pc-linux-gnu/4.6.1/lto-wrapper
Target: i686-pc-linux-gnu
Configured with: /build/src/gcc-4.6.1/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --enable-languages=c,c++,ada,fortran,go,lto,objc,obj-c++ --enable-shared --enable-threads=posix --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-clocale=gnu --enable-gnu-unique-object --enable-linker-build-id --with-ppl --enable-cloog-backend=isl --enable-lto --enable-gold --enable-ld=default --enable-plugin --with-plugin-ld=ld.gold --disable-multilib --disable-libstdcxx-pch --enable-checking=release
Thread model: posix
gcc version 4.6.1 (GCC)
```

Thanks again,

marc.


Replying to [leif](#comment%3A4):
> Replying to [mmasdeu](#comment%3A3):
> > I am using Sage Version 4.7, Release Date: 2011-05-23.
> > 
> > I am running Linux kernel 2.6.39, and compiled Sage from source on a 32bit machine, if that is of any use.
> > 
> > Is there any other info that might be relevant?

> 
> Maybe the Linux distribution you are using, the processor type (`cat /proc/cpuinfo`) / architecture (`uname -a`) and last but not least the version of GCC (`gcc -v`).
> 
> If you haven't yet run Sage's test suite, you could at least run a subset of it:
> 
> ```sh
> /home/float/sage$ ./sage -t -long devel/sage/sage/libs/pari/
> ...
> /home/float/sage$ ./sage -t -long devel/sage/sage/interfaces/gp.py
> ...
> ```
> (Both together should *at most* take a few minutes on a slow machine; the second one doesn't make much sense if the error also occurs in plain PARI/GP as you said.)
> 
> Probably more important, as this seems to be an upstream bug, you can run *PARI's* test suite, which unfortunately requires rebuilding PARI, and hence will take much more time (up to 30 minutes I think, depending on your machine):
> 
> ```sh
> /home/float/sage$ env SAGE_CHECK=yes ./sage -f -s pari-2.4.3.alpha.p5 2>&1 | tee pari-test.log
> ```
> (This reinstalls the package unless PARI's test suite fails, and logs the output to `pari-test.log`. If you end up with a broken Sage installation because the test suite didn't pass, you can reinstall it by almost the same command, simply omitting the `env SAGE_CHECK=yes` and optionally `-s`, i.e. `./sage -f pari-2.4.3.alpha.p5`.)




---

archive/issue_events_092316.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2011-07-16T14:08:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92316"
}
```



---

archive/issue_events_092317.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2011-07-16T14:08:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92317"
}
```



---

archive/issue_comments_121378.json:
```json
{
    "body": "<a id='comment:8'></a>\nHmmm, anything in common with the other machine (e.g. distro, compiler, special build options)?\n\nDid you also try `./sage -gp` there?",
    "created_at": "2011-07-16T14:26:12Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121378",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
Hmmm, anything in common with the other machine (e.g. distro, compiler, special build options)?

Did you also try `./sage -gp` there?



---

archive/issue_comments_121379.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [leif](#comment%3A8):\n> Hmmm, anything in common with the other machine (e.g. distro, compiler, special build options)?\n\n\nDon't think so. The other machine is my math department. What I know about it is that everything is compiled from scratch (so no distro), gcc is 4.2.4. My guess is that Sage has been built with the default options, but I can't confirm at this moment.\n\n> \n> Did you also try `./sage -gp` there?\n\n\nYes, I did.\n\nAlso, I have tried on a third machine with same results. Do you have access to other Sage installs on different types of machines? It might be that it only affects precompiled versions and 32 bit ones?\n\nI am running out of ideas, but since two Sage installs in different math departments (and in different continents, for that matter) give the same error, it shouldn't be hard to find other installations with the same problem...\n\nmarc.",
    "created_at": "2011-07-16T14:34:24Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121379",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:9'></a>
Replying to [leif](#comment%3A8):
> Hmmm, anything in common with the other machine (e.g. distro, compiler, special build options)?


Don't think so. The other machine is my math department. What I know about it is that everything is compiled from scratch (so no distro), gcc is 4.2.4. My guess is that Sage has been built with the default options, but I can't confirm at this moment.

> 
> Did you also try `./sage -gp` there?


Yes, I did.

Also, I have tried on a third machine with same results. Do you have access to other Sage installs on different types of machines? It might be that it only affects precompiled versions and 32 bit ones?

I am running out of ideas, but since two Sage installs in different math departments (and in different continents, for that matter) give the same error, it shouldn't be hard to find other installations with the same problem...

marc.



---

archive/issue_comments_121380.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [mmasdeu](#comment%3A9):\n> Replying to [leif](#comment%3A8):\n> > Did you also try `./sage -gp` there?\n\n> \n> Yes, I did.\n\n\nHow does the error look like there? (Sage may somewhat obscure PARI's error message when you use PARI from the Sage prompt, `sage:`.)\n\n\n\n\n> Also, I have tried on a third machine with same results. Do you have access to other Sage installs on different types of machines? It might be that it only affects precompiled versions and 32 bit ones?\n\n\nDid you also build your *working* PARI/GP versions from scratch / source?\n\n\n\n\n> I am running out of ideas, but since two Sage installs in different math departments (and in different continents, for that matter) give the same error, it shouldn't be hard to find other installations with the same problem...\n\n\nI'll try to find some where I can reproduce this...\n\nDid you make any changes in `$SAGE_ROOT/local/lib/` (i.e. create symbolic links to system libraries as replacements for Sage's versions, e.g. `libreadline*`)?\n\n`readline` is currently my top candidate, as we already had quite a lot of trouble with it and in fact do use the system's version (without user intervention) instead of building Sage's one on some platforms (including ArchLinux and openSUSE), also depending on the version found.\n\nYou could\n* take a look at your `$SAGE_ROOT/spkg/logs/readline*` to see if just a symbolic link was created (or the system version got *copied*) by Sage,\n* look for symbolic links in `$SAGE_ROOT/local/lib/` that point **outside** the Sage tree, i.e. start with `/lib/...`, `/usr/lib/...` or alike.",
    "created_at": "2011-07-16T18:16:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121380",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>
Replying to [mmasdeu](#comment%3A9):
> Replying to [leif](#comment%3A8):
> > Did you also try `./sage -gp` there?

> 
> Yes, I did.


How does the error look like there? (Sage may somewhat obscure PARI's error message when you use PARI from the Sage prompt, `sage:`.)




> Also, I have tried on a third machine with same results. Do you have access to other Sage installs on different types of machines? It might be that it only affects precompiled versions and 32 bit ones?


Did you also build your *working* PARI/GP versions from scratch / source?




> I am running out of ideas, but since two Sage installs in different math departments (and in different continents, for that matter) give the same error, it shouldn't be hard to find other installations with the same problem...


I'll try to find some where I can reproduce this...

Did you make any changes in `$SAGE_ROOT/local/lib/` (i.e. create symbolic links to system libraries as replacements for Sage's versions, e.g. `libreadline*`)?

`readline` is currently my top candidate, as we already had quite a lot of trouble with it and in fact do use the system's version (without user intervention) instead of building Sage's one on some platforms (including ArchLinux and openSUSE), also depending on the version found.

You could
* take a look at your `$SAGE_ROOT/spkg/logs/readline*` to see if just a symbolic link was created (or the system version got *copied*) by Sage,
* look for symbolic links in `$SAGE_ROOT/local/lib/` that point **outside** the Sage tree, i.e. start with `/lib/...`, `/usr/lib/...` or alike.



---

archive/issue_events_092318.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T18:16:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92318"
}
```



---

archive/issue_events_092319.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T18:16:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92319"
}
```



---

archive/issue_comments_121381.json:
```json
{
    "body": "<a id='comment:11'></a>\nWe so far **couldn't** reproduce the error on\n* ArchLinux (kernel 2.6.39-ARCH) with Sage 4.7 built from source, Core i5 M (x86_64), where the system's version of `libreadline` gets copied,\n* openSUSE 11.4 with Sage 4.7, built on SLES where apparently Sage's `libreadline` was built and is used,\n* (not really surprising) some Ubuntus (x86_64) with Sage 4.7 and 4.7.1.alpha2.\n\nMore to come... ;-)",
    "created_at": "2011-07-16T18:54:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121381",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'></a>
We so far **couldn't** reproduce the error on
* ArchLinux (kernel 2.6.39-ARCH) with Sage 4.7 built from source, Core i5 M (x86_64), where the system's version of `libreadline` gets copied,
* openSUSE 11.4 with Sage 4.7, built on SLES where apparently Sage's `libreadline` was built and is used,
* (not really surprising) some Ubuntus (x86_64) with Sage 4.7 and 4.7.1.alpha2.

More to come... ;-)



---

archive/issue_events_092320.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T19:04:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "rename": {
        "from": "PARI qfminim bug on 32-bit Linux (Sage 4.7)",
        "to": "PARI qfminim bug on some Linux installations (Sage 4.7 and 4.6.2)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92320"
}
```



---

archive/issue_comments_121382.json:
```json
{
    "body": "<a id='comment:12'></a>\nP.S.: What operating system / distribution does the Xeon run?",
    "created_at": "2011-07-16T19:04:32Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121382",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:12'></a>
P.S.: What operating system / distribution does the Xeon run?



---

archive/issue_comments_121383.json:
```json
{
    "body": "**Changing keywords** from \"pari, qfminim, ZM_lll, large matrix\" to \"pari, qfminim, ZM_lll, large matrix, ArchLinux, PARI/GP\".",
    "created_at": "2011-07-16T19:04:32Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121383",
    "user": "https://github.com/nexttime"
}
```

**Changing keywords** from "pari, qfminim, ZM_lll, large matrix" to "pari, qfminim, ZM_lll, large matrix, ArchLinux, PARI/GP".



---

archive/issue_events_092321.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T19:04:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "component: interfaces",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92321"
}
```



---

archive/issue_events_092322.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T19:04:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "component: packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92322"
}
```



---

archive/issue_events_092323.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2011-07-16T19:36:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92323"
}
```



---

archive/issue_events_092324.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2011-07-16T19:36:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92324"
}
```



---

archive/issue_comments_121384.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [leif](#comment%3A10):\n\n> How does the error look like there? (Sage may somewhat obscure PARI's error message when you use PARI from the Sage prompt, `sage:`.)\n\n\n? A\n%2 = \n[32982266684193100 1368614777139719 224591013270052693 276460184982223238]\n\n[1368614777139719 56791380087354 9319512049770279 11471848267545007]\n\n[224591013270052693 9319512049770279 1529340971891522140 1882541434053596358]\n\n[276460184982223238 11471848267545007 1882541434053596358 2317313350044091414]\n\n? qfminim(A,2,0)\n  ***   at top-level: qfminim(A,2,0)\n  ***                 ^--------------\n  *** qfminim: bug in ZM_lll, please report\n  ***   Break loop: type 'break' to go back to GP\n\n\n> \n> Did you also build your *working* PARI/GP versions from scratch / source?\n> \n\n\nYes. For the stable version I used the PKGBUILDs from the ArchUserRepo, which grabs the code and build it. For the devel version, I downloaded myself the source from the PARI website and compiled it.\n\n> I'll try to find some where I can reproduce this...\n> \n> Did you make any changes in `$SAGE_ROOT/local/lib/` (i.e. create symbolic links to system libraries as replacements for Sage's versions, e.g. `libreadline*`)?\n\n\nWhen I compiled it in my machine I there was an issue with libppl. I followed some advice from the web and linked it to my system version.\n\n\n> You could\n> * take a look at your `$SAGE_ROOT/spkg/logs/readline*` to see if just a symbolic link was created (or the system version got *copied*) by Sage,\n> * look for symbolic links in `$SAGE_ROOT/local/lib/` that point **outside** the Sage tree, i.e. start with `/lib/...`, `/usr/lib/...` or alike.\n\n\nOK, apart from libppl (which points to the system version), the readline lib seems to be also copied from my system. This library has been updated afterwards (ArchLinus is rolling release, right?). I have just trying copying again the library from my system over there, but I still get the same error.\n\nI noticed in the log file you mentioned this error at the end of the file. Hopefully it's harmless...\n\n```\n...\nMaking Sage/Python scripts relocatable...\n  File \"./sage-make_relative\", line 5\n    print \"Making script relocatable\"\n                                    ^\nSyntaxError: invalid syntax\n```",
    "created_at": "2011-07-16T19:36:03Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121384",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:13'></a>
Replying to [leif](#comment%3A10):

> How does the error look like there? (Sage may somewhat obscure PARI's error message when you use PARI from the Sage prompt, `sage:`.)


? A
%2 = 
[32982266684193100 1368614777139719 224591013270052693 276460184982223238]

[1368614777139719 56791380087354 9319512049770279 11471848267545007]

[224591013270052693 9319512049770279 1529340971891522140 1882541434053596358]

[276460184982223238 11471848267545007 1882541434053596358 2317313350044091414]

? qfminim(A,2,0)
  ***   at top-level: qfminim(A,2,0)
  ***                 ^--------------
  *** qfminim: bug in ZM_lll, please report
  ***   Break loop: type 'break' to go back to GP


> 
> Did you also build your *working* PARI/GP versions from scratch / source?
> 


Yes. For the stable version I used the PKGBUILDs from the ArchUserRepo, which grabs the code and build it. For the devel version, I downloaded myself the source from the PARI website and compiled it.

> I'll try to find some where I can reproduce this...
> 
> Did you make any changes in `$SAGE_ROOT/local/lib/` (i.e. create symbolic links to system libraries as replacements for Sage's versions, e.g. `libreadline*`)?


When I compiled it in my machine I there was an issue with libppl. I followed some advice from the web and linked it to my system version.


> You could
> * take a look at your `$SAGE_ROOT/spkg/logs/readline*` to see if just a symbolic link was created (or the system version got *copied*) by Sage,
> * look for symbolic links in `$SAGE_ROOT/local/lib/` that point **outside** the Sage tree, i.e. start with `/lib/...`, `/usr/lib/...` or alike.


OK, apart from libppl (which points to the system version), the readline lib seems to be also copied from my system. This library has been updated afterwards (ArchLinus is rolling release, right?). I have just trying copying again the library from my system over there, but I still get the same error.

I noticed in the log file you mentioned this error at the end of the file. Hopefully it's harmless...

```
...
Making Sage/Python scripts relocatable...
  File "./sage-make_relative", line 5
    print "Making script relocatable"
                                    ^
SyntaxError: invalid syntax
```



---

archive/issue_comments_121385.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [leif](#comment%3A12):\n> P.S.: What operating system / distribution does the Xeon run?\n\n\nIt's running Linux, but I once asked the sysadmin in my department about the distribution, and he told me that everything is compiled from scratch. So I guess the \"distro\" would be LFS :).\n\nmarc.\n\nPS: thanks for the help and promptness in tracking this down, I really appreciate it!",
    "created_at": "2011-07-16T19:38:25Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121385",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:14'></a>
Replying to [leif](#comment%3A12):
> P.S.: What operating system / distribution does the Xeon run?


It's running Linux, but I once asked the sysadmin in my department about the distribution, and he told me that everything is compiled from scratch. So I guess the "distro" would be LFS :).

marc.

PS: thanks for the help and promptness in tracking this down, I really appreciate it!



---

archive/issue_events_092325.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T20:09:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92325"
}
```



---

archive/issue_events_092326.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-16T20:09:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92326"
}
```



---

archive/issue_comments_121386.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Success! ** ;-)\n\nI could reproduce the error on Ubuntu 9.04 x86 (Pentium4 Prescott) with Sage 4.7, both from the Sage prompt and in GP (`sage -gp`), which raises the question if the Sage version running on the Xeon was perhaps also built as a 32-bit application.\n\nGuess it'll take some time to track this down though.",
    "created_at": "2011-07-16T20:09:05Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121386",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'></a>
**Success! ** ;-)

I could reproduce the error on Ubuntu 9.04 x86 (Pentium4 Prescott) with Sage 4.7, both from the Sage prompt and in GP (`sage -gp`), which raises the question if the Sage version running on the Xeon was perhaps also built as a 32-bit application.

Guess it'll take some time to track this down though.



---

archive/issue_comments_121387.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [leif](#comment%3A15):\n> **Success! ** ;-)\n> \n> I could reproduce the error on Ubuntu 9.04 x86 (Pentium4 Prescott) with Sage 4.7, both from the Sage prompt and in GP (`sage -gp`), which raises the question if the Sage version running on the Xeon was perhaps also built as a 32-bit application.\n\n\nYes, I checked and even in the Xeon machine Sage was built for i686! Thanks, and hope that this gets resolved soon...",
    "created_at": "2011-07-16T20:24:23Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121387",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:16'></a>
Replying to [leif](#comment%3A15):
> **Success! ** ;-)
> 
> I could reproduce the error on Ubuntu 9.04 x86 (Pentium4 Prescott) with Sage 4.7, both from the Sage prompt and in GP (`sage -gp`), which raises the question if the Sage version running on the Xeon was perhaps also built as a 32-bit application.


Yes, I checked and even in the Xeon machine Sage was built for i686! Thanks, and hope that this gets resolved soon...



---

archive/issue_events_092327.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-17T04:50:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92327"
}
```



---

archive/issue_events_092328.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-17T04:50:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92328"
}
```



---

archive/issue_events_092329.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-17T04:50:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92329"
}
```



---

archive/issue_events_092330.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-17T04:50:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92330"
}
```



---

archive/issue_comments_121388.json:
```json
{
    "body": "**Upstream:** Fixed upstream, but not in a stable release.",
    "created_at": "2011-07-17T04:50:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121388",
    "user": "https://github.com/nexttime"
}
```

**Upstream:** Fixed upstream, but not in a stable release.



---

archive/issue_comments_121389.json:
```json
{
    "body": "<a id='comment:17'></a>\nI've made an spkg that fixes the (btw. upstream) bug.\n\nPlease test & report back / review!",
    "created_at": "2011-07-17T04:50:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121389",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>
I've made an spkg that fixes the (btw. upstream) bug.

Please test & report back / review!



---

archive/issue_comments_121390.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,3 +22,23 @@\n ```\n \n I have found other examples of (also large) matrices where pari fails similarly. I have tried this example with standalone pari (both stable and developement versions) and it returns with no problem, so I guess it is a problem with the interface Sage-PARI.\n+\n+---\n+\n+This is an instance of [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154).\n+\n+---\n+\n+**New spkg: http://spkg-upload.googlecode.com/files/pari-2.4.3.alpha.p8.spkg**\n+\n+**md5sum: `4ad98aabafa69cf5b5aab6e05956b472  pari-2.4.3.alpha.p8.spkg`**\n+\n+(This spkg is based on the p7 from #11605, which at the moment still needs review.)\n+\n+\n+### pari-2.4.3.alpha.p8 (Leif Leonhardy, July 17th, 2011)\n+* #11604: Apply patch for PARI bug 1154 (src/basemath/lll.c only,\n+  from svn-12825). This fixes \"rare\" errors in ZM_lll_norms() that\n+  apparently only occur on 32-bit systems, and don't show up in\n+  any doctest nor PARI's test suite.\n+\n``````\n",
    "created_at": "2011-07-17T04:50:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121390",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,3 +22,23 @@
 ```
 
 I have found other examples of (also large) matrices where pari fails similarly. I have tried this example with standalone pari (both stable and developement versions) and it returns with no problem, so I guess it is a problem with the interface Sage-PARI.
+
+---
+
+This is an instance of [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154).
+
+---
+
+**New spkg: http://spkg-upload.googlecode.com/files/pari-2.4.3.alpha.p8.spkg**
+
+**md5sum: `4ad98aabafa69cf5b5aab6e05956b472  pari-2.4.3.alpha.p8.spkg`**
+
+(This spkg is based on the p7 from #11605, which at the moment still needs review.)
+
+
+### pari-2.4.3.alpha.p8 (Leif Leonhardy, July 17th, 2011)
+* #11604: Apply patch for PARI bug 1154 (src/basemath/lll.c only,
+  from svn-12825). This fixes "rare" errors in ZM_lll_norms() that
+  apparently only occur on 32-bit systems, and don't show up in
+  any doctest nor PARI's test suite.
+
``````




---

archive/issue_comments_121391.json:
```json
{
    "body": "**Author:** Leif Leonhardy",
    "created_at": "2011-07-17T04:50:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121391",
    "user": "https://github.com/nexttime"
}
```

**Author:** Leif Leonhardy



---

archive/issue_events_092331.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-17T04:50:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "rename": {
        "from": "PARI qfminim bug on some Linux installations (Sage 4.7 and 4.6.2)",
        "to": "PARI qfminim bug on 32-bit systems (Sage 4.7 and 4.6.2)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92331"
}
```



---

archive/issue_comments_121392.json:
```json
{
    "body": "Diff between the p7 (#11605) and the p8. For reference / review.",
    "created_at": "2011-07-17T05:01:00Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121392",
    "user": "https://github.com/nexttime"
}
```

Diff between the p7 (#11605) and the p8. For reference / review.



---

archive/issue_events_092332.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2011-07-17T07:59:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92332"
}
```



---

archive/issue_events_092333.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2011-07-17T07:59:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92333"
}
```



---

archive/attachments_015358.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "pari-2.4.3.alpha.p7-p8.diff",
    "asset_url": "tarball://root/attachments/ticket11604/pari-2.4.3.alpha.p7-p8.diff",
    "created_at": "2011-07-17T07:59:53Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket11604/pari-2.4.3.alpha.p7-p8.diff",
    "user": "https://github.com/mmasdeu"
}
```



---

archive/issue_comments_121393.json:
```json
{
    "body": "<a id='comment:18'></a>\nAttachment [pari-2.4.3.alpha.p7-p8.diff](https://github.com/sagemath/sage/files/ticket11604/pari-2.4.3.alpha.p7-p8.diff) by @mmasdeu created at 2011-07-17 07:59:53\n\nWorked for me. I will do more tests that used to fail and see if it is solid...\n\nThanks!",
    "created_at": "2011-07-17T07:59:53Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121393",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:18'></a>
Attachment [pari-2.4.3.alpha.p7-p8.diff](https://github.com/sagemath/sage/files/ticket11604/pari-2.4.3.alpha.p7-p8.diff) by @mmasdeu created at 2011-07-17 07:59:53

Worked for me. I will do more tests that used to fail and see if it is solid...

Thanks!



---

archive/issue_comments_121394.json:
```json
{
    "body": "<a id='comment:19'></a>\nSo far the bug seems fixed by the above spkg (I didn't apply the patch you attached).",
    "created_at": "2011-07-17T10:41:32Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121394",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:19'></a>
So far the bug seems fixed by the above spkg (I didn't apply the patch you attached).



---

archive/issue_comments_121395.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [mmasdeu](#comment%3A19):\n> So far the bug seems fixed by the above spkg (I didn't apply the patch you attached).\n\n\nAll changes are to the spkg; the diff is just for documentation purposes.\n\nYou can add yourself to http://trac.sagemath.org/sage_trac/wiki#AccountNamesmappedtoRealNames, and put your (real / full) name into the *Reviewer(s)* field of the ticket.",
    "created_at": "2011-07-17T15:02:07Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121395",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:20'></a>
Replying to [mmasdeu](#comment%3A19):
> So far the bug seems fixed by the above spkg (I didn't apply the patch you attached).


All changes are to the spkg; the diff is just for documentation purposes.

You can add yourself to http://trac.sagemath.org/sage_trac/wiki#AccountNamesmappedtoRealNames, and put your (real / full) name into the *Reviewer(s)* field of the ticket.



---

archive/issue_comments_121396.json:
```json
{
    "body": "<a id='comment:21'></a>\nThere are too many PARI spkgs floating around, I suggest this patch simply gets added to #11130.",
    "created_at": "2011-07-17T15:30:16Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121396",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
There are too many PARI spkgs floating around, I suggest this patch simply gets added to #11130.



---

archive/issue_events_092334.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-17T15:30:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92334"
}
```



---

archive/issue_events_092335.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-17T15:30:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "invalid",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92335"
}
```



---

archive/issue_comments_121397.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jdemeyer](#comment%3A21):\n> There are too many PARI spkgs floating around, I suggest this patch simply gets added to #11130.\n\n\n#11130 seems far from ready to get merged, and it will be based on svn revision 13228, such that this PARI bug fix (from svn 12825) will be included anyway.\n\nUntil we have a working PARI 2.5.0.whatever, I think we should still add a few fixes to our more stable 2.4.3 series, to get merged in reasonable time.\n\n---\n\nP.S.: I've tested the p8 here on Ubuntu 9.04 x86 (Pentium4 Prescott) and Ubuntu 10.04 x86_64 (Core2), Sage 4.7 and 4.7.1.alpha2 respectively, running PARI's test suite as well as a full `ptestlong` on both.\n\nAs far as I can see, there've also been no follow-up reports regarding this change (of January 14th) on the PARI site.",
    "created_at": "2011-07-17T16:16:40Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121397",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:22'></a>
Replying to [jdemeyer](#comment%3A21):
> There are too many PARI spkgs floating around, I suggest this patch simply gets added to #11130.


#11130 seems far from ready to get merged, and it will be based on svn revision 13228, such that this PARI bug fix (from svn 12825) will be included anyway.

Until we have a working PARI 2.5.0.whatever, I think we should still add a few fixes to our more stable 2.4.3 series, to get merged in reasonable time.

---

P.S.: I've tested the p8 here on Ubuntu 9.04 x86 (Pentium4 Prescott) and Ubuntu 10.04 x86_64 (Core2), Sage 4.7 and 4.7.1.alpha2 respectively, running PARI's test suite as well as a full `ptestlong` on both.

As far as I can see, there've also been no follow-up reports regarding this change (of January 14th) on the PARI site.



---

archive/issue_comments_121398.json:
```json
{
    "body": "**Reviewer:** Marc Masdeu",
    "created_at": "2011-07-17T16:48:35Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121398",
    "user": "https://github.com/mmasdeu"
}
```

**Reviewer:** Marc Masdeu



---

archive/issue_comments_121399.json:
```json
{
    "body": "<a id='comment:24'></a>\nFor the record, a bit more readable, this is the patch for PARI bug 1154:\n\n```patch\n--- src/basemath/lll.c\t2011-07-17 02:01:36.000000000 +0200\n+++ src/basemath/lll.c\t2011-07-17 01:35:55.000000000 +0200\n@@ -1,4 +1,4 @@\n-/* $Id: lll.c 12380 2010-06-03 12:32:58Z bill $\n+/* $Id: lll.c 12825 2011-01-14 23:09:00Z bill $\n \n Copyright (C) 2008  The PARI group.\n \n@@ -533,36 +533,25 @@\n   return U? U: B;\n }\n \n-static long\n-good_prec(long d, double delta, double eta)\n-{\n-  double t = eta+1, rho = t*t / (delta - eta*eta);\n-  long goodprec = (ulong) (7.0 + 0.2*d + d*log2(rho)\n-      +  2.0 * log ((double) d) - log2( (eta-0.5)*(1.0-delta) ));\n-  return nbits2prec(goodprec);\n-}\n-\n /* Assume x a ZM, if ptB != NULL, set it to Gram-Schmidt (squared) norms */\n GEN\n ZM_lll_norms(GEN x, double DELTA, long flag, GEN *B)\n {\n   pari_sp ltop = avma;\n   const double ETA = 0.51;\n-  long p,prec, d, n = lg(x)-1;\n+  long p, d, n = lg(x)-1;\n   GEN U;\n   if (n <= 1) return lll_trivial(x, flag);\n   d = lg(gel(x,1))-1;\n-  prec = good_prec(d,DELTA,ETA);\n   x = RgM_shallowcopy(x);\n   U = (flag & LLL_INPLACE)? NULL: matid(n);\n-  for (p = minss(3,prec); p <= prec; p++)\n+  for (p = 3; ; p++)\n   {\n     GEN m = fplll(&x, &U, B, DELTA, ETA, flag, p);\n     if (m) return m;\n     gerepileall(ltop, U? 2: 1, &x, &U);\n   }\n-  pari_err(bugparier,\"ZM_lll\");\n-  return NULL;\n+  return NULL; /* NOT REACHED */\n }\n \n /********************************************************************/\n```",
    "created_at": "2011-07-17T16:51:16Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121399",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:24'></a>
For the record, a bit more readable, this is the patch for PARI bug 1154:

```patch
--- src/basemath/lll.c	2011-07-17 02:01:36.000000000 +0200
+++ src/basemath/lll.c	2011-07-17 01:35:55.000000000 +0200
@@ -1,4 +1,4 @@
-/* $Id: lll.c 12380 2010-06-03 12:32:58Z bill $
+/* $Id: lll.c 12825 2011-01-14 23:09:00Z bill $
 
 Copyright (C) 2008  The PARI group.
 
@@ -533,36 +533,25 @@
   return U? U: B;
 }
 
-static long
-good_prec(long d, double delta, double eta)
-{
-  double t = eta+1, rho = t*t / (delta - eta*eta);
-  long goodprec = (ulong) (7.0 + 0.2*d + d*log2(rho)
-      +  2.0 * log ((double) d) - log2( (eta-0.5)*(1.0-delta) ));
-  return nbits2prec(goodprec);
-}
-
 /* Assume x a ZM, if ptB != NULL, set it to Gram-Schmidt (squared) norms */
 GEN
 ZM_lll_norms(GEN x, double DELTA, long flag, GEN *B)
 {
   pari_sp ltop = avma;
   const double ETA = 0.51;
-  long p,prec, d, n = lg(x)-1;
+  long p, d, n = lg(x)-1;
   GEN U;
   if (n <= 1) return lll_trivial(x, flag);
   d = lg(gel(x,1))-1;
-  prec = good_prec(d,DELTA,ETA);
   x = RgM_shallowcopy(x);
   U = (flag & LLL_INPLACE)? NULL: matid(n);
-  for (p = minss(3,prec); p <= prec; p++)
+  for (p = 3; ; p++)
   {
     GEN m = fplll(&x, &U, B, DELTA, ETA, flag, p);
     if (m) return m;
     gerepileall(ltop, U? 2: 1, &x, &U);
   }
-  pari_err(bugparier,"ZM_lll");
-  return NULL;
+  return NULL; /* NOT REACHED */
 }
 
 /********************************************************************/
```



---

archive/issue_comments_121400.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, but not in a stable release.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2011-07-19T09:45:19Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121400",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Fixed upstream, but not in a stable release." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_121401.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,24 +21,4 @@\n \n ```\n \n-I have found other examples of (also large) matrices where pari fails similarly. I have tried this example with standalone pari (both stable and developement versions) and it returns with no problem, so I guess it is a problem with the interface Sage-PARI.\n-\n----\n-\n-This is an instance of [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154).\n-\n----\n-\n-**New spkg: http://spkg-upload.googlecode.com/files/pari-2.4.3.alpha.p8.spkg**\n-\n-**md5sum: `4ad98aabafa69cf5b5aab6e05956b472  pari-2.4.3.alpha.p8.spkg`**\n-\n-(This spkg is based on the p7 from #11605, which at the moment still needs review.)\n-\n-\n-### pari-2.4.3.alpha.p8 (Leif Leonhardy, July 17th, 2011)\n-* #11604: Apply patch for PARI bug 1154 (src/basemath/lll.c only,\n-  from svn-12825). This fixes \"rare\" errors in ZM_lll_norms() that\n-  apparently only occur on 32-bit systems, and don't show up in\n-  any doctest nor PARI's test suite.\n-\n+This is fixed by #11130, this ticket simply adds a doctest.\n``````\n",
    "created_at": "2011-07-19T10:06:57Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121401",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,24 +21,4 @@
 
 ```
 
-I have found other examples of (also large) matrices where pari fails similarly. I have tried this example with standalone pari (both stable and developement versions) and it returns with no problem, so I guess it is a problem with the interface Sage-PARI.
-
----
-
-This is an instance of [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154).
-
----
-
-**New spkg: http://spkg-upload.googlecode.com/files/pari-2.4.3.alpha.p8.spkg**
-
-**md5sum: `4ad98aabafa69cf5b5aab6e05956b472  pari-2.4.3.alpha.p8.spkg`**
-
-(This spkg is based on the p7 from #11605, which at the moment still needs review.)
-
-
-### pari-2.4.3.alpha.p8 (Leif Leonhardy, July 17th, 2011)
-* #11604: Apply patch for PARI bug 1154 (src/basemath/lll.c only,
-  from svn-12825). This fixes "rare" errors in ZM_lll_norms() that
-  apparently only occur on 32-bit systems, and don't show up in
-  any doctest nor PARI's test suite.
-
+This is fixed by #11130, this ticket simply adds a doctest.
``````




---

archive/issue_events_092336.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T10:06:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92336"
}
```



---

archive/issue_events_092337.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T10:06:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92337"
}
```



---

archive/issue_comments_121402.json:
```json
{
    "body": "**Changing author** from \"Leif Leonhardy\" to \"Jeroen Demeyer\".",
    "created_at": "2011-07-19T10:06:57Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121402",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Leif Leonhardy" to "Jeroen Demeyer".



---

archive/issue_events_092338.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T10:06:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92338"
}
```



---

archive/issue_comments_121403.json:
```json
{
    "body": "**Changing reviewer** from \"Marc Masdeu\" to \"\".",
    "created_at": "2011-07-19T10:06:57Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121403",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Marc Masdeu" to "".



---

archive/issue_comments_121404.json:
```json
{
    "body": "**Dependencies:** #11321, #11130",
    "created_at": "2011-07-19T10:06:57Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121404",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #11321, #11130



---

archive/attachments_015359.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "11604_doctest.patch",
    "asset_url": "tarball://root/attachments/ticket11604/11604_doctest.patch",
    "created_at": "2011-07-19T10:07:34Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket11604/11604_doctest.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_121405.json:
```json
{
    "body": "Attachment [11604_doctest.patch](https://github.com/sagemath/sage/files/ticket11604/11604_doctest.patch) by @jdemeyer created at 2011-07-19 10:07:34\n\nDoctest for the bug",
    "created_at": "2011-07-19T10:07:34Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121405",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [11604_doctest.patch](https://github.com/sagemath/sage/files/ticket11604/11604_doctest.patch) by @jdemeyer created at 2011-07-19 10:07:34

Doctest for the bug



---

archive/issue_events_092339.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T10:07:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92339"
}
```



---

archive/issue_events_092340.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T10:07:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92340"
}
```



---

archive/issue_comments_121406.json:
```json
{
    "body": "<a id='comment:28'></a>\nFor the impatient: A new spkg fixing this for Sage versions 4.6.x, 4.7 and 4.7.1 is still available at http://spkg-upload.googlecode.com/files/pari-2.4.3.alpha.p8.spkg .",
    "created_at": "2011-07-19T15:20:10Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121406",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:28'></a>
For the impatient: A new spkg fixing this for Sage versions 4.6.x, 4.7 and 4.7.1 is still available at http://spkg-upload.googlecode.com/files/pari-2.4.3.alpha.p8.spkg .



---

archive/issue_comments_121407.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,4 +21,4 @@\n \n ```\n \n-This is fixed by #11130, this ticket simply adds a doctest.\n+This is [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154), fixed by #11130, this ticket simply adds a doctest.\n``````\n",
    "created_at": "2011-07-19T15:20:10Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121407",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,4 +21,4 @@
 
 ```
 
-This is fixed by #11130, this ticket simply adds a doctest.
+This is [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154), fixed by #11130, this ticket simply adds a doctest.
``````




---

archive/issue_comments_121408.json:
```json
{
    "body": "<a id='comment:29'></a>\nThe attached doctest obviously catches the error reported here.",
    "created_at": "2011-07-19T15:43:25Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121408",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:29'></a>
The attached doctest obviously catches the error reported here.



---

archive/issue_comments_121409.json:
```json
{
    "body": "**Reviewer:** Leif Leonhardy",
    "created_at": "2011-07-19T15:43:25Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121409",
    "user": "https://github.com/nexttime"
}
```

**Reviewer:** Leif Leonhardy



---

archive/issue_events_092341.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-19T15:43:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92341"
}
```



---

archive/issue_events_092342.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-19T15:43:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92342"
}
```



---

archive/issue_events_092343.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-22T12:53:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92343"
}
```



---

archive/issue_events_092344.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-22T12:53:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92344"
}
```



---

archive/issue_events_092345.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-09-28T07:17:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "component: packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92345"
}
```



---

archive/issue_events_092346.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-09-28T07:17:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "component: number theory",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92346"
}
```



---

archive/issue_comments_121410.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,3 +22,5 @@\n ```\n \n This is [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154), fixed by #11130, this ticket simply adds a doctest.\n+\n+**Apply** [attachment:11604_doctest.patch](https://github.com/sagemath/sage/files/ticket11604/11604_doctest.patch)\n``````\n",
    "created_at": "2011-10-06T08:23:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121410",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,3 +22,5 @@
 ```
 
 This is [PARI bug 1154](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1154), fixed by #11130, this ticket simply adds a doctest.
+
+**Apply** [attachment:11604_doctest.patch](https://github.com/sagemath/sage/files/ticket11604/11604_doctest.patch)
``````




---

archive/issue_events_092347.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-06T08:23:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92347"
}
```



---

archive/issue_events_092348.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-06T08:23:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92348"
}
```



---

archive/issue_events_092349.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-22T16:49:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92349"
}
```



---

archive/issue_events_092350.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-22T16:49:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92350"
}
```



---

archive/issue_events_092351.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T09:10:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92351"
}
```



---

archive/issue_events_092352.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T09:10:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92352"
}
```



---

archive/issue_comments_121411.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121411",
    "user": "https://github.com/jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_events_092353.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T16:14:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92353"
}
```



---

archive/issue_comments_121412.json:
```json
{
    "body": "**Merged:** sage-4.8.alpha1",
    "created_at": "2011-11-07T10:11:55Z",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11604#issuecomment-121412",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.8.alpha1



---

archive/issue_events_092354.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-07T10:11:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92354"
}
```



---

archive/issue_events_092355.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-07T10:11:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92355"
}
```



---

archive/issue_events_092356.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-07T10:11:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11604",
    "milestone": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11604#event-92356"
}
```
