# Issue 11575: Update PolyBoRi to release 0.8.0

archive/issues_011403.json:
```json
{
    "assignees": [
        "https://github.com/alexanderdreyer"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nPolyBoRi 0.8 will come with some changes in the interface (in particular the infamous global settings will be removed)\n\nSo there was an extensive alpha phase this time:\nhttps://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/\n\nThe final release is here:\nhttps://sourceforge.net/projects/polybori/files/polybori/0.8.0/\n\n### Current patches/spkg\n* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p1.spkg\n* **Apply** [attachment: polybori-0.8.0.p1.2.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.2.patch.gz)\n\nDepends on #11574\nDepends on #9138\n\nUpstream: **None of the above - read trac for reasoning.**\n\nCC:  @alexanderdreyer @sagetrac-PolyBoRi @kiwifb @burcin @malb @simon-king-jena @jdemeyer\n\nComponent: **packages: standard**\n\nAuthor: **Alexander Dreyer**\n\nReviewer: **Martin Albrecht**\n\nMerged: **sage-5.0.beta1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11575_\n\n",
    "closed_at": "2012-01-18T08:15:32Z",
    "created_at": "2011-07-05T12:47:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update PolyBoRi to release 0.8.0",
    "type": "issue",
    "updated_at": "2012-01-18T08:15:32Z",
    "url": "https://github.com/sagemath/sage/issues/11575",
    "user": "https://github.com/alexanderdreyer"
}
```
<div id="comment:0"></div>

PolyBoRi 0.8 will come with some changes in the interface (in particular the infamous global settings will be removed)

So there was an extensive alpha phase this time:
https://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/

The final release is here:
https://sourceforge.net/projects/polybori/files/polybori/0.8.0/

### Current patches/spkg
* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p1.spkg
* **Apply** [attachment: polybori-0.8.0.p1.2.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.2.patch.gz)

Depends on #11574
Depends on #9138

Upstream: **None of the above - read trac for reasoning.**

CC:  @alexanderdreyer @sagetrac-PolyBoRi @kiwifb @burcin @malb @simon-king-jena @jdemeyer

Component: **packages: standard**

Author: **Alexander Dreyer**

Reviewer: **Martin Albrecht**

Merged: **sage-5.0.beta1**

_Issue created by migration from https://trac.sagemath.org/ticket/11575_





---

archive/issue_events_153288.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-07-05T12:47:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153288"
}
```



---

archive/issue_events_153289.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-07-05T12:47:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153289"
}
```



---

archive/issue_events_153290.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-07-05T12:47:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153290"
}
```



---

archive/issue_events_153291.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-07-05T12:47:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153291"
}
```



---

archive/issue_comments_118393.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2011-07-05T12:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118393",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_118394.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFor the record I have a gentoo ebuild that pulls the trunk of hg on bitbucket. That's how I tested things in the issues I have filled for polybori recently.",
    "created_at": "2011-07-06T00:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118394",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:2" align="right">comment:2</div>

For the record I have a gentoo ebuild that pulls the trunk of hg on bitbucket. That's how I tested things in the issues I have filled for polybori recently.



---

archive/issue_comments_118395.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,8 @@\n \n \n Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.\n+\n+\n+### Current spkg:\n+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p0.spkg\n+\n``````\n",
    "created_at": "2011-07-06T09:43:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118395",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,8 @@
 
 
 Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.
+
+
+### Current spkg:
+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p0.spkg
+
``````




---

archive/issue_comments_118396.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI prepared a first at http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p0.spkg\n\nIt builds, but of course `sage -br` and tests will fail, since the Sage library needs to be adjusted.",
    "created_at": "2011-07-06T09:43:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118396",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:3" align="right">comment:3</div>

I prepared a first at http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p0.spkg

It builds, but of course `sage -br` and tests will fail, since the Sage library needs to be adjusted.



---

archive/issue_comments_118397.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nBuild using my ebuild (you didn't commit anything since you tagged 0.8-alpha so that's what I should have pulled). Used boost-1.42 and m4ri-20100817. Builds and install fine without warnings. Is there a working test suite that can be run? Also I didn't build any docs.",
    "created_at": "2011-07-09T04:08:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118397",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

Build using my ebuild (you didn't commit anything since you tagged 0.8-alpha so that's what I should have pulled). Used boost-1.42 and m4ri-20100817. Builds and install fine without warnings. Is there a working test suite that can be run? Also I didn't build any docs.



---

archive/issue_comments_118398.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHi Francois! I gave to access to polybori-testsuite. If you do use it via the cython interface from Sage's Library (*not* the original PyPolyBoRi,so). I need to update this, but it's not that easy, because I have to c++-ify some classes without defautl constructor.",
    "created_at": "2011-07-09T20:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118398",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Hi Francois! I gave to access to polybori-testsuite. If you do use it via the cython interface from Sage's Library (*not* the original PyPolyBoRi,so). I need to update this, but it's not that easy, because I have to c++-ify some classes without defautl constructor.



---

archive/issue_comments_118399.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHi Alexander, thanks for giving me access. I think it is best to test it separate from sage at first, especially when you consider that installing it will break sage. I hope that it can work that way.",
    "created_at": "2011-07-10T00:30:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118399",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>

Hi Alexander, thanks for giving me access. I think it is best to test it separate from sage at first, especially when you consider that installing it will break sage. I hope that it can work that way.



---

archive/issue_comments_118400.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI just had a thought. I should really try this against m4ri-20110715 (#11574). I suppose this version of polybori is ready for it.",
    "created_at": "2011-07-10T04:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118400",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

I just had a thought. I should really try this against m4ri-20110715 (#11574). I suppose this version of polybori is ready for it.



---

archive/issue_comments_118401.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@kiwifb](#comment%3A7):\n> I just had a thought. I should really try this against m4ri-20110715 (#11574). I suppose this version of polybori is ready for it.\n\nIt should, but I haven't had time for testing the most recent version yet.",
    "created_at": "2011-07-10T19:40:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118401",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@kiwifb](#comment%3A7):
> I just had a thought. I should really try this against m4ri-20110715 (#11574). I suppose this version of polybori is ready for it.

It should, but I haven't had time for testing the most recent version yet.



---

archive/issue_comments_118402.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@alexanderdreyer](#comment%3A8):\n> Replying to [@kiwifb](#comment%3A7):\n> > I just had a thought. I should really try this against m4ri-20110715 (#11574). I suppose this version of polybori is ready for it.\n> \n> It should, but I haven't had time for testing the most recent version yet.\n\nI'll have to wait until the sage server are fully back on, m4ri tarball seem to be stored there. That or I clone m4ri tip from bitbucket, which may be an idea since I already to that for polybori.",
    "created_at": "2011-07-10T19:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118402",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@alexanderdreyer](#comment%3A8):
> Replying to [@kiwifb](#comment%3A7):
> > I just had a thought. I should really try this against m4ri-20110715 (#11574). I suppose this version of polybori is ready for it.
> 
> It should, but I haven't had time for testing the most recent version yet.

I'll have to wait until the sage server are fully back on, m4ri tarball seem to be stored there. That or I clone m4ri tip from bitbucket, which may be an idea since I already to that for polybori.



---

archive/issue_comments_118403.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nPulled m4ri tip. Polybori-0.7.1 compiles against it, no problem. I'll check 0.8.alpha a bit later and then I'll see about that test suite.",
    "created_at": "2011-07-11T04:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118403",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

Pulled m4ri tip. Polybori-0.7.1 compiles against it, no problem. I'll check 0.8.alpha a bit later and then I'll see about that test suite.



---

archive/issue_comments_118404.json:
```json
{
    "body": "Attachment: **[polybori-0.8.0alpha.p1.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz)**\n\nFirst working patch for supporting PolyBoRi 0.8 by the Sage-lib",
    "created_at": "2011-07-15T22:03:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118404",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[polybori-0.8.0alpha.p1.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz)**

First working patch for supporting PolyBoRi 0.8 by the Sage-lib



---

archive/issue_comments_118405.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,5 +8,5 @@\n \n \n ### Current spkg:\n-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p0.spkg\n+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p1.spkg\n \n``````\n",
    "created_at": "2011-07-15T22:07:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118405",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,5 +8,5 @@
 
 
 ### Current spkg:
-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p0.spkg
+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p1.spkg
 
``````




---

archive/issue_events_153292.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-07-15T22:07:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153292"
}
```



---

archive/issue_comments_118406.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHere's now the first patch for making the Sage-lib supporting PolyBoRi 0.8:\nhttps://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz\n\nI needs to workaround missing default generators of PolyBoRi-functions by reintroducing then (just for now: It should be using the cppclass construct) . Therefore, we do need another patched spkg: http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p1.spkg",
    "created_at": "2011-07-15T22:07:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118406",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Here's now the first patch for making the Sage-lib supporting PolyBoRi 0.8:
https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz

I needs to workaround missing default generators of PolyBoRi-functions by reintroducing then (just for now: It should be using the cppclass construct) . Therefore, we do need another patched spkg: http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p1.spkg



---

archive/issue_comments_118407.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,8 @@\n \n Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.\n \n+### Current Sage patch\n+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz\n \n ### Current spkg:\n * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p1.spkg\n``````\n",
    "created_at": "2011-07-15T22:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118407",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,8 @@
 
 Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.
 
+### Current Sage patch
+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz
 
 ### Current spkg:
 * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p1.spkg
``````




---

archive/issue_comments_118408.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI have done a build of your latest tip from a couple of days ago and it was fine. I still have to get organized to do the testing. Nice to have a patch for sage but I am afraid it will need to be rebased now that #11377 is in. Please do not use SAGE_ROOT in module_list.py. In your case SAGE_INC will be enough.",
    "created_at": "2011-07-15T22:21:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118408",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

I have done a build of your latest tip from a couple of days ago and it was fine. I still have to get organized to do the testing. Nice to have a patch for sage but I am afraid it will need to be rebased now that #11377 is in. Please do not use SAGE_ROOT in module_list.py. In your case SAGE_INC will be enough.



---

archive/issue_comments_118409.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@kiwifb](#comment%3A13):\n> I have done a build of your latest tip from a couple of days ago and it was fine. I still have to get organized to do the testing. Nice to have a patch for sage but I am afraid it will need to be rebased now that #11377 is in. Please do not use SAGE_ROOT in module_list.py. In your case SAGE_INC will be enough.\n\nNo problem, it's still work to do  anyway, since the c++-ification not really done yet. (I just mis-clicked, it should read \"NEEDS_WORKS\".)\n\nPS: So that crash-issue on gentoo-prefix got away with 0.8-alpha?",
    "created_at": "2011-07-15T22:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118409",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@kiwifb](#comment%3A13):
> I have done a build of your latest tip from a couple of days ago and it was fine. I still have to get organized to do the testing. Nice to have a patch for sage but I am afraid it will need to be rebased now that #11377 is in. Please do not use SAGE_ROOT in module_list.py. In your case SAGE_INC will be enough.

No problem, it's still work to do  anyway, since the c++-ification not really done yet. (I just mis-clicked, it should read "NEEDS_WORKS".)

PS: So that crash-issue on gentoo-prefix got away with 0.8-alpha?



---

archive/issue_comments_118410.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@alexanderdreyer](#comment%3A14):\n> Replying to [@kiwifb](#comment%3A13):\n> > I have done a build of your latest tip from a couple of days ago and it was fine. I still have to get organized to do the testing. Nice to have a patch for sage but I am afraid it will need to be rebased now that #11377 is in. Please do not use SAGE_ROOT in module_list.py. In your case SAGE_INC will be enough.\n> \n> \n> No problem, it's still work to do  anyway, since the c++-ification not really done yet. (I just mis-clicked, it should read \"NEEDS_WORKS\".)\n> \n> PS: So that crash-issue on gentoo-prefix got away with 0.8-alpha?\n\nDon't know yet. I have to build this on OS X and apply the patch. It may very well not happen until Monday local time (it's Saturday morning here) since this is one of my work machine.",
    "created_at": "2011-07-15T23:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118410",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@alexanderdreyer](#comment%3A14):
> Replying to [@kiwifb](#comment%3A13):
> > I have done a build of your latest tip from a couple of days ago and it was fine. I still have to get organized to do the testing. Nice to have a patch for sage but I am afraid it will need to be rebased now that #11377 is in. Please do not use SAGE_ROOT in module_list.py. In your case SAGE_INC will be enough.
> 
> 
> No problem, it's still work to do  anyway, since the c++-ification not really done yet. (I just mis-clicked, it should read "NEEDS_WORKS".)
> 
> PS: So that crash-issue on gentoo-prefix got away with 0.8-alpha?

Don't know yet. I have to build this on OS X and apply the patch. It may very well not happen until Monday local time (it's Saturday morning here) since this is one of my work machine.



---

archive/issue_comments_118411.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n> Don't know yet. I have to build this on OS X and apply the patch. It may very well not happen until Monday local time (it's Saturday morning here) since this is one of my work machine.\n\nHere, too (1:00). \n\nIn case this still fails: Can you give the plain PolyBoRi source from bitbucket a try? I had to patch the recent spkg to work around some cython vs. c++ issue.",
    "created_at": "2011-07-15T23:21:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118411",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:16" align="right">comment:16</div>

> Don't know yet. I have to build this on OS X and apply the patch. It may very well not happen until Monday local time (it's Saturday morning here) since this is one of my work machine.

Here, too (1:00). 

In case this still fails: Can you give the plain PolyBoRi source from bitbucket a try? I had to patch the recent spkg to work around some cython vs. c++ issue.



---

archive/issue_events_153293.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-07-15T23:21:35Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "subject": "https://github.com/alexanderdreyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153293"
}
```



---

archive/issue_comments_118412.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@alexanderdreyer](#comment%3A16):\n> > Don't know yet. I have to build this on OS X and apply the patch. It may very well not happen until Monday local time (it's Saturday morning here) since this is one of my work machine.\n> \n> \n> Here, too (1:00). \n> \n> In case this still fails: Can you give the plain PolyBoRi source from bitbucket a try? I had to patch the recent spkg to work around some cython vs. c++ issue.\n\n\nNot quite lunch time here. I'll make a note to try both. The nature of sage-on-gentoo is that the plain sources will be used over spkg unless the spkg is the only thing that exists or works. We still patch stuff if it is not too big (OK sometimes even when it is big).",
    "created_at": "2011-07-15T23:28:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118412",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@alexanderdreyer](#comment%3A16):
> > Don't know yet. I have to build this on OS X and apply the patch. It may very well not happen until Monday local time (it's Saturday morning here) since this is one of my work machine.
> 
> 
> Here, too (1:00). 
> 
> In case this still fails: Can you give the plain PolyBoRi source from bitbucket a try? I had to patch the recent spkg to work around some cython vs. c++ issue.


Not quite lunch time here. I'll make a note to try both. The nature of sage-on-gentoo is that the plain sources will be used over spkg unless the spkg is the only thing that exists or works. We still patch stuff if it is not too big (OK sometimes even when it is big).



---

archive/issue_comments_118413.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nPulled the latest mercurial tip. Installed fine on linux. OS X (10.5.8 on x86) didn't like it one bit. I compiled with -ggdb which may have an impact.\n\n```\ni686-apple-darwin9-g++ -o groebner/libpolybori_groebner.dylib -Wl,-dead_strip_dylibs -dynamiclib groebner/src/groebner.os groebner/s\nrc/LiteralFactorization.os groebner/src/LiteralFactorizationIterator.os groebner/src/randomset.os groebner/src/pairs.os groebner/src\n/groebner_alg.os groebner/src/FGLMStrategy.os groebner/src/polynomial_properties.os groebner/src/LexBucket.os groebner/src/dlex4data\n.os groebner/src/dp_asc4data.os groebner/src/lp4data.os groebner/src/nf.os groebner/src/interpolate.os groebner/src/GroebnerStrategy\n.os groebner/src/PairManager.os groebner/src/PolyEntry.os groebner/src/ReductionStrategy.os groebner/src/MatrixMonomialOrderTables.o\ns -L/Users/frb15/Desktop/Gentoo/usr/lib -L/Users/frb15/Desktop/Gentoo/usr/lib/python2.7/config -Lpolybori -Lgroebner -LCudd -lm -lgd\n -lgd -lm4ri -lgd -lgd -lm4ri\nld: warning: directory 'polybori' following -L not found\n```\nThat's the critical bit where it fails. I'll compare with what happens on linux shortly.\n\nFrancois who is a bit snowed in today (some more falling).",
    "created_at": "2011-07-25T04:24:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118413",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

Pulled the latest mercurial tip. Installed fine on linux. OS X (10.5.8 on x86) didn't like it one bit. I compiled with -ggdb which may have an impact.

```
i686-apple-darwin9-g++ -o groebner/libpolybori_groebner.dylib -Wl,-dead_strip_dylibs -dynamiclib groebner/src/groebner.os groebner/s
rc/LiteralFactorization.os groebner/src/LiteralFactorizationIterator.os groebner/src/randomset.os groebner/src/pairs.os groebner/src
/groebner_alg.os groebner/src/FGLMStrategy.os groebner/src/polynomial_properties.os groebner/src/LexBucket.os groebner/src/dlex4data
.os groebner/src/dp_asc4data.os groebner/src/lp4data.os groebner/src/nf.os groebner/src/interpolate.os groebner/src/GroebnerStrategy
.os groebner/src/PairManager.os groebner/src/PolyEntry.os groebner/src/ReductionStrategy.os groebner/src/MatrixMonomialOrderTables.o
s -L/Users/frb15/Desktop/Gentoo/usr/lib -L/Users/frb15/Desktop/Gentoo/usr/lib/python2.7/config -Lpolybori -Lgroebner -LCudd -lm -lgd
 -lgd -lm4ri -lgd -lgd -lm4ri
ld: warning: directory 'polybori' following -L not found
```
That's the critical bit where it fails. I'll compare with what happens on linux shortly.

Francois who is a bit snowed in today (some more falling).



---

archive/issue_events_153294.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-07-25T21:45:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153294"
}
```



---

archive/issue_events_153295.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-07-25T21:45:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153295"
}
```



---

archive/issue_comments_118414.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n@kiwifb Please pull again. There was indeed an outdated directory name given, which was ignored on Linux.",
    "created_at": "2011-07-25T21:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118414",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:20" align="right">comment:20</div>

@kiwifb Please pull again. There was indeed an outdated directory name given, which was ignored on Linux.



---

archive/issue_comments_118415.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@alexanderdreyer](#comment%3A20):\n> @kiwifb Please pull again. There was indeed an outdated directory name given, which was ignored on Linux. \n\nStill some problem making dylib (which in fact we are not using on OS X at the moment) if I read the message properly. I will attach a build log shortly. Will take a few minutes since it is on a remote machine.",
    "created_at": "2011-07-25T22:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118415",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@alexanderdreyer](#comment%3A20):
> @kiwifb Please pull again. There was indeed an outdated directory name given, which was ignored on Linux. 

Still some problem making dylib (which in fact we are not using on OS X at the moment) if I read the message properly. I will attach a build log shortly. Will take a few minutes since it is on a remote machine.



---

archive/issue_comments_118416.json:
```json
{
    "body": "Attachment: **[polybori-9999-20110725.log.bz2.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-9999-20110725.log.bz2.gz)**\n\nbuild log from OS X linking fails when making shared libraries badly.",
    "created_at": "2011-07-25T22:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118416",
    "user": "https://github.com/kiwifb"
}
```

Attachment: **[polybori-9999-20110725.log.bz2.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-9999-20110725.log.bz2.gz)**

build log from OS X linking fails when making shared libraries badly.



---

archive/issue_comments_118417.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nBuild log attached. Linking of the dylib is what fails in a spectacular manner. gcc is 4.2.1, apple sources.",
    "created_at": "2011-07-25T22:36:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118417",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">comment:22</div>

Build log attached. Linking of the dylib is what fails in a spectacular manner. gcc is 4.2.1, apple sources.



---

archive/issue_comments_118418.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe unresolved references are from libpolybori. If seems, that the dynlibs have to resolve all Symbols (unlike '.so's on Linux). I've put another patch to bitbucket, which should cure this issue.",
    "created_at": "2011-07-25T23:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118418",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:23" align="right">comment:23</div>

The unresolved references are from libpolybori. If seems, that the dynlibs have to resolve all Symbols (unlike '.so's on Linux). I've put another patch to bitbucket, which should cure this issue.



---

archive/issue_comments_118419.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@alexanderdreyer](#comment%3A23):\n> The unresolved references are from libpolybori. If seems, that the dynlibs have to resolve all Symbols (unlike '.so's on Linux). I've put another patch to bitbucket, which should cure this issue.\n\nNo effect at all. I have the same output (except for the modification you made on the last linking line).",
    "created_at": "2011-07-25T23:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118419",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@alexanderdreyer](#comment%3A23):
> The unresolved references are from libpolybori. If seems, that the dynlibs have to resolve all Symbols (unlike '.so's on Linux). I've put another patch to bitbucket, which should cure this issue.

No effect at all. I have the same output (except for the modification you made on the last linking line).



---

archive/issue_events_153296.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-07-25T23:46:50Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "subject": "https://github.com/kiwifb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153296"
}
```



---

archive/issue_events_153297.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2011-07-25T23:46:50Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "subject": "https://github.com/kiwifb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153297"
}
```



---

archive/issue_comments_118420.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nwe may have to consider the possibility that  libpolybori/libpolybori.dylib is broken. That would explain why trying to use shared object from polybori doesn't work in sage.",
    "created_at": "2011-07-25T23:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118420",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

we may have to consider the possibility that  libpolybori/libpolybori.dylib is broken. That would explain why trying to use shared object from polybori doesn't work in sage.



---

archive/issue_comments_118421.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nCould you add the following linker option for shared libraries on OS X:\n\n```\n-Wl,-undefined -Wl,dynamic_lookup\n```\nThat may help.",
    "created_at": "2011-07-25T23:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118421",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

Could you add the following linker option for shared libraries on OS X:

```
-Wl,-undefined -Wl,dynamic_lookup
```
That may help.



---

archive/issue_comments_118422.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI should add that it seem to help linking that last library here.",
    "created_at": "2011-07-25T23:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118422",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

I should add that it seem to help linking that last library here.



---

archive/issue_comments_118423.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI added this to the SConstruct, you may pull from bitbucket again. Unfortunately, I do not have access to any OSX machine, so I cannot try.\n\nIf there are more command line flags to add, you may temporarily  given them to scons by adding a file called `custom.py` in the main directory. For instance, for this case `custom.py` is as follows:\n\n```\nSHLINKFLAGS+=\"-Wl,-undefined -Wl,dynamic_lookup\"\n```\n\n(`scons -h` given you the names of the possible variables.)",
    "created_at": "2011-07-26T19:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118423",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:28" align="right">comment:28</div>

I added this to the SConstruct, you may pull from bitbucket again. Unfortunately, I do not have access to any OSX machine, so I cannot try.

If there are more command line flags to add, you may temporarily  given them to scons by adding a file called `custom.py` in the main directory. For instance, for this case `custom.py` is as follows:

```
SHLINKFLAGS+="-Wl,-undefined -Wl,dynamic_lookup"
```

(`scons -h` given you the names of the possible variables.)



---

archive/issue_comments_118424.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYour new SConstruct is there in what I pulled but it appeared not to have made it to the linking line. I am investigating this more closely in case there is something in the set up on my side. Hopefully I'll solve this and deliver a solution to you quickly (but may be not today in your time zone).",
    "created_at": "2011-07-26T20:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118424",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

Your new SConstruct is there in what I pulled but it appeared not to have made it to the linking line. I am investigating this more closely in case there is something in the set up on my side. Hopefully I'll solve this and deliver a solution to you quickly (but may be not today in your time zone).



---

archive/issue_comments_118425.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nMaybe, the loadable module is just wrong here. I removed it (temporarily?), see the newest push at bitbucket.",
    "created_at": "2011-07-26T20:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118425",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:30" align="right">comment:30</div>

Maybe, the loadable module is just wrong here. I removed it (temporarily?), see the newest push at bitbucket.



---

archive/issue_comments_118426.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@alexanderdreyer](#comment%3A30):\n> Maybe, the loadable module is just wrong here. I removed it (temporarily?), see the newest push at bitbucket.\n\nNo effects from that change BUT I was passing\n\n```\nSHLINKFLAGS=\"${LDFLAGS} -dynamiclib\"\n```\nto scons which suppressed the flags you set. From the look of things I think it should be good now on OS X. If you had the flag appended instead of just set it may have worked earlier, not sure how you are supposed to do that in scons....",
    "created_at": "2011-07-26T22:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118426",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@alexanderdreyer](#comment%3A30):
> Maybe, the loadable module is just wrong here. I removed it (temporarily?), see the newest push at bitbucket.

No effects from that change BUT I was passing

```
SHLINKFLAGS="${LDFLAGS} -dynamiclib"
```
to scons which suppressed the flags you set. From the look of things I think it should be good now on OS X. If you had the flag appended instead of just set it may have worked earlier, not sure how you are supposed to do that in scons....



---

archive/issue_comments_118427.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n> No effects from that change BUT I was passing\n> \n> ```\n> SHLINKFLAGS=\"${LDFLAGS} -dynamiclib\"\n> ```\n> to scons which suppressed the flags you set. From the look of things I think it should be good now on OS X. If you had the flag appended instead of just set it may have worked earlier, not sure how you are supposed to do that in scons....\n\nThank you very much or this hint! I changed the `SConstruct` file to append the respective stuff. I hope this will work now without manual settings.",
    "created_at": "2011-07-27T21:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118427",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:32" align="right">comment:32</div>

> No effects from that change BUT I was passing
> 
> ```
> SHLINKFLAGS="${LDFLAGS} -dynamiclib"
> ```
> to scons which suppressed the flags you set. From the look of things I think it should be good now on OS X. If you had the flag appended instead of just set it may have worked earlier, not sure how you are supposed to do that in scons....

Thank you very much or this hint! I changed the `SConstruct` file to append the respective stuff. I hope this will work now without manual settings.



---

archive/issue_comments_118428.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThere a new alpha at https://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/ and at bitbucket. Many thanks for all bug hunters! I hope I can provide a new spkg soon.",
    "created_at": "2011-08-02T22:02:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118428",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:33" align="right">comment:33</div>

There a new alpha at https://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/ and at bitbucket. Many thanks for all bug hunters! I hope I can provide a new spkg soon.



---

archive/issue_comments_118429.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThe latest spkg builds fine on Mac OS X 10.6.\nHowever I using the patch I get:\n\n```\nsage/rings/polynomial/pbori.cpp: In function \u2018PyObject* __pyx_pf_4sage_5rings_10polynomial_5pbori_21BooleanPolynomialRing_30set(PyObject*, PyObject*)\u2019:\nsage/rings/polynomial/pbori.cpp:12802: error: \u2018class polybori::BoolePolyRing\u2019 has no member named \u2018activate\u2019\n/Applications/sage/local/include/csage/ccobject.h: In function \u2018T* Construct_ppp(void*, const P&, const Q&, const R&) [with T = polybori::BoolePolyRing, P = long unsigned int, Q = int, R = bool]\u2019:\nsage/rings/polynomial/pbori.cpp:4976:   instantiated from here\n/Applications/sage/local/include/csage/ccobject.h:59: error: no matching function for call to \u2018polybori::BoolePolyRing::BoolePolyRing(const long unsigned int&, const int&, const bool&)\u2019\n/Applications/sage/local/include/polybori/BoolePolyRing.h:123: note: candidates are: polybori::BoolePolyRing::BoolePolyRing()\n/Applications/sage/local/include/polybori/BoolePolyRing.h:120: note:                 polybori::BoolePolyRing::BoolePolyRing(const polybori::BoolePolyRing&)\n/Applications/sage/local/include/polybori/BoolePolyRing.h:116: note:                 polybori::BoolePolyRing::BoolePolyRing(size_t, const boost::shared_ptr<polybori::COrderingBase>&)\n/Applications/sage/local/include/polybori/BoolePolyRing.h:113: note:                 polybori::BoolePolyRing::BoolePolyRing(size_t, int)\n/Applications/sage/local/include/polybori/BoolePolyRing.h:107: note:                 polybori::BoolePolyRing::BoolePolyRing(const polybori::CWeakPtr<polybori::CCuddCore>&)\n/Applications/sage/local/include/polybori/BoolePolyRing.h:104: note:                 polybori::BoolePolyRing::BoolePolyRing(const boost::intrusive_ptr<polybori::CCuddCore>&)\nerror: command 'gcc' failed with exit status 1\nsage: There was an error installing modified sage library code.\n```\nCheers,\nMichael",
    "created_at": "2011-08-04T10:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118429",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:34" align="right">comment:34</div>

The latest spkg builds fine on Mac OS X 10.6.
However I using the patch I get:

```
sage/rings/polynomial/pbori.cpp: In function ‘PyObject* __pyx_pf_4sage_5rings_10polynomial_5pbori_21BooleanPolynomialRing_30set(PyObject*, PyObject*)’:
sage/rings/polynomial/pbori.cpp:12802: error: ‘class polybori::BoolePolyRing’ has no member named ‘activate’
/Applications/sage/local/include/csage/ccobject.h: In function ‘T* Construct_ppp(void*, const P&, const Q&, const R&) [with T = polybori::BoolePolyRing, P = long unsigned int, Q = int, R = bool]’:
sage/rings/polynomial/pbori.cpp:4976:   instantiated from here
/Applications/sage/local/include/csage/ccobject.h:59: error: no matching function for call to ‘polybori::BoolePolyRing::BoolePolyRing(const long unsigned int&, const int&, const bool&)’
/Applications/sage/local/include/polybori/BoolePolyRing.h:123: note: candidates are: polybori::BoolePolyRing::BoolePolyRing()
/Applications/sage/local/include/polybori/BoolePolyRing.h:120: note:                 polybori::BoolePolyRing::BoolePolyRing(const polybori::BoolePolyRing&)
/Applications/sage/local/include/polybori/BoolePolyRing.h:116: note:                 polybori::BoolePolyRing::BoolePolyRing(size_t, const boost::shared_ptr<polybori::COrderingBase>&)
/Applications/sage/local/include/polybori/BoolePolyRing.h:113: note:                 polybori::BoolePolyRing::BoolePolyRing(size_t, int)
/Applications/sage/local/include/polybori/BoolePolyRing.h:107: note:                 polybori::BoolePolyRing::BoolePolyRing(const polybori::CWeakPtr<polybori::CCuddCore>&)
/Applications/sage/local/include/polybori/BoolePolyRing.h:104: note:                 polybori::BoolePolyRing::BoolePolyRing(const boost::intrusive_ptr<polybori::CCuddCore>&)
error: command 'gcc' failed with exit status 1
sage: There was an error installing modified sage library code.
```
Cheers,
Michael



---

archive/issue_comments_118430.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nAt least `pbori.cpp` is not updated. Did you qimport https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz to the Sage library and qpush?\n\nMaybe you alos have to touch `pbori.pyx` before `sage -b`.",
    "created_at": "2011-08-04T13:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118430",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:35" align="right">comment:35</div>

At least `pbori.cpp` is not updated. Did you qimport https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz to the Sage library and qpush?

Maybe you alos have to touch `pbori.pyx` before `sage -b`.



---

archive/issue_comments_118431.json:
```json
{
    "body": "Attachment: **[polybori-0.8.0alpha.p2-against-p1.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p2-against-p1.patch.gz)**\n\nFix to allowd to use PolyBoRI 0.8 alpha1",
    "created_at": "2011-08-04T14:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118431",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[polybori-0.8.0alpha.p2-against-p1.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p2-against-p1.patch.gz)**

Fix to allowd to use PolyBoRI 0.8 alpha1



---

archive/issue_comments_118432.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nHi Michael,\nyou're right, I changed to many things in alpha1. Please import the second patch also. I also had to do a minor change in the spkg. Unfortunately, I cannot upload the updated spkg currently due to some server problems at boxen.\n\nRegards,\n  Alexander",
    "created_at": "2011-08-04T14:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118432",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Hi Michael,
you're right, I changed to many things in alpha1. Please import the second patch also. I also had to do a minor change in the spkg. Unfortunately, I cannot upload the updated spkg currently due to some server problems at boxen.

Regards,
  Alexander



---

archive/issue_comments_118433.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,9 +6,10 @@\n \n Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.\n \n-### Current Sage patch\n+### Current Sage patches\n * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz\n+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p2-against-p1.patch.gz\n \n ### Current spkg:\n-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p1.spkg\n+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p2.spkg\n \n``````\n",
    "created_at": "2011-08-04T14:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118433",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,9 +6,10 @@
 
 Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.
 
-### Current Sage patch
+### Current Sage patches
 * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz
+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p2-against-p1.patch.gz
 
 ### Current spkg:
-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p1.spkg
+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p2.spkg
 
``````




---

archive/issue_comments_118434.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThe updates spkg is now at the same place as before:\nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p2.spkg",
    "created_at": "2011-08-04T23:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118434",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:37" align="right">comment:37</div>

The updates spkg is now at the same place as before:
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p2.spkg



---

archive/issue_comments_118435.json:
```json
{
    "body": "Attachment: **[polybori-0.8.0alpha.p3.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p3.patch.gz)**\n\nPatch which uses a wrapper for c++ classes without default constructor",
    "created_at": "2011-08-05T10:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118435",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[polybori-0.8.0alpha.p3.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p3.patch.gz)**

Patch which uses a wrapper for c++ classes without default constructor



---

archive/issue_events_153298.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2011-08-05T11:14:44Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "subject": "https://github.com/alexanderdreyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153298"
}
```



---

archive/issue_events_153299.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-08-05T11:14:44Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "subject": "https://github.com/alexanderdreyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153299"
}
```



---

archive/issue_comments_118436.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI've added now a (cumulative) patch:\nhttps://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p3.patch.gz\nIt includes both previous ones as well as the treatment of c++ classes, that so not have a default constructor. (The latter should better to be handled by cython directly, so I'll report that issue there.)\n\nThe spkg was also updated (dummy default constructors dropped):\nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p3.spkg\n\nThe sources are in sync with the original repository now. If this version is fine for everybody, I'll bundle the first release candidate for polybori 0.8 soon.\n\nNote, that there are some todos due (see above).\n\nPS: I'm taking ownership of this ticket again.",
    "created_at": "2011-08-05T11:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118436",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:38" align="right">comment:38</div>

I've added now a (cumulative) patch:
https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p3.patch.gz
It includes both previous ones as well as the treatment of c++ classes, that so not have a default constructor. (The latter should better to be handled by cython directly, so I'll report that issue there.)

The spkg was also updated (dummy default constructors dropped):
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p3.spkg

The sources are in sync with the original repository now. If this version is fine for everybody, I'll bundle the first release candidate for polybori 0.8 soon.

Note, that there are some todos due (see above).

PS: I'm taking ownership of this ticket again.



---

archive/issue_comments_118437.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,10 +6,13 @@\n \n Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.\n \n-### Current Sage patches\n-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz\n-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p2-against-p1.patch.gz\n+### Todos\n+* Rebase the Sage patch after Sage 4.7.1 is released.\n+* Rebase the spkg after #11261 is merged.\n+\n+### Current Sage patch\n+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p3.patch.gz\n \n ### Current spkg:\n-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p2.spkg\n+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p3.spkg\n \n``````\n",
    "created_at": "2011-08-05T11:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118437",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,10 +6,13 @@
 
 Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.
 
-### Current Sage patches
-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p1.patch.gz
-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p2-against-p1.patch.gz
+### Todos
+* Rebase the Sage patch after Sage 4.7.1 is released.
+* Rebase the spkg after #11261 is merged.
+
+### Current Sage patch
+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p3.patch.gz
 
 ### Current spkg:
-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p2.spkg
+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p3.spkg
 
``````




---

archive/issue_comments_118438.json:
```json
{
    "body": "Attachment: **[polybori-0.8-rc.p0.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz)**\n\nCummulative patch for interfacing with PolyBoRi 0.8-rc1",
    "created_at": "2011-08-09T23:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118438",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[polybori-0.8-rc.p0.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz)**

Cummulative patch for interfacing with PolyBoRi 0.8-rc1



---

archive/issue_events_153300.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-08-09T23:49:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153300"
}
```



---

archive/issue_events_153301.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-08-09T23:49:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153301"
}
```



---

archive/issue_comments_118439.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nMeanwhile, we bundled PolyBoRi 0.8-rc1 upstream.\n\nHere is also the updated spkg:\nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p0.spkg\nand the Sage patch for interfacing with PolyBoRi 0.8-rc1:\nhttps://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz\n\nI rebased on the most recent version of the spkg from #11261 (still not official).",
    "created_at": "2011-08-09T23:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118439",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:39" align="right">comment:39</div>

Meanwhile, we bundled PolyBoRi 0.8-rc1 upstream.

Here is also the updated spkg:
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p0.spkg
and the Sage patch for interfacing with PolyBoRi 0.8-rc1:
https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz

I rebased on the most recent version of the spkg from #11261 (still not official).



---

archive/issue_comments_118440.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,8 +11,8 @@\n * Rebase the spkg after #11261 is merged.\n \n ### Current Sage patch\n-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p3.patch.gz\n+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz\n \n ### Current spkg:\n-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p3.spkg\n+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p0.spkg\n \n``````\n",
    "created_at": "2011-08-09T23:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118440",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,8 +11,8 @@
 * Rebase the spkg after #11261 is merged.
 
 ### Current Sage patch
-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0alpha.p3.patch.gz
+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz
 
 ### Current spkg:
-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-alpha.p3.spkg
+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p0.spkg
 
``````




---

archive/issue_events_153302.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-08-10T07:35:57Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "subject": "https://github.com/alexanderdreyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153302"
}
```



---

archive/issue_comments_118441.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n * Rebase the Sage patch after Sage 4.7.1 is released.\n * Rebase the spkg after #11261 is merged.\n \n-### Current Sage patch\n+### Current Sage library patch\n * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz\n \n ### Current spkg:\n``````\n",
    "created_at": "2011-08-10T07:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118441",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 * Rebase the Sage patch after Sage 4.7.1 is released.
 * Rebase the spkg after #11261 is merged.
 
-### Current Sage patch
+### Current Sage library patch
 * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz
 
 ### Current spkg:
``````




---

archive/issue_comments_118442.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,5 +14,5 @@\n * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz\n \n ### Current spkg:\n-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p0.spkg\n+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg\n \n``````\n",
    "created_at": "2011-08-15T21:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118442",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,5 +14,5 @@
 * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz
 
 ### Current spkg:
-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p0.spkg
+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg
 
``````




---

archive/issue_comments_118443.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nYou'll find an updated spkg at http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg which contains the sources of PolyBoRi 0.8 rc2. The Sage library patch stays the same.",
    "created_at": "2011-08-15T21:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118443",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:41" align="right">comment:41</div>

You'll find an updated spkg at http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg which contains the sources of PolyBoRi 0.8 rc2. The Sage library patch stays the same.



---

archive/issue_comments_118444.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThe most recent spkg builds, installs and tests sage/rings/polynomial successfully on OpenSuSE 11.1 and !MacOS 10.6. It is not affected by #11681 any more. Once Sage 4.7.1 is through the mirrors. I'll rebase the Sage-lib patch.",
    "created_at": "2011-08-16T16:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118444",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:42" align="right">comment:42</div>

The most recent spkg builds, installs and tests sage/rings/polynomial successfully on OpenSuSE 11.1 and !MacOS 10.6. It is not affected by #11681 any more. Once Sage 4.7.1 is through the mirrors. I'll rebase the Sage-lib patch.



---

archive/issue_comments_118445.json:
```json
{
    "body": "Attachment: **[polybori-0.8-rc.p1VSp0.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1VSp0.patch.gz)**\n\nPatch for using polybori-0.8-rc.p1.spkg (against polybori-0.8-rc.p0.patch)",
    "created_at": "2011-08-16T17:35:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118445",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[polybori-0.8-rc.p1VSp0.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1VSp0.patch.gz)**

Patch for using polybori-0.8-rc.p1.spkg (against polybori-0.8-rc.p0.patch)



---

archive/issue_comments_118446.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,8 +10,9 @@\n * Rebase the Sage patch after Sage 4.7.1 is released.\n * Rebase the spkg after #11261 is merged.\n \n-### Current Sage library patch\n+### Current Sage library patches\n * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz\n+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1VSp0.patch.gz\n \n ### Current spkg:\n * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg\n``````\n",
    "created_at": "2011-08-16T17:37:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118446",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,8 +10,9 @@
 * Rebase the Sage patch after Sage 4.7.1 is released.
 * Rebase the spkg after #11261 is merged.
 
-### Current Sage library patch
+### Current Sage library patches
 * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz
+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1VSp0.patch.gz
 
 ### Current spkg:
 * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg
``````




---

archive/issue_comments_118447.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nSorry, I forgot to upload the following patch:\nhttps://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1VSp0.patch.gz\nPlease apply both in a row.",
    "created_at": "2011-08-16T17:37:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118447",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:43" align="right">comment:43</div>

Sorry, I forgot to upload the following patch:
https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1VSp0.patch.gz
Please apply both in a row.



---

archive/issue_comments_118448.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nNow that 4.7.1 is officially released [attachment: polybori-0.8-rc.p0.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz) really needs rebasing.",
    "created_at": "2011-08-16T20:09:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118448",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">comment:44</div>

Now that 4.7.1 is officially released [attachment: polybori-0.8-rc.p0.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz) really needs rebasing.



---

archive/issue_comments_118449.json:
```json
{
    "body": "Attachment: **[polybori-0.8-rc.p1.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz)**\n\nCummulative patch, rebased to Sage 4.7.1",
    "created_at": "2011-08-17T09:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118449",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[polybori-0.8-rc.p1.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz)**

Cummulative patch, rebased to Sage 4.7.1



---

archive/issue_comments_118450.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,6 @@\n Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.\n \n ### Todos\n-* Rebase the Sage patch after Sage 4.7.1 is released.\n * Rebase the spkg after #11261 is merged.\n \n ### Current Sage library patches\n``````\n",
    "created_at": "2011-08-17T09:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118450",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,6 @@
 Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.
 
 ### Todos
-* Rebase the Sage patch after Sage 4.7.1 is released.
 * Rebase the spkg after #11261 is merged.
 
 ### Current Sage library patches
``````




---

archive/issue_comments_118451.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@kiwifb](#comment%3A44):\n> Now that 4.7.1 is officially released [attachment: polybori-0.8-rc.p0.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz) really needs rebasing.\n\nYes, indeed. It's here now:\nhttps://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz\nI obeyed the changes around SAGE_INC as you pointed out.\n\nSince #11261 is merged now, I'm going to rebase the spkg, too.",
    "created_at": "2011-08-17T09:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118451",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@kiwifb](#comment%3A44):
> Now that 4.7.1 is officially released [attachment: polybori-0.8-rc.p0.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz) really needs rebasing.

Yes, indeed. It's here now:
https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz
I obeyed the changes around SAGE_INC as you pointed out.

Since #11261 is merged now, I'm going to rebase the spkg, too.



---

archive/issue_comments_118452.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,9 +9,8 @@\n ### Todos\n * Rebase the spkg after #11261 is merged.\n \n-### Current Sage library patches\n-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz\n-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1VSp0.patch.gz\n+### Current Sage library patch\n+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz\n \n ### Current spkg:\n * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg\n``````\n",
    "created_at": "2011-08-17T09:27:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118452",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,9 +9,8 @@
 ### Todos
 * Rebase the spkg after #11261 is merged.
 
-### Current Sage library patches
-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p0.patch.gz
-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1VSp0.patch.gz
+### Current Sage library patch
+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz
 
 ### Current spkg:
 * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg
``````




---

archive/issue_comments_118453.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,14 +4,9 @@\n https://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/\n \n \n-Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.\n-\n-### Todos\n-* Rebase the spkg after #11261 is merged.\n-\n ### Current Sage library patch\n-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz\n+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p2.patch.gz\n \n ### Current spkg:\n-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg\n+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p2.spkg\n \n``````\n",
    "created_at": "2011-08-17T11:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118453",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,14 +4,9 @@
 https://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/
 
 
-Note, once the official spkg for PolyBoRi 0.7-1 is reviewed and merged (#11261) we will need to rebase on that.
-
-### Todos
-* Rebase the spkg after #11261 is merged.
-
 ### Current Sage library patch
-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz
+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p2.patch.gz
 
 ### Current spkg:
-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p1.spkg
+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p2.spkg
 
``````




---

archive/issue_comments_118454.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nNow the rebased spkg (on #11261) here:\nhttps://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p2.patch.gz\nIt also includes the updated sources of http://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/polybori-0.8.0rc3.tar.gz (minor changes).\nIt's tested with Sage 4.7.1 on SLES 11.",
    "created_at": "2011-08-17T11:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118454",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:47" align="right">comment:47</div>

Now the rebased spkg (on #11261) here:
https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p2.patch.gz
It also includes the updated sources of http://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/polybori-0.8.0rc3.tar.gz (minor changes).
It's tested with Sage 4.7.1 on SLES 11.



---

archive/issue_comments_118455.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nOK I pulled the trunk again with my ebuild and after a few changes to accommodate for your last commit (lib/lib64 issue not really essential for sage as far as I can see) it installed fine on linux-amd64.\n\nTrying on OS X (10.5.8) turned something interesting which may explain some of the difficulties with dynamic linking on OS X.\n\n```\n *   correcting install_name of libpolybori.dylib ...                                                                        [ ok ]\n *   correcting install_name of libpolybori_groebner.dylib ...                                                               [ ok ]\n>>> Completed installing polybori-9999 into /Users/frb15/Desktop/Gentoo/var/tmp/portage/sci-mathematics/polybori-9999/image/Users/frb15/Desktop/Gentoo/\n\necompressdir: bzip2 -9 /Users/frb15/Desktop/Gentoo/usr/share/man\n * QA Notice: invalid reference to libpolybori/libpolybori.dylib in /Users/frb15/Desktop/Gentoo/usr/lib/libpolybori_groebner.dylib\n * ERROR: sci-mathematics/polybori-9999 failed:\n *   invalid install_name found, your application or library will crash at runtime\n```\nI am guessing the culprit line is this one\n\n```\ni686-apple-darwin9-g++ -o groebner/libpolybori_groebner.dylib -Wl,-dead_strip_dylibs -dynamiclib groebner/src/groebner.os groebner/src/LiteralFactorization.os groebner/src/LiteralFactorizationIterator.os groebner/src/randomset.os groebner/src/pairs.os groebner/src/groebner_alg.os groebner/src/FGLMStrategy.os groebner/src/polynomial_properties.os groebner/src/LexBucket.os groebner/src/dlex4data.os groebner/src/dp_asc4data.os groebner/src/lp4data.os groebner/src/nf.os groebner/src/interpolate.os groebner/src/GroebnerStrategy.os groebner/src/PairManager.os groebner/src/PolyEntry.os groebner/src/ReductionStrategy.os groebner/src/MatrixMonomialOrderTables.os -Llibpolybori -Lgroebner -L/Users/frb15/Desktop/Gentoo/usr/lib -L/Users/frb15/Desktop/Gentoo/usr/lib/python2.7/config -LCudd -lm -lboost_unit_test_framework -lm4ri -lm4ri libpolybori/libpolybori.dylib -lgd\n```\nBecause you already have \"-Llibpolybori\" you shouldn't need \"libpolybori/libpolybori.dylib\" you should just plain link with \"-lpolybori\".",
    "created_at": "2011-08-18T01:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118455",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:48" align="right">comment:48</div>

OK I pulled the trunk again with my ebuild and after a few changes to accommodate for your last commit (lib/lib64 issue not really essential for sage as far as I can see) it installed fine on linux-amd64.

Trying on OS X (10.5.8) turned something interesting which may explain some of the difficulties with dynamic linking on OS X.

```
 *   correcting install_name of libpolybori.dylib ...                                                                        [ ok ]
 *   correcting install_name of libpolybori_groebner.dylib ...                                                               [ ok ]
>>> Completed installing polybori-9999 into /Users/frb15/Desktop/Gentoo/var/tmp/portage/sci-mathematics/polybori-9999/image/Users/frb15/Desktop/Gentoo/

ecompressdir: bzip2 -9 /Users/frb15/Desktop/Gentoo/usr/share/man
 * QA Notice: invalid reference to libpolybori/libpolybori.dylib in /Users/frb15/Desktop/Gentoo/usr/lib/libpolybori_groebner.dylib
 * ERROR: sci-mathematics/polybori-9999 failed:
 *   invalid install_name found, your application or library will crash at runtime
```
I am guessing the culprit line is this one

```
i686-apple-darwin9-g++ -o groebner/libpolybori_groebner.dylib -Wl,-dead_strip_dylibs -dynamiclib groebner/src/groebner.os groebner/src/LiteralFactorization.os groebner/src/LiteralFactorizationIterator.os groebner/src/randomset.os groebner/src/pairs.os groebner/src/groebner_alg.os groebner/src/FGLMStrategy.os groebner/src/polynomial_properties.os groebner/src/LexBucket.os groebner/src/dlex4data.os groebner/src/dp_asc4data.os groebner/src/lp4data.os groebner/src/nf.os groebner/src/interpolate.os groebner/src/GroebnerStrategy.os groebner/src/PairManager.os groebner/src/PolyEntry.os groebner/src/ReductionStrategy.os groebner/src/MatrixMonomialOrderTables.os -Llibpolybori -Lgroebner -L/Users/frb15/Desktop/Gentoo/usr/lib -L/Users/frb15/Desktop/Gentoo/usr/lib/python2.7/config -LCudd -lm -lboost_unit_test_framework -lm4ri -lm4ri libpolybori/libpolybori.dylib -lgd
```
Because you already have "-Llibpolybori" you shouldn't need "libpolybori/libpolybori.dylib" you should just plain link with "-lpolybori".



---

archive/issue_comments_118456.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@kiwifb](#comment%3A48):\n> Because you already have \"-Llibpolybori\" you shouldn't need \"libpolybori/libpolybori.dylib\" you should just plain link with \"-lpolybori\".\n\nThanks, I fixed that on bitbucket.",
    "created_at": "2011-08-18T07:15:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118456",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@kiwifb](#comment%3A48):
> Because you already have "-Llibpolybori" you shouldn't need "libpolybori/libpolybori.dylib" you should just plain link with "-lpolybori".

Thanks, I fixed that on bitbucket.



---

archive/issue_comments_118457.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nThanks for doing that but I unfortunately still get the same message. I am investigating what needs to be done. I am hoping there will be an easy fix.",
    "created_at": "2011-08-18T22:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118457",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:50" align="right">comment:50</div>

Thanks for doing that but I unfortunately still get the same message. I am investigating what needs to be done. I am hoping there will be an easy fix.



---

archive/issue_comments_118458.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@kiwifb](#comment%3A50):\n> Thanks for doing that but I unfortunately still get the same message. I am investigating what needs to be done. I am hoping there will be an easy fix.\n\nThat's weired. I had the chance to test it on an Intel-Mac with OS X 10.6 and an ppc running 10.5. In both cases, the build succeeded. (But not using prefix though.)",
    "created_at": "2011-08-18T22:52:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118458",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@kiwifb](#comment%3A50):
> Thanks for doing that but I unfortunately still get the same message. I am investigating what needs to be done. I am hoping there will be an easy fix.

That's weired. I had the chance to test it on an Intel-Mac with OS X 10.6 and an ppc running 10.5. In both cases, the build succeeded. (But not using prefix though.)



---

archive/issue_comments_118459.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nPS: Does the linking sequence still include `libpolybori/libpolybori.dylib `?",
    "created_at": "2011-08-18T22:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118459",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:52" align="right">comment:52</div>

PS: Does the linking sequence still include `libpolybori/libpolybori.dylib `?



---

archive/issue_comments_118460.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@alexanderdreyer](#comment%3A52):\n> PS: Does the linking sequence still include `libpolybori/libpolybori.dylib `?\n\nNo you fixed that exactly as I asked you. Portage does extra checks for consistency on libraries on OS X. There are a number of things that aren't exactly common knowledge to people who don't do a lot of development on OS X. Technically all libraries on OS X have an rpath which usually is relative. Look at this document:\n[http://blog.onesadcookie.com/2008/01/installname-magic.html](http://blog.onesadcookie.com/2008/01/installname-magic.html)\nThe solution adopted in portage in a OS X prefix is to make the install_name absolute which is why at the moment a sage-prefix on OS X is not relocatable. Now what the QA tool of portage is telling us is that libpolybori_groebner.dylib is linked to libpolybori/libpolybori.dylib as in the library contains the name and the path of the library. And we of course don't want that.\n\nTry the following command:\n\n```\notool -L libpolybori_groebner.dylib\n```\nThe result here is as follow:\n\n```\notool -L libpolybori_groebner.dylib \nlibpolybori_groebner.dylib:\n\t/Users/frb15/Desktop/Gentoo/usr/lib/libpolybori_groebner.dylib (compatibility version 0.0.0, current version 0.0.0)\n\tlibpolybori/libpolybori.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 111.1.7)\n\t/Users/frb15/Desktop/Gentoo/usr/lib/libm4ri-0.0.20100817.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t/Users/frb15/Desktop/Gentoo/usr/lib/libgd.2.dylib (compatibility version 3.0.0, current version 3.0.0)\n\t/Users/frb15/Desktop/Gentoo/usr/lib/gcc/i686-apple-darwin9/4.2.1/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)\n\t/Users/frb15/Desktop/Gentoo/usr/lib/gcc/i686-apple-darwin9/4.2.1/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)\n```\nyou can notice libpolybori/libpolybori.dylib on its lonesome.",
    "created_at": "2011-08-18T23:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118460",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@alexanderdreyer](#comment%3A52):
> PS: Does the linking sequence still include `libpolybori/libpolybori.dylib `?

No you fixed that exactly as I asked you. Portage does extra checks for consistency on libraries on OS X. There are a number of things that aren't exactly common knowledge to people who don't do a lot of development on OS X. Technically all libraries on OS X have an rpath which usually is relative. Look at this document:
[http://blog.onesadcookie.com/2008/01/installname-magic.html](http://blog.onesadcookie.com/2008/01/installname-magic.html)
The solution adopted in portage in a OS X prefix is to make the install_name absolute which is why at the moment a sage-prefix on OS X is not relocatable. Now what the QA tool of portage is telling us is that libpolybori_groebner.dylib is linked to libpolybori/libpolybori.dylib as in the library contains the name and the path of the library. And we of course don't want that.

Try the following command:

```
otool -L libpolybori_groebner.dylib
```
The result here is as follow:

```
otool -L libpolybori_groebner.dylib 
libpolybori_groebner.dylib:
	/Users/frb15/Desktop/Gentoo/usr/lib/libpolybori_groebner.dylib (compatibility version 0.0.0, current version 0.0.0)
	libpolybori/libpolybori.dylib (compatibility version 0.0.0, current version 0.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 111.1.7)
	/Users/frb15/Desktop/Gentoo/usr/lib/libm4ri-0.0.20100817.dylib (compatibility version 0.0.0, current version 0.0.0)
	/Users/frb15/Desktop/Gentoo/usr/lib/libgd.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/Users/frb15/Desktop/Gentoo/usr/lib/gcc/i686-apple-darwin9/4.2.1/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)
	/Users/frb15/Desktop/Gentoo/usr/lib/gcc/i686-apple-darwin9/4.2.1/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
```
you can notice libpolybori/libpolybori.dylib on its lonesome.



---

archive/issue_comments_118461.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI am guessing that the fundamental problem is that the install_name of libpolybori.dylib is set to libpolybori/libpolybori.dylib and I only change it after install. So when it is linked that's what is used. I can change it to something correct with install_name_tool -change but it would be better if we had something consistent in the first place. The man page for ld on OS X\n\n```\n     -install_name name\n                 Sets an internal \"install path\" (LC_ID_DYLIB) in a dynamic\n                 library. Any clients linked against the library will record\n                 that path as the way dyld should locate this library.  If\n                 this option is not specified, then the -o path will be used.\n                 This option is also called -dylib_install_name for compati\u2010\n                 bility.\n```\nWe could try to use -flat_namespace which basically gives you the same kind of situation as linux regarding the loading of libraries.",
    "created_at": "2011-08-18T23:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118461",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:54" align="right">comment:54</div>

I am guessing that the fundamental problem is that the install_name of libpolybori.dylib is set to libpolybori/libpolybori.dylib and I only change it after install. So when it is linked that's what is used. I can change it to something correct with install_name_tool -change but it would be better if we had something consistent in the first place. The man page for ld on OS X

```
     -install_name name
                 Sets an internal "install path" (LC_ID_DYLIB) in a dynamic
                 library. Any clients linked against the library will record
                 that path as the way dyld should locate this library.  If
                 this option is not specified, then the -o path will be used.
                 This option is also called -dylib_install_name for compati‐
                 bility.
```
We could try to use -flat_namespace which basically gives you the same kind of situation as linux regarding the loading of libraries.



---

archive/issue_comments_118462.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nmake that -Wl,-flat_namespace, it is to be passed to ld.",
    "created_at": "2011-08-19T01:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118462",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:55" align="right">comment:55</div>

make that -Wl,-flat_namespace, it is to be passed to ld.



---

archive/issue_comments_118463.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@kiwifb](#comment%3A55):\n> make that -Wl,-flat_namespace, it is to be passed to ld.\n\nI added this to the bitbucket repo.",
    "created_at": "2011-08-19T12:31:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118463",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@kiwifb](#comment%3A55):
> make that -Wl,-flat_namespace, it is to be passed to ld.

I added this to the bitbucket repo.



---

archive/issue_comments_118464.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@alexanderdreyer](#comment%3A56):\n> Replying to [@kiwifb](#comment%3A55):\n> > make that -Wl,-flat_namespace, it is to be passed to ld.\n> \n> I added this to the bitbucket repo.\n\nI cannot test it until Monday unfortunately. Have you looked at what \"otool -L\" reports for you after adding that?",
    "created_at": "2011-08-19T13:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118464",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@alexanderdreyer](#comment%3A56):
> Replying to [@kiwifb](#comment%3A55):
> > make that -Wl,-flat_namespace, it is to be passed to ld.
> 
> I added this to the bitbucket repo.

I cannot test it until Monday unfortunately. Have you looked at what "otool -L" reports for you after adding that?



---

archive/issue_comments_118465.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nfor some reason, it still owns paths:\n\n```\nsage subshell) p900sys02:sage dreyer$ otool -L local/lib/libpolybori_groebner.dylib \nlocal/lib/libpolybori_groebner.dylib:\n\tgroebner/libpolybori_groebner-0.8.0.dylib.0.0.0 (compatibility version 0.0.0, current version 0.0.0)\n\tlibpolybori/libpolybori-0.8.0.dylib.0.0.0 (compatibility version 0.0.0, current version 0.0.0)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.0)\n\t/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/libm4ri-0.0.20100701.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/libgd.2.dylib (compatibility version 3.0.0, current version 3.0.0)\n\t/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/libpng12.0.dylib (compatibility version 36.0.0, current version 36.0.0)\n\t/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.5)\n\t/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)\n```\n\n\nThis is how it was build:\n\n```\ng++ -o groebner/libpolybori_groebner-0.8.0.dylib.0.0.0 -m64 -dynamiclib -Wl,-flat_namespace groebner/src/groebner.os groebner/src/LiteralFactorization.os groebner/src/LiteralFactorizationIterator.os groebner/src/randomset.os groebner/src/pairs.os groebner/src/groebner_alg.os groebner/src/FGLMStrategy.os groebner/src/polynomial_properties.os groebner/src/LexBucket.os groebner/src/dlex4data.os groebner/src/dp_asc4data.os groebner/src/lp4data.os groebner/src/nf.os groebner/src/interpolate.os groebner/src/GroebnerStrategy.os groebner/src/PairManager.os groebner/src/PolyEntry.os groebner/src/ReductionStrategy.os groebner/src/MatrixMonomialOrderTables.os -Llibpolybori -Lgroebner -L/Users/dreyer/sage/local/lib -L/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib -L/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/python2.6/config -LCudd -lpolybori -lm -lm4ri -lm4ri -lgd -lpng12 -lz\n```\nand\n\n```\ng++ -o libpolybori/libpolybori-0.8.0.dylib.0.0.0 -m64 -dynamiclib -Wl,-flat_namespace Cudd/cudd/cuddAPI.os Cudd/cudd/cuddCache.os Cudd/cudd/cuddInit.os Cudd/cudd/cuddLCache.os Cudd/cudd/cuddRef.os Cudd/cudd/cuddTable.os Cudd/cudd/cuddZddFuncs.os Cudd/cudd/cuddZddSetop.os libpolybori/src/BoolePolyRing.os libpolybori/src/BooleEnv.os libpolybori/src/BoolePolynomial.os libpolybori/src/BooleVariable.os libpolybori/src/CCheckedIdx.os libpolybori/src/CErrorInfo.os libpolybori/src/PBoRiError.os libpolybori/src/CCuddFirstIter.os libpolybori/src/BooleMonomial.os libpolybori/src/BooleSet.os libpolybori/src/LexOrder.os libpolybori/src/CCuddLastIter.os libpolybori/src/BooleExponent.os libpolybori/src/DegLexOrder.os libpolybori/src/DegRevLexAscOrder.os libpolybori/src/pbori_routines.os libpolybori/src/BlockDegLexOrder.os libpolybori/src/BlockDegRevLexAscOrder.os -Llibpolybori -Lgroebner -L/Users/dreyer/sage/local/lib -L/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib -L/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/python2.6/config -LCudd -lm -lm4ri -lm4ri\n```",
    "created_at": "2011-08-19T14:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118465",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:58" align="right">comment:58</div>

for some reason, it still owns paths:

```
sage subshell) p900sys02:sage dreyer$ otool -L local/lib/libpolybori_groebner.dylib 
local/lib/libpolybori_groebner.dylib:
	groebner/libpolybori_groebner-0.8.0.dylib.0.0.0 (compatibility version 0.0.0, current version 0.0.0)
	libpolybori/libpolybori-0.8.0.dylib.0.0.0 (compatibility version 0.0.0, current version 0.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.0)
	/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/libm4ri-0.0.20100701.dylib (compatibility version 0.0.0, current version 0.0.0)
	/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/libgd.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/libpng12.0.dylib (compatibility version 36.0.0, current version 36.0.0)
	/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.5)
	/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)
```


This is how it was build:

```
g++ -o groebner/libpolybori_groebner-0.8.0.dylib.0.0.0 -m64 -dynamiclib -Wl,-flat_namespace groebner/src/groebner.os groebner/src/LiteralFactorization.os groebner/src/LiteralFactorizationIterator.os groebner/src/randomset.os groebner/src/pairs.os groebner/src/groebner_alg.os groebner/src/FGLMStrategy.os groebner/src/polynomial_properties.os groebner/src/LexBucket.os groebner/src/dlex4data.os groebner/src/dp_asc4data.os groebner/src/lp4data.os groebner/src/nf.os groebner/src/interpolate.os groebner/src/GroebnerStrategy.os groebner/src/PairManager.os groebner/src/PolyEntry.os groebner/src/ReductionStrategy.os groebner/src/MatrixMonomialOrderTables.os -Llibpolybori -Lgroebner -L/Users/dreyer/sage/local/lib -L/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib -L/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/python2.6/config -LCudd -lpolybori -lm -lm4ri -lm4ri -lgd -lpng12 -lz
```
and

```
g++ -o libpolybori/libpolybori-0.8.0.dylib.0.0.0 -m64 -dynamiclib -Wl,-flat_namespace Cudd/cudd/cuddAPI.os Cudd/cudd/cuddCache.os Cudd/cudd/cuddInit.os Cudd/cudd/cuddLCache.os Cudd/cudd/cuddRef.os Cudd/cudd/cuddTable.os Cudd/cudd/cuddZddFuncs.os Cudd/cudd/cuddZddSetop.os libpolybori/src/BoolePolyRing.os libpolybori/src/BooleEnv.os libpolybori/src/BoolePolynomial.os libpolybori/src/BooleVariable.os libpolybori/src/CCheckedIdx.os libpolybori/src/CErrorInfo.os libpolybori/src/PBoRiError.os libpolybori/src/CCuddFirstIter.os libpolybori/src/BooleMonomial.os libpolybori/src/BooleSet.os libpolybori/src/LexOrder.os libpolybori/src/CCuddLastIter.os libpolybori/src/BooleExponent.os libpolybori/src/DegLexOrder.os libpolybori/src/DegRevLexAscOrder.os libpolybori/src/pbori_routines.os libpolybori/src/BlockDegLexOrder.os libpolybori/src/BlockDegRevLexAscOrder.os -Llibpolybori -Lgroebner -L/Users/dreyer/sage/local/lib -L/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib -L/Users/buildbot/build/sage/bsd-1/bsd_64_binary/build/sage-4.7/local/lib/python2.6/config -LCudd -lm -lm4ri -lm4ri
```



---

archive/issue_comments_118466.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI will have to look a bit more deeply into it. There may be some extra sauce needed. I'll look at what libtool does.",
    "created_at": "2011-08-19T14:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118466",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:59" align="right">comment:59</div>

I will have to look a bit more deeply into it. There may be some extra sauce needed. I'll look at what libtool does.



---

archive/issue_comments_118467.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nOk, it seems, it has takes libpolybori/libpolybori-0.8.0.dylib.0.0.0 from the -o option, so I'll have to build stuff in one single directory.  (This will need some time)",
    "created_at": "2011-08-19T14:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118467",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:60" align="right">comment:60</div>

Ok, it seems, it has takes libpolybori/libpolybori-0.8.0.dylib.0.0.0 from the -o option, so I'll have to build stuff in one single directory.  (This will need some time)



---

archive/issue_comments_118468.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@alexanderdreyer](#comment%3A60):\n> Ok, it seems, it has takes libpolybori/libpolybori-0.8.0.dylib.0.0.0 from the -o option, so I'll have to build stuff in one single directory.  (This will need some time)\n\nThat certainly something you could do, but I was hoping that it wouldn't be necessary.",
    "created_at": "2011-08-19T20:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118468",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@alexanderdreyer](#comment%3A60):
> Ok, it seems, it has takes libpolybori/libpolybori-0.8.0.dylib.0.0.0 from the -o option, so I'll have to build stuff in one single directory.  (This will need some time)

That certainly something you could do, but I was hoping that it wouldn't be necessary.



---

archive/issue_comments_118469.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@kiwifb](#comment%3A61):\n> That certainly something you could do, but I was hoping that it wouldn't be necessary.\n\nOk, I changed this, let's see on Monday (I do not have access to a Mac either).",
    "created_at": "2011-08-19T22:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118469",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@kiwifb](#comment%3A61):
> That certainly something you could do, but I was hoping that it wouldn't be necessary.

Ok, I changed this, let's see on Monday (I do not have access to a Mac either).



---

archive/issue_comments_118470.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nI manager to install gentoo-prefix on an old ppc to debug things further.\nThe most current polybori builds nicely on that prefix, but I can now reproduce issue mentioned here: https://bitbucket.org/brickenstein/polybori/issue/1/non-aligned-pointer-being-freed-on-os-x when using wither ipbori or  invoking ipython with the following manual commands:\nPython 2.7.2 (default, Aug 22 2011, 13:36:51)\nType \"copyright\", \"credits\" or \"license\" for more information.\n\n```\nIPython 0.10.2 -- An enhanced Interactive Python.\n?         -> Introduction and overview of IPython's features.\n%quickref -> Quick reference.\nhelp      -> Python's own help system.\nobject?   -> Details about 'object'. ?object also works, ?? prints more.\n\nIn [1]: import sys\n\nIn [2]: sys.path.insert(0,\"pyroot\")\n\nIn [3]: from polybori.frontend import *  \n[...]\npython2.7(77363) malloc: *** error for object 0x1d315a8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\npython2.7(77363) malloc: *** mmap(size=3221204992) failed (error code=12)\n*** error: can't allocate region\n*** set a breakpoint in malloc_error_break to debug\n[...]\n*** set a breakpoint in malloc_error_break to debug\npython2.7(77388) malloc: *** mmap(size=3221204992) failed (error code=12)\n*** error: can't allocate region\n*** set a breakpoint in malloc_error_break to debug\n\nIn [4]: x(1)*x(1)\npython2.7(77388) malloc: *** error for object 0x1d315a8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\nOut[4]: x(\n```\n\n\nInvoking plain python doesn't cause any trouble:\n\n```\nPython 2.7.2 (default, Aug 22 2011, 13:36:51)\n[GCC 4.2.1 (Gentoo 4.2.1_p5666, Apple Inc. build 5666) (dot 3)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sys\n>>> sys.path.insert(0,\"pyroot\")\n>>> from polybori.frontend import *\n>>> x(1)*x(1)\nx(1)\n```\n\nSo maybe an ipython issue?",
    "created_at": "2011-08-23T13:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118470",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:63" align="right">comment:63</div>

I manager to install gentoo-prefix on an old ppc to debug things further.
The most current polybori builds nicely on that prefix, but I can now reproduce issue mentioned here: https://bitbucket.org/brickenstein/polybori/issue/1/non-aligned-pointer-being-freed-on-os-x when using wither ipbori or  invoking ipython with the following manual commands:
Python 2.7.2 (default, Aug 22 2011, 13:36:51)
Type "copyright", "credits" or "license" for more information.

```
IPython 0.10.2 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object'. ?object also works, ?? prints more.

In [1]: import sys

In [2]: sys.path.insert(0,"pyroot")

In [3]: from polybori.frontend import *  
[...]
python2.7(77363) malloc: *** error for object 0x1d315a8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
python2.7(77363) malloc: *** mmap(size=3221204992) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
[...]
*** set a breakpoint in malloc_error_break to debug
python2.7(77388) malloc: *** mmap(size=3221204992) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug

In [4]: x(1)*x(1)
python2.7(77388) malloc: *** error for object 0x1d315a8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
Out[4]: x(
```


Invoking plain python doesn't cause any trouble:

```
Python 2.7.2 (default, Aug 22 2011, 13:36:51)
[GCC 4.2.1 (Gentoo 4.2.1_p5666, Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path.insert(0,"pyroot")
>>> from polybori.frontend import *
>>> x(1)*x(1)
x(1)
```

So maybe an ipython issue?



---

archive/issue_comments_118471.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nI am checking but I think that may be a verbosity issue. python-2.7 is not very verbose and while the warnings look terrible it never prevented sage to start or even prevented me to run the tests.",
    "created_at": "2011-08-23T22:30:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118471",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:64" align="right">comment:64</div>

I am checking but I think that may be a verbosity issue. python-2.7 is not very verbose and while the warnings look terrible it never prevented sage to start or even prevented me to run the tests.



---

archive/issue_comments_118472.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nOk, if I build everything but the initialization as shared lib and link the remaining small bundle to these libs it does work. I'll investigate that further.",
    "created_at": "2011-08-23T23:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118472",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:65" align="right">comment:65</div>

Ok, if I build everything but the initialization as shared lib and link the remaining small bundle to these libs it does work. I'll investigate that further.



---

archive/issue_comments_118473.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nI am getting a bus error with ipython and the latest trunk (with some manual massaging to get what looks like correct libraries) and no error with pure python that's indeed very strange. The backtrace I put on bitbucket was pointing to polybori but there may be more to it.\n\nLooking back in this thread what happened to -Wl,-undefined -Wl,dynamic_lookup for OS X? I suspect that would do the trick we are after. I looked at what libtool does in the case of m4ri:\n\n```\ngcc -dynamiclib -Wl,-undefined -Wl,dynamic_lookup -o .libs/libm4ri-0.0.20100701.dylib  .libs/brilliantrussian.o .libs/misc.o .libs/packedmatrix.o .libs/grayflex.o .libs/strassen.o .libs/permutation.o .libs/trsm.o .libs/pls.o .libs/solve.o .libs/pls_mmpf.o .libs/echelonform.o    -mmmx -msse -msse2 -msse3   -install_name  /Users/frb15/Desktop/sage-4.7.1/local/lib/libm4ri-0.0.20100701.dylib  -Wl,-single_module\n```\nThis is from a vanilla (ie not gentoo based) build log. I detect relocation problems on OS X.",
    "created_at": "2011-08-23T23:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118473",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:66" align="right">comment:66</div>

I am getting a bus error with ipython and the latest trunk (with some manual massaging to get what looks like correct libraries) and no error with pure python that's indeed very strange. The backtrace I put on bitbucket was pointing to polybori but there may be more to it.

Looking back in this thread what happened to -Wl,-undefined -Wl,dynamic_lookup for OS X? I suspect that would do the trick we are after. I looked at what libtool does in the case of m4ri:

```
gcc -dynamiclib -Wl,-undefined -Wl,dynamic_lookup -o .libs/libm4ri-0.0.20100701.dylib  .libs/brilliantrussian.o .libs/misc.o .libs/packedmatrix.o .libs/grayflex.o .libs/strassen.o .libs/permutation.o .libs/trsm.o .libs/pls.o .libs/solve.o .libs/pls_mmpf.o .libs/echelonform.o    -mmmx -msse -msse2 -msse3   -install_name  /Users/frb15/Desktop/sage-4.7.1/local/lib/libm4ri-0.0.20100701.dylib  -Wl,-single_module
```
This is from a vanilla (ie not gentoo based) build log. I detect relocation problems on OS X.



---

archive/issue_comments_118474.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nBTW: how do you fix relative pathes to the libs to absolute ones (without setting DYLD_LIBRARY_PATH)?",
    "created_at": "2011-08-23T23:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118474",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:67" align="right">comment:67</div>

BTW: how do you fix relative pathes to the libs to absolute ones (without setting DYLD_LIBRARY_PATH)?



---

archive/issue_comments_118475.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nIn the case of m4ri libtool is doing the guessing. For polybori I do things manually:\n\n```\ninstall_name_tool -id ${absolutepath} ${library}\n```\nAnd for libpolybori_groebner\n\n```\ninstall_name_tool -change libpolybori.dylib ${absolutepathoflibpolybori.dylib} libpolybori_groebner.dylib\n```",
    "created_at": "2011-08-23T23:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118475",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:68" align="right">comment:68</div>

In the case of m4ri libtool is doing the guessing. For polybori I do things manually:

```
install_name_tool -id ${absolutepath} ${library}
```
And for libpolybori_groebner

```
install_name_tool -change libpolybori.dylib ${absolutepathoflibpolybori.dylib} libpolybori_groebner.dylib
```



---

archive/issue_comments_118476.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nDo you know how to run ipython under gdb?",
    "created_at": "2011-08-23T23:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118476",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:69" align="right">comment:69</div>

Do you know how to run ipython under gdb?



---

archive/issue_events_153303.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-08-23T23:44:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153303"
}
```



---

archive/issue_events_153304.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-08-23T23:44:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153304"
}
```



---

archive/issue_comments_118477.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@kiwifb](#comment%3A69):\n> Do you know how to run ipython under gdb?\n\nUnfortunately not. But one should be able to find this in the `sage -gdb` script.\n\nThanks for pointing to `install_name_tool`",
    "created_at": "2011-08-23T23:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118477",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@kiwifb](#comment%3A69):
> Do you know how to run ipython under gdb?

Unfortunately not. But one should be able to find this in the `sage -gdb` script.

Thanks for pointing to `install_name_tool`



---

archive/issue_comments_118478.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nthat helped. Does this make any sense to you\n\n```\nython2.7(21230) malloc: *** error for object 0x249ae10: Non-aligned pointer being freed (2)\n*** set a breakpoint in malloc_error_break to debug\n\nProgram received signal EXC_BAD_ACCESS, Could not access memory.\nReason: KERN_PROTECTION_FAILURE at address: 0x0000005c\n0x90b39afa in std::__numpunct_cache<char>::_M_cache ()\n(gdb) bt\n#0  0x90b39afa in std::__numpunct_cache<char>::_M_cache ()\n#1  0x90b41feb in std::__write<char> ()\n#2  0x90b3c408 in std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long> ()\n#3  0x90b3c54f in std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::do_put ()\n#4  0x02446f7a in std::ostream::_M_insert<long> ()\n#5  0x0166438e in polybori::CCuddCore::CCuddCore ()\n#6  0x01661680 in polybori::BoolePolyRing::BoolePolyRing ()\n#7  0x015a3d52 in init_module_PyPolyBoRi ()\n#8  0x021780fd in boost::python::handle_exception_impl ()\n#9  0x0217917c in boost::python::handle_exception<void (*)()> ()\n#10 0x02178e83 in boost::python::detail::init_module ()\n#11 0x015a3c2b in initPyPolyBoRi ()\n#12 0x00269231 in _PyImport_LoadDynamicModule ()\n```",
    "created_at": "2011-08-23T23:53:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118478",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:71" align="right">comment:71</div>

that helped. Does this make any sense to you

```
ython2.7(21230) malloc: *** error for object 0x249ae10: Non-aligned pointer being freed (2)
*** set a breakpoint in malloc_error_break to debug

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0x0000005c
0x90b39afa in std::__numpunct_cache<char>::_M_cache ()
(gdb) bt
#0  0x90b39afa in std::__numpunct_cache<char>::_M_cache ()
#1  0x90b41feb in std::__write<char> ()
#2  0x90b3c408 in std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long> ()
#3  0x90b3c54f in std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::do_put ()
#4  0x02446f7a in std::ostream::_M_insert<long> ()
#5  0x0166438e in polybori::CCuddCore::CCuddCore ()
#6  0x01661680 in polybori::BoolePolyRing::BoolePolyRing ()
#7  0x015a3d52 in init_module_PyPolyBoRi ()
#8  0x021780fd in boost::python::handle_exception_impl ()
#9  0x0217917c in boost::python::handle_exception<void (*)()> ()
#10 0x02178e83 in boost::python::detail::init_module ()
#11 0x015a3c2b in initPyPolyBoRi ()
#12 0x00269231 in _PyImport_LoadDynamicModule ()
```



---

archive/issue_comments_118479.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@kiwifb](#comment%3A66):\n> Looking back in this thread what happened to -Wl,-undefined -Wl,dynamic_lookup for OS X? I suspect that would do the trick we are after. I looked at what libtool does in the case of m4ri:\n\nI misunderstood that this was superseeded by `-Wl,-flat_namespace `. Should this also be added to the bundle?",
    "created_at": "2011-08-24T00:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118479",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@kiwifb](#comment%3A66):
> Looking back in this thread what happened to -Wl,-undefined -Wl,dynamic_lookup for OS X? I suspect that would do the trick we are after. I looked at what libtool does in the case of m4ri:

I misunderstood that this was superseeded by `-Wl,-flat_namespace `. Should this also be added to the bundle?



---

archive/issue_comments_118480.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@kiwifb](#comment%3A71):\n> that helped. Does this make any sense to you\n\nYeah, it's the streaming of boost-python-based objects via std-streams. Moving hat stuff to a (third) shared lib seems to cure thing. I'm trying to get that into bitbicket now",
    "created_at": "2011-08-24T00:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118480",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@kiwifb](#comment%3A71):
> that helped. Does this make any sense to you

Yeah, it's the streaming of boost-python-based objects via std-streams. Moving hat stuff to a (third) shared lib seems to cure thing. I'm trying to get that into bitbicket now



---

archive/issue_comments_118481.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nYou mean site-package/polybori/dynamic/Pypolibori.{so,bundle}, I believe bundle is for frameworks in OS X, sage doesn't build python as a framework I believe (unless the build system default to it). \n\nIn any case I don't think so. \n\nOne would think that -flat_namespace and -undefined dynamic_lookup are equivalent but may be they aren't.",
    "created_at": "2011-08-24T00:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118481",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:74" align="right">comment:74</div>

You mean site-package/polybori/dynamic/Pypolibori.{so,bundle}, I believe bundle is for frameworks in OS X, sage doesn't build python as a framework I believe (unless the build system default to it). 

In any case I don't think so. 

One would think that -flat_namespace and -undefined dynamic_lookup are equivalent but may be they aren't.



---

archive/issue_comments_118482.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nSo, I pushed my changes to bitbucket. But still ipbori only works when called from lib directory, because the install_name_tool calls are missing up to now. I hope, that it would work, if you add them into your ebuild script. (Maybe I can find a way to add those to scons tomorrow.)\n\nBTW: I had to remove-undefined dynamic_lookup flags. (Otherwise some of the malloc-errors occurred.)",
    "created_at": "2011-08-24T00:48:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118482",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:75" align="right">comment:75</div>

So, I pushed my changes to bitbucket. But still ipbori only works when called from lib directory, because the install_name_tool calls are missing up to now. I hope, that it would work, if you add them into your ebuild script. (Maybe I can find a way to add those to scons tomorrow.)

BTW: I had to remove-undefined dynamic_lookup flags. (Otherwise some of the malloc-errors occurred.)



---

archive/issue_comments_118483.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n \n \n ### Current Sage library patch\n-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p2.patch.gz\n+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz\n \n ### Current spkg:\n * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p2.spkg\n``````\n",
    "created_at": "2011-08-25T11:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118483",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 
 
 ### Current Sage library patch
-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p2.patch.gz
+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz
 
 ### Current spkg:
 * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p2.spkg
``````




---

archive/issue_comments_118484.json:
```json
{
    "body": "Attachment: **[polybori-0.8-rc.p2.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p2.patch.gz)**\n\nmost recent cummulative patch",
    "created_at": "2011-08-25T11:28:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118484",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[polybori-0.8-rc.p2.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p2.patch.gz)**

most recent cummulative patch



---

archive/issue_comments_118485.json:
```json
{
    "body": "Attachment: **[polybori-0.8-rc.p3.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p3.patch.gz)**\n\nRebased patch to 4.7.2alpha1",
    "created_at": "2011-08-25T22:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118485",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[polybori-0.8-rc.p3.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p3.patch.gz)**

Rebased patch to 4.7.2alpha1



---

archive/issue_comments_118486.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nThe spkg together with the rebased patch builds, installs and tests well on an SuSE Enterprise 11 and Mac OS X. It's not clear, whether PolyBoRi 0.8 is also affected by the incompatibility with newest libm4ri on Gentoo 32Bit, which is mentioned in #11574#27 (I cannot reproduce that issue.)",
    "created_at": "2011-08-26T08:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118486",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:77" align="right">comment:77</div>

The spkg together with the rebased patch builds, installs and tests well on an SuSE Enterprise 11 and Mac OS X. It's not clear, whether PolyBoRi 0.8 is also affected by the incompatibility with newest libm4ri on Gentoo 32Bit, which is mentioned in #11574#27 (I cannot reproduce that issue.)



---

archive/issue_comments_118487.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nThe following spkg includes the sources of the newest release candidate\nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p3.spkg\nThe upstream sources are now compatible with Gentoo-prefix (important for the sage-on-gentoo project) even on Darwin.\nIt also incorporates the fixes of #11574 and #11757, resp., for m4ri compatibility.",
    "created_at": "2011-09-02T20:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118487",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:78" align="right">comment:78</div>

The following spkg includes the sources of the newest release candidate
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p3.spkg
The upstream sources are now compatible with Gentoo-prefix (important for the sage-on-gentoo project) even on Darwin.
It also incorporates the fixes of #11574 and #11757, resp., for m4ri compatibility.



---

archive/issue_comments_118488.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,8 +5,8 @@\n \n \n ### Current Sage library patch\n-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz\n+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p3.patch.gz\n \n ### Current spkg:\n-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p2.spkg\n+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p3.spkg\n \n``````\n",
    "created_at": "2011-09-02T20:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118488",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,8 +5,8 @@
 
 
 ### Current Sage library patch
-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p1.patch.gz
+* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p3.patch.gz
 
 ### Current spkg:
-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p2.spkg
+* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p3.spkg
 
``````




---

archive/issue_comments_118489.json:
```json
{
    "body": "Additional patch if #11574 is merged",
    "created_at": "2011-09-07T09:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118489",
    "user": "https://github.com/alexanderdreyer"
}
```

Additional patch if #11574 is merged



---

archive/issue_comments_118490.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,7 @@\n \n ### Current Sage library patch\n * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p3.patch.gz\n+* if #11574 is already merged: https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc-11574.patch.gz\n \n ### Current spkg:\n * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p3.spkg\n``````\n",
    "created_at": "2011-09-07T09:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118490",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,7 @@
 
 ### Current Sage library patch
 * https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p3.patch.gz
+* if #11574 is already merged: https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc-11574.patch.gz
 
 ### Current spkg:
 * http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p3.spkg
``````




---

archive/issue_comments_118491.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nAttachment: **[polybori-0.8-rc-11574.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc-11574.patch.gz)**",
    "created_at": "2011-09-07T09:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118491",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:79" align="right">comment:79</div>

Attachment: **[polybori-0.8-rc-11574.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc-11574.patch.gz)**



---

archive/issue_comments_118492.json:
```json
{
    "body": "Patch for integration PolyBoRi's release 0.8.0 (depends on #11574)",
    "created_at": "2011-09-08T09:29:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118492",
    "user": "https://github.com/alexanderdreyer"
}
```

Patch for integration PolyBoRi's release 0.8.0 (depends on #11574)



---

archive/issue_comments_118493.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,13 @@\n PolyBoRi 0.8 will come with some changes in the interface (in particular the infamous global settings will be removed)\n \n-So there is an extensive alpha phase this time:\n+So there was an extensive alpha phase this time:\n https://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/\n \n+The final release is here:\n+https://sourceforge.net/projects/polybori/files/polybori/0.8.0/\n \n-### Current Sage library patch\n-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p3.patch.gz\n-* if #11574 is already merged: https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc-11574.patch.gz\n+### Current patches/spkg\n+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p0.spkg\n+* **Apply** https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz\n \n-### Current spkg:\n-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p3.spkg\n \n``````\n",
    "created_at": "2011-09-08T09:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118493",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,13 @@
 PolyBoRi 0.8 will come with some changes in the interface (in particular the infamous global settings will be removed)
 
-So there is an extensive alpha phase this time:
+So there was an extensive alpha phase this time:
 https://sourceforge.net/projects/polybori/files/polybori/0.8.alphas/
 
+The final release is here:
+https://sourceforge.net/projects/polybori/files/polybori/0.8.0/
 
-### Current Sage library patch
-* https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc.p3.patch.gz
-* if #11574 is already merged: https://github.com/sagemath/sage/files/ticket11575/polybori-0.8-rc-11574.patch.gz
+### Current patches/spkg
+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p0.spkg
+* **Apply** https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz
 
-### Current spkg:
-* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8-rc.p3.spkg
 
``````




---

archive/issue_comments_118494.json:
```json
{
    "body": "Dependencies: **#11574**",
    "created_at": "2011-09-08T09:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118494",
    "user": "https://github.com/alexanderdreyer"
}
```

Dependencies: **#11574**



---

archive/issue_events_153305.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-08T09:42:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "title_is": "Update PolyBoRi to release 0.8.0",
    "title_was": "Preparing for PolyBoRi's upcoming release 0.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153305"
}
```



---

archive/issue_comments_118495.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nAttachment: **[polybori-0.8.0.p0.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz)**\n\nFinally, PolyBoRi 0.8 is out. Here's the updated spkg\nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p0.spkg\n\nThe most recent patch (for devel/sage) is https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz\n\nNote that all depends on #11574 now (if someone want's to try out without #11574, please refer to the previous patch).\n\nThe tests from devel/sage/sage/rings/ and  devel/sage/sage/crypto/ ran successfully (tested with sage-4.7.2alpha1 on SuSE Enterprise 11, Gentoo i486, Mac OSX 10.5 ppc).",
    "created_at": "2011-09-08T09:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118495",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:80" align="right">comment:80</div>

Attachment: **[polybori-0.8.0.p0.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz)**

Finally, PolyBoRi 0.8 is out. Here's the updated spkg
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p0.spkg

The most recent patch (for devel/sage) is https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz

Note that all depends on #11574 now (if someone want's to try out without #11574, please refer to the previous patch).

The tests from devel/sage/sage/rings/ and  devel/sage/sage/crypto/ ran successfully (tested with sage-4.7.2alpha1 on SuSE Enterprise 11, Gentoo i486, Mac OSX 10.5 ppc).



---

archive/issue_events_153306.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-08T09:42:56Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "subject": "https://github.com/alexanderdreyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153306"
}
```



---

archive/issue_comments_118496.json:
```json
{
    "body": "Author: **Alexander Dreyer**",
    "created_at": "2011-09-08T09:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118496",
    "user": "https://github.com/alexanderdreyer"
}
```

Author: **Alexander Dreyer**



---

archive/issue_events_153307.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-08T09:43:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153307"
}
```



---

archive/issue_events_153308.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-08T09:43:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153308"
}
```



---

archive/issue_comments_118497.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nMhhh, it fails to build for me on sage.math with 4.7.2.alpha1:\n\n```\n/mnt/usb1/scratch/malb/sage-4.7.2/local/include/csage/ccobject.h: In function \u2018T* Construct_p(void*, const P&) [with T = polybori::BooleVariable, P = int]\u2019:\nsage/rings/polynomial/pbori.cpp:35286:   instantiated from here\n/mnt/usb1/scratch/malb/sage-4.7.2/local/include/csage/ccobject.h:47: error: no matching function for call to \u2018polybori::BooleVariable::BooleVariable(const int&)\u2019\n/mnt/usb1/scratch/malb/sage-4.7.2/local/include/polybori/BooleVariable.h:100: note: candidates are: polybori::BooleVariable::BooleVariable(const polybori::BoolePolynomial&)\n/mnt/usb1/scratch/malb/sage-4.7.2/local/include/polybori/BooleVariable.h:67: note:                 polybori::BooleVariable::BooleVariable(const polybori::BooleVariable&)\n/mnt/usb1/scratch/malb/sage-4.7.2/local/include/polybori/BooleVariable.h:63: note:                 polybori::BooleVariable::BooleVariable(const polybori::BoolePolyRing&)\n/mnt/usb1/scratch/malb/sage-4.7.2/local/include/polybori/BooleVariable.h:59: note:                 polybori::BooleVariable::BooleVariable(int, const polybori::BoolePolyRing&)\nerror: command 'gcc' failed with exit status 1\n```\n\nHere's what patches I have applied:\n\n```\n$ hg qap\nm4ri_20110601.patch\ntrac_11574_m4ri_sse2.patch\npolybori-0.8.0.p0.patch\n```",
    "created_at": "2011-09-08T13:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118497",
    "user": "https://github.com/malb"
}
```

<div id="comment:82" align="right">comment:82</div>

Mhhh, it fails to build for me on sage.math with 4.7.2.alpha1:

```
/mnt/usb1/scratch/malb/sage-4.7.2/local/include/csage/ccobject.h: In function ‘T* Construct_p(void*, const P&) [with T = polybori::BooleVariable, P = int]’:
sage/rings/polynomial/pbori.cpp:35286:   instantiated from here
/mnt/usb1/scratch/malb/sage-4.7.2/local/include/csage/ccobject.h:47: error: no matching function for call to ‘polybori::BooleVariable::BooleVariable(const int&)’
/mnt/usb1/scratch/malb/sage-4.7.2/local/include/polybori/BooleVariable.h:100: note: candidates are: polybori::BooleVariable::BooleVariable(const polybori::BoolePolynomial&)
/mnt/usb1/scratch/malb/sage-4.7.2/local/include/polybori/BooleVariable.h:67: note:                 polybori::BooleVariable::BooleVariable(const polybori::BooleVariable&)
/mnt/usb1/scratch/malb/sage-4.7.2/local/include/polybori/BooleVariable.h:63: note:                 polybori::BooleVariable::BooleVariable(const polybori::BoolePolyRing&)
/mnt/usb1/scratch/malb/sage-4.7.2/local/include/polybori/BooleVariable.h:59: note:                 polybori::BooleVariable::BooleVariable(int, const polybori::BoolePolyRing&)
error: command 'gcc' failed with exit status 1
```

Here's what patches I have applied:

```
$ hg qap
m4ri_20110601.patch
trac_11574_m4ri_sse2.patch
polybori-0.8.0.p0.patch
```



---

archive/issue_comments_118498.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@malb](#comment%3A82):\n> Mhhh, it fails to build for me on sage.math with 4.7.2.alpha1:\n>\n>[...]\n\nLooks like the changes to pbori.pyx were not effective. Did it rebuild `pbori.cpp` from `pbori.pyx`?",
    "created_at": "2011-09-09T08:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118498",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@malb](#comment%3A82):
> Mhhh, it fails to build for me on sage.math with 4.7.2.alpha1:
>
>[...]

Looks like the changes to pbori.pyx were not effective. Did it rebuild `pbori.cpp` from `pbori.pyx`?



---

archive/issue_comments_118499.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,6 @@\n \n ### Current patches/spkg\n * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p0.spkg\n-* **Apply** https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz\n+* **Apply** [attachment: polybori-0.8.0.p0.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz)\n \n \n``````\n",
    "created_at": "2011-09-09T09:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118499",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,6 @@
 
 ### Current patches/spkg
 * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p0.spkg
-* **Apply** https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz
+* **Apply** [attachment: polybori-0.8.0.p0.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz)
 
 
``````




---

archive/issue_comments_118500.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nGot it, I accidentally applied the HTML description of the patch instead of the patch. Hence, the patch did nothing.\n\nShall I delete all other attachments btw.?",
    "created_at": "2011-09-09T09:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118500",
    "user": "https://github.com/malb"
}
```

<div id="comment:84" align="right">comment:84</div>

Got it, I accidentally applied the HTML description of the patch instead of the patch. Hence, the patch did nothing.

Shall I delete all other attachments btw.?



---

archive/issue_comments_118501.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [@malb](#comment%3A84):\n> Got it, I accidentally applied the HTML description of the patch instead of the patch. Hence, the patch did nothing.\n\nI cannot count how often this happened to me :-)\n\n> Shall I delete all other attachments btw.?\n\nI prefer to keep them for documentation reasons.",
    "created_at": "2011-09-09T09:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118501",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [@malb](#comment%3A84):
> Got it, I accidentally applied the HTML description of the patch instead of the patch. Hence, the patch did nothing.

I cannot count how often this happened to me :-)

> Shall I delete all other attachments btw.?

I prefer to keep them for documentation reasons.



---

archive/issue_comments_118502.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nPatch applies cleanly & doctests pass. I skimmed it and it looks good. I'll give it another read but we're quite close to a positive review.",
    "created_at": "2011-09-09T10:18:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118502",
    "user": "https://github.com/malb"
}
```

<div id="comment:86" align="right">comment:86</div>

Patch applies cleanly & doctests pass. I skimmed it and it looks good. I'll give it another read but we're quite close to a positive review.



---

archive/issue_events_153309.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-09-28T14:28:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153309"
}
```



---

archive/issue_events_153310.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-09-28T14:28:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153310"
}
```



---

archive/issue_comments_118503.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nAlright, talked to Alexander. Positive review.",
    "created_at": "2011-09-28T14:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118503",
    "user": "https://github.com/malb"
}
```

<div id="comment:87" align="right">comment:87</div>

Alright, talked to Alexander. Positive review.



---

archive/issue_comments_118504.json:
```json
{
    "body": "Reviewer: **Martin Albrecht**",
    "created_at": "2011-09-28T14:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118504",
    "user": "https://github.com/malb"
}
```

Reviewer: **Martin Albrecht**



---

archive/issue_comments_118505.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\noops, still needs SSE2 fix applied.",
    "created_at": "2011-09-28T14:36:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118505",
    "user": "https://github.com/malb"
}
```

<div id="comment:88" align="right">comment:88</div>

oops, still needs SSE2 fix applied.



---

archive/issue_events_153311.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-09-28T14:36:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153311"
}
```



---

archive/issue_events_153312.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-09-28T14:36:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153312"
}
```



---

archive/issue_events_153313.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-28T22:33:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153313"
}
```



---

archive/issue_events_153314.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-28T22:33:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153314"
}
```



---

archive/issue_comments_118506.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nHere's a new spkg with the sse2 fix (backported from PolyBoRi 0.8.1):\nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p1.spkg\nI also had to rebase the patch to for Sage 4.7.2alpha3.",
    "created_at": "2011-09-28T22:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118506",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:89" align="right">comment:89</div>

Here's a new spkg with the sse2 fix (backported from PolyBoRi 0.8.1):
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p1.spkg
I also had to rebase the patch to for Sage 4.7.2alpha3.



---

archive/issue_comments_118507.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n https://sourceforge.net/projects/polybori/files/polybori/0.8.0/\n \n ### Current patches/spkg\n-* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p0.spkg\n-* **Apply** [attachment: polybori-0.8.0.p0.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz)\n+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p1.spkg\n+* **Apply** [attachment: polybori-0.8.0.p1.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)\n \n \n``````\n",
    "created_at": "2011-09-28T22:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118507",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 https://sourceforge.net/projects/polybori/files/polybori/0.8.0/
 
 ### Current patches/spkg
-* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p0.spkg
-* **Apply** [attachment: polybori-0.8.0.p0.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p0.patch.gz)
+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p1.spkg
+* **Apply** [attachment: polybori-0.8.0.p1.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)
 
 
``````




---

archive/issue_comments_118508.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nHere are the essential changes between the patches:\n\n```\n+--- a/sage/rings/polynomial/pbori.pyx\n++++ b/sage/rings/polynomial/pbori.pyx  \n\n@@ -1664,16 +1502,24 @@                                                                                              \n          if PY_TYPE_CHECK(x, BooleanPolynomial):                                                                    \n              return x                                                                                               \n +        elif PY_TYPE_CHECK(x, BooleSet):                                                                           \n-+            return (<BooleSet>x)._ring._coerce_(x)                                                                 \n++            return (<BooleSet>x)._ring(x)                                                                          \n          elif PY_TYPE_CHECK(x, BooleanMonomial):                                                                    \n-             return (<BooleanMonomial>x)._ring._coerce_(x)                                                          \n+             return (<BooleanMonomial>x)._ring(x)                                                                   \n -#new_BP_from_PBMonom((<BooleanMonomial>x)._ring, (<BooleanMonomial>x)._pbmonom)                                    \n+-        else:                                                                                                      \n+-            #return get_cring()._coerce_(x)                                                                        \n +        elif PY_TYPE_CHECK(ring, BooleanPolynomialRing):                                                           \n-+            return (<BooleanPolynomialRing>ring)._coerce_(x)                                                       \n-         else:                                                                                                      \n--            return get_cring()._coerce_(x)                                                                         \n+             # It is a wrong use of the notion of \"coercion\"                                                        \n+             # to say that the boolean set is \"coerced\" into                                                        \n+             # a boolean polynomial ring: Boolean sets have                                                         \n+             # no parent, and thus there is no coercion map                                                         \n+             # from that parent to the ring.                                                                        \n+             # So, it is just a conversion. [Simon King]                                                            \n+-            return get_cring()(x)                                                                                  \n -                                                                                                                   \n -cdef class MonomialFactory:                                                                                        \n++            return (<BooleanPolynomialRing>ring)(x)                                                                \n++        else:                                                                                                      \n +            raise TypeError, \\                                                                                     \n +              \"Cannot generate Boolean polynomial from %s , %s%\"%(str(type(x)), str(type(ring)))                   \n +                                                                                                                   \n@@ -1719,7 +1565,7 @@                                                                                                \n +                   return result.lm()                                                                              \n +                return result                                                                                      \n +            except:                                                                                                \n-+                raise #TypeError, \"Cannot convert to Boolean Monomial %s\"%(str(type(x)))                           \n++                raise TypeError, \"Cannot convert to Boolean Monomial %s\"%(str(type(x)))                            \n +\n +cdef class VariableConstruct:\n      \"\"\"\n@@ -3019,7 +2865,7 @@\n +            if PY_TYPE_CHECK(arg, BooleanPolynomial):\n +                return arg\n +            elif PY_TYPE_CHECK(arg, BooleSet):\n-+                return (<BooleSet>arg)._ring._coerce_(arg)\n++                return (<BooleSet>arg)._ring(arg)\n +            elif PY_TYPE_CHECK(arg, BooleanMonomial):\n +                return (<BooleanMonomial>arg)._ring._coerce_(arg)\n +            elif PY_TYPE_CHECK(ring, BooleanPolynomialRing):\n```",
    "created_at": "2011-09-28T22:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118508",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:90" align="right">comment:90</div>

Here are the essential changes between the patches:

```
+--- a/sage/rings/polynomial/pbori.pyx
++++ b/sage/rings/polynomial/pbori.pyx  

@@ -1664,16 +1502,24 @@                                                                                              
          if PY_TYPE_CHECK(x, BooleanPolynomial):                                                                    
              return x                                                                                               
 +        elif PY_TYPE_CHECK(x, BooleSet):                                                                           
-+            return (<BooleSet>x)._ring._coerce_(x)                                                                 
++            return (<BooleSet>x)._ring(x)                                                                          
          elif PY_TYPE_CHECK(x, BooleanMonomial):                                                                    
-             return (<BooleanMonomial>x)._ring._coerce_(x)                                                          
+             return (<BooleanMonomial>x)._ring(x)                                                                   
 -#new_BP_from_PBMonom((<BooleanMonomial>x)._ring, (<BooleanMonomial>x)._pbmonom)                                    
+-        else:                                                                                                      
+-            #return get_cring()._coerce_(x)                                                                        
 +        elif PY_TYPE_CHECK(ring, BooleanPolynomialRing):                                                           
-+            return (<BooleanPolynomialRing>ring)._coerce_(x)                                                       
-         else:                                                                                                      
--            return get_cring()._coerce_(x)                                                                         
+             # It is a wrong use of the notion of "coercion"                                                        
+             # to say that the boolean set is "coerced" into                                                        
+             # a boolean polynomial ring: Boolean sets have                                                         
+             # no parent, and thus there is no coercion map                                                         
+             # from that parent to the ring.                                                                        
+             # So, it is just a conversion. [Simon King]                                                            
+-            return get_cring()(x)                                                                                  
 -                                                                                                                   
 -cdef class MonomialFactory:                                                                                        
++            return (<BooleanPolynomialRing>ring)(x)                                                                
++        else:                                                                                                      
 +            raise TypeError, \                                                                                     
 +              "Cannot generate Boolean polynomial from %s , %s%"%(str(type(x)), str(type(ring)))                   
 +                                                                                                                   
@@ -1719,7 +1565,7 @@                                                                                                
 +                   return result.lm()                                                                              
 +                return result                                                                                      
 +            except:                                                                                                
-+                raise #TypeError, "Cannot convert to Boolean Monomial %s"%(str(type(x)))                           
++                raise TypeError, "Cannot convert to Boolean Monomial %s"%(str(type(x)))                            
 +
 +cdef class VariableConstruct:
      """
@@ -3019,7 +2865,7 @@
 +            if PY_TYPE_CHECK(arg, BooleanPolynomial):
 +                return arg
 +            elif PY_TYPE_CHECK(arg, BooleSet):
-+                return (<BooleSet>arg)._ring._coerce_(arg)
++                return (<BooleSet>arg)._ring(arg)
 +            elif PY_TYPE_CHECK(arg, BooleanMonomial):
 +                return (<BooleanMonomial>arg)._ring._coerce_(arg)
 +            elif PY_TYPE_CHECK(ring, BooleanPolynomialRing):
```



---

archive/issue_comments_118509.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\ndoctests work.",
    "created_at": "2011-09-29T09:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118509",
    "user": "https://github.com/malb"
}
```

<div id="comment:91" align="right">comment:91</div>

doctests work.



---

archive/issue_events_153315.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-09-29T09:25:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153315"
}
```



---

archive/issue_events_153316.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-09-29T09:25:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153316"
}
```



---

archive/issue_comments_118510.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nwow, thanks to all, awesome (as defined in the Oxford english dictionary).",
    "created_at": "2011-09-29T09:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118510",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:92" align="right">comment:92</div>

wow, thanks to all, awesome (as defined in the Oxford english dictionary).



---

archive/issue_comments_118511.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nAs discussed with Simon King, I uploaded another patch which does the following:\n\n```\n1505c1505\n< +            return (<BooleSet>x)._ring._element_constructor(x)\n---\n> +            return (<BooleSet>x)._ring(x)\n1521c1521\n< +            return (<BooleanPolynomialRing>ring)._element_constructor(x)\n---\n> +            return (<BooleanPolynomialRing>ring)(x)\n2868c2868\n< +                return (<BooleSet>arg)._ring._element_constructor(arg)\n---\n> +                return (<BooleSet>arg)._ring(arg)\n```",
    "created_at": "2011-09-29T10:32:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118511",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:93" align="right">comment:93</div>

As discussed with Simon King, I uploaded another patch which does the following:

```
1505c1505
< +            return (<BooleSet>x)._ring._element_constructor(x)
---
> +            return (<BooleSet>x)._ring(x)
1521c1521
< +            return (<BooleanPolynomialRing>ring)._element_constructor(x)
---
> +            return (<BooleanPolynomialRing>ring)(x)
2868c2868
< +                return (<BooleSet>arg)._ring._element_constructor(arg)
---
> +                return (<BooleSet>arg)._ring(arg)
```



---

archive/issue_events_153317.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-29T11:37:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153317"
}
```



---

archive/issue_events_153318.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-29T11:37:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153318"
}
```



---

archive/issue_comments_118512.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nNote the newest patch uses `_element_constructor_` instead of `_element_constructor`.",
    "created_at": "2011-09-29T11:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118512",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:94" align="right">comment:94</div>

Note the newest patch uses `_element_constructor_` instead of `_element_constructor`.



---

archive/issue_events_153319.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-29T11:38:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153319"
}
```



---

archive/issue_events_153320.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-09-29T11:38:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153320"
}
```



---

archive/issue_comments_118513.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nThe new splkg/patch  build/installs and tests successfully on SLES 11 on amd64.",
    "created_at": "2011-09-29T18:12:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118513",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:96" align="right">comment:96</div>

The new splkg/patch  build/installs and tests successfully on SLES 11 on amd64.



---

archive/issue_events_153321.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-09-29T20:49:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153321"
}
```



---

archive/issue_events_153322.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-09-29T20:49:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153322"
}
```



---

archive/issue_comments_118514.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nAlright, back to positive review.",
    "created_at": "2011-09-29T20:49:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118514",
    "user": "https://github.com/malb"
}
```

<div id="comment:97" align="right">comment:97</div>

Alright, back to positive review.



---

archive/issue_events_153323.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-05T07:52:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153323"
}
```



---

archive/issue_events_153324.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-05T07:52:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153324"
}
```



---

archive/issue_comments_118515.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nThe Sage library patch should be rebased to sage-4.7.2.alpha3.",
    "created_at": "2011-10-06T08:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118515",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:99" align="right">comment:99</div>

The Sage library patch should be rebased to sage-4.7.2.alpha3.



---

archive/issue_events_153325.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-06T08:51:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153325"
}
```



---

archive/issue_events_153326.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-06T08:51:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153326"
}
```



---

archive/issue_comments_118516.json:
```json
{
    "body": "Work Issues: **rebase**",
    "created_at": "2011-10-06T08:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118516",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **rebase**



---

archive/issue_events_153327.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-10-06T21:45:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153327"
}
```



---

archive/issue_events_153328.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-10-06T21:45:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153328"
}
```



---

archive/issue_comments_118517.json:
```json
{
    "body": "Changed work issues from **rebase** to none",
    "created_at": "2011-10-06T21:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118517",
    "user": "https://github.com/alexanderdreyer"
}
```

Changed work issues from **rebase** to none



---

archive/issue_comments_118518.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nSince the patch applied without fuzz (and passes the tests) I guess the parent checksum in the patch was invalid (indeed it came from some prerelease). The current version of the patch should do its job.",
    "created_at": "2011-10-06T21:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118518",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:100" align="right">comment:100</div>

Since the patch applied without fuzz (and passes the tests) I guess the parent checksum in the patch was invalid (indeed it came from some prerelease). The current version of the patch should do its job.



---

archive/issue_comments_118519.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nPlease check, whether this patch applies.",
    "created_at": "2011-10-06T22:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118519",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:101" align="right">comment:101</div>

Please check, whether this patch applies.



---

archive/issue_comments_118520.json:
```json
{
    "body": "Changed dependencies from **#11574** to **#11574, #9138**",
    "created_at": "2011-10-07T08:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118520",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#11574** to **#11574, #9138**



---

archive/issue_comments_118521.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nYes, it does apply.  Possibly the previous patch also applied.  I tried to apply the patch to sage-4.7.2.alpha3 without #9138, this failed.  Since the fate of #9138 is not so clear (it could very well be unmerged in sage-4.7.2.alpha4), I will postpone testing this new PolyBoRi until it is clear how #9138 will evolve.",
    "created_at": "2011-10-07T08:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118521",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:102" align="right">comment:102</div>

Yes, it does apply.  Possibly the previous patch also applied.  I tried to apply the patch to sage-4.7.2.alpha3 without #9138, this failed.  Since the fate of #9138 is not so clear (it could very well be unmerged in sage-4.7.2.alpha4), I will postpone testing this new PolyBoRi until it is clear how #9138 will evolve.



---

archive/issue_events_153329.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-07T08:46:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153329"
}
```



---

archive/issue_events_153330.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-07T08:46:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153330"
}
```



---

archive/issue_comments_118522.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nAlexander, could you also include (at least) the following:\n\n```diff\n\ndiff --git a/patches/SConstruct b/patches/SConstruct\n--- a/patches/SConstruct\n+++ b/patches/SConstruct\n@@ -545,6 +545,8 @@\n     env.Append(CPPDEFINES=[\"BSD\"])\n \n env.Append(LIBPATH=[CuddPath()])\n+if os.environ.has_key(\"LD_LIBRARY_PATH\"):\n+    env.Append(LIBPATH=os.environ[\"LD_LIBRARY_PATH\"].split(os.pathsep))\n \n cudd_resources = glob(CuddPath('util/*.c'))\n \n```\n\nOtherwise the build breaks with \"non-standard\" compiler setups since PolyBoRi (or `SConstruct`) invalidates any setting of (e.g.) `LDFLAGS`, `LD_LIBRARY_PATH` and `LIBRARY_PATH`, i.e., removes them from the environment.\n\nThe diff is against PolyBoRi 0.7.1.p6.",
    "created_at": "2011-10-07T13:34:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118522",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:103" align="right">comment:103</div>

Alexander, could you also include (at least) the following:

```diff

diff --git a/patches/SConstruct b/patches/SConstruct
--- a/patches/SConstruct
+++ b/patches/SConstruct
@@ -545,6 +545,8 @@
     env.Append(CPPDEFINES=["BSD"])
 
 env.Append(LIBPATH=[CuddPath()])
+if os.environ.has_key("LD_LIBRARY_PATH"):
+    env.Append(LIBPATH=os.environ["LD_LIBRARY_PATH"].split(os.pathsep))
 
 cudd_resources = glob(CuddPath('util/*.c'))
 
```

Otherwise the build breaks with "non-standard" compiler setups since PolyBoRi (or `SConstruct`) invalidates any setting of (e.g.) `LDFLAGS`, `LD_LIBRARY_PATH` and `LIBRARY_PATH`, i.e., removes them from the environment.

The diff is against PolyBoRi 0.7.1.p6.



---

archive/issue_comments_118523.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nReplying to [@jdemeyer](#comment%3A102):\nPlease don't tell me you plan to de-merge #9138.  It was really hard to get thing rebased to sage-4.7.2.alpha3 because of it.\nMaybe the PolyBoRi-related part of #9138 could stay anyway?",
    "created_at": "2011-10-07T13:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118523",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:104" align="right">comment:104</div>

Replying to [@jdemeyer](#comment%3A102):
Please don't tell me you plan to de-merge #9138.  It was really hard to get thing rebased to sage-4.7.2.alpha3 because of it.
Maybe the PolyBoRi-related part of #9138 could stay anyway?



---

archive/issue_comments_118524.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nReplying to [@nexttime](#comment%3A103):\nHi Leif,,\n> \n> ```diff\n> ```\n\nenv.Append(LIBPATH=os.environ[\"LD_LIBRARY_PATH\"].split(os.pathsep))\n> }}}\n\nThis could be done in the custom.py file more easily.\n\n> Otherwise the build breaks with \"non-standard\" compiler setups since PolyBoRi (or `SConstruct`) invalidates any setting of (e.g.) `LDFLAGS`, `LD_LIBRARY_PATH` and `LIBRARY_PATH`, i.e., removes them from the environment.\n\nLD_LIBRARY_PATH is exported to the SCons-enviroment and it works for me. I'll check whether something has hanged in recent SCons versions.",
    "created_at": "2011-10-07T13:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118524",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:105" align="right">comment:105</div>

Replying to [@nexttime](#comment%3A103):
Hi Leif,,
> 
> ```diff
> ```

env.Append(LIBPATH=os.environ["LD_LIBRARY_PATH"].split(os.pathsep))
> }}}

This could be done in the custom.py file more easily.

> Otherwise the build breaks with "non-standard" compiler setups since PolyBoRi (or `SConstruct`) invalidates any setting of (e.g.) `LDFLAGS`, `LD_LIBRARY_PATH` and `LIBRARY_PATH`, i.e., removes them from the environment.

LD_LIBRARY_PATH is exported to the SCons-enviroment and it works for me. I'll check whether something has hanged in recent SCons versions.



---

archive/issue_comments_118525.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nThe PolyBoRi spkg currently uses the following environment variables:\n`CC CXX SAGESOFLAGS PYTHONHOME SAGE_LOCAL`\n\nIt would be a two liner to support more. Here's what I frequently use:\n`CFLAGS CXXFLAGS CPPFLAGS LDFLAGS` \nDo we need more?",
    "created_at": "2011-10-07T14:00:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118525",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:106" align="right">comment:106</div>

The PolyBoRi spkg currently uses the following environment variables:
`CC CXX SAGESOFLAGS PYTHONHOME SAGE_LOCAL`

It would be a two liner to support more. Here's what I frequently use:
`CFLAGS CXXFLAGS CPPFLAGS LDFLAGS` 
Do we need more?



---

archive/issue_comments_118526.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nReplying to [@alexanderdreyer](#comment%3A104):\n> Replying to [@jdemeyer](#comment%3A102):\n> Please don't tell me you plan to de-merge #9138.  It was really hard to get thing rebased to sage-4.7.2.alpha3 because of it.\n> Maybe the PolyBoRi-related part of #9138 could stay anyway?\n\nI think the \"rescue mission\" for #9138 (i.e., ticket #11900) may be successful.",
    "created_at": "2011-10-07T14:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118526",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:107" align="right">comment:107</div>

Replying to [@alexanderdreyer](#comment%3A104):
> Replying to [@jdemeyer](#comment%3A102):
> Please don't tell me you plan to de-merge #9138.  It was really hard to get thing rebased to sage-4.7.2.alpha3 because of it.
> Maybe the PolyBoRi-related part of #9138 could stay anyway?

I think the "rescue mission" for #9138 (i.e., ticket #11900) may be successful.



---

archive/issue_comments_118527.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nReplying to [@alexanderdreyer](#comment%3A104):\n> Replying to [@jdemeyer](#comment%3A102):\n> Please don't tell me you plan to de-merge #9138.  It was really hard to get thing rebased to sage-4.7.2.alpha3 because of it.\n> Maybe the PolyBoRi-related part of #9138 could stay anyway?\n\nFirst of all, Simon King is working really hard to fix #9138, see #11900.  Second, even if #9138 is unmerged in sage-4.7.2.alpha4, it will probably be merged again with #11900, say in sage-4.7.3.alpha0, so there will be no reason to rebase #11575.",
    "created_at": "2011-10-07T15:04:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118527",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:108" align="right">comment:108</div>

Replying to [@alexanderdreyer](#comment%3A104):
> Replying to [@jdemeyer](#comment%3A102):
> Please don't tell me you plan to de-merge #9138.  It was really hard to get thing rebased to sage-4.7.2.alpha3 because of it.
> Maybe the PolyBoRi-related part of #9138 could stay anyway?

First of all, Simon King is working really hard to fix #9138, see #11900.  Second, even if #9138 is unmerged in sage-4.7.2.alpha4, it will probably be merged again with #11900, say in sage-4.7.3.alpha0, so there will be no reason to rebase #11575.



---

archive/issue_comments_118528.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nReplying to [@alexanderdreyer](#comment%3A106):\n> The PolyBoRi spkg currently uses the following environment variables:\n> `CC CXX SAGESOFLAGS PYTHONHOME SAGE_LOCAL`\n> \n> It would be a two liner to support more. Here's what I frequently use:\n> `CFLAGS CXXFLAGS CPPFLAGS LDFLAGS` \n> Do we need more?\n\n*Adding* the latter list to the former should be sufficient. Maybe also add `LD_RUN_PATH`, which is used only if no `-rpath` parameters are present when linking, and (in general) perhaps `ABI` and `CPP` itself.\n\nOther platforms (i.e., operating systems) use different flavours of `LD_LIBRARY_PATH` etc. though, but I don't care much atm... ;-)",
    "created_at": "2011-10-07T15:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118528",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:109" align="right">comment:109</div>

Replying to [@alexanderdreyer](#comment%3A106):
> The PolyBoRi spkg currently uses the following environment variables:
> `CC CXX SAGESOFLAGS PYTHONHOME SAGE_LOCAL`
> 
> It would be a two liner to support more. Here's what I frequently use:
> `CFLAGS CXXFLAGS CPPFLAGS LDFLAGS` 
> Do we need more?

*Adding* the latter list to the former should be sufficient. Maybe also add `LD_RUN_PATH`, which is used only if no `-rpath` parameters are present when linking, and (in general) perhaps `ABI` and `CPP` itself.

Other platforms (i.e., operating systems) use different flavours of `LD_LIBRARY_PATH` etc. though, but I don't care much atm... ;-)



---

archive/issue_comments_118529.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nReplying to [@nexttime](#comment%3A109):\n> Replying to [@alexanderdreyer](#comment%3A106):\n> > The PolyBoRi spkg currently uses the following environment variables:\n> > `CC CXX SAGESOFLAGS PYTHONHOME SAGE_LOCAL`\n> > \n> > It would be a two liner to support more. Here's what I frequently use:\n> > `CFLAGS CXXFLAGS CPPFLAGS LDFLAGS` \n> > Do we need more?\n> \n> \n> *Adding* the latter list to the former should be sufficient. Maybe also add `LD_RUN_PATH`, which is used only if no `-rpath` parameters are present when linking, and (in general) perhaps `ABI` and `CPP` itself.\n\nOoops, and of course `LD_LIBRARY_PATH`, as mentioned and in the diff.\n\n\n\n\n> Other platforms (i.e., operating systems) use different flavours of `LD_LIBRARY_PATH` etc. though, but I don't care much atm... ;-)",
    "created_at": "2011-10-07T15:20:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118529",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:110" align="right">comment:110</div>

Replying to [@nexttime](#comment%3A109):
> Replying to [@alexanderdreyer](#comment%3A106):
> > The PolyBoRi spkg currently uses the following environment variables:
> > `CC CXX SAGESOFLAGS PYTHONHOME SAGE_LOCAL`
> > 
> > It would be a two liner to support more. Here's what I frequently use:
> > `CFLAGS CXXFLAGS CPPFLAGS LDFLAGS` 
> > Do we need more?
> 
> 
> *Adding* the latter list to the former should be sufficient. Maybe also add `LD_RUN_PATH`, which is used only if no `-rpath` parameters are present when linking, and (in general) perhaps `ABI` and `CPP` itself.

Ooops, and of course `LD_LIBRARY_PATH`, as mentioned and in the diff.




> Other platforms (i.e., operating systems) use different flavours of `LD_LIBRARY_PATH` etc. though, but I don't care much atm... ;-)



---

archive/issue_comments_118530.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nReplying to [@jdemeyer](#comment%3A108):\n> First of all, Simon King is working really hard to fix #9138, see #11900.  Second, even if #9138 is unmerged in sage-4.7.2.alpha4, it will probably be merged again with #11900, say in sage-4.7.3.alpha0, so there will be no reason to rebase #11575.\n\nVery well, Simon is good at these things (one cannot be 100% bug/regression-free in the first). so i have to doubt that he manages the rescue mission. \nsage-4.7.3.alpha0 is early enough for PoylyBoRi 0.8 anyway.",
    "created_at": "2011-10-07T20:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118530",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:111" align="right">comment:111</div>

Replying to [@jdemeyer](#comment%3A108):
> First of all, Simon King is working really hard to fix #9138, see #11900.  Second, even if #9138 is unmerged in sage-4.7.2.alpha4, it will probably be merged again with #11900, say in sage-4.7.3.alpha0, so there will be no reason to rebase #11575.

Very well, Simon is good at these things (one cannot be 100% bug/regression-free in the first). so i have to doubt that he manages the rescue mission. 
sage-4.7.3.alpha0 is early enough for PoylyBoRi 0.8 anyway.



---

archive/issue_comments_118531.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nReplying to [@nexttime](#comment%3A110):\n> > *Adding* the latter list to the former should be sufficient. Maybe also add `LD_RUN_PATH`, which is used only if no `-rpath` parameters are present when linking, and (in general) perhaps `ABI` and `CPP` itself.\n> \n> \n> Ooops, and of course `LD_LIBRARY_PATH`, as mentioned and in the diff.\n\nOk, but I'll make a new ticket for this as it is not relation to the version update.",
    "created_at": "2011-10-07T20:11:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118531",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:112" align="right">comment:112</div>

Replying to [@nexttime](#comment%3A110):
> > *Adding* the latter list to the former should be sufficient. Maybe also add `LD_RUN_PATH`, which is used only if no `-rpath` parameters are present when linking, and (in general) perhaps `ABI` and `CPP` itself.
> 
> 
> Ooops, and of course `LD_LIBRARY_PATH`, as mentioned and in the diff.

Ok, but I'll make a new ticket for this as it is not relation to the version update.



---

archive/issue_comments_118532.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nThe environment variable issue is #11906.",
    "created_at": "2011-10-07T21:47:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118532",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:113" align="right">comment:113</div>

The environment variable issue is #11906.



---

archive/issue_comments_118533.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nReplying to [@alexanderdreyer](#comment%3A112):\n> Replying to [@nexttime](#comment%3A110):\n> > > *Adding* the latter list to the former should be sufficient. Maybe also add `LD_RUN_PATH`, which is used only if no `-rpath` parameters are present when linking, and (in general) perhaps `ABI` and `CPP` itself.\n> > \n> > \n> > Ooops, and of course `LD_LIBRARY_PATH`, as mentioned and in the diff.\n> \n> \n> Ok, but I'll make a new ticket for this as it is not relation to the version update.\n\nNo problem. I ran into this a while ago, so I have my 0.7.1.p7 spkg.\n\nAnd I only remembered that when I came across this ticket... ;-)",
    "created_at": "2011-10-07T22:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118533",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:114" align="right">comment:114</div>

Replying to [@alexanderdreyer](#comment%3A112):
> Replying to [@nexttime](#comment%3A110):
> > > *Adding* the latter list to the former should be sufficient. Maybe also add `LD_RUN_PATH`, which is used only if no `-rpath` parameters are present when linking, and (in general) perhaps `ABI` and `CPP` itself.
> > 
> > 
> > Ooops, and of course `LD_LIBRARY_PATH`, as mentioned and in the diff.
> 
> 
> Ok, but I'll make a new ticket for this as it is not relation to the version update.

No problem. I ran into this a while ago, so I have my 0.7.1.p7 spkg.

And I only remembered that when I came across this ticket... ;-)



---

archive/issue_comments_118534.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nReplying to [@nexttime](#comment%3A114):\n> No problem. I ran into this a while ago, so I have my 0.7.1.p7 spkg.\n> \n> And I only remembered that when I came across this ticket... ;-)\n\nBut it's a good point anyway. As far as I understand gcc's manual it should be enough to import `LIBRARY_PATH` into the build environment to avoid your work around.",
    "created_at": "2011-10-07T22:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118534",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:115" align="right">comment:115</div>

Replying to [@nexttime](#comment%3A114):
> No problem. I ran into this a while ago, so I have my 0.7.1.p7 spkg.
> 
> And I only remembered that when I came across this ticket... ;-)

But it's a good point anyway. As far as I understand gcc's manual it should be enough to import `LIBRARY_PATH` into the build environment to avoid your work around.



---

archive/issue_comments_118535.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nReplying to [@alexanderdreyer](#comment%3A115):\n> As far as I understand gcc's manual it should be enough to import `LIBRARY_PATH` into the build environment to avoid your work around.\n\n[In principle belongs to #11906:]\n\nIIRC that didn't help, because *the linker* doesn't use `LIBRARY_PATH` but `LD_LIBRARY_PATH`.\n\nThe problem was that it couldn't find [an appropriate] `libgcc[_s]`; all other paths are compiled into GCC (which used to be in `specs`). So `LDFLAGS` would also have helped (if they were used in the link commands).\n\nA work-around is to create symbolic links (in directories where they do not really belong), but since PolyBoRi is the only package that shows this behaviour (or error), I fixed the spkg rather than doing that, which I'd also have to do for a couple of different GCC installations.",
    "created_at": "2011-10-07T22:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118535",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:116" align="right">comment:116</div>

Replying to [@alexanderdreyer](#comment%3A115):
> As far as I understand gcc's manual it should be enough to import `LIBRARY_PATH` into the build environment to avoid your work around.

[In principle belongs to #11906:]

IIRC that didn't help, because *the linker* doesn't use `LIBRARY_PATH` but `LD_LIBRARY_PATH`.

The problem was that it couldn't find [an appropriate] `libgcc[_s]`; all other paths are compiled into GCC (which used to be in `specs`). So `LDFLAGS` would also have helped (if they were used in the link commands).

A work-around is to create symbolic links (in directories where they do not really belong), but since PolyBoRi is the only package that shows this behaviour (or error), I fixed the spkg rather than doing that, which I'd also have to do for a couple of different GCC installations.



---

archive/issue_comments_118536.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nReplying to [@nexttime](#comment%3A116):\n> Replying to [@alexanderdreyer](#comment%3A115):\n> > As far as I understand gcc's manual it should be enough to import `LIBRARY_PATH` into the build environment to avoid your work around.\n> \n> \n> IIRC that didn't help, because *the linker* doesn't use `LIBRARY_PATH` but `LD_LIBRARY_PATH`.\n\nOk, according to the GCC documentation, you are right.\n\nCurrently (re)testing that...",
    "created_at": "2011-10-07T22:42:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118536",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:117" align="right">comment:117</div>

Replying to [@nexttime](#comment%3A116):
> Replying to [@alexanderdreyer](#comment%3A115):
> > As far as I understand gcc's manual it should be enough to import `LIBRARY_PATH` into the build environment to avoid your work around.
> 
> 
> IIRC that didn't help, because *the linker* doesn't use `LIBRARY_PATH` but `LD_LIBRARY_PATH`.

Ok, according to the GCC documentation, you are right.

Currently (re)testing that...



---

archive/issue_comments_118537.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nReplying to [@nexttime](#comment%3A116):\n> IIRC that didn't help, because *the linker* doesn't use `LIBRARY_PATH` but `LD_LIBRARY_PATH`.\n\n`LD_LIBRARY_PATH` should be used for runtime search, not at link time. \n\nEven though `LD_LIBRARY_PATH` may be effective at link time as (unwanted?) side effect, I think the missing LDFLAGS caused your problems. (Since `LD_LIBRARY_PATH` had been imported before.)",
    "created_at": "2011-10-07T22:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118537",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:118" align="right">comment:118</div>

Replying to [@nexttime](#comment%3A116):
> IIRC that didn't help, because *the linker* doesn't use `LIBRARY_PATH` but `LD_LIBRARY_PATH`.

`LD_LIBRARY_PATH` should be used for runtime search, not at link time. 

Even though `LD_LIBRARY_PATH` may be effective at link time as (unwanted?) side effect, I think the missing LDFLAGS caused your problems. (Since `LD_LIBRARY_PATH` had been imported before.)



---

archive/issue_comments_118538.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nReplying to [@nexttime](#comment%3A117):\n> Replying to [@nexttime](#comment%3A116):\n> > Replying to [@alexanderdreyer](#comment%3A115):\n> > > As far as I understand gcc's manual it should be enough to import `LIBRARY_PATH` into the build environment to avoid your work around.\n> > \n> > \n> > IIRC that didn't help, because *the linker* doesn't use `LIBRARY_PATH` but `LD_LIBRARY_PATH`.\n> \n> \n> Ok, according to the GCC documentation, you are right.\n> \n> Currently (re)testing that...\n\nOk, replacing `LD_LIBRARY_PATH` with `LIBRARY_PATH` in my patch above (and setting that to a path along which `libgcc*` can be found) also works.\n\nBut I also noticed other things (when doing `./sage -f ...`):\n\n```\n...\nChecking for C header file gd.h... yes\nChecking for C library gd... no\n...\nChecking for C library m4ri... no\nChecking for C header file gd.h... yes\nChecking for C library gd... no\nSymlinking to M4RI/m4ri ...\n...\n```\n(Haven't tracked that further down, but it's strange, provided `$SAGE_LOCAL/[lib/]` **is** used there, since both libraries are present.)\n\n\n\n\nAlso, `spkg-install` (I think) shouldn't delete previous versions until the build succeeded.",
    "created_at": "2011-10-07T23:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118538",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:119" align="right">comment:119</div>

Replying to [@nexttime](#comment%3A117):
> Replying to [@nexttime](#comment%3A116):
> > Replying to [@alexanderdreyer](#comment%3A115):
> > > As far as I understand gcc's manual it should be enough to import `LIBRARY_PATH` into the build environment to avoid your work around.
> > 
> > 
> > IIRC that didn't help, because *the linker* doesn't use `LIBRARY_PATH` but `LD_LIBRARY_PATH`.
> 
> 
> Ok, according to the GCC documentation, you are right.
> 
> Currently (re)testing that...

Ok, replacing `LD_LIBRARY_PATH` with `LIBRARY_PATH` in my patch above (and setting that to a path along which `libgcc*` can be found) also works.

But I also noticed other things (when doing `./sage -f ...`):

```
...
Checking for C header file gd.h... yes
Checking for C library gd... no
...
Checking for C library m4ri... no
Checking for C header file gd.h... yes
Checking for C library gd... no
Symlinking to M4RI/m4ri ...
...
```
(Haven't tracked that further down, but it's strange, provided `$SAGE_LOCAL/[lib/]` **is** used there, since both libraries are present.)




Also, `spkg-install` (I think) shouldn't delete previous versions until the build succeeded.



---

archive/issue_comments_118539.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReplying to [@nexttime](#comment%3A119):\n[...] \n> Ok, replacing `LD_LIBRARY_PATH` with `LIBRARY_PATH` in my patch above (and setting that to a path along which `libgcc*` can be found) also works.\n\nTry to use the (inlined) patch from #11906. It directly reconstructs the original environment. Even though it will not utilize LDFLAGS yet.\n\n> But I also noticed other things (when doing `./sage -f ...`):\n> \n> ```\n> ...\n> Checking for C header file gd.h... yes\n> Checking for C library gd... no\n> ...\n> Checking for C library m4ri... no\n> Checking for C header file gd.h... yes\n> Checking for C library gd... no\n> Symlinking to M4RI/m4ri ...\n> ...\n> ```\n> (Haven't tracked that further down, but it's strange, provided `$SAGE_LOCAL/[lib/]` **is** used there, since both libraries are present.)\n\nMaybe the patched LIBPATH is corrupted. \n\n> Also, `spkg-install` (I think) shouldn't delete previous versions until the build succeeded.\n\nThen you're possibly using outdated headers.",
    "created_at": "2011-10-07T23:15:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118539",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:120" align="right">comment:120</div>

Replying to [@nexttime](#comment%3A119):
[...] 
> Ok, replacing `LD_LIBRARY_PATH` with `LIBRARY_PATH` in my patch above (and setting that to a path along which `libgcc*` can be found) also works.

Try to use the (inlined) patch from #11906. It directly reconstructs the original environment. Even though it will not utilize LDFLAGS yet.

> But I also noticed other things (when doing `./sage -f ...`):
> 
> ```
> ...
> Checking for C header file gd.h... yes
> Checking for C library gd... no
> ...
> Checking for C library m4ri... no
> Checking for C header file gd.h... yes
> Checking for C library gd... no
> Symlinking to M4RI/m4ri ...
> ...
> ```
> (Haven't tracked that further down, but it's strange, provided `$SAGE_LOCAL/[lib/]` **is** used there, since both libraries are present.)

Maybe the patched LIBPATH is corrupted. 

> Also, `spkg-install` (I think) shouldn't delete previous versions until the build succeeded.

Then you're possibly using outdated headers.



---

archive/issue_comments_118540.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nReplying to [@alexanderdreyer](#comment%3A118):\n> `LD_LIBRARY_PATH` should be used for runtime search, not at link time.\n\nAlso `ld` uses it, to look up libraries others depend on; `libstdc++` has `libgcc_s` in its `DT_NEEDED` tags.\n\nIf PolyBoRi itself would (directly) need it, its path would have to be in either `LDFLAGS` or `LIBRARY_PATH`.\n\n\n> I think the missing LDFLAGS caused your problems.\n\nAlternatively, see above.\n\n\n> (Since `LD_LIBRARY_PATH` had been imported before.) \n\nNope, at least not properly; otherwise my patch wouldn't have changed anything.",
    "created_at": "2011-10-07T23:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118540",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:121" align="right">comment:121</div>

Replying to [@alexanderdreyer](#comment%3A118):
> `LD_LIBRARY_PATH` should be used for runtime search, not at link time.

Also `ld` uses it, to look up libraries others depend on; `libstdc++` has `libgcc_s` in its `DT_NEEDED` tags.

If PolyBoRi itself would (directly) need it, its path would have to be in either `LDFLAGS` or `LIBRARY_PATH`.


> I think the missing LDFLAGS caused your problems.

Alternatively, see above.


> (Since `LD_LIBRARY_PATH` had been imported before.) 

Nope, at least not properly; otherwise my patch wouldn't have changed anything.



---

archive/issue_comments_118541.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\nReplying to [@alexanderdreyer](#comment%3A120):\n> Replying to [@nexttime](#comment%3A119):\n> > Also, `spkg-install` (I think) shouldn't delete previous versions until the build succeeded.\n> \n> Then you're possibly using outdated headers.\n\nA matter of the order of `-I...`s. PolyBoRi should just prepend the directories of the header files in the spkg.",
    "created_at": "2011-10-07T23:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118541",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:122" align="right">comment:122</div>

Replying to [@alexanderdreyer](#comment%3A120):
> Replying to [@nexttime](#comment%3A119):
> > Also, `spkg-install` (I think) shouldn't delete previous versions until the build succeeded.
> 
> Then you're possibly using outdated headers.

A matter of the order of `-I...`s. PolyBoRi should just prepend the directories of the header files in the spkg.



---

archive/issue_comments_118542.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nReplying to [@nexttime](#comment%3A121):\n> > I think the missing LDFLAGS caused your problems.\n> \n> Alternatively, see above.\n\nAre you sure? Does your setup really work without invoking `make`?\n\nI mean, does plain\n\n```\ng++ -o helloworld helloworld.cc\n```\nsucceed for a C++ helloworld.cc like the following?\n\n```\n#include <iostream>\nint main() {\n  std::cout << \"Hello World\" << std::endl;\n  return 0;\n}\n```",
    "created_at": "2011-10-07T23:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118542",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:123" align="right">comment:123</div>

Replying to [@nexttime](#comment%3A121):
> > I think the missing LDFLAGS caused your problems.
> 
> Alternatively, see above.

Are you sure? Does your setup really work without invoking `make`?

I mean, does plain

```
g++ -o helloworld helloworld.cc
```
succeed for a C++ helloworld.cc like the following?

```
#include <iostream>
int main() {
  std::cout << "Hello World" << std::endl;
  return 0;
}
```



---

archive/issue_comments_118543.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nReplying to [@alexanderdreyer](#comment%3A123):\n(Without LIBRARY_PATH of course.)",
    "created_at": "2011-10-07T23:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118543",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:124" align="right">comment:124</div>

Replying to [@alexanderdreyer](#comment%3A123):
(Without LIBRARY_PATH of course.)



---

archive/issue_comments_118544.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\n[Trac s***s...]\n\nReplying to [@alexanderdreyer](#comment%3A120):\n> Replying to [@nexttime](#comment%3A119):\n> > But I also noticed other things (when doing `./sage -f ...`):\n\n\n```\n...\nChecking for C header file gd.h... yes\nChecking for C library gd... no\n...\nChecking for C library m4ri... no\nChecking for C header file gd.h... yes\nChecking for C library gd... no\nSymlinking to M4RI/m4ri ...\n...\n```\n> > (Haven't tracked that further down, but it's strange, provided `$SAGE_LOCAL/[lib/]` **is** used there, since both libraries are present.)\n> \n> Maybe the patched LIBPATH is corrupted. \n\nI did and do get exactly the same with the vanilla 0.7.1.p6 spkg (which fails to build).",
    "created_at": "2011-10-07T23:36:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118544",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:125" align="right">comment:125</div>

[Trac s***s...]

Replying to [@alexanderdreyer](#comment%3A120):
> Replying to [@nexttime](#comment%3A119):
> > But I also noticed other things (when doing `./sage -f ...`):


```
...
Checking for C header file gd.h... yes
Checking for C library gd... no
...
Checking for C library m4ri... no
Checking for C header file gd.h... yes
Checking for C library gd... no
Symlinking to M4RI/m4ri ...
...
```
> > (Haven't tracked that further down, but it's strange, provided `$SAGE_LOCAL/[lib/]` **is** used there, since both libraries are present.)
> 
> Maybe the patched LIBPATH is corrupted. 

I did and do get exactly the same with the vanilla 0.7.1.p6 spkg (which fails to build).



---

archive/issue_comments_118545.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nReplying to [@nexttime](#comment%3A125):\nwith the vanilla 0.7.1.p6 spkg (which fails to build).\nThat's weired, what does config.log say?",
    "created_at": "2011-10-08T00:13:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118545",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:126" align="right">comment:126</div>

Replying to [@nexttime](#comment%3A125):
with the vanilla 0.7.1.p6 spkg (which fails to build).
That's weired, what does config.log say?



---

archive/issue_comments_118546.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nReplying to [@alexanderdreyer](#comment%3A126):\n> Replying to [@nexttime](#comment%3A125):\n> with the vanilla 0.7.1.p6 spkg (which fails to build).\n> That's weired, what does config.log say?\n\nI just realized that you work around is active *after* configuring. So trying to link against gd and m4ri fails, becuase the compiler is still broken at that point.\n\nYou may add your work around to `patches/custom.py` (which is executed earlier) as follows:\n\n```\nif os.environ.has_key(\"LD_LIBRARY_PATH\"): \n  LIBPATH += os.environ[\"LD_LIBRARY_PATH\"].split(os.pathsep)\n```",
    "created_at": "2011-10-08T00:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118546",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:127" align="right">comment:127</div>

Replying to [@alexanderdreyer](#comment%3A126):
> Replying to [@nexttime](#comment%3A125):
> with the vanilla 0.7.1.p6 spkg (which fails to build).
> That's weired, what does config.log say?

I just realized that you work around is active *after* configuring. So trying to link against gd and m4ri fails, becuase the compiler is still broken at that point.

You may add your work around to `patches/custom.py` (which is executed earlier) as follows:

```
if os.environ.has_key("LD_LIBRARY_PATH"): 
  LIBPATH += os.environ["LD_LIBRARY_PATH"].split(os.pathsep)
```



---

archive/issue_comments_118547.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\nReplying to [@alexanderdreyer](#comment%3A123):\n> Replying to [@nexttime](#comment%3A121):\n> > > I think the missing LDFLAGS caused your problems.\n> > \n> > Alternatively, see above.\n> \n> Are you sure? Does your setup really work without invoking `make`?\n\nSince (I now remember that) `g++` *always* adds `-lgcc_s` (also `gcc` when called with `-x c++`), even\n\n```\n$ echo \"int main(void){return 0;}\" > foo.c\n$ g++ -x c++ foo.c -o foo\n```\nrequires `libgcc_s.so` to be found, e.g. by setting `LIBRARY_PATH` (unless one uses `-static-libgcc`, since that's located in other directories).\n\n(I have to set *`LD_LIBRARY_PATH`* anyway, such that the runtime linker finds `libgmp` etc., which are used by `gcc` and `g++`.  But that's not sufficient to compile an executable like the above as C++.  So apparently PolyBoRi, or SConstruct, doesn't really invalidate `LD_LIBRARY_PATH` -- otherwise the compiler wouldn't have worked at all -- but `LIBRARY_PATH`, and with my current settings it doesn't matter whether I put the former or the latter into SCons's `LIBPATH`, since *both* contain the directory where `libgcc_s` lives.  IIRC I first tried adding things to where the \"`getenv`\" dictionary is set up, which didn't work, but I don't recall exactly.)",
    "created_at": "2011-10-08T00:58:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118547",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:128" align="right">comment:128</div>

Replying to [@alexanderdreyer](#comment%3A123):
> Replying to [@nexttime](#comment%3A121):
> > > I think the missing LDFLAGS caused your problems.
> > 
> > Alternatively, see above.
> 
> Are you sure? Does your setup really work without invoking `make`?

Since (I now remember that) `g++` *always* adds `-lgcc_s` (also `gcc` when called with `-x c++`), even

```
$ echo "int main(void){return 0;}" > foo.c
$ g++ -x c++ foo.c -o foo
```
requires `libgcc_s.so` to be found, e.g. by setting `LIBRARY_PATH` (unless one uses `-static-libgcc`, since that's located in other directories).

(I have to set *`LD_LIBRARY_PATH`* anyway, such that the runtime linker finds `libgmp` etc., which are used by `gcc` and `g++`.  But that's not sufficient to compile an executable like the above as C++.  So apparently PolyBoRi, or SConstruct, doesn't really invalidate `LD_LIBRARY_PATH` -- otherwise the compiler wouldn't have worked at all -- but `LIBRARY_PATH`, and with my current settings it doesn't matter whether I put the former or the latter into SCons's `LIBPATH`, since *both* contain the directory where `libgcc_s` lives.  IIRC I first tried adding things to where the "`getenv`" dictionary is set up, which didn't work, but I don't recall exactly.)



---

archive/issue_comments_118548.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nReplying to [@alexanderdreyer](#comment%3A126):\n> Replying to [@nexttime](#comment%3A125):\n> > with the vanilla 0.7.1.p6 spkg (which fails to build).\n> \n> That's weired, what does config.log say?\n\nWell, that's funny:\n\n```\n\nscons: Configure: Checking for C header file gd.h...\n.sconf_temp/conftest_0.c <-\n  |\n  |#include \"gd.h\"\n  |\n  |\ngcc -o .sconf_temp/conftest_0.o -c -std=c99 -O3 -Wno-long-long -Wreturn-type -g -fPIC -DNDEBUG -I/tmp/leif/sage-4.7.2.alpha3-gcc-4.4.6/local/include .sconf_temp/conftest_0.c\nscons: Configure: yes\n\nscons: Configure: Checking for C library gd...\n.sconf_temp/conftest_1.c <-\n  |\n  |\n  |\n  |int\n  |main() {\n  |\n  |return 0;\n  |}\n  |\ngcc -o .sconf_temp/conftest_1.o -c -std=c99 -O3 -Wno-long-long -Wreturn-type -g -fPIC -DNDEBUG -I/tmp/leif/sage-4.7.2.alpha3-gcc-4.4.6/local/include .sconf_temp/conftest_1.c\ngcc -o .sconf_temp/conftest_1 .sconf_temp/conftest_1.o -L/tmp/leif/sage-4.7.2.alpha3-gcc-4.4.6/local/lib -lgd\n/usr/bin/ld: cannot find -lgcc_s\ncollect2: ld returned 1 exit status\nscons: Configure: no\n```\n\nIt's not immediately clear what triggers `libgcc_s` to apparently get pulled in there, since `libgd` doesn't need it (according to `ldd`), and it's plain C, compiled with `gcc` rather than `g++`.",
    "created_at": "2011-10-08T01:15:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118548",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:129" align="right">comment:129</div>

Replying to [@alexanderdreyer](#comment%3A126):
> Replying to [@nexttime](#comment%3A125):
> > with the vanilla 0.7.1.p6 spkg (which fails to build).
> 
> That's weired, what does config.log say?

Well, that's funny:

```

scons: Configure: Checking for C header file gd.h...
.sconf_temp/conftest_0.c <-
  |
  |#include "gd.h"
  |
  |
gcc -o .sconf_temp/conftest_0.o -c -std=c99 -O3 -Wno-long-long -Wreturn-type -g -fPIC -DNDEBUG -I/tmp/leif/sage-4.7.2.alpha3-gcc-4.4.6/local/include .sconf_temp/conftest_0.c
scons: Configure: yes

scons: Configure: Checking for C library gd...
.sconf_temp/conftest_1.c <-
  |
  |
  |
  |int
  |main() {
  |
  |return 0;
  |}
  |
gcc -o .sconf_temp/conftest_1.o -c -std=c99 -O3 -Wno-long-long -Wreturn-type -g -fPIC -DNDEBUG -I/tmp/leif/sage-4.7.2.alpha3-gcc-4.4.6/local/include .sconf_temp/conftest_1.c
gcc -o .sconf_temp/conftest_1 .sconf_temp/conftest_1.o -L/tmp/leif/sage-4.7.2.alpha3-gcc-4.4.6/local/lib -lgd
/usr/bin/ld: cannot find -lgcc_s
collect2: ld returned 1 exit status
scons: Configure: no
```

It's not immediately clear what triggers `libgcc_s` to apparently get pulled in there, since `libgd` doesn't need it (according to `ldd`), and it's plain C, compiled with `gcc` rather than `g++`.



---

archive/issue_comments_118549.json:
```json
{
    "body": "<div id=\"comment:130\" align=\"right\">comment:130</div>\n\nOk, it's not `-std=c99` (which would be strange anyway), but I now realize that even\n\n```sh\n$ (unset LIBRARY_PATH; gcc -o foo foo.c)\n```\ndoesn't work, because\n\n```\n... -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed ...\n```\nis **always** added by that GCC. (At least earlier versions were IMHO smarter w.r.t. this.)",
    "created_at": "2011-10-08T01:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118549",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:130" align="right">comment:130</div>

Ok, it's not `-std=c99` (which would be strange anyway), but I now realize that even

```sh
$ (unset LIBRARY_PATH; gcc -o foo foo.c)
```
doesn't work, because

```
... -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed ...
```
is **always** added by that GCC. (At least earlier versions were IMHO smarter w.r.t. this.)



---

archive/issue_comments_118550.json:
```json
{
    "body": "<div id=\"comment:131\" align=\"right\">comment:131</div>\n\nReplying to [@alexanderdreyer](#comment%3A127):\n> I just realized that you work around is active *after* configuring. So trying to link against gd and m4ri fails, becuase the compiler is still broken at that point.\n> \n> You may add your work around to `patches/custom.py` (which is executed earlier) as follows:\n\n\n```\nif os.environ.has_key(\"LD_LIBRARY_PATH\"): \n  LIBPATH += os.environ[\"LD_LIBRARY_PATH\"].split(os.pathsep)\n```\n\nFWIW, *both* adding\n\n```python\nif os.environ.has_key(\"LIBRARY_PATH\"): \n    LIBPATH += os.environ[\"LIBRARY_PATH\"].split(os.pathsep)\n```\n(`LIBRARY_PATH`, not `LD_LIBRARY_PATH`) in `patches/custom.py` as well as changing `patches/SConstruct` to\n\n```python\n# Get paths an related things from current environment\n# todo: Are these settings sane in any case?\ngetenv = dict()\n# for key in ['PATH', 'HOME', 'LD_LIBRARY_PATH'] :\nfor key in ['PATH', 'HOME', 'LD_LIBRARY_PATH', 'LIBRARY_PATH'] :\n    try:\n        getenv[key] = os.environ[key]\n    except KeyError:\n        pass\n```\n*independently* work for me, i.e., in both cases the build succeeds, and the GD and M4RI libraries are found by \"Configure\".\n\n\n\n\nBtw., it would be safer (and save a little space) to remove the M4RI source tree from the PolyBoRi *spkg*.",
    "created_at": "2011-10-08T02:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118550",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:131" align="right">comment:131</div>

Replying to [@alexanderdreyer](#comment%3A127):
> I just realized that you work around is active *after* configuring. So trying to link against gd and m4ri fails, becuase the compiler is still broken at that point.
> 
> You may add your work around to `patches/custom.py` (which is executed earlier) as follows:


```
if os.environ.has_key("LD_LIBRARY_PATH"): 
  LIBPATH += os.environ["LD_LIBRARY_PATH"].split(os.pathsep)
```

FWIW, *both* adding

```python
if os.environ.has_key("LIBRARY_PATH"): 
    LIBPATH += os.environ["LIBRARY_PATH"].split(os.pathsep)
```
(`LIBRARY_PATH`, not `LD_LIBRARY_PATH`) in `patches/custom.py` as well as changing `patches/SConstruct` to

```python
# Get paths an related things from current environment
# todo: Are these settings sane in any case?
getenv = dict()
# for key in ['PATH', 'HOME', 'LD_LIBRARY_PATH'] :
for key in ['PATH', 'HOME', 'LD_LIBRARY_PATH', 'LIBRARY_PATH'] :
    try:
        getenv[key] = os.environ[key]
    except KeyError:
        pass
```
*independently* work for me, i.e., in both cases the build succeeds, and the GD and M4RI libraries are found by "Configure".




Btw., it would be safer (and save a little space) to remove the M4RI source tree from the PolyBoRi *spkg*.



---

archive/issue_comments_118551.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nReplying to [@nexttime](#comment%3A131):\n> FWIW, *both* adding\n> \n> ```python\n> if os.environ.has_key(\"LIBRARY_PATH\"): \n>     LIBPATH += os.environ[\"LIBRARY_PATH\"].split(os.pathsep)\n> ```\n> (`LIBRARY_PATH`, not `LD_LIBRARY_PATH`) in `patches/custom.py` as well as changing `patches/SConstruct` to\n> \n> ```python\n> # Get paths an related things from current environment\n> # todo: Are these settings sane in any case?\n> getenv = dict()\n> # for key in ['PATH', 'HOME', 'LD_LIBRARY_PATH'] :\n> for key in ['PATH', 'HOME', 'LD_LIBRARY_PATH', 'LIBRARY_PATH'] :\n>     try:\n>         getenv[key] = os.environ[key]\n>     except KeyError:\n>         pass\n> ```\n> *independently* work for me, i.e., in both cases the build succeeds, and the GD and M4RI libraries are found by \"Configure\".\n\nExcellent! So this is in fact #11906, we can continue there.\n\n> Btw., it would be safer (and save a little space) to remove the M4RI source tree from the PolyBoRi *spkg*.\n\nGood idea!",
    "created_at": "2011-10-08T19:06:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118551",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:132" align="right">comment:132</div>

Replying to [@nexttime](#comment%3A131):
> FWIW, *both* adding
> 
> ```python
> if os.environ.has_key("LIBRARY_PATH"): 
>     LIBPATH += os.environ["LIBRARY_PATH"].split(os.pathsep)
> ```
> (`LIBRARY_PATH`, not `LD_LIBRARY_PATH`) in `patches/custom.py` as well as changing `patches/SConstruct` to
> 
> ```python
> # Get paths an related things from current environment
> # todo: Are these settings sane in any case?
> getenv = dict()
> # for key in ['PATH', 'HOME', 'LD_LIBRARY_PATH'] :
> for key in ['PATH', 'HOME', 'LD_LIBRARY_PATH', 'LIBRARY_PATH'] :
>     try:
>         getenv[key] = os.environ[key]
>     except KeyError:
>         pass
> ```
> *independently* work for me, i.e., in both cases the build succeeds, and the GD and M4RI libraries are found by "Configure".

Excellent! So this is in fact #11906, we can continue there.

> Btw., it would be safer (and save a little space) to remove the M4RI source tree from the PolyBoRi *spkg*.

Good idea!



---

archive/issue_comments_118552.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\nReplying to [@alexanderdreyer](#comment%3A132):\n> Replying to [@nexttime](#comment%3A131):\n> > Btw., it would be safer (and save a little space) to remove the M4RI source tree from the PolyBoRi *spkg*.\n> \n> Good idea!\n\nCf. #9472... ;-)",
    "created_at": "2011-10-08T20:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118552",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:133" align="right">comment:133</div>

Replying to [@alexanderdreyer](#comment%3A132):
> Replying to [@nexttime](#comment%3A131):
> > Btw., it would be safer (and save a little space) to remove the M4RI source tree from the PolyBoRi *spkg*.
> 
> Good idea!

Cf. #9472... ;-)



---

archive/issue_events_153331.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-16T15:45:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153331"
}
```



---

archive/issue_events_153332.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-16T15:45:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153332"
}
```



---

archive/issue_comments_118553.json:
```json
{
    "body": "Work Issues: **cython-0.15.1**",
    "created_at": "2011-11-05T18:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118553",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **cython-0.15.1**



---

archive/issue_events_153333.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-05T18:22:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153333"
}
```



---

archive/issue_events_153334.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-05T18:22:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153334"
}
```



---

archive/issue_comments_118554.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nThe file `sage/rings/polynomial/pbori.pyx` fails to compile with Cython-0.15 (#11761) because Cython is more strict about undeclared variables.  Since Cython-0.15 is likely to be merged before or at the same time with this ticket, this should be fixed.\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n...\n            ...\n            TypeError: argument must be a BooleanPolynomial.\n        \"\"\"\n        from polybori import red_tail\n        if not I:\n            return g\n                   ^\n------------------------------------------------------------\n\nsage/rings/polynomial/pbori.pyx:4538:20: local variable 'g' referenced before assignment\n```",
    "created_at": "2011-11-05T18:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118554",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:135" align="right">comment:135</div>

The file `sage/rings/polynomial/pbori.pyx` fails to compile with Cython-0.15 (#11761) because Cython is more strict about undeclared variables.  Since Cython-0.15 is likely to be merged before or at the same time with this ticket, this should be fixed.

```
Error compiling Cython file:
------------------------------------------------------------
...
            ...
            TypeError: argument must be a BooleanPolynomial.
        """
        from polybori import red_tail
        if not I:
            return g
                   ^
------------------------------------------------------------

sage/rings/polynomial/pbori.pyx:4538:20: local variable 'g' referenced before assignment
```



---

archive/issue_comments_118555.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nIndeed, the line in question was buggy. So I corrected it and added a suitable doctest:\n\n```diff\ndiff --git a/sage/rings/polynomial/pbori.pyx b/sage/rings/polynomial/pbori.pyx\n--- a/sage/rings/polynomial/pbori.pyx\n+++ b/sage/rings/polynomial/pbori.pyx\n@@ -4516,7 +4516,9 @@\n             0\n             sage: p.reduce(I)\n             x1*x2*x3 + x2\n-\n+            sage: p.reduce([])\n+            x0*x1*x2 + x0*x1*x3 + x0*x2*x3 + x2\n+\n         .. note::\n\n            If this function is called repeatedly with the same I then\n@@ -4535,7 +4537,7 @@\n         \"\"\"\n         from polybori import red_tail\n         if not I:\n-            return g\n+            return self\n         if PY_TYPE_CHECK(I, BooleanPolynomialIdeal):\n             I = I.gens()\n         first = I[0]\n\n\n```",
    "created_at": "2011-11-05T19:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118555",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:136" align="right">comment:136</div>

Indeed, the line in question was buggy. So I corrected it and added a suitable doctest:

```diff
diff --git a/sage/rings/polynomial/pbori.pyx b/sage/rings/polynomial/pbori.pyx
--- a/sage/rings/polynomial/pbori.pyx
+++ b/sage/rings/polynomial/pbori.pyx
@@ -4516,7 +4516,9 @@
             0
             sage: p.reduce(I)
             x1*x2*x3 + x2
-
+            sage: p.reduce([])
+            x0*x1*x2 + x0*x1*x3 + x0*x2*x3 + x2
+
         .. note::

            If this function is called repeatedly with the same I then
@@ -4535,7 +4537,7 @@
         """
         from polybori import red_tail
         if not I:
-            return g
+            return self
         if PY_TYPE_CHECK(I, BooleanPolynomialIdeal):
             I = I.gens()
         first = I[0]


```



---

archive/issue_comments_118556.json:
```json
{
    "body": "Attachment: **[polybori-0.8.0.p1.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)**\n\nPatch rebased to Sage 4.7.2 alpha3 (+ deps), fixed cygwin 0.15 issue",
    "created_at": "2011-11-05T19:38:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118556",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[polybori-0.8.0.p1.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)**

Patch rebased to Sage 4.7.2 alpha3 (+ deps), fixed cygwin 0.15 issue



---

archive/issue_events_153335.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-11-05T19:39:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153335"
}
```



---

archive/issue_events_153336.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-11-05T19:39:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153336"
}
```



---

archive/issue_comments_118557.json:
```json
{
    "body": "<div id=\"comment:137\" align=\"right\">comment:137</div>\n\nI uploaded a revised patch (with the same name).",
    "created_at": "2011-11-05T19:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118557",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:137" align="right">comment:137</div>

I uploaded a revised patch (with the same name).



---

archive/issue_comments_118558.json:
```json
{
    "body": "<div id=\"comment:138\" align=\"right\">comment:138</div>\n\nSomething seems to have gone wrong with the rebased patch:\n\nI\n* took a fresh 4.7.2, \n* installed polybori-0.8.0.p1.spkg and\n* applied [attachment: polybori-0.8.0.p1.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)\n\nThis gave me a few hunks and one conflict in PolynomialConstruct which I fixed. While it now compiles I get these failures:\n\n```\nFile \"/opt/sage-4.7.2-polybori-0.8/devel/sage/sage/rings/polynomial/pbori.pyx\", line 3859:\n    sage: loads(dumps(a)) == a\nException raised:\n    Traceback (most recent call last):\n    ...\n    AttributeError: ('sage.rings.polynomial.pbori.BooleanPolynomialRing' object has no attribute '_element_constructor_', <built-in function unpickle_BooleanPolynomial0>, (Boolean PolynomialRing in a, b, ([[2], [{{a}}]], Boolean PolynomialRing in a, b)))\n**********************************************************************\nFile \"/opt/sage-4.7.2-polybori-0.8/devel/sage/sage/rings/polynomial/pbori.pyx\", line 4487:\n    sage: PolynomialConstruct()(1)\nException raised:\n    Traceback (most recent call last):\n    ...\n    ValueError: incomplete format\n**********************************************************************\nFile \"/opt/sage-4.7.2-polybori-0.8/devel/sage/sage/rings/polynomial/pbori.pyx\", line 7445:\n    sage: loads(dumps(a+b)) == a+b # indirect doctest\nException raised:\n    Traceback (most recent call last):\n    ...\n    AttributeError: ('sage.rings.polynomial.pbori.BooleanPolynomialRing' object has no attribute '_element_constructor_', <built-in function unpickle_BooleanPolynomial0>, (Boolean PolynomialRing in a, b, c, d, ([[2], [{{a}, {b}}, {{b}}]], Boolean PolynomialRing in a, b, c, d)))\n**********************************************************************\nFile \"/opt/sage-4.7.2-polybori-0.8/devel/sage/sage/rings/polynomial/pbori.pyx\", line 7459:\n    sage: loads(dumps(a+b)) == a+b # indirect doctest\nException raised:\n    Traceback (most recent call last):\n    ...\n    AttributeError: ('sage.rings.polynomial.pbori.BooleanPolynomialRing' object has no attribute '_element_constructor_', <built-in function unpickle_BooleanPolynomial0>, (Boolean PolynomialRing in a, b, c, d, ([[2], [{{a}, {b}}, {{b}}]], Boolean PolynomialRing in a, b, c, d)))\n**********************************************************************\n```\n\nSo something went wrong and Alexander's element_constructor fixes didn't make it into this patch?",
    "created_at": "2011-11-07T11:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118558",
    "user": "https://github.com/malb"
}
```

<div id="comment:138" align="right">comment:138</div>

Something seems to have gone wrong with the rebased patch:

I
* took a fresh 4.7.2, 
* installed polybori-0.8.0.p1.spkg and
* applied [attachment: polybori-0.8.0.p1.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)

This gave me a few hunks and one conflict in PolynomialConstruct which I fixed. While it now compiles I get these failures:

```
File "/opt/sage-4.7.2-polybori-0.8/devel/sage/sage/rings/polynomial/pbori.pyx", line 3859:
    sage: loads(dumps(a)) == a
Exception raised:
    Traceback (most recent call last):
    ...
    AttributeError: ('sage.rings.polynomial.pbori.BooleanPolynomialRing' object has no attribute '_element_constructor_', <built-in function unpickle_BooleanPolynomial0>, (Boolean PolynomialRing in a, b, ([[2], [{{a}}]], Boolean PolynomialRing in a, b)))
**********************************************************************
File "/opt/sage-4.7.2-polybori-0.8/devel/sage/sage/rings/polynomial/pbori.pyx", line 4487:
    sage: PolynomialConstruct()(1)
Exception raised:
    Traceback (most recent call last):
    ...
    ValueError: incomplete format
**********************************************************************
File "/opt/sage-4.7.2-polybori-0.8/devel/sage/sage/rings/polynomial/pbori.pyx", line 7445:
    sage: loads(dumps(a+b)) == a+b # indirect doctest
Exception raised:
    Traceback (most recent call last):
    ...
    AttributeError: ('sage.rings.polynomial.pbori.BooleanPolynomialRing' object has no attribute '_element_constructor_', <built-in function unpickle_BooleanPolynomial0>, (Boolean PolynomialRing in a, b, c, d, ([[2], [{{a}, {b}}, {{b}}]], Boolean PolynomialRing in a, b, c, d)))
**********************************************************************
File "/opt/sage-4.7.2-polybori-0.8/devel/sage/sage/rings/polynomial/pbori.pyx", line 7459:
    sage: loads(dumps(a+b)) == a+b # indirect doctest
Exception raised:
    Traceback (most recent call last):
    ...
    AttributeError: ('sage.rings.polynomial.pbori.BooleanPolynomialRing' object has no attribute '_element_constructor_', <built-in function unpickle_BooleanPolynomial0>, (Boolean PolynomialRing in a, b, c, d, ([[2], [{{a}, {b}}, {{b}}]], Boolean PolynomialRing in a, b, c, d)))
**********************************************************************
```

So something went wrong and Alexander's element_constructor fixes didn't make it into this patch?



---

archive/issue_comments_118559.json:
```json
{
    "body": "Changed work issues from **cython-0.15.1** to none",
    "created_at": "2011-11-07T11:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118559",
    "user": "https://github.com/malb"
}
```

Changed work issues from **cython-0.15.1** to none



---

archive/issue_events_153337.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-07T11:41:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153337"
}
```



---

archive/issue_events_153338.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-07T11:41:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153338"
}
```



---

archive/issue_comments_118560.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nReplying to [@malb](#comment%3A138):\n> Something seems to have gone wrong with the rebased patch:\n> \n> I\n> * took a fresh 4.7.2, \n> * installed polybori-0.8.0.p1.spkg and\n> * applied [attachment: polybori-0.8.0.p1.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)\n\nDid you apply the dependency #9138?",
    "created_at": "2011-11-07T13:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118560",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:139" align="right">comment:139</div>

Replying to [@malb](#comment%3A138):
> Something seems to have gone wrong with the rebased patch:
> 
> I
> * took a fresh 4.7.2, 
> * installed polybori-0.8.0.p1.spkg and
> * applied [attachment: polybori-0.8.0.p1.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)

Did you apply the dependency #9138?



---

archive/issue_comments_118561.json:
```json
{
    "body": "<div id=\"comment:140\" align=\"right\">comment:140</div>\n\nHa, no! Sorry for the noise then.",
    "created_at": "2011-11-07T14:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118561",
    "user": "https://github.com/malb"
}
```

<div id="comment:140" align="right">comment:140</div>

Ha, no! Sorry for the noise then.



---

archive/issue_comments_118562.json:
```json
{
    "body": "<div id=\"comment:141\" align=\"right\">comment:141</div>\n\nWorks as advertised, but I didn't try it with the new Cython yet.",
    "created_at": "2011-11-07T18:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118562",
    "user": "https://github.com/malb"
}
```

<div id="comment:141" align="right">comment:141</div>

Works as advertised, but I didn't try it with the new Cython yet.



---

archive/issue_events_153339.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-07T18:29:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153339"
}
```



---

archive/issue_events_153340.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-07T18:29:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153340"
}
```



---

archive/issue_events_153341.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-09T12:34:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153341"
}
```



---

archive/issue_events_153342.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-09T12:34:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153342"
}
```



---

archive/issue_comments_118563.json:
```json
{
    "body": "<div id=\"comment:142\" align=\"right\">comment:142</div>\n\nWorks with Sage 4.8.alpha1.",
    "created_at": "2011-11-09T12:34:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118563",
    "user": "https://github.com/malb"
}
```

<div id="comment:142" align="right">comment:142</div>

Works with Sage 4.8.alpha1.



---

archive/issue_comments_118564.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nCould you re-export the patch with a username added?  Maybe you need to create a `$HOME/.hgrc` file?  See instructions at [http://sagemath.org/doc/developer/walk_through.html#submitting-a-change](http://sagemath.org/doc/developer/walk_through.html#submitting-a-change)",
    "created_at": "2011-11-09T20:25:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118564",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:143" align="right">comment:143</div>

Could you re-export the patch with a username added?  Maybe you need to create a `$HOME/.hgrc` file?  See instructions at [http://sagemath.org/doc/developer/walk_through.html#submitting-a-change](http://sagemath.org/doc/developer/walk_through.html#submitting-a-change)



---

archive/issue_comments_118565.json:
```json
{
    "body": "<div id=\"comment:144\" align=\"right\">comment:144</div>\n\nThank for pointing this out. I wasn't aware, that `hg`'s `mq` doesn't write the username into the patch header. Now, I regenerated the patch using `hg export tip`.",
    "created_at": "2011-11-10T00:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118565",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:144" align="right">comment:144</div>

Thank for pointing this out. I wasn't aware, that `hg`'s `mq` doesn't write the username into the patch header. Now, I regenerated the patch using `hg export tip`.



---

archive/issue_comments_118566.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,4 @@\n \n ### Current patches/spkg\n * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p1.spkg\n-* **Apply** [attachment: polybori-0.8.0.p1.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)\n-\n-\n+* **Apply** [attachment: polybori-0.8.0.p1.2.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.2.patch.gz)\n``````\n",
    "created_at": "2011-11-10T08:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118566",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,4 @@
 
 ### Current patches/spkg
 * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p1.spkg
-* **Apply** [attachment: polybori-0.8.0.p1.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.patch.gz)
-
-
+* **Apply** [attachment: polybori-0.8.0.p1.2.patch](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.2.patch.gz)
``````




---

archive/issue_comments_118567.json:
```json
{
    "body": "<div id=\"comment:146\" align=\"right\">comment:146</div>\n\n@jdemeyer Since #9138 (and its dependencies) is now about to enter Sage 5.0, could we change the milestone to sage-5.0 here? What do you thing?",
    "created_at": "2011-12-09T23:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118567",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:146" align="right">comment:146</div>

@jdemeyer Since #9138 (and its dependencies) is now about to enter Sage 5.0, could we change the milestone to sage-5.0 here? What do you thing?



---

archive/issue_events_153343.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-09T23:56:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153343"
}
```



---

archive/issue_events_153344.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-09T23:56:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153344"
}
```



---

archive/issue_comments_118568.json:
```json
{
    "body": "Rebased to latest #9138",
    "created_at": "2012-01-17T16:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118568",
    "user": "https://github.com/jdemeyer"
}
```

Rebased to latest #9138



---

archive/issue_comments_118569.json:
```json
{
    "body": "<div id=\"comment:148\" align=\"right\">comment:148</div>\n\nAttachment: **[polybori-0.8.0.p1.2.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.2.patch.gz)**",
    "created_at": "2012-01-18T08:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118569",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:148" align="right">comment:148</div>

Attachment: **[polybori-0.8.0.p1.2.patch.gz](https://github.com/sagemath/sage/files/ticket11575/polybori-0.8.0.p1.2.patch.gz)**



---

archive/issue_comments_118570.json:
```json
{
    "body": "Merged: **sage-5.0.beta1**",
    "created_at": "2012-01-18T08:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11575#issuecomment-118570",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta1**



---

archive/issue_events_153345.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T08:15:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153345"
}
```



---

archive/issue_events_153346.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T08:15:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11575",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11575#event-153346"
}
```
