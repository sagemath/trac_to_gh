# Issue 11208: Remove numpy warnings in slope field

archive/issues_011036.json:
```json
{
    "body": "Having no arrows in an arrow plot (i.e., vector field that is a slope field) now causes warnings from matplotlib.\n\n```\ny = var('y') \ng = 1 \nP=plot_slope_field(g,(x,3,4),(y,-1,1)) \nP \n<two sets of warnings> \n```\nDSM has a diagnosis at [this sage-support thread](http://groups.google.com/group/sage-support/browse_thread/thread/49471ab062fcb8e9)\n\n```\nP=plot_slope_field(g,(x,3,4),(y,-1,1),headlength=1e-8) \nworks for me.  FYI, it's the following few lines in Quiver._h_arrows at fault: \n        minsh = self.minshaft * self.headlength \n        [....] \n        shrink = length/minsh \n        X0 = shrink * X0[np.newaxis,:] \n        Y0 = shrink * Y0[np.newaxis,:] \nProbably we should change the defaults and/or (if it's not done \nalready) ask our matplotlib friends to special-case 0 for no \narrowheads.\n```\nSo maybe this should be reported upstream?  See also #2922, which is also about the mpl quivers.\n\n**Assignee:** @jasongrout, @williamstein\n\n**CC:**  @jasongrout @novoselt\n\n**Upstream:** Reported upstream. Little or no feedback.\n\n**Reviewer:** David Loeffler, Karl-Dieter Crisman\n\n**Author:** Douglas McNeil\n\n**Merged:** sage-5.0.beta9\n\n**Dependencies:** #10489\n\nIssue created by migration from https://trac.sagemath.org/ticket/11208\n\n",
    "closed_at": "2012-03-21T22:04:19Z",
    "created_at": "2011-04-17T00:22:26Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Remove numpy warnings in slope field",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11208",
    "user": "https://github.com/kcrisman"
}
```
Having no arrows in an arrow plot (i.e., vector field that is a slope field) now causes warnings from matplotlib.

```
y = var('y') 
g = 1 
P=plot_slope_field(g,(x,3,4),(y,-1,1)) 
P 
<two sets of warnings> 
```
DSM has a diagnosis at [this sage-support thread](http://groups.google.com/group/sage-support/browse_thread/thread/49471ab062fcb8e9)

```
P=plot_slope_field(g,(x,3,4),(y,-1,1),headlength=1e-8) 
works for me.  FYI, it's the following few lines in Quiver._h_arrows at fault: 
        minsh = self.minshaft * self.headlength 
        [....] 
        shrink = length/minsh 
        X0 = shrink * X0[np.newaxis,:] 
        Y0 = shrink * Y0[np.newaxis,:] 
Probably we should change the defaults and/or (if it's not done 
already) ask our matplotlib friends to special-case 0 for no 
arrowheads.
```
So maybe this should be reported upstream?  See also #2922, which is also about the mpl quivers.

**Assignee:** @jasongrout, @williamstein

**CC:**  @jasongrout @novoselt

**Upstream:** Reported upstream. Little or no feedback.

**Reviewer:** David Loeffler, Karl-Dieter Crisman

**Author:** Douglas McNeil

**Merged:** sage-5.0.beta9

**Dependencies:** #10489

Issue created by migration from https://trac.sagemath.org/ticket/11208





---

archive/issue_events_034763.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-04-17T00:43:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11208#event-34763"
}
```



---

archive/issue_comments_140965.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Not yet reported upstream; Will do shortly.\".",
    "created_at": "2011-04-17T00:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140965",
    "user": "https://github.com/jasongrout"
}
```

**Changing upstream** from "N/A" to "Not yet reported upstream; Will do shortly.".



---

archive/issue_comments_140966.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis should be reported upstream, right?",
    "created_at": "2011-04-17T00:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140966",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'></a>
This should be reported upstream, right?



---

archive/issue_comments_140967.json:
```json
{
    "body": "<a id='comment:2'></a>\nProbably, and I say so on sage-support, but I don't know how to make this pure matplotlib, and maybe they would say it's user error?  But you are almost certainly right.",
    "created_at": "2011-04-17T00:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140967",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
Probably, and I say so on sage-support, but I don't know how to make this pure matplotlib, and maybe they would say it's user error?  But you are almost certainly right.



---

archive/issue_comments_140968.json:
```json
{
    "body": "<a id='comment:3'></a>\nI don't think this was ever reported upstream.  And now it's going to cause a problem for our PREP calculus tutorial... grumble, grumble.",
    "created_at": "2011-05-24T02:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140968",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
I don't think this was ever reported upstream.  And now it's going to cause a problem for our PREP calculus tutorial... grumble, grumble.



---

archive/issue_comments_140969.json:
```json
{
    "body": "<a id='comment:4'></a>\nFor the moment it seems OK to use Doug McNeil's hack of setting: headlength=1e-8\nIts better than leaving this problem around any longer in my opinion.",
    "created_at": "2011-09-08T18:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140969",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:4'></a>
For the moment it seems OK to use Doug McNeil's hack of setting: headlength=1e-8
Its better than leaving this problem around any longer in my opinion.



---

archive/issue_comments_140970.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-02-27T22:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140970",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_140971.json:
```json
{
    "body": "<a id='comment:6'></a>\nPatch attached.  Wasn't sure of the idiom for doctesting the warnings; went with what I would have done in a non-Sage project.",
    "created_at": "2012-02-27T22:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140971",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

<a id='comment:6'></a>
Patch attached.  Wasn't sure of the idiom for doctesting the warnings; went with what I would have done in a non-Sage project.



---

archive/issue_comments_140972.json:
```json
{
    "body": "headlength = epsilon hack",
    "created_at": "2012-02-27T22:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140972",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

headlength = epsilon hack



---

archive/issue_comments_140973.json:
```json
{
    "body": "**Dependencies:** #10489",
    "created_at": "2012-03-11T15:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140973",
    "user": "https://github.com/loefflerd"
}
```

**Dependencies:** #10489



---

archive/issue_comments_140974.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-03-11T15:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140974",
    "user": "https://github.com/loefflerd"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_140975.json:
```json
{
    "body": "**Reviewer:** PatchBot",
    "created_at": "2012-03-11T15:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140975",
    "user": "https://github.com/loefflerd"
}
```

**Reviewer:** PatchBot



---

archive/attachments_014670.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_11208_avoid_headless_quiver_warning.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11208/trac_11208_avoid_headless_quiver_warning.patch",
    "created_at": "2012-03-11T15:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_140976.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis doesn't apply to the current Sage dev version -- it seems to conflict with #10489. Can you rebase it?",
    "created_at": "2012-03-11T15:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140976",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:7'></a>
This doesn't apply to the current Sage dev version -- it seems to conflict with #10489. Can you rebase it?



---

archive/issue_comments_140977.json:
```json
{
    "body": "**Changing upstream** from \"Not yet reported upstream; Will do shortly.\" to \"Reported upstream. Little or no feedback.\".",
    "created_at": "2012-03-11T22:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140977",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

**Changing upstream** from "Not yet reported upstream; Will do shortly." to "Reported upstream. Little or no feedback.".



---

archive/issue_comments_140978.json:
```json
{
    "body": "**Changing reviewer** from \"PatchBot\" to \"David Loeffler, Karl-Dieter Crisman\".",
    "created_at": "2012-03-12T01:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140978",
    "user": "https://github.com/kcrisman"
}
```

**Changing reviewer** from "PatchBot" to "David Loeffler, Karl-Dieter Crisman".



---

archive/issue_comments_140979.json:
```json
{
    "body": "<a id='comment:9'></a>\nOn the plus side, it works!  DSM, just be sure to *not* replace the previous patch so that we can compare the two, but the rebase should be nearly trivial (I almost did it just now, but decided you were probably in the midst).  The only thing I could possibly say is that I would put the \"(trac #11208)::\" on the next line, but it's not really that important.\n\nSo positive review, modulo rebase.",
    "created_at": "2012-03-12T01:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140979",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'></a>
On the plus side, it works!  DSM, just be sure to *not* replace the previous patch so that we can compare the two, but the rebase should be nearly trivial (I almost did it just now, but decided you were probably in the midst).  The only thing I could possibly say is that I would put the "(trac #11208)::" on the next line, but it's not really that important.

So positive review, modulo rebase.



---

archive/issue_comments_140980.json:
```json
{
    "body": "**Author:** Douglas McNeil",
    "created_at": "2012-03-12T01:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140980",
    "user": "https://github.com/kcrisman"
}
```

**Author:** Douglas McNeil



---

archive/issue_comments_140981.json:
```json
{
    "body": "headlength = epsilon hack, rebased to 5.0.beta7",
    "created_at": "2012-03-12T02:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140981",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

headlength = epsilon hack, rebased to 5.0.beta7



---

archive/issue_comments_140982.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-03-12T02:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140982",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_014671.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_11208_avoid_headless_quiver_warning_v2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11208/trac_11208_avoid_headless_quiver_warning_v2.patch",
    "created_at": "2012-03-12T02:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```



---

archive/issue_comments_140983.json:
```json
{
    "body": "<a id='comment:10'></a>\nDropped a message on matplotlib-devel; at least one dev thought special-casing zero was a good idea, so I'll work up a matplotlib patch if I get some time.  Not much pressure to do it on our end now, though.  [PS @kcrisman -- not only was I in the midst, I was typing things like 'hg export tip' as you were writing that..]",
    "created_at": "2012-03-12T02:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140983",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

<a id='comment:10'></a>
Dropped a message on matplotlib-devel; at least one dev thought special-casing zero was a good idea, so I'll work up a matplotlib patch if I get some time.  Not much pressure to do it on our end now, though.  [PS @kcrisman -- not only was I in the midst, I was typing things like 'hg export tip' as you were writing that..]



---

archive/issue_comments_140984.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-03-12T02:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140984",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_140985.json:
```json
{
    "body": "<a id='comment:11'></a>\nGreat, make sure to post a link to the discussion on matplotlib-devel.  This applies to beta7 and fixes something we REALLY should have fixed a long time ago.\n\nBy the way, it turns out we now have this nice `:trac:` thing for documentation... not needed here, but just fyi for next time, I just found out about five minutes ago.",
    "created_at": "2012-03-12T02:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140985",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
Great, make sure to post a link to the discussion on matplotlib-devel.  This applies to beta7 and fixes something we REALLY should have fixed a long time ago.

By the way, it turns out we now have this nice `:trac:` thing for documentation... not needed here, but just fyi for next time, I just found out about five minutes ago.



---

archive/issue_comments_140986.json:
```json
{
    "body": "<a id='comment:12'></a>\nApply trac_11208_avoid_headless_quiver_warning_v2.patch\n\n(for patchbot)",
    "created_at": "2012-03-12T07:48:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140986",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:12'></a>
Apply trac_11208_avoid_headless_quiver_warning_v2.patch

(for patchbot)



---

archive/issue_events_034764.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-21T22:04:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11208#event-34764"
}
```



---

archive/issue_comments_140987.json:
```json
{
    "body": "**Merged:** sage-5.0.beta9",
    "created_at": "2012-03-21T22:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140987",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta9



---

archive/issue_comments_140988.json:
```json
{
    "body": "<a id='comment:14'></a>\nUpstream report is [here](http://sourceforge.net/mailarchive/forum.php?thread_name=4F5D4707.3010209%40hawaii.edu&forum_name=matplotlib-devel).",
    "created_at": "2012-03-22T02:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-140988",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>
Upstream report is [here](http://sourceforge.net/mailarchive/forum.php?thread_name=4F5D4707.3010209%40hawaii.edu&forum_name=matplotlib-devel).
