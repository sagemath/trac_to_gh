# Issue 11257: Avoid a coercion when computing an element to the power of 0

archive/issues_011085.json:
```json
{
    "assignees": [],
    "body": "In the generic structure of element, a coercion is called to compute an element z to the power of 0 : z^0\n\nThe goal of this ticket is trying to replace all call of Parent(1) by Parent.one() to avoid the coercion. (and hope Sage is ready for a such change...)\n\nBefore :\n\n```\nsage: K = CyclotomicField(46)\nsage: z = K.gen()\nsage: %prun z^0\n         11 function calls in 0.000 CPU seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1    0.000    0.000    0.000    0.000 number_field.py:4871(_coerce_non_number_field_element_in)\n        1    0.000    0.000    0.000    0.000 <string>:1(<module>)\n        1    0.000    0.000    0.000    0.000 number_field.py:6702(_element_constructor_)\n        1    0.000    0.000    0.000    0.000 number_field.py:4221(polynomial_ntl)\n        4    0.000    0.000    0.000    0.000 {isinstance}\n        1    0.000    0.000    0.000    0.000 number_field.py:4210(absolute_polynomial_ntl)\n        1    0.000    0.000    0.000    0.000 gap.py:1299(is_GapElement)\n        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\n\nsage: %prun z^3\n         2 function calls in 0.000 CPU seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1    0.000    0.000    0.000    0.000 <string>:1(<module>)\n        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\n```\n\nAnd for the speed :\n\n```\nsage: timeit('z^0')\n625 loops, best of 3: 28 \u00b5s per loop\nsage: timeit('z^3')\n625 loops, best of 3: 7.78 \u00b5s per loop\n```\n\ndepends on #9065\ndepends on #9138\n\nDepends on #11900\n\n**Assignee:** nborie\n\n**CC:**  sage-combinat @simon-king-jena\n\n**Keywords:** coercion, element, power, zero, Cernay2012\n\n**Author:** Nicolas Borie\n\n**Reviewer:** Nathann Cohen\n\n**Merged:** sage-5.0.beta4\n\nIssue created by migration from https://trac.sagemath.org/ticket/11257\n\n",
    "closed_at": "2012-02-14T14:20:46Z",
    "created_at": "2011-04-26T13:33:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20performance",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Avoid a coercion when computing an element to the power of 0",
    "type": "issue",
    "updated_at": "2012-02-14T14:20:46Z",
    "url": "https://github.com/sagemath/sage/issues/11257",
    "user": "https://github.com/sagetrac-nborie"
}
```
In the generic structure of element, a coercion is called to compute an element z to the power of 0 : z^0

The goal of this ticket is trying to replace all call of Parent(1) by Parent.one() to avoid the coercion. (and hope Sage is ready for a such change...)

Before :

```
sage: K = CyclotomicField(46)
sage: z = K.gen()
sage: %prun z^0
         11 function calls in 0.000 CPU seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 number_field.py:4871(_coerce_non_number_field_element_in)
        1    0.000    0.000    0.000    0.000 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 number_field.py:6702(_element_constructor_)
        1    0.000    0.000    0.000    0.000 number_field.py:4221(polynomial_ntl)
        4    0.000    0.000    0.000    0.000 {isinstance}
        1    0.000    0.000    0.000    0.000 number_field.py:4210(absolute_polynomial_ntl)
        1    0.000    0.000    0.000    0.000 gap.py:1299(is_GapElement)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}

sage: %prun z^3
         2 function calls in 0.000 CPU seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
```

And for the speed :

```
sage: timeit('z^0')
625 loops, best of 3: 28 µs per loop
sage: timeit('z^3')
625 loops, best of 3: 7.78 µs per loop
```

depends on #9065
depends on #9138

Depends on #11900

**Assignee:** nborie

**CC:**  sage-combinat @simon-king-jena

**Keywords:** coercion, element, power, zero, Cernay2012

**Author:** Nicolas Borie

**Reviewer:** Nathann Cohen

**Merged:** sage-5.0.beta4

Issue created by migration from https://trac.sagemath.org/ticket/11257





---

archive/issue_comments_114826.json:
```json
{
    "body": "<a id='comment:1'></a>\nWith the patch applied, same tests give:\n\n```\nsage: K = CyclotomicField(46)\nsage: z = K.gen()\nsage: %prun z^0\n         2 function calls in 0.000 CPU seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1    0.000    0.000    0.000    0.000 <string>:1(<module>)\n        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\n\nsage: %prun z^3\n         2 function calls in 0.000 CPU seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1    0.000    0.000    0.000    0.000 <string>:1(<module>)\n        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\n```\nAnd\n\n```\nsage: timeit('z^0')\n625 loops, best of 3: 1.01 \u00b5s per loop\nsage: timeit('z^3')\n625 loops, best of 3: 7.68 \u00b5s per loop\n```\n\nWe will see what the builbot will say. What pass, what crash ....",
    "created_at": "2011-04-26T13:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114826",
    "user": "https://github.com/sagetrac-nborie"
}
```

<a id='comment:1'></a>
With the patch applied, same tests give:

```
sage: K = CyclotomicField(46)
sage: z = K.gen()
sage: %prun z^0
         2 function calls in 0.000 CPU seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}

sage: %prun z^3
         2 function calls in 0.000 CPU seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
```
And

```
sage: timeit('z^0')
625 loops, best of 3: 1.01 µs per loop
sage: timeit('z^3')
625 loops, best of 3: 7.68 µs per loop
```

We will see what the builbot will say. What pass, what crash ....



---

archive/issue_events_088109.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-26T13:55:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88109"
}
```



---

archive/issue_comments_114827.json:
```json
{
    "body": "<a id='comment:2'></a>\nThree parents does not have the method one and don't pass the change.",
    "created_at": "2011-04-27T09:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114827",
    "user": "https://github.com/sagetrac-nborie"
}
```

<a id='comment:2'></a>
Three parents does not have the method one and don't pass the change.



---

archive/issue_events_088110.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-27T09:13:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88110"
}
```



---

archive/issue_events_088111.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-27T09:13:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88111"
}
```



---

archive/issue_events_088112.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-27T09:19:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88112"
}
```



---

archive/issue_events_088113.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-27T09:19:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88113"
}
```



---

archive/issue_comments_114828.json:
```json
{
    "body": "<a id='comment:3'></a>\nI looked at the three parents for which elements didn't pass the tests. Every times, it seems clear to me that they deserve to have a method one. I had some. I also fixed some typos on the way and ran a 'delete-trailing-whitespace' which make the patch a little bit more long...\n\nI hope all will be fix now with this one.",
    "created_at": "2011-04-27T09:19:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114828",
    "user": "https://github.com/sagetrac-nborie"
}
```

<a id='comment:3'></a>
I looked at the three parents for which elements didn't pass the tests. Every times, it seems clear to me that they deserve to have a method one. I had some. I also fixed some typos on the way and ran a 'delete-trailing-whitespace' which make the patch a little bit more long...

I hope all will be fix now with this one.



---

archive/issue_comments_114829.json:
```json
{
    "body": "**Author:** Nicolas Borie",
    "created_at": "2011-04-27T12:21:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114829",
    "user": "https://github.com/nthiery"
}
```

**Author:** Nicolas Borie



---

archive/issue_comments_114830.json:
```json
{
    "body": "<a id='comment:4'></a>\nBonjour Nicolas!\n\nThanks for your work on that. Please investigate the test failure reported by the patchbot, and double check that TestSuite is run on every parent that you modified. While we are at it, we probably want to implement ``.one()`` as a cached_method. I am not sure about the deletion of trailing whitespaces outside of the lines you change anyway, as this is subject to making conflicts.\n\nAh, and do we want to do the same for .zero()?\n\nAmiti\u00e9s,\n                         Nicolas",
    "created_at": "2011-04-27T12:21:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114830",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:4'></a>
Bonjour Nicolas!

Thanks for your work on that. Please investigate the test failure reported by the patchbot, and double check that TestSuite is run on every parent that you modified. While we are at it, we probably want to implement ``.one()`` as a cached_method. I am not sure about the deletion of trailing whitespaces outside of the lines you change anyway, as this is subject to making conflicts.

Ah, and do we want to do the same for .zero()?

Amitiés,
                         Nicolas



---

archive/issue_comments_114831.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi Nicolas,\n\nReplying to [@nthiery](#comment%3A4):\n> While we are at it, we probably want to implement .one() as a cached_method. I am not sure about the deletion of trailing whitespaces outside of the lines you change anyway, as this is subject to making conflicts.  \n> Ah, and do we want to do the same for .zero()?\n\nI suspect that question is partially addressed to me, as it may relate with #11115?\n\nI didn't look at the patch. But if you mean to make .zero() and .one() a cached method of the parent class of a category, then in fact #11115 is needed in order to make the cache work on those parent structures that do not allow attribute assignment.",
    "created_at": "2011-04-27T12:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114831",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>
Hi Nicolas,

Replying to [@nthiery](#comment%3A4):
> While we are at it, we probably want to implement .one() as a cached_method. I am not sure about the deletion of trailing whitespaces outside of the lines you change anyway, as this is subject to making conflicts.  
> Ah, and do we want to do the same for .zero()?

I suspect that question is partially addressed to me, as it may relate with #11115?

I didn't look at the patch. But if you mean to make .zero() and .one() a cached method of the parent class of a category, then in fact #11115 is needed in order to make the cache work on those parent structures that do not allow attribute assignment.



---

archive/issue_comments_114832.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [@simon-king-jena](#comment%3A5):\n> I suspect that question is partially addressed to me, as it may relate with #11115?\n\nYup. And to detect potential conflicts with the ongoing changes in rings and such.\n\n> I didn't look at the patch. But if you mean to make .zero() and .one() a cached method of the parent class of a category, then in fact #11115 is needed in order to make the cache work on those parent structures that do not allow attribute assignment.\n\n+1",
    "created_at": "2011-04-27T13:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114832",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:6'></a>
Replying to [@simon-king-jena](#comment%3A5):
> I suspect that question is partially addressed to me, as it may relate with #11115?

Yup. And to detect potential conflicts with the ongoing changes in rings and such.

> I didn't look at the patch. But if you mean to make .zero() and .one() a cached method of the parent class of a category, then in fact #11115 is needed in order to make the cache work on those parent structures that do not allow attribute assignment.

+1



---

archive/issue_comments_114833.json:
```json
{
    "body": "<a id='comment:7'></a>\nHello you both,\n\nFor the failures from the buildbot, I can't reproduce them. \n\n```\nnicolas@lancelot:/opt/sage/devel/sage-combinat$ hg qtop\ntrac_11257_avoid_coercion_power_zero-nb.patch\nnicolas@lancelot:/opt/sage/devel/sage-combinat$ sage -t sage/tests/cmdline.py \nsage -t  \"devel/sage-combinat/sage/tests/cmdline.py\"        \n\t [14.7 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 14.7 seconds\nnicolas@lancelot:/opt/sage/devel/sage-combinat$ sage -t ../sagenb-main/sagenb/misc/misc.py\nsage -t  \"devel/sagenb-main/sagenb/misc/misc.py\"            \n\t [1.9 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 1.9 seconds\n```\n\nFor the TestSuite, there is some work to be done. A new version is on the way...\n\nCheers, \nNicolas.",
    "created_at": "2011-04-27T20:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114833",
    "user": "https://github.com/sagetrac-nborie"
}
```

<a id='comment:7'></a>
Hello you both,

For the failures from the buildbot, I can't reproduce them. 

```
nicolas@lancelot:/opt/sage/devel/sage-combinat$ hg qtop
trac_11257_avoid_coercion_power_zero-nb.patch
nicolas@lancelot:/opt/sage/devel/sage-combinat$ sage -t sage/tests/cmdline.py 
sage -t  "devel/sage-combinat/sage/tests/cmdline.py"        
	 [14.7 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 14.7 seconds
nicolas@lancelot:/opt/sage/devel/sage-combinat$ sage -t ../sagenb-main/sagenb/misc/misc.py
sage -t  "devel/sagenb-main/sagenb/misc/misc.py"            
	 [1.9 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 1.9 seconds
```

For the TestSuite, there is some work to be done. A new version is on the way...

Cheers, 
Nicolas.



---

archive/issue_events_088114.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-27T20:03:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88114"
}
```



---

archive/issue_events_088115.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-27T20:03:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88115"
}
```



---

archive/issue_events_088116.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-28T17:11:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88116"
}
```



---

archive/issue_events_088117.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-28T17:11:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88117"
}
```



---

archive/issue_comments_114834.json:
```json
{
    "body": "<a id='comment:8'></a>\nI tried to do the best... Fix the TestSuite on old parents is not a simple job. Especially when one doesn't know enough about old category system... I fix properly the categories of affected parents, but I do not know how to do for the elements (especially when there is some facade with a separate implementation of the elements).\n\n(((\nsage: w = SymmetricGroup(2)([2,1])\nsage: G = ArithmeticSubgroup_Permutation(w, w)\nsage: G.category()\nCategory of facade groups\nsage: TestSuite(G).run(skip=['_test_elements'])\n)))\n\nI think I passed already a lot of time on these parents (major part of today of trying to understand what they represent mathematically speaking...). Especially for the FreeMonoid feature. In the new category framework, the example of monoid (i.e. \"Monoids().example()\") is the free monoid. And the one coming from the category framework inherit of a LOT of top level methods. I try to fix FreeMonoidElement in sage/monoid with categories but if the choice was mine, I would just overwrite the 2005 version with these coming from category...\n\nHoping the patchbot will be happy this time! The patch does already much more than the ticket!",
    "created_at": "2011-04-28T17:11:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114834",
    "user": "https://github.com/sagetrac-nborie"
}
```

<a id='comment:8'></a>
I tried to do the best... Fix the TestSuite on old parents is not a simple job. Especially when one doesn't know enough about old category system... I fix properly the categories of affected parents, but I do not know how to do for the elements (especially when there is some facade with a separate implementation of the elements).

(((
sage: w = SymmetricGroup(2)([2,1])
sage: G = ArithmeticSubgroup_Permutation(w, w)
sage: G.category()
Category of facade groups
sage: TestSuite(G).run(skip=['_test_elements'])
)))

I think I passed already a lot of time on these parents (major part of today of trying to understand what they represent mathematically speaking...). Especially for the FreeMonoid feature. In the new category framework, the example of monoid (i.e. "Monoids().example()") is the free monoid. And the one coming from the category framework inherit of a LOT of top level methods. I try to fix FreeMonoidElement in sage/monoid with categories but if the choice was mine, I would just overwrite the 2005 version with these coming from category...

Hoping the patchbot will be happy this time! The patch does already much more than the ticket!



---

archive/issue_comments_114835.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [nborie](#comment%3A8):\n> I tried to do the best... Fix the TestSuite on old parents is not a simple job. Especially when one doesn't know enough about old category system... I fix properly the categories of affected parents, but I do not know how to do for the elements (especially when there is some facade with a separate implementation of the elements).\n> \n> (((\n> sage: w = SymmetricGroup(2)([2,1])\n> sage: G = ArithmeticSubgroup_Permutation(w, w)\n> sage: G.category()\n> Category of facade groups\n> sage: TestSuite(G).run(skip=['_test_elements'])\n> )))\n> \n> I think I passed already a lot of time on these parents (major part of today of trying to understand what they represent mathematically speaking...). Especially for the FreeMonoid feature. In the new category framework, the example of monoid (i.e. \"Monoids().example()\") is the free monoid. And the one coming from the category framework inherit of a LOT of top level methods. I try to fix FreeMonoidElement in sage/monoid with categories but if the choice was mine, I would just overwrite the 2005 version with these coming from category...\n> \n> Hoping the patchbot will be happy this time! The patch does already much more than the ticket!\n\nOops, this is going far beyond what I expected! I just meant to add\nTestSuite, and skip tests not related to zero / one. Now, this is not\nwasted time, so thanks! One should just be careful that this does not\noverlap with changes by Simon.\n\nCheers,\n\t\t\t\tNicolas",
    "created_at": "2011-04-28T17:40:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114835",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:9'></a>
Replying to [nborie](#comment%3A8):
> I tried to do the best... Fix the TestSuite on old parents is not a simple job. Especially when one doesn't know enough about old category system... I fix properly the categories of affected parents, but I do not know how to do for the elements (especially when there is some facade with a separate implementation of the elements).
> 
> (((
> sage: w = SymmetricGroup(2)([2,1])
> sage: G = ArithmeticSubgroup_Permutation(w, w)
> sage: G.category()
> Category of facade groups
> sage: TestSuite(G).run(skip=['_test_elements'])
> )))
> 
> I think I passed already a lot of time on these parents (major part of today of trying to understand what they represent mathematically speaking...). Especially for the FreeMonoid feature. In the new category framework, the example of monoid (i.e. "Monoids().example()") is the free monoid. And the one coming from the category framework inherit of a LOT of top level methods. I try to fix FreeMonoidElement in sage/monoid with categories but if the choice was mine, I would just overwrite the 2005 version with these coming from category...
> 
> Hoping the patchbot will be happy this time! The patch does already much more than the ticket!

Oops, this is going far beyond what I expected! I just meant to add
TestSuite, and skip tests not related to zero / one. Now, this is not
wasted time, so thanks! One should just be careful that this does not
overlap with changes by Simon.

Cheers,
				Nicolas



---

archive/issue_comments_114836.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -40,3 +40,5 @@\n sage: timeit('z^3')\n 625 loops, best of 3: 7.78 \u00b5s per loop\n ```\n+\n+depends on #9065\n``````\n",
    "created_at": "2011-04-28T17:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114836",
    "user": "https://github.com/sagetrac-nborie"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -40,3 +40,5 @@
 sage: timeit('z^3')
 625 loops, best of 3: 7.78 µs per loop
 ```
+
+depends on #9065
``````




---

archive/issue_events_088118.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-28T17:44:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88118"
}
```



---

archive/issue_events_088119.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-28T17:44:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88119"
}
```



---

archive/issue_comments_114837.json:
```json
{
    "body": "<a id='comment:11'></a>\nSorry for spamming, but I don't know how to tell the builbot that dependencies have change otherwise than change the status of the ticket.",
    "created_at": "2011-04-28T17:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114837",
    "user": "https://github.com/sagetrac-nborie"
}
```

<a id='comment:11'></a>
Sorry for spamming, but I don't know how to tell the builbot that dependencies have change otherwise than change the status of the ticket.



---

archive/issue_events_088120.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-28T17:44:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88120"
}
```



---

archive/issue_events_088121.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-28T17:44:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88121"
}
```



---

archive/issue_comments_114838.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@nthiery](#comment%3A9):\n> Oops, this is going far beyond what I expected! I just meant to add\n> TestSuite, and skip tests not related to zero / one. Now, this is not\n> wasted time, so thanks! One should just be careful that this does not\n> overlap with changes by Simon.\n\nI don't have the time to verify whether there is an overlap. But: *If* there is an overlap then it is with #9944 or #9138. These two tickets try to make all rings use the category framework properly, and in some cases it also provides them with the new coercion model.\n\nIf what you do is about something else but rings, then it is very likely that there is no overlap.\n\nBest regards,\n\nSimon",
    "created_at": "2011-04-28T17:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114838",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:13'></a>
Replying to [@nthiery](#comment%3A9):
> Oops, this is going far beyond what I expected! I just meant to add
> TestSuite, and skip tests not related to zero / one. Now, this is not
> wasted time, so thanks! One should just be careful that this does not
> overlap with changes by Simon.

I don't have the time to verify whether there is an overlap. But: *If* there is an overlap then it is with #9944 or #9138. These two tickets try to make all rings use the category framework properly, and in some cases it also provides them with the new coercion model.

If what you do is about something else but rings, then it is very likely that there is no overlap.

Best regards,

Simon



---

archive/issue_comments_114839.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -42,3 +42,4 @@\n ```\n \n depends on #9065\n+depends on #9138\n``````\n",
    "created_at": "2011-04-29T09:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114839",
    "user": "https://github.com/sagetrac-nborie"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -42,3 +42,4 @@
 ```
 
 depends on #9065
+depends on #9138
``````




---

archive/issue_events_088122.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-29T09:31:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88122"
}
```



---

archive/issue_events_088123.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2011-04-29T09:31:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88123"
}
```



---

archive/issue_comments_114840.json:
```json
{
    "body": "<a id='comment:14'></a>\nThere going to have a little conflict with #9138 and its second patch trac9138_categories_for_more_rings.patch. As Simon make a better categorifycation than me, I will place this patch after. I will also begin the review of #9138, I won't probably review everything (It is not a small patch), but I will give a list of what I review (according my skills). Thanks very very much for #9138 (not an amazing task but it has to be done!)\n\nCheers,",
    "created_at": "2011-04-29T09:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114840",
    "user": "https://github.com/sagetrac-nborie"
}
```

<a id='comment:14'></a>
There going to have a little conflict with #9138 and its second patch trac9138_categories_for_more_rings.patch. As Simon make a better categorifycation than me, I will place this patch after. I will also begin the review of #9138, I won't probably review everything (It is not a small patch), but I will give a list of what I review (according my skills). Thanks very very much for #9138 (not an amazing task but it has to be done!)

Cheers,



---

archive/issue_comments_114841.json:
```json
{
    "body": "**Changing keywords** from \"coercion, element, power, zero\" to \"coercion, element, power, zero, Cernay2012\".",
    "created_at": "2012-02-06T14:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114841",
    "user": "https://github.com/sagetrac-nborie"
}
```

**Changing keywords** from "coercion, element, power, zero" to "coercion, element, power, zero, Cernay2012".



---

archive/issue_events_088124.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2012-02-06T18:41:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88124"
}
```



---

archive/issue_events_088125.json:
```json
{
    "actor": "https://github.com/sagetrac-nborie",
    "created_at": "2012-02-06T18:41:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88125"
}
```



---

archive/issue_comments_114842.json:
```json
{
    "body": "**Dependencies:** #11900",
    "created_at": "2012-02-07T02:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114842",
    "user": "https://github.com/sagetrac-nborie"
}
```

**Dependencies:** #11900



---

archive/issue_comments_114843.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Attachment:** [trac_11257_avoid_coercion_power_zero-nb.patch.gz](https://github.com/sagemath/sage/files/ticket11257/trac_11257_avoid_coercion_power_zero-nb.patch.gz)\n\nI just added a one method for EtaGroup... With the categories for all(more) ring from Simon, all tests should pass...",
    "created_at": "2012-02-07T02:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114843",
    "user": "https://github.com/sagetrac-nborie"
}
```

<a id='comment:17'></a>
**Attachment:** [trac_11257_avoid_coercion_power_zero-nb.patch.gz](https://github.com/sagemath/sage/files/ticket11257/trac_11257_avoid_coercion_power_zero-nb.patch.gz)

I just added a one method for EtaGroup... With the categories for all(more) ring from Simon, all tests should pass...



---

archive/issue_comments_114844.json:
```json
{
    "body": "<a id='comment:18'></a>\nI tested it again, and it is good to go `:-)`\n\nNathann",
    "created_at": "2012-02-10T12:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114844",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
I tested it again, and it is good to go `:-)`

Nathann



---

archive/issue_comments_114845.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2012-02-10T12:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114845",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_events_088126.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-02-10T12:52:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88126"
}
```



---

archive/issue_events_088127.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-02-10T12:52:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88127"
}
```



---

archive/issue_comments_114846.json:
```json
{
    "body": "**Merged:** sage-5.0.beta4",
    "created_at": "2012-02-14T14:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11257#issuecomment-114846",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta4



---

archive/issue_events_088128.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-14T14:20:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88128"
}
```



---

archive/issue_events_088129.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-14T14:20:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11257",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11257#event-88129"
}
```
