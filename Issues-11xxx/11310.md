# Issue 11310: Monkey-patch catchall `except:` statements so they at least don't catch `KeyboardInterrupt` errors

archive/issues_011138.json:
```json
{
    "body": "There are a lot places in the Sage library which use\n\n```\nexcept:\n```\nThis is bad because it catches non-errors like `KeyboardInterrupt`.\n\n---\n\nThen the patch [attachment:11310_auto.patch] has ben auto-generated to replace all instances of\n\n```\nexcept:\n```\nby\n\n```\nexcept StandardError:\n```\nand all instances of\n\n```\nraise Exception\n```\nby\n\n```\nraise RuntimeError\n```\n\n---\n\n**Apply** [attachment:trac_11310.patch] and [attachment:11310_auto.patch] and [attachment:11310_psage.patch].\n\nAssignee: @jasongrout\n\nCC:  @kini\n\nReviewer: Keshav Kini\n\nAuthor: Jeroen Demeyer, Volker Braun\n\nMerged: sage-5.3.beta1\n\nDependencies: #13109\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/11310\n\n",
    "closed_at": "2012-08-12T18:58:35Z",
    "created_at": "2011-05-07T10:10:30Z",
    "labels": [
        "component: misc",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "Monkey-patch catchall `except:` statements so they at least don't catch `KeyboardInterrupt` errors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11310",
    "user": "https://github.com/jdemeyer"
}
```
There are a lot places in the Sage library which use

```
except:
```
This is bad because it catches non-errors like `KeyboardInterrupt`.

---

Then the patch [attachment:11310_auto.patch] has ben auto-generated to replace all instances of

```
except:
```
by

```
except StandardError:
```
and all instances of

```
raise Exception
```
by

```
raise RuntimeError
```

---

**Apply** [attachment:trac_11310.patch] and [attachment:11310_auto.patch] and [attachment:11310_psage.patch].

Assignee: @jasongrout

CC:  @kini

Reviewer: Keshav Kini

Author: Jeroen Demeyer, Volker Braun

Merged: sage-5.3.beta1

Dependencies: #13109

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/11310





---

archive/issue_comments_128223.json:
```json
{
    "body": "<a id='comment:2'></a>What's the problem with this ticket? I think it is a small enough change that it can be at least set for review.",
    "created_at": "2012-05-15T09:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128223",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:2'></a>What's the problem with this ticket? I think it is a small enough change that it can be at least set for review.



---

archive/issue_comments_128224.json:
```json
{
    "body": "<a id='comment:3'></a>Tests pass on 5.0. Jeroen, is this ready for review, or do you want to add more stuff?",
    "created_at": "2012-05-16T05:22:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128224",
    "user": "https://github.com/kini"
}
```

<a id='comment:3'></a>Tests pass on 5.0. Jeroen, is this ready for review, or do you want to add more stuff?



---

archive/issue_comments_128225.json:
```json
{
    "body": "<a id='comment:4'></a>I would like to fix the following from `devel/sage/sage/structure/parent.pyx`, starting at line 2577:\n\n```\n        try:\n            return super(Parent, self)._an_element_()\n        except EmptySetError:\n            raise\n        except:\n            _record_exception()\n            pass\n\n        try:\n            return self.gen(0)\n        except:\n            _record_exception()\n            pass\n\n        try:\n            return self.gen()\n        except:\n            _record_exception()\n            pass\n```",
    "created_at": "2012-05-16T07:21:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128225",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>I would like to fix the following from `devel/sage/sage/structure/parent.pyx`, starting at line 2577:

```
        try:
            return super(Parent, self)._an_element_()
        except EmptySetError:
            raise
        except:
            _record_exception()
            pass

        try:
            return self.gen(0)
        except:
            _record_exception()
            pass

        try:
            return self.gen()
        except:
            _record_exception()
            pass
```



---

archive/issue_comments_128226.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,34 @@\n+There are a lot places in the Sage library which use\n \n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+This is bad because it catches non-errors like \\`KeyboardInterrupt\\` and \\`StopIteration\\`.\n+\n+The patch [attachent:11310_auto.patch] has ben auto-generated by replacing all instances of\n+\n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+except StandardError:\n+\\`\\`\\`\n+and all instances of\n+\n+\\`\\`\\`\n+raise Exeption\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+raise RuntimeError\n+\\`\\`\\`\n+\n+Then the patch [attachment:11310.patch] does some small miscellaneous fixes.\n+\n+**Apply** all patches.\n \n Comment: 1\n \n```\n",
    "created_at": "2012-06-21T07:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128226",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,34 @@
+There are a lot places in the Sage library which use
 
+\`\`\`
+except:
+\`\`\`
+This is bad because it catches non-errors like \`KeyboardInterrupt\` and \`StopIteration\`.
+
+The patch [attachent:11310_auto.patch] has ben auto-generated by replacing all instances of
+
+\`\`\`
+except:
+\`\`\`
+by
+
+\`\`\`
+except StandardError:
+\`\`\`
+and all instances of
+
+\`\`\`
+raise Exeption
+\`\`\`
+by
+
+\`\`\`
+raise RuntimeError
+\`\`\`
+
+Then the patch [attachment:11310.patch] does some small miscellaneous fixes.
+
+**Apply** all patches.
 
 Comment: 1
 
```




---

archive/issue_comments_128227.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,38 @@\n+There are a lot places in the Sage library which use\n \n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+This is bad because it catches non-errors like \\`KeyboardInterrupt\\` and \\`StopIteration\\`.\n+\n+---\n+\n+The patch [attachment:11310_auto.patch] has ben auto-generated by replacing all instances of\n+\n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+except StandardError:\n+\\`\\`\\`\n+and all instances of\n+\n+\\`\\`\\`\n+raise Exception\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+raise RuntimeError\n+\\`\\`\\`\n+\n+Then the patch [attachment:11310.patch] does some small miscellaneous fixes.\n+\n+---\n+\n+**Apply** [attachment:11310.patch] and [attachment:11310_auto.patch]\n \n Comment: 1\n \n```\n",
    "created_at": "2012-06-21T08:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128227",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,38 @@
+There are a lot places in the Sage library which use
 
+\`\`\`
+except:
+\`\`\`
+This is bad because it catches non-errors like \`KeyboardInterrupt\` and \`StopIteration\`.
+
+---
+
+The patch [attachment:11310_auto.patch] has ben auto-generated by replacing all instances of
+
+\`\`\`
+except:
+\`\`\`
+by
+
+\`\`\`
+except StandardError:
+\`\`\`
+and all instances of
+
+\`\`\`
+raise Exception
+\`\`\`
+by
+
+\`\`\`
+raise RuntimeError
+\`\`\`
+
+Then the patch [attachment:11310.patch] does some small miscellaneous fixes.
+
+---
+
+**Apply** [attachment:11310.patch] and [attachment:11310_auto.patch]
 
 Comment: 1
 
```




---

archive/issue_comments_128228.json:
```json
{
    "body": "<a id='comment:7'></a>Changing these bare except statements to `except StandardError` seems like not enough, don't you think? Except statements should always be written to accept the narrowest possible expected exception class only.",
    "created_at": "2012-06-21T08:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128228",
    "user": "https://github.com/kini"
}
```

<a id='comment:7'></a>Changing these bare except statements to `except StandardError` seems like not enough, don't you think? Except statements should always be written to accept the narrowest possible expected exception class only.



---

archive/issue_comments_128229.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 kini]:\n> Changing these bare except statements to `except StandardError` seems like not enough, don't you think? Except statements should always be written to accept the narrowest possible expected exception class only.\n\n\nThen what should it be? According to the [hierarchy of exceptions](http://docs.python.org/library/exceptions.html#exception-hierarchy) I think `StandardError` encapsulates most of what can go wrong. It is at least better than a blank `except:`.\n\nAbout the `RuntimeError`s I think some of them should be `ValueError` and I spotted one which should be an `AttributeError`.",
    "created_at": "2012-06-21T08:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128229",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:8'></a>Replying to [comment:7 kini]:
> Changing these bare except statements to `except StandardError` seems like not enough, don't you think? Except statements should always be written to accept the narrowest possible expected exception class only.


Then what should it be? According to the [hierarchy of exceptions](http://docs.python.org/library/exceptions.html#exception-hierarchy) I think `StandardError` encapsulates most of what can go wrong. It is at least better than a blank `except:`.

About the `RuntimeError`s I think some of them should be `ValueError` and I spotted one which should be an `AttributeError`.



---

archive/issue_comments_128230.json:
```json
{
    "body": "<a id='comment:9'></a>I mean that the code should be inspected and the appropriate exception class should be used in each case. Of course, this is not easy, considering that the autogenerated patch is more than 100 KB. But still, it should be done.",
    "created_at": "2012-06-21T08:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128230",
    "user": "https://github.com/kini"
}
```

<a id='comment:9'></a>I mean that the code should be inspected and the appropriate exception class should be used in each case. Of course, this is not easy, considering that the autogenerated patch is more than 100 KB. But still, it should be done.



---

archive/issue_comments_128231.json:
```json
{
    "body": "<a id='comment:10'></a>I'm currently going though the auto-generated patch and fixing the obvious things by hand.  Note that the title of this ticket isn't \"totally fix all exceptions inside Sage\".\n\nThe main point is to not catch `KeyboardInterrupt` errors.",
    "created_at": "2012-06-21T08:34:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128231",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>I'm currently going though the auto-generated patch and fixing the obvious things by hand.  Note that the title of this ticket isn't "totally fix all exceptions inside Sage".

The main point is to not catch `KeyboardInterrupt` errors.



---

archive/issue_comments_128232.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 jdemeyer]:\n> The main point is to not catch `KeyboardInterrupt` errors.\n\n\nOther than some of the `RuntimeError`s, I think the patch is fine, if the objective was this.",
    "created_at": "2012-06-21T08:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128232",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:11'></a>Replying to [comment:10 jdemeyer]:
> The main point is to not catch `KeyboardInterrupt` errors.


Other than some of the `RuntimeError`s, I think the patch is fine, if the objective was this.



---

archive/issue_comments_128233.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 jdemeyer]:\n> I'm currently going though the auto-generated patch and fixing the obvious things by hand.  Note that the title of this ticket isn't \"totally fix all exceptions inside Sage\".\n> \n> The main point is to not catch `KeyboardInterrupt` errors.\n\n\nWell, the title is a bit misleading I guess. Sure, it's not \"totally fix all exceptions inside Sage\", but it does seem like \"totally fix some exceptions inside Sage\" :)",
    "created_at": "2012-06-21T08:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128233",
    "user": "https://github.com/kini"
}
```

<a id='comment:12'></a>Replying to [comment:10 jdemeyer]:
> I'm currently going though the auto-generated patch and fixing the obvious things by hand.  Note that the title of this ticket isn't "totally fix all exceptions inside Sage".
> 
> The main point is to not catch `KeyboardInterrupt` errors.


Well, the title is a bit misleading I guess. Sure, it's not "totally fix all exceptions inside Sage", but it does seem like "totally fix some exceptions inside Sage" :)



---

archive/issue_comments_128234.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,38 @@\n+There are a lot places in the Sage library which use\n \n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+This is bad because it catches non-errors like \\`KeyboardInterrupt\\`.\n+\n+---\n+\n+The patch [attachment:11310_auto.patch] has ben auto-generated by replacing all instances of\n+\n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+except StandardError:\n+\\`\\`\\`\n+and all instances of\n+\n+\\`\\`\\`\n+raise Exception\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+raise RuntimeError\n+\\`\\`\\`\n+\n+Then the patch [attachment:11310.patch] does some small miscellaneous fixes.\n+\n+---\n+\n+**Apply** [attachment:11310.patch] and [attachment:11310_auto.patch]\n \n Comment: 1\n \n```\n",
    "created_at": "2012-06-21T10:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128234",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,38 @@
+There are a lot places in the Sage library which use
 
+\`\`\`
+except:
+\`\`\`
+This is bad because it catches non-errors like \`KeyboardInterrupt\`.
+
+---
+
+The patch [attachment:11310_auto.patch] has ben auto-generated by replacing all instances of
+
+\`\`\`
+except:
+\`\`\`
+by
+
+\`\`\`
+except StandardError:
+\`\`\`
+and all instances of
+
+\`\`\`
+raise Exception
+\`\`\`
+by
+
+\`\`\`
+raise RuntimeError
+\`\`\`
+
+Then the patch [attachment:11310.patch] does some small miscellaneous fixes.
+
+---
+
+**Apply** [attachment:11310.patch] and [attachment:11310_auto.patch]
 
 Comment: 1
 
```




---

archive/issue_comments_128235.json:
```json
{
    "body": "<a id='comment:14'></a>Okay, I changed a lot of things by hand, needs_review.",
    "created_at": "2012-06-21T13:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128235",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Okay, I changed a lot of things by hand, needs_review.



---

archive/issue_comments_128236.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-06-21T13:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128236",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_events_029292.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-21T13:56:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11310#event-29292"
}
```



---

archive/issue_comments_128237.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,38 @@\n+There are a lot places in the Sage library which use\n \n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+This is bad because it catches non-errors like \\`KeyboardInterrupt\\`.\n+\n+---\n+\n+Then the patch [attachment:11310.patch] fixes some of these.\n+\n+Then the patch [attachment:11310_auto.patch] has ben auto-generated to replace all remaining instances of\n+\n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+except StandardError:\n+\\`\\`\\`\n+and all instances of\n+\n+\\`\\`\\`\n+raise Exception\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+raise RuntimeError\n+\\`\\`\\`\n+\n+---\n+\n+**Apply** [attachment:11310.patch] and [attachment:11310_auto.patch]\n \n Comment: 1\n \n```\n",
    "created_at": "2012-06-21T14:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128237",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,38 @@
+There are a lot places in the Sage library which use
 
+\`\`\`
+except:
+\`\`\`
+This is bad because it catches non-errors like \`KeyboardInterrupt\`.
+
+---
+
+Then the patch [attachment:11310.patch] fixes some of these.
+
+Then the patch [attachment:11310_auto.patch] has ben auto-generated to replace all remaining instances of
+
+\`\`\`
+except:
+\`\`\`
+by
+
+\`\`\`
+except StandardError:
+\`\`\`
+and all instances of
+
+\`\`\`
+raise Exception
+\`\`\`
+by
+
+\`\`\`
+raise RuntimeError
+\`\`\`
+
+---
+
+**Apply** [attachment:11310.patch] and [attachment:11310_auto.patch]
 
 Comment: 1
 
```




---

archive/issue_comments_128238.json:
```json
{
    "body": "<a id='comment:16'></a>Patchbot says trailing whitespace :P",
    "created_at": "2012-06-21T15:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128238",
    "user": "https://github.com/kini"
}
```

<a id='comment:16'></a>Patchbot says trailing whitespace :P



---

archive/issue_comments_128239.json:
```json
{
    "body": "<a id='comment:17'></a>Hmm.. a lot of doctests are failing:\n\n```\nThe following tests failed:\n                           \n\tsage -t  --long -force_lib devel/sage/doc/en/thematic_tutorials/lie/weight_ring.rst # 2 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/rings/polynomial/pbori.pyx # 3 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/combinat/free_module.py # 3 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/combinat/posets/poset_examples.py # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/combinat/root_system/weyl_characters.py # 11 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/modules/vector_double_dense.pyx # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/graphs/isgci.py # 2 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/graphs/generic_graph.py # 3 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/graphs/graph_decompositions/rankwidth.pyx # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/graphs/graph_generators.py # 2 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/interfaces/chomp.py # 3 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/interfaces/expect.py # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/interfaces/psage.py # Time out\n\tsage -t  --long -force_lib devel/sage/sage/homology/simplicial_complex_morphism.py # 8 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/homology/delta_complex.py # 5 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/homology/cell_complex.py # 5 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/homology/simplicial_complex_homset.py # 7 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/homology/simplicial_complex.py # 33 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/homology/examples.py # 8 doctests failed\n```",
    "created_at": "2012-06-22T04:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128239",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:17'></a>Hmm.. a lot of doctests are failing:

```
The following tests failed:
                           
	sage -t  --long -force_lib devel/sage/doc/en/thematic_tutorials/lie/weight_ring.rst # 2 doctests failed
	sage -t  --long -force_lib devel/sage/sage/rings/polynomial/pbori.pyx # 3 doctests failed
	sage -t  --long -force_lib devel/sage/sage/combinat/free_module.py # 3 doctests failed
	sage -t  --long -force_lib devel/sage/sage/combinat/posets/poset_examples.py # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/combinat/root_system/weyl_characters.py # 11 doctests failed
	sage -t  --long -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/modules/vector_double_dense.pyx # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/graphs/isgci.py # 2 doctests failed
	sage -t  --long -force_lib devel/sage/sage/graphs/generic_graph.py # 3 doctests failed
	sage -t  --long -force_lib devel/sage/sage/graphs/graph_decompositions/rankwidth.pyx # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/graphs/graph_generators.py # 2 doctests failed
	sage -t  --long -force_lib devel/sage/sage/interfaces/chomp.py # 3 doctests failed
	sage -t  --long -force_lib devel/sage/sage/interfaces/expect.py # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/interfaces/psage.py # Time out
	sage -t  --long -force_lib devel/sage/sage/homology/simplicial_complex_morphism.py # 8 doctests failed
	sage -t  --long -force_lib devel/sage/sage/homology/delta_complex.py # 5 doctests failed
	sage -t  --long -force_lib devel/sage/sage/homology/cell_complex.py # 5 doctests failed
	sage -t  --long -force_lib devel/sage/sage/homology/simplicial_complex_homset.py # 7 doctests failed
	sage -t  --long -force_lib devel/sage/sage/homology/simplicial_complex.py # 33 doctests failed
	sage -t  --long -force_lib devel/sage/sage/homology/examples.py # 8 doctests failed
```



---

archive/issue_comments_128240.json:
```json
{
    "body": "<a id='comment:18'></a>I think something changed in the patches between the last time I ran `make ptestlong` (I had to leave it running and go home) and the new patches uploaded 12h ago. At present, running the doctest on only these few files gives no errors.",
    "created_at": "2012-06-22T05:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128240",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:18'></a>I think something changed in the patches between the last time I ran `make ptestlong` (I had to leave it running and go home) and the new patches uploaded 12h ago. At present, running the doctest on only these few files gives no errors.



---

archive/issue_comments_128241.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-22T05:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128241",
    "user": "https://github.com/kini"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_128242.json:
```json
{
    "body": "<a id='comment:19'></a>Patchbot says it's fine over the whole library. Looks good to me.",
    "created_at": "2012-06-22T05:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128242",
    "user": "https://github.com/kini"
}
```

<a id='comment:19'></a>Patchbot says it's fine over the whole library. Looks good to me.



---

archive/issue_comments_128243.json:
```json
{
    "body": "Attachment [11310_auto.patch](tarball://root/attachments/some-uuid/ticket11310/11310_auto.patch) by @jdemeyer created at 2012-06-29 12:11:53",
    "created_at": "2012-06-29T12:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128243",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [11310_auto.patch](tarball://root/attachments/some-uuid/ticket11310/11310_auto.patch) by @jdemeyer created at 2012-06-29 12:11:53



---

archive/issue_comments_128244.json:
```json
{
    "body": "<a id='comment:20'></a>Rebased to #11143 (where one of the `except:` statements was removed).",
    "created_at": "2012-06-29T12:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128244",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>Rebased to #11143 (where one of the `except:` statements was removed).



---

archive/issue_comments_128245.json:
```json
{
    "body": "<a id='comment:22'></a>Not really, I just *removed* a hunk to resolve the conflict.",
    "created_at": "2012-06-29T21:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128245",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>Not really, I just *removed* a hunk to resolve the conflict.



---

archive/issue_comments_128246.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-06-30T18:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128246",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_128247.json:
```json
{
    "body": "Rediffed patch",
    "created_at": "2012-06-30T18:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128247",
    "user": "https://github.com/vbraun"
}
```

Rediffed patch



---

archive/issue_comments_128248.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-06-30T18:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128248",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_128249.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,38 @@\n+There are a lot places in the Sage library which use\n \n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+This is bad because it catches non-errors like \\`KeyboardInterrupt\\`.\n+\n+---\n+\n+Then the patch [attachment:11310.patch] fixes some of these.\n+\n+Then the patch [attachment:11310_auto.patch] has ben auto-generated to replace all remaining instances of\n+\n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+except StandardError:\n+\\`\\`\\`\n+and all instances of\n+\n+\\`\\`\\`\n+raise Exception\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+raise RuntimeError\n+\\`\\`\\`\n+\n+---\n+\n+**Apply** [attachment:trac_11310.patch] and [attachment:11310_auto.patch]\n \n Comment: 1\n \n```\n",
    "created_at": "2012-06-30T18:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128249",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,38 @@
+There are a lot places in the Sage library which use
 
+\`\`\`
+except:
+\`\`\`
+This is bad because it catches non-errors like \`KeyboardInterrupt\`.
+
+---
+
+Then the patch [attachment:11310.patch] fixes some of these.
+
+Then the patch [attachment:11310_auto.patch] has ben auto-generated to replace all remaining instances of
+
+\`\`\`
+except:
+\`\`\`
+by
+
+\`\`\`
+except StandardError:
+\`\`\`
+and all instances of
+
+\`\`\`
+raise Exception
+\`\`\`
+by
+
+\`\`\`
+raise RuntimeError
+\`\`\`
+
+---
+
+**Apply** [attachment:trac_11310.patch] and [attachment:11310_auto.patch]
 
 Comment: 1
 
```




---

archive/issue_comments_128250.json:
```json
{
    "body": "<a id='comment:24'></a>Attachment [trac_11310.patch](tarball://root/attachments/some-uuid/ticket11310/trac_11310.patch) by @vbraun created at 2012-06-30 18:45:01\n\nThe new patch just fixes some fuzz 2 with #13109, back to positive review.",
    "created_at": "2012-06-30T18:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128250",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'></a>Attachment [trac_11310.patch](tarball://root/attachments/some-uuid/ticket11310/trac_11310.patch) by @vbraun created at 2012-06-30 18:45:01

The new patch just fixes some fuzz 2 with #13109, back to positive review.



---

archive/issue_events_029293.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-01T18:51:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11310#event-29293"
}
```



---

archive/issue_events_029294.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-01T18:51:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11310#event-29294"
}
```



---

archive/issue_events_029295.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-07-09T15:02:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11310#event-29295"
}
```



---

archive/issue_events_029296.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-07-09T15:02:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "milestone": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11310#event-29296"
}
```



---

archive/issue_comments_128251.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,37 @@\n+There are a lot places in the Sage library which use\n \n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+This is bad because it catches non-errors like \\`KeyboardInterrupt\\`.\n+\n+---\n+\n+The patch [attachment:trac_11310.patch] fixes some of these.\n+Then the patch [attachment:11310_auto.patch] has ben auto-generated to replace all remaining instances of\n+\n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+except StandardError:\n+\\`\\`\\`\n+and all instances of\n+\n+\\`\\`\\`\n+raise Exception\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+raise RuntimeError\n+\\`\\`\\`\n+\n+---\n+\n+**Apply** [attachment:trac_11310.patch] and [attachment:11310_auto.patch]\n \n Comment: 1\n \n```\n",
    "created_at": "2012-08-01T12:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128251",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,37 @@
+There are a lot places in the Sage library which use
 
+\`\`\`
+except:
+\`\`\`
+This is bad because it catches non-errors like \`KeyboardInterrupt\`.
+
+---
+
+The patch [attachment:trac_11310.patch] fixes some of these.
+Then the patch [attachment:11310_auto.patch] has ben auto-generated to replace all remaining instances of
+
+\`\`\`
+except:
+\`\`\`
+by
+
+\`\`\`
+except StandardError:
+\`\`\`
+and all instances of
+
+\`\`\`
+raise Exception
+\`\`\`
+by
+
+\`\`\`
+raise RuntimeError
+\`\`\`
+
+---
+
+**Apply** [attachment:trac_11310.patch] and [attachment:11310_auto.patch]
 
 Comment: 1
 
```




---

archive/issue_comments_128252.json:
```json
{
    "body": "Additional patch",
    "created_at": "2012-08-02T12:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128252",
    "user": "https://github.com/jdemeyer"
}
```

Additional patch



---

archive/issue_comments_128253.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,36 @@\n+There are a lot places in the Sage library which use\n \n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+This is bad because it catches non-errors like \\`KeyboardInterrupt\\`.\n+\n+---\n+\n+Then the patch [attachment:11310_auto.patch] has ben auto-generated to replace all instances of\n+\n+\\`\\`\\`\n+except:\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+except StandardError:\n+\\`\\`\\`\n+and all instances of\n+\n+\\`\\`\\`\n+raise Exception\n+\\`\\`\\`\n+by\n+\n+\\`\\`\\`\n+raise RuntimeError\n+\\`\\`\\`\n+\n+---\n+\n+**Apply** [attachment:trac_11310.patch] and [attachment:11310_auto.patch] and [attachment:11310_psage.patch].\n \n Comment: 1\n \n```\n",
    "created_at": "2012-08-02T12:58:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128253",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,36 @@
+There are a lot places in the Sage library which use
 
+\`\`\`
+except:
+\`\`\`
+This is bad because it catches non-errors like \`KeyboardInterrupt\`.
+
+---
+
+Then the patch [attachment:11310_auto.patch] has ben auto-generated to replace all instances of
+
+\`\`\`
+except:
+\`\`\`
+by
+
+\`\`\`
+except StandardError:
+\`\`\`
+and all instances of
+
+\`\`\`
+raise Exception
+\`\`\`
+by
+
+\`\`\`
+raise RuntimeError
+\`\`\`
+
+---
+
+**Apply** [attachment:trac_11310.patch] and [attachment:11310_auto.patch] and [attachment:11310_psage.patch].
 
 Comment: 1
 
```




---

archive/issue_comments_128254.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-02T12:58:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128254",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_128255.json:
```json
{
    "body": "<a id='comment:28'></a>Attachment [11310_psage.patch](tarball://root/attachments/some-uuid/ticket11310/11310_psage.patch) by @jdemeyer created at 2012-08-02 12:58:25\n\nAdditional patch [attachment:11310_psage.patch] needs review (there were sporadic doctest failures in `psage.py`).",
    "created_at": "2012-08-02T12:58:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128255",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>Attachment [11310_psage.patch](tarball://root/attachments/some-uuid/ticket11310/11310_psage.patch) by @jdemeyer created at 2012-08-02 12:58:25

Additional patch [attachment:11310_psage.patch] needs review (there were sporadic doctest failures in `psage.py`).



---

archive/issue_comments_128256.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-02T12:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128256",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_128257.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-02T13:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128257",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_128258.json:
```json
{
    "body": "<a id='comment:30'></a>Looks good! \n\nIn a perfect world `ExceptionPexpect` would derive from `StandardError` and not the raw exceptions, but oh well.",
    "created_at": "2012-08-02T13:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128258",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>Looks good! 

In a perfect world `ExceptionPexpect` would derive from `StandardError` and not the raw exceptions, but oh well.



---

archive/issue_comments_128259.json:
```json
{
    "body": "<a id='comment:31'></a>psage is a weird beast. I have seen doctest errors in psage which change from version to version. I couldn't explain it, nor do I know the fix. See #12061.",
    "created_at": "2012-08-02T13:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128259",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:31'></a>psage is a weird beast. I have seen doctest errors in psage which change from version to version. I couldn't explain it, nor do I know the fix. See #12061.



---

archive/issue_comments_128260.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-08-12T18:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128260",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_029297.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-12T18:58:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11310#event-29297"
}
```



---

archive/issue_comments_128261.json:
```json
{
    "body": "<a id='comment:33'></a>This causes issues with Python 3. See #15620.",
    "created_at": "2014-01-02T15:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11310#issuecomment-128261",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:33'></a>This causes issues with Python 3. See #15620.
