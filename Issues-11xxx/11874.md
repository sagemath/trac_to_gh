# Issue 11874: Remove twisted spkg

archive/issues_011702.json:
```json
{
    "assignees": [],
    "body": "The version of Twisted currently used in Sage is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashes of the notebook webapp go away after the upgrade to twisted 11.\n\nThe twisted package is now included in the flask sagenb (#11080), so this ticket just removes the twisted spkg.\n\nSee http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.\n\n**apply**:\n\n1. [attachment:trac-11874-remove-twisted.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch) to the sage root repository\n2. [attachment:sage-spkg-11874.patch](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch) to the Sage library.\n\nAnd **remove** the twisted spkg from the standard spkgs.\n\nDepends on #12329\n\nDepends on #11080\n\nDepends on #10492\n\n**CC:**  rkirov @kini @ppurka @kcrisman @jasongrout @strogdon\n\n**Keywords:** twisted, notebook\n\n**Reviewer:** Dmitrii Pasechnik, Jason Grout\n\n**Author:** Radoslav Kirov, Jason Grout\n\n**Merged:** sage-5.2.beta0\n\nIssue created by migration from https://trac.sagemath.org/ticket/11874\n\n",
    "closed_at": "2012-07-25T13:38:26Z",
    "created_at": "2011-09-30T05:23:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove twisted spkg",
    "type": "issue",
    "updated_at": "2016-04-15T20:05:04Z",
    "url": "https://github.com/sagemath/sage/issues/11874",
    "user": "https://github.com/dimpase"
}
```
The version of Twisted currently used in Sage is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashes of the notebook webapp go away after the upgrade to twisted 11.

The twisted package is now included in the flask sagenb (#11080), so this ticket just removes the twisted spkg.

See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.

**apply**:

1. [attachment:trac-11874-remove-twisted.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch) to the sage root repository
2. [attachment:sage-spkg-11874.patch](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch) to the Sage library.

And **remove** the twisted spkg from the standard spkgs.

Depends on #12329

Depends on #11080

Depends on #10492

**CC:**  rkirov @kini @ppurka @kcrisman @jasongrout @strogdon

**Keywords:** twisted, notebook

**Reviewer:** Dmitrii Pasechnik, Jason Grout

**Author:** Radoslav Kirov, Jason Grout

**Merged:** sage-5.2.beta0

Issue created by migration from https://trac.sagemath.org/ticket/11874





---

archive/issue_events_134921.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-09-30T05:23:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "milestone_number": null,
    "milestone_title": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134921"
}
```



---

archive/issue_events_134922.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-09-30T05:23:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20misc",
    "label_color": "08517b",
    "label_name": "component: misc",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134922"
}
```



---

archive/issue_events_134923.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-30T19:56:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20misc",
    "label_color": "08517b",
    "label_name": "component: misc",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134923"
}
```



---

archive/issue_events_134924.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-30T19:56:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages",
    "label_color": "08517b",
    "label_name": "component: packages",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134924"
}
```



---

archive/issue_comments_126442.json:
```json
{
    "body": "**Remove assignee** @jasongrout.",
    "created_at": "2011-09-30T19:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126442",
    "user": "https://github.com/nexttime"
}
```

**Remove assignee** @jasongrout.



---

archive/issue_comments_126443.json:
```json
{
    "body": "<a id='comment:3'></a>\nSee also #11497, which has a possible fix that we may need to apply, maybe?",
    "created_at": "2011-12-13T17:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126443",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'></a>
See also #11497, which has a possible fix that we may need to apply, maybe?



---

archive/issue_events_134925.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-13T17:48:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134925"
}
```



---

archive/issue_comments_126444.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n the currently used in Sage version of twisted is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashed of the notebook webapp go away after the upgrade to twisted 11.\n \n-A preliminary spkg is here http://boxen.math.washington.edu/home/dima/packages/twisted-11.0.0.spkg\n-and the corresponding Sage patch is here\n-http://boxen.math.washington.edu/home/dima/patches/twisted11.patch\n-(to be applied against rkirov's flask version of the notebook\n-http://code.google.com/r/rkirov-flask/)\n+The new package is at http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg\n+\n+The new sage notebook at http://code.google.com/r/jasongrout-flask-sagenb/ is needed to test this package\n+\n``````\n",
    "created_at": "2011-12-13T17:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126444",
    "user": "https://github.com/jasongrout"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
 the currently used in Sage version of twisted is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashed of the notebook webapp go away after the upgrade to twisted 11.
 
-A preliminary spkg is here http://boxen.math.washington.edu/home/dima/packages/twisted-11.0.0.spkg
-and the corresponding Sage patch is here
-http://boxen.math.washington.edu/home/dima/patches/twisted11.patch
-(to be applied against rkirov's flask version of the notebook
-http://code.google.com/r/rkirov-flask/)
+The new package is at http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg
+
+The new sage notebook at http://code.google.com/r/jasongrout-flask-sagenb/ is needed to test this package
+
``````




---

archive/issue_comments_126445.json:
```json
{
    "body": "<a id='comment:4'></a>\nSee also #11497, which has a possible fix that we may need to apply, maybe?",
    "created_at": "2011-12-13T17:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126445",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:4'></a>
See also #11497, which has a possible fix that we may need to apply, maybe?



---

archive/issue_comments_126446.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [@jasongrout](#comment%3A4):\n> See also #11497, which has a possible fix that we may need to apply, maybe?\n\nApparently not... see that ticket.",
    "created_at": "2011-12-14T02:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126446",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
Replying to [@jasongrout](#comment%3A4):
> See also #11497, which has a possible fix that we may need to apply, maybe?

Apparently not... see that ticket.



---

archive/issue_comments_126447.json:
```json
{
    "body": "Replying to [ticket:11874 dimpase]:\n> The new sage notebook at http://code.google.com/r/jasongrout-flask-sagenb/ is needed to test this package\n\nPlease explain what you mean with this: needed to \"test\" this package?",
    "created_at": "2011-12-14T22:31:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126447",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:11874 dimpase]:
> The new sage notebook at http://code.google.com/r/jasongrout-flask-sagenb/ is needed to test this package

Please explain what you mean with this: needed to "test" this package?



---

archive/issue_events_134926.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-14T22:31:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134926"
}
```



---

archive/issue_events_134927.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-14T22:31:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134927"
}
```



---

archive/issue_comments_126448.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe changes necessary to test this package are included in the   http://code.google.com/r/jasongrout-flask-sagenb/ notebook, and not in the current notebook.  Thus, to test this spkg, someone will need to install the new flask server as well.",
    "created_at": "2011-12-14T22:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126448",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
The changes necessary to test this package are included in the   http://code.google.com/r/jasongrout-flask-sagenb/ notebook, and not in the current notebook.  Thus, to test this spkg, someone will need to install the new flask server as well.



---

archive/issue_comments_126449.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [@jasongrout](#comment%3A7):\n> The changes necessary to test this package are included in the   http://code.google.com/r/jasongrout-flask-sagenb/ notebook, and not in the current notebook.  Thus, to test this spkg, someone will need to install the new flask server as well.\n\nYou mean also to \"use\" this package, or only to \"test\" it?  That's confusing.  Is flask-sagenb required or only recommended?  Should this be merged into Sage or not?\n\nAlso, I would **really** appreciate some kind of roadmap from the flask-sagenb people to eventually be merged into Sage (I've said this many times without any good answer).  Because it looks more and more that flask-sagenb is a fork of sagenb with no real plan for eventually getting back into Sage.",
    "created_at": "2011-12-15T09:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126449",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [@jasongrout](#comment%3A7):
> The changes necessary to test this package are included in the   http://code.google.com/r/jasongrout-flask-sagenb/ notebook, and not in the current notebook.  Thus, to test this spkg, someone will need to install the new flask server as well.

You mean also to "use" this package, or only to "test" it?  That's confusing.  Is flask-sagenb required or only recommended?  Should this be merged into Sage or not?

Also, I would **really** appreciate some kind of roadmap from the flask-sagenb people to eventually be merged into Sage (I've said this many times without any good answer).  Because it looks more and more that flask-sagenb is a fork of sagenb with no real plan for eventually getting back into Sage.



---

archive/issue_comments_126450.json:
```json
{
    "body": "<a id='comment:9'></a>\nYou need the flask-sagenb to use or test this spkg (unless someone backports the necessary patches to the current sagenb, but I don't see that happening).\n\nSorry for the confusion about the flask-sagenb.  Part of the reason is that I've been concentrating so much on fixing bugs with the limited time I had.\n\nThat bug-fixing work is winding down as we see fewer and fewer errors popping up on sagenb.org.  Over the next few weeks, I'm turning my attention to packaging flask-sagenb up, with the dependencies, and submitting it to trac.  The goal is to work on this at SD 35.5, if the packaging work isn't already done by then.  Basically, I need to package up these packages: http://code.google.com/p/sagenb/issues/detail?id=62 and also package up the actual sagenb as well.",
    "created_at": "2011-12-15T13:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126450",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'></a>
You need the flask-sagenb to use or test this spkg (unless someone backports the necessary patches to the current sagenb, but I don't see that happening).

Sorry for the confusion about the flask-sagenb.  Part of the reason is that I've been concentrating so much on fixing bugs with the limited time I had.

That bug-fixing work is winding down as we see fewer and fewer errors popping up on sagenb.org.  Over the next few weeks, I'm turning my attention to packaging flask-sagenb up, with the dependencies, and submitting it to trac.  The goal is to work on this at SD 35.5, if the packaging work isn't already done by then.  Basically, I need to package up these packages: http://code.google.com/p/sagenb/issues/detail?id=62 and also package up the actual sagenb as well.



---

archive/issue_comments_126451.json:
```json
{
    "body": "<a id='comment:10'></a>\nThe start of that packaging process is this ticket.  Since I saw we already had a ticket about upgrading twisted, I put our spkg we already have been testing on *.sagenb.org up here.",
    "created_at": "2011-12-15T13:57:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126451",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'></a>
The start of that packaging process is this ticket.  Since I saw we already had a ticket about upgrading twisted, I put our spkg we already have been testing on *.sagenb.org up here.



---

archive/issue_comments_126452.json:
```json
{
    "body": "<a id='comment:11'></a>\nTo be more clear, here are the priority things to finish before releasing sagenb-flask officially:\n\nhttp://code.google.com/p/sagenb/issues/list?can=2&q=label:flask%20status:Accepted&sort=priority&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary\n\n(the low priority items could be bumped to a later release)",
    "created_at": "2011-12-15T14:05:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126452",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:11'></a>
To be more clear, here are the priority things to finish before releasing sagenb-flask officially:

http://code.google.com/p/sagenb/issues/list?can=2&q=label:flask%20status:Accepted&sort=priority&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary

(the low priority items could be bumped to a later release)



---

archive/issue_comments_126453.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [@jasongrout](#comment%3A11):\n> To be more clear, here are the priority things to finish before releasing sagenb-flask officially:\n> \n> http://code.google.com/p/sagenb/issues/list?can=2&q=label:flask%20status:Accepted&sort=priority&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary\n\nI would say that [Safari not saving correctly http://code.google.com/p/sagenb/issues/detail?id=60] is a pretty important thing, though apparently it's not universal for some reason.  (This still happens, as far as I can tell.)",
    "created_at": "2011-12-15T14:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126453",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'></a>
Replying to [@jasongrout](#comment%3A11):
> To be more clear, here are the priority things to finish before releasing sagenb-flask officially:
> 
> http://code.google.com/p/sagenb/issues/list?can=2&q=label:flask%20status:Accepted&sort=priority&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary

I would say that [Safari not saving correctly http://code.google.com/p/sagenb/issues/detail?id=60] is a pretty important thing, though apparently it's not universal for some reason.  (This still happens, as far as I can tell.)



---

archive/issue_comments_126454.json:
```json
{
    "body": "<a id='comment:13'></a>\nYes, but that's a Safari bug, as far as we can tell, and it's hard to reproduce.  Is it a regression from the old notebook?  If it's not a regression, it may not make it into the first sagenb-flask release.\n\nThat said, did you test it again with sagenb.org?  I see that Safari has yet another update, 5.1.2, which looks like it may have fixed the underlying bug.\n\nI sent a message to sage-notebook about these updates; we should continue our conversation there.",
    "created_at": "2011-12-15T14:57:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126454",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'></a>
Yes, but that's a Safari bug, as far as we can tell, and it's hard to reproduce.  Is it a regression from the old notebook?  If it's not a regression, it may not make it into the first sagenb-flask release.

That said, did you test it again with sagenb.org?  I see that Safari has yet another update, 5.1.2, which looks like it may have fixed the underlying bug.

I sent a message to sage-notebook about these updates; we should continue our conversation there.



---

archive/issue_comments_126455.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@jasongrout](#comment%3A13):\n> Yes, but that's a Safari bug, as far as we can tell, and it's hard to reproduce.  Is it a regression from the old notebook?  If it's not a regression, it may not make it into the first sagenb-flask release.\n\nI thought it was a regression, otherwise I wouldn't have mentioned it.  But upon reading my own original post about this, apparently it's a regression unrelated to flask.  Sorry for the noise w.r.t. this ticket.\n> That said, did you test it again with sagenb.org?  I see that Safari has yet another update, 5.1.2, which looks like it may have fixed the underlying bug.\n\nI'll try that as well as your other comment on googlecode.\n> I sent a message to sage-notebook about these updates; we should continue our conversation there.\n\nOk.",
    "created_at": "2011-12-15T15:07:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126455",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>
Replying to [@jasongrout](#comment%3A13):
> Yes, but that's a Safari bug, as far as we can tell, and it's hard to reproduce.  Is it a regression from the old notebook?  If it's not a regression, it may not make it into the first sagenb-flask release.

I thought it was a regression, otherwise I wouldn't have mentioned it.  But upon reading my own original post about this, apparently it's a regression unrelated to flask.  Sorry for the noise w.r.t. this ticket.
> That said, did you test it again with sagenb.org?  I see that Safari has yet another update, 5.1.2, which looks like it may have fixed the underlying bug.

I'll try that as well as your other comment on googlecode.
> I sent a message to sage-notebook about these updates; we should continue our conversation there.

Ok.



---

archive/issue_comments_126456.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,5 @@\n-the currently used in Sage version of twisted is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashed of the notebook webapp go away after the upgrade to twisted 11.\n+The version of Twisted currently used in Sage is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashes of the notebook webapp go away after the upgrade to twisted 11.\n \n-The new package is at http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg\n+The new package is at [http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg](http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg)\n \n-The new sage notebook at http://code.google.com/r/jasongrout-flask-sagenb/ is needed to test this package\n-\n+This belongs to the new Sage notebook at [http://code.google.com/r/jasongrout-flask-sagenb/](http://code.google.com/r/jasongrout-flask-sagenb/)\n``````\n",
    "created_at": "2011-12-15T18:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126456",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,5 @@
-the currently used in Sage version of twisted is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashed of the notebook webapp go away after the upgrade to twisted 11.
+The version of Twisted currently used in Sage is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashes of the notebook webapp go away after the upgrade to twisted 11.
 
-The new package is at http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg
+The new package is at [http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg](http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg)
 
-The new sage notebook at http://code.google.com/r/jasongrout-flask-sagenb/ is needed to test this package
-
+This belongs to the new Sage notebook at [http://code.google.com/r/jasongrout-flask-sagenb/](http://code.google.com/r/jasongrout-flask-sagenb/)
``````




---

archive/issue_comments_126457.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [@jasongrout](#comment%3A9):\n> That bug-fixing work is winding down as we see fewer and fewer errors popping up on sagenb.org.  Over the next few weeks, I'm turning my attention to packaging flask-sagenb up, with the dependencies, and submitting it to trac.  The goal is to work on this at SD 35.5, if the packaging work isn't already done by then.  Basically, I need to package up these packages: http://code.google.com/p/sagenb/issues/detail?id=62 and also package up the actual sagenb as well.\n\nThanks for the update and apologies if I sounded a bit harsh and inpolite in my comment.",
    "created_at": "2011-12-15T22:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126457",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [@jasongrout](#comment%3A9):
> That bug-fixing work is winding down as we see fewer and fewer errors popping up on sagenb.org.  Over the next few weeks, I'm turning my attention to packaging flask-sagenb up, with the dependencies, and submitting it to trac.  The goal is to work on this at SD 35.5, if the packaging work isn't already done by then.  Basically, I need to package up these packages: http://code.google.com/p/sagenb/issues/detail?id=62 and also package up the actual sagenb as well.

Thanks for the update and apologies if I sounded a bit harsh and inpolite in my comment.



---

archive/issue_events_134928.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-15T22:35:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134928"
}
```



---

archive/issue_events_134929.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-15T22:35:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134929"
}
```



---

archive/issue_events_134930.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-21T09:28:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134930"
}
```



---

archive/issue_events_134931.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-12-27T04:24:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134931"
}
```



---

archive/issue_events_134932.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-12-27T04:24:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134932"
}
```



---

archive/issue_comments_126458.json:
```json
{
    "body": "<a id='comment:18'></a>\nI would like to give this a positive review.",
    "created_at": "2011-12-27T04:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126458",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>
I would like to give this a positive review.



---

archive/issue_comments_126459.json:
```json
{
    "body": "**Dependencies:** #11080",
    "created_at": "2011-12-28T22:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126459",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #11080



---

archive/issue_comments_126460.json:
```json
{
    "body": "**Author:** Jason Grout",
    "created_at": "2011-12-31T14:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126460",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jason Grout



---

archive/issue_comments_126461.json:
```json
{
    "body": "**Reviewer:** Dmitrii Pasechnik",
    "created_at": "2011-12-31T14:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126461",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Dmitrii Pasechnik



---

archive/issue_comments_126462.json:
```json
{
    "body": "**Changing author** from \"Jason Grout\" to \"Rado Kirov, Jason Grout\".",
    "created_at": "2011-12-31T14:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126462",
    "user": "https://github.com/jasongrout"
}
```

**Changing author** from "Jason Grout" to "Rado Kirov, Jason Grout".



---

archive/issue_comments_126463.json:
```json
{
    "body": "<a id='comment:21'></a>\nRado: I think I got the original spkg from you, so I put you as an author.  Please correct me if I'm wrong.",
    "created_at": "2011-12-31T14:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126463",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:21'></a>
Rado: I think I got the original spkg from you, so I put you as an author.  Please correct me if I'm wrong.



---

archive/issue_comments_126464.json:
```json
{
    "body": "<a id='comment:22'></a>\nDima seemed to be hosting the spkg: https://github.com/sagemath/sage/issues/11874?action=diff&version=4",
    "created_at": "2011-12-31T14:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126464",
    "user": "https://github.com/kini"
}
```

<a id='comment:22'></a>
Dima seemed to be hosting the spkg: https://github.com/sagemath/sage/issues/11874?action=diff&version=4



---

archive/issue_comments_126465.json:
```json
{
    "body": "**Changing reviewer** from \"Dmitrii Pasechnik\" to \"Dmitrii Pasechnik, Jason Grout\".",
    "created_at": "2011-12-31T15:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126465",
    "user": "https://github.com/jasongrout"
}
```

**Changing reviewer** from "Dmitrii Pasechnik" to "Dmitrii Pasechnik, Jason Grout".



---

archive/issue_comments_126466.json:
```json
{
    "body": "<a id='comment:23'></a>\nAnd I suppose I could be considered a reviewer of the original version.  So: Dima and Rado, can one of you (or both of you) add yourselves as authors, if you feel appropriate about it?",
    "created_at": "2011-12-31T15:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126466",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:23'></a>
And I suppose I could be considered a reviewer of the original version.  So: Dima and Rado, can one of you (or both of you) add yourselves as authors, if you feel appropriate about it?



---

archive/issue_comments_126467.json:
```json
{
    "body": "<a id='comment:24'></a>\n`spkg-install` should be executable and `SPKG.txt` should mention this ticket number.",
    "created_at": "2012-01-16T22:29:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126467",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
`spkg-install` should be executable and `SPKG.txt` should mention this ticket number.



---

archive/issue_events_134933.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-16T22:29:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134933"
}
```



---

archive/issue_events_134934.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-16T22:29:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134934"
}
```



---

archive/issue_comments_126468.json:
```json
{
    "body": "<a id='comment:25'></a>\nAlternatively, how do you feel about just including twisted as a dependency in the sagenb.spkg.  It would be a few lines change, and then we have automatic updates to the most recent twisted (for example, twisted 11.1 is already released).\n\nSince we don't customize twisted anymore, that may be much easier than maintaining a separate twisted spkg.  I'll post to sage-notebook about this.",
    "created_at": "2012-01-16T22:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126468",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:25'></a>
Alternatively, how do you feel about just including twisted as a dependency in the sagenb.spkg.  It would be a few lines change, and then we have automatic updates to the most recent twisted (for example, twisted 11.1 is already released).

Since we don't customize twisted anymore, that may be much easier than maintaining a separate twisted spkg.  I'll post to sage-notebook about this.



---

archive/issue_comments_126469.json:
```json
{
    "body": "<a id='comment:26'></a>\nSince my suggestion is about removing an spkg, I instead posted a vote to sage-devel.",
    "created_at": "2012-01-16T22:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126469",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:26'></a>
Since my suggestion is about removing an spkg, I instead posted a vote to sage-devel.



---

archive/issue_comments_126470.json:
```json
{
    "body": "<a id='comment:27'></a>\nI've posted a pull request here: https://github.com/sagemath/sagenb/pull/27\n\nIf the vote on sage-devel goes through, then I think this ticket should be changed to instead getting rid of the twisted spkg.",
    "created_at": "2012-01-16T22:56:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126470",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:27'></a>
I've posted a pull request here: https://github.com/sagemath/sagenb/pull/27

If the vote on sage-devel goes through, then I think this ticket should be changed to instead getting rid of the twisted spkg.



---

archive/issue_comments_126471.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,9 @@\n The version of Twisted currently used in Sage is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashes of the notebook webapp go away after the upgrade to twisted 11.\n \n-The new package is at [http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg](http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg)\n+The twisted package is now included in the flask sagenb (#11080), so this ticket just has the patch to remove the twisted spkg.\n \n-This belongs to the new Sage notebook at [http://code.google.com/r/jasongrout-flask-sagenb/](http://code.google.com/r/jasongrout-flask-sagenb/)\n+See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.\n+\n+**apply**: [attachment:trac-11874-remove-twisted.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.\n+\n+\n``````\n",
    "created_at": "2012-01-17T06:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126471",
    "user": "https://github.com/jasongrout"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,9 @@
 The version of Twisted currently used in Sage is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashes of the notebook webapp go away after the upgrade to twisted 11.
 
-The new package is at [http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg](http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg)
+The twisted package is now included in the flask sagenb (#11080), so this ticket just has the patch to remove the twisted spkg.
 
-This belongs to the new Sage notebook at [http://code.google.com/r/jasongrout-flask-sagenb/](http://code.google.com/r/jasongrout-flask-sagenb/)
+See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.
+
+**apply**: [attachment:trac-11874-remove-twisted.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.
+
+
``````




---

archive/issue_comments_126472.json:
```json
{
    "body": "<a id='comment:28'></a>\nAdding the patch to remove twisted and setting back to needs review for the new approach.",
    "created_at": "2012-01-17T06:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126472",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:28'></a>
Adding the patch to remove twisted and setting back to needs review for the new approach.



---

archive/issue_events_134935.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-01-17T06:10:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134935"
}
```



---

archive/issue_events_134936.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-01-17T06:10:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134936"
}
```



---

archive/issue_events_134937.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T10:49:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "rename": {
        "from": "upgrade twisted to twisted 11",
        "to": "Remove twisted spkg"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134937"
}
```



---

archive/issue_comments_126473.json:
```json
{
    "body": "**Work Issues:** deps",
    "created_at": "2012-01-18T10:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126473",
    "user": "https://github.com/jdemeyer"
}
```

**Work Issues:** deps



---

archive/issue_comments_126474.json:
```json
{
    "body": "<a id='comment:29'></a>\nThere seems to be a problem with dependencies:\n\n```\nExtracting package /mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/spkg/standard/jinja2-2.5.5.spkg ...\n-rw-r--r-- 1 jdemeyer jdemeyer 320030 Dec  4  2010 /mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/spkg/standard/jinja2-2.5.5.spkg\nFinished extraction\n****************************************************\nHost system\nuname -a:\nLinux sage.math.washington.edu 2.6.24-28-server #1 SMP Fri Feb 11 18:08:32 UTC 2011 x86_64 GNU/Linux\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zl\nib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --prog\nram-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-checking=release --build=x86_64-linu\nx-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)\n****************************************************\nTraceback (most recent call last):\n  File \"setup.py\", line 40, in <module>\n    from setuptools import setup, Extension, Feature\nImportError: No module named setuptools\nError installing Jinja2\n```",
    "created_at": "2012-01-18T10:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126474",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
There seems to be a problem with dependencies:

```
Extracting package /mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/spkg/standard/jinja2-2.5.5.spkg ...
-rw-r--r-- 1 jdemeyer jdemeyer 320030 Dec  4  2010 /mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/spkg/standard/jinja2-2.5.5.spkg
Finished extraction
****************************************************
Host system
uname -a:
Linux sage.math.washington.edu 2.6.24-28-server #1 SMP Fri Feb 11 18:08:32 UTC 2011 x86_64 GNU/Linux
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zl
ib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --prog
ram-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-checking=release --build=x86_64-linu
x-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)
****************************************************
Traceback (most recent call last):
  File "setup.py", line 40, in <module>
    from setuptools import setup, Extension, Feature
ImportError: No module named setuptools
Error installing Jinja2
```



---

archive/issue_events_134938.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T10:49:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134938"
}
```



---

archive/issue_events_134939.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T10:49:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134939"
}
```



---

archive/issue_events_134940.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-01-19T18:02:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134940"
}
```



---

archive/issue_events_134941.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-01-19T18:02:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134941"
}
```



---

archive/issue_comments_126475.json:
```json
{
    "body": "<a id='comment:30'></a>\nI think my updated patch addresses the dependency issue.",
    "created_at": "2012-01-19T18:02:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126475",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:30'></a>
I think my updated patch addresses the dependency issue.



---

archive/issue_comments_126476.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,6 +4,4 @@\n \n See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.\n \n-**apply**: [attachment:trac-11874-remove-twisted.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.\n-\n-\n+**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.\n``````\n",
    "created_at": "2012-01-19T19:12:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126476",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,6 +4,4 @@
 
 See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.
 
-**apply**: [attachment:trac-11874-remove-twisted.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.
-
-
+**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.
``````




---

archive/issue_comments_126477.json:
```json
{
    "body": "**Changing work issues** from \"deps\" to \"\".",
    "created_at": "2012-01-19T19:12:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126477",
    "user": "https://github.com/jdemeyer"
}
```

**Changing work issues** from "deps" to "".



---

archive/issue_comments_126478.json:
```json
{
    "body": "<a id='comment:32'></a>\nDo you want to change the comment before the sagenb spkgs are installed, the comment that starts with \"Note: To avoid \"",
    "created_at": "2012-01-19T19:17:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126478",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:32'></a>
Do you want to change the comment before the sagenb spkgs are installed, the comment that starts with "Note: To avoid "



---

archive/issue_comments_126479.json:
```json
{
    "body": "<a id='comment:33'></a>\nClarified comment.  The build with this \"deps\" file is still untested.",
    "created_at": "2012-01-19T19:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126479",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
Clarified comment.  The build with this "deps" file is still untested.



---

archive/issue_events_134942.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-19T19:35:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134942"
}
```



---

archive/issue_comments_126480.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.\n \n-**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.\n+**apply**: [attachment:trac-11874-remove-twisted.2.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.2.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.\n``````\n",
    "created_at": "2012-01-19T20:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126480",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.
 
-**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.
+**apply**: [attachment:trac-11874-remove-twisted.2.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.2.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.
``````




---

archive/issue_comments_126481.json:
```json
{
    "body": "<a id='comment:36'></a>\nThis also likely fixes #12425, since the file mentioned there is not in twisted 11.1 (which is what is currently distributed with the notebook).",
    "created_at": "2012-02-04T19:18:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126481",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:36'></a>
This also likely fixes #12425, since the file mentioned there is not in twisted 11.1 (which is what is currently distributed with the notebook).



---

archive/issue_comments_126482.json:
```json
{
    "body": "**Changing dependencies** from \"#11080\" to \"#12329, #11080\".",
    "created_at": "2012-02-07T22:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126482",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#11080" to "#12329, #11080".



---

archive/issue_comments_126483.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.\n \n-**apply**: [attachment:trac-11874-remove-twisted.2.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.2.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.\n+**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository, and **remove** the **twisted** spkg from the standard spkgs.\n``````\n",
    "created_at": "2012-02-07T22:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126483",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.
 
-**apply**: [attachment:trac-11874-remove-twisted.2.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.2.patch) to the sage root repository, and remove the twisted spkg from the standard spkgs.
+**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository, and **remove** the **twisted** spkg from the standard spkgs.
``````




---

archive/issue_events_134943.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-08T09:33:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134943"
}
```



---

archive/issue_events_134944.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-08T09:33:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134944"
}
```



---

archive/issue_comments_126484.json:
```json
{
    "body": "<a id='comment:38'></a>\nThe Sage library doesn't compile because it doesn't depend on Twisted anymore:\n\n```\nExecuting 305 commands (using 6 threads)\nTraceback (most recent call last):\n  File \"setup.py\", line 831, in <module>\n    execute_list_of_commands(queue)\n  File \"setup.py\", line 288, in execute_list_of_commands\n    execute_list_of_commands_in_parallel(command_list, nthreads)\n  File \"setup.py\", line 238, in execute_list_of_commands_in_parallel\n    import twisted.persisted.styles #doing this import will allow instancemethods to be pickable\nImportError: No module named twisted.persisted.styles\nsage: There was an error installing modified sage library code.\n\nERROR installing Sage\n```\n\nThe fact that the Sage library needs Twisted is another argument for keeping the twisted spkg separate and not moving it into sagenb.  Or alternatively, the Sage library should be fixed such that it doesn't depend on Twisted.",
    "created_at": "2012-02-08T09:33:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126484",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>
The Sage library doesn't compile because it doesn't depend on Twisted anymore:

```
Executing 305 commands (using 6 threads)
Traceback (most recent call last):
  File "setup.py", line 831, in <module>
    execute_list_of_commands(queue)
  File "setup.py", line 288, in execute_list_of_commands
    execute_list_of_commands_in_parallel(command_list, nthreads)
  File "setup.py", line 238, in execute_list_of_commands_in_parallel
    import twisted.persisted.styles #doing this import will allow instancemethods to be pickable
ImportError: No module named twisted.persisted.styles
sage: There was an error installing modified sage library code.

ERROR installing Sage
```

The fact that the Sage library needs Twisted is another argument for keeping the twisted spkg separate and not moving it into sagenb.  Or alternatively, the Sage library should be fixed such that it doesn't depend on Twisted.



---

archive/issue_comments_126485.json:
```json
{
    "body": "<a id='comment:39'></a>\nThe second option strikes me as a better idea.",
    "created_at": "2012-02-08T09:47:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126485",
    "user": "https://github.com/kini"
}
```

<a id='comment:39'></a>
The second option strikes me as a better idea.



---

archive/issue_comments_126486.json:
```json
{
    "body": "<a id='comment:40'></a>\nNever noticed that call before. What happens if we just remove that line from setup.py?",
    "created_at": "2012-02-09T20:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126486",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:40'></a>
Never noticed that call before. What happens if we just remove that line from setup.py?



---

archive/issue_comments_126487.json:
```json
{
    "body": "<a id='comment:41'></a>\nI wonder if the relevant parts from twisted.persisted.styles are already included in `sage/sage/misc/fpickle.pyx`.  It may be that we could just import the misc.fpickle module.",
    "created_at": "2012-03-10T04:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126487",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:41'></a>
I wonder if the relevant parts from twisted.persisted.styles are already included in `sage/sage/misc/fpickle.pyx`.  It may be that we could just import the misc.fpickle module.



---

archive/issue_events_134945.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-10T18:24:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134945"
}
```



---

archive/issue_events_134946.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-10T18:24:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134946"
}
```



---

archive/issue_comments_126488.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [@jdemeyer](#comment%3A38):\n> The Sage library doesn't compile because it doesn't depend on Twisted anymore:\n\nI cannot reproduce this on 5.0.beta7. I.e. everything builds just fine after applying that patch and removing twisted spkg from a freshly untarred release. Has it been fixed meanwhile?\n\nAnd what is that test that was failing?",
    "created_at": "2012-03-10T18:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126488",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'></a>
Replying to [@jdemeyer](#comment%3A38):
> The Sage library doesn't compile because it doesn't depend on Twisted anymore:

I cannot reproduce this on 5.0.beta7. I.e. everything builds just fine after applying that patch and removing twisted spkg from a freshly untarred release. Has it been fixed meanwhile?

And what is that test that was failing?



---

archive/issue_comments_126489.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [@dimpase](#comment%3A42):\n> Replying to [@jdemeyer](#comment%3A38):\n> > The Sage library doesn't compile because it doesn't depend on Twisted anymore:\n\n> \n> I cannot reproduce this on 5.0.beta7. I.e. everything builds just fine after applying that patch and removing twisted spkg from a freshly untarred release. Has it been fixed meanwhile?\n\nI haven't tried it recently, but it can succeed by chance if Twisted was installed before Sage.",
    "created_at": "2012-03-10T19:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126489",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
Replying to [@dimpase](#comment%3A42):
> Replying to [@jdemeyer](#comment%3A38):
> > The Sage library doesn't compile because it doesn't depend on Twisted anymore:

> 
> I cannot reproduce this on 5.0.beta7. I.e. everything builds just fine after applying that patch and removing twisted spkg from a freshly untarred release. Has it been fixed meanwhile?

I haven't tried it recently, but it can succeed by chance if Twisted was installed before Sage.



---

archive/issue_comments_126490.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [@jdemeyer](#comment%3A43):\n> Replying to [@dimpase](#comment%3A42):\n> > Replying to [@jdemeyer](#comment%3A38):\n> > > The Sage library doesn't compile because it doesn't depend on Twisted anymore:\n\n> > \n> > I cannot reproduce this on 5.0.beta7. I.e. everything builds just fine after applying that patch and removing twisted spkg from a freshly untarred release. Has it been fixed meanwhile?\n\n> \n> I haven't tried it recently, but it can succeed by chance if Twisted was installed before Sage.\n\nApparently twisted 12 is installed into Python 2.7.2 by default, at the time Python is built. I see\n\n```\n'/usr/local/src/sage/sage-5.0.beta7/local/lib/python2.7/site-packages/Twisted-12.0.0-py2.7-linux-x86_64.egg'\n```\nin my Sage's Python path. And\n\n```\n$ ./sage -python\nPython 2.7.2 (default, Mar 10 2012, 23:33:53) \n[GCC 4.4.5] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import twisted\n>>> twisted.version  \nVersion('twisted', 12, 0, 0)\n>>>\n```\n\nI guess that during the upgrade to Python 2.7.2 it was overlooked that Twisted 12 is in it (not distributed, but getting pulled\nduring the installation. In my install.log I see\n\n```\nSearching for twisted>=8.2\nReading http://pypi.python.org/simple/twisted/\n...\n\nDownloading http://pypi.python.org/packages/source/T/Twisted/Twisted-12.0.0.tar.bz2#md5=cf49a8676c21c50faf1b42b528049471\n```\nBy the way, it also pulls zope and a bunch of other stuff.\nI don't know what will happen if the installation was running on a machine not connected to the net.",
    "created_at": "2012-03-11T03:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126490",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'></a>
Replying to [@jdemeyer](#comment%3A43):
> Replying to [@dimpase](#comment%3A42):
> > Replying to [@jdemeyer](#comment%3A38):
> > > The Sage library doesn't compile because it doesn't depend on Twisted anymore:

> > 
> > I cannot reproduce this on 5.0.beta7. I.e. everything builds just fine after applying that patch and removing twisted spkg from a freshly untarred release. Has it been fixed meanwhile?

> 
> I haven't tried it recently, but it can succeed by chance if Twisted was installed before Sage.

Apparently twisted 12 is installed into Python 2.7.2 by default, at the time Python is built. I see

```
'/usr/local/src/sage/sage-5.0.beta7/local/lib/python2.7/site-packages/Twisted-12.0.0-py2.7-linux-x86_64.egg'
```
in my Sage's Python path. And

```
$ ./sage -python
Python 2.7.2 (default, Mar 10 2012, 23:33:53) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import twisted
>>> twisted.version  
Version('twisted', 12, 0, 0)
>>>
```

I guess that during the upgrade to Python 2.7.2 it was overlooked that Twisted 12 is in it (not distributed, but getting pulled
during the installation. In my install.log I see

```
Searching for twisted>=8.2
Reading http://pypi.python.org/simple/twisted/
...

Downloading http://pypi.python.org/packages/source/T/Twisted/Twisted-12.0.0.tar.bz2#md5=cf49a8676c21c50faf1b42b528049471
```
By the way, it also pulls zope and a bunch of other stuff.
I don't know what will happen if the installation was running on a machine not connected to the net.



---

archive/issue_comments_126491.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [@dimpase](#comment%3A44):\n> I guess that during the upgrade to Python 2.7.2 it was overlooked that Twisted 12 is in it (not distributed, but getting pulled\n> during the installation. In my install.log I see\n> \n> ```\n> Searching for twisted>=8.2\n> Reading http://pypi.python.org/simple/twisted/\n> ...\n> \n> Downloading http://pypi.python.org/packages/source/T/Twisted/Twisted-12.0.0.tar.bz2#md5=cf49a8676c21c50faf1b42b528049471\n> ```\n\nsage-5.0.beta7 doesn't do this on my machine, so it must be something with your setup.  Are you referring to vanilla sage-5.0.beta7 or did you install any extra packages?",
    "created_at": "2012-03-14T08:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126491",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'></a>
Replying to [@dimpase](#comment%3A44):
> I guess that during the upgrade to Python 2.7.2 it was overlooked that Twisted 12 is in it (not distributed, but getting pulled
> during the installation. In my install.log I see
> 
> ```
> Searching for twisted>=8.2
> Reading http://pypi.python.org/simple/twisted/
> ...
> 
> Downloading http://pypi.python.org/packages/source/T/Twisted/Twisted-12.0.0.tar.bz2#md5=cf49a8676c21c50faf1b42b528049471
> ```

sage-5.0.beta7 doesn't do this on my machine, so it must be something with your setup.  Are you referring to vanilla sage-5.0.beta7 or did you install any extra packages?



---

archive/issue_comments_126492.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [@jdemeyer](#comment%3A45):\n\n> sage-5.0.beta7 doesn't do this on my machine, so it must be something with your setup.  Are you referring to vanilla sage-5.0.beta7 or did you install any extra packages?\n\nSorry, I can't reproduce this either, there was a fly in my vanilla, apparently :)\n\nI tried Jason's suggestion to replace the twisted import with importing misc.fpickle, but it doesn't work:\n\n```\n...\nbuilding 'sage.ext.interpreters.wrapper_el' extension\nExecuting 309 commands (using 1 thread)\nException in thread Thread-5:\nTraceback (most recent call last):\n  File \"/usr/local/src/sage/sage-5.0.beta8/local/lib/python/threading.py\", line 552, in __bootstrap_inner\n    self.run()\n  File \"/usr/local/src/sage/sage-5.0.beta8/local/lib/python/threading.py\", line 505, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"/usr/local/src/sage/sage-5.0.beta8/local/lib/python/multiprocessing/pool.py\", line 314, in _handle_tasks\n    put(task)\nPicklingError: Can't pickle <type 'instancemethod'>: attribute lookup __builtin__.instancemethod failed\n```\nwhen building sage spkg. Could it be due to fpickle being Cython? I don't know.",
    "created_at": "2012-03-15T08:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126492",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'></a>
Replying to [@jdemeyer](#comment%3A45):

> sage-5.0.beta7 doesn't do this on my machine, so it must be something with your setup.  Are you referring to vanilla sage-5.0.beta7 or did you install any extra packages?

Sorry, I can't reproduce this either, there was a fly in my vanilla, apparently :)

I tried Jason's suggestion to replace the twisted import with importing misc.fpickle, but it doesn't work:

```
...
building 'sage.ext.interpreters.wrapper_el' extension
Executing 309 commands (using 1 thread)
Exception in thread Thread-5:
Traceback (most recent call last):
  File "/usr/local/src/sage/sage-5.0.beta8/local/lib/python/threading.py", line 552, in __bootstrap_inner
    self.run()
  File "/usr/local/src/sage/sage-5.0.beta8/local/lib/python/threading.py", line 505, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/local/src/sage/sage-5.0.beta8/local/lib/python/multiprocessing/pool.py", line 314, in _handle_tasks
    put(task)
PicklingError: Can't pickle <type 'instancemethod'>: attribute lookup __builtin__.instancemethod failed
```
when building sage spkg. Could it be due to fpickle being Cython? I don't know.



---

archive/issue_comments_126493.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [@dimpase](#comment%3A46):\n> \n> I tried Jason's suggestion to replace the twisted import with importing misc.fpickle, but it doesn't work:\n\nI tried this by doing `./sage -f spgk/standard/sage-5.0....`, but I realized that this doesn't work as expected\nwith sage-... spkg.\nIf I instead start from clean install beta8, apply the patch, remove twisted spkg, and in sage-... spkg apply the patch\n\n```\n--- a/setup.py\n+++ b/setup.py\n@@ -235,7 +235,7 @@\n     commands may be run at the same time.\n     \"\"\"\n     from multiprocessing import Pool\n-    import twisted.persisted.styles #doing this import will allow instancemethods to be pickable\n+    import sage.misc.misc.fpickle #doing this import will allow instancemethods to be pickable\n     p = Pool(nthreads)\n     process_command_results(p.imap(apply_pair, command_list))\n```\nthen start building sage, it ends up with \n\n```\nBuilding modified file sage/ext/interpreters/wrapper_el.pyx.\nExecuting 308 commands (using 1 thread)\nTraceback (most recent call last):\n  File \"setup.py\", line 832, in <module>\n    execute_list_of_commands(queue)\n  File \"setup.py\", line 289, in execute_list_of_commands\n    execute_list_of_commands_in_parallel(command_list, nthreads)\n  File \"setup.py\", line 239, in execute_list_of_commands_in_parallel\n    import sage.misc.misc.fpickle\n  File \"/usr/local/src/sage/sage-5.0.beta8/devel/sage-main/sage/misc/misc.py\", line 38, in <module>\n    import sage.misc.prandom as random\n  File \"/usr/local/src/sage/sage-5.0.beta8/devel/sage-main/sage/misc/prandom.py\", line 56, in <module>\n    from sage.misc.randstate import current_randstate\nImportError: No module named randstate\nError installing modified sage library code.\nERROR installing Sage\n```\nWhat am I doing wrong?",
    "created_at": "2012-03-16T00:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126493",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'></a>
Replying to [@dimpase](#comment%3A46):
> 
> I tried Jason's suggestion to replace the twisted import with importing misc.fpickle, but it doesn't work:

I tried this by doing `./sage -f spgk/standard/sage-5.0....`, but I realized that this doesn't work as expected
with sage-... spkg.
If I instead start from clean install beta8, apply the patch, remove twisted spkg, and in sage-... spkg apply the patch

```
--- a/setup.py
+++ b/setup.py
@@ -235,7 +235,7 @@
     commands may be run at the same time.
     """
     from multiprocessing import Pool
-    import twisted.persisted.styles #doing this import will allow instancemethods to be pickable
+    import sage.misc.misc.fpickle #doing this import will allow instancemethods to be pickable
     p = Pool(nthreads)
     process_command_results(p.imap(apply_pair, command_list))
```
then start building sage, it ends up with 

```
Building modified file sage/ext/interpreters/wrapper_el.pyx.
Executing 308 commands (using 1 thread)
Traceback (most recent call last):
  File "setup.py", line 832, in <module>
    execute_list_of_commands(queue)
  File "setup.py", line 289, in execute_list_of_commands
    execute_list_of_commands_in_parallel(command_list, nthreads)
  File "setup.py", line 239, in execute_list_of_commands_in_parallel
    import sage.misc.misc.fpickle
  File "/usr/local/src/sage/sage-5.0.beta8/devel/sage-main/sage/misc/misc.py", line 38, in <module>
    import sage.misc.prandom as random
  File "/usr/local/src/sage/sage-5.0.beta8/devel/sage-main/sage/misc/prandom.py", line 56, in <module>
    from sage.misc.randstate import current_randstate
ImportError: No module named randstate
Error installing modified sage library code.
ERROR installing Sage
```
What am I doing wrong?



---

archive/issue_comments_126494.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [@dimpase](#comment%3A47):\n\n> What am I doing wrong? \n\nActually, I guess I should try to tweak the order in which the modules are built.\nHopefully it doesn't need a cyclic dependence to be resolved.",
    "created_at": "2012-03-16T00:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126494",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>
Replying to [@dimpase](#comment%3A47):

> What am I doing wrong? 

Actually, I guess I should try to tweak the order in which the modules are built.
Hopefully it doesn't need a cyclic dependence to be resolved.



---

archive/issue_comments_126495.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [@dimpase](#comment%3A48):\n> Replying to [@dimpase](#comment%3A47):\n> \n> > What am I doing wrong? \n\n> Actually, I guess I should try to tweak the order in which the modules are built.\n> Hopefully it doesn't need a cyclic dependence to be resolved.\n\nnope, now I just think that we need misc.fpickle to be moved to an spkg that is built and installed before the Sage spkg.\nI'll ask on sage-devel.",
    "created_at": "2012-03-16T02:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126495",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>
Replying to [@dimpase](#comment%3A48):
> Replying to [@dimpase](#comment%3A47):
> 
> > What am I doing wrong? 

> Actually, I guess I should try to tweak the order in which the modules are built.
> Hopefully it doesn't need a cyclic dependence to be resolved.

nope, now I just think that we need misc.fpickle to be moved to an spkg that is built and installed before the Sage spkg.
I'll ask on sage-devel.



---

archive/issue_comments_126496.json:
```json
{
    "body": "<a id='comment:50'></a>\nI have successfully modified `sage-***.spkg` to build with twisted removed. See the patch for review above. \nI basically cut a piece of `sage.misc.fpickle`, it into `sage-***.spkg`, and import it instead of `twisted` in `setup.py`. It is only needed for building the sage python module.",
    "created_at": "2012-03-16T07:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126496",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'></a>
I have successfully modified `sage-***.spkg` to build with twisted removed. See the patch for review above. 
I basically cut a piece of `sage.misc.fpickle`, it into `sage-***.spkg`, and import it instead of `twisted` in `setup.py`. It is only needed for building the sage python module.



---

archive/issue_events_134947.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-16T07:56:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134947"
}
```



---

archive/issue_events_134948.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-16T07:56:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134948"
}
```



---

archive/issue_comments_126497.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,7 @@\n \n See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.\n \n-**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository, and **remove** the **twisted** spkg from the standard spkgs.\n+**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository,  **remove** the **twisted** spkg from the standard spkgs, and\n+**replace** the **sage-***** spkg in  the standard spkgs by [this one](http://web.spms.ntu.edu.sg/~dima/tmp/sage-5.0.beta8.spkg).\n+\n+(or you can patch the `sage-***.spkg` with the attached patch) \n``````\n",
    "created_at": "2012-03-16T07:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126497",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,7 @@
 
 See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.
 
-**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository, and **remove** the **twisted** spkg from the standard spkgs.
+**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository,  **remove** the **twisted** spkg from the standard spkgs, and
+**replace** the **sage-***** spkg in  the standard spkgs by [this one](http://web.spms.ntu.edu.sg/~dima/tmp/sage-5.0.beta8.spkg).
+
+(or you can patch the `sage-***.spkg` with the attached patch) 
``````




---

archive/issue_comments_126498.json:
```json
{
    "body": "<a id='comment:51'></a>\n`make ptest` runs OK. (It produces (expected) failures in sagenb---unless you remove it, of course).\nHere is a [mirror](http://boxen.math.washington.edu/home/dima/packages/sage-5.0.beta8.spkg) of the sage-*** spkg on boxen, for these in USA/Europe.",
    "created_at": "2012-03-16T08:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126498",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:51'></a>
`make ptest` runs OK. (It produces (expected) failures in sagenb---unless you remove it, of course).
Here is a [mirror](http://boxen.math.washington.edu/home/dima/packages/sage-5.0.beta8.spkg) of the sage-*** spkg on boxen, for these in USA/Europe.



---

archive/issue_comments_126499.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,11 @@\n The version of Twisted currently used in Sage is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashes of the notebook webapp go away after the upgrade to twisted 11.\n \n-The twisted package is now included in the flask sagenb (#11080), so this ticket just has the patch to remove the twisted spkg.\n+The twisted package is now included in the flask sagenb (#11080), so this ticket just removes the twisted spkg.\n \n See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.\n \n-**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository,  **remove** the **twisted** spkg from the standard spkgs, and\n-**replace** the **sage-***** spkg in  the standard spkgs by [this one](http://web.spms.ntu.edu.sg/~dima/tmp/sage-5.0.beta8.spkg).\n+**apply**:\n+1. [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository\n+2. [attachment:sage-spkg-11874.patch](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch) to the Sage library.\n \n-(or you can patch the `sage-***.spkg` with the attached patch) \n+And **remove** the twisted spkg from the standard spkgs.\n``````\n",
    "created_at": "2012-03-16T09:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126499",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,11 @@
 The version of Twisted currently used in Sage is old and obsolete; moreover it is buggy, as our extensive tests involving running  labs for 120 students show. The crashes of the notebook webapp go away after the upgrade to twisted 11.
 
-The twisted package is now included in the flask sagenb (#11080), so this ticket just has the patch to remove the twisted spkg.
+The twisted package is now included in the flask sagenb (#11080), so this ticket just removes the twisted spkg.
 
 See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.
 
-**apply**: [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository,  **remove** the **twisted** spkg from the standard spkgs, and
-**replace** the **sage-***** spkg in  the standard spkgs by [this one](http://web.spms.ntu.edu.sg/~dima/tmp/sage-5.0.beta8.spkg).
+**apply**:
+1. [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository
+2. [attachment:sage-spkg-11874.patch](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch) to the Sage library.
 
-(or you can patch the `sage-***.spkg` with the attached patch) 
+And **remove** the twisted spkg from the standard spkgs.
``````




---

archive/issue_comments_126500.json:
```json
{
    "body": "<a id='comment:53'></a>\nGood to finally see some movement in this ticket.  I'm currently testing it.",
    "created_at": "2012-03-16T10:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126500",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'></a>
Good to finally see some movement in this ticket.  I'm currently testing it.



---

archive/issue_events_134949.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-16T10:27:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134949"
}
```



---

archive/issue_events_134950.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-16T10:27:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134950"
}
```



---

archive/issue_comments_126501.json:
```json
{
    "body": "<a id='comment:54'></a>\nIt needs some more documentation though, this should be expanded a bit:\n\n```\n\"\"\"\nthis is needed for setup.py only\n\"\"\"\n```\n\nAlso you should follow the format of [http://sagemath.org/doc/developer/conventions.html#headings-of-sage-library-code-files](http://sagemath.org/doc/developer/conventions.html#headings-of-sage-library-code-files) (without the `EXAMPLES`).  Mention this ticket.\n\nI'm also not too happy with the name \"fpickl.py\".  It sounds too much like a typo.  What about \"fpickle_setup.py\" or something?",
    "created_at": "2012-03-16T10:27:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126501",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>
It needs some more documentation though, this should be expanded a bit:

```
"""
this is needed for setup.py only
"""
```

Also you should follow the format of [http://sagemath.org/doc/developer/conventions.html#headings-of-sage-library-code-files](http://sagemath.org/doc/developer/conventions.html#headings-of-sage-library-code-files) (without the `EXAMPLES`).  Mention this ticket.

I'm also not too happy with the name "fpickl.py".  It sounds too much like a typo.  What about "fpickle_setup.py" or something?



---

archive/issue_comments_126502.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [@jdemeyer](#comment%3A54):\n> It needs some more documentation though, this should be expanded a bit:\n\nDone.\n\n\n> Also you should follow the format of [http://sagemath.org/doc/developer/conventions.html#headings-of-sage-library-code-files](http://sagemath.org/doc/developer/conventions.html#headings-of-sage-library-code-files) (without the `EXAMPLES`).  Mention this ticket.\n\n\nThis file is NOT a part of Sage library code. It's basically a part of setup.py, and I followed the informal style we use for  this kind of stuff (I could have inserted this code into the setup.py directly, but I felt it's cleaner to keep it separate)\n\n> \n> I'm also not too happy with the name \"fpickl.py\".  It sounds too much like a typo.  What about \"fpickle_setup.py\" or something?\n\nDuly renamed as you suggested. The updated patch is uploaded, ready for review again.",
    "created_at": "2012-03-16T11:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126502",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:55'></a>
Replying to [@jdemeyer](#comment%3A54):
> It needs some more documentation though, this should be expanded a bit:

Done.


> Also you should follow the format of [http://sagemath.org/doc/developer/conventions.html#headings-of-sage-library-code-files](http://sagemath.org/doc/developer/conventions.html#headings-of-sage-library-code-files) (without the `EXAMPLES`).  Mention this ticket.


This file is NOT a part of Sage library code. It's basically a part of setup.py, and I followed the informal style we use for  this kind of stuff (I could have inserted this code into the setup.py directly, but I felt it's cleaner to keep it separate)

> 
> I'm also not too happy with the name "fpickl.py".  It sounds too much like a typo.  What about "fpickle_setup.py" or something?

Duly renamed as you suggested. The updated patch is uploaded, ready for review again.



---

archive/issue_events_134951.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-16T11:36:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134951"
}
```



---

archive/issue_events_134952.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-16T11:36:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134952"
}
```



---

archive/issue_comments_126503.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [@dimpase](#comment%3A55):\n> This file is NOT a part of Sage library code.\n\nAgreed, but why is this a reason not to follow the coding style?",
    "created_at": "2012-03-16T12:50:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126503",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>
Replying to [@dimpase](#comment%3A55):
> This file is NOT a part of Sage library code.

Agreed, but why is this a reason not to follow the coding style?



---

archive/issue_comments_126504.json:
```json
{
    "body": "<a id='comment:57'></a>\nAlso, your commit message should not start with\n\n```\n* * *\n```",
    "created_at": "2012-03-16T12:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126504",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>
Also, your commit message should not start with

```
* * *
```



---

archive/issue_comments_126505.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [@jdemeyer](#comment%3A57):\n> Also, your commit message should not start with\n\n\n ```\n * * *\n```\n\nI've fixed this, sorry. It was an artefact of `hg qfold`",
    "created_at": "2012-03-16T13:12:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126505",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:58'></a>
Replying to [@jdemeyer](#comment%3A57):
> Also, your commit message should not start with


 ```
 * * *
```

I've fixed this, sorry. It was an artefact of `hg qfold`



---

archive/issue_comments_126506.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [@jdemeyer](#comment%3A56):\n> Replying to [@dimpase](#comment%3A55):\n> > This file is NOT a part of Sage library code.\n\n> Agreed, but why is this a reason not to follow the coding style?\n\nwell, you provided me a link to coding guidelines for Sage **library** code, and this file does not belong there, as it's basically a glorified installation script. Then there are `setup.py` and other files which have even less in the header than this new file, so I do not see why I should be holier than the Pope.\n\nAnd the horrors of digging up the proper copyright notice for this piece of code are, well, horrors...",
    "created_at": "2012-03-16T13:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126506",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:59'></a>
Replying to [@jdemeyer](#comment%3A56):
> Replying to [@dimpase](#comment%3A55):
> > This file is NOT a part of Sage library code.

> Agreed, but why is this a reason not to follow the coding style?

well, you provided me a link to coding guidelines for Sage **library** code, and this file does not belong there, as it's basically a glorified installation script. Then there are `setup.py` and other files which have even less in the header than this new file, so I do not see why I should be holier than the Pope.

And the horrors of digging up the proper copyright notice for this piece of code are, well, horrors...



---

archive/issue_comments_126507.json:
```json
{
    "body": "<a id='comment:60'></a>\napplying the patches etc procedure for this ticket, and then #11080, followed by ptestlong, shows one failing doctest, in sagenb (which is just very outdated code in sagenb, as the current Poset has more keyargs than expected by the test).\nThis needs to be fixed in sagenb, not here.\n\n```\nsage -t  --long -force_lib devel/sagenb-main/sagenb/misc/sageinspect.py\n**********************************************************************\nFile \"/usr/local/src/sage/sage-5.0.beta8/devel/sagenb-main/sagenb/misc/sageinspect.py\", line 653:\n    sage: sage_getargspec(Poset)\nExpected:\n    (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))\nGot:\n    (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, \nNone, None, None))\n```",
    "created_at": "2012-03-17T04:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126507",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:60'></a>
applying the patches etc procedure for this ticket, and then #11080, followed by ptestlong, shows one failing doctest, in sagenb (which is just very outdated code in sagenb, as the current Poset has more keyargs than expected by the test).
This needs to be fixed in sagenb, not here.

```
sage -t  --long -force_lib devel/sagenb-main/sagenb/misc/sageinspect.py
**********************************************************************
File "/usr/local/src/sage/sage-5.0.beta8/devel/sagenb-main/sagenb/misc/sageinspect.py", line 653:
    sage: sage_getargspec(Poset)
Expected:
    (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))
Got:
    (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, 
None, None, None))
```



---

archive/issue_comments_126508.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [@dimpase](#comment%3A60):\n> applying the patches etc procedure for this ticket, and then #11080, followed by ptestlong, shows one failing doctest, in sagenb (which is just very outdated code in sagenb, as the current Poset has more keyargs than expected by the test).\n> This needs to be fixed in sagenb, not here.\n> \n> ```\n> sage -t  --long -force_lib devel/sagenb-main/sagenb/misc/sageinspect.py\n> **********************************************************************\n> File \"/usr/local/src/sage/sage-5.0.beta8/devel/sagenb-main/sagenb/misc/sageinspect.py\", line 653:\n>     sage: sage_getargspec(Poset)\n> Expected:\n>     (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))\n> Got:\n>     (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, \n> None, None, None))\n> ```\n\nThis is already [fixed \"upstream\"](https://github.com/sagemath/sagenb/commit/a6e1f2103880434b5f48c41d7c157cfdae9cc110). :)",
    "created_at": "2012-03-17T04:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126508",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:61'></a>
Replying to [@dimpase](#comment%3A60):
> applying the patches etc procedure for this ticket, and then #11080, followed by ptestlong, shows one failing doctest, in sagenb (which is just very outdated code in sagenb, as the current Poset has more keyargs than expected by the test).
> This needs to be fixed in sagenb, not here.
> 
> ```
> sage -t  --long -force_lib devel/sagenb-main/sagenb/misc/sageinspect.py
> **********************************************************************
> File "/usr/local/src/sage/sage-5.0.beta8/devel/sagenb-main/sagenb/misc/sageinspect.py", line 653:
>     sage: sage_getargspec(Poset)
> Expected:
>     (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))
> Got:
>     (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, 
> None, None, None))
> ```

This is already [fixed "upstream"](https://github.com/sagemath/sagenb/commit/a6e1f2103880434b5f48c41d7c157cfdae9cc110). :)



---

archive/issue_comments_126509.json:
```json
{
    "body": "<a id='comment:62'></a>\nReplying to [@ppurka](#comment%3A61):\n> Replying to [@dimpase](#comment%3A60):\n> > applying the patches etc procedure for this ticket, and then #11080, followed by ptestlong, shows one failing doctest, in sagenb (which is just very outdated code in sagenb, as the current Poset has more keyargs than expected by the test).\n> > This needs to be fixed in sagenb, not here.\n\n> \n> This is already [fixed \"upstream\"](https://github.com/sagemath/sagenb/commit/a6e1f2103880434b5f48c41d7c157cfdae9cc110). :)\n\n\"upstream\", please remove twisted 11 from sagenb! Indeed, after all this is installed I see:\n\n```\nsage: import twisted\nsage: twisted.version\nVersion('twisted', 12, 0, 0)\n```\n\nfair enough, the installation log of sagenb-0.9.0 spkg (see #11080) has the following lines:\n\n```\n...\nSearching for Flask==0.8\nBest match: Flask 0.8\nProcessing Flask-0.8-py2.7.egg\nFlask 0.8 is already the active version in easy-install.pth\n\nUsing /usr/local/src/sage/sage-5.0.beta8/local/lib/python2.7/site-packages/Flask-0.8-py2.7.egg\nSearching for Twisted==12.0.0\nBest match: Twisted 12.0.0\nProcessing Twisted-12.0.0-py2.7-macosx-10.6-x86_64.egg\nRemoving Twisted 11.1.0 from easy-install.pth file\nAdding Twisted 12.0.0 to easy-install.pth file\n...\n```\nso Twisted 11.1.0 need not be bundled, and in fact I suspect that many installations of Sage that are thought of running twisted 11 are actually running twisted 12!\n\nThus, either remove twisted 11 from the sagenb bundle, or keep it (if there areny reasons?) and make sure that it gets used!",
    "created_at": "2012-03-17T05:03:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126509",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:62'></a>
Replying to [@ppurka](#comment%3A61):
> Replying to [@dimpase](#comment%3A60):
> > applying the patches etc procedure for this ticket, and then #11080, followed by ptestlong, shows one failing doctest, in sagenb (which is just very outdated code in sagenb, as the current Poset has more keyargs than expected by the test).
> > This needs to be fixed in sagenb, not here.

> 
> This is already [fixed "upstream"](https://github.com/sagemath/sagenb/commit/a6e1f2103880434b5f48c41d7c157cfdae9cc110). :)

"upstream", please remove twisted 11 from sagenb! Indeed, after all this is installed I see:

```
sage: import twisted
sage: twisted.version
Version('twisted', 12, 0, 0)
```

fair enough, the installation log of sagenb-0.9.0 spkg (see #11080) has the following lines:

```
...
Searching for Flask==0.8
Best match: Flask 0.8
Processing Flask-0.8-py2.7.egg
Flask 0.8 is already the active version in easy-install.pth

Using /usr/local/src/sage/sage-5.0.beta8/local/lib/python2.7/site-packages/Flask-0.8-py2.7.egg
Searching for Twisted==12.0.0
Best match: Twisted 12.0.0
Processing Twisted-12.0.0-py2.7-macosx-10.6-x86_64.egg
Removing Twisted 11.1.0 from easy-install.pth file
Adding Twisted 12.0.0 to easy-install.pth file
...
```
so Twisted 11.1.0 need not be bundled, and in fact I suspect that many installations of Sage that are thought of running twisted 11 are actually running twisted 12!

Thus, either remove twisted 11 from the sagenb bundle, or keep it (if there areny reasons?) and make sure that it gets used!



---

archive/issue_comments_126510.json:
```json
{
    "body": "<a id='comment:63'></a>\nAFAIK we just bundle things in the sagenb spkg so that installing the spkg doesn't require network access. So either we should bundle Twisted 12, or we should set a strict version dependency on twisted in setup.py, rather than an \"at least\" version dependency.",
    "created_at": "2012-03-17T05:49:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126510",
    "user": "https://github.com/kini"
}
```

<a id='comment:63'></a>
AFAIK we just bundle things in the sagenb spkg so that installing the spkg doesn't require network access. So either we should bundle Twisted 12, or we should set a strict version dependency on twisted in setup.py, rather than an "at least" version dependency.



---

archive/issue_comments_126511.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [@dimpase](#comment%3A62):\n> \"upstream\", please remove twisted 11 from sagenb! Indeed, after all this is installed I see:\n> \n> ```\n> sage: import twisted\n> sage: twisted.version\n> Version('twisted', 12, 0, 0)\n> ```\n\nI cannot reproduce this with the latest sage-5.0.beta8 + sagenb-0.9.0.  It could be some race condition of course...",
    "created_at": "2012-03-17T12:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126511",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:64'></a>
Replying to [@dimpase](#comment%3A62):
> "upstream", please remove twisted 11 from sagenb! Indeed, after all this is installed I see:
> 
> ```
> sage: import twisted
> sage: twisted.version
> Version('twisted', 12, 0, 0)
> ```

I cannot reproduce this with the latest sage-5.0.beta8 + sagenb-0.9.0.  It could be some race condition of course...



---

archive/issue_comments_126512.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [@jdemeyer](#comment%3A64):\n> Replying to [@dimpase](#comment%3A62):\n> > \"upstream\", please remove twisted 11 from sagenb! Indeed, after all this is installed I see:\n> > \n> > ```\n> > sage: import twisted\n> > sage: twisted.version\n> > Version('twisted', 12, 0, 0)\n> > ```\n\n> I cannot reproduce this with the latest sage-5.0.beta8 + sagenb-0.9.0.  It could be some race condition of course...\n\nI got this two times, on Linux and on OSX. Please see http://boxen.math.washington.edu/home/dima/tmp/sagenb090install.log for how it went on my OSX system.\n\nIt could have happened that the machine you installed sagenb-0.9.0 was off the net, or easy_install was prevented from getting Twisted 12.0.0 in some other way.",
    "created_at": "2012-03-17T13:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126512",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:65'></a>
Replying to [@jdemeyer](#comment%3A64):
> Replying to [@dimpase](#comment%3A62):
> > "upstream", please remove twisted 11 from sagenb! Indeed, after all this is installed I see:
> > 
> > ```
> > sage: import twisted
> > sage: twisted.version
> > Version('twisted', 12, 0, 0)
> > ```

> I cannot reproduce this with the latest sage-5.0.beta8 + sagenb-0.9.0.  It could be some race condition of course...

I got this two times, on Linux and on OSX. Please see http://boxen.math.washington.edu/home/dima/tmp/sagenb090install.log for how it went on my OSX system.

It could have happened that the machine you installed sagenb-0.9.0 was off the net, or easy_install was prevented from getting Twisted 12.0.0 in some other way.



---

archive/issue_comments_126513.json:
```json
{
    "body": "<a id='comment:66'></a>\nReplying to [@dimpase](#comment%3A65):\n> Replying to [@jdemeyer](#comment%3A64):\n> > Replying to [@dimpase](#comment%3A62):\n> > > \"upstream\", please remove twisted 11 from sagenb! Indeed, after all this is installed I see:\n> > > \n> > > ```\n> > > sage: import twisted\n> > > sage: twisted.version\n> > > Version('twisted', 12, 0, 0)\n> > > ```\n\n> > I cannot reproduce this with the latest sage-5.0.beta8 + sagenb-0.9.0.  It could be some race condition of course...\n\n> \n> I got this two times, on Linux and on OSX. Please see http://boxen.math.washington.edu/home/dima/tmp/sagenb090install.log for how it went on my OSX system.\n> \n> It could have happened that the machine you installed sagenb-0.9.0 was off the net, or easy_install was prevented from getting Twisted 12.0.0 in some other way.\n\nFWIW, I get:\n\n```\n----------------------------------------------------------------------\n| Sage Version 5.0.beta8, Release Date: 2012-03-13                   |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nThe Sage installation tree may have moved\n(from /data/leif/Sage/sage-5.0.beta8 to /data/leif/Sage/sage-5.0.beta8-gcc-4.4.3).\nChanging various hardcoded paths...\n(Please wait at most a few minutes.)\nDO NOT INTERRUPT THIS.\nDone resetting paths.\nsage: import twisted\nsage: twisted.version\nVersion('twisted', 9, 0, 0)\n```\n\nAnd this is the (spkg) version currently included in Sage, not the system-wide one, since that is 10.0.0:\n\n```\n$ python\nPython 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) \n[GCC 4.4.3] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import twisted\n>>> twisted.version\nVersion('twisted', 10, 0, 0)\n```\n\nOh, I just noticed Sage 5.0.beta8 ships SageNB 0.8.27, so this might be irrelevant anyway.",
    "created_at": "2012-03-17T15:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126513",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:66'></a>
Replying to [@dimpase](#comment%3A65):
> Replying to [@jdemeyer](#comment%3A64):
> > Replying to [@dimpase](#comment%3A62):
> > > "upstream", please remove twisted 11 from sagenb! Indeed, after all this is installed I see:
> > > 
> > > ```
> > > sage: import twisted
> > > sage: twisted.version
> > > Version('twisted', 12, 0, 0)
> > > ```

> > I cannot reproduce this with the latest sage-5.0.beta8 + sagenb-0.9.0.  It could be some race condition of course...

> 
> I got this two times, on Linux and on OSX. Please see http://boxen.math.washington.edu/home/dima/tmp/sagenb090install.log for how it went on my OSX system.
> 
> It could have happened that the machine you installed sagenb-0.9.0 was off the net, or easy_install was prevented from getting Twisted 12.0.0 in some other way.

FWIW, I get:

```
----------------------------------------------------------------------
| Sage Version 5.0.beta8, Release Date: 2012-03-13                   |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
The Sage installation tree may have moved
(from /data/leif/Sage/sage-5.0.beta8 to /data/leif/Sage/sage-5.0.beta8-gcc-4.4.3).
Changing various hardcoded paths...
(Please wait at most a few minutes.)
DO NOT INTERRUPT THIS.
Done resetting paths.
sage: import twisted
sage: twisted.version
Version('twisted', 9, 0, 0)
```

And this is the (spkg) version currently included in Sage, not the system-wide one, since that is 10.0.0:

```
$ python
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import twisted
>>> twisted.version
Version('twisted', 10, 0, 0)
```

Oh, I just noticed Sage 5.0.beta8 ships SageNB 0.8.27, so this might be irrelevant anyway.



---

archive/issue_comments_126514.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [@dimpase](#comment%3A65):\n\n> I got this two times, on Linux and on OSX. Please see http://boxen.math.washington.edu/home/dima/tmp/sagenb090install.log for how it went on my OSX system.\n\n> It could have happened that the machine you installed sagenb-0.9.0 was off the net, or easy_install was prevented from getting Twisted 12.0.0 in some other way.\n\nI'm unable to reproduce this on Linux. From the sagenb090install.log there is\n\n```\ngcc version 4.2.1 (Apple Inc. build 5666) (dot 3)\n****************************************************\nProcessing Twisted-11.1.0.tar.bz2\nRunning Twisted-11.1.0/setup.py -q bdist_egg --dist-dir /var/folders/qW/qWY+4Ku1GF0WXrOsV+IDvk+++TM/-Tmp-/easy_install-09EQjq/Twisted-11.1.0/egg-dist-tmp-DCWyoE\nconftest.c:1:23: error: sys/epoll.h: No such file or directory\nRemoving Twisted 12.0.0 from easy-install.pth file\nAdding Twisted 11.1.0 to easy-install.pth file\nInstalling cftp script to /usr/local/src/sage/sage-5.0.beta8/local/bin\n```\nWhile I get\n\n```\ngcc version 4.5.3 (Gentoo 4.5.3-r1 p1.0, pie-0.4.5)\n****************************************************\nProcessing Twisted-11.1.0.tar.bz2\nRunning Twisted-11.1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-52PPAo/Twisted-11.1.0/egg-dist-tmp-mqRKXh\nIn file included from /storage/sage/sage-5.0.beta-nopatch/local/include/python2.7/Python.h:8:0,\n                 from twisted/internet/_sigchld.c:9:\n/storage/sage/sage-5.0.beta-nopatch/local/include/python2.7/pyconfig.h:1155:0: warning: \"_POSIX_C_SOURCE\" redefined\n/usr/include/features.h:210:0: note: this is the location of the previous definition\nRemoving Twisted 9.0.0 from easy-install.pth file\nAdding Twisted 11.1.0 to easy-install.pth file\nInstalling cftp script to /storage/sage/sage-5.0.beta-nopatch/local/bin\n```\nDoesn't the former suggest that Twisted 12.0.0 was installed prior to the install of sagenb-0.9.0? It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.",
    "created_at": "2012-03-17T17:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126514",
    "user": "https://github.com/strogdon"
}
```

<a id='comment:67'></a>
Replying to [@dimpase](#comment%3A65):

> I got this two times, on Linux and on OSX. Please see http://boxen.math.washington.edu/home/dima/tmp/sagenb090install.log for how it went on my OSX system.

> It could have happened that the machine you installed sagenb-0.9.0 was off the net, or easy_install was prevented from getting Twisted 12.0.0 in some other way.

I'm unable to reproduce this on Linux. From the sagenb090install.log there is

```
gcc version 4.2.1 (Apple Inc. build 5666) (dot 3)
****************************************************
Processing Twisted-11.1.0.tar.bz2
Running Twisted-11.1.0/setup.py -q bdist_egg --dist-dir /var/folders/qW/qWY+4Ku1GF0WXrOsV+IDvk+++TM/-Tmp-/easy_install-09EQjq/Twisted-11.1.0/egg-dist-tmp-DCWyoE
conftest.c:1:23: error: sys/epoll.h: No such file or directory
Removing Twisted 12.0.0 from easy-install.pth file
Adding Twisted 11.1.0 to easy-install.pth file
Installing cftp script to /usr/local/src/sage/sage-5.0.beta8/local/bin
```
While I get

```
gcc version 4.5.3 (Gentoo 4.5.3-r1 p1.0, pie-0.4.5)
****************************************************
Processing Twisted-11.1.0.tar.bz2
Running Twisted-11.1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-52PPAo/Twisted-11.1.0/egg-dist-tmp-mqRKXh
In file included from /storage/sage/sage-5.0.beta-nopatch/local/include/python2.7/Python.h:8:0,
                 from twisted/internet/_sigchld.c:9:
/storage/sage/sage-5.0.beta-nopatch/local/include/python2.7/pyconfig.h:1155:0: warning: "_POSIX_C_SOURCE" redefined
/usr/include/features.h:210:0: note: this is the location of the previous definition
Removing Twisted 9.0.0 from easy-install.pth file
Adding Twisted 11.1.0 to easy-install.pth file
Installing cftp script to /storage/sage/sage-5.0.beta-nopatch/local/bin
```
Doesn't the former suggest that Twisted 12.0.0 was installed prior to the install of sagenb-0.9.0? It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.



---

archive/issue_comments_126515.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [@strogdon](#comment%3A67):\n> It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.\n\n9.0.0, see above.  Or did I misunderstand you?",
    "created_at": "2012-03-17T17:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126515",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:68'></a>
Replying to [@strogdon](#comment%3A67):
> It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.

9.0.0, see above.  Or did I misunderstand you?



---

archive/issue_comments_126516.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [@nexttime](#comment%3A68):\n\n> Replying to [@strogdon](#comment%3A67):\n> > It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.\n\n> 9.0.0, see above.  Or did I misunderstand you?\n\nYes, that's what I get. But was wondering if Dmitrii gets the same.",
    "created_at": "2012-03-17T17:40:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126516",
    "user": "https://github.com/strogdon"
}
```

<a id='comment:69'></a>
Replying to [@nexttime](#comment%3A68):

> Replying to [@strogdon](#comment%3A67):
> > It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.

> 9.0.0, see above.  Or did I misunderstand you?

Yes, that's what I get. But was wondering if Dmitrii gets the same.



---

archive/issue_comments_126517.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,6 +5,7 @@\n See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.\n \n **apply**:\n+\n 1. [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository\n 2. [attachment:sage-spkg-11874.patch](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch) to the Sage library.\n \n``````\n",
    "created_at": "2012-03-17T17:40:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126517",
    "user": "https://github.com/strogdon"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,6 +5,7 @@
 See http://groups.google.com/group/sage-devel/browse_thread/thread/98c53d17166da1b9 for the sage-devel vote.
 
 **apply**:
+
 1. [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository
 2. [attachment:sage-spkg-11874.patch](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch) to the Sage library.
 
``````




---

archive/issue_comments_126518.json:
```json
{
    "body": "<a id='comment:70'></a>\nThe indication is that I changed the description? \u00a0I never intended to do this and I'm not really sure if anything was changed. This is odd.",
    "created_at": "2012-03-17T17:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126518",
    "user": "https://github.com/strogdon"
}
```

<a id='comment:70'></a>
The indication is that I changed the description?  I never intended to do this and I'm not really sure if anything was changed. This is odd.



---

archive/issue_comments_126519.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [@strogdon](#comment%3A67):\n\n> Doesn't the former suggest that Twisted 12.0.0 was installed prior to the install of sagenb-0.9.0? \n\nwell, I ran the installation of sagenb-0.9.0 more than once. The result was always the same. It seems I have uploaded the wrong part of the log.\n\n> It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.\n\nIf you followed the instructions on this ticket then you would not have ANY twisted before installing  sagenb-0.9.0.\nAt least in theory. I didn't check this. I will, but not right now. It's past 2am here.",
    "created_at": "2012-03-17T18:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126519",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:71'></a>
Replying to [@strogdon](#comment%3A67):

> Doesn't the former suggest that Twisted 12.0.0 was installed prior to the install of sagenb-0.9.0? 

well, I ran the installation of sagenb-0.9.0 more than once. The result was always the same. It seems I have uploaded the wrong part of the log.

> It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.

If you followed the instructions on this ticket then you would not have ANY twisted before installing  sagenb-0.9.0.
At least in theory. I didn't check this. I will, but not right now. It's past 2am here.



---

archive/issue_events_134953.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-17T18:32:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134953"
}
```



---

archive/issue_events_134954.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-17T18:32:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134954"
}
```



---

archive/issue_comments_126520.json:
```json
{
    "body": "**Work Issues:** MANIFEST.in",
    "created_at": "2012-03-17T18:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126520",
    "user": "https://github.com/jdemeyer"
}
```

**Work Issues:** MANIFEST.in



---

archive/issue_comments_126521.json:
```json
{
    "body": "<a id='comment:72'></a>\nThe file `fpickle_setup.py` needs to be added to `MANIFEST.in`",
    "created_at": "2012-03-17T18:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126521",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:72'></a>
The file `fpickle_setup.py` needs to be added to `MANIFEST.in`



---

archive/issue_comments_126522.json:
```json
{
    "body": "<a id='comment:73'></a>\nReplying to [@dimpase](#comment%3A71):\n> Replying to [@strogdon](#comment%3A67):\n> \n> > Doesn't the former suggest that Twisted 12.0.0 was installed prior to the install of sagenb-0.9.0? \n\n> \n> well, I ran the installation of sagenb-0.9.0 more than once. The result was always the same. It seems I have uploaded the wrong part of the log.\n> \n> > It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.\n\nThe mystery is solved :-) \nAs sagenb-0.8.27.spkg was not removed, but twisted spkg was removed, during the installation of sagenb-0.8.27.spkg Twisted-12 was pulled from the net. Sorry for noise.\n\nThus, this needs to be coordinated with the removal of sagenb from Sage deps. Has this been already done in a patch?\n> \n> If you followed the instructions on this ticket then you would not have ANY twisted before installing  sagenb-0.9.0.\n> At least in theory. I didn't check this. I will, but not right now. It's past 2am here.\n> \n\n>",
    "created_at": "2012-03-17T18:39:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126522",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:73'></a>
Replying to [@dimpase](#comment%3A71):
> Replying to [@strogdon](#comment%3A67):
> 
> > Doesn't the former suggest that Twisted 12.0.0 was installed prior to the install of sagenb-0.9.0? 

> 
> well, I ran the installation of sagenb-0.9.0 more than once. The result was always the same. It seems I have uploaded the wrong part of the log.
> 
> > It would be interesting to know what version of Twisted is reported by an unpatched version of 5.0.beta8 with sagenb-0.8.27.

The mystery is solved :-) 
As sagenb-0.8.27.spkg was not removed, but twisted spkg was removed, during the installation of sagenb-0.8.27.spkg Twisted-12 was pulled from the net. Sorry for noise.

Thus, this needs to be coordinated with the removal of sagenb from Sage deps. Has this been already done in a patch?
> 
> If you followed the instructions on this ticket then you would not have ANY twisted before installing  sagenb-0.9.0.
> At least in theory. I didn't check this. I will, but not right now. It's past 2am here.
> 

>



---

archive/issue_comments_126523.json:
```json
{
    "body": "**Description changed:**\n``````diff\n\n``````\n",
    "created_at": "2012-03-17T18:39:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126523",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff

``````




---

archive/issue_events_134955.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-17T18:39:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134955"
}
```



---

archive/issue_events_134956.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-17T18:39:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134956"
}
```



---

archive/issue_comments_126524.json:
```json
{
    "body": "<a id='comment:74'></a>\nReplying to [@kini](#comment%3A63):\n> AFAIK we just bundle things in the sagenb spkg so that installing the spkg doesn't require network access. So either we should bundle Twisted 12, or we should set a strict version dependency on twisted in setup.py, rather than an \"at least\" version dependency.\n\nAfter looking at how the SPKG is produced, I think if Jason just produces the spkg again from exactly the same sagenb code it will now contain a copy of Twisted 12. So maybe the solution is to just have Jason produce the SPKG again.",
    "created_at": "2012-03-17T18:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126524",
    "user": "https://github.com/kini"
}
```

<a id='comment:74'></a>
Replying to [@kini](#comment%3A63):
> AFAIK we just bundle things in the sagenb spkg so that installing the spkg doesn't require network access. So either we should bundle Twisted 12, or we should set a strict version dependency on twisted in setup.py, rather than an "at least" version dependency.

After looking at how the SPKG is produced, I think if Jason just produces the spkg again from exactly the same sagenb code it will now contain a copy of Twisted 12. So maybe the solution is to just have Jason produce the SPKG again.



---

archive/issue_comments_126525.json:
```json
{
    "body": "<a id='comment:75'></a>\nReplying to [@dimpase](#comment%3A73):\n> Thus, this needs to be coordinated with the removal of sagenb from Sage deps. Has this been already done in a patch?\n\nWhat do you mean?  The sagenb package is replaced by the package from #11080.  It should not be removed.",
    "created_at": "2012-03-17T20:38:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126525",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:75'></a>
Replying to [@dimpase](#comment%3A73):
> Thus, this needs to be coordinated with the removal of sagenb from Sage deps. Has this been already done in a patch?

What do you mean?  The sagenb package is replaced by the package from #11080.  It should not be removed.



---

archive/issue_comments_126526.json:
```json
{
    "body": "<a id='comment:76'></a>\nYou're right that if I made a new spkg, as things are arranged now, we'd get Twisted 12.0.  The version that is currently up at #11080 should contain 11.something (11.1?), and we specifically install it with a switch to easy_install that says not to download things from the net.\n\nIt sounds like you figured out why 12.0 was being downloaded.  Is this issue of accidentally getting 12.0 resolved now?",
    "created_at": "2012-03-18T02:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126526",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:76'></a>
You're right that if I made a new spkg, as things are arranged now, we'd get Twisted 12.0.  The version that is currently up at #11080 should contain 11.something (11.1?), and we specifically install it with a switch to easy_install that says not to download things from the net.

It sounds like you figured out why 12.0 was being downloaded.  Is this issue of accidentally getting 12.0 resolved now?



---

archive/issue_comments_126527.json:
```json
{
    "body": "<a id='comment:77'></a>\n(By the way, you're right that is very easy for us to require Twisted 11.1 specifically, instead of just >=11.0 (which would pull 12.0).  Should we specifically require 11.1, or is it okay to produce an spkg that has Twisted 12.0?  It doesn't matter to me---whichever gets the notebook in faster.",
    "created_at": "2012-03-18T02:06:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126527",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:77'></a>
(By the way, you're right that is very easy for us to require Twisted 11.1 specifically, instead of just >=11.0 (which would pull 12.0).  Should we specifically require 11.1, or is it okay to produce an spkg that has Twisted 12.0?  It doesn't matter to me---whichever gets the notebook in faster.



---

archive/issue_comments_126528.json:
```json
{
    "body": "<a id='comment:78'></a>\nReplying to [@jdemeyer](#comment%3A72):\n> The file `fpickle_setup.py` needs to be added to `MANIFEST.in`\n\nDone. Ready for review now. (The twisted version issue is a non-issue, or at least not for this ticked, as it turned out).",
    "created_at": "2012-03-18T03:59:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126528",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:78'></a>
Replying to [@jdemeyer](#comment%3A72):
> The file `fpickle_setup.py` needs to be added to `MANIFEST.in`

Done. Ready for review now. (The twisted version issue is a non-issue, or at least not for this ticked, as it turned out).



---

archive/issue_comments_126529.json:
```json
{
    "body": "**Changing work issues** from \"MANIFEST.in\" to \"\".",
    "created_at": "2012-03-18T03:59:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126529",
    "user": "https://github.com/dimpase"
}
```

**Changing work issues** from "MANIFEST.in" to "".



---

archive/issue_events_134957.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-18T03:59:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134957"
}
```



---

archive/issue_events_134958.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-18T03:59:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134958"
}
```



---

archive/issue_comments_126530.json:
```json
{
    "body": "<a id='comment:79'></a>\nReplying to [@jasongrout](#comment%3A77):\n> (By the way, you're right that is very easy for us to require Twisted 11.1 specifically, instead of just >=11.0 (which would pull 12.0).  Should we specifically require 11.1, or is it okay to produce an spkg that has Twisted 12.0?  It doesn't matter to me---whichever gets the notebook in faster.\n\nIMHO 12 is a bug-fixing release; they bumped the version as they dropped support for some very old Python. it's important to upgrade to 12 and test it ASAP, on *sagenb.org too.",
    "created_at": "2012-03-18T04:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126530",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:79'></a>
Replying to [@jasongrout](#comment%3A77):
> (By the way, you're right that is very easy for us to require Twisted 11.1 specifically, instead of just >=11.0 (which would pull 12.0).  Should we specifically require 11.1, or is it okay to produce an spkg that has Twisted 12.0?  It doesn't matter to me---whichever gets the notebook in faster.

IMHO 12 is a bug-fixing release; they bumped the version as they dropped support for some very old Python. it's important to upgrade to 12 and test it ASAP, on *sagenb.org too.



---

archive/issue_comments_126531.json:
```json
{
    "body": "<a id='comment:80'></a>\nReplying to [@jasongrout](#comment%3A76):\n> You're right that if I made a new spkg, as things are arranged now, we'd get Twisted 12.0.  The version that is currently up at #11080 should contain 11.something (11.1?), and we specifically install it with a switch to easy_install that says not to download things from the net.\n> \n> It sounds like you figured out why 12.0 was being downloaded.  Is this issue of accidentally getting 12.0 resolved now?\n\nYes it is. Twisted 12 was sneaking in as it was getting installed before the installation of the sagenb 0.9.0, and this was due to sagenb 0.8* left to build without twisted spkg (which it did by pulling Twisted 12 from the net).\n. \nWhen I replaced sagenb spkg in Sage 5.0.beta8  with 0.9.0, and then followed the procedure on #11874, I got Sage built with Twisted 11.1, instead of Twisted 12, as expected.",
    "created_at": "2012-03-18T04:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126531",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:80'></a>
Replying to [@jasongrout](#comment%3A76):
> You're right that if I made a new spkg, as things are arranged now, we'd get Twisted 12.0.  The version that is currently up at #11080 should contain 11.something (11.1?), and we specifically install it with a switch to easy_install that says not to download things from the net.
> 
> It sounds like you figured out why 12.0 was being downloaded.  Is this issue of accidentally getting 12.0 resolved now?

Yes it is. Twisted 12 was sneaking in as it was getting installed before the installation of the sagenb 0.9.0, and this was due to sagenb 0.8* left to build without twisted spkg (which it did by pulling Twisted 12 from the net).
. 
When I replaced sagenb spkg in Sage 5.0.beta8  with 0.9.0, and then followed the procedure on #11874, I got Sage built with Twisted 11.1, instead of Twisted 12, as expected.



---

archive/issue_events_134959.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-19T13:50:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134959"
}
```



---

archive/issue_events_134960.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-19T13:50:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134960"
}
```



---

archive/issue_comments_126532.json:
```json
{
    "body": "<a id='comment:81'></a>\nApparently, editing `MANIFEST.in` is not sufficient.  The script `devel/sage/spkg-dist` also needs to be changed.",
    "created_at": "2012-03-19T13:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126532",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:81'></a>
Apparently, editing `MANIFEST.in` is not sufficient.  The script `devel/sage/spkg-dist` also needs to be changed.



---

archive/issue_events_134961.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-19T15:26:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134961"
}
```



---

archive/issue_events_134962.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-03-19T15:26:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134962"
}
```



---

archive/issue_comments_126533.json:
```json
{
    "body": "<a id='comment:82'></a>\nReplying to [@jdemeyer](#comment%3A81):\n> Apparently, editing `MANIFEST.in` is not sufficient.  The script `devel/sage/spkg-dist` also needs to be changed.\n\nalstublieft :)",
    "created_at": "2012-03-19T15:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126533",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:82'></a>
Replying to [@jdemeyer](#comment%3A81):
> Apparently, editing `MANIFEST.in` is not sufficient.  The script `devel/sage/spkg-dist` also needs to be changed.

alstublieft :)



---

archive/issue_comments_126534.json:
```json
{
    "body": "apply to the sage root repository",
    "created_at": "2012-03-27T10:36:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126534",
    "user": "https://github.com/jdemeyer"
}
```

apply to the sage root repository



---

archive/issue_comments_126535.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n \n **apply**:\n \n-1. [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository\n+1. [attachment:trac-11874-remove-twisted.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch) to the sage root repository\n 2. [attachment:sage-spkg-11874.patch](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch) to the Sage library.\n \n And **remove** the twisted spkg from the standard spkgs.\n``````\n",
    "created_at": "2012-03-27T10:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126535",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 
 **apply**:
 
-1. [attachment:trac-11874-remove-twisted.3.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.3.patch) to the sage root repository
+1. [attachment:trac-11874-remove-twisted.patch](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch) to the sage root repository
 2. [attachment:sage-spkg-11874.patch](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch) to the Sage library.
 
 And **remove** the twisted spkg from the standard spkgs.
``````




---

archive/issue_comments_126536.json:
```json
{
    "body": "<a id='comment:83'></a>\n**Attachment:** [trac-11874-remove-twisted.patch.gz](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch.gz)\n\nRebased to #10492.",
    "created_at": "2012-03-27T10:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126536",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:83'></a>
**Attachment:** [trac-11874-remove-twisted.patch.gz](https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch.gz)

Rebased to #10492.



---

archive/issue_comments_126537.json:
```json
{
    "body": "**Changing dependencies** from \"#12329, #11080\" to \"#12329, #11080, #10492\".",
    "created_at": "2012-03-27T10:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126537",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#12329, #11080" to "#12329, #11080, #10492".



---

archive/issue_comments_126538.json:
```json
{
    "body": "<a id='comment:84'></a>\nSo, how is this supposed to work? I performed the following steps:\n\n1. Downloaded and compiled sage-5.0beta11\n\n2. Applied the two patches and removed twisted-9.*spkg from spkg/standard\n\n3. Reran `sage -b`\n\n4. sage and sage -n seems to work fine. But sage still shows that twisted is present.\n\n```\nsage: import twisted\nsage: twisted.version\nVersion('twisted', 9, 0, 0)\n```",
    "created_at": "2012-04-01T15:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126538",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:84'></a>
So, how is this supposed to work? I performed the following steps:

1. Downloaded and compiled sage-5.0beta11

2. Applied the two patches and removed twisted-9.*spkg from spkg/standard

3. Reran `sage -b`

4. sage and sage -n seems to work fine. But sage still shows that twisted is present.

```
sage: import twisted
sage: twisted.version
Version('twisted', 9, 0, 0)
```



---

archive/issue_comments_126539.json:
```json
{
    "body": "<a id='comment:85'></a>\nReplying to [@ppurka](#comment%3A84):\n> So, how is this supposed to work? I performed the following steps:\n> \n> 1. Downloaded and compiled sage-5.0beta11\n\n\"Downloaded, but not compiled!\" (c) J. Bond\n\nYou should download and then apply the patch to the sage-***.spkg,\nthe patch to the root repository, and remove the twisted spkg.\nTHEN compile.",
    "created_at": "2012-04-01T16:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126539",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:85'></a>
Replying to [@ppurka](#comment%3A84):
> So, how is this supposed to work? I performed the following steps:
> 
> 1. Downloaded and compiled sage-5.0beta11

"Downloaded, but not compiled!" (c) J. Bond

You should download and then apply the patch to the sage-***.spkg,
the patch to the root repository, and remove the twisted spkg.
THEN compile.



---

archive/issue_comments_126540.json:
```json
{
    "body": "<a id='comment:86'></a>\nReplying to [@dimpase](#comment%3A85):\n> You should download and then apply the patch to the sage-***.spkg,\n> the patch to the root repository, and remove the twisted spkg.\n> THEN compile.\n\nOk. This is what I have done now. I thought this was not the desired output:\n\n```\n...allations/sage-5.0.beta11> ./sage\n----------------------------------------------------------------------\n| Sage Version 5.0.beta11, Release Date: 2012-03-28                  |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nsage: import twisted\nsage: twisted.version\nVersion('twisted', 12, 0, 0)\nsage: hg_sage('qser')\ncd \"/home/punarbasu/Installations/sage-5.0.beta11/devel/sage\" && sage --hg qser\nsage-spkg-11874.patch\n0\nsage: hg_root('qser')\ncd \"/home/punarbasu/Installations/sage-5.0.beta11\" && sage --hg qser\ntrac-11874-remove-twisted.patch\n0\nsage: \n```\n\nTo apply patch, I untarred the sage-5.0beta11.spkg, cd to sage-5.0beta11 and applied the patch using hg. Then I repackaged the directory into the spkg. And then I compiled.\n\nEdit: Sorry, I see now that I should have used sagenb-0.9.0 in order to not pull in twisted-12.",
    "created_at": "2012-04-01T22:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126540",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:86'></a>
Replying to [@dimpase](#comment%3A85):
> You should download and then apply the patch to the sage-***.spkg,
> the patch to the root repository, and remove the twisted spkg.
> THEN compile.

Ok. This is what I have done now. I thought this was not the desired output:

```
...allations/sage-5.0.beta11> ./sage
----------------------------------------------------------------------
| Sage Version 5.0.beta11, Release Date: 2012-03-28                  |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
sage: import twisted
sage: twisted.version
Version('twisted', 12, 0, 0)
sage: hg_sage('qser')
cd "/home/punarbasu/Installations/sage-5.0.beta11/devel/sage" && sage --hg qser
sage-spkg-11874.patch
0
sage: hg_root('qser')
cd "/home/punarbasu/Installations/sage-5.0.beta11" && sage --hg qser
trac-11874-remove-twisted.patch
0
sage: 
```

To apply patch, I untarred the sage-5.0beta11.spkg, cd to sage-5.0beta11 and applied the patch using hg. Then I repackaged the directory into the spkg. And then I compiled.

Edit: Sorry, I see now that I should have used sagenb-0.9.0 in order to not pull in twisted-12.



---

archive/issue_comments_126541.json:
```json
{
    "body": "<a id='comment:87'></a>\nUpdate: with the old sagenb it is unable to launch the notebook. So, I think this patch *needs* the new sagenb so as to be useful.\n\n```\n...allations/sage-5.0.beta11> ./sage -n directory=/tmp/a.sagenb\n----------------------------------------------------------------------\n| Sage Version 5.0.beta11, Release Date: 2012-03-28                  |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\n\nPlease wait while the Sage Notebook server starts...\n...\nnotebook(directory=r'''/tmp/a.sagenb''')\nTraceback (most recent call last):\n  File \"/home/punarbasu/Installations/sage-5.0.beta11/local/bin/sage-notebook\", line 34, in <module>\n    exec cmd\n  File \"<string>\", line 1, in <module>\n  File \"/home/punarbasu/Installations/sage-5.0.beta11/devel/sagenb/sagenb/notebook/notebook_object.py\", line 217, in __call__\n    return self.notebook(*args, **kwds)\n  File \"/home/punarbasu/Installations/sage-5.0.beta11/devel/sagenb/sagenb/notebook/run_notebook.py\", line 202, in notebook_twisted\n    nb = notebook.load_notebook(directory)\n  File \"/home/punarbasu/Installations/sage-5.0.beta11/devel/sagenb/sagenb/notebook/notebook.py\", line 1809, in load_notebook\n    import sagenb.notebook.twist\n  File \"/home/punarbasu/Installations/sage-5.0.beta11/devel/sagenb/sagenb/notebook/twist.py\", line 42, in <module>\n    from twisted.web2 import server, http, resource, channel\nImportError: No module named web2\n```\n\nIn a [different installation](https://github.com/sagemath/sage/issues/11080#comment:144), I applied this ticket, #11080 and #11503 and came up with a broken jsmath/mathjax. ( It hasn't been a pleasant day for sure :( )",
    "created_at": "2012-04-02T15:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126541",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:87'></a>
Update: with the old sagenb it is unable to launch the notebook. So, I think this patch *needs* the new sagenb so as to be useful.

```
...allations/sage-5.0.beta11> ./sage -n directory=/tmp/a.sagenb
----------------------------------------------------------------------
| Sage Version 5.0.beta11, Release Date: 2012-03-28                  |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************

Please wait while the Sage Notebook server starts...
...
notebook(directory=r'''/tmp/a.sagenb''')
Traceback (most recent call last):
  File "/home/punarbasu/Installations/sage-5.0.beta11/local/bin/sage-notebook", line 34, in <module>
    exec cmd
  File "<string>", line 1, in <module>
  File "/home/punarbasu/Installations/sage-5.0.beta11/devel/sagenb/sagenb/notebook/notebook_object.py", line 217, in __call__
    return self.notebook(*args, **kwds)
  File "/home/punarbasu/Installations/sage-5.0.beta11/devel/sagenb/sagenb/notebook/run_notebook.py", line 202, in notebook_twisted
    nb = notebook.load_notebook(directory)
  File "/home/punarbasu/Installations/sage-5.0.beta11/devel/sagenb/sagenb/notebook/notebook.py", line 1809, in load_notebook
    import sagenb.notebook.twist
  File "/home/punarbasu/Installations/sage-5.0.beta11/devel/sagenb/sagenb/notebook/twist.py", line 42, in <module>
    from twisted.web2 import server, http, resource, channel
ImportError: No module named web2
```

In a [different installation](https://github.com/sagemath/sage/issues/11080#comment:144), I applied this ticket, #11080 and #11503 and came up with a broken jsmath/mathjax. ( It hasn't been a pleasant day for sure :( )



---

archive/issue_comments_126542.json:
```json
{
    "body": "<a id='comment:88'></a>\nReplying to [@ppurka](#comment%3A87):\n> Update: with the old sagenb it is unable to launch the notebook. So, I think this patch *needs* the new sagenb so as to be useful.\n\nYou might notice that #11080 is listed as dependency of this ticket...",
    "created_at": "2012-04-02T15:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126542",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:88'></a>
Replying to [@ppurka](#comment%3A87):
> Update: with the old sagenb it is unable to launch the notebook. So, I think this patch *needs* the new sagenb so as to be useful.

You might notice that #11080 is listed as dependency of this ticket...



---

archive/issue_comments_126543.json:
```json
{
    "body": "<a id='comment:89'></a>\nReplying to [@jdemeyer](#comment%3A88):\n> Replying to [@ppurka](#comment%3A87):\n> > Update: with the old sagenb it is unable to launch the notebook. So, I think this patch *needs* the new sagenb so as to be useful.\n\n> You might notice that #11080 is listed as dependency of this ticket...\n\nDidn't notice this comment. Actually, this ticket is listed as a dependency in #11080. And the patch is also listed in the description of #11080. That said, it is this set of tickets that will need to be merged probably at the same time:  #11080 #11874 #11078 #11503",
    "created_at": "2012-04-07T05:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126543",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:89'></a>
Replying to [@jdemeyer](#comment%3A88):
> Replying to [@ppurka](#comment%3A87):
> > Update: with the old sagenb it is unable to launch the notebook. So, I think this patch *needs* the new sagenb so as to be useful.

> You might notice that #11080 is listed as dependency of this ticket...

Didn't notice this comment. Actually, this ticket is listed as a dependency in #11080. And the patch is also listed in the description of #11080. That said, it is this set of tickets that will need to be merged probably at the same time:  #11080 #11874 #11078 #11503



---

archive/issue_events_134963.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-08T08:40:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134963"
}
```



---

archive/issue_events_134964.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-08T08:40:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "milestone_number": null,
    "milestone_title": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134964"
}
```



---

archive/issue_comments_126544.json:
```json
{
    "body": "Apply to the Sage library",
    "created_at": "2012-04-09T14:43:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126544",
    "user": "https://github.com/jdemeyer"
}
```

Apply to the Sage library



---

archive/issue_comments_126545.json:
```json
{
    "body": "<a id='comment:91'></a>\n**Attachment:** [sage-spkg-11874.patch.gz](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch.gz)\n\nI followed the installation instructions at #11080, but found that the \"remove-twisted\" patch from here fails to apply, at least to sage-5.0.prealpha0:\n\n```\n(sage subshell) linux-sqwp:sage-5.0.prealpha0 simon$ ./sage -hg qimport https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch.gz\nF\u00fcge trac-11874-remove-twisted.patch zur Seriendatei hinzu\nSAGE_ROOT=/home/simon/SAGE/sage-5.0.prealpha0\n(sage subshell) linux-sqwp:sage-5.0.prealpha0 simon$ ./sage -hg qpush\nWende trac-11874-remove-twisted.patch an\nWende Patch auf Datei spkg/install an\nFEHLSCHLAG von Teilst\u00fcck #1 in Zeile 220\n1 von 1 Teilst\u00fccken sind FEHLGESCHLAGEN -- speichere Ausschuss in Datei spkg/install.rej\nWende Patch auf Datei spkg/standard/deps an\nFEHLSCHLAG von Teilst\u00fcck #2 in Zeile 405\n1 von 2 Teilst\u00fccken sind FEHLGESCHLAGEN -- speichere Ausschuss in Datei spkg/standard/deps.rej\nPatch schlug fehl und Fortsetzung unm\u00f6glich (versuche -v)\nPatch schlug fehl, Fehlerabschnitte noch im Arbeitsverzeichnis\nFehler beim Anwenden. Bitte beheben und trac-11874-remove-twisted.patch aktualisieren\n```\nHere, one has\n\n```\n(sage subshell) linux-sqwp:sage-5.0.prealpha0 simon$ cat spkg/install.rej \n--- install\n+++ install\n@@ -221,7 +221,6 @@\n SYMPY=`newest_version sympy`\n TACHYON=`newest_version tachyon`\n TERMCAP=`newest_version termcap`\n-TWISTED=`newest_version twisted`\n ZLIB=`newest_version zlib`\n ZNPOLY=`newest_version zn_poly`\n ZODB=`newest_version zodb3`\n```\nIndeed, the \"TWISTED\" variable is now defined differently, namely\n\n```\nTWISTED=`$newest twisted`\nexport TWISTED\n```\nEasy to fix.\n\nHowever, the rejection at spkg/standard/deps is worse:\n\n```\n(sage subshell) linux-sqwp:sage-5.0.prealpha0 simon$ cat spkg/standard/deps.rej\n--- deps\n+++ deps\n@@ -407,44 +406,43 @@\n $(INST)/$(SAGE_ROOT_REPO): $(BASE) $(INST)/$(MERCURIAL)\n        +$(PIPE) \"$(SAGE_SPKG) $(SAGE_ROOT_REPO) 2>&1\" \"tee -a $(SAGE_LOGS)/$(SAGE_ROOT_REPO).log\"\n \n-# setuptools forgets to update easy-install.pth during parallel\n-# builds, so we build the relevant packages serially.  Note: To avoid\n-# branching, we haven't given explicit dependencies, but the chain's\n-# order is important.\n-$(INST)/$(SAGENB): $(BASE) $(INST)/$(SQLALCHEMY) $(INST)/$(PATCH)\n-       +$(PIPE) \"$(SAGE_SPKG) $(SAGENB) 2>&1\" \"tee -a $(SAGE_LOGS)/$(SAGENB).log\"\n-\n-$(INST)/$(SQLALCHEMY): $(BASE) $(INST)/$(SPHINX) $(INST)/$(PATCH)\n-       +$(PIPE) \"$(SAGE_SPKG) $(SQLALCHEMY) 2>&1\" \"tee -a $(SAGE_LOGS)/$(SQLALCHEMY).log\"\n-\n-$(INST)/$(SPHINX): $(BASE) $(INST)/$(JINJA2) $(INST)/$(PATCH)\n-       +$(PIPE) \"$(SAGE_SPKG) $(SPHINX) 2>&1\" \"tee -a $(SAGE_LOGS)/$(SPHINX).log\"\n-\n-$(INST)/$(JINJA2): $(BASE) $(INST)/$(PYGMENTS) $(INST)/$(PATCH)\n-       +$(PIPE) \"$(SAGE_SPKG) $(JINJA2) 2>&1\" \"tee -a $(SAGE_LOGS)/$(JINJA2).log\"\n-\n-$(INST)/$(PYGMENTS): $(BASE) $(INST)/$(ZODB) $(INST)/$(PATCH)\n-       +$(PIPE) \"$(SAGE_SPKG) $(PYGMENTS) 2>&1\" \"tee -a $(SAGE_LOGS)/$(PYGMENTS).log\"\n-\n-$(INST)/$(ZODB): $(BASE) $(INST)/$(TWISTED) $(INST)/$(PATCH)\n-       +$(PIPE) \"$(SAGE_SPKG) $(ZODB) 2>&1\" \"tee -a $(SAGE_LOGS)/$(ZODB).log\"\n-\n-$(INST)/$(TWISTED): $(BASE) $(INST)/$(PYTHON) $(INST)/$(PYTHON_GNUTLS) \\\n-                   $(INST)/$(PEXPECT) $(INST)/$(DOCUTILS) \\\n-                   $(INST)/$(SETUPTOOLS) $(INST)/$(PATCH)\n-       +$(PIPE) \"$(SAGE_SPKG) $(TWISTED) 2>&1\" \"tee -a $(SAGE_LOGS)/$(TWISTED).log\"\n-\n+# setuptools forgets to update easy-install.pth during parallel builds,\n+# so we build the relevant packages serially.  In order to enforce\n+# this, we artificially make every package in the list below depend on\n+# the package under it.\n+#\n # For reference and for when the setuptools problem is solved, here\n # are the actual dependencies:\n #\n-# sagenb: python pexpect twisted jinja2 sphinx docutils setuptools\n+# sagenb: python pexpect jinja2 sphinx docutils setuptools\n # sqlalchemy: python setuptools\n # sphinx: docutils jinja2 pygments\n # jinja2: python docutils setuptools\n # pygments: python setuptools\n-# twisted: python python_gnutls setuptools\n # zodb: python setuptools\n \n+$(INST)/$(SAGENB): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(SQLALCHEMY) \\\n+                   $(INST)/$(PEXPECT) $(INST)/$(JINJA2) $(INST)/$(SPHINX) \\\n+                   $(INST)/$(DOCUTILS) $(INST)/$(PATCH)\n+       +$(PIPE) \"$(SAGE_SPKG) $(SAGENB) 2>&1\" \"tee -a $(SAGE_LOGS)/$(SAGENB).log\"\n+\n+$(INST)/$(SQLALCHEMY): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(SPHINX) $(INST)/$(PATCH)\n+       +$(PIPE) \"$(SAGE_SPKG) $(SQLALCHEMY) 2>&1\" \"tee -a $(SAGE_LOGS)/$(SQLALCHEMY).log\"\n+\n+$(INST)/$(SPHINX): $(BASE) $(INST)/$(DOCUTILS) $(INST)/$(JINJA2) \\\n+                   $(INST)/$(PYGMENTS) $(INST)/$(PATCH)\n+       +$(PIPE) \"$(SAGE_SPKG) $(SPHINX) 2>&1\" \"tee -a $(SAGE_LOGS)/$(SPHINX).log\"\n+\n+$(INST)/$(JINJA2): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(PYGMENTS) \\\n+                   $(INST)/$(PATCH) $(INST)/$(DOCUTILS)\n+       +$(PIPE) \"$(SAGE_SPKG) $(JINJA2) 2>&1\" \"tee -a $(SAGE_LOGS)/$(JINJA2).log\"\n+\n+$(INST)/$(PYGMENTS): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(ZODB) $(INST)/$(PATCH)\n+       +$(PIPE) \"$(SAGE_SPKG) $(PYGMENTS) 2>&1\" \"tee -a $(SAGE_LOGS)/$(PYGMENTS).log\"\n+\n+$(INST)/$(ZODB): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(PATCH)\n+       +$(PIPE) \"$(SAGE_SPKG) $(ZODB) 2>&1\" \"tee -a $(SAGE_LOGS)/$(ZODB).log\"\n+\n ########################################################################\n # List all *build-time* dependencies of the Sage library.  These are,\n # on the one hand, programs needed for the build/install process of the\n```\n\nDoes that mean \"needs work\", or are the instructions at #11080 misleading?",
    "created_at": "2012-04-15T18:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126545",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:91'></a>
**Attachment:** [sage-spkg-11874.patch.gz](https://github.com/sagemath/sage/files/ticket11874/sage-spkg-11874.patch.gz)

I followed the installation instructions at #11080, but found that the "remove-twisted" patch from here fails to apply, at least to sage-5.0.prealpha0:

```
(sage subshell) linux-sqwp:sage-5.0.prealpha0 simon$ ./sage -hg qimport https://github.com/sagemath/sage/files/ticket11874/trac-11874-remove-twisted.patch.gz
Füge trac-11874-remove-twisted.patch zur Seriendatei hinzu
SAGE_ROOT=/home/simon/SAGE/sage-5.0.prealpha0
(sage subshell) linux-sqwp:sage-5.0.prealpha0 simon$ ./sage -hg qpush
Wende trac-11874-remove-twisted.patch an
Wende Patch auf Datei spkg/install an
FEHLSCHLAG von Teilstück #1 in Zeile 220
1 von 1 Teilstücken sind FEHLGESCHLAGEN -- speichere Ausschuss in Datei spkg/install.rej
Wende Patch auf Datei spkg/standard/deps an
FEHLSCHLAG von Teilstück #2 in Zeile 405
1 von 2 Teilstücken sind FEHLGESCHLAGEN -- speichere Ausschuss in Datei spkg/standard/deps.rej
Patch schlug fehl und Fortsetzung unmöglich (versuche -v)
Patch schlug fehl, Fehlerabschnitte noch im Arbeitsverzeichnis
Fehler beim Anwenden. Bitte beheben und trac-11874-remove-twisted.patch aktualisieren
```
Here, one has

```
(sage subshell) linux-sqwp:sage-5.0.prealpha0 simon$ cat spkg/install.rej 
--- install
+++ install
@@ -221,7 +221,6 @@
 SYMPY=`newest_version sympy`
 TACHYON=`newest_version tachyon`
 TERMCAP=`newest_version termcap`
-TWISTED=`newest_version twisted`
 ZLIB=`newest_version zlib`
 ZNPOLY=`newest_version zn_poly`
 ZODB=`newest_version zodb3`
```
Indeed, the "TWISTED" variable is now defined differently, namely

```
TWISTED=`$newest twisted`
export TWISTED
```
Easy to fix.

However, the rejection at spkg/standard/deps is worse:

```
(sage subshell) linux-sqwp:sage-5.0.prealpha0 simon$ cat spkg/standard/deps.rej
--- deps
+++ deps
@@ -407,44 +406,43 @@
 $(INST)/$(SAGE_ROOT_REPO): $(BASE) $(INST)/$(MERCURIAL)
        +$(PIPE) "$(SAGE_SPKG) $(SAGE_ROOT_REPO) 2>&1" "tee -a $(SAGE_LOGS)/$(SAGE_ROOT_REPO).log"
 
-# setuptools forgets to update easy-install.pth during parallel
-# builds, so we build the relevant packages serially.  Note: To avoid
-# branching, we haven't given explicit dependencies, but the chain's
-# order is important.
-$(INST)/$(SAGENB): $(BASE) $(INST)/$(SQLALCHEMY) $(INST)/$(PATCH)
-       +$(PIPE) "$(SAGE_SPKG) $(SAGENB) 2>&1" "tee -a $(SAGE_LOGS)/$(SAGENB).log"
-
-$(INST)/$(SQLALCHEMY): $(BASE) $(INST)/$(SPHINX) $(INST)/$(PATCH)
-       +$(PIPE) "$(SAGE_SPKG) $(SQLALCHEMY) 2>&1" "tee -a $(SAGE_LOGS)/$(SQLALCHEMY).log"
-
-$(INST)/$(SPHINX): $(BASE) $(INST)/$(JINJA2) $(INST)/$(PATCH)
-       +$(PIPE) "$(SAGE_SPKG) $(SPHINX) 2>&1" "tee -a $(SAGE_LOGS)/$(SPHINX).log"
-
-$(INST)/$(JINJA2): $(BASE) $(INST)/$(PYGMENTS) $(INST)/$(PATCH)
-       +$(PIPE) "$(SAGE_SPKG) $(JINJA2) 2>&1" "tee -a $(SAGE_LOGS)/$(JINJA2).log"
-
-$(INST)/$(PYGMENTS): $(BASE) $(INST)/$(ZODB) $(INST)/$(PATCH)
-       +$(PIPE) "$(SAGE_SPKG) $(PYGMENTS) 2>&1" "tee -a $(SAGE_LOGS)/$(PYGMENTS).log"
-
-$(INST)/$(ZODB): $(BASE) $(INST)/$(TWISTED) $(INST)/$(PATCH)
-       +$(PIPE) "$(SAGE_SPKG) $(ZODB) 2>&1" "tee -a $(SAGE_LOGS)/$(ZODB).log"
-
-$(INST)/$(TWISTED): $(BASE) $(INST)/$(PYTHON) $(INST)/$(PYTHON_GNUTLS) \
-                   $(INST)/$(PEXPECT) $(INST)/$(DOCUTILS) \
-                   $(INST)/$(SETUPTOOLS) $(INST)/$(PATCH)
-       +$(PIPE) "$(SAGE_SPKG) $(TWISTED) 2>&1" "tee -a $(SAGE_LOGS)/$(TWISTED).log"
-
+# setuptools forgets to update easy-install.pth during parallel builds,
+# so we build the relevant packages serially.  In order to enforce
+# this, we artificially make every package in the list below depend on
+# the package under it.
+#
 # For reference and for when the setuptools problem is solved, here
 # are the actual dependencies:
 #
-# sagenb: python pexpect twisted jinja2 sphinx docutils setuptools
+# sagenb: python pexpect jinja2 sphinx docutils setuptools
 # sqlalchemy: python setuptools
 # sphinx: docutils jinja2 pygments
 # jinja2: python docutils setuptools
 # pygments: python setuptools
-# twisted: python python_gnutls setuptools
 # zodb: python setuptools
 
+$(INST)/$(SAGENB): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(SQLALCHEMY) \
+                   $(INST)/$(PEXPECT) $(INST)/$(JINJA2) $(INST)/$(SPHINX) \
+                   $(INST)/$(DOCUTILS) $(INST)/$(PATCH)
+       +$(PIPE) "$(SAGE_SPKG) $(SAGENB) 2>&1" "tee -a $(SAGE_LOGS)/$(SAGENB).log"
+
+$(INST)/$(SQLALCHEMY): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(SPHINX) $(INST)/$(PATCH)
+       +$(PIPE) "$(SAGE_SPKG) $(SQLALCHEMY) 2>&1" "tee -a $(SAGE_LOGS)/$(SQLALCHEMY).log"
+
+$(INST)/$(SPHINX): $(BASE) $(INST)/$(DOCUTILS) $(INST)/$(JINJA2) \
+                   $(INST)/$(PYGMENTS) $(INST)/$(PATCH)
+       +$(PIPE) "$(SAGE_SPKG) $(SPHINX) 2>&1" "tee -a $(SAGE_LOGS)/$(SPHINX).log"
+
+$(INST)/$(JINJA2): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(PYGMENTS) \
+                   $(INST)/$(PATCH) $(INST)/$(DOCUTILS)
+       +$(PIPE) "$(SAGE_SPKG) $(JINJA2) 2>&1" "tee -a $(SAGE_LOGS)/$(JINJA2).log"
+
+$(INST)/$(PYGMENTS): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(ZODB) $(INST)/$(PATCH)
+       +$(PIPE) "$(SAGE_SPKG) $(PYGMENTS) 2>&1" "tee -a $(SAGE_LOGS)/$(PYGMENTS).log"
+
+$(INST)/$(ZODB): $(BASE) $(INST)/$(SETUPTOOLS) $(INST)/$(PATCH)
+       +$(PIPE) "$(SAGE_SPKG) $(ZODB) 2>&1" "tee -a $(SAGE_LOGS)/$(ZODB).log"
+
 ########################################################################
 # List all *build-time* dependencies of the Sage library.  These are,
 # on the one hand, programs needed for the build/install process of the
```

Does that mean "needs work", or are the instructions at #11080 misleading?



---

archive/issue_comments_126546.json:
```json
{
    "body": "<a id='comment:92'></a>\nEverything should apply on the latest beta: sage-5.0.beta13 (see also the dependencies on this ticket!).",
    "created_at": "2012-04-15T19:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126546",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:92'></a>
Everything should apply on the latest beta: sage-5.0.beta13 (see also the dependencies on this ticket!).



---

archive/issue_comments_126547.json:
```json
{
    "body": "<a id='comment:93'></a>\nApparently the instructions at #11080 where indeed misleading: It is not stated that one should start with sage-5.0.beta13. sage-5.0.prealpha0 does not suffice.",
    "created_at": "2012-04-15T19:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126547",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:93'></a>
Apparently the instructions at #11080 where indeed misleading: It is not stated that one should start with sage-5.0.beta13. sage-5.0.prealpha0 does not suffice.



---

archive/issue_comments_126548.json:
```json
{
    "body": "<a id='comment:94'></a>\nSo Simon, does everything seem to work with a recent beta (or rc0)?",
    "created_at": "2012-05-02T16:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126548",
    "user": "https://github.com/kini"
}
```

<a id='comment:94'></a>
So Simon, does everything seem to work with a recent beta (or rc0)?



---

archive/issue_comments_126549.json:
```json
{
    "body": "<a id='comment:95'></a>\nAs\u00a0#11080\u00a0has a positive review, shouldn't this one also?",
    "created_at": "2012-05-28T14:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126549",
    "user": "https://github.com/gutow"
}
```

<a id='comment:95'></a>
As #11080 has a positive review, shouldn't this one also?



---

archive/issue_events_134965.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-05-29T11:22:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134965"
}
```



---

archive/issue_events_134966.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-05-29T11:22:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134966"
}
```



---

archive/issue_comments_126550.json:
```json
{
    "body": "<a id='comment:96'></a>\neverything works on Sage 5.0.",
    "created_at": "2012-05-29T11:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126550",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:96'></a>
everything works on Sage 5.0.



---

archive/issue_events_134967.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T14:39:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "milestone_number": null,
    "milestone_title": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134967"
}
```



---

archive/issue_events_134968.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T14:39:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "milestone_number": null,
    "milestone_title": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134968"
}
```



---

archive/issue_events_134969.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-02T15:22:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134969"
}
```



---

archive/issue_events_134970.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-02T15:22:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134970"
}
```



---

archive/issue_comments_126551.json:
```json
{
    "body": "**Merged:** sage-5.2.beta0",
    "created_at": "2012-07-02T15:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126551",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.2.beta0



---

archive/issue_events_134971.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-23T06:51:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "milestone_number": null,
    "milestone_title": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134971"
}
```



---

archive/issue_events_134972.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-23T06:51:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134972"
}
```



---

archive/issue_comments_126552.json:
```json
{
    "body": "**Changing merged** from \"sage-5.2.beta0\" to \"\".",
    "created_at": "2012-07-23T06:51:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126552",
    "user": "https://github.com/jdemeyer"
}
```

**Changing merged** from "sage-5.2.beta0" to "".



---

archive/issue_comments_126553.json:
```json
{
    "body": "<a id='comment:99'></a>\nUnmerging this from sage-5.2 due to the serious security issue at #13270.",
    "created_at": "2012-07-23T06:51:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126553",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:99'></a>
Unmerging this from sage-5.2 due to the serious security issue at #13270.



---

archive/issue_events_134973.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-23T06:51:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134973"
}
```



---

archive/issue_events_134974.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-23T06:51:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134974"
}
```



---

archive/issue_events_134975.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-23T06:51:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134975"
}
```



---

archive/issue_events_134976.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T13:38:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134976"
}
```



---

archive/issue_events_134977.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T13:38:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134977"
}
```



---

archive/issue_comments_126554.json:
```json
{
    "body": "**Merged:** sage-5.2.beta0",
    "created_at": "2012-07-25T13:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126554",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.2.beta0



---

archive/issue_events_134978.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T13:38:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "milestone_number": null,
    "milestone_title": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134978"
}
```



---

archive/issue_events_134979.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T13:38:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11874#event-134979"
}
```



---

archive/issue_comments_126555.json:
```json
{
    "body": "**Changing author** from \"Rado Kirov, Jason Grout\" to \"Radoslav Kirov, Jason Grout\".",
    "created_at": "2016-04-15T20:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11874#issuecomment-126555",
    "user": "https://github.com/fchapoton"
}
```

**Changing author** from "Rado Kirov, Jason Grout" to "Radoslav Kirov, Jason Grout".
